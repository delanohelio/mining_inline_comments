{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMTg0MTM5", "number": 2775, "title": "When sequncer fails over, elect non-tail node as primary if possible.", "bodyText": "Overview\nDescription:\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution.\nRelated issue(s) (if applicable): #2575\nChecklist (Definition of Done):\n\n There are no TODOs left in the code\n Coding conventions (e.g. for logging, unit tests) have been followed\n Change is covered by automated tests\n Public API has Javadoc", "createdAt": "2020-09-24T05:01:36Z", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775", "merged": true, "mergeCommit": {"oid": "0bfd045efe1f9caa616e28cf78df91a393992703"}, "closed": true, "closedAt": "2020-10-06T21:23:08Z", "author": {"login": "WenbinZhu"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMdd_iAFqTQ5Njg5NTI2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPtckfAFqTUwMjUxMTc2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2ODk1MjYx", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-496895261", "createdAt": "2020-09-25T22:24:19Z", "commit": {"oid": "61045ee0cac5f1117574499d24c02e89c53f597c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMjoyNDoyMFrOHYVi-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMjoyNDoyMFrOHYVi-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI4MDg4OA==", "bodyText": "A way to save if-clauses might be:\nprimarySequencer = sequencer; if (!logTails.contains(sequencer)) { break; }\nThe only difference is that if there is no non-tail servers, your code picks the first sequencer in the loop iteration whereas mine picks the last one. Does this matter?", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#discussion_r495280888", "createdAt": "2020-09-25T22:24:20Z", "author": {"login": "Lujie1996"}, "path": "runtime/src/main/java/org/corfudb/runtime/view/LayoutBuilder.java", "diffHunk": "@@ -330,35 +332,48 @@ public LayoutBuilder mergePreviousSegment(int segmentIndex) {\n      * Moves a responsive server to the top of the sequencer server list.\n      * If all have failed, throws exception.\n      *\n-     * @param endpoints a non null set of Strings representing failed endpoints\n-     *\n+     * @param excludedNodes a non null set of Strings representing excluded endpoints\n      * @return this builder\n-     *\n-     * @throws LayoutModificationException is thrown if none of the sequencers in layout\n-     *         can be moved to the top of sequencer server list due to being unresponsive\n-     *         or a failed endpoint.\n+     * @throws LayoutModificationException if none of the sequencers in the layout can be\n+     *                                     moved to the top of sequencer server list due\n+     *                                     to being unresponsive or a failed endpoint.\n      */\n-    public LayoutBuilder assignResponsiveSequencerAsPrimary(@NonNull Set<String> endpoints) {\n-\n-        List<String> modifiedSequencerServers = new ArrayList<>(layout.getSequencers());\n-        for (int i = 0; i < modifiedSequencerServers.size(); i++) {\n-            String sequencerServer = modifiedSequencerServers.get(i);\n-\n-            // Add a sequencer server given sequencerServer is not already included in\n-            // endpoints AND it is not included in the unresponsive nodes of the layout.\n-            if (!endpoints.contains(sequencerServer) &&\n-                !layout.getUnresponsiveServers().contains(sequencerServer)) {\n-                modifiedSequencerServers.remove(sequencerServer);\n-                modifiedSequencerServers.add(0, sequencerServer);\n-                layout.setSequencers(modifiedSequencerServers);\n-                return this;\n+    public LayoutBuilder assignResponsiveSequencerAsPrimary(@NonNull Set<String> excludedNodes) {\n+        List<String> modifiedSequencers = new LinkedList<>(layout.getSequencers());\n+        String primarySequencer = null;\n+        Set<String> logTails = layout.getLastSegment().getStripes().stream()\n+                .map(LayoutStripe::getTailEndpoint)\n+                .collect(Collectors.toSet());\n+\n+        // Elect a sequencer server as primary given that server is not already included\n+        // in excludedNodes AND it is not included in the unresponsive nodes of the layout.\n+        // Non log tail servers have high priority to be elected for better load distribution.\n+        for (String sequencer : modifiedSequencers) {\n+            if (excludedNodes.contains(sequencer) ||\n+                    layout.getUnresponsiveServers().contains(sequencer)) {\n+                continue;\n+            }\n+            if (primarySequencer == null) {\n+                primarySequencer = sequencer;\n+            }\n+            if (!logTails.contains(sequencer)) {\n+                primarySequencer = sequencer;\n+                break;\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61045ee0cac5f1117574499d24c02e89c53f597c"}, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61045ee0cac5f1117574499d24c02e89c53f597c", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/61045ee0cac5f1117574499d24c02e89c53f597c", "committedDate": "2020-09-24T04:56:51Z", "message": "When sequncer fails over, elect non-tail node as primary if possible.\n\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution."}, "afterCommit": {"oid": "a52a773b5a20bc1263c96b04c4cfff614813e2bd", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/a52a773b5a20bc1263c96b04c4cfff614813e2bd", "committedDate": "2020-09-25T23:13:03Z", "message": "When sequncer fails over, elect non-tail node as primary if possible.\n\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a52a773b5a20bc1263c96b04c4cfff614813e2bd", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/a52a773b5a20bc1263c96b04c4cfff614813e2bd", "committedDate": "2020-09-25T23:13:03Z", "message": "When sequncer fails over, elect non-tail node as primary if possible.\n\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution."}, "afterCommit": {"oid": "08b0bf1bb18e5bd1f8fb0248ed8e7555dc70a580", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/08b0bf1bb18e5bd1f8fb0248ed8e7555dc70a580", "committedDate": "2020-09-30T01:10:14Z", "message": "When sequncer fails over, elect non-tail node as primary if possible.\n\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzk2MjI3", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-501396227", "createdAt": "2020-10-02T19:32:01Z", "commit": {"oid": "6bc57548bee8c4a5bf9c8a89a1ddf3ca7abd101d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxOTozMjowMVrOHb5T8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxOTozMjowMVrOHb5T8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAxMjU5NA==", "bodyText": "Unused", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#discussion_r499012594", "createdAt": "2020-10-02T19:32:01Z", "author": {"login": "zhangn49"}, "path": "test/src/test/java/org/corfudb/infrastructure/LayoutBuilderTest.java", "diffHunk": "@@ -1,5 +1,6 @@\n package org.corfudb.infrastructure;\n \n+import com.google.common.collect.Sets;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6bc57548bee8c4a5bf9c8a89a1ddf3ca7abd101d"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzYwMTg0", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-502360184", "createdAt": "2020-10-05T19:35:43Z", "commit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzYxMzI3", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-502361327", "createdAt": "2020-10-05T19:37:29Z", "commit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxOTozNzoyOVrOHcrBbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxOTozNzoyOVrOHcrBbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgyNzA1Mg==", "bodyText": "can you please use Optional instead of null", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#discussion_r499827052", "createdAt": "2020-10-05T19:37:29Z", "author": {"login": "xnull"}, "path": "runtime/src/main/java/org/corfudb/runtime/view/LayoutBuilder.java", "diffHunk": "@@ -328,37 +330,50 @@ public LayoutBuilder mergePreviousSegment(int segmentIndex) {\n \n     /**\n      * Moves a responsive server to the top of the sequencer server list.\n+     * Tries to avoid electing a log tail node if possible to have better load distribution.\n      * If all have failed, throws exception.\n      *\n-     * @param endpoints a non null set of Strings representing failed endpoints\n-     *\n+     * @param excludedNodes a non null set of Strings representing excluded endpoints\n      * @return this builder\n-     *\n-     * @throws LayoutModificationException is thrown if none of the sequencers in layout\n-     *         can be moved to the top of sequencer server list due to being unresponsive\n-     *         or a failed endpoint.\n+     * @throws LayoutModificationException if none of the sequencers in the layout can be\n+     *                                     moved to the top of sequencer server list due\n+     *                                     to being unresponsive or a failed endpoint.\n      */\n-    public LayoutBuilder assignResponsiveSequencerAsPrimary(@NonNull Set<String> endpoints) {\n-\n-        List<String> modifiedSequencerServers = new ArrayList<>(layout.getSequencers());\n-        for (int i = 0; i < modifiedSequencerServers.size(); i++) {\n-            String sequencerServer = modifiedSequencerServers.get(i);\n-\n-            // Add a sequencer server given sequencerServer is not already included in\n-            // endpoints AND it is not included in the unresponsive nodes of the layout.\n-            if (!endpoints.contains(sequencerServer) &&\n-                !layout.getUnresponsiveServers().contains(sequencerServer)) {\n-                modifiedSequencerServers.remove(sequencerServer);\n-                modifiedSequencerServers.add(0, sequencerServer);\n-                layout.setSequencers(modifiedSequencerServers);\n-                return this;\n+    public LayoutBuilder assignResponsiveSequencerAsPrimary(@NonNull Set<String> excludedNodes) {\n+        List<String> modifiedSequencers = new LinkedList<>(layout.getSequencers());\n+        String primarySequencer = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzY1MTc0", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-502365174", "createdAt": "2020-10-05T19:43:11Z", "commit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxOTo0MzoxMVrOHcrMfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxOTo0MzoxMVrOHcrMfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgyOTg4Nw==", "bodyText": "it can be improved:\nLinkedList<String> modifiedSequencers = new LinkedList<>(layout.getSequencers());\n...\nmodifiedSequencers.addFirst(primarySequencer);", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#discussion_r499829887", "createdAt": "2020-10-05T19:43:11Z", "author": {"login": "xnull"}, "path": "runtime/src/main/java/org/corfudb/runtime/view/LayoutBuilder.java", "diffHunk": "@@ -328,37 +330,50 @@ public LayoutBuilder mergePreviousSegment(int segmentIndex) {\n \n     /**\n      * Moves a responsive server to the top of the sequencer server list.\n+     * Tries to avoid electing a log tail node if possible to have better load distribution.\n      * If all have failed, throws exception.\n      *\n-     * @param endpoints a non null set of Strings representing failed endpoints\n-     *\n+     * @param excludedNodes a non null set of Strings representing excluded endpoints\n      * @return this builder\n-     *\n-     * @throws LayoutModificationException is thrown if none of the sequencers in layout\n-     *         can be moved to the top of sequencer server list due to being unresponsive\n-     *         or a failed endpoint.\n+     * @throws LayoutModificationException if none of the sequencers in the layout can be\n+     *                                     moved to the top of sequencer server list due\n+     *                                     to being unresponsive or a failed endpoint.\n      */\n-    public LayoutBuilder assignResponsiveSequencerAsPrimary(@NonNull Set<String> endpoints) {\n-\n-        List<String> modifiedSequencerServers = new ArrayList<>(layout.getSequencers());\n-        for (int i = 0; i < modifiedSequencerServers.size(); i++) {\n-            String sequencerServer = modifiedSequencerServers.get(i);\n-\n-            // Add a sequencer server given sequencerServer is not already included in\n-            // endpoints AND it is not included in the unresponsive nodes of the layout.\n-            if (!endpoints.contains(sequencerServer) &&\n-                !layout.getUnresponsiveServers().contains(sequencerServer)) {\n-                modifiedSequencerServers.remove(sequencerServer);\n-                modifiedSequencerServers.add(0, sequencerServer);\n-                layout.setSequencers(modifiedSequencerServers);\n-                return this;\n+    public LayoutBuilder assignResponsiveSequencerAsPrimary(@NonNull Set<String> excludedNodes) {\n+        List<String> modifiedSequencers = new LinkedList<>(layout.getSequencers());\n+        String primarySequencer = null;\n+\n+        // Consider only tail nodes in the last segment.\n+        Set<String> logTails = layout.getLastSegment().getStripes().stream()\n+                .map(LayoutStripe::getTailEndpoint)\n+                .collect(Collectors.toSet());\n+\n+        // Elect a sequencer server as primary given that server is not already included\n+        // in excludedNodes AND it is not included in the unresponsive nodes of the layout.\n+        // Non log tail servers have high priority to be elected for better load distribution.\n+        for (String sequencer : modifiedSequencers) {\n+            if (excludedNodes.contains(sequencer) ||\n+                    layout.getUnresponsiveServers().contains(sequencer)) {\n+                continue;\n+            }\n+            primarySequencer = sequencer;\n+            if (!logTails.contains(sequencer)) {\n+                break;\n             }\n         }\n \n-        log.warn(\"Failover to a responsive sequencer server failed. Each of the layout \" +\n-                 \"sequencers:{} is either a failed endpoint or an unresponsive server\",\n-                 modifiedSequencerServers.toString());\n-        throw new LayoutModificationException(\"All sequencers failed.\");\n+        if (primarySequencer == null) {\n+            log.warn(\"Failover to a responsive sequencer server failed. Each of the layout \" +\n+                            \"sequencers:{} is either a failed endpoint or an unresponsive server\",\n+                    modifiedSequencers.toString());\n+            throw new LayoutModificationException(\"All sequencers failed.\");\n+        }\n+\n+        modifiedSequencers.remove(primarySequencer);\n+        modifiedSequencers.add(0, primarySequencer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6979a228e0f970a2f383bcac940d7d3ca1c95677", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/6979a228e0f970a2f383bcac940d7d3ca1c95677", "committedDate": "2020-10-05T20:38:36Z", "message": "When sequncer fails over, elect non-tail node as primary if possible.\n\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/99356008ddbe162f257858acfa56b2a991a6a2df", "committedDate": "2020-10-02T22:16:30Z", "message": "Merge branch 'master' into better_sequencer_election"}, "afterCommit": {"oid": "6979a228e0f970a2f383bcac940d7d3ca1c95677", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/6979a228e0f970a2f383bcac940d7d3ca1c95677", "committedDate": "2020-10-05T20:38:36Z", "message": "When sequncer fails over, elect non-tail node as primary if possible.\n\nLog tail nodes need to serve queries, so when sequencer fails over, we\ntry to elect a non-tail node as the primary sequencer if possible to\nhave better load distribution."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDA0MjI1", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-502404225", "createdAt": "2020-10-05T20:41:20Z", "commit": {"oid": "99356008ddbe162f257858acfa56b2a991a6a2df"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo0MTo0MlrOHctCig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMDo0MTo0MlrOHctCig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2MDEwNg==", "bodyText": "I have run your test with the previous version and the current one, it seems that the previous version works even better.\nIt's not clear to me what improvement has been done if your test works the same way for both versions.\nRegarding the check above, as I understand it must be ENDPOINT_0, so why you expect to see ENDPOINT_1 here?", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#discussion_r499860106", "createdAt": "2020-10-05T20:41:42Z", "author": {"login": "xnull"}, "path": "test/src/test/java/org/corfudb/infrastructure/LayoutBuilderTest.java", "diffHunk": "@@ -418,6 +402,61 @@ public void unsuccessfulSequencerFailoverThrowsException() throws Exception {\n                 .addUnresponsiveServers(Collections.singleton(SERVERS.ENDPOINT_1))\n                 .addUnresponsiveServers(Collections.singleton(SERVERS.ENDPOINT_2))\n                 .assignResponsiveSequencerAsPrimary(Collections.singleton(SERVERS.ENDPOINT_0));\n+\n         layoutBuilder.build();\n     }\n+\n+    /**\n+     * This test verifies that when primary sequencer fails over, we try to assign\n+     * a non log tail node as new primary sequencer if possible to achieve better\n+     * load distribution.\n+     */\n+    @Test\n+    public void assignPrimarySequencerToNonTailNodeIfPossible() {\n+        Layout originalLayout = new TestLayoutBuilder()\n+                .setEpoch(1L)\n+                .addLayoutServer(SERVERS.PORT_0)\n+                .addLayoutServer(SERVERS.PORT_1)\n+                .addLayoutServer(SERVERS.PORT_2)\n+                .addSequencer(SERVERS.PORT_0)\n+                .addSequencer(SERVERS.PORT_1)\n+                .addSequencer(SERVERS.PORT_2)\n+                .buildSegment()\n+                .buildStripe()\n+                .addLogUnit(SERVERS.PORT_1)\n+                .addLogUnit(SERVERS.PORT_2)\n+                .addToSegment()\n+                .buildStripe()\n+                .addLogUnit(SERVERS.PORT_2)\n+                .addLogUnit(SERVERS.PORT_0)\n+                .addToSegment()\n+                .buildStripe()\n+                .addLogUnit(SERVERS.PORT_2)\n+                .addToSegment()\n+                .addToLayout()\n+                .build();\n+\n+        // All servers responsive, server 1 is the only non-tail node.\n+        LayoutBuilder layoutBuilder = new LayoutBuilder(originalLayout);\n+        Layout newLayout = layoutBuilder\n+                .assignResponsiveSequencerAsPrimary(Collections.emptySet())\n+                .build();\n+        assertThat(newLayout.getPrimarySequencer()).isEqualTo(SERVERS.ENDPOINT_1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6979a228e0f970a2f383bcac940d7d3ca1c95677"}, "originalPosition": 160}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNTExNzYz", "url": "https://github.com/CorfuDB/CorfuDB/pull/2775#pullrequestreview-502511763", "createdAt": "2020-10-06T00:43:02Z", "commit": {"oid": "6979a228e0f970a2f383bcac940d7d3ca1c95677"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4066, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}