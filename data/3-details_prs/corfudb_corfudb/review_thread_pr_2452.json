{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNTk0MjYw", "number": 2452, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDo1OToxM1rODj_Yow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDo1OToxM1rODj_Yow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MDY1MjUxOnYy", "diffSide": "RIGHT", "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDo1OToxM1rOFwGoBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMjoyMjo1MFrOFwHIGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk4NDUxNg==", "bodyText": "Can we remove the manageEventLoop flag, and set the eventLoopGroup field in this contructor only? Then in close() we can simply check if eventLoopGroup is null and close it it not null.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2452#discussion_r385984516", "createdAt": "2020-02-29T00:59:13Z", "author": {"login": "WenbinZhu"}, "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "diffHunk": "@@ -672,11 +680,11 @@ public NettyClientRouter(String host, Integer port, Boolean tls,\n     public NettyClientRouter(@Nonnull NodeLocator node,\n         @Nonnull CorfuRuntimeParameters parameters) {\n         this(node, parameters.getSocketType()\n-            .getGenerator().generate(Runtime.getRuntime().availableProcessors() * 2,\n+            .getGenerator().generate(parameters.getNettyEventLoopThreads(),\n                 new ThreadFactoryBuilder()\n                     .setDaemon(true)\n                     .setNameFormat(parameters.getNettyEventLoopThreadFormat())\n-                    .build()), parameters);\n+                    .build()), parameters, true);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64f84dd10b9b3277c9bad3b3eeee8e0c613d266c"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk5MjcyOA==", "bodyText": "Discussed offline. This change is less invasive.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2452#discussion_r385992728", "createdAt": "2020-02-29T02:22:50Z", "author": {"login": "Maithem"}, "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "diffHunk": "@@ -672,11 +680,11 @@ public NettyClientRouter(String host, Integer port, Boolean tls,\n     public NettyClientRouter(@Nonnull NodeLocator node,\n         @Nonnull CorfuRuntimeParameters parameters) {\n         this(node, parameters.getSocketType()\n-            .getGenerator().generate(Runtime.getRuntime().availableProcessors() * 2,\n+            .getGenerator().generate(parameters.getNettyEventLoopThreads(),\n                 new ThreadFactoryBuilder()\n                     .setDaemon(true)\n                     .setNameFormat(parameters.getNettyEventLoopThreadFormat())\n-                    .build()), parameters);\n+                    .build()), parameters, true);\n     }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk4NDUxNg=="}, "originalCommit": {"oid": "64f84dd10b9b3277c9bad3b3eeee8e0c613d266c"}, "originalPosition": 92}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2016, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}