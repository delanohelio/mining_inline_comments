{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNjgzNjA5", "number": 2306, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwODo1Mjo0OFrODXXW7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMTo0MTozNFrODXteoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODI2NTQwOnYy", "diffSide": "RIGHT", "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowser.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwODo1Mjo0OFrOFcoc4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMzozNDo1MFrOFdIE2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzIwMQ==", "bodyText": "what if namespace or/and table doesn't exist?", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r365567201", "createdAt": "2020-01-12T08:52:48Z", "author": {"login": "xnull"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowser.java", "diffHunk": "@@ -81,10 +82,23 @@ public void listTables(String namespace)\n     {\n         log.info(\"\\n=====Tables=======\\n\");\n         for (CorfuStoreMetadata.TableName tableName : runtime.getTableRegistry()\n-            .listTables(namespace)) {\n+                .listTables(namespace)) {\n             log.info(\"Table: \" + tableName.getTableName());\n             log.info(\"Namespace: \" + tableName.getNamespace());\n         }\n         log.info(\"\\n======================\\n\");\n     }\n+\n+    /**\n+     * Print information about a specific table in CorfuStore\n+     */\n+    public void printTableInfo(String namespace, String tablename) {\n+        log.info(\"\\n======================\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA4NTMzOQ==", "bodyText": "Good point, I think its better to detect and fail gracefully. fixed in latest patch. thanks", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r366085339", "createdAt": "2020-01-13T23:34:50Z", "author": {"login": "hisundar"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowser.java", "diffHunk": "@@ -81,10 +82,23 @@ public void listTables(String namespace)\n     {\n         log.info(\"\\n=====Tables=======\\n\");\n         for (CorfuStoreMetadata.TableName tableName : runtime.getTableRegistry()\n-            .listTables(namespace)) {\n+                .listTables(namespace)) {\n             log.info(\"Table: \" + tableName.getTableName());\n             log.info(\"Namespace: \" + tableName.getNamespace());\n         }\n         log.info(\"\\n======================\\n\");\n     }\n+\n+    /**\n+     * Print information about a specific table in CorfuStore\n+     */\n+    public void printTableInfo(String namespace, String tablename) {\n+        log.info(\"\\n======================\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzIwMQ=="}, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODI2NjEwOnYy", "diffSide": "RIGHT", "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwODo1NDowMVrOFcodOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMzozNTo1OFrOFdIGHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzI4OA==", "bodyText": "let's use Optional here and avoid using null-s", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r365567288", "createdAt": "2020-01-12T08:54:01Z", "author": {"login": "xnull"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "diffHunk": "@@ -75,17 +75,23 @@ public static void main(String[] args) {\n             log.info(\"Successfully connected to {}\", singleNodeEndpoint);\n \n             CorfuStoreBrowser browser = new CorfuStoreBrowser(runtime);\n+            CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table;\n+            String namespace = opts.containsKey(\"--namespace\") ?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA4NTY2Mg==", "bodyText": "actually using null makes it easier to detect and fail gracefully.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r366085662", "createdAt": "2020-01-13T23:35:58Z", "author": {"login": "hisundar"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "diffHunk": "@@ -75,17 +75,23 @@ public static void main(String[] args) {\n             log.info(\"Successfully connected to {}\", singleNodeEndpoint);\n \n             CorfuStoreBrowser browser = new CorfuStoreBrowser(runtime);\n+            CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table;\n+            String namespace = opts.containsKey(\"--namespace\") ?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzI4OA=="}, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODI2NjI1OnYy", "diffSide": "RIGHT", "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwODo1NDoxOVrOFcodSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwODo1NDoxOVrOFcodSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzMwNA==", "bodyText": "same here", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r365567304", "createdAt": "2020-01-12T08:54:19Z", "author": {"login": "xnull"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "diffHunk": "@@ -75,17 +75,23 @@ public static void main(String[] args) {\n             log.info(\"Successfully connected to {}\", singleNodeEndpoint);\n \n             CorfuStoreBrowser browser = new CorfuStoreBrowser(runtime);\n+            CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table;\n+            String namespace = opts.containsKey(\"--namespace\") ?\n+                    opts.get(\"--namespace\").toString() : null;\n+            String tableName = opts.containsKey(\"--tablename\") ?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODI2NjUxOnYy", "diffSide": "RIGHT", "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwODo1NDo1OVrOFcodag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMzozNjowOVrOFdIGUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzMzOA==", "bodyText": "please use an enum instead of strings", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r365567338", "createdAt": "2020-01-12T08:54:59Z", "author": {"login": "xnull"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "diffHunk": "@@ -75,17 +75,23 @@ public static void main(String[] args) {\n             log.info(\"Successfully connected to {}\", singleNodeEndpoint);\n \n             CorfuStoreBrowser browser = new CorfuStoreBrowser(runtime);\n+            CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table;\n+            String namespace = opts.containsKey(\"--namespace\") ?\n+                    opts.get(\"--namespace\").toString() : null;\n+            String tableName = opts.containsKey(\"--tablename\") ?\n+                    opts.get(\"--tablename\").toString() : null;\n             switch (operation) {\n                 case \"listTables\":\n-                    String namespace = opts.containsKey(\"--namespace\") ?\n-                        opts.get(\"--namespace\").toString() : null;\n                     browser.listTables(namespace);\n                     break;\n-\n+                case \"infoTable\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA4NTcxNQ==", "bodyText": "done. thanks", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r366085715", "createdAt": "2020-01-13T23:36:09Z", "author": {"login": "hisundar"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "diffHunk": "@@ -75,17 +75,23 @@ public static void main(String[] args) {\n             log.info(\"Successfully connected to {}\", singleNodeEndpoint);\n \n             CorfuStoreBrowser browser = new CorfuStoreBrowser(runtime);\n+            CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table;\n+            String namespace = opts.containsKey(\"--namespace\") ?\n+                    opts.get(\"--namespace\").toString() : null;\n+            String tableName = opts.containsKey(\"--tablename\") ?\n+                    opts.get(\"--tablename\").toString() : null;\n             switch (operation) {\n                 case \"listTables\":\n-                    String namespace = opts.containsKey(\"--namespace\") ?\n-                        opts.get(\"--namespace\").toString() : null;\n                     browser.listTables(namespace);\n                     break;\n-\n+                case \"infoTable\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU2NzMzOA=="}, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MTI4Njg0OnYy", "diffSide": "RIGHT", "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowser.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDo1NDo0MFrOFdEQbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMzozNjoyOVrOFdIGug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAyMjc2Ng==", "bodyText": "Use {} as a placeholder to make this statement clearer.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r366022766", "createdAt": "2020-01-13T20:54:40Z", "author": {"login": "lixinchengdu"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowser.java", "diffHunk": "@@ -81,10 +82,23 @@ public void listTables(String namespace)\n     {\n         log.info(\"\\n=====Tables=======\\n\");\n         for (CorfuStoreMetadata.TableName tableName : runtime.getTableRegistry()\n-            .listTables(namespace)) {\n+                .listTables(namespace)) {\n             log.info(\"Table: \" + tableName.getTableName());\n             log.info(\"Namespace: \" + tableName.getNamespace());\n         }\n         log.info(\"\\n======================\\n\");\n     }\n+\n+    /**\n+     * Print information about a specific table in CorfuStore\n+     */\n+    public void printTableInfo(String namespace, String tablename) {\n+        log.info(\"\\n======================\\n\");\n+        String fullName = TableRegistry.getFullyQualifiedTableName(namespace, tablename);\n+        UUID streamUUID = UUID.nameUUIDFromBytes(fullName.getBytes());\n+        CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table = getTable(namespace, tablename);\n+        log.info(\"Table \" + tablename + \" in namespace \" + namespace", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA4NTgxOA==", "bodyText": "done. thanks", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r366085818", "createdAt": "2020-01-13T23:36:29Z", "author": {"login": "hisundar"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowser.java", "diffHunk": "@@ -81,10 +82,23 @@ public void listTables(String namespace)\n     {\n         log.info(\"\\n=====Tables=======\\n\");\n         for (CorfuStoreMetadata.TableName tableName : runtime.getTableRegistry()\n-            .listTables(namespace)) {\n+                .listTables(namespace)) {\n             log.info(\"Table: \" + tableName.getTableName());\n             log.info(\"Namespace: \" + tableName.getNamespace());\n         }\n         log.info(\"\\n======================\\n\");\n     }\n+\n+    /**\n+     * Print information about a specific table in CorfuStore\n+     */\n+    public void printTableInfo(String namespace, String tablename) {\n+        log.info(\"\\n======================\\n\");\n+        String fullName = TableRegistry.getFullyQualifiedTableName(namespace, tablename);\n+        UUID streamUUID = UUID.nameUUIDFromBytes(fullName.getBytes());\n+        CorfuTable<CorfuDynamicKey, CorfuDynamicRecord> table = getTable(namespace, tablename);\n+        log.info(\"Table \" + tablename + \" in namespace \" + namespace", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAyMjc2Ng=="}, "originalCommit": {"oid": "5ba85c2ac4d354ffc8c8fda3465988b0eb0c4c94"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MTg4OTYwOnYy", "diffSide": "RIGHT", "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMTo0MTozNFrOFdJ_pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMTo0MTozNFrOFdJ_pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjExNjc3Mg==", "bodyText": "we can just call verifyNamespace here", "url": "https://github.com/CorfuDB/CorfuDB/pull/2306#discussion_r366116772", "createdAt": "2020-01-14T01:41:34Z", "author": {"login": "pankti-m"}, "path": "corfudb-tools/src/main/java/org/corfudb/browser/CorfuStoreBrowserMain.java", "diffHunk": "@@ -19,6 +20,28 @@\n  */\n @Slf4j\n public class CorfuStoreBrowserMain {\n+    private enum OperationType {\n+        listTables,\n+        infoTable,\n+        showTable,\n+        dropTable\n+    }\n+\n+    private static void verifyNamespace(String namespace) {\n+        if (namespace == null) {\n+            throw new IllegalArgumentException(\"Please specify --namespace\");\n+        }\n+    }\n+\n+    private static void verifyNamespaceAndTablename(String namespace, String tableName) {\n+        if (namespace == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ac9cd42ea2b7a55c06e483ea5c348ae67f6c27"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2038, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}