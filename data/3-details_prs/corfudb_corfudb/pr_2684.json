{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0ODIxNjg5", "number": 2684, "title": "Dedicated Executor for acquired lock monitoring", "bodyText": "Overview\nDescription:\nAdd a dedicated executor for lock acquired monitoring. The reason is that sharing the executor with the lease renewal task can lead to a blocking scenario, where if lease renewal task is stuck, lock client would not expire on the current lock (already lost).\nWhy should this be merged: fixes a potential bug when lease renewal is stuck.", "createdAt": "2020-08-07T20:52:46Z", "url": "https://github.com/CorfuDB/CorfuDB/pull/2684", "merged": true, "mergeCommit": {"oid": "f76e06b961395ac74368aa5810ba586f6f39820b"}, "closed": true, "closedAt": "2020-08-08T00:10:16Z", "author": {"login": "annym"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8r313gFqTQ2MzY2Mjc0MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8tj80ABqjM2MzUxMzA5OTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjYyNzQx", "url": "https://github.com/CorfuDB/CorfuDB/pull/2684#pullrequestreview-463662741", "createdAt": "2020-08-07T22:02:47Z", "commit": {"oid": "79afad060617ac3ca6f405e0b743dce53114411f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMjowMjo0N1rOG9qC6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMjowMjo0N1rOG9qC6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMwNTE5Mg==", "bodyText": "where do we define what gets executed when this thread runs?", "url": "https://github.com/CorfuDB/CorfuDB/pull/2684#discussion_r467305192", "createdAt": "2020-08-07T22:02:47Z", "author": {"login": "pankti-m"}, "path": "utils/src/main/java/org/corfudb/utils/lock/LockClient.java", "diffHunk": "@@ -85,6 +90,14 @@ public LockClient(UUID clientId, CorfuRuntime corfuRuntime) throws NoSuchMethodE\n             return t;\n         });\n \n+        this.leaseMonitorScheduler = Executors.newScheduledThreadPool(1, (r) ->\n+        {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79afad060617ac3ca6f405e0b743dce53114411f"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjY3NzM2", "url": "https://github.com/CorfuDB/CorfuDB/pull/2684#pullrequestreview-463667736", "createdAt": "2020-08-07T22:17:34Z", "commit": {"oid": "79afad060617ac3ca6f405e0b743dce53114411f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjg3MjY2", "url": "https://github.com/CorfuDB/CorfuDB/pull/2684#pullrequestreview-463687266", "createdAt": "2020-08-07T23:28:57Z", "commit": {"oid": "79afad060617ac3ca6f405e0b743dce53114411f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f55697d1c56f12e2250ccee7e968447b8f2bab37", "author": {"user": {"login": "annym", "name": "Anny Martinez"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/f55697d1c56f12e2250ccee7e968447b8f2bab37", "committedDate": "2020-08-08T00:06:17Z", "message": "Dedicated Executor for acquired lock monitoring"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79afad060617ac3ca6f405e0b743dce53114411f", "author": {"user": {"login": "annym", "name": "Anny Martinez"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/79afad060617ac3ca6f405e0b743dce53114411f", "committedDate": "2020-08-07T20:46:36Z", "message": "Dedicated Executor for acquired lock monitoring"}, "afterCommit": {"oid": "f55697d1c56f12e2250ccee7e968447b8f2bab37", "author": {"user": {"login": "annym", "name": "Anny Martinez"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/f55697d1c56f12e2250ccee7e968447b8f2bab37", "committedDate": "2020-08-08T00:06:17Z", "message": "Dedicated Executor for acquired lock monitoring"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4353, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}