{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNTMzODk5", "number": 2365, "title": "Retain caller's context when unwrapping exceptions", "bodyText": "Overview\nDescription:\nWhy should this be merged:\nRelated issue(s) (if applicable): #\nChecklist (Definition of Done):\n\n There are no TODOs left in the code\n Coding conventions (e.g. for logging, unit tests) have been followed\n Change is covered by automated tests\n Public API has Javadoc", "createdAt": "2020-02-05T19:00:22Z", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365", "merged": true, "mergeCommit": {"oid": "2967e5dd8d04ce848146361ba0092e510cc2ba64"}, "closed": true, "closedAt": "2020-02-25T01:26:27Z", "author": {"login": "optimol"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBcCMugFqTM1NDAxMzE5MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGs4IvAH2gAyMzcxNTMzODk5OjFkM2FiZTMzZWU0NWI2N2I1ZmNiMWM4ZDQ4MTRmNTIyYjBhOGNhZTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MDEzMTkx", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#pullrequestreview-354013191", "createdAt": "2020-02-05T20:19:44Z", "commit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMDoxOTo0NFrOFmF34g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQyMDoxOTo0NFrOFmF34g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ4NjQzNA==", "bodyText": "Please put a Java Doc comment.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#discussion_r375486434", "createdAt": "2020-02-05T20:19:44Z", "author": {"login": "vjeko"}, "path": "runtime/src/main/java/org/corfudb/util/Utils.java", "diffHunk": "@@ -239,6 +240,20 @@ public static StreamsAddressResponse getLogAddressSpace(Layout layout, CorfuRunt\n         return aggregateLogAddressSpace(luResponses);\n     }\n \n+    public static Throwable extractCauseWithCompleteStacktrace(Throwable throwable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MDE0MTE2", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#pullrequestreview-354014116", "createdAt": "2020-02-05T20:21:19Z", "commit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODE4MjYx", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#pullrequestreview-354818261", "createdAt": "2020-02-06T22:29:20Z", "commit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTMyNzg2", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#pullrequestreview-355532786", "createdAt": "2020-02-08T06:09:05Z", "commit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOFQwNjowOTowNVrOFnPYng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOFQwNjoxMDo1MVrOFnPY2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY5MDg0Ng==", "bodyText": "Empty line.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#discussion_r376690846", "createdAt": "2020-02-08T06:09:05Z", "author": {"login": "zhangn49"}, "path": "runtime/src/main/java/org/corfudb/util/CFUtils.java", "diffHunk": "@@ -1,6 +1,7 @@\n package org.corfudb.util;\n \n import com.google.common.util.concurrent.ThreadFactoryBuilder;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY5MDkwNA==", "bodyText": "optimize imports to keep alphabetic order", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#discussion_r376690904", "createdAt": "2020-02-08T06:10:51Z", "author": {"login": "zhangn49"}, "path": "runtime/src/main/java/org/corfudb/util/Utils.java", "diffHunk": "@@ -6,6 +6,7 @@\n import jdk.internal.org.objectweb.asm.util.TraceMethodVisitor;\n import lombok.extern.slf4j.Slf4j;\n import org.corfudb.runtime.view.stream.StreamAddressSpace;\n+import org.apache.commons.lang3.ArrayUtils;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NzY5OTY0", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#pullrequestreview-357769964", "createdAt": "2020-02-12T20:38:13Z", "commit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9f71dd938350eb93fe88914415fb6e32fe36351", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/e9f71dd938350eb93fe88914415fb6e32fe36351", "committedDate": "2020-02-20T18:27:31Z", "message": "Retain caller's context when unwrapping exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d86321716334211804bfc242a10847dfeb15d283", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/d86321716334211804bfc242a10847dfeb15d283", "committedDate": "2020-02-20T18:28:03Z", "message": "Address comments, add unit test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "771f106d88c22a95739dd17b901c1254808c7285", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/771f106d88c22a95739dd17b901c1254808c7285", "committedDate": "2020-02-05T17:55:13Z", "message": "Retain caller's context when unwrapping exceptions"}, "afterCommit": {"oid": "a09ee5db4a15b28226f5ec78273e7ff0a8e32055", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/a09ee5db4a15b28226f5ec78273e7ff0a8e32055", "committedDate": "2020-02-19T21:45:45Z", "message": "Retain caller's context when unwrapping exceptions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a09ee5db4a15b28226f5ec78273e7ff0a8e32055", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/a09ee5db4a15b28226f5ec78273e7ff0a8e32055", "committedDate": "2020-02-19T21:45:45Z", "message": "Retain caller's context when unwrapping exceptions"}, "afterCommit": {"oid": "d86321716334211804bfc242a10847dfeb15d283", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/d86321716334211804bfc242a10847dfeb15d283", "committedDate": "2020-02-20T18:28:03Z", "message": "Address comments, add unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0edc4a0bac422314cddd8100eab2218d0904b7cb", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/0edc4a0bac422314cddd8100eab2218d0904b7cb", "committedDate": "2020-02-20T20:17:07Z", "message": "Please checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMjA4MDk3", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#pullrequestreview-362208097", "createdAt": "2020-02-20T20:24:18Z", "commit": {"oid": "0edc4a0bac422314cddd8100eab2218d0904b7cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMDoyNDoxOFrOFsh8_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMDoyNDoxOFrOFsh8_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIzNzk0OA==", "bodyText": "Can you please write a comment describing what the test is suppose to be doing?", "url": "https://github.com/CorfuDB/CorfuDB/pull/2365#discussion_r382237948", "createdAt": "2020-02-20T20:24:18Z", "author": {"login": "vjeko"}, "path": "test/src/test/java/org/corfudb/runtime/utils/ExceptionContextTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package org.corfudb.runtime.utils;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledExecutorService;\n+\n+import org.corfudb.runtime.view.AbstractViewTest;\n+import org.corfudb.util.CFUtils;\n+\n+import org.junit.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotEquals;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public class ExceptionContextTest extends AbstractViewTest {\n+\n+    private static class DummyCausingException extends RuntimeException {\n+        DummyCausingException(String message) {\n+            super(message);\n+        }\n+    }\n+\n+    @Test\n+    public void validateCallerStackTracePresent() throws InterruptedException, ArithmeticException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0edc4a0bac422314cddd8100eab2218d0904b7cb"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e81403427d412b7777f95c39518658119539d69c", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/e81403427d412b7777f95c39518658119539d69c", "committedDate": "2020-02-20T20:32:32Z", "message": "Use CompletableFuture.supplyAsync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9880c0c7bdfe092d345fdb4200eb5a44deca0116", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/9880c0c7bdfe092d345fdb4200eb5a44deca0116", "committedDate": "2020-02-20T21:48:23Z", "message": "Use assertThrows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8915fa0abe11478126a4bfd3746603a71f80cc91", "author": {"user": {"login": "optimol", "name": "Anmol Ahuja"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/8915fa0abe11478126a4bfd3746603a71f80cc91", "committedDate": "2020-02-20T23:45:43Z", "message": "Add test for extractCauseWithCompleteStacktrace\n\nAlso add docstrings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3abe33ee45b67b5fcb1c8d4814f522b0a8cae7", "author": {"user": {"login": "apavan", "name": null}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/1d3abe33ee45b67b5fcb1c8d4814f522b0a8cae7", "committedDate": "2020-02-22T04:46:46Z", "message": "Merge branch 'master' into anm/exc_context"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3456, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}