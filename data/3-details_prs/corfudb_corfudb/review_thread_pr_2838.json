{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxOTc4NTk2", "number": 2838, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxOToxNjoxNlrOFAayWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDoxMDozM1rOFFU27A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1OTgzMTkyOnYy", "diffSide": "RIGHT", "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxOToxNjoxNlrOH-s_9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxOTo0NzoxNVrOH-ukqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUxMTAzMQ==", "bodyText": "There's also an instance in validateClientId.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r535511031", "createdAt": "2020-12-03T19:16:16Z", "author": {"login": "zfrenette"}, "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "diffHunk": "@@ -662,7 +663,7 @@ public void sendRequest(CorfuMessage.RequestPayloadMsg payload, long epoch,\n \n         // Write this message out on the channel\n         channel.writeAndFlush(request, channel.voidPromise());\n-        log.trace(\"Sent one-way request message: {}\", request.getHeader());\n+        log.trace(\"Sent one-way request message: {}\", TextFormat.shortDebugString(request.getHeader()));\n     }\n \n     /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1f284fe56bca5c4d3e8f79509d923bb2ed0bf9a"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUzNjgwOQ==", "bodyText": "Added", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r535536809", "createdAt": "2020-12-03T19:47:15Z", "author": {"login": "xcchang"}, "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "diffHunk": "@@ -662,7 +663,7 @@ public void sendRequest(CorfuMessage.RequestPayloadMsg payload, long epoch,\n \n         // Write this message out on the channel\n         channel.writeAndFlush(request, channel.voidPromise());\n-        log.trace(\"Sent one-way request message: {}\", request.getHeader());\n+        log.trace(\"Sent one-way request message: {}\", TextFormat.shortDebugString(request.getHeader()));\n     }\n \n     /**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUxMTAzMQ=="}, "originalCommit": {"oid": "d1f284fe56bca5c4d3e8f79509d923bb2ed0bf9a"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1OTg5MTg4OnYy", "diffSide": "RIGHT", "path": "runtime/src/main/java/org/corfudb/protocols/wireprotocol/ClientHandshakeHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxOToyNjo1NVrOH-tiaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxOTo0NzoyMFrOH-uk2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUxOTg0OQ==", "bodyText": "There's a couple of instances in NettyCorfuMsgEncoder as well.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r535519849", "createdAt": "2020-12-03T19:26:55Z", "author": {"login": "zfrenette"}, "path": "runtime/src/main/java/org/corfudb/protocols/wireprotocol/ClientHandshakeHandler.java", "diffHunk": "@@ -1,5 +1,6 @@\n package org.corfudb.protocols.wireprotocol;\n \n+import com.google.protobuf.TextFormat;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1f284fe56bca5c4d3e8f79509d923bb2ed0bf9a"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUzNjg1Nw==", "bodyText": "Added", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r535536857", "createdAt": "2020-12-03T19:47:20Z", "author": {"login": "xcchang"}, "path": "runtime/src/main/java/org/corfudb/protocols/wireprotocol/ClientHandshakeHandler.java", "diffHunk": "@@ -1,5 +1,6 @@\n package org.corfudb.protocols.wireprotocol;\n \n+import com.google.protobuf.TextFormat;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUxOTg0OQ=="}, "originalCommit": {"oid": "d1f284fe56bca5c4d3e8f79509d923bb2ed0bf9a"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMTI4MDUxOnYy", "diffSide": "RIGHT", "path": "infrastructure/src/main/java/org/corfudb/infrastructure/IServerRouter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDowODo0MlrOIFyq2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDoxODo0NlrOIFy8_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0Mzk2MA==", "bodyText": "can you wrap this with a if (log.isTraceEnabled())", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r542943960", "createdAt": "2020-12-15T00:08:42Z", "author": {"login": "Maithem"}, "path": "infrastructure/src/main/java/org/corfudb/infrastructure/IServerRouter.java", "diffHunk": "@@ -210,7 +211,8 @@ default void sendWrongEpochError(HeaderMsg requestHeader, ChannelHandlerContext\n         sendResponse(response, ctx);\n \n         log.trace(\"sendWrongEpochError[{}]: Incoming request received with wrong epoch, got {}, expected {}, \" +\n-                \"request was {}\", requestHeader.getRequestId(), requestHeader.getEpoch(), correctEpoch, requestHeader);\n+                \"request was {}\", requestHeader.getRequestId(), requestHeader.getEpoch(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ed51693566fe9d3733a47599815713a3ecd22b8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0ODYwNw==", "bodyText": "Added, thanks!", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r542948607", "createdAt": "2020-12-15T00:18:46Z", "author": {"login": "xcchang"}, "path": "infrastructure/src/main/java/org/corfudb/infrastructure/IServerRouter.java", "diffHunk": "@@ -210,7 +211,8 @@ default void sendWrongEpochError(HeaderMsg requestHeader, ChannelHandlerContext\n         sendResponse(response, ctx);\n \n         log.trace(\"sendWrongEpochError[{}]: Incoming request received with wrong epoch, got {}, expected {}, \" +\n-                \"request was {}\", requestHeader.getRequestId(), requestHeader.getEpoch(), correctEpoch, requestHeader);\n+                \"request was {}\", requestHeader.getRequestId(), requestHeader.getEpoch(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0Mzk2MA=="}, "originalCommit": {"oid": "8ed51693566fe9d3733a47599815713a3ecd22b8"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMTI4MjA4OnYy", "diffSide": "RIGHT", "path": "infrastructure/src/main/java/org/corfudb/infrastructure/IServerRouter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDowODo1OFrOIFyr8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDoxODo1M1rOIFy9Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0NDI0Mw==", "bodyText": "Here too.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r542944243", "createdAt": "2020-12-15T00:08:58Z", "author": {"login": "Maithem"}, "path": "infrastructure/src/main/java/org/corfudb/infrastructure/IServerRouter.java", "diffHunk": "@@ -225,7 +227,7 @@ default void sendNoBootstrapError(HeaderMsg requestHeader, ChannelHandlerContext\n         sendResponse(response, ctx);\n \n         log.trace(\"sendNoBootstrapError[{}]: Received request but not bootstrapped! Request was {}\",\n-                requestHeader.getRequestId(), requestHeader);\n+                requestHeader.getRequestId(), TextFormat.shortDebugString(requestHeader));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ed51693566fe9d3733a47599815713a3ecd22b8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0ODY0Mw==", "bodyText": "Added, thanks!", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r542948643", "createdAt": "2020-12-15T00:18:53Z", "author": {"login": "xcchang"}, "path": "infrastructure/src/main/java/org/corfudb/infrastructure/IServerRouter.java", "diffHunk": "@@ -225,7 +227,7 @@ default void sendNoBootstrapError(HeaderMsg requestHeader, ChannelHandlerContext\n         sendResponse(response, ctx);\n \n         log.trace(\"sendNoBootstrapError[{}]: Received request but not bootstrapped! Request was {}\",\n-                requestHeader.getRequestId(), requestHeader);\n+                requestHeader.getRequestId(), TextFormat.shortDebugString(requestHeader));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0NDI0Mw=="}, "originalCommit": {"oid": "8ed51693566fe9d3733a47599815713a3ecd22b8"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMTI4OTQwOnYy", "diffSide": "RIGHT", "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDoxMDozM1rOIFywfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDoxODo1N1rOIFy9QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0NTQwNQ==", "bodyText": "This will be computed even if it wont be logged. I think its better shorten the string if trace is enabled.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r542945405", "createdAt": "2020-12-15T00:10:33Z", "author": {"login": "Maithem"}, "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "diffHunk": "@@ -593,7 +594,7 @@ public void stop() {\n \n         // Write this message out on the channel\n         channel.writeAndFlush(request, channel.voidPromise());\n-        log.trace(\"Sent request message: {}\", request.getHeader());\n+        log.trace(\"Sent request message: {}\", TextFormat.shortDebugString(request.getHeader()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ed51693566fe9d3733a47599815713a3ecd22b8"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0ODY3Mw==", "bodyText": "Added, thanks!", "url": "https://github.com/CorfuDB/CorfuDB/pull/2838#discussion_r542948673", "createdAt": "2020-12-15T00:18:57Z", "author": {"login": "xcchang"}, "path": "runtime/src/main/java/org/corfudb/runtime/clients/NettyClientRouter.java", "diffHunk": "@@ -593,7 +594,7 @@ public void stop() {\n \n         // Write this message out on the channel\n         channel.writeAndFlush(request, channel.voidPromise());\n-        log.trace(\"Sent request message: {}\", request.getHeader());\n+        log.trace(\"Sent request message: {}\", TextFormat.shortDebugString(request.getHeader()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk0NTQwNQ=="}, "originalCommit": {"oid": "8ed51693566fe9d3733a47599815713a3ecd22b8"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1814, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}