{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMzk0MTU4", "number": 2765, "title": "Use A PRNG for ID Generation", "bodyText": "Overview\nIn CorfuDB UUIDs are mostly used for logging purposes, thus true\nrandomness is not required. Using UUID.randomUUID for transaction\nIDs can be really slow because it uses secureRandom. This patch\nuses a PRNG to generate those ids much faster.\nWhy should this be merged: Reduces the Transaction::begin time by up to 50+ milliseconds\nChecklist (Definition of Done):\n\n There are no TODOs left in the code\n Coding conventions (e.g. for logging, unit tests) have been followed\n Change is covered by automated tests\n Public API has Javadoc", "createdAt": "2020-09-09T01:11:16Z", "url": "https://github.com/CorfuDB/CorfuDB/pull/2765", "merged": true, "mergeCommit": {"oid": "eb9cb9c49fada3b11419b776f6cba6f5ed7b87f6"}, "closed": true, "closedAt": "2020-12-09T00:15:24Z", "author": {"login": "Maithem"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHDVisgFqTQ4NDYzMDUwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkQPY-ABqjQwODY2Mzk4MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NjMwNTAy", "url": "https://github.com/CorfuDB/CorfuDB/pull/2765#pullrequestreview-484630502", "createdAt": "2020-09-09T03:07:57Z", "commit": {"oid": "26e3aaad7a655e5ebea65e211b621f85c4b4bd05"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMzowNzo1N1rOHO0_bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMzowNzo1N1rOHO0_bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMxMDMxNw==", "bodyText": "Using UUID.randomUUID for transaction IDs can be really slow because it uses secureRandom.\n\nBenchmark                 Mode         Cnt                 Score \njavaUUIDGenerator         thrpt     2_613_099           ops/s\n\nUUID.randomUUID() is actually 100k times faster than 50ms", "url": "https://github.com/CorfuDB/CorfuDB/pull/2765#discussion_r485310317", "createdAt": "2020-09-09T03:07:57Z", "author": {"login": "xnull"}, "path": "runtime/src/main/java/org/corfudb/util/Utils.java", "diffHunk": "@@ -45,6 +46,19 @@ private Utils() {\n \n     private static final char[] hexArray = \"0123456789ABCDEF\".toCharArray();\n \n+\n+    /**\n+     * When true randomness is not required using UUID.randomUUID() can be really slow.\n+     * Blocking for 50+ ms for entropy to build up is not unusual. This method generates\n+     * random UUIDs based on a LCG with a thread local seed.\n+     * @return A psuedorandom\n+     */\n+    public static UUID genPseudorandomUUID() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26e3aaad7a655e5ebea65e211b621f85c4b4bd05"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26e3aaad7a655e5ebea65e211b621f85c4b4bd05", "author": {"user": {"login": "Maithem", "name": "Maithem"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/26e3aaad7a655e5ebea65e211b621f85c4b4bd05", "committedDate": "2020-09-09T01:03:21Z", "message": "Use A PRNG for ID Generation\n\nIn CorfuDB UUIDs are mostly used for logging purposes, thus true\nrandomness is not required. Using UUID.randomUUID for transaction\nIDs can be really slow because it uses secureRandom. This patch\nuses a PRNG to generate those ids much faster."}, "afterCommit": {"oid": "c44c26aca7911309617d6cce3be62508a6ace95f", "author": {"user": {"login": "Maithem", "name": "Maithem"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/c44c26aca7911309617d6cce3be62508a6ace95f", "committedDate": "2020-09-09T07:04:42Z", "message": "Use A PRNG for ID Generation\n\nIn CorfuDB UUIDs are mostly used for logging purposes, thus true\nrandomness is not required. Using UUID.randomUUID for transaction\nIDs can be really slow because it uses secureRandom. This patch\nuses a PRNG to generate those ids much faster."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NDEyMDMw", "url": "https://github.com/CorfuDB/CorfuDB/pull/2765#pullrequestreview-486412030", "createdAt": "2020-09-11T01:21:39Z", "commit": {"oid": "c44c26aca7911309617d6cce3be62508a6ace95f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MDU0NDk2", "url": "https://github.com/CorfuDB/CorfuDB/pull/2765#pullrequestreview-488054496", "createdAt": "2020-09-14T18:55:18Z", "commit": {"oid": "c44c26aca7911309617d6cce3be62508a6ace95f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MDczMDcx", "url": "https://github.com/CorfuDB/CorfuDB/pull/2765#pullrequestreview-488073071", "createdAt": "2020-09-14T19:22:32Z", "commit": {"oid": "c44c26aca7911309617d6cce3be62508a6ace95f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65f1a7cf909bc0192a6aa2f9c28265e5ac8277f8", "author": {"user": {"login": "Maithem", "name": "Maithem"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/65f1a7cf909bc0192a6aa2f9c28265e5ac8277f8", "committedDate": "2020-12-08T20:33:30Z", "message": "Use A PRNG for ID Generation\n\nIn CorfuDB UUIDs are mostly used for logging purposes, thus true\nrandomness is not required. Using UUID.randomUUID for transaction\nIDs can be really slow because it uses secureRandom. This patch\nuses a PRNG to generate those ids much faster."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9b320436a940b76b70aedb1feafbb63cf8bbe55", "author": {"user": {"login": "Maithem", "name": "Maithem"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/f9b320436a940b76b70aedb1feafbb63cf8bbe55", "committedDate": "2020-09-15T12:10:12Z", "message": "Merge branch 'master' into slowUUIDs"}, "afterCommit": {"oid": "65f1a7cf909bc0192a6aa2f9c28265e5ac8277f8", "author": {"user": {"login": "Maithem", "name": "Maithem"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/65f1a7cf909bc0192a6aa2f9c28265e5ac8277f8", "committedDate": "2020-12-08T20:33:30Z", "message": "Use A PRNG for ID Generation\n\nIn CorfuDB UUIDs are mostly used for logging purposes, thus true\nrandomness is not required. Using UUID.randomUUID for transaction\nIDs can be really slow because it uses secureRandom. This patch\nuses a PRNG to generate those ids much faster."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4039, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}