{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MzIyNDU2", "number": 538, "title": "Feature/global config smoke", "bodyText": "", "createdAt": "2020-06-24T16:39:03Z", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538", "merged": true, "mergeCommit": {"oid": "9f90f1ff32fd608d09b5121375b1c77a10845454"}, "closed": true, "closedAt": "2020-06-25T20:59:18Z", "author": {"login": "astiglme"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuZXVpgH2gAyNDM5MzIyNDU2OmQzNmJlNzAyMzk3MjBmYzhhOGEwMTcxM2YyZTM3NTM3NzY2YmU2ZmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu1Gg-gFqTQzNzg1Mzg0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d36be70239720fc8a8a01713f2e37537766be6fc", "author": {"user": {"login": "astiglme", "name": "Andreas Stiglmeier"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d36be70239720fc8a8a01713f2e37537766be6fc", "committedDate": "2020-06-24T12:39:43Z", "message": "Merge pull request #1 from jenkinsci/master\n\nupdate master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f2784cbe4e8268623660e0d531646419f669a0b", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/5f2784cbe4e8268623660e0d531646419f669a0b", "committedDate": "2020-06-24T15:10:08Z", "message": "refactor freestyle smoke test for global config page objects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a08275ec3730a490276c00379534aceb72bfa052", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/a08275ec3730a490276c00379534aceb72bfa052", "committedDate": "2020-06-24T16:06:51Z", "message": "refactor pipeline smoke test for global config page objects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39dd26d94c149494d64799d2709f956cc977ed95", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/39dd26d94c149494d64799d2709f956cc977ed95", "committedDate": "2020-06-24T16:16:46Z", "message": "align parser names for easier test execution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5ae86ef27e79314d551a18d86a08d6ceab01d0f", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d5ae86ef27e79314d551a18d86a08d6ceab01d0f", "committedDate": "2020-06-24T16:17:57Z", "message": "rollback temporary method change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODI0MjAx", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#pullrequestreview-436824201", "createdAt": "2020-06-24T16:42:52Z", "commit": {"oid": "bb1b24006a7cbf849cb5445ea84be2e1068e8665"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjo0Mjo1MlrOGoacEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjo0Mjo1MlrOGoacEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAyOTM5NQ==", "bodyText": "In den beiden Smoke Tests ist beim \u00d6ffnen der Details der Issues-Tab aktiv (und nicht der Categories-Tab). Daher musste ich auch beim GlobalConfigurationUiTest die Methode wieder \u00fcberschreiben, damits wieder passt.\nIst das normal, dass an dieser Stelle der aktive Tab auf einmal anders ist?\nWeil jedes andere Plugin und der Groovy Parser selbst (wenn er das einzige Plugin ist) hier eben den Categories-Tab aktiv hat.", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445029395", "createdAt": "2020-06-24T16:42:52Z", "author": {"login": "astiglme"}, "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/UiTest.java", "diffHunk": "@@ -251,6 +254,42 @@ protected void verifyCheckStyle(final Build build) {\n                 .hasErrorMessages(\"Can't create fingerprints for some files:\");\n     }\n \n+    protected void verifyPep8(final Build build) {\n+        build.open();\n+        AnalysisSummary pep8 = new AnalysisSummary(build, PEP8_ID);\n+        assertThat(pep8).isDisplayed()\n+                .hasTitleText(PEP8_NAME + \": 8 warnings\")\n+                .hasReferenceBuild(1)\n+                .hasInfoType(InfoType.ERROR);\n+\n+        AnalysisResult pep8details = pep8.openOverallResult();\n+        assertThat(pep8details).hasActiveTab(Tab.ISSUES)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb1b24006a7cbf849cb5445ea84be2e1068e8665"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a", "committedDate": "2020-06-24T17:19:50Z", "message": "fix different pep8 verification"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODUzNDUz", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#pullrequestreview-436853453", "createdAt": "2020-06-24T17:21:24Z", "commit": {"oid": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzoyMToyNFrOGob0Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzoyMToyNFrOGob0Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MjAwNw==", "bodyText": "In den beiden Smoke Tests ist beim \u00d6ffnen der Details der Issues-Tab aktiv (und nicht der Categories-Tab). Daher musste ich auch beim GlobalConfigurationUiTest die Methode wieder \u00fcberschreiben, damits wieder passt.\nIst das normal, dass an dieser Stelle der aktive Tab auf einmal anders ist?\nWeil jedes andere Plugin und der Groovy Parser selbst (wenn er das einzige Plugin ist) hier eben den Categories-Tab aktiv hat.", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445052007", "createdAt": "2020-06-24T17:21:24Z", "author": {"login": "astiglme"}, "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/UiTest.java", "diffHunk": "@@ -251,6 +254,43 @@ protected void verifyCheckStyle(final Build build) {\n                 .hasErrorMessages(\"Can't create fingerprints for some files:\");\n     }\n \n+    protected void verifyPep8(final Build build) {\n+        verifyPep8(build, 1);\n+    }\n+\n+    protected void verifyPep8(final Build build, final int referenceBuild) {\n+        build.open();\n+        AnalysisSummary pep8 = new AnalysisSummary(build, PEP8_ID);\n+        assertThat(pep8).isDisplayed()\n+                .hasTitleText(PEP8_NAME + \": 8 warnings\")\n+                .hasReferenceBuild(referenceBuild)\n+                .hasInfoType(InfoType.ERROR);\n+\n+        AnalysisResult pep8Details = verifyPep8Details(pep8);\n+\n+        pep8Details.openTab(Tab.ISSUES);\n+        IssuesDetailsTable issuesTable = pep8Details.openIssuesTable();\n+        assertThat(issuesTable).hasSize(8);\n+\n+        long normalIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Normal\")).count();\n+\n+        long lowIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Low\")).count();\n+\n+        assertThat(normalIssueCount).isEqualTo(6);\n+        assertThat(lowIssueCount).isEqualTo(2);\n+    }\n+\n+    protected AnalysisResult verifyPep8Details (final AnalysisSummary pep8) {\n+        AnalysisResult pep8Details = pep8.openOverallResult();\n+        assertThat(pep8Details).hasActiveTab(Tab.ISSUES)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODU1Mjg3", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#pullrequestreview-436855287", "createdAt": "2020-06-24T17:23:53Z", "commit": {"oid": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzoyMzo1NFrOGob55w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzoyMzo1NFrOGob55w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MzQxNQ==", "bodyText": "Wenn ich auch hier, wie bei den andern verify..() methoden die InfoView vergleichen m\u00f6chte, dann kann leider die info page nicht gefunden werden. (Obwohl es manuell per URL eingeben klappt)\nWissen Sie eventuell warum das so ist?\nassertThat(openInfoView(build, PEP8_ID)) .hasInfoMessages(\"-> found 1 file\", \"-> found 8 issues (skipped 0 duplicates)\", \"Issues delta (vs. reference build): outstanding: 0, new: 8, fixed: 0\") .hasErrorMessages(\"Can't create fingerprints for some files:\");", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445053415", "createdAt": "2020-06-24T17:23:54Z", "author": {"login": "astiglme"}, "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/UiTest.java", "diffHunk": "@@ -251,6 +254,43 @@ protected void verifyCheckStyle(final Build build) {\n                 .hasErrorMessages(\"Can't create fingerprints for some files:\");\n     }\n \n+    protected void verifyPep8(final Build build) {\n+        verifyPep8(build, 1);\n+    }\n+\n+    protected void verifyPep8(final Build build, final int referenceBuild) {\n+        build.open();\n+        AnalysisSummary pep8 = new AnalysisSummary(build, PEP8_ID);\n+        assertThat(pep8).isDisplayed()\n+                .hasTitleText(PEP8_NAME + \": 8 warnings\")\n+                .hasReferenceBuild(referenceBuild)\n+                .hasInfoType(InfoType.ERROR);\n+\n+        AnalysisResult pep8Details = verifyPep8Details(pep8);\n+\n+        pep8Details.openTab(Tab.ISSUES);\n+        IssuesDetailsTable issuesTable = pep8Details.openIssuesTable();\n+        assertThat(issuesTable).hasSize(8);\n+\n+        long normalIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Normal\")).count();\n+\n+        long lowIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Low\")).count();\n+\n+        assertThat(normalIssueCount).isEqualTo(6);\n+        assertThat(lowIssueCount).isEqualTo(2);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e2b3593839092b0e8b18df30bf40c467adcff2c", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/3e2b3593839092b0e8b18df30bf40c467adcff2c", "committedDate": "2020-06-24T22:36:03Z", "message": "add info view assertion for groovy parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e42e2b5668360ca6bf601a7ceb9440ac7a64cb", "author": {"user": null}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/14e42e2b5668360ca6bf601a7ceb9440ac7a64cb", "committedDate": "2020-06-24T22:42:42Z", "message": "remove unnecessary build.open"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3ODUzODQ4", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#pullrequestreview-437853848", "createdAt": "2020-06-25T20:58:41Z", "commit": {"oid": "14e42e2b5668360ca6bf601a7ceb9440ac7a64cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 173, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}