{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3OTIzODYz", "number": 476, "title": "JENKINS-62191 Add UI test for Dashboard View", "bodyText": "", "createdAt": "2020-05-14T11:10:40Z", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476", "merged": true, "mergeCommit": {"oid": "ee3789c5f0ad9cad0a6f96188b12f0d30c945b05"}, "closed": true, "closedAt": "2020-05-31T11:01:32Z", "author": {"login": "lukaskirner"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchSG-1AFqTQxMjA5MzM2MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmpj3MgFqTQyMTQ4MzMwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDkzMzYw", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#pullrequestreview-412093360", "createdAt": "2020-05-14T18:51:30Z", "commit": {"oid": "6995b441240d4a9a78d86a7386e617e62ac43c16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1MTozMFrOGVp4ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1MTozMFrOGVp4ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1OTU0Ng==", "bodyText": "Das gibt es schon im PageObject", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r425359546", "createdAt": "2020-05-14T18:51:30Z", "author": {"login": "uhafner"}, "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/DashboardTable.java", "diffHunk": "@@ -0,0 +1,61 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.WebElement;\n+\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.PageObject;\n+\n+public class DashboardTable extends PageObject {\n+\n+    private final String portletId;\n+\n+    public DashboardTable(final Build parent, final URL url, final String portletId) {\n+        super(parent, url);\n+        this.portletId = portletId;\n+\n+    }\n+\n+    public WebDriver open() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6995b441240d4a9a78d86a7386e617e62ac43c16"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMDk0ODUx", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#pullrequestreview-412094851", "createdAt": "2020-05-14T18:53:43Z", "commit": {"oid": "6995b441240d4a9a78d86a7386e617e62ac43c16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1Mzo0M1rOGVp9PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo1Mzo0M1rOGVp9PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM2MDcwMA==", "bodyText": "Wenn Sie einmal auf der Console mvn assertj:generate-assertions aufrufen, werden die custom Assertions generiert. Dann geht\nassertThat(headers).hasPaneHeaders(\"Job\",\"CheckStyle Warnings\" );", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r425360700", "createdAt": "2020-05-14T18:53:43Z", "author": {"login": "uhafner"}, "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/DashboardViewPortletUITest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.util.List;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.TestInstance;\n+import org.junit.jupiter.api.TestInstance.Lifecycle;\n+import org.openqa.selenium.WebElement;\n+\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.AbstractDashboardViewPortlet;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.DashboardView;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import org.jenkinsci.test.acceptance.po.Job;\n+\n+import io.jenkins.plugins.analysis.warnings.AnalysisResult.Tab;\n+import io.jenkins.plugins.analysis.warnings.AnalysisSummary.InfoType;\n+\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Integration tests for the dashboard portlet.\n+ *\n+ * @author Lukas Kirner\n+ */\n+public class DashboardViewPortletUITest extends AbstractJUnitTest {\n+    private static final String WARNINGS_PLUGIN_PREFIX = \"/\";\n+\n+    @Test\n+    public void shouldShowIcons() {\n+        DashboardView dashboardView = createDashboardWithStaticAnalysisPortlet(false, true);\n+        FreeStyleJob job = createFreeStyleJob(\"issue_filter/checkstyle-result.xml\");\n+        job.addPublisher(IssuesRecorder.class, recorder -> recorder.setTool(\"CheckStyle\"));\n+        job.save();\n+        Build build = shouldBuildJobSuccessfully(job);\n+\n+        DashboardTable dashboardTable = new DashboardTable(build, dashboardView.url, \"portlet-topPortlets-\" + 0);\n+        dashboardTable.open();\n+\n+        List<String> headers = dashboardTable.getPaneHeaders();\n+        assertThat(headers.get(0)).contains(\"Job\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6995b441240d4a9a78d86a7386e617e62ac43c16"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05f30dcc85bf08f1ba19311cc93d7edfb415becc", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/05f30dcc85bf08f1ba19311cc93d7edfb415becc", "committedDate": "2020-05-23T14:33:05Z", "message": "added Dashboard creation with portlet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0570594faeb38d0b338e791d5501dee92cbeeb8e", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/0570594faeb38d0b338e791d5501dee92cbeeb8e", "committedDate": "2020-05-23T14:33:05Z", "message": "Show icons test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bd29b770b2622099382f3a9f5a88f8a885232a8", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/7bd29b770b2622099382f3a9f5a88f8a885232a8", "committedDate": "2020-05-23T14:33:05Z", "message": "Adjust Dashboard Table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29ddc7f035babc87c00e2ba54404e4951332fdc1", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/29ddc7f035babc87c00e2ba54404e4951332fdc1", "committedDate": "2020-05-23T14:33:05Z", "message": "Added tests for multiple jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4f4be93eaeeb82970e4ede0211e7d32f37bc0d3", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/b4f4be93eaeeb82970e4ede0211e7d32f37bc0d3", "committedDate": "2020-05-23T14:30:56Z", "message": "Added tests for multiple jobs"}, "afterCommit": {"oid": "29ddc7f035babc87c00e2ba54404e4951332fdc1", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/29ddc7f035babc87c00e2ba54404e4951332fdc1", "committedDate": "2020-05-23T14:33:05Z", "message": "Added tests for multiple jobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3", "committedDate": "2020-05-23T14:40:33Z", "message": "Use generated asserts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjAyNzE2", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#pullrequestreview-419602716", "createdAt": "2020-05-27T20:57:44Z", "commit": {"oid": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1Nzo0NFrOGbc3eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMTo1OFrOGbdAQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNzY5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertThat(headers.get(0)).contains(\"Job\");\n          \n          \n            \n                    assertThat(headers.get(1)).contains(\"\");\n          \n          \n            \n                    assertThat(headers).containsExactly(\"Job\", \"\");", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r431437690", "createdAt": "2020-05-27T20:57:44Z", "author": {"login": "uhafner"}, "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/DashboardViewPortletUITest.java", "diffHunk": "@@ -0,0 +1,202 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.util.List;\n+import java.util.Map;\n+import org.junit.Test;\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.DashboardView;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import org.jenkinsci.test.acceptance.po.Job;\n+import io.jenkins.plugins.analysis.warnings.DashboardTable.DashboardTableEntry;\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Integration tests for the dashboard portlet.\n+ *\n+ * @author Lukas Kirner\n+ */\n+public class DashboardViewPortletUITest extends AbstractJUnitTest {\n+    private static final String WARNINGS_PLUGIN_PREFIX = \"/dashboard_test/\";\n+\n+    @Test\n+    public void shouldShowIcons() {\n+        DashboardView dashboardView = createDashboardWithStaticAnalysisPortlet(false, true);\n+        FreeStyleJob job = createFreeStyleJob(\"checkstyle-result.xml\");\n+        job.addPublisher(IssuesRecorder.class, recorder -> recorder.setTool(\"CheckStyle\"));\n+        job.save();\n+        Build build = shouldBuildJobSuccessfully(job);\n+\n+        DashboardTable dashboardTable = new DashboardTable(build, dashboardView.url);\n+\n+        List<String> headers = dashboardTable.getHeaders();\n+        assertThat(headers.get(0)).contains(\"Job\");\n+        assertThat(headers.get(1)).contains(\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODcwNQ==", "bodyText": "Genau genommen zeigt der Test, dass kein Text da ist. Gibt es eine M\u00f6glichkeit einen weiteren Getter im PO zu haben: getIconNames, der analog arbeitet?", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r431438705", "createdAt": "2020-05-27T20:59:40Z", "author": {"login": "uhafner"}, "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/DashboardViewPortletUITest.java", "diffHunk": "@@ -0,0 +1,202 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.util.List;\n+import java.util.Map;\n+import org.junit.Test;\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.DashboardView;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import org.jenkinsci.test.acceptance.po.Job;\n+import io.jenkins.plugins.analysis.warnings.DashboardTable.DashboardTableEntry;\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Integration tests for the dashboard portlet.\n+ *\n+ * @author Lukas Kirner\n+ */\n+public class DashboardViewPortletUITest extends AbstractJUnitTest {\n+    private static final String WARNINGS_PLUGIN_PREFIX = \"/dashboard_test/\";\n+\n+    @Test\n+    public void shouldShowIcons() {\n+        DashboardView dashboardView = createDashboardWithStaticAnalysisPortlet(false, true);\n+        FreeStyleJob job = createFreeStyleJob(\"checkstyle-result.xml\");\n+        job.addPublisher(IssuesRecorder.class, recorder -> recorder.setTool(\"CheckStyle\"));\n+        job.save();\n+        Build build = shouldBuildJobSuccessfully(job);\n+\n+        DashboardTable dashboardTable = new DashboardTable(build, dashboardView.url);\n+\n+        List<String> headers = dashboardTable.getHeaders();\n+        assertThat(headers.get(0)).contains(\"Job\");\n+        assertThat(headers.get(1)).contains(\"\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNzY5MA=="}, "originalCommit": {"oid": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzOTkzNw==", "bodyText": "Da meckert Checkstyle noch einige JavaDoc Kommentare an...", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r431439937", "createdAt": "2020-05-27T21:01:58Z", "author": {"login": "uhafner"}, "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/DashboardTable.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.net.URL;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+import org.openqa.selenium.WebElement;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.PageObject;\n+\n+public class DashboardTable extends PageObject {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e38454944de16cd871b9cb77c0004765557fa53f", "author": {"user": {"login": "lukaskirner", "name": "Lukas Kirner"}}, "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e38454944de16cd871b9cb77c0004765557fa53f", "committedDate": "2020-05-28T10:16:35Z", "message": "- Added icon src to headers\n- Checkstyle corrections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDgzMzA0", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#pullrequestreview-421483304", "createdAt": "2020-05-31T11:00:29Z", "commit": {"oid": "e38454944de16cd871b9cb77c0004765557fa53f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 147, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}