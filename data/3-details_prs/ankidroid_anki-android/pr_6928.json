{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMDQyMDE5", "number": 6928, "title": "Second per day", "bodyText": "I was looking at time, and I believe that using the constant SECONDS_PER_DAY everywhere would help reading the code (It's not obvious to me that 86400 is the number of second in a day)\nIt seems to me that saving it as a long is enough for all purpose. Most of the time SECONDS_PER_DAY is used it is transformed in long, or even int, soon after. The logic does not seems to actually require double anywhere, except when we multiply this number by a double, in which case we'll get a double anyway.", "createdAt": "2020-08-20T16:20:13Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6928", "merged": true, "mergeCommit": {"oid": "26f1a49c1e800f1e59ed209f8e2e2cb49ab391ce"}, "closed": true, "closedAt": "2020-08-21T16:29:11Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAyvDagFqTQ3MTc4MjA5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBALezABqjM2Nzg1MDk2MTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzgyMDk5", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#pullrequestreview-471782099", "createdAt": "2020-08-20T16:23:52Z", "commit": {"oid": "a23c714b01e2b191609c928b5988d1f4516b33a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyMzo1MlrOHEJasQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyMzo1MlrOHEJasQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMDY0MQ==", "bodyText": "this can't be correct?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"(cast((id/1000.0 - ?) / SECONDS_PER_DAY.0 as int))/? as day,\" +\n          \n          \n            \n                            \"(cast((id/1000.0 - ?) / \" + SECONDS_PER_DAY + \" as int))/? as day,\" +", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#discussion_r474110641", "createdAt": "2020-08-20T16:23:52Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -226,7 +226,7 @@ private String getRevlogTimeFilter(AxisType timespan, boolean inverse) {\n         long cut = mCol.getSched().getDayCutoff();\n         int cardCount = 0;\n         String query = \"select \" +\n-                \"(cast((id/1000.0 - ?) / 86400.0 as int))/? as day,\" +\n+                \"(cast((id/1000.0 - ?) / SECONDS_PER_DAY.0 as int))/? as day,\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23c714b01e2b191609c928b5988d1f4516b33a2"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a23c714b01e2b191609c928b5988d1f4516b33a2", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a23c714b01e2b191609c928b5988d1f4516b33a2", "committedDate": "2020-08-20T16:13:54Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}, "afterCommit": {"oid": "6bae9880ab8c047a038fa482485eceda1de7fe37", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6bae9880ab8c047a038fa482485eceda1de7fe37", "committedDate": "2020-08-20T16:26:02Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzgyOTAz", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#pullrequestreview-471782903", "createdAt": "2020-08-20T16:24:55Z", "commit": {"oid": "a23c714b01e2b191609c928b5988d1f4516b33a2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyNDo1NVrOHEJdMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoyNDo1NVrOHEJdMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMTI4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        col.getDb().execute(\"update cards set id = id - SECONDS_PER_DAY*1000 where id = ?\", id);\n          \n          \n            \n                        col.getDb().execute(\"update cards set id = id - \" + SECONDS_PER_DAY + \"*1000 where id = ?\", id);", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#discussion_r474111282", "createdAt": "2020-08-20T16:24:55Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/FinderTest.java", "diffHunk": "@@ -308,7 +308,7 @@ public void test_findCards() {\n             assertEquals(1, col.findCards(\"rated:2:2\").size());\n             // added\n             assertEquals(0, col.findCards(\"added:0\").size());\n-            col.getDb().execute(\"update cards set id = id - 86400*1000 where id = ?\", id);\n+            col.getDb().execute(\"update cards set id = id - SECONDS_PER_DAY*1000 where id = ?\", id);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23c714b01e2b191609c928b5988d1f4516b33a2"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6bae9880ab8c047a038fa482485eceda1de7fe37", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6bae9880ab8c047a038fa482485eceda1de7fe37", "committedDate": "2020-08-20T16:26:02Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}, "afterCommit": {"oid": "08653da4e3c373231dde30376cee0ef994bbffb8", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/08653da4e3c373231dde30376cee0ef994bbffb8", "committedDate": "2020-08-20T16:39:17Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "08653da4e3c373231dde30376cee0ef994bbffb8", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/08653da4e3c373231dde30376cee0ef994bbffb8", "committedDate": "2020-08-20T16:39:17Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}, "afterCommit": {"oid": "7c9a8a005d5f4c989a1a6c0714549dfc3780943d", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7c9a8a005d5f4c989a1a6c0714549dfc3780943d", "committedDate": "2020-08-20T17:36:51Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c9a8a005d5f4c989a1a6c0714549dfc3780943d", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7c9a8a005d5f4c989a1a6c0714549dfc3780943d", "committedDate": "2020-08-20T17:36:51Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}, "afterCommit": {"oid": "5047a1333f67f40cd625387159e61a5cbb34e3d6", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/5047a1333f67f40cd625387159e61a5cbb34e3d6", "committedDate": "2020-08-20T18:12:36Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODcyMDE5", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#pullrequestreview-471872019", "createdAt": "2020-08-20T18:21:58Z", "commit": {"oid": "5047a1333f67f40cd625387159e61a5cbb34e3d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyMTo1OFrOHEN5kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyMTo1OFrOHEN5kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDA4Mg==", "bodyText": "I had to read this to verify the what/why https://www.sqlite.org/lang_expr.html - seems legit", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#discussion_r474184082", "createdAt": "2020-08-20T18:21:58Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -226,7 +226,7 @@ private String getRevlogTimeFilter(AxisType timespan, boolean inverse) {\n         long cut = mCol.getSched().getDayCutoff();\n         int cardCount = 0;\n         String query = \"select \" +\n-                \"(cast((id/1000.0 - ?) / 86400.0 as int))/? as day,\" +\n+                \"(cast((id/1000.0 - ?) / \" + SECONDS_PER_DAY + \".0 as int))/? as day,\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5047a1333f67f40cd625387159e61a5cbb34e3d6"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODczMjM5", "url": "https://github.com/ankidroid/Anki-Android/pull/6928#pullrequestreview-471873239", "createdAt": "2020-08-20T18:23:44Z", "commit": {"oid": "da44312e58e28732351d97edb586244575051e4a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da44312e58e28732351d97edb586244575051e4a", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/da44312e58e28732351d97edb586244575051e4a", "committedDate": "2020-08-20T18:19:00Z", "message": "NF: getNSecsPerDay removed\n\nThis does not add readability over SECONDS_PER_DAY"}, "afterCommit": {"oid": "a44da2720ce69cd5e1039399b34b648ee0889236", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a44da2720ce69cd5e1039399b34b648ee0889236", "committedDate": "2020-08-20T19:37:52Z", "message": "NF: getNSecsPerDay removed\n\nThis does not add readability over SECONDS_PER_DAY"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9472fb3a56d5c9bceb6a441aaf7dfc226ef76fa", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e9472fb3a56d5c9bceb6a441aaf7dfc226ef76fa", "committedDate": "2020-08-21T08:02:54Z", "message": "NF: SECOND_PER_DAY as long"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "072821c8bdabc8c9156107914a0dc4e2c71dbb7b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/072821c8bdabc8c9156107914a0dc4e2c71dbb7b", "committedDate": "2020-08-21T08:03:34Z", "message": "NF: replace 86400 by SECONDS_PER_DAY"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1222bef3efd6fa87c18bfe59bb3a42f9aee673fe", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1222bef3efd6fa87c18bfe59bb3a42f9aee673fe", "committedDate": "2020-08-21T08:03:34Z", "message": "NF: getNSecsPerDay removed\n\nThis does not add readability over SECONDS_PER_DAY"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a44da2720ce69cd5e1039399b34b648ee0889236", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a44da2720ce69cd5e1039399b34b648ee0889236", "committedDate": "2020-08-20T19:37:52Z", "message": "NF: getNSecsPerDay removed\n\nThis does not add readability over SECONDS_PER_DAY"}, "afterCommit": {"oid": "1222bef3efd6fa87c18bfe59bb3a42f9aee673fe", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1222bef3efd6fa87c18bfe59bb3a42f9aee673fe", "committedDate": "2020-08-21T08:03:34Z", "message": "NF: getNSecsPerDay removed\n\nThis does not add readability over SECONDS_PER_DAY"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2956, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}