{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxODIzNjA5", "number": 6942, "title": "NF: Time abstraction used everywhere", "bodyText": "I honestly don't know whether you'll like or hate this PR. On the one hand, it improves testing, so you should probably like it. On the other hand, it changes a lot of code and even more some small methods, so you should not like it.\nMy initial goal is to simulate reviews with delays. To create delays without really waiting, I need to use a time interface. David created one, but it's only used in schedulers, which is limited. In particular, card/note creation still use real time. I also discovered that the finder use real time, etc...\nSo, I moved the time from schedulers to collection; I even give the mocked time during the very creation of the deck, adding a parameters to some methods. The methods that create IDS (which are timestamps) are moved to the time class.\nThe few methods that can't actually uses the simulated time are commented to warn about it.\nSo, from now on, we are free to use time as we want in our test !\nThe commit history is more realistic than what I usually do. So it's less beautiful.\u00a0But given the size of the PR, I kind of hope you'll accept it, I really don't wish to spend the time to do thing totally properly, as if I knew from the start what I needed to do", "createdAt": "2020-08-21T19:39:56Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6942", "merged": true, "mergeCommit": {"oid": "99db0009f8813576b27b09a09b43f4009c00251c"}, "closed": true, "closedAt": "2020-08-22T19:28:47Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBLgWZgBqjM2ODExNTQ5MjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBcrA2gBqjM2ODIxNzU5MTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "410adb9d2939e9c6af7ece4b3ebd023ca0b4c702", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/410adb9d2939e9c6af7ece4b3ebd023ca0b4c702", "committedDate": "2020-08-21T19:38:10Z", "message": "NF: change sched ver in test does not change time"}, "afterCommit": {"oid": "a1487da46efd469834dd5b4b9342980e6588bc72", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a1487da46efd469834dd5b4b9342980e6588bc72", "committedDate": "2020-08-21T21:15:19Z", "message": "NF: change sched ver in test does not change time"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1487da46efd469834dd5b4b9342980e6588bc72", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a1487da46efd469834dd5b4b9342980e6588bc72", "committedDate": "2020-08-21T21:15:19Z", "message": "NF: change sched ver in test does not change time"}, "afterCommit": {"oid": "79e75492c0ae485b7f46d468174be9294092bfa9", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/79e75492c0ae485b7f46d468174be9294092bfa9", "committedDate": "2020-08-21T21:15:26Z", "message": "NF: change sched ver in test does not change time\n\nInstead, I find more reassuring to ensure taht when a scheduler is changed, the time remains the same"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99379a57f80a483ec4d96f6d3d4d3728b0153c70", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/99379a57f80a483ec4d96f6d3d4d3728b0153c70", "committedDate": "2020-08-22T02:59:45Z", "message": "NF: assertThat"}, "afterCommit": {"oid": "ef5f739c88df2c93bcbe78e032a79d66cbab49f5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ef5f739c88df2c93bcbe78e032a79d66cbab49f5", "committedDate": "2020-08-22T02:59:44Z", "message": "time everywhere"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef5f739c88df2c93bcbe78e032a79d66cbab49f5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ef5f739c88df2c93bcbe78e032a79d66cbab49f5", "committedDate": "2020-08-22T02:59:44Z", "message": "time everywhere"}, "afterCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4f11d5d833b0c8516e9f7093b3efa73060602e11", "committedDate": "2020-08-22T03:09:17Z", "message": "time everywhere"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTE2NjA0", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472916604", "createdAt": "2020-08-22T10:09:21Z", "commit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMDowOToyMVrOHFER1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMDowOToyMVrOHFER1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTAzMQ==", "bodyText": "? why?", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075031", "createdAt": "2020-08-22T10:09:21Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/BackupManager.java", "diffHunk": "@@ -111,7 +111,7 @@ private static boolean performBackupInBackground(final String colPath, int inter\n \n         SimpleDateFormat df = new SimpleDateFormat(\"yyyy-MM-dd-HH-mm\", Locale.US);\n         Calendar cal = new GregorianCalendar();\n-        cal.setTimeInMillis(System.currentTimeMillis());\n+        cal.setTimeInMillis(System.currentTimeMillis()); // Uses real time, no col accessible", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTE2OTM3", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472916937", "createdAt": "2020-08-22T10:15:59Z", "commit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMDoxNTo1OVrOHFEUBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMDoxNTo1OVrOHFEUBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTU4OQ==", "bodyText": "Can we flag this for refactoring? It'll likely be slow", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075589", "createdAt": "2020-08-22T10:15:59Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/utils/Time.java", "diffHunk": "@@ -16,14 +16,52 @@\n \n package com.ichi2.libanki.utils;\n \n+import com.ichi2.libanki.DB;\n+\n+import java.util.Calendar;\n import java.util.Date;\n+import java.util.GregorianCalendar;\n \n /** Allows injection of time dependencies */\n-public interface Time {\n-    long time();\n-    Date getCurrentDate();\n+public abstract class Time {\n+    public abstract Date getCurrentDate();\n     /**The time in integer seconds. */\n-    long intTime();\n+    public abstract long intTime();\n     /**The time in integer seconds. */\n-    double now();\n+    public abstract double now();\n+\n+    public abstract long intTimeMS();\n+\n+    public Calendar calendar() {\n+        Calendar cal = Calendar.getInstance();\n+        cal.setTime(getCurrentDate());\n+        return cal;\n+    }\n+\n+    public GregorianCalendar gregorianCalendar() {\n+        GregorianCalendar cal = new GregorianCalendar();\n+        cal.setTime(getCurrentDate());\n+        return cal;\n+    }\n+\n+    /** Return a non-conflicting timestamp for table. */\n+    public long timestampID(DB db, String table) {\n+        // be careful not to create multiple objects without flushing them, or they\n+        // may share an ID.\n+        long t = intTimeMS();\n+        while (db.queryScalar(\"SELECT id FROM \" + table + \" WHERE id = ?\", t) != 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTE2OTY4", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472916968", "createdAt": "2020-08-22T10:16:43Z", "commit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMDoxNjo0NFrOHFEUOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMDoyMDoxMVrOHFEVOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTY0Mw==", "bodyText": "just pass in a Time as the second argument", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075643", "createdAt": "2020-08-22T10:16:44Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/AdvancedStatistics.java", "diffHunk": "@@ -659,14 +659,14 @@ public void close() {\n                 queryBaseYoungMature\n                         + \"where type=\" + Consts.CARD_TYPE_LRN + \" and lastIvl >= 21;\";\n \n-        public EaseClassifier(SupportSQLiteDatabase db) {\n+        public EaseClassifier(Collection col, SupportSQLiteDatabase db) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTczOQ==", "bodyText": "? Why", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075739", "createdAt": "2020-08-22T10:18:05Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -318,7 +326,7 @@ private static void _setColVars(DB db) {\n         g.put(\"id\", 1);\n         g.put(\"name\", \"Default\");\n         g.put(\"conf\", 1);\n-        g.put(\"mod\", Utils.intTime());\n+        g.put(\"mod\", Utils.intTime()); // Uses real time, so can't be tested with mocked time", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTc1OA==", "bodyText": "Again, why can't we pass in a Time?", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075758", "createdAt": "2020-08-22T10:18:26Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -305,7 +313,7 @@ private static void _addSchema(DB db, boolean setColConf) {\n         db.execute(\"create table if not exists graves (\" + \"    usn             integer not null,\"\n                 + \"    oid             integer not null,\" + \"    type            integer not null\" + \")\");\n         db.execute(\"INSERT OR IGNORE INTO col VALUES(1,0,0,\" +\n-                Utils.intTime(1000) + \",\" + Consts.SCHEMA_VERSION +\n+                Utils.intTime(1000) + \",\" + Consts.SCHEMA_VERSION + // Use real time, because no access to col", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTg5Ng==", "bodyText": "needs to check for a null time here", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075896", "createdAt": "2020-08-22T10:20:11Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -162,21 +170,27 @@\n     private static final int UNDO_SIZE_MAX = 20;\n \n     public Collection(Context context, DB db, String path, boolean server, boolean log) {\n+        this(context, db, path, server, log, new SystemTime());\n+    }\n+\n+    @VisibleForTesting\n+    public Collection(Context context, DB db, String path, boolean server, boolean log, Time time) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11"}, "originalPosition": 47}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4f11d5d833b0c8516e9f7093b3efa73060602e11", "committedDate": "2020-08-22T03:09:17Z", "message": "time everywhere"}, "afterCommit": {"oid": "763bc206f36232588232492673de73293f19372e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/763bc206f36232588232492673de73293f19372e", "committedDate": "2020-08-22T10:35:10Z", "message": "NF: performBackupInBackground takse time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTE5ODIy", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472919822", "createdAt": "2020-08-22T11:21:35Z", "commit": {"oid": "763bc206f36232588232492673de73293f19372e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTI0OTk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472924995", "createdAt": "2020-08-22T13:07:45Z", "commit": {"oid": "763bc206f36232588232492673de73293f19372e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMzowNzo0NlrOHFFHTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMzowNzo0NlrOHFFHTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA4ODcxOA==", "bodyText": "Why?", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475088718", "createdAt": "2020-08-22T13:07:46Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/BackupManager.java", "diffHunk": "@@ -124,7 +126,7 @@ private static boolean performBackupInBackground(final String colPath, int inter\n                 lastBackupDate = null;\n             }\n         }\n-        if (lastBackupDate != null && lastBackupDate.getTime() + interval * 3600000L > Utils.intTime(1000) && !force) {\n+        if (lastBackupDate != null && lastBackupDate.getTime() + interval * 3600000L > Utils.intTime(1000) && !force) { // Uses real time, not collection ones", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "763bc206f36232588232492673de73293f19372e"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTI1MDc2", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472925076", "createdAt": "2020-08-22T13:08:52Z", "commit": {"oid": "763bc206f36232588232492673de73293f19372e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMzowODo1MlrOHFFHkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxMzowODo1MlrOHFFHkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA4ODc4Nw==", "bodyText": "Why? Shouldn't we pin all operations off the time dependency", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475088787", "createdAt": "2020-08-22T13:08:52Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/DialogHandler.java", "diffHunk": "@@ -120,7 +120,7 @@ public void run() {\n             SharedPreferences preferences = AnkiDroidApp.getSharedPrefs(mActivity.get());\n             Resources res = mActivity.get().getResources();\n             String hkey = preferences.getString(\"hkey\", \"\");\n-            long millisecondsSinceLastSync = Utils.intTime(1000) - preferences.getLong(\"lastSyncTime\", 0);\n+            long millisecondsSinceLastSync = Utils.intTime(1000) - preferences.getLong(\"lastSyncTime\", 0); // Uses real time, not collection's one.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "763bc206f36232588232492673de73293f19372e"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "763bc206f36232588232492673de73293f19372e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/763bc206f36232588232492673de73293f19372e", "committedDate": "2020-08-22T10:35:10Z", "message": "NF: performBackupInBackground takse time"}, "afterCommit": {"oid": "0cd4cd3bfc88ede23801165a1674d84efacce4dd", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0cd4cd3bfc88ede23801165a1674d84efacce4dd", "committedDate": "2020-08-22T13:41:33Z", "message": "NF: mock time: add time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa0dd1788b7ff0e6f8f5c83a47ef4f2b5b3e86e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3aa0dd1788b7ff0e6f8f5c83a47ef4f2b5b3e86e", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: change sched ver in test does not change time\n\nInstead, I find more reassuring to ensure taht when a scheduler is changed, the time remains the same"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0234a477f7751298a75dee65b113561c2454a37c", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0234a477f7751298a75dee65b113561c2454a37c", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: mTime->getTime()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cca81508c9a8d9e1b93d855f087264dc602b18f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6cca81508c9a8d9e1b93d855f087264dc602b18f", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: time is saved in Col and not sched\n\nThis ensure that time does not change when changing sched, and can be used otherwhere"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2919d37b5b20fef53c114a1c0a0f12d21b4b0d1", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d2919d37b5b20fef53c114a1c0a0f12d21b4b0d1", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: intTimeMS()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1edb3411467a905f0e53470734b07f42d5c32e8", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/b1edb3411467a905f0e53470734b07f42d5c32e8", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: timeToCalendar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d68771eccceabbb8500cb7f1199ed0e7cef3b293", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d68771eccceabbb8500cb7f1199ed0e7cef3b293", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: crtCalendar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cebd38237fcef9bdd2048c25fbce07be12c58308", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/cebd38237fcef9bdd2048c25fbce07be12c58308", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: comment mock test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f6fbb0718b819bd787948028eb3eec77f9b09ff", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0f6fbb0718b819bd787948028eb3eec77f9b09ff", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: calendar in time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3b5b367d9a103ee2dcda0b53c9eb601e0e1005", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1d3b5b367d9a103ee2dcda0b53c9eb601e0e1005", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: explain why real time is used"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbf1568d4e39b616616b21df22ce2e5b034bb93d", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/dbf1568d4e39b616616b21df22ce2e5b034bb93d", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: uses col's time everywhere"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19778c0149bdba66bb0101ab097f111121fea4a2", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/19778c0149bdba66bb0101ab097f111121fea4a2", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: moving timestampID and maxID to Time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e00d0eb8a903367f74ee47a59b8422fe5adefdf3", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e00d0eb8a903367f74ee47a59b8422fe5adefdf3", "committedDate": "2020-08-22T15:35:47Z", "message": "NF: getCol() -> col"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cd4cd3bfc88ede23801165a1674d84efacce4dd", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0cd4cd3bfc88ede23801165a1674d84efacce4dd", "committedDate": "2020-08-22T13:41:33Z", "message": "NF: mock time: add time"}, "afterCommit": {"oid": "d2dc14e573b5f28257f6366d81a7b3c072ae5a8f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d2dc14e573b5f28257f6366d81a7b3c072ae5a8f", "committedDate": "2020-08-22T15:38:16Z", "message": "NF: mock time: add time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTM0ODgz", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#pullrequestreview-472934883", "createdAt": "2020-08-22T15:53:35Z", "commit": {"oid": "d2dc14e573b5f28257f6366d81a7b3c072ae5a8f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14786f5b68da39b764c827782eca7db05f7b2174", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/14786f5b68da39b764c827782eca7db05f7b2174", "committedDate": "2020-08-22T17:14:57Z", "message": "NF: test uses mock time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41031b1d53d3684cd3fa72aebdd8183f503f2a1f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/41031b1d53d3684cd3fa72aebdd8183f503f2a1f", "committedDate": "2020-08-22T17:15:07Z", "message": "NF: time is used even when there is no col"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20111696d8d316f7d64ae0a8ddb6d07399095c75", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/20111696d8d316f7d64ae0a8ddb6d07399095c75", "committedDate": "2020-08-22T17:15:20Z", "message": "NF: create db uses time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e9fc408bb7efe0316dcb460c8123d5b800510a", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f2e9fc408bb7efe0316dcb460c8123d5b800510a", "committedDate": "2020-08-22T17:15:20Z", "message": "NF: performBackupInBackground takse time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94776009bd975ef8c1dd760edb37de18478c1635", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/94776009bd975ef8c1dd760edb37de18478c1635", "committedDate": "2020-08-22T17:15:20Z", "message": "NF: time method moved to System time\n\nThis ensure noone will uses Utils by accident. Especially in already existing PR, if one uses Util we'll directly see an error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "264fb0a1d81e7ffeb2ea9194f33bacdaacc9d4b6", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/264fb0a1d81e7ffeb2ea9194f33bacdaacc9d4b6", "committedDate": "2020-08-22T17:15:20Z", "message": "NF: remove unused constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03039275a00d0477617d07e4e2f1bf50f3664358", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/03039275a00d0477617d07e4e2f1bf50f3664358", "committedDate": "2020-08-22T17:15:21Z", "message": "NF: Collection parametrized by time\n\nIn most of the code that makes no difference. It allows to ensure that test gets a mock time, which can then be\nmanipulated."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88e23c287a851ade52f09f70c96a4aee94c50b37", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/88e23c287a851ade52f09f70c96a4aee94c50b37", "committedDate": "2020-08-22T17:15:21Z", "message": "NF: mock time: add time"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2dc14e573b5f28257f6366d81a7b3c072ae5a8f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d2dc14e573b5f28257f6366d81a7b3c072ae5a8f", "committedDate": "2020-08-22T15:38:16Z", "message": "NF: mock time: add time"}, "afterCommit": {"oid": "88e23c287a851ade52f09f70c96a4aee94c50b37", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/88e23c287a851ade52f09f70c96a4aee94c50b37", "committedDate": "2020-08-22T17:15:21Z", "message": "NF: mock time: add time"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2966, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}