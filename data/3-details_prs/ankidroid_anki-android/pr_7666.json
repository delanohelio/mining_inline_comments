{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMzMzMTIw", "number": 7666, "title": "Warn on Protocol-relative URLs", "bodyText": "Protocol relative URLs didn't work:\nFixes\nFixes #6102\nApproach\nWe add a snackbar to warn the user and explain how to fix this.\nIn Anki, protocol-relative URLS are converted to https://\nIn AnkIDroid, they're converted to file://\nfile:// fails to load the image - we can't redirect from shouldInterceptRequest\nLoading synchronously is not viable, so all we can do is use a snackbar.\nHow Has This Been Tested?\nOn my phone and API 19 emulator\n\u26a0\ufe0f Issue: #7665\n\nLearning\n\nHTTP 300s aren't supported by shouldInterceptRequest\nSection links seem broken on some phones.\nhttps://github.com/ankidroid/Anki-Android/wiki/FAQ#why-do-my-images-need-a-protocol\n\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code\n UI changes: include screenshots of all affected screens (in particular showing any new or changed strings)\n Strings resources: All strings added as resources are unique or contain a comment for seemingly duplicate strings to explain the difference between both resources", "createdAt": "2020-11-13T04:50:59Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7666", "merged": true, "mergeCommit": {"oid": "d1c0906cd3dcda33880752b0fd16e6cb3cd3b5a9"}, "closed": true, "closedAt": "2020-11-13T14:05:28Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb_tVyAH2gAyNTIwMzMzMTIwOmQwMGM1ZjIxNzk0NWEwNWJjNDljNzcyMDMxNGY5NWVjOGRlN2JlYzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcHsxOgFqTUzMDA4NzExNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d00c5f217945a05bc49c7720314f95ec8de7bec1", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d00c5f217945a05bc49c7720314f95ec8de7bec1", "committedDate": "2020-11-13T04:46:44Z", "message": "Warn on Protocol-relative URLs\n\nWe add a snackbar to warn the user and explain how to fix this.\n\nIn Anki, protocol-relative URLS are converted to https://\nIn AnkIDroid, they're converted to file://\n\nfile:// fails to load the image - we can't redirect from shouldInterceptRequest\nLoading synchronously is not viable, so all we can do is use a snackbar.\n\nFixes 6102"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5ODE5MzY2", "url": "https://github.com/ankidroid/Anki-Android/pull/7666#pullrequestreview-529819366", "createdAt": "2020-11-13T07:14:08Z", "commit": {"oid": "d00c5f217945a05bc49c7720314f95ec8de7bec1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNzoxNDowOFrOHyf8OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNzoxNDowOFrOHyf8OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjcxNDE2OQ==", "bodyText": "We don\u2019t expectbto translate faq ?\nIf so it\u2019s not a constant", "url": "https://github.com/ankidroid/Anki-Android/pull/7666#discussion_r522714169", "createdAt": "2020-11-13T07:14:08Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/res/values/constants.xml", "diffHunk": "@@ -153,6 +153,7 @@\n     <string name=\"link_manual_note_format_toolbar\">https://docs.ankidroid.org/manual.html#noteFormatToolbar</string>\n     <string name=\"link_faq_tts\">https://github.com/ankidroid/Anki-Android/wiki/FAQ#tts--text-to-speech-is-not-speaking</string>\n     <string name=\"link_faq_missing_media\" tools:ignore=\"Typos\">https://github.com/ankidroid/Anki-Android/wiki/FAQ#why-doesnt-my-sound-or-image-work-on-ankidroid</string>\n+    <string name=\"link_faq_invalid_protocol_relative\">https://github.com/ankidroid/Anki-Android/wiki/FAQ#why-do-my-images-need-a-protocol</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d00c5f217945a05bc49c7720314f95ec8de7bec1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMDg3MTE1", "url": "https://github.com/ankidroid/Anki-Android/pull/7666#pullrequestreview-530087115", "createdAt": "2020-11-13T14:05:21Z", "commit": {"oid": "d00c5f217945a05bc49c7720314f95ec8de7bec1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3746, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}