{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMzU1ODU2", "number": 6596, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMDo0MjoyMlrOEKUsrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMDo0MjoyMlrOEKUsrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjYwMzMyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMDo0MjoyMlrOGrTFOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMDo0NToxNlrOGrTISQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA1NDU4Ng==", "bodyText": "Is Map<String, JSONObject nameMap> valid syntax?\nI'd have assumed Map<String, JSONObject> nameMap", "url": "https://github.com/ankidroid/Anki-Android/pull/6596#discussion_r448054586", "createdAt": "2020-07-01T00:42:22Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "diffHunk": "@@ -468,11 +468,25 @@ public void update(JSONObject g) {\n         save();\n     }\n \n+    /** Recompute the name map. Most operation deal with updating the name map directly,\n+     * however, after a failed safety check, doing the whole computation is easier.*/\n+    private void resetNameMap() {\n+        HashMap<String, JSONObject> nameMap = new HashMap<>(mDecks.size());\n+        for (JSONObject deck: mDecks.values()) {\n+            nameMapAdd(deck.getString(\"name\"), deck, nameMap);\n+        }\n+        mNameMap = nameMap;\n+    }\n+\n     private void nameMapAdd(String name, JSONObject g) {\n-        mNameMap.put(name, g);\n+        nameMapAdd(name, g, mNameMap);\n+    }\n+\n+    private void nameMapAdd(String name, JSONObject g, Map<String, JSONObject nameMap>) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eda119bd5cec8c6da1850d8b39c958929803ee01"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA1NTM2OQ==", "bodyText": "Clearly, the > should have been before", "url": "https://github.com/ankidroid/Anki-Android/pull/6596#discussion_r448055369", "createdAt": "2020-07-01T00:45:16Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "diffHunk": "@@ -468,11 +468,25 @@ public void update(JSONObject g) {\n         save();\n     }\n \n+    /** Recompute the name map. Most operation deal with updating the name map directly,\n+     * however, after a failed safety check, doing the whole computation is easier.*/\n+    private void resetNameMap() {\n+        HashMap<String, JSONObject> nameMap = new HashMap<>(mDecks.size());\n+        for (JSONObject deck: mDecks.values()) {\n+            nameMapAdd(deck.getString(\"name\"), deck, nameMap);\n+        }\n+        mNameMap = nameMap;\n+    }\n+\n     private void nameMapAdd(String name, JSONObject g) {\n-        mNameMap.put(name, g);\n+        nameMapAdd(name, g, mNameMap);\n+    }\n+\n+    private void nameMapAdd(String name, JSONObject g, Map<String, JSONObject nameMap>) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA1NDU4Ng=="}, "originalCommit": {"oid": "eda119bd5cec8c6da1850d8b39c958929803ee01"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 65, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}