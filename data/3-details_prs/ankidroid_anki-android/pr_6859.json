{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MTkzNDQ0", "number": 6859, "title": "Use new ACRA APIs to clear AcraLimiter", "bodyText": "Pull Request template\nPurpose / Description\nWe were manually clearing the limiter on new versions or\nwhen user toggled crash report preferences, but upstream added\nthe necessary APIs to do so, port to those\nFixes\nFixes #4968\nApproach\nPropose a change to upstream when you find yourself poking a hole in an abstraction, then port to the APIs upstream when implemented\nHow Has This Been Tested?\nI wrote an instrumented test that verified the behavior long ago, and it still does -> yay automated testing\nLearning (optional, can help others)\nI don't believe I learned a thing here currently. In the original upstream PR I learned how receptive most projects are to good ideas, which was formative in how I participate in the development of my dependency network\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-08-09T19:38:30Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6859", "merged": true, "mergeCommit": {"oid": "a38d71ee91d231c43873027186beaf99c2727afe"}, "closed": true, "closedAt": "2020-08-09T23:24:42Z", "author": {"login": "mikehardy"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9Tw8TgBqjM2MzY3NjAwNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9UEqBgFqTQ2MzkwMjg5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6d8c676bd7f1c71e75a8113394e3a35b5e3305c", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e6d8c676bd7f1c71e75a8113394e3a35b5e3305c", "committedDate": "2020-08-09T19:34:31Z", "message": "Use new ACRA APIs to clear AcraLimiter\n\nWe were manually clearing the limiter on new versions or\nwhen user toggled crash report preferences, but upstream added\nthe necessary APIs to do so, port to thosep"}, "afterCommit": {"oid": "e764e5465c24eae045a32ffc22f5c2804751c55e", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e764e5465c24eae045a32ffc22f5c2804751c55e", "committedDate": "2020-08-09T20:36:46Z", "message": "Use new ACRA APIs to clear AcraLimiter\n\nWe were manually clearing the limiter on new versions or\nwhen user toggled crash report preferences, but upstream added\nthe necessary APIs to do so, port to thosep"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTAxOTI3", "url": "https://github.com/ankidroid/Anki-Android/pull/6859#pullrequestreview-463901927", "createdAt": "2020-08-09T20:40:57Z", "commit": {"oid": "e764e5465c24eae045a32ffc22f5c2804751c55e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQyMDo0MDo1N1rOG99qMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQyMDo0MDo1N1rOG99qMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYyNjU0Ng==", "bodyText": "Could we keep this method. deleteACRALimiterData has better semantics than new LimiterData().store(this);", "url": "https://github.com/ankidroid/Anki-Android/pull/6859#discussion_r467626546", "createdAt": "2020-08-09T20:40:57Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java", "diffHunk": "@@ -373,16 +373,6 @@ public static void sendExceptionReport(Throwable e, String origin, String additi\n         ACRA.getErrorReporter().handleException(e);\n     }\n \n-    /**\n-     * If you want to make sure that the next exception of any time is posted, you need to clear limiter data\n-     *\n-     * ACRA 5.3.x does this automatically on version upgrade (https://github.com/ACRA/acra/pull/696), until then they blessed deleting file\n-     * @param context the context leading to the directory with ACRA limiter data\n-     */\n-    public static void deleteACRALimiterData(Context context) {\n-        context.getFileStreamPath(\"ACRA-limiter.json\").delete();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e764e5465c24eae045a32ffc22f5c2804751c55e"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50ef9efad3cf50f5936431aa02dcf60d1c0e6845", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/50ef9efad3cf50f5936431aa02dcf60d1c0e6845", "committedDate": "2020-08-09T20:47:01Z", "message": "Use new ACRA APIs to clear AcraLimiter\n\nWe were manually clearing the limiter on new versions or\nwhen user toggled crash report preferences, but upstream added\nthe necessary APIs to do so, port to those"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e764e5465c24eae045a32ffc22f5c2804751c55e", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e764e5465c24eae045a32ffc22f5c2804751c55e", "committedDate": "2020-08-09T20:36:46Z", "message": "Use new ACRA APIs to clear AcraLimiter\n\nWe were manually clearing the limiter on new versions or\nwhen user toggled crash report preferences, but upstream added\nthe necessary APIs to do so, port to thosep"}, "afterCommit": {"oid": "50ef9efad3cf50f5936431aa02dcf60d1c0e6845", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/50ef9efad3cf50f5936431aa02dcf60d1c0e6845", "committedDate": "2020-08-09T20:47:01Z", "message": "Use new ACRA APIs to clear AcraLimiter\n\nWe were manually clearing the limiter on new versions or\nwhen user toggled crash report preferences, but upstream added\nthe necessary APIs to do so, port to those"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTAyODk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6859#pullrequestreview-463902895", "createdAt": "2020-08-09T20:58:39Z", "commit": {"oid": "50ef9efad3cf50f5936431aa02dcf60d1c0e6845"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2908, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}