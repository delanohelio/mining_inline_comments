{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NzEzMDM3", "number": 6550, "title": "Change whiteboard pen color while reviewing ", "bodyText": "Pull Request template\nPurpose / Description\nWhile reviewing there is need of different pen color for different answer for better retention.\nFixes\nFixes #2731\nApproach\n\nAdded a xml containing six button as color background.\nWhen whiteboard turn on then one option Pen Color also visible\nSelecting respective color button change pen color\n\nHow Has This Been Tested?\nTested on Emulator\n\nWhen Whiteboard turned on\nSelect pen color\nDraw in that color\n\n\nLearning (optional, can help others)\nDescribe the research stage\nLinks to blog posts, patterns, libraries or addons used to solve this problem\nChecklist\nPlease, go through these checks before submitting the PR.\n\n[ x ] You have not changed whitespace unnecessarily (it makes diffs hard to read)\n[ x ] You have a descriptive commit message with a short title (first line, max 50 chars).\n[ x ] Your code follows the style of the project (e.g. never omit braces in if statements)\n[ x ] You have commented your code, particularly in hard-to-understand areas\n[ x ] You have performed a self-review of your own code", "createdAt": "2020-06-25T06:42:35Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6550", "merged": true, "mergeCommit": {"oid": "b988f5ab6f28c73c4b77b227914ce199f1c0929c"}, "closed": true, "closedAt": "2020-06-28T16:48:27Z", "author": {"login": "infinyte7"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuoxlxAH2gAyNDM5NzEzMDM3Ojc3ZDZhYmZiYjEyYTQ4OTgwOThkNTliYjA2NjcwYWE5YWFlYzYzZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvvTecAFqTQzODc5NTc5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/77d6abfbb12a4898098d59bb06670aa9aaec63f6", "committedDate": "2020-06-25T06:36:58Z", "message": "\tWhiteboard pen color"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MjYyNDYw", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437262460", "createdAt": "2020-06-25T08:09:01Z", "commit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODowOTowMVrOGov9Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwODozODozNlrOGoxAGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MTg5NA==", "bodyText": "You can make this a local variable", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445381894", "createdAt": "2020-06-25T08:09:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -79,6 +79,7 @@\n     private boolean mPrefFullscreenReview = false;\n     private static final int ADD_NOTE = 12;\n     private static final int REQUEST_AUDIO_PERMISSION = 0;\n+    private LinearLayout colorPalette;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MjE3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private LinearLayout colorPalette;\n          \n          \n            \n                private LinearLayout mColorPalette;", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445382176", "createdAt": "2020-06-25T08:09:31Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -66,6 +68,7 @@\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n \n+    private LinearLayout colorPalette;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MjU0MA==", "bodyText": "Why was this commented out?", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445382540", "createdAt": "2020-06-25T08:10:10Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -241,11 +260,13 @@ private void createBitmap() {\n         // To fix issue #1336, just make the whiteboard big and square.\n         final Point p = getDisplayDimenions();\n         int bitmapSize = Math.max(p.x, p.y);\n+        createBitmap(bitmapSize, bitmapSize, Bitmap.Config.ARGB_8888);\n+        /*\n         if (mMonochrome && !mInvertedColors) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MjkyMQ==", "bodyText": "Move all of these into the case statements (surround the cases with {} if they're declaring variables)", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445382921", "createdAt": "2020-06-25T08:10:47Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -356,6 +377,44 @@ private static Point getDisplayDimenions() {\n         return point;\n     }\n \n+    @Override\n+    public void onClick(View view) {\n+\n+        int redPenColor = Color.parseColor(\"#f44336\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4Nzc3Mg==", "bodyText": "Is this only visible if the whiteboard is visible?", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445387772", "createdAt": "2020-06-25T08:19:04Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/layout/reviewer.xml", "diffHunk": "@@ -37,6 +37,13 @@\n                 android:layout_height=\"match_parent\"\n                 android:layout_below=\"@id/mic_tool_bar_layer\" />\n \n+            <include\n+                layout=\"@layout/reviewer_whiteboard_pen_color\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4ODE4MQ==", "bodyText": "might as well remove rather than commenting out", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445388181", "createdAt": "2020-06-25T08:19:45Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -91,7 +94,7 @@ public Whiteboard(AbstractFlashcardViewer cardViewer, boolean inverted, boolean\n         mPaint = new Paint();\n         mPaint.setAntiAlias(true);\n         mPaint.setDither(true);\n-        mPaint.setColor(foregroundColor);\n+        //mPaint.setColor(foregroundColor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM5OTA2NQ==", "bodyText": "You'll need to update the UndoStack class to allow for colours.\nLikely moving it to a class-based model at this stage, so you'd have one undo stack rather than 3 (potentially 4 with adding in the colour).", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445399065", "createdAt": "2020-06-25T08:38:36Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -356,6 +377,44 @@ private static Point getDisplayDimenions() {\n         return point;\n     }\n \n+    @Override\n+    public void onClick(View view) {\n+\n+        int redPenColor = Color.parseColor(\"#f44336\");\n+        int greenPenColor = Color.parseColor(\"#4caf50\");\n+        int bluePenColor = Color.parseColor(\"#2196f3\");\n+        int yellowPenColor = Color.parseColor(\"#ffeb3b\");\n+\n+        switch (view.getId()) {\n+            case R.id.pen_color_white:\n+                mPaint.setColor(Color.WHITE);\n+                colorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_black:\n+                mPaint.setColor(Color.BLACK);\n+                colorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_red:\n+                mPaint.setColor(redPenColor);\n+                colorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_green:\n+                mPaint.setColor(greenPenColor);\n+                colorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_blue:\n+                mPaint.setColor(bluePenColor);\n+                colorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_yellow:\n+                mPaint.setColor(yellowPenColor);\n+                colorPalette.setVisibility(View.GONE);\n+                break;\n+            default:\n+                break;\n+        }\n+    }\n+\n     /**\n      * Keep a stack of all points and paths so that the last stroke can be undone\n      * pop() removes the last stroke from the stack, and apply() redraws it to whiteboard.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 117}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd46f7c4ca8eb6a2380b7f4b7f2ba73164f10e3f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/cd46f7c4ca8eb6a2380b7f4b7f2ba73164f10e3f", "committedDate": "2020-06-25T11:36:08Z", "message": "\tUpdated Reviewer.java, Whiteboard.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "526c0db92ac8c7010007a7649e4da14ecc2f7362", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/526c0db92ac8c7010007a7649e4da14ecc2f7362", "committedDate": "2020-06-25T16:08:47Z", "message": "    Added vector icon for select pen color icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f2dcf75fe1f523cb2333b364f84ac2e6fd335e7", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7f2dcf75fe1f523cb2333b364f84ac2e6fd335e7", "committedDate": "2020-06-25T16:41:26Z", "message": "    Added patch to Whiteboard.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3Njg1MjM5", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437685239", "createdAt": "2020-06-25T16:57:38Z", "commit": {"oid": "7f2dcf75fe1f523cb2333b364f84ac2e6fd335e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo1NzozOFrOGpDm9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo1NzozOFrOGpDm9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwMzkyNA==", "bodyText": "Is this available on the fullscreen or no answer buttons layouts?", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445703924", "createdAt": "2020-06-25T16:57:38Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/layout/reviewer.xml", "diffHunk": "@@ -37,6 +37,13 @@\n                 android:layout_height=\"match_parent\"\n                 android:layout_below=\"@id/mic_tool_bar_layer\" />\n \n+            <include", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f2dcf75fe1f523cb2333b364f84ac2e6fd335e7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddf40a5eb5fcaef10fe07f9a7cd638bf54f59243", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ddf40a5eb5fcaef10fe07f9a7cd638bf54f59243", "committedDate": "2020-06-25T16:57:51Z", "message": "\tAdded button to ActionButtonStatus.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3Njg2OTI4", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437686928", "createdAt": "2020-06-25T16:59:48Z", "commit": {"oid": "ddf40a5eb5fcaef10fe07f9a7cd638bf54f59243"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo1OTo0OFrOGpDr_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo1OTo0OFrOGpDr_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcwNTIxMw==", "bodyText": "There's also some logic in Reviewer about enabling whitebaord buttons status depending on whether the whiteboard is available or not.", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445705213", "createdAt": "2020-06-25T16:59:48Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "diffHunk": "@@ -61,6 +61,7 @@ public void setup(SharedPreferences preferences) {\n         setupButton(preferences, R.id.action_mark_card, \"customButtonMarkCard\", SHOW_AS_ACTION_IF_ROOM);\n         setupButton(preferences, R.id.action_delete, \"customButtonDelete\", SHOW_AS_ACTION_NEVER);\n         setupButton(preferences, R.id.action_toggle_mic_tool_bar, \"customButtonToggleMicToolBar\", SHOW_AS_ACTION_NEVER);\n+        setupButton(preferences, R.id.action_change_whiteboard_pen_color, \"customButtonWhiteboardPenColor\", SHOW_AS_ACTION_ALWAYS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddf40a5eb5fcaef10fe07f9a7cd638bf54f59243"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82c7d650943603dcedadb7e1a9d13bfb00050fcd", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/82c7d650943603dcedadb7e1a9d13bfb00050fcd", "committedDate": "2020-06-25T17:36:57Z", "message": "   Updated Reviewer.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NzIwMzU0", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437720354", "createdAt": "2020-06-25T17:44:10Z", "commit": {"oid": "82c7d650943603dcedadb7e1a9d13bfb00050fcd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzo0NDoxMFrOGpFOfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzo0NDoxMFrOGpFOfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTczMDQyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Drawable whiteboardColorPaletteIcon = ContextCompat.getDrawable(this, R.drawable.ic_color_lens_white_24dp);\n          \n          \n            \n                        Drawable whiteboardColorPaletteIcon = ContextCompat.getDrawable(this, R.drawable.ic_color_lens_white_24dp).mutate();", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445730429", "createdAt": "2020-06-25T17:44:10Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -544,14 +545,24 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             menu.findItem(R.id.action_change_whiteboard_pen_color).setVisible(true);\n \n             Drawable whiteboardIcon = ContextCompat.getDrawable(this, R.drawable.ic_gesture_white_24dp);\n+            Drawable whiteboardColorPaletteIcon = ContextCompat.getDrawable(this, R.drawable.ic_color_lens_white_24dp);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c7d650943603dcedadb7e1a9d13bfb00050fcd"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/174065d896cbfdf5d420f3cacda9a82b476b917f", "committedDate": "2020-06-25T17:50:30Z", "message": "\tUpdated Reviewer.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NzM3NzI4", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437737728", "createdAt": "2020-06-25T18:07:44Z", "commit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxODowNzo0NFrOGpGCfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxODowNzo0NFrOGpGCfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc0Mzc0MA==", "bodyText": "if you're just implementing the interface to allow setOnClickListener(this), then you can would be better define it as a lambda inside the method and remove the interface impementation\nI believe the syntax would be btn.setOnClickListener(this::onClick). Then you can rename the method to something more readable.", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445743740", "createdAt": "2020-06-25T18:07:44Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -26,20 +26,22 @@\n import android.graphics.Path;\n import android.graphics.PathMeasure;\n import android.graphics.Point;\n-import android.graphics.PointF;\n+import androidx.annotation.NonNull;\n import androidx.core.content.ContextCompat;\n import android.view.Display;\n import android.view.MotionEvent;\n import android.view.View;\n import android.view.WindowManager;\n+import android.widget.Button;\n+import android.widget.LinearLayout;\n \n import java.lang.ref.WeakReference;\n import java.util.Stack;\n \n /**\n  * Whiteboard allowing the user to draw the card's answer on the touchscreen.\n  */\n-public class Whiteboard extends View {\n+public class Whiteboard extends View implements View.OnClickListener {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NzM4Njgy", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437738682", "createdAt": "2020-06-25T18:09:02Z", "commit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxODowOTowMlrOGpGFXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxODowOTowMlrOGpGFXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc0NDQ3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private LinearLayout mColorPalette;\n          \n          \n            \n                private final LinearLayout mColorPalette;", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445744479", "createdAt": "2020-06-25T18:09:02Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -66,6 +68,7 @@\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n \n+    private LinearLayout mColorPalette;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46727015c90598ed8ae7fa7d91b67d024a718537", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/46727015c90598ed8ae7fa7d91b67d024a718537", "committedDate": "2020-06-25T18:09:28Z", "message": "\tUpdated reviewer_fullscreen.xml, reviewer_fullscreen_noanswers.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NzQxNTMx", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437741531", "createdAt": "2020-06-25T18:12:54Z", "commit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxODoxMjo1NFrOGpGN4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxODoxMzoxNFrOGpGOow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc0NjY1Ng==", "bodyText": "Could you try 4444, so we conserve memory.", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445746656", "createdAt": "2020-06-25T18:12:54Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -241,11 +260,13 @@ private void createBitmap() {\n         // To fix issue #1336, just make the whiteboard big and square.\n         final Point p = getDisplayDimenions();\n         int bitmapSize = Math.max(p.x, p.y);\n+        createBitmap(bitmapSize, bitmapSize, Bitmap.Config.ARGB_8888);\n+        /*\n         if (mMonochrome && !mInvertedColors) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MjU0MA=="}, "originalCommit": {"oid": "77d6abfbb12a4898098d59bb06670aa9aaec63f6"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc0Njg1MQ==", "bodyText": "Might as well remove the code rather than commenting it out", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445746851", "createdAt": "2020-06-25T18:13:14Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -241,11 +260,13 @@ private void createBitmap() {\n         // To fix issue #1336, just make the whiteboard big and square.\n         final Point p = getDisplayDimenions();\n         int bitmapSize = Math.max(p.x, p.y);\n+        createBitmap(bitmapSize, bitmapSize, Bitmap.Config.ARGB_8888);\n+        /*\n         if (mMonochrome && !mInvertedColors) {\n             createBitmap(bitmapSize, bitmapSize, Bitmap.Config.ALPHA_8);\n         } else {\n             createBitmap(bitmapSize, bitmapSize, Bitmap.Config.ARGB_4444);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "174065d896cbfdf5d420f3cacda9a82b476b917f"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c8574991523c26f02fe367f6b0849a6458d2423d", "committedDate": "2020-06-25T18:17:34Z", "message": "\tUpdated Whiteboard.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5739d020a6db7f5f2a6959520378ad899c4cfd13", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/5739d020a6db7f5f2a6959520378ad899c4cfd13", "committedDate": "2020-06-25T18:33:17Z", "message": "Merge branch 'master' into feature-pen-color"}, "afterCommit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c8574991523c26f02fe367f6b0849a6458d2423d", "committedDate": "2020-06-25T18:17:34Z", "message": "\tUpdated Whiteboard.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02be34cc4cb0998d6a1fbc2bbcf8e4167d4a8f62", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/02be34cc4cb0998d6a1fbc2bbcf8e4167d4a8f62", "committedDate": "2020-06-25T18:48:47Z", "message": "\tUpdated reviewer_fullscreen.xml"}, "afterCommit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c8574991523c26f02fe367f6b0849a6458d2423d", "committedDate": "2020-06-25T18:17:34Z", "message": "\tUpdated Whiteboard.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3ODA0Nzg0", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-437804784", "createdAt": "2020-06-25T19:43:34Z", "commit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxOTo0MzozNFrOGpJRrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxOTo0ODoxM1rOGpJagQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc5Njc4Mw==", "bodyText": "There are constants in the Themes class, can you use these?", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445796783", "createdAt": "2020-06-25T19:43:34Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -534,15 +542,27 @@ public boolean onCreateOptionsMenu(Menu menu) {\n                 menu.findItem(R.id.action_clear_whiteboard).setVisible(true);\n             }\n \n+            menu.findItem(R.id.action_change_whiteboard_pen_color).setVisible(true);\n+\n             Drawable whiteboardIcon = ContextCompat.getDrawable(this, R.drawable.ic_gesture_white_24dp);\n+            Drawable whiteboardColorPaletteIcon = ContextCompat.getDrawable(this, R.drawable.ic_color_lens_white_24dp).mutate();\n+\n             if (mShowWhiteboard) {\n                 whiteboardIcon.setAlpha(255);\n                 menu.findItem(R.id.action_hide_whiteboard).setIcon(whiteboardIcon);\n                 menu.findItem(R.id.action_hide_whiteboard).setTitle(R.string.hide_whiteboard);\n+\n+                whiteboardColorPaletteIcon.setAlpha(255);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc5ODIyOA==", "bodyText": "Best to keep it consistent. I'll fix Check Pronunication now\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"title_whiteboard_pen_color\">Pen Color</string>\n          \n          \n            \n                <string name=\"title_whiteboard_pen_color\">Pen color</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445798228", "createdAt": "2020-06-25T19:46:34Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/02-strings.xml", "diffHunk": "@@ -273,4 +273,6 @@\n     <!-- in options menu & Navigation Drawer -->\n     <string name=\"ankidroid_turn_on_fullscreen_nav_drawer\">Please turn on fullscreen to use Show Navigation Drawer using JavaScript.</string>\n     <string name=\"ankidroid_turn_on_fullscreen_options_menu\">Please turn on fullscreen to use Show Options Menu using JavaScript.</string>\n+\n+    <string name=\"title_whiteboard_pen_color\">Pen Color</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc5OTA0MQ==", "bodyText": "Implementer's choice: Can be shortened to:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Button penColorWhite = (Button) cardViewer.findViewById(R.id.pen_color_white);\n          \n          \n            \n                    ((Button) cardViewer.findViewById(R.id.pen_color_white)).setOnClickListener(this::onClick);", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r445799041", "createdAt": "2020-06-25T19:48:13Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -100,6 +103,22 @@ public Whiteboard(AbstractFlashcardViewer cardViewer, boolean inverted, boolean\n         createBitmap();\n         mPath = new Path();\n         mBitmapPaint = new Paint(Paint.DITHER_FLAG);\n+\n+        // selecting pen color to draw\n+        mColorPalette = (LinearLayout) cardViewer.findViewById(R.id.whiteboard_pen_color);\n+\n+        Button penColorWhite = (Button) cardViewer.findViewById(R.id.pen_color_white);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8574991523c26f02fe367f6b0849a6458d2423d"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc30c1dab10e0e8a60623a76817589ad9961c113", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/bc30c1dab10e0e8a60623a76817589ad9961c113", "committedDate": "2020-06-26T03:06:58Z", "message": "Revert \"Fork Update\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a3339cf2689a619dc96747fa51768c24f417c95", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6a3339cf2689a619dc96747fa51768c24f417c95", "committedDate": "2020-06-26T03:36:53Z", "message": "\tUpdate fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e660d320dbe1da2d540725138ac3eab07d353f7f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e660d320dbe1da2d540725138ac3eab07d353f7f", "committedDate": "2020-06-26T03:56:34Z", "message": "Merge remote-tracking branch 'origin/master' into feature-pen-color"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a104048452cd6b64eccdea1081af0e215107e1a8", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a104048452cd6b64eccdea1081af0e215107e1a8", "committedDate": "2020-06-26T05:05:45Z", "message": "\tUpdated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ceea5dc26bba34fff46767c649d69400efcf211", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4ceea5dc26bba34fff46767c649d69400efcf211", "committedDate": "2020-06-26T04:58:38Z", "message": "\tUpdated ActionButtonStatus.java"}, "afterCommit": {"oid": "a104048452cd6b64eccdea1081af0e215107e1a8", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a104048452cd6b64eccdea1081af0e215107e1a8", "committedDate": "2020-06-26T05:05:45Z", "message": "\tUpdated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjEyNjk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-438212695", "createdAt": "2020-06-26T11:15:35Z", "commit": {"oid": "a104048452cd6b64eccdea1081af0e215107e1a8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMToxNTozNlrOGpdHcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMToxNTozNlrOGpdHcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjEyMTg0Mg==", "bodyText": "Much nicer \ud83d\udc4d", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r446121842", "createdAt": "2020-06-26T11:15:36Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -109,6 +112,16 @@ public Whiteboard(AbstractFlashcardViewer cardViewer, boolean inverted, boolean\n         createBitmap();\n         mPath = new Path();\n         mBitmapPaint = new Paint(Paint.DITHER_FLAG);\n+\n+        // selecting pen color to draw\n+        mColorPalette = (LinearLayout) cardViewer.findViewById(R.id.whiteboard_pen_color);\n+\n+        ((Button) cardViewer.findViewById(R.id.pen_color_white)).setOnClickListener(this::onClick);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a104048452cd6b64eccdea1081af0e215107e1a8"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NTc2Njcx", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-438576671", "createdAt": "2020-06-26T20:30:07Z", "commit": {"oid": "a104048452cd6b64eccdea1081af0e215107e1a8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozMDowN1rOGpt00w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMDozMDowN1rOGpt00w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM5NTYwMw==", "bodyText": "If we are using colors that do not have a universal definition, and we are using them both in Java and in XML I think we can define the RGB hex code in XML:\nhttps://developer.android.com/guide/topics/resources/more-resources#Color\nThen reference them by a single name to make sure the colors stay consistent - otherwise we repeat these constants instead of referring to a single definition", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#discussion_r446395603", "createdAt": "2020-06-26T20:30:07Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -365,60 +371,117 @@ private static Point getDisplayDimenions() {\n         return point;\n     }\n \n+\n+    public void onClick(View view) {\n+\n+        switch (view.getId()) {\n+            case R.id.pen_color_white:\n+                mPaint.setColor(Color.WHITE);\n+                mColorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_black:\n+                mPaint.setColor(Color.BLACK);\n+                mColorPalette.setVisibility(View.GONE);\n+                break;\n+            case R.id.pen_color_red:\n+                int redPenColor = Color.parseColor(\"#f44336\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a104048452cd6b64eccdea1081af0e215107e1a8"}, "originalPosition": 91}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aa90865f94d98b9fb901dbe9751ca0564d3ef8e", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1aa90865f94d98b9fb901dbe9751ca0564d3ef8e", "committedDate": "2020-06-27T05:53:15Z", "message": "\tUpdated Whiteboard.java, colors.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2539fa3db1cc4af60937a9e41d1e1ff8419127ef", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2539fa3db1cc4af60937a9e41d1e1ff8419127ef", "committedDate": "2020-06-27T05:59:31Z", "message": "\tUpdated reviewer_whiteboard_pen_color.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4Nzk1Nzk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6550#pullrequestreview-438795795", "createdAt": "2020-06-28T16:47:20Z", "commit": {"oid": "2539fa3db1cc4af60937a9e41d1e1ff8419127ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3017, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}