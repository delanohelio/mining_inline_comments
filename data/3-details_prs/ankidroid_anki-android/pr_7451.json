{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4OTk3MzEw", "number": 7451, "title": "Empty card: update at most once by second", "bodyText": "Checking the profiler, I see that some significant amount of time is spent enqueuing various update. (To be more specific, this time become significant when all the remaining optimization are merged. Otherwise, it's not the main factor at all)\nMaybe one second is too big a delay, there is a clear loss in fluidity. But on the other hand, I believe that one update by second gives a correct amount of information", "createdAt": "2020-10-23T14:17:35Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7451", "merged": true, "mergeCommit": {"oid": "61cfd0072da682623535d0f9bcb058f81c2ec10c"}, "closed": true, "closedAt": "2020-10-24T16:44:32Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVYSnbAFqTUxNTc3Nzk2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVdH3agFqTUxNjAxMDA3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1Nzc3OTY3", "url": "https://github.com/ankidroid/Anki-Android/pull/7451#pullrequestreview-515777967", "createdAt": "2020-10-23T15:27:42Z", "commit": {"oid": "9c1b1567efad0a34e01379bb5810fd012957f266"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c1b1567efad0a34e01379bb5810fd012957f266", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9c1b1567efad0a34e01379bb5810fd012957f266", "committedDate": "2020-10-23T14:11:02Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}, "afterCommit": {"oid": "0d742eda1159549d5e0f5074fd1f8f4eb2b774a1", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0d742eda1159549d5e0f5074fd1f8f4eb2b774a1", "committedDate": "2020-10-23T20:27:05Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d742eda1159549d5e0f5074fd1f8f4eb2b774a1", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0d742eda1159549d5e0f5074fd1f8f4eb2b774a1", "committedDate": "2020-10-23T20:27:05Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}, "afterCommit": {"oid": "1a2cccecdf4b936514fbd02c03497bff0e2d8f6b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1a2cccecdf4b936514fbd02c03497bff0e2d8f6b", "committedDate": "2020-10-23T20:30:37Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MDAwNjEz", "url": "https://github.com/ankidroid/Anki-Android/pull/7451#pullrequestreview-516000613", "createdAt": "2020-10-23T20:46:51Z", "commit": {"oid": "1a2cccecdf4b936514fbd02c03497bff0e2d8f6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMDo0Njo1MVrOHnd_Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMDo0Njo1MVrOHnd_Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0Nzg2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // Time in second, so this ensure one update by second at most\n          \n          \n            \n                        // Ensure updates only happen if more than a percent of progress happened", "url": "https://github.com/ankidroid/Anki-Android/pull/7451#discussion_r511147867", "createdAt": "2020-10-23T20:46:51Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java", "diffHunk": "@@ -2818,7 +2821,12 @@ public void actualOnPreExecute(@NonNull DeckPicker deckPicker) {\n \n         @Override\n         public void actualOnProgressUpdate(@NonNull DeckPicker deckPicker, @NonNull TaskData progress) {\n-            deckPicker.mProgressDialog.incrementProgress(progress.getInt());\n+            mIncreaseSinceLastUpdate += progress.getInt();\n+            // Time in second, so this ensure one update by second at most", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a2cccecdf4b936514fbd02c03497bff0e2d8f6b"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MDAwOTE3", "url": "https://github.com/ankidroid/Anki-Android/pull/7451#pullrequestreview-516000917", "createdAt": "2020-10-23T20:47:25Z", "commit": {"oid": "1a2cccecdf4b936514fbd02c03497bff0e2d8f6b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f273541ff8ce7893820f52522270cb2c4ed27353", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f273541ff8ce7893820f52522270cb2c4ed27353", "committedDate": "2020-10-23T21:03:51Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a2cccecdf4b936514fbd02c03497bff0e2d8f6b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1a2cccecdf4b936514fbd02c03497bff0e2d8f6b", "committedDate": "2020-10-23T20:30:37Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}, "afterCommit": {"oid": "f273541ff8ce7893820f52522270cb2c4ed27353", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f273541ff8ce7893820f52522270cb2c4ed27353", "committedDate": "2020-10-23T21:03:51Z", "message": "Empty card: update at most once by second\n\nChecking the profiler, I see that some significant amount of time is spent enqueuing various update. This is uselessly\nlong when empty card is optimized"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MDEwMDY4", "url": "https://github.com/ankidroid/Anki-Android/pull/7451#pullrequestreview-516010068", "createdAt": "2020-10-23T21:05:28Z", "commit": {"oid": "f273541ff8ce7893820f52522270cb2c4ed27353"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MDEwMDc1", "url": "https://github.com/ankidroid/Anki-Android/pull/7451#pullrequestreview-516010075", "createdAt": "2020-10-23T21:05:29Z", "commit": {"oid": "f273541ff8ce7893820f52522270cb2c4ed27353"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3864, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}