{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MzkyOTIz", "number": 7426, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMzo1MTo0OFrOEvygBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMzo1MjowNFrOEvygew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4NTQ1OTI0OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMzo1MTo0OFrOHk9vZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNjowMjozMVrOHlFgqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjM0Mw==", "bodyText": "is this in addition to the global animation / safe display setting?", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508522343", "createdAt": "2020-10-20T13:51:48Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -111,6 +158,10 @@ public void setOrd(int i) {\n         mEditText.setOrd(i);\n     }\n \n+    public void setEnableAnimation(boolean value) {\n+        this.mEnableAnimation = value;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUzNzkwMQ==", "bodyText": "This uses the global animation setting - I didn't feel a view component having a dependency on AnkiDroid's settings was a good idea, but I'm happy to change it", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508537901", "createdAt": "2020-10-20T14:06:22Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -111,6 +158,10 @@ public void setOrd(int i) {\n         mEditText.setOrd(i);\n     }\n \n+    public void setEnableAnimation(boolean value) {\n+        this.mEnableAnimation = value;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjM0Mw=="}, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY0OTY0MQ==", "bodyText": "ok - so this is maintained separately but is derivative from that one? I'm okay with that - if that is correct feel free to mark resolved", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508649641", "createdAt": "2020-10-20T16:02:31Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -111,6 +158,10 @@ public void setOrd(int i) {\n         mEditText.setOrd(i);\n     }\n \n+    public void setEnableAnimation(boolean value) {\n+        this.mEnableAnimation = value;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjM0Mw=="}, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4NTQ2MDQzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMzo1MjowNFrOHk9wLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNjowMTo1NlrOHlFeVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjU0MA==", "bodyText": "Activity restarts?", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508522540", "createdAt": "2020-10-20T13:52:04Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -70,11 +79,49 @@ private void init() {\n         this.mEditText = findViewById(R.id.id_note_editText);\n         this.mLabel = findViewById(R.id.id_label);\n         this.mMediaButton = findViewById(R.id.id_media_button);\n+        this.mExpandButton = findViewById(R.id.id_expand_button);\n+\n+        this.mExpansionState = ExpansionState.EXPANDED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU3NDgwMQ==", "bodyText": "You're right - I've taken a look at this and will need to do more research. I'd rather leave this one for the time being (and mark as an issue) as it'll mean a large scale refactoring of NoteEditor to do correctly.\nI've implemented onSaveInstanceState and onRestoreInstanceState\nBut: onRestoreInstanceState isn't called as the view is dynamically created - potentially after the activity is initialised due to onCollectionLoaded\nFieldEditText uses a hack - have the Activity set the variables, and use these to restore the field values, but this feels unsustainable and adds unnecessary complexity to NoteEditor\nUseful ref: https://www.netguru.com/codestories/how-to-correctly-save-the-state-of-a-custom-view-in-android", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508574801", "createdAt": "2020-10-20T14:48:38Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -70,11 +79,49 @@ private void init() {\n         this.mEditText = findViewById(R.id.id_note_editText);\n         this.mLabel = findViewById(R.id.id_label);\n         this.mMediaButton = findViewById(R.id.id_media_button);\n+        this.mExpandButton = findViewById(R.id.id_expand_button);\n+\n+        this.mExpansionState = ExpansionState.EXPANDED;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjU0MA=="}, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU3NzUyMA==", "bodyText": "Force pushed with my current (non-working) implementation - I'll have a think about this later on today, but I think I'd rather leave this as a future issue if acceptable.", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508577520", "createdAt": "2020-10-20T14:51:49Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -70,11 +79,49 @@ private void init() {\n         this.mEditText = findViewById(R.id.id_note_editText);\n         this.mLabel = findViewById(R.id.id_label);\n         this.mMediaButton = findViewById(R.id.id_media_button);\n+        this.mExpandButton = findViewById(R.id.id_expand_button);\n+\n+        this.mExpansionState = ExpansionState.EXPANDED;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjU0MA=="}, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY0OTA0Nw==", "bodyText": "Yeah I think NoteEditor was one of the ones that didn't work fully on restart either, I'd be okay with peeling it out", "url": "https://github.com/ankidroid/Anki-Android/pull/7426#discussion_r508649047", "createdAt": "2020-10-20T16:01:56Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditLine.java", "diffHunk": "@@ -70,11 +79,49 @@ private void init() {\n         this.mEditText = findViewById(R.id.id_note_editText);\n         this.mLabel = findViewById(R.id.id_label);\n         this.mMediaButton = findViewById(R.id.id_media_button);\n+        this.mExpandButton = findViewById(R.id.id_expand_button);\n+\n+        this.mExpansionState = ExpansionState.EXPANDED;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUyMjU0MA=="}, "originalCommit": {"oid": "24971011599c979d25a600f35239615060328c60"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 733, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}