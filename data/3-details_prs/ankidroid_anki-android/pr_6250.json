{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxOTM4NTY4", "number": 6250, "title": "Card Browser: \"Search All Decks\" button if no results", "bodyText": "Purpose / Description\nAllow a user to search all decks if there was no results for a search\nThis is makes the 'Card Browser' context menu item much more effective.\nFixes\nFixes #5159 (I feel it's in a better manner, but your call).\nFixes #5144\nApproach\nWe use a snackbar:\n\nHow Has This Been Tested?\nTested on my device\n\u26d4 Please reject this and ask me to add a few unit tests (in a direction of your choosing).\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-05-22T14:00:41Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6250", "merged": true, "mergeCommit": {"oid": "8601d863737b0905d6448c79fce55771daae88de"}, "closed": true, "closedAt": "2020-05-22T22:21:14Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjxZNfgH2gAyNDIxOTM4NTY4OmYzOWQyN2Y5NjQ4YWFkN2Q4NzU1NjA0YjEwZGM5YzllNjljZTI2NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcj2ffVAFqTQxNzEwNTgzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f39d27f9648aad7d8755604b10dc9c9e69ce2666", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f39d27f9648aad7d8755604b10dc9c9e69ce2666", "committedDate": "2020-05-22T12:26:19Z", "message": "NF: Extract handleSearchResult"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dddd1cf47f5bb0cf60d9d0be129f1ecae069e3e", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1dddd1cf47f5bb0cf60d9d0be129f1ecae069e3e", "committedDate": "2020-05-22T14:09:42Z", "message": "NF: Extract getCardCount"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0d32709e575f5634ed8835ec418bcca68e4f4ed", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e0d32709e575f5634ed8835ec418bcca68e4f4ed", "committedDate": "2020-05-22T13:52:30Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}, "afterCommit": {"oid": "67415a0ad4820eb62662ee6a363dc33a4797c7f2", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/67415a0ad4820eb62662ee6a363dc33a4797c7f2", "committedDate": "2020-05-22T14:11:01Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDY2Njgz", "url": "https://github.com/ankidroid/Anki-Android/pull/6250#pullrequestreview-417066683", "createdAt": "2020-05-22T17:13:18Z", "commit": {"oid": "67415a0ad4820eb62662ee6a363dc33a4797c7f2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoxMzoxOFrOGZeQLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoxMzoxOFrOGZeQLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2MzI0NQ==", "bodyText": "I hesitate on this choice - is it occluding / hiding elements by being on top of them? If so the material guidelines used to state transient elements should never be permanent, and indefinite length is actually sort of new here. Maybe 2*LONG but not permanent? Or if it is not hiding anything (and actually, it may not be) then this is okay, but any new set of results or another search  should dismiss it", "url": "https://github.com/ankidroid/Anki-Android/pull/6250#discussion_r429363245", "createdAt": "2020-05-22T17:13:18Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1699,11 +1701,54 @@ private void handleSearchResult() {\n             Timber.i(\"CardBrowser:: Completed doInBackgroundSearchCards Successfully\");\n             updateList();\n             if ((mSearchView != null) && !mSearchView.isIconified()) {\n-                UIUtils.showSimpleSnackbar(CardBrowser.this, getSubtitleText(), true);\n+                if (getCardCount() == 0 && !hasSelectedAllDecks()) {\n+                    View root = CardBrowser.this.findViewById(R.id.root_layout);\n+                    UIUtils.showSnackbar(CardBrowser.this,\n+                            getString(R.string.card_browser_no_cards_in_deck, getSelectedDeckNameForUi()),\n+                            LENGTH_INDEFINITE,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67415a0ad4820eb62662ee6a363dc33a4797c7f2"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDY2OTQw", "url": "https://github.com/ankidroid/Anki-Android/pull/6250#pullrequestreview-417066940", "createdAt": "2020-05-22T17:13:43Z", "commit": {"oid": "67415a0ad4820eb62662ee6a363dc33a4797c7f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67415a0ad4820eb62662ee6a363dc33a4797c7f2", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/67415a0ad4820eb62662ee6a363dc33a4797c7f2", "committedDate": "2020-05-22T14:11:01Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}, "afterCommit": {"oid": "9826af9d7a9178d17ce4e8534b0ae48e26b466d5", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9826af9d7a9178d17ce4e8534b0ae48e26b466d5", "committedDate": "2020-05-22T17:54:31Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7157ce395bc58cf2bcd9d2ecc72106395d4d1d7", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a7157ce395bc58cf2bcd9d2ecc72106395d4d1d7", "committedDate": "2020-05-22T17:57:12Z", "message": "NF: Extract selectAllDecks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "079b268e88a7114eb0b383ef552b206978e56260", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/079b268e88a7114eb0b383ef552b206978e56260", "committedDate": "2020-05-22T17:57:12Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9826af9d7a9178d17ce4e8534b0ae48e26b466d5", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9826af9d7a9178d17ce4e8534b0ae48e26b466d5", "committedDate": "2020-05-22T17:54:31Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}, "afterCommit": {"oid": "079b268e88a7114eb0b383ef552b206978e56260", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/079b268e88a7114eb0b383ef552b206978e56260", "committedDate": "2020-05-22T17:57:12Z", "message": "Browser: \"Search All Decks\" button if no results\n\nAllow a user to search all decks if there was no results for a search\n\nThis is fairly simple and makes the 'Card Browser' item much more\neffective.\n\nFixes #5159"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTA1ODMz", "url": "https://github.com/ankidroid/Anki-Android/pull/6250#pullrequestreview-417105833", "createdAt": "2020-05-22T18:22:42Z", "commit": {"oid": "079b268e88a7114eb0b383ef552b206978e56260"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3311, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}