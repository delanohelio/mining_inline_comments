{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMzM4NTE4", "number": 5983, "title": "LINT: Replace try..close with try-with-resources", "bodyText": "Purpose / Description\nReduce amount of boilerplate code in project\nAvailable on all API levels:\n\nIn addition to the Java 8 language features and APIs above, Android Studio 3.0 and later extends support for try-with-resources to all Android API levels.\n\nhttps://developer.android.com/studio/write/java8-support\nFixes\nN/A\nApproach\nAutomated lint fix from Android Studio (except 1, which involved moving a nullvariable, then an auto fix)\nFinally, manual undo of the whitespace changes.\nHow Has This Been Tested?\nUnit, Android, and tested on my machine\nLearning (optional, can help others)\nhttps://developer.android.com/studio/write/java8-support\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-04-12T13:25:36Z", "url": "https://github.com/ankidroid/Anki-Android/pull/5983", "merged": true, "mergeCommit": {"oid": "0754ccfc42b1009c843ae8efe0290221928f5d8d"}, "closed": true, "closedAt": "2020-04-12T14:30:57Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcW6WIagH2gAyNDAyMzM4NTE4Ojc0YzhlN2Q4MThiNGQzZmFkZGZkMTZmYzY5MzQzYWMxN2Y5MjRlZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcW6rzIgFqTM5MTg1OTQwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "committedDate": "2020-04-12T13:31:05Z", "message": "LINT: Replace try..close with try-with-resources\n\nAutomated lint fix from Android Studio (except 1, which involved moving\na nll variable, then an auto fix)\nFinally, manual undo of the whitespace changes.\n\nAvailable on all API levels:\n\nIn addition to the Java 8 language features and APIs above,\nAndroid Studio 3.0 and later extends support for try-with-resources to\nall Android API levels.\n\nhttps://developer.android.com/studio/write/java8-support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c0cd5969013bf4edcab71726cea4b689a982b8f", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8c0cd5969013bf4edcab71726cea4b689a982b8f", "committedDate": "2020-04-12T13:22:38Z", "message": "LINT: Replace try..close with try-with-resources\n\nAutomated lint fix from Android Studio (except 1, which involved moving\na nll variable, then an auto fix)\nFinally, manual undo of the whitespace changes.\n\nAvailable on all API levels:\n\nIn addition to the Java 8 language features and APIs above,\nAndroid Studio 3.0 and later extends support for try-with-resources to\nall Android API levels.\n\nhttps://developer.android.com/studio/write/java8-support"}, "afterCommit": {"oid": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/74c8e7d818b4d3faddfd16fc69343ac17f924ed1", "committedDate": "2020-04-12T13:31:05Z", "message": "LINT: Replace try..close with try-with-resources\n\nAutomated lint fix from Android Studio (except 1, which involved moving\na nll variable, then an auto fix)\nFinally, manual undo of the whitespace changes.\n\nAvailable on all API levels:\n\nIn addition to the Java 8 language features and APIs above,\nAndroid Studio 3.0 and later extends support for try-with-resources to\nall Android API levels.\n\nhttps://developer.android.com/studio/write/java8-support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODU5NDA5", "url": "https://github.com/ankidroid/Anki-Android/pull/5983#pullrequestreview-391859409", "createdAt": "2020-04-12T13:50:36Z", "commit": {"oid": "8c0cd5969013bf4edcab71726cea4b689a982b8f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMzo1MTowMVrOGEVlnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMzo1MTo1NFrOGEVmDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwMTE4MQ==", "bodyText": "I double-checked and close exceptions in try-with-resources are suppressed in that you can't handle them, but they are caught and logged which is the same \"recovery\" (or lack of) we are attempting. \ud83d\udc4d", "url": "https://github.com/ankidroid/Anki-Android/pull/5983#discussion_r407201181", "createdAt": "2020-04-12T13:51:01Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/multimediacard/fields/BasicAudioClipFieldController.java", "diffHunk": "@@ -147,15 +145,6 @@ public void onActivityResult(int requestCode, int resultCode, Intent data) {\n                 UIUtils.showThemedToast(AnkiDroidApp.getInstance().getApplicationContext(),\n                         AnkiDroidApp.getInstance().getString(R.string.multimedia_editor_something_wrong), true);\n             }\n-            finally {\n-                try {\n-                    if (inputStream != null) {\n-                        inputStream.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwMTI5Mg==", "bodyText": "And this could have thrown I think, so this will actually / maybe fix some issues", "url": "https://github.com/ankidroid/Anki-Android/pull/5983#discussion_r407201292", "createdAt": "2020-04-12T13:51:54Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Card.java", "diffHunk": "@@ -163,10 +161,6 @@ public void load() {\n             mODid = cursor.getLong(15);\n             mFlags = cursor.getInt(16);\n             mData = cursor.getString(17);\n-        } finally {\n-            if (cursor != null) {\n-                cursor.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74c8e7d818b4d3faddfd16fc69343ac17f924ed1"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3648, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}