{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3OTI3NTgx", "number": 7637, "title": "Json array >list", "bodyText": "Following the advice of #7632 (comment) and adding an extra function to remove duplicate code", "createdAt": "2020-11-09T17:39:07Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7637", "merged": true, "mergeCommit": {"oid": "db9b51526366209d819fd19b292459d1138707a9"}, "closed": true, "closedAt": "2020-11-09T20:57:36Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda4kLcAFqTUyNjUwNDk3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABda57eWgFqTUyNjU4NTQwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTA0OTc3", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#pullrequestreview-526504977", "createdAt": "2020-11-09T17:49:28Z", "commit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo0OToyOFrOHv6fbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1Mjo1NlrOHv6n4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwMzQzOQ==", "bodyText": "I don't understand this, could you provide an example in the JavaDoc", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520003439", "createdAt": "2020-11-09T17:49:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNDk2Nw==", "bodyText": "? I don't think this is the same - needs regression cover either way.", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520004967", "createdAt": "2020-11-09T17:51:57Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1866,14 +1863,10 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         ArrayList<String> problems = new ArrayList<>();\n         notifyProgress.run();\n         if (m.getInt(\"type\") == Consts.MODEL_STD) {\n-            ArrayList<Integer> ords = new ArrayList<>();\n             JSONArray tmpls = m.getJSONArray(\"tmpls\");\n-            for (JSONObject tmpl: tmpls.jsonObjectIterable()) {\n-                ords.add(tmpl.getInt(\"ord\"));\n-            }\n             // cards with invalid ordinal\n             ArrayList<Long> ids = mDb.queryLongList(\n-                    \"SELECT id FROM cards WHERE ord NOT IN \" + Utils.ids2str(ords) + \" AND nid IN ( \" +\n+                    \"SELECT id FROM cards WHERE ord NOT IN \" + Utils.ids2str(tmpls) + \" AND nid IN ( \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNTYwMQ==", "bodyText": "shouldn't this be \"name\"?\nRegardless, I feel this method is more complex than the previous code, and would be better reverted.", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520005601", "createdAt": "2020-11-09T17:52:56Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {\n+        List<String> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object.getString(\"key\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7274060ab7344269e7c94d8bcdbd094320f72850", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7274060ab7344269e7c94d8bcdbd094320f72850", "committedDate": "2020-11-09T17:58:48Z", "message": "NF: array to typed list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4b5d59d870ea5c6bd2e245197f19698a6ce6f71c", "committedDate": "2020-11-09T17:36:28Z", "message": "NF: JSONArray -> names"}, "afterCommit": {"oid": "280d287e7bde01a8f181830362f3d7d8409ebfc1", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/280d287e7bde01a8f181830362f3d7d8409ebfc1", "committedDate": "2020-11-09T17:58:49Z", "message": "NF: JSONArray -> names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "280d287e7bde01a8f181830362f3d7d8409ebfc1", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/280d287e7bde01a8f181830362f3d7d8409ebfc1", "committedDate": "2020-11-09T17:58:49Z", "message": "NF: JSONArray -> names"}, "afterCommit": {"oid": "7274060ab7344269e7c94d8bcdbd094320f72850", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7274060ab7344269e7c94d8bcdbd094320f72850", "committedDate": "2020-11-09T17:58:48Z", "message": "NF: array to typed list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTg1NDA4", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#pullrequestreview-526585408", "createdAt": "2020-11-09T19:28:49Z", "commit": {"oid": "7274060ab7344269e7c94d8bcdbd094320f72850"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3828, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}