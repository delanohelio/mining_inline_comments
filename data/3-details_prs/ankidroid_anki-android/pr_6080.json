{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4OTc5NzMy", "number": 6080, "title": "Convert Keyboard Input Map Code to Config", "bodyText": "Purpose / Description\nPrep for #6052, as soon as we define our key input in config rather than code, we can later move to defining them in preferences via a serialisation mechanism. This will later allow a user to redefine these mappings\nHow Has This Been Tested?\nUnit tested, slightly tested with my bluetooth keyboard\nLearning\nReally nice to get to a stage where you can trust the tests to act as regression cover.\nIt'd be useful to get a toast on some actions to confirm to the user what happened (for example: was suspend/bury pressed).\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-04-25T22:28:46Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6080", "merged": true, "mergeCommit": {"oid": "c529371b2b9431018f168536c054d67aaaceb60b"}, "closed": true, "closedAt": "2020-05-24T22:51:19Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckIdPUABqjMzNjcxNDMwMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckfSqkAFqTQxNzM3ODQxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "352cf97f4ed09bd83a7c4385de6e664d7114b741", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/352cf97f4ed09bd83a7c4385de6e664d7114b741", "committedDate": "2020-04-25T21:52:49Z", "message": "Peripheral Input Mappings: convert code to config\n\nConverting from code to coded config will later allow us to convert from\nconfig to preferences. This is another layer of abstraction in order to\nintegrate a custom keymap with the Reviewer."}, "afterCommit": {"oid": "a703469e53861886dcb4ebf4d47333233d4d784f", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a703469e53861886dcb4ebf4d47333233d4d784f", "committedDate": "2020-05-23T15:03:15Z", "message": "Peripheral Input Mappings: convert code to config\n\nConverting from code to coded config will later allow us to convert from\nconfig to preferences. This is another layer of abstraction in order to\nintegrate a custom keymap with the Reviewer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzc2NDgx", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#pullrequestreview-417376481", "createdAt": "2020-05-24T17:24:33Z", "commit": {"oid": "b7fc0bdbaaaf2766e6ffc9997b8285659998ecf7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzoyNDozNFrOGZwN-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzoyNDozNFrOGZwN-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NzU5Mg==", "bodyText": "whitespace nit\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private PeripheralKeymap mProcessor = new PeripheralKeymap(this,this);\n          \n          \n            \n                private PeripheralKeymap mProcessor = new PeripheralKeymap(this, this);", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#discussion_r429657592", "createdAt": "2020-05-24T17:24:34Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -86,6 +86,8 @@ protected int getToastResourceId() {\n         }\n     };\n \n+    private PeripheralKeymap mProcessor = new PeripheralKeymap(this,this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7fc0bdbaaaf2766e6ffc9997b8285659998ecf7"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzc2NzE2", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#pullrequestreview-417376716", "createdAt": "2020-05-24T17:27:43Z", "commit": {"oid": "a703469e53861886dcb4ebf4d47333233d4d784f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzoyNzo0M1rOGZwPEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzoyNzo0M1rOGZwPEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1Nzg3Mg==", "bodyText": "should just chain this to the other constructor with null for unicodeCharacter argument?", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#discussion_r429657872", "createdAt": "2020-05-24T17:27:43Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/PeripheralCommand.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki.reviewer;\n+\n+import android.view.KeyEvent;\n+\n+import com.ichi2.anki.cardviewer.ViewerCommand.ViewerCommandDef;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+import static com.ichi2.anki.cardviewer.ViewerCommand.*;\n+\n+public class PeripheralCommand {\n+    @Nullable\n+    private final Integer mKeyCode;\n+\n+    @Nullable\n+    private final Character mUnicodeCharacter;\n+\n+    @NonNull\n+    private final CardSide mCardSide;\n+\n+    private final @ViewerCommandDef int mCommand;\n+\n+    private PeripheralCommand(int keyCode, @ViewerCommandDef int command, @NonNull CardSide side) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a703469e53861886dcb4ebf4d47333233d4d784f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzc2ODM3", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#pullrequestreview-417376837", "createdAt": "2020-05-24T17:29:40Z", "commit": {"oid": "a703469e53861886dcb4ebf4d47333233d4d784f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a527ac5d4cea869d04c43a6daa6c4607a5867d76", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a527ac5d4cea869d04c43a6daa6c4607a5867d76", "committedDate": "2020-05-24T17:46:24Z", "message": "Extract Peripheral Keymap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73a5e9e8de34867ad8af1df8d74aca566a1a0933", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/73a5e9e8de34867ad8af1df8d74aca566a1a0933", "committedDate": "2020-05-24T17:48:49Z", "message": "Peripheral Input Mappings: convert code to config\n\nConverting from code to coded config will later allow us to convert from\nconfig to preferences. This is another layer of abstraction in order to\nintegrate a custom keymap with the Reviewer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a703469e53861886dcb4ebf4d47333233d4d784f", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a703469e53861886dcb4ebf4d47333233d4d784f", "committedDate": "2020-05-23T15:03:15Z", "message": "Peripheral Input Mappings: convert code to config\n\nConverting from code to coded config will later allow us to convert from\nconfig to preferences. This is another layer of abstraction in order to\nintegrate a custom keymap with the Reviewer."}, "afterCommit": {"oid": "73a5e9e8de34867ad8af1df8d74aca566a1a0933", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/73a5e9e8de34867ad8af1df8d74aca566a1a0933", "committedDate": "2020-05-24T17:48:49Z", "message": "Peripheral Input Mappings: convert code to config\n\nConverting from code to coded config will later allow us to convert from\nconfig to preferences. This is another layer of abstraction in order to\nintegrate a custom keymap with the Reviewer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzc4MzUy", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#pullrequestreview-417378352", "createdAt": "2020-05-24T17:53:46Z", "commit": {"oid": "73a5e9e8de34867ad8af1df8d74aca566a1a0933"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzo1Mzo0NlrOGZwWuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzo1Mzo0NlrOGZwWuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1OTgzNQ==", "bodyText": "Issue found: Avoid unused imports such as 'com.ichi2.anki.cardviewer.ViewerCommand'", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#discussion_r429659835", "createdAt": "2020-05-24T17:53:46Z", "author": {"login": "timrae"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/PeripheralCommand.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki.reviewer;\n+\n+import android.view.KeyEvent;\n+\n+import com.ichi2.anki.cardviewer.ViewerCommand.ViewerCommandDef;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+import static com.ichi2.anki.cardviewer.ViewerCommand.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73a5e9e8de34867ad8af1df8d74aca566a1a0933"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzc4NDE4", "url": "https://github.com/ankidroid/Anki-Android/pull/6080#pullrequestreview-417378418", "createdAt": "2020-05-24T17:54:48Z", "commit": {"oid": "73a5e9e8de34867ad8af1df8d74aca566a1a0933"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3463, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}