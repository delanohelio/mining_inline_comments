{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NjAyNDk1", "number": 7632, "title": "NF: addAll", "bodyText": "I tried to go through with #7616 (comment) comment and added more addAll, for the cases where values to add are in an iterator or an array\nI actually added some more, using essentially filter and/or map, but I'll keep it for when this simpler PR is merged", "createdAt": "2020-11-09T09:01:57Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7632", "merged": true, "mergeCommit": {"oid": "38a8fb474e4221b277b76802770b4d76d22ed82f"}, "closed": true, "closedAt": "2020-11-10T18:20:41Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdaxDIVABqjM5NzI2MzQ5NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbNjVWgFqTUyNzQ4MTg0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e8526d2c463237645d2f9cf35002b2a80694757", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8e8526d2c463237645d2f9cf35002b2a80694757", "committedDate": "2020-11-09T09:00:29Z", "message": "NF: addAll without functor"}, "afterCommit": {"oid": "0091e93b10949cdb6c248b75f84e52d0334fcb21", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0091e93b10949cdb6c248b75f84e52d0334fcb21", "committedDate": "2020-11-09T09:07:55Z", "message": "NF: addAll without functor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0091e93b10949cdb6c248b75f84e52d0334fcb21", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0091e93b10949cdb6c248b75f84e52d0334fcb21", "committedDate": "2020-11-09T09:07:55Z", "message": "NF: addAll without functor"}, "afterCommit": {"oid": "f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5", "committedDate": "2020-11-09T09:09:10Z", "message": "NF: addAll without functor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NDM4MTg4", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#pullrequestreview-526438188", "createdAt": "2020-11-09T16:36:28Z", "commit": {"oid": "f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNjozNjoyOFrOHv3OXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNjozNzowMVrOHv3P7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk0OTkxNw==", "bodyText": "Doesn't ArrayList.addAll already exist?\nCould be simplified even further (and with an efficiency gain):\ncms = note.model().getJSONArray(\"tmpls\").toJsonObjectList()", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#discussion_r519949917", "createdAt": "2020-11-09T16:36:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -909,10 +910,7 @@ public void _remNotes(java.util.Collection<Long> ids) {\n \t            break;\n             default: // MODELS\n     \t        cms = new ArrayList<>();\n-                JSONArray tmpls = note.model().getJSONArray(\"tmpls\");\n-                for (JSONObject tmpl: tmpls.jsonObjectIterable()) {\n-                    cms.add(tmpl);\n-                }\n+    \t        addAll(cms, note.model().getJSONArray(\"tmpls\").jsonObjectIterable());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk1MDIwMw==", "bodyText": "ditto", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#discussion_r519950203", "createdAt": "2020-11-09T16:36:53Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Utils.java", "diffHunk": "@@ -514,9 +515,7 @@ private static String _incGuid(String guid) {\n \n     public static List<Long> jsonArrayToLongList(JSONArray jsonArray) throws JSONException {\n         List<Long> ar = new ArrayList<>(jsonArray.length());\n-        for (Long l: jsonArray.longIterable()) {\n-            ar.add(l);\n-        }\n+        addAll(ar, jsonArray.longIterable());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk1MDMxNw==", "bodyText": "ditto", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#discussion_r519950317", "createdAt": "2020-11-09T16:37:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sync/Syncer.java", "diffHunk": "@@ -793,9 +795,7 @@ private JSONArray getTags() {\n \n     private void mergeTags(JSONArray tags) {\n         ArrayList<String> list = new ArrayList<>();\n-        for (String tag: tags.stringIterable()) {\n-            list.add(tag);\n-        }\n+        addAll(list, tags.stringIterable());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f1a84c3fe5bed5d959dfd54701d72dfb5bfce7b5", "committedDate": "2020-11-09T09:09:10Z", "message": "NF: addAll without functor"}, "afterCommit": {"oid": "c708f2bbedfb8c3fce225a6590a502ed55879503", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c708f2bbedfb8c3fce225a6590a502ed55879503", "committedDate": "2020-11-09T17:41:17Z", "message": "NF: addAll without functor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTA5NjM5", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#pullrequestreview-526509639", "createdAt": "2020-11-09T17:55:11Z", "commit": {"oid": "c708f2bbedfb8c3fce225a6590a502ed55879503"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1NToxMVrOHv6tVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1NToxMVrOHv6tVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNjk5Ng==", "bodyText": "ditto from the other PR - I don't see how this is the same", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#discussion_r520006996", "createdAt": "2020-11-09T17:55:11Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1866,14 +1864,10 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         ArrayList<String> problems = new ArrayList<>();\n         notifyProgress.run();\n         if (m.getInt(\"type\") == Consts.MODEL_STD) {\n-            ArrayList<Integer> ords = new ArrayList<>();\n             JSONArray tmpls = m.getJSONArray(\"tmpls\");\n-            for (JSONObject tmpl: tmpls.jsonObjectIterable()) {\n-                ords.add(tmpl.getInt(\"ord\"));\n-            }\n             // cards with invalid ordinal\n             ArrayList<Long> ids = mDb.queryLongList(\n-                    \"SELECT id FROM cards WHERE ord NOT IN \" + Utils.ids2str(ords) + \" AND nid IN ( \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c708f2bbedfb8c3fce225a6590a502ed55879503"}, "originalPosition": 41}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c708f2bbedfb8c3fce225a6590a502ed55879503", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c708f2bbedfb8c3fce225a6590a502ed55879503", "committedDate": "2020-11-09T17:41:17Z", "message": "NF: addAll without functor"}, "afterCommit": {"oid": "3a1570b7ad17368f705f342a5c5b7db9553d148e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3a1570b7ad17368f705f342a5c5b7db9553d148e", "committedDate": "2020-11-09T18:01:12Z", "message": "NF: addAll without functor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1808fa90a5dfcf8448804022277b060b255fee23", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1808fa90a5dfcf8448804022277b060b255fee23", "committedDate": "2020-11-09T18:34:45Z", "message": "NF: Undo in reviewer state what will be undone"}, "afterCommit": {"oid": "3a1570b7ad17368f705f342a5c5b7db9553d148e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3a1570b7ad17368f705f342a5c5b7db9553d148e", "committedDate": "2020-11-09T18:01:12Z", "message": "NF: addAll without functor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c29bbafaf72103e4909bb87dd25c6bdace04d82", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0c29bbafaf72103e4909bb87dd25c6bdace04d82", "committedDate": "2020-11-10T07:27:34Z", "message": "NF: addTags for multiple tags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "467d92208725c275c380da62ba5889d623e6e0fc", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/467d92208725c275c380da62ba5889d623e6e0fc", "committedDate": "2020-11-10T07:27:34Z", "message": "NF: addAll without functor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a1570b7ad17368f705f342a5c5b7db9553d148e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3a1570b7ad17368f705f342a5c5b7db9553d148e", "committedDate": "2020-11-09T18:01:12Z", "message": "NF: addAll without functor"}, "afterCommit": {"oid": "467d92208725c275c380da62ba5889d623e6e0fc", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/467d92208725c275c380da62ba5889d623e6e0fc", "committedDate": "2020-11-10T07:27:34Z", "message": "NF: addAll without functor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NDgxODQz", "url": "https://github.com/ankidroid/Anki-Android/pull/7632#pullrequestreview-527481843", "createdAt": "2020-11-10T18:20:33Z", "commit": {"oid": "467d92208725c275c380da62ba5889d623e6e0fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3825, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}