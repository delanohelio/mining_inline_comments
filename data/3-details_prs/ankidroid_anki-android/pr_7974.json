{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1OTI3MTQ0", "number": 7974, "title": "Field name", "bodyText": "This port ankitects/anki#869\nIt ensures that #, /  and ^ can't start a field name. It also ensures that :, {, }, \" can't be in field name\nCurrently, the backend also removes them when it meets them. We'll have this when rust is ported. At least, this change ensure that the error can't be entered in the collection, even if we don't correct it.\nI should note that I'm not fan of silent correction, so I'm not really pleased by the way anki strip part of field name without warning users. The good point with this PR and the related anki PR is that the change is directly reflected in the field list, so they should see quickly what's going on", "createdAt": "2020-12-28T05:18:21Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7974", "merged": true, "mergeCommit": {"oid": "24e87ea26c27db4794d7f6a966970c7ce3d9075d"}, "closed": true, "closedAt": "2020-12-28T13:53:51Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqe6AhAH2gAyNTQ1OTI3MTQ0OmEyMjIxZDcwMTEzZmUxMzc4MjQxZGRlMDllZGU5NWY3MzE4ZTk5MDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdqmgNtAFqTU1OTE1Mzc4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2221d70113fe1378241dde09ede95f7318e9908", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a2221d70113fe1378241dde09ede95f7318e9908", "committedDate": "2020-12-28T05:02:34Z", "message": "Remove :, {, }, \" in field name when they are changed\n\nIn Anki, currently, those symbols are removed during database check. This will come in ankidroid when we have rust\nback-end. While we wait for back-end, and to ensure that users gets quick feedback in the list of field, this remove the\nsymbols directly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ee6d3a44ad1b11c328c8888f7f44c07ffa1fa6c", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7ee6d3a44ad1b11c328c8888f7f44c07ffa1fa6c", "committedDate": "2020-12-28T05:12:24Z", "message": "Remove #, ^, /, tab, space from start of field name\n\nCurrently, Anki does this stripping during database check, so that there is no problem in template. We will get this\nwhen we get rust. While waiting, this ensure that user get direct feedback in the UI of the field name they enters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MTUzNDg3", "url": "https://github.com/ankidroid/Anki-Android/pull/7974#pullrequestreview-559153487", "createdAt": "2020-12-28T13:52:49Z", "commit": {"oid": "a2221d70113fe1378241dde09ede95f7318e9908"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxMzo1Mjo1MFrOIL5_rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxMzo1Mjo1MFrOIL5_rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTM1NTQzNw==", "bodyText": "I think if the initial change had a unit test you would have seen this expectation fail on whitespace-only field names since the trim had not happened yet, I can see you removed the trim below and the second commit puts it in a place before this empty check", "url": "https://github.com/ankidroid/Anki-Android/pull/7974#discussion_r549355437", "createdAt": "2020-12-28T13:52:50Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/ModelFieldEditor.java", "diffHunk": "@@ -177,7 +177,7 @@ private void setupLabels() {\n      */\n     private @Nullable String _uniqueName(@NonNull EditText mFieldNameInput) {\n         String input = mFieldNameInput.getText().toString()\n-                .replaceAll(\"[\\\\n\\\\r]\", \"\");\n+                .replaceAll(\"[\\\\n\\\\r{}:\\\"]\", \"\");\n         if (input.length() == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2221d70113fe1378241dde09ede95f7318e9908"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MTUzNzgz", "url": "https://github.com/ankidroid/Anki-Android/pull/7974#pullrequestreview-559153783", "createdAt": "2020-12-28T13:53:38Z", "commit": {"oid": "7ee6d3a44ad1b11c328c8888f7f44c07ffa1fa6c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3740, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}