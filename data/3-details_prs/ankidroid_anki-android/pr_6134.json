{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTA3NTAz", "number": 6134, "title": "Using javascript function to reload current card inside ankidroid webview", "bodyText": "Pull Request template\nPurpose / Description\nIn my anki deck, I want to refresh current card html page when user update it.\nFixes\n#5826\nApproach\n\nCreating signal for reload\nRedrawing current card html\n\nHow Has This Been Tested?\n\nAdd a button\n\n<button onclick=\"update();\">Reload Card</button>\n<script>\nfunction update()\n{\n    reloadPage();  // this function is in card.js\n}\n</script>\n\n\nClicking on button redraw current card.\n\n( I have tested on my anki deck to refresh current card. And its working fine.)\nLearning (optional, can help others)\nhttp://tutorials.jenkov.com/android/android-web-apps-using-android-webview.html\nChecklist\nPlease, go through these checks before submitting the PR.\n\n[ x ] You have not changed whitespace unnecessarily (it makes diffs hard to read)\n[ x ] You have a descriptive commit message with a short title (first line, max 50 chars).\n[ x ] Your code follows the style of the project (e.g. never omit braces in if statements)\n[ x ] You have commented your code, particularly in hard-to-understand areas\n[ x ] You have performed a self-review of your own code", "createdAt": "2020-05-09T03:28:33Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6134", "merged": true, "mergeCommit": {"oid": "d984b6d31519b92987152ea2d6b24c3fc223668f"}, "closed": true, "closedAt": "2020-05-10T21:46:15Z", "author": {"login": "infinyte7"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNhzaJgH2gAyNDE1NTA3NTAzOjNhNGEzMDFkYTNkY2E0ZjZhNDRlZGVmMjE5Mzk4OGJlZDE1MzE2YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfurgIgFqTQwODY5MDM4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a4a301da3dca4f6a44edef2193988bed15316ad", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3a4a301da3dca4f6a44edef2193988bed15316ad", "committedDate": "2020-03-14T09:50:07Z", "message": "Add files via upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e57c4ceca25bb1fec92ca743eaa98700966108f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3e57c4ceca25bb1fec92ca743eaa98700966108f", "committedDate": "2020-03-15T09:39:50Z", "message": "Update card.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7e91bc09a085ffc129535442af8456f97f6dc80", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e7e91bc09a085ffc129535442af8456f97f6dc80", "committedDate": "2020-03-15T09:41:29Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "366610142dc2b93fd4a54958878b9205a9d59f52", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/366610142dc2b93fd4a54958878b9205a9d59f52", "committedDate": "2020-03-15T15:52:38Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c5ec74a43504d5357e66dfec9b329a64c88c04f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7c5ec74a43504d5357e66dfec9b329a64c88c04f", "committedDate": "2020-03-15T15:55:06Z", "message": "Update card.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8041a93bb3249736811d14659250d93a9c76ca4", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f8041a93bb3249736811d14659250d93a9c76ca4", "committedDate": "2020-03-15T18:25:09Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f9331b5e8d518d7cbad7ac48cb0443c9384559", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f0f9331b5e8d518d7cbad7ac48cb0443c9384559", "committedDate": "2020-03-15T18:36:30Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f4df32f4fe9551691ebe4117059d301c55fd9b4", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2f4df32f4fe9551691ebe4117059d301c55fd9b4", "committedDate": "2020-03-15T18:36:57Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bd146c9a8a58c5b01b73bae5400734b4e940f5b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7bd146c9a8a58c5b01b73bae5400734b4e940f5b", "committedDate": "2020-03-17T12:05:33Z", "message": "Merge pull request #1 from ankidroid/master\n\nUpdate Ankidroid forked repo - DONE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38ccf485e82e8413146a979176eed3819481439d", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/38ccf485e82e8413146a979176eed3819481439d", "committedDate": "2020-04-01T06:36:27Z", "message": "Added localhost domain-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b6bcf3dc2e58fa384cc9a55c701c7f942e115ca", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2b6bcf3dc2e58fa384cc9a55c701c7f942e115ca", "committedDate": "2020-05-07T11:39:18Z", "message": "Merge pull request #2 from ankidroid/master\n\nUpdating Fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "465b0a20c6a12b8cae48c4825dcad000aba38688", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/465b0a20c6a12b8cae48c4825dcad000aba38688", "committedDate": "2020-05-07T18:41:31Z", "message": "Anki"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30863ff6ccd14c27375a786629d48a0175b991b6", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/30863ff6ccd14c27375a786629d48a0175b991b6", "committedDate": "2020-05-07T18:41:47Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7df6d450273f46b457b846f3a7daf7a19f61b52c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7df6d450273f46b457b846f3a7daf7a19f61b52c", "committedDate": "2020-05-07T18:45:03Z", "message": "Merge pull request #3 from ankidroid/master\n\nRevert \"don't put \"undo\" to color enabled\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3045d9c618e2f3dc0cfe4f322b9b64d6de3498c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e3045d9c618e2f3dc0cfe4f322b9b64d6de3498c", "committedDate": "2020-05-07T18:57:46Z", "message": "Update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "955285abd863193bf0c70ab1436ba7d9ec70c770", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/955285abd863193bf0c70ab1436ba7d9ec70c770", "committedDate": "2020-05-07T19:00:37Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9ef4310bd195d21efbc9be8dd419cc4122a682a", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a9ef4310bd195d21efbc9be8dd419cc4122a682a", "committedDate": "2020-05-07T19:01:55Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91574092619fc3adc061e147930a4d565638d8ec", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/91574092619fc3adc061e147930a4d565638d8ec", "committedDate": "2020-05-07T19:03:35Z", "message": "Update preferences_appearance.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46d7fc5616561e625e72ee3164edfd27a7c19669", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/46d7fc5616561e625e72ee3164edfd27a7c19669", "committedDate": "2020-05-07T19:36:11Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae832792d6acce358da70329161103ba215cc98f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ae832792d6acce358da70329161103ba215cc98f", "committedDate": "2020-05-08T05:52:44Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25aac571d064bb849f01cfd59e895c2d8b13ce2c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/25aac571d064bb849f01cfd59e895c2d8b13ce2c", "committedDate": "2020-05-08T06:02:46Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "333008cf0e4b7eaa73c02d013f12e24e096e835e", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/333008cf0e4b7eaa73c02d013f12e24e096e835e", "committedDate": "2020-05-08T12:35:00Z", "message": "Background Image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5871b34b2f930a78e7146bdd4915eb5d2231e037", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/5871b34b2f930a78e7146bdd4915eb5d2231e037", "committedDate": "2020-05-08T12:38:11Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47a1c6f60e968142e6365f8438da3b7855d0234c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/47a1c6f60e968142e6365f8438da3b7855d0234c", "committedDate": "2020-05-08T12:44:09Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "829d14f4ae422a1a45a04980735caf75147a153a", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/829d14f4ae422a1a45a04980735caf75147a153a", "committedDate": "2020-05-08T12:48:30Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e7d40de9633ad992bdc271f68857515ec934d2b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/5e7d40de9633ad992bdc271f68857515ec934d2b", "committedDate": "2020-05-08T13:00:59Z", "message": "Update 03-dialogs.xml\n\nPrefrences.java\n03-dialogs.xml\nUpdated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5a04d4e6144e98ebbae8fa816752aa0f0231ac4", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f5a04d4e6144e98ebbae8fa816752aa0f0231ac4", "committedDate": "2020-05-08T13:07:57Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60a4ff0790aff50a34b21fb2ea498854e55574c3", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60a4ff0790aff50a34b21fb2ea498854e55574c3", "committedDate": "2020-05-08T13:58:32Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da2b5be89e7f7f60d0a00e76ea02d21aa9b37643", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/da2b5be89e7f7f60d0a00e76ea02d21aa9b37643", "committedDate": "2020-05-09T03:11:32Z", "message": "reload card.html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c627134ec0078849cfcfe04d24c439be0eae5f32", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c627134ec0078849cfcfe04d24c439be0eae5f32", "committedDate": "2020-05-09T03:42:22Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "519b21c6e7eb00a4777bc373718aefd864389dfa", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/519b21c6e7eb00a4777bc373718aefd864389dfa", "committedDate": "2020-05-09T03:43:16Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "568a8721f550269aeb1af765e8260f3f16ef2667", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/568a8721f550269aeb1af765e8260f3f16ef2667", "committedDate": "2020-05-09T03:44:27Z", "message": "Update 03-dialogs.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ff71fcf4690b0436f1b779ec0120b68db0a8a99", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2ff71fcf4690b0436f1b779ec0120b68db0a8a99", "committedDate": "2020-05-09T03:46:24Z", "message": "Update preferences_appearance.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjUwMTA4", "url": "https://github.com/ankidroid/Anki-Android/pull/6134#pullrequestreview-408650108", "createdAt": "2020-05-09T13:26:42Z", "commit": {"oid": "2ff71fcf4690b0436f1b779ec0120b68db0a8a99"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjkwMzg3", "url": "https://github.com/ankidroid/Anki-Android/pull/6134#pullrequestreview-408690387", "createdAt": "2020-05-09T23:00:27Z", "commit": {"oid": "2ff71fcf4690b0436f1b779ec0120b68db0a8a99"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMzowMDoyN1rOGS-1LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMzowMDoyN1rOGS-1LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1Njk3Mw==", "bodyText": "Nice to have: Would be nice to move this inside getSignalFromUrl so we can better test this at a later date", "url": "https://github.com/ankidroid/Anki-Android/pull/6134#discussion_r422556973", "createdAt": "2020-05-09T23:00:27Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -2831,6 +2831,11 @@ private boolean filterUrl(String url) {\n                 mFlipCardLayout.performClick();\n                 return true;\n             }\n+            // card.html reload\n+            if (url.startsWith(\"signal:reload_card_html\")) {\n+                redrawCard();\n+                return true;\n+            }\n             int signalOrdinal = WebViewSignalParserUtils.getSignalFromUrl(url);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff71fcf4690b0436f1b779ec0120b68db0a8a99"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3498, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}