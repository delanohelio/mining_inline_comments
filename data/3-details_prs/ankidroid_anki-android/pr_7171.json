{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5ODcyMzM0", "number": 7171, "title": "NF: represents counts as a class", "bodyText": "I don't like int[] when we know exactly that they are three elements. Furthermore, counts appear in enough place that it\nmakes sens to create a class for it. This makes for more readable code", "createdAt": "2020-09-20T08:04:55Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7171", "merged": true, "mergeCommit": {"oid": "1b167377ea83a0b25c42fb5f423977948861539c"}, "closed": true, "closedAt": "2020-09-22T14:13:08Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKqi_zgBqjM3ODU5MTkwMDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLYpGcgFqTQ5MzUwNDkwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ce91d0e96a669bc414db31b535631163cef990d", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8ce91d0e96a669bc414db31b535631163cef990d", "committedDate": "2020-09-20T08:02:30Z", "message": "NF: represent counts's index as enum"}, "afterCommit": {"oid": "c71cf08e0be8b1d0d508143409c352c9d152b3fc", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c71cf08e0be8b1d0d508143409c352c9d152b3fc", "committedDate": "2020-09-20T08:30:36Z", "message": "NF: represent counts's index as enum"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c71cf08e0be8b1d0d508143409c352c9d152b3fc", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c71cf08e0be8b1d0d508143409c352c9d152b3fc", "committedDate": "2020-09-20T08:30:36Z", "message": "NF: represent counts's index as enum"}, "afterCommit": {"oid": "23033549caf94179b686725ef51421dab9d830f3", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/23033549caf94179b686725ef51421dab9d830f3", "committedDate": "2020-09-20T08:32:17Z", "message": "NF: represent counts's index as enum"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjA0ODY1", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#pullrequestreview-492204865", "createdAt": "2020-09-20T16:12:12Z", "commit": {"oid": "23033549caf94179b686725ef51421dab9d830f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNjoxMjoxM1rOHU7YgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNjoxMjoxM1rOHU7YgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjQ5Nw==", "bodyText": "It's a Queue not a Column really, isn't it? This feels like a mental hold-over from the int[0,1,2] previous vs naming it what it really represents", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491706497", "createdAt": "2020-09-20T16:12:13Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Counts.java", "diffHunk": "@@ -11,6 +13,10 @@\n  * Represents the three counts shown in deck picker and reviewer. Semantically more meaningful than int[]\n  */\n public class Counts {\n+    public enum Column {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23033549caf94179b686725ef51421dab9d830f3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjA0OTU5", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#pullrequestreview-492204959", "createdAt": "2020-09-20T16:13:49Z", "commit": {"oid": "9c52bff224fd77f640f93ffa104a66d64d4a77ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNjoxMzo0OVrOHU7Y-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNjoxMzo0OVrOHU7Y-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTcwNjYxNg==", "bodyText": "it seems like all the Counts usage is encapsulated except this - here you just reach and set something, but the Counts object has some math that it does also. I'd prefer the queue members of Count to be actually encapsulated and not accessed here in this manner for consistency", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#discussion_r491706616", "createdAt": "2020-09-20T16:13:49Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Sched.java", "diffHunk": "@@ -133,13 +133,13 @@ public void answerCard(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {\n \n \n     @Override\n-    public int[] counts(@NonNull Card card) {\n-        int[] counts = counts();\n+    public Counts counts(@NonNull Card card) {\n+        Counts counts = counts();\n         int idx = countIdx(card);\n         if (idx == 1) {\n-            counts[1] += card.getLeft() / 1000;\n+            counts.mLrn += card.getLeft() / 1000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c52bff224fd77f640f93ffa104a66d64d4a77ab"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjA1MDAx", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#pullrequestreview-492205001", "createdAt": "2020-09-20T16:14:30Z", "commit": {"oid": "23033549caf94179b686725ef51421dab9d830f3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "23033549caf94179b686725ef51421dab9d830f3", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/23033549caf94179b686725ef51421dab9d830f3", "committedDate": "2020-09-20T08:32:17Z", "message": "NF: represent counts's index as enum"}, "afterCommit": {"oid": "811285bc94cbf50a7a6ccc84ab2ef456805b60c5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/811285bc94cbf50a7a6ccc84ab2ef456805b60c5", "committedDate": "2020-09-20T19:29:36Z", "message": "NF: represent counts's index as enum"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjIxNjYx", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#pullrequestreview-492221661", "createdAt": "2020-09-20T20:43:36Z", "commit": {"oid": "811285bc94cbf50a7a6ccc84ab2ef456805b60c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "811285bc94cbf50a7a6ccc84ab2ef456805b60c5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/811285bc94cbf50a7a6ccc84ab2ef456805b60c5", "committedDate": "2020-09-20T19:29:36Z", "message": "NF: represent counts's index as enum"}, "afterCommit": {"oid": "f76d91444f1df17151b052d8c8e4bb2e05ecba67", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f76d91444f1df17151b052d8c8e4bb2e05ecba67", "committedDate": "2020-09-20T20:53:24Z", "message": "NF: represent counts's index as enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ef47838ca7012307b54e7045d05d88baf6fb111", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6ef47838ca7012307b54e7045d05d88baf6fb111", "committedDate": "2020-09-21T23:50:32Z", "message": "NF: represents counts as a class\n\nI don't like int[] when we know exactly that they are three elements. Furthermore, counts appear in enough place that it\nmakes sens to create a class for it. This makes for more readable code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8ecb592bc5a437c106a5bad4592aef410287acb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a8ecb592bc5a437c106a5bad4592aef410287acb", "committedDate": "2020-09-21T23:50:32Z", "message": "NF: represent counts's index as enum"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae487ed53d92a679443040c80bbed0dff01a5f3b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ae487ed53d92a679443040c80bbed0dff01a5f3b", "committedDate": "2020-09-21T03:12:19Z", "message": "NF: correct test\n\nIt should have failed before. I don't get it"}, "afterCommit": {"oid": "a8ecb592bc5a437c106a5bad4592aef410287acb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a8ecb592bc5a437c106a5bad4592aef410287acb", "committedDate": "2020-09-21T23:50:32Z", "message": "NF: represent counts's index as enum"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTA0OTAw", "url": "https://github.com/ankidroid/Anki-Android/pull/7171#pullrequestreview-493504900", "createdAt": "2020-09-22T14:13:01Z", "commit": {"oid": "a8ecb592bc5a437c106a5bad4592aef410287acb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4014, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}