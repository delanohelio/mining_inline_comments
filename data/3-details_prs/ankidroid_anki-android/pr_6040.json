{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MzgzODI0", "number": 6040, "title": "Uses requery's window size", "bodyText": "I want to look into requery's code to find the actual size of their\nwindow.\nI sent them a PR requery/sqlite-android#129 in order to add a getter which returns this window\nsize to us. Ideally, it would allow to remove those constants from\nAnkiDroid code which are here only to copy their constants.\nNote that, as I expected, we can't use a chunk whose size is the\nwindow (I tested); that's because the window contains extra\ninformations. So I decreased the window size slightly in order to have\nsomething reasonable.\nP.S.\nSince\u00a0Tim does not like github link in the code, I didn't put it in the code or commit message and just put it in the PR.\nEven if, honestly, in this case, I believe that a github link in our comment would be good, as it would allow to link directly to requery's constant in the code, instead of having to deal with the package name", "createdAt": "2020-04-17T23:37:47Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6040", "merged": true, "mergeCommit": {"oid": "90dba4eea7d349ab0212405a57b3a634e3c65991"}, "closed": true, "closedAt": "2020-08-15T23:15:38Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYqzcWAFqTM5NTgzNjQyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8r76nAFqTQ2MzY2NjE3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODM2NDI0", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-395836424", "createdAt": "2020-04-18T00:32:28Z", "commit": {"oid": "4113d75f6a781f15bcd47caed3f86699b2ef5db0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyODI5MDI2", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-422829026", "createdAt": "2020-06-02T15:59:37Z", "commit": {"oid": "4113d75f6a781f15bcd47caed3f86699b2ef5db0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4113d75f6a781f15bcd47caed3f86699b2ef5db0", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4113d75f6a781f15bcd47caed3f86699b2ef5db0", "committedDate": "2020-04-17T23:33:06Z", "message": "Uses requery's window size\n\nI want to look into requery's code to find the actual size of their\nwindow.\n\nI sent them a PR in order to add a getter which returns this window\nsize to us. Ideally, it would allow to remove those constants from\nAnkiDroid code which are here only to copy their constants.\n\nNote that, as I expected, we can't use a chunk whose size is the\nwindow (I tested); that's because the window contains extra\ninformations. So I decreased the window size slightly in order to have\nsomething reasonable."}, "afterCommit": {"oid": "6cf1caf59edc6f7fe82b10b412e00fb2c06be967", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6cf1caf59edc6f7fe82b10b412e00fb2c06be967", "committedDate": "2020-07-05T23:48:22Z", "message": "Uses requery's window size\n\nI want to look into requery's code to find the actual size of their\nwindow.\n\nI sent them a PR in order to add a getter which returns this window\nsize to us. Ideally, it would allow to remove those constants from\nAnkiDroid code which are here only to copy their constants.\n\nNote that, as I expected, we can't use a chunk whose size is the\nwindow (I tested); that's because the window contains extra\ninformations. So I decreased the window size slightly in order to have\nsomething reasonable."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMzQyNTY2", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-443342566", "createdAt": "2020-07-06T19:14:50Z", "commit": {"oid": "6cf1caf59edc6f7fe82b10b412e00fb2c06be967"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxOToxNDo1MFrOGtj9AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxOToxNDo1MFrOGtj9AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQyODE2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // the window size is saved in\n          \n          \n            \n                    // io.requery.android.database.CursorWindow.sCursorWindowSize.\n          \n          \n            \n                    // Values are copied here. Ideally, a getter would allow to access it.\n          \n          \n            \n                    final int WINDOW_SIZE_KB = 2048;\n          \n          \n            \n                    final int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n          \n          \n            \n                    // reduce the actual size a little bit.\n          \n          \n            \n                    final int chunk = (sCursorWindowSize / 16) * 15;\n          \n          \n            \n                    // We have the ability to look into our sqlite implementation on Android and use it's value\n          \n          \n            \n                    // as a ceiling. Try it, with a reasonable fallback in case of failure\n          \n          \n            \n                    int chunk = 1024*1024; // 1 mb, a little less than what a cursor line may contain\n          \n          \n            \n                    if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(mDb.getDatabase().getClass().getName())) {\n          \n          \n            \n                        try {\n          \n          \n            \n                            Field cursorWindowSize = io.requery.android.database.CursorWindow.class.getDeclaredField(\"sCursorWindowSize\");\n          \n          \n            \n                            cursorWindowSize.setAccessible(true);\n          \n          \n            \n                            chunk = cursorWindowSize.getInt(null);\n          \n          \n            \n                        } catch (Exception e) {\n          \n          \n            \n                            Timber.w(e, \"Unable to get window size from requery cursor.\");\n          \n          \n            \n                        }\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\n@Arthur-Milchior - tested and working with proof from the coverage report on jacocoTestReport", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#discussion_r450428161", "createdAt": "2020-07-06T19:14:50Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -272,7 +272,13 @@ public void load() {\n \n     public String loadColumn(String columnName) {\n         int pos = 1;\n-        int chunk = 1024*1024; // 1 mb, a little less than what a cursor line may contain\n+        // the window size is saved in\n+        // io.requery.android.database.CursorWindow.sCursorWindowSize.\n+        // Values are copied here. Ideally, a getter would allow to access it.\n+        final int WINDOW_SIZE_KB = 2048;\n+        final int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n+        // reduce the actual size a little bit.\n+        final int chunk = (sCursorWindowSize / 16) * 15;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cf1caf59edc6f7fe82b10b412e00fb2c06be967"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f1e19118ecfb6512f7b0ae09f57676c2442a3be", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1f1e19118ecfb6512f7b0ae09f57676c2442a3be", "committedDate": "2020-08-05T12:41:10Z", "message": "Update AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java\r\n\r\nUses reflection to get query size\n\nCo-authored-by: Mike Hardy <github@mikehardy.net>"}, "afterCommit": {"oid": "f29ac33842661e94099569117fc097966e2369ab", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f29ac33842661e94099569117fc097966e2369ab", "committedDate": "2020-08-05T12:44:29Z", "message": "Use Reflection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNjI4NTk4", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-461628598", "createdAt": "2020-08-05T12:47:18Z", "commit": {"oid": "f29ac33842661e94099569117fc097966e2369ab"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMjo0NzoxOFrOG8IGOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMjo0OTowOFrOG8IKnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcwMDQxMA==", "bodyText": "This isn't going to work now #3524 has gone in as it applies a decorator to the class", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#discussion_r465700410", "createdAt": "2020-08-05T12:47:18Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -272,7 +272,24 @@ public void load() {\n \n     public String loadColumn(String columnName) {\n         int pos = 1;\n-        int chunk = 1024*1024; // 1 mb, a little less than what a cursor line may contain\n+        // the window size is saved in\n+        // io.requery.android.database.CursorWindow.sCursorWindowSize.\n+        // Values are copied here. Ideally, a getter would allow to access it.\n+        final int WINDOW_SIZE_KB = 2048;\n+        final int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n+        // reduce the actual size a little bit.\n+        // We have the ability to look into our sqlite implementation on Android and use it's value\n+        // as a ceiling. Try it, with a reasonable fallback in case of failure\n+        if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(mDb.getDatabase().getClass().getName())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f29ac33842661e94099569117fc097966e2369ab"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcwMDcyMg==", "bodyText": "This is going to slow down the app (reflection and exceptions are slow), ideally perform it once and cache the result", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#discussion_r465700722", "createdAt": "2020-08-05T12:47:48Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -272,7 +272,24 @@ public void load() {\n \n     public String loadColumn(String columnName) {\n         int pos = 1;\n-        int chunk = 1024*1024; // 1 mb, a little less than what a cursor line may contain\n+        // the window size is saved in\n+        // io.requery.android.database.CursorWindow.sCursorWindowSize.\n+        // Values are copied here. Ideally, a getter would allow to access it.\n+        final int WINDOW_SIZE_KB = 2048;\n+        final int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n+        // reduce the actual size a little bit.\n+        // We have the ability to look into our sqlite implementation on Android and use it's value\n+        // as a ceiling. Try it, with a reasonable fallback in case of failure\n+        if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(mDb.getDatabase().getClass().getName())) {\n+            try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f29ac33842661e94099569117fc097966e2369ab"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcwMTUzMg==", "bodyText": "Use doubles here, then convert back to an int at the end. (I think this will make it more accurate, but needs verification).", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#discussion_r465701532", "createdAt": "2020-08-05T12:49:08Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -272,7 +272,24 @@ public void load() {\n \n     public String loadColumn(String columnName) {\n         int pos = 1;\n-        int chunk = 1024*1024; // 1 mb, a little less than what a cursor line may contain\n+        // the window size is saved in\n+        // io.requery.android.database.CursorWindow.sCursorWindowSize.\n+        // Values are copied here. Ideally, a getter would allow to access it.\n+        final int WINDOW_SIZE_KB = 2048;\n+        final int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n+        // reduce the actual size a little bit.\n+        // We have the ability to look into our sqlite implementation on Android and use it's value\n+        // as a ceiling. Try it, with a reasonable fallback in case of failure\n+        if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(mDb.getDatabase().getClass().getName())) {\n+            try {\n+                Field cursorWindowSize = io.requery.android.database.CursorWindow.class.getDeclaredField(\"sCursorWindowSize\");\n+                cursorWindowSize.setAccessible(true);\n+                sCursorWindowSize = cursorWindowSize.getInt(null);\n+            } catch (Exception e) {\n+                Timber.w(e, \"Unable to get window size from requery cursor.\");\n+            }\n+        }\n+        int final chunk = sCursorWindowSize * 15 / 16 ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f29ac33842661e94099569117fc097966e2369ab"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f29ac33842661e94099569117fc097966e2369ab", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f29ac33842661e94099569117fc097966e2369ab", "committedDate": "2020-08-05T12:44:29Z", "message": "Use Reflection"}, "afterCommit": {"oid": "ba6b122fb0254db20500da83987e7dabdffdb023", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ba6b122fb0254db20500da83987e7dabdffdb023", "committedDate": "2020-08-05T17:02:23Z", "message": "Use Reflection"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba6b122fb0254db20500da83987e7dabdffdb023", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ba6b122fb0254db20500da83987e7dabdffdb023", "committedDate": "2020-08-05T17:02:23Z", "message": "Use Reflection"}, "afterCommit": {"oid": "26212464fef07c19711b2d39c147b404c032ecc6", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/26212464fef07c19711b2d39c147b404c032ecc6", "committedDate": "2020-08-05T17:02:53Z", "message": "Use Reflection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxOTM3Mzk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-461937395", "createdAt": "2020-08-05T18:54:47Z", "commit": {"oid": "7ebb17fd089bcb2374e8879fc4bb32978ac58afd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODo1NDo0N1rOG8WdWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODo1NDo0N1rOG8WdWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkzNTcwNw==", "bodyText": "@Arthur-Milchior - @david-allison-1 is right on this one, we'll need a change to the new wrapper as well, in order to access this https://github.com/david-allison-1/Anki-Android/blob/677831e94aa2cbd83284a305cf9cb88050e78f4f/AnkiDroid/src/main/java/com/ichi2/utils/DatabaseChangeDecorator.java#L39 - I believe the change is to make a getter for the wrapped object, then in this PR do a cast in order to access it\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(mDb.getDatabase().getClass().getName())) {\n          \n          \n            \n                    if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(((DatabaseChangeDecorator)mDb.getDatabase()).getWrapped().getClass().getName())) {\n          \n      \n    \n    \n  \n\nThis PR has been close but refuses to die! I think this last bit will get it", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#discussion_r465935707", "createdAt": "2020-08-05T18:54:47Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -272,7 +272,24 @@ public void load() {\n \n     public String loadColumn(String columnName) {\n         int pos = 1;\n-        int chunk = 1024*1024; // 1 mb, a little less than what a cursor line may contain\n+        // the window size is saved in\n+        // io.requery.android.database.CursorWindow.sCursorWindowSize.\n+        // Values are copied here. Ideally, a getter would allow to access it.\n+        final int WINDOW_SIZE_KB = 2048;\n+        final int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n+        // reduce the actual size a little bit.\n+        // We have the ability to look into our sqlite implementation on Android and use it's value\n+        // as a ceiling. Try it, with a reasonable fallback in case of failure\n+        if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(mDb.getDatabase().getClass().getName())) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcwMDQxMA=="}, "originalCommit": {"oid": "f29ac33842661e94099569117fc097966e2369ab"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxOTU3MTQ3", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-461957147", "createdAt": "2020-08-05T19:23:56Z", "commit": {"oid": "ae94ae74acede39d0fd0c999cb848d60472f5b55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOToyMzo1NlrOG8XZyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOToyMzo1NlrOG8XZyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1MTE3Ng==", "bodyText": "You need to check that mDb.getDatabase() can be cast to DatabaseChangeDecorator\nIt'd be best to extract a few variables out of the line for clarity.\nMaybe extract getCursorWindowSize() so an early return is possible to make the code cleaner", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#discussion_r465951176", "createdAt": "2020-08-05T19:23:56Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -276,14 +277,40 @@ public void load() {\n         mDecks.load(loadColumn(\"decks\"), deckConf);\n     }\n \n+    private static int sChunk = 0;\n+\n+    private int getChunk() {\n+        if (sChunk != 0) {\n+            return sChunk;\n+        }\n+        // the window size is saved in\n+        // io.requery.android.database.CursorWindow.sCursorWindowSize.\n+        // Values are copied here. Ideally, a getter would allow to access it.\n+        final int WINDOW_SIZE_KB = 2048;\n+        int sCursorWindowSize = WINDOW_SIZE_KB * 1024;\n+        // reduce the actual size a little bit.\n+        // We have the ability to look into our sqlite implementation on Android and use it's value\n+        // as a ceiling. Try it, with a reasonable fallback in case of failure\n+        if (\"io.requery.android.database.sqlite.SQLiteDatabase\".equals(((DatabaseChangeDecorator)mDb.getDatabase()).getWrapped().getClass().getName())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae94ae74acede39d0fd0c999cb848d60472f5b55"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae94ae74acede39d0fd0c999cb848d60472f5b55", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ae94ae74acede39d0fd0c999cb848d60472f5b55", "committedDate": "2020-08-05T19:10:10Z", "message": "Update AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java\n\nCo-authored-by: Mike Hardy <github@mikehardy.net>"}, "afterCommit": {"oid": "7daccebcd2fec5d892fabcd5720494e0769f15bc", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7daccebcd2fec5d892fabcd5720494e0769f15bc", "committedDate": "2020-08-07T21:53:25Z", "message": "Uses requery's window size\n\nI want to look into requery's code to find the actual size of their\nwindow.\n\nI sent them a PR in order to add a getter which returns this window\nsize to us. Ideally, it would allow to remove those constants from\nAnkiDroid code which are here only to copy their constants.\n\nNote that, as I expected, we can't use a chunk whose size is the\nwindow (I tested); that's because the window contains extra\ninformations. So I decreased the window size slightly in order to have\nsomething reasonable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48397da16ce2f4fdda704321a8a6b48919cd4bd7", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/48397da16ce2f4fdda704321a8a6b48919cd4bd7", "committedDate": "2020-08-07T21:57:10Z", "message": "Uses requery's window size\n\nI want to look into requery's code to find the actual size of their\nwindow.\n\nI sent them a PR in order to add a getter which returns this window\nsize to us. Ideally, it would allow to remove those constants from\nAnkiDroid code which are here only to copy their constants.\n\nNote that, as I expected, we can't use a chunk whose size is the\nwindow (I tested); that's because the window contains extra\ninformations. So I decreased the window size slightly in order to have\nsomething reasonable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e2e6c87c4985c9f4ca1cf3e05322a893da31340", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6e2e6c87c4985c9f4ca1cf3e05322a893da31340", "committedDate": "2020-08-07T22:07:50Z", "message": "NF: test writting reading big data in database"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7daccebcd2fec5d892fabcd5720494e0769f15bc", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7daccebcd2fec5d892fabcd5720494e0769f15bc", "committedDate": "2020-08-07T21:53:25Z", "message": "Uses requery's window size\n\nI want to look into requery's code to find the actual size of their\nwindow.\n\nI sent them a PR in order to add a getter which returns this window\nsize to us. Ideally, it would allow to remove those constants from\nAnkiDroid code which are here only to copy their constants.\n\nNote that, as I expected, we can't use a chunk whose size is the\nwindow (I tested); that's because the window contains extra\ninformations. So I decreased the window size slightly in order to have\nsomething reasonable."}, "afterCommit": {"oid": "6e2e6c87c4985c9f4ca1cf3e05322a893da31340", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6e2e6c87c4985c9f4ca1cf3e05322a893da31340", "committedDate": "2020-08-07T22:07:50Z", "message": "NF: test writting reading big data in database"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNjY2MTcz", "url": "https://github.com/ankidroid/Anki-Android/pull/6040#pullrequestreview-463666173", "createdAt": "2020-08-07T22:12:54Z", "commit": {"oid": "6e2e6c87c4985c9f4ca1cf3e05322a893da31340"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3429, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}