{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMDAxMTkz", "number": 6233, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTo0ODo1M1rOD-5Lbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoxNTo0NlrOD-5nUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Mjc1MTE4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTo0ODo1M1rOGZRUeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTowMzo0NVrOGZhJZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTM1NA==", "bodyText": "Nit: could we use AOSP naming (m Prefix), and move these variables to the top of the class?\nAside: I don't like Hungarian Notation, but it's best to be consistent.", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429151354", "createdAt": "2020-05-22T09:48:53Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1NjQ2Mw==", "bodyText": "Nit: Do these need to be members, or can these be function scoped?", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429156463", "createdAt": "2020-05-22T09:59:58Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTM1NA=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMTUwOA==", "bodyText": "\"these\" ? I don't know what you are referring to.\nI don't believe that there is any interest in having undoEnabled as a member of the class. It's quite easy right now to get this information from the undoEmpty and undoAvailable function. If we wanted to keep this information as a method, the code change would get bigger as it means we would need to ensure that this variable is changed each time the collection/whiteboard undo list is changed", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429401508", "createdAt": "2020-05-22T18:43:44Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTM1NA=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMzA5Mg==", "bodyText": "Are there other variables you want to move to the class level ?", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429403092", "createdAt": "2020-05-22T18:47:48Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTM1NA=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQxMDY2Mg==", "bodyText": "Disregard this, the spacing inside GitHub implied that these were member variables.", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429410662", "createdAt": "2020-05-22T19:03:45Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTM1NA=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Mjc1MzI3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTo0OTozNlrOGZRVxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0NzoxNVrOGZgq_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTY4NA==", "bodyText": "nit/personal preference: isEmpty()", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429151684", "createdAt": "2020-05-22T09:49:36Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -402,5 +407,9 @@ public void apply() {\n             }\n             invalidate();\n         }\n+\n+        public boolean empty() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMjMyNA==", "bodyText": "I wanted to stay consistent with the method name of Stack. After all, UndoStack is essentially a Stack, so keeping name as consistent as possible with the Stack class seems better. After all, that is already what occurs with add, clear, size and pop.", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429402324", "createdAt": "2020-05-22T18:45:45Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -402,5 +407,9 @@ public void apply() {\n             }\n             invalidate();\n         }\n+\n+        public boolean empty() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTY4NA=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMjg3OA==", "bodyText": "So I currently stick with my choice here, unless a second person share your preference", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429402878", "createdAt": "2020-05-22T18:47:15Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -402,5 +407,9 @@ public void apply() {\n             }\n             invalidate();\n         }\n+\n+        public boolean empty() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1MTY4NA=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Mjc5MDkwOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDowMzoyN1rOGZRueQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0NTo1NlrOGZgpJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1ODAwOQ==", "bodyText": "Could you change the title of the PR if there's a functional change mixed in", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429158009", "createdAt": "2020-05-22T10:03:27Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;\n+        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n+            // Whiteboard is here and strokes have been added at some point\n+            undoIcon = R.drawable.ic_eraser_variant_white_24dp;\n+            undoEnabled = !mWhiteboard.undoEmpty();\n         } else {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n+            // We can arrive here even if `mShowWhiteboard &&\n+            // mWhiteboard != null` if no stroke had ever been made\n+            undoIcon = R.drawable.ic_undo_white_24dp;\n+            undoEnabled = (colIsOpen() && getCol().undoAvailable());\n+        }\n+        int alpha;\n+        if (getControlBlocked() == ControlBlock.SLOW || !undoEnabled) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMjQwNQ==", "bodyText": "Sorry, I thought I already did it. My bad", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429402405", "createdAt": "2020-05-22T18:45:56Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;\n+        boolean undoEnabled;\n+        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n+            // Whiteboard is here and strokes have been added at some point\n+            undoIcon = R.drawable.ic_eraser_variant_white_24dp;\n+            undoEnabled = !mWhiteboard.undoEmpty();\n         } else {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n+            // We can arrive here even if `mShowWhiteboard &&\n+            // mWhiteboard != null` if no stroke had ever been made\n+            undoIcon = R.drawable.ic_undo_white_24dp;\n+            undoEnabled = (colIsOpen() && getCol().undoAvailable());\n+        }\n+        int alpha;\n+        if (getControlBlocked() == ControlBlock.SLOW || !undoEnabled) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE1ODAwOQ=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MjgyMDk5OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoxNTowN1rOGZSB8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0NjozNVrOGZgqGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2Mjk5Mw==", "bodyText": "Nit: @DrawableRes if this needs to exist", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429162993", "createdAt": "2020-05-22T10:15:07Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMjY0OA==", "bodyText": "Thanks. I didn't know this annotation", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429402648", "createdAt": "2020-05-22T18:46:35Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -431,21 +431,29 @@ public boolean onCreateOptionsMenu(Menu menu) {\n             }\n         }\n \n-        if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.undoSize() > 0) {\n-            // Whiteboard undo queue non-empty. Switch the undo icon to a whiteboard specific one.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n-        } else if (mShowWhiteboard && mWhiteboard != null && mWhiteboard.isUndoModeActive()) {\n-            // Whiteboard undo queue empty, but user has added strokes to it for current card. Disable undo button.\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_eraser_variant_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(false).getIcon().setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-        } else if (colIsOpen() && getCol().undoAvailable()) {\n-            menu.findItem(R.id.action_undo).setIcon(R.drawable.ic_undo_white_24dp);\n-            menu.findItem(R.id.action_undo).setEnabled(true).getIcon().setAlpha(Themes.ALPHA_ICON_ENABLED_LIGHT);\n+        // Undo button\n+        int undoIcon;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2Mjk5Mw=="}, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MjgyMjU2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoxNTo0NlrOGZSC5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoxNTo0NlrOGZSC5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2MzIzOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /** @return Whethere there are strokes to undo */\n          \n          \n            \n                /** @return Whether there are strokes to undo */", "url": "https://github.com/ankidroid/Anki-Android/pull/6233#discussion_r429163239", "createdAt": "2020-05-22T10:15:46Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -218,6 +218,11 @@ public int undoSize() {\n         return mUndo.size();\n     }\n \n+    /** @return Whethere there are strokes to undo */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c9f6af08f3c6fc9b814c5be8636613b5a21496"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 266, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}