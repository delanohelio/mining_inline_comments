{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NDc3OTIw", "number": 7349, "title": "Split buried/suspended in statistics view", "bodyText": "Pull Request template\nPurpose / Description\nI use templates that produce a lot of siblings, and want to be able to see my current number of buried cards without actually typing in a search. Generally, I do this by using the Statistics view to see my number of \"Suspended+Buried\" cards at the start of the day. If I remember that number, I can just check \"Suspended+Buried\" again later in the day to get a sense of how many buried cards I must have. That's kind of silly, though, and ever since I noticed desktop Anki split \"Suspended+Buried\" into separate \"Suspended\" and \"Buried\" stats, I've wanted the Android app to do the same.\nFixes\nI haven't filed an issue to request this feature yet. Should I do that?\nApproach\nThis change just extends what AnkiDroid already does to draw the card-types pie chart. It makes the \"suspended+buried\" subquery specific to suspended cards, adds another subquery for buried cards, and updates various places where AnkiDroid reads the results of the card-types query.\nHow Has This Been Tested?\nI created a new deck, turned on sibling burial, created a cloze note with two deletions, and created a handful of basic cards.  I suspended one of the basic cards, marked another as easy, and manually buried a third. When I drew the cloze card, I marked it as easy.\nThen I opened the Statistics tab and confirmed that the type-counts were correct and the pie chart looked reasonable.\nI did this using an emulator (Pixel 2 API 30).\nThis is the first time I've done any sort of Android development, so I don't know which devices or versions are likely to run into problems with this type of change. I'd be happy to repeat my tests against other configurations if that would be helpful.\nLearning (optional, can help others)\nI looked around at what desktop Anki does. I think this is the most relevant function.\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code\n\nI'm not sure where this fits into the template, but: I didn't update the localization key-name (per the Development Guide in the wiki). But it seems like that might be a good idea. \"statistics_suspended_and_buried\" is really just \"statistics_suspended\" now. Same thing is true of the \"stats_suspended_and_buried\" color attribute - maybe I can change that one safely without messing up existing translations?\nAlso, I'm not sure I handled the new colors correctly. I just added an arbitrary shade of gray for \"Buried\". I didn't poke around in desktop Anki to make sure the colors match, since I assume Ankidroid's color schemes are more complicated/configurable than desktop Anki's. Let me know if I should go find the colors and make them match.", "createdAt": "2020-10-04T18:30:31Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7349", "merged": true, "mergeCommit": {"oid": "6019b282b9fc7fefb861c83b37750357e4207d31"}, "closed": true, "closedAt": "2020-10-06T14:01:20Z", "author": {"login": "jdpopkin"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPS-67gH2gAyNDk3NDc3OTIwOjk3N2ZlY2RkYzAwYjEwM2FlYmU1MDBiMzljNGIzNWJjZWRjNmI0NDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdP43GZAFqTUwMjk5NjEzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "977fecddc00b103aebe500b39c4b35bcedc6b445", "author": {"user": {"login": "jdpopkin", "name": "Jackson Popkin"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/977fecddc00b103aebe500b39c4b35bcedc6b445", "committedDate": "2020-10-04T17:53:07Z", "message": "Split buried/suspended in statistics view\n\nDivide the current \"Suspended+Buried\" stat in the \"Card Types\" section\nof \"Statistics\" into separate \"Suspended\" and \"Buried\" stats. The latest\nversions of desktop Anki do this."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjUwMDQ3", "url": "https://github.com/ankidroid/Anki-Android/pull/7349#pullrequestreview-501650047", "createdAt": "2020-10-04T19:00:23Z", "commit": {"oid": "977fecddc00b103aebe500b39c4b35bcedc6b445"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxOTowMDoyM1rOHcJfig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxOTowMTo1NFrOHcJgCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NzcwNg==", "bodyText": "I think your mention of this in the PR was your intuition feeling it is probably better to to go ahead and change this, and I think it is one of the cases where the old key needs to go away and a fresh key needs to go in, as this is semantically different now. It's great to be sensitive to the translator workload but semantic differences should be respected\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"statistics_suspended_and_buried\">Suspended</string>\n          \n          \n            \n                <string name=\"statistics_suspended\">Suspended</string>\n          \n      \n    \n    \n  \n\nPlease note, I have not looked to see if the old key was used elsewhere! It very well might be, then I'd argue for addition of this key I'm suggesting without deleting the old key", "url": "https://github.com/ankidroid/Anki-Android/pull/7349#discussion_r499277706", "createdAt": "2020-10-04T19:00:23Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/06-statistics.xml", "diffHunk": "@@ -22,7 +22,8 @@\n     <string name=\"statistics_mature\">Mature</string>\n     <string name=\"statistics_young_and_learn\">Young+Learn</string>\n     <string name=\"statistics_unlearned\">Unseen</string>\n-    <string name=\"statistics_suspended_and_buried\">Suspended+Buried</string>\n+    <string name=\"statistics_suspended_and_buried\">Suspended</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "977fecddc00b103aebe500b39c4b35bcedc6b445"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NzgzNA==", "bodyText": "same thought process here as above with the translation though this doesn't ripple out to translations at least - if stats_suspended_and_buried is not used elsewhere in the combination, then I'd vote for altering the key in all cases (colors themes etc) to be like so\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <attr name=\"stats_suspended_and_buried\" format=\"color\"/>\n          \n          \n            \n                <attr name=\"stats_suspended\" format=\"color\"/>", "url": "https://github.com/ankidroid/Anki-Android/pull/7349#discussion_r499277834", "createdAt": "2020-10-04T19:01:54Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/attrs.xml", "diffHunk": "@@ -85,6 +85,7 @@\n     <attr name=\"stats_counts\" format=\"color\"/>\n     <attr name=\"stats_unseen\" format=\"color\"/>\n     <attr name=\"stats_suspended_and_buried\" format=\"color\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "977fecddc00b103aebe500b39c4b35bcedc6b445"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "923449aaeb14d4a90d09fa8a3fd79cf641717a51", "author": {"user": {"login": "jdpopkin", "name": "Jackson Popkin"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/923449aaeb14d4a90d09fa8a3fd79cf641717a51", "committedDate": "2020-10-06T00:04:24Z", "message": "Rename suspended_and_buried keys\n\nPer code review, now that we're dividing the \"Suspended+Buried\" content\ninto two separate statistics, we should rename the\n`statistic_suspended_and_buried` translation-key and\n`stats_suspended_and_buried` color-key - they only include suspended\ncards now."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyOTk2MTM5", "url": "https://github.com/ankidroid/Anki-Android/pull/7349#pullrequestreview-502996139", "createdAt": "2020-10-06T14:00:58Z", "commit": {"oid": "923449aaeb14d4a90d09fa8a3fd79cf641717a51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3947, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}