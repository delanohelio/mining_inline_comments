{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMzk5NTI3", "number": 6269, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMTo1NjozNlrOD_MUSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMTo1NjozNlrOD_MUSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTg4NjgzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMTo1NjozNlrOGZudUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMjoxMzoxMlrOGZujCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyODc1Mw==", "bodyText": "Is this line necessary?", "url": "https://github.com/ankidroid/Anki-Android/pull/6269#discussion_r429628753", "createdAt": "2020-05-24T11:56:36Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1057,7 +1057,9 @@ public void updateFieldCache(long[] nids) {\n             }\n             fields = (Map<String, String>) Hooks.runFilter(\"mungeFields\", fields, model, data, this);\n             String html = new Template(format, fields).render();\n-            d.put(type, (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this));\n+            html = (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee40dc7fbe079121c5decdc01933dad591a48ba1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTA3Mw==", "bodyText": "Ah, I see, presumably there are other filters (chess) which mungeQA still calls?", "url": "https://github.com/ankidroid/Anki-Android/pull/6269#discussion_r429629073", "createdAt": "2020-05-24T12:00:35Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1057,7 +1057,9 @@ public void updateFieldCache(long[] nids) {\n             }\n             fields = (Map<String, String>) Hooks.runFilter(\"mungeFields\", fields, model, data, this);\n             String html = new Template(format, fields).render();\n-            d.put(type, (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this));\n+            html = (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyODc1Mw=="}, "originalCommit": {"oid": "ee40dc7fbe079121c5decdc01933dad591a48ba1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTEyMg==", "bodyText": "I don't understand this question. What would you want to do instead ? Have a series of imbricated function call ?\nI could do\nd.put(type, (String) Hooks.runFilter(\"mungeQA\", LaTeX.mungeQA(html, this, model), type, fields, model, data, this));\n\nbut that would be horrible to read.\nI believe that storing the intermediate result in html is far more readable", "url": "https://github.com/ankidroid/Anki-Android/pull/6269#discussion_r429629122", "createdAt": "2020-05-24T12:01:00Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1057,7 +1057,9 @@ public void updateFieldCache(long[] nids) {\n             }\n             fields = (Map<String, String>) Hooks.runFilter(\"mungeFields\", fields, model, data, this);\n             String html = new Template(format, fields).render();\n-            d.put(type, (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this));\n+            html = (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyODc1Mw=="}, "originalCommit": {"oid": "ee40dc7fbe079121c5decdc01933dad591a48ba1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzMDIxOQ==", "bodyText": "Yeah. That's the kind of problem that I mentionned earlier. I can't make a clean code and remove hook if I only remove hooks one by one", "url": "https://github.com/ankidroid/Anki-Android/pull/6269#discussion_r429630219", "createdAt": "2020-05-24T12:13:12Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1057,7 +1057,9 @@ public void updateFieldCache(long[] nids) {\n             }\n             fields = (Map<String, String>) Hooks.runFilter(\"mungeFields\", fields, model, data, this);\n             String html = new Template(format, fields).render();\n-            d.put(type, (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this));\n+            html = (String) Hooks.runFilter(\"mungeQA\", html, type, fields, model, data, this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyODc1Mw=="}, "originalCommit": {"oid": "ee40dc7fbe079121c5decdc01933dad591a48ba1"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 294, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}