{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MDY3MTI4", "number": 6714, "title": "Correcting test on phone", "bodyText": "On my phone, tests break, because the schedVersion is checked even if the sched version was not actually changed. So I\nused real test instead.\nI believe that what would be even better would be to run the tests only once if we are on phone, but I don't know how to\ndo it\nI tried to follow #6712 (review) but it does not work for reason\u00a0I don't really understand. Probably because setup halts but teardown is still executed", "createdAt": "2020-07-22T11:47:12Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6714", "merged": true, "mergeCommit": {"oid": "6d9cf9b218d515186cd2e2856ce2a39a21f00e98"}, "closed": true, "closedAt": "2020-07-22T18:18:10Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3ZYjrAH2gAyNDU1MDY3MTI4OjYwYjY1ZjMwMTEyNThkMjRlNmRmM2VjYmQ1MWMzYmY4YTE3ZjljZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3e_K2AFqTQ1MzU3MDAyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "60b65f3011258d24e6df3ecbd51c3bf8a17f9cf2", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60b65f3011258d24e6df3ecbd51c3bf8a17f9cf2", "committedDate": "2020-07-22T11:46:22Z", "message": "Correcting test on phone\n\nOn my phone, tests break, because the schedVersion is checked even if the sched version was not actually changed. So I\nused real test instead.\nI believe that what would be even better would be to run the tests only once if we are on phone, but I don't know how to\ndo it"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMjQ1ODky", "url": "https://github.com/ankidroid/Anki-Android/pull/6714#pullrequestreview-453245892", "createdAt": "2020-07-22T11:56:32Z", "commit": {"oid": "991521dbfd5032a611725a2280a3cc1420d69543"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMTo1NjozM1rOG1fHag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMTo1NjozM1rOG1fHag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODczNzUxNA==", "bodyText": "I don't think this should be static. set tearDown = false at the start of the method, and leave it as an instance variable.", "url": "https://github.com/ankidroid/Anki-Android/pull/6714#discussion_r458737514", "createdAt": "2020-07-22T11:56:33Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/ContentProviderTest.java", "diffHunk": "@@ -111,6 +114,8 @@\n     private static final String[] TEST_MODEL_AFMT = {\"{{BACK}}\", \"{{FRONTS}}\"};\n     private static final String[] TEST_NOTE_FIELDS = {\"dis is za Fr0nt\", \"Te$t\"};\n     private static final String TEST_MODEL_CSS = \"styleeeee\";\n+    // Whether tear down should be executed. I.e. if set up was not cancelled.\n+    private static boolean tearDown = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "991521dbfd5032a611725a2280a3cc1420d69543"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "991521dbfd5032a611725a2280a3cc1420d69543", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/991521dbfd5032a611725a2280a3cc1420d69543", "committedDate": "2020-07-22T11:53:07Z", "message": "Tear down only if set up was executed"}, "afterCommit": {"oid": "9547033dc4ea205f9c8da8079a937c1699cb0656", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9547033dc4ea205f9c8da8079a937c1699cb0656", "committedDate": "2020-07-22T12:00:31Z", "message": "Tear down only if set up was executed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMjkxMzkz", "url": "https://github.com/ankidroid/Anki-Android/pull/6714#pullrequestreview-453291393", "createdAt": "2020-07-22T12:59:41Z", "commit": {"oid": "9547033dc4ea205f9c8da8079a937c1699cb0656"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo1OTo0MVrOG1hPnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo1OTo0MVrOG1hPnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc3MjM4MQ==", "bodyText": "set tearDown = false in this block, not in the variable init\nsetUp is run more than once, and we want the initial state to be false", "url": "https://github.com/ankidroid/Anki-Android/pull/6714#discussion_r458772381", "createdAt": "2020-07-22T12:59:41Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/ContentProviderTest.java", "diffHunk": "@@ -137,7 +142,15 @@ public void setUp() throws Exception {\n         // (so it is safe) we will try to run with multiple scheduler versions\n         if (InstrumentedTest.isEmulator()) {\n             col.changeSchedulerVer(schedVersion);\n+        } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9547033dc4ea205f9c8da8079a937c1699cb0656"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05dc4d9c667ab22556772ff228e340ad24f6c821", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/05dc4d9c667ab22556772ff228e340ad24f6c821", "committedDate": "2020-07-22T13:03:29Z", "message": "Tear down only if set up was executed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9547033dc4ea205f9c8da8079a937c1699cb0656", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9547033dc4ea205f9c8da8079a937c1699cb0656", "committedDate": "2020-07-22T12:00:31Z", "message": "Tear down only if set up was executed"}, "afterCommit": {"oid": "05dc4d9c667ab22556772ff228e340ad24f6c821", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/05dc4d9c667ab22556772ff228e340ad24f6c821", "committedDate": "2020-07-22T13:03:29Z", "message": "Tear down only if set up was executed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNDA3NTIx", "url": "https://github.com/ankidroid/Anki-Android/pull/6714#pullrequestreview-453407521", "createdAt": "2020-07-22T15:02:40Z", "commit": {"oid": "05dc4d9c667ab22556772ff228e340ad24f6c821"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTcwMDIz", "url": "https://github.com/ankidroid/Anki-Android/pull/6714#pullrequestreview-453570023", "createdAt": "2020-07-22T18:18:04Z", "commit": {"oid": "05dc4d9c667ab22556772ff228e340ad24f6c821"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3037, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}