{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNDAxOTM0", "number": 6270, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMjowMjoxMlrOD_MVpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMTozMjo1MVrOD_WtdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTg5MDMwOnYy", "diffSide": "LEFT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/hooks/AdvancedStatistics.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMjowMjoxMlrOGZufLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMjowMjoxMlrOGZufLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTIzMQ==", "bodyText": "nit: unnecessary whitespace", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429629231", "createdAt": "2020-05-24T12:02:12Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/hooks/AdvancedStatistics.java", "diffHunk": "@@ -99,7 +99,7 @@\n @SuppressWarnings({\"PMD.AvoidThrowingRawExceptionTypes\",\"PMD.ExcessiveClassLength\",\"PMD.ExcessiveMethodLength\",\n                     \"PMD.AvoidReassigningParameters\",\"PMD.FieldDeclarationsShouldBeAtStartOfClass\",\"PMD.SwitchStatementsShouldHaveDefault\",\n                     \"PMD.NPathComplexity\",\"PMD.OneDeclarationPerLine\",\"PMD.SwitchStmtsShouldHaveDefault\"})\n-public class AdvancedStatistics extends Hook  {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55e40f2b484b0aaac3480568af70fb3a2bfda069"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTg5MDkzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMjowMzoxNFrOGZufhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMzo1MDowMlrOGZvEpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTMxOA==", "bodyText": "From a design perspective, these would be better in ChessFilter. Is there a rationale for moving these to Collection?", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429629318", "createdAt": "2020-05-24T12:03:14Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2243,4 +2246,71 @@ public boolean getFailed() {\n             return mFailed;\n         }\n     }\n+\n+    private static final Pattern fFenPattern = Pattern.compile(\"\\\\[fen ?([^\\\\]]*)\\\\]([^\\\\[]+)\\\\[/fen\\\\]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55e40f2b484b0aaac3480568af70fb3a2bfda069"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzMDMzMQ==", "bodyText": "dealing with chess is a part of _renderQA.\nI should admit that I fail to see why rendering is in Collection. However, I believe that putting all of rendering together makes sens.", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429630331", "createdAt": "2020-05-24T12:14:59Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2243,4 +2246,71 @@ public boolean getFailed() {\n             return mFailed;\n         }\n     }\n+\n+    private static final Pattern fFenPattern = Pattern.compile(\"\\\\[fen ?([^\\\\]]*)\\\\]([^\\\\[]+)\\\\[/fen\\\\]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTMxOA=="}, "originalCommit": {"oid": "55e40f2b484b0aaac3480568af70fb3a2bfda069"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzNjAzNw==", "bodyText": "I'd rather we moved it back - Single Responsibility Principle and all.\nOur hands are tied with Anki Desktop compatibility in terms of splitting out Collection further, but we might as well make code intuitive for the next developers that come along", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429636037", "createdAt": "2020-05-24T13:20:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2243,4 +2246,71 @@ public boolean getFailed() {\n             return mFailed;\n         }\n     }\n+\n+    private static final Pattern fFenPattern = Pattern.compile(\"\\\\[fen ?([^\\\\]]*)\\\\]([^\\\\[]+)\\\\[/fen\\\\]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTMxOA=="}, "originalCommit": {"oid": "55e40f2b484b0aaac3480568af70fb3a2bfda069"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzNjI4NA==", "bodyText": "I don't know whether you check Anki's update or not. But you may be interested in knowing that _renderQA is not in collection.py.\nIt's in rust back-end.\nSo by leaving _renderQA here, we are not following anki anymore", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429636284", "createdAt": "2020-05-24T13:22:57Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2243,4 +2246,71 @@ public boolean getFailed() {\n             return mFailed;\n         }\n     }\n+\n+    private static final Pattern fFenPattern = Pattern.compile(\"\\\\[fen ?([^\\\\]]*)\\\\]([^\\\\[]+)\\\\[/fen\\\\]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTMxOA=="}, "originalCommit": {"oid": "55e40f2b484b0aaac3480568af70fb3a2bfda069"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYzODgyMA==", "bodyText": "I just removed the last commits", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429638820", "createdAt": "2020-05-24T13:50:02Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2243,4 +2246,71 @@ public boolean getFailed() {\n             return mFailed;\n         }\n     }\n+\n+    private static final Pattern fFenPattern = Pattern.compile(\"\\\\[fen ?([^\\\\]]*)\\\\]([^\\\\[]+)\\\\[/fen\\\\]\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyOTMxOA=="}, "originalCommit": {"oid": "55e40f2b484b0aaac3480568af70fb3a2bfda069"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NzU4OTY0OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMTozMjo1MVrOGZ-Lcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMTozMjo1MVrOGZ-Lcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg4NjMyMw==", "bodyText": "Also mentioned in the statistics PR, but I feel a static factory over static instance state would be a better option.", "url": "https://github.com/ankidroid/Anki-Android/pull/6270#discussion_r429886323", "createdAt": "2020-05-25T11:32:51Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -47,6 +50,11 @@ public static Collection Collection(Context context, String path, boolean server\n         assert path.endsWith(\".anki2\");\n         // Since this is the entry point into libanki, initialize the hooks here.\n         Hooks.getInstance(context);\n+        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context.getApplicationContext());\n+        // Preferences activated hooks\n+        if (prefs.getBoolean(\"convertFenText\", false)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "964f02ebe99530f518824ff1c4f0bebe721c87d0"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 297, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}