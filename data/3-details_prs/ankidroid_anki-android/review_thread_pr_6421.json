{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMDI0MzU5", "number": 6421, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoxNzowM1rOEECe9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoxOTowNlrOEEChZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNjcwNDUyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoxNzowM1rOGhaoag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoyNDoyNlrOGha3cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5MjUyMg==", "bodyText": "magic number 2?", "url": "https://github.com/ankidroid/Anki-Android/pull/6421#discussion_r437692522", "createdAt": "2020-06-09T20:17:03Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -1053,6 +1075,47 @@ public boolean calculateAnswerButtons(AxisType type) {\n         mValueLabels = new int[] { R.string.statistics_learn, R.string.statistics_young, R.string.statistics_mature};\n         mColors = new int[] { R.attr.stats_learn, R.attr.stats_young, R.attr.stats_mature};\n         mType = type;\n+        ArrayList<double[]> list = eases(type);\n+\n+        //TODO adjust for AnswerButton, for now only copied from intervals\n+        // small adjustment for a proper chartbuilding with achartengine\n+        if (list.size() == 0) {\n+            list.add(0, new double[]{0, 1, 0});\n+        }\n+\n+        mSeriesList = new double[4][list.size()+1];\n+\n+        for (int i = 0; i < list.size(); i++) {\n+            double[] data = list.get(i);\n+            int currentType = (int)data[0];\n+            double ease = data[1];\n+            double cnt = data[2];\n+\n+            if (currentType == Consts.CARD_TYPE_LRN) {\n+                ease += 5;\n+            } else if (currentType == 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0739ebe710da8f375c7dff3165dde3ec1a97cb68"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5NjM2OQ==", "bodyText": "Extracted method - not my code", "url": "https://github.com/ankidroid/Anki-Android/pull/6421#discussion_r437696369", "createdAt": "2020-06-09T20:24:26Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -1053,6 +1075,47 @@ public boolean calculateAnswerButtons(AxisType type) {\n         mValueLabels = new int[] { R.string.statistics_learn, R.string.statistics_young, R.string.statistics_mature};\n         mColors = new int[] { R.attr.stats_learn, R.attr.stats_young, R.attr.stats_mature};\n         mType = type;\n+        ArrayList<double[]> list = eases(type);\n+\n+        //TODO adjust for AnswerButton, for now only copied from intervals\n+        // small adjustment for a proper chartbuilding with achartengine\n+        if (list.size() == 0) {\n+            list.add(0, new double[]{0, 1, 0});\n+        }\n+\n+        mSeriesList = new double[4][list.size()+1];\n+\n+        for (int i = 0; i < list.size(); i++) {\n+            double[] data = list.get(i);\n+            int currentType = (int)data[0];\n+            double ease = data[1];\n+            double cnt = data[2];\n+\n+            if (currentType == Consts.CARD_TYPE_LRN) {\n+                ease += 5;\n+            } else if (currentType == 2) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5MjUyMg=="}, "originalCommit": {"oid": "0739ebe710da8f375c7dff3165dde3ec1a97cb68"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNjcwNzI1OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoxNzo1NFrOGhaqFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoyNDozOVrOGha32A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5Mjk1MQ==", "bodyText": "magic number 1? (I think that 1 should be a Const)", "url": "https://github.com/ankidroid/Anki-Android/pull/6421#discussion_r437692951", "createdAt": "2020-06-09T20:17:54Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -302,8 +302,30 @@ public void calculateOverviewStatistics(AxisType timespan, OverviewStatsBuilder.\n \n         oStats.totalNewCards = getNewCards(timespan);\n         oStats.newCardsPerDay = (double) oStats.totalNewCards / (double) oStats.allDays;\n+\n+        ArrayList<double[]> list = eases(timespan);\n+        oStats.newCardsOverview = toOverview(0, list);\n+        oStats.youngCardsOverview = toOverview(1, list);\n+        oStats.matureCardsOverview = toOverview(2, list);\n     }\n \n+\n+    private OverviewStatsBuilder.OverviewStats.AnswerButtonsOverview toOverview(int type, ArrayList<double[]> list) {\n+        OverviewStatsBuilder.OverviewStats.AnswerButtonsOverview answerButtonsOverview = new OverviewStatsBuilder.OverviewStats.AnswerButtonsOverview();\n+\n+        //type, ease, count\n+        for (double[] elements : list) {\n+            if (elements[0] != type) {\n+                continue;\n+            }\n+            answerButtonsOverview.total += elements[2];\n+            answerButtonsOverview.correct += elements[1] == 1 ? 0 : elements[2];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0739ebe710da8f375c7dff3165dde3ec1a97cb68"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5NjQ3Mg==", "bodyText": "This is my code! I can't turn it into a class, but I'll magic it up", "url": "https://github.com/ankidroid/Anki-Android/pull/6421#discussion_r437696472", "createdAt": "2020-06-09T20:24:39Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -302,8 +302,30 @@ public void calculateOverviewStatistics(AxisType timespan, OverviewStatsBuilder.\n \n         oStats.totalNewCards = getNewCards(timespan);\n         oStats.newCardsPerDay = (double) oStats.totalNewCards / (double) oStats.allDays;\n+\n+        ArrayList<double[]> list = eases(timespan);\n+        oStats.newCardsOverview = toOverview(0, list);\n+        oStats.youngCardsOverview = toOverview(1, list);\n+        oStats.matureCardsOverview = toOverview(2, list);\n     }\n \n+\n+    private OverviewStatsBuilder.OverviewStats.AnswerButtonsOverview toOverview(int type, ArrayList<double[]> list) {\n+        OverviewStatsBuilder.OverviewStats.AnswerButtonsOverview answerButtonsOverview = new OverviewStatsBuilder.OverviewStats.AnswerButtonsOverview();\n+\n+        //type, ease, count\n+        for (double[] elements : list) {\n+            if (elements[0] != type) {\n+                continue;\n+            }\n+            answerButtonsOverview.total += elements[2];\n+            answerButtonsOverview.correct += elements[1] == 1 ? 0 : elements[2];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5Mjk1MQ=="}, "originalCommit": {"oid": "0739ebe710da8f375c7dff3165dde3ec1a97cb68"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNjcxMDc4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoxOTowNlrOGhasVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQyMDoyNDo1M1rOGha4Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5MzUyNw==", "bodyText": "I think this default empty thing is also a 0, 1, 0 of magic instead of const?", "url": "https://github.com/ankidroid/Anki-Android/pull/6421#discussion_r437693527", "createdAt": "2020-06-09T20:19:06Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -1053,6 +1075,47 @@ public boolean calculateAnswerButtons(AxisType type) {\n         mValueLabels = new int[] { R.string.statistics_learn, R.string.statistics_young, R.string.statistics_mature};\n         mColors = new int[] { R.attr.stats_learn, R.attr.stats_young, R.attr.stats_mature};\n         mType = type;\n+        ArrayList<double[]> list = eases(type);\n+\n+        //TODO adjust for AnswerButton, for now only copied from intervals\n+        // small adjustment for a proper chartbuilding with achartengine\n+        if (list.size() == 0) {\n+            list.add(0, new double[]{0, 1, 0});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0739ebe710da8f375c7dff3165dde3ec1a97cb68"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5NjYwMg==", "bodyText": "Not my code change, just extracted", "url": "https://github.com/ankidroid/Anki-Android/pull/6421#discussion_r437696602", "createdAt": "2020-06-09T20:24:53Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/Stats.java", "diffHunk": "@@ -1053,6 +1075,47 @@ public boolean calculateAnswerButtons(AxisType type) {\n         mValueLabels = new int[] { R.string.statistics_learn, R.string.statistics_young, R.string.statistics_mature};\n         mColors = new int[] { R.attr.stats_learn, R.attr.stats_young, R.attr.stats_mature};\n         mType = type;\n+        ArrayList<double[]> list = eases(type);\n+\n+        //TODO adjust for AnswerButton, for now only copied from intervals\n+        // small adjustment for a proper chartbuilding with achartengine\n+        if (list.size() == 0) {\n+            list.add(0, new double[]{0, 1, 0});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5MzUyNw=="}, "originalCommit": {"oid": "0739ebe710da8f375c7dff3165dde3ec1a97cb68"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 160, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}