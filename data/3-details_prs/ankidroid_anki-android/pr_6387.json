{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5Mzc0Mzkz", "number": 6387, "title": "Show options menu & navigation drawer using WebView", "bodyText": "Pull Request template\nPurpose / Description\nShow options menu using JavaScript in WebView when screen is in fullscreen.\nThis is continuation of #6307\nFixes\nFixes Link to the issues.\nApproach\n\nCheck if it is in full  screen or not\nCall the function using JavaScript\n\nHow Has This Been Tested?\nTested on Emulator\n\nAdd following to card templates in in <script> tag\n\n<button onclick=\"ankiShowOptionsMenu()\">Show Options Menu</button>\n<button onclick=\"ankiShowNavDrawer()\">Show Navigation Drawer</button>\n\n\nTurn on full screen, then click on above button to show menu\n\nLearning (optional, can help others)\nhttps://stackoverflow.com/questions/32643310/getactionbar-returns-null-in-actionbar\nhttps://stackoverflow.com/questions/4642914/is-there-a-way-to-determine-if-android-app-is-running-full-screen\nChecklist\nPlease, go through these checks before submitting the PR.\n\n[ x ] You have not changed whitespace unnecessarily (it makes diffs hard to read)\n[ x ] You have a descriptive commit message with a short title (first line, max 50 chars).\n[ x ] Your code follows the style of the project (e.g. never omit braces in if statements)\n[ x ]  You have commented your code, particularly in hard-to-understand areas\n[ x ] You have performed a self-review of your own code", "createdAt": "2020-06-06T18:32:29Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6387", "merged": true, "mergeCommit": {"oid": "fc1b99238a2ca722cd9cf8d05c31f17e1f6c9a1a"}, "closed": true, "closedAt": "2020-06-13T19:27:30Z", "author": {"login": "infinyte7"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcorpBvgFqTQyNTc1OTg0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcq8mmZAFqTQzMDE2MDczNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzU5ODQw", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#pullrequestreview-425759840", "createdAt": "2020-06-06T18:33:47Z", "commit": {"oid": "3e24b9caa615eb37407662fa7b6386a2090b3499"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxODozMzo0N1rOGgFDNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxODozMzo0N1rOGgFDNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI5MDM1OQ==", "bodyText": "@david-allison-1\nI tried it, but it showing error as not defined.\nsuper.onNavigationPressed()", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#discussion_r436290359", "createdAt": "2020-06-06T18:33:47Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3080,6 +3082,29 @@ private boolean filterUrl(String url) {\n                 mFlipCardLayout.performClick();\n                 return true;\n             }\n+            // Show options menu from WebView\n+            // Show options menu\n+            if (url.startsWith(\"signal:anki_show_options_menu\")) {\n+                if (!getSupportActionBar().isShowing()) {\n+                    openOptionsMenu();\n+                } else {\n+                    UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen,\"ankiShowOptionsMenu\"), true);\n+                }\n+                return true;\n+            }\n+\n+            // Show Navigation Drawer from WebView\n+            // Show side menu\n+            if (url.startsWith(\"signal:anki_show_navigation_drawer\")) {\n+                if (!getSupportActionBar().isShowing()) {\n+                    DrawerLayout mDrawerLayout = (DrawerLayout)findViewById(R.id.drawer_layout);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e24b9caa615eb37407662fa7b6386a2090b3499"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f67ef8aa71bb5841c17ee922e0e91177cf669dbe", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f67ef8aa71bb5841c17ee922e0e91177cf669dbe", "committedDate": "2020-06-06T19:04:56Z", "message": "\tAdded Show options Menu & Nav Drawer Using WebView\n\n\tUpdated AbstractFlashcardViewer.java\n\n\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e24b9caa615eb37407662fa7b6386a2090b3499", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3e24b9caa615eb37407662fa7b6386a2090b3499", "committedDate": "2020-06-06T18:26:28Z", "message": "\tAdded Show options Menu & Nav Drawer Using WebView"}, "afterCommit": {"oid": "f67ef8aa71bb5841c17ee922e0e91177cf669dbe", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f67ef8aa71bb5841c17ee922e0e91177cf669dbe", "committedDate": "2020-06-06T19:04:56Z", "message": "\tAdded Show options Menu & Nav Drawer Using WebView\n\n\tUpdated AbstractFlashcardViewer.java\n\n\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dd1c55ea69409dd3b2b1216655d58107e736b9f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9dd1c55ea69409dd3b2b1216655d58107e736b9f", "committedDate": "2020-06-09T16:21:11Z", "message": "\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzQwMjAw", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#pullrequestreview-427340200", "createdAt": "2020-06-09T16:30:11Z", "commit": {"oid": "9dd1c55ea69409dd3b2b1216655d58107e736b9f"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMDoxMVrOGhSzBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMTo0OFrOGhS21g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NDE2Ng==", "bodyText": "nit: extract to isInFullScreen", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#discussion_r437564166", "createdAt": "2020-06-09T16:30:11Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3080,6 +3082,26 @@ private boolean filterUrl(String url) {\n                 mFlipCardLayout.performClick();\n                 return true;\n             }\n+            // Show options menu from WebView\n+            if (url.startsWith(\"signal:anki_show_options_menu\")) {\n+                if (!getSupportActionBar().isShowing()) {\n+                    openOptionsMenu();\n+                } else {\n+                    UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen,\"ankiShowOptionsMenu\"), true);\n+                }\n+                return true;\n+            }\n+\n+            // Show Navigation Drawer from WebView\n+            if (url.startsWith(\"signal:anki_show_navigation_drawer\")) {\n+                if (!getSupportActionBar().isShowing()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd1c55ea69409dd3b2b1216655d58107e736b9f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NDMxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen,\"ankiShowOptionsMenu\"), true);\n          \n          \n            \n                                UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen, \"ankiShowOptionsMenu\"), true);", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#discussion_r437564317", "createdAt": "2020-06-09T16:30:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3080,6 +3082,26 @@ private boolean filterUrl(String url) {\n                 mFlipCardLayout.performClick();\n                 return true;\n             }\n+            // Show options menu from WebView\n+            if (url.startsWith(\"signal:anki_show_options_menu\")) {\n+                if (!getSupportActionBar().isShowing()) {\n+                    openOptionsMenu();\n+                } else {\n+                    UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen,\"ankiShowOptionsMenu\"), true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd1c55ea69409dd3b2b1216655d58107e736b9f"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTE0Mg==", "bodyText": "I'm not sure if we want a toast here. It'll mean nothing to the end-user. what do you think?", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#discussion_r437565142", "createdAt": "2020-06-09T16:31:48Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3080,6 +3082,26 @@ private boolean filterUrl(String url) {\n                 mFlipCardLayout.performClick();\n                 return true;\n             }\n+            // Show options menu from WebView\n+            if (url.startsWith(\"signal:anki_show_options_menu\")) {\n+                if (!getSupportActionBar().isShowing()) {\n+                    openOptionsMenu();\n+                } else {\n+                    UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen,\"ankiShowOptionsMenu\"), true);\n+                }\n+                return true;\n+            }\n+\n+            // Show Navigation Drawer from WebView\n+            if (url.startsWith(\"signal:anki_show_navigation_drawer\")) {\n+                if (!getSupportActionBar().isShowing()) {\n+                    AbstractFlashcardViewer.this.onNavigationPressed();\n+                } else {\n+                    UIUtils.showThemedToast(AbstractFlashcardViewer.this, getString(R.string.ankidroid_turn_on_fullscreen, \"ankiShowNavDrawer\"), true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd1c55ea69409dd3b2b1216655d58107e736b9f"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "771dbe63da837aae4357c1a27023867b7dd3b7f9", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/771dbe63da837aae4357c1a27023867b7dd3b7f9", "committedDate": "2020-06-09T16:49:31Z", "message": "\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4146240ae97d940cea17c98d9cfbab8f3da74e90", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4146240ae97d940cea17c98d9cfbab8f3da74e90", "committedDate": "2020-06-09T16:58:06Z", "message": "\tAdded Show options Menu & Nav Drawer Using WebView\n\n\tUpdated AbstractFlashcardViewer.java\n\n\tUpdated AbstractFlashcardViewer.java\n\n\tUpdated AbstractFlashcardViewer.java\n\n\tUpdated AbstractFlashcardViewer.java\n\n\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27f734eafe0491e1033dcb6c7cdd1b34c00cc927", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/27f734eafe0491e1033dcb6c7cdd1b34c00cc927", "committedDate": "2020-06-09T16:59:49Z", "message": "Merge branch 'feature-branch-2' of https://github.com/infinyte7/Anki-Android into feature-branch-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb67d112b45242107f4dd334724c2ea66f56702c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/cb67d112b45242107f4dd334724c2ea66f56702c", "committedDate": "2020-06-09T17:06:27Z", "message": "\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa3bf848cd596563a4214aeb1b21ffd6c71df0c7", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/aa3bf848cd596563a4214aeb1b21ffd6c71df0c7", "committedDate": "2020-06-09T17:14:45Z", "message": "\tUpdated AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e8a652c642a5791cd6d0eadd2697bb0cebbab2b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0e8a652c642a5791cd6d0eadd2697bb0cebbab2b", "committedDate": "2020-06-13T05:42:51Z", "message": "Updated 02-string.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTI2NTIz", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#pullrequestreview-430126523", "createdAt": "2020-06-13T09:20:25Z", "commit": {"oid": "0e8a652c642a5791cd6d0eadd2697bb0cebbab2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTYwNzM2", "url": "https://github.com/ankidroid/Anki-Android/pull/6387#pullrequestreview-430160736", "createdAt": "2020-06-13T19:27:22Z", "commit": {"oid": "0e8a652c642a5791cd6d0eadd2697bb0cebbab2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3158, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}