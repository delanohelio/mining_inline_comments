{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMzgwMjc4", "number": 7669, "title": "Remove MIUI Keyboard Hack Preference", "bodyText": "No longer necessary now we have the note editor toolbar.\nRelated: 43151b6\nFixed By: #7124", "createdAt": "2020-11-13T06:30:04Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7669", "merged": true, "mergeCommit": {"oid": "67cf0aca22418a897f8f757d53d4afc9cddcbfbb"}, "closed": true, "closedAt": "2020-11-14T13:07:49Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcBL0qAH2gAyNTIwMzgwMjc4OjUwM2E2MTk4NTkwZDhhNzEzZGQzMDQ4OWZkODZlYTE2ZDU0YWY1Y2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcbeWTAFqTUzMDU3Njk0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "503a6198590d8a713dd30489fd86ea16d54af5cf", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/503a6198590d8a713dd30489fd86ea16d54af5cf", "committedDate": "2020-11-13T06:29:56Z", "message": "Remove MIUI Keyboard Hack Preference\n\nNo longer necessary now we have the note editor toolbar.\n\nRelated: 43151b618758c80b2bd4b7134f498a56f5b27170\nFixed By: 7124"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7665f0c1dd9946a250e59a9ae5b10449c2503a4f", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7665f0c1dd9946a250e59a9ae5b10449c2503a4f", "committedDate": "2020-11-13T06:29:05Z", "message": "Remove MIUI Keyboard Hack Preference\n\nNo longer necessary now we have kayboard\n\nRelated: 43151b618758c80b2bd4b7134f498a56f5b27170\nFixed By: 7124"}, "afterCommit": {"oid": "503a6198590d8a713dd30489fd86ea16d54af5cf", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/503a6198590d8a713dd30489fd86ea16d54af5cf", "committedDate": "2020-11-13T06:29:56Z", "message": "Remove MIUI Keyboard Hack Preference\n\nNo longer necessary now we have the note editor toolbar.\n\nRelated: 43151b618758c80b2bd4b7134f498a56f5b27170\nFixed By: 7124"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMDkzMDgz", "url": "https://github.com/ankidroid/Anki-Android/pull/7669#pullrequestreview-530093083", "createdAt": "2020-11-13T14:12:49Z", "commit": {"oid": "503a6198590d8a713dd30489fd86ea16d54af5cf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDoxMjo0OVrOHyv01A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDoxMjo0OVrOHyv01A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk3NDQyMA==", "bodyText": "I think also needs an update to remove the key?\n\n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java\n    \n    \n        Lines 1223 to 1224\n      in\n      d1c0906\n    \n    \n    \n    \n\n        \n          \n           // Check if preference upgrade or database check required, otherwise go to new feature screen \n        \n\n        \n          \n           int upgradePrefsVersion = AnkiDroidApp.CHECK_PREFERENCES_AT_VERSION; \n        \n    \n  \n\n\nSomething like this:\n\n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java\n    \n    \n        Lines 1343 to 1356\n      in\n      d1c0906\n    \n    \n    \n    \n\n        \n          \n           // when upgrading from before 2.5alpha35 \n        \n\n        \n          \n           if (previousVersionCode < 20500135) { \n        \n\n        \n          \n               Timber.i(\"Old version of Anki - Fixing Zoom\"); \n        \n\n        \n          \n               // Card zooming behaviour was changed the preferences renamed \n        \n\n        \n          \n               int oldCardZoom = preferences.getInt(\"relativeDisplayFontSize\", 100); \n        \n\n        \n          \n               int oldImageZoom = preferences.getInt(\"relativeImageSize\", 100); \n        \n\n        \n          \n               preferences.edit().putInt(\"cardZoom\", oldCardZoom).apply(); \n        \n\n        \n          \n               preferences.edit().putInt(\"imageZoom\", oldImageZoom).apply(); \n        \n\n        \n          \n               if (!preferences.getBoolean(\"useBackup\", true)) { \n        \n\n        \n          \n                   preferences.edit().putInt(\"backupMax\", 0).apply(); \n        \n\n        \n          \n               } \n        \n\n        \n          \n               preferences.edit().remove(\"useBackup\").apply(); \n        \n\n        \n          \n               preferences.edit().remove(\"intentAdditionInstantAdd\").apply(); \n        \n\n        \n          \n           } \n        \n    \n  \n\n\nNote that it is hard to pin down exactly when this will go (and thus to get the version code correct) but if you have time to do this now you will know that the next beta version number will have it and that will clear it out for almost everyone, orphaning almost no one and with no real importance if it does", "url": "https://github.com/ankidroid/Anki-Android/pull/7669#discussion_r522974420", "createdAt": "2020-11-13T14:12:49Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/xml/preferences_advanced.xml", "diffHunk": "@@ -68,13 +68,6 @@\n                 android:key=\"disableExtendedTextUi\"\n                 android:summary=\"@string/disable_extended_text_ui_summ\"\n                 android:title=\"@string/disable_extended_text_ui\" />\n-\n-            <!-- HACK before 7124 MIUI Clipboard Cloze -->\n-            <CheckBoxPreference\n-                android:defaultValue=\"true\"\n-                android:key=\"enableMIUIClipboardHack\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "503a6198590d8a713dd30489fd86ea16d54af5cf"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNTc2OTQ4", "url": "https://github.com/ankidroid/Anki-Android/pull/7669#pullrequestreview-530576948", "createdAt": "2020-11-14T13:07:42Z", "commit": {"oid": "503a6198590d8a713dd30489fd86ea16d54af5cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3751, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}