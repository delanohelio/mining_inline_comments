{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwODM2ODM0", "number": 7030, "title": "Previewer: Enable \"Edit Note\"", "bodyText": "Purpose / Description\nIt's a good idea to provide \"Edit Note\" functionality to the preview/card browser as it's easier to determine what to edit than the Card Browser window.\nFixes\nFixes #7026\nApproach\n\nAdd \"edit\"\nIf a note has been edited:\n\nFlag to the Browser that a reload is required\nShow the new card\n\n\nIf a Note Type is edited:\n\nRebuild the list of valid cards\nFlag to the Browser that a reload is required\n\n\n\nHow Has This Been Tested?\nOn my phone: deleting card types, and edits.\nNote that the Card Browser is a little buggy due to #7017\nLearning\nI didn't know that if one card is selected in the previewer, then the previewer selects all cards to preview: dba6894\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-09-06T17:37:20Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7030", "merged": true, "mergeCommit": {"oid": "c11da9873ff0934f6f3f28d1c9a23f76af951581"}, "closed": true, "closedAt": "2020-09-06T23:36:56Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGRUbmgH2gAyNDgwODM2ODM0OmRjNDM2OGZiNDM2YzEwNmIyM2ZkMGRlNTI0ZjhkYWVjNjUyYzI4ZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGTYMOAFqTQ4MzE2NjcwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dc4368fb436c106b23fd0de524f8daec652c28da", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/dc4368fb436c106b23fd0de524f8daec652c28da", "committedDate": "2020-09-06T16:51:29Z", "message": "Extract performReload to Reviewer\n\nWe shouldn't be using the sched for Previewer/Reviewer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2751c827913410f512aced4ca1cc3436f229643c", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2751c827913410f512aced4ca1cc3436f229643c", "committedDate": "2020-09-06T18:36:36Z", "message": "Added \"Edit Note\" to Previewer\n\nOnly from the Card Browser\n\nThis hopefully makes the previewing experience much nicer.\n\nSome additional complexity occurred due to the ability to remove cards\nvia the Card Template Editor\n\nNote that field changes do not delete cards, \"Empty Cards\" does this.\n\nFixes 7026"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0156ac86c96c7c78908bee29b7c795b94f449c90", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0156ac86c96c7c78908bee29b7c795b94f449c90", "committedDate": "2020-09-06T17:30:53Z", "message": "Added \"Edit Note\" to Previewer\n\nOnly from the Card Browser\n\nThis hopefully makes the previewing experience much nicer.\n\nSome additional complexity occurred due to the ability to remove cards\nvia the Card Template Editor\n\nNote that field changes do not delete cards, \"Empty Cards\" does this.\n\nFixes 7026"}, "afterCommit": {"oid": "2751c827913410f512aced4ca1cc3436f229643c", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2751c827913410f512aced4ca1cc3436f229643c", "committedDate": "2020-09-06T18:36:36Z", "message": "Added \"Edit Note\" to Previewer\n\nOnly from the Card Browser\n\nThis hopefully makes the previewing experience much nicer.\n\nSome additional complexity occurred due to the ability to remove cards\nvia the Card Template Editor\n\nNote that field changes do not delete cards, \"Empty Cards\" does this.\n\nFixes 7026"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMTY0NzEx", "url": "https://github.com/ankidroid/Anki-Android/pull/7030#pullrequestreview-483164711", "createdAt": "2020-09-06T18:40:22Z", "commit": {"oid": "2751c827913410f512aced4ca1cc3436f229643c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQxODo0MDoyMlrOHNrNYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQxODo0MDoyMlrOHNrNYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDEwMTQ3NA==", "bodyText": "Optional: Might be best to have a test base class", "url": "https://github.com/ankidroid/Anki-Android/pull/7030#discussion_r484101474", "createdAt": "2020-09-06T18:40:22Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/AbstractFlashcardViewerKeyboardInputTest.java", "diffHunk": "@@ -82,6 +82,13 @@ protected boolean answerFieldIsFocused() {\n             return mFocusTextField;\n         }\n \n+\n+        @Override\n+        protected void performReload() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2751c827913410f512aced4ca1cc3436f229643c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMTY2NzAy", "url": "https://github.com/ankidroid/Anki-Android/pull/7030#pullrequestreview-483166702", "createdAt": "2020-09-06T19:15:24Z", "commit": {"oid": "2751c827913410f512aced4ca1cc3436f229643c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4053, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}