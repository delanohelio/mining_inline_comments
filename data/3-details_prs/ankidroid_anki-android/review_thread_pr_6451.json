{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzOTkwOTQx", "number": 6451, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMDo1ODoxMFrOEFP1Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxODoyOTo1MVrOEHYScg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTM3NzAyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMDo1ODoxMFrOGjXAMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMDo1ODoxMFrOGjXAMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczMDIyNA==", "bodyText": "Pass in the exception first and Timber will nicely format it.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Timber.e(\"Whiteboard image saving failed %s\", e.toString());\n          \n          \n            \n                        Timber.e(e, \"Whiteboard image saving failed\");", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439730224", "createdAt": "2020-06-13T10:58:10Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -376,6 +391,31 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         return true;\n     }\n \n+\n+    private void saveWhiteboard() {\n+        Bitmap bitmap = Bitmap.createBitmap(mWhiteboard.getWidth(), mWhiteboard.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        String currentAnkiDroidDirectory = CollectionHelper.getCurrentAnkiDroidDirectory(this);\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());\n+        String finalFileName = baseFileName + newName;\n+        File saveImgFile = new File(currentAnkiDroidDirectory, finalFileName);\n+\n+        if (isInNightMode()) {\n+            canvas.drawColor(Color.BLACK);\n+        } else {\n+            canvas.drawColor(Color.WHITE);\n+        }\n+\n+        try {\n+            mWhiteboard.draw(canvas);\n+            bitmap.compress(Bitmap.CompressFormat.JPEG, 95, new FileOutputStream(saveImgFile));\n+        } catch (FileNotFoundException e) {\n+            Timber.e(\"Whiteboard image saving failed %s\", e.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b372df4eb840374f04728e4808057e430e4379"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTM3NzQyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMDo1OTozMFrOGjXAZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMDo1OTozMFrOGjXAZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczMDI3Ng==", "bodyText": "Could you rename this to saveWhiteboardInternal, and have saveWhiteboard call it inside a try..catch. Remove the catch IOException from saveWhiteboardInternal\nWe need to show a toast to users if this fails.", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439730276", "createdAt": "2020-06-13T10:59:30Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -376,6 +391,31 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         return true;\n     }\n \n+\n+    private void saveWhiteboard() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b372df4eb840374f04728e4808057e430e4379"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQzMzI5OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMjo1OTo0NlrOGjXcyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMjo1OTo0NlrOGjXcyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzU0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_save_failed, e.getLocalizedMessage()),true);\n          \n          \n            \n                                    UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_save_failed, e.getLocalizedMessage()), true);", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439737544", "createdAt": "2020-06-13T12:59:46Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -316,7 +318,11 @@ public boolean onOptionsItemSelected(MenuItem item) {\n             case R.id.action_save_whiteboard:\n                 Timber.i(\"Reviewer:: Save whiteboard button pressed\");\n                 if (mWhiteboard != null) {\n-                    saveWhiteboard();\n+                    try {\n+                        saveWhiteboardInternal();\n+                    } catch (Exception e) {\n+                        UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_save_failed, e.getLocalizedMessage()),true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQzMzUyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMDowN1rOGjXc5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzo1ODowOFrOGjXrFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzU3Mg==", "bodyText": "Remove this catch, and let the wrapper handle it", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439737572", "createdAt": "2020-06-13T13:00:07Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -412,7 +425,7 @@ private void saveWhiteboard() {\n             mWhiteboard.draw(canvas);\n             bitmap.compress(Bitmap.CompressFormat.JPEG, 95, new FileOutputStream(saveImgFile));\n         } catch (FileNotFoundException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczODU4NA==", "bodyText": "Getting this error,\n\nAdded exception method signature", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439738584", "createdAt": "2020-06-13T13:15:05Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -412,7 +425,7 @@ private void saveWhiteboard() {\n             mWhiteboard.draw(canvas);\n             bitmap.compress(Bitmap.CompressFormat.JPEG, 95, new FileOutputStream(saveImgFile));\n         } catch (FileNotFoundException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzU3Mg=="}, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc0MTIwNg==", "bodyText": "Yep, needs to be added to the method signature if it's not caught", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439741206", "createdAt": "2020-06-13T13:58:08Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -412,7 +425,7 @@ private void saveWhiteboard() {\n             mWhiteboard.draw(canvas);\n             bitmap.compress(Bitmap.CompressFormat.JPEG, 95, new FileOutputStream(saveImgFile));\n         } catch (FileNotFoundException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzU3Mg=="}, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQzMzc2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMDoyMlrOGjXdAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMDoyMlrOGjXdAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzYwMQ==", "bodyText": "Can we Timber the exception here?", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439737601", "createdAt": "2020-06-13T13:00:22Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -316,7 +318,11 @@ public boolean onOptionsItemSelected(MenuItem item) {\n             case R.id.action_save_whiteboard:\n                 Timber.i(\"Reviewer:: Save whiteboard button pressed\");\n                 if (mWhiteboard != null) {\n-                    saveWhiteboard();\n+                    try {\n+                        saveWhiteboardInternal();\n+                    } catch (Exception e) {\n+                        UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_save_failed, e.getLocalizedMessage()),true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQzMzg5OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMDozNVrOGjXdEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMDozNVrOGjXdEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzYxNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(!ankiDroidFolder.exists()) {\n          \n          \n            \n                    if (!ankiDroidFolder.exists()) {", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439737617", "createdAt": "2020-06-13T13:00:35Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -392,15 +398,22 @@ public boolean onOptionsItemSelected(MenuItem item) {\n     }\n \n \n-    private void saveWhiteboard() {\n+    private void saveWhiteboardInternal() {\n         Bitmap bitmap = Bitmap.createBitmap(mWhiteboard.getWidth(), mWhiteboard.getHeight(), Bitmap.Config.ARGB_8888);\n         Canvas canvas = new Canvas(bitmap);\n \n-        String currentAnkiDroidDirectory = CollectionHelper.getCurrentAnkiDroidDirectory(this);\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if(!ankiDroidFolder.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTQzNDIxOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/res/values/02-strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMTowMVrOGjXdNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxMzowMTowMVrOGjXdNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczNzY1NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"white_board_image_save_failed\">White board image saving failed. %s</string>\n          \n          \n            \n                <string name=\"white_board_image_save_failed\">Failed to save whiteboard image. %s</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r439737654", "createdAt": "2020-06-13T13:01:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/02-strings.xml", "diffHunk": "@@ -262,4 +262,6 @@\n     <string name=\"restore_default\">Restore Default</string>\n \n     <string name=\"reviewer_tts_cloze_spoken_replacement\">Blank</string>\n+    <!-- Whiteboard save image message in Reviewer -->\n+    <string name=\"white_board_image_save_failed\">White board image saving failed. %s</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7bef753fba14127b4ba5912720049f6b65b1d88"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTQ0MjIxOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxMDoyNTozNFrOGmrF3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNDo1OTowNVrOGmsfJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIwNTA4NQ==", "bodyText": "Could you extract this functionality into Whiteboard class: use AnkiDroidFolder as the default folder, and allow an override which will accept the folder.\nso something along the lines of:\npublic void saveWhiteBoaard() {\n    File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n    File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n   saveWhiteBoard(ankiDroidFolder );\n}\n\npublic void saveWhiteboard(File folder) {\n   ...\n}", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443205085", "createdAt": "2020-06-21T10:25:34Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -400,8 +420,37 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return true;\n     }\n+    private void saveWhiteboardInternal() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6031ebad77f20e5ee03f0153411e1d84a9bf08d4"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyMjgzMw==", "bodyText": "It can be done. But how can get height and width\n Bitmap bitmap = Bitmap.createBitmap(mWhiteboard.getWidth(), mWhiteboard.getHeight(), Bitmap.Config.ARGB_8888);\n\n\nand this one\nmWhiteboard.draw(canvas);\n\nInside whiteboard.java", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443222833", "createdAt": "2020-06-21T14:05:46Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -400,8 +420,37 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return true;\n     }\n+    private void saveWhiteboardInternal() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIwNTA4NQ=="}, "originalCommit": {"oid": "6031ebad77f20e5ee03f0153411e1d84a9bf08d4"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyMzE0Ng==", "bodyText": "You should be able to use this.draw() and this.getHeight()", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443223146", "createdAt": "2020-06-21T14:09:08Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -400,8 +420,37 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return true;\n     }\n+    private void saveWhiteboardInternal() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIwNTA4NQ=="}, "originalCommit": {"oid": "6031ebad77f20e5ee03f0153411e1d84a9bf08d4"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyNzk0Mg==", "bodyText": "Okay, Now extracted saveWhiteboard() to Whiteboard.java", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443227942", "createdAt": "2020-06-21T14:59:05Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -400,8 +420,37 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return true;\n     }\n+    private void saveWhiteboardInternal() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIwNTA4NQ=="}, "originalCommit": {"oid": "6031ebad77f20e5ee03f0153411e1d84a9bf08d4"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTQ0MjQxOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxMDoyNTo1MVrOGmrF9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxMDoyNTo1MVrOGmrF9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIwNTEwOA==", "bodyText": "Can you remove this try, and add a throws to the method", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443205108", "createdAt": "2020-06-21T10:25:51Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -400,8 +420,37 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return true;\n     }\n+    private void saveWhiteboardInternal() {\n+        Bitmap bitmap = Bitmap.createBitmap(mWhiteboard.getWidth(), mWhiteboard.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if(!ankiDroidFolder.exists()) {\n+            ankiDroidFolder.mkdirs();\n+        }\n+\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());\n+        String finalFileName = baseFileName + newName;\n \n+        File saveImgFile = new File(ankiDroidFolder, finalFileName);\n \n+        if (isInNightMode()) {\n+            canvas.drawColor(Color.BLACK);\n+        } else {\n+            canvas.drawColor(Color.WHITE);\n+        }\n+\n+        try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6031ebad77f20e5ee03f0153411e1d84a9bf08d4"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTU4OTg1OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNDoyODoyNlrOGmsT1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNDoyODoyNlrOGmsT1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyNTA0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    File ankiDroidFolder = new File(pictures, \"AnkiDroidFolder\");\n          \n          \n            \n                    File ankiDroidFolder = new File(pictures, \"AnkiDroid\");", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443225046", "createdAt": "2020-06-21T14:28:26Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -420,12 +420,13 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         }\n         return true;\n     }\n-    private void saveWhiteboardInternal() {\n+\n+    private void saveWhiteboardInternal() throws FileNotFoundException{\n         Bitmap bitmap = Bitmap.createBitmap(mWhiteboard.getWidth(), mWhiteboard.getHeight(), Bitmap.Config.ARGB_8888);\n         Canvas canvas = new Canvas(bitmap);\n \n         File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n-        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroidFolder\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25f4649a785fc6b7f1b827e35f2b84dba12153ed"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTYxOTAzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMjozOFrOGmsj5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMjozOFrOGmsj5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTE1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(!ankiDroidFolder.exists()) {\n          \n          \n            \n                    if (!ankiDroidFolder.exists()) {", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229159", "createdAt": "2020-06-21T15:12:38Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -416,4 +425,36 @@ public boolean empty() {\n     public boolean isCurrentlyDrawing() {\n         return mCurrentlyDrawing;\n     }\n+\n+    protected void saveWhiteboard() throws FileNotFoundException {\n+\n+        Bitmap bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if(!ankiDroidFolder.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTYxOTA2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMjo0M1rOGmsj6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMjo0M1rOGmsj6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTE2Mw==", "bodyText": "Would be better to return the string from the method, then you can remove the member variable.", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229163", "createdAt": "2020-06-21T15:12:43Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -416,4 +425,36 @@ public boolean empty() {\n     public boolean isCurrentlyDrawing() {\n         return mCurrentlyDrawing;\n     }\n+\n+    protected void saveWhiteboard() throws FileNotFoundException {\n+\n+        Bitmap bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if(!ankiDroidFolder.exists()) {\n+            ankiDroidFolder.mkdirs();\n+        }\n+\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());\n+        String finalFileName = baseFileName + newName;\n+\n+        saveWhiteboardImagFile = new File(ankiDroidFolder, finalFileName);\n+\n+        if (foregroundColor != Color.BLACK) {\n+            canvas.drawColor(Color.BLACK);\n+        } else {\n+            canvas.drawColor(Color.WHITE);\n+        }\n+\n+        this.draw(canvas);\n+        bitmap.compress(Bitmap.CompressFormat.JPEG, 95, new FileOutputStream(saveWhiteboardImagFile));\n+    }\n+\n+    protected String getSaveImagePath() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTYxOTQyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMzoyM1rOGmskIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToyMjowNFrOGmsnKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTIxNw==", "bodyText": "I think this was accidentally removed", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229217", "createdAt": "2020-06-21T15:13:23Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -65,15 +72,17 @@\n     private boolean mInvertedColors;\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n+    private int foregroundColor;\n \n+    File saveWhiteboardImagFile;\n \n     public Whiteboard(AbstractFlashcardViewer cardViewer, boolean inverted, boolean monochrome) {\n         super(cardViewer, null);\n         mCardViewer = new WeakReference<>(cardViewer);\n         mInvertedColors = inverted;\n         mMonochrome = monochrome;\n \n-        int foregroundColor;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTU2Mw==", "bodyText": "No I used that to check for night mode status.\nAt line 445\n        saveWhiteboardImagFile = new File(ankiDroidFolder, finalFileName);\n\n        if (foregroundColor != Color.BLACK) {\n            canvas.drawColor(Color.BLACK);\n        } else {\n            canvas.drawColor(Color.WHITE);\n        }", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229563", "createdAt": "2020-06-21T15:17:08Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -65,15 +72,17 @@\n     private boolean mInvertedColors;\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n+    private int foregroundColor;\n \n+    File saveWhiteboardImagFile;\n \n     public Whiteboard(AbstractFlashcardViewer cardViewer, boolean inverted, boolean monochrome) {\n         super(cardViewer, null);\n         mCardViewer = new WeakReference<>(cardViewer);\n         mInvertedColors = inverted;\n         mMonochrome = monochrome;\n \n-        int foregroundColor;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTIxNw=="}, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTk5NQ==", "bodyText": "Ah! Added a quick comment, but that's understandable. Was reviewing per-commit and missed it.", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229995", "createdAt": "2020-06-21T15:22:04Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -65,15 +72,17 @@\n     private boolean mInvertedColors;\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n+    private int foregroundColor;\n \n+    File saveWhiteboardImagFile;\n \n     public Whiteboard(AbstractFlashcardViewer cardViewer, boolean inverted, boolean monochrome) {\n         super(cardViewer, null);\n         mCardViewer = new WeakReference<>(cardViewer);\n         mInvertedColors = inverted;\n         mMonochrome = monochrome;\n \n-        int foregroundColor;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTIxNw=="}, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTYxOTY3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMzo1MFrOGmskSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxMzo1MFrOGmskSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTI1Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_saved, mWhiteboard.getSaveImagePath()),true);\n          \n          \n            \n                                    UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_saved, mWhiteboard.getSaveImagePath()), true);", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229257", "createdAt": "2020-06-21T15:13:50Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -343,7 +335,8 @@ public boolean onOptionsItemSelected(MenuItem item) {\n                 Timber.i(\"Reviewer:: Save whiteboard button pressed\");\n                 if (mWhiteboard != null) {\n                     try {\n-                        saveWhiteboardInternal();\n+                        mWhiteboard.saveWhiteboard();\n+                        UIUtils.showThemedToast(Reviewer.this, getString(R.string.white_board_image_saved, mWhiteboard.getSaveImagePath()),true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTYyMjU4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToxODozNFrOGmsl9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxNToyODoxN1rOGmspVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTY4Ng==", "bodyText": "Here is\nprivate int foregroundColor;", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443229686", "createdAt": "2020-06-21T15:18:34Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -65,15 +72,17 @@\n     private boolean mInvertedColors;\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n+    private int foregroundColor;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIzMDAyNg==", "bodyText": "Whoops! missed that, thanks!!\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private int foregroundColor;\n          \n          \n            \n                private final int mForegroundColor;", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443230026", "createdAt": "2020-06-21T15:22:24Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -65,15 +72,17 @@\n     private boolean mInvertedColors;\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n+    private int foregroundColor;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTY4Ng=="}, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIzMDU1MQ==", "bodyText": "After renaming the change will reflected here also.\n        if (!mInvertedColors) {\n            if (mMonochrome) {\n                foregroundColor = Color.BLACK;\n            } else {\n                foregroundColor = ContextCompat.getColor(cardViewer, R.color.wb_fg_color);\n            }\n        } else {\n            if (mMonochrome) {\n                foregroundColor = Color.WHITE;\n            } else {\n                foregroundColor = ContextCompat.getColor(cardViewer, R.color.wb_fg_color_inv);\n            }\n        }", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443230551", "createdAt": "2020-06-21T15:28:17Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -65,15 +72,17 @@\n     private boolean mInvertedColors;\n     private boolean mMonochrome;\n     private boolean mUndoModeActive = false;\n+    private int foregroundColor;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIyOTY4Ng=="}, "originalCommit": {"oid": "1737e1019e38799b3a45a4e2ecfaafb5cf9df997"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTczNDI2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxODoyOTo1MVrOGmtgQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNDoxNjowN1rOGoCXZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0NDYwOQ==", "bodyText": "Hey @david-allison-1 - should this use TimeUtils ? I'm working through something else with regard to temporary image files (the crop PR) so it is top of mind.\nimport com.ichi2.libanki.utils.SystemTime;\nimport com.ichi2.libanki.utils.TimeUtils;\n\n    // Put this where class variables are instantiated right at the top\n    private SystemTime mTime = new SystemTime();\n\n        // Use them like this:\n        String timeStamp = TimeUtils.getTimestamp(mTime);\n        String newName = timeStamp + \".png\";", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443244609", "createdAt": "2020-06-21T18:29:51Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -416,4 +423,33 @@ public boolean empty() {\n     public boolean isCurrentlyDrawing() {\n         return mCurrentlyDrawing;\n     }\n+\n+    protected String saveWhiteboard() throws FileNotFoundException {\n+\n+        Bitmap bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if (!ankiDroidFolder.exists()) {\n+            ankiDroidFolder.mkdirs();\n+        }\n+\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf711e2347b4de33905b233acbec8afaf931d2af"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI1MDk1MA==", "bodyText": "Looks like a good change to me", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443250950", "createdAt": "2020-06-21T19:45:42Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -416,4 +423,33 @@ public boolean empty() {\n     public boolean isCurrentlyDrawing() {\n         return mCurrentlyDrawing;\n     }\n+\n+    protected String saveWhiteboard() throws FileNotFoundException {\n+\n+        Bitmap bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if (!ankiDroidFolder.exists()) {\n+            ankiDroidFolder.mkdirs();\n+        }\n+\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0NDYwOQ=="}, "originalCommit": {"oid": "cf711e2347b4de33905b233acbec8afaf931d2af"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI1MTM0Nw==", "bodyText": "Okay @infinyte7 can you slice those in there then? Sorry to be late in the game but while you and David were collaborating I didn't want to cross-talk. Should be a trivial alteration though and this allows for easier testing of the component since time can be controlled externally for file creation control", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r443251347", "createdAt": "2020-06-21T19:50:41Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -416,4 +423,33 @@ public boolean empty() {\n     public boolean isCurrentlyDrawing() {\n         return mCurrentlyDrawing;\n     }\n+\n+    protected String saveWhiteboard() throws FileNotFoundException {\n+\n+        Bitmap bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if (!ankiDroidFolder.exists()) {\n+            ankiDroidFolder.mkdirs();\n+        }\n+\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0NDYwOQ=="}, "originalCommit": {"oid": "cf711e2347b4de33905b233acbec8afaf931d2af"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYzNDk4Mw==", "bodyText": "I have updated it.", "url": "https://github.com/ankidroid/Anki-Android/pull/6451#discussion_r444634983", "createdAt": "2020-06-24T04:16:07Z", "author": {"login": "infinyte7"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -416,4 +423,33 @@ public boolean empty() {\n     public boolean isCurrentlyDrawing() {\n         return mCurrentlyDrawing;\n     }\n+\n+    protected String saveWhiteboard() throws FileNotFoundException {\n+\n+        Bitmap bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);\n+        Canvas canvas = new Canvas(bitmap);\n+\n+        File pictures = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n+        File ankiDroidFolder = new File(pictures, \"AnkiDroid\");\n+\n+        if (!ankiDroidFolder.exists()) {\n+            ankiDroidFolder.mkdirs();\n+        }\n+\n+        String baseFileName = \"Whiteboard\";\n+        String newName = new SimpleDateFormat(\"yyyyMMddHHmmss'.png'\").format(new Date());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0NDYwOQ=="}, "originalCommit": {"oid": "cf711e2347b4de33905b233acbec8afaf931d2af"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 182, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}