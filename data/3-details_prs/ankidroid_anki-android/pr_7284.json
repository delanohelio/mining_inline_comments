{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNTg2MTgw", "number": 7284, "title": "Show progress indication when deleting media files (issue #7036)", "bodyText": "Purpose / Description\nThis PR is an attempt to implement #7036\nApproach\nIssue #7036 reported the lack of progress indication when deleting media files. The first commit of this PR added that indication, in the form of a progress dialog:\n\nAlso, while I was analyzing AnkiDroid's code regarding this problem, I noticed that the original code had the intention to show a result dialog when the deletion process finishes (see method deleteUnused()). However, in reality when I use AnkiDroid, this dialog is not shown. That's why I added a second commit to show this result dialog:\n\nI think a result dialog like above would be helpful in cases where the amount of files to delete was small, only tens or hundreds files for example. In these cases the deletion process would be so fast that the progress dialog might not have a chance to show up, so a dialog showing the deletion result would be nice.\nPlease consider if this result dialog is neccessary, if not i will remove it.\nHow Has This Been Tested?\nI verified (on Emulator API 27, 28 and 30) that these commits work as expected. I also ran the automated tests and they all passed (except the purposely ignored tests).\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code\n\nEdit by @david-allison-1\nFixes\nFixes #7036", "createdAt": "2020-09-26T14:49:27Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7284", "merged": true, "mergeCommit": {"oid": "646572f5d6c71ecc75d1259711a7e2df95dc0214"}, "closed": true, "closedAt": "2020-09-27T13:33:19Z", "author": {"login": "tda1009"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMii6dAH2gAyNDkzNTg2MTgwOjFiZGFjYWJiMGIyMzY1N2ZkZDY3YmEzZDQyYmU2NzliNjMwZDc3YTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdM-_TVgFqTQ5NzA4MTQzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1bdacabb0b23657fdd67ba3d42be679b630d77a1", "author": {"user": {"login": "tda1009", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1bdacabb0b23657fdd67ba3d42be679b630d77a1", "committedDate": "2020-09-26T04:19:14Z", "message": "Add a progress dialog when deleting media files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDExMTE1", "url": "https://github.com/ankidroid/Anki-Android/pull/7284#pullrequestreview-497011115", "createdAt": "2020-09-26T15:12:19Z", "commit": {"oid": "4e9410ead98861303f52ab8e6c656bba6ccf1f54"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNToxMjoxOVrOHYg1lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNToxMjoxOVrOHYg1lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2NTg3Ng==", "bodyText": "Can you use a <plurals here with one and other defined so the word \"files\" can better be translated into languages (for example: Lithuanian plurals depends on the suffix of the number - 11 and 12 may use a different word for files)\nYou'll need to refer to it via\nint deletedFiles = result.getInt();\ndeckPicker.getResources().getQuantityString(R.plurals.XXX, deletedFiles, deletedFiles)\nOptional: %d files deleted reads better to me.", "url": "https://github.com/ankidroid/Anki-Android/pull/7284#discussion_r495465876", "createdAt": "2020-09-26T15:12:19Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/03-dialogs.xml", "diffHunk": "@@ -136,7 +136,10 @@\n     <string name=\"check_media_no_unused_missing\">No unused or missing files found</string>\n     <string name=\"check_media_db_updated\">Media database rebuilt</string>\n     <string name=\"check_media_delete_unused\">Delete unused</string>\n-    <string name=\"check_media_deleted\">Files deleted: %d</string>\n+\n+    <string name=\"delete_media_message\">Deleting media\u2026</string>\n+    <string name=\"delete_media_result_title\">Deletion result</string>\n+    <string name=\"delete_media_result_message\">Files deleted: %d</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e9410ead98861303f52ab8e6c656bba6ccf1f54"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60e7a5bada38050048c04d0769a3d677d6fc4b72", "author": {"user": {"login": "tda1009", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60e7a5bada38050048c04d0769a3d677d6fc4b72", "committedDate": "2020-09-27T08:29:39Z", "message": "Add a result dialog after deleting media files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e9410ead98861303f52ab8e6c656bba6ccf1f54", "author": {"user": {"login": "tda1009", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4e9410ead98861303f52ab8e6c656bba6ccf1f54", "committedDate": "2020-09-26T04:19:14Z", "message": "Add a result dialog after deleting media files"}, "afterCommit": {"oid": "60e7a5bada38050048c04d0769a3d677d6fc4b72", "author": {"user": {"login": "tda1009", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60e7a5bada38050048c04d0769a3d677d6fc4b72", "committedDate": "2020-09-27T08:29:39Z", "message": "Add a result dialog after deleting media files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDgxMzc1", "url": "https://github.com/ankidroid/Anki-Android/pull/7284#pullrequestreview-497081375", "createdAt": "2020-09-27T13:26:34Z", "commit": {"oid": "60e7a5bada38050048c04d0769a3d677d6fc4b72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDgxNDM1", "url": "https://github.com/ankidroid/Anki-Android/pull/7284#pullrequestreview-497081435", "createdAt": "2020-09-27T13:27:35Z", "commit": {"oid": "60e7a5bada38050048c04d0769a3d677d6fc4b72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3911, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}