{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5OTQxODQ5", "number": 5943, "title": "Uses classes to sort deck names and deck objects", "bodyText": "Pull Request template\nPurpose / Description\nThere were a lot of duplicate and almost duplicate code in\nAnkiDroid. Often the comparator class was put in some random place,\nwhere it could not easily be found to be used again when needed. So I\ntried to make this slightly more consistent by creating three\ncomparators. One for name of deck. One for json objects representing\ndecks. One for json objects with a name.\nI am also correcting a small bug relating to sorting of decks. The\nsorting in allSorted was wrong because A::A should appear before A9,\nwhile it sorted it after. (This is because it considered \":\" as a\ncharacter, and not a separator).\nLuckily, this did not cause real trouble since this method is not even\nused to sort decks in the deck picker interface.\nApproach\nBy putting all comparators together, in utils, so that they can be easily found. I searched for all \"sort(\" in the anki and libanki, to check whether they could be used elsewhere too.\nHow Has This Been Tested?\nAdding it to my \"merge\" branch, and installing it on my phone\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-04-06T22:39:16Z", "url": "https://github.com/ankidroid/Anki-Android/pull/5943", "merged": true, "mergeCommit": {"oid": "5fbc66d581308187c4a727ad0293a75c1096c550"}, "closed": true, "closedAt": "2020-04-12T18:07:41Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVGr-IgBqjMyMDc1MDU2MDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcW9MhRAFqTM5MTg3NTczOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9292d4ba4aef749a0cf61002bba79e785ccf541d", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9292d4ba4aef749a0cf61002bba79e785ccf541d", "committedDate": "2020-04-06T22:32:46Z", "message": "Uses classes to sort deck names and deck objects\n\nThere were a lot of duplicate and almost duplicate code in\nAnkiDroid. Often the comparator class was put in some random place,\nwhere it could not easily be found to be used again when needed. So I\ntried to make this slightly more consistent by creating three\ncomparators. One for name of deck. One for json objects representing\ndecks. One for json objects with a name.\n\nI am also correcting a small bug relating to sorting of decks. The\nsorting in allSorted was wrong because A::A should appear before A9,\nwhile it sorted it after. (This is because it considered \":\" as a\ncharacter, and not a separator).\n\nLuckily, this did not cause real trouble since this method is not even\nused to sort decks in the deck picker interface."}, "afterCommit": {"oid": "4fb20ee5bcb79d943313a62432b31f1b96e0847f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4fb20ee5bcb79d943313a62432b31f1b96e0847f", "committedDate": "2020-04-06T22:45:50Z", "message": "Uses classes to sort deck names and deck objects\n\nThere were a lot of duplicate and almost duplicate code in\nAnkiDroid. Often the comparator class was put in some random place,\nwhere it could not easily be found to be used again when needed. So I\ntried to make this slightly more consistent by creating three\ncomparators. One for name of deck. One for json objects representing\ndecks. One for json objects with a name.\n\nI am also correcting a small bug relating to sorting of decks. The\nsorting in allSorted was wrong because A::A should appear before A9,\nwhile it sorted it after. (This is because it considered \":\" as a\ncharacter, and not a separator).\n\nLuckily, this did not cause real trouble since this method is not even\nused to sort decks in the deck picker interface."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d00cba208b2d65e42ddddd3060dce6b62f4bbfa", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2d00cba208b2d65e42ddddd3060dce6b62f4bbfa", "committedDate": "2020-04-09T12:35:56Z", "message": "Uses classes to sort deck names and deck objects\n\nThere were a lot of duplicate and almost duplicate code in\nAnkiDroid. Often the comparator class was put in some random place,\nwhere it could not easily be found to be used again when needed. So I\ntried to make this slightly more consistent by creating three\ncomparators. One for name of deck. One for json objects representing\ndecks. One for json objects with a name.\n\nI am also correcting a small bug relating to sorting of decks. The\nsorting in allSorted was wrong because A::A should appear before A9,\nwhile it sorted it after. (This is because it considered \":\" as a\ncharacter, and not a separator).\n\nLuckily, this did not cause real trouble since this method is not even\nused to sort decks in the deck picker interface."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fb20ee5bcb79d943313a62432b31f1b96e0847f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4fb20ee5bcb79d943313a62432b31f1b96e0847f", "committedDate": "2020-04-06T22:45:50Z", "message": "Uses classes to sort deck names and deck objects\n\nThere were a lot of duplicate and almost duplicate code in\nAnkiDroid. Often the comparator class was put in some random place,\nwhere it could not easily be found to be used again when needed. So I\ntried to make this slightly more consistent by creating three\ncomparators. One for name of deck. One for json objects representing\ndecks. One for json objects with a name.\n\nI am also correcting a small bug relating to sorting of decks. The\nsorting in allSorted was wrong because A::A should appear before A9,\nwhile it sorted it after. (This is because it considered \":\" as a\ncharacter, and not a separator).\n\nLuckily, this did not cause real trouble since this method is not even\nused to sort decks in the deck picker interface."}, "afterCommit": {"oid": "2d00cba208b2d65e42ddddd3060dce6b62f4bbfa", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2d00cba208b2d65e42ddddd3060dce6b62f4bbfa", "committedDate": "2020-04-09T12:35:56Z", "message": "Uses classes to sort deck names and deck objects\n\nThere were a lot of duplicate and almost duplicate code in\nAnkiDroid. Often the comparator class was put in some random place,\nwhere it could not easily be found to be used again when needed. So I\ntried to make this slightly more consistent by creating three\ncomparators. One for name of deck. One for json objects representing\ndecks. One for json objects with a name.\n\nI am also correcting a small bug relating to sorting of decks. The\nsorting in allSorted was wrong because A::A should appear before A9,\nwhile it sorted it after. (This is because it considered \":\" as a\ncharacter, and not a separator).\n\nLuckily, this did not cause real trouble since this method is not even\nused to sort decks in the deck picker interface."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTg1OTgz", "url": "https://github.com/ankidroid/Anki-Android/pull/5943#pullrequestreview-390985983", "createdAt": "2020-04-09T17:21:12Z", "commit": {"oid": "2d00cba208b2d65e42ddddd3060dce6b62f4bbfa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMToxMlrOGDiG4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMToxMlrOGDiG4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1NzczMA==", "bodyText": "This is replaced by the wrong comparator I think, this should be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Collections.sort(decks, DeckComparator.instance);\n          \n          \n            \n                    Collections.sort(decks, DeckNameComparator.instance);", "url": "https://github.com/ankidroid/Anki-Android/pull/5943#discussion_r406357730", "createdAt": "2020-04-09T17:21:12Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java", "diffHunk": "@@ -446,7 +448,7 @@ public void onClick(View v) {\n         final ArrayList<String> deckNames = new ArrayList<>();\n \n         ArrayList<JSONObject> decks = getCol().getDecks().all();\n-        Collections.sort(decks, new JSONNameComparator());\n+        Collections.sort(decks, DeckComparator.instance);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d00cba208b2d65e42ddddd3060dce6b62f4bbfa"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODc1NzM5", "url": "https://github.com/ankidroid/Anki-Android/pull/5943#pullrequestreview-391875739", "createdAt": "2020-04-12T16:50:18Z", "commit": {"oid": "2d00cba208b2d65e42ddddd3060dce6b62f4bbfa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3596, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}