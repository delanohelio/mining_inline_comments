{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxODg1ODEy", "number": 5965, "title": "Remove sublist from Decks.parents", "bodyText": "Pull Request template\nPurpose / Description\nMaking ankidroid faster.\nCurrently, scheduler's reset spend 1 second and a half in the class sublist iterator. This is entirely useless, as removing it virtually does not increase code complexity and decrease the time of this method.\nApproach\nCreating an explicit loop over indexes instead of using a sublist\nHow Has This Been Tested?\nDoing it in my \"merge\" branch, using anki, and ensuring everything works\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-04-10T12:14:40Z", "url": "https://github.com/ankidroid/Anki-Android/pull/5965", "merged": true, "mergeCommit": {"oid": "8377f8eab35c55fa81029999b1dd1e92ab3aaba6"}, "closed": true, "closedAt": "2020-04-10T20:57:30Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWNNTpgH2gAyNDAxODg1ODEyOjNmMjMyMWNmMDhkODk5NjZmNDA3OTUxZDUwOTNhNDdiMTA4NzNkZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWWaFSgFqTM5MTYyNDA0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3f2321cf08d89966f407951d5093a47b10873de5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3f2321cf08d89966f407951d5093a47b10873de5", "committedDate": "2020-04-10T08:55:43Z", "message": "Remove sublist from Decks.parents\n\nI really don't understand why, but the profiler states that one and a\nhalf seconds are spent in the sublist iterator. So I remove it and do\na direct access. I believe that the little increase in code complexity\nis not worth so much time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTgxNTM4", "url": "https://github.com/ankidroid/Anki-Android/pull/5965#pullrequestreview-391581538", "createdAt": "2020-04-10T18:04:59Z", "commit": {"oid": "3f2321cf08d89966f407951d5093a47b10873de5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowNDo1OVrOGEBrqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxODowNDo1OVrOGEBrqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg3NTA1MA==", "bodyText": "I don't think the two operations are doing the same thing, and I read the ankitects/upstream code\nThe value of 'part' will be different as the iteration happens for size >= 2. In the original implementation it will be like A::B if i == 2, but in your proposal part will be B.\nSo something different will be added to parents - it will be full of non-fully-pathed deck names instead of fully pathed ones. I don't think that's correct", "url": "https://github.com/ankidroid/Anki-Android/pull/5965#discussion_r406875050", "createdAt": "2020-04-10T18:04:59Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "diffHunk": "@@ -932,7 +932,8 @@ private void gather(HashMap<Long, HashMap> node, List<Long> arr) {\n         // get parent and grandparent names\n         List<String> parents = new ArrayList<>();\n         List<String> parts = Arrays.asList(get(did).getString(\"name\").split(\"::\", -1));\n-        for (String part : parts.subList(0, parts.size() - 1)) {\n+        for (int i = 0; i < parts.size() - 1; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f2321cf08d89966f407951d5093a47b10873de5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjI0MDQx", "url": "https://github.com/ankidroid/Anki-Android/pull/5965#pullrequestreview-391624041", "createdAt": "2020-04-10T19:38:49Z", "commit": {"oid": "3f2321cf08d89966f407951d5093a47b10873de5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3623, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}