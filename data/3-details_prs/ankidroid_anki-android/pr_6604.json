{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTgxMTY1", "number": 6604, "title": "Enum case", "bodyText": "Currently, debugging task is hard because Timbers uses number instead of name. The type system takes an int to represent a task, which seems also useless. So here I'm trying to solve both problem by adding an enum.\nIt seems to me that our API does not allow the user to give directly a number to execute, so there should be no problem here if we just change the type\nTested on my phone, because it allows me to understand logcat more easily !", "createdAt": "2020-07-03T20:10:21Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6604", "merged": true, "mergeCommit": {"oid": "017cb41d04e55b284f5e11410c50f63d2b368d38"}, "closed": true, "closedAt": "2020-07-04T16:53:03Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxZJ73gH2gAyNDQ0MTgxMTY1OjI1N2Q4NDk2NzFlY2FkODI5NTQ2MGQ0NDVkYWIyMDllYjNiZmQ3MWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxq-e_AFqTQ0MjYyMDI4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "257d849671ecad8295460d445dab209eb3bfd71b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/257d849671ecad8295460d445dab209eb3bfd71b", "committedDate": "2020-07-03T20:06:51Z", "message": "NF: Task type becomes an enum\n\nThe main reason is that, instead of having timber stating:\n\"interrupted while waiting for previous task: 23\", I'll gett\n\"interrupted while waiting for previous task:\nTASK_TYPE_UPDATE_VALUES_FROM_DECK\", and that will be really more readable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96", "committedDate": "2020-07-03T20:06:55Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNTcwODQy", "url": "https://github.com/ankidroid/Anki-Android/pull/6604#pullrequestreview-442570842", "createdAt": "2020-07-03T22:44:05Z", "commit": {"oid": "adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QyMjo0NDowNVrOGs4b3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QyMjo0NDowNVrOGs4b3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcxNTE2Nw==", "bodyText": "Can you please define the integer values explicitly - I think we'll be fine here, but I've been burned a few times by someone adding enum values in the middle, or at the start, which changes all the values, and can lead to mismatches if they're persisted anywhere.", "url": "https://github.com/ankidroid/Anki-Android/pull/6604#discussion_r449715167", "createdAt": "2020-07-03T22:44:05Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -75,43 +75,45 @@\n  */\n public class CollectionTask extends BaseAsyncTask<CollectionTask.TaskData, CollectionTask.TaskData, CollectionTask.TaskData> {\n \n-    public static final int TASK_TYPE_SAVE_COLLECTION = 2;\n-    public static final int TASK_TYPE_ANSWER_CARD = 3;\n-    public static final int TASK_TYPE_ADD_NOTE = 6;\n-    public static final int TASK_TYPE_UPDATE_NOTE = 7;\n-    public static final int TASK_TYPE_UPDATE_NOTES_MULTI = 9;\n-    public static final int TASK_TYPE_UNDO = 8;\n-    public static final int TASK_TYPE_DISMISS = 11;\n-    public static final int TASK_TYPE_DISMISS_MULTI = 12;\n-    public static final int TASK_TYPE_CHECK_DATABASE = 14;\n-    public static final int TASK_TYPE_REPAIR_DECK = 20;\n-    public static final int TASK_TYPE_LOAD_DECK_COUNTS = 22;\n-    public static final int TASK_TYPE_UPDATE_VALUES_FROM_DECK = 23;\n-    public static final int TASK_TYPE_DELETE_DECK = 25;\n-    public static final int TASK_TYPE_REBUILD_CRAM = 26;\n-    public static final int TASK_TYPE_EMPTY_CRAM = 27;\n-    public static final int TASK_TYPE_IMPORT = 28;\n-    public static final int TASK_TYPE_IMPORT_REPLACE = 29;\n-    public static final int TASK_TYPE_SEARCH_CARDS = 30;\n-    public static final int TASK_TYPE_EXPORT_APKG = 31;\n-    public static final int TASK_TYPE_REORDER = 32;\n-    public static final int TASK_TYPE_CONF_CHANGE = 33;\n-    public static final int TASK_TYPE_CONF_RESET = 34;\n-    public static final int TASK_TYPE_CONF_REMOVE = 35;\n-    public static final int TASK_TYPE_CONF_SET_SUBDECKS = 36;\n-    public static final int TASK_TYPE_RENDER_BROWSER_QA = 37;\n-    public static final int TASK_TYPE_CHECK_MEDIA = 38;\n-    public static final int TASK_TYPE_ADD_TEMPLATE = 39;\n-    public static final int TASK_TYPE_REMOVE_TEMPLATE = 40;\n-    public static final int TASK_TYPE_COUNT_MODELS = 41;\n-    public static final int TASK_TYPE_DELETE_MODEL = 42;\n-    public static final int TASK_TYPE_DELETE_FIELD = 43;\n-    public static final int TASK_TYPE_REPOSITION_FIELD = 44;\n-    public static final int TASK_TYPE_ADD_FIELD = 45;\n-    public static final int TASK_TYPE_CHANGE_SORT_FIELD = 46;\n-    public static final int TASK_TYPE_SAVE_MODEL = 47;\n-    public static final int TASK_TYPE_FIND_EMPTY_CARDS = 48;\n-    public static final int TASK_TYPE_CHECK_CARD_SELECTION = 49;\n+    public enum TASK_TYPE {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96"}, "originalPosition": 41}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96", "committedDate": "2020-07-03T20:06:55Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}, "afterCommit": {"oid": "26999c981e4a1e6dcfc5ee31ba40b77d97d0890e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/26999c981e4a1e6dcfc5ee31ba40b77d97d0890e", "committedDate": "2020-07-03T23:16:55Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26999c981e4a1e6dcfc5ee31ba40b77d97d0890e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/26999c981e4a1e6dcfc5ee31ba40b77d97d0890e", "committedDate": "2020-07-03T23:16:55Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}, "afterCommit": {"oid": "ed80647401956ddc475c0ab3dc03e3bf90cd5adb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ed80647401956ddc475c0ab3dc03e3bf90cd5adb", "committedDate": "2020-07-03T23:18:11Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed80647401956ddc475c0ab3dc03e3bf90cd5adb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ed80647401956ddc475c0ab3dc03e3bf90cd5adb", "committedDate": "2020-07-03T23:18:11Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}, "afterCommit": {"oid": "4285be98ddcdd0b982a70d6e26803981f01f0395", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4285be98ddcdd0b982a70d6e26803981f01f0395", "committedDate": "2020-07-03T23:19:05Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNTc0MTU5", "url": "https://github.com/ankidroid/Anki-Android/pull/6604#pullrequestreview-442574159", "createdAt": "2020-07-03T23:31:52Z", "commit": {"oid": "4285be98ddcdd0b982a70d6e26803981f01f0395"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4285be98ddcdd0b982a70d6e26803981f01f0395", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4285be98ddcdd0b982a70d6e26803981f01f0395", "committedDate": "2020-07-03T23:19:05Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}, "afterCommit": {"oid": "adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96", "committedDate": "2020-07-03T20:06:55Z", "message": "NF: Remove TASK_TYPE from enum name\n\nThe type should now be sufficient to understand what we are dealing\nwith. Timber message gets simpler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjIwMjgx", "url": "https://github.com/ankidroid/Anki-Android/pull/6604#pullrequestreview-442620281", "createdAt": "2020-07-04T16:52:38Z", "commit": {"oid": "adbd265a1d2a3c65df9c5efb3c0b8b82ded17c96"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3060, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}