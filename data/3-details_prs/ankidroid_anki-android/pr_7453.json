{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5MDE5Mzgy", "number": 7453, "title": "Less long", "bodyText": "Profiler state that two costly part of getCard are querying the database and long -> Long. Actually, long->Long is not cached. So I change variables from long to Long. On my collection, it reduces the time from 23 seconds to 8 seconds in Long.valueOf\nFurthermore, I change the query by moving in it a condition that it can execute. This reduce the time spent doing getLong from 6 to 5 seconds(I'll admit I was expecting a better improvement here)", "createdAt": "2020-10-23T14:52:39Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7453", "merged": true, "mergeCommit": {"oid": "554ce84211efc17b8503acf45be600497f873d47"}, "closed": true, "closedAt": "2020-10-23T18:43:48Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVXsKfAH2gAyNTA5MDE5MzgyOmM5ZTcyN2RmMGQyZDFmZjQ1N2UwYzc5YjgxODZlMDRiZGFjNDJhMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVZvNNAFqTUxNTg1NDQ4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c9e727df0d2d1ff457e0c79b8186e04bdac42a33", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c9e727df0d2d1ff457e0c79b8186e04bdac42a33", "committedDate": "2020-10-23T14:45:42Z", "message": "NF: move a if in SQL\n\nThis ensure we need to get less data from the database, letting it do some work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af20913d078f485b07a6a0592eb937b53f2bdc97", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/af20913d078f485b07a6a0592eb937b53f2bdc97", "committedDate": "2020-10-23T14:45:49Z", "message": "NF: avoid multiple conversions to Long"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzY2NjU1", "url": "https://github.com/ankidroid/Anki-Android/pull/7453#pullrequestreview-515766655", "createdAt": "2020-10-23T15:19:26Z", "commit": {"oid": "af20913d078f485b07a6a0592eb937b53f2bdc97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNToxOToyN1rOHnSZOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNToxOToyN1rOHnSZOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1Nzg4Mg==", "bodyText": "Was this one necessary, or missed?", "url": "https://github.com/ankidroid/Anki-Android/pull/7453#discussion_r510957882", "createdAt": "2020-10-23T15:19:27Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -797,7 +797,7 @@ public void _remNotes(java.util.Collection<Long> ids) {\n                     Timber.v(\"Empty card cancelled\");\n                     return null;\n                 }\n-                long nid = cur.getLong(0);\n+                Long nid = cur.getLong(0);\n                 long mid = cur.getLong(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af20913d078f485b07a6a0592eb937b53f2bdc97"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzY2ODM1", "url": "https://github.com/ankidroid/Anki-Android/pull/7453#pullrequestreview-515766835", "createdAt": "2020-10-23T15:19:38Z", "commit": {"oid": "af20913d078f485b07a6a0592eb937b53f2bdc97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1ODU0NDgy", "url": "https://github.com/ankidroid/Anki-Android/pull/7453#pullrequestreview-515854482", "createdAt": "2020-10-23T17:08:50Z", "commit": {"oid": "af20913d078f485b07a6a0592eb937b53f2bdc97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3867, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}