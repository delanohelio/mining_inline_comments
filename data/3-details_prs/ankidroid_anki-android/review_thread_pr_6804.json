{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDQ2NTU2", "number": 6804, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMzo0NjoyM1rOEUyy8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDoyMjoyN1rOEUzNRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjM5MjE3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/web/DatabaseChangeDecorator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMzo0NjoyM1rOG7MNxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMzo0NjoyM1rOG7MNxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcxOTMwMQ==", "bodyText": "doesn't seem \"web\"-y to me, seems more utils-y to me ? Shame all the boilerplate is necessary!", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464719301", "createdAt": "2020-08-03T23:46:23Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/web/DatabaseChangeDecorator.java", "diffHunk": "@@ -0,0 +1,281 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki.web;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec3bfde588c0531ad4f3978983005914873156f3"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjM5MzI5OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/SyncStatus.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMzo0NzowNFrOG7MObg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMzo0NzowNFrOG7MObg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcxOTQ3MA==", "bodyText": "also maybe Utils-y ?", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464719470", "createdAt": "2020-08-03T23:47:04Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/SyncStatus.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d02246b56b13ce29f52eaf954617875cb6b9025f"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjM5ODIxOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/ui/BadgeDrawableBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMzo0OTo1MlrOG7MRYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDowNDo0NVrOG7MhVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyMDIyNw==", "bodyText": "I'd prefer if this sort of stuff was in the Compat infrastructure so we didn't spread the API-dependent conditionals across the codebase. Not sure how to do that well when there are related public methods like here though \ud83e\udd14 might be this is as good as it gets and we already have to do a full code scan for API codes anyway, so maybe just think about it for a timebox of no more than two minutes, and leave as is if it doesn't seem easy to fit into Compat/CompatV16/CompatV23", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464720227", "createdAt": "2020-08-03T23:49:52Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/ui/BadgeDrawableBuilder.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.ui;\n+\n+import android.content.res.Resources;\n+import android.graphics.drawable.Drawable;\n+import android.os.Build;\n+import android.view.MenuItem;\n+\n+import com.ichi2.anki.R;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.core.graphics.drawable.DrawableCompat;\n+import androidx.vectordrawable.graphics.drawable.VectorDrawableCompat;\n+import timber.log.Timber;\n+\n+public class BadgeDrawableBuilder {\n+    private final Resources mResources;\n+    private char mChar;\n+    private Integer mColor;\n+\n+\n+    public BadgeDrawableBuilder(@NonNull Resources resources) {\n+        mResources = resources;\n+    }\n+\n+\n+    public static void removeBadge(MenuItem menuItem) {\n+        if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n+            return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "655f6af757a1d146a1943af992d3b9407f6f4bb7"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyNDMxMQ==", "bodyText": "I couldn't and can't see a way to make this fit in as we inherit from an API23+ class - the conditionals are (nicely) hidden away in the Builder so they won't be seen by consumers, but it's still unpleasant.", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464724311", "createdAt": "2020-08-04T00:04:45Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/ui/BadgeDrawableBuilder.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.ui;\n+\n+import android.content.res.Resources;\n+import android.graphics.drawable.Drawable;\n+import android.os.Build;\n+import android.view.MenuItem;\n+\n+import com.ichi2.anki.R;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.core.graphics.drawable.DrawableCompat;\n+import androidx.vectordrawable.graphics.drawable.VectorDrawableCompat;\n+import timber.log.Timber;\n+\n+public class BadgeDrawableBuilder {\n+    private final Resources mResources;\n+    private char mChar;\n+    private Integer mColor;\n+\n+\n+    public BadgeDrawableBuilder(@NonNull Resources resources) {\n+        mResources = resources;\n+    }\n+\n+\n+    public static void removeBadge(MenuItem menuItem) {\n+        if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {\n+            return;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyMDIyNw=="}, "originalCommit": {"oid": "655f6af757a1d146a1943af992d3b9407f6f4bb7"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjQ1NTA3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/utils/SyncStatus.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDoyMDoxNFrOG7MyVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMTowNzoxM1rOG7Nifg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyODY2MA==", "bodyText": "Also flagging - static state is typically something to be avoided, but we'd need DI to solve it.", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464728660", "createdAt": "2020-08-04T00:20:14Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/SyncStatus.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.utils;\n+\n+import android.content.SharedPreferences;\n+\n+import com.ichi2.anki.AnkiDroidApp;\n+import com.ichi2.libanki.Collection;\n+import com.ichi2.utils.FunctionalInterfaces.Supplier;\n+\n+import androidx.annotation.NonNull;\n+\n+public enum SyncStatus {\n+    INCONCLUSIVE,\n+    NO_ACCOUNT,\n+    NO_CHANGES,\n+    HAS_CHANGES,\n+    FULL_SYNC;\n+\n+    private static boolean sPauseCheckingDatabase = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "167ac7859f106f405cb4d1fb8ac0fdfa24513297"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc0MDk5MA==", "bodyText": "I'm okay with it when needed", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464740990", "createdAt": "2020-08-04T01:07:13Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/SyncStatus.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+\n+ This program is free software; you can redistribute it and/or modify it under\n+ the terms of the GNU General Public License as published by the Free Software\n+ Foundation; either version 3 of the License, or (at your option) any later\n+ version.\n+\n+ This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+\n+ You should have received a copy of the GNU General Public License along with\n+ this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.utils;\n+\n+import android.content.SharedPreferences;\n+\n+import com.ichi2.anki.AnkiDroidApp;\n+import com.ichi2.libanki.Collection;\n+import com.ichi2.utils.FunctionalInterfaces.Supplier;\n+\n+import androidx.annotation.NonNull;\n+\n+public enum SyncStatus {\n+    INCONCLUSIVE,\n+    NO_ACCOUNT,\n+    NO_CHANGES,\n+    HAS_CHANGES,\n+    FULL_SYNC;\n+\n+    private static boolean sPauseCheckingDatabase = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyODY2MA=="}, "originalCommit": {"oid": "167ac7859f106f405cb4d1fb8ac0fdfa24513297"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjQ1OTU3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/res/values/04-network.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDoyMjoyN1rOG7M01g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDoyMjoyN1rOG7M01g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyOTMwMg==", "bodyText": "@mikehardy Bikeshedding - but I'd actually like to move these new additions out of \"Network.xml\", and use a \"Sync\" string for the DeckPicker, would that be OK with you?\nIt's used in a few places (dialog, notification channel name and the action item) and I feel the action item would be best named \"Sync\"\nEDIT: Done, TBC if it's appropriate. Maybe they should be in \"core\"?", "url": "https://github.com/ankidroid/Anki-Android/pull/6804#discussion_r464729302", "createdAt": "2020-08-04T00:22:27Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/04-network.xml", "diffHunk": "@@ -62,6 +62,8 @@\n     <string name=\"sync_uploading_message\">Uploading\u2026</string>\n     <string name=\"sync_downloading_message\">Downloading\u2026</string>\n     <string name=\"sync_title\">Synchronization</string>\n+    <string name=\"sync_title_full_sync\">Sync (full)</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "167ac7859f106f405cb4d1fb8ac0fdfa24513297"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4980, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}