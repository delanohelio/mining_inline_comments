{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NjEyMjA1", "number": 5751, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxMjoyMDozOVrODgKDHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxMjoyMDozOVrODgKDHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDQ1NjYwOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Utils.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxMjoyMDozOVrOFqO4mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo0MjoyMFrOFqTg-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgyODM3OQ==", "bodyText": "This bothers me just a little bit - it means there is a chunk of strings that add bold HTML tags without knowing we rely on the tags here. I think we either need a quick comment here https://github.com/ankidroid/Anki-Android/blob/master/AnkiDroid/src/main/res/values/06-statistics.xml#L75 mentioning if the format changes you need to change this Utils method, or a second batch of formatted strings without the formatting\nIn looking for the alternative (a second batch), perhaps these are useful, they take floats for the months and years (where we need them I think) https://github.com/ankidroid/Anki-Android/blob/master/AnkiDroid/src/main/res/values/01-core.xml#L115", "url": "https://github.com/ankidroid/Anki-Android/pull/5751#discussion_r379828379", "createdAt": "2020-02-15T12:20:39Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Utils.java", "diffHunk": "@@ -192,7 +192,21 @@ public static String timeSpan(Context context, long time_s) {\n      *\n      * @param context The application's environment.\n      * @param time_s The time to format, in seconds\n-     * @return The formatted, localized time string. The time is always a float.\n+     * @return The formatted, localized time string. The time is always a float. E.g. \"27.0 days\"\n+     */\n+    public static String roundedTimeSpanUnformatted(Context context, long time_s) {\n+        // As roundedTimeSpan, but without tags; for place where you don't use HTML\n+        return roundedTimeSpan(context, time_s).replace(\"<b>\", \"\").replace(\"</b>\", \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14bc686f900b30b99e044a295d9da7d66798be3d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg2MjEzOQ==", "bodyText": "\"without knowing we rely on the tags here.\" I don't understand this sentence.\nWith the second link, you obtain \"m\" instead of \"month\". So that's not similar to anki either.\nI'm not a fan of the idea of  asking every translators to translate again the string we already have only because it's not the same because the bold tag. Especially since \"removing the tag\" can easily be scripted. I can add the tags in every translation's xml file. But it seems that's not a correct way to add transaltion", "url": "https://github.com/ankidroid/Anki-Android/pull/5751#discussion_r379862139", "createdAt": "2020-02-15T23:16:30Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Utils.java", "diffHunk": "@@ -192,7 +192,21 @@ public static String timeSpan(Context context, long time_s) {\n      *\n      * @param context The application's environment.\n      * @param time_s The time to format, in seconds\n-     * @return The formatted, localized time string. The time is always a float.\n+     * @return The formatted, localized time string. The time is always a float. E.g. \"27.0 days\"\n+     */\n+    public static String roundedTimeSpanUnformatted(Context context, long time_s) {\n+        // As roundedTimeSpan, but without tags; for place where you don't use HTML\n+        return roundedTimeSpan(context, time_s).replace(\"<b>\", \"\").replace(\"</b>\", \"\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgyODM3OQ=="}, "originalCommit": {"oid": "14bc686f900b30b99e044a295d9da7d66798be3d"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDI0OQ==", "bodyText": "I do not want to generate a bunch of re-translation either\nI did not look deeply enough when I scanned to see that the second link would also not have fidelity\nSeems like the first option is perhaps best:\n\nI think we either need a quick comment here /AnkiDroid/src/main/res/values/06-statistics.xml@master#L75  mentioning if the format changes you need to change this Utils method\n\nI'm just trying to tie the two things together. AnkiDroid has existed longer than in-use web standards. I think it unlikely but still possible that in the future the <b> tags might change, and when they do we'll either have a little note here to help a future maintainer, or something will break unexpectedly. I'd prefer the note at least :-)", "url": "https://github.com/ankidroid/Anki-Android/pull/5751#discussion_r379904249", "createdAt": "2020-02-16T13:42:20Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Utils.java", "diffHunk": "@@ -192,7 +192,21 @@ public static String timeSpan(Context context, long time_s) {\n      *\n      * @param context The application's environment.\n      * @param time_s The time to format, in seconds\n-     * @return The formatted, localized time string. The time is always a float.\n+     * @return The formatted, localized time string. The time is always a float. E.g. \"27.0 days\"\n+     */\n+    public static String roundedTimeSpanUnformatted(Context context, long time_s) {\n+        // As roundedTimeSpan, but without tags; for place where you don't use HTML\n+        return roundedTimeSpan(context, time_s).replace(\"<b>\", \"\").replace(\"</b>\", \"\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgyODM3OQ=="}, "originalCommit": {"oid": "14bc686f900b30b99e044a295d9da7d66798be3d"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 581, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}