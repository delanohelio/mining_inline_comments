{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzM1Mzky", "number": 6430, "title": "Refuse to compile with unsupported JDKs", "bodyText": "Pull Request template\nPurpose / Description\nIt was possible to use unsupported JDKs as a developer, leading to very obscure problems in robolectric when you ran the test harness\nPart of a good developer experience is determining invalid environment states as quickly as possible, then refusing to go further, ideally with a nice message explaining the problem\nFixes\nFixes #6428\nApproach\nUse some groovy to detect the JVM major version, and abort with message if the JVM isn't one of the ones we support\nHow Has This Been Tested?\nI don't have an unsupported JVM but when I falsified the test (by overriding the current JVM variable to 9) I get a nice message now\n\nLearning (optional, can help others)\nGroovy is pretty groovy, if you know Java.\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-06-10T22:30:44Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6430", "merged": true, "mergeCommit": {"oid": "a41a08eb3f37f4e9feb8941c6fd742ad979799e6"}, "closed": true, "closedAt": "2020-06-11T00:39:06Z", "author": {"login": "mikehardy"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqBU8cgH2gAyNDMyNzM1MzkyOmNlOWI1NDk5ZmMzNGVkMmNhZGQ0ODYyOWViZDkzNThlOGEwMGY3MWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqBmzBgFqTQyODQ3Nzc3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ce9b5499fc34ed2cadd48629ebd9358e8a00f71d", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ce9b5499fc34ed2cadd48629ebd9358e8a00f71d", "committedDate": "2020-06-10T22:23:41Z", "message": "Refuse to compile with unsupported JDKs\n\nFixes #6428"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NDc1Mjc4", "url": "https://github.com/ankidroid/Anki-Android/pull/6430#pullrequestreview-428475278", "createdAt": "2020-06-10T22:37:17Z", "commit": {"oid": "ce9b5499fc34ed2cadd48629ebd9358e8a00f71d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMjozNzoxN1rOGiIkuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMjozOTowM1rOGiIm_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ0NTI0MA==", "bodyText": "Do we need the null-safe operator ?. here? Or are the calls guaranteed as non-null.  Edit: This is fine\nhttps://github.com/gradle/gradle/blob/b6eea5ff9b07840c2c36ae9f2a089b20aa4111c4/subprojects/base-services/src/main/java/org/gradle/internal/jvm/Jvm.java#L54-L61", "url": "https://github.com/ankidroid/Anki-Android/pull/6430#discussion_r438445240", "createdAt": "2020-06-10T22:37:17Z", "author": {"login": "david-allison-1"}, "path": "build.gradle", "diffHunk": "@@ -14,6 +16,18 @@ buildscript {\n \n ext {\n \n+    jvmVersion = Jvm.current().javaVersion.majorVersion", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce9b5499fc34ed2cadd48629ebd9358e8a00f71d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ0NTgyMA==", "bodyText": "For future reference only: I'm fairly sure jvmVersion not in [\"8\", \"11\", \"14\"] would work", "url": "https://github.com/ankidroid/Anki-Android/pull/6430#discussion_r438445820", "createdAt": "2020-06-10T22:39:03Z", "author": {"login": "david-allison-1"}, "path": "build.gradle", "diffHunk": "@@ -14,6 +16,18 @@ buildscript {\n \n ext {\n \n+    jvmVersion = Jvm.current().javaVersion.majorVersion\n+    if (jvmVersion != \"8\" && jvmVersion != \"11\" && jvmVersion != \"14\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce9b5499fc34ed2cadd48629ebd9358e8a00f71d"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NDc3Nzc2", "url": "https://github.com/ankidroid/Anki-Android/pull/6430#pullrequestreview-428477776", "createdAt": "2020-06-10T22:43:11Z", "commit": {"oid": "ce9b5499fc34ed2cadd48629ebd9358e8a00f71d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3176, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}