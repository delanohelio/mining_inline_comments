{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjcyMTMw", "number": 7837, "title": "Persist Whiteboard Pen Color ", "bodyText": "Purpose / Description\nUser requested\nFixes\nFixes #7834\nApproach\nPersist the value in MetaDB, group by deck/light mode\nHow Has This Been Tested?\nUnit Tested (including a full run) - brief emulator test\nLearning\n\nI'm glad we're better at testing, but it might have added too much friction to this change\nAdding new columns to MetaDB could be much easier - consider an alternate library for the far future.\n\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code\n UI changes: include screenshots of all affected screens (in particular showing any new or changed strings)", "createdAt": "2020-12-07T13:32:09Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7837", "merged": true, "mergeCommit": {"oid": "27f10d57c86fe2e8ad3e66c969b48b92b5e594f1"}, "closed": true, "closedAt": "2020-12-08T14:34:58Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjnRkGAH2gAyNTMzNjcyMTMwOjFjZGM5OTVmNDM1MjU1MWM4NzE2Y2I0NjE4ZDRhYTExNGFmN2RkODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdj3xq6gFqTU0NjI5MzY1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1cdc995f4352551c8716cb4618d4aa114af7dd80", "committedDate": "2020-12-06T20:50:04Z", "message": "TEST: Add tests for getForegroundColor\n\nTo be modified in 7834 - we want to handle the defaults"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2b32e66ab9aeee789060bee9815311e38f66b9e", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a2b32e66ab9aeee789060bee9815311e38f66b9e", "committedDate": "2020-12-06T21:01:28Z", "message": "LINT: Fix Whiteboard Lint Errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f959af83907d2e73d3a51032714802ff29c9b3", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c2f959af83907d2e73d3a51032714802ff29c9b3", "committedDate": "2020-12-06T21:45:42Z", "message": "NF: Extract setPenColor\n\nUseful for 7834"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d78fbf5168c5440d3a0365004710deac5896b5", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/70d78fbf5168c5440d3a0365004710deac5896b5", "committedDate": "2020-12-07T13:15:49Z", "message": "NF: ReviewerTest - make startReviewer static\n\nFor use in another class for testing issue 7834"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e354108c051dbbfa0794c0dd692e7dd66f2b0abe", "committedDate": "2020-12-07T13:33:27Z", "message": "Persist Whiteboard Pen Color\n\nPersisted per deck, and night/light mode has different values\n\nFixes 7834"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ced9f765390710ebb422e2cec6ee9ebc5b0cd42b", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ced9f765390710ebb422e2cec6ee9ebc5b0cd42b", "committedDate": "2020-12-07T13:17:08Z", "message": "Persist Whiteboard Pen Color\n\nPersisted per deck, and night/light mode has different values\n\nFixes 7834"}, "afterCommit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e354108c051dbbfa0794c0dd692e7dd66f2b0abe", "committedDate": "2020-12-07T13:33:27Z", "message": "Persist Whiteboard Pen Color\n\nPersisted per deck, and night/light mode has different values\n\nFixes 7834"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2Mjg2NzU3", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#pullrequestreview-546286757", "createdAt": "2020-12-07T15:56:41Z", "commit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNTo1Njo0MVrOIAtpig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNTo1Njo0MVrOIAtpig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYxODgyNg==", "bodyText": "look at you all fancy and parameterized ;-)", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537618826", "createdAt": "2020-12-07T15:56:41Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+ *\n+ *  This program is free software; you can redistribute it and/or modify it under\n+ *  the terms of the GNU General Public License as published by the Free Software\n+ *  Foundation; either version 3 of the License, or (at your option) any later\n+ *  version.\n+ *\n+ *  This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ *  PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License along with\n+ *  this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;\n+\n+import android.content.Intent;\n+import android.graphics.Color;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.ParameterizedRobolectricTestRunner;\n+\n+import java.util.Arrays;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+@RunWith(ParameterizedRobolectricTestRunner.class)\n+public class WhiteboardDefaultForegroundColorTest extends RobolectricTest {\n+\n+    @ParameterizedRobolectricTestRunner.Parameter()\n+    public boolean mIsInverted;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(1)\n+    public boolean mIsMonochrome;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(2)\n+    public int mExpectedResult;\n+\n+    @ParameterizedRobolectricTestRunner.Parameters", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MjkxNjMx", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#pullrequestreview-546291631", "createdAt": "2020-12-07T16:01:33Z", "commit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowMTozM1rOIAt46g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowMTozM1rOIAt46g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMjc2Mg==", "bodyText": "interesting - what's the ideal resolution here? more specifically, what does \"reset\" mean? I thought robolectric used sqlite implementation from robolectric, configured for in-memory db and the tests were isolated so each test got it's own db clean?", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537622762", "createdAt": "2020-12-07T16:01:33Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java", "diffHunk": "@@ -96,6 +96,9 @@ public void setUp() {\n \n         //See: #6140 - This global ideally shouldn't exist, but it will cause crashes if set.\n         DialogHandler.discardMessage();\n+\n+        // BUG: We do not reset the MetaDB", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MjkzNjUy", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#pullrequestreview-546293652", "createdAt": "2020-12-07T16:03:37Z", "commit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3717, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}