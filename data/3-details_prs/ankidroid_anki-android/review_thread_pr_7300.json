{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MjAwMTQ2", "number": 7300, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNTowMzo1OVrOEoIEYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNzoyNTozN1rOEoMBTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNTEwNjg4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sync/Syncer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNTowMzo1OVrOHZCT9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNTowMzo1OVrOHZCT9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAxNDMyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    UsageAnalytics.sendAnalyticsEvent(\"sanityCheckError\", \"Syncer\");\n          \n          \n            \n                    UsageAnalytics.sendAnalyticsEvent(UsageAnalytics.Categories.SYNCER, \"sanityCheckError\");\n          \n      \n    \n    \n  \n\n\n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/analytics/UsageAnalytics.java\n    \n    \n        Lines 230 to 240\n      in\n      d6de360\n    \n    \n    \n    \n\n        \n          \n               /** \n        \n\n        \n          \n                * Send a detailed arbitrary analytics event, with noun/verb pairs and extra data if needed \n        \n\n        \n          \n                * \n        \n\n        \n          \n                * @param category the category of event, make your own but use a constant so reporting is good \n        \n\n        \n          \n                * @param action   the action the user performed \n        \n\n        \n          \n                * @param value    A value for the event, Integer.MIN_VALUE signifies caller shouldn't send the value \n        \n\n        \n          \n                * @param label    A label for the event, may be null \n        \n\n        \n          \n                */ \n        \n\n        \n          \n               @SuppressWarnings(\"WeakerAccess\") \n        \n\n        \n          \n               public static void sendAnalyticsEvent(@NonNull String category, @NonNull String action, int value, String label) { \n        \n\n        \n          \n                   Timber.d(\"sendAnalyticsEvent() category/action/value/label: %s/%s/%s/%s\", category, action, value, label); \n        \n    \n  \n\n\nI'm referencing a \"dangling\" constant as nothing like that exists yet but I think the arguments are reversed (Syncer would/should be the category?) and constants will help make sure reports line up later by enforcing that the same strings are sent always", "url": "https://github.com/ankidroid/Anki-Android/pull/7300#discussion_r496014324", "createdAt": "2020-09-28T15:03:59Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sync/Syncer.java", "diffHunk": "@@ -265,12 +266,18 @@ private void trySetHostNum(JSONObject rMeta) {\n         }\n     }\n \n+    @NonNull\n+    protected Object[] sanityCheckError(JSONObject c, JSONObject sanity) {\n+        mCol.log(\"sanity check failed\", c, sanity);\n+        UsageAnalytics.sendAnalyticsEvent(\"sanityCheckError\", \"Syncer\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b094e7f15dfa30bdd87c7aba8ea09f6c466e536f"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNTc1Mjg3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sync/Syncer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNzoyNToxM1rOHZIe6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNzoyNToxM1rOHZIe6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExNTQzMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    UsageAnalytics.sendAnalyticsEvent( UsageAnalytics.Category.SYNC, \"sanityCheckError\");\n          \n          \n            \n                    UsageAnalytics.sendAnalyticsEvent(UsageAnalytics.Category.SYNC, \"sanityCheckError\");", "url": "https://github.com/ankidroid/Anki-Android/pull/7300#discussion_r496115433", "createdAt": "2020-09-28T17:25:13Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sync/Syncer.java", "diffHunk": "@@ -268,6 +269,7 @@ private void trySetHostNum(JSONObject rMeta) {\n     @NonNull\n     protected Object[] sanityCheckError(JSONObject c, JSONObject sanity) {\n         mCol.log(\"sanity check failed\", c, sanity);\n+        UsageAnalytics.sendAnalyticsEvent( UsageAnalytics.Category.SYNC, \"sanityCheckError\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30d2588cd54de9074e5744a77b0765491e1ec6c3"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNTc1NDM3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/analytics/UsageAnalytics.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNzoyNTozN1rOHZIfyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNzoyNTo1NlrOHZIgag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExNTY1Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/ankidroid/Anki-Android/pull/7300#discussion_r496115656", "createdAt": "2020-09-28T17:25:37Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/analytics/UsageAnalytics.java", "diffHunk": "@@ -349,4 +349,10 @@ private DefaultRequest setAndroidRequestParameters(Context context) {\n             return this;\n         }\n     }\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30d2588cd54de9074e5744a77b0765491e1ec6c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExNTgxOA==", "bodyText": "...as long as I'm being picky \ud83e\udd23", "url": "https://github.com/ankidroid/Anki-Android/pull/7300#discussion_r496115818", "createdAt": "2020-09-28T17:25:56Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/analytics/UsageAnalytics.java", "diffHunk": "@@ -349,4 +349,10 @@ private DefaultRequest setAndroidRequestParameters(Context context) {\n             return this;\n         }\n     }\n+\n+\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExNTY1Ng=="}, "originalCommit": {"oid": "30d2588cd54de9074e5744a77b0765491e1ec6c3"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 803, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}