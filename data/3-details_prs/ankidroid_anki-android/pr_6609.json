{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0Mjk1NDMw", "number": 6609, "title": "NF: card search: cancelling checked more often", "bodyText": "doing a second search can take time if a search is still processing. Cancelling task had no effect if the task was already started. this is now changed\nTesting on my phone", "createdAt": "2020-07-04T15:11:00Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6609", "merged": true, "mergeCommit": {"oid": "0cb1d97ca9b5ca5ab5174629603655506f9ffad2"}, "closed": true, "closedAt": "2020-07-06T05:59:43Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxpxMsgFqTQ0MjYxNTg3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyFej0ABqjM1MTM3Nzg1ODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjE1ODcw", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#pullrequestreview-442615870", "createdAt": "2020-07-04T15:28:13Z", "commit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjI0NzY1", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#pullrequestreview-442624765", "createdAt": "2020-07-04T18:27:50Z", "commit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxODoyNzo1MVrOGs9Tsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxODoyODoyMVrOGs9T2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc5NDk5NQ==", "bodyText": "The binding between all the classes is unnecessary, you can always do CollectionTask.getInstance() to get the currently executing task, and we only do one at a time so this should work?", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#discussion_r449794995", "createdAt": "2020-07-04T18:27:51Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Finder.java", "diffHunk": "@@ -77,11 +77,22 @@ public Finder(Collection col) {\n \n     @CheckResult\n     public List<Long> findCards(String query, boolean _order) {\n-        return _findCards(query, _order);\n+        return findCards(query, _order, null);\n     }\n \n+    @CheckResult\n+    public List<Long> findCards(String query, boolean _order, CollectionTask task) {\n+        return _findCards(query, _order, task);\n+    }\n \n+\n+    @CheckResult\n     private List<Long> _findCards(String query, Object _order) {\n+        return _findCards(query, _order, null);\n+    }\n+\n+    @CheckResult\n+    private List<Long> _findCards(String query, Object _order, CollectionTask task) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc5NTAzMg==", "bodyText": "CollectionTask.getInstance() is available, so no need to change the APIs here", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#discussion_r449795032", "createdAt": "2020-07-04T18:28:21Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1131,7 +1131,7 @@ public String _flagNameFromCardFlags(int flags){\n         return new Finder(this).findCards(search, order);\n     }\n \n-    public List<Long> findCards(String search, boolean order) {\n+    public List<Long> findCards(String search, boolean order, CollectionTask task) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjc5NDYx", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#pullrequestreview-442679461", "createdAt": "2020-07-05T13:58:15Z", "commit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjc5Nzg2", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#pullrequestreview-442679786", "createdAt": "2020-07-05T14:02:37Z", "commit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQxNDowMjozN1rOGtCjWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQxNDowMjozN1rOGtCjWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg4MDkyMw==", "bodyText": "This parameter seems unnecessary or is unused.", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#discussion_r449880923", "createdAt": "2020-07-05T14:02:37Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1131,7 +1131,7 @@ public String _flagNameFromCardFlags(int flags){\n         return new Finder(this).findCards(search, order);\n     }\n \n-    public List<Long> findCards(String search, boolean order) {\n+    public List<Long> findCards(String search, boolean order, CollectionTask task) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjc5ODc1", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#pullrequestreview-442679875", "createdAt": "2020-07-05T14:03:47Z", "commit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5064b35eadac86a3c05c1025c1a0249502571c5", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d5064b35eadac86a3c05c1025c1a0249502571c5", "committedDate": "2020-07-04T15:10:01Z", "message": "NF: card search: cancelling checked more often"}, "afterCommit": {"oid": "dc5a205cc7e1f59b45c6367fff791aaadf9348b7", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/dc5a205cc7e1f59b45c6367fff791aaadf9348b7", "committedDate": "2020-07-05T14:19:56Z", "message": "NF: card search: cancelling checked more often"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjg1Nzg5", "url": "https://github.com/ankidroid/Anki-Android/pull/6609#pullrequestreview-442685789", "createdAt": "2020-07-05T15:19:15Z", "commit": {"oid": "dc5a205cc7e1f59b45c6367fff791aaadf9348b7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c799fd5f3aaf16164a84fda8f82914d087f70987", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c799fd5f3aaf16164a84fda8f82914d087f70987", "committedDate": "2020-07-05T23:45:06Z", "message": "NF: card search: cancelling checked more often"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed7071f5e4da7a4dc053b4d8a88868bad7812d04", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ed7071f5e4da7a4dc053b4d8a88868bad7812d04", "committedDate": "2020-07-05T23:45:06Z", "message": "NF: avoid going from id to count model to id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42679b32473977e3b672e77177a975c1b58d889e", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/42679b32473977e3b672e77177a975c1b58d889e", "committedDate": "2020-07-05T23:45:06Z", "message": "NF: uses sql's count instead of list size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0822a402aeb277feb0e8822008ede9adb5ac773b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0822a402aeb277feb0e8822008ede9adb5ac773b", "committedDate": "2020-07-05T23:45:06Z", "message": "NF: doInBackgroundLoadModels cancellable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29b841643f2d1721fd1d843071773ed061206ead", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/29b841643f2d1721fd1d843071773ed061206ead", "committedDate": "2020-07-05T23:45:06Z", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc5a205cc7e1f59b45c6367fff791aaadf9348b7", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/dc5a205cc7e1f59b45c6367fff791aaadf9348b7", "committedDate": "2020-07-05T14:19:56Z", "message": "NF: card search: cancelling checked more often"}, "afterCommit": {"oid": "29b841643f2d1721fd1d843071773ed061206ead", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/29b841643f2d1721fd1d843071773ed061206ead", "committedDate": "2020-07-05T23:45:06Z", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3062, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}