{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MDI3ODE0", "number": 7976, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxMDoyNjoxMVrOFJfelQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxNjo0NjoxN1rOFJkjww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NDk3MjM3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxMDoyNjoxMVrOIL2WxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxMzozNTo1M1rOIL5rnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI5NTgxMg==", "bodyText": "Consider keeping this as a hardcoded string", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549295812", "createdAt": "2020-12-28T10:26:11Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.java", "diffHunk": "@@ -471,7 +472,7 @@ public void regression_test_pipe() {\n         mm.save(basic, true);\n         Note note = addNoteUsingBasicModel(\"foo\", \"bar\");\n         Card c = note.cards().get(0);\n-        assertThat(c.q(), containsString(\"unknown field\"));\n+        assertThat(c.q(), containsString(getTargetContext().getString(R.string.unknown_field, \"|Front\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61acf95b79573898c59b8ba4ab1d279a8259756f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI5ODgwOQ==", "bodyText": "I thought that, in travis and in @mikehardy's test system, there were localized test. If so, this would fail when the translation are added in crowdin", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549298809", "createdAt": "2020-12-28T10:36:07Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.java", "diffHunk": "@@ -471,7 +472,7 @@ public void regression_test_pipe() {\n         mm.save(basic, true);\n         Note note = addNoteUsingBasicModel(\"foo\", \"bar\");\n         Card c = note.cards().get(0);\n-        assertThat(c.q(), containsString(\"unknown field\"));\n+        assertThat(c.q(), containsString(getTargetContext().getString(R.string.unknown_field, \"|Front\")));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI5NTgxMg=="}, "originalCommit": {"oid": "61acf95b79573898c59b8ba4ab1d279a8259756f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTMxMjIxMg==", "bodyText": "@Config(qualifiers = \"en\") can be used to avoid issues.\nThe main question is the layer that we want to test. I feel having this as a slightly more brittle end-to-end test is worth the risk of breakages due to string changes.", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549312212", "createdAt": "2020-12-28T11:21:38Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.java", "diffHunk": "@@ -471,7 +472,7 @@ public void regression_test_pipe() {\n         mm.save(basic, true);\n         Note note = addNoteUsingBasicModel(\"foo\", \"bar\");\n         Card c = note.cards().get(0);\n-        assertThat(c.q(), containsString(\"unknown field\"));\n+        assertThat(c.q(), containsString(getTargetContext().getString(R.string.unknown_field, \"|Front\")));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI5NTgxMg=="}, "originalCommit": {"oid": "61acf95b79573898c59b8ba4ab1d279a8259756f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTM1MDMwMw==", "bodyText": "we already have a couple english hard codes on purpose for the unit tests to lock them to a specific language, keeping unit test language expectationt hard coded and adding a qualifier works for me", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549350303", "createdAt": "2020-12-28T13:35:53Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.java", "diffHunk": "@@ -471,7 +472,7 @@ public void regression_test_pipe() {\n         mm.save(basic, true);\n         Note note = addNoteUsingBasicModel(\"foo\", \"bar\");\n         Card c = note.cards().get(0);\n-        assertThat(c.q(), containsString(\"unknown field\"));\n+        assertThat(c.q(), containsString(getTargetContext().getString(R.string.unknown_field, \"|Front\")));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI5NTgxMg=="}, "originalCommit": {"oid": "61acf95b79573898c59b8ba4ab1d279a8259756f"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NTgwMzE5OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/res/values/01-core.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxNjo0NTozOVrOIL9dmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxNzoyMToyNVrOIL-Gpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjI0OA==", "bodyText": "Is {} code, or configuration? (If a user changes this character, will things break?)", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549412248", "createdAt": "2020-12-28T16:45:39Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/01-core.xml", "diffHunk": "@@ -193,4 +193,6 @@\n     <string name=\"card_browser_context_menu\" comment=\"The value which appears in the system context menu. Note the casing difference\">Card Browser</string>\n \n     <string name=\"context_menu_anki_card_label\">Anki Card</string>\n+    <string name=\"unknown_field\">{Unknown field %s}</string>\n+    <string name=\"invalid_template_short\">{{Invalid template}}</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxNTExNg==", "bodyText": "This is neither code nor configuration. Those curly brackes are hard coded, and if a field is missing, it is added to the question/answer\nI can keep them in code instead of translation file, we can also decide to remove them. I don't assume they have any specific meaning in English, and so there is no strong reason to translate them.", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549415116", "createdAt": "2020-12-28T16:55:23Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/res/values/01-core.xml", "diffHunk": "@@ -193,4 +193,6 @@\n     <string name=\"card_browser_context_menu\" comment=\"The value which appears in the system context menu. Note the casing difference\">Card Browser</string>\n \n     <string name=\"context_menu_anki_card_label\">Anki Card</string>\n+    <string name=\"unknown_field\">{Unknown field %s}</string>\n+    <string name=\"invalid_template_short\">{{Invalid template}}</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjI0OA=="}, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQyMjc1OA==", "bodyText": "If they won't cause a functional change if a translator changes them, lets leave it as it is.", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549422758", "createdAt": "2020-12-28T17:21:25Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/01-core.xml", "diffHunk": "@@ -193,4 +193,6 @@\n     <string name=\"card_browser_context_menu\" comment=\"The value which appears in the system context menu. Note the casing difference\">Card Browser</string>\n \n     <string name=\"context_menu_anki_card_label\">Anki Card</string>\n+    <string name=\"unknown_field\">{Unknown field %s}</string>\n+    <string name=\"invalid_template_short\">{{Invalid template}}</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjI0OA=="}, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NTgwNDgzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/template/Template.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxNjo0NjoxN1rOIL9eaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQwNDoyMjowN1rOIRxV_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjQ1Nw==", "bodyText": "Isn't this also translatable?", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549412457", "createdAt": "2020-12-28T16:46:17Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/template/Template.java", "diffHunk": "@@ -299,7 +299,7 @@ private String render_comment() {\n                     return \"Error in filter \" + mod;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxNTI1Ng==", "bodyText": "You're totally right. I missed it. I didn't do a thorough search and only corrected what I found", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r549415256", "createdAt": "2020-12-28T16:55:51Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/template/Template.java", "diffHunk": "@@ -299,7 +299,7 @@ private String render_comment() {\n                     return \"Error in filter \" + mod;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjQ1Nw=="}, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDUzNTIzMw==", "bodyText": "@Arthur-Milchior I think this is just waiting on your correction - no pressure though it's holidays everywhere obviously :-)", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r550535233", "createdAt": "2020-12-31T16:29:50Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/template/Template.java", "diffHunk": "@@ -299,7 +299,7 @@ private String render_comment() {\n                     return \"Error in filter \" + mod;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjQ1Nw=="}, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE2MzE0Nw==", "bodyText": "@Arthur-Milchior another ping on this one - I think we are missing one extra translation here then we may merge", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r555163147", "createdAt": "2021-01-11T16:09:59Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/template/Template.java", "diffHunk": "@@ -299,7 +299,7 @@ private String render_comment() {\n                     return \"Error in filter \" + mod;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjQ1Nw=="}, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTUwNTE1MA==", "bodyText": "Done", "url": "https://github.com/ankidroid/Anki-Android/pull/7976#discussion_r555505150", "createdAt": "2021-01-12T04:22:07Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/template/Template.java", "diffHunk": "@@ -299,7 +299,7 @@ private String render_comment() {\n                     return \"Error in filter \" + mod;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQxMjQ1Nw=="}, "originalCommit": {"oid": "8e8effc2968fb0dd7810a257c8cbd2c1031dde59"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 642, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}