{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNTMwNjc0", "number": 6227, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMTozNVrOD-J8MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoyMjoyNlrOD-UTMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NTAxMTY4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMTozNVrOGYFXFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMTozNVrOGYFXFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzkwNjgzOA==", "bodyText": "nit: UNBLOCKED would read better than NONE", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r427906838", "createdAt": "2020-05-20T10:31:35Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -2244,7 +2243,7 @@ private boolean typeAnswer() {\n \n \n     private void unblockControls() {\n-        mControlBlocked = false;\n+        mControlBlocked = ControlBlock.NONE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddd80f11f1482e45b4436b6d18551f3db61f6cad"}, "originalPosition": 89}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NTAxNTEwOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMjo0NFrOGYFZVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMjo0NFrOGYFZVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzkwNzQxMw==", "bodyText": "getControlBlocked() != ControlBlock.NONE is duplicated, could it be extracted into a method", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r427907413", "createdAt": "2020-05-20T10:32:44Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -786,7 +784,7 @@ public void onWindowFocusChanged(boolean hasFocus) {\n      * @return true if there is another card of same note that could be dismissed\n      */\n     private boolean suspendNoteAvailable() {\n-        if (mCurrentCard == null || getControlBlocked()) {\n+        if (mCurrentCard == null || getControlBlocked() != ControlBlock.NONE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddd80f11f1482e45b4436b6d18551f3db61f6cad"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NTAxNzA4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMzoyMlrOGYFalA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxMDozMzoyMlrOGYFalA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzkwNzczMg==", "bodyText": "Could a short comment be added explaining the intention", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r427907732", "createdAt": "2020-05-20T10:33:22Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "diffHunk": "@@ -73,16 +73,17 @@ public void setCustomButtons(Menu menu) {\n                 MenuItem item = menu.findItem(itemId);\n                 item.setShowAsAction(mCustomButtons.get(itemId));\n                 Drawable icon = item.getIcon();\n-                if (mReviewerUi.getControlBlocked()) {\n-                    item.setEnabled(false);\n-                    if (icon != null) {\n+                if (icon != null) {\n+                    if (mReviewerUi.getControlBlocked() == ReviewerUi.ControlBlock.SLOW) {\n                         icon.setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n+                    } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddd80f11f1482e45b4436b6d18551f3db61f6cad"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NjY5Mzk2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoxODoxM1rOGYV_NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoxODoxM1rOGYV_NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE3OTI1Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                We use an heuristic to decide whether the next card will appear quickly or slowly.\n          \n          \n            \n                                We use a heuristic to decide whether the next card will appear quickly or slowly.", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r428179253", "createdAt": "2020-05-20T17:18:13Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "diffHunk": "@@ -73,14 +73,23 @@ public void setCustomButtons(Menu menu) {\n                 MenuItem item = menu.findItem(itemId);\n                 item.setShowAsAction(mCustomButtons.get(itemId));\n                 Drawable icon = item.getIcon();\n-                if (mReviewerUi.getControlBlocked()) {\n+                if (mReviewerUi.isControlBlocked()) {\n                     item.setEnabled(false);\n-                    if (icon != null) {\n-                        icon.setAlpha(Themes.ALPHA_ICON_DISABLED_LIGHT);\n-                    }\n                 } else {\n                     item.setEnabled(true);\n-                    if (icon != null) {\n+                }\n+                if (icon != null) {\n+                    /* Ideially, we want to give feedback to users that buttons are disabled.\n+                    However, some actions are expected to be so quick that the visual feedback is useless\n+                    and is only seen as a flickering.\n+\n+                    We use an heuristic to decide whether the next card will appear quickly or slowly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e5ffaaf8d234199344663edc4940948fbeec23a"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NjY5NTExOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ReviewerUi.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoxODozNFrOGYV_7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoxODozNFrOGYV_7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE3OTQzOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    /** Buttons are functionals*/\n          \n          \n            \n                    /** Buttons are functional */", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r428179438", "createdAt": "2020-05-20T17:18:34Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ReviewerUi.java", "diffHunk": "@@ -17,5 +17,19 @@\n package com.ichi2.anki.reviewer;\n \n public interface ReviewerUi {\n-    boolean getControlBlocked();\n+    /** How to block UI buttons. */\n+    enum ControlBlock {\n+        /** Buttons are functionals*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e5ffaaf8d234199344663edc4940948fbeec23a"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NjcwNTUzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/test/java/com/ichi2/anki/ReviewerKeyboardInputTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoyMToyOFrOGYWGtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoyMToyOFrOGYWGtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4MTE3NA==", "bodyText": "I don't think this needs to exist as it's the same as the base class", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r428181174", "createdAt": "2020-05-20T17:21:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/ReviewerKeyboardInputTest.java", "diffHunk": "@@ -267,15 +268,20 @@ private void assertGamepadButtonAnswers(int keycodeButton, int ease) {\n         private Collection.DismissType mDismissType;\n         private boolean mUndoCalled;\n         private boolean mReplayAudioCalled;\n-        private boolean mControlsAreBlocked = false;\n+        private ControlBlock mControlsAreBlocked = ControlBlock.UNBLOCKED;\n         private boolean mUndoAvailable;\n \n \n         @Override\n-        public boolean getControlBlocked() {\n+        public ControlBlock getControlBlocked() {\n             return mControlsAreBlocked;\n         }\n \n+        @Override\n+        public boolean isControlBlocked() {\n+            return getControlBlocked() != ControlBlock.UNBLOCKED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e5ffaaf8d234199344663edc4940948fbeec23a"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NjcwODk2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ReviewerUi.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoyMjoyNlrOGYWI3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODozMTozMFrOGYYouw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4MTcyNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    /** Buttons are functionals*/\n          \n          \n            \n                    /** Buttons are non-functional */", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r428181726", "createdAt": "2020-05-20T17:22:26Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ReviewerUi.java", "diffHunk": "@@ -17,5 +17,19 @@\n package com.ichi2.anki.reviewer;\n \n public interface ReviewerUi {\n-    boolean getControlBlocked();\n+    /** How to block UI buttons. */\n+    enum ControlBlock {\n+        /** Buttons are functionals*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e5ffaaf8d234199344663edc4940948fbeec23a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIyMjY1MQ==", "bodyText": "Nope. If the buttons are unblocked, then they are functional.", "url": "https://github.com/ankidroid/Anki-Android/pull/6227#discussion_r428222651", "createdAt": "2020-05-20T18:31:30Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ReviewerUi.java", "diffHunk": "@@ -17,5 +17,19 @@\n package com.ichi2.anki.reviewer;\n \n public interface ReviewerUi {\n-    boolean getControlBlocked();\n+    /** How to block UI buttons. */\n+    enum ControlBlock {\n+        /** Buttons are functionals*/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4MTcyNg=="}, "originalCommit": {"oid": "0e5ffaaf8d234199344663edc4940948fbeec23a"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 260, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}