{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMDA1NjQz", "number": 7916, "title": "Expender", "bodyText": "Removing warning related to accessibility issues. In this case, removing a button which was hidden but actually still present. It could be detected previously because you can still click on the hidden button and see a small click visual effect even if nothing occurred.\nI tested on my collection and checked that the remaining buttons still worked and alignment was not changed.", "createdAt": "2020-12-20T02:14:59Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7916", "merged": true, "mergeCommit": {"oid": "2d5e02a9c449d6389378733888579bd23cc7f3e6"}, "closed": true, "closedAt": "2020-12-21T18:20:49Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdn3uKegBqjQxMzI5NDIxODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoZ9FOgBqjQxMzcwODkyOTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9f4f8ca7616761a1d018d666e96628d30b92c4b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/b9f4f8ca7616761a1d018d666e96628d30b92c4b", "committedDate": "2020-12-20T02:12:00Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}, "afterCommit": {"oid": "0c151c3be0a558045e81191c3499aa2a90799afe", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0c151c3be0a558045e81191c3499aa2a90799afe", "committedDate": "2020-12-20T02:15:23Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c151c3be0a558045e81191c3499aa2a90799afe", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0c151c3be0a558045e81191c3499aa2a90799afe", "committedDate": "2020-12-20T02:15:23Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}, "afterCommit": {"oid": "8135ef6f67d954decf0e1e57f5dcb643b6676aaf", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8135ef6f67d954decf0e1e57f5dcb643b6676aaf", "committedDate": "2020-12-20T02:29:02Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTgyMjE1", "url": "https://github.com/ankidroid/Anki-Android/pull/7916#pullrequestreview-555982215", "createdAt": "2020-12-20T03:00:03Z", "commit": {"oid": "8135ef6f67d954decf0e1e57f5dcb643b6676aaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8135ef6f67d954decf0e1e57f5dcb643b6676aaf", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8135ef6f67d954decf0e1e57f5dcb643b6676aaf", "committedDate": "2020-12-20T02:29:02Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}, "afterCommit": {"oid": "49b0311f766ab614f1c06226c2b654f432049872", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/49b0311f766ab614f1c06226c2b654f432049872", "committedDate": "2020-12-20T04:37:09Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49b0311f766ab614f1c06226c2b654f432049872", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/49b0311f766ab614f1c06226c2b654f432049872", "committedDate": "2020-12-20T04:37:09Z", "message": "remove deck expander instead of hiding it\n\nThis is NF when you use Anki's screen. However, it's not NF when you use helper, since the button where still\npresent. This means that this change remove an accessibility problem, shown by the scanner."}, "afterCommit": {"oid": "0f01db31014a66d28926b55b26a04fd337aa09c6", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0f01db31014a66d28926b55b26a04fd337aa09c6", "committedDate": "2020-12-20T06:32:25Z", "message": "Expander content description set to null when not used\n\nAccording to android doc, it seems it should be put to @null to indicate to screen reader it should not be considered.\nIt's not clear whether null should be a string or how to do it in general."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f01db31014a66d28926b55b26a04fd337aa09c6", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0f01db31014a66d28926b55b26a04fd337aa09c6", "committedDate": "2020-12-20T06:32:25Z", "message": "Expander content description set to null when not used\n\nAccording to android doc, it seems it should be put to @null to indicate to screen reader it should not be considered.\nIt's not clear whether null should be a string or how to do it in general."}, "afterCommit": {"oid": "50c765a5deaa41d48e2aed22ec807fd1b38bbc54", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/50c765a5deaa41d48e2aed22ec807fd1b38bbc54", "committedDate": "2020-12-20T06:53:03Z", "message": "Accessibility of expander indicated\n\nIdeally, I'd like just to delete the expender when it is not necessary. However, the same expender may be used for\ndifferent before and after collapse, so it must keep existing (or be added again, which is hard).\nInstead, indicating that it is not required for accessibility, but here only for UI is okay"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDI0Nzg5", "url": "https://github.com/ankidroid/Anki-Android/pull/7916#pullrequestreview-556024789", "createdAt": "2020-12-20T14:56:14Z", "commit": {"oid": "50c765a5deaa41d48e2aed22ec807fd1b38bbc54"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxNDo1NjoxNFrOIJE22g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxNDo1NjoxNFrOIJE22g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4NzY3NA==", "bodyText": "Optional: It'd be useful to add an integration test to confirm that if a child is added, the expander is visible.\nI believe this is fine currently, as the control is fully refreshed, but this behaviour is subject to change in the future.", "url": "https://github.com/ankidroid/Anki-Android/pull/7916#discussion_r546387674", "createdAt": "2020-12-20T14:56:14Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/widgets/DeckAdapter.java", "diffHunk": "@@ -217,7 +220,7 @@ public void onBindViewHolder(ViewHolder holder, int position) {\n             holder.deckExpander.setTag(node.getDid());\n             holder.deckExpander.setOnClickListener(mDeckExpanderClickListener);\n         } else {\n-            holder.deckExpander.setOnClickListener(null);\n+            holder.deckExpander.setClickable(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50c765a5deaa41d48e2aed22ec807fd1b38bbc54"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d43d20f20ac4e2f67b2407251d6210cafdfc8867", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d43d20f20ac4e2f67b2407251d6210cafdfc8867", "committedDate": "2020-12-21T17:33:26Z", "message": "Deactivate deck expander button instead of just nullifying its action"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50c765a5deaa41d48e2aed22ec807fd1b38bbc54", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/50c765a5deaa41d48e2aed22ec807fd1b38bbc54", "committedDate": "2020-12-20T06:53:03Z", "message": "Accessibility of expander indicated\n\nIdeally, I'd like just to delete the expender when it is not necessary. However, the same expender may be used for\ndifferent before and after collapse, so it must keep existing (or be added again, which is hard).\nInstead, indicating that it is not required for accessibility, but here only for UI is okay"}, "afterCommit": {"oid": "261cab2609a3bbe1abcade7d19c5ac16eb31ed07", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/261cab2609a3bbe1abcade7d19c5ac16eb31ed07", "committedDate": "2020-12-21T17:33:56Z", "message": "Accessibility of expander indicated\n\nIdeally, I'd like just to delete the expender when it is not necessary. However, the same expender may be used for\ndifferent before and after collapse, so it must keep existing (or be added again, which is hard).\nInstead, indicating that it is not required for accessibility, but here only for UI is okay"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NTUwOTk5", "url": "https://github.com/ankidroid/Anki-Android/pull/7916#pullrequestreview-556550999", "createdAt": "2020-12-21T17:37:37Z", "commit": {"oid": "261cab2609a3bbe1abcade7d19c5ac16eb31ed07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNzozNzozOFrOIJgY7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNzozNzozOFrOIJgY7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjgzODc2NQ==", "bodyText": "the YES constant here is unused it appears?", "url": "https://github.com/ankidroid/Anki-Android/pull/7916#discussion_r546838765", "createdAt": "2020-12-21T17:37:38Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/widgets/DeckAdapter.java", "diffHunk": "@@ -51,6 +51,9 @@\n import java.util.List;\n import java.util.Locale;\n \n+import static android.view.View.IMPORTANT_FOR_ACCESSIBILITY_NO;\n+import static android.view.View.IMPORTANT_FOR_ACCESSIBILITY_YES;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261cab2609a3bbe1abcade7d19c5ac16eb31ed07"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30be3e93207509ef22e2683a166c3828280239cd", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/30be3e93207509ef22e2683a166c3828280239cd", "committedDate": "2020-12-21T18:08:24Z", "message": "Accessibility of expander indicated\n\nIdeally, I'd like just to delete the expender when it is not necessary. However, the same expender may be used for\ndifferent before and after collapse, so it must keep existing (or be added again, which is hard).\nInstead, indicating that it is not required for accessibility, but here only for UI is okay"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "261cab2609a3bbe1abcade7d19c5ac16eb31ed07", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/261cab2609a3bbe1abcade7d19c5ac16eb31ed07", "committedDate": "2020-12-21T17:33:56Z", "message": "Accessibility of expander indicated\n\nIdeally, I'd like just to delete the expender when it is not necessary. However, the same expender may be used for\ndifferent before and after collapse, so it must keep existing (or be added again, which is hard).\nInstead, indicating that it is not required for accessibility, but here only for UI is okay"}, "afterCommit": {"oid": "30be3e93207509ef22e2683a166c3828280239cd", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/30be3e93207509ef22e2683a166c3828280239cd", "committedDate": "2020-12-21T18:08:24Z", "message": "Accessibility of expander indicated\n\nIdeally, I'd like just to delete the expender when it is not necessary. However, the same expender may be used for\ndifferent before and after collapse, so it must keep existing (or be added again, which is hard).\nInstead, indicating that it is not required for accessibility, but here only for UI is okay"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3725, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}