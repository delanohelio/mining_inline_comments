{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NjA1OTEz", "number": 6529, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowMDo1MFrOEICNFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowMDo1MFrOEICNFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2ODYwMTgyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowMDo1MFrOGnwGeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjoyMzozNVrOGnxA1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMzNTczNw==", "bodyText": "I really dislike that when I originally did progress reporting on database check in #5177 I hard coded the check count, because it leads to errors like this where we fail to maintain a magic constant that you can only derive by counting the verifications we perform.\nCan you revert the 27 -> 25 number?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int totalTasks = (getModels().all().size() * 4) + 25; // a few fixes are in all-models loops, the rest are one-offs\n          \n          \n            \n                    int totalTasks = (getModels().all().size() * 4) + 27; // a few fixes are in all-models loops, the rest are one-offs", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#discussion_r444335737", "createdAt": "2020-06-23T16:00:50Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1504,7 +1504,7 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         File file = new File(mPath);\n         CheckDatabaseResult result = new CheckDatabaseResult(file.length());\n         final int[] currentTask = {1};\n-        int totalTasks = (mModels.all().size() * 4) + 27; // a few fixes are in all-models loops, the rest are one-offs\n+        int totalTasks = (getModels().all().size() * 4) + 25; // a few fixes are in all-models loops, the rest are one-offs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM1MDA5MA==", "bodyText": "I can. I actually have no idea how I ever made this change. I've no idea what this is supposed to be", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#discussion_r444350090", "createdAt": "2020-06-23T16:22:38Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1504,7 +1504,7 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         File file = new File(mPath);\n         CheckDatabaseResult result = new CheckDatabaseResult(file.length());\n         final int[] currentTask = {1};\n-        int totalTasks = (mModels.all().size() * 4) + 27; // a few fixes are in all-models loops, the rest are one-offs\n+        int totalTasks = (getModels().all().size() * 4) + 25; // a few fixes are in all-models loops, the rest are one-offs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMzNTczNw=="}, "originalCommit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM1MDY3OQ==", "bodyText": "Done", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#discussion_r444350679", "createdAt": "2020-06-23T16:23:35Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1504,7 +1504,7 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         File file = new File(mPath);\n         CheckDatabaseResult result = new CheckDatabaseResult(file.length());\n         final int[] currentTask = {1};\n-        int totalTasks = (mModels.all().size() * 4) + 27; // a few fixes are in all-models loops, the rest are one-offs\n+        int totalTasks = (getModels().all().size() * 4) + 25; // a few fixes are in all-models loops, the rest are one-offs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMzNTczNw=="}, "originalCommit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f"}, "originalPosition": 101}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 8, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}