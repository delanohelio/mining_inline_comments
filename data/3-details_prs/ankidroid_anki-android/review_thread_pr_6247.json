{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxODIxOTI0", "number": 6247, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoyODoxNlrOD-5z_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoyOTo1MlrOD-51kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Mjg1NTAyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/LaTeX.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoyODoxNlrOGZSXXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo1Mjo0M1rOGZgzUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2ODQ3Nw==", "bodyText": "Maybe: \n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/libanki/Media.java\n    \n    \n        Lines 531 to 533\n      in\n      4740941\n    \n    \n    \n    \n\n        \n          \n           public boolean have(String fname) { \n        \n\n        \n          \n               return new File(dir(), fname).exists(); \n        \n\n        \n          \n           }", "url": "https://github.com/ankidroid/Anki-Android/pull/6247#discussion_r429168477", "createdAt": "2020-05-22T10:28:16Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/LaTeX.java", "diffHunk": "@@ -96,7 +97,11 @@ private static String _imgLink(String latex, JSONObject model) {\n         }\n \n         String fname = \"latex-\" + Utils.checksum(txt) + \".\" + ext;\n-        return \"<img class=latex src=\\\"\" + fname + \"\\\">\";\n+        if (new File(col.getMedia().dir(), fname).exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d68a685fd058afc98591d94caf91c49ae3af26b1"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwNTAxMA==", "bodyText": "Ooups. I should have looked for this before reimplementing it. Sorry", "url": "https://github.com/ankidroid/Anki-Android/pull/6247#discussion_r429405010", "createdAt": "2020-05-22T18:52:43Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/LaTeX.java", "diffHunk": "@@ -96,7 +97,11 @@ private static String _imgLink(String latex, JSONObject model) {\n         }\n \n         String fname = \"latex-\" + Utils.checksum(txt) + \".\" + ext;\n-        return \"<img class=latex src=\\\"\" + fname + \"\\\">\";\n+        if (new File(col.getMedia().dir(), fname).exists()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2ODQ3Nw=="}, "originalCommit": {"oid": "d68a685fd058afc98591d94caf91c49ae3af26b1"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Mjg1OTA2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/LaTeX.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMDoyOTo1MlrOGZSaHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo1NDoyMVrOGZg1wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2OTE4Mg==", "bodyText": "Nit: Could you pass in Media here to reduce the API surface area", "url": "https://github.com/ankidroid/Anki-Android/pull/6247#discussion_r429169182", "createdAt": "2020-05-22T10:29:52Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/LaTeX.java", "diffHunk": "@@ -87,7 +88,7 @@ public static String mungeQA(String html, Collection col, JSONObject model) {\n     /**\n      * Return an img link for LATEX.\n      */\n-    private static String _imgLink(String latex, JSONObject model) {\n+    private static String _imgLink(String latex, JSONObject model, Collection col) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d68a685fd058afc98591d94caf91c49ae3af26b1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwNTYzMg==", "bodyText": "okay", "url": "https://github.com/ankidroid/Anki-Android/pull/6247#discussion_r429405632", "createdAt": "2020-05-22T18:54:21Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/LaTeX.java", "diffHunk": "@@ -87,7 +88,7 @@ public static String mungeQA(String html, Collection col, JSONObject model) {\n     /**\n      * Return an img link for LATEX.\n      */\n-    private static String _imgLink(String latex, JSONObject model) {\n+    private static String _imgLink(String latex, JSONObject model, Collection col) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE2OTE4Mg=="}, "originalCommit": {"oid": "d68a685fd058afc98591d94caf91c49ae3af26b1"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 272, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}