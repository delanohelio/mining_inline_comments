{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NDUyMjgy", "number": 6307, "title": "Make available current card's and deck's details in WebView", "bodyText": "Pull Request template\nPurpose / Description\nThis PR make available the following details about cards\nNew Card Count\nLearn Card Count\nReview Card Count\nETA\nMark\nFlag\n\nAlso following functions available to make any design of button using css and calling using JS\nshowAnswer()\nbuttonAnswerEase1()\nbuttonAnswerEase2()\nbuttonAnswerEase3()\nbuttonAnswerEase4()\nankiMarkCard()\nankiToggleFlag()\n\nUsage of ankiToggleFlag()\nankiToggleFlag('none')\nankiToggleFlag('red')\nankiToggleFlag('orange')\nankiToggleFlag('green')\nankiToggleFlag('blue')\n\nUsing numeric values\nankiToggleFlag(0)   // none\nankiToggleFlag(1)   // red\nankiToggleFlag(2)   // orange\nankiToggleFlag(3)   // green\nankiToggleFlag(4)   // blue\n\nUsing above and css & js, following type of card can be designed\nhttps://github.com/infinyte7/Anki-Custom-Card-Layout\nFixes\nFixes #6306\nApproach\nHow does this change address the problem?\nUsing JavascriptInterface.\nHow Has This Been Tested?\nSample Deck can be used for testing (Contents in deck may be changed to get it work)\n\nTurn on Gestures in AnkiDroid or use immersive mode\nMap all Swipe getures to No Action\nTurn on Full Screen\nAdd following to card\n\nTo make available following details to AnkiDroid WebView, add it to Front / Back side of Card in <script> tag.\n <script>\n        console.log(AnkiDroidJS.ankiGetNewCardCount());\n        console.log(AnkiDroidJS.ankiGetLrnCardCount());\n        console.log(AnkiDroidJS.ankiGetRevCardCount());\n        console.log(AnkiDroidJS.ankiGetCardMark());\n        console.log(AnkiDroidJS.ankiGetCardFlag());\n        console.log(AnkiDroidJS.ankiGetETA());\n </script>\n\n\nNow use those values to redesign the card templates.\n\nDemo\n\nLearning (optional, can help others)\nhttps://developer.android.com/reference/android/webkit/JavascriptInterface\nhttps://stackoverflow.com/questions/21173888/how-to-pass-non-primitive-object-from-java-to-js-by-android-addjavascriptinterfa\nhttps://stackoverflow.com/questions/175739/built-in-way-in-javascript-to-check-if-a-string-is-a-valid-number\nhttps://grid.layoutit.com/\nhttps://codepen.io/\nhttps://www.w3schools.com/\nChecklist\nPlease, go through these checks before submitting the PR.\n\n[ x ] You have not changed whitespace unnecessarily (it makes diffs hard to read)\n[ x ] You have a descriptive commit message with a short title (first line, max 50 chars).\n[ x ] Your code follows the style of the project (e.g. never omit braces in if statements)\n[ x ] You have commented your code, particularly in hard-to-understand areas\n[ x ] You have performed a self-review of your own code", "createdAt": "2020-05-30T11:20:42Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6307", "merged": true, "mergeCommit": {"oid": "7e9812a055fa793dc353e3312b2490d3fda92604"}, "closed": true, "closedAt": "2020-06-01T21:46:54Z", "author": {"login": "infinyte7"}, "timelineItems": {"totalCount": 65, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNhzaJgH2gAyNDI1NDUyMjgyOjNhNGEzMDFkYTNkY2E0ZjZhNDRlZGVmMjE5Mzk4OGJlZDE1MzE2YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnFeGiAFqTQyMjEyMTQ4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a4a301da3dca4f6a44edef2193988bed15316ad", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3a4a301da3dca4f6a44edef2193988bed15316ad", "committedDate": "2020-03-14T09:50:07Z", "message": "Add files via upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e57c4ceca25bb1fec92ca743eaa98700966108f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3e57c4ceca25bb1fec92ca743eaa98700966108f", "committedDate": "2020-03-15T09:39:50Z", "message": "Update card.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7e91bc09a085ffc129535442af8456f97f6dc80", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e7e91bc09a085ffc129535442af8456f97f6dc80", "committedDate": "2020-03-15T09:41:29Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "366610142dc2b93fd4a54958878b9205a9d59f52", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/366610142dc2b93fd4a54958878b9205a9d59f52", "committedDate": "2020-03-15T15:52:38Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c5ec74a43504d5357e66dfec9b329a64c88c04f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7c5ec74a43504d5357e66dfec9b329a64c88c04f", "committedDate": "2020-03-15T15:55:06Z", "message": "Update card.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8041a93bb3249736811d14659250d93a9c76ca4", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f8041a93bb3249736811d14659250d93a9c76ca4", "committedDate": "2020-03-15T18:25:09Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f9331b5e8d518d7cbad7ac48cb0443c9384559", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f0f9331b5e8d518d7cbad7ac48cb0443c9384559", "committedDate": "2020-03-15T18:36:30Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f4df32f4fe9551691ebe4117059d301c55fd9b4", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2f4df32f4fe9551691ebe4117059d301c55fd9b4", "committedDate": "2020-03-15T18:36:57Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bd146c9a8a58c5b01b73bae5400734b4e940f5b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7bd146c9a8a58c5b01b73bae5400734b4e940f5b", "committedDate": "2020-03-17T12:05:33Z", "message": "Merge pull request #1 from ankidroid/master\n\nUpdate Ankidroid forked repo - DONE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38ccf485e82e8413146a979176eed3819481439d", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/38ccf485e82e8413146a979176eed3819481439d", "committedDate": "2020-04-01T06:36:27Z", "message": "Added localhost domain-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b6bcf3dc2e58fa384cc9a55c701c7f942e115ca", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2b6bcf3dc2e58fa384cc9a55c701c7f942e115ca", "committedDate": "2020-05-07T11:39:18Z", "message": "Merge pull request #2 from ankidroid/master\n\nUpdating Fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "465b0a20c6a12b8cae48c4825dcad000aba38688", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/465b0a20c6a12b8cae48c4825dcad000aba38688", "committedDate": "2020-05-07T18:41:31Z", "message": "Anki"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30863ff6ccd14c27375a786629d48a0175b991b6", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/30863ff6ccd14c27375a786629d48a0175b991b6", "committedDate": "2020-05-07T18:41:47Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7df6d450273f46b457b846f3a7daf7a19f61b52c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7df6d450273f46b457b846f3a7daf7a19f61b52c", "committedDate": "2020-05-07T18:45:03Z", "message": "Merge pull request #3 from ankidroid/master\n\nRevert \"don't put \"undo\" to color enabled\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3045d9c618e2f3dc0cfe4f322b9b64d6de3498c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e3045d9c618e2f3dc0cfe4f322b9b64d6de3498c", "committedDate": "2020-05-07T18:57:46Z", "message": "Update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "955285abd863193bf0c70ab1436ba7d9ec70c770", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/955285abd863193bf0c70ab1436ba7d9ec70c770", "committedDate": "2020-05-07T19:00:37Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9ef4310bd195d21efbc9be8dd419cc4122a682a", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a9ef4310bd195d21efbc9be8dd419cc4122a682a", "committedDate": "2020-05-07T19:01:55Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91574092619fc3adc061e147930a4d565638d8ec", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/91574092619fc3adc061e147930a4d565638d8ec", "committedDate": "2020-05-07T19:03:35Z", "message": "Update preferences_appearance.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46d7fc5616561e625e72ee3164edfd27a7c19669", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/46d7fc5616561e625e72ee3164edfd27a7c19669", "committedDate": "2020-05-07T19:36:11Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae832792d6acce358da70329161103ba215cc98f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ae832792d6acce358da70329161103ba215cc98f", "committedDate": "2020-05-08T05:52:44Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25aac571d064bb849f01cfd59e895c2d8b13ce2c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/25aac571d064bb849f01cfd59e895c2d8b13ce2c", "committedDate": "2020-05-08T06:02:46Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "333008cf0e4b7eaa73c02d013f12e24e096e835e", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/333008cf0e4b7eaa73c02d013f12e24e096e835e", "committedDate": "2020-05-08T12:35:00Z", "message": "Background Image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5871b34b2f930a78e7146bdd4915eb5d2231e037", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/5871b34b2f930a78e7146bdd4915eb5d2231e037", "committedDate": "2020-05-08T12:38:11Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47a1c6f60e968142e6365f8438da3b7855d0234c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/47a1c6f60e968142e6365f8438da3b7855d0234c", "committedDate": "2020-05-08T12:44:09Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "829d14f4ae422a1a45a04980735caf75147a153a", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/829d14f4ae422a1a45a04980735caf75147a153a", "committedDate": "2020-05-08T12:48:30Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e7d40de9633ad992bdc271f68857515ec934d2b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/5e7d40de9633ad992bdc271f68857515ec934d2b", "committedDate": "2020-05-08T13:00:59Z", "message": "Update 03-dialogs.xml\n\nPrefrences.java\n03-dialogs.xml\nUpdated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5a04d4e6144e98ebbae8fa816752aa0f0231ac4", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f5a04d4e6144e98ebbae8fa816752aa0f0231ac4", "committedDate": "2020-05-08T13:07:57Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60a4ff0790aff50a34b21fb2ea498854e55574c3", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60a4ff0790aff50a34b21fb2ea498854e55574c3", "committedDate": "2020-05-08T13:58:32Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1d46028367f813c99febe0d3c13b4e87dad030b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f1d46028367f813c99febe0d3c13b4e87dad030b", "committedDate": "2020-05-09T14:54:08Z", "message": "Update DeckPicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e60944353d6b9fc10ea86360db4ca4c9dbc6b7f7", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e60944353d6b9fc10ea86360db4ca4c9dbc6b7f7", "committedDate": "2020-05-09T22:05:49Z", "message": "deckpicker background image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dc19a5c833b782c107e408aa239b13ab71d995a", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3dc19a5c833b782c107e408aa239b13ab71d995a", "committedDate": "2020-05-09T22:52:51Z", "message": "update Deckpicker.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2ceb64bcc0ab6a6dbc4c2002976e7320845a2ae", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e2ceb64bcc0ab6a6dbc4c2002976e7320845a2ae", "committedDate": "2020-05-09T23:11:58Z", "message": "update 03-dialogs.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cabb8a314b16f550369db9e7cd203911655334ef", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/cabb8a314b16f550369db9e7cd203911655334ef", "committedDate": "2020-05-15T20:06:58Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32c28a1a8112c2706eee554efdfcefbe2e0aa283", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/32c28a1a8112c2706eee554efdfcefbe2e0aa283", "committedDate": "2020-05-15T20:31:05Z", "message": "Update Fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0841b85d6ea0e3b5506c9e3f50f7c23d480a347", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/b0841b85d6ea0e3b5506c9e3f50f7c23d480a347", "committedDate": "2020-05-15T20:35:12Z", "message": "Merge pull request #6 from ankidroid/master\n\nFork Update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d93e935edcad218651be9576fad70b30f11652e", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1d93e935edcad218651be9576fad70b30f11652e", "committedDate": "2020-05-15T20:37:41Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81bc40bf310ca4da971f25b2b017f0d7b8564bf8", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/81bc40bf310ca4da971f25b2b017f0d7b8564bf8", "committedDate": "2020-05-15T20:38:08Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05bec673418481cd410d69c862de0b18222e8525", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/05bec673418481cd410d69c862de0b18222e8525", "committedDate": "2020-05-15T23:13:32Z", "message": "Update Preferences.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a92f1b79babe2513417d1e02372d883ca2e1c2f2", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a92f1b79babe2513417d1e02372d883ca2e1c2f2", "committedDate": "2020-05-16T04:08:11Z", "message": "Update 03-dialogs.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ec5c80b5b361260a3516de3cf82b61b3bea166f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9ec5c80b5b361260a3516de3cf82b61b3bea166f", "committedDate": "2020-05-16T04:13:37Z", "message": "Update 03-dialogs.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9d0b1d608e184048ac7baae6423accf2cbec87f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e9d0b1d608e184048ac7baae6423accf2cbec87f", "committedDate": "2020-05-17T03:05:56Z", "message": "update preferences.java, 03-dialog.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61e60bd1c64c1c334975e52ba41264a6accb1b8d", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/61e60bd1c64c1c334975e52ba41264a6accb1b8d", "committedDate": "2020-05-29T06:31:05Z", "message": "Merge pull request #8 from ankidroid/master\n\nFork Update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c738f567df10e6ea5593e28071f45ebfe284415f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c738f567df10e6ea5593e28071f45ebfe284415f", "committedDate": "2020-05-30T10:10:27Z", "message": "Added functions to card.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08ccbae7611b430389f469086ed23a8cd3d22109", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/08ccbae7611b430389f469086ed23a8cd3d22109", "committedDate": "2020-05-30T11:31:38Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDI2OTcy", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421426972", "createdAt": "2020-05-30T16:45:40Z", "commit": {"oid": "08ccbae7611b430389f469086ed23a8cd3d22109"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c8b2480426eb12b640a65e30722191f8636d908", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1c8b2480426eb12b640a65e30722191f8636d908", "committedDate": "2020-05-30T18:56:33Z", "message": "Update card.js & AbstractFlashcardViewer.java\n\nAdded functions to card.js to get cards details in WebView using JS functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/49e6567434e211ba45c1b0db1be5116be995684b", "committedDate": "2020-05-30T18:56:40Z", "message": "Merge branch 'master' of https://github.com/infinyte7/Anki-Android"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDM5MTQy", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421439142", "createdAt": "2020-05-30T19:59:13Z", "commit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDQxODI3", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421441827", "createdAt": "2020-05-30T20:33:30Z", "commit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDQ0MDMx", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421444031", "createdAt": "2020-05-30T21:09:01Z", "commit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQyMTowOTowMVrOGc1XKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQyMToxOToxMlrOGc1ZvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4NzU5Mw==", "bodyText": "Can these be changed to JavascriptInterface methods: https://developer.android.com/reference/android/webkit/JavascriptInterface\nWe're currently open to accidental XSS which will break cards JS", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432887593", "createdAt": "2020-05-30T21:09:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3135,6 +3181,13 @@ public void onPageFinished(WebView view, String url) {\n             drawFlag();\n             drawMark();\n             view.loadUrl(\"javascript:onPageFinished();\");\n+\n+            // cards count, deckname, estimated time, mark, flag to be accessible in AnkiDroid WebView\n+            view.loadUrl(\"javascript:ankiGetCardCount(\" + newCount.toString() +  \",\" + lrnCount.toString() + \",\" + revCount.toString()  + \")\" );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4NzYzOQ==", "bodyText": "This needed to happen for a long time.", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432887639", "createdAt": "2020-05-30T21:09:31Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -176,6 +176,22 @@\n \n     protected static final int MENU_DISABLED = 3;\n \n+    // Deckname\n+    private String title;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4NzY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n                // TODO: Consider extracting to ViewModel", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432887672", "createdAt": "2020-05-30T21:10:00Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -176,6 +176,22 @@\n \n     protected static final int MENU_DISABLED = 3;\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4Nzc1OA==", "bodyText": "ankiOnCardFlag", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432887758", "createdAt": "2020-05-30T21:10:54Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,62 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Get new card, learn card, review card counts in ankidroid webview. It will be accessible via javascript\n+function ankiGetCardCount(ankiNewCount, ankiLrnCount, ankiRevCount) {\n+    window.ankiNewCount = ankiNewCount;\n+    window.ankiLrnCount = ankiLrnCount;\n+    window.ankiRevCount = ankiRevCount;\n+}\n+\n+// Get Current Deck Name\n+function ankiGetDeckName(ankiDeckName) {\n+   window.ankiDeckName = ankiDeckName;\n+}\n+\n+// Get estimated time\n+function ankiGetETA(ankiETA) {\n+   window.ankiETA = ankiETA;\n+}\n+\n+// Card Mark\n+function ankiGetCardMark(ankiMark) {\n+   window.ankiMark = ankiMark;\n+}\n+\n+/**\n+* card flagged or not\n+* (none = 0, red = 1, orange = 2, green = 3 blue = 4)\n+**/\n+function ankiGetCardFlag(ankiFlagStatus) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4Nzc2Mw==", "bodyText": "ankiOnCardMark", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432887763", "createdAt": "2020-05-30T21:11:02Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,62 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Get new card, learn card, review card counts in ankidroid webview. It will be accessible via javascript\n+function ankiGetCardCount(ankiNewCount, ankiLrnCount, ankiRevCount) {\n+    window.ankiNewCount = ankiNewCount;\n+    window.ankiLrnCount = ankiLrnCount;\n+    window.ankiRevCount = ankiRevCount;\n+}\n+\n+// Get Current Deck Name\n+function ankiGetDeckName(ankiDeckName) {\n+   window.ankiDeckName = ankiDeckName;\n+}\n+\n+// Get estimated time\n+function ankiGetETA(ankiETA) {\n+   window.ankiETA = ankiETA;\n+}\n+\n+// Card Mark\n+function ankiGetCardMark(ankiMark) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4Nzc5NQ==", "bodyText": "Move to a field substitution if possible", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432887795", "createdAt": "2020-05-30T21:11:35Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,62 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Get new card, learn card, review card counts in ankidroid webview. It will be accessible via javascript\n+function ankiGetCardCount(ankiNewCount, ankiLrnCount, ankiRevCount) {\n+    window.ankiNewCount = ankiNewCount;\n+    window.ankiLrnCount = ankiLrnCount;\n+    window.ankiRevCount = ankiRevCount;\n+}\n+\n+// Get Current Deck Name\n+function ankiGetDeckName(ankiDeckName) {\n+   window.ankiDeckName = ankiDeckName;\n+}\n+\n+// Get estimated time\n+function ankiGetETA(ankiETA) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4ODEwOA==", "bodyText": "This has semantic differences between SchedV1 and SchedV2. We also want to include relearn count.\nThis would be better as an object so we can add more properties without breaking the API contract.\nThere's a few Anki addons that do thing similar to this already (and probably the same thing), we should follow their naming scheme.", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432888108", "createdAt": "2020-05-30T21:16:57Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,62 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Get new card, learn card, review card counts in ankidroid webview. It will be accessible via javascript\n+function ankiGetCardCount(ankiNewCount, ankiLrnCount, ankiRevCount) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4ODE2OA==", "bodyText": "Should be in {{Deck}}", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432888168", "createdAt": "2020-05-30T21:17:45Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,62 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Get new card, learn card, review card counts in ankidroid webview. It will be accessible via javascript\n+function ankiGetCardCount(ankiNewCount, ankiLrnCount, ankiRevCount) {\n+    window.ankiNewCount = ankiNewCount;\n+    window.ankiLrnCount = ankiLrnCount;\n+    window.ankiRevCount = ankiRevCount;\n+}\n+\n+// Get Current Deck Name\n+function ankiGetDeckName(ankiDeckName) {\n+   window.ankiDeckName = ankiDeckName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4ODIyNg==", "bodyText": "Merge all the flag signals into one, similar to signal:typeblurtext:xxx", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432888226", "createdAt": "2020-05-30T21:18:40Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,62 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Get new card, learn card, review card counts in ankidroid webview. It will be accessible via javascript\n+function ankiGetCardCount(ankiNewCount, ankiLrnCount, ankiRevCount) {\n+    window.ankiNewCount = ankiNewCount;\n+    window.ankiLrnCount = ankiLrnCount;\n+    window.ankiRevCount = ankiRevCount;\n+}\n+\n+// Get Current Deck Name\n+function ankiGetDeckName(ankiDeckName) {\n+   window.ankiDeckName = ankiDeckName;\n+}\n+\n+// Get estimated time\n+function ankiGetETA(ankiETA) {\n+   window.ankiETA = ankiETA;\n+}\n+\n+// Card Mark\n+function ankiGetCardMark(ankiMark) {\n+   window.ankiMark = ankiMark;\n+}\n+\n+/**\n+* card flagged or not\n+* (none = 0, red = 1, orange = 2, green = 3 blue = 4)\n+**/\n+function ankiGetCardFlag(ankiFlagStatus) {\n+    window.ankiFlagStatus = ankiFlagStatus;\n+}\n+\n+// Flag the card from AnkiDroid Webview using JavaScript\n+function ankiToggleFlagRed() {\n+    window.location.href = \"signal:card_toggle_flag_red\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4ODI1Mg==", "bodyText": "use executeCommand here, as this provides protection for when the card is null/controls are disabled", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432888252", "createdAt": "2020-05-30T21:19:12Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3022,6 +3040,34 @@ private boolean filterUrl(String url) {\n                 redrawCard();\n                 return true;\n             }\n+            // mark card using javascript\n+            if (url.startsWith(\"signal:mark_current_card\")) {\n+                onMark(mCurrentCard);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e6567434e211ba45c1b0db1be5116be995684b"}, "originalPosition": 72}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeb4702b226fe615f3647e95412fb9282eae4b06", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/eeb4702b226fe615f3647e95412fb9282eae4b06", "committedDate": "2020-05-31T05:46:57Z", "message": "Update card.js & AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDc2Mjgx", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421476281", "createdAt": "2020-05-31T09:19:19Z", "commit": {"oid": "eeb4702b226fe615f3647e95412fb9282eae4b06"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOToxOToxOVrOGc3w6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOToyMToxNlrOGc3xcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyNjk1Mg==", "bodyText": "Add a signal: prefix to maintain consistency", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432926952", "createdAt": "2020-05-31T09:19:19Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,16 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Toggle flag on card from AnkiDroid Webview using JavaScript\n+function ankiToggleFlag(flag) {\n+    window.location.href = \"flag:\" + flag;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eeb4702b226fe615f3647e95412fb9282eae4b06"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyNzA5MQ==", "bodyText": "This needs to document what the flag command accepts. I would have assumed that it accepts 0..4\nIt would be better to accept both the numeric constants, and the string values.", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432927091", "createdAt": "2020-05-31T09:21:16Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,16 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+// Toggle flag on card from AnkiDroid Webview using JavaScript\n+function ankiToggleFlag(flag) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eeb4702b226fe615f3647e95412fb9282eae4b06"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad189eebcc38a6250b64cf3604397918c41b2083", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/ad189eebcc38a6250b64cf3604397918c41b2083", "committedDate": "2020-05-31T10:23:56Z", "message": "Update card.js"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDgxMjU0", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421481254", "createdAt": "2020-05-31T10:32:17Z", "commit": {"oid": "ad189eebcc38a6250b64cf3604397918c41b2083"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxMDozMjoxN1rOGc4GtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxMDozMjoxN1rOGc4GtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkzMjUzMg==", "bodyText": "Could you log: Timber.d that this was ignored", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432932532", "createdAt": "2020-05-31T10:32:17Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -3022,6 +3034,30 @@ private boolean filterUrl(String url) {\n                 redrawCard();\n                 return true;\n             }\n+            // mark card using javascript\n+            if (url.startsWith(\"signal:mark_current_card\")) {\n+                executeCommand(COMMAND_MARK);\n+                return true;\n+            }\n+            // flag card (blue, green, orange, red) using javascript from AnkiDroid webview\n+            if (url.startsWith(\"signal:\")) {\n+                String mFlag = url.replaceFirst(\"signal:\",\"\");\n+                switch (mFlag) {\n+                    case \"none\": executeCommand(COMMAND_UNSET_FLAG);\n+                        return true;\n+                    case \"red\": executeCommand(COMMAND_TOGGLE_FLAG_RED);\n+                        return true;\n+                    case \"orange\": executeCommand(COMMAND_TOGGLE_FLAG_ORANGE);\n+                        return true;\n+                    case \"green\": executeCommand(COMMAND_TOGGLE_FLAG_GREEN);\n+                        return true;\n+                    case \"blue\": executeCommand(COMMAND_TOGGLE_FLAG_BLUE);\n+                        return true;\n+                    default:\n+                        return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad189eebcc38a6250b64cf3604397918c41b2083"}, "originalPosition": 83}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8d79d20475434a14c97bd200666a51ed977713c", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/b8d79d20475434a14c97bd200666a51ed977713c", "committedDate": "2020-05-31T10:39:11Z", "message": "Update AbstractFlashcardViewer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "089a20e91679fe3e7e08ec4dff634bd58079018f", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/089a20e91679fe3e7e08ec4dff634bd58079018f", "committedDate": "2020-05-31T11:33:15Z", "message": "Update card.js"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDg2NTAy", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421486502", "createdAt": "2020-05-31T11:45:28Z", "commit": {"oid": "089a20e91679fe3e7e08ec4dff634bd58079018f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxMTo0NToyOVrOGc4eQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxMTo0NToyOVrOGc4eQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkzODU2Mw==", "bodyText": "I'm not in my comfort zone, but I don't feel this is correct (ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN - Confusing special-case behavior), as it's checking for the IEEE-754 NaN, rather than performing a type coercion.\nNumber.isInteger() seems like a better option, but I'll defer to @mikehardy 's javascript knowledge", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r432938563", "createdAt": "2020-05-31T11:45:29Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -109,7 +109,21 @@ function ankiMarkCard() {\n     See AnkiDroid Manual for Usage\n */\n function ankiToggleFlag(flag) {\n-    window.location.href = \"signal:\" + flag;\n+    var flagVal = isNaN(flag);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "089a20e91679fe3e7e08ec4dff634bd58079018f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3f035e5a1b3fc679c030adc2317451aa42faa95", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/d3f035e5a1b3fc679c030adc2317451aa42faa95", "committedDate": "2020-05-31T12:24:57Z", "message": "Update card.js"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTI5Njg1", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421529685", "createdAt": "2020-05-31T21:37:57Z", "commit": {"oid": "d3f035e5a1b3fc679c030adc2317451aa42faa95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNjkxNTg2", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-421691586", "createdAt": "2020-06-01T08:56:43Z", "commit": {"oid": "d3f035e5a1b3fc679c030adc2317451aa42faa95"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwODo1Njo0M1rOGdDePQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwODo1Njo0M1rOGdDePQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzExODc4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                none, red, orange, green, blue\n          \n          \n            \n                possible values: \"none\", \"red\", \"orange\", \"green\", \"blue\"", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r433118781", "createdAt": "2020-06-01T08:56:43Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,32 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+/* Toggle flag on card from AnkiDroid Webview using JavaScript\n+    none, red, orange, green, blue", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3f035e5a1b3fc679c030adc2317451aa42faa95"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2edeb68fc1ada10dc97dd411fe1c8c1219a6f36e", "author": {"user": {"login": "infinyte7", "name": "Mani"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2edeb68fc1ada10dc97dd411fe1c8c1219a6f36e", "committedDate": "2020-06-01T09:30:35Z", "message": "Update card.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dddbccbdfa6dcbdda928f57b123448939fa4d870", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/dddbccbdfa6dcbdda928f57b123448939fa4d870", "committedDate": "2020-06-01T19:28:06Z", "message": "Update AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java\n\nCo-authored-by: david-allison-1 <62114487+david-allison-1@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTIwNDYy", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-422120462", "createdAt": "2020-06-01T19:29:49Z", "commit": {"oid": "dddbccbdfa6dcbdda928f57b123448939fa4d870"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTIxNDcz", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-422121473", "createdAt": "2020-06-01T19:31:31Z", "commit": {"oid": "dddbccbdfa6dcbdda928f57b123448939fa4d870"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTozMTozMVrOGdXThw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTozMTozMVrOGdXThw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ0MzcxOQ==", "bodyText": "Issue found: Strings must use doublequote.", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r433443719", "createdAt": "2020-06-01T19:31:31Z", "author": {"login": "timrae"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,32 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+/* Toggle flag on card from AnkiDroid Webview using JavaScript\n+    Possible values: \"none\", \"red\", \"orange\", \"green\", \"blue\"\n+    See AnkiDroid Manual for Usage\n+*/\n+function ankiToggleFlag(flag) {\n+    var flagVal = Number.isInteger(flag);\n+\n+    if (flagVal) {\n+        switch (flag) {\n+            case 0: window.location.href = \"signal:flag_none\"; break;\n+            case 1: window.location.href = \"signal:flag_red\"; break;\n+            case 2: window.location.href = \"signal:flag_orange\"; break;\n+            case 3: window.location.href = \"signal:flag_green\"; break;\n+            case 4: window.location.href = \"signal:flag_blue\"; break;\n+            default: console.log('No Flag Found'); break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dddbccbdfa6dcbdda928f57b123448939fa4d870"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTIxNDg1", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#pullrequestreview-422121485", "createdAt": "2020-06-01T19:31:32Z", "commit": {"oid": "dddbccbdfa6dcbdda928f57b123448939fa4d870"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTozMTozMlrOGdXTjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTozMTozMlrOGdXTjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ0MzcyNg==", "bodyText": "Issue found: Unexpected console statement.", "url": "https://github.com/ankidroid/Anki-Android/pull/6307#discussion_r433443726", "createdAt": "2020-06-01T19:31:32Z", "author": {"login": "timrae"}, "path": "AnkiDroid/src/main/assets/scripts/card.js", "diffHunk": "@@ -99,6 +99,32 @@ function reloadPage() {\n     window.location.href = \"signal:reload_card_html\";\n }\n \n+// Mark current card\n+function ankiMarkCard() {\n+    window.location.href = \"signal:mark_current_card\";\n+}\n+\n+/* Toggle flag on card from AnkiDroid Webview using JavaScript\n+    Possible values: \"none\", \"red\", \"orange\", \"green\", \"blue\"\n+    See AnkiDroid Manual for Usage\n+*/\n+function ankiToggleFlag(flag) {\n+    var flagVal = Number.isInteger(flag);\n+\n+    if (flagVal) {\n+        switch (flag) {\n+            case 0: window.location.href = \"signal:flag_none\"; break;\n+            case 1: window.location.href = \"signal:flag_red\"; break;\n+            case 2: window.location.href = \"signal:flag_orange\"; break;\n+            case 3: window.location.href = \"signal:flag_green\"; break;\n+            case 4: window.location.href = \"signal:flag_blue\"; break;\n+            default: console.log('No Flag Found'); break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dddbccbdfa6dcbdda928f57b123448939fa4d870"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3366, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}