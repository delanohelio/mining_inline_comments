{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MDY5NDc3", "number": 6362, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDo1MTo1N1rOECumTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTowMjozMlrOECuzxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjk2MDc3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Finder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDo1MTo1N1rOGfXWPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTowNzoyMFrOGfX0gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MTU2NQ==", "bodyText": "You can remove this comment now", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435541565", "createdAt": "2020-06-04T20:51:57Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Finder.java", "diffHunk": "@@ -1003,81 +998,4 @@ public static Integer ordForMid(Collection col, Map<Long, Integer> fields, long\n      * The methods below are not in LibAnki.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0OTMxNQ==", "bodyText": "Right.\u00a0I didn't pay attention to it", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435549315", "createdAt": "2020-06-04T21:07:20Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Finder.java", "diffHunk": "@@ -1003,81 +998,4 @@ public static Integer ordForMid(Collection col, Map<Long, Integer> fields, long\n      * The methods below are not in LibAnki.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MTU2NQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjk2Njk2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDo1Mzo0MVrOGfXZ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTo1Mjo0MVrOGfZT3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MjUyMA==", "bodyText": "Nit: Could you move to the top of the class and fix the spacing around the  =", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435542520", "createdAt": "2020-06-04T20:53:41Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1481,7 +1481,9 @@ public void onClick(View v) {\n         }\n     };\n \n-    public static void updateSearchItemQA(Context context, Map<String, String> item, Card c) {\n+    private static Pattern sMarkedPattern= Pattern.compile(\".*[Mm]arked.*\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0OTQyNg==", "bodyText": "If you want. I find it better to have it close to its usage, but that's okay with me", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435549426", "createdAt": "2020-06-04T21:07:33Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1481,7 +1481,9 @@ public void onClick(View v) {\n         }\n     };\n \n-    public static void updateSearchItemQA(Context context, Map<String, String> item, Card c) {\n+    private static Pattern sMarkedPattern= Pattern.compile(\".*[Mm]arked.*\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MjUyMA=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0OTU3Ng==", "bodyText": "Except that the change should occur in another PR. I'll do it there", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435549576", "createdAt": "2020-06-04T21:07:54Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1481,7 +1481,9 @@ public void onClick(View v) {\n         }\n     };\n \n-    public static void updateSearchItemQA(Context context, Map<String, String> item, Card c) {\n+    private static Pattern sMarkedPattern= Pattern.compile(\".*[Mm]arked.*\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MjUyMA=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU1NjEzNQ==", "bodyText": "Except that the change should occur in another PR. I'll do it there\n\nThere's really no need unless you want to", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435556135", "createdAt": "2020-06-04T21:17:19Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1481,7 +1481,9 @@ public void onClick(View v) {\n         }\n     };\n \n-    public static void updateSearchItemQA(Context context, Map<String, String> item, Card c) {\n+    private static Pattern sMarkedPattern= Pattern.compile(\".*[Mm]arked.*\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MjUyMA=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU3MzcyNQ==", "bodyText": "My point was that sMarkedPattern was in #6358\nSo it's the natural place to follow your request. I actual force pushed this change on #6358", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435573725", "createdAt": "2020-06-04T21:52:41Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1481,7 +1481,9 @@ public void onClick(View v) {\n         }\n     };\n \n-    public static void updateSearchItemQA(Context context, Map<String, String> item, Card c) {\n+    private static Pattern sMarkedPattern= Pattern.compile(\".*[Mm]arked.*\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0MjUyMA=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjk3NDgyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDo1NjowMVrOGfXezw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDo0MToyMVrOGfczlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ==", "bodyText": "Further performance: Tags.join should be static", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435543759", "createdAt": "2020-06-04T20:56:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU2MTkzMw==", "bodyText": "I don't understand this remark", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435561933", "createdAt": "2020-06-04T21:25:16Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU2MzQ5Mw==", "bodyText": "note.stringTags is implemented as:\n        return mCol.getTags().join(mCol.getTags().canonify(mTags));\nThis can be simplified to\n        return Tags.join(mCol.getTags().canonify(mTags));\nas Tags.join refers to no instance variables.", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435563493", "createdAt": "2020-06-04T21:28:50Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU2Mzk3Ng==", "bodyText": "Actually... might be worth doing in a separate PR, as there's a few unrelated usages", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435563976", "createdAt": "2020-06-04T21:29:59Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU3NjY4MA==", "bodyText": "I don't think I've ever seen this one to be a bottle neck, but I'd certainly would be okay with such a change.", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435576680", "createdAt": "2020-06-04T22:00:27Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU3NzU4Ng==", "bodyText": "It's a micro-optimisation that'll make the code easier to reason about, win-win :)", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435577586", "createdAt": "2020-06-04T22:02:47Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzMDk5OQ==", "bodyText": "Let's leave this as TODO", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435630999", "createdAt": "2020-06-05T00:41:21Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0Mzc1OQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjk3ODc2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMDo1NzowOFrOGfXhPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo1MTowMVrOGfxvfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NDM4Mg==", "bodyText": "I don't get new Integer().toString() - is this validation as it'll throw otherwise?", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435544382", "createdAt": "2020-06-04T20:57:08Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();\n+        item.put(TAGS, tags);\n+        item.put(MARKED, (sMarkedPattern.matcher(item.get(TAGS)).matches())?\"marked\": null);\n+        item.put(FLAGS, (new Integer(c.getUserFlag())).toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU2MzQ0MQ==", "bodyText": "I honestly have no clue. I just copy-pasted the line\ncard.put(CardBrowser.FLAGS, (new Integer(Card.intToFlag(cur.getInt(5)))).toString());\n\nwhich already have the same strange line", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435563441", "createdAt": "2020-06-04T21:28:42Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();\n+        item.put(TAGS, tags);\n+        item.put(MARKED, (sMarkedPattern.matcher(item.get(TAGS)).matches())?\"marked\": null);\n+        item.put(FLAGS, (new Integer(c.getUserFlag())).toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NDM4Mg=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU3MjEyMg==", "bodyText": "Oh, it's because it's creating an Integer out of an int, and then transforming it into a string. It's not transforming a int from a string and then back to string", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435572122", "createdAt": "2020-06-04T21:48:57Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();\n+        item.put(TAGS, tags);\n+        item.put(MARKED, (sMarkedPattern.matcher(item.get(TAGS)).matches())?\"marked\": null);\n+        item.put(FLAGS, (new Integer(c.getUserFlag())).toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NDM4Mg=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzMDMwMA==", "bodyText": "card.put(FLAGS, Integer.toString(c.getUserFlag())) ?", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435630300", "createdAt": "2020-06-05T00:38:16Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();\n+        item.put(TAGS, tags);\n+        item.put(MARKED, (sMarkedPattern.matcher(item.get(TAGS)).matches())?\"marked\": null);\n+        item.put(FLAGS, (new Integer(c.getUserFlag())).toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NDM4Mg=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk2NDYwNg==", "bodyText": "It is now deleted anyway", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435964606", "createdAt": "2020-06-05T14:36:20Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();\n+        item.put(TAGS, tags);\n+        item.put(MARKED, (sMarkedPattern.matcher(item.get(TAGS)).matches())?\"marked\": null);\n+        item.put(FLAGS, (new Integer(c.getUserFlag())).toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NDM4Mg=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3NDAxNQ==", "bodyText": "Rebased to follow your advice", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435974015", "createdAt": "2020-06-05T14:51:01Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1531,6 +1534,13 @@ public static void updateSearchItemQA(Context context, Map<String, String> item,\n         item.put(NOTE, c.model().optString(\"name\"));\n         item.put(QUESTION, formatQA(q, context));\n         item.put(REVIEWS, Integer.toString(c.getReps()));\n+        String tags = note.stringTags();\n+        item.put(TAGS, tags);\n+        item.put(MARKED, (sMarkedPattern.matcher(item.get(TAGS)).matches())?\"marked\": null);\n+        item.put(FLAGS, (new Integer(c.getUserFlag())).toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NDM4Mg=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjk5NTI0OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTowMjozMlrOGfXrtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTo1MToxMFrOGfZRfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NzA2MQ==", "bodyText": "Would be nice to Timber.d the count", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435547061", "createdAt": "2020-06-04T21:02:32Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -895,11 +895,17 @@ private TaskData doInBackgroundSearchCards(TaskData... params) {\n         String query = (String) params[0].getObjArray()[0];\n         Boolean order = (Boolean) params[0].getObjArray()[1];\n         int numCardsToRender = (int) params[0].getObjArray()[2];\n-        List<Map<String,String>> searchResult = col.findCardsForCardBrowser(query, order);\n+        List<Long> searchResult_ = col.findCards(query, order);\n+        List<Map<String,String>> searchResult = new ArrayList<>(searchResult_.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU3MzExNw==", "bodyText": "Okay", "url": "https://github.com/ankidroid/Anki-Android/pull/6362#discussion_r435573117", "createdAt": "2020-06-04T21:51:10Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -895,11 +895,17 @@ private TaskData doInBackgroundSearchCards(TaskData... params) {\n         String query = (String) params[0].getObjArray()[0];\n         Boolean order = (Boolean) params[0].getObjArray()[1];\n         int numCardsToRender = (int) params[0].getObjArray()[2];\n-        List<Map<String,String>> searchResult = col.findCardsForCardBrowser(query, order);\n+        List<Long> searchResult_ = col.findCards(query, order);\n+        List<Map<String,String>> searchResult = new ArrayList<>(searchResult_.size());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU0NzA2MQ=="}, "originalCommit": {"oid": "3b638b1e5356ea1642c12d14b517aec3b13c5c67"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 136, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}