{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MTAwMjc3", "number": 6327, "title": "Allow changing the case of a deck name", "bodyText": "Pull Request template\nPurpose / Description\nFixes\nCurrently, if you try to rename Default to DEFAULT, it will be\nrejected because the deck already exists. This code allow this kind of\nchange to occur.\nApproach\nIf the deck already exists because it's the same deck than the one renamed, renaming can still go on.\nHow Has This Been Tested?\nTrying to rename a deck by changing its case.\nLearning (optional, can help others)\nAnki recently solved that while moving to rust. Probably in f592672fa952260655881a75a2e3c921b2e23857\nI don't understand rust\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-06-01T16:53:30Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6327", "merged": true, "mergeCommit": {"oid": "0035fff9492c600b4b35b60c87a1d604b75a6d25"}, "closed": true, "closedAt": "2020-06-01T20:22:15Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnDJc3AH2gAyNDI2MTAwMjc3OjI1ODNjZmFhNTAzNjQyOTkwOGIzNmFkZjZiOTkzZGQ2NGU5NDUzNDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnGMH2AFqTQyMjE1MzM3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2583cfaa5036429908b36adf6b993dd64e945340", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2583cfaa5036429908b36adf6b993dd64e945340", "committedDate": "2020-06-01T16:49:10Z", "message": "Allow changing the case of a deck name\n\nCurrently, if you try to rename Default to DEFAULT, it will be\nrejected because the deck already exists. This code allow this kind of\nchange to occur."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDE1OTE1", "url": "https://github.com/ankidroid/Anki-Android/pull/6327#pullrequestreview-422015915", "createdAt": "2020-06-01T16:56:07Z", "commit": {"oid": "2583cfaa5036429908b36adf6b993dd64e945340"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1NjowN1rOGdSXIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1NjowN1rOGdSXIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjcyMA==", "bodyText": "Issue found: These nested if statements could be combined", "url": "https://github.com/ankidroid/Anki-Android/pull/6327#discussion_r433362720", "createdAt": "2020-06-01T16:56:07Z", "author": {"login": "timrae"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "diffHunk": "@@ -456,8 +456,16 @@ public void update(JSONObject g) {\n      */\n     public void rename(JSONObject g, String newName) throws DeckRenameException {\n         // make sure target node doesn't already exist\n-        if (byName(newName) != null) {\n-            throw new DeckRenameException(DeckRenameException.ALREADY_EXISTS);\n+        JSONObject deckWithThisName = byName(newName);\n+        if (deckWithThisName != null) {\n+            if (deckWithThisName.getLong(\"id\") != g.getLong(\"id\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2583cfaa5036429908b36adf6b993dd64e945340"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTUzMzc4", "url": "https://github.com/ankidroid/Anki-Android/pull/6327#pullrequestreview-422153378", "createdAt": "2020-06-01T20:21:48Z", "commit": {"oid": "2583cfaa5036429908b36adf6b993dd64e945340"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3387, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}