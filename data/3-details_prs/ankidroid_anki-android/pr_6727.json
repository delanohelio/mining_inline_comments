{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1Nzc5NDAw", "number": 6727, "title": "Tests whether mCurrentEditedCard is null", "bodyText": "Tests throughout the whole code, even if the only problem known to date is in:\nif (!mEditorNote.cids().contains(mCurrentEditedCard.getId())) {\n\nThis should solve #6719\nTesting it on my merge branch and trying to reproduce the bug\nEdit by @david-allison-1: Fixes #6719", "createdAt": "2020-07-23T15:09:13Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6727", "merged": true, "mergeCommit": {"oid": "54ff3580c9086fd2d34158e6768eb12d9e25af31"}, "closed": true, "closedAt": "2020-07-23T18:17:15Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3w2DYAH2gAyNDU1Nzc5NDAwOmVhYjFkMzEyMmE4ZjgzYjc3YWJiZjFiODFmN2I2NzRlZTYyYWZlZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3yRxfgFqTQ1NDMxNjcxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eab1d3122a8f83b77abbf1b81f7b674ee62afee0", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/eab1d3122a8f83b77abbf1b81f7b674ee62afee0", "committedDate": "2020-07-23T15:06:24Z", "message": "Tests whether mCurrentEditedCard is null\n\nTests throughout the whole code, even if the only problem known to date is in:\n```\nif (!mEditorNote.cids().contains(mCurrentEditedCard.getId())) {\n```\n\nThis should solve #6719"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MjM3NDE1", "url": "https://github.com/ankidroid/Anki-Android/pull/6727#pullrequestreview-454237415", "createdAt": "2020-07-23T15:13:35Z", "commit": {"oid": "eab1d3122a8f83b77abbf1b81f7b674ee62afee0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c", "committedDate": "2020-07-23T15:15:22Z", "message": "Set mCurrentEditedCard to null when no current card"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MzE2NzE4", "url": "https://github.com/ankidroid/Anki-Android/pull/6727#pullrequestreview-454316718", "createdAt": "2020-07-23T16:46:35Z", "commit": {"oid": "cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo0NjozNVrOG2S-XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo0NjozNVrOG2S-XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4NzE2NQ==", "bodyText": "This seems like the right thing to do as I read the whole onCollectionLoaded, but NoteEditor is a mess so it is hard to say for sure. It's clear from the crash not detected in unit tests that our coverage here isn't great but NoteEditor is scheduled for some serious work soon anyway, so hopefully it gets covered ...", "url": "https://github.com/ankidroid/Anki-Android/pull/6727#discussion_r459587165", "createdAt": "2020-07-23T16:46:35Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java", "diffHunk": "@@ -422,6 +423,7 @@ protected void onCollectionLoaded(Collection col) {\n \n \n         mAedictIntent = false;\n+        mCurrentEditedCard = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd6a9e6b2d8dbc6eee584823d7e3323742a82f1c"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3042, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}