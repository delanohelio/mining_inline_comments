{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MTc0Mjk5", "number": 6206, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDoxMzowMlrOD_M2-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDozNDo1MlrOD_M8fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTk3NTYzOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/cardviewer/CardAppearance.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDoxMzowMlrOGZvNLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDozNDowMlrOGZvUlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MTAwNg==", "bodyText": "Possible improvement: rename to hasUserDefinedNightMode", "url": "https://github.com/ankidroid/Anki-Android/pull/6206#discussion_r429641006", "createdAt": "2020-05-24T14:13:02Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/cardviewer/CardAppearance.java", "diffHunk": "@@ -45,6 +46,15 @@ public boolean isNightMode() {\n         return mNightMode;\n     }\n \n+\n+    /**\n+     * customNightMode finds out if the user has included class .night_mode in card's stylesheet\n+     */\n+    public boolean customNightMode(Card card) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f7b95fc3a2d7d19895420bc7106f99d72879d83"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MTcxNw==", "bodyText": "If you think the name better fits in the project, I will rename it", "url": "https://github.com/ankidroid/Anki-Android/pull/6206#discussion_r429641717", "createdAt": "2020-05-24T14:20:45Z", "author": {"login": "Kubo2"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/cardviewer/CardAppearance.java", "diffHunk": "@@ -45,6 +46,15 @@ public boolean isNightMode() {\n         return mNightMode;\n     }\n \n+\n+    /**\n+     * customNightMode finds out if the user has included class .night_mode in card's stylesheet\n+     */\n+    public boolean customNightMode(Card card) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MTAwNg=="}, "originalCommit": {"oid": "7f7b95fc3a2d7d19895420bc7106f99d72879d83"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MjkwMg==", "bodyText": "Reviews are two-way conversations, feel free to disagree! But thanks :)", "url": "https://github.com/ankidroid/Anki-Android/pull/6206#discussion_r429642902", "createdAt": "2020-05-24T14:34:02Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/cardviewer/CardAppearance.java", "diffHunk": "@@ -45,6 +46,15 @@ public boolean isNightMode() {\n         return mNightMode;\n     }\n \n+\n+    /**\n+     * customNightMode finds out if the user has included class .night_mode in card's stylesheet\n+     */\n+    public boolean customNightMode(Card card) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0MTAwNg=="}, "originalCommit": {"oid": "7f7b95fc3a2d7d19895420bc7106f99d72879d83"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTk4OTcyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDozNDo1MlrOGZvU3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNDozNDo1MlrOGZvU3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0Mjk3NQ==", "bodyText": "Issue found: These nested if statements could be combined", "url": "https://github.com/ankidroid/Anki-Android/pull/6206#discussion_r429642975", "createdAt": "2020-05-24T14:34:52Z", "author": {"login": "timrae"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -2062,9 +2062,7 @@ private void updateCard(final String newContent) {\n         }\n \n         if (isInNightMode()) {\n-            // If card styling doesn't contain any mention of the night_mode class then do color inversion as fallback\n-            // TODO: find more robust solution that won't match unrelated classes like \"night_mode_old\"\n-            if (!mCurrentCard.css().contains(\".night_mode\")) {\n+            if (!mCardAppearance.hasUserDefinedNightMode(mCurrentCard)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff53cd79a643d647086d674b17d537484b905f77"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 249, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}