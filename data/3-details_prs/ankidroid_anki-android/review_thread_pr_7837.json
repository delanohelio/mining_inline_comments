{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjcyMTMw", "number": 7837, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNTo1Njo0MVrOFB2enw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowMTozM1rOFB2okA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDg1NDcxOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNTo1Njo0MVrOIAtpig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwMDozMzowNFrOIBBR0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYxODgyNg==", "bodyText": "look at you all fancy and parameterized ;-)", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537618826", "createdAt": "2020-12-07T15:56:41Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+ *\n+ *  This program is free software; you can redistribute it and/or modify it under\n+ *  the terms of the GNU General Public License as published by the Free Software\n+ *  Foundation; either version 3 of the License, or (at your option) any later\n+ *  version.\n+ *\n+ *  This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ *  PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License along with\n+ *  this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;\n+\n+import android.content.Intent;\n+import android.graphics.Color;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.ParameterizedRobolectricTestRunner;\n+\n+import java.util.Arrays;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+@RunWith(ParameterizedRobolectricTestRunner.class)\n+public class WhiteboardDefaultForegroundColorTest extends RobolectricTest {\n+\n+    @ParameterizedRobolectricTestRunner.Parameter()\n+    public boolean mIsInverted;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(1)\n+    public boolean mIsMonochrome;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(2)\n+    public int mExpectedResult;\n+\n+    @ParameterizedRobolectricTestRunner.Parameters", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgzMzQ4NQ==", "bodyText": "I need to find/write a framework for this.\nParameterizedRobolectricTestRunner has a horrible API. Compare it to:\nhttps://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537833485", "createdAt": "2020-12-07T21:07:51Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+ *\n+ *  This program is free software; you can redistribute it and/or modify it under\n+ *  the terms of the GNU General Public License as published by the Free Software\n+ *  Foundation; either version 3 of the License, or (at your option) any later\n+ *  version.\n+ *\n+ *  This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ *  PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License along with\n+ *  this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;\n+\n+import android.content.Intent;\n+import android.graphics.Color;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.ParameterizedRobolectricTestRunner;\n+\n+import java.util.Arrays;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+@RunWith(ParameterizedRobolectricTestRunner.class)\n+public class WhiteboardDefaultForegroundColorTest extends RobolectricTest {\n+\n+    @ParameterizedRobolectricTestRunner.Parameter()\n+    public boolean mIsInverted;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(1)\n+    public boolean mIsMonochrome;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(2)\n+    public int mExpectedResult;\n+\n+    @ParameterizedRobolectricTestRunner.Parameters", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYxODgyNg=="}, "originalCommit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg0MjM4Nw==", "bodyText": "\ud83e\udd14  at some point we're just going to konvert to the kool new way, it doesn't seem so bad in this case https://medium.com/@harmittaa/parametrized-tests-with-robolectric-3666c4794f6b", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537842387", "createdAt": "2020-12-07T21:22:51Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+ *\n+ *  This program is free software; you can redistribute it and/or modify it under\n+ *  the terms of the GNU General Public License as published by the Free Software\n+ *  Foundation; either version 3 of the License, or (at your option) any later\n+ *  version.\n+ *\n+ *  This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ *  PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License along with\n+ *  this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;\n+\n+import android.content.Intent;\n+import android.graphics.Color;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.ParameterizedRobolectricTestRunner;\n+\n+import java.util.Arrays;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+@RunWith(ParameterizedRobolectricTestRunner.class)\n+public class WhiteboardDefaultForegroundColorTest extends RobolectricTest {\n+\n+    @ParameterizedRobolectricTestRunner.Parameter()\n+    public boolean mIsInverted;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(1)\n+    public boolean mIsMonochrome;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(2)\n+    public int mExpectedResult;\n+\n+    @ParameterizedRobolectricTestRunner.Parameters", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYxODgyNg=="}, "originalCommit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg4NTE0Mg==", "bodyText": "https://github.com/Pragmatists/JUnitParams\npls\n\nI jest - last kommit in 2018, but please kan we do something better than drinking that koolaid", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537885142", "createdAt": "2020-12-07T22:35:11Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+ *\n+ *  This program is free software; you can redistribute it and/or modify it under\n+ *  the terms of the GNU General Public License as published by the Free Software\n+ *  Foundation; either version 3 of the License, or (at your option) any later\n+ *  version.\n+ *\n+ *  This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ *  PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License along with\n+ *  this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;\n+\n+import android.content.Intent;\n+import android.graphics.Color;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.ParameterizedRobolectricTestRunner;\n+\n+import java.util.Arrays;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+@RunWith(ParameterizedRobolectricTestRunner.class)\n+public class WhiteboardDefaultForegroundColorTest extends RobolectricTest {\n+\n+    @ParameterizedRobolectricTestRunner.Parameter()\n+    public boolean mIsInverted;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(1)\n+    public boolean mIsMonochrome;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(2)\n+    public int mExpectedResult;\n+\n+    @ParameterizedRobolectricTestRunner.Parameters", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYxODgyNg=="}, "originalCommit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzk0MDQzNQ==", "bodyText": "yeah no Pragmatists/JUnitParams#169\noh, kotlin is koming, it's inevitable I think. I'm thinking of a konversion probably in the 2.17ish time frame, expecting 2.15/2.16 will be soaked up by rust infra", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537940435", "createdAt": "2020-12-08T00:33:04Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/WhiteboardDefaultForegroundColorTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ *  Copyright (c) 2020 David Allison <davidallisongithub@gmail.com>\n+ *\n+ *  This program is free software; you can redistribute it and/or modify it under\n+ *  the terms of the GNU General Public License as published by the Free Software\n+ *  Foundation; either version 3 of the License, or (at your option) any later\n+ *  version.\n+ *\n+ *  This program is distributed in the hope that it will be useful, but WITHOUT ANY\n+ *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+ *  PARTICULAR PURPOSE. See the GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License along with\n+ *  this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package com.ichi2.anki;\n+\n+import android.content.Intent;\n+import android.graphics.Color;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.ParameterizedRobolectricTestRunner;\n+\n+import java.util.Arrays;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+\n+@RunWith(ParameterizedRobolectricTestRunner.class)\n+public class WhiteboardDefaultForegroundColorTest extends RobolectricTest {\n+\n+    @ParameterizedRobolectricTestRunner.Parameter()\n+    public boolean mIsInverted;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(1)\n+    public boolean mIsMonochrome;\n+\n+    @ParameterizedRobolectricTestRunner.Parameter(2)\n+    public int mExpectedResult;\n+\n+    @ParameterizedRobolectricTestRunner.Parameters", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYxODgyNg=="}, "originalCommit": {"oid": "1cdc995f4352551c8716cb4618d4aa114af7dd80"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDg4MDE2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowMTozM1rOIAt46g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxODo0NTo1NVrOIA1K9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMjc2Mg==", "bodyText": "interesting - what's the ideal resolution here? more specifically, what does \"reset\" mean? I thought robolectric used sqlite implementation from robolectric, configured for in-memory db and the tests were isolated so each test got it's own db clean?", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537622762", "createdAt": "2020-12-07T16:01:33Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java", "diffHunk": "@@ -96,6 +96,9 @@ public void setUp() {\n \n         //See: #6140 - This global ideally shouldn't exist, but it will cause crashes if set.\n         DialogHandler.discardMessage();\n+\n+        // BUG: We do not reset the MetaDB", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzc0MjA3MQ==", "bodyText": "I thought robolectric used sqlite implementation from robolectric, configured for in-memory db and the tests were isolated so each test got it's own db clean?\n\nThe tests weren't isolated - this is possibly due to the static variable referencing the database in MetaDB (which we now reset in the .closeDb call), but it warrants investigation.", "url": "https://github.com/ankidroid/Anki-Android/pull/7837#discussion_r537742071", "createdAt": "2020-12-07T18:45:55Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java", "diffHunk": "@@ -96,6 +96,9 @@ public void setUp() {\n \n         //See: #6140 - This global ideally shouldn't exist, but it will cause crashes if set.\n         DialogHandler.discardMessage();\n+\n+        // BUG: We do not reset the MetaDB", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMjc2Mg=="}, "originalCommit": {"oid": "e354108c051dbbfa0794c0dd692e7dd66f2b0abe"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 621, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}