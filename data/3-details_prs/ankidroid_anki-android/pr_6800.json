{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxODI2NTAw", "number": 6800, "title": "Fixes 6770", "bodyText": "Pull Request template\nFixes\n#6770\nApproach\nI added a comment explaining what exactly count() is doing. I.e. Returning the number of cards to see today in each category, not counting the card sent to the reviewer.  This means that, by considering mCurrentCard I was over correcting because the counter already considered current card. I thus removed this over correction and added explanations about what exactly counts are and what they means in a normal use of the scheduler.\nHow Has This Been Tested?\nTrying to reproduce #6770 and also trying to to undo reviews/burying when the number of cards is limited by the set of cards and not by the deck's limit.\nLearning (optional, can help others)\ncounts and various counts make really no sens; but I was supposed to know it already.\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-08-02T16:09:30Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6800", "merged": true, "mergeCommit": {"oid": "576fffff9d3c0d7cf0deff5b61dcba1ea856c3e3"}, "closed": true, "closedAt": "2020-08-05T21:13:50Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6_4EWgFqTQ1OTY2MTExOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc79q8qABqjM2MjU0NTMxNTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjYxMTE4", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-459661118", "createdAt": "2020-08-02T16:18:57Z", "commit": {"oid": "88b3ac9f21ebe7fe00e291f44b9593024282d7b9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMDgxOTk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-460081995", "createdAt": "2020-08-03T14:38:04Z", "commit": {"oid": "88b3ac9f21ebe7fe00e291f44b9593024282d7b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "956cdf152e124cb16b5dfb68830704c8830dc001", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/956cdf152e124cb16b5dfb68830704c8830dc001", "committedDate": "2020-08-03T16:08:01Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/17f4e4536ac735de104e9482c271e377c1bbe23b", "committedDate": "2020-08-03T16:08:13Z", "message": "NF: regression test for #6770"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTYwMTc1", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-460160175", "createdAt": "2020-08-03T16:16:58Z", "commit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjoxNjo1OFrOG6_4dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjoxNjo1OFrOG6_4dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxNzIzOA==", "bodyText": "Why has this been added?", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#discussion_r464517238", "createdAt": "2020-08-03T16:16:58Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Card.java", "diffHunk": "@@ -451,6 +451,7 @@ public int getQueue() {\n \n \n     public void setQueue(@Consts.CARD_QUEUE int queue) {\n+        Assert.that(queue != Consts.QUEUE_TYPE_DAY_LEARN_RELEARN, \"Day\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/17f4e4536ac735de104e9482c271e377c1bbe23b", "committedDate": "2020-08-03T16:08:13Z", "message": "NF: regression test for #6770"}, "afterCommit": {"oid": "67a645c00b271863a167c00953279277aa4b5545", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/67a645c00b271863a167c00953279277aa4b5545", "committedDate": "2020-08-03T16:19:44Z", "message": "NF: regression test for #6770"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67a645c00b271863a167c00953279277aa4b5545", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/67a645c00b271863a167c00953279277aa4b5545", "committedDate": "2020-08-03T16:19:44Z", "message": "NF: regression test for #6770"}, "afterCommit": {"oid": "9825d61b31ee671b8970dbe8a945b6f3a9230fba", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9825d61b31ee671b8970dbe8a945b6f3a9230fba", "committedDate": "2020-08-03T16:20:36Z", "message": "NF: Regression test for 6770"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTYwNzU4", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-460160758", "createdAt": "2020-08-03T16:17:44Z", "commit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjoxNzo0NVrOG6_6Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjoyMjozOVrOG7AE4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxNzY1MQ==", "bodyText": "Nit: These refactorings don't seem relevant to the change", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#discussion_r464517651", "createdAt": "2020-08-03T16:17:45Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Sched.java", "diffHunk": "@@ -481,13 +483,15 @@ protected void _answerLrnCard(Card card, int ease) {\n                 card.setQueue(Consts.QUEUE_TYPE_LRN);\n                 if (!mLrnQueue.isEmpty() && mRevCount == 0 && mNewCount == 0) {\n                     long smallestDue = mLrnQueue.getFirst().getDue();\n-                    card.setDue(Math.max(card.getDue(), smallestDue + 1));\n+                    long maxDue = Math.max(card.getDue(), smallestDue + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxNzk2MA==", "bodyText": "This seems to have changed since the last time I reviewed. Is this part of the bugfix?", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#discussion_r464517960", "createdAt": "2020-08-03T16:18:19Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/SchedV2.java", "diffHunk": "@@ -2898,6 +2926,16 @@ protected boolean currentCardIsInQueueWithDeck(int queue, long did) {\n         // mCurrentCard may be set to null when the reviewer gets closed. So we copy it to be sure to avoid NullPointerException\n         Card currentCard = mCurrentCard;\n         List<Long> currentCardParentsDid = mCurrentCardParentsDid;\n-        return currentCard != null && currentCard.getQueue() == queue && currentCardParentsDid != null && currentCardParentsDid.contains(did);\n+        if (currentCard == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxODgzNQ==", "bodyText": "For future: I've added addNoteUsingBasicModel inside RobolectricTest", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#discussion_r464518835", "createdAt": "2020-08-03T16:19:51Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/sched/SchedTest.java", "diffHunk": "@@ -142,4 +149,47 @@ public void ensureDeckTree() {\n     private void selectDefaultDeck() {\n         getCol().getDecks().select(Consts.DEFAULT_DECK_ID);\n     }\n+\n+    @Test\n+    public void ensureUndoCorrectCounts() {\n+        Collection col = getCol();\n+        AbstractSched sched = col.getSched();\n+        Deck deck = col.getDecks().get(1);\n+        DeckConfig dconf = col.getDecks().getConf(1);\n+        dconf.getJSONObject(\"new\").put(\"perDay\", 10);\n+        JSONArray newCount = deck.getJSONArray(\"newToday\");\n+        for (int i = 0; i < 20; i++) {\n+            Note note = col.newNote();\n+            note.setField(0, \"a\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f4e4536ac735de104e9482c271e377c1bbe23b"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUyMDQxOQ==", "bodyText": "I've added waitForTask(UNDO, timeout); which should cut down on code here", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#discussion_r464520419", "createdAt": "2020-08-03T16:22:39Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/sched/SchedV2Test.java", "diffHunk": "@@ -156,5 +161,48 @@ public void ensureDeckTree() {\n         Assert.assertEquals(\"Tree has not the expected structure\", expectedTree(sched, true), tree);\n     }\n \n+    // Regression test for 6770\n+    @Test\n+    public void ensureUndoCorrectCounts() throws InterruptedException {\n+        Collection col = getCol();\n+        AbstractSched sched = col.getSched();\n+        Deck deck = col.getDecks().get(1);\n+        DeckConfig dconf = col.getDecks().getConf(1);\n+        dconf.getJSONObject(\"new\").put(\"perDay\", 10);\n+        JSONArray newCount = deck.getJSONArray(\"newToday\");\n+        for (int i = 0; i < 20; i++) {\n+            Note note = col.newNote();\n+            note.setField(0, \"a\");\n+            col.addNote(note);\n+        }\n+        sched.reset();\n+        assertThat(col.cardCount(), is(20));\n+        assertThat(sched.counts()[0], is(10));\n+        Card card = sched.getCard();\n+        assertThat(sched.counts()[0], is(9));\n+        assertThat(sched.counts(card)[0], is(10));\n+        sched.answerCard(card, 3);\n+        sched.getCard();\n+        CollectionTask.launchCollectionTask(UNDO,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9825d61b31ee671b8970dbe8a945b6f3a9230fba"}, "originalPosition": 47}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9825d61b31ee671b8970dbe8a945b6f3a9230fba", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9825d61b31ee671b8970dbe8a945b6f3a9230fba", "committedDate": "2020-08-03T16:20:36Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "36ce3b61076eb440b82718ae8e23d2a38610e170", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/36ce3b61076eb440b82718ae8e23d2a38610e170", "committedDate": "2020-08-03T16:58:54Z", "message": "NF: Regression test for 6770"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "36ce3b61076eb440b82718ae8e23d2a38610e170", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/36ce3b61076eb440b82718ae8e23d2a38610e170", "committedDate": "2020-08-03T16:58:54Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "c31b9b72f6a79dfc1848333f53d3491652676f31", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c31b9b72f6a79dfc1848333f53d3491652676f31", "committedDate": "2020-08-03T17:02:10Z", "message": "NF: Regression test for 6770"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjQ0MDU4", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-460244058", "createdAt": "2020-08-03T18:19:14Z", "commit": {"oid": "c31b9b72f6a79dfc1848333f53d3491652676f31"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c31b9b72f6a79dfc1848333f53d3491652676f31", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c31b9b72f6a79dfc1848333f53d3491652676f31", "committedDate": "2020-08-03T17:02:10Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "60c79b2079a74548c07f2d63befd4a48368c712a", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60c79b2079a74548c07f2d63befd4a48368c712a", "committedDate": "2020-08-04T18:45:15Z", "message": "NF: Regression test for 6770"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60c79b2079a74548c07f2d63befd4a48368c712a", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/60c79b2079a74548c07f2d63befd4a48368c712a", "committedDate": "2020-08-04T18:45:15Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "71edee3f96002cd973ba0193fbd41be6ff305b14", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/71edee3f96002cd973ba0193fbd41be6ff305b14", "committedDate": "2020-08-04T19:52:35Z", "message": "NF: Regression test for 6770"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71edee3f96002cd973ba0193fbd41be6ff305b14", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/71edee3f96002cd973ba0193fbd41be6ff305b14", "committedDate": "2020-08-04T19:52:35Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0", "committedDate": "2020-08-04T19:55:48Z", "message": "NF: Regression test for 6770"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTM1NzMz", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-461135733", "createdAt": "2020-08-04T20:08:02Z", "commit": {"oid": "2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTYzNDE3", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-461163417", "createdAt": "2020-08-04T20:50:35Z", "commit": {"oid": "2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMDo1MDozNlrOG7xBmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMDo1MDozNlrOG7xBmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyMjM5Mw==", "bodyText": "Can you add an assertion that this code is executed? Guarantees about how multithreaded code execute can change over time with testing framework changes, and knowing explicitly that a test is broken gives value in this case", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#discussion_r465322393", "createdAt": "2020-08-04T20:50:36Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/libanki/sched/AbstractSchedTest.java", "diffHunk": "@@ -85,4 +90,47 @@ public void testUndoResetsCardCountsToCorrectValue() throws InterruptedException\n \n         assertThat(\"Counts after an undo should be the same as before an undo\", countsAfterUndo, is(countsBeforeUndo));\n     }\n+\n+    @Test\n+    public void ensureUndoCorrectCounts() {\n+        Collection col = getCol();\n+        AbstractSched sched = col.getSched();\n+        Deck deck = col.getDecks().get(1);\n+        DeckConfig dconf = col.getDecks().getConf(1);\n+        dconf.getJSONObject(\"new\").put(\"perDay\", 10);\n+        JSONArray newCount = deck.getJSONArray(\"newToday\");\n+        for (int i = 0; i < 20; i++) {\n+            Note note = col.newNote();\n+            note.setField(0, \"a\");\n+            col.addNote(note);\n+        }\n+        sched.reset();\n+        assertThat(col.cardCount(), is(20));\n+        assertThat(sched.counts()[0], is(10));\n+        Card card = sched.getCard();\n+        assertThat(sched.counts()[0], is(9));\n+        assertThat(sched.counts(card)[0], is(10));\n+        sched.answerCard(card, 3);\n+        sched.getCard();\n+        CollectionTask.launchCollectionTask(UNDO,\n+                new CollectionTask.TaskListener() {\n+                    Card card;\n+                    @Override\n+                    public void onPreExecute() {\n+\n+                    }\n+\n+                    @Override\n+                    public void onProgressUpdate(TaskData data) {\n+                        card = data.getCard();\n+                    }\n+\n+\n+                    @Override\n+                    public void onPostExecute(TaskData result) {\n+                        assertThat(sched.counts()[0], is(9));\n+                        assertThat(sched.counts(card)[0], is(10));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0"}, "originalPosition": 56}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2df8d2f7ec2ea7da15e86d1a3b5d4ff2d5f0c6b0", "committedDate": "2020-08-04T19:55:48Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "e59861f9cbc575df2d98190ba24309035a33033c", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e59861f9cbc575df2d98190ba24309035a33033c", "committedDate": "2020-08-04T22:03:11Z", "message": "NF: Regression test for 6770"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNDk0NTc4", "url": "https://github.com/ankidroid/Anki-Android/pull/6800#pullrequestreview-461494578", "createdAt": "2020-08-05T09:29:25Z", "commit": {"oid": "e59861f9cbc575df2d98190ba24309035a33033c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e59861f9cbc575df2d98190ba24309035a33033c", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e59861f9cbc575df2d98190ba24309035a33033c", "committedDate": "2020-08-04T22:03:11Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "e859ffde3ce935f6bf936586a78d4f73e7edcd48", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e859ffde3ce935f6bf936586a78d4f73e7edcd48", "committedDate": "2020-08-05T11:31:34Z", "message": "NF: Regression test for 6770"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69247993d5ecba00f0239619b01217985ef105ad", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/69247993d5ecba00f0239619b01217985ef105ad", "committedDate": "2020-08-05T16:17:54Z", "message": "Correct number of cards after undo: #6770\n\nIf the number of cards to see is limited by deck option, undo would not re-increase the limit correctly. This correct it."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a159cf8eeec92a28b2c9f655f58d657441c62ad", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1a159cf8eeec92a28b2c9f655f58d657441c62ad", "committedDate": "2020-08-05T16:18:33Z", "message": "NF: Commenting scheduler\n\nA lot of actions are not trivial to undersatnd. Adding comments to explain exactly what occurred."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0712d72803155e0cbcf242e955323049bb30fadf", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0712d72803155e0cbcf242e955323049bb30fadf", "committedDate": "2020-08-05T16:18:33Z", "message": "NF: Regression test for 6770"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e859ffde3ce935f6bf936586a78d4f73e7edcd48", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e859ffde3ce935f6bf936586a78d4f73e7edcd48", "committedDate": "2020-08-05T11:31:34Z", "message": "NF: Regression test for 6770"}, "afterCommit": {"oid": "0712d72803155e0cbcf242e955323049bb30fadf", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0712d72803155e0cbcf242e955323049bb30fadf", "committedDate": "2020-08-05T16:18:33Z", "message": "NF: Regression test for 6770"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3087, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}