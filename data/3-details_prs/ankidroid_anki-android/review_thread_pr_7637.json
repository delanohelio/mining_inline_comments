{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3OTI3NTgx", "number": 7637, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo0OToyOFrOE24cbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1Mjo1NlrOE24hrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTgzMzQwOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo0OToyOFrOHv6fbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo0OToyOFrOHv6fbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwMzQzOQ==", "bodyText": "I don't understand this, could you provide an example in the JavaDoc", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520003439", "createdAt": "2020-11-09T17:49:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTg0Mjg4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1MTo1N1rOHv6lZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1MTo1N1rOHv6lZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNDk2Nw==", "bodyText": "? I don't think this is the same - needs regression cover either way.", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520004967", "createdAt": "2020-11-09T17:51:57Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1866,14 +1863,10 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         ArrayList<String> problems = new ArrayList<>();\n         notifyProgress.run();\n         if (m.getInt(\"type\") == Consts.MODEL_STD) {\n-            ArrayList<Integer> ords = new ArrayList<>();\n             JSONArray tmpls = m.getJSONArray(\"tmpls\");\n-            for (JSONObject tmpl: tmpls.jsonObjectIterable()) {\n-                ords.add(tmpl.getInt(\"ord\"));\n-            }\n             // cards with invalid ordinal\n             ArrayList<Long> ids = mDb.queryLongList(\n-                    \"SELECT id FROM cards WHERE ord NOT IN \" + Utils.ids2str(ords) + \" AND nid IN ( \" +\n+                    \"SELECT id FROM cards WHERE ord NOT IN \" + Utils.ids2str(tmpls) + \" AND nid IN ( \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTg0Njg2OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzo1Mjo1NlrOHv6n4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODoyMjoxOFrOHv7sZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNTYwMQ==", "bodyText": "shouldn't this be \"name\"?\nRegardless, I feel this method is more complex than the previous code, and would be better reverted.", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520005601", "createdAt": "2020-11-09T17:52:56Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {\n+        List<String> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object.getString(\"key\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwODM1NA==", "bodyText": "did you see the remaining of the changes of the last commit ?  Because the remaining seems nicer to me.\nOf course, the comment may need to be more clear", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520008354", "createdAt": "2020-11-09T17:57:25Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {\n+        List<String> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object.getString(\"key\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNTYwMQ=="}, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAxMDM1Mg==", "bodyText": "I initially thought about doing it simply with\ngetStringList(String key)\nto get the list of values (assumed to be string) of those objects. And then I realized that it only uses \"name\", so I removed the argument", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520010352", "createdAt": "2020-11-09T18:00:34Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {\n+        List<String> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object.getString(\"key\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNTYwMQ=="}, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAyMzE0Mg==", "bodyText": "I'd be happier with getStringList(String key), but I (slightly) think it's over-abstracted in general", "url": "https://github.com/ankidroid/Anki-Android/pull/7637#discussion_r520023142", "createdAt": "2020-11-09T18:22:18Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/JSONArray.java", "diffHunk": "@@ -384,4 +386,40 @@ public Long next() {\n             }\n         };\n     }\n+\n+    public List<JSONObject> toJSONObjectList() {\n+        List<JSONObject> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<Long> toLongList() {\n+        List<Long> l = new ArrayList<>(length());\n+        for (Long object : longIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+    public List<String> toStringList() {\n+        List<String> l = new ArrayList<>(length());\n+        for (String object : stringIterable()) {\n+            l.add(object);\n+        }\n+        return l;\n+    }\n+\n+\n+    /**\n+     * @return Given an array of object with names, get the names\n+     */\n+    public List<String> toNames() {\n+        List<String> l = new ArrayList<>(length());\n+        for (JSONObject object : jsonObjectIterable()) {\n+            l.add(object.getString(\"key\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAwNTYwMQ=="}, "originalCommit": {"oid": "4b5d59d870ea5c6bd2e245197f19698a6ce6f71c"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 715, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}