{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2Njg5NTEw", "number": 7084, "title": "[BugFix]: Restore backups as writable database", "bodyText": "Purpose / Description\nApp crashed after a database write if backups were restored from\nFixes\nFixes #7083\nApproach\nSimple 1-line fix to move time acquisition to before database locking\nHow Has This Been Tested?\n\ud83d\uded1 Manually, sadly, I could not get the test to fail on Windows\nLearning\nBy default, Robolectric assigns you 0 disk space\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-09-14T15:08:38Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7084", "merged": true, "mergeCommit": {"oid": "3ea1a2f3a158b7128c6a14608f52518d8886084a"}, "closed": true, "closedAt": "2020-09-14T17:13:23Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdI0mz0gH2gAyNDg2Njg5NTEwOmJjNDA1MmMwZGM4NmM0ZjMwOTYwNDk2NjMyNjMzMWVkNmVmYzgzZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI2bCTAFqTQ4Nzk4MTQ5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bc4052c0dc86c4f309604966326331ed6efc83d0", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/bc4052c0dc86c4f309604966326331ed6efc83d0", "committedDate": "2020-09-14T15:06:05Z", "message": "[BugFix]: Restore backups as writable database\n\nSadly, I could not get the test to complete on Windows\n\nFixes 7083"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODcxODkz", "url": "https://github.com/ankidroid/Anki-Android/pull/7084#pullrequestreview-487871893", "createdAt": "2020-09-14T15:09:00Z", "commit": {"oid": "bc4052c0dc86c4f309604966326331ed6efc83d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTowOTowMVrOHRZq3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTowOTowMVrOHRZq3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAwODQxNA==", "bodyText": "This could theoretically fail some tests in CI", "url": "https://github.com/ankidroid/Anki-Android/pull/7084#discussion_r488008414", "createdAt": "2020-09-14T15:09:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java", "diffHunk": "@@ -298,13 +306,18 @@ public void onPreExecute() {\n \n             @Override\n             public void onPostExecute(TaskData result) {\n+\n+                if (result == null || !result.getBoolean()) {\n+                    throw new IllegalArgumentException(\"Task failed\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc4052c0dc86c4f309604966326331ed6efc83d0"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3OTgxNDk5", "url": "https://github.com/ankidroid/Anki-Android/pull/7084#pullrequestreview-487981499", "createdAt": "2020-09-14T17:13:02Z", "commit": {"oid": "bc4052c0dc86c4f309604966326331ed6efc83d0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3973, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}