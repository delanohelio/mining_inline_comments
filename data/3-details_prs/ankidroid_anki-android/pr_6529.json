{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NjA1OTEz", "number": 6529, "title": "NF: replace mModels by getModels()", "bodyText": "This change has a single goal, making #6049 smaller. I believe that #6049 is my most important opened PR, it can help ankidroid starts faster, and a big reason while it seems to be a big commit is because it requires to uses a getter instead of using a direct access to the member element. So I hope that if this commit gets merged in ankidroid, the other commit will appear to be quite simpler", "createdAt": "2020-06-21T21:53:30Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6529", "merged": true, "mergeCommit": {"oid": "b0fb461f34bf846ba454a480f16e61c86cac0496"}, "closed": true, "closedAt": "2020-06-23T17:41:07Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctjufgAFqTQzNDUzNjUxMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuIAIdgFqTQzNTk1MTUwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTM2NTEy", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#pullrequestreview-434536512", "createdAt": "2020-06-21T22:10:08Z", "commit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1OTMwMTQx", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#pullrequestreview-435930141", "createdAt": "2020-06-23T16:00:50Z", "commit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowMDo1MFrOGnwGeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjowMDo1MFrOGnwGeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMzNTczNw==", "bodyText": "I really dislike that when I originally did progress reporting on database check in #5177 I hard coded the check count, because it leads to errors like this where we fail to maintain a magic constant that you can only derive by counting the verifications we perform.\nCan you revert the 27 -> 25 number?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int totalTasks = (getModels().all().size() * 4) + 25; // a few fixes are in all-models loops, the rest are one-offs\n          \n          \n            \n                    int totalTasks = (getModels().all().size() * 4) + 27; // a few fixes are in all-models loops, the rest are one-offs", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#discussion_r444335737", "createdAt": "2020-06-23T16:00:50Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -1504,7 +1504,7 @@ public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progress\n         File file = new File(mPath);\n         CheckDatabaseResult result = new CheckDatabaseResult(file.length());\n         final int[] currentTask = {1};\n-        int totalTasks = (mModels.all().size() * 4) + 27; // a few fixes are in all-models loops, the rest are one-offs\n+        int totalTasks = (getModels().all().size() * 4) + 25; // a few fixes are in all-models loops, the rest are one-offs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe14ae46be389fe43a92d72fd6c6ae64db8f9f47", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/fe14ae46be389fe43a92d72fd6c6ae64db8f9f47", "committedDate": "2020-06-23T16:23:28Z", "message": "replace mModels by getModels()"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f7c059b0eafdee9f3e9ba5877a987bf82e45ed5f", "committedDate": "2020-06-21T21:51:16Z", "message": "replace mModels by getModels()"}, "afterCommit": {"oid": "fe14ae46be389fe43a92d72fd6c6ae64db8f9f47", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/fe14ae46be389fe43a92d72fd6c6ae64db8f9f47", "committedDate": "2020-06-23T16:23:28Z", "message": "replace mModels by getModels()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1OTUxNTA4", "url": "https://github.com/ankidroid/Anki-Android/pull/6529#pullrequestreview-435951508", "createdAt": "2020-06-23T16:25:59Z", "commit": {"oid": "fe14ae46be389fe43a92d72fd6c6ae64db8f9f47"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3126, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}