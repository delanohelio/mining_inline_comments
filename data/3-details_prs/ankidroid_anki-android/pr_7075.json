{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2MTAzMDQ4", "number": 7075, "title": "Show useful error when col version is too high", "bodyText": "Draft\nThis is a draft so we can discuss the text and what we want to propose to the user.\nPurpose / Description\nThis means that the database has been upgraded, and there is currently no way of downgrading from an earlier version\nFixes\nFixes #7072\nDepends on #7073\nApproach\nCheck the database version and show a better dialog\nHow Has This Been Tested?\nAndroid 9\n\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-09-13T02:58:22Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7075", "merged": true, "mergeCommit": {"oid": "44c2c78407f39d07c76934cde5569fdc85d546b3"}, "closed": true, "closedAt": "2020-10-01T21:54:12Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIVmwVAFqTQ4NzI3MDMzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOV-r1gBqjM4MzA5NjMyNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwMzM0", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270334", "createdAt": "2020-09-13T02:58:58Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMjo1ODo1OFrOHQ5BbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMjo1ODo1OFrOHQ5BbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzUxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n                @Nullable", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473517", "createdAt": "2020-09-13T02:58:58Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CollectionHelper.java", "diffHunk": "@@ -368,4 +370,20 @@ public static void loadCollectionComplete(Collection col) {\n         col.getModels();\n     }\n \n+    public static boolean isFutureAnkiDroidVersion(Context context) {\n+        Integer databaseVersion = getDatabaseVersion(context);\n+        return databaseVersion != null && databaseVersion > SCHEMA_VERSION;\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwMzQ3", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270347", "createdAt": "2020-09-13T02:59:16Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMjo1OToxNlrOHQ5BgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMjo1OToxNlrOHQ5BgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzUzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                   // .itemsColor(ContextCompat.getColor(requireContext(), R.color.material_grey_500))", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473537", "createdAt": "2020-09-13T02:59:16Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/DatabaseErrorDialog.java", "diffHunk": "@@ -295,6 +300,31 @@ public MaterialDialog onCreateDialog(Bundle savedInstanceState) {\n                         .onPositive((inner_dialog, which) -> exit())\n                         .show();\n             }\n+            case DIALOG_DB_FUTURE_VERSION: {\n+                List<Integer> values = new ArrayList<>();\n+                CharSequence[] options = new CharSequence[] { UiUtil.makeBold(res.getString(R.string.backup_restore)), UiUtil.makeBold(res.getString(R.string.backup_full_sync_from_server)) };\n+                values.add(0);\n+                values.add(1);\n+                return builder\n+                        .cancelable(false)\n+                        .content(getMessage())\n+                        .iconAttr(R.attr.dialogErrorIcon)\n+                        .positiveText(res.getString(R.string.close))\n+                        .onPositive((inner_dialog, which) -> exit())\n+                        .items(options)\n+                       // .itemsColor(ContextCompat.getColor(requireContext(), R.color.material_grey_500))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwMzY2", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270366", "createdAt": "2020-09-13T02:59:45Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMjo1OTo0NVrOHQ5BtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMjo1OTo0NVrOHQ5BtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzU4OA==", "bodyText": "This might want a nicer abstraction as it's a rough copy of the same code in another method", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473588", "createdAt": "2020-09-13T02:59:45Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/DatabaseErrorDialog.java", "diffHunk": "@@ -295,6 +300,31 @@ public MaterialDialog onCreateDialog(Bundle savedInstanceState) {\n                         .onPositive((inner_dialog, which) -> exit())\n                         .show();\n             }\n+            case DIALOG_DB_FUTURE_VERSION: {\n+                List<Integer> values = new ArrayList<>();\n+                CharSequence[] options = new CharSequence[] { UiUtil.makeBold(res.getString(R.string.backup_restore)), UiUtil.makeBold(res.getString(R.string.backup_full_sync_from_server)) };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwMzcx", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270371", "createdAt": "2020-09-13T03:00:00Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMDowMFrOHQ5ByQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMDowMFrOHQ5ByQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzYwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Timber.w(e, \"Failed to get database version\");\n          \n          \n            \n                                Timber.w(e, \"Failed to get database version, using -1\");", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473609", "createdAt": "2020-09-13T03:00:00Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/DatabaseErrorDialog.java", "diffHunk": "@@ -334,6 +364,14 @@ private String getMessage() {\n                 return res().getString(R.string.backup_full_sync_from_server_question);\n             case DIALOG_DB_LOCKED:\n                 return res().getString(R.string.database_locked_summary);\n+            case DIALOG_DB_FUTURE_VERSION:\n+                Integer databaseVersion = null;\n+                try {\n+                    databaseVersion = CollectionHelper.getDatabaseVersion(requireContext());\n+                } catch (Exception e) {\n+                    Timber.w(e, \"Failed to get database version\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwMzg5", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270389", "createdAt": "2020-09-13T03:00:26Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMDoyNlrOHQ5B4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMDoyNlrOHQ5B4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzYzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Integer queryVer() {\n          \n          \n            \n                public int queryVer() {", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473633", "createdAt": "2020-09-13T03:00:26Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2134,6 +2134,10 @@ public Context getContext() {\n         return getDb().queryLongList(\"select id from cards where id in \" + Utils.ids2str(cards));\n     }\n \n+    public Integer queryVer() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwNDA0", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270404", "createdAt": "2020-09-13T03:01:03Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMTowNFrOHQ5CCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMTowNFrOHQ5CCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzY3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"database_version_title\">Downgrade Required</string>\n          \n          \n            \n                <string name=\"database_downgrade_required_title\">Downgrade Required</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473673", "createdAt": "2020-09-13T03:01:04Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/03-dialogs.xml", "diffHunk": "@@ -185,6 +185,10 @@\n     <string name=\"database_locked_title\">Database Locked</string>\n     <string name=\"database_locked_summary\">The AnkiDroid database is in use by another application. Please close the other application then reopen AnkiDroid.</string>\n \n+\n+    <string name=\"database_version_title\">Downgrade Required</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjcwNDEw", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-487270410", "createdAt": "2020-09-13T03:01:15Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMToxNVrOHQ5CGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QwMzowMToxNVrOHQ5CGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ3MzY4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"database_version_summary\">The AnkiDroid database must be downgraded, or AnkiDroid must be upgraded before it can be opened\\n\\nAnkiDroid version: %1$d\\nDatabase Version: %2$d\\n\\nPlease downgrade the database, or perform one of the following options</string>\n          \n          \n            \n                <string name=\"database_downgrade_required_summary\">The AnkiDroid database must be downgraded, or AnkiDroid must be upgraded before it can be opened\\n\\nAnkiDroid version: %1$d\\nDatabase Version: %2$d\\n\\nPlease downgrade the database, or perform one of the following options</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r487473688", "createdAt": "2020-09-13T03:01:15Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/03-dialogs.xml", "diffHunk": "@@ -185,6 +185,10 @@\n     <string name=\"database_locked_title\">Database Locked</string>\n     <string name=\"database_locked_summary\">The AnkiDroid database is in use by another application. Please close the other application then reopen AnkiDroid.</string>\n \n+\n+    <string name=\"database_version_title\">Downgrade Required</string>\n+    <string name=\"database_version_summary\">The AnkiDroid database must be downgraded, or AnkiDroid must be upgraded before it can be opened\\n\\nAnkiDroid version: %1$d\\nDatabase Version: %2$d\\n\\nPlease downgrade the database, or perform one of the following options</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDY2NTIw", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-499466520", "createdAt": "2020-09-30T14:04:05Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDowNDowNlrOHafNXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDowNDowNlrOHafNXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUzNjM0OA==", "bodyText": "would prefer a constant -1 int unknown, and a real value here. It's a concrete thing the idea of a version, and seems like it should be strictly known as a real integer or a known constant (-1) that is unknown, with a real Exception if it's unrecoverably busted. I just don't like Nulls really, I'll admit it.", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r497536348", "createdAt": "2020-09-30T14:04:06Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -45,6 +45,16 @@ public static Collection Collection(Context context, String path) {\n         return Collection(context, path, false, false);\n     }\n \n+    @Nullable\n+    public static Integer getDatabaseVersion(String path) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDczODU4", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-499473858", "createdAt": "2020-09-30T14:11:15Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxMToxNVrOHafiaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxMToxNVrOHafiaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU0MTczOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"database_version_summary\">The AnkiDroid database must be downgraded, or AnkiDroid must be upgraded before it can be opened\\n\\nAnkiDroid version: %1$d\\nDatabase Version: %2$d\\n\\nPlease downgrade the database, or perform one of the following options</string>\n          \n          \n            \n                <string name=\"database_version_summary\">The database is a more advanced version than this version of AnkiDroid can work with. Upgrade AnkiDroid or downgrade the database to open it\\n\\nAnkiDroid version: %1$d\\nDatabase Version: %2$d. The following restore options will overwrite your current collection, possibly with a compatible database version:</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#discussion_r497541739", "createdAt": "2020-09-30T14:11:15Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/03-dialogs.xml", "diffHunk": "@@ -185,6 +185,10 @@\n     <string name=\"database_locked_title\">Database Locked</string>\n     <string name=\"database_locked_summary\">The AnkiDroid database is in use by another application. Please close the other application then reopen AnkiDroid.</string>\n \n+\n+    <string name=\"database_version_title\">Downgrade Required</string>\n+    <string name=\"database_version_summary\">The AnkiDroid database must be downgraded, or AnkiDroid must be upgraded before it can be opened\\n\\nAnkiDroid version: %1$d\\nDatabase Version: %2$d\\n\\nPlease downgrade the database, or perform one of the following options</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDc2Mzgx", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-499476381", "createdAt": "2020-09-30T14:13:40Z", "commit": {"oid": "2cfa1e28608e36c67ea0bf4c7e277b65d4bfb465"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ba8c9a4829c7a060080f8113684ea4c6dec71a2", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2ba8c9a4829c7a060080f8113684ea4c6dec71a2", "committedDate": "2020-10-01T07:49:10Z", "message": "Update AnkiDroid/src/main/res/values/03-dialogs.xml\n\nCo-authored-by: Mike Hardy <github@mikehardy.net>"}, "afterCommit": {"oid": "98cd640b9336d4deb4cafa1d0fd9bc2d0a8ec036", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/98cd640b9336d4deb4cafa1d0fd9bc2d0a8ec036", "committedDate": "2020-10-01T11:44:07Z", "message": "Show useful error when col version is too high\n\nThis means that the database has been upgraded, and there is currently no\nway of downgrading from an earlier version\n\nFixes 7072"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98cd640b9336d4deb4cafa1d0fd9bc2d0a8ec036", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/98cd640b9336d4deb4cafa1d0fd9bc2d0a8ec036", "committedDate": "2020-10-01T11:44:07Z", "message": "Show useful error when col version is too high\n\nThis means that the database has been upgraded, and there is currently no\nway of downgrading from an earlier version\n\nFixes 7072"}, "afterCommit": {"oid": "954feb3e0aa442d7bf1e337604c032d9795fe55a", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/954feb3e0aa442d7bf1e337604c032d9795fe55a", "committedDate": "2020-10-01T13:45:48Z", "message": "Show useful error when col version is too high\n\nThis means that the database has been upgraded, and there is currently no\nway of downgrading from an earlier version\n\nFixes 7072"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDAzMjgw", "url": "https://github.com/ankidroid/Anki-Android/pull/7075#pullrequestreview-500403280", "createdAt": "2020-10-01T14:24:28Z", "commit": {"oid": "954feb3e0aa442d7bf1e337604c032d9795fe55a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c74fccac1bd9cf79281bd2da548d8a7525c5d9d", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0c74fccac1bd9cf79281bd2da548d8a7525c5d9d", "committedDate": "2020-10-01T18:48:22Z", "message": "Show useful error when col version is too high\n\nThis means that the database has been upgraded, and there is currently no\nway of downgrading from an earlier version\n\nFixes 7072"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "954feb3e0aa442d7bf1e337604c032d9795fe55a", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/954feb3e0aa442d7bf1e337604c032d9795fe55a", "committedDate": "2020-10-01T13:45:48Z", "message": "Show useful error when col version is too high\n\nThis means that the database has been upgraded, and there is currently no\nway of downgrading from an earlier version\n\nFixes 7072"}, "afterCommit": {"oid": "0c74fccac1bd9cf79281bd2da548d8a7525c5d9d", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0c74fccac1bd9cf79281bd2da548d8a7525c5d9d", "committedDate": "2020-10-01T18:48:22Z", "message": "Show useful error when col version is too high\n\nThis means that the database has been upgraded, and there is currently no\nway of downgrading from an earlier version\n\nFixes 7072"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3967, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}