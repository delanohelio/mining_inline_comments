{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzOTg2MDg4", "number": 7600, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTozNjo0MVrOE0V4RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTozODowN1rOE0V5uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMzE5ODc3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTozNjo0MVrOHsA2Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo0Mzo1NlrOHsBEKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxMzMxNQ==", "bodyText": "What's the extra comma for?", "url": "https://github.com/ankidroid/Anki-Android/pull/7600#discussion_r515913315", "createdAt": "2020-11-02T11:36:41Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java", "diffHunk": "@@ -2609,14 +2609,9 @@ public void confirmDeckDeletion(long did) {\n             return;\n         }\n         // Get the number of cards contained in this deck and its subdecks\n-        TreeMap<String, Long> children = getCol().getDecks().children(did);\n-        long[] dids = new long[children.size() + 1];\n-        dids[0] = did;\n-        int i = 1;\n-        for (Long l : children.values()) {\n-            dids[i++] = l;\n-        }\n-        String ids = Utils.ids2str(dids);\n+        java.util.Collection<Long> children = getCol().getDecks().children(did).values();\n+        children.add(did);\n+        String ids = Utils.ids2str(children)+ \",\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a9f798b5faa4e8f1a2f7931821f8338984de6bb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxNjg0Mw==", "bodyText": "THe inital goal was to add the element directly. I then realized it would really not work and so changed and added it in the set of values", "url": "https://github.com/ankidroid/Anki-Android/pull/7600#discussion_r515916843", "createdAt": "2020-11-02T11:43:56Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java", "diffHunk": "@@ -2609,14 +2609,9 @@ public void confirmDeckDeletion(long did) {\n             return;\n         }\n         // Get the number of cards contained in this deck and its subdecks\n-        TreeMap<String, Long> children = getCol().getDecks().children(did);\n-        long[] dids = new long[children.size() + 1];\n-        dids[0] = did;\n-        int i = 1;\n-        for (Long l : children.values()) {\n-            dids[i++] = l;\n-        }\n-        String ids = Utils.ids2str(dids);\n+        java.util.Collection<Long> children = getCol().getDecks().children(did).values();\n+        children.add(did);\n+        String ids = Utils.ids2str(children)+ \",\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxMzMxNQ=="}, "originalCommit": {"oid": "5a9f798b5faa4e8f1a2f7931821f8338984de6bb"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMzIwMTY5OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTozNzo0OFrOHsA4Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo0NDo1MFrOHsBGEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxMzgxMQ==", "bodyText": "You can't use array.toString()", "url": "https://github.com/ankidroid/Anki-Android/pull/7600#discussion_r515913811", "createdAt": "2020-11-02T11:37:48Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2042,7 +2042,7 @@ private void _closeLog() {\n      */\n     public void setUserFlag(int flag, long[] cids)  {\n         assert (0<= flag && flag <= 7);\n-        mDb.execute(\"update cards set flags = (flags & ~?) | ?, usn=?, mod=? where id in \" + Utils.ids2str(cids),\n+        mDb.execute(\"update cards set flags = (flags & ~?) | ?, usn=?, mod=? where id in \" + cids,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a9f798b5faa4e8f1a2f7931821f8338984de6bb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxNzMzMA==", "bodyText": "This is clearly a mistake. I just wanted to remove conversion. thanks", "url": "https://github.com/ankidroid/Anki-Android/pull/7600#discussion_r515917330", "createdAt": "2020-11-02T11:44:50Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2042,7 +2042,7 @@ private void _closeLog() {\n      */\n     public void setUserFlag(int flag, long[] cids)  {\n         assert (0<= flag && flag <= 7);\n-        mDb.execute(\"update cards set flags = (flags & ~?) | ?, usn=?, mod=? where id in \" + Utils.ids2str(cids),\n+        mDb.execute(\"update cards set flags = (flags & ~?) | ?, usn=?, mod=? where id in \" + cids,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxMzgxMQ=="}, "originalCommit": {"oid": "5a9f798b5faa4e8f1a2f7931821f8338984de6bb"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMzIwMjQ4OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTozODowN1rOHsA42A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo1MTowMVrOHsBSYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxMzk0NA==", "bodyText": "Ditto - and this needs regression coverage, as the breakage wasn't caught.", "url": "https://github.com/ankidroid/Anki-Android/pull/7600#discussion_r515913944", "createdAt": "2020-11-02T11:38:07Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2193,7 +2193,7 @@ public Context getContext() {\n     /** Not in libAnki */\n     @CheckResult\n     public List<Long> filterToValidCards(long[] cards) {\n-        return getDb().queryLongList(\"select id from cards where id in \" + Utils.ids2str(cards));\n+        return getDb().queryLongList(\"select id from cards where id in \" + cards);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a9f798b5faa4e8f1a2f7931821f8338984de6bb"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkyMDQ4Mg==", "bodyText": "Added", "url": "https://github.com/ankidroid/Anki-Android/pull/7600#discussion_r515920482", "createdAt": "2020-11-02T11:51:01Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -2193,7 +2193,7 @@ public Context getContext() {\n     /** Not in libAnki */\n     @CheckResult\n     public List<Long> filterToValidCards(long[] cards) {\n-        return getDb().queryLongList(\"select id from cards where id in \" + Utils.ids2str(cards));\n+        return getDb().queryLongList(\"select id from cards where id in \" + cards);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxMzk0NA=="}, "originalCommit": {"oid": "5a9f798b5faa4e8f1a2f7931821f8338984de6bb"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 704, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}