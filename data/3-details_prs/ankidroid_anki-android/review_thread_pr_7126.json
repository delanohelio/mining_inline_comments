{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MzQzODU0", "number": 7126, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwMjo1MDo0MFrOEkVIng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwMjo1MDo0MFrOEkVIng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2NTMwNDYyOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/utils/AdaptionUtil.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwMjo1MDo0MFrOHTNiTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwMjo1MDo0MFrOHTNiTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTkwNjc2NQ==", "bodyText": "\ud83e\udd23", "url": "https://github.com/ankidroid/Anki-Android/pull/7126#discussion_r489906765", "createdAt": "2020-09-17T02:50:40Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/utils/AdaptionUtil.java", "diffHunk": "@@ -121,4 +123,34 @@ public static boolean isRestrictedLearningDevice() {\n         }\n         return sIsRestrictedLearningDevice;\n     }\n+\n+    public static boolean canUseContextMenu() {\n+        return !isRunningMiui();\n+    }\n+\n+    private static boolean isRunningMiui() {\n+        if (sIsRunningMiUI == null) {\n+            sIsRunningMiUI = queryIsMiui();\n+        }\n+        return sIsRunningMiUI;\n+    }\n+\n+    // https://stackoverflow.com/questions/47610456/how-to-detect-miui-rom-programmatically-in-android\n+    private static boolean isIntentResolved(Context ctx, Intent intent) {\n+        return (intent != null && ctx.getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY) != null);\n+    }\n+\n+    private static boolean queryIsMiui() {\n+        Context ctx = AnkiDroidApp.getInstance();\n+        return isIntentResolved(ctx, new Intent(\"miui.intent.action.OP_AUTO_START\").addCategory(Intent.CATEGORY_DEFAULT))\n+                || isIntentResolved(ctx, new Intent().setComponent(new ComponentName(\"com.miui.securitycenter\", \"com.miui.permcenter.autostart.AutoStartManagementActivity\")))\n+                || isIntentResolved(ctx, new Intent(\"miui.intent.action.POWER_HIDE_MODE_APP_LIST\").addCategory(Intent.CATEGORY_DEFAULT))\n+                || isIntentResolved(ctx, new Intent().setComponent(new ComponentName(\"com.miui.securitycenter\", \"com.miui.powercenter.PowerSettings\")));\n+    }\n+\n+\n+    @SuppressWarnings( {\"unused\", \"RedundantSuppression\"})\n+    public static boolean shouldCurrentUserBuyDifferentPhone() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74225f894db2f8e4bf40706cfa3cb60377a7213b"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 854, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}