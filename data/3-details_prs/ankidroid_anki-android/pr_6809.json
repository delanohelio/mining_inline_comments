{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMDAyMzgy", "number": 6809, "title": "Preserve launcher animation by not animating IntentHandler finish", "bodyText": "Pull Request template\nPurpose / Description\nFixes #5143 by letting IntentHandler just finish, if it specifies an animation\nit actually clobbers whatever system launcher animation is specified.\nPiexel Launcher seems to override the override but Nova Launcher respects it,\nmeaning you don't get the Nova Launcher animation you configure\nHow Has This Been Tested?\nI used an API29 Google Play version emulator so I could install Nova, then I alternated launching the app with Google Pixel launcher (always does the zoom-type launch) and Nova (started as described in the linked issue, but now will do whatever animation you configure Nova to launch)\nLearning (optional, can help others)\nAnkiDroid has a surprising amount of Activity transition animation infrastructure, and we should probably use it more, in a consistent way, to signal to the user where they are (like, always slide in from right when going more detailed, always slide out to right when going less detailed)\nBut! You do still want to call Activity.finish() so user can't go back: https://stackoverflow.com/a/43363868/9910298\nSometimes it takes\n\nan hour of learning, and\n10 minutes of tests, in order to realize you just need to\ndelete one line of code.\nThen 5 minutes of review to realize\nYou actually just want a plain Activity.finish() not a fancy one\n\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-08-04T20:53:08Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6809", "merged": true, "mergeCommit": {"oid": "926023820a2fe7734e0e735617e715cb76afa7fa"}, "closed": true, "closedAt": "2020-08-05T03:54:55Z", "author": {"login": "mikehardy"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7tJntgFqTQ2MTE3MzI5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7t0CjgFqTQ2MTE5OTE1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTczMjk1", "url": "https://github.com/ankidroid/Anki-Android/pull/6809#pullrequestreview-461173295", "createdAt": "2020-08-04T21:03:49Z", "commit": {"oid": "09e27185cd2fafbaa9f37f9a92e14cfc6cc63faa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMTowMzo0OVrOG7xbtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMTowMzo0OVrOG7xbtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyOTA3OA==", "bodyText": "Silly question: don't we still want a finish() here?", "url": "https://github.com/ankidroid/Anki-Android/pull/6809#discussion_r465329078", "createdAt": "2020-08-04T21:03:49Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/IntentHandler.java", "diffHunk": "@@ -144,7 +144,6 @@ private void launchDeckPickerIfNoOtherTasks(Intent reloadIntent) {\n         reloadIntent.addCategory(Intent.CATEGORY_LAUNCHER);\n         reloadIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n         startActivityIfNeeded(reloadIntent, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09e27185cd2fafbaa9f37f9a92e14cfc6cc63faa"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "committedDate": "2020-08-04T21:34:44Z", "message": "Preserve launcher animation by not animating IntentHandler finish\n\nFixes #5143 by letting IntentHandler just finish, if it specifies an animation\nit actually clobbers whatever system launcher animation is specified.\n\nPixel Launcher seems to override the override but Nova Launcher respects it,\nmeaning you don't get the Nova Launcher animation you configure"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09e27185cd2fafbaa9f37f9a92e14cfc6cc63faa", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/09e27185cd2fafbaa9f37f9a92e14cfc6cc63faa", "committedDate": "2020-08-04T20:45:23Z", "message": "Preserve launcher animation by not animating IntentHandler finish\n\nFixes #5143 by letting IntentHandler just finish, if it specifies an animation\nit actually clobbers whatever system launcher animation is specified.\n\nPiexel Launcher seems to override the override but Nova Launcher respects it,\nmeaning you don't get the Nova Launcher animation you configure"}, "afterCommit": {"oid": "a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "author": {"user": {"login": "mikehardy", "name": "Mike Hardy"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "committedDate": "2020-08-04T21:34:44Z", "message": "Preserve launcher animation by not animating IntentHandler finish\n\nFixes #5143 by letting IntentHandler just finish, if it specifies an animation\nit actually clobbers whatever system launcher animation is specified.\n\nPixel Launcher seems to override the override but Nova Launcher respects it,\nmeaning you don't get the Nova Launcher animation you configure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTk5MTUw", "url": "https://github.com/ankidroid/Anki-Android/pull/6809#pullrequestreview-461199150", "createdAt": "2020-08-04T21:50:11Z", "commit": {"oid": "a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3098, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}