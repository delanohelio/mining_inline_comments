{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5OTA4MTcy", "number": 5733, "title": "Added review options related to the automatic showing of answer specific to a group of decks", "bodyText": "Purpose / Description\nThe 'Automatic display answer' settings are very useful for increasing the speed of review. Nonetheless, different decks have different needs and, as a user, I always felt that having a single set of settings for all decks was not enough.  As such, I decided to search for a way to solve this. I did not find a solution, only a related issue. For a while now, I've changing the settings between decks, which is cumbersome.\nThis commit adds 'Automatic display answer' to the group options, allowing for the user to use either the specific settings of a group or use the general ones.\nFixes\nAn issue I found related to this: #3838\nApproach\nThis commit adds 'Automatic display answer' to the group options, allowing for the user to use either the specific settings of a group or use the general ones.\nHow Has This Been Tested?\nI've used an emulator and created different decks, on different groups. Changed the options of one of the groups to use specific settings and tested them to make sure they were using the correct settings.", "createdAt": "2020-02-01T15:16:36Z", "url": "https://github.com/ankidroid/Anki-Android/pull/5733", "merged": true, "mergeCommit": {"oid": "2c1564c43651561d52e2b69972da4297750dee35"}, "closed": true, "closedAt": "2020-02-10T02:06:11Z", "author": {"login": "correia55"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAE5zFAH2gAyMzY5OTA4MTcyOjNiZWQ1OGZhMzRjYzRkZTlhMzRhOWJlM2RmMzZkYTcwYjUzOTdiNzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAdKSdAFqTM1MTk2MDQ4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3bed58fa34cc4de9a34a9be3df36da70b5397b72", "author": {"user": {"login": "correia55", "name": "Ac\u00e1cio Correia"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/3bed58fa34cc4de9a34a9be3df36da70b5397b72", "committedDate": "2020-02-01T14:48:50Z", "message": "Added review options related to the automatic showing of answer specific to a group of decks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTAzNjM3", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#pullrequestreview-351903637", "createdAt": "2020-02-01T20:40:54Z", "commit": {"oid": "3bed58fa34cc4de9a34a9be3df36da70b5397b72"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQyMDo0MDo1NVrOFkfBQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQyMDo0MjowN1rOFkfBgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTI4Mw==", "bodyText": "this needs to be a string in the translations area - just adding it to the primary one (english) is sufficient, the rest will be handled by crowdin / community translators", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373801283", "createdAt": "2020-02-01T20:40:55Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/xml/deck_options.xml", "diffHunk": "@@ -135,6 +135,33 @@\n                 android:key=\"revBury\"\n                 android:summary=\"@string/deck_conf_rev_bury_summ\"\n                 android:title=\"@string/deck_conf_rev_bury\" />\n+\n+            <CheckBoxPreference\n+                android:defaultValue=\"true\"\n+                android:disableDependentsState=\"true\"\n+                android:key=\"revUseGeneralTimeoutSettings\"\n+                android:title=\"Use general 'Automatic display answer' settings\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bed58fa34cc4de9a34a9be3df36da70b5397b72"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTM0Ng==", "bodyText": "I am going to assume (without actually knowing) that the number 20 was chosen on purpose, and in any case it was 20 before, if it stayed at 20 then your change adds a feature without changing current experience for people, and that has value. I think it's in about 3 places, could you change all the 6's to 20s to match current default setting?", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373801346", "createdAt": "2020-02-01T20:42:07Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1715,8 +1728,8 @@ protected SharedPreferences restorePreferences() {\n         mRelativeButtonSize = preferences.getInt(\"answerButtonSize\", 100);\n         mSpeakText = preferences.getBoolean(\"tts\", false);\n         mPrefUseTimer = preferences.getBoolean(\"timeoutAnswer\", false);\n-        mWaitAnswerSecond = preferences.getInt(\"timeoutAnswerSeconds\", 20);\n-        mWaitQuestionSecond = preferences.getInt(\"timeoutQuestionSeconds\", 60);\n+        mPrefWaitAnswerSecond = preferences.getInt(\"timeoutAnswerSeconds\", 6);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bed58fa34cc4de9a34a9be3df36da70b5397b72"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952", "author": {"user": {"login": "correia55", "name": "Ac\u00e1cio Correia"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7b86ec777a26531d1bfe874189e761f8fda22952", "committedDate": "2020-02-01T22:41:42Z", "message": "Option string moved to xml translations file\nChanged the default value to 20 for all of the timeoutAnswer related variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTQ2Mjkw", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#pullrequestreview-351946290", "createdAt": "2020-02-02T14:46:28Z", "commit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQxNDo0NjoyOFrOFkiFGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQxNDo1MDoyM1rOFkiGCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTQxOQ==", "bodyText": "down to just whitespace things now, not sure why this did not trigger our codacy rules - I'll check that separately\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (mOptUseGeneralTimerSettings){\n          \n          \n            \n                    if (mOptUseGeneralTimerSettings) {", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851419", "createdAt": "2020-02-02T14:46:28Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1945,8 +1966,19 @@ protected void displayCardQuestion() {\n         updateCard(displayString);\n         hideEaseButtons();\n \n+        // Check if it should use the general 'Timeout settings' or the ones specific to this deck\n+        if (mOptUseGeneralTimerSettings){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTQ0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }else{\n          \n          \n            \n                    } else {", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851449", "createdAt": "2020-02-02T14:46:40Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1945,8 +1966,19 @@ protected void displayCardQuestion() {\n         updateCard(displayString);\n         hideEaseButtons();\n \n+        // Check if it should use the general 'Timeout settings' or the ones specific to this deck\n+        if (mOptUseGeneralTimerSettings){\n+            mUseTimer = mPrefUseTimer;\n+            mWaitAnswerSecond = mPrefWaitAnswerSecond;\n+            mWaitQuestionSecond = mPrefWaitQuestionSecond;\n+        }else{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTUzNQ==", "bodyText": "This will be clobbered and in fact mess with our translation push/pull scripts to/from crowdin - you must only add strings to the default strings file, not any translations - can you remove these lines?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\'</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851535", "createdAt": "2020-02-02T14:48:14Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values-pt-rPT/10-preferences.xml", "diffHunk": "@@ -221,6 +221,8 @@\n     <string name=\"deck_conf_new_bury_summ\">As fichas novas relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n     <string name=\"deck_conf_rev_bury\">Ocultar revis\u00f5es relacionadas</string>\n     <string name=\"deck_conf_rev_bury_summ\">As revis\u00f5es relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\'</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTU1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings_summ\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\' em vez de utilizar as defini\u00e7\u00f5es deste grupo</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851550", "createdAt": "2020-02-02T14:48:26Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values-pt-rPT/10-preferences.xml", "diffHunk": "@@ -221,6 +221,8 @@\n     <string name=\"deck_conf_new_bury_summ\">As fichas novas relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n     <string name=\"deck_conf_rev_bury\">Ocultar revis\u00f5es relacionadas</string>\n     <string name=\"deck_conf_rev_bury_summ\">As revis\u00f5es relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\'</string>\n+    <string name=\"deck_conf_use_general_timeout_settings_summ\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\' em vez de utilizar as defini\u00e7\u00f5es deste grupo</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTYyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            --><resources xmlns:tools=\"http://schemas.android.com/tools\">\n          \n          \n            \n            --><resources>\n          \n      \n    \n    \n  \n\nnone of the other translations do this, so I'd like to keep this PR focused vs changing unrelated styles of doing things", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851623", "createdAt": "2020-02-02T14:49:39Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -17,7 +17,7 @@\n ~\n ~ You should have received a copy of the GNU General Public License along with\n ~ this program.  If not, see <http://www.gnu.org/licenses/>.\n---><resources>\n+--><resources xmlns:tools=\"http://schemas.android.com/tools\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTY0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings</string>\n          \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Use general \\'Automatic display answer\\' settings</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851643", "createdAt": "2020-02-02T14:50:05Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -204,6 +204,8 @@\n     <string name=\"deck_conf_new_bury_summ\">Related new cards are buried until the next day</string>\n     <string name=\"deck_conf_rev_bury\">Bury related reviews</string>\n     <string name=\"deck_conf_rev_bury_summ\">Related reviews are buried until the next day</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTY1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings_summ\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings instead of using the settings for this group</string>\n          \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings_summ\">Use general \\'Automatic display answer\\' settings instead of using the settings for this group</string>", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851656", "createdAt": "2020-02-02T14:50:23Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -204,6 +204,8 @@\n     <string name=\"deck_conf_new_bury_summ\">Related new cards are buried until the next day</string>\n     <string name=\"deck_conf_rev_bury\">Bury related reviews</string>\n     <string name=\"deck_conf_rev_bury_summ\">Related reviews are buried until the next day</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings</string>\n+    <string name=\"deck_conf_use_general_timeout_settings_summ\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings instead of using the settings for this group</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "445b368e15da37f4b2b17fa53730d6e7a4e0c968", "author": {"user": {"login": "correia55", "name": "Ac\u00e1cio Correia"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/445b368e15da37f4b2b17fa53730d6e7a4e0c968", "committedDate": "2020-02-02T15:39:26Z", "message": "Fixed code style\nRemoved ignore missing translations\nRemoved portuguese translations for timeout"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTUxODM5", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#pullrequestreview-351951839", "createdAt": "2020-02-02T16:20:35Z", "commit": {"oid": "445b368e15da37f4b2b17fa53730d6e7a4e0c968"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQxNjoyMDozNVrOFkiddA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQxNjoyMDozNVrOFkiddA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1NzY1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Use general \\'Automatic display answer\\' settings</string>\n          \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Use general settings</string>\n          \n      \n    \n    \n  \n\nThanks for posting the screenshot! I just realized this was long enough it would face ellision so I think it is better to shorten the non-wrappable heading", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373857652", "createdAt": "2020-02-02T16:20:35Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -204,6 +204,8 @@\n     <string name=\"deck_conf_new_bury_summ\">Related new cards are buried until the next day</string>\n     <string name=\"deck_conf_rev_bury\">Bury related reviews</string>\n     <string name=\"deck_conf_rev_bury_summ\">Related reviews are buried until the next day</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\">Use general \\'Automatic display answer\\' settings</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "445b368e15da37f4b2b17fa53730d6e7a4e0c968"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d39a7780d9bd621d98370abedbf76baf2480a83", "author": {"user": {"login": "correia55", "name": "Ac\u00e1cio Correia"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/7d39a7780d9bd621d98370abedbf76baf2480a83", "committedDate": "2020-02-02T19:02:48Z", "message": "Changed use general settings option title\n\nCo-Authored-By: Mike Hardy <github@mikehardy.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTYwNDg1", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#pullrequestreview-351960485", "createdAt": "2020-02-02T19:04:34Z", "commit": {"oid": "7d39a7780d9bd621d98370abedbf76baf2480a83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3667, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}