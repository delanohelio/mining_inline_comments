{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMzA4OTk1", "number": 6262, "title": "Remove unnecessary version code checks", "bodyText": "Pull Request template\nPurpose / Description\nSince minSdkVersion was bumped to 16 (Jelly Bean) all these checks are\nnow constant and can be simplified\nFixes\nNo issue\nApproach\nInitially found one of them as lint issue, the rest was found with grep for SDK_INT and getSdkVersion\nHow Has This Been Tested?\nSince this is a purely mechanical change I just checked that it launches and basic scenarios work\nChecklist\nPlease, go through these checks before submitting the PR.\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-05-23T18:17:14Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6262", "merged": true, "mergeCommit": {"oid": "a48b56d5bce71840f8f53a7e9abc86da6d77c50f"}, "closed": true, "closedAt": "2020-05-23T23:17:24Z", "author": {"login": "RSBat"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckLU4PgFqTQxNzI5OTQwNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABckOV12gFqTQxNzMxMjI5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mjk5NDA1", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#pullrequestreview-417299405", "createdAt": "2020-05-23T18:37:15Z", "commit": {"oid": "e4c5317bda2e9608858591da7a45eb65a04db13b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxODozNzoxNVrOGZqx9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxODozNzoxNVrOGZqx9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODUwMA==", "bodyText": "Can we remove this preference entirely?", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#discussion_r429568500", "createdAt": "2020-05-23T18:37:15Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/Preferences.java", "diffHunk": "@@ -886,9 +886,7 @@ private void removeUnnecessaryAdvancedPrefs(PreferenceScreen screen) {\n             CheckBoxPreference fixHebrewText = (CheckBoxPreference) screen.findPreference(\"fixHebrewText\");\n             CompatHelper.removeHiddenPreferences(this.getApplicationContext());\n \n-            if (CompatHelper.getSdkVersion() >= 16) {\n-                workarounds.removePreference(fixHebrewText);\n-            }\n+            workarounds.removePreference(fixHebrewText);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4c5317bda2e9608858591da7a45eb65a04db13b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c1aeffe765834b32341874ea57a27b3687205a36", "committedDate": "2020-05-23T19:48:59Z", "message": "Remove unnecessary version code checks\n\nSince minSdkVersion was bumped to 16 (Jelly Bean) all these checks are\nnow constant and can be simplified"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4c5317bda2e9608858591da7a45eb65a04db13b", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e4c5317bda2e9608858591da7a45eb65a04db13b", "committedDate": "2020-05-23T18:03:18Z", "message": "Remove unnecessary version code checks\n\nSince minSdkVersion was bumped to 16 (Jelly Bean) all these checks are\nnow constant and can be simplified"}, "afterCommit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c1aeffe765834b32341874ea57a27b3687205a36", "committedDate": "2020-05-23T19:48:59Z", "message": "Remove unnecessary version code checks\n\nSince minSdkVersion was bumped to 16 (Jelly Bean) all these checks are\nnow constant and can be simplified"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzA1MjMz", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#pullrequestreview-417305233", "createdAt": "2020-05-23T20:06:57Z", "commit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMDowNjo1N1rOGZrJOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMDowNjo1N1rOGZrJOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU3NDQ1OA==", "bodyText": "Sorry about the mess, thank you!", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#discussion_r429574458", "createdAt": "2020-05-23T20:06:57Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/test/java/com/ichi2/compat/customtabs/CustomTabActivityHelperTest.java", "diffHunk": "@@ -58,7 +68,13 @@ public void invalidClientMeansFallbackIsCalled() {\n         customTabActivityHelper.onServiceConnected(badClient);\n \n         CustomTabActivityHelper.CustomTabFallback fallback = mock(CustomTabActivityHelper.CustomTabFallback.class);\n-        CustomTabActivityHelper.openCustomTab(null, null, null, fallback);\n+        Activity activity = mock(Activity.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzA2NjYw", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#pullrequestreview-417306660", "createdAt": "2020-05-23T20:27:36Z", "commit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMDoyNzozNlrOGZrOlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMDoyODowOFrOGZrOug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU3NTgzMA==", "bodyText": "should get rid of this at the same time I think since it is going away completely", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#discussion_r429575830", "createdAt": "2020-05-23T20:27:36Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/compat/CompatHelper.java", "diffHunk": "@@ -96,8 +96,6 @@ public static boolean hasScrollKeys() {\n \n     public static void removeHiddenPreferences(Context context) {\n         SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n-        if (getSdkVersion() >= 16) {\n-            preferences.edit().remove(\"fixHebrewText\").apply();\n-        }\n+        preferences.edit().remove(\"fixHebrewText\").apply();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU3NTg2Ng==", "bodyText": "This is unrelated to the PR. I'm not against the change but PRs in general should stay focused on a single purpose", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#discussion_r429575866", "createdAt": "2020-05-23T20:28:08Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/compat/customtabs/CustomTabActivityHelper.java", "diffHunk": "@@ -51,7 +52,7 @@\n      * @param uri the Uri to be opened.\n      * @param fallback a CustomTabFallback to be used if Custom Tabs is not available.\n      */\n-    public static void openCustomTab(Activity activity,\n+    public static void openCustomTab(@NonNull Activity activity,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1aeffe765834b32341874ea57a27b3687205a36"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e1b02bb3f3ffbfb48dc190fbb4496c037133a02", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/9e1b02bb3f3ffbfb48dc190fbb4496c037133a02", "committedDate": "2020-05-23T20:52:40Z", "message": "Remove \"Hebrew fix\" preference\n\nThis preference was not shown on api >= 16. Now minSdkVersion is 16\nso it will never be shown and can be safely removed."}, "afterCommit": {"oid": "6347d6690decec4024771b8e18afa9466165d9b4", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6347d6690decec4024771b8e18afa9466165d9b4", "committedDate": "2020-05-23T21:07:22Z", "message": "Remove \"Hebrew fix\" preference\n\nThis preference was not shown on api >= 16. Now minSdkVersion is 16\nso it will never be shown and can be safely removed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514c15959fc9d1767318103473e981b084487746", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/514c15959fc9d1767318103473e981b084487746", "committedDate": "2020-05-23T21:37:22Z", "message": "Remove \"Hebrew fix\" preference\n\nThis preference was not shown on api >= 16. Now minSdkVersion is 16\nso it will never be shown and can be safely removed."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6347d6690decec4024771b8e18afa9466165d9b4", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/6347d6690decec4024771b8e18afa9466165d9b4", "committedDate": "2020-05-23T21:07:22Z", "message": "Remove \"Hebrew fix\" preference\n\nThis preference was not shown on api >= 16. Now minSdkVersion is 16\nso it will never be shown and can be safely removed."}, "afterCommit": {"oid": "514c15959fc9d1767318103473e981b084487746", "author": {"user": {"login": "RSBat", "name": "Sergei Kozelko"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/514c15959fc9d1767318103473e981b084487746", "committedDate": "2020-05-23T21:37:22Z", "message": "Remove \"Hebrew fix\" preference\n\nThis preference was not shown on api >= 16. Now minSdkVersion is 16\nso it will never be shown and can be safely removed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzEyMTgw", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#pullrequestreview-417312180", "createdAt": "2020-05-23T22:07:38Z", "commit": {"oid": "514c15959fc9d1767318103473e981b084487746"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMjowNzozOFrOGZrmTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QyMjowNzozOFrOGZrmTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4MTkwMA==", "bodyText": "Just a note for @Arthur-Milchior if you are working on Hooks that the HebreFixFilter hook is going away in this PR, it is dropped as no longer needed now that we are minSdkVersion of API16 for Android from #5665", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#discussion_r429581900", "createdAt": "2020-05-23T22:07:38Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/hooks/Hooks.java", "diffHunk": "@@ -53,9 +53,6 @@ private Hooks(Context context) {\n         new Leech().installHook(this);\n \n         // Preferences activated hooks\n-        if (prefs.getBoolean(\"fixHebrewText\", false)) {\n-            HebrewFixFilter.install(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "514c15959fc9d1767318103473e981b084487746"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzEyMjk3", "url": "https://github.com/ankidroid/Anki-Android/pull/6262#pullrequestreview-417312297", "createdAt": "2020-05-23T22:09:53Z", "commit": {"oid": "514c15959fc9d1767318103473e981b084487746"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3327, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}