{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNzUxNjkx", "number": 7291, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxNzo1OToyNVrOEn28KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxODowMDo0NVrOEn28nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjMwMDU3OnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxNzo1OToyNVrOHYo66Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxNzo1OToyNVrOHYo66Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU5ODMxMw==", "bodyText": "\"sort field\" usually means \"the field from the note type that is used to sort cards and that can be displayed directly in browser\"\nSo I believe that \"the sort value in the card browser\" would be less confusing", "url": "https://github.com/ankidroid/Anki-Android/pull/7291#discussion_r495598313", "createdAt": "2020-09-27T17:59:25Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -227,35 +227,38 @@\n     private BroadcastReceiver mUnmountReceiver = null;\n \n     private final MaterialDialog.ListCallbackSingleChoice mOrderDialogListener =\n-            new MaterialDialog.ListCallbackSingleChoice() {\n-        @Override\n-        public boolean onSelection(MaterialDialog materialDialog, View view, int which,\n-                CharSequence charSequence) {\n-            if (which != mOrder) {\n-                mOrder = which;\n-                mOrderAsc = false;\n-                if (mOrder == 0) {\n-                    getCol().getConf().put(\"sortType\", fSortTypes[1]);\n-                    AnkiDroidApp.getSharedPrefs(getBaseContext()).edit()\n-                            .putBoolean(\"cardBrowserNoSorting\", true)\n-                            .commit();\n-                } else {\n-                    getCol().getConf().put(\"sortType\", fSortTypes[mOrder]);\n-                    AnkiDroidApp.getSharedPrefs(getBaseContext()).edit()\n-                            .putBoolean(\"cardBrowserNoSorting\", false)\n-                            .commit();\n-                }\n-                getCol().getConf().put(\"sortBackwards\", mOrderAsc);\n-                searchCards();\n-            } else if (which != CARD_ORDER_NONE) {\n-                mOrderAsc = !mOrderAsc;\n-                getCol().getConf().put(\"sortBackwards\", mOrderAsc);\n-                mCards.reverse();\n-                updateList();\n+            (materialDialog, view, which, charSequence) -> {\n+                changeCardOrder(which);\n+                return true;\n+            };\n+\n+\n+    protected void changeCardOrder(int which) {\n+        if (which != mOrder) {\n+            // if the sort field was changed, then perform a new search", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2272fa552026eb74e0e00fe36ae1b8b777fc78c4"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMjMwMTczOnYy", "diffSide": "RIGHT", "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxODowMDo0NVrOHYo7bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxODowMDo0NVrOHYo7bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU5ODQ0Nw==", "bodyText": "If it does not takes too much time, it would have been nice for review to have it in its own commit, since this part is trivial to check", "url": "https://github.com/ankidroid/Anki-Android/pull/7291#discussion_r495598447", "createdAt": "2020-09-27T18:00:45Z", "author": {"login": "Arthur-Milchior"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/CardBrowser.java", "diffHunk": "@@ -1092,18 +1095,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n                 return true;\n \n             case R.id.action_preview: {\n-                Intent previewer = new Intent(CardBrowser.this, Previewer.class);\n-                if (mInMultiSelectMode && checkedCardCount() > 1) {\n-                    // Multiple cards have been explicitly selected, so preview only those cards\n-                    previewer.putExtra(\"index\", 0);\n-                    previewer.putExtra(\"cardList\", getSelectedCardIds());\n-                } else {\n-                    // Preview all cards, starting from the one that is currently selected\n-                    int startIndex = mCheckedCards.isEmpty() ? 0 : mCheckedCards.iterator().next().getPosition();\n-                    previewer.putExtra(\"index\", startIndex);\n-                    previewer.putExtra(\"cardList\", getAllCardIds());\n-                }\n-                startActivityForResultWithoutAnimation(previewer, PREVIEW_CARDS);\n+                onPreview();\n                 return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2272fa552026eb74e0e00fe36ae1b8b777fc78c4"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 796, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}