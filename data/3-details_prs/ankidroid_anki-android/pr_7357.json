{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NDU5NzU2", "number": 7357, "title": "Iterate json", "bodyText": "#7313 was closed by accident and I can't reopen it. This takes the correction request by @david-allison-1 into account and factorize the first commit", "createdAt": "2020-10-06T11:15:00Z", "url": "https://github.com/ankidroid/Anki-Android/pull/7357", "merged": true, "mergeCommit": {"oid": "9bfa7a9237d2cfc6c6dadc2d24290d5f082bacc8"}, "closed": true, "closedAt": "2020-10-08T01:20:41Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP3ZlCgFqTUwMjg3NjYxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQVjMKABqjM4NTI4ODMxMzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyODc2NjEw", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#pullrequestreview-502876610", "createdAt": "2020-10-06T12:18:01Z", "commit": {"oid": "94e0f8579ea4bfa788b92741523f786e94f1debb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMjoxODowMVrOHdDgbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMjoxODowMVrOHdDgbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIyODIwNA==", "bodyText": "This is causing a lot of test failures", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#discussion_r500228204", "createdAt": "2020-10-06T12:18:01Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Decks.java", "diffHunk": "@@ -951,8 +950,8 @@ public void checkIntegrity() {\n     public LinkedList<Long> active() {\n         JSONArray activeDecks = mCol.getConf().getJSONArray(\"activeDecks\");\n         LinkedList<Long> result = new LinkedList<>();\n-        for (int i = 0; i < activeDecks.length(); i++) {\n-            result.add(activeDecks.getLong(i));\n+        for (Long l: activeDecks.<Long>iterable()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94e0f8579ea4bfa788b92741523f786e94f1debb"}, "originalPosition": 38}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94e0f8579ea4bfa788b92741523f786e94f1debb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/94e0f8579ea4bfa788b92741523f786e94f1debb", "committedDate": "2020-10-06T09:53:54Z", "message": "NF: factorize jsonArray iterables and iterators"}, "afterCommit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/bfcde149bb63d1310f92d6de2f6a117575904780", "committedDate": "2020-10-06T09:41:27Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjM4Mjky", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#pullrequestreview-503238292", "createdAt": "2020-10-06T18:17:49Z", "commit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDU2NjQ4", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#pullrequestreview-503456648", "createdAt": "2020-10-07T00:59:16Z", "commit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwMDo1OToxNlrOHde75g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwMDo1OToxNlrOHde75g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY3NzYwNg==", "bodyText": "This moves from i = 1 to i = 0.", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#discussion_r500677606", "createdAt": "2020-10-07T00:59:16Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -257,8 +255,7 @@ private static void _upgradeClozeModel(Collection col, Model m) throws ConfirmMo\n         // delete non-cloze cards for the model\n         JSONArray tmpls = m.getJSONArray(\"tmpls\");\n         ArrayList<JSONObject> rem = new ArrayList<>();\n-        for (int i = 1; i < tmpls.length(); i++) {\n-            JSONObject ta = tmpls.getJSONObject(i);\n+        for (JSONObject ta: tmpls.jsonObjectIterable()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDU2ODM5", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#pullrequestreview-503456839", "createdAt": "2020-10-07T00:59:54Z", "commit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzODM0NzU5", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#pullrequestreview-503834759", "createdAt": "2020-10-07T12:41:47Z", "commit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfcde149bb63d1310f92d6de2f6a117575904780", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/bfcde149bb63d1310f92d6de2f6a117575904780", "committedDate": "2020-10-06T09:41:27Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}, "afterCommit": {"oid": "1977bc5582fda7240d6213985206aa05c0aa63ff", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1977bc5582fda7240d6213985206aa05c0aa63ff", "committedDate": "2020-10-07T14:28:03Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjI0NzI4", "url": "https://github.com/ankidroid/Anki-Android/pull/7357#pullrequestreview-504224728", "createdAt": "2020-10-07T20:04:27Z", "commit": {"oid": "1977bc5582fda7240d6213985206aa05c0aa63ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1977bc5582fda7240d6213985206aa05c0aa63ff", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/1977bc5582fda7240d6213985206aa05c0aa63ff", "committedDate": "2020-10-07T14:28:03Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}, "afterCommit": {"oid": "f30ccce083d7aaa4e8b2ffbbbca133a346c442fd", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f30ccce083d7aaa4e8b2ffbbbca133a346c442fd", "committedDate": "2020-10-07T22:04:02Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "848720a92b930c9445a881890ff6cc6e39aa0234", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/848720a92b930c9445a881890ff6cc6e39aa0234", "committedDate": "2020-10-07T23:25:44Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f30ccce083d7aaa4e8b2ffbbbca133a346c442fd", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/f30ccce083d7aaa4e8b2ffbbbca133a346c442fd", "committedDate": "2020-10-07T22:04:02Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}, "afterCommit": {"oid": "848720a92b930c9445a881890ff6cc6e39aa0234", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/848720a92b930c9445a881890ff6cc6e39aa0234", "committedDate": "2020-10-07T23:25:44Z", "message": "NF: iterate on JSONArray\n\nThis is not trivial since it can contains different kind of value in a single array. In practice, it contains a single\ntype, so most iteration can be simplified"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3951, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}