{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MjI3Mjcw", "number": 6863, "title": "onTrimMemory call super", "bodyText": "According to documentation \" If you override this method you must call through to the superclass implementation.\"\nhttps://developer.android.com/reference/android/app/Application#onTrimMemory(int)\nI'm still on current version of ankidroid to see whether\u00a0I can reproduce a bug, so I've not yet tested it.", "createdAt": "2020-08-10T00:42:50Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6863", "merged": true, "mergeCommit": {"oid": "eabd3b8eff2df7a51e9a44fd8919092781080f31"}, "closed": true, "closedAt": "2020-08-19T19:19:19Z", "author": {"login": "Arthur-Milchior"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9XwIVgFqTQ2MzkyMzI0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAgpO1AFqTQ3MDc2NTM1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTIzMjQ0", "url": "https://github.com/ankidroid/Anki-Android/pull/6863#pullrequestreview-463923244", "createdAt": "2020-08-10T01:15:51Z", "commit": {"oid": "f95724b9a33ebd25255d0b6a9d8fe38502640611"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTMwNDIw", "url": "https://github.com/ankidroid/Anki-Android/pull/6863#pullrequestreview-463930420", "createdAt": "2020-08-10T02:13:23Z", "commit": {"oid": "bd5414a16b9063cb9d39e97c16381b0d7c0f96f1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTMwNjE2", "url": "https://github.com/ankidroid/Anki-Android/pull/6863#pullrequestreview-463930616", "createdAt": "2020-08-10T02:14:53Z", "commit": {"oid": "bd5414a16b9063cb9d39e97c16381b0d7c0f96f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjoxNDo1M1rOG9_y8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMjoxNDo1M1rOG9_y8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY2MTU1Mw==", "bodyText": "This doesn't look like it's implemented in a thread-safe manner", "url": "https://github.com/ankidroid/Anki-Android/pull/6863#discussion_r467661553", "createdAt": "2020-08-10T02:14:53Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/AnkiActivity.java", "diffHunk": "@@ -570,5 +571,14 @@ protected void enableToolbar(@Nullable View view) {\n             setSupportActionBar(toolbar);\n         }\n     }\n+\n+    /* If we don't have enough memory left, removing undo task may free some space without too creating to much trouble.\n+    Todo: find a way to free only a part of the queue, enough to have space, but leaving a few actions for the user.\n+    */\n+    @Override\n+    public void onTrimMemory(int pressureLevel) {\n+        super.onTrimMemory(pressureLevel);\n+        getCol().clearUndo();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd5414a16b9063cb9d39e97c16381b0d7c0f96f1"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd5414a16b9063cb9d39e97c16381b0d7c0f96f1", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/bd5414a16b9063cb9d39e97c16381b0d7c0f96f1", "committedDate": "2020-08-10T02:11:31Z", "message": "NF: in case of memory pressure, empty undo"}, "afterCommit": {"oid": "37a8a2b33dc6faa61e043ce1aecf885469052ecb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/37a8a2b33dc6faa61e043ce1aecf885469052ecb", "committedDate": "2020-08-10T02:16:53Z", "message": "NF: in case of memory pressure, empty undo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97b490da9f639edf943e696cc096521676c56364", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/97b490da9f639edf943e696cc096521676c56364", "committedDate": "2020-08-19T11:25:51Z", "message": "onTrimMemory call super\n\nAccording to documentation \" If you override this method you must call through to the superclass implementation.\"\nhttps://developer.android.com/reference/android/app/Application#onTrimMemory(int)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37a8a2b33dc6faa61e043ce1aecf885469052ecb", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/37a8a2b33dc6faa61e043ce1aecf885469052ecb", "committedDate": "2020-08-10T02:16:53Z", "message": "NF: in case of memory pressure, empty undo"}, "afterCommit": {"oid": "8e499a3142be15873abaa34bef9ed09afb018189", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8e499a3142be15873abaa34bef9ed09afb018189", "committedDate": "2020-08-19T11:25:51Z", "message": "NF: in case of memory pressure, empty undo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e499a3142be15873abaa34bef9ed09afb018189", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8e499a3142be15873abaa34bef9ed09afb018189", "committedDate": "2020-08-19T11:25:51Z", "message": "NF: in case of memory pressure, empty undo"}, "afterCommit": {"oid": "97b490da9f639edf943e696cc096521676c56364", "author": {"user": {"login": "Arthur-Milchior", "name": "Arthur Milchior"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/97b490da9f639edf943e696cc096521676c56364", "committedDate": "2020-08-19T11:25:51Z", "message": "onTrimMemory call super\n\nAccording to documentation \" If you override this method you must call through to the superclass implementation.\"\nhttps://developer.android.com/reference/android/app/Application#onTrimMemory(int)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMzk4MDY0", "url": "https://github.com/ankidroid/Anki-Android/pull/6863#pullrequestreview-470398064", "createdAt": "2020-08-19T12:17:31Z", "commit": {"oid": "97b490da9f639edf943e696cc096521676c56364"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNzY1MzU1", "url": "https://github.com/ankidroid/Anki-Android/pull/6863#pullrequestreview-470765355", "createdAt": "2020-08-19T19:19:14Z", "commit": {"oid": "97b490da9f639edf943e696cc096521676c56364"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2913, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}