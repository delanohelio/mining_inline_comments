{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxOTE2OTkw", "number": 5849, "title": "Gracefully handle Bitmap Compression Failure", "bodyText": "Purpose / Description\nSometimes, the rotateAndCompress method could fail, causing a crash.\nFixes\nFixes #5513\nApproach\nInstead, we return the uncompressed image, and display both the file size and a warning that some images may require compression.\nWe do this, rather than displaying an error, as it's easier for a user to take action.\nWe unconditionally display the file size as it's a useful attribute.\nHow Has This Been Tested?\nOn my Android, both with a sample failure via the debugger and with a normal image via camera.\nNote: Compression increased the image size.\n\n\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-03-21T21:11:44Z", "url": "https://github.com/ankidroid/Anki-Android/pull/5849", "merged": true, "mergeCommit": {"oid": "2353c84b3a23c3f82c514b87c7314fb472aa38c0"}, "closed": true, "closedAt": "2020-03-22T16:19:15Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcP7XePgH2gAyMzkxOTE2OTkwOjBmNmI5ODZjZDcwYWZiYjhiN2M3NTBmMmE0ZTYwNmIwNGFmMDc2ZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQL34mAFqTM3OTAxOTMzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0f6b986cd70afbb8b7c750f2a4e606b04af076e4", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/0f6b986cd70afbb8b7c750f2a4e606b04af076e4", "committedDate": "2020-03-21T20:44:59Z", "message": "NF: BitmapUtil - Dispose Resources on failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e262dc4eaed96b6aa12c0d3e9a6a5b0fe13f8497", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e262dc4eaed96b6aa12c0d3e9a6a5b0fe13f8497", "committedDate": "2020-03-21T21:04:45Z", "message": "#5513 - Don't crash if we can't compress images\n\nSometimes, the `rotateAndCompress` method could fail, causing a crash.\n\nInstead, we return the uncompressed image, and display both the file\nsize and a warning that some images may require compression.\n\nWe do this, rather than displaying an error, as it's easier for a user\nto take action.\n\nWe unconditionally display the file size as it's a useful attribute."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5009c8641096f84b97af031e9f61b147d329e5a", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/b5009c8641096f84b97af031e9f61b147d329e5a", "committedDate": "2020-03-21T21:07:32Z", "message": "Add Crash Analytics for Compression failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTY1NjYw", "url": "https://github.com/ankidroid/Anki-Android/pull/5849#pullrequestreview-378965660", "createdAt": "2020-03-22T01:48:57Z", "commit": {"oid": "e262dc4eaed96b6aa12c0d3e9a6a5b0fe13f8497"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMTo0ODo1N1rOF5suOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwMTo0ODo1N1rOF5suOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA0NTg4Mg==", "bodyText": "This requires some research, I'm not sure how the crowdin platform will handle the CDATA wrapping. Is it possible to do the CDATA outside the string resource?", "url": "https://github.com/ankidroid/Anki-Android/pull/5849#discussion_r396045882", "createdAt": "2020-03-22T01:48:57Z", "author": {"login": "mikehardy"}, "path": "AnkiDroid/src/main/res/values/02-strings.xml", "diffHunk": "@@ -241,4 +241,5 @@\n     <string name=\"export_v2_forbidden\">Please switch to the V1 scheduler before exporting a single deck with scheduling information.</string>\n \n     <string name=\"activity_start_failed\">The system does not have an app installed that can perform this action.</string>\n+    <string name=\"multimedia_editor_image_compression_failed\"><![CDATA[Camera images may be large. You may wish to compress & resize images in the media directory]]></string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e262dc4eaed96b6aa12c0d3e9a6a5b0fe13f8497"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MDE5MzM2", "url": "https://github.com/ankidroid/Anki-Android/pull/5849#pullrequestreview-379019336", "createdAt": "2020-03-22T15:58:52Z", "commit": {"oid": "b5009c8641096f84b97af031e9f61b147d329e5a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3539, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}