{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzOTY5OTA4", "number": 6450, "title": "Add \"Edit tags\" to review menu", "bodyText": "Add \"Edit tags\" to review menu\nAttempts to address #3566\nPurpose / Description\nAdds the option to edit a card's tags to the reviewer's menu. By adjusting the settings you can also use a button in the action bar. This should make it quicker to add tags while reviewing cards.\nFixes\n#3566\nApproach\nI've read through NoteEditor.java to understand how the tags can be changed and stored. I simply reused the tag popup from the NoteEditor and added a menu item (or ActionButton depending on the settings).\nHow Has This Been Tested?\nTested with API level 28, unit tests require different jdk, working on it.\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-06-13T07:05:50Z", "url": "https://github.com/ankidroid/Anki-Android/pull/6450", "merged": true, "mergeCommit": {"oid": "0d67f60b97539b5155ac8e64d736518b15c84aa9"}, "closed": true, "closedAt": "2020-06-19T01:13:09Z", "author": {"login": "tobrie"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqx70JgH2gAyNDMzOTY5OTA4OjhhMmVkZWRlM2FjMDAzNTA5ZTAyNDg0MjEwNmMwMWRlZDliNWNmMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsmYlsAFqTQzMzY5NDM2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a2edede3ac003509e024842106c01ded9b5cf19", "author": {"user": {"login": "tobrie", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/8a2edede3ac003509e024842106c01ded9b5cf19", "committedDate": "2020-06-13T07:01:35Z", "message": "Add \"Edit tags\" to review menu\n\ncloses #3566"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTI3MDEy", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#pullrequestreview-430127012", "createdAt": "2020-06-13T09:30:28Z", "commit": {"oid": "8a2edede3ac003509e024842106c01ded9b5cf19"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOTozMDoyOFrOGjWrXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwOTozMzowMFrOGjWr7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyNDg5Mg==", "bodyText": "Could you use 0 (never show as action) for new features.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        android:defaultValue=\"1\"\n          \n          \n            \n                        android:defaultValue=\"0\"", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#discussion_r439724892", "createdAt": "2020-06-13T09:30:28Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/xml/preferences_custom_buttons.xml", "diffHunk": "@@ -51,6 +51,12 @@ MENU_DISABLED = 3\n             android:entryValues=\"@array/custom_button_values\"\n             android:key=\"customButtonEditCard\"\n             android:title=\"@string/cardeditor_title_edit_card\" />\n+        <ListPreference\n+            android:defaultValue=\"1\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a2edede3ac003509e024842106c01ded9b5cf19"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyNDkyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    setupButton(preferences, R.id.action_tag, \"customButtonTag\", SHOW_AS_ACTION_IF_ROOM);\n          \n          \n            \n                    setupButton(preferences, R.id.action_tag, \"customButtonTag\", SHOW_AS_ACTION_NEVER);", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#discussion_r439724924", "createdAt": "2020-06-13T09:30:50Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "diffHunk": "@@ -48,6 +48,7 @@ public void setup(SharedPreferences preferences) {\n         setupButton(preferences, R.id.action_undo, \"customButtonUndo\", SHOW_AS_ACTION_ALWAYS);\n         setupButton(preferences, R.id.action_schedule, \"customButtonScheduleCard\", SHOW_AS_ACTION_NEVER);\n         setupButton(preferences, R.id.action_flag, \"customButtonFlag\", SHOW_AS_ACTION_ALWAYS);\n+        setupButton(preferences, R.id.action_tag, \"customButtonTag\", SHOW_AS_ACTION_IF_ROOM);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a2edede3ac003509e024842106c01ded9b5cf19"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcyNTAzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    ankidroid:showAsAction=\"ifRoom\"/>\n          \n          \n            \n                    ankidroid:showAsAction=\"never\"/>", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#discussion_r439725038", "createdAt": "2020-06-13T09:33:00Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/menu/reviewer.xml", "diffHunk": "@@ -56,6 +56,11 @@\n         android:title=\"@string/menu_add_note\"\n         android:icon=\"@drawable/ic_add_white_24dp\"\n         ankidroid:showAsAction=\"never\"/>\n+    <item\n+        android:id=\"@+id/action_tag\"\n+        android:icon=\"@drawable/ic_tag\"\n+        android:title=\"@string/menu_edit_tags\"\n+        ankidroid:showAsAction=\"ifRoom\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a2edede3ac003509e024842106c01ded9b5cf19"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "181c982ea1dc23c58324309f7b2e457606823f02", "author": {"user": {"login": "tobrie", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/181c982ea1dc23c58324309f7b2e457606823f02", "committedDate": "2020-06-14T19:18:36Z", "message": "Requested changes: Tag action not in ActionBar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyOTAzNzU2", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#pullrequestreview-432903756", "createdAt": "2020-06-18T02:47:26Z", "commit": {"oid": "181c982ea1dc23c58324309f7b2e457606823f02"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwMjo0NzoyNlrOGldvzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwMjo0NzoyNlrOGldvzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkzNzg3MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    setupButton(preferences, R.id.action_tag, \"customButtonTag\", SHOW_AS_ACTION_NEVER);\n          \n          \n            \n                    setupButton(preferences, R.id.action_tag, \"customButtonTags\", SHOW_AS_ACTION_NEVER);", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#discussion_r441937871", "createdAt": "2020-06-18T02:47:26Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java", "diffHunk": "@@ -48,6 +48,7 @@ public void setup(SharedPreferences preferences) {\n         setupButton(preferences, R.id.action_undo, \"customButtonUndo\", SHOW_AS_ACTION_ALWAYS);\n         setupButton(preferences, R.id.action_schedule, \"customButtonScheduleCard\", SHOW_AS_ACTION_NEVER);\n         setupButton(preferences, R.id.action_flag, \"customButtonFlag\", SHOW_AS_ACTION_ALWAYS);\n+        setupButton(preferences, R.id.action_tag, \"customButtonTag\", SHOW_AS_ACTION_NEVER);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "181c982ea1dc23c58324309f7b2e457606823f02"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd16ebe1b4882c30bc322670f9b82b9d6c55117a", "author": {"user": {"login": "tobrie", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/fd16ebe1b4882c30bc322670f9b82b9d6c55117a", "committedDate": "2020-06-18T18:48:41Z", "message": "Refresh card in Reviewer after tags are changed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4179934a7001b99d0156145a68c128839577d932", "author": {"user": {"login": "tobrie", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/4179934a7001b99d0156145a68c128839577d932", "committedDate": "2020-06-18T20:05:32Z", "message": "Add gesture support for Reviewer's tag feature"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjEzMTAw", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#pullrequestreview-433613100", "createdAt": "2020-06-18T20:12:31Z", "commit": {"oid": "4179934a7001b99d0156145a68c128839577d932"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjIzMzA5", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#pullrequestreview-433623309", "createdAt": "2020-06-18T20:28:38Z", "commit": {"oid": "4179934a7001b99d0156145a68c128839577d932"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoyODozOVrOGl_GUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDozMDozMlrOGl_J1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4NDMwNw==", "bodyText": "Add new constants to the end of the enumeration, otherwise this will modify people's preferences.\nThe order in  gestures_values/gestures_labels controls the order of visible items.", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#discussion_r442484307", "createdAt": "2020-06-18T20:28:39Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/cardviewer/ViewerCommand.java", "diffHunk": "@@ -33,11 +33,12 @@\n     public static final int COMMAND_FLIP_OR_ANSWER_BETTER_THAN_RECOMMENDED = 7;\n     public static final int COMMAND_UNDO = 8;\n     public static final int COMMAND_EDIT = 9;\n-    public static final int COMMAND_MARK = 10;\n-    public static final int COMMAND_LOOKUP = 11;\n-    public static final int COMMAND_BURY_CARD = 12;\n-    public static final int COMMAND_SUSPEND_CARD = 13;\n-    public static final int COMMAND_DELETE = 14;\n+    public static final int COMMAND_TAG = 10;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4179934a7001b99d0156145a68c128839577d932"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4NTIwNQ==", "bodyText": "This needs a corresponding entry in gestures_values", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#discussion_r442485205", "createdAt": "2020-06-18T20:30:32Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/res/values/11-arrays.xml", "diffHunk": "@@ -30,6 +30,7 @@\n         <item>Answer better than recommended</item>\n         <item>Undo</item>\n         <item>Edit note</item>\n+        <item>Tag note</item>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4179934a7001b99d0156145a68c128839577d932"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2badfcd5261c0cfa3189f329d83be63c501a0ea5", "author": {"user": {"login": "tobrie", "name": null}}, "url": "https://github.com/ankidroid/Anki-Android/commit/2badfcd5261c0cfa3189f329d83be63c501a0ea5", "committedDate": "2020-06-18T21:48:04Z", "message": "Fix gesture preferences"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjk0MzYw", "url": "https://github.com/ankidroid/Anki-Android/pull/6450#pullrequestreview-433694360", "createdAt": "2020-06-18T22:42:00Z", "commit": {"oid": "2badfcd5261c0cfa3189f329d83be63c501a0ea5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3193, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}