{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNDM0MTIx", "number": 5960, "title": "Diagnose and avoid crash for deck with no terms", "bodyText": "Purpose / Description\nLogging to diagnose the cause of #5959\nAlso, displays a crash report rather then crashing.\nFixes\nFixes #5959 (at least, fixes the crash, but not the cause)\nApproach\nLogging, and an exception report/toast if an issue is found.\nHow Has This Been Tested?\nOn my device, custom study still works\nChecklist\n\n You have not changed whitespace unnecessarily (it makes diffs hard to read)\n You have a descriptive commit message with a short title (first line, max 50 chars).\n Your code follows the style of the project (e.g. never omit braces in if statements)\n You have commented your code, particularly in hard-to-understand areas\n You have performed a self-review of your own code", "createdAt": "2020-04-09T13:47:02Z", "url": "https://github.com/ankidroid/Anki-Android/pull/5960", "merged": true, "mergeCommit": {"oid": "2ce7139b80223a40526d6ad7bd2f1af5d7c99bb3"}, "closed": true, "closedAt": "2020-04-09T18:09:13Z", "author": {"login": "david-allison-1"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV8vYegH2gAyNDAxNDM0MTIxOmMyOWRjNWEzNDBjNDBkMDkyNzIyNDc5ZTc5ZWMwMDdmYTA1NGNkOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV_EM5AFqTM5MDk0NjkxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c29dc5a340c40d092722479e79ec007fa054cd96", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/c29dc5a340c40d092722479e79ec007fa054cd96", "committedDate": "2020-04-09T13:44:33Z", "message": "NF: Add Custom Study Logging\n\nAdded to diagnose the path taken to cause #5959 (dynamic deck had no\n'terms') inside 'createCustomStudySession'."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05d9ecd6800b9a5d92afe88dbac55b8472f3d5aa", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/05d9ecd6800b9a5d92afe88dbac55b8472f3d5aa", "committedDate": "2020-04-09T13:45:27Z", "message": "NF: Rename variable for clarity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODA5MDE0", "url": "https://github.com/ankidroid/Anki-Android/pull/5960#pullrequestreview-390809014", "createdAt": "2020-04-09T13:49:06Z", "commit": {"oid": "05d9ecd6800b9a5d92afe88dbac55b8472f3d5aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMzo0OTowN1rOGDZjqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMzo0OTowN1rOGDZjqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjIxNzY0MQ==", "bodyText": "We currently crash here. It's almost certainly the case where cur exists (possibly getting a corrupt custom study deck from AnkiWeb), but it's hard to know without logging.", "url": "https://github.com/ankidroid/Anki-Android/pull/5960#discussion_r406217641", "createdAt": "2020-04-09T13:49:07Z", "author": {"login": "david-allison-1"}, "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java", "diffHunk": "@@ -450,11 +456,12 @@ private void createCustomStudySession(JSONArray delays, Object[] terms, Boolean\n             dyn.put(\"delays\", JSONObject.NULL);\n         }\n         JSONArray ar = dyn.getJSONArray(\"terms\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05d9ecd6800b9a5d92afe88dbac55b8472f3d5aa"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5a11e632c5fa2c1b5ac1cf548f0bf08b76c854d", "author": {"user": {"login": "david-allison-1", "name": "David Allison"}}, "url": "https://github.com/ankidroid/Anki-Android/commit/e5a11e632c5fa2c1b5ac1cf548f0bf08b76c854d", "committedDate": "2020-04-09T14:23:27Z", "message": "Replaced crash with toast & error report\n\nWe can't fix the deck properties yet as we haven't diagnosed the issue\nbut, we can stop the crash."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTQ2OTEw", "url": "https://github.com/ankidroid/Anki-Android/pull/5960#pullrequestreview-390946910", "createdAt": "2020-04-09T16:27:06Z", "commit": {"oid": "e5a11e632c5fa2c1b5ac1cf548f0bf08b76c854d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3613, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}