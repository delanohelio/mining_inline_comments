{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDY3MTEy", "number": 517, "title": "KOGITO-3619 Bulk cancel operation", "bodyText": "Many thanks for submitting your Pull Request \u2764\ufe0f!\n\nAdded jobs bulk cancel option.\nJIRA : https://issues.redhat.com/browse/KOGITO-3619", "createdAt": "2020-11-03T04:10:06Z", "url": "https://github.com/kiegroup/kogito-apps/pull/517", "merged": true, "mergeCommit": {"oid": "efe5a5548df74c58a8825c01c1e737335fffaf69"}, "closed": true, "closedAt": "2020-11-06T09:16:08Z", "author": {"login": "AjayJagan"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYy2m3gBqjM5NTEyNTcxMjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZyhXDAFqTUyNDkzNTM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d2235562e27ac60c10b7980293101d74168ee41", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/4d2235562e27ac60c10b7980293101d74168ee41", "committedDate": "2020-11-03T04:07:37Z", "message": "KOGITO-3619 Bulk cancel operation"}, "afterCommit": {"oid": "dfb279763beb5a206f180e4508f9f49812337a7b", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/dfb279763beb5a206f180e4508f9f49812337a7b", "committedDate": "2020-11-03T06:05:59Z", "message": "KOGITO-3619 Bulk cancel operation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfb279763beb5a206f180e4508f9f49812337a7b", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/dfb279763beb5a206f180e4508f9f49812337a7b", "committedDate": "2020-11-03T06:05:59Z", "message": "KOGITO-3619 Bulk cancel operation"}, "afterCommit": {"oid": "01856402da434810582c730b1a3ac964c1d098ff", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/01856402da434810582c730b1a3ac964c1d098ff", "committedDate": "2020-11-03T06:06:31Z", "message": "KOGITO-3619 Bulk cancel operation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01856402da434810582c730b1a3ac964c1d098ff", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/01856402da434810582c730b1a3ac964c1d098ff", "committedDate": "2020-11-03T06:06:31Z", "message": "KOGITO-3619 Bulk cancel operation"}, "afterCommit": {"oid": "675a64e5c54a4e274a20c1036ea945e528ba5c3d", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/675a64e5c54a4e274a20c1036ea945e528ba5c3d", "committedDate": "2020-11-03T07:25:05Z", "message": "KOGITO-3619 Bulk cancel operation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "675a64e5c54a4e274a20c1036ea945e528ba5c3d", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/675a64e5c54a4e274a20c1036ea945e528ba5c3d", "committedDate": "2020-11-03T07:25:05Z", "message": "KOGITO-3619 Bulk cancel operation"}, "afterCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/b4847a275f9de99efd2da0da1f5abf1f8d4840ee", "committedDate": "2020-11-03T10:08:36Z", "message": "KOGITO-3619 Bulk cancel operation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMzkyNzU4", "url": "https://github.com/kiegroup/kogito-apps/pull/517#pullrequestreview-522392758", "createdAt": "2020-11-03T11:09:33Z", "commit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxMDoxOVrOHsqEMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyNzoyMFrOHsqnmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU4ODU5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  successInstances: {},\n          \n          \n            \n                  failedInstances: {},\n          \n          \n            \n                  IgnoredInstances: {}\n          \n          \n            \n                  successJobs: {},\n          \n          \n            \n                  failedJobs: {},\n          \n          \n            \n                  ignoredJobs: {}", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516588593", "createdAt": "2020-11-03T11:10:19Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/tests/JobsCancelModal.test.tsx", "diffHunk": "@@ -2,17 +2,50 @@ import React from 'react';\n import { setTitle } from '../../../../utils/Utils';\n import JobsCancelModal from '../JobsCancelModal';\n import { shallow } from 'enzyme';\n+jest.mock('../../ProcessListBulkInstances/ProcessListBulkInstances');\n \n+const jobOperation = {\n+  CANCEL: {\n+    messages: {\n+      successMessage: 'Cancel Jobs',\n+      ignoredMessage:\n+        'These jobs were ignored because they were executed or canceled',\n+      noProcessMessage: 'No jobs were canceled'\n+    },\n+    functions: {\n+      perform: jest.fn()\n+    },\n+    results: {\n+      successInstances: {},\n+      failedInstances: {},\n+      IgnoredInstances: {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5MDk4NA==", "bodyText": "Seems like the type is dictating Process specific naming of properties, I think we can do bigger refactoring and extract the IOperation from ProcessListToolbar + name the properties more generally.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516590984", "createdAt": "2020-11-03T11:14:42Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "diffHunk": "@@ -1,19 +1,24 @@\n import React from 'react';\n import { Modal, Button, TextContent, Text } from '@patternfly/react-core';\n import { OUIAProps, componentOuiaProps } from '@kogito-apps/common';\n+import ProcessListBulkInstances from '../ProcessListBulkInstances/ProcessListBulkInstances';\n+import { IOperation } from '../../Molecules/ProcessListToolbar/ProcessListToolbar';\n+\n interface IOwnProps {\n   actionType: string;\n   modalTitle: JSX.Element;\n   modalContent: string;\n   handleModalToggle: () => void;\n   isModalOpen: boolean;\n+  jobOperations?: IOperation;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5MTcxOA==", "bodyText": "Again, we should not use this component IMO, its name indicates ProcessList operation rather than job operation. But again we can refactor to have a generally usable component.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516591718", "createdAt": "2020-11-03T11:16:03Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "diffHunk": "@@ -37,9 +42,13 @@ const JobsCancelModal: React.FC<IOwnProps & OUIAProps> = ({\n       ]}\n       {...componentOuiaProps(ouiaId, 'jobs-cancel-modal', ouiaSafe)}\n     >\n-      <TextContent>\n-        <Text>{modalContent}</Text>\n-      </TextContent>\n+      {modalContent.length > 0 ? (\n+        <TextContent>\n+          <Text>{modalContent}</Text>\n+        </TextContent>\n+      ) : (\n+        <ProcessListBulkInstances operationResult={jobOperations} type=\"job\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5MjE1Mg==", "bodyText": "See - those are the issues when reusing IOperation from ProcessListToolbar.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516592152", "createdAt": "2020-11-03T11:16:53Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/tests/JobsCancelModal.test.tsx", "diffHunk": "@@ -2,17 +2,50 @@ import React from 'react';\n import { setTitle } from '../../../../utils/Utils';\n import JobsCancelModal from '../JobsCancelModal';\n import { shallow } from 'enzyme';\n+jest.mock('../../ProcessListBulkInstances/ProcessListBulkInstances');\n \n+const jobOperation = {\n+  CANCEL: {\n+    messages: {\n+      successMessage: 'Cancel Jobs',\n+      ignoredMessage:\n+        'These jobs were ignored because they were executed or canceled',\n+      noProcessMessage: 'No jobs were canceled'\n+    },\n+    functions: {\n+      perform: jest.fn()\n+    },\n+    results: {\n+      successInstances: {},\n+      failedInstances: {},\n+      IgnoredInstances: {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU4ODU5Mw=="}, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NTE0NA==", "bodyText": "Introduce a generally usable component that would be usable in both cases (we can't name it ProcessListBulkInstances when using for Jobs).", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516595144", "createdAt": "2020-11-03T11:22:33Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/ProcessListBulkInstances/ProcessListBulkInstances.tsx", "diffHunk": "@@ -14,16 +14,30 @@ import {\n   GraphQL\n } from '@kogito-apps/common';\n import { IOperation } from '../../Molecules/ProcessListToolbar/ProcessListToolbar';\n-import { getProcessInstanceDescription } from '../../../utils/Utils';\n+import {\n+  getProcessInstanceDescription,\n+  getJobsDescription\n+} from '../../../utils/Utils';\n \n interface IOwnProps {\n   operationResult: IOperation;\n+  type: string;\n }\n+\n const ProcessListBulkInstances: React.FC<IOwnProps & OUIAProps> = ({\n   operationResult,\n+  type,\n   ouiaId,\n   ouiaSafe\n }) => {\n+  const getItemDescription = item => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NTgwMQ==", "bodyText": "Here we can use the general component.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516595801", "createdAt": "2020-11-03T11:23:48Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/ProcessListModal/ProcessListModal.tsx", "diffHunk": "@@ -63,7 +63,10 @@ const ProcessListModal: React.FC<IOwnProps & OUIAProps> = ({\n       {...componentOuiaProps(ouiaId, 'process-list-modal', ouiaSafe)}\n     >\n       {operationResult !== undefined && (\n-        <ProcessListBulkInstances operationResult={operationResult} />\n+        <ProcessListBulkInstances", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NjQwNQ==", "bodyText": "here again, this would need to be generalized not to introduce Jobs into Process specific component.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516596405", "createdAt": "2020-11-03T11:24:55Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Molecules/ProcessListToolbar/ProcessListToolbar.tsx", "diffHunk": "@@ -66,11 +66,14 @@ export interface ProcessInstanceBulkList {\n     'id' | 'processId' | 'serviceUrl' | 'state'\n   >;\n }\n+export interface JobsBulkList {\n+  [key: string]: GraphQL.Job;\n+}\n \n interface IOperationResult {\n-  successInstances: ProcessInstanceBulkList;\n-  failedInstances: ProcessInstanceBulkList;\n-  ignoredInstances: ProcessInstanceBulkList;\n+  successInstances: ProcessInstanceBulkList | JobsBulkList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NzY1OQ==", "bodyText": "this is again an ugly example of reusing process-specific component for jobs - noProcessMessage", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516597659", "createdAt": "2020-11-03T11:27:20Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/JobsManagementPage/JobsManagementPage.tsx", "diffHunk": "@@ -43,10 +54,75 @@ const JobsManagementPage: React.FC<OUIAProps> = ({ ouiaId, ouiaSafe }) => {\n   const [modalTitle, setModalTitle] = useState<JSX.Element>(null);\n   const [modalContent, setModalContent] = useState<string>('');\n   const [selectedJob, setSelectedJob] = useState<any>({});\n+  const [isKebabOpen, setIsKebabOpen] = useState<boolean>(false);\n+  const [selectedJobInstances, setSelectedJobInstances] = useState<\n+    GraphQL.Job[]\n+  >([]);\n+  const [jobOperationResults, setJobOperationResults] = useState({\n+    CANCEL: {\n+      successInstances: {},\n+      failedInstances: {},\n+      ignoredInstances: {}\n+    }\n+  });\n+  const jobOperations = {\n+    CANCEL: {\n+      results: jobOperationResults[JobOperationType.CANCEL],\n+      messages: {\n+        successMessage: 'Cancel jobs: ',\n+        noProcessMessage: 'No jobs were canceled',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 50}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbd8b1c66aa05a7672b9045345af11b05ecc0ad3", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/bbd8b1c66aa05a7672b9045345af11b05ecc0ad3", "committedDate": "2020-11-03T12:25:16Z", "message": "split jobs and process bulk list"}, "afterCommit": {"oid": "68c21e707ae5a74a251b8d5ad6c245e97a8890a0", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/68c21e707ae5a74a251b8d5ad6c245e97a8890a0", "committedDate": "2020-11-03T12:28:42Z", "message": "split jobs and process bulk list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68c21e707ae5a74a251b8d5ad6c245e97a8890a0", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/68c21e707ae5a74a251b8d5ad6c245e97a8890a0", "committedDate": "2020-11-03T12:28:42Z", "message": "split jobs and process bulk list"}, "afterCommit": {"oid": "3899b9ec2cd3abf9c8f686ea8d497c4306f2ae02", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/3899b9ec2cd3abf9c8f686ea8d497c4306f2ae02", "committedDate": "2020-11-03T12:44:55Z", "message": "split jobs and process bulk list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3899b9ec2cd3abf9c8f686ea8d497c4306f2ae02", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/3899b9ec2cd3abf9c8f686ea8d497c4306f2ae02", "committedDate": "2020-11-03T12:44:55Z", "message": "split jobs and process bulk list"}, "afterCommit": {"oid": "83c2de469529241183cac04a4d52064e23ab1a2d", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/83c2de469529241183cac04a4d52064e23ab1a2d", "committedDate": "2020-11-03T12:47:49Z", "message": "split jobs and process bulk list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MDY5MzM4", "url": "https://github.com/kiegroup/kogito-apps/pull/517#pullrequestreview-524069338", "createdAt": "2020-11-05T09:25:21Z", "commit": {"oid": "83c2de469529241183cac04a4d52064e23ab1a2d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89893e57135a2cdef70e454d4f36a8e70efccb12", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/89893e57135a2cdef70e454d4f36a8e70efccb12", "committedDate": "2020-11-05T15:16:52Z", "message": "KOGITO-3619 Bulk cancel operation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83c2de469529241183cac04a4d52064e23ab1a2d", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/83c2de469529241183cac04a4d52064e23ab1a2d", "committedDate": "2020-11-03T12:47:49Z", "message": "split jobs and process bulk list"}, "afterCommit": {"oid": "d6278cc641ee84c1d03efdc6546054e6bd606a00", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/d6278cc641ee84c1d03efdc6546054e6bd606a00", "committedDate": "2020-11-05T15:18:10Z", "message": "split jobs and process bulk list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0Mzc2NDg5", "url": "https://github.com/kiegroup/kogito-apps/pull/517#pullrequestreview-524376489", "createdAt": "2020-11-05T15:27:30Z", "commit": {"oid": "d6278cc641ee84c1d03efdc6546054e6bd606a00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95232ef5795aa0dda81c9f8cd61280c8f7f6043a", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/95232ef5795aa0dda81c9f8cd61280c8f7f6043a", "committedDate": "2020-11-06T03:20:00Z", "message": "split jobs and process bulk list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d6278cc641ee84c1d03efdc6546054e6bd606a00", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/d6278cc641ee84c1d03efdc6546054e6bd606a00", "committedDate": "2020-11-05T15:18:10Z", "message": "split jobs and process bulk list"}, "afterCommit": {"oid": "95232ef5795aa0dda81c9f8cd61280c8f7f6043a", "author": {"user": {"login": "AjayJagan", "name": "Ajay Jaganathan"}}, "url": "https://github.com/kiegroup/kogito-apps/commit/95232ef5795aa0dda81c9f8cd61280c8f7f6043a", "committedDate": "2020-11-06T03:20:00Z", "message": "split jobs and process bulk list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0OTM1MzY1", "url": "https://github.com/kiegroup/kogito-apps/pull/517#pullrequestreview-524935365", "createdAt": "2020-11-06T08:17:02Z", "commit": {"oid": "95232ef5795aa0dda81c9f8cd61280c8f7f6043a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4663, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}