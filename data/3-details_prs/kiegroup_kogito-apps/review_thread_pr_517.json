{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDY3MTEy", "number": 517, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxMDoxOVrOE0wlpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyNzoyMFrOE0w8aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzU3NDc4OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/tests/JobsCancelModal.test.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxMDoxOVrOHsqEMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxNjo1M1rOHsqSGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU4ODU5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  successInstances: {},\n          \n          \n            \n                  failedInstances: {},\n          \n          \n            \n                  IgnoredInstances: {}\n          \n          \n            \n                  successJobs: {},\n          \n          \n            \n                  failedJobs: {},\n          \n          \n            \n                  ignoredJobs: {}", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516588593", "createdAt": "2020-11-03T11:10:19Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/tests/JobsCancelModal.test.tsx", "diffHunk": "@@ -2,17 +2,50 @@ import React from 'react';\n import { setTitle } from '../../../../utils/Utils';\n import JobsCancelModal from '../JobsCancelModal';\n import { shallow } from 'enzyme';\n+jest.mock('../../ProcessListBulkInstances/ProcessListBulkInstances');\n \n+const jobOperation = {\n+  CANCEL: {\n+    messages: {\n+      successMessage: 'Cancel Jobs',\n+      ignoredMessage:\n+        'These jobs were ignored because they were executed or canceled',\n+      noProcessMessage: 'No jobs were canceled'\n+    },\n+    functions: {\n+      perform: jest.fn()\n+    },\n+    results: {\n+      successInstances: {},\n+      failedInstances: {},\n+      IgnoredInstances: {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5MjE1Mg==", "bodyText": "See - those are the issues when reusing IOperation from ProcessListToolbar.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516592152", "createdAt": "2020-11-03T11:16:53Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/tests/JobsCancelModal.test.tsx", "diffHunk": "@@ -2,17 +2,50 @@ import React from 'react';\n import { setTitle } from '../../../../utils/Utils';\n import JobsCancelModal from '../JobsCancelModal';\n import { shallow } from 'enzyme';\n+jest.mock('../../ProcessListBulkInstances/ProcessListBulkInstances');\n \n+const jobOperation = {\n+  CANCEL: {\n+    messages: {\n+      successMessage: 'Cancel Jobs',\n+      ignoredMessage:\n+        'These jobs were ignored because they were executed or canceled',\n+      noProcessMessage: 'No jobs were canceled'\n+    },\n+    functions: {\n+      perform: jest.fn()\n+    },\n+    results: {\n+      successInstances: {},\n+      failedInstances: {},\n+      IgnoredInstances: {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU4ODU5Mw=="}, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzU4OTg4OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxNDo0MlrOHsqNiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxNDo0MlrOHsqNiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5MDk4NA==", "bodyText": "Seems like the type is dictating Process specific naming of properties, I think we can do bigger refactoring and extract the IOperation from ProcessListToolbar + name the properties more generally.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516590984", "createdAt": "2020-11-03T11:14:42Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "diffHunk": "@@ -1,19 +1,24 @@\n import React from 'react';\n import { Modal, Button, TextContent, Text } from '@patternfly/react-core';\n import { OUIAProps, componentOuiaProps } from '@kogito-apps/common';\n+import ProcessListBulkInstances from '../ProcessListBulkInstances/ProcessListBulkInstances';\n+import { IOperation } from '../../Molecules/ProcessListToolbar/ProcessListToolbar';\n+\n interface IOwnProps {\n   actionType: string;\n   modalTitle: JSX.Element;\n   modalContent: string;\n   handleModalToggle: () => void;\n   isModalOpen: boolean;\n+  jobOperations?: IOperation;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzU5NDQ5OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxNjowM1rOHsqQZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToxNjowM1rOHsqQZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5MTcxOA==", "bodyText": "Again, we should not use this component IMO, its name indicates ProcessList operation rather than job operation. But again we can refactor to have a generally usable component.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516591718", "createdAt": "2020-11-03T11:16:03Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "diffHunk": "@@ -37,9 +42,13 @@ const JobsCancelModal: React.FC<IOwnProps & OUIAProps> = ({\n       ]}\n       {...componentOuiaProps(ouiaId, 'jobs-cancel-modal', ouiaSafe)}\n     >\n-      <TextContent>\n-        <Text>{modalContent}</Text>\n-      </TextContent>\n+      {modalContent.length > 0 ? (\n+        <TextContent>\n+          <Text>{modalContent}</Text>\n+        </TextContent>\n+      ) : (\n+        <ProcessListBulkInstances operationResult={jobOperations} type=\"job\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzYxNzA1OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Atoms/ProcessListBulkInstances/ProcessListBulkInstances.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyMjozM1rOHsqdyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyMjozM1rOHsqdyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NTE0NA==", "bodyText": "Introduce a generally usable component that would be usable in both cases (we can't name it ProcessListBulkInstances when using for Jobs).", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516595144", "createdAt": "2020-11-03T11:22:33Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/ProcessListBulkInstances/ProcessListBulkInstances.tsx", "diffHunk": "@@ -14,16 +14,30 @@ import {\n   GraphQL\n } from '@kogito-apps/common';\n import { IOperation } from '../../Molecules/ProcessListToolbar/ProcessListToolbar';\n-import { getProcessInstanceDescription } from '../../../utils/Utils';\n+import {\n+  getProcessInstanceDescription,\n+  getJobsDescription\n+} from '../../../utils/Utils';\n \n interface IOwnProps {\n   operationResult: IOperation;\n+  type: string;\n }\n+\n const ProcessListBulkInstances: React.FC<IOwnProps & OUIAProps> = ({\n   operationResult,\n+  type,\n   ouiaId,\n   ouiaSafe\n }) => {\n+  const getItemDescription = item => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzYyMTA3OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Atoms/ProcessListModal/ProcessListModal.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyMzo0OFrOHsqgWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyMzo0OFrOHsqgWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NTgwMQ==", "bodyText": "Here we can use the general component.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516595801", "createdAt": "2020-11-03T11:23:48Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Atoms/ProcessListModal/ProcessListModal.tsx", "diffHunk": "@@ -63,7 +63,10 @@ const ProcessListModal: React.FC<IOwnProps & OUIAProps> = ({\n       {...componentOuiaProps(ouiaId, 'process-list-modal', ouiaSafe)}\n     >\n       {operationResult !== undefined && (\n-        <ProcessListBulkInstances operationResult={operationResult} />\n+        <ProcessListBulkInstances", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzYyNTA2OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Molecules/ProcessListToolbar/ProcessListToolbar.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyNDo1NVrOHsqitQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyNDo1NVrOHsqitQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NjQwNQ==", "bodyText": "here again, this would need to be generalized not to introduce Jobs into Process specific component.", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516596405", "createdAt": "2020-11-03T11:24:55Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Molecules/ProcessListToolbar/ProcessListToolbar.tsx", "diffHunk": "@@ -66,11 +66,14 @@ export interface ProcessInstanceBulkList {\n     'id' | 'processId' | 'serviceUrl' | 'state'\n   >;\n }\n+export interface JobsBulkList {\n+  [key: string]: GraphQL.Job;\n+}\n \n interface IOperationResult {\n-  successInstances: ProcessInstanceBulkList;\n-  failedInstances: ProcessInstanceBulkList;\n-  ignoredInstances: ProcessInstanceBulkList;\n+  successInstances: ProcessInstanceBulkList | JobsBulkList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzYzMzA3OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/JobsManagementPage/JobsManagementPage.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyNzoyMFrOHsqnmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxMToyNzoyMFrOHsqnmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU5NzY1OQ==", "bodyText": "this is again an ugly example of reusing process-specific component for jobs - noProcessMessage", "url": "https://github.com/kiegroup/kogito-apps/pull/517#discussion_r516597659", "createdAt": "2020-11-03T11:27:20Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/JobsManagementPage/JobsManagementPage.tsx", "diffHunk": "@@ -43,10 +54,75 @@ const JobsManagementPage: React.FC<OUIAProps> = ({ ouiaId, ouiaSafe }) => {\n   const [modalTitle, setModalTitle] = useState<JSX.Element>(null);\n   const [modalContent, setModalContent] = useState<string>('');\n   const [selectedJob, setSelectedJob] = useState<any>({});\n+  const [isKebabOpen, setIsKebabOpen] = useState<boolean>(false);\n+  const [selectedJobInstances, setSelectedJobInstances] = useState<\n+    GraphQL.Job[]\n+  >([]);\n+  const [jobOperationResults, setJobOperationResults] = useState({\n+    CANCEL: {\n+      successInstances: {},\n+      failedInstances: {},\n+      ignoredInstances: {}\n+    }\n+  });\n+  const jobOperations = {\n+    CANCEL: {\n+      results: jobOperationResults[JobOperationType.CANCEL],\n+      messages: {\n+        successMessage: 'Cancel jobs: ',\n+        noProcessMessage: 'No jobs were canceled',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4847a275f9de99efd2da0da1f5abf1f8d4840ee"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1181, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}