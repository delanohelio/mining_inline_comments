{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNzk0OTYz", "number": 405, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo0MjoyNFrOEbcYhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxOTo0OVrOEbj85w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjEyMDM4OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo0MjoyNFrOHFYJmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwOTo0NToxMFrOHFc10g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwMDYwMw==", "bodyText": "@Sara4994 just a minor comment about this Save button. Does here make sense the button duplication just for disabling the button?", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475400603", "createdAt": "2020-08-24T07:42:24Z", "author": {"login": "nmirasch"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +110,119 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    window.location.reload();\n+  };\n+\n+  const handleErrorModal = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+  };\n+\n+  const handleRetry = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+    setVariableError(null);\n+    // tslint:disable-next-line: no-floating-promises\n+    handleSave();\n+  };\n+\n+  const handleDiscard = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+    handleRefresh();\n+  };\n+\n+  const errorModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--danger-color--100)\"\n+              />\n+              Error\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={errorModalOpen}\n+        onClose={handleErrorModal}\n+        actions={[\n+          <Button\n+            key=\"Retry\"\n+            variant=\"primary\"\n+            id=\"retry-button\"\n+            onClick={handleRetry}\n+          >\n+            Retry\n+          </Button>,\n+          <Button\n+            key=\"Discard\"\n+            variant=\"link\"\n+            id=\"discard-button\"\n+            onClick={handleDiscard}\n+          >\n+            Discard\n+          </Button>\n+        ]}\n+        aria-label=\"Error modal\"\n+        aria-labelledby=\"Error modal\"\n+      >\n+        {variableError}\n+      </Modal>\n+    );\n+  };\n+\n+  const updateVariables = () => {\n+    if (data.ProcessInstances[0].serviceUrl !== null && displayLabel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "824b499982352dd133267b8b55af71c54de0bc7f"}, "originalPosition": 138}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQ3NzQ1OA==", "bodyText": "@nmirasch done. Thanks", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475477458", "createdAt": "2020-08-24T09:45:10Z", "author": {"login": "Sara4994"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +110,119 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    window.location.reload();\n+  };\n+\n+  const handleErrorModal = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+  };\n+\n+  const handleRetry = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+    setVariableError(null);\n+    // tslint:disable-next-line: no-floating-promises\n+    handleSave();\n+  };\n+\n+  const handleDiscard = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+    handleRefresh();\n+  };\n+\n+  const errorModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--danger-color--100)\"\n+              />\n+              Error\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={errorModalOpen}\n+        onClose={handleErrorModal}\n+        actions={[\n+          <Button\n+            key=\"Retry\"\n+            variant=\"primary\"\n+            id=\"retry-button\"\n+            onClick={handleRetry}\n+          >\n+            Retry\n+          </Button>,\n+          <Button\n+            key=\"Discard\"\n+            variant=\"link\"\n+            id=\"discard-button\"\n+            onClick={handleDiscard}\n+          >\n+            Discard\n+          </Button>\n+        ]}\n+        aria-label=\"Error modal\"\n+        aria-labelledby=\"Error modal\"\n+      >\n+        {variableError}\n+      </Modal>\n+    );\n+  };\n+\n+  const updateVariables = () => {\n+    if (data.ProcessInstances[0].serviceUrl !== null && displayLabel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwMDYwMw=="}, "originalCommit": {"oid": "824b499982352dd133267b8b55af71c54de0bc7f"}, "originalPosition": 138}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MzI2MTU3OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsProcessVariables/tests/ProcessDetailsProcessVariables.test.tsx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMjo1NDowNlrOHFi-yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMDo1MDowOFrOHGSekA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU3ODA1Ng==", "bodyText": "I understand you need mount for the function invocation? It is resulting in quite long snapshot. Could you check if the lenght can be reduced? (I think at least using find() and mocking react-icons might help a bit)", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475578056", "createdAt": "2020-08-24T12:54:06Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsProcessVariables/tests/ProcessDetailsProcessVariables.test.tsx", "diffHunk": "@@ -1,32 +1,69 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { shallow, mount } from 'enzyme';\n import ProcessDetailsProcessVariables from '../ProcessDetailsProcessVariables';\n-\n+// tslint:disable: no-string-literal\n+// tslint:disable: no-unexpected-multiline\n const props = {\n-  loading: true,\n-  data: {\n-    ProcessInstances: []\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: false,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: false\n };\n \n const props2 = {\n-  loading: false,\n-  data: {\n-    ProcessInstances: [\n-      {\n-        variables:\n-          '{\"trip\":{\"begin\":\"2019-10-22T22:00:00Z[UTC]\",\"city\":\"Berlin\",\"country\":\"Germany\",\"end\":\"2019-10-30T22:00:00Z[UTC]\",\"visaRequired\":false},\"hotel\":{\"address\":{\"city\":\"Berlin\",\"country\":\"Germany\",\"street\":\"street\",\"zipCode\":\"12345\"},\"bookingNumber\":\"XX-012345\",\"name\":\"Perfect hotel\",\"phone\":\"09876543\"},\"traveller\":{\"address\":{\"city\":\"Karkow\",\"country\":\"Poland\",\"street\":\"palna\",\"zipCode\":\"200300\"},\"email\":\"rob@redhat.com\",\"firstName\":\"Rob\",\"lastName\":\"Rob\",\"nationality\":\"Polish\"}}'\n-      }\n-    ]\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: true,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: true\n };\n describe('ProcessVariables component tests', () => {\n   it('snapshot testing without variables', () => {\n     const wrapper = shallow(<ProcessDetailsProcessVariables {...props} />);\n     expect(wrapper).toMatchSnapshot();\n   });\n   it('snapshot testing with variables', () => {\n-    const wrapper = shallow(<ProcessDetailsProcessVariables {...props2} />);\n+    const wrapper = mount(<ProcessDetailsProcessVariables {...props2} />);\n     expect(wrapper).toMatchSnapshot();\n+    const onEdit = () => {\n+      return null;\n+    };\n+    const obj = {\n+      name: false,\n+      onEdit,\n+      src: {\n+        trip: {\n+          begin: '2019-10-22T22:00:00Z[UTC]',\n+          city: 'Berlin',\n+          country: 'Germany',\n+          end: '2019-10-30T22:00:00Z[UTC]',\n+          visaRequired: false\n+        }\n+      }\n+    };\n+    wrapper", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY0NTY2Ng==", "bodyText": "@jstastny-cz  I have mocked the react-icons as suggested, but the reason for having lengthy snapshot is because of this third party component 'react-json-view'. I cannot mock this component completely because that is the only thing we are displaying on the UI as part of process variables, but at the same time it generates a lengthy snapshot", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475645666", "createdAt": "2020-08-24T14:17:08Z", "author": {"login": "Sara4994"}, "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsProcessVariables/tests/ProcessDetailsProcessVariables.test.tsx", "diffHunk": "@@ -1,32 +1,69 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { shallow, mount } from 'enzyme';\n import ProcessDetailsProcessVariables from '../ProcessDetailsProcessVariables';\n-\n+// tslint:disable: no-string-literal\n+// tslint:disable: no-unexpected-multiline\n const props = {\n-  loading: true,\n-  data: {\n-    ProcessInstances: []\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: false,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: false\n };\n \n const props2 = {\n-  loading: false,\n-  data: {\n-    ProcessInstances: [\n-      {\n-        variables:\n-          '{\"trip\":{\"begin\":\"2019-10-22T22:00:00Z[UTC]\",\"city\":\"Berlin\",\"country\":\"Germany\",\"end\":\"2019-10-30T22:00:00Z[UTC]\",\"visaRequired\":false},\"hotel\":{\"address\":{\"city\":\"Berlin\",\"country\":\"Germany\",\"street\":\"street\",\"zipCode\":\"12345\"},\"bookingNumber\":\"XX-012345\",\"name\":\"Perfect hotel\",\"phone\":\"09876543\"},\"traveller\":{\"address\":{\"city\":\"Karkow\",\"country\":\"Poland\",\"street\":\"palna\",\"zipCode\":\"200300\"},\"email\":\"rob@redhat.com\",\"firstName\":\"Rob\",\"lastName\":\"Rob\",\"nationality\":\"Polish\"}}'\n-      }\n-    ]\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: true,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: true\n };\n describe('ProcessVariables component tests', () => {\n   it('snapshot testing without variables', () => {\n     const wrapper = shallow(<ProcessDetailsProcessVariables {...props} />);\n     expect(wrapper).toMatchSnapshot();\n   });\n   it('snapshot testing with variables', () => {\n-    const wrapper = shallow(<ProcessDetailsProcessVariables {...props2} />);\n+    const wrapper = mount(<ProcessDetailsProcessVariables {...props2} />);\n     expect(wrapper).toMatchSnapshot();\n+    const onEdit = () => {\n+      return null;\n+    };\n+    const obj = {\n+      name: false,\n+      onEdit,\n+      src: {\n+        trip: {\n+          begin: '2019-10-22T22:00:00Z[UTC]',\n+          city: 'Berlin',\n+          country: 'Germany',\n+          end: '2019-10-30T22:00:00Z[UTC]',\n+          visaRequired: false\n+        }\n+      }\n+    };\n+    wrapper", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU3ODA1Ng=="}, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM1NjI0MA==", "bodyText": "ok, thanks.", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r476356240", "createdAt": "2020-08-25T10:50:08Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsProcessVariables/tests/ProcessDetailsProcessVariables.test.tsx", "diffHunk": "@@ -1,32 +1,69 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { shallow, mount } from 'enzyme';\n import ProcessDetailsProcessVariables from '../ProcessDetailsProcessVariables';\n-\n+// tslint:disable: no-string-literal\n+// tslint:disable: no-unexpected-multiline\n const props = {\n-  loading: true,\n-  data: {\n-    ProcessInstances: []\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: false,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: false\n };\n \n const props2 = {\n-  loading: false,\n-  data: {\n-    ProcessInstances: [\n-      {\n-        variables:\n-          '{\"trip\":{\"begin\":\"2019-10-22T22:00:00Z[UTC]\",\"city\":\"Berlin\",\"country\":\"Germany\",\"end\":\"2019-10-30T22:00:00Z[UTC]\",\"visaRequired\":false},\"hotel\":{\"address\":{\"city\":\"Berlin\",\"country\":\"Germany\",\"street\":\"street\",\"zipCode\":\"12345\"},\"bookingNumber\":\"XX-012345\",\"name\":\"Perfect hotel\",\"phone\":\"09876543\"},\"traveller\":{\"address\":{\"city\":\"Karkow\",\"country\":\"Poland\",\"street\":\"palna\",\"zipCode\":\"200300\"},\"email\":\"rob@redhat.com\",\"firstName\":\"Rob\",\"lastName\":\"Rob\",\"nationality\":\"Polish\"}}'\n-      }\n-    ]\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: true,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: true\n };\n describe('ProcessVariables component tests', () => {\n   it('snapshot testing without variables', () => {\n     const wrapper = shallow(<ProcessDetailsProcessVariables {...props} />);\n     expect(wrapper).toMatchSnapshot();\n   });\n   it('snapshot testing with variables', () => {\n-    const wrapper = shallow(<ProcessDetailsProcessVariables {...props2} />);\n+    const wrapper = mount(<ProcessDetailsProcessVariables {...props2} />);\n     expect(wrapper).toMatchSnapshot();\n+    const onEdit = () => {\n+      return null;\n+    };\n+    const obj = {\n+      name: false,\n+      onEdit,\n+      src: {\n+        trip: {\n+          begin: '2019-10-22T22:00:00Z[UTC]',\n+          city: 'Berlin',\n+          country: 'Germany',\n+          end: '2019-10-30T22:00:00Z[UTC]',\n+          visaRequired: false\n+        }\n+      }\n+    };\n+    wrapper", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU3ODA1Ng=="}, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MzMyMTM2OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzowOToyNVrOHFjj6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzowOToyNVrOHFjj6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4NzU2Mw==", "bodyText": "discard->discards ?", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475587563", "createdAt": "2020-08-24T13:09:25Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    if (displayLabel === true) {\n+      setConfirmationModal(true);\n+    } else {\n+      window.location.reload();\n+    }\n+  };\n+\n+  const handleConfirmationModal = () => {\n+    setConfirmationModal(!confirmationModal);\n+  };\n+\n+  const handleConfirm = () => {\n+    window.location.reload();\n+    handleConfirmationModal();\n+  };\n+\n+  const handleCancel = () => {\n+    handleConfirmationModal();\n+  };\n+\n+  const RenderConfirmationModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--warning-color--100)\"\n+              />\n+              Refresh\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={confirmationModal}\n+        onClose={handleConfirmationModal}\n+        actions={[\n+          <Button\n+            key=\"Ok\"\n+            variant=\"primary\"\n+            id=\"confirm-button\"\n+            onClick={handleConfirm}\n+          >\n+            Ok\n+          </Button>,\n+          <Button\n+            key=\"Cancel\"\n+            variant=\"link\"\n+            id=\"cancel-button\"\n+            onClick={handleCancel}\n+          >\n+            Cancel\n+          </Button>\n+        ]}\n+        aria-label=\"Confirmation modal\"\n+        aria-labelledby=\"Confirmation modal\"\n+      >\n+        This action discard changes made on process variables.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 134}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MzM0MzQyOnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxNToyNFrOHFjxdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxNToyNFrOHFjxdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MTAzMQ==", "bodyText": "updateVariables->updateVariablesButton", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475591031", "createdAt": "2020-08-24T13:15:24Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    if (displayLabel === true) {\n+      setConfirmationModal(true);\n+    } else {\n+      window.location.reload();\n+    }\n+  };\n+\n+  const handleConfirmationModal = () => {\n+    setConfirmationModal(!confirmationModal);\n+  };\n+\n+  const handleConfirm = () => {\n+    window.location.reload();\n+    handleConfirmationModal();\n+  };\n+\n+  const handleCancel = () => {\n+    handleConfirmationModal();\n+  };\n+\n+  const RenderConfirmationModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--warning-color--100)\"\n+              />\n+              Refresh\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={confirmationModal}\n+        onClose={handleConfirmationModal}\n+        actions={[\n+          <Button\n+            key=\"Ok\"\n+            variant=\"primary\"\n+            id=\"confirm-button\"\n+            onClick={handleConfirm}\n+          >\n+            Ok\n+          </Button>,\n+          <Button\n+            key=\"Cancel\"\n+            variant=\"link\"\n+            id=\"cancel-button\"\n+            onClick={handleCancel}\n+          >\n+            Cancel\n+          </Button>\n+        ]}\n+        aria-label=\"Confirmation modal\"\n+        aria-labelledby=\"Confirmation modal\"\n+      >\n+        This action discard changes made on process variables.\n+      </Modal>\n+    );\n+  };\n+\n+  const handleErrorModal = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+  };\n+\n+  const handleRetry = () => {\n+    handleErrorModal();\n+    setVariableError(null);\n+    // tslint:disable-next-line: no-floating-promises\n+    handleSave();\n+  };\n+\n+  const handleDiscard = () => {\n+    handleErrorModal();\n+    handleRefresh();\n+  };\n+\n+  const errorModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--danger-color--100)\"\n+              />\n+              Error\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={errorModalOpen}\n+        onClose={handleErrorModal}\n+        actions={[\n+          <Button\n+            key=\"Retry\"\n+            variant=\"primary\"\n+            id=\"retry-button\"\n+            onClick={handleRetry}\n+          >\n+            Retry\n+          </Button>,\n+          <Button\n+            key=\"Discard\"\n+            variant=\"link\"\n+            id=\"discard-button\"\n+            onClick={handleDiscard}\n+          >\n+            Discard\n+          </Button>\n+        ]}\n+        aria-label=\"Error modal\"\n+        aria-labelledby=\"Error modal\"\n+      >\n+        {variableError}\n+      </Modal>\n+    );\n+  };\n+\n+  const updateVariables = () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 199}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MzM0NjM4OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxNjoxM1rOHFjzYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxNjoxM1rOHFjzYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MTUyMQ==", "bodyText": "can we introduce a function here similarly to the other buttons above?", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475591521", "createdAt": "2020-08-24T13:16:13Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -245,7 +424,20 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n                       <OverflowMenu breakpoint=\"lg\">\n                         <OverflowMenuContent isPersistent>\n                           <OverflowMenuGroup groupType=\"button\" isPersistent>\n-                            {abortButton()}\n+                            <>\n+                              {updateVariables()}\n+                              {abortButton()}\n+                              <Button\n+                                variant=\"plain\"\n+                                onClick={() => {\n+                                  handleRefresh();\n+                                }}\n+                                id=\"refresh-button\"\n+                                aria-label={'Refresh list'}\n+                              >\n+                                <SyncIcon />\n+                              </Button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 234}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MzM1NjQzOnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxODo0NVrOHFj5kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1MjoxMVrOHFlxBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MzEwNw==", "bodyText": "What's the target here? Do we want to just provide option to edit the existing variables? There's no expectation of us allowing adding or removing variables? Cause here, we're not displaying the component unless there's at least one variable ...\nI'd rather display the component all the time, and leave up to the component rendering how that's presented.", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475593107", "createdAt": "2020-08-24T13:18:45Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -257,12 +449,22 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n                     <ProcessDetails data={data} from={currentPage} />\n                   </GridItem>\n                 )}\n-                <GridItem>\n-                  <ProcessDetailsProcessVariables data={data} />\n-                </GridItem>\n+                {Object.keys(updateJson).length > 0 && (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 246}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYyMzY4Nw==", "bodyText": "@jstastny-cz\n\nIdea of this PR is just to add update functionality on process variables, Add and Delete functionalities will be part of the next PR.\n\"updateJson\" always has a variable object in it, on page load updateJson state would be added with variable object and since it is an async process I am just delaying the render until updateJson state is updated. The component is displayed all the time.", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475623687", "createdAt": "2020-08-24T13:52:11Z", "author": {"login": "Sara4994"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -257,12 +449,22 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n                     <ProcessDetails data={data} from={currentPage} />\n                   </GridItem>\n                 )}\n-                <GridItem>\n-                  <ProcessDetailsProcessVariables data={data} />\n-                </GridItem>\n+                {Object.keys(updateJson).length > 0 && (", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MzEwNw=="}, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 246}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MzM2MDM5OnYy", "diffSide": "RIGHT", "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxOTo0OVrOHFj8Eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNDowMjoxOFrOHFmfaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5Mzc0Ng==", "bodyText": "I would expect all variable-related functions and modals to be in the ProcessDetailsProcessVariables component", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475593746", "createdAt": "2020-08-24T13:19:49Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYzNTU2MA==", "bodyText": "@jstastny-cz If you check the UI, the save and refresh buttons are placed above the panels they are not placed inside processVariables panel. Even on code the buttons are placed in the container component(ProcessDetailsPage.tsx), so I feel its better to keep those handler functions on the container component itself. This would also avoid passing too many props  to the child component", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475635560", "createdAt": "2020-08-24T14:02:18Z", "author": {"login": "Sara4994"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5Mzc0Ng=="}, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 637, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}