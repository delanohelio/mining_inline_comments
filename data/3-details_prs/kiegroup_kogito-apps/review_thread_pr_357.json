{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMTc2NDAx", "number": 357, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNToyNTowMFrOEUGRuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowNzo0MlrOEUM3nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NTA5ODE3OnYy", "diffSide": "RIGHT", "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/ModelEventConsumer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNToyNTowMFrOG6MlLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowMTowOFrOG6WbTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY3NjcxOQ==", "bodyText": "I think it could be protected or even private so we can avoid unexpected usages :)", "url": "https://github.com/kiegroup/kogito-apps/pull/357#discussion_r463676719", "createdAt": "2020-07-31T15:25:00Z", "author": {"login": "danielezonca"}, "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/ModelEventConsumer.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.trusty.service.messaging;\n+\n+import java.util.Optional;\n+import java.util.concurrent.CompletionStage;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.fasterxml.jackson.core.type.TypeReference;\n+import io.cloudevents.v1.AttributesImpl;\n+import io.cloudevents.v1.CloudEventImpl;\n+import org.eclipse.microprofile.reactive.messaging.Incoming;\n+import org.eclipse.microprofile.reactive.messaging.Message;\n+import org.kie.kogito.decision.DecisionModelType;\n+import org.kie.kogito.tracing.decision.event.model.ModelEvent;\n+import org.kie.kogito.trusty.service.ITrustyService;\n+\n+@ApplicationScoped\n+public class ModelEventConsumer extends BaseEventConsumer<ModelEvent> {\n+\n+    private static final TypeReference<CloudEventImpl<ModelEvent>> CLOUD_EVENT_TYPE_REF = new TypeReference<>() {\n+    };\n+\n+    public ModelEventConsumer() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35104de4cc2f7203fc2b3bad70a5f46b0780c098"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgzODAyOQ==", "bodyText": "Done.", "url": "https://github.com/kiegroup/kogito-apps/pull/357#discussion_r463838029", "createdAt": "2020-07-31T21:01:08Z", "author": {"login": "manstis"}, "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/ModelEventConsumer.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.trusty.service.messaging;\n+\n+import java.util.Optional;\n+import java.util.concurrent.CompletionStage;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.fasterxml.jackson.core.type.TypeReference;\n+import io.cloudevents.v1.AttributesImpl;\n+import io.cloudevents.v1.CloudEventImpl;\n+import org.eclipse.microprofile.reactive.messaging.Incoming;\n+import org.eclipse.microprofile.reactive.messaging.Message;\n+import org.kie.kogito.decision.DecisionModelType;\n+import org.kie.kogito.tracing.decision.event.model.ModelEvent;\n+import org.kie.kogito.trusty.service.ITrustyService;\n+\n+@ApplicationScoped\n+public class ModelEventConsumer extends BaseEventConsumer<ModelEvent> {\n+\n+    private static final TypeReference<CloudEventImpl<ModelEvent>> CLOUD_EVENT_TYPE_REF = new TypeReference<>() {\n+    };\n+\n+    public ModelEventConsumer() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY3NjcxOQ=="}, "originalCommit": {"oid": "35104de4cc2f7203fc2b3bad70a5f46b0780c098"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NTEwMDIyOnYy", "diffSide": "RIGHT", "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/TraceEventConsumer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNToyNTozMVrOG6MmbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowMToxNlrOG6Wbsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY3NzAzNw==", "bodyText": "Same as above", "url": "https://github.com/kiegroup/kogito-apps/pull/357#discussion_r463677037", "createdAt": "2020-07-31T15:25:31Z", "author": {"login": "danielezonca"}, "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/TraceEventConsumer.java", "diffHunk": "@@ -27,49 +27,38 @@\n import io.cloudevents.v1.CloudEventImpl;\n import org.eclipse.microprofile.reactive.messaging.Incoming;\n import org.eclipse.microprofile.reactive.messaging.Message;\n-import org.kie.kogito.tracing.decision.event.CloudEventUtils;\n import org.kie.kogito.tracing.decision.event.trace.TraceEvent;\n import org.kie.kogito.tracing.decision.event.trace.TraceEventType;\n import org.kie.kogito.trusty.service.ITrustyService;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n \n @ApplicationScoped\n-public class TraceEventConsumer {\n-\n-    private static final Logger LOG = LoggerFactory.getLogger(TraceEventConsumer.class);\n+public class TraceEventConsumer extends BaseEventConsumer<TraceEvent> {\n \n     private static final TypeReference<CloudEventImpl<TraceEvent>> CLOUD_EVENT_TYPE_REF = new TypeReference<>() {\n     };\n \n-    private final ITrustyService service;\n+    public TraceEventConsumer() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35104de4cc2f7203fc2b3bad70a5f46b0780c098"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgzODEzMA==", "bodyText": "Done.", "url": "https://github.com/kiegroup/kogito-apps/pull/357#discussion_r463838130", "createdAt": "2020-07-31T21:01:16Z", "author": {"login": "manstis"}, "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/TraceEventConsumer.java", "diffHunk": "@@ -27,49 +27,38 @@\n import io.cloudevents.v1.CloudEventImpl;\n import org.eclipse.microprofile.reactive.messaging.Incoming;\n import org.eclipse.microprofile.reactive.messaging.Message;\n-import org.kie.kogito.tracing.decision.event.CloudEventUtils;\n import org.kie.kogito.tracing.decision.event.trace.TraceEvent;\n import org.kie.kogito.tracing.decision.event.trace.TraceEventType;\n import org.kie.kogito.trusty.service.ITrustyService;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n \n @ApplicationScoped\n-public class TraceEventConsumer {\n-\n-    private static final Logger LOG = LoggerFactory.getLogger(TraceEventConsumer.class);\n+public class TraceEventConsumer extends BaseEventConsumer<TraceEvent> {\n \n     private static final TypeReference<CloudEventImpl<TraceEvent>> CLOUD_EVENT_TYPE_REF = new TypeReference<>() {\n     };\n \n-    private final ITrustyService service;\n+    public TraceEventConsumer() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY3NzAzNw=="}, "originalCommit": {"oid": "35104de4cc2f7203fc2b3bad70a5f46b0780c098"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NjE2MzAyOnYy", "diffSide": "RIGHT", "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/ModelEventConverter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowNTowNlrOG6Wmeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowNTowNlrOG6Wmeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg0MDg5MA==", "bodyText": "Simple enough; but I put it in a separate class to (1) be consistent, (2) in case it becomes more complex later.", "url": "https://github.com/kiegroup/kogito-apps/pull/357#discussion_r463840890", "createdAt": "2020-07-31T21:05:06Z", "author": {"login": "manstis"}, "path": "trusty/trusty-service/src/main/java/org/kie/kogito/trusty/service/messaging/ModelEventConverter.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.trusty.service.messaging;\n+\n+import org.kie.kogito.tracing.decision.event.model.ModelEvent;\n+\n+public class ModelEventConverter {\n+\n+    public static String toModel(final ModelEvent event) {\n+        return event.getDefinition();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41bedc71d93b73516cb627f7b8ace9ebc6faa3d8"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NjE3ODIxOnYy", "diffSide": "RIGHT", "path": "trusty/trusty-service/src/test/resources/application.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowNzo0MlrOG6WtsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMTowNzo0MlrOG6WtsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg0MjczNg==", "bodyText": "@r00ta FYI, I updated the test topic name to be consistent with the non-test topic naming.", "url": "https://github.com/kiegroup/kogito-apps/pull/357#discussion_r463842736", "createdAt": "2020-07-31T21:07:42Z", "author": {"login": "manstis"}, "path": "trusty/trusty-service/src/test/resources/application.properties", "diffHunk": "@@ -8,9 +8,16 @@ quarkus.infinispan-client.auth-server-name=infinispan\n quarkus.infinispan-client.client-intelligence=BASIC\n quarkus.infinispan-client.sasl-mechanism=DIGEST-MD5\n kogito.persistence.type=infinispan\n+\n # Kafka Tracing\n mp.messaging.incoming.kogito-tracing.group.id=trusty-service\n mp.messaging.incoming.kogito-tracing.connector=smallrye-kafka\n-mp.messaging.incoming.kogito-tracing.topic=trusty-service-test\n+mp.messaging.incoming.kogito-tracing.topic=kogito-tracing-test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41bedc71d93b73516cb627f7b8ace9ebc6faa3d8"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 870, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}