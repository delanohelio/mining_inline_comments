{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNzk0OTYz", "number": 405, "title": "KOGITO-2022: Update feature on process variables", "bodyText": "Many thanks for submitting your Pull Request \u2764\ufe0f!\nPlease make sure that your PR meets the following requirements:\n\n You have read the contributors guide\n Pull Request title is properly formatted: KOGITO-XYZ Subject\n Pull Request title contains the target branch if not targeting master: [0.9.x] KOGITO-XYZ Subject\n Pull Request contains link to the JIRA issue\n Pull Request contains link to any dependent or related Pull Request\n Pull Request contains description of the issue\n Pull Request does not include fixes for issues other than the main ticket", "createdAt": "2020-08-20T09:47:39Z", "url": "https://github.com/kiegroup/kogito-apps/pull/405", "merged": true, "mergeCommit": {"oid": "a08ae1a3a47ba7dc974e02ca8d969a0191118289"}, "closed": true, "closedAt": "2020-08-27T08:00:41Z", "author": {"login": "Sara4994"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAvvxOgBqjM2NzUxMDYyMDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCo2VXAFqTQ3NTMzODU0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "929ba369723d7c82fe36b0577b79b5a09bdd7b5e", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/929ba369723d7c82fe36b0577b79b5a09bdd7b5e", "committedDate": "2020-08-20T09:14:20Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "174a93516980a8dd53076cfd462270be5ba35e9e", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/174a93516980a8dd53076cfd462270be5ba35e9e", "committedDate": "2020-08-20T12:53:53Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "174a93516980a8dd53076cfd462270be5ba35e9e", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/174a93516980a8dd53076cfd462270be5ba35e9e", "committedDate": "2020-08-20T12:53:53Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "3d69d3efb01b3bb4b596bceb5be7b210069505c2", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/3d69d3efb01b3bb4b596bceb5be7b210069505c2", "committedDate": "2020-08-20T13:57:49Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d69d3efb01b3bb4b596bceb5be7b210069505c2", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/3d69d3efb01b3bb4b596bceb5be7b210069505c2", "committedDate": "2020-08-20T13:57:49Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "c10bbc2e31607ead373d958008d2710835b1ff5f", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/c10bbc2e31607ead373d958008d2710835b1ff5f", "committedDate": "2020-08-20T14:31:07Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c10bbc2e31607ead373d958008d2710835b1ff5f", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/c10bbc2e31607ead373d958008d2710835b1ff5f", "committedDate": "2020-08-20T14:31:07Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "77b4c3acaa3bf7bf0e7a56fb8a32323869e8978e", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/77b4c3acaa3bf7bf0e7a56fb8a32323869e8978e", "committedDate": "2020-08-23T08:06:23Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77b4c3acaa3bf7bf0e7a56fb8a32323869e8978e", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/77b4c3acaa3bf7bf0e7a56fb8a32323869e8978e", "committedDate": "2020-08-23T08:06:23Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "d2ddb303081c9dd33f65494f2b6081dcb9833ac5", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/d2ddb303081c9dd33f65494f2b6081dcb9833ac5", "committedDate": "2020-08-23T14:49:03Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2ddb303081c9dd33f65494f2b6081dcb9833ac5", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/d2ddb303081c9dd33f65494f2b6081dcb9833ac5", "committedDate": "2020-08-23T14:49:03Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "9989234ce3e00ec8c5a8bc8ed3201f14d575a607", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/9989234ce3e00ec8c5a8bc8ed3201f14d575a607", "committedDate": "2020-08-23T14:51:14Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9989234ce3e00ec8c5a8bc8ed3201f14d575a607", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/9989234ce3e00ec8c5a8bc8ed3201f14d575a607", "committedDate": "2020-08-23T14:51:14Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "824b499982352dd133267b8b55af71c54de0bc7f", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/824b499982352dd133267b8b55af71c54de0bc7f", "committedDate": "2020-08-24T05:51:58Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTkwNjg5", "url": "https://github.com/kiegroup/kogito-apps/pull/405#pullrequestreview-473190689", "createdAt": "2020-08-24T07:42:24Z", "commit": {"oid": "824b499982352dd133267b8b55af71c54de0bc7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo0MjoyNFrOHFYJmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzo0MjoyNFrOHFYJmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQwMDYwMw==", "bodyText": "@Sara4994 just a minor comment about this Save button. Does here make sense the button duplication just for disabling the button?", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475400603", "createdAt": "2020-08-24T07:42:24Z", "author": {"login": "nmirasch"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +110,119 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    window.location.reload();\n+  };\n+\n+  const handleErrorModal = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+  };\n+\n+  const handleRetry = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+    setVariableError(null);\n+    // tslint:disable-next-line: no-floating-promises\n+    handleSave();\n+  };\n+\n+  const handleDiscard = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+    handleRefresh();\n+  };\n+\n+  const errorModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--danger-color--100)\"\n+              />\n+              Error\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={errorModalOpen}\n+        onClose={handleErrorModal}\n+        actions={[\n+          <Button\n+            key=\"Retry\"\n+            variant=\"primary\"\n+            id=\"retry-button\"\n+            onClick={handleRetry}\n+          >\n+            Retry\n+          </Button>,\n+          <Button\n+            key=\"Discard\"\n+            variant=\"link\"\n+            id=\"discard-button\"\n+            onClick={handleDiscard}\n+          >\n+            Discard\n+          </Button>\n+        ]}\n+        aria-label=\"Error modal\"\n+        aria-labelledby=\"Error modal\"\n+      >\n+        {variableError}\n+      </Modal>\n+    );\n+  };\n+\n+  const updateVariables = () => {\n+    if (data.ProcessInstances[0].serviceUrl !== null && displayLabel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "824b499982352dd133267b8b55af71c54de0bc7f"}, "originalPosition": 138}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "824b499982352dd133267b8b55af71c54de0bc7f", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/824b499982352dd133267b8b55af71c54de0bc7f", "committedDate": "2020-08-24T05:51:58Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "3900b0e1d0ec7c164457a6345e4d82cec03f1169", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/3900b0e1d0ec7c164457a6345e4d82cec03f1169", "committedDate": "2020-08-24T09:39:28Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3900b0e1d0ec7c164457a6345e4d82cec03f1169", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/3900b0e1d0ec7c164457a6345e4d82cec03f1169", "committedDate": "2020-08-24T09:39:28Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/289d257efe301e27652059ff09ee10f19e2c4743", "committedDate": "2020-08-24T09:44:31Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNDM2MjI3", "url": "https://github.com/kiegroup/kogito-apps/pull/405#pullrequestreview-473436227", "createdAt": "2020-08-24T12:54:06Z", "commit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMjo1NDowNlrOHFi-yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzoxOTo0OVrOHFj8Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU3ODA1Ng==", "bodyText": "I understand you need mount for the function invocation? It is resulting in quite long snapshot. Could you check if the lenght can be reduced? (I think at least using find() and mocking react-icons might help a bit)", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475578056", "createdAt": "2020-08-24T12:54:06Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsProcessVariables/tests/ProcessDetailsProcessVariables.test.tsx", "diffHunk": "@@ -1,32 +1,69 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { shallow, mount } from 'enzyme';\n import ProcessDetailsProcessVariables from '../ProcessDetailsProcessVariables';\n-\n+// tslint:disable: no-string-literal\n+// tslint:disable: no-unexpected-multiline\n const props = {\n-  loading: true,\n-  data: {\n-    ProcessInstances: []\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: false,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: false\n };\n \n const props2 = {\n-  loading: false,\n-  data: {\n-    ProcessInstances: [\n-      {\n-        variables:\n-          '{\"trip\":{\"begin\":\"2019-10-22T22:00:00Z[UTC]\",\"city\":\"Berlin\",\"country\":\"Germany\",\"end\":\"2019-10-30T22:00:00Z[UTC]\",\"visaRequired\":false},\"hotel\":{\"address\":{\"city\":\"Berlin\",\"country\":\"Germany\",\"street\":\"street\",\"zipCode\":\"12345\"},\"bookingNumber\":\"XX-012345\",\"name\":\"Perfect hotel\",\"phone\":\"09876543\"},\"traveller\":{\"address\":{\"city\":\"Karkow\",\"country\":\"Poland\",\"street\":\"palna\",\"zipCode\":\"200300\"},\"email\":\"rob@redhat.com\",\"firstName\":\"Rob\",\"lastName\":\"Rob\",\"nationality\":\"Polish\"}}'\n-      }\n-    ]\n-  }\n+  setUpdateJson: jest.fn(),\n+  displayLabel: true,\n+  updateJson: {\n+    trip: {\n+      begin: '2019-10-22T22:00:00Z[UTC]',\n+      city: 'Berlin',\n+      country: 'Germany',\n+      end: '2019-10-30T22:00:00Z[UTC]',\n+      visaRequired: false\n+    }\n+  },\n+  setDisplayLabel: jest.fn(),\n+  displaySuccess: true\n };\n describe('ProcessVariables component tests', () => {\n   it('snapshot testing without variables', () => {\n     const wrapper = shallow(<ProcessDetailsProcessVariables {...props} />);\n     expect(wrapper).toMatchSnapshot();\n   });\n   it('snapshot testing with variables', () => {\n-    const wrapper = shallow(<ProcessDetailsProcessVariables {...props2} />);\n+    const wrapper = mount(<ProcessDetailsProcessVariables {...props2} />);\n     expect(wrapper).toMatchSnapshot();\n+    const onEdit = () => {\n+      return null;\n+    };\n+    const obj = {\n+      name: false,\n+      onEdit,\n+      src: {\n+        trip: {\n+          begin: '2019-10-22T22:00:00Z[UTC]',\n+          city: 'Berlin',\n+          country: 'Germany',\n+          end: '2019-10-30T22:00:00Z[UTC]',\n+          visaRequired: false\n+        }\n+      }\n+    };\n+    wrapper", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4NzU2Mw==", "bodyText": "discard->discards ?", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475587563", "createdAt": "2020-08-24T13:09:25Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    if (displayLabel === true) {\n+      setConfirmationModal(true);\n+    } else {\n+      window.location.reload();\n+    }\n+  };\n+\n+  const handleConfirmationModal = () => {\n+    setConfirmationModal(!confirmationModal);\n+  };\n+\n+  const handleConfirm = () => {\n+    window.location.reload();\n+    handleConfirmationModal();\n+  };\n+\n+  const handleCancel = () => {\n+    handleConfirmationModal();\n+  };\n+\n+  const RenderConfirmationModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--warning-color--100)\"\n+              />\n+              Refresh\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={confirmationModal}\n+        onClose={handleConfirmationModal}\n+        actions={[\n+          <Button\n+            key=\"Ok\"\n+            variant=\"primary\"\n+            id=\"confirm-button\"\n+            onClick={handleConfirm}\n+          >\n+            Ok\n+          </Button>,\n+          <Button\n+            key=\"Cancel\"\n+            variant=\"link\"\n+            id=\"cancel-button\"\n+            onClick={handleCancel}\n+          >\n+            Cancel\n+          </Button>\n+        ]}\n+        aria-label=\"Confirmation modal\"\n+        aria-labelledby=\"Confirmation modal\"\n+      >\n+        This action discard changes made on process variables.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MTAzMQ==", "bodyText": "updateVariables->updateVariablesButton", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475591031", "createdAt": "2020-08-24T13:15:24Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {\n+    setDisplaySuccess(false);\n+    await handleVariableUpdate(\n+      data.ProcessInstances[0],\n+      updateJson,\n+      setDisplayLabel,\n+      setDisplaySuccess,\n+      setVariableError\n+    );\n+  };\n+\n+  const handleRefresh = () => {\n+    if (displayLabel === true) {\n+      setConfirmationModal(true);\n+    } else {\n+      window.location.reload();\n+    }\n+  };\n+\n+  const handleConfirmationModal = () => {\n+    setConfirmationModal(!confirmationModal);\n+  };\n+\n+  const handleConfirm = () => {\n+    window.location.reload();\n+    handleConfirmationModal();\n+  };\n+\n+  const handleCancel = () => {\n+    handleConfirmationModal();\n+  };\n+\n+  const RenderConfirmationModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--warning-color--100)\"\n+              />\n+              Refresh\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={confirmationModal}\n+        onClose={handleConfirmationModal}\n+        actions={[\n+          <Button\n+            key=\"Ok\"\n+            variant=\"primary\"\n+            id=\"confirm-button\"\n+            onClick={handleConfirm}\n+          >\n+            Ok\n+          </Button>,\n+          <Button\n+            key=\"Cancel\"\n+            variant=\"link\"\n+            id=\"cancel-button\"\n+            onClick={handleCancel}\n+          >\n+            Cancel\n+          </Button>\n+        ]}\n+        aria-label=\"Confirmation modal\"\n+        aria-labelledby=\"Confirmation modal\"\n+      >\n+        This action discard changes made on process variables.\n+      </Modal>\n+    );\n+  };\n+\n+  const handleErrorModal = () => {\n+    setErrorModalOpen(!errorModalOpen);\n+  };\n+\n+  const handleRetry = () => {\n+    handleErrorModal();\n+    setVariableError(null);\n+    // tslint:disable-next-line: no-floating-promises\n+    handleSave();\n+  };\n+\n+  const handleDiscard = () => {\n+    handleErrorModal();\n+    handleRefresh();\n+  };\n+\n+  const errorModal = () => {\n+    return (\n+      <Modal\n+        title=\"\"\n+        header={\n+          <>\n+            <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+              <InfoCircleIcon\n+                className=\"pf-u-mr-sm\"\n+                color=\"var(--pf-global--danger-color--100)\"\n+              />\n+              Error\n+            </Title>\n+          </>\n+        }\n+        variant={ModalVariant.small}\n+        isOpen={errorModalOpen}\n+        onClose={handleErrorModal}\n+        actions={[\n+          <Button\n+            key=\"Retry\"\n+            variant=\"primary\"\n+            id=\"retry-button\"\n+            onClick={handleRetry}\n+          >\n+            Retry\n+          </Button>,\n+          <Button\n+            key=\"Discard\"\n+            variant=\"link\"\n+            id=\"discard-button\"\n+            onClick={handleDiscard}\n+          >\n+            Discard\n+          </Button>\n+        ]}\n+        aria-label=\"Error modal\"\n+        aria-labelledby=\"Error modal\"\n+      >\n+        {variableError}\n+      </Modal>\n+    );\n+  };\n+\n+  const updateVariables = () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 199}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MTUyMQ==", "bodyText": "can we introduce a function here similarly to the other buttons above?", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475591521", "createdAt": "2020-08-24T13:16:13Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -245,7 +424,20 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n                       <OverflowMenu breakpoint=\"lg\">\n                         <OverflowMenuContent isPersistent>\n                           <OverflowMenuGroup groupType=\"button\" isPersistent>\n-                            {abortButton()}\n+                            <>\n+                              {updateVariables()}\n+                              {abortButton()}\n+                              <Button\n+                                variant=\"plain\"\n+                                onClick={() => {\n+                                  handleRefresh();\n+                                }}\n+                                id=\"refresh-button\"\n+                                aria-label={'Refresh list'}\n+                              >\n+                                <SyncIcon />\n+                              </Button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 234}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MzEwNw==", "bodyText": "What's the target here? Do we want to just provide option to edit the existing variables? There's no expectation of us allowing adding or removing variables? Cause here, we're not displaying the component unless there's at least one variable ...\nI'd rather display the component all the time, and leave up to the component rendering how that's presented.", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475593107", "createdAt": "2020-08-24T13:18:45Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -257,12 +449,22 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n                     <ProcessDetails data={data} from={currentPage} />\n                   </GridItem>\n                 )}\n-                <GridItem>\n-                  <ProcessDetailsProcessVariables data={data} />\n-                </GridItem>\n+                {Object.keys(updateJson).length > 0 && (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 246}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5Mzc0Ng==", "bodyText": "I would expect all variable-related functions and modals to be in the ProcessDetailsProcessVariables component", "url": "https://github.com/kiegroup/kogito-apps/pull/405#discussion_r475593746", "createdAt": "2020-08-24T13:19:49Z", "author": {"login": "jstastny-cz"}, "path": "ui-packages/packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -96,6 +111,170 @@ const ProcessDetailsPage: React.FC<RouteComponentProps<MatchProps, {}, {}> &\n         )\n     );\n   };\n+\n+  useEffect(() => {\n+    if (data) {\n+      setUpdateJson(JSON.parse(data.ProcessInstances[0].variables));\n+    }\n+  }, [data]);\n+\n+  useEffect(() => {\n+    if (variableError && variableError.length > 0) {\n+      setErrorModalOpen(true);\n+    }\n+  }, [variableError]);\n+\n+  const handleSave = async () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743"}, "originalPosition": 63}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "289d257efe301e27652059ff09ee10f19e2c4743", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/289d257efe301e27652059ff09ee10f19e2c4743", "committedDate": "2020-08-24T09:44:31Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "62baaf346517d255bbd38d849266c17112a367ec", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/62baaf346517d255bbd38d849266c17112a367ec", "committedDate": "2020-08-24T14:12:55Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62baaf346517d255bbd38d849266c17112a367ec", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/62baaf346517d255bbd38d849266c17112a367ec", "committedDate": "2020-08-24T14:12:55Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "ab1a08748416eefff6e60eefce17b0c3387c9b98", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/ab1a08748416eefff6e60eefce17b0c3387c9b98", "committedDate": "2020-08-25T07:13:19Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab1a08748416eefff6e60eefce17b0c3387c9b98", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/ab1a08748416eefff6e60eefce17b0c3387c9b98", "committedDate": "2020-08-25T07:13:19Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "f56d5f153017277fda71c04d9cc78f4cade13152", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/f56d5f153017277fda71c04d9cc78f4cade13152", "committedDate": "2020-08-25T10:43:30Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTIzNzEz", "url": "https://github.com/kiegroup/kogito-apps/pull/405#pullrequestreview-474523713", "createdAt": "2020-08-25T14:13:15Z", "commit": {"oid": "f56d5f153017277fda71c04d9cc78f4cade13152"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MjA1NjI0", "url": "https://github.com/kiegroup/kogito-apps/pull/405#pullrequestreview-475205624", "createdAt": "2020-08-26T07:03:51Z", "commit": {"oid": "f56d5f153017277fda71c04d9cc78f4cade13152"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6c9c6f63905511ce8388671e4cb9634bc1942d1", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/e6c9c6f63905511ce8388671e4cb9634bc1942d1", "committedDate": "2020-08-26T08:19:44Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f56d5f153017277fda71c04d9cc78f4cade13152", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/f56d5f153017277fda71c04d9cc78f4cade13152", "committedDate": "2020-08-25T10:43:30Z", "message": "KOGITO-2022: Update feature on process variables"}, "afterCommit": {"oid": "e6c9c6f63905511ce8388671e4cb9634bc1942d1", "author": {"user": {"login": "Sara4994", "name": null}}, "url": "https://github.com/kiegroup/kogito-apps/commit/e6c9c6f63905511ce8388671e4cb9634bc1942d1", "committedDate": "2020-08-26T08:19:44Z", "message": "KOGITO-2022: Update feature on process variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzM4NTQ4", "url": "https://github.com/kiegroup/kogito-apps/pull/405#pullrequestreview-475338548", "createdAt": "2020-08-26T10:00:38Z", "commit": {"oid": "e6c9c6f63905511ce8388671e4cb9634bc1942d1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4705, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}