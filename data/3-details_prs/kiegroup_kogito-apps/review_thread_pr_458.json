{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3OTc5MjU2", "number": 458, "reviewThreads": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMDowNzozNFrOEpwseQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNTozNjoyNlrOEv2Iug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMjI0ODg5OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMDowNzozNFrOHboNLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozMjowOVrOHh3Hbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODczMjMzMw==", "bodyText": "Can you please clarify this code? Do you get dmn file from a remote jar?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r498732333", "createdAt": "2020-10-02T10:07:34Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>testcontainers</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>kafka</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>\n+      <artifactId>rest-assured</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>bundle</goal>\n+            </goals>\n+            <configuration>\n+              <includes>\n+                <include>**/*.dmn</include>\n+              </includes>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "121910364adfa07873804d9e4d9c213b65c4cede"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI2NDI5OA==", "bodyText": "The dmn files used in the tests are contained in the common module and bundled during compilation. The resources of this module are then imported in the framework-specific test modules (quarkus and springboot).\nI used the same structure already implemented in the jobs-service integration tests.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502264298", "createdAt": "2020-10-09T08:17:00Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>testcontainers</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>kafka</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>\n+      <artifactId>rest-assured</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>bundle</goal>\n+            </goals>\n+            <configuration>\n+              <includes>\n+                <include>**/*.dmn</include>\n+              </includes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODczMjMzMw=="}, "originalCommit": {"oid": "121910364adfa07873804d9e4d9c213b65c4cede"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY4NTc1Mw==", "bodyText": "Is it possible to include all the resources without filter dmn specifically? I think this could make it more \"future proof\"", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r504685753", "createdAt": "2020-10-14T13:41:03Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>testcontainers</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>kafka</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>\n+      <artifactId>rest-assured</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>bundle</goal>\n+            </goals>\n+            <configuration>\n+              <includes>\n+                <include>**/*.dmn</include>\n+              </includes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODczMjMzMw=="}, "originalCommit": {"oid": "121910364adfa07873804d9e4d9c213b65c4cede"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI2ODA3OA==", "bodyText": "According to the plugin documentation, the include directives must be explicitly specified.\nI didn't test with a generic * filter, but I'd prefer specifying new filters when needed in the future rather than blindly including every resource file.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r505268078", "createdAt": "2020-10-15T07:32:09Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>testcontainers</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>kafka</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-api</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>\n+      <artifactId>rest-assured</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>bundle</goal>\n+            </goals>\n+            <configuration>\n+              <includes>\n+                <include>**/*.dmn</include>\n+              </includes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODczMjMzMw=="}, "originalCommit": {"oid": "121910364adfa07873804d9e4d9c213b65c4cede"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMjU5Njk4OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxMjoyMzoxMlrOHbrk2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNTozNjo0N1rOHfPDbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4NzU0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <!-- internal containers used for testing (built by maven) -->\n          \n          \n            \n                <!-- internal containers used for testing (built by maven using quarkus-container-image-jib) -->", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r498787544", "createdAt": "2020-10-02T12:23:12Z", "author": {"login": "danielezonca"}, "path": "pom.xml", "diffHunk": "@@ -27,9 +27,12 @@\n \n     <version.org.infinispan.image>10.1.5.Final</version.org.infinispan.image>\n \n-    <!-- containers used for testing -->\n+    <!-- external containers used for testing -->\n     <container.image.infinispan>quay.io/infinispan/server:${version.org.infinispan.image}</container.image.infinispan>\n+    <!-- internal containers used for testing (built by maven) -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUxNDU0MQ==", "bodyText": "Done \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502514541", "createdAt": "2020-10-09T15:36:47Z", "author": {"login": "kostola"}, "path": "pom.xml", "diffHunk": "@@ -27,9 +27,12 @@\n \n     <version.org.infinispan.image>10.1.5.Final</version.org.infinispan.image>\n \n-    <!-- containers used for testing -->\n+    <!-- external containers used for testing -->\n     <container.image.infinispan>quay.io/infinispan/server:${version.org.infinispan.image}</container.image.infinispan>\n+    <!-- internal containers used for testing (built by maven) -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODc4NzU0NA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTUzNTEyOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMjo1NTo0NFrOHedLNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNDo0MVrOHfQZLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY5NzMzNQ==", "bodyText": "What about use this alternative?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501697335", "createdAt": "2020-10-08T12:55:44Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI2NzcxOA==", "bodyText": "Yes it's definitely cleaner. Thanks!", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502267718", "createdAt": "2020-10-09T08:23:24Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY5NzMzNQ=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNjQ5Mw==", "bodyText": "Done \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502536493", "createdAt": "2020-10-09T16:14:41Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY5NzMzNQ=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 107}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTU5MzE1OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzowOTo0OFrOHedvkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNDo0OFrOHfQZag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcwNjY0MA==", "bodyText": "Please copy the default application.properties file from the archetype to be on the safe side\nhttps://github.com/kiegroup/kogito-runtimes/blob/master/archetypes/kogito-springboot-archetype/src/main/resources/archetype-resources/src/main/resources/application.properties", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501706640", "createdAt": "2020-10-08T13:09:48Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,18 @@\n+#\n+#  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+#\n+#  Licensed under the Apache License, Version 2.0 (the \"License\");\n+#  you may not use this file except in compliance with the License.\n+#  You may obtain a copy of the License at\n+#\n+#        http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#  Unless required by applicable law or agreed to in writing, software\n+#  distributed under the License is distributed on an \"AS IS\" BASIS,\n+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+#  See the License for the specific language governing permissions and\n+#  limitations under the License.\n+#\n+\n+server.address=0.0.0.0\n+resteasy.jaxrs.scan-packages=org.kie.kogito.**,http*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNjU1NA==", "bodyText": "Done \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502536554", "createdAt": "2020-10-09T16:14:48Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,18 @@\n+#\n+#  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+#\n+#  Licensed under the Apache License, Version 2.0 (the \"License\");\n+#  you may not use this file except in compliance with the License.\n+#  You may obtain a copy of the License at\n+#\n+#        http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#  Unless required by applicable law or agreed to in writing, software\n+#  distributed under the License is distributed on an \"AS IS\" BASIS,\n+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+#  See the License for the specific language governing permissions and\n+#  limitations under the License.\n+#\n+\n+server.address=0.0.0.0\n+resteasy.jaxrs.scan-packages=org.kie.kogito.**,http*", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcwNjY0MA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTYwODE5OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoxMzoxOFrOHed4uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNDoxNFrOHfQYPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcwODk4NA==", "bodyText": "Why are these deps only in compile scope? Is there any particular reason for that?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501708984", "createdAt": "2020-10-08T13:13:18Z", "author": {"login": "jiripetrlik"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI3NDk2Mw==", "bodyText": "I think I added this dependency via Intellij and this is its standard way. I will remove the explicit scope.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502274963", "createdAt": "2020-10-09T08:36:39Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcwODk4NA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNjI1Mg==", "bodyText": "I was wrong. I must explicitly add compile because by default those dependencies are in test scope but, since this is a common module that is imported in the framework-specific test packages, here the compile scope is correct so the dependent modules won't need to reimport the dependencies as well.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502536252", "createdAt": "2020-10-09T16:14:14Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/pom.xml", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+\n+  <artifactId>integration-tests-trusty-service-common</artifactId>\n+\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Common</name>\n+  <description>Processes and common classes for integration tests</description>\n+\n+  <properties>\n+    <sonar.exclusions>**/it/*.java,**/testcontainers/*.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>trusty-service-api</artifactId>\n+      <scope>compile</scope>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcwODk4NA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTYyMjA0OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoxNjoxMlrOHeeBCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNjoxN1rOHfQc3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxMTExMg==", "bodyText": "Can we consider some waiting loop which checks regulry if the result is available? It might be faster.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501711112", "createdAt": "2020-10-08T13:16:12Z", "author": {"login": "jiripetrlik"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNzQzNg==", "bodyText": "Done following this suggestion \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502537436", "createdAt": "2020-10-09T16:16:17Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxMTExMg=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 107}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTYzMTk5OnYy", "diffSide": "RIGHT", "path": "trusty/trusty-service/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoxODowM1rOHeeGzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjoxMTo0NlrOHiPgJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxMjU4OQ==", "bodyText": "@r00ta\nCan you please double check if this change can have an impact on Keycloak integration?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501712589", "createdAt": "2020-10-08T13:18:03Z", "author": {"login": "danielezonca"}, "path": "trusty/trusty-service/src/main/resources/application.properties", "diffHunk": "@@ -1,18 +1,30 @@\n quarkus.http.cors=true\n \n-#oidc\n-quarkus.oidc.enabled=true\n-quarkus.oidc.tenant-enabled=false\n+# Quarkus OIDC\n+quarkus.oidc.enabled=false\n+quarkus.oidc.auth-server-url=none", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY2NzYyMw==", "bodyText": "That change was wrong. I fixed it now and added Keycloak to the integration tests.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r505667623", "createdAt": "2020-10-15T16:11:46Z", "author": {"login": "kostola"}, "path": "trusty/trusty-service/src/main/resources/application.properties", "diffHunk": "@@ -1,18 +1,30 @@\n quarkus.http.cors=true\n \n-#oidc\n-quarkus.oidc.enabled=true\n-quarkus.oidc.tenant-enabled=false\n+# Quarkus OIDC\n+quarkus.oidc.enabled=false\n+quarkus.oidc.auth-server-url=none", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxMjU4OQ=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY0NDcwOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoyMDozOFrOHeeOdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzoyODo1NlrOHh23hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDU1MA==", "bodyText": "Can we run this loop multiple times and evaluate whether multiple invocations are handled correctly and not mixed for example etc.?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501714550", "createdAt": "2020-10-08T13:20:38Z", "author": {"login": "jiripetrlik"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc1NzM1MA==", "bodyText": "Do you mean the whole loop? Generating execution + verifying that it's stored in trusty + verify explainability results?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r503757350", "createdAt": "2020-10-13T08:19:23Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDU1MA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1NzU1NQ==", "bodyText": "Yes. Would it be possible? It will be much more robust integration test if there are multiple evaluation etc. We know that all is processed well and without any mixing of messages etc.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r504057555", "createdAt": "2020-10-13T15:40:55Z", "author": {"login": "jiripetrlik"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDU1MA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ5NTcxMg==", "bodyText": "Yes I will do it now \ud83d\ude09", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r504495712", "createdAt": "2020-10-14T08:28:52Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDU1MA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI2NDAwNw==", "bodyText": "Done \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r505264007", "createdAt": "2020-10-15T07:28:56Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDU1MA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 130}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY0NTY0OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoyMDo0OVrOHeePAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNDoyOVrOHfQYzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDY5MA==", "bodyText": "Unexpected new line.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501714690", "createdAt": "2020-10-08T13:20:49Z", "author": {"login": "jiripetrlik"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());\n+        }\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNjM5Ng==", "bodyText": "Removed \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502536396", "createdAt": "2020-10-09T16:14:29Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);\n+\n+            explService.start();\n+            assertTrue(explService.isRunning());\n+\n+            trustyService.start();\n+            assertTrue(trustyService.isRunning());\n+\n+            kogitoService.start();\n+            assertTrue(kogitoService.isRunning());\n+\n+            String json = \"{\\\"Driver\\\":{\\\"Age\\\":25,\\\"Points\\\":13},\\\"Violation\\\":{\\\"Type\\\":\\\"speed\\\",\\\"Actual Speed\\\":115,\\\"Speed Limit\\\":100}}\";\n+\n+            given()\n+                    .port(kogitoService.getFirstMappedPort())\n+                    .contentType(\"application/json\")\n+                    .body(json)\n+                    .when().post(\"/Traffic Violation\")\n+                    .then().statusCode(200);\n+\n+            // wait a reasonable amount of time for the loop to complete\n+            Thread.sleep(5000);\n+\n+            ExecutionsResponse executionsResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions?limit=1\")\n+                    .then().statusCode(200)\n+                    .extract().as(ExecutionsResponse.class);\n+\n+            assertSame(1, executionsResponse.getHeaders().size());\n+\n+            String executionId = executionsResponse.getHeaders().stream()\n+                    .findFirst()\n+                    .map(ExecutionHeaderResponse::getExecutionId)\n+                    .orElseThrow(IllegalStateException::new);\n+\n+            assertNotNull(executionId);\n+\n+            SalienciesResponse salienciesResponse = given()\n+                    .port(trustyService.getFirstMappedPort())\n+                    .when().get(\"/executions/decisions/\" + executionId + \"/explanations/saliencies\")\n+                    .then().statusCode(200)\n+                    .extract().as(SalienciesResponse.class);\n+\n+            assertEquals(\"SUCCEEDED\", salienciesResponse.getStatus());\n+        }\n+    }\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcxNDY5MA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 133}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY5MTQwOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozMDo0MFrOHeerKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNToxOFrOHfQanw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMTg5OA==", "bodyText": "Please move to constants:\n\naliases\nports", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501721898", "createdAt": "2020-10-08T13:30:40Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNjg2Mw==", "bodyText": "Done \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502536863", "createdAt": "2020-10-09T16:15:18Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMTg5OA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY5NTE0OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozMTozNVrOHeetig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNzowNFrOHfQeig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMjUwNg==", "bodyText": "Is this value fixed?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501722506", "createdAt": "2020-10-08T13:31:35Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNzg2Ng==", "bodyText": "Sorry this was a leftover from some previous tests. I removed it now.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502537866", "createdAt": "2020-10-09T16:17:04Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/it/trusty/AbstractTrustyExplainabilityEnd2EndIT.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.it.trusty;\n+\n+import java.util.function.BiFunction;\n+\n+import org.junit.jupiter.api.Test;\n+import org.kie.kogito.testcontainers.ExplainabilityServiceMessagingContainer;\n+import org.kie.kogito.testcontainers.InfinispanContainer;\n+import org.kie.kogito.testcontainers.KogitoServiceContainer;\n+import org.kie.kogito.testcontainers.TrustyServiceContainer;\n+import org.kie.kogito.trusty.service.responses.ExecutionHeaderResponse;\n+import org.kie.kogito.trusty.service.responses.ExecutionsResponse;\n+import org.kie.kogito.trusty.service.responses.SalienciesResponse;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.KafkaContainer;\n+import org.testcontainers.containers.Network;\n+import org.testcontainers.containers.output.Slf4jLogConsumer;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.junit.jupiter.api.Assertions.assertSame;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+public abstract class AbstractTrustyExplainabilityEnd2EndIT {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractTrustyExplainabilityEnd2EndIT.class);\n+\n+    private final BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer;\n+\n+    protected AbstractTrustyExplainabilityEnd2EndIT(BiFunction<String, String, KogitoServiceContainer> kogitoServiceContainerProducer) {\n+        this.kogitoServiceContainerProducer = kogitoServiceContainerProducer;\n+    }\n+\n+    @Test\n+    public void doTest() throws Exception {\n+        try (\n+                final Network network = Network.newNetwork();\n+\n+                final InfinispanContainer infinispan = new InfinispanContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"infinispan\");\n+\n+                final KafkaContainer kafka = new KafkaContainer()\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kafka\");\n+\n+                final ExplainabilityServiceMessagingContainer explService = new ExplainabilityServiceMessagingContainer(\"kafka:9092\", 10)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"expl-service\");\n+\n+                final TrustyServiceContainer trustyService = new TrustyServiceContainer(\"infinispan:11222\", \"kafka:9092\", true)\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"trusty-service\");\n+\n+                final KogitoServiceContainer kogitoService = kogitoServiceContainerProducer.apply(\"kafka:9092\", \"http://kogito-service:8080\")\n+                        .withLogConsumer(new Slf4jLogConsumer(LOGGER))\n+                        .withNetwork(network)\n+                        .withNetworkAliases(\"kogito-service\")\n+        ) {\n+            infinispan.start();\n+            assertTrue(infinispan.isRunning());\n+\n+            kafka.start();\n+            assertTrue(kafka.isRunning());\n+\n+            Testcontainers.exposeHostPorts(18080);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMjUwNg=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY5NjIxOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/InfinispanContainer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozMTo1MFrOHeeuMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNTo1OToxNFrOHfP3Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMjY3Mg==", "bodyText": "Move to config/constant?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501722672", "createdAt": "2020-10-08T13:31:50Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/InfinispanContainer.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.testcontainers;\n+\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.wait.strategy.Wait;\n+\n+import static org.kie.kogito.testcontainers.TestcontainersUtils.getImageName;\n+\n+public class InfinispanContainer extends GenericContainer<InfinispanContainer> {\n+\n+    public InfinispanContainer() {\n+        super(getImageName(\"infinispan\"));  // \"quay.io/infinispan/server:10.1.5.Final\"\n+        addEnv(\"USER\", \"admin\");\n+        addEnv(\"PASS\", \"admin\");\n+        addExposedPort(11222);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUyNzg0Mg==", "bodyText": "This is only the internal exposed port, which should be fixed to this value, it will then be mapped to a random available one by testcontainers. Do you still want to create a config for it?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502527842", "createdAt": "2020-10-09T15:59:14Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/InfinispanContainer.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.testcontainers;\n+\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.wait.strategy.Wait;\n+\n+import static org.kie.kogito.testcontainers.TestcontainersUtils.getImageName;\n+\n+public class InfinispanContainer extends GenericContainer<InfinispanContainer> {\n+\n+    public InfinispanContainer() {\n+        super(getImageName(\"infinispan\"));  // \"quay.io/infinispan/server:10.1.5.Final\"\n+        addEnv(\"USER\", \"admin\");\n+        addEnv(\"PASS\", \"admin\");\n+        addExposedPort(11222);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMjY3Mg=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY5NzI5OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/KogitoServiceContainer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozMjowMlrOHeeuyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNTo1OToyN1rOHfP34w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMjgyNg==", "bodyText": "Move to config/constant?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501722826", "createdAt": "2020-10-08T13:32:02Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/KogitoServiceContainer.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.testcontainers;\n+\n+import org.testcontainers.containers.GenericContainer;\n+\n+import static org.kie.kogito.testcontainers.TestcontainersUtils.getImageName;\n+\n+public class KogitoServiceContainer extends GenericContainer<KogitoServiceContainer> {\n+\n+    public KogitoServiceContainer(String kogitoServiceUrl) {\n+        super(getImageName(\"kogito-service\"));  // \"org.kie.kogito/integration-tests-trusty-service-quarkus:1.0.0-SNAPSHOT\"\n+        addEnv(\"KOGITO_SERVICE_URL\", kogitoServiceUrl);\n+        addExposedPort(8080);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUyNzk3MQ==", "bodyText": "Same as here.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502527971", "createdAt": "2020-10-09T15:59:27Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/KogitoServiceContainer.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.testcontainers;\n+\n+import org.testcontainers.containers.GenericContainer;\n+\n+import static org.kie.kogito.testcontainers.TestcontainersUtils.getImageName;\n+\n+public class KogitoServiceContainer extends GenericContainer<KogitoServiceContainer> {\n+\n+    public KogitoServiceContainer(String kogitoServiceUrl) {\n+        super(getImageName(\"kogito-service\"));  // \"org.kie.kogito/integration-tests-trusty-service-quarkus:1.0.0-SNAPSHOT\"\n+        addEnv(\"KOGITO_SERVICE_URL\", kogitoServiceUrl);\n+        addExposedPort(8080);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMjgyNg=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY5OTA0OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/TrustyServiceContainer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozMjoyOFrOHeev8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNTo1OTozM1rOHfP4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMzEyMA==", "bodyText": "Move to config/constant?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501723120", "createdAt": "2020-10-08T13:32:28Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/TrustyServiceContainer.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.testcontainers;\n+\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.wait.strategy.Wait;\n+\n+import static org.kie.kogito.testcontainers.TestcontainersUtils.getImageName;\n+\n+public class TrustyServiceContainer extends GenericContainer<TrustyServiceContainer> {\n+\n+    public TrustyServiceContainer(String infinispanServerList, String kafkaBootstrapServer, boolean explainabilityEnabled) {\n+        super(getImageName(\"trusty-service\"));  // \"org.kie.kogito/trusty-service:1.0.0-SNAPSHOT\"\n+        addEnv(\"INFINISPAN_SERVER_LIST\", infinispanServerList);\n+        addEnv(\"KAFKA_BOOTSTRAP_SERVERS\", kafkaBootstrapServer);\n+        addEnv(\"TRUSTY_EXPLAINABILITY_ENABLED\", String.valueOf(explainabilityEnabled));\n+        addExposedPort(8080);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUyODA1Mw==", "bodyText": "Same as here.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502528053", "createdAt": "2020-10-09T15:59:33Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-common/src/main/java/org/kie/kogito/testcontainers/TrustyServiceContainer.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ *  Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.kie.kogito.testcontainers;\n+\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.wait.strategy.Wait;\n+\n+import static org.kie.kogito.testcontainers.TestcontainersUtils.getImageName;\n+\n+public class TrustyServiceContainer extends GenericContainer<TrustyServiceContainer> {\n+\n+    public TrustyServiceContainer(String infinispanServerList, String kafkaBootstrapServer, boolean explainabilityEnabled) {\n+        super(getImageName(\"trusty-service\"));  // \"org.kie.kogito/trusty-service:1.0.0-SNAPSHOT\"\n+        addEnv(\"INFINISPAN_SERVER_LIST\", infinispanServerList);\n+        addEnv(\"KAFKA_BOOTSTRAP_SERVERS\", kafkaBootstrapServer);\n+        addEnv(\"TRUSTY_EXPLAINABILITY_ENABLED\", String.valueOf(explainabilityEnabled));\n+        addExposedPort(8080);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMzEyMA=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTcxMjQyOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozNToyNlrOHee4aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODoyMDowNVrOHe_4gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTI5MQ==", "bodyText": "Can you please clarify the reason of this?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501725291", "createdAt": "2020-10-08T13:35:26Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "diffHunk": "@@ -0,0 +1,114 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-quarkus</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Quarkus</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-quarkus:${project.version}</container.image.kogito-service>\n+  </properties>\n+\n+  <dependencyManagement>\n+    <dependencies>\n+      <dependency>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-bom</artifactId>\n+        <version>${project.version}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-bom</artifactId>\n+        <version>${version.io.quarkus}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+    </dependencies>\n+  </dependencyManagement>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-quarkus</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-quarkus-addon</artifactId>\n+    </dependency>\n+\n+    <!-- Build container image -->\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-container-image-jib</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <outputDirectory>${project.basedir}/src/main/resources/</outputDirectory>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      <plugin>\n+        <artifactId>maven-clean-plugin</artifactId>\n+        <configuration>\n+          <filesets>\n+            <fileset>\n+              <directory>${project.basedir}/src/main/resources/</directory>\n+              <includes>\n+                <include>*.dmn</include>\n+              </includes>\n+            </fileset>\n+          </filesets>\n+        </configuration>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI2NTk4Nw==", "bodyText": "This is part of the behavior described here.\nIt should delete the imported resources from the common module during the clean phase.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502265987", "createdAt": "2020-10-09T08:20:05Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "diffHunk": "@@ -0,0 +1,114 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-quarkus</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Quarkus</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-quarkus:${project.version}</container.image.kogito-service>\n+  </properties>\n+\n+  <dependencyManagement>\n+    <dependencies>\n+      <dependency>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-bom</artifactId>\n+        <version>${project.version}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-bom</artifactId>\n+        <version>${version.io.quarkus}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+    </dependencies>\n+  </dependencyManagement>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-quarkus</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-quarkus-addon</artifactId>\n+    </dependency>\n+\n+    <!-- Build container image -->\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-container-image-jib</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <outputDirectory>${project.basedir}/src/main/resources/</outputDirectory>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      <plugin>\n+        <artifactId>maven-clean-plugin</artifactId>\n+        <configuration>\n+          <filesets>\n+            <fileset>\n+              <directory>${project.basedir}/src/main/resources/</directory>\n+              <includes>\n+                <include>*.dmn</include>\n+              </includes>\n+            </fileset>\n+          </filesets>\n+        </configuration>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTI5MQ=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTcxNDkzOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozNTo1NlrOHee5_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozMzoxNFrOHh3MbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTY5Mw==", "bodyText": "Can you please clarify the reason of this?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501725693", "createdAt": "2020-10-08T13:35:56Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "diffHunk": "@@ -0,0 +1,114 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-quarkus</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Quarkus</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-quarkus:${project.version}</container.image.kogito-service>\n+  </properties>\n+\n+  <dependencyManagement>\n+    <dependencies>\n+      <dependency>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-bom</artifactId>\n+        <version>${project.version}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-bom</artifactId>\n+        <version>${version.io.quarkus}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+    </dependencies>\n+  </dependencyManagement>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-quarkus</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-quarkus-addon</artifactId>\n+    </dependency>\n+\n+    <!-- Build container image -->\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-container-image-jib</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <outputDirectory>${project.basedir}/src/main/resources/</outputDirectory>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI2NjQ2OQ==", "bodyText": "This is part of the behavior described here.\nIt imports in the current project sources the resources bundled in the common module.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502266469", "createdAt": "2020-10-09T08:20:57Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "diffHunk": "@@ -0,0 +1,114 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-quarkus</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Quarkus</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-quarkus:${project.version}</container.image.kogito-service>\n+  </properties>\n+\n+  <dependencyManagement>\n+    <dependencies>\n+      <dependency>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-bom</artifactId>\n+        <version>${project.version}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-bom</artifactId>\n+        <version>${version.io.quarkus}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+    </dependencies>\n+  </dependencyManagement>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-quarkus</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-quarkus-addon</artifactId>\n+    </dependency>\n+\n+    <!-- Build container image -->\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-container-image-jib</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <outputDirectory>${project.basedir}/src/main/resources/</outputDirectory>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTY5Mw=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI2OTM1Nw==", "bodyText": "More info in the plugin documentation.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r505269357", "createdAt": "2020-10-15T07:33:14Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-quarkus/pom.xml", "diffHunk": "@@ -0,0 +1,114 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-quarkus</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Quarkus</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-quarkus:${project.version}</container.image.kogito-service>\n+  </properties>\n+\n+  <dependencyManagement>\n+    <dependencies>\n+      <dependency>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-bom</artifactId>\n+        <version>${project.version}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+      <dependency>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-bom</artifactId>\n+        <version>${version.io.quarkus}</version>\n+        <type>pom</type>\n+        <scope>import</scope>\n+      </dependency>\n+    </dependencies>\n+  </dependencyManagement>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-quarkus</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-quarkus-addon</artifactId>\n+    </dependency>\n+\n+    <!-- Build container image -->\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-container-image-jib</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <outputDirectory>${project.basedir}/src/main/resources/</outputDirectory>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTY5Mw=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTcxNTc5OnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozNjowOVrOHee6iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzozMzozNVrOHh3OFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTgzMw==", "bodyText": "Can you please clarify the reason of this?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501725833", "createdAt": "2020-10-08T13:36:09Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI2NjUzOA==", "bodyText": "This is part of the behavior described here.\nIt imports in the current project sources the resources bundled in the common module.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502266538", "createdAt": "2020-10-09T08:21:06Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTgzMw=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI2OTc4MQ==", "bodyText": "More info in the plugin documentation.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r505269781", "createdAt": "2020-10-15T07:33:35Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNTgzMw=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTcxNzIxOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozNjoyNlrOHee7bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo0NjowMVrOHh4KjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNjA2Mg==", "bodyText": "Can you please clarify the reason of this?", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501726062", "createdAt": "2020-10-08T13:36:26Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-maven-plugin</artifactId>\n+        <version>${version.springboot}</version>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>repackage</goal>\n+            </goals>\n+          </execution>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI2NzQ1NQ==", "bodyText": "Tbh I think this is here because I used the same configs from the jobs-service integration tests. I don't know exactly what is its purpose.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502267455", "createdAt": "2020-10-09T08:22:56Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-maven-plugin</artifactId>\n+        <version>${version.springboot}</version>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>repackage</goal>\n+            </goals>\n+          </execution>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNjA2Mg=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI4NTI2MQ==", "bodyText": "It was apparently unneeded. I removed it and everything still works fine. \ud83d\ude04", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r505285261", "createdAt": "2020-10-15T07:46:01Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-maven-plugin</artifactId>\n+        <version>${version.springboot}</version>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>repackage</goal>\n+            </goals>\n+          </execution>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNjA2Mg=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTcxOTcwOnYy", "diffSide": "RIGHT", "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzozNjo1N1rOHee9AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNjoxNTozMlrOHfQbRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNjQ2NQ==", "bodyText": "Please move it to property", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r501726465", "createdAt": "2020-10-08T13:36:57Z", "author": {"login": "danielezonca"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-maven-plugin</artifactId>\n+        <version>${version.springboot}</version>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>repackage</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-maven-plugin</artifactId>\n+        <version>${project.version}</version>\n+        <extensions>true</extensions>\n+        <configuration>\n+          <!-- this is necessary to scan the .bpmn files from external resources, that are not on src/main/resources -->\n+          <kieSourcesDirectory>${project.basedir}/target/classes</kieSourcesDirectory>\n+        </configuration>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>com.google.cloud.tools</groupId>\n+        <artifactId>jib-maven-plugin</artifactId>\n+        <version>2.5.2</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjUzNzAyOQ==", "bodyText": "Done \ud83d\udc4d", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r502537029", "createdAt": "2020-10-09T16:15:32Z", "author": {"login": "kostola"}, "path": "integration-tests/integration-tests-trusty-service/integration-tests-trusty-service-springboot/pom.xml", "diffHunk": "@@ -0,0 +1,103 @@\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.kie.kogito</groupId>\n+    <artifactId>integration-tests-trusty-service</artifactId>\n+    <version>1.0.0-SNAPSHOT</version>\n+  </parent>\n+  <artifactId>integration-tests-trusty-service-springboot</artifactId>\n+  <name>Kogito Apps :: Integration Tests :: Trusty Service :: Spring Boot</name>\n+\n+  <properties>\n+    <container.image.kogito-service>org.kie.kogito/integration-tests-trusty-service-springboot:${project.version}</container.image.kogito-service>\n+    <sonar.exclusions>**/KogitoApplication.java</sonar.exclusions>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-springboot-starter</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>tracing-decision-springboot-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>integration-tests-trusty-service-common</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-remote-resources-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>process</goal>\n+            </goals>\n+            <configuration>\n+              <resourceBundles>\n+                <resourceBundle>org.kie.kogito:integration-tests-trusty-service-common:${project.version}</resourceBundle>\n+              </resourceBundles>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-maven-plugin</artifactId>\n+        <version>${version.springboot}</version>\n+        <executions>\n+          <execution>\n+            <goals>\n+              <goal>repackage</goal>\n+            </goals>\n+          </execution>\n+        </executions>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>org.kie.kogito</groupId>\n+        <artifactId>kogito-maven-plugin</artifactId>\n+        <version>${project.version}</version>\n+        <extensions>true</extensions>\n+        <configuration>\n+          <!-- this is necessary to scan the .bpmn files from external resources, that are not on src/main/resources -->\n+          <kieSourcesDirectory>${project.basedir}/target/classes</kieSourcesDirectory>\n+        </configuration>\n+      </plugin>\n+\n+      <plugin>\n+        <groupId>com.google.cloud.tools</groupId>\n+        <artifactId>jib-maven-plugin</artifactId>\n+        <version>2.5.2</version>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyNjQ2NQ=="}, "originalCommit": {"oid": "15846b598bacea164df107deba477131e2adfd5f"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4NjA1NDk4OnYy", "diffSide": "LEFT", "path": "trusty/trusty-service/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNTozNjoyNlrOHlDrxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNjo0NjoyN1rOHlcjeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODYxOTcxOA==", "bodyText": "Hi @kostola , when I've enabled cors I faced the issue that it is working properly only if also oidc is enabled. Before removing this, could you please double check that everything is still working properly? This is the only file I've looked at during this review just to be clear", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r508619718", "createdAt": "2020-10-20T15:36:26Z", "author": {"login": "r00ta"}, "path": "trusty/trusty-service/src/main/resources/application.properties", "diffHunk": "@@ -1,18 +1,27 @@\n quarkus.http.cors=true\n \n-#oidc\n-quarkus.oidc.enabled=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5631242cb88863dbc0bd58e9388c7a7ede8e2c3a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODYyMjY5NQ==", "bodyText": "wops, sorry, I just noticed you already changed it few minutes ago", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r508622695", "createdAt": "2020-10-20T15:38:53Z", "author": {"login": "r00ta"}, "path": "trusty/trusty-service/src/main/resources/application.properties", "diffHunk": "@@ -1,18 +1,27 @@\n quarkus.http.cors=true\n \n-#oidc\n-quarkus.oidc.enabled=true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODYxOTcxOA=="}, "originalCommit": {"oid": "5631242cb88863dbc0bd58e9388c7a7ede8e2c3a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTAyNzE5Mg==", "bodyText": "Yep those missing lines were a mistake. I fixed them.", "url": "https://github.com/kiegroup/kogito-apps/pull/458#discussion_r509027192", "createdAt": "2020-10-21T06:46:27Z", "author": {"login": "kostola"}, "path": "trusty/trusty-service/src/main/resources/application.properties", "diffHunk": "@@ -1,18 +1,27 @@\n quarkus.http.cors=true\n \n-#oidc\n-quarkus.oidc.enabled=true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODYxOTcxOA=="}, "originalCommit": {"oid": "5631242cb88863dbc0bd58e9388c7a7ede8e2c3a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 717, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}