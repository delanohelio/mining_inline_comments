{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NzcwMjky", "number": 246, "reviewThreads": {"totalCount": 50, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowNDoxOVrOECpyJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo0MDowOFrOEF-Dog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjE3MTg4OnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowNDoxOVrOGfPe1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowNDoxOVrOGfPe1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxMjY5NQ==", "bodyText": "To be removed?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435412695", "createdAt": "2020-06-04T17:04:19Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/pom.xml", "diffHunk": "@@ -0,0 +1,75 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-junit5</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>\n+      <artifactId>rest-assured</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+  </dependencies>\n+\n+<!--  <build>-->\n+<!--    <plugins>-->\n+<!--      <plugin>-->\n+<!--        <groupId>org.jboss.jandex</groupId>-->\n+<!--        <artifactId>jandex-maven-plugin</artifactId>-->\n+<!--        <executions>-->\n+<!--          <execution>-->\n+<!--            <id>make-index</id>-->\n+<!--            <goals>-->\n+<!--              <goal>jandex</goal>-->\n+<!--            </goals>-->\n+<!--          </execution>-->\n+<!--        </executions>-->\n+<!--      </plugin>-->\n+<!--    </plugins>-->\n+<!--  </build>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c3d2d9e1fb19d2e90cfb5551d9f0a755591875b"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDIzOTc0OnYy", "diffSide": "RIGHT", "path": "kogito-storage/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzo0MDowNlrOGfjsAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzo0MDowNlrOGfjsAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc0Mzc0Nw==", "bodyText": "Can you please rename it kogito-storage-commons?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435743747", "createdAt": "2020-06-05T07:40:06Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/pom.xml", "diffHunk": "@@ -0,0 +1,22 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c3d2d9e1fb19d2e90cfb5551d9f0a755591875b"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDI0OTUwOnYy", "diffSide": "LEFT", "path": "kogito-storage/kogito-storage-api/src/test/java/org/kie/kogito/storage/api/annotations/ProducerTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzo0MzoyNFrOGfjyVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzo0MzoyNFrOGfjyVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc0NTM2NA==", "bodyText": "Why these changes? Most (all?) of the codebase use import static", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435745364", "createdAt": "2020-06-05T07:43:24Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/test/java/org/kie/kogito/storage/api/annotations/ProducerTest.java", "diffHunk": "@@ -14,22 +14,20 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.storage;\n+package org.kie.kogito.storage.api.annotations;\n \n import javax.enterprise.inject.Instance;\n \n import org.junit.jupiter.api.BeforeEach;\n import org.junit.jupiter.api.Test;\n import org.junit.jupiter.api.extension.ExtendWith;\n-import org.kie.kogito.index.cache.CacheService;\n+import org.kie.kogito.storage.api.CacheService;\n+import org.mockito.ArgumentMatchers;\n import org.mockito.InjectMocks;\n import org.mockito.Mock;\n+import org.mockito.Mockito;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n-import static org.mockito.Mockito.eq;\n-import static org.mockito.Mockito.verify;\n-import static org.mockito.Mockito.when;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDUyMTMzOnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/Producer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowNTozNFrOGfmeQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowNTozNFrOGfmeQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4OTM3Ng==", "bodyText": "I think storage.api.annotations is misleading for this. Can you please move it to storage.factory?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435789376", "createdAt": "2020-06-05T09:05:34Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/Producer.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.storage;\n+package org.kie.kogito.storage.api.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDUyMjE5OnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/Storage.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowNTo0OVrOGfmeyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowNTo0OVrOGfmeyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4OTUxMg==", "bodyText": "I think storage.api.annotations is misleading for this. Can you please move it to storage.factory?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435789512", "createdAt": "2020-06-05T09:05:49Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/Storage.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.storage;\n+package org.kie.kogito.storage.api.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDUyMjY4OnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/StorageImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowNTo1NlrOGfmfEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowNTo1NlrOGfmfEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4OTU4Ng==", "bodyText": "I think storage.api.annotations is misleading for this. Can you please move it to storage.factory?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435789586", "createdAt": "2020-06-05T09:05:56Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/StorageImpl.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.storage;\n+package org.kie.kogito.storage.api.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDU5ODc5OnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/Cache.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToyNzozOVrOGfnOMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToyNzozOVrOGfnOMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgwMTY1MA==", "bodyText": "Can you rename it as Storage?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435801650", "createdAt": "2020-06-05T09:27:39Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/Cache.java", "diffHunk": "@@ -14,22 +14,35 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.storage.api;\n \n-import java.util.concurrent.ConcurrentMap;\n+import java.util.Map;\n+import java.util.Set;\n import java.util.function.Consumer;\n \n-import org.kie.kogito.index.query.Query;\n+import org.kie.kogito.storage.api.query.Query;\n \n-public interface Cache<K, V> extends ConcurrentMap<K, V> {\n+public interface Cache<K, V> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDYwMTAzOnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/CacheService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToyODoxMFrOGfnPWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOToyODoxMFrOGfnPWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgwMTk0Nw==", "bodyText": "Can you rename it as StorageService?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435801947", "createdAt": "2020-06-05T09:28:10Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/CacheService.java", "diffHunk": "@@ -14,20 +14,12 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.storage.api;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n-import org.kie.kogito.index.model.Job;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.model.UserTaskInstance;\n \n public interface CacheService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDYyMjYyOnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/IDataIndexStorageExtension.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTozNDozM1rOGfndAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTozNDozM1rOGfndAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgwNTQ0Mg==", "bodyText": "We are not using IName naming convention for interfaces in this project so please rename it as DataIndexStorageService", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435805442", "createdAt": "2020-06-05T09:34:33Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/IDataIndexStorageExtension.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package org.kie.kogito.index;\n+\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import org.kie.kogito.index.model.Job;\n+import org.kie.kogito.index.model.ProcessInstance;\n+import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Cache;\n+\n+public interface IDataIndexStorageExtension {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDYyNjk0OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageExtension.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTozNTo1NFrOGfnf0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTozNTo1NFrOGfnf0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgwNjE2Mg==", "bodyText": "Can you please rename it as DataIndexStorageServiceImpl?\nMissing @ApplicationScoped annotation", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435806162", "createdAt": "2020-06-05T09:35:54Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageExtension.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package org.kie.kogito.index;\n+\n+import javax.inject.Inject;\n+\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import org.kie.kogito.index.model.Job;\n+import org.kie.kogito.index.model.ProcessInstance;\n+import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Cache;\n+import org.kie.kogito.storage.api.CacheService;\n+\n+public class DataIndexStorageExtension implements IDataIndexStorageExtension {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDY2MDk4OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaAcceptor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTo0NTo0OFrOGfn1Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTo0NTo0OFrOGfn1Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxMTU5OA==", "bodyText": "Is this custom? Can we move it to shared library too?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435811598", "createdAt": "2020-06-05T09:45:48Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaAcceptor.java", "diffHunk": "@@ -14,23 +14,23 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.infinispan.protostream;\n+package org.kie.kogito.index.infinispan.schema;\n \n import javax.enterprise.context.ApplicationScoped;\n \n import org.eclipse.microprofile.config.inject.ConfigProperty;\n-import org.kie.kogito.index.schema.SchemaAcceptor;\n-import org.kie.kogito.index.schema.SchemaType;\n+import org.kie.kogito.storage.api.schema.SchemaAcceptor;\n+import org.kie.kogito.storage.api.schema.SchemaType;\n \n-import static org.kie.kogito.index.infinispan.Constants.INFINISPAN_STORAGE;\n+import static org.kie.kogito.storage.infinispan.Constants.INFINISPAN_STORAGE;\n \n @ApplicationScoped\n public class ProtoSchemaAcceptor implements SchemaAcceptor {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDY2MjI3OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaManager.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTo0NjoxMVrOGfn16w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNDowNzowMlrOGhL3gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxMTgxOQ==", "bodyText": "Is this custom? Can we move it to shared library too?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435811819", "createdAt": "2020-06-05T09:46:11Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaManager.java", "diffHunk": "@@ -14,22 +14,22 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.infinispan.protostream;\n+package org.kie.kogito.index.infinispan.schema;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjUwNTgyOQ==", "bodyText": "@danielezonca This class is process specific: it uses the cache getProcessIdModelCache i.e. PROCESS_ID_MODEL_CACHE. In addition to that it is infinispan specific since it uses ProtobufMetadataManagerConstants.ERRORS_KEY_SUFFIX .\nWe might create an abstract class in the common module but most of the implementation would remain in the consumer code. wdyt?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436505829", "createdAt": "2020-06-08T07:34:13Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaManager.java", "diffHunk": "@@ -14,22 +14,22 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.infinispan.protostream;\n+package org.kie.kogito.index.infinispan.schema;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxMTgxOQ=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc0MjU5OA==", "bodyText": "Ok let's postpone this changes to a future ticket. Can you please open a ticket for that?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436742598", "createdAt": "2020-06-08T14:14:44Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaManager.java", "diffHunk": "@@ -14,22 +14,22 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.infinispan.protostream;\n+package org.kie.kogito.index.infinispan.schema;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxMTgxOQ=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1MDYyNQ==", "bodyText": "Yes, done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437450625", "createdAt": "2020-06-09T14:07:02Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/schema/ProtoSchemaManager.java", "diffHunk": "@@ -14,22 +14,22 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.infinispan.protostream;\n+package org.kie.kogito.index.infinispan.schema;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxMTgxOQ=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDcxMDM4OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-protobuf/src/main/java/org/kie/kogito/index/protobuf/domain/ProtoDomainModelProducer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDowMDoyNFrOGfoUmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNToxNzozMlrOGfyvfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxOTY3NA==", "bodyText": "Is it possible to move most of this data-index-storage-protobuf module as additional shared module?\nWe can try to use the same approach of shared base module and then data-index specific additions", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435819674", "createdAt": "2020-06-05T10:00:24Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/src/main/java/org/kie/kogito/index/protobuf/domain/ProtoDomainModelProducer.java", "diffHunk": "@@ -29,14 +29,12 @@\n import org.infinispan.protostream.descriptors.FieldDescriptor;\n import org.infinispan.protostream.descriptors.FileDescriptor;\n import org.infinispan.protostream.impl.AnnotatedDescriptorImpl;\n-import org.kie.kogito.index.domain.AttributeDescriptor;\n-import org.kie.kogito.index.domain.DomainDescriptor;\n-import org.kie.kogito.index.event.DomainModelRegisteredEvent;\n+import org.kie.kogito.index.protobuf.FileDescriptorRegisteredEvent;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import static java.util.stream.Collectors.toMap;\n import static java.util.stream.Collectors.toList;\n+import static java.util.stream.Collectors.toMap;\n \n @ApplicationScoped\n public class ProtoDomainModelProducer {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgzMjkyMg==", "bodyText": "The protobuf module is strongly coupled with processes and infinispan, if we want to move it to a common module it requires more work. Let's do that in another PR", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435832922", "createdAt": "2020-06-05T10:27:28Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/src/main/java/org/kie/kogito/index/protobuf/domain/ProtoDomainModelProducer.java", "diffHunk": "@@ -29,14 +29,12 @@\n import org.infinispan.protostream.descriptors.FieldDescriptor;\n import org.infinispan.protostream.descriptors.FileDescriptor;\n import org.infinispan.protostream.impl.AnnotatedDescriptorImpl;\n-import org.kie.kogito.index.domain.AttributeDescriptor;\n-import org.kie.kogito.index.domain.DomainDescriptor;\n-import org.kie.kogito.index.event.DomainModelRegisteredEvent;\n+import org.kie.kogito.index.protobuf.FileDescriptorRegisteredEvent;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import static java.util.stream.Collectors.toMap;\n import static java.util.stream.Collectors.toList;\n+import static java.util.stream.Collectors.toMap;\n \n @ApplicationScoped\n public class ProtoDomainModelProducer {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxOTY3NA=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk5MDM5OA==", "bodyText": "I've moved it : )", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435990398", "createdAt": "2020-06-05T15:17:32Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/src/main/java/org/kie/kogito/index/protobuf/domain/ProtoDomainModelProducer.java", "diffHunk": "@@ -29,14 +29,12 @@\n import org.infinispan.protostream.descriptors.FieldDescriptor;\n import org.infinispan.protostream.descriptors.FileDescriptor;\n import org.infinispan.protostream.impl.AnnotatedDescriptorImpl;\n-import org.kie.kogito.index.domain.AttributeDescriptor;\n-import org.kie.kogito.index.domain.DomainDescriptor;\n-import org.kie.kogito.index.event.DomainModelRegisteredEvent;\n+import org.kie.kogito.index.protobuf.FileDescriptorRegisteredEvent;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import static java.util.stream.Collectors.toMap;\n import static java.util.stream.Collectors.toList;\n+import static java.util.stream.Collectors.toMap;\n \n @ApplicationScoped\n public class ProtoDomainModelProducer {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxOTY3NA=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDczMDAyOnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-infinispan/src/main/java/org/kie/kogito/storage/infinispan/cache/InfinispanCacheManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDowNjoyOVrOGfohEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDowNjoyOVrOGfohEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyMjg2Ng==", "bodyText": "I think we can make this generic too adding String storageType as parameter and rename the method as getModelCacheByType(storageType).\nIn this way PROCESS_ID_MODEL_CACHE can be moved out of this class and provided as parameter.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435822866", "createdAt": "2020-06-05T10:06:29Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-infinispan/src/main/java/org/kie/kogito/storage/infinispan/cache/InfinispanCacheManager.java", "diffHunk": "@@ -114,27 +105,13 @@ public void stop(@Observes ShutdownEvent event) {\n     }\n \n     @Override\n-    public Cache<String, ProcessInstance> getProcessInstancesCache() {\n-        return new CacheImpl<>(getOrCreateCache(PROCESS_INSTANCES_CACHE, cacheTemplateName), ProcessInstance.class.getName());\n-    }\n-\n-    @Override\n-    public Cache<String, UserTaskInstance> getUserTaskInstancesCache() {\n-        return new CacheImpl<>(getOrCreateCache(USER_TASK_INSTANCES_CACHE, cacheTemplateName), UserTaskInstance.class.getName());\n-    }\n-\n-    @Override\n-    public Cache<String, Job> getJobsCache() {\n-        return new CacheImpl<>(getOrCreateCache(JOBS_CACHE, cacheTemplateName), Job.class.getName());\n-    }\n-\n-    public Map<String, String> getProtobufCache() {\n-        return manager.getCache(ProtobufMetadataManagerConstants.PROTOBUF_METADATA_CACHE_NAME);\n+    public Cache<String, String> getProcessIdModelCache() {\n+        return new CacheImpl<>(manager.administration().getOrCreateCache(PROCESS_ID_MODEL_CACHE, (String) null), String.class.getName());\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDczMzA2OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-service/src/main/java/org/kie/kogito/index/graphql/GraphQLObjectTypeMapper.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDowNzozNlrOGfojFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTozOToxNlrOGfzlhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyMzM4Mg==", "bodyText": "Please move the whole graphql package to common module", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435823382", "createdAt": "2020-06-05T10:07:36Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-service/src/main/java/org/kie/kogito/index/graphql/GraphQLObjectTypeMapper.java", "diffHunk": "@@ -25,9 +25,9 @@\n import graphql.schema.GraphQLOutputType;\n import graphql.schema.GraphQLSchema;\n import graphql.schema.GraphQLType;\n-import org.kie.kogito.index.domain.AttributeDescriptor;\n-import org.kie.kogito.index.domain.DomainDescriptor;\n import org.kie.kogito.index.model.KogitoMetadata;\n+import org.kie.kogito.index.protobuf.domain.AttributeDescriptor;\n+import org.kie.kogito.index.protobuf.domain.DomainDescriptor;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk5MDc4Mw==", "bodyText": "as agreeded by phone call we postpone this to another ticket", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435990783", "createdAt": "2020-06-05T15:18:09Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-service/src/main/java/org/kie/kogito/index/graphql/GraphQLObjectTypeMapper.java", "diffHunk": "@@ -25,9 +25,9 @@\n import graphql.schema.GraphQLOutputType;\n import graphql.schema.GraphQLSchema;\n import graphql.schema.GraphQLType;\n-import org.kie.kogito.index.domain.AttributeDescriptor;\n-import org.kie.kogito.index.domain.DomainDescriptor;\n import org.kie.kogito.index.model.KogitoMetadata;\n+import org.kie.kogito.index.protobuf.domain.AttributeDescriptor;\n+import org.kie.kogito.index.protobuf.domain.DomainDescriptor;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyMzM4Mg=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAwNDIyOA==", "bodyText": "Can you please create a ticket to track it?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436004228", "createdAt": "2020-06-05T15:39:16Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-service/src/main/java/org/kie/kogito/index/graphql/GraphQLObjectTypeMapper.java", "diffHunk": "@@ -25,9 +25,9 @@\n import graphql.schema.GraphQLOutputType;\n import graphql.schema.GraphQLSchema;\n import graphql.schema.GraphQLType;\n-import org.kie.kogito.index.domain.AttributeDescriptor;\n-import org.kie.kogito.index.domain.DomainDescriptor;\n import org.kie.kogito.index.model.KogitoMetadata;\n+import org.kie.kogito.index.protobuf.domain.AttributeDescriptor;\n+import org.kie.kogito.index.protobuf.domain.DomainDescriptor;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyMzM4Mg=="}, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDc0MzYxOnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/Storage.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoxMTowOVrOGfoqAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoxMTowOVrOGfoqAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyNTE1Mw==", "bodyText": "Can you please rename this class as StorageQualifier?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435825153", "createdAt": "2020-06-05T10:11:09Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/Storage.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.storage;\n+package org.kie.kogito.storage.api.annotations;\n \n import java.lang.annotation.Retention;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDc0NDI0OnYy", "diffSide": "RIGHT", "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/StorageImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoxMToyNFrOGfoqcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDoxMToyNFrOGfoqcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyNTI2NQ==", "bodyText": "Can you please rename this class as StorageQualifierImpl?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r435825265", "createdAt": "2020-06-05T10:11:24Z", "author": {"login": "danielezonca"}, "path": "kogito-storage/kogito-storage-api/src/main/java/org/kie/kogito/storage/api/annotations/StorageImpl.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.storage;\n+package org.kie.kogito.storage.api.annotations;\n \n import java.util.Objects;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093a0b152d2c75e54a1cddd069a84abbaf08da91"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNTg4MzI1OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTo0Njo0OFrOGfz2Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTo0Njo0OFrOGfz2Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAwODUyMw==", "bodyText": "Please rename the method as getModelCacheByType", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436008523", "createdAt": "2020-06-05T15:46:48Z", "author": {"login": "danielezonca"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -14,22 +14,18 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.storage.api;\n \n-import com.fasterxml.jackson.databind.node.ObjectNode;\n-import org.kie.kogito.index.model.Job;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.model.UserTaskInstance;\n-\n-public interface CacheService {\n+import java.util.Map;\n \n-    Cache<String, ProcessInstance> getProcessInstancesCache();\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n \n-    Cache<String, UserTaskInstance> getUserTaskInstancesCache();\n+public interface StorageService {\n+    Storage<String, String> getProtobufCache();\n \n-    Cache<String, Job> getJobsCache();\n+    <T> Storage<String, T> getCache(String index, Class<T> type);\n \n-    Cache<String, ObjectNode> getDomainModelCache(String processId);\n+    Storage<String, ObjectNode> getDomainModelCache(String index, String processId);\n \n-    Cache<String, String> getProcessIdModelCache();\n+    Storage<String, String> getProcessIdModelCache(String index);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e781ec386dd0cc0d11c3a9b1dd397beb10d8869"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNTg4NDY3OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTo0NzoxM1rOGfz3NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTo0NzoxM1rOGfz3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAwODc1Ng==", "bodyText": "Please rename parameters as type and elementId", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436008756", "createdAt": "2020-06-05T15:47:13Z", "author": {"login": "danielezonca"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -14,22 +14,18 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.storage.api;\n \n-import com.fasterxml.jackson.databind.node.ObjectNode;\n-import org.kie.kogito.index.model.Job;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.model.UserTaskInstance;\n-\n-public interface CacheService {\n+import java.util.Map;\n \n-    Cache<String, ProcessInstance> getProcessInstancesCache();\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n \n-    Cache<String, UserTaskInstance> getUserTaskInstancesCache();\n+public interface StorageService {\n+    Storage<String, String> getProtobufCache();\n \n-    Cache<String, Job> getJobsCache();\n+    <T> Storage<String, T> getCache(String index, Class<T> type);\n \n-    Cache<String, ObjectNode> getDomainModelCache(String processId);\n+    Storage<String, ObjectNode> getDomainModelCache(String index, String processId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e781ec386dd0cc0d11c3a9b1dd397beb10d8869"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNTkyNDgwOnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-protobuf/src/main/java/org/kie/kogito/index/protobuf/ProtostreamProducer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTo1ODozNFrOGf0Qpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNTo1ODozNFrOGf0Qpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAxNTI3MA==", "bodyText": "Remove TODO?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436015270", "createdAt": "2020-06-05T15:58:34Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/src/main/java/org/kie/kogito/index/protobuf/ProtostreamProducer.java", "diffHunk": "@@ -24,6 +24,7 @@\n import org.infinispan.protostream.FileDescriptorSource;\n \n @ApplicationScoped\n+// TODO: wiring class to leave in consumer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e781ec386dd0cc0d11c3a9b1dd397beb10d8869"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMDIwNTk5OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMjoyNTo1MVrOGgbQQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNDo1MDo0NVrOGgiNOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY1NDE0Ng==", "bodyText": "What about a simple How to use it ? :)", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436654146", "createdAt": "2020-06-08T12:25:51Z", "author": {"login": "danielezonca"}, "path": "kogito-storage-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito storage commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-storage-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. \n+2) `kogito-storage-commons-infinispan` contains all the classes to manage infinispan as persistence layer. \n+3) `kogito-storage-commons-protobuf` contains the `ProtobufService` that the consumer can use to manage his protobuf schemas. \n+\n+## How to use the abstraction provided by this module", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a866ee207fdf049bf4e2455a571eb7ff1952c394"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc2ODA1OA==", "bodyText": "fixed : D", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436768058", "createdAt": "2020-06-08T14:50:45Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito storage commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-storage-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. \n+2) `kogito-storage-commons-infinispan` contains all the classes to manage infinispan as persistence layer. \n+3) `kogito-storage-commons-protobuf` contains the `ProtobufService` that the consumer can use to manage his protobuf schemas. \n+\n+## How to use the abstraction provided by this module", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY1NDE0Ng=="}, "originalCommit": {"oid": "a866ee207fdf049bf4e2455a571eb7ff1952c394"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMTEyNDg5OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTozMzowMlrOGgkGCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzoyMDoyNVrOGhn55Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5ODk4Ng==", "bodyText": "I think getProtobufCache should be part of the protobuf implementation, because other types of storage service won't be able to implement the interface.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436798986", "createdAt": "2020-06-08T15:33:02Z", "author": {"login": "xieshenzh"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n+\n+public interface DataIndexStorageService {\n \n-public interface CacheService {\n+    Storage<String, String> getProtobufCache();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzODgzOA==", "bodyText": "Hi @xiezhang7 , thx for the comment!\nDo you mean that getProtobufCache should be implemented only by the infinispan module and the ProtobufService should then depend directly on the infinispan module only?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437138838", "createdAt": "2020-06-09T05:02:37Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n+\n+public interface DataIndexStorageService {\n \n-public interface CacheService {\n+    Storage<String, String> getProtobufCache();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5ODk4Ng=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzM1NzgzNA==", "bodyText": "Yes. Thanks.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437357834", "createdAt": "2020-06-09T12:09:26Z", "author": {"login": "xieshenzh"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n+\n+public interface DataIndexStorageService {\n \n-public interface CacheService {\n+    Storage<String, String> getProtobufCache();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5ODk4Ng=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ0OTc0OQ==", "bodyText": "I've moved getProtobufCache to the ProtobufService with the commit 2c6a4ec. The ProtobufService is now injected in the DataIndexStorageServiceImpl -> the interface for the data-index is not changed. Let me know wdyt @xiezhang7", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437449749", "createdAt": "2020-06-09T14:05:55Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n+\n+public interface DataIndexStorageService {\n \n-public interface CacheService {\n+    Storage<String, String> getProtobufCache();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5ODk4Ng=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5NjA2OQ==", "bodyText": "I don't think ProtobufService should be injected in the DataIndexStorageServiceImpl. Because only ProtoSchemaManager invokes getProtobufCache which is part of the infinispan implementation. Other storage implementations won't need this service. So it could be injected in ProtoSchemaManager directly.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437496069", "createdAt": "2020-06-09T15:05:46Z", "author": {"login": "xieshenzh"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n+\n+public interface DataIndexStorageService {\n \n-public interface CacheService {\n+    Storage<String, String> getProtobufCache();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5ODk4Ng=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwOTk4OQ==", "bodyText": "Ok, I've removed getProtobufCache from DataIndexStorageServiceImpl and I've injected directly the ProtobufService where needed to provide the protobuf cache, lmkwyt", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437909989", "createdAt": "2020-06-10T07:20:25Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n+\n+public interface DataIndexStorageService {\n \n-public interface CacheService {\n+    Storage<String, String> getProtobufCache();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5ODk4Ng=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMTEyNjg1OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTozMzozMVrOGgkHSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNTowNDo0MlrOGg43qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5OTMwNg==", "bodyText": "Map is not used by the interface and can be removed.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436799306", "createdAt": "2020-06-08T15:33:31Z", "author": {"login": "xieshenzh"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzOTM2OA==", "bodyText": "Removed", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437139368", "createdAt": "2020-06-09T05:04:42Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,27 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n+\n+import java.util.Map;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5OTMwNg=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMTE1MDMxOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-protobuf/src/main/java/org/kie/kogito/storage/protobuf/domain/DomainDescriptor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTozOToxNVrOGgkWaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNTowNDozNFrOGg43hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjgwMzE3OQ==", "bodyText": "I don't think AttributeDescriptor, DomainDescriptor and DomainModelRegisteredEvent should be part of the protobuf implementation. They are supposed to be part of the API. If the data structure is not ideal, maybe we can review it in future.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r436803179", "createdAt": "2020-06-08T15:39:15Z", "author": {"login": "xieshenzh"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/src/main/java/org/kie/kogito/storage/protobuf/domain/DomainDescriptor.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.domain;\n+package org.kie.kogito.storage.protobuf.domain;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzOTMzNQ==", "bodyText": "Moved to api.proto, if it's fine for you feel free to resolve the conversation", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437139335", "createdAt": "2020-06-09T05:04:34Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/src/main/java/org/kie/kogito/storage/protobuf/domain/DomainDescriptor.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.domain;\n+package org.kie.kogito.storage.protobuf.domain;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjgwMzE3OQ=="}, "originalCommit": {"oid": "f8ce33323b51866fb5a494aebef3832d3288c1fe"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg1Mzg3OnYy", "diffSide": "LEFT", "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/service/IndexingServiceIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNTo0Njo1MFrOGhlrTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMToyOTozOFrOGhwm9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3MzQ4Ng==", "bodyText": "can we keep the import * ? :)", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437873486", "createdAt": "2020-06-10T05:46:50Z", "author": {"login": "cristianonicolai"}, "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/service/IndexingServiceIT.java", "diffHunk": "@@ -53,7 +53,28 @@\n import static org.hamcrest.CoreMatchers.nullValue;\n import static org.hamcrest.Matchers.emptyOrNullString;\n import static org.hamcrest.Matchers.hasItems;\n-import static org.kie.kogito.index.GraphQLUtils.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA1MjU5Ng==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438052596", "createdAt": "2020-06-10T11:29:38Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/service/IndexingServiceIT.java", "diffHunk": "@@ -53,7 +53,28 @@\n import static org.hamcrest.CoreMatchers.nullValue;\n import static org.hamcrest.Matchers.emptyOrNullString;\n import static org.hamcrest.Matchers.hasItems;\n-import static org.kie.kogito.index.GraphQLUtils.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3MzQ4Ng=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg2NjIzOnYy", "diffSide": "LEFT", "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNTo1MzozMVrOGhlzBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMzowODozN1rOGicRgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NTQ2MQ==", "bodyText": "@r00ta perhaps move this file to StorageImpl so we can keep its change history?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437875461", "createdAt": "2020-06-10T05:53:31Z", "author": {"login": "cristianonicolai"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "diffHunk": "@@ -1,205 +0,0 @@\n-/*\n- * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.infinispan.cache;\n-\n-import java.util.Collection;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.function.BiConsumer;\n-import java.util.function.BiFunction;\n-import java.util.function.Consumer;\n-import java.util.function.Function;\n-\n-import org.infinispan.client.hotrod.RemoteCache;\n-import org.kie.kogito.index.cache.Cache;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectCreatedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectRemovedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectUpdatedListener;\n-import org.kie.kogito.index.infinispan.query.InfinispanQuery;\n-import org.kie.kogito.index.query.Query;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class CacheImpl<K, V> implements Cache<K, V> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzYwMw==", "bodyText": "@cristianonicolai do you have any tip to do the trick? I tried for some time but I did not find the way to make it work (the last thing I'd like to do is to create a new PR and copy/paste the new code there :) ).", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438117603", "createdAt": "2020-06-10T13:23:17Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "diffHunk": "@@ -1,205 +0,0 @@\n-/*\n- * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.infinispan.cache;\n-\n-import java.util.Collection;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.function.BiConsumer;\n-import java.util.function.BiFunction;\n-import java.util.function.Consumer;\n-import java.util.function.Function;\n-\n-import org.infinispan.client.hotrod.RemoteCache;\n-import org.kie.kogito.index.cache.Cache;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectCreatedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectRemovedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectUpdatedListener;\n-import org.kie.kogito.index.infinispan.query.InfinispanQuery;\n-import org.kie.kogito.index.query.Query;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class CacheImpl<K, V> implements Cache<K, V> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NTQ2MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE2ODQxNA==", "bodyText": "yeah git doesnt like if you move and do significant changes to a file in the same commit :/ the usual workaround is to break move and changes into different prs but not sure how feasible that is in here.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438168414", "createdAt": "2020-06-10T14:31:07Z", "author": {"login": "cristianonicolai"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "diffHunk": "@@ -1,205 +0,0 @@\n-/*\n- * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.infinispan.cache;\n-\n-import java.util.Collection;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.function.BiConsumer;\n-import java.util.function.BiFunction;\n-import java.util.function.Consumer;\n-import java.util.function.Function;\n-\n-import org.infinispan.client.hotrod.RemoteCache;\n-import org.kie.kogito.index.cache.Cache;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectCreatedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectRemovedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectUpdatedListener;\n-import org.kie.kogito.index.infinispan.query.InfinispanQuery;\n-import org.kie.kogito.index.query.Query;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class CacheImpl<K, V> implements Cache<K, V> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NTQ2MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIwMzA2NQ==", "bodyText": "btw I see your point, unfortunately moving a lot files I missed that intellij deleted/created this new file.\nActually the history of this file was just one commit before this PR, but I understand that we should keep it. Once we are ok with this PR I'll create a new fresh branch/PR with the code (and properly rename the file :) ) if it's ok for you", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438203065", "createdAt": "2020-06-10T15:15:51Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "diffHunk": "@@ -1,205 +0,0 @@\n-/*\n- * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.infinispan.cache;\n-\n-import java.util.Collection;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.function.BiConsumer;\n-import java.util.function.BiFunction;\n-import java.util.function.Consumer;\n-import java.util.function.Function;\n-\n-import org.infinispan.client.hotrod.RemoteCache;\n-import org.kie.kogito.index.cache.Cache;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectCreatedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectRemovedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectUpdatedListener;\n-import org.kie.kogito.index.infinispan.query.InfinispanQuery;\n-import org.kie.kogito.index.query.Query;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class CacheImpl<K, V> implements Cache<K, V> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NTQ2MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIyMDAxOA==", "bodyText": "sure, np", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438220018", "createdAt": "2020-06-10T15:37:32Z", "author": {"login": "cristianonicolai"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "diffHunk": "@@ -1,205 +0,0 @@\n-/*\n- * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.infinispan.cache;\n-\n-import java.util.Collection;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.function.BiConsumer;\n-import java.util.function.BiFunction;\n-import java.util.function.Consumer;\n-import java.util.function.Function;\n-\n-import org.infinispan.client.hotrod.RemoteCache;\n-import org.kie.kogito.index.cache.Cache;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectCreatedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectRemovedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectUpdatedListener;\n-import org.kie.kogito.index.infinispan.query.InfinispanQuery;\n-import org.kie.kogito.index.query.Query;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class CacheImpl<K, V> implements Cache<K, V> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NTQ2MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc2ODAwMw==", "bodyText": "Hi @cristianonicolai , I've moved everything to another PR. The funny thing is that In the commits none of the files were deleted, but github still think that a couple of them are deleted/recreated. Investigating a little bit I found out that also in the current PR git blame works perfectly, so the history is there also for the files StorageImpl/CacheImpl.\n\nBut unfortunately ProtoDomainModelProducerTest does not have it.\nWe can move to the PR #266 where Github thinks that only a couple of files are re-created (but git blame works perfectly on them), or stay in this one where ProtoDomainModelProducerTest has no history.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438768003", "createdAt": "2020-06-11T13:08:37Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/src/main/java/org/kie/kogito/index/infinispan/cache/CacheImpl.java", "diffHunk": "@@ -1,205 +0,0 @@\n-/*\n- * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.infinispan.cache;\n-\n-import java.util.Collection;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.function.BiConsumer;\n-import java.util.function.BiFunction;\n-import java.util.function.Consumer;\n-import java.util.function.Function;\n-\n-import org.infinispan.client.hotrod.RemoteCache;\n-import org.kie.kogito.index.cache.Cache;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectCreatedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectRemovedListener;\n-import org.kie.kogito.index.infinispan.listener.CacheObjectUpdatedListener;\n-import org.kie.kogito.index.infinispan.query.InfinispanQuery;\n-import org.kie.kogito.index.query.Query;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-public class CacheImpl<K, V> implements Cache<K, V> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NTQ2MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg3NDI1OnYy", "diffSide": "LEFT", "path": "data-index/data-index-storage/data-index-storage-protobuf/src/test/java/org/kie/kogito/index/protobuf/ProtoDomainModelProducerTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNTo1NzoxNFrOGhl31g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwODoyMzoxMlrOGiTZQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NjY5NA==", "bodyText": "should this file be moved instead?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437876694", "createdAt": "2020-06-10T05:57:14Z", "author": {"login": "cristianonicolai"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/src/test/java/org/kie/kogito/index/protobuf/ProtoDomainModelProducerTest.java", "diffHunk": "@@ -1,53 +0,0 @@\n-/*\n- * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.protobuf;\n-\n-import javax.enterprise.event.Event;\n-\n-import org.infinispan.protostream.descriptors.FileDescriptor;\n-import org.junit.jupiter.api.Test;\n-import org.junit.jupiter.api.extension.ExtendWith;\n-import org.kie.kogito.index.event.DomainModelRegisteredEvent;\n-import org.mockito.InjectMocks;\n-import org.mockito.Mock;\n-import org.mockito.junit.jupiter.MockitoExtension;\n-\n-import static org.kie.kogito.index.protobuf.TestUtils.ADDITIONAL_DESCRIPTORS;\n-import static org.kie.kogito.index.protobuf.TestUtils.DOMAIN_DESCRIPTOR;\n-import static org.kie.kogito.index.protobuf.TestUtils.PROCESS_ID;\n-import static org.kie.kogito.index.protobuf.TestUtils.getTestFileDescriptor;\n-import static org.mockito.ArgumentMatchers.eq;\n-import static org.mockito.Mockito.verify;\n-\n-@ExtendWith(MockitoExtension.class)\n-class ProtoDomainModelProducerTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODYyMjUzMA==", "bodyText": "Same as above", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438622530", "createdAt": "2020-06-11T08:23:12Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/src/test/java/org/kie/kogito/index/protobuf/ProtoDomainModelProducerTest.java", "diffHunk": "@@ -1,53 +0,0 @@\n-/*\n- * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *       http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package org.kie.kogito.index.protobuf;\n-\n-import javax.enterprise.event.Event;\n-\n-import org.infinispan.protostream.descriptors.FileDescriptor;\n-import org.junit.jupiter.api.Test;\n-import org.junit.jupiter.api.extension.ExtendWith;\n-import org.kie.kogito.index.event.DomainModelRegisteredEvent;\n-import org.mockito.InjectMocks;\n-import org.mockito.Mock;\n-import org.mockito.junit.jupiter.MockitoExtension;\n-\n-import static org.kie.kogito.index.protobuf.TestUtils.ADDITIONAL_DESCRIPTORS;\n-import static org.kie.kogito.index.protobuf.TestUtils.DOMAIN_DESCRIPTOR;\n-import static org.kie.kogito.index.protobuf.TestUtils.PROCESS_ID;\n-import static org.kie.kogito.index.protobuf.TestUtils.getTestFileDescriptor;\n-import static org.mockito.ArgumentMatchers.eq;\n-import static org.mockito.Mockito.verify;\n-\n-@ExtendWith(MockitoExtension.class)\n-class ProtoDomainModelProducerTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NjY5NA=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg3Njg4OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/README.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNTo1ODo0MlrOGhl5nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMToyOTo0N1rOGhwnQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NzE1MQ==", "bodyText": "should this property be generic for all services? Maybe defined as kogito.storage.type ?\n@danielezonca", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437877151", "createdAt": "2020-06-10T05:58:42Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito storage commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-storage-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. \n+2) `kogito-storage-commons-infinispan` contains all the classes to manage infinispan as persistence layer. \n+3) `kogito-storage-commons-protobuf` contains the `ProtobufService` that the consumer can use to manage his protobuf schemas. \n+\n+## How to use it\n+\n+The consumer has to \n+\n+1) Inject the `StorageService` bean where needed, and the implementation will be selected using the property `kogito.data-index.storage.type`. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODAwNTU1Mg==", "bodyText": "I agree, kogito.storage.type is better", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438005552", "createdAt": "2020-06-10T09:56:48Z", "author": {"login": "danielezonca"}, "path": "kogito-storage-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito storage commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-storage-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. \n+2) `kogito-storage-commons-infinispan` contains all the classes to manage infinispan as persistence layer. \n+3) `kogito-storage-commons-protobuf` contains the `ProtobufService` that the consumer can use to manage his protobuf schemas. \n+\n+## How to use it\n+\n+The consumer has to \n+\n+1) Inject the `StorageService` bean where needed, and the implementation will be selected using the property `kogito.data-index.storage.type`. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NzE1MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA1MjY3NQ==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438052675", "createdAt": "2020-06-10T11:29:47Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito storage commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-storage-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. \n+2) `kogito-storage-commons-infinispan` contains all the classes to manage infinispan as persistence layer. \n+3) `kogito-storage-commons-protobuf` contains the `ProtobufService` that the consumer can use to manage his protobuf schemas. \n+\n+## How to use it\n+\n+The consumer has to \n+\n+1) Inject the `StorageService` bean where needed, and the implementation will be selected using the property `kogito.data-index.storage.type`. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3NzE1MQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg5MDMzOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjowNTowOFrOGhmBtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNTowOTowMFrOGh5fEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3OTIyMg==", "bodyText": "It feels that getDomainModelCache and getModelCacheByType are specific to data index I would leave that in the data index storage.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437879222", "createdAt": "2020-06-10T06:05:08Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.storage.api;\n+\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+\n+public interface StorageService {\n+\n+    <T> Storage<String, T> getCache(String index, Class<T> type);\n+\n+    Storage<String, ObjectNode> getDomainModelCache(String type, String elementId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE5ODAzMg==", "bodyText": "I've refactored it a bit: now the interface StorageService looks like\npublic interface StorageService {\n\n    Storage<String, String> getCache(String index);\n\n    <T> Storage<String, T> getCache(String index, Class<T> type);\n\n    <T> Storage<String, T> getCacheWithDataFormat(String index, Class<T> type, String rootType);\n\nAnd the logic of getDomainModelCache is moved into the data-index, lmkwyt", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438198032", "createdAt": "2020-06-10T15:09:00Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.storage.api;\n+\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+\n+public interface StorageService {\n+\n+    <T> Storage<String, T> getCache(String index, Class<T> type);\n+\n+    Storage<String, ObjectNode> getDomainModelCache(String type, String elementId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg3OTIyMg=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg5NzA3OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjowODoyM1rOGhmF7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoxNTowOFrOGiRSsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MDMwMA==", "bodyText": "dependency not needed", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437880300", "createdAt": "2020-06-10T06:08:23Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "diffHunk": "@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-commons-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4ODA4MQ==", "bodyText": "This dependency is needed in the ProducerTest", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438588081", "createdAt": "2020-06-11T07:15:08Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "diffHunk": "@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-commons-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MDMwMA=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg5NzE1OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjowODoyN1rOGhmF-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoxODo0MVrOGiRZHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MDMxNQ==", "bodyText": "dependency not needed", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437880315", "createdAt": "2020-06-10T06:08:27Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "diffHunk": "@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-commons-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4OTcyNg==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438589726", "createdAt": "2020-06-11T07:18:41Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "diffHunk": "@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-commons-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MDMxNQ=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzg5NzMxOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjowODozMVrOGhmGEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoxODo0OVrOGiRZVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MDMzNw==", "bodyText": "dependency not needed", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437880337", "createdAt": "2020-06-10T06:08:31Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "diffHunk": "@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-commons-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-junit5</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4OTc4MA==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438589780", "createdAt": "2020-06-11T07:18:49Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-api/pom.xml", "diffHunk": "@@ -0,0 +1,58 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+  <name>Kogito :: Kogito Storage API</name>\n+  <artifactId>kogito-storage-commons-api</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-databind</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>com.fasterxml.jackson.core</groupId>\n+      <artifactId>jackson-annotations</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>jakarta.inject</groupId>\n+      <artifactId>jakarta.inject-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-junit5</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.rest-assured</groupId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MDMzNw=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzkwNTY1OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjoxMjozOFrOGhmLbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjoxMjozOFrOGhmLbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MTcxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n          \n          \n            \n             * Copyright 2020 Red Hat, Inc. and/or its affiliates.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437881710", "createdAt": "2020-06-10T06:12:38Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzkxMjEzOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-infinispan/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjoxNTozOFrOGhmPOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoxODo1NlrOGiRZgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MjY4Mg==", "bodyText": "dependency not needed?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437882682", "createdAt": "2020-06-10T06:15:38Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-infinispan/pom.xml", "diffHunk": "@@ -0,0 +1,57 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage-commons-infinispan</artifactId>\n+  <name>Kogito :: Kogito Storage Infinispan</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-storage-commons-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-infinispan-client</artifactId>\n+    </dependency>\n+\n+    <!-- Health Check -->\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>infinispan-quarkus-health-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4OTgyNg==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438589826", "createdAt": "2020-06-11T07:18:56Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-infinispan/pom.xml", "diffHunk": "@@ -0,0 +1,57 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-storage-commons</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage-commons-infinispan</artifactId>\n+  <name>Kogito :: Kogito Storage Infinispan</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-storage-commons-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-infinispan-client</artifactId>\n+    </dependency>\n+\n+    <!-- Health Check -->\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>infinispan-quarkus-health-addon</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.assertj</groupId>\n+      <artifactId>assertj-core</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MjY4Mg=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzkxMzczOnYy", "diffSide": "LEFT", "path": "kogito-storage-commons/kogito-storage-commons-infinispan/src/test/java/org/kie/kogito/storage/infinispan/query/InfinispanQueryTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjoxNjoxOFrOGhmQMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoxOTowOFrOGiRZ4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MjkyOA==", "bodyText": "keep import * :)", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437882928", "createdAt": "2020-06-10T06:16:18Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-infinispan/src/test/java/org/kie/kogito/storage/infinispan/query/InfinispanQueryTest.java", "diffHunk": "@@ -27,23 +27,39 @@\n import org.junit.jupiter.params.ParameterizedTest;\n import org.junit.jupiter.params.provider.Arguments;\n import org.junit.jupiter.params.provider.MethodSource;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.query.AttributeFilter;\n+import org.kie.kogito.storage.api.query.AttributeFilter;\n import org.mockito.Mock;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n import static java.util.Arrays.asList;\n import static java.util.Collections.emptyList;\n-import static org.kie.kogito.index.query.QueryFilterFactory.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4OTkyMQ==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438589921", "createdAt": "2020-06-11T07:19:08Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-infinispan/src/test/java/org/kie/kogito/storage/infinispan/query/InfinispanQueryTest.java", "diffHunk": "@@ -27,23 +27,39 @@\n import org.junit.jupiter.params.ParameterizedTest;\n import org.junit.jupiter.params.provider.Arguments;\n import org.junit.jupiter.params.provider.MethodSource;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.query.AttributeFilter;\n+import org.kie.kogito.storage.api.query.AttributeFilter;\n import org.mockito.Mock;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n import static java.util.Arrays.asList;\n import static java.util.Collections.emptyList;\n-import static org.kie.kogito.index.query.QueryFilterFactory.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MjkyOA=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzkxNDI2OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-protobuf/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNjoxNjozMlrOGhmQfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoxOTowMlrOGiRZsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MzAwNw==", "bodyText": "missing name", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437883007", "createdAt": "2020-06-10T06:16:32Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/pom.xml", "diffHunk": "@@ -0,0 +1,54 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4OTg3Mg==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438589872", "createdAt": "2020-06-11T07:19:02Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/pom.xml", "diffHunk": "@@ -0,0 +1,54 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg4MzAwNw=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODA0MTQ0OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-protobuf/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzowNjoxM1rOGhnfcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMToyOTo1N1rOGhwnvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwMzIxNg==", "bodyText": "dependency not needed?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437903216", "createdAt": "2020-06-10T07:06:13Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/pom.xml", "diffHunk": "@@ -0,0 +1,54 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage-commons-protobuf</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-storage-commons-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>infinispan-persistence-addon</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.infinispan.protostream</groupId>\n+      <artifactId>protostream</artifactId>\n+    </dependency>\n+\n+    <!-- test -->\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-storage-commons-infinispan</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA1Mjc5Nw==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438052797", "createdAt": "2020-06-10T11:29:57Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/pom.xml", "diffHunk": "@@ -0,0 +1,54 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage-commons-protobuf</artifactId>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-storage-commons-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>infinispan-persistence-addon</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.infinispan.protostream</groupId>\n+      <artifactId>protostream</artifactId>\n+    </dependency>\n+\n+    <!-- test -->\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>kogito-storage-commons-infinispan</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwMzIxNg=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODA1NTU5OnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-protobuf/src/test/java/org/kie/kogito/storage/protobuf/ProtoDomainModelProducerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzoxMTowM1rOGhnoAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzowNToxMFrOGhz1GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwNTQwOA==", "bodyText": "should a test be added for this?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437905408", "createdAt": "2020-06-10T07:11:03Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/src/test/java/org/kie/kogito/storage/protobuf/ProtoDomainModelProducerTest.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.storage.protobuf;\n+\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+\n+import javax.enterprise.event.Event;\n+\n+import org.infinispan.protostream.FileDescriptorSource;\n+import org.infinispan.protostream.SerializationContext;\n+import org.infinispan.protostream.config.Configuration;\n+import org.infinispan.protostream.descriptors.FileDescriptor;\n+import org.infinispan.protostream.impl.SerializationContextImpl;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.kie.kogito.storage.api.proto.DomainModelRegisteredEvent;\n+import org.kie.kogito.storage.protobuf.domain.ProtoDomainModelProducer;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+\n+import static org.kie.kogito.storage.protobuf.ProtobufService.DOMAIN_MODEL_PROTO_NAME;\n+import static org.kie.kogito.storage.protobuf.TestUtils.ADDITIONAL_DESCRIPTORS;\n+import static org.kie.kogito.storage.protobuf.TestUtils.DOMAIN_DESCRIPTOR;\n+import static org.kie.kogito.storage.protobuf.TestUtils.PROCESS_ID;\n+import static org.mockito.ArgumentMatchers.eq;\n+import static org.mockito.Mockito.verify;\n+\n+@ExtendWith(MockitoExtension.class)\n+class ProtoDomainModelProducerTest {\n+\n+    @Mock\n+    Event<DomainModelRegisteredEvent> domainEvent;\n+\n+    @InjectMocks\n+    ProtoDomainModelProducer protoDomainModelProducer;\n+\n+    @Test\n+    void onFileDescriptorRegistered() {\n+        FileDescriptor fileDescriptor = getTestFileDescriptor();\n+        FileDescriptorRegisteredEvent event = new FileDescriptorRegisteredEvent(fileDescriptor);\n+        protoDomainModelProducer.onFileDescriptorRegistered(event);\n+\n+        verify(domainEvent).fire(eq(new DomainModelRegisteredEvent(PROCESS_ID, DOMAIN_DESCRIPTOR, ADDITIONAL_DESCRIPTORS)));\n+    }\n+\n+    static FileDescriptor getTestFileDescriptor() {\n+        String content = getTestFileContent();\n+        SerializationContext ctx = new SerializationContextImpl(Configuration.builder().build());\n+        ctx.registerProtoFiles(FileDescriptorSource.fromString(DOMAIN_MODEL_PROTO_NAME, content));\n+        return ctx.getFileDescriptors().get(DOMAIN_MODEL_PROTO_NAME);\n+    }\n+\n+    static String getTestFileContent() {\n+        return getTestFileContent(\"test.proto\");\n+    }\n+\n+    static String getTestFileInvalidContent() {\n+        return getTestFileContent(\"test_invalid.proto\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwNTM2OQ==", "bodyText": "My bad! I duplicated this code from TestUtils during the refactoring and actually it is not needed anymore. I remove it using TestUtils", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438105369", "createdAt": "2020-06-10T13:05:10Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-protobuf/src/test/java/org/kie/kogito/storage/protobuf/ProtoDomainModelProducerTest.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.storage.protobuf;\n+\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+\n+import javax.enterprise.event.Event;\n+\n+import org.infinispan.protostream.FileDescriptorSource;\n+import org.infinispan.protostream.SerializationContext;\n+import org.infinispan.protostream.config.Configuration;\n+import org.infinispan.protostream.descriptors.FileDescriptor;\n+import org.infinispan.protostream.impl.SerializationContextImpl;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.kie.kogito.storage.api.proto.DomainModelRegisteredEvent;\n+import org.kie.kogito.storage.protobuf.domain.ProtoDomainModelProducer;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+\n+import static org.kie.kogito.storage.protobuf.ProtobufService.DOMAIN_MODEL_PROTO_NAME;\n+import static org.kie.kogito.storage.protobuf.TestUtils.ADDITIONAL_DESCRIPTORS;\n+import static org.kie.kogito.storage.protobuf.TestUtils.DOMAIN_DESCRIPTOR;\n+import static org.kie.kogito.storage.protobuf.TestUtils.PROCESS_ID;\n+import static org.mockito.ArgumentMatchers.eq;\n+import static org.mockito.Mockito.verify;\n+\n+@ExtendWith(MockitoExtension.class)\n+class ProtoDomainModelProducerTest {\n+\n+    @Mock\n+    Event<DomainModelRegisteredEvent> domainEvent;\n+\n+    @InjectMocks\n+    ProtoDomainModelProducer protoDomainModelProducer;\n+\n+    @Test\n+    void onFileDescriptorRegistered() {\n+        FileDescriptor fileDescriptor = getTestFileDescriptor();\n+        FileDescriptorRegisteredEvent event = new FileDescriptorRegisteredEvent(fileDescriptor);\n+        protoDomainModelProducer.onFileDescriptorRegistered(event);\n+\n+        verify(domainEvent).fire(eq(new DomainModelRegisteredEvent(PROCESS_ID, DOMAIN_DESCRIPTOR, ADDITIONAL_DESCRIPTORS)));\n+    }\n+\n+    static FileDescriptor getTestFileDescriptor() {\n+        String content = getTestFileContent();\n+        SerializationContext ctx = new SerializationContextImpl(Configuration.builder().build());\n+        ctx.registerProtoFiles(FileDescriptorSource.fromString(DOMAIN_MODEL_PROTO_NAME, content));\n+        return ctx.getFileDescriptors().get(DOMAIN_MODEL_PROTO_NAME);\n+    }\n+\n+    static String getTestFileContent() {\n+        return getTestFileContent(\"test.proto\");\n+    }\n+\n+    static String getTestFileInvalidContent() {\n+        return getTestFileContent(\"test_invalid.proto\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwNTQwOA=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODA1NjgwOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzoxMTozMFrOGhno1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMTozMDowM1rOGhwn5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwNTYyMg==", "bodyText": "missing name", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437905622", "createdAt": "2020-06-10T07:11:30Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/pom.xml", "diffHunk": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage-commons</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA1MjgzOQ==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438052839", "createdAt": "2020-06-10T11:30:03Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/pom.xml", "diffHunk": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <artifactId>kogito-apps</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <version>8.0.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>kogito-storage-commons</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwNTYyMg=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODA2MDk0OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzoxMjo0OVrOGhnrXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMTozMDoxMFrOGhwoKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwNjI2OA==", "bodyText": "I know Maven can handle the build order, but could you add this module as the first in the module list?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437906268", "createdAt": "2020-06-10T07:12:49Z", "author": {"login": "cristianonicolai"}, "path": "pom.xml", "diffHunk": "@@ -64,5 +64,6 @@\n     <module>management-console</module>\n     <module>explainability-service</module>\n     <module>trusty</module>\n+    <module>kogito-storage-commons</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA1MjkwNw==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438052907", "createdAt": "2020-06-10T11:30:10Z", "author": {"login": "r00ta"}, "path": "pom.xml", "diffHunk": "@@ -64,5 +64,6 @@\n     <module>management-console</module>\n     <module>explainability-service</module>\n     <module>trusty</module>\n+    <module>kogito-storage-commons</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwNjI2OA=="}, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODA3OTQxOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-infinispan/src/main/java/org/kie/kogito/storage/infinispan/cache/StorageImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzoxODo0OFrOGhn2kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwNzoxODo0OFrOGhn2kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzkwOTEzOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n          \n          \n            \n             * Copyright 2020 Red Hat, Inc. and/or its affiliates.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r437909138", "createdAt": "2020-06-10T07:18:48Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-infinispan/src/main/java/org/kie/kogito/storage/infinispan/cache/StorageImpl.java", "diffHunk": "@@ -0,0 +1,102 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb17921111a3f356b54d099c84f651c399bdf5d1"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMTk5NjQ0OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNToxMjo1OVrOGiOvtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNToxMjo1OVrOGiOvtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU0NjM1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Storage<String, ObjectNode> getDomainModelCache(String elementId);\n          \n          \n            \n                Storage<String, ObjectNode> getDomainModelCache(String processId);", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438546359", "createdAt": "2020-06-11T05:12:59Z", "author": {"login": "cristianonicolai"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageService.java", "diffHunk": "@@ -14,22 +14,23 @@\n  * limitations under the License.\n  */\n \n-package org.kie.kogito.index.cache;\n+package org.kie.kogito.index;\n \n import com.fasterxml.jackson.databind.node.ObjectNode;\n import org.kie.kogito.index.model.Job;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.storage.api.Storage;\n \n-public interface CacheService {\n+public interface DataIndexStorageService {\n \n-    Cache<String, ProcessInstance> getProcessInstancesCache();\n+    Storage<String, ProcessInstance> getProcessInstancesCache();\n \n-    Cache<String, UserTaskInstance> getUserTaskInstancesCache();\n+    Storage<String, UserTaskInstance> getUserTaskInstancesCache();\n \n-    Cache<String, Job> getJobsCache();\n+    Storage<String, Job> getJobsCache();\n \n-    Cache<String, ObjectNode> getDomainModelCache(String processId);\n+    Storage<String, ObjectNode> getDomainModelCache(String elementId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c944dfd312dbd1ae3fd173f819d97da5083c8348"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMTk5NzgzOnYy", "diffSide": "RIGHT", "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNToxMzo0N1rOGiOwkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoyMzo1M1rOGiRibQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU0NjU3OA==", "bodyText": "replace index by name ?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438546578", "createdAt": "2020-06-11T05:13:47Z", "author": {"login": "cristianonicolai"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.storage.api;\n+\n+public interface StorageService {\n+\n+    Storage<String, String> getCache(String index);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c944dfd312dbd1ae3fd173f819d97da5083c8348"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU5MjEwOQ==", "bodyText": "Done, I've also renamed index with name everywhere", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r438592109", "createdAt": "2020-06-11T07:23:53Z", "author": {"login": "r00ta"}, "path": "kogito-storage-commons/kogito-storage-commons-api/src/main/java/org/kie/kogito/storage/api/StorageService.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.storage.api;\n+\n+public interface StorageService {\n+\n+    Storage<String, String> getCache(String index);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU0NjU3OA=="}, "originalCommit": {"oid": "c944dfd312dbd1ae3fd173f819d97da5083c8348"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQxNTAyOnYy", "diffSide": "RIGHT", "path": "persistence-commons/README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozNjo1MlrOGjodlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTo1MToxN1rOGjrJIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNjI3Ng==", "bodyText": "@r00ta need to drop kogito from the module names", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440016276", "createdAt": "2020-06-15T08:36:52Z", "author": {"login": "cristianonicolai"}, "path": "persistence-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito persistence commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-persistence-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3090a3a3019c936455936205fbf941b93cb03304"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA2MDE5NQ==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440060195", "createdAt": "2020-06-15T09:51:17Z", "author": {"login": "r00ta"}, "path": "persistence-commons/README.md", "diffHunk": "@@ -0,0 +1,17 @@\n+# Kogito persistence commons\n+\n+This is the module that provides the persistence abstraction for the kogito apps. \n+\n+It is composed by three modules: \n+\n+1) `kogito-persistence-commons-api` contains the interfaces `Storage` and `StorageService` that the consumer has to inject in his application. In addition to that, it contains the interface `Query` that the consumer has to use to query the storage. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNjI3Ng=="}, "originalCommit": {"oid": "3090a3a3019c936455936205fbf941b93cb03304"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjA5MDI4OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTo1ODo1M1rOGjvEow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjowODowMlrOGjvWEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEyNDU3OQ==", "bodyText": "Not used", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440124579", "createdAt": "2020-06-15T11:58:53Z", "author": {"login": "danielezonca"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageServiceImpl.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.index;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import org.kie.kogito.index.model.Job;\n+import org.kie.kogito.index.model.ProcessInstance;\n+import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.persistence.api.Storage;\n+import org.kie.kogito.persistence.api.StorageService;\n+import org.kie.kogito.persistence.protobuf.ProtobufService;\n+\n+@ApplicationScoped\n+public class DataIndexStorageServiceImpl implements DataIndexStorageService {\n+\n+    private static final String PROCESS_INSTANCES_CACHE = \"processinstances\";\n+    private static final String USER_TASK_INSTANCES_CACHE = \"usertaskinstances\";\n+    private static final String JOBS_CACHE = \"jobs\";\n+    private static final String PROCESS_ID_MODEL_CACHE = \"processidmodel\";\n+\n+    @Inject\n+    StorageService cacheService;\n+\n+    @Inject\n+    ProtobufService protobufService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7de147dcbba8888e5fa97b3a47a93016f7eb175c"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEyOTA0Mg==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440129042", "createdAt": "2020-06-15T12:08:02Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-api/src/main/java/org/kie/kogito/index/DataIndexStorageServiceImpl.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.index;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import org.kie.kogito.index.model.Job;\n+import org.kie.kogito.index.model.ProcessInstance;\n+import org.kie.kogito.index.model.UserTaskInstance;\n+import org.kie.kogito.persistence.api.Storage;\n+import org.kie.kogito.persistence.api.StorageService;\n+import org.kie.kogito.persistence.protobuf.ProtobufService;\n+\n+@ApplicationScoped\n+public class DataIndexStorageServiceImpl implements DataIndexStorageService {\n+\n+    private static final String PROCESS_INSTANCES_CACHE = \"processinstances\";\n+    private static final String USER_TASK_INSTANCES_CACHE = \"usertaskinstances\";\n+    private static final String JOBS_CACHE = \"jobs\";\n+    private static final String PROCESS_ID_MODEL_CACHE = \"processidmodel\";\n+\n+    @Inject\n+    StorageService cacheService;\n+\n+    @Inject\n+    ProtobufService protobufService;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEyNDU3OQ=="}, "originalCommit": {"oid": "7de147dcbba8888e5fa97b3a47a93016f7eb175c"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjM1NTY0OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/cache/StorageIT.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjoyMzozMlrOGkYxPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNzo1MDoxNFrOGkmluQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwNzc0Mg==", "bodyText": "Is there any reason behind changing access modifier from public to default? same goes to the test methods below. This is not consistent with all the test classes in this module (all are public).", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440807742", "createdAt": "2020-06-16T12:23:32Z", "author": {"login": "afalhambra"}, "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/cache/StorageIT.java", "diffHunk": "@@ -25,27 +25,29 @@\n import io.quarkus.test.common.QuarkusTestResource;\n import io.quarkus.test.junit.QuarkusTest;\n import org.junit.jupiter.api.Test;\n+import org.kie.kogito.index.DataIndexStorageService;\n import org.kie.kogito.index.InfinispanServerTestResource;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.ProcessInstanceState;\n+import org.kie.kogito.persistence.api.Storage;\n \n import static org.assertj.core.api.Assertions.assertThat;\n import static org.kie.kogito.index.TestUtils.getProcessInstance;\n \n @QuarkusTest\n @QuarkusTestResource(InfinispanServerTestResource.class)\n-public class CacheIT {\n+class StorageIT {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0NDAwMA==", "bodyText": "It was a sonarcloud warning (it's present in all the builds actually, see here https://sonarcloud.io/project/issues?id=org.kie.kogito%3Akogito-apps&open=AXI4nFUhwTXxARAeQrZ2&pullRequest=231&resolved=false) . I can change it back, I don't have a strong opinion on that. lmkwyt", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440944000", "createdAt": "2020-06-16T15:30:39Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/cache/StorageIT.java", "diffHunk": "@@ -25,27 +25,29 @@\n import io.quarkus.test.common.QuarkusTestResource;\n import io.quarkus.test.junit.QuarkusTest;\n import org.junit.jupiter.api.Test;\n+import org.kie.kogito.index.DataIndexStorageService;\n import org.kie.kogito.index.InfinispanServerTestResource;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.ProcessInstanceState;\n+import org.kie.kogito.persistence.api.Storage;\n \n import static org.assertj.core.api.Assertions.assertThat;\n import static org.kie.kogito.index.TestUtils.getProcessInstance;\n \n @QuarkusTest\n @QuarkusTestResource(InfinispanServerTestResource.class)\n-public class CacheIT {\n+class StorageIT {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwNzc0Mg=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk1OTQyNw==", "bodyText": "I would rather keep it with public access but just because all the rest of the test classes in this module are defined as public, just to keep it consistent in this particular case.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440959427", "createdAt": "2020-06-16T15:51:32Z", "author": {"login": "afalhambra"}, "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/cache/StorageIT.java", "diffHunk": "@@ -25,27 +25,29 @@\n import io.quarkus.test.common.QuarkusTestResource;\n import io.quarkus.test.junit.QuarkusTest;\n import org.junit.jupiter.api.Test;\n+import org.kie.kogito.index.DataIndexStorageService;\n import org.kie.kogito.index.InfinispanServerTestResource;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.ProcessInstanceState;\n+import org.kie.kogito.persistence.api.Storage;\n \n import static org.assertj.core.api.Assertions.assertThat;\n import static org.kie.kogito.index.TestUtils.getProcessInstance;\n \n @QuarkusTest\n @QuarkusTestResource(InfinispanServerTestResource.class)\n-public class CacheIT {\n+class StorageIT {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwNzc0Mg=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzNDE2OQ==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r441034169", "createdAt": "2020-06-16T17:50:14Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-service/src/test/java/org/kie/kogito/index/cache/StorageIT.java", "diffHunk": "@@ -25,27 +25,29 @@\n import io.quarkus.test.common.QuarkusTestResource;\n import io.quarkus.test.junit.QuarkusTest;\n import org.junit.jupiter.api.Test;\n+import org.kie.kogito.index.DataIndexStorageService;\n import org.kie.kogito.index.InfinispanServerTestResource;\n import org.kie.kogito.index.model.ProcessInstance;\n import org.kie.kogito.index.model.ProcessInstanceState;\n+import org.kie.kogito.persistence.api.Storage;\n \n import static org.assertj.core.api.Assertions.assertThat;\n import static org.kie.kogito.index.TestUtils.getProcessInstance;\n \n @QuarkusTest\n @QuarkusTestResource(InfinispanServerTestResource.class)\n-public class CacheIT {\n+class StorageIT {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwNzc0Mg=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjY0NDY5OnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-api/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMzozNToxOFrOGkbmWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTozMzoxNFrOGkhNBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg1NDEwNQ==", "bodyText": "This dependency is not really needed here for this module.\nHowever, data-index-storage-infinispan needs it (currently it works cause storage-infinispan has a dep on storage-api).\nShouldn't be better to remove this from here and move to:\nhttps://github.com/kiegroup/kogito-apps/blob/master/data-index/data-index-storage/data-index-storage-infinispan/pom.xml#L20\nwdyt?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440854105", "createdAt": "2020-06-16T13:35:18Z", "author": {"login": "afalhambra"}, "path": "data-index/data-index-storage/data-index-storage-api/pom.xml", "diffHunk": "@@ -13,6 +13,14 @@\n   <name>Kogito :: Data Index Storage API</name>\n \n   <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>persistence-commons-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>persistence-commons-protobuf</artifactId>\n+    </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0NTkyNg==", "bodyText": "Yep, you are right", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440945926", "createdAt": "2020-06-16T15:33:14Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-api/pom.xml", "diffHunk": "@@ -13,6 +13,14 @@\n   <name>Kogito :: Data Index Storage API</name>\n \n   <dependencies>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>persistence-commons-api</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>persistence-commons-protobuf</artifactId>\n+    </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg1NDEwNQ=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjczMDMyOnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-infinispan/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMzo1MzoxMlrOGkcbfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTozNjowMVrOGkhVNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg2NzcxMQ==", "bodyText": "As I mentioned before, maybe it's worth to move the following dep here from pom.xml file in data-index-storage-api module\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <dependency>\n          \n          \n            \n                <dependency>\n          \n          \n            \n                  <groupId>org.kie.kogito</groupId>\n          \n          \n            \n                  <artifactId>persistence-commons-protobuf</artifactId>\n          \n          \n            \n                </dependency>", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440867711", "createdAt": "2020-06-16T13:53:12Z", "author": {"login": "afalhambra"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/pom.xml", "diffHunk": "@@ -17,6 +17,10 @@\n       <groupId>org.kie.kogito</groupId>\n       <artifactId>data-index-storage-api</artifactId>\n     </dependency>\n+    <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0ODAyMw==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440948023", "createdAt": "2020-06-16T15:36:01Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-infinispan/pom.xml", "diffHunk": "@@ -17,6 +17,10 @@\n       <groupId>org.kie.kogito</groupId>\n       <artifactId>data-index-storage-api</artifactId>\n     </dependency>\n+    <dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg2NzcxMQ=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0Njg0MDUzOnYy", "diffSide": "RIGHT", "path": "data-index/data-index-storage/data-index-storage-protobuf/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDoxNjoyNVrOGkdh5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTozNTo1M1rOGkhU0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg4NTczNA==", "bodyText": "same with this dep - it's already included in data-index-storage-api. Is it really needed here?", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440885734", "createdAt": "2020-06-16T14:16:25Z", "author": {"login": "afalhambra"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/pom.xml", "diffHunk": "@@ -18,6 +18,10 @@\n       <groupId>org.kie.kogito</groupId>\n       <artifactId>data-index-storage-api</artifactId>\n     </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>persistence-commons-protobuf</artifactId>\n+    </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0NzkyMg==", "bodyText": "Done", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440947922", "createdAt": "2020-06-16T15:35:53Z", "author": {"login": "r00ta"}, "path": "data-index/data-index-storage/data-index-storage-protobuf/pom.xml", "diffHunk": "@@ -18,6 +18,10 @@\n       <groupId>org.kie.kogito</groupId>\n       <artifactId>data-index-storage-api</artifactId>\n     </dependency>\n+    <dependency>\n+      <groupId>org.kie.kogito</groupId>\n+      <artifactId>persistence-commons-protobuf</artifactId>\n+    </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg4NTczNA=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0Njk1MDc0OnYy", "diffSide": "RIGHT", "path": "persistence-commons/persistence-commons-infinispan/src/test/java/org/kie/kogito/persistence/infinispan/query/InfinispanQueryTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo0MDowOFrOGkepSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNzo1MTo0MlrOGkmpJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNDAwOA==", "bodyText": "why changing access modifier to default? is there any reason behind? same goes to the test methods. All the test classes are defined as public with public test methods. Just to keep it consistent across modules.", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440904008", "createdAt": "2020-06-16T14:40:08Z", "author": {"login": "afalhambra"}, "path": "persistence-commons/persistence-commons-infinispan/src/test/java/org/kie/kogito/persistence/infinispan/query/InfinispanQueryTest.java", "diffHunk": "@@ -27,22 +27,23 @@\n import org.junit.jupiter.params.ParameterizedTest;\n import org.junit.jupiter.params.provider.Arguments;\n import org.junit.jupiter.params.provider.MethodSource;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.query.AttributeFilter;\n+import org.kie.kogito.persistence.api.query.AttributeFilter;\n import org.mockito.Mock;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n import static java.util.Arrays.asList;\n import static java.util.Collections.emptyList;\n-import static org.kie.kogito.index.query.QueryFilterFactory.*;\n-import static org.kie.kogito.index.query.SortDirection.ASC;\n-import static org.kie.kogito.index.query.SortDirection.DESC;\n+import static org.kie.kogito.persistence.api.query.QueryFilterFactory.*;\n+import static org.kie.kogito.persistence.api.query.SortDirection.ASC;\n+import static org.kie.kogito.persistence.api.query.SortDirection.DESC;\n import static org.mockito.ArgumentMatchers.any;\n import static org.mockito.Mockito.verify;\n import static org.mockito.Mockito.when;\n \n @ExtendWith(MockitoExtension.class)\n-public class InfinispanQueryTest {\n+class InfinispanQueryTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0OTg0NQ==", "bodyText": "Same as above, let me know : )", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440949845", "createdAt": "2020-06-16T15:38:29Z", "author": {"login": "r00ta"}, "path": "persistence-commons/persistence-commons-infinispan/src/test/java/org/kie/kogito/persistence/infinispan/query/InfinispanQueryTest.java", "diffHunk": "@@ -27,22 +27,23 @@\n import org.junit.jupiter.params.ParameterizedTest;\n import org.junit.jupiter.params.provider.Arguments;\n import org.junit.jupiter.params.provider.MethodSource;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.query.AttributeFilter;\n+import org.kie.kogito.persistence.api.query.AttributeFilter;\n import org.mockito.Mock;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n import static java.util.Arrays.asList;\n import static java.util.Collections.emptyList;\n-import static org.kie.kogito.index.query.QueryFilterFactory.*;\n-import static org.kie.kogito.index.query.SortDirection.ASC;\n-import static org.kie.kogito.index.query.SortDirection.DESC;\n+import static org.kie.kogito.persistence.api.query.QueryFilterFactory.*;\n+import static org.kie.kogito.persistence.api.query.SortDirection.ASC;\n+import static org.kie.kogito.persistence.api.query.SortDirection.DESC;\n import static org.mockito.ArgumentMatchers.any;\n import static org.mockito.Mockito.verify;\n import static org.mockito.Mockito.when;\n \n @ExtendWith(MockitoExtension.class)\n-public class InfinispanQueryTest {\n+class InfinispanQueryTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNDAwOA=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk1OTk0Mw==", "bodyText": "it is ok here, there are no other test classes. Thanks!", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r440959943", "createdAt": "2020-06-16T15:52:15Z", "author": {"login": "afalhambra"}, "path": "persistence-commons/persistence-commons-infinispan/src/test/java/org/kie/kogito/persistence/infinispan/query/InfinispanQueryTest.java", "diffHunk": "@@ -27,22 +27,23 @@\n import org.junit.jupiter.params.ParameterizedTest;\n import org.junit.jupiter.params.provider.Arguments;\n import org.junit.jupiter.params.provider.MethodSource;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.query.AttributeFilter;\n+import org.kie.kogito.persistence.api.query.AttributeFilter;\n import org.mockito.Mock;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n import static java.util.Arrays.asList;\n import static java.util.Collections.emptyList;\n-import static org.kie.kogito.index.query.QueryFilterFactory.*;\n-import static org.kie.kogito.index.query.SortDirection.ASC;\n-import static org.kie.kogito.index.query.SortDirection.DESC;\n+import static org.kie.kogito.persistence.api.query.QueryFilterFactory.*;\n+import static org.kie.kogito.persistence.api.query.SortDirection.ASC;\n+import static org.kie.kogito.persistence.api.query.SortDirection.DESC;\n import static org.mockito.ArgumentMatchers.any;\n import static org.mockito.Mockito.verify;\n import static org.mockito.Mockito.when;\n \n @ExtendWith(MockitoExtension.class)\n-public class InfinispanQueryTest {\n+class InfinispanQueryTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNDAwOA=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzNTA0NA==", "bodyText": "Ok! I'll leave it as it is now then", "url": "https://github.com/kiegroup/kogito-apps/pull/246#discussion_r441035044", "createdAt": "2020-06-16T17:51:42Z", "author": {"login": "r00ta"}, "path": "persistence-commons/persistence-commons-infinispan/src/test/java/org/kie/kogito/persistence/infinispan/query/InfinispanQueryTest.java", "diffHunk": "@@ -27,22 +27,23 @@\n import org.junit.jupiter.params.ParameterizedTest;\n import org.junit.jupiter.params.provider.Arguments;\n import org.junit.jupiter.params.provider.MethodSource;\n-import org.kie.kogito.index.model.ProcessInstance;\n-import org.kie.kogito.index.query.AttributeFilter;\n+import org.kie.kogito.persistence.api.query.AttributeFilter;\n import org.mockito.Mock;\n import org.mockito.junit.jupiter.MockitoExtension;\n \n import static java.util.Arrays.asList;\n import static java.util.Collections.emptyList;\n-import static org.kie.kogito.index.query.QueryFilterFactory.*;\n-import static org.kie.kogito.index.query.SortDirection.ASC;\n-import static org.kie.kogito.index.query.SortDirection.DESC;\n+import static org.kie.kogito.persistence.api.query.QueryFilterFactory.*;\n+import static org.kie.kogito.persistence.api.query.SortDirection.ASC;\n+import static org.kie.kogito.persistence.api.query.SortDirection.DESC;\n import static org.mockito.ArgumentMatchers.any;\n import static org.mockito.Mockito.verify;\n import static org.mockito.Mockito.when;\n \n @ExtendWith(MockitoExtension.class)\n-public class InfinispanQueryTest {\n+class InfinispanQueryTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNDAwOA=="}, "originalCommit": {"oid": "100b0795df49018fcc69786ab60c7fe0b8124b3c"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 957, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}