{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MzQ5MzAz", "number": 1155, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoxODo0MlrOD6RU-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoyMzoxOFrOD6Rd7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNDI3ODk2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoxODo0MlrOGSAz0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMTo0MlrOGSGuKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MDgxNg==", "bodyText": "\u043d\u0435 \u043d\u0430\u0434\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c List, \u0435\u0441\u043b\u0438 \u043e\u0442 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043d\u0443\u0436\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0438\u0448\u044c contains. \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u0446\u0435\u043b\u0435\u0439 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Set.", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421540816", "createdAt": "2020-05-07T14:18:42Z", "author": {"login": "nixel2007"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -52,6 +54,11 @@\n     \"(\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439\u0420\u0435\u0436\u0438\u043c|SafeMode)\",\n     Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE\n   );\n+  private static final List<Integer> ROOT_LIST = Arrays.asList(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxMjY2Ng==", "bodyText": "@nixel2007 \u0435\u0441\u043b\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438 \u043c\u0430\u043b\u0430, \u043a\u0430\u043a \u0443 \u043c\u0435\u043d\u044f 2-3 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0442\u043e\u0433\u0434\u0430 \u0432\u0440\u043e\u0434\u0435 \u0431\u044b \u0438 List \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 )", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421612666", "createdAt": "2020-05-07T15:53:51Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -52,6 +54,11 @@\n     \"(\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439\u0420\u0435\u0436\u0438\u043c|SafeMode)\",\n     Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE\n   );\n+  private static final List<Integer> ROOT_LIST = Arrays.asList(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MDgxNg=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxMzAzNg==", "bodyText": "\u0443 \u0421\u043e\u043d\u0430\u0440\u0430 \u0434\u0430\u0436\u0435 \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u0435 \u043f\u043e contains \u043e\u0431 \u044d\u0442\u043e\u043c \u0441\u043a\u0430\u0437\u0430\u043d\u043e", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421613036", "createdAt": "2020-05-07T15:54:21Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -52,6 +54,11 @@\n     \"(\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439\u0420\u0435\u0436\u0438\u043c|SafeMode)\",\n     Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE\n   );\n+  private static final List<Integer> ROOT_LIST = Arrays.asList(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MDgxNg=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzNzY3Mg==", "bodyText": "\u0438\u0441\u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0430 Set", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421637672", "createdAt": "2020-05-07T16:31:42Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -52,6 +54,11 @@\n     \"(\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439\u0420\u0435\u0436\u0438\u043c|SafeMode)\",\n     Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE\n   );\n+  private static final List<Integer> ROOT_LIST = Arrays.asList(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MDgxNg=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNDI4MDQ3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoxOTowNVrOGSA04Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMTozM1rOGSGtxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MTA4OQ==", "bodyText": "\u0442\u0435\u043f\u0435\u0440\u044c \u043e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432. \u0441\u043e\u043d\u0430\u0440 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0440\u0435\u0445.", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421541089", "createdAt": "2020-05-07T14:19:05Z", "author": {"login": "nixel2007"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -65,26 +72,52 @@ protected boolean checkMethodCall(BSLParser.MethodCallContext ctx) {\n   @Override\n   protected boolean checkGlobalMethodCall(BSLParser.GlobalMethodCallContext ctx) {\n \n-    BSLParserRuleContext rootIfNode = null;\n-    BSLParserRuleContext rootExpressionNode = null;\n-    BSLParserRuleContext currentRootMember = null;\n+    if (!super.checkGlobalMethodCall(ctx)){\n+      return false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxMzU5Nw==", "bodyText": "\u0434\u0430, \u043f\u0440\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b \u044f \u043f\u043e\u043d\u0438\u043c\u0430\u044e, \u0447\u0430\u0441\u0442\u044c \u0443\u0436\u0435 \u0443\u0431\u0440\u0430\u043b.\n\u0432\u0441\u0435 \u0434\u043b\u044f \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 )\n\u043f\u043e\u0434\u0443\u043c\u0430\u044e, \u043a\u0430\u043a \u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c.", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421613597", "createdAt": "2020-05-07T15:55:07Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -65,26 +72,52 @@ protected boolean checkMethodCall(BSLParser.MethodCallContext ctx) {\n   @Override\n   protected boolean checkGlobalMethodCall(BSLParser.GlobalMethodCallContext ctx) {\n \n-    BSLParserRuleContext rootIfNode = null;\n-    BSLParserRuleContext rootExpressionNode = null;\n-    BSLParserRuleContext currentRootMember = null;\n+    if (!super.checkGlobalMethodCall(ctx)){\n+      return false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MTA4OQ=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzNzU3NA==", "bodyText": "\u0443\u043f\u0440\u043e\u0441\u0442\u0438\u043b, \u043d\u043e \u0432\u0441\u0435 \u0440\u0430\u0432\u043d\u043e \u0432 \u043e\u0434\u043d\u043e\u043c \u043c\u0435\u0442\u043e\u0434\u0435 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c 4 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 (", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421637574", "createdAt": "2020-05-07T16:31:33Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -65,26 +72,52 @@ protected boolean checkMethodCall(BSLParser.MethodCallContext ctx) {\n   @Override\n   protected boolean checkGlobalMethodCall(BSLParser.GlobalMethodCallContext ctx) {\n \n-    BSLParserRuleContext rootIfNode = null;\n-    BSLParserRuleContext rootExpressionNode = null;\n-    BSLParserRuleContext currentRootMember = null;\n+    if (!super.checkGlobalMethodCall(ctx)){\n+      return false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MTA4OQ=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNDI4NTU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoyMDowNVrOGSA4Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMToxMVrOGSGsvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MTg5MA==", "bodyText": "\u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 currentRootMember.unary() != null, \u0442\u043e \u0435\u0435 \u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421541890", "createdAt": "2020-05-07T14:20:05Z", "author": {"login": "nixel2007"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -65,26 +72,52 @@ protected boolean checkMethodCall(BSLParser.MethodCallContext ctx) {\n   @Override\n   protected boolean checkGlobalMethodCall(BSLParser.GlobalMethodCallContext ctx) {\n \n-    BSLParserRuleContext rootIfNode = null;\n-    BSLParserRuleContext rootExpressionNode = null;\n-    BSLParserRuleContext currentRootMember = null;\n+    if (!super.checkGlobalMethodCall(ctx)){\n+      return false;\n+    }\n \n-    if (SAFE_MODE_METHOD_NAME.matcher(ctx.methodName().getText()).matches()) {\n-      rootIfNode = Trees.getRootParent(ctx, BSLParser.RULE_ifStatement);\n-      rootExpressionNode = Trees.getRootParent(ctx, BSLParser.RULE_expression);\n-      currentRootMember = Trees.getRootParent(ctx, BSLParser.RULE_member);\n+    BSLParserRuleContext currentRootMember = Trees.getRootParent(ctx, BSLParser.RULE_member);\n+    if (currentRootMember == null) {\n+      return false;\n     }\n+    if (((BSLParserRuleContext)currentRootMember.getChild(0)).getRuleIndex() == BSLParser.RULE_unaryModifier){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzNzMwOQ==", "bodyText": "\u043f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u043b", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421637309", "createdAt": "2020-05-07T16:31:11Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/UnsafeSafeModeMethodCallDiagnostic.java", "diffHunk": "@@ -65,26 +72,52 @@ protected boolean checkMethodCall(BSLParser.MethodCallContext ctx) {\n   @Override\n   protected boolean checkGlobalMethodCall(BSLParser.GlobalMethodCallContext ctx) {\n \n-    BSLParserRuleContext rootIfNode = null;\n-    BSLParserRuleContext rootExpressionNode = null;\n-    BSLParserRuleContext currentRootMember = null;\n+    if (!super.checkGlobalMethodCall(ctx)){\n+      return false;\n+    }\n \n-    if (SAFE_MODE_METHOD_NAME.matcher(ctx.methodName().getText()).matches()) {\n-      rootIfNode = Trees.getRootParent(ctx, BSLParser.RULE_ifStatement);\n-      rootExpressionNode = Trees.getRootParent(ctx, BSLParser.RULE_expression);\n-      currentRootMember = Trees.getRootParent(ctx, BSLParser.RULE_member);\n+    BSLParserRuleContext currentRootMember = Trees.getRootParent(ctx, BSLParser.RULE_member);\n+    if (currentRootMember == null) {\n+      return false;\n     }\n+    if (((BSLParserRuleContext)currentRootMember.getChild(0)).getRuleIndex() == BSLParser.RULE_unaryModifier){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MTg5MA=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNDI5NzA2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoyMjoxOVrOGSA_HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNTo1OToyOVrOGSFcWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MzcwOA==", "bodyText": "\u0435\u043c\u043d\u0438\u043f, \u0432 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u0445 \u043c\u0435\u0442\u043e\u0434\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f varargs \u0441 \u043f\u0440\u0438\u043c\u0438\u0442\u0438\u0432\u0430\u043c\u0438", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421543708", "createdAt": "2020-05-07T14:22:19Z", "author": {"login": "nixel2007"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxNDk0MQ==", "bodyText": "\u043d\u0435\u0442, \u0434\u043b\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u043c\u0435\u0442\u043e\u0434\u0430 \u043d\u0435\u0442.\n\u043c\u043d\u0435 \u0441\u043c\u0443\u0442\u043d\u043e \u0432\u0441\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u044f \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u0432\u0438\u0434\u0435\u043b \u0432 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0435 \u043c\u0435\u0442\u043e\u0434 \u043f\u043e\u0438\u0441\u043a\u0430 Ancestor. \u043d\u0435 \u0432 \u0445\u0435\u043b\u043f\u0435\u0440\u0435, \u0430 \u0432 \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0435.\n\u043f\u0440\u043e\u0432\u0435\u0440\u044e \u0435\u0449\u0435 \u0440\u0430\u0437.", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421614941", "createdAt": "2020-05-07T15:56:56Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MzcwOA=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxNjczMA==", "bodyText": "\u043c\u043d\u0435 \u0432\u043e\u043e\u0431\u0449\u0435 varargs \u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f, \u0434\u0430 \u0438 \u0421\u043e\u043d\u0430\u0440 \u043d\u0430 \u043d\u0435\u0433\u043e \u043d\u0435 \u0437\u0440\u044f \u0440\u0443\u0433\u0430\u0435\u0442\u0441\u044f.\n\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043b\u0443\u0447\u0448\u0435 \u044e\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c,\n\u0430 c varargs \u043d\u0435\u0442 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442 ( \u0438\u043b\u0438 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0438\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f.", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421616730", "createdAt": "2020-05-07T15:59:29Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0MzcwOA=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNDI5OTk3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoyMjo1NFrOGSBA3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMTowMFrOGSGsaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0NDE1Nw==", "bodyText": "\u0435\u0441\u043b\u0438 \u043c\u0435\u0442\u043e\u0434 \u043d\u043e\u0432\u044b\u0439, \u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c javadoc", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421544157", "createdAt": "2020-05-07T14:22:54Z", "author": {"login": "nixel2007"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzNzIyNQ==", "bodyText": "\u0434\u043e\u0431\u0430\u0432\u0438\u043b javadoc", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421637225", "createdAt": "2020-05-07T16:31:00Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0NDE1Nw=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNDMwMTkwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNDoyMzoxOFrOGSBCGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMDo0OFrOGSGr9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0NDQ3Mg==", "bodyText": "List#contains - \u044d\u0442\u043e \u043f\u043b\u043e\u0445\u043e.", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421544472", "createdAt": "2020-05-07T14:23:18Z", "author": {"login": "nixel2007"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n       return null;\n     }\n \n-    if (getRuleIndex(tnc.getParent()) == ruleindex) {\n-      return (BSLParserRuleContext) tnc.getParent();\n+    if (indexes.contains(getRuleIndex(parent))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzNzEwOQ==", "bodyText": "\u0438\u0441\u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0430 Set", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1155#discussion_r421637109", "createdAt": "2020-05-07T16:30:48Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/utils/Trees.java", "diffHunk": "@@ -222,17 +222,34 @@ public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc) {\n   }\n \n   /**\n-   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e \u0442\u0438\u043f\u0430\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430\n    */\n   public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, int ruleindex) {\n-    if (tnc.getParent() == null) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n+      return null;\n+    }\n+\n+    if (getRuleIndex(parent) == ruleindex) {\n+      return (BSLParserRuleContext) parent;\n+    } else {\n+      return getRootParent((BSLParserRuleContext) parent, ruleindex);\n+    }\n+  }\n+\n+  /**\n+   * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043d\u043e\u0434\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043d\u0443\u0436\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432\n+   */\n+  public static BSLParserRuleContext getRootParent(BSLParserRuleContext tnc, List<Integer> indexes) {\n+    final var parent = tnc.getParent();\n+    if (parent == null) {\n       return null;\n     }\n \n-    if (getRuleIndex(tnc.getParent()) == ruleindex) {\n-      return (BSLParserRuleContext) tnc.getParent();\n+    if (indexes.contains(getRuleIndex(parent))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU0NDQ3Mg=="}, "originalCommit": {"oid": "60763957e932467297e30e620f1845bacb916295"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4797, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}