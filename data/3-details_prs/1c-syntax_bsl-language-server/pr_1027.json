{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTk0ODU4", "number": 1027, "title": "WIP: \u0420\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. DiagnosticsMode", "bodyText": "\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\n\nTODO:\n\n \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f markdown\n \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f javadoc\n JSON Schema\n \u0413\u0435\u043d\u0435\u0440\u0438\u043b\u043a\u0430 json-schema\n \u0423\u0447\u0435\u0442 Mode\n\n\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438\n\n\n\n\n\n\nCloses: #1020\n\u0427\u0435\u043a\u043b\u0438\u0441\u0442\n\n\n\u041e\u0431\u0449\u0438\u0435\n\n \u0412\u0435\u0442\u043a\u0430 PR \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0438\u0437 develop\n \u041e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u044b\u0435, \u0437\u0430\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u0440\u043e\u0447\u0438\u0435, \u043d\u0435 \u0438\u043c\u0435\u044e\u0449\u0438\u0435 \u0441\u043c\u044b\u0441\u043b\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0438 \u043a\u043e\u0434\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u044b\n \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u043a\u0440\u044b\u0442\u044b \u0442\u0435\u0441\u0442\u0430\u043c\u0438\n \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043f\u0435\u0440\u0435\u0434 \u043a\u043e\u043c\u043c\u0438\u0442\u043e\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b (\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u043b \u043a\u043e\u043c\u0430\u043d\u0434\u0443 gradlew precommit)\n\n\u0414\u043b\u044f \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\n\n \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0434\u043b\u044f \u043e\u0431\u043e\u0438\u0445 \u044f\u0437\u044b\u043a\u043e\u0432 (\u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u043d\u0430 \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d)\n\n\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e", "createdAt": "2020-04-09T19:07:45Z", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027", "merged": true, "mergeCommit": {"oid": "775f92101bc1ef442ad3c2b5b07acc78b757a85a"}, "closed": true, "closedAt": "2020-04-21T20:26:14Z", "author": {"login": "nixel2007"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWBrSQABqjMyMTk2NzQ5MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ5rMAgBqjMyNTc3NzE3OTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b1e9d1e54e1b41ac1c206460cc810ca4a1f223d", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/4b1e9d1e54e1b41ac1c206460cc810ca4a1f223d", "committedDate": "2020-04-09T19:11:58Z", "message": "\u0417\u0430\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043f\u043e\u0434 DiagnosticMode"}, "afterCommit": {"oid": "aa88a5368ac8916272cc15f3094b172bb8231471", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/aa88a5368ac8916272cc15f3094b172bb8231471", "committedDate": "2020-04-09T19:29:24Z", "message": "\u0417\u0430\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043f\u043e\u0434 DiagnosticMode"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a38138fda960d5ba8178737aece66a6a23528dd6", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/a38138fda960d5ba8178737aece66a6a23528dd6", "committedDate": "2020-04-09T20:12:02Z", "message": "\u041f\u043e\u0442\u0435\u0440\u044f\u043d\u043d\u0430\u044f \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u044f"}, "afterCommit": {"oid": "f6b4afc9b7f32d941c6da5739f50362051cb5069", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/f6b4afc9b7f32d941c6da5739f50362051cb5069", "committedDate": "2020-04-09T20:21:16Z", "message": "Fix QF"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMjI0NzQ2", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-391224746", "createdAt": "2020-04-10T01:30:44Z", "commit": {"oid": "f6b4afc9b7f32d941c6da5739f50362051cb5069"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozMDo0NFrOGDufww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozMDo0NFrOGDufww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDcwNw==", "bodyText": "\u041d\u0435 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e?", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#discussion_r406560707", "createdAt": "2020-04-10T01:30:44Z", "author": {"login": "otymko"}, "path": "src/test/java/com/github/_1c_syntax/bsl/languageserver/configuration/LanguageServerConfigurationTest.java", "diffHunk": "@@ -58,8 +60,8 @@ void createDefault() {\n     LanguageServerConfiguration configuration = LanguageServerConfiguration.create();\n \n     // then\n-    assertThat(configuration.getDiagnosticLanguage()).isEqualTo(DiagnosticLanguage.RU);\n-    assertThat(configuration.getDiagnostics()).isEmpty();\n+    assertThat(configuration.getDiagnosticsOptions().getLanguage()).isEqualTo(com.github._1c_syntax.bsl.languageserver.configuration.diagnostics.Language.RU);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b4afc9b7f32d941c6da5739f50362051cb5069"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMjQ5NDc0", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-391249474", "createdAt": "2020-04-10T03:24:52Z", "commit": {"oid": "f6b4afc9b7f32d941c6da5739f50362051cb5069"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMzoyNDo1MlrOGDwBaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMzoyNDo1MlrOGDwBaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU4NTcwNQ==", "bodyText": "\u0410 \u043f\u043e\u0442\u043e\u043c \u043f\u0440\u0438\u0434\u0435\u0442 Language \u0438\u0437 mdclasses...", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#discussion_r406585705", "createdAt": "2020-04-10T03:24:52Z", "author": {"login": "theshadowco"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/configuration/diagnostics/Language.java", "diffHunk": "@@ -19,15 +19,17 @@\n  * You should have received a copy of the GNU Lesser General Public\n  * License along with BSL Language Server.\n  */\n-package com.github._1c_syntax.bsl.languageserver.configuration;\n+package com.github._1c_syntax.bsl.languageserver.configuration.diagnostics;\n \n-public enum DiagnosticLanguage {\n+public enum Language {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b4afc9b7f32d941c6da5739f50362051cb5069"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6b4afc9b7f32d941c6da5739f50362051cb5069", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/f6b4afc9b7f32d941c6da5739f50362051cb5069", "committedDate": "2020-04-09T20:21:16Z", "message": "Fix QF"}, "afterCommit": {"oid": "ca030c342947aed9c09de571fa56e6c48f40696c", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/ca030c342947aed9c09de571fa56e6c48f40696c", "committedDate": "2020-04-11T18:32:43Z", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b javadoc \u0434\u043b\u044f \u043f\u0430\u043a\u0435\u0442\u0430 configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca030c342947aed9c09de571fa56e6c48f40696c", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/ca030c342947aed9c09de571fa56e6c48f40696c", "committedDate": "2020-04-11T18:32:43Z", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b javadoc \u0434\u043b\u044f \u043f\u0430\u043a\u0435\u0442\u0430 configuration"}, "afterCommit": {"oid": "14974410e45ce1e8918ef1ca4da4615be73dfa96", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/14974410e45ce1e8918ef1ca4da4615be73dfa96", "committedDate": "2020-04-11T18:34:25Z", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b javadoc \u0434\u043b\u044f \u043f\u0430\u043a\u0435\u0442\u0430 configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14974410e45ce1e8918ef1ca4da4615be73dfa96", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/14974410e45ce1e8918ef1ca4da4615be73dfa96", "committedDate": "2020-04-11T18:34:25Z", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b javadoc \u0434\u043b\u044f \u043f\u0430\u043a\u0435\u0442\u0430 configuration"}, "afterCommit": {"oid": "8ee115e2492f8510716bd6680fc15d0064d2a8b0", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/8ee115e2492f8510716bd6680fc15d0064d2a8b0", "committedDate": "2020-04-11T18:38:21Z", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b javadoc \u0434\u043b\u044f \u043f\u0430\u043a\u0435\u0442\u0430 configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODQwMDA3", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-391840007", "createdAt": "2020-04-12T09:48:07Z", "commit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwOTo0ODowN1rOGET8BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwOTo0ODowN1rOGET8BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE3NDE0OQ==", "bodyText": "\u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \"com.github._1c_syntax.bsl.languageserver\" \u0432 \u044d\u0442\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0438 \u0441\u043e\u0441\u0435\u0434\u043d\u0435\u043c \u0433\u0440\u0430\u0434\u043b\u0435-\u0444\u0430\u0439\u043b\u0435  (", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#discussion_r407174149", "createdAt": "2020-04-12T09:48:07Z", "author": {"login": "artbear"}, "path": "gradle/developer-tools.gradle.kts", "diffHunk": "@@ -55,11 +55,21 @@ open class DeveloperTools @javax.inject.Inject constructor(objects: ObjectFactor\n \r\n     private fun createDiagnosticSupplier(lang: String, classLoader: ClassLoader) : Any {\r\n         val languageServerConfigurationClass = classLoader.loadClass(\"com.github._1c_syntax.bsl.languageserver.configuration.LanguageServerConfiguration\")\r\n-        val diagnosticLanguageClass = classLoader.loadClass(\"com.github._1c_syntax.bsl.languageserver.configuration.DiagnosticLanguage\")\r\n-        val lsConfiguration = languageServerConfigurationClass.getDeclaredMethod(\"create\", diagnosticLanguageClass)\r\n-                .invoke(languageServerConfigurationClass,\r\n-                        diagnosticLanguageClass.getMethod(\"valueOf\", classLoader.loadClass(\"java.lang.String\"))\r\n-                                .invoke(diagnosticLanguageClass, lang.toUpperCase()))\r\n+        val diagnosticsOptionsClass = classLoader.loadClass(\"com.github._1c_syntax.bsl.languageserver.configuration.diagnostics.DiagnosticsOptions\")\r\n+        val languageClass = classLoader.loadClass(\"com.github._1c_syntax.bsl.languageserver.configuration.diagnostics.Language\")\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODQwNDU4", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-391840458", "createdAt": "2020-04-12T09:54:14Z", "commit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwOTo1NDoxNFrOGET-mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQwOTo1NDoxNFrOGET-mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE3NDgwOQ==", "bodyText": "@nixel2007 \u043f\u043e\u0434\u0441\u043a\u0430\u0436\u0438, \u0430 \u043f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 \u044e\u0437\u0430\u0435\u0448\u044c \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438 \u0432 package-info.java\n\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, import javax.annotation.ParametersAreNonnullByDefault;\n\u0438 \u0442.\u043f.\n\u043f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u0436\u0435 \u0448\u0442\u0443\u043a\u0430 \u0434\u043b\u044f \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0430\n?", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#discussion_r407174809", "createdAt": "2020-04-12T09:54:14Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/configuration/codelens/package-info.java", "diffHunk": "@@ -19,10 +19,8 @@\n  * You should have received a copy of the GNU Lesser General Public\n  * License along with BSL Language Server.\n  */\n-package com.github._1c_syntax.bsl.languageserver.configuration;\n \n-public enum ComputeDiagnosticsTrigger {\n-  ONTYPE,\n-  ONSAVE,\n-  NEVER\n-}\n+/**\n+ * \u041f\u0430\u043a\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 {@link com.github._1c_syntax.bsl.languageserver.providers.CodeLensProvider}\n+ */\n+package com.github._1c_syntax.bsl.languageserver.configuration.codelens;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODQxMTQ1", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-391841145", "createdAt": "2020-04-12T10:03:49Z", "commit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMDowMzo0OVrOGEUCqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxMDowMzo0OVrOGEUCqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE3NTg1MA==", "bodyText": "\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 hasDefinedSetting \u0432 \u044d\u0442\u043e\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u0438 \u043d\u0435 \u043e\u0448\u0438\u0431\u043a\u0430?\n\u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u044f \u043f\u043e\u043d\u044f\u043b \u043f\u043e \u043a\u043e\u0434\u0443, \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u043d\u043e \u0443 \u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.\n\u0438 \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e \u043a\u043e\u0434\u0443 \u0431\u0443\u0434\u0435\u0442 \u0441\u0447\u0438\u0442\u0430\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430, \u0434\u0430?\n\ndiagnosticConfiguration.isRight() == true\n\n\u0438 hasCustomConfiguration == true\n\n\ndiagnosticConfiguration.isLeft() && diagnosticConfiguration.getLeft() == false\n\n\u043d\u0443 \u0438\u043b\u0438 enabledDirectly  == false\n\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0432\u0435\u0440\u043d\u043e?\n\n\nhasDefinedSetting = enabledDirectly || hasCustomConfiguration; \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0432 true\n\n\u043d\u0443 \u0438 \u0434\u0430\u043b\u0435\u0435 passedOn = mode == Mode.ON && (activatedByDefault || hasDefinedSetting); \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0432 true", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#discussion_r407175850", "createdAt": "2020-04-12T10:03:49Z", "author": {"login": "artbear"}, "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/diagnostics/DiagnosticSupplier.java", "diffHunk": "@@ -110,35 +112,49 @@ private BSLDiagnostic createDiagnosticInstance(DiagnosticInfo diagnosticInfo) {\n   }\n \n   private DiagnosticInfo createDiagnosticInfo(Class<? extends BSLDiagnostic> diagnosticClass) {\n-    return new DiagnosticInfo(diagnosticClass, configuration.getDiagnosticLanguage());\n+    return new DiagnosticInfo(diagnosticClass, configuration.getDiagnosticsOptions().getLanguage());\n   }\n \n   private void configureDiagnostic(BSLDiagnostic diagnostic) {\n     Either<Boolean, Map<String, Object>> diagnosticConfiguration =\n-      configuration.getDiagnostics().get(diagnostic.getInfo().getCode().getStringValue());\n+      configuration.getDiagnosticsOptions().getRules().get(diagnostic.getInfo().getCode().getStringValue());\n \n     if (diagnosticConfiguration != null && diagnosticConfiguration.isRight()) {\n       diagnostic.configure(diagnosticConfiguration.getRight());\n     }\n   }\n \n-  private boolean isEnabled(DiagnosticInfo diagnosticInfo) {\n+  private boolean isEnabled(DiagnosticInfo diagnosticInfo, DiagnosticsOptions diagnosticsOptions) {\n     if (diagnosticInfo == null) {\n       return false;\n     }\n \n+    var mode = diagnosticsOptions.getMode();\n+    if (mode == Mode.OFF) {\n+      return false;\n+    }\n+\n     Either<Boolean, Map<String, Object>> diagnosticConfiguration =\n-      configuration.getDiagnostics().get(diagnosticInfo.getCode().getStringValue());\n+      configuration.getDiagnosticsOptions().getRules().get(diagnosticInfo.getCode().getStringValue());\n \n     boolean activatedByDefault = diagnosticConfiguration == null && diagnosticInfo.isActivatedByDefault();\n     boolean hasCustomConfiguration = diagnosticConfiguration != null && diagnosticConfiguration.isRight();\n     boolean enabledDirectly = diagnosticConfiguration != null\n       && diagnosticConfiguration.isLeft()\n       && diagnosticConfiguration.getLeft();\n+    boolean hasDefinedSetting = enabledDirectly || hasCustomConfiguration;\n+\n+    boolean passedAllMode = mode == Mode.ALL;\n+    boolean passedOnlyMode = mode == Mode.ONLY && hasDefinedSetting;\n+    boolean passedExcept = mode == Mode.EXCEPT && !hasDefinedSetting;\n+    boolean passedOn = mode == Mode.ON && (activatedByDefault || hasDefinedSetting);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "originalPosition": 84}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODUyOTQ4", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-391852948", "createdAt": "2020-04-12T12:36:43Z", "commit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f48edac4ef82153df6303e1aebc271304765e483", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/f48edac4ef82153df6303e1aebc271304765e483", "committedDate": "2020-04-11T18:55:18Z", "message": "\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0433\u0435\u043d\u0435\u0440\u0438\u043b\u043a\u0438 json-\u0441\u0445\u0435\u043c\u044b \u043f\u043e\u0434 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u043a\u043b\u0430\u0441\u0441\u043e\u0432"}, "afterCommit": {"oid": "34349fdf433d8b9e6273d0412bdd95f75665d330", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/34349fdf433d8b9e6273d0412bdd95f75665d330", "committedDate": "2020-04-13T08:27:24Z", "message": "\u041f\u0435\u0440\u0435\u043d\u043e\u0441 language \u0438\u0437 DiagnosticOptions \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433 bsl ls\n\nLanguage \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u043b \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u044f\u0437\u044b\u043a\u043e\u043c \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a - \u043e\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0432\u0438\u043a-\u0444\u0438\u043a\u0441\u043e\u0432, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u0440\u043e \u043d\u0430\u0447\u043d\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u0432 codelens. \u0422\u0435\u043f\u0435\u0440\u044c \u044d\u0442\u043e \u043e\u0431\u0449\u0438\u0439 \u044f\u0437\u044b\u043a \u0434\u043b\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0431\u0441\u043b \u043b\u0441 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ced252149250216443d63f823ec5e976b08b2a1", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/0ced252149250216443d63f823ec5e976b08b2a1", "committedDate": "2020-04-13T09:30:11Z", "message": "rules -> parameters"}, "afterCommit": {"oid": "75537e2b96db91b40731620a1f985dfd8338703c", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/75537e2b96db91b40731620a1f985dfd8338703c", "committedDate": "2020-04-13T09:34:40Z", "message": "rules -> parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODE2Mjg4", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#pullrequestreview-392816288", "createdAt": "2020-04-14T10:53:53Z", "commit": {"oid": "9475219e45c6879266d70877ed6a2e1f7ddcdc29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMDo1Mzo1M1rOGFJKtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMDo1Mzo1M1rOGFJKtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA0NjI2MQ==", "bodyText": "\u041a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u0430\u043d\u0435\u0442?", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1027#discussion_r408046261", "createdAt": "2020-04-14T10:53:53Z", "author": {"login": "asosnoviy"}, "path": "src/main/resources/com/github/_1c_syntax/bsl/languageserver/configuration/parameters-schema.json", "diffHunk": "@@ -409,13 +409,13 @@\n             \"$id\": \"#/definitions/MagicNumber\"\n         },\n         \"MethodSize\": {\n-            \"description\": \"Method size \",\n+            \"description\": \"Method size\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9475219e45c6879266d70877ed6a2e1f7ddcdc29"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5438bdd2c648101d8fa00b9d2ec788978e2fbdd2", "author": {"user": {"login": "theshadowco", "name": "Maximov Valery"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/5438bdd2c648101d8fa00b9d2ec788978e2fbdd2", "committedDate": "2020-04-14T10:40:55Z", "message": "\u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"}, "afterCommit": {"oid": "ae9187bba5f81fc5209feeffb2523afd72d41957", "author": {"user": {"login": "theshadowco", "name": "Maximov Valery"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/ae9187bba5f81fc5209feeffb2523afd72d41957", "committedDate": "2020-04-14T11:02:29Z", "message": "\u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43ae7f7b3aa19bdadcf4070f29f24fa4acc65773", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/43ae7f7b3aa19bdadcf4070f29f24fa4acc65773", "committedDate": "2020-04-21T20:18:31Z", "message": "\u0420\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u0420\u0430\u0437\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0440\u0430\u0437\u043d\u044b\u043c options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8111a3d8f1a1250e28079b125e2257780a432a4f", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/8111a3d8f1a1250e28079b125e2257780a432a4f", "committedDate": "2020-04-21T20:18:31Z", "message": "\u0417\u0430\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043f\u043e\u0434 DiagnosticMode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e1dc318590a5369d6ca45e5e44e1a26a28b9f5a", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/1e1dc318590a5369d6ca45e5e44e1a26a28b9f5a", "committedDate": "2020-04-21T20:18:31Z", "message": "\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0443\u0447\u0435\u0442 \u0440\u0435\u0436\u0438\u043c\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b792b0952c3a1641227e0273f18d984829072bdb", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/b792b0952c3a1641227e0273f18d984829072bdb", "committedDate": "2020-04-21T20:18:31Z", "message": "Fix QF"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "805fc51b91015f1f260e8fc6f5862ba20e3b20d1", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/805fc51b91015f1f260e8fc6f5862ba20e3b20d1", "committedDate": "2020-04-21T20:18:31Z", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b javadoc \u0434\u043b\u044f \u043f\u0430\u043a\u0435\u0442\u0430 configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb6ccbd0004c21a9b2a8c7864f535d6d87d4318a", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/bb6ccbd0004c21a9b2a8c7864f535d6d87d4318a", "committedDate": "2020-04-21T20:18:31Z", "message": "\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0433\u0435\u043d\u0435\u0440\u0438\u043b\u043a\u0438 json-\u0441\u0445\u0435\u043c\u044b \u043f\u043e\u0434 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u043a\u043b\u0430\u0441\u0441\u043e\u0432"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "185293cf6fd07a863a66919a0fdd09140a81f12a", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/185293cf6fd07a863a66919a0fdd09140a81f12a", "committedDate": "2020-04-21T20:18:31Z", "message": "\u041f\u0435\u0440\u0435\u043d\u043e\u0441 language \u0438\u0437 DiagnosticOptions \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433 bsl ls\n\nLanguage \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u043b \u0431\u044b\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u044f\u0437\u044b\u043a\u043e\u043c \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a - \u043e\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0432\u0438\u043a-\u0444\u0438\u043a\u0441\u043e\u0432, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u0440\u043e \u043d\u0430\u0447\u043d\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u0432 codelens. \u0422\u0435\u043f\u0435\u0440\u044c \u044d\u0442\u043e \u043e\u0431\u0449\u0438\u0439 \u044f\u0437\u044b\u043a \u0434\u043b\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0431\u0441\u043b \u043b\u0441 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bee702e8f8ba786d7e770403039c479b45d3fe0e", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/bee702e8f8ba786d7e770403039c479b45d3fe0e", "committedDate": "2020-04-21T20:18:31Z", "message": "rules -> parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c72c26cee6c6bfd7de59b2911324b3311b055935", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/c72c26cee6c6bfd7de59b2911324b3311b055935", "committedDate": "2020-04-21T20:18:31Z", "message": "\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 json-schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2af7087610b9d1459ed2146e0f1e090df71b843f", "author": {"user": {"login": "theshadowco", "name": "Maximov Valery"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/2af7087610b9d1459ed2146e0f1e090df71b843f", "committedDate": "2020-04-21T20:18:31Z", "message": "\u0421\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u0441\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0439 \u0441\u0445\u0435\u043c\u044b"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cff3da35d007beded8d00af1dc1435a13ce96a8", "author": {"user": {"login": "theshadowco", "name": "Maximov Valery"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/5cff3da35d007beded8d00af1dc1435a13ce96a8", "committedDate": "2020-04-21T20:18:31Z", "message": "\u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf65e7fdee3196de9d846361c604cc8ca2ebf148", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/cf65e7fdee3196de9d846361c604cc8ca2ebf148", "committedDate": "2020-04-21T20:25:45Z", "message": "precommit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae9187bba5f81fc5209feeffb2523afd72d41957", "author": {"user": {"login": "theshadowco", "name": "Maximov Valery"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/ae9187bba5f81fc5209feeffb2523afd72d41957", "committedDate": "2020-04-14T11:02:29Z", "message": "\u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"}, "afterCommit": {"oid": "cf65e7fdee3196de9d846361c604cc8ca2ebf148", "author": {"user": {"login": "nixel2007", "name": "Nikita Fedkin"}}, "url": "https://github.com/1c-syntax/bsl-language-server/commit/cf65e7fdee3196de9d846361c604cc8ca2ebf148", "committedDate": "2020-04-21T20:25:45Z", "message": "precommit"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4907, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}