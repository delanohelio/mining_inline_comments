{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODA1ODU5", "number": 447, "title": "Support min allowed app version", "bodyText": "Closes #445", "createdAt": "2020-03-06T12:53:24Z", "url": "https://github.com/opensrp/opensrp-client-core/pull/447", "merged": true, "mergeCommit": {"oid": "e6f291627790f41bc326b22a7770b5757b26cee0"}, "closed": true, "closedAt": "2020-03-26T15:12:38Z", "author": {"login": "vincent-karuri"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKXu5fAH2gAyMzg0ODA1ODU5OjEyMjk4MGFjOTYxMjZmZmFkYjYyNmQ4ZmNlZTVmMmIyZThmZDIyOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRdjeBgFqTM4MjEwNTE5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "122980ac96126ffadb626d8fcee5f2b2e8fd229b", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/122980ac96126ffadb626d8fcee5f2b2e8fd229b", "committedDate": "2020-03-04T14:24:22Z", "message": "Run ec-sync after syncing server settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76fc4e4824f5527a514a0b8f6e3946fb9f3d5b81", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/76fc4e4824f5527a514a0b8f6e3946fb9f3d5b81", "committedDate": "2020-03-04T15:05:03Z", "message": "Extract min app version setting and logout user if using outdated app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd2f058bb43e05747e8879e9178b06e3d5b68263", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/dd2f058bb43e05747e8879e9178b06e3d5b68263", "committedDate": "2020-03-05T14:47:38Z", "message": "Extract min allowed app version and perform minor refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecf6a6e94e1b21f7052ff8f53ee8fac9496c5c56", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/ecf6a6e94e1b21f7052ff8f53ee8fac9496c5c56", "committedDate": "2020-03-05T15:03:16Z", "message": "Record that an app is outdated before logging out"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c4efa35022c1c492f69dc1f432b7aa4eb681671", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/9c4efa35022c1c492f69dc1f432b7aa4eb681671", "committedDate": "2020-03-05T15:15:34Z", "message": "Extract min allowed version value after determining key name matches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a95decaa369d423fe1f3dbcc3ee11049d1af7bc", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/7a95decaa369d423fe1f3dbcc3ee11049d1af7bc", "committedDate": "2020-03-06T09:13:08Z", "message": "Prevent login if the app is outdated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19808f76c1991977e602932251125ed7f7845cb2", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/19808f76c1991977e602932251125ed7f7845cb2", "committedDate": "2020-03-06T11:46:38Z", "message": "Move app version validation to utils class and add appropriate method on forced logout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85e24977db9998888d49e870f166a99f5cf229d7", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/85e24977db9998888d49e870f166a99f5cf229d7", "committedDate": "2020-03-06T11:56:02Z", "message": "Minor code refactor and add error messages for forced logout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8330625a936c90f5d2c240907d1571b7f89a637", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/e8330625a936c90f5d2c240907d1571b7f89a637", "committedDate": "2020-03-06T12:18:40Z", "message": "Fix boolean logic bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22547ee6a43adf8ce457e2cfadc16e512c6a26e4", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/22547ee6a43adf8ce457e2cfadc16e512c6a26e4", "committedDate": "2020-03-06T12:44:03Z", "message": "Extract app version code instead of library version code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c94ec1e1286e7861f1df8939b8d0b07473eb0c0c", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/c94ec1e1286e7861f1df8939b8d0b07473eb0c0c", "committedDate": "2020-03-09T12:13:44Z", "message": "Allow all apps to sync by default and perform code clean-up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0753b7fe990742dced3dd59f1f85403f66ec261", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/d0753b7fe990742dced3dd59f1f85403f66ec261", "committedDate": "2020-03-10T08:17:11Z", "message": "Add BaseLoginPresenter tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ef30f3c99ce6d6d2e8ec2f38e433c14eeac974e", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/0ef30f3c99ce6d6d2e8ec2f38e433c14eeac974e", "committedDate": "2020-03-10T08:32:53Z", "message": "Add AllSettings test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0743c1453573c5219e0453758a17ee949190ba0", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/b0743c1453573c5219e0453758a17ee949190ba0", "committedDate": "2020-03-10T09:55:25Z", "message": "Perform minor refactor and add Utils tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1ab629ef06ca88137eead14e154e405a3c47e1d", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/f1ab629ef06ca88137eead14e154e405a3c47e1d", "committedDate": "2020-03-10T13:27:08Z", "message": "Add SyncUtils tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab0267952e49b62f51a1463e87aea1c5a167a2f2", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/ab0267952e49b62f51a1463e87aea1c5a167a2f2", "committedDate": "2020-03-23T13:42:54Z", "message": "Merge branch 'master' into 445-support-min-allowed-app-version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f903b2b17ee132e371ed6d7ec9a90f380c0b806", "author": {"user": {"login": "githengi", "name": "Samuel Githengi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/7f903b2b17ee132e371ed6d7ec9a90f380c0b806", "committedDate": "2020-03-24T11:31:29Z", "message": "Merge branch 'master' into 445-support-min-allowed-app-version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjI5NjYx", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#pullrequestreview-380229661", "createdAt": "2020-03-24T11:43:42Z", "commit": {"oid": "7f903b2b17ee132e371ed6d7ec9a90f380c0b806"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0Mzo0MlrOF6sc1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0Mzo0MlrOF6sc1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA5MDAwNQ==", "bodyText": "This should be after if(!hasValidAuthorization) as its more efficient as hasValidAuthorization is already known.\nIS_APP_VERSION_ALLOWED will always be false even after an APK has been upgraded if it was false as it will not be set to true again why not save the minimum version itself and just check against that instead of boolean", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#discussion_r397090005", "createdAt": "2020-03-24T11:43:42Z", "author": {"login": "githengi"}, "path": "opensrp-app/src/main/java/org/smartregister/sync/intent/SyncIntentService.java", "diffHunk": "@@ -79,12 +82,16 @@ private void doSync() {\n             if (hasValidAuthorization || !CoreLibrary.getInstance().getSyncConfiguration().disableSyncToServerIfUserIsDisabled()) {\n                 pushToServer();\n             }\n-            if (hasValidAuthorization) {\n-                pullECFromServer();\n-            } else {\n+\n+            if (!syncUtils.isAppVersionAllowed()) {\n+                AllSettings settingsRepository = org.smartregister.Context.getInstance().allSettings();\n+                settingsRepository.put(IS_APP_VERSION_ALLOWED, \"false\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f903b2b17ee132e371ed6d7ec9a90f380c0b806"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjMyMDQw", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#pullrequestreview-380232040", "createdAt": "2020-03-24T11:47:28Z", "commit": {"oid": "7f903b2b17ee132e371ed6d7ec9a90f380c0b806"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0NzoyOFrOF6skZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0NzoyOFrOF6skZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA5MTk0Mg==", "bodyText": "maybe break from loop here", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#discussion_r397091942", "createdAt": "2020-03-24T11:47:28Z", "author": {"login": "githengi"}, "path": "opensrp-app/src/main/java/org/smartregister/util/SyncUtils.java", "diffHunk": "@@ -84,4 +96,39 @@ public void logoutUser() {\n         opensrpContent.userService().logoutSession();\n     }\n \n+    public boolean isAppVersionAllowed() throws PackageManager.NameNotFoundException {\n+        boolean isAppVersionAllowed = true;\n+\n+        AllSettings settingsRepository = opensrpContent.allSettings();\n+        Setting minAllowedAppVersionSetting = settingsRepository.getSetting(MIN_ALLOWED_APP_VERSION);\n+        if (minAllowedAppVersionSetting == null) {\n+            return isAppVersionAllowed;\n+        }\n+\n+        int minAllowedAppVersion = extractMinAllowedAppVersion(minAllowedAppVersionSetting.getValue());\n+        if (getVersionCode(context) < minAllowedAppVersion) {\n+            isAppVersionAllowed = false;\n+        }\n+\n+        return isAppVersionAllowed;\n+    }\n+\n+    private int extractMinAllowedAppVersion(String setting) {\n+        int minAllowedAppVersion = 0;\n+        try {\n+            JSONArray settings = new JSONObject(setting).optJSONArray(SETTINGS);\n+            for (int i = 0; i < settings.length(); i++) {\n+                JSONObject currSettingObj = settings.optJSONObject(i);\n+                String currKey = currSettingObj.optString(KEY);\n+                if (MIN_ALLOWED_APP_VERSION.equals(currKey)) {\n+                    minAllowedAppVersion = currSettingObj.optInt(VALUE, minAllowedAppVersion);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f903b2b17ee132e371ed6d7ec9a90f380c0b806"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4196bf387244233e57bec98e72b07fb4b4f97e74", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/4196bf387244233e57bec98e72b07fb4b4f97e74", "committedDate": "2020-03-25T12:24:04Z", "message": "Merge remote-tracking branch 'origin/master' into 445-support-min-allowed-app-version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb0075e33ab4f7c88b31cda22c3fa3d976f5bbc4", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/fb0075e33ab4f7c88b31cda22c3fa3d976f5bbc4", "committedDate": "2020-03-25T12:39:05Z", "message": "Perform minor optimizations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c186e83d116539a6a8af37fb3962880ccfc1017f", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/c186e83d116539a6a8af37fb3962880ccfc1017f", "committedDate": "2020-03-25T14:00:37Z", "message": "Save min allowed app version instead of authorization status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/e30fdbf2cf1195f0ab5058180bceb688d94d8c7b", "committedDate": "2020-03-25T15:19:38Z", "message": "Refactor all app version validation into sync utils and fix failing tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "57f93d8cc70a900c7d6d5f86a0be7dd1914ec6dc", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/57f93d8cc70a900c7d6d5f86a0be7dd1914ec6dc", "committedDate": "2020-03-25T15:15:33Z", "message": "Refactor all app version validation into sync utils and fix failing tests"}, "afterCommit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/e30fdbf2cf1195f0ab5058180bceb688d94d8c7b", "committedDate": "2020-03-25T15:19:38Z", "message": "Refactor all app version validation into sync utils and fix failing tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjYzNzY0", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#pullrequestreview-381263764", "createdAt": "2020-03-25T15:29:47Z", "commit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyOTo0N1rOF7gweg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyOTo0N1rOF7gweg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0NzAwMg==", "bodyText": "This is no longer used", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#discussion_r397947002", "createdAt": "2020-03-25T15:29:47Z", "author": {"login": "githengi"}, "path": "opensrp-app/src/main/java/org/smartregister/AllConstants.java", "diffHunk": "@@ -450,4 +450,15 @@\n \n     }\n \n+    public interface FORCED_LOGOUT {\n+        String MIN_ALLOWED_APP_VERSION_SETTING = \"min_allowed_app_version_setting\";\n+        String MIN_ALLOWED_APP_VERSION = \"min_allowed_app_version\";\n+        String IS_APP_VERSION_ALLOWED = \"is_app_version_allowed\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjY0OTc3", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#pullrequestreview-381264977", "createdAt": "2020-03-25T15:30:53Z", "commit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTozMDo1M1rOF7g0DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTozMDo1M1rOF7g0DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0NzkxNg==", "bodyText": "import not used", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#discussion_r397947916", "createdAt": "2020-03-25T15:30:53Z", "author": {"login": "githengi"}, "path": "opensrp-app/src/main/java/org/smartregister/sync/intent/SyncIntentService.java", "diffHunk": "@@ -31,6 +32,8 @@\n \n import timber.log.Timber;\n \n+import static org.smartregister.AllConstants.FORCED_LOGOUT.IS_APP_VERSION_ALLOWED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjY1NDk1", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#pullrequestreview-381265495", "createdAt": "2020-03-25T15:31:25Z", "commit": {"oid": "e30fdbf2cf1195f0ab5058180bceb688d94d8c7b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3350d3af5451f94c3c25d6052d3e7110849e505", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/a3350d3af5451f94c3c25d6052d3e7110849e505", "committedDate": "2020-03-26T06:31:22Z", "message": "Code clean-up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdc735f01d6ea929d2e8e31033cf475ea2f0ae76", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/cdc735f01d6ea929d2e8e31033cf475ea2f0ae76", "committedDate": "2020-03-26T06:34:31Z", "message": "Merge remote-tracking branch 'origin/master' into 445-support-min-allowed-app-version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d5c860e0b6d525c0d1d69c31220cc601072cd2", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/70d5c860e0b6d525c0d1d69c31220cc601072cd2", "committedDate": "2020-03-26T06:35:06Z", "message": "Bump lib version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07a118d688ac6fd5f99d7750604358bf6d22e05d", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/07a118d688ac6fd5f99d7750604358bf6d22e05d", "committedDate": "2020-03-26T07:47:05Z", "message": "Fix integer to long casting error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cf5e0f811f8de94ee0f2df05ff3d8727a7b671c", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/4cf5e0f811f8de94ee0f2df05ff3d8727a7b671c", "committedDate": "2020-03-26T08:57:42Z", "message": "Re-process min allowed version setting if it was recently updated during sync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21a395a1887f17cbc8b09d99815aff9ab5f1fa5b", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/21a395a1887f17cbc8b09d99815aff9ab5f1fa5b", "committedDate": "2020-03-26T09:26:14Z", "message": "Derive server version from server setting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc9629b47582a83f298ffaf6fba5bdf51b32490", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/ccc9629b47582a83f298ffaf6fba5bdf51b32490", "committedDate": "2020-03-26T12:29:39Z", "message": "Run default sync only if settings were successfully synced"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "625dcecc157a2335b7cd5feeb387fff34f811eb9", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/625dcecc157a2335b7cd5feeb387fff34f811eb9", "committedDate": "2020-03-26T12:49:28Z", "message": "Only logout outdated app if it has successfully pushed its data to the server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1781015701d34659036aa847fbca1e8041029391", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/1781015701d34659036aa847fbca1e8041029391", "committedDate": "2020-03-26T12:47:33Z", "message": "Only logout outdated app if it has successfully pushed its data to the server"}, "afterCommit": {"oid": "625dcecc157a2335b7cd5feeb387fff34f811eb9", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/625dcecc157a2335b7cd5feeb387fff34f811eb9", "committedDate": "2020-03-26T12:49:28Z", "message": "Only logout outdated app if it has successfully pushed its data to the server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c869e87e7eef461b6ed1ba3a1ea317799cc5b7f4", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/c869e87e7eef461b6ed1ba3a1ea317799cc5b7f4", "committedDate": "2020-03-26T13:35:51Z", "message": "Don't pull data from the server as long as the app is outdated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ffc05631513df68fc06051f7514b13df874378f7", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/ffc05631513df68fc06051f7514b13df874378f7", "committedDate": "2020-03-26T13:08:08Z", "message": "Do pull data from server as long as the app version is not allowed"}, "afterCommit": {"oid": "c869e87e7eef461b6ed1ba3a1ea317799cc5b7f4", "author": {"user": {"login": "vincent-karuri", "name": null}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/c869e87e7eef461b6ed1ba3a1ea317799cc5b7f4", "committedDate": "2020-03-26T13:35:51Z", "message": "Don't pull data from the server as long as the app is outdated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMTA1MTkw", "url": "https://github.com/opensrp/opensrp-client-core/pull/447#pullrequestreview-382105190", "createdAt": "2020-03-26T15:08:47Z", "commit": {"oid": "c869e87e7eef461b6ed1ba3a1ea317799cc5b7f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2619, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}