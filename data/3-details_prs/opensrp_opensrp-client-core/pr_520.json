{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NzA0NDgx", "number": 520, "title": "File Utilities class tests", "bodyText": "", "createdAt": "2020-05-12T12:50:45Z", "url": "https://github.com/opensrp/opensrp-client-core/pull/520", "merged": true, "mergeCommit": {"oid": "9fd96a4f0c43c57106e2c3f9aa05a4729a498b05"}, "closed": true, "closedAt": "2020-06-02T09:35:36Z", "author": {"login": "gmwasi"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgeXu6AH2gAyNDE2NzA0NDgxOjg2NWUzOTkzZTg3ODVhZDBlZDVmY2JlOWYzNDBlOTlhYWVlNTVlYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnRYO5gFqTQyMjQ5ODE3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "865e3993e8785ad0ed5fcbe9f340e99aaee55eb4", "author": {"user": null}, "url": "https://github.com/opensrp/opensrp-client-core/commit/865e3993e8785ad0ed5fcbe9f340e99aaee55eb4", "committedDate": "2020-05-12T06:34:44Z", "message": "file utilities test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7f6de2ea7a3b4a25dff68904dff14ec062c2987", "author": {"user": null}, "url": "https://github.com/opensrp/opensrp-client-core/commit/d7f6de2ea7a3b4a25dff68904dff14ec062c2987", "committedDate": "2020-05-12T12:49:47Z", "message": "File utilities test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1", "author": {"user": {"login": "gmwasi", "name": "Brian Mwasi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1", "committedDate": "2020-05-12T12:50:55Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMDI5Mjk4", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#pullrequestreview-410029298", "createdAt": "2020-05-12T13:16:42Z", "commit": {"oid": "9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMDMwNTc4", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#pullrequestreview-410030578", "createdAt": "2020-05-12T13:18:10Z", "commit": {"oid": "9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzoxODoxMFrOGUGHDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMzoxODoxMFrOGUGHDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcyNDgxMw==", "bodyText": "There is no check that this is written", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#discussion_r423724813", "createdAt": "2020-05-12T13:18:10Z", "author": {"login": "githengi"}, "path": "opensrp-app/src/test/java/org/smartregister/util/FileUtilitiesTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package org.smartregister.util;\n+\n+import android.os.Environment;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.powermock.api.mockito.PowerMockito;\n+import org.powermock.core.classloader.annotations.PrepareForTest;\n+import org.powermock.modules.junit4.PowerMockRunner;\n+\n+import java.io.BufferedWriter;\n+import java.io.File;\n+import java.io.IOException;\n+\n+import static org.mockito.Mockito.when;\n+@RunWith(PowerMockRunner.class)\n+@PrepareForTest({Environment.class})\n+public class FileUtilitiesTest {\n+\n+    private String FILE_NAME = \"newFile.ext\";\n+\n+    @Rule\n+    public TemporaryFolder storageDirectory = new TemporaryFolder();\n+    private File existentDirectory;\n+\n+    public FileUtilitiesTest() throws IOException {\n+    }\n+\n+    @Before\n+    public void setup() {\n+        existentDirectory = storageDirectory.getRoot();\n+        PowerMockito.mockStatic(Environment.class);\n+    }\n+\n+    @Mock\n+    private BufferedWriter mockWriter;\n+\n+    @Test\n+    public void initIndexFile_validFile_addsEmptyraces() throws Exception {\n+        String testData = \"string to write\";\n+        when(Environment.getExternalStorageDirectory()).thenReturn(existentDirectory);\n+        PowerMockito.whenNew(BufferedWriter.class).withAnyArguments().thenReturn(mockWriter);\n+        FileUtilities fileUtils = new FileUtilities();\n+        try\n+        {\n+            fileUtils.write(FILE_NAME, testData);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "237dabc55c295905d1b01b451ec80b605ca0e761", "author": {"user": {"login": "gmwasi", "name": "Brian Mwasi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/237dabc55c295905d1b01b451ec80b605ca0e761", "committedDate": "2020-05-12T21:21:14Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "829a2cd904da158247d0804454b0a41db5c92c6d", "author": {"user": {"login": "gmwasi", "name": "Brian Mwasi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/829a2cd904da158247d0804454b0a41db5c92c6d", "committedDate": "2020-05-19T07:11:38Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTI5MTcy", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#pullrequestreview-417929172", "createdAt": "2020-05-26T02:07:38Z", "commit": {"oid": "829a2cd904da158247d0804454b0a41db5c92c6d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "996d84550f874265aed5043a930d171a67ebad25", "author": {"user": {"login": "gmwasi", "name": "Brian Mwasi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/996d84550f874265aed5043a930d171a67ebad25", "committedDate": "2020-05-26T08:03:22Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb7393723f49ac9aa64e0f2974e14cf5e687c06c", "author": {"user": null}, "url": "https://github.com/opensrp/opensrp-client-core/commit/fb7393723f49ac9aa64e0f2974e14cf5e687c06c", "committedDate": "2020-05-26T08:57:40Z", "message": "Asserted written data is correct"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b2baf3754e6aa00872cfa59149cc30f5b2219ae", "author": {"user": null}, "url": "https://github.com/opensrp/opensrp-client-core/commit/1b2baf3754e6aa00872cfa59149cc30f5b2219ae", "committedDate": "2020-05-26T08:59:01Z", "message": "deleted temporary folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2c55694fc4a2f3b0df9abb3ccc79803175bc5a4", "author": {"user": {"login": "gmwasi", "name": "Brian Mwasi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/c2c55694fc4a2f3b0df9abb3ccc79803175bc5a4", "committedDate": "2020-05-26T09:20:05Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNjU1NjM3", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#pullrequestreview-420655637", "createdAt": "2020-05-29T05:09:57Z", "commit": {"oid": "c2c55694fc4a2f3b0df9abb3ccc79803175bc5a4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae01a12dcc8528cdf77f070f6259cf878e2876f8", "author": {"user": {"login": "dubdabasoduba", "name": "Benjamin Mwalimu"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/ae01a12dcc8528cdf77f070f6259cf878e2876f8", "committedDate": "2020-05-29T05:10:12Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b1555a8deb84b0cca2bfa86cfe3b17f9154717e", "author": {"user": {"login": "gmwasi", "name": "Brian Mwasi"}}, "url": "https://github.com/opensrp/opensrp-client-core/commit/3b1555a8deb84b0cca2bfa86cfe3b17f9154717e", "committedDate": "2020-06-02T07:52:33Z", "message": "Merge branch 'master' into gmwasi-tt-9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f5349495030b39141adbbf9d237daca7d6454e9", "author": {"user": null}, "url": "https://github.com/opensrp/opensrp-client-core/commit/5f5349495030b39141adbbf9d237daca7d6454e9", "committedDate": "2020-06-02T07:57:45Z", "message": "fix code structure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15820c06cd45f4a1499eee788b0ffd7ee005d3c4", "author": {"user": null}, "url": "https://github.com/opensrp/opensrp-client-core/commit/15820c06cd45f4a1499eee788b0ffd7ee005d3c4", "committedDate": "2020-06-02T08:35:55Z", "message": "fixed failing test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNDk4MTc5", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#pullrequestreview-422498179", "createdAt": "2020-06-02T09:23:59Z", "commit": {"oid": "15820c06cd45f4a1499eee788b0ffd7ee005d3c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2572, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}