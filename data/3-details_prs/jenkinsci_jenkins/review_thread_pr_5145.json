{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2OTg1NDM5", "number": 5145, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQwOTo0ODoyN1rOFQUN8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQwOTo1MDowN1rOFQUQ1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUyNjUyNzg0OnYy", "diffSide": "RIGHT", "path": "war/src/main/webapp/scripts/hudson-behavior.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQwOTo0ODoyN1rOIWGelA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQxMDozNzo1MVrOIWIdaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDA0NTcxNg==", "bodyText": "Now a number cannot be a negative number", "url": "https://github.com/jenkinsci/jenkins/pull/5145#discussion_r560045716", "createdAt": "2021-01-19T09:48:27Z", "author": {"login": "MRamonLeon"}, "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -878,18 +878,48 @@ function rowvgStartEachRow(recursive,f) {\n     Behaviour.specify(\"INPUT.required\", \"input-required\", ++p, function(e) { registerRegexpValidator(e,/./,\"Field is required\"); });\n \n     // validate form values to be an integer\n-    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) { registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\"); });\n-    Behaviour.specify(\"INPUT.number-required\", \"input-number-required\", ++p, function(e) { registerRegexpValidator(e,/^\\-?(\\d+)$/,\"Not an integer\"); });\n+    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n+        registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d269f262094de3f2d419f3083bec34d85195123a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDA3ODE4Nw==", "bodyText": "I didn't modified it. It seems that it need be modified. How about ^(-?\\d+|)$ ?", "url": "https://github.com/jenkinsci/jenkins/pull/5145#discussion_r560078187", "createdAt": "2021-01-19T10:37:51Z", "author": {"login": "benebsiny"}, "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -878,18 +878,48 @@ function rowvgStartEachRow(recursive,f) {\n     Behaviour.specify(\"INPUT.required\", \"input-required\", ++p, function(e) { registerRegexpValidator(e,/./,\"Field is required\"); });\n \n     // validate form values to be an integer\n-    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) { registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\"); });\n-    Behaviour.specify(\"INPUT.number-required\", \"input-number-required\", ++p, function(e) { registerRegexpValidator(e,/^\\-?(\\d+)$/,\"Not an integer\"); });\n+    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n+        registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDA0NTcxNg=="}, "originalCommit": {"oid": "d269f262094de3f2d419f3083bec34d85195123a"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUyNjUzNTI1OnYy", "diffSide": "RIGHT", "path": "war/src/main/webapp/scripts/hudson-behavior.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQwOTo1MDowN1rOIWGjLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQxMDoyNToyMlrOIWH-iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDA0Njg5Mg==", "bodyText": "The '.' is not included in the if clause", "url": "https://github.com/jenkinsci/jenkins/pull/5145#discussion_r560046892", "createdAt": "2021-01-19T09:50:07Z", "author": {"login": "MRamonLeon"}, "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -878,18 +878,48 @@ function rowvgStartEachRow(recursive,f) {\n     Behaviour.specify(\"INPUT.required\", \"input-required\", ++p, function(e) { registerRegexpValidator(e,/./,\"Field is required\"); });\n \n     // validate form values to be an integer\n-    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) { registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\"); });\n-    Behaviour.specify(\"INPUT.number-required\", \"input-number-required\", ++p, function(e) { registerRegexpValidator(e,/^\\-?(\\d+)$/,\"Not an integer\"); });\n+    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n+        registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\");\n+    });\n+\n+    Behaviour.specify(\"INPUT.number-required\", \"input-number-required\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n+        registerRegexpValidator(e,/^\\-?(\\d+)$/,\"Not an integer\");\n+    });\n \n     Behaviour.specify(\"INPUT.non-negative-number-required\", \"input-non-negative-number-required\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n         registerRegexpValidator(e,/^\\d+$/,\"Not a non-negative number\");\n     });\n \n     Behaviour.specify(\"INPUT.positive-number\", \"input-positive-number\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n         registerRegexpValidator(e,/^(\\d*[1-9]\\d*|)$/,\"Not a positive integer\");\n     });\n \n     Behaviour.specify(\"INPUT.positive-number-required\", \"input-positive-number-required\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e', 'E', '.'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d269f262094de3f2d419f3083bec34d85195123a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDA3MDI4Mw==", "bodyText": "I forgot to add it. I feel so sorry.\nBy the way, is it a good idea to add '.' constraint for all input validator? Because some error message shows \"Not an integer\" and other shows \"Not a non-negative number\". The point is the difference between them is number and integer.\nI'm thinking that should I add the '.' constraint for the messages which contain 'integer', or change the messages which contain 'number' to 'integer'?", "url": "https://github.com/jenkinsci/jenkins/pull/5145#discussion_r560070283", "createdAt": "2021-01-19T10:25:22Z", "author": {"login": "benebsiny"}, "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -878,18 +878,48 @@ function rowvgStartEachRow(recursive,f) {\n     Behaviour.specify(\"INPUT.required\", \"input-required\", ++p, function(e) { registerRegexpValidator(e,/./,\"Field is required\"); });\n \n     // validate form values to be an integer\n-    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) { registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\"); });\n-    Behaviour.specify(\"INPUT.number-required\", \"input-number-required\", ++p, function(e) { registerRegexpValidator(e,/^\\-?(\\d+)$/,\"Not an integer\"); });\n+    Behaviour.specify(\"INPUT.number\", \"input-number\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n+        registerRegexpValidator(e,/^(\\d+|)$/,\"Not an integer\");\n+    });\n+\n+    Behaviour.specify(\"INPUT.number-required\", \"input-number-required\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n+        registerRegexpValidator(e,/^\\-?(\\d+)$/,\"Not an integer\");\n+    });\n \n     Behaviour.specify(\"INPUT.non-negative-number-required\", \"input-non-negative-number-required\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n         registerRegexpValidator(e,/^\\d+$/,\"Not a non-negative number\");\n     });\n \n     Behaviour.specify(\"INPUT.positive-number\", \"input-positive-number\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e' or 'E'\n+                event.preventDefault();\n+            }\n+        })\n         registerRegexpValidator(e,/^(\\d*[1-9]\\d*|)$/,\"Not a positive integer\");\n     });\n \n     Behaviour.specify(\"INPUT.positive-number-required\", \"input-positive-number-required\", ++p, function(e) {\n+        e.addEventListener('keypress', function (event) {\n+            if (event.which === 69 || event.which === 101) { // Prevent user input 'e', 'E', '.'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDA0Njg5Mg=="}, "originalCommit": {"oid": "d269f262094de3f2d419f3083bec34d85195123a"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 52, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}