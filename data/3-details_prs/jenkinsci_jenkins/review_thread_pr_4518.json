{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NjgyNDE2", "number": 4518, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yM1QwODo1MDoyNFrODiI5-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwMDowNjowMFrODoFVog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MTI0MDkwOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yM1QwODo1MDoyNFrOFtPhmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMDowMDoxNlrOGCT5Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NDYwMg==", "bodyText": "I can't see any reason for a permission check here, (and manage can't see this view anyway)", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r382984602", "createdAt": "2020-02-23T08:50:24Z", "author": {"login": "timja"}, "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "diffHunk": "@@ -28,7 +28,7 @@ l.header()\n l.side_panel {\n     l.tasks {\n         l.task(icon:\"icon-up icon-md\", href:rootURL+'/', title:_(\"Back to Dashboard\"))\n-        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"), permission:app.MANAGE, it:app)\n+        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c21870ee829d364bf3d5cc3f424a0c993426870"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUyNjI2NQ==", "bodyText": "The only issue is that it will become available to any user, and hence it will pollute UI for non-admin users", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385526265", "createdAt": "2020-02-28T06:27:35Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "diffHunk": "@@ -28,7 +28,7 @@ l.header()\n l.side_panel {\n     l.tasks {\n         l.task(icon:\"icon-up icon-md\", href:rootURL+'/', title:_(\"Back to Dashboard\"))\n-        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"), permission:app.MANAGE, it:app)\n+        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NDYwMg=="}, "originalCommit": {"oid": "9c21870ee829d364bf3d5cc3f424a0c993426870"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUzNzE0OQ==", "bodyText": "But non admin users can\u2019t get here, this is under plugin manager?", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385537149", "createdAt": "2020-02-28T07:05:49Z", "author": {"login": "timja"}, "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "diffHunk": "@@ -28,7 +28,7 @@ l.header()\n l.side_panel {\n     l.tasks {\n         l.task(icon:\"icon-up icon-md\", href:rootURL+'/', title:_(\"Back to Dashboard\"))\n-        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"), permission:app.MANAGE, it:app)\n+        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NDYwMg=="}, "originalCommit": {"oid": "9c21870ee829d364bf3d5cc3f424a0c993426870"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA3NjI1MA==", "bodyText": "This is a view fragment which won't be accessible thanks to JEP-220.", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r405076250", "createdAt": "2020-04-07T20:00:16Z", "author": {"login": "jvz"}, "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "diffHunk": "@@ -28,7 +28,7 @@ l.header()\n l.side_panel {\n     l.tasks {\n         l.task(icon:\"icon-up icon-md\", href:rootURL+'/', title:_(\"Back to Dashboard\"))\n-        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"), permission:app.MANAGE, it:app)\n+        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NDYwMg=="}, "originalCommit": {"oid": "9c21870ee829d364bf3d5cc3f424a0c993426870"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NTEwMTEzOnYy", "diffSide": "LEFT", "path": "core/src/main/resources/lib/form/textarea.jelly", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQyMjo1NToyOFrOFty3kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwOToxNzowNFrOFwNIGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU2MzY2NQ==", "bodyText": "I think this one deserves an lts-candidate maybe?", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r383563665", "createdAt": "2020-02-24T22:55:28Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/lib/form/textarea.jelly", "diffHunk": "@@ -98,12 +98,12 @@ THE SOFTWARE.\n         <j:if test=\"${value != null &amp;&amp; !empty(value.toString()) &amp;&amp; (value.toString().codePointAt(0) == 10 || value.toString().codePointAt(0) == 13)}\"><j:whitespace>&#10;</j:whitespace></j:if>\n         <st:out value=\"${value}\" />\n       </textarea>\n+    <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n+      <j:mute>${customizedFields.add(name)}</j:mute>\n+    </j:if>\n+    <!-- resize handle -->\n+    <div class=\"textarea-handle\"/>\n   </f:possibleReadOnlyField>\n-  <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n-    <j:mute>${customizedFields.add(name)}</j:mute>\n-  </j:if>\n-  <!-- resize handle -->\n-  <div class=\"textarea-handle\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUyNjM5NA==", "bodyText": "Separate PR/bug please, then", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385526394", "createdAt": "2020-02-28T06:28:13Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/resources/lib/form/textarea.jelly", "diffHunk": "@@ -98,12 +98,12 @@ THE SOFTWARE.\n         <j:if test=\"${value != null &amp;&amp; !empty(value.toString()) &amp;&amp; (value.toString().codePointAt(0) == 10 || value.toString().codePointAt(0) == 13)}\"><j:whitespace>&#10;</j:whitespace></j:if>\n         <st:out value=\"${value}\" />\n       </textarea>\n+    <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n+      <j:mute>${customizedFields.add(name)}</j:mute>\n+    </j:if>\n+    <!-- resize handle -->\n+    <div class=\"textarea-handle\"/>\n   </f:possibleReadOnlyField>\n-  <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n-    <j:mute>${customizedFields.add(name)}</j:mute>\n-  </j:if>\n-  <!-- resize handle -->\n-  <div class=\"textarea-handle\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU2MzY2NQ=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0NDMwMA==", "bodyText": "it's a minor fix that looked especially bad here without the fix, can create another PR if needed but not sure if worth it.", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385644300", "createdAt": "2020-02-28T11:24:58Z", "author": {"login": "timja"}, "path": "core/src/main/resources/lib/form/textarea.jelly", "diffHunk": "@@ -98,12 +98,12 @@ THE SOFTWARE.\n         <j:if test=\"${value != null &amp;&amp; !empty(value.toString()) &amp;&amp; (value.toString().codePointAt(0) == 10 || value.toString().codePointAt(0) == 13)}\"><j:whitespace>&#10;</j:whitespace></j:if>\n         <st:out value=\"${value}\" />\n       </textarea>\n+    <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n+      <j:mute>${customizedFields.add(name)}</j:mute>\n+    </j:if>\n+    <!-- resize handle -->\n+    <div class=\"textarea-handle\"/>\n   </f:possibleReadOnlyField>\n-  <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n-    <j:mute>${customizedFields.add(name)}</j:mute>\n-  </j:if>\n-  <!-- resize handle -->\n-  <div class=\"textarea-handle\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU2MzY2NQ=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA3OTAzNA==", "bodyText": "Just look at any ExtendedRead job configuration with a shell build step.", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r386079034", "createdAt": "2020-03-01T05:40:01Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/lib/form/textarea.jelly", "diffHunk": "@@ -98,12 +98,12 @@ THE SOFTWARE.\n         <j:if test=\"${value != null &amp;&amp; !empty(value.toString()) &amp;&amp; (value.toString().codePointAt(0) == 10 || value.toString().codePointAt(0) == 13)}\"><j:whitespace>&#10;</j:whitespace></j:if>\n         <st:out value=\"${value}\" />\n       </textarea>\n+    <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n+      <j:mute>${customizedFields.add(name)}</j:mute>\n+    </j:if>\n+    <!-- resize handle -->\n+    <div class=\"textarea-handle\"/>\n   </f:possibleReadOnlyField>\n-  <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n-    <j:mute>${customizedFields.add(name)}</j:mute>\n-  </j:if>\n-  <!-- resize handle -->\n-  <div class=\"textarea-handle\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU2MzY2NQ=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5MTAzMg==", "bodyText": "#4536", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r386091032", "createdAt": "2020-03-01T09:17:04Z", "author": {"login": "timja"}, "path": "core/src/main/resources/lib/form/textarea.jelly", "diffHunk": "@@ -98,12 +98,12 @@ THE SOFTWARE.\n         <j:if test=\"${value != null &amp;&amp; !empty(value.toString()) &amp;&amp; (value.toString().codePointAt(0) == 10 || value.toString().codePointAt(0) == 13)}\"><j:whitespace>&#10;</j:whitespace></j:if>\n         <st:out value=\"${value}\" />\n       </textarea>\n+    <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n+      <j:mute>${customizedFields.add(name)}</j:mute>\n+    </j:if>\n+    <!-- resize handle -->\n+    <div class=\"textarea-handle\"/>\n   </f:possibleReadOnlyField>\n-  <j:if test=\"${customizedFields != null and attrs.field != null and value != default}\">\n-    <j:mute>${customizedFields.add(name)}</j:mute>\n-  </j:if>\n-  <!-- resize handle -->\n-  <div class=\"textarea-handle\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU2MzY2NQ=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDUzMDQ0OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMDoxOTozMlrOFvMlhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMTo1OToyMFrOFvPkPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMzYwNw==", "bodyText": "Why not allowing the previous version? Do you think it's a risk?", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385033607", "createdAt": "2020-02-27T10:19:32Z", "author": {"login": "varyvol"}, "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "diffHunk": "@@ -66,15 +74,18 @@ THE SOFTWARE.\n                 <th width=\"32\" tooltip=\"${%Uncheck to disable the plugin}\">${%Enabled}</th>\n                 <th initialSortDir=\"down\">${%Name}</th>\n                 <th width=\"1\">${%Version}</th>\n-                <th width=\"1\">${%Previously installed version}</th>\n-                <th width=\"1\">${%Uninstall}</th>\n+                <l:isAdmin>\n+                  <th width=\"1\">${%Previously installed version}</th>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA2MjY5MA==", "bodyText": "it's just a button that says 'Downgrade to previous version', not useful to read only users", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385062690", "createdAt": "2020-02-27T11:14:55Z", "author": {"login": "timja"}, "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "diffHunk": "@@ -66,15 +74,18 @@ THE SOFTWARE.\n                 <th width=\"32\" tooltip=\"${%Uncheck to disable the plugin}\">${%Enabled}</th>\n                 <th initialSortDir=\"down\">${%Name}</th>\n                 <th width=\"1\">${%Version}</th>\n-                <th width=\"1\">${%Previously installed version}</th>\n-                <th width=\"1\">${%Uninstall}</th>\n+                <l:isAdmin>\n+                  <th width=\"1\">${%Previously installed version}</th>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMzYwNw=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA2Mzk3Mw==", "bodyText": "The only UI element shown there is the \"Downgrade\" button, and the permission doesn't allow taking action, so there wouldn't be a UI.\nAn argument can be made to show it in text, but the question is how useful that would be \u2013 it's not really part of configuration, after all.", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385063973", "createdAt": "2020-02-27T11:17:33Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "diffHunk": "@@ -66,15 +74,18 @@ THE SOFTWARE.\n                 <th width=\"32\" tooltip=\"${%Uncheck to disable the plugin}\">${%Enabled}</th>\n                 <th initialSortDir=\"down\">${%Name}</th>\n                 <th width=\"1\">${%Version}</th>\n-                <th width=\"1\">${%Previously installed version}</th>\n-                <th width=\"1\">${%Uninstall}</th>\n+                <l:isAdmin>\n+                  <th width=\"1\">${%Previously installed version}</th>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMzYwNw=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA4MjQzMQ==", "bodyText": "I had in my mind this was only text. Fair enough!", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385082431", "createdAt": "2020-02-27T11:59:20Z", "author": {"login": "varyvol"}, "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "diffHunk": "@@ -66,15 +74,18 @@ THE SOFTWARE.\n                 <th width=\"32\" tooltip=\"${%Uncheck to disable the plugin}\">${%Enabled}</th>\n                 <th initialSortDir=\"down\">${%Name}</th>\n                 <th width=\"1\">${%Version}</th>\n-                <th width=\"1\">${%Previously installed version}</th>\n-                <th width=\"1\">${%Uninstall}</th>\n+                <l:isAdmin>\n+                  <th width=\"1\">${%Previously installed version}</th>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMzYwNw=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDU2OTAxOnYy", "diffSide": "RIGHT", "path": "war/src/main/less/base/style.less", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMDozMDoxMVrOFvM84g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMToxNDozM1rOFvOWiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzOTU4Ng==", "bodyText": "I'm curious: why the change to the less? Something functionality related or you just considered it's a better place?", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385039586", "createdAt": "2020-02-27T10:30:11Z", "author": {"login": "varyvol"}, "path": "war/src/main/less/base/style.less", "diffHunk": "@@ -392,6 +392,11 @@ pre.console {\n   font-size: 12pt;\n }\n \n+.jenkins-not-applicable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA2MjUzNg==", "bodyText": "It didn't seem to work without moving it. Possibly to do with the dev-mode setup locally but it wasn't getting loaded", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385062536", "createdAt": "2020-02-27T11:14:33Z", "author": {"login": "timja"}, "path": "war/src/main/less/base/style.less", "diffHunk": "@@ -392,6 +392,11 @@ pre.console {\n   font-size: 12pt;\n }\n \n+.jenkins-not-applicable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzOTU4Ng=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NzY4MTgyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/PluginManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNjoyNDo1NlrOFvqnpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwNzowNDo1NFrOFvrTgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUyNTY2OA==", "bodyText": "Not sure about that. It is not a read-only operation", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385525668", "createdAt": "2020-02-28T06:24:56Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -1703,7 +1703,7 @@ public HttpResponse doUploadPlugin(StaplerRequest req) throws IOException, Servl\n \n     @Restricted(NoExternalUse.class)\n     @RequirePOST public HttpResponse doCheckUpdatesServer() throws IOException {\n-        Jenkins.get().checkPermission(Jenkins.ADMINISTER);\n+        Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUzNjg5OQ==", "bodyText": "This was called out in the previous PR and dB was fine with it, it\u2019s updating a cache, not updating configuration or installing something", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385536899", "createdAt": "2020-02-28T07:04:54Z", "author": {"login": "timja"}, "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -1703,7 +1703,7 @@ public HttpResponse doUploadPlugin(StaplerRequest req) throws IOException, Servl\n \n     @Restricted(NoExternalUse.class)\n     @RequirePOST public HttpResponse doCheckUpdatesServer() throws IOException {\n-        Jenkins.get().checkPermission(Jenkins.ADMINISTER);\n+        Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTUyNTY2OA=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4OTA2NDA2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/PluginManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNDo1MTo0NlrOFv3iSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxNDo1NDoyNVrOFv3oFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNzI5MA==", "bodyText": "Pretty sure this is only used during the setup wizard, so doesn't need the permission check changed.", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385737290", "createdAt": "2020-02-28T14:51:46Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -1347,7 +1347,7 @@ public void stop() {\n      */\n     @Restricted(DoNotUse.class) // WebOnly\n     public HttpResponse doPlugins() {\n-        Jenkins.get().checkPermission(Jenkins.ADMINISTER);\n+        Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczODc3NQ==", "bodyText": "I think so too\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);\n          \n          \n            \n                    Jenkins.get().checkPermission(Jenkins.ADMINISTER);", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385738775", "createdAt": "2020-02-28T14:54:25Z", "author": {"login": "timja"}, "path": "core/src/main/java/hudson/PluginManager.java", "diffHunk": "@@ -1347,7 +1347,7 @@ public void stop() {\n      */\n     @Restricted(DoNotUse.class) // WebOnly\n     public HttpResponse doPlugins() {\n-        Jenkins.get().checkPermission(Jenkins.ADMINISTER);\n+        Jenkins.get().checkPermission(Jenkins.SYSTEM_READ);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNzI5MA=="}, "originalCommit": {"oid": "7b6bb8fe1094f1e3e8c81ce84c9ab4ddc46336dc"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4OTc2ODk1OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/PluginManager/_api.jelly", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxODoxNTozN1rOFv-OEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxODoxNTozN1rOFv-OEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg0NjgwMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              <p>Permission required: <code>Jenkins.ADMINISTER</code></p>\n          \n          \n            \n              <p>Permission required: <code>Overall/Administer</code></p>", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385846800", "createdAt": "2020-02-28T18:15:37Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/PluginManager/_api.jelly", "diffHunk": "@@ -25,11 +25,13 @@ THE SOFTWARE.\n <?jelly escape-by-default='true'?>\n <j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"/lib/layout\" xmlns:t=\"/lib/hudson\" xmlns:f=\"/lib/form\" xmlns:i=\"jelly:fmt\">\n   <h2>Uploading a plugin</h2>\n+  <p>Permission required: <code>Jenkins.ADMINISTER</code></p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf1a6de01847a92ce629d02672fad466184f2f73"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4OTc2OTE2OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/PluginManager/_api.jelly", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxODoxNTo0M1rOFv-OOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxODoxNTo0M1rOFv-OOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg0Njg0MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              <p>Permission required: <code>Jenkins.ADMINISTER</code></p>\n          \n          \n            \n              <p>Permission required: <code>Overall/Administer</code></p>", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r385846841", "createdAt": "2020-02-28T18:15:43Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/PluginManager/_api.jelly", "diffHunk": "@@ -25,11 +25,13 @@ THE SOFTWARE.\n <?jelly escape-by-default='true'?>\n <j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"/lib/layout\" xmlns:t=\"/lib/hudson\" xmlns:f=\"/lib/form\" xmlns:i=\"jelly:fmt\">\n   <h2>Uploading a plugin</h2>\n+  <p>Permission required: <code>Jenkins.ADMINISTER</code></p>\n   <p>\n     You can upload a plugin from HTTP client by POST to <a href=\"../uploadPlugin\">this URL</a> with <a href=\"http://tools.ietf.org/html/rfc2388\">multipart/form-data</a> MIME type.\n   </p>\n \n   <h2>Making sure all the needed plugins are installed</h2>\n+  <p>Permission required: <code>Jenkins.ADMINISTER</code></p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf1a6de01847a92ce629d02672fad466184f2f73"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzU3MDkwOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwMDowNjowMFrOF2cMOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQwMDowNjowMFrOF2cMOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYyOTMwNg==", "bodyText": "This link will be displayed, but fail.\n(It would make sense for updateCenter to be made available with this change, so that SystemReaders can see the status of plugin installation jobs. Otherwise they get shaded cells but have no access to details.)", "url": "https://github.com/jenkinsci/jenkins/pull/4518#discussion_r392629306", "createdAt": "2020-03-15T00:06:00Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/PluginManager/sidepanel.groovy", "diffHunk": "@@ -28,7 +28,7 @@ l.header()\n l.side_panel {\n     l.tasks {\n         l.task(icon:\"icon-up icon-md\", href:rootURL+'/', title:_(\"Back to Dashboard\"))\n-        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"), permission:app.MANAGE, it:app)\n+        l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"))\n         if (!app.updateCenter.jobs.isEmpty()) {\n             l.task(icon:\"icon-plugin icon-md\", href:\"${rootURL}/updateCenter/\", title:_(\"Update Center\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "007a47cf718127b872447d180b9bc14036e2986c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 823, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}