{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNTk2NDEw", "number": 4488, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMzoxNDoyOFrODezDBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMDo1OTozM1rODgWWKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNjIwMjI5OnYy", "diffSide": "LEFT", "path": "core/src/main/java/hudson/model/UpdateSite.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMzoxNDoyOFrOFoIa7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozNjoyN1rOFoLTIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYyNTMyNA==", "bodyText": "Since this becomes part of the public API could you document it?", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r377625324", "createdAt": "2020-02-11T13:14:28Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -180,7 +180,6 @@ public long getDataTimestamp() {\n         }\n     }\n \n-    @Restricted(NoExternalUse.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d2346e348022390ca8a498319cef98f7acb85b6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3MjQ4Mg==", "bodyText": "addressed in 9d642eb", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r377672482", "createdAt": "2020-02-11T14:36:27Z", "author": {"login": "jtnord"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -180,7 +180,6 @@ public long getDataTimestamp() {\n         }\n     }\n \n-    @Restricted(NoExternalUse.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYyNTMyNA=="}, "originalCommit": {"oid": "7d2346e348022390ca8a498319cef98f7acb85b6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNjUwNDgwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/UpdateSite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozNTo0NFrOFoLRTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNDozNTo0NFrOFoLRTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY3MjAxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public @Nonnull FormValidation updateDirectlyNow(boolean signatureCheck) throws IOException {\n          \n          \n            \n                /**\n          \n          \n            \n                 * Forces an update the data file from the configured URL, irrespective of the last time the data was retrieved.\n          \n          \n            \n                 * @param signatureCheck whether to enforce the signature (may be off only for testing!)\n          \n          \n            \n                 * @return A {@code FormValidation} indicating the if the update metadata was successfully downloaded from the configured update site\n          \n          \n            \n                 * @since TODO\n          \n          \n            \n                 * @throws IOException if there was an error downloading or saving the file.\n          \n          \n            \n                 */\n          \n          \n            \n                public @Nonnull FormValidation updateDirectlyNow(boolean signatureCheck) throws IOException {", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r377672012", "createdAt": "2020-02-11T14:35:44Z", "author": {"login": "jtnord"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -180,7 +180,6 @@ public long getDataTimestamp() {\n         }\n     }\n \n-    @Restricted(NoExternalUse.class)\n     public @Nonnull FormValidation updateDirectlyNow(boolean signatureCheck) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d2346e348022390ca8a498319cef98f7acb85b6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzODQ4MzIxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/UpdateSite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwMDo1NjowM1rOFoehcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwMDo1NjowM1rOFoehcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzk4NzQ0Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Forces an update the data file from the configured URL, irrespective of the last time the data was retrieved.\n          \n          \n            \n                 * Forces an update of the data file from the configured URL, irrespective of the last time the data was retrieved.", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r377987443", "createdAt": "2020-02-12T00:56:03Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -180,7 +180,13 @@ public long getDataTimestamp() {\n         }\n     }\n \n-    @Restricted(NoExternalUse.class)\n+    /**\n+     * Forces an update the data file from the configured URL, irrespective of the last time the data was retrieved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d642ebd8c08d8642ef3a433f1a4035d01a1d4f7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MjQ3MTQ0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/UpdateSite.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMDo1OTozM1rOFqgaZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMToxOTozNVrOFqg-rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDExNTU1Ng==", "bodyText": "Bonus points for restricting the external use", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r380115556", "createdAt": "2020-02-17T10:59:33Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -160,14 +160,27 @@ public long getDataTimestamp() {\n         return dataTimestamp;\n     }\n \n+    /**\n+     * Update the data file from the given URL if the file\n+     * does not exist, or is otherwise due for update.\n+     * Accepted formats are JSONP or HTML with {@code postMessage}, not raw JSON.\n+     * @return null if no updates are necessary, or the future result\n+     * @since TODO\n+     */\n+    public @CheckForNull Future<FormValidation> updateDirectly() {\n+        return updateDirectly(DownloadService.signatureCheck);\n+    }\n+\n     /**\n      * Update the data file from the given URL if the file\n      * does not exist, or is otherwise due for update.\n      * Accepted formats are JSONP or HTML with {@code postMessage}, not raw JSON.\n      * @param signatureCheck whether to enforce the signature (may be off only for testing!)\n      * @return null if no updates are necessary, or the future result\n      * @since 1.502\n+     * @deprecated use {@linkplain #updateDirectly()}\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24e42832f26aadccadbd8cf90cc70d04b61186f8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDExNzE3NA==", "bodyText": "that would break source compatibility, and that could break some (at least internal) workflows, as well as having the potential to force disabling the Restrictions check a for another year - which was the whole point of this PR to begin with.\nLet's just at least deprecate it for at least a few LTS version first (we could/should start looking at doing a sweep of all deprecated API and look at restrict them based on how long they have been deprecated).", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r380117174", "createdAt": "2020-02-17T11:02:50Z", "author": {"login": "jtnord"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -160,14 +160,27 @@ public long getDataTimestamp() {\n         return dataTimestamp;\n     }\n \n+    /**\n+     * Update the data file from the given URL if the file\n+     * does not exist, or is otherwise due for update.\n+     * Accepted formats are JSONP or HTML with {@code postMessage}, not raw JSON.\n+     * @return null if no updates are necessary, or the future result\n+     * @since TODO\n+     */\n+    public @CheckForNull Future<FormValidation> updateDirectly() {\n+        return updateDirectly(DownloadService.signatureCheck);\n+    }\n+\n     /**\n      * Update the data file from the given URL if the file\n      * does not exist, or is otherwise due for update.\n      * Accepted formats are JSONP or HTML with {@code postMessage}, not raw JSON.\n      * @param signatureCheck whether to enforce the signature (may be off only for testing!)\n      * @return null if no updates are necessary, or the future result\n      * @since 1.502\n+     * @deprecated use {@linkplain #updateDirectly()}\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDExNTU1Ng=="}, "originalCommit": {"oid": "24e42832f26aadccadbd8cf90cc70d04b61186f8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDEyNDg0Ng==", "bodyText": "Fine with me. We break compatibility too often in recent releases", "url": "https://github.com/jenkinsci/jenkins/pull/4488#discussion_r380124846", "createdAt": "2020-02-17T11:19:35Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -160,14 +160,27 @@ public long getDataTimestamp() {\n         return dataTimestamp;\n     }\n \n+    /**\n+     * Update the data file from the given URL if the file\n+     * does not exist, or is otherwise due for update.\n+     * Accepted formats are JSONP or HTML with {@code postMessage}, not raw JSON.\n+     * @return null if no updates are necessary, or the future result\n+     * @since TODO\n+     */\n+    public @CheckForNull Future<FormValidation> updateDirectly() {\n+        return updateDirectly(DownloadService.signatureCheck);\n+    }\n+\n     /**\n      * Update the data file from the given URL if the file\n      * does not exist, or is otherwise due for update.\n      * Accepted formats are JSONP or HTML with {@code postMessage}, not raw JSON.\n      * @param signatureCheck whether to enforce the signature (may be off only for testing!)\n      * @return null if no updates are necessary, or the future result\n      * @since 1.502\n+     * @deprecated use {@linkplain #updateDirectly()}\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDExNTU1Ng=="}, "originalCommit": {"oid": "24e42832f26aadccadbd8cf90cc70d04b61186f8"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 773, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}