{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MzU5NzM5", "number": 4450, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxMzo0ODo0M1rODaLN5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MDozMVrODcjj3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NzczMzQ4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxMzo0ODo0M1rOFg-swg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwODoyMjo0NVrOFhWePg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEyNjAxOA==", "bodyText": "\"... all the system configuration ...\", to make sure this does not involve jobs", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370126018", "createdAt": "2020-01-23T13:48:43Z", "author": {"login": "olivergondza"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUxNTUxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * By this milestone, all the configurations are loaded from file system\n          \n          \n            \n                 * By this milestone, all the system configurations are loaded from file system", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370515518", "createdAt": "2020-01-24T08:22:45Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEyNjAxOA=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NzczODY5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxMzo1MDowOFrOFg-v6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNjo1NzozMVrOFhFn1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEyNjgyNQ==", "bodyText": "OT but since we are touching this, do we want to make sure / document groovy init hooks are called here?", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370126825", "createdAt": "2020-01-23T13:50:08Z", "author": {"login": "olivergondza"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEyNzQxNw==", "bodyText": "Disregard, I see you did that. Great", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370127417", "createdAt": "2020-01-23T13:51:05Z", "author": {"login": "olivergondza"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEyNjgyNQ=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIzOTQ0Nw==", "bodyText": "Later we can introduce more Goorvy hooks if needed (e.g. before the jobs load)", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370239447", "createdAt": "2020-01-23T16:57:31Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDEyNjgyNQ=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Nzg3MTUwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDoyNTozOFrOFg_-1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxMTo1MTo0MlrOFhbddg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE0NzAyOA==", "bodyText": "The wording here is a little confusing just in case any plugin is updated doesn't really state an example that would make it obvious to the reader", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370147028", "createdAt": "2020-01-23T14:25:38Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),\n \n     /**\n      * By this milestone, all jobs and their build records are loaded from disk.\n      */\n     JOB_LOADED(\"Loaded all jobs\"),\n \n+    /**\n+     * By this milestone, any job configuration is adapted or updated just in case any plugin is updated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUxNjUxMw==", "bodyText": "@res0nance what about this?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * By this milestone, any job configuration is adapted or updated just in case any plugin is updated\n          \n          \n            \n                 * By this milestone, any job configuration is adapted or updated just in case any plugin needs update former/old configurations or init scripts", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370516513", "createdAt": "2020-01-24T08:25:57Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),\n \n     /**\n      * By this milestone, all jobs and their build records are loaded from disk.\n      */\n     JOB_LOADED(\"Loaded all jobs\"),\n \n+    /**\n+     * By this milestone, any job configuration is adapted or updated just in case any plugin is updated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE0NzAyOA=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU5NzIzOA==", "bodyText": "Should be needs to update. Other than that, I think its a lot more clear why this milestone exists \ud83d\udc4d", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370597238", "createdAt": "2020-01-24T11:51:42Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),\n \n     /**\n      * By this milestone, all jobs and their build records are loaded from disk.\n      */\n     JOB_LOADED(\"Loaded all jobs\"),\n \n+    /**\n+     * By this milestone, any job configuration is adapted or updated just in case any plugin is updated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE0NzAyOA=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODI3MjkxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNjowOTowN1rOFhD6MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwODoyMjowNVrOFhWdbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIxMTM3Ng==", "bodyText": "Maybe I'm missing something, where is it added to the lifecycle?", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370211376", "createdAt": "2020-01-23T16:09:07Z", "author": {"login": "MRamonLeon"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -43,7 +43,10 @@\n  *  <li>PLUGINS_PREPARED\n  *  <li>PLUGINS_STARTED\n  *  <li>EXTENSIONS_AUGMENTED\n+ *  <li>SYSTEM_CONFIG_LOADED</li>\n+ *  <li>SYSTEM_CONFIG_ADAPTED</li>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI3Mjg1Ng==", "bodyText": "I was wondering the same thing \ud83e\udd14", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370272856", "createdAt": "2020-01-23T18:06:25Z", "author": {"login": "jetersen"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -43,7 +43,10 @@\n  *  <li>PLUGINS_PREPARED\n  *  <li>PLUGINS_STARTED\n  *  <li>EXTENSIONS_AUGMENTED\n+ *  <li>SYSTEM_CONFIG_LOADED</li>\n+ *  <li>SYSTEM_CONFIG_ADAPTED</li>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIxMTM3Ng=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUxNTMwOQ==", "bodyText": "If I understand correctly the magic inside Jenkins, it's added in the same way as EXTENSION_AUGMENTED, which is never attained directly:\n\n  \n    \n      jenkins/core/src/main/java/jenkins/model/Jenkins.java\n    \n    \n        Lines 965 to 970\n      in\n      30dbf72\n    \n    \n    \n    \n\n        \n          \n           // initialization consists of ... \n        \n\n        \n          \n           executeReactor( is, \n        \n\n        \n          \n                   pluginManager.initTasks(is),    // loading and preparing plugins \n        \n\n        \n          \n                   loadTasks(),                    // load jobs \n        \n\n        \n          \n                   InitMilestone.ordering()        // forced ordering among key milestones \n        \n\n        \n          \n           ); \n        \n    \n  \n\n\n(thanks @jtnord for the hit)", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r370515309", "createdAt": "2020-01-24T08:22:05Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -43,7 +43,10 @@\n  *  <li>PLUGINS_PREPARED\n  *  <li>PLUGINS_STARTED\n  *  <li>EXTENSIONS_AUGMENTED\n+ *  <li>SYSTEM_CONFIG_LOADED</li>\n+ *  <li>SYSTEM_CONFIG_ADAPTED</li>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIxMTM3Ng=="}, "originalCommit": {"oid": "adfa0a9a7fd4fa800cee95f6b08ee3c847be7804"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTYyNTYxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzo1MzoxNFrOFkgkKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzo1MzoxNFrOFkgkKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYwMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 */\n          \n          \n            \n                 * @since TODO\n          \n          \n            \n                 */\n          \n      \n    \n    \n  \n\nHere and below", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r373826603", "createdAt": "2020-02-02T07:53:14Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the system configurations are loaded from file system\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTYyNjUzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/impl/GroovyInitScript.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzo1NTo1NlrOFkgkpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMTozNTo1N1rOFl0srQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjcyNg==", "bodyText": "It is a risk, because Groovy hooks may be used to adapt Job confis as well. So one must NOT rely on all jobs are adapted at this point, unless we redesign how Groovy hooks operate and introduce new calls there\nI suggest adding disclaimers to Javadoc and documenting this case.\nReverting this change could be also an option to discuss", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r373826726", "createdAt": "2020-02-02T07:55:56Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/init/impl/GroovyInitScript.java", "diffHunk": "@@ -36,7 +36,7 @@\n  * @author Kohsuke Kawaguchi\n  */\n public class GroovyInitScript {\n-    @Initializer(after=JOB_LOADED)\n+    @Initializer(after=JOB_CONFIG_ADAPTED)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk4MDcwNQ==", "bodyText": "Reverting this change could be also an option to discuss\n\n@oleg-nenashev do you mean reverting this concrete change or not adding this JOB_CONFIG_ADAPTED milestone?", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r373980705", "createdAt": "2020-02-03T08:53:15Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/impl/GroovyInitScript.java", "diffHunk": "@@ -36,7 +36,7 @@\n  * @author Kohsuke Kawaguchi\n  */\n public class GroovyInitScript {\n-    @Initializer(after=JOB_LOADED)\n+    @Initializer(after=JOB_CONFIG_ADAPTED)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjcyNg=="}, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE5MjQ3OQ==", "bodyText": "This concrete one", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r375192479", "createdAt": "2020-02-05T11:06:33Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/init/impl/GroovyInitScript.java", "diffHunk": "@@ -36,7 +36,7 @@\n  * @author Kohsuke Kawaguchi\n  */\n public class GroovyInitScript {\n-    @Initializer(after=JOB_LOADED)\n+    @Initializer(after=JOB_CONFIG_ADAPTED)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjcyNg=="}, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE5MzAyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Initializer(after=JOB_CONFIG_ADAPTED)\n          \n          \n            \n                @Initializer(after=JOB_LOADED)", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r375193022", "createdAt": "2020-02-05T11:07:50Z", "author": {"login": "timja"}, "path": "core/src/main/java/hudson/init/impl/GroovyInitScript.java", "diffHunk": "@@ -36,7 +36,7 @@\n  * @author Kohsuke Kawaguchi\n  */\n public class GroovyInitScript {\n-    @Initializer(after=JOB_LOADED)\n+    @Initializer(after=JOB_CONFIG_ADAPTED)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjcyNg=="}, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIwNTAzNw==", "bodyText": "Seeing it's risky, I agree", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r375205037", "createdAt": "2020-02-05T11:35:57Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/impl/GroovyInitScript.java", "diffHunk": "@@ -36,7 +36,7 @@\n  * @author Kohsuke Kawaguchi\n  */\n public class GroovyInitScript {\n-    @Initializer(after=JOB_LOADED)\n+    @Initializer(after=JOB_CONFIG_ADAPTED)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjcyNg=="}, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMjY5Mjk1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MDoxOVrOFkp5aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MDoxOVrOFkp5aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk3OTQ5Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 */\n          \n          \n            \n                 * @since TODO\n          \n          \n            \n                 */", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r373979496", "createdAt": "2020-02-03T08:50:19Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the system configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMjY5MzQwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/init/InitMilestone.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MDozMVrOFkp5sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MDozMVrOFkp5sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk3OTU2OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 */\n          \n          \n            \n                 * @since TODO\n          \n          \n            \n                 */", "url": "https://github.com/jenkinsci/jenkins/pull/4450#discussion_r373979569", "createdAt": "2020-02-03T08:50:31Z", "author": {"login": "fcojfernandez"}, "path": "core/src/main/java/hudson/init/InitMilestone.java", "diffHunk": "@@ -82,13 +85,29 @@\n      * By this milestone, all programmatically constructed extension point implementations\n      * should be added.\n      */\n-    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), // TODO nothing attains() this so when does it actually happen?\n+    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),\n+\n+    /**\n+     * By this milestone, all the system configurations are loaded from file system\n+     */\n+    SYSTEM_CONFIG_LOADED(\"System config loaded\"),\n+\n+    /**\n+     * By this milestone, the system configuration is adapted just in case any plugin (CasC might be an example) needs\n+     * to update configuration files\n+     */\n+    SYSTEM_CONFIG_ADAPTED(\"System config adapted\"),\n \n     /**\n      * By this milestone, all jobs and their build records are loaded from disk.\n      */\n     JOB_LOADED(\"Loaded all jobs\"),\n \n+    /**\n+     * By this milestone, any job configuration is adapted or updated just in case any plugin needs to update former/old configurations or init scripts\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b406701cd2df0bc19b8dfbb349116c1418621b8e"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 710, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}