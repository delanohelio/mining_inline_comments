{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3MjEzODU1", "number": 4681, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMTo0N1rOD0siHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMToyNzoyOFrOD0tIZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTgyMTc0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMTo0N1rOGJwclw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMTo0N1rOGJwclw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NDExOQ==", "bodyText": "No new classes in hudson.* please.\nPlease also use agent instead of slave (both package and class name).", "url": "https://github.com/jenkinsci/jenkins/pull/4681#discussion_r412884119", "createdAt": "2020-04-22T11:01:47Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package hudson.slaves;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85974f3ec5f22522861fe504e36dcd93e185c2dd"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTgyMzY4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMjoyMFrOGJwdzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMjoyMFrOGJwdzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NDQzMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @since XXX\n          \n          \n            \n                 * @since TODO\n          \n      \n    \n    \n  \n\nper \n  \n    \n      jenkins/update-since-todo.sh\n    \n    \n         Line 13\n      in\n      3b85c0a\n    \n    \n    \n    \n\n        \n          \n           for todo in $( git grep --line-number '@since TODO' | grep -v \"$me\" )", "url": "https://github.com/jenkinsci/jenkins/pull/4681#discussion_r412884430", "createdAt": "2020-04-22T11:02:20Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package hudson.slaves;\n+\n+import hudson.FilePath;\n+import hudson.remoting.Channel;\n+import hudson.remoting.VirtualChannel;\n+import jenkins.model.Jenkins;\n+\n+public final class SlaveComputerUtil {\n+    private SlaveComputerUtil() {}\n+    /**\n+     * Obtains a {@link VirtualChannel} that allows some computation to be performed on the master.\n+     * This method can be called from any thread on the master, or from agent (more precisely,\n+     * it only works from the remoting request-handling thread in agents, which means if you've started\n+     * separate thread on agents, that'll fail.)\n+     *\n+     * @return null if the calling thread doesn't have any trace of where its master is.\n+     * @since XXX", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85974f3ec5f22522861fe504e36dcd93e185c2dd"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTgyODI2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMzozNFrOGJwgpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowMzozNFrOGJwgpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NTE1Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (Jenkins.getInstanceOrNull()!=null) // check if calling thread is on master or on slave\n          \n          \n            \n                        return FilePath.localChannel;\n          \n          \n            \n            \n          \n          \n            \n                    // if this method is called from within the agent computation thread, this should work\n          \n          \n            \n                    Channel c = Channel.current();\n          \n          \n            \n                    if (c!=null && Boolean.TRUE.equals(c.getProperty(\"slave\")))\n          \n          \n            \n                        return c;\n          \n          \n            \n                    if (Jenkins.getInstanceOrNull() != null) { // check if calling thread is on master or on slave\n          \n          \n            \n                        return FilePath.localChannel;\n          \n          \n            \n                    }\n          \n          \n            \n                    // if this method is called from within the agent computation thread, this should work\n          \n          \n            \n                    Channel c = Channel.current();\n          \n          \n            \n                    if (c != null && Boolean.TRUE.equals(c.getProperty(\"slave\"))) {\n          \n          \n            \n                        return c;\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nFix the code formatting if you touch it.", "url": "https://github.com/jenkinsci/jenkins/pull/4681#discussion_r412885156", "createdAt": "2020-04-22T11:03:34Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package hudson.slaves;\n+\n+import hudson.FilePath;\n+import hudson.remoting.Channel;\n+import hudson.remoting.VirtualChannel;\n+import jenkins.model.Jenkins;\n+\n+public final class SlaveComputerUtil {\n+    private SlaveComputerUtil() {}\n+    /**\n+     * Obtains a {@link VirtualChannel} that allows some computation to be performed on the master.\n+     * This method can be called from any thread on the master, or from agent (more precisely,\n+     * it only works from the remoting request-handling thread in agents, which means if you've started\n+     * separate thread on agents, that'll fail.)\n+     *\n+     * @return null if the calling thread doesn't have any trace of where its master is.\n+     * @since XXX\n+     */\n+    public static VirtualChannel getChannelToMaster() {\n+        if (Jenkins.getInstanceOrNull()!=null) // check if calling thread is on master or on slave\n+            return FilePath.localChannel;\n+\n+        // if this method is called from within the agent computation thread, this should work\n+        Channel c = Channel.current();\n+        if (c!=null && Boolean.TRUE.equals(c.getProperty(\"slave\")))\n+            return c;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85974f3ec5f22522861fe504e36dcd93e185c2dd"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTgzMjAxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowNDoyN1rOGJwixA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMTowNDoyN1rOGJwixA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4NTcwMA==", "bodyText": "Also lacks license header.", "url": "https://github.com/jenkinsci/jenkins/pull/4681#discussion_r412885700", "createdAt": "2020-04-22T11:04:27Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package hudson.slaves;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85974f3ec5f22522861fe504e36dcd93e185c2dd"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTkxOTczOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMToyNzoyOFrOGJxWyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMToyNzoyOFrOGJxWyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg5OTAxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static VirtualChannel getChannelToMaster() {\n          \n          \n            \n                @CheckForNull\n          \n          \n            \n                public static VirtualChannel getChannelToMaster() {", "url": "https://github.com/jenkinsci/jenkins/pull/4681#discussion_r412899018", "createdAt": "2020-04-22T11:27:28Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/slaves/SlaveComputerUtil.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package hudson.slaves;\n+\n+import hudson.FilePath;\n+import hudson.remoting.Channel;\n+import hudson.remoting.VirtualChannel;\n+import jenkins.model.Jenkins;\n+\n+public final class SlaveComputerUtil {\n+    private SlaveComputerUtil() {}\n+    /**\n+     * Obtains a {@link VirtualChannel} that allows some computation to be performed on the master.\n+     * This method can be called from any thread on the master, or from agent (more precisely,\n+     * it only works from the remoting request-handling thread in agents, which means if you've started\n+     * separate thread on agents, that'll fail.)\n+     *\n+     * @return null if the calling thread doesn't have any trace of where its master is.\n+     * @since XXX\n+     */\n+    public static VirtualChannel getChannelToMaster() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85974f3ec5f22522861fe504e36dcd93e185c2dd"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 499, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}