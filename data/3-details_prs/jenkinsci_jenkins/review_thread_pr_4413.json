{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4ODE1MTE3", "number": 4413, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyMTozNVrODVkSgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyNzowNlrODVkVKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTQxMjQ5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/UpdateSite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyMTozNVrOFZ3ZQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyMTozNVrOFZ3ZQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY2NjMwNw==", "bodyText": "INFO? Really? Is this so notable?", "url": "https://github.com/jenkinsci/jenkins/pull/4413#discussion_r362666307", "createdAt": "2020-01-02T23:21:35Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -315,14 +315,24 @@ public Data getData() {\n         return data;\n     }\n \n+    /**\n+     * Whether {@link #getData} might be blocking.\n+     */\n+    boolean hasUnparsedData() {\n+        return data == null && getDataFile().exists();\n+    }\n+\n     /**\n      * Gets the raw update center JSON data.\n      */\n     public JSONObject getJSONObject() {\n         TextFile df = getDataFile();\n         if(df.exists()) {\n+            long start = System.nanoTime();\n             try {\n-                return JSONObject.fromObject(df.read());\n+                JSONObject o = JSONObject.fromObject(df.read());\n+                LOGGER.info(() -> String.format(\"Loaded and parsed %s in %.01fs\", df, (System.nanoTime() - start) / 1_000_000_000.0));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af7c4bece24216fe47f10e83e3488ffdbb5f1565"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTQxNjUxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/UpdateSite.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyNDo1OVrOFZ3b-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTozMDoxM1rOFaHntg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY2NzAwMw==", "bodyText": "It's not public but an explicit @Restricted might be a useful marker anyway. This looks like something we'd rather not expose unless there's a use case?", "url": "https://github.com/jenkinsci/jenkins/pull/4413#discussion_r362667003", "createdAt": "2020-01-02T23:24:59Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -315,14 +315,24 @@ public Data getData() {\n         return data;\n     }\n \n+    /**\n+     * Whether {@link #getData} might be blocking.\n+     */\n+    boolean hasUnparsedData() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af7c4bece24216fe47f10e83e3488ffdbb5f1565"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY5MjM1Mg==", "bodyText": "I would just find it more confusing to place @Restricted on a non-public member. Ideally it would be a compile-time error.", "url": "https://github.com/jenkinsci/jenkins/pull/4413#discussion_r362692352", "createdAt": "2020-01-03T02:27:40Z", "author": {"login": "jglick"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -315,14 +315,24 @@ public Data getData() {\n         return data;\n     }\n \n+    /**\n+     * Whether {@link #getData} might be blocking.\n+     */\n+    boolean hasUnparsedData() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY2NzAwMw=="}, "originalCommit": {"oid": "af7c4bece24216fe47f10e83e3488ffdbb5f1565"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzMjE1MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                boolean hasUnparsedData() {\n          \n          \n            \n                // Internal use only\n          \n          \n            \n                boolean hasUnparsedData() {\n          \n      \n    \n    \n  \n\nJust want to prevent unintentionally opening this up in the interest of \"cleanup\" or similar.", "url": "https://github.com/jenkinsci/jenkins/pull/4413#discussion_r362932150", "createdAt": "2020-01-03T19:30:13Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/model/UpdateSite.java", "diffHunk": "@@ -315,14 +315,24 @@ public Data getData() {\n         return data;\n     }\n \n+    /**\n+     * Whether {@link #getData} might be blocking.\n+     */\n+    boolean hasUnparsedData() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY2NzAwMw=="}, "originalCommit": {"oid": "af7c4bece24216fe47f10e83e3488ffdbb5f1565"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTQxOTMxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/UpdateCenter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyNzowNlrOFZ3duA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMzoyNzowNlrOFZ3duA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY2NzQ0OA==", "bodyText": "Note to self: I missed this change in the original version of the previous review.", "url": "https://github.com/jenkinsci/jenkins/pull/4413#discussion_r362667448", "createdAt": "2020-01-02T23:27:06Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/java/hudson/model/UpdateCenter.java", "diffHunk": "@@ -1061,7 +1087,12 @@ public String getDisplayName() {\n             return Messages.UpdateCenter_CoreUpdateMonitor_DisplayName();\n         }\n \n+        @Override\n         public boolean isActivated() {\n+            if (!Jenkins.get().getUpdateCenter().isSiteDataReady()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af7c4bece24216fe47f10e83e3488ffdbb5f1565"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 875, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}