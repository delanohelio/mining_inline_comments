{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NjE0NDYx", "number": 4527, "title": "[JENKINS-61197] Skip $WORKSPACE_TMP for root directories", "bodyText": "Amends #4414. Unlike #4526 but like jenkinsci/workflow-durable-task-step-plugin#129, this is a conservative fix.\nSee JENKINS-61197.\nProposed changelog entries\n\nAvoid a NullPointerException when starting a non-Pipeline build with a custom root directory set to a filesystem root (e.g., C:\\).\n\n\nMaintainer checklist\nBefore the changes are marked as ready-for-merge:\n\n There are at least 2 approvals for the pull request and no outstanding requests for change\n Conversations in the pull request are over OR it is explicit that a reviewer does not block the change\n Changelog entries in the PR title and/or Proposed changelog entries are correct\n Proper changelog labels are set so that the changelog can be generated automatically\n If the change needs additional upgrade steps from users, upgrade-guide-needed label is set and there is a Proposed upgrade guidelines section in the PR title. (example)\n If it would make sense to backport the change to LTS, a JIRA issue should exist and be labeled as lts-candidate", "createdAt": "2020-02-25T14:27:47Z", "url": "https://github.com/jenkinsci/jenkins/pull/4527", "merged": true, "mergeCommit": {"oid": "06712954c2950c64063be536cd5fa92493002935"}, "closed": true, "closedAt": "2020-02-29T12:31:24Z", "author": {"login": "jglick"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHy8GXgH2gAyMzc5NjE0NDYxOjU5YzBmYWE4OTQ0MTI1YThkYzNkMjM4YWQwNTk0NjZkMTFjMmZlZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcISz9JgFqTM2NTM5NTAzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2", "author": {"user": {"login": "jglick", "name": "Jesse Glick"}}, "url": "https://github.com/jenkinsci/jenkins/commit/59c0faa8944125a8dc3d238ad059466d11c2fed2", "committedDate": "2020-02-25T14:24:27Z", "message": "[JENKINS-61197] Skip $WORKSPACE_TMP for root directories"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTg1NDgy", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-364185482", "createdAt": "2020-02-25T14:32:40Z", "commit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDozMjo0MFrOFuISvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDozMjo0MFrOFuISvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNDY4Nw==", "bodyText": "Sort of incompatible for plugin callers, though in cases where this now returns null, it would previously have thrown a NullPointerException, so maybe this is no worse.", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383914687", "createdAt": "2020-02-25T14:32:40Z", "author": {"login": "jglick"}, "path": "core/src/main/java/hudson/slaves/WorkspaceList.java", "diffHunk": "@@ -302,6 +303,7 @@ public void release() {\n      * @return a sibling directory, for example {@code \u2026/something@tmp} for {@code \u2026/something}\n      * @since 1.652\n      */\n+    @CheckForNull", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTg4NDk2", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-364188496", "createdAt": "2020-02-25T14:36:30Z", "commit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTg4Nzc2", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-364188776", "createdAt": "2020-02-25T14:36:53Z", "commit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDozNjo1NFrOFuIcXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDozNzo1N1rOFuIe8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNzE1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. \n          \n          \n            \n                 * Gets a sibling file in the same directory.\n          \n          \n            \n                 * @param rel name of the file\n          \n          \n            \n                 * @return Sibling file with a specified file name.\n          \n          \n            \n                 *         {@code null} if no sibling file can be created, e.g. if the current file points to the filesystem root.\n          \n      \n    \n    \n  \n\nCopied from #4526", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383917150", "createdAt": "2020-02-25T14:36:54Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/FilePath.java", "diffHunk": "@@ -1323,8 +1323,10 @@ public String getName() {\n     /**\n      * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNzgwOA==", "bodyText": "Some Javadoc could be moved over from #4526", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383917808", "createdAt": "2020-02-25T14:37:57Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/slaves/WorkspaceList.java", "diffHunk": "@@ -302,6 +303,7 @@ public void release() {\n      * @return a sibling directory, for example {@code \u2026/something@tmp} for {@code \u2026/something}\n      * @since 1.652\n      */\n+    @CheckForNull", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNDY4Nw=="}, "originalCommit": {"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5364d80423d9744f5020fa7d0b2e2e2b0f178ebd", "author": {"user": {"login": "jglick", "name": "Jesse Glick"}}, "url": "https://github.com/jenkinsci/jenkins/commit/5364d80423d9744f5020fa7d0b2e2e2b0f178ebd", "committedDate": "2020-02-25T14:43:00Z", "message": "Documenting amended behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8337315cced961853eb0d9f24034290066783662", "author": {"user": {"login": "jglick", "name": "Jesse Glick"}}, "url": "https://github.com/jenkinsci/jenkins/commit/8337315cced961853eb0d9f24034290066783662", "committedDate": "2020-02-25T14:45:19Z", "message": "Javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTk4MTY0", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-364198164", "createdAt": "2020-02-25T14:48:11Z", "commit": {"oid": "8337315cced961853eb0d9f24034290066783662"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDo0ODoxMlrOFuI5lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxNDo0ODoxMlrOFuI5lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyNDYyOQ==", "bodyText": "#4527 (comment) is IMHO better but \ud83e\udd37\u200d\u2642 as long as we have user docs", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383924629", "createdAt": "2020-02-25T14:48:12Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/FilePath.java", "diffHunk": "@@ -1321,10 +1321,13 @@ public String getName() {\n     }\n \n     /**\n-     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. \n+     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory.\n+     * @return null if {@link #getParent} would have", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8337315cced961853eb0d9f24034290066783662"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MDIzOTgw", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-365023980", "createdAt": "2020-02-26T15:59:52Z", "commit": {"oid": "8337315cced961853eb0d9f24034290066783662"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MDQ0Mjgy", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-365044282", "createdAt": "2020-02-26T16:22:25Z", "commit": {"oid": "8337315cced961853eb0d9f24034290066783662"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1Mzk1MDMx", "url": "https://github.com/jenkinsci/jenkins/pull/4527#pullrequestreview-365395031", "createdAt": "2020-02-27T03:32:31Z", "commit": {"oid": "8337315cced961853eb0d9f24034290066783662"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1641, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}