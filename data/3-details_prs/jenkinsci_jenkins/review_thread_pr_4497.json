{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MTgyNjM5", "number": 4497, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwOToyOTozNFrODf066A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxODowNDo0MVrODgOeNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Njk5NDk2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/Label.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwOToyOTozNFrOFpwWQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwMzoyODo1OFrOFqXrFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMyODA2Nw==", "bodyText": "I don't think it improves performance that much, but you could stream the result from allItems() and collect it into a list, avoiding the for loop.", "url": "https://github.com/jenkinsci/jenkins/pull/4497#discussion_r379328067", "createdAt": "2020-02-14T09:29:34Z", "author": {"login": "varyvol"}, "path": "core/src/main/java/hudson/model/Label.java", "diffHunk": "@@ -389,9 +389,8 @@ private String toString(Collection<? extends ModelObject> model) {\n     @Exported\n     public List<AbstractProject> getTiedJobs() {\n         List<AbstractProject> r = new ArrayList<>();\n-        for (AbstractProject<?,?> p : Jenkins.get().allItems(AbstractProject.class)) {\n-            if(p instanceof TopLevelItem && this.equals(p.getAssignedLabel()))\n-                r.add(p);\n+        for (AbstractProject<?,?> p : Jenkins.get().allItems(AbstractProject.class, i -> i instanceof TopLevelItem && this.equals(i.getAssignedLabel()))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9b02650026ad155adc028788bbeb33c07603f0b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk3MjM3Mg==", "bodyText": "Rewrote this bit to use streams", "url": "https://github.com/jenkinsci/jenkins/pull/4497#discussion_r379972372", "createdAt": "2020-02-17T03:28:58Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/model/Label.java", "diffHunk": "@@ -389,9 +389,8 @@ private String toString(Collection<? extends ModelObject> model) {\n     @Exported\n     public List<AbstractProject> getTiedJobs() {\n         List<AbstractProject> r = new ArrayList<>();\n-        for (AbstractProject<?,?> p : Jenkins.get().allItems(AbstractProject.class)) {\n-            if(p instanceof TopLevelItem && this.equals(p.getAssignedLabel()))\n-                r.add(p);\n+        for (AbstractProject<?,?> p : Jenkins.get().allItems(AbstractProject.class, i -> i instanceof TopLevelItem && this.equals(i.getAssignedLabel()))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMyODA2Nw=="}, "originalCommit": {"oid": "b9b02650026ad155adc028788bbeb33c07603f0b"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTE4MTM1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/hudson/model/Computer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxODowNDo0MVrOFqUlHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwMTo0NTowNFrOFqWttg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMTY5Mw==", "bodyText": "IIRC it reverts the recent change by @LinuxSuRen", "url": "https://github.com/jenkinsci/jenkins/pull/4497#discussion_r379921693", "createdAt": "2020-02-16T18:04:41Z", "author": {"login": "oleg-nenashev"}, "path": "core/src/main/java/hudson/model/Computer.java", "diffHunk": "@@ -778,15 +778,15 @@ public String getUrl() {\n     @Exported\n     public Set<LabelAtom> getAssignedLabels() {\n         Node node = getNode();\n-        return (node != null) ? node.getAssignedLabels() : Collections.EMPTY_SET;\n+        return (node != null) ? node.getAssignedLabels() : Collections.emptySet();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9b02650026ad155adc028788bbeb33c07603f0b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk1NjY2Mg==", "bodyText": "Is that so? According to github's blame it seems that this hasn't been changed in 5 years. I changed this as I was in this bit of code and it was warning on my IDE", "url": "https://github.com/jenkinsci/jenkins/pull/4497#discussion_r379956662", "createdAt": "2020-02-17T01:45:04Z", "author": {"login": "res0nance"}, "path": "core/src/main/java/hudson/model/Computer.java", "diffHunk": "@@ -778,15 +778,15 @@ public String getUrl() {\n     @Exported\n     public Set<LabelAtom> getAssignedLabels() {\n         Node node = getNode();\n-        return (node != null) ? node.getAssignedLabels() : Collections.EMPTY_SET;\n+        return (node != null) ? node.getAssignedLabels() : Collections.emptySet();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMTY5Mw=="}, "originalCommit": {"oid": "b9b02650026ad155adc028788bbeb33c07603f0b"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 780, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}