{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4OTQzNTk5", "number": 5088, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQxMDo0MjoyNVrOE-YSWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNjo0NToyOFrOE-veoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzODQ1MDgxOnYy", "diffSide": "RIGHT", "path": ".github/workflows/publish-release-artifact.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQxMDo0MjoyNVrOH7iVww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQxMTowMDo0MlrOH7idww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE5MDY1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            on:\n          \n          \n            \n            on:\n          \n          \n            \n              workflow_dispatch:", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532190659", "createdAt": "2020-11-29T10:42:25Z", "author": {"login": "olblak"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE5MDc3OQ==", "bodyText": "If assets are not available from get.jenkins.io when the github action is trigger, this would allow us to force build", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532190779", "createdAt": "2020-11-29T10:43:43Z", "author": {"login": "olblak"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE5MDY1OQ=="}, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE5MjcwNw==", "bodyText": "IMHO the most important thing is to be able to force a job", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532192707", "createdAt": "2020-11-29T11:00:42Z", "author": {"login": "olblak"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE5MDY1OQ=="}, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjIzNzk4OnYy", "diffSide": "RIGHT", "path": ".github/workflows/publish-release-artifact.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNjo0Mjo0NlrOH8DxSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQyMToxNzo1NFrOH8OM2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjczODM3Ng==", "bodyText": "Recommend moving this sort of thing to separate *.sh files for legibility. (You have already run actions/checkout.)", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532738376", "createdAt": "2020-11-30T16:42:46Z", "author": {"login": "jglick"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:\n+  release:\n+    types: [published]\n+\n+jobs:\n+  determine-version:\n+    runs-on: ubuntu-latest\n+    outputs:\n+      project-version: ${{ steps.set-version.outputs.project-version }}\n+      is-lts: ${{ steps.set-version.outputs.is-lts }}\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Set version\n+        id: set-version\n+        run: |\n+          version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+\n+          dot_count=$(echo $version | sed 's/[^.]//g' | awk '{ print length }')\n+          if [ \"${dot_count}\" = '2' ]\n+          then\n+            is_lts=true\n+          else\n+            is_lts=false\n+          fi\n+\n+          echo \"Version is $version, is_lts: $is_lts\"\n+\n+          echo \"::set-output name=is-lts::${is_lts}\"\n+          echo \"::set-output name=project-version::$version\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5MDQ1NQ==", "bodyText": "this blocking? i.e. some more work would be required to test this...", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532890455", "createdAt": "2020-11-30T20:42:04Z", "author": {"login": "timja"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:\n+  release:\n+    types: [published]\n+\n+jobs:\n+  determine-version:\n+    runs-on: ubuntu-latest\n+    outputs:\n+      project-version: ${{ steps.set-version.outputs.project-version }}\n+      is-lts: ${{ steps.set-version.outputs.is-lts }}\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Set version\n+        id: set-version\n+        run: |\n+          version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+\n+          dot_count=$(echo $version | sed 's/[^.]//g' | awk '{ print length }')\n+          if [ \"${dot_count}\" = '2' ]\n+          then\n+            is_lts=true\n+          else\n+            is_lts=false\n+          fi\n+\n+          echo \"Version is $version, is_lts: $is_lts\"\n+\n+          echo \"::set-output name=is-lts::${is_lts}\"\n+          echo \"::set-output name=project-version::$version\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjczODM3Ng=="}, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjkwOTI3NQ==", "bodyText": "No, just a suggestion.", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532909275", "createdAt": "2020-11-30T21:17:54Z", "author": {"login": "jglick"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:\n+  release:\n+    types: [published]\n+\n+jobs:\n+  determine-version:\n+    runs-on: ubuntu-latest\n+    outputs:\n+      project-version: ${{ steps.set-version.outputs.project-version }}\n+      is-lts: ${{ steps.set-version.outputs.is-lts }}\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Set version\n+        id: set-version\n+        run: |\n+          version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+\n+          dot_count=$(echo $version | sed 's/[^.]//g' | awk '{ print length }')\n+          if [ \"${dot_count}\" = '2' ]\n+          then\n+            is_lts=true\n+          else\n+            is_lts=false\n+          fi\n+\n+          echo \"Version is $version, is_lts: $is_lts\"\n+\n+          echo \"::set-output name=is-lts::${is_lts}\"\n+          echo \"::set-output name=project-version::$version\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjczODM3Ng=="}, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjI1MDU3OnYy", "diffSide": "RIGHT", "path": ".github/workflows/publish-release-artifact.yml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNjo0NToyOFrOH8D5Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzowMTowOFrOH8EnYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc0MDM3MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      wget -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/jenkins.war\n          \n          \n            \n                      wget -O $FILE_NAME -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/jenkins.war\n          \n      \n    \n    \n  \n\nfor robustness/clarity?", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532740371", "createdAt": "2020-11-30T16:45:28Z", "author": {"login": "jglick"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:\n+  release:\n+    types: [published]\n+\n+jobs:\n+  determine-version:\n+    runs-on: ubuntu-latest\n+    outputs:\n+      project-version: ${{ steps.set-version.outputs.project-version }}\n+      is-lts: ${{ steps.set-version.outputs.is-lts }}\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Set version\n+        id: set-version\n+        run: |\n+          version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+\n+          dot_count=$(echo $version | sed 's/[^.]//g' | awk '{ print length }')\n+          if [ \"${dot_count}\" = '2' ]\n+          then\n+            is_lts=true\n+          else\n+            is_lts=false\n+          fi\n+\n+          echo \"Version is $version, is_lts: $is_lts\"\n+\n+          echo \"::set-output name=is-lts::${is_lts}\"\n+          echo \"::set-output name=project-version::$version\"\n+  war:\n+    runs-on: ubuntu-latest\n+    needs: determine-version\n+    steps:\n+      - name: Fetch war\n+        id: fetch-war\n+        run: |\n+          FILE_NAME=jenkins.war\n+          PROJECT_VERSION=${{ needs.determine-version.outputs.project-version }}\n+          IS_LTS=${{ needs.determine-version.outputs.is-lts }}\n+          echo $PROJECT_VERSION\n+          echo \"::set-output name=file-name::$FILE_NAME\"\n+\n+          REPO=war\n+          if [ ${IS_LTS} = 'true' ]\n+          then\n+            REPO=war-stable\n+          fi\n+\n+          echo $REPO\n+\n+          wget -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/jenkins.war", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc0NzIxOQ==", "bodyText": "wget will always use the file name, not sure it makes much different", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532747219", "createdAt": "2020-11-30T16:54:26Z", "author": {"login": "timja"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:\n+  release:\n+    types: [published]\n+\n+jobs:\n+  determine-version:\n+    runs-on: ubuntu-latest\n+    outputs:\n+      project-version: ${{ steps.set-version.outputs.project-version }}\n+      is-lts: ${{ steps.set-version.outputs.is-lts }}\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Set version\n+        id: set-version\n+        run: |\n+          version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+\n+          dot_count=$(echo $version | sed 's/[^.]//g' | awk '{ print length }')\n+          if [ \"${dot_count}\" = '2' ]\n+          then\n+            is_lts=true\n+          else\n+            is_lts=false\n+          fi\n+\n+          echo \"Version is $version, is_lts: $is_lts\"\n+\n+          echo \"::set-output name=is-lts::${is_lts}\"\n+          echo \"::set-output name=project-version::$version\"\n+  war:\n+    runs-on: ubuntu-latest\n+    needs: determine-version\n+    steps:\n+      - name: Fetch war\n+        id: fetch-war\n+        run: |\n+          FILE_NAME=jenkins.war\n+          PROJECT_VERSION=${{ needs.determine-version.outputs.project-version }}\n+          IS_LTS=${{ needs.determine-version.outputs.is-lts }}\n+          echo $PROJECT_VERSION\n+          echo \"::set-output name=file-name::$FILE_NAME\"\n+\n+          REPO=war\n+          if [ ${IS_LTS} = 'true' ]\n+          then\n+            REPO=war-stable\n+          fi\n+\n+          echo $REPO\n+\n+          wget -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/jenkins.war", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc0MDM3MQ=="}, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc1MjIyNg==", "bodyText": "Alternately,\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      wget -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/jenkins.war\n          \n          \n            \n                      wget -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/${FILE_NAME}", "url": "https://github.com/jenkinsci/jenkins/pull/5088#discussion_r532752226", "createdAt": "2020-11-30T17:01:08Z", "author": {"login": "jglick"}, "path": ".github/workflows/publish-release-artifact.yml", "diffHunk": "@@ -0,0 +1,205 @@\n+name: Publish artifact\n+\n+on:\n+  release:\n+    types: [published]\n+\n+jobs:\n+  determine-version:\n+    runs-on: ubuntu-latest\n+    outputs:\n+      project-version: ${{ steps.set-version.outputs.project-version }}\n+      is-lts: ${{ steps.set-version.outputs.is-lts }}\n+    steps:\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Set version\n+        id: set-version\n+        run: |\n+          version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+\n+          dot_count=$(echo $version | sed 's/[^.]//g' | awk '{ print length }')\n+          if [ \"${dot_count}\" = '2' ]\n+          then\n+            is_lts=true\n+          else\n+            is_lts=false\n+          fi\n+\n+          echo \"Version is $version, is_lts: $is_lts\"\n+\n+          echo \"::set-output name=is-lts::${is_lts}\"\n+          echo \"::set-output name=project-version::$version\"\n+  war:\n+    runs-on: ubuntu-latest\n+    needs: determine-version\n+    steps:\n+      - name: Fetch war\n+        id: fetch-war\n+        run: |\n+          FILE_NAME=jenkins.war\n+          PROJECT_VERSION=${{ needs.determine-version.outputs.project-version }}\n+          IS_LTS=${{ needs.determine-version.outputs.is-lts }}\n+          echo $PROJECT_VERSION\n+          echo \"::set-output name=file-name::$FILE_NAME\"\n+\n+          REPO=war\n+          if [ ${IS_LTS} = 'true' ]\n+          then\n+            REPO=war-stable\n+          fi\n+\n+          echo $REPO\n+\n+          wget -q https://get.jenkins.io/${REPO}/${PROJECT_VERSION}/jenkins.war", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc0MDM3MQ=="}, "originalCommit": {"oid": "44227828c03fc442d852fc8a4333283d5b07e7a6"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 131, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}