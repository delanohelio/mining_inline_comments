{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMTkzMDg3", "number": 5035, "title": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance", "bodyText": "The CaseInsensitive IdStrategy would always do a full string comparison even when all that was required was an equivalence check.\nupdated the javadoc to clarify performance implications for subclasses\nand fix the performance of the CaseInsensitive strategy\n\nSee JENKINS-64039.\n\nProposed changelog entries\n\nperformance enhancement to Authorisation strategies when the Authentication realm is Case Insensitive\n\n\nProposed upgrade guidelines\nN/A\nSubmitter checklist\n\n (If applicable) Jira issue is well described\n Changelog entries and upgrade guidelines are appropriate for the audience affected by the change (users or developer, depending on the change). Examples\n\nFill-in the Proposed changelog entries section only if there are breaking changes or other changes which may require extra steps from users during the upgrade\n\n\n Appropriate autotests or explanation to why this change has no tests\n For dependency updates: links to external changelogs and, if possible, full diffs\n\n\nDesired reviewers\n\nMaintainer checklist\nBefore the changes are marked as ready-for-merge:\n\n There are at least 2 approvals for the pull request and no outstanding requests for change\n Conversations in the pull request are over OR it is explicit that a reviewer does not block the change\n Changelog entries in the PR title and/or Proposed changelog entries are correct\n Proper changelog labels are set so that the changelog can be generated automatically\n If the change needs additional upgrade steps from users, upgrade-guide-needed label is set and there is a Proposed upgrade guidelines section in the PR title. (example)\n If it would make sense to backport the change to LTS, a Jira issue must exist, be a Bug or Improvement, and be labeled as lts-candidate to be considered (see query).", "createdAt": "2020-10-26T17:31:32Z", "url": "https://github.com/jenkinsci/jenkins/pull/5035", "merged": true, "mergeCommit": {"oid": "e7e7edc8aa45036c19fa913ce1700ede3f918904"}, "closed": true, "closedAt": "2020-10-29T02:36:36Z", "author": {"login": "jtnord"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWX4aOAFqTUxNzAxODcxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWcVQsAFqTUxNzIyODk2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDE4NzE1", "url": "https://github.com/jenkinsci/jenkins/pull/5035#pullrequestreview-517018715", "createdAt": "2020-10-26T17:33:00Z", "commit": {"oid": "62acccc49db16ac27d508d8d532f5f18c2504c78"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzozMzowMFrOHoa1Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzozMzowMFrOHoa1Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0NDY3OA==", "bodyText": "oops", "url": "https://github.com/jenkinsci/jenkins/pull/5035#discussion_r512144678", "createdAt": "2020-10-26T17:33:00Z", "author": {"login": "jtnord"}, "path": ".gitattributes", "diffHunk": "@@ -1,39 +0,0 @@\n-# Handle line endings automatically for files detected as text", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62acccc49db16ac27d508d8d532f5f18c2504c78"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "author": {"user": {"login": "jtnord", "name": "James Nord"}}, "url": "https://github.com/jenkinsci/jenkins/commit/2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "committedDate": "2020-10-26T17:34:24Z", "message": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance\n\nThe CaseInsensitive IdStrategy would always do a full string comparison\neven when all that was required was an equivallence check.\n\nupdated the javadoc to clarify performance implications for subclasses\nand fix the performance of the CaseInsensitive strategy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62acccc49db16ac27d508d8d532f5f18c2504c78", "author": {"user": {"login": "jtnord", "name": "James Nord"}}, "url": "https://github.com/jenkinsci/jenkins/commit/62acccc49db16ac27d508d8d532f5f18c2504c78", "committedDate": "2020-10-26T17:29:10Z", "message": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance\n\nThe CaseInsensitive IdStrategy would always do a full string comparison\neven when all that was required was an equivallence check.\n\nupdated the javadoc to clarify performance implications for subclasses\nand fix the performance of the CaseInsensitive strategy"}, "afterCommit": {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "author": {"user": {"login": "jtnord", "name": "James Nord"}}, "url": "https://github.com/jenkinsci/jenkins/commit/2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "committedDate": "2020-10-26T17:34:24Z", "message": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance\n\nThe CaseInsensitive IdStrategy would always do a full string comparison\neven when all that was required was an equivallence check.\n\nupdated the javadoc to clarify performance implications for subclasses\nand fix the performance of the CaseInsensitive strategy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDI0NDUy", "url": "https://github.com/jenkinsci/jenkins/pull/5035#pullrequestreview-517024452", "createdAt": "2020-10-26T17:39:35Z", "commit": {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzozOTozNVrOHobF-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzozOTozNVrOHobF-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0ODk4Ng==", "bodyText": "given in AUthZ we only care that a user has the role we do not want to go matching individual characters when there are many groups all with similar prefixes\nfor example consider DG_DEPT_ENGINEERING_JENKINS_ADMIN and  DG_DEPT_ENGINEERING_JENKINS_USER\na user with the later and a ACL granting a permission on the former we would have ended up checking the first 29 characters before deciding that the user did not match, when the string length would have told us that pretty cheaply.\ncombine this with lots of groups and the performance starts to take a hit.", "url": "https://github.com/jenkinsci/jenkins/pull/5035#discussion_r512148986", "createdAt": "2020-10-26T17:39:35Z", "author": {"login": "jtnord"}, "path": "core/src/main/java/jenkins/model/IdStrategy.java", "diffHunk": "@@ -207,9 +209,14 @@ public String keyFor(@NonNull String id) {\n             return id.toLowerCase(Locale.ENGLISH);\n         }\n \n+        @Override\n+        public boolean equals(@NonNull String id1, @NonNull String id2) {\n+            return id1.equalsIgnoreCase(id2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MTQxMTQ4", "url": "https://github.com/jenkinsci/jenkins/pull/5035#pullrequestreview-517141148", "createdAt": "2020-10-26T20:16:24Z", "commit": {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MjI4OTY0", "url": "https://github.com/jenkinsci/jenkins/pull/5035#pullrequestreview-517228964", "createdAt": "2020-10-26T22:44:08Z", "commit": {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1788, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}