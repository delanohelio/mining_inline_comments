{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MDQ0NTYz", "number": 4626, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMjoxM1rODu3p4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODo0Mzo1NFrOD5He8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDcyOTMxOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMjoxM1rOGA_ZsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMjoxM1rOGA_ZsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MTk1Mg==", "bodyText": "Arrow functions do not work on some browsers jenkins supports. Basically, adjuncts cannot use them or other ES6 features.", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403691952", "createdAt": "2020-04-05T12:02:13Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDczMDEzOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMjo1M1rOGA_aFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMjo1M1rOGA_aFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjA1Mg==", "bodyText": "Can we return here to avoid one extra level of nesting by skipping the else clause?", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403692052", "createdAt": "2020-04-05T12:02:53Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDczMDQxOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMzoyMFrOGA_aOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowMzoyMFrOGA_aOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjA5MA==", "bodyText": "love seeing use of data-attributes \ud83d\udc4d", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403692090", "createdAt": "2020-04-05T12:03:20Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t} else {\n+\t\tvar urlToTest = redirectForm.getAttribute('data-url');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDczMjY3OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowNTo0MFrOGA_bVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMzoyMTo0MVrOGA_9vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjM3NQ==", "bodyText": "I would suggest renaming the .context-message class to .js-context-message, to show is intent to be used by JS code and avoid a regression when refactoring CSS.", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403692375", "createdAt": "2020-04-05T12:05:40Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t} else {\n+\t\tvar urlToTest = redirectForm.getAttribute('data-url');\n+\t\tnew Ajax.Request(urlToTest, {\n+\t\t\tonComplete : function(response) {\n+\t\t\t\tif (response.status !== 200) {\n+\t\t\t\t\tvar context = redirectForm.getAttribute('data-context');\n+\t\t\t\t\t// to cover the case where the JenkinsRootUrl is configured without the context\n+\t\t\t\t\tif (context) {\n+\t\t\t\t\t\tnew Ajax.Request(urlToTest, {\n+\t\t\t\t\t\t\tparameters: { testWithContext:true },\n+\t\t\t\t\t\t\tonComplete: function (response) {\n+\t\t\t\t\t\t\t\tif (response.status === 200) {\n+\t\t\t\t\t\t\t\t\t// this means the root URL was configured but without the contextPath, \n+\t\t\t\t\t\t\t\t\t// so different message to display\n+\t\t\t\t\t\t\t\t\tredirectForm.style.display = \"block\";\n+\t\t\t\t\t\t\t\t\tredirectForm.querySelectorAll('.context-message').forEach(node => node.style.display = \"block\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5Mjc1MA==", "bodyText": "Looks like I failed to pick an actual line :|", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403692750", "createdAt": "2020-04-05T12:08:44Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t} else {\n+\t\tvar urlToTest = redirectForm.getAttribute('data-url');\n+\t\tnew Ajax.Request(urlToTest, {\n+\t\t\tonComplete : function(response) {\n+\t\t\t\tif (response.status !== 200) {\n+\t\t\t\t\tvar context = redirectForm.getAttribute('data-context');\n+\t\t\t\t\t// to cover the case where the JenkinsRootUrl is configured without the context\n+\t\t\t\t\tif (context) {\n+\t\t\t\t\t\tnew Ajax.Request(urlToTest, {\n+\t\t\t\t\t\t\tparameters: { testWithContext:true },\n+\t\t\t\t\t\t\tonComplete: function (response) {\n+\t\t\t\t\t\t\t\tif (response.status === 200) {\n+\t\t\t\t\t\t\t\t\t// this means the root URL was configured but without the contextPath, \n+\t\t\t\t\t\t\t\t\t// so different message to display\n+\t\t\t\t\t\t\t\t\tredirectForm.style.display = \"block\";\n+\t\t\t\t\t\t\t\t\tredirectForm.querySelectorAll('.context-message').forEach(node => node.style.display = \"block\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjM3NQ=="}, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcwMTE4MA==", "bodyText": "It's a really good idea to js-xxx for stuff only used as tag for JavaScript without any CSS implication. Do we have a guideline/documentation for others?", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403701180", "createdAt": "2020-04-05T13:21:41Z", "author": {"login": "Wadeck"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t} else {\n+\t\tvar urlToTest = redirectForm.getAttribute('data-url');\n+\t\tnew Ajax.Request(urlToTest, {\n+\t\t\tonComplete : function(response) {\n+\t\t\t\tif (response.status !== 200) {\n+\t\t\t\t\tvar context = redirectForm.getAttribute('data-context');\n+\t\t\t\t\t// to cover the case where the JenkinsRootUrl is configured without the context\n+\t\t\t\t\tif (context) {\n+\t\t\t\t\t\tnew Ajax.Request(urlToTest, {\n+\t\t\t\t\t\t\tparameters: { testWithContext:true },\n+\t\t\t\t\t\t\tonComplete: function (response) {\n+\t\t\t\t\t\t\t\tif (response.status === 200) {\n+\t\t\t\t\t\t\t\t\t// this means the root URL was configured but without the contextPath, \n+\t\t\t\t\t\t\t\t\t// so different message to display\n+\t\t\t\t\t\t\t\t\tredirectForm.style.display = \"block\";\n+\t\t\t\t\t\t\t\t\tredirectForm.querySelectorAll('.context-message').forEach(node => node.style.display = \"block\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjM3NQ=="}, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDczMzA0OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowNjoxM1rOGA_bkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMjowOToxMVrOGA_dQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjQzMg==", "bodyText": "Again, arrow functions should be swapped by normal anonymous function () { }s", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403692432", "createdAt": "2020-04-05T12:06:13Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t} else {\n+\t\tvar urlToTest = redirectForm.getAttribute('data-url');\n+\t\tnew Ajax.Request(urlToTest, {\n+\t\t\tonComplete : function(response) {\n+\t\t\t\tif (response.status !== 200) {\n+\t\t\t\t\tvar context = redirectForm.getAttribute('data-context');\n+\t\t\t\t\t// to cover the case where the JenkinsRootUrl is configured without the context\n+\t\t\t\t\tif (context) {\n+\t\t\t\t\t\tnew Ajax.Request(urlToTest, {\n+\t\t\t\t\t\t\tparameters: { testWithContext:true },\n+\t\t\t\t\t\t\tonComplete: function (response) {\n+\t\t\t\t\t\t\t\tif (response.status === 200) {\n+\t\t\t\t\t\t\t\t\t// this means the root URL was configured but without the contextPath, \n+\t\t\t\t\t\t\t\t\t// so different message to display\n+\t\t\t\t\t\t\t\t\tredirectForm.style.display = \"block\";\n+\t\t\t\t\t\t\t\t\tredirectForm.querySelectorAll('.context-message').forEach(node => node.style.display = \"block\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5Mjg2NQ==", "bodyText": "I failed to pick an actual line. This comment was meant for the forEach loop", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403692865", "createdAt": "2020-04-05T12:09:11Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,35 @@\n+(() => {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t} else {\n+\t\tvar urlToTest = redirectForm.getAttribute('data-url');\n+\t\tnew Ajax.Request(urlToTest, {\n+\t\t\tonComplete : function(response) {\n+\t\t\t\tif (response.status !== 200) {\n+\t\t\t\t\tvar context = redirectForm.getAttribute('data-context');\n+\t\t\t\t\t// to cover the case where the JenkinsRootUrl is configured without the context\n+\t\t\t\t\tif (context) {\n+\t\t\t\t\t\tnew Ajax.Request(urlToTest, {\n+\t\t\t\t\t\t\tparameters: { testWithContext:true },\n+\t\t\t\t\t\t\tonComplete: function (response) {\n+\t\t\t\t\t\t\t\tif (response.status === 200) {\n+\t\t\t\t\t\t\t\t\t// this means the root URL was configured but without the contextPath, \n+\t\t\t\t\t\t\t\t\t// so different message to display\n+\t\t\t\t\t\t\t\t\tredirectForm.style.display = \"block\";\n+\t\t\t\t\t\t\t\t\tredirectForm.querySelectorAll('.context-message').forEach(node => node.style.display = \"block\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5MjQzMg=="}, "originalCommit": {"oid": "856c4c085ab8f44fb77af27911dd40df1c3ea622"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDg5NTU2OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNTowMjo0M1rOGBAvCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNTowMjo0M1rOGBAvCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMzgwMg==", "bodyText": "You left one arrow function here :)", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r403713802", "createdAt": "2020-04-05T15:02:43Z", "author": {"login": "fqueiruga"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/resources.js", "diffHunk": "@@ -0,0 +1,49 @@\n+(function () {\n+\tvar redirectForm = document.getElementById('redirect-error');\n+\tif (!redirectForm) {\n+\t\tconsole.warn('This script expects to have an element with id=\"redirect-error\" to be working.');\n+\t\treturn;\n+\t}\n+\n+\tvar urlToTest = redirectForm.getAttribute('data-url');\n+\tvar callUrlToTest = function(testWithContext, callback) {\n+\t\tvar options = {\n+\t\t\tonComplete: callback\n+\t\t};\n+\t\tif (testWithContext === true) {\n+\t\t\toptions.parameters = { testWithContext: true };\n+\t\t}\n+\t\tnew Ajax.Request(urlToTest, options);\n+\t};\n+\t\n+\tvar displayWarningMessage = function(withContextMessage) {\n+\t\tredirectForm.classList.remove('reverse-proxy__hidden');\n+\t\tif (withContextMessage === true) {\n+\t\t\tredirectForm.querySelectorAll('.js-context-message').forEach(node =>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "133cff776b2a15fd6eba3db9764483c223665662"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjE4MDM1OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/message.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODo0Mzo1NFrOGQNUvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODo0Mzo1NFrOGQNUvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0ODcwMw==", "bodyText": "This should have been set-up or configuration", "url": "https://github.com/jenkinsci/jenkins/pull/4626#discussion_r419648703", "createdAt": "2020-05-04T18:43:54Z", "author": {"login": "jsoref"}, "path": "core/src/main/resources/hudson/diagnosis/ReverseProxySetupMonitor/message.properties", "diffHunk": "@@ -1 +1,2 @@\n-blurb=It appears that your reverse proxy set up is broken.\n\\ No newline at end of file\n+blurb=It appears that your reverse proxy set up is broken.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "231e6a7aef3818a6b2288677e04118eaa223327d"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 686, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}