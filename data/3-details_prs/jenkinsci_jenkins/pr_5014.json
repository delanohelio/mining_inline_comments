{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MzIzNTgw", "number": 5014, "title": "Hacktoberfest - ParametersDefinition add equals and hashCode", "bodyText": "Declarative Jenkins Pipelines have to compare ParametersDefinition from job configuration and pipeline for making a decision about updating configuration and save it on disk.\nThe current implementation compares instances of ParametersDefinition serialized to XMLs because previously equals() wasn't implemented in ParametersDefinition implementations.\nhttps://github.com/jenkinsci/pipeline-model-definition-plugin/blob/pipeline-model-definition-1.7.2/pipeline-model-definition/src/main/groovy/org/jenkinsci/plugins/pipeline/modeldefinition/Utils.groovy#L738\nSo this change should improve the performance of starting pipelines.\n\nProposed changelog entries\n\nEntry 1: Add equals and hashCode to ParameterDefinition implementations\nEntry 2: equals working strictly only for the same classes to preventing issues with extended classes\n\n\nProposed upgrade guidelines\nN/A\nSubmitter checklist\n\n (If applicable) Jira issue is well described\n Changelog entries and upgrade guidelines are appropriate for the audience affected by the change (users or developer, depending on the change). Examples\n\nFill-in the Proposed changelog entries section only if there are breaking changes or other changes which may require extra steps from users during the upgrade\n\n\n Appropriate autotests or explanation to why this change has no tests\n For dependency updates: links to external changelogs and, if possible, full diffs\n\n\nDesired reviewers\n@mention\n\nMaintainer checklist\nBefore the changes are marked as ready-for-merge:\n\n There are at least 2 approvals for the pull request and no outstanding requests for change\n Conversations in the pull request are over OR it is explicit that a reviewer does not block the change\n Changelog entries in the PR title and/or Proposed changelog entries are correct\n Proper changelog labels are set so that the changelog can be generated automatically\n If the change needs additional upgrade steps from users, upgrade-guide-needed label is set and there is a Proposed upgrade guidelines section in the PR title. (example)\n If it would make sense to backport the change to LTS, a Jira issue must exist, be a Bug or Improvement, and be labeled as lts-candidate to be considered (see query).", "createdAt": "2020-10-17T18:02:53Z", "url": "https://github.com/jenkinsci/jenkins/pull/5014", "merged": true, "mergeCommit": {"oid": "418fb5b565d6e8a4a43fe74c544a9b2f27915757"}, "closed": true, "closedAt": "2020-11-26T09:01:12Z", "author": {"login": "gulyaev13"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTda6FAH2gAyNTA1MzIzNTgwOjRiYWUzMjNmZjhmYzExZWZhMTEyODhkODk0ZGU1NTJmZjcwYTJhZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfdeJoAFqTUzNjkxNjMyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4bae323ff8fc11efa11288d894de552ff70a2afa", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/4bae323ff8fc11efa11288d894de552ff70a2afa", "committedDate": "2020-10-17T16:18:26Z", "message": "Add equals and hashCode methods to implementation of ParametersDefinition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba9353e929246d91645bd3708bbeb4c4378ffaa", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/9ba9353e929246d91645bd3708bbeb4c4378ffaa", "committedDate": "2020-10-17T17:49:30Z", "message": "ParameterDefinition: equals working strictly only for same classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a718c0a124bc8b5e485184aa01bbf1055eced334", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/a718c0a124bc8b5e485184aa01bbf1055eced334", "committedDate": "2020-10-17T17:58:53Z", "message": "ParameterDefinition: Create tests for comparison"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NTIxNzE5", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-515521719", "createdAt": "2020-10-23T10:01:38Z", "commit": {"oid": "a718c0a124bc8b5e485184aa01bbf1055eced334"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NjM5MzIy", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-515639322", "createdAt": "2020-10-23T12:55:49Z", "commit": {"oid": "a718c0a124bc8b5e485184aa01bbf1055eced334"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxMjo1NTo0OVrOHnMp-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxMjo1NTo0OVrOHnMp-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg2Mzg2NQ==", "bodyText": "Since this is a unit test (no JenkinsRule dep), it can be moved into the core module.", "url": "https://github.com/jenkinsci/jenkins/pull/5014#discussion_r510863865", "createdAt": "2020-10-23T12:55:49Z", "author": {"login": "jglick"}, "path": "test/src/test/java/hudson/model/ParameterDefinitionTest.java", "diffHunk": "@@ -0,0 +1,147 @@\n+package hudson.model;\n+\n+import hudson.util.Secret;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotEquals;\n+\n+public class ParameterDefinitionTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a718c0a124bc8b5e485184aa01bbf1055eced334"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d9435a5efa49352d83f87700e06341c44ab75f7", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/8d9435a5efa49352d83f87700e06341c44ab75f7", "committedDate": "2020-10-23T21:26:48Z", "message": "ParameterDefinitionTest: move tests to jenkins core unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NDM2OTY3", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-519436967", "createdAt": "2020-10-29T08:39:34Z", "commit": {"oid": "8d9435a5efa49352d83f87700e06341c44ab75f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTQ4OTEx", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-521148911", "createdAt": "2020-10-31T15:50:40Z", "commit": {"oid": "8d9435a5efa49352d83f87700e06341c44ab75f7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dfaf537d73ccb4a5de1f0e5f9fc619455f3b7b1", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/2dfaf537d73ccb4a5de1f0e5f9fc619455f3b7b1", "committedDate": "2020-11-04T10:28:20Z", "message": "ParameterDefinition: return false with null argument according to Object.equals contract"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzODE2MDY4", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-523816068", "createdAt": "2020-11-04T23:42:49Z", "commit": {"oid": "2dfaf537d73ccb4a5de1f0e5f9fc619455f3b7b1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMzo0Mjo0OVrOHttr4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMzo0Mjo0OVrOHttr4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzY5NjQ4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(RunParameterDefinition.class != getClass())\n          \n          \n            \n                    if (RunParameterDefinition.class != getClass())", "url": "https://github.com/jenkinsci/jenkins/pull/5014#discussion_r517696480", "createdAt": "2020-11-04T23:42:49Z", "author": {"login": "zbynek"}, "path": "core/src/main/java/hudson/model/RunParameterDefinition.java", "diffHunk": "@@ -206,5 +207,32 @@ public RunParameterValue createValue(String value) {\n         return new RunParameterValue(getName(), value, getDescription());\n     }\n \n+    @Override\n+    public int hashCode() {\n+        return Objects.hash(getName(), getDescription(), projectName, runId, filter);\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (this == obj)\n+            return true;\n+        if (obj == null)\n+            return false;\n+        if(RunParameterDefinition.class != getClass())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfaf537d73ccb4a5de1f0e5f9fc619455f3b7b1"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "425743fdfc3640c45171f1320407d7a808831732", "author": {"user": {"login": "res0nance", "name": "Raihaan Shouhell"}}, "url": "https://github.com/jenkinsci/jenkins/commit/425743fdfc3640c45171f1320407d7a808831732", "committedDate": "2020-11-05T02:41:56Z", "message": "Update core/src/main/java/hudson/model/RunParameterDefinition.java\n\nCo-authored-by: Zbynek Konecny <zbynek1729@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MDI0OTQx", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-524024941", "createdAt": "2020-11-05T08:34:05Z", "commit": {"oid": "425743fdfc3640c45171f1320407d7a808831732"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e808e541471b0bbd74a0abb754a3875224f4f027", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/e808e541471b0bbd74a0abb754a3875224f4f027", "committedDate": "2020-11-22T09:59:11Z", "message": "ParameterDefinition: add default realization based at XML serialized classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dba0a2eb4592bb1ad7f7287d628dc4d5dd261ed", "author": {"user": null}, "url": "https://github.com/jenkinsci/jenkins/commit/2dba0a2eb4592bb1ad7f7287d628dc4d5dd261ed", "committedDate": "2020-11-22T10:05:46Z", "message": "Merge remote-tracking branch 'origin/parameters-defenitions-equals' into parameters-defenitions-equals\n\n# Conflicts:\n#\tcore/src/main/java/hudson/model/RunParameterDefinition.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2OTE2MzI3", "url": "https://github.com/jenkinsci/jenkins/pull/5014#pullrequestreview-536916327", "createdAt": "2020-11-23T23:09:04Z", "commit": {"oid": "2dba0a2eb4592bb1ad7f7287d628dc4d5dd261ed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1752, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}