{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5ODQ1ODYx", "number": 5033, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMzowNzozNFrOE1N0NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMzowNzozNFrOE1N0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0MjM2MzQwOnYy", "diffSide": "RIGHT", "path": "core/src/test/java/hudson/FunctionsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMzowNzozNFrOHtXR_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMzowNzozNFrOHtXR_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMyOTQwNw==", "bodyText": "Seems pretty fragile. Maybe better to just alter the assertPrintThrowable utility to tolerate either format.", "url": "https://github.com/jenkinsci/jenkins/pull/5033#discussion_r517329407", "createdAt": "2020-11-04T13:07:34Z", "author": {"login": "jglick"}, "path": "core/src/test/java/hudson/FunctionsTest.java", "diffHunk": "@@ -510,24 +512,45 @@ public void printStackTrace(PrintWriter s) {\n                 s.println(\"Some custom exception\");\n             }\n         }, \"Some custom exception\\n\", \"Some custom exception\\n\");\n-        /* TODO exact format changed in 11.0.9 (JDK-8226809 / JDK-8252444)\n         // Circular references:\n         Stack stack1 = new Stack(\"p.Exc1\", \"p.C.method1:17\");\n         Stack stack2 = new Stack(\"p.Exc2\", \"p.C.method2:27\");\n         stack1.cause(stack2);\n         stack2.cause(stack1);\n-        assertPrintThrowable(stack1,\n-            \"p.Exc1\\n\" +\n-            \"\\tat p.C.method1(C.java:17)\\n\" +\n-            \"Caused by: p.Exc2\\n\" +\n-            \"\\tat p.C.method2(C.java:27)\\n\" +\n-            \"\\t[CIRCULAR REFERENCE:p.Exc1]\\n\",\n-            \"<cycle to p.Exc1>\\n\" +\n-            \"Caused: p.Exc2\\n\" +\n-            \"\\tat p.C.method2(C.java:27)\\n\" +\n-            \"Caused: p.Exc1\\n\" +\n-            \"\\tat p.C.method1(C.java:17)\\n\");\n-        */\n+        //Format changed in 11.0.9 / 8.0.272 (JDK-8226809 / JDK-8252444 / JDK-8252489)\n+        if ((getVersion().getDigitAt(0) == 11 && getVersion().isNewerThanOrEqualTo(new VersionNumber(\"11.0.9\"))) ||\n+                (getVersion().getDigitAt(0) == 8 && getVersion().isNewerThanOrEqualTo(new VersionNumber(\"8.0.272\")))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fe12782da7d019d33d8792f1cfeece0d6ff66df"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 74, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}