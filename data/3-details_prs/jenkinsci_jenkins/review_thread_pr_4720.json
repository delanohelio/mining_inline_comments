{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MzE0ODY0", "number": 4720, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDowOToyMVrOD7Yvwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDowOTo0MVrOD7YwKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTk4MDE4OnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDowOToyMVrOGTriUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMjoxMTo1NVrOGTvNQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI4OTQyNA==", "bodyText": "Seems like an oversight to use Functions without need.", "url": "https://github.com/jenkinsci/jenkins/pull/4720#discussion_r423289424", "createdAt": "2020-05-11T20:09:21Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "diffHunk": "@@ -17,9 +17,7 @@ l.layout(permission:app.SYSTEM_READ, title:my.displayName, cssclass:request.getP\n             l.icon(class: 'icon-secure icon-xlg')\n             text(my.displayName)\n         }\n-        if (!h.hasPermission(app.ADMINISTER)) {\n-            set(\"readOnlyMode\", \"true\")\n-        }\n+        set(\"readOnlyMode\", !h.hasPermission(app.ADMINISTER))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d17e55943da52e19c4a34d345cb56b0671a82d45"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI5MjUyMA==", "bodyText": "are you saying Functions should be used here or h?", "url": "https://github.com/jenkinsci/jenkins/pull/4720#discussion_r423292520", "createdAt": "2020-05-11T20:15:13Z", "author": {"login": "timja"}, "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "diffHunk": "@@ -17,9 +17,7 @@ l.layout(permission:app.SYSTEM_READ, title:my.displayName, cssclass:request.getP\n             l.icon(class: 'icon-secure icon-xlg')\n             text(my.displayName)\n         }\n-        if (!h.hasPermission(app.ADMINISTER)) {\n-            set(\"readOnlyMode\", \"true\")\n-        }\n+        set(\"readOnlyMode\", !h.hasPermission(app.ADMINISTER))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI4OTQyNA=="}, "originalCommit": {"oid": "d17e55943da52e19c4a34d345cb56b0671a82d45"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI5NDQ0MA==", "bodyText": "app.hasPermission as in some other of these changes.", "url": "https://github.com/jenkinsci/jenkins/pull/4720#discussion_r423294440", "createdAt": "2020-05-11T20:18:54Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "diffHunk": "@@ -17,9 +17,7 @@ l.layout(permission:app.SYSTEM_READ, title:my.displayName, cssclass:request.getP\n             l.icon(class: 'icon-secure icon-xlg')\n             text(my.displayName)\n         }\n-        if (!h.hasPermission(app.ADMINISTER)) {\n-            set(\"readOnlyMode\", \"true\")\n-        }\n+        set(\"readOnlyMode\", !h.hasPermission(app.ADMINISTER))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI4OTQyNA=="}, "originalCommit": {"oid": "d17e55943da52e19c4a34d345cb56b0671a82d45"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwMjgyOQ==", "bodyText": "done", "url": "https://github.com/jenkinsci/jenkins/pull/4720#discussion_r423302829", "createdAt": "2020-05-11T20:34:25Z", "author": {"login": "timja"}, "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "diffHunk": "@@ -17,9 +17,7 @@ l.layout(permission:app.SYSTEM_READ, title:my.displayName, cssclass:request.getP\n             l.icon(class: 'icon-secure icon-xlg')\n             text(my.displayName)\n         }\n-        if (!h.hasPermission(app.ADMINISTER)) {\n-            set(\"readOnlyMode\", \"true\")\n-        }\n+        set(\"readOnlyMode\", !h.hasPermission(app.ADMINISTER))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI4OTQyNA=="}, "originalCommit": {"oid": "d17e55943da52e19c4a34d345cb56b0671a82d45"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM0OTU3MA==", "bodyText": "(Or Jenkins.get() which is the nicer, type-safer variant for Groovy views, but really the improvement is marginal. Not worth redoing, just a recommendation for the future.)", "url": "https://github.com/jenkinsci/jenkins/pull/4720#discussion_r423349570", "createdAt": "2020-05-11T22:11:55Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "diffHunk": "@@ -17,9 +17,7 @@ l.layout(permission:app.SYSTEM_READ, title:my.displayName, cssclass:request.getP\n             l.icon(class: 'icon-secure icon-xlg')\n             text(my.displayName)\n         }\n-        if (!h.hasPermission(app.ADMINISTER)) {\n-            set(\"readOnlyMode\", \"true\")\n-        }\n+        set(\"readOnlyMode\", !h.hasPermission(app.ADMINISTER))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI4OTQyNA=="}, "originalCommit": {"oid": "d17e55943da52e19c4a34d345cb56b0671a82d45"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNTk4MTIzOnYy", "diffSide": "RIGHT", "path": "core/src/main/resources/jenkins/tools/GlobalToolConfiguration/index.groovy", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDowOTo0MVrOGTrjAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMDowOTo0MVrOGTrjAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI4OTYwMw==", "bodyText": "As above.", "url": "https://github.com/jenkinsci/jenkins/pull/4720#discussion_r423289603", "createdAt": "2020-05-11T20:09:41Z", "author": {"login": "daniel-beck"}, "path": "core/src/main/resources/jenkins/tools/GlobalToolConfiguration/index.groovy", "diffHunk": "@@ -7,18 +7,14 @@ def f=namespace(lib.FormTagLib)\n def l=namespace(lib.LayoutTagLib)\n def st=namespace(\"jelly:stapler\")\n \n-\n-if (!Functions.hasPermission(app.ADMINISTER)) {\n-    set(\"readOnlyMode\", \"true\")\n-}\n-\n l.layout(permission:app.SYSTEM_READ, title:my.displayName) {\n     l.side_panel {\n         l.tasks {\n             l.task(icon:\"icon-up icon-md\", href:rootURL+'/', title:_(\"Back to Dashboard\"))\n             l.task(icon:\"icon-gear2 icon-md\", href:\"${rootURL}/manage\", title:_(\"Manage Jenkins\"))\n         }\n     }\n+    set(\"readOnlyMode\", !h.hasPermission(app.ADMINISTER))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d17e55943da52e19c4a34d345cb56b0671a82d45"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 553, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}