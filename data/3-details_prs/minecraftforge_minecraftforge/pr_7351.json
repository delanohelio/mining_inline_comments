{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxODk2NjA1", "number": 7351, "title": "Support effective materials of vanilla AxeItem", "bodyText": "This PR fixes the bug found in #7324\nIt adds a material check to the getHarvestLevel and getHarvestTool of the Block class to support also the defined effective materials in the AxeItem class.", "createdAt": "2020-09-23T16:22:14Z", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7351", "merged": true, "mergeCommit": {"oid": "248d207dbcaadb4035f10acf35cbe42246456222"}, "closed": true, "closedAt": "2020-09-28T18:02:00Z", "author": {"login": "cech12"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLu2NngH2gAyNDkxODk2NjA1OjEwNDM4N2I0NjBhNGM2YTk0OTY2OTFlMmVkNjk4NmFmZWQ5ZmIzZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdL78vogH2gAyNDkxODk2NjA1OjY1ZWJmNjcxM2M5MDIwYTNjODUxY2I3OWUxM2RjMTI2MDA1NzkzODM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "104387b460a4c6a9496691e2ed6986afed9fb3e3", "author": {"user": {"login": "cech12", "name": "cech12"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/104387b460a4c6a9496691e2ed6986afed9fb3e3", "committedDate": "2020-09-23T16:05:15Z", "message": "fix harvest tool and harvest level for blocks with effective material for axes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed8d4f9275a0080d72dcadada9248aaefa49381", "author": {"user": {"login": "cech12", "name": "cech12"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/eed8d4f9275a0080d72dcadada9248aaefa49381", "committedDate": "2020-09-23T16:18:34Z", "message": "change tool type string of debug line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MjE5MTI0", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7351#pullrequestreview-495219124", "createdAt": "2020-09-24T04:56:14Z", "commit": {"oid": "eed8d4f9275a0080d72dcadada9248aaefa49381"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNDo1NjoxNFrOHXJt7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNDo1NjoxNFrOHXJt7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAzODUwOQ==", "bodyText": "This is a no for a few reasons, 1) Don't make the field public/modifiable for other people. It's not good API design. The better option would be to add a 'is' method in the AxeItem class.\n2) Honestly I think you're attacking the wrong target, you should probably go after 'isToolEffective' not getHarvestTool.\nPerhaps we should change the default implementation of isToolEffective to return getHavestTool(state) == null || getHavestTool(state) == tool", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7351#discussion_r494038509", "createdAt": "2020-09-24T04:56:14Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/block/Block.java.patch", "diffHunk": "@@ -108,12 +108,16 @@\n +   @Nullable\n +   @Override\n +   public net.minecraftforge.common.ToolType getHarvestTool(BlockState state) {\n++      if (this.harvestTool == null && net.minecraft.item.AxeItem.field_234662_c_.contains(state.func_185904_a()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eed8d4f9275a0080d72dcadada9248aaefa49381"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MjE5NzY1", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7351#pullrequestreview-495219765", "createdAt": "2020-09-24T04:58:24Z", "commit": {"oid": "eed8d4f9275a0080d72dcadada9248aaefa49381"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNDo1ODoyNFrOHXJv7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNDo1ODoyNFrOHXJv7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAzOTAyMA==", "bodyText": "This logic is just wrong.. it doesn't take into account levels that are already set.\nHowever, this does look like getHarvestLevel is wrong, the javadocs say it should have a tool class passed in. Perhaps this got lost somewhere in the shuffle. We should re-add it. That way a block could require a iron shovel, or a wooden pickaxe.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7351#discussion_r494039020", "createdAt": "2020-09-24T04:58:24Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/block/Block.java.patch", "diffHunk": "@@ -108,12 +108,16 @@\n +   @Nullable\n +   @Override\n +   public net.minecraftforge.common.ToolType getHarvestTool(BlockState state) {\n++      if (this.harvestTool == null && net.minecraft.item.AxeItem.field_234662_c_.contains(state.func_185904_a()))\n++         return net.minecraftforge.common.ToolType.AXE;\n +      return harvestTool; //TODO: RE-Evaluate\n +   }\n +\n +   @Override\n +   public int getHarvestLevel(BlockState state) {\n-+     return harvestLevel; //TODO: RE-Evaluate\n++      if (this.harvestLevel < 0 && net.minecraft.item.AxeItem.field_234662_c_.contains(state.func_185904_a()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eed8d4f9275a0080d72dcadada9248aaefa49381"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae98aea67656bfb6ef6151a609ed9e9eb5f7bd7f", "author": {"user": {"login": "cech12", "name": "cech12"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/ae98aea67656bfb6ef6151a609ed9e9eb5f7bd7f", "committedDate": "2020-09-24T07:16:58Z", "message": "add review comments of LexManos\n- add the harvest tool & level in ForgeHooks\n- removed the patches in Block class\n- make the effectiveMaterials field of AxeItem private again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ebf6713c9020a3c851cb79e13dc12600579383", "author": {"user": {"login": "cech12", "name": "cech12"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/65ebf6713c9020a3c851cb79e13dc12600579383", "committedDate": "2020-09-24T07:21:09Z", "message": "forgot a damn space xD"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2284, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}