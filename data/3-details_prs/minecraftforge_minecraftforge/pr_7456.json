{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MjI4NzE4", "number": 7456, "title": "Add support for referencing forge's resources and specifying existing mods to data generators", "bodyText": "This PR adds support for declaring that a mod's resources should be added to the existing file helper's resource check b adding an --existing-mod argument that takes a modid. This PR also auto-adds forge as an existing mod so that modders can reference forge resources from their data generators without having running into errors, similar to how vanilla resources can be referenced.", "createdAt": "2020-11-02T18:01:10Z", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7456", "merged": true, "mergeCommit": {"oid": "fd045d4628d726f60a4fc4972666e9af4de2cfe9"}, "closed": true, "closedAt": "2020-11-23T03:45:13Z", "author": {"login": "pupnewfster"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYpQp5gBqjM5NDk2MTE4ODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfMwijAH2gAyNTE0MjI4NzE4OjZhNjE2OTExNDgzYzk0NDBjOWQ1MGVmOTBlOWU4YzMyMzM0YWE4NjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67fb7b7e06c7f6069fef952acf2d8acaf92e78d0", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/67fb7b7e06c7f6069fef952acf2d8acaf92e78d0", "committedDate": "2020-11-02T18:38:48Z", "message": "Only automatically add forge to existing resources if forge is not one of the mods data is currently being generated for"}, "afterCommit": {"oid": "33889fda6f6d562425d878b1ab51b2509876be16", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/33889fda6f6d562425d878b1ab51b2509876be16", "committedDate": "2020-11-02T18:52:49Z", "message": "Only automatically add forge to existing resources if forge is not one of the mods data is currently being generated for"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81841ea6b41e42db51cc4e91f701108ad4ea80a7", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/81841ea6b41e42db51cc4e91f701108ad4ea80a7", "committedDate": "2020-11-02T20:04:27Z", "message": "Add --existing-mod as an argument for data generators that takes a modid and auto add forge so that mods can reference forge resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e02c992aa6ba570ee0003e665a937542b5c1202", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/7e02c992aa6ba570ee0003e665a937542b5c1202", "committedDate": "2020-11-02T20:04:27Z", "message": "Only automatically add forge to existing resources if forge is not one of the mods data is currently being generated for"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33889fda6f6d562425d878b1ab51b2509876be16", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/33889fda6f6d562425d878b1ab51b2509876be16", "committedDate": "2020-11-02T18:52:49Z", "message": "Only automatically add forge to existing resources if forge is not one of the mods data is currently being generated for"}, "afterCommit": {"oid": "7e02c992aa6ba570ee0003e665a937542b5c1202", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/7e02c992aa6ba570ee0003e665a937542b5c1202", "committedDate": "2020-11-02T20:04:27Z", "message": "Only automatically add forge to existing resources if forge is not one of the mods data is currently being generated for"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjA3Mjc1", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7456#pullrequestreview-528607275", "createdAt": "2020-11-11T23:20:06Z", "commit": {"oid": "7e02c992aa6ba570ee0003e665a937542b5c1202"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMzoyMDowNlrOHxh1Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMzoyMToxM1rOHxh3-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY5NjU1OQ==", "bodyText": "Why is this in the middle of the argument list?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7456#discussion_r521696559", "createdAt": "2020-11-11T23:20:06Z", "author": {"login": "TheCurle"}, "path": "patches/minecraft/net/minecraft/data/Main.java.patch", "diffHunk": "@@ -24,9 +25,10 @@\n -         datagenerator.func_200392_c();\n +         Collection<Path> inputs = optionset.valuesOf(optionspec8).stream().map(Paths::get).collect(Collectors.toList());\n +         Collection<Path> existingPacks = optionset.valuesOf(existing).stream().map(Paths::get).collect(Collectors.toList());\n++         java.util.Set<String> existingMods = new java.util.HashSet<>(optionset.valuesOf(existingMod));\n +         java.util.Set<String> mods = new java.util.HashSet<>(optionset.valuesOf(mod));\n +         boolean isFlat = mods.isEmpty() || optionset.has(flat);\n-+         net.minecraftforge.fml.DatagenModLoader.begin(mods, path, inputs, existingPacks, flag2, flag1, flag3, flag4, flag5, isFlat);\n++         net.minecraftforge.fml.DatagenModLoader.begin(mods, path, inputs, existingPacks, existingMods, flag2, flag1, flag3, flag4, flag5, isFlat);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e02c992aa6ba570ee0003e665a937542b5c1202"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY5NzI3NQ==", "bodyText": "Middle of the argument list..\nThis is a Forge class yes, but why?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7456#discussion_r521697275", "createdAt": "2020-11-11T23:21:13Z", "author": {"login": "TheCurle"}, "path": "src/main/java/net/minecraftforge/fml/DatagenModLoader.java", "diffHunk": "@@ -39,14 +40,19 @@ public static boolean isRunningDataGen() {\n         return runningDataGen;\n     }\n \n-    public static void begin(final Set<String> mods, final Path path, final java.util.Collection<Path> inputs, Collection<Path> existingPacks, final boolean serverGenerators, final boolean clientGenerators, final boolean devToolGenerators, final boolean reportsGenerator, final boolean structureValidator, final boolean flat) {\n+    @Deprecated //TODO: Remove in 1.17\n+    public static void begin(final Set<String> mods, final Path path, final Collection<Path> inputs, Collection<Path> existingPacks, final boolean serverGenerators, final boolean clientGenerators, final boolean devToolGenerators, final boolean reportsGenerator, final boolean structureValidator, final boolean flat) {\n+        begin(mods, path, inputs, existingPacks, Collections.emptySet(), serverGenerators, clientGenerators, devToolGenerators, reportsGenerator, structureValidator, flat);\n+    }\n+\n+    public static void begin(final Set<String> mods, final Path path, final Collection<Path> inputs, Collection<Path> existingPacks, Set<String> existingMods, final boolean serverGenerators, final boolean clientGenerators, final boolean devToolGenerators, final boolean reportsGenerator, final boolean structureValidator, final boolean flat) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e02c992aa6ba570ee0003e665a937542b5c1202"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a616911483c9440c9d50ef90e9e8c32334aa866", "author": {"user": {"login": "pupnewfster", "name": "Sara Freimer"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/6a616911483c9440c9d50ef90e9e8c32334aa866", "committedDate": "2020-11-23T03:40:46Z", "message": "Cleanup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2374, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}