{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MTI2NDYx", "number": 6693, "title": "Fire the LevelChange event after having enchanted an item", "bodyText": "The onEnchant method is responsible for reducing the xp level after an enchant.\nHowever, it does not call addExperienceLevel which is the method that fires the LevelChange event.\nThis changes one line to make it pass through this method to fire the event. A test mod also logs the event, and it does fire after enchanting.\naddExperienceLevel also plays a sound, but only if the level change is positive. SInce enchantment consumes levels, this should not happen unless mods play with the amount.", "createdAt": "2020-05-14T16:55:40Z", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6693", "merged": true, "mergeCommit": {"oid": "999b5df9336ae1685efb75115ca48378fdf6685d"}, "closed": true, "closedAt": "2020-05-14T20:22:13Z", "author": {"login": "Cyborgmas"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchQWvPAH2gAyNDE4MTI2NDYxOmY2NDI3NzhmMmNiYjQ4NGQ2MzMwZDM1ZDM4YWZkMTg2OWFmMDlkMmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchTYQAAH2gAyNDE4MTI2NDYxOjA5ODdiZjMyYjNmZTk4ZjM0NGY0MGZlZGZkYjg5ZWUzODhiZTljMDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f642778f2cbb484d6330d35d38afd1869af09d2f", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f642778f2cbb484d6330d35d38afd1869af09d2f", "committedDate": "2020-05-14T16:48:54Z", "message": "Fire the LevelChange event after having enchanted an item"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMTM2NTE1", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6693#pullrequestreview-412136515", "createdAt": "2020-05-14T19:54:13Z", "commit": {"oid": "f642778f2cbb484d6330d35d38afd1869af09d2f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTo1NDoxM1rOGVr61g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTo1NDoxM1rOGVr61g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM5Mjg1NA==", "bodyText": "Why?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6693#discussion_r425392854", "createdAt": "2020-05-14T19:54:13Z", "author": {"login": "LexManos"}, "path": "src/test/resources/META-INF/mods.toml", "diffHunk": "@@ -65,7 +67,7 @@ loaderVersion=\"[28,)\"\n     modId=\"custom_plant_type_test\"\n [[mods]]\n     modId=\"chunk_data_event_save_null_world_test\"\n-[[dependencies.global_loot_test]]\n+[[dependencies.level_change_event_on_enchant_test]]\n     modId=\"forge\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f642778f2cbb484d6330d35d38afd1869af09d2f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMTQwMjYw", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6693#pullrequestreview-412140260", "createdAt": "2020-05-14T19:59:33Z", "commit": {"oid": "f642778f2cbb484d6330d35d38afd1869af09d2f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTo1OTozNFrOGVsGbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTo1OTozNFrOGVsGbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM5NTgyMA==", "bodyText": "What is the point of this? If you want a flag like that for a one line body just use if (ENABLED). Inverting it just to return seems silly.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6693#discussion_r425395820", "createdAt": "2020-05-14T19:59:34Z", "author": {"login": "pupnewfster"}, "path": "src/test/java/net/minecraftforge/debug/entity/player/LevelChangeEventOnEnchantTest.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package net.minecraftforge.debug.entity.player;\n+\n+import net.minecraftforge.event.entity.player.PlayerXpEvent;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+@Mod(\"level_change_event_on_enchant_test\")\n+@Mod.EventBusSubscriber()\n+public class LevelChangeEventOnEnchantTest {\n+   private static final boolean ENABLE = true;\n+   private static final Logger logger = LogManager.getLogger(LevelChangeEventOnEnchantTest.class);\n+\n+   @SubscribeEvent\n+   public static void onPlayerLevelChange(PlayerXpEvent.LevelChange event)\n+   {\n+      if (!ENABLE) return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f642778f2cbb484d6330d35d38afd1869af09d2f"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "300bb78a86542d251aeb2148feca0a4d25a06453", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/300bb78a86542d251aeb2148feca0a4d25a06453", "committedDate": "2020-05-14T20:06:12Z", "message": "fix stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0987bf32b3fe98f344f40fedfdb89ee388be9c00", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0987bf32b3fe98f344f40fedfdb89ee388be9c00", "committedDate": "2020-05-14T20:20:16Z", "message": "Removing useless test mod"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2059, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}