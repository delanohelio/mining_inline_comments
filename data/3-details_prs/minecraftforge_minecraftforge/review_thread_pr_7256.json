{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4NDIyNTEx", "number": 7256, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNlQxMTozNDoyM1rOEYy6bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzoxNTo0NFrOEaXAqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NDM1NDM3OnYy", "diffSide": "RIGHT", "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNlQxMTozNDoyNFrOHBRxAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNlQxMTozNDoyNFrOHBRxAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTEwMTY5Ng==", "bodyText": "Braces on new lines (might want to fix the one on the method signature as well while you're at it).", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7256#discussion_r471101696", "createdAt": "2020-08-16T11:34:24Z", "author": {"login": "diesieben07"}, "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "diffHunk": "@@ -115,12 +118,12 @@ public VersionRange getModLoaderVersion()\n     }\n \n     public Optional<Manifest> getManifest() {\n-        Optional<Optional<Manifest>> manifest = this.manifest.get();\n-        if (!manifest.isPresent()) {\n-            manifest = Optional.of(modFile.getLocator().findManifest(modFile.getFilePath()));\n-            this.manifest.set(manifest);\n+        Optional<Manifest> result = manifest;\n+        if (result == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c71b96cad3946f60da9a6c6222d7c58aba2d5be8"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MDkzODQ2OnYy", "diffSide": "RIGHT", "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMTowNDozMlrOHCOatg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzoxMjowMVrOHCTi_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA5NTQxNA==", "bodyText": "If it doesn't matter that two threads hold different instances of the manifest (with the same content), this does not need to be volatile", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7256#discussion_r472095414", "createdAt": "2020-08-18T11:04:32Z", "author": {"login": "ichttt"}, "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "diffHunk": "@@ -54,6 +55,10 @@\n     private final List<IModInfo> mods;\n     private final Map<String,Object> properties;\n     private final String license;\n+    // Caches the manifest of the mod jar as parsing the manifest can be expensive for\n+    // signed jars. The manifest needs to be an Optional<Manifest>, so a nullable Optional\n+    // is probably the best option.\n+    private volatile Optional<Manifest> manifest = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "651fe7637567a10394897c63f103ecc0eaea563a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjE3OTQ1Mw==", "bodyText": "Yes it does. As soon as more than one thread can access a variable you must use volatile (or synchronization). If you just use a normal field, it would be perfectly okay for other threads than the writing thread to never see this new value.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7256#discussion_r472179453", "createdAt": "2020-08-18T13:12:01Z", "author": {"login": "diesieben07"}, "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "diffHunk": "@@ -54,6 +55,10 @@\n     private final List<IModInfo> mods;\n     private final Map<String,Object> properties;\n     private final String license;\n+    // Caches the manifest of the mod jar as parsing the manifest can be expensive for\n+    // signed jars. The manifest needs to be an Optional<Manifest>, so a nullable Optional\n+    // is probably the best option.\n+    private volatile Optional<Manifest> manifest = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA5NTQxNA=="}, "originalCommit": {"oid": "651fe7637567a10394897c63f103ecc0eaea563a"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDc1NDMyOnYy", "diffSide": "RIGHT", "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzoxNTo0NFrOHDvRrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzoxNTo0NFrOHDvRrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY4MjM1MA==", "bodyText": "Pointless import, other than this looks good now.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7256#discussion_r473682350", "createdAt": "2020-08-20T07:15:44Z", "author": {"login": "diesieben07"}, "path": "src/fmllauncher/java/net/minecraftforge/fml/loading/moddiscovery/ModFileInfo.java", "diffHunk": "@@ -37,6 +37,7 @@\n import java.util.Map;\n import java.util.Objects;\n import java.util.Optional;\n+import java.util.concurrent.atomic.AtomicReference;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33d1c9084d0b546f9e8ddf00feb85b2da5932cc0"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 890, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}