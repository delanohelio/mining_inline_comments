{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NzMwODE0", "number": 6404, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMDo1MToxN1rODVoh3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoxOToxOFrODYWkOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MDEwNzE3OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMDo1MToxN1rOFZ9s9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMDo1MToxN1rOFZ9s9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc2OTY1NQ==", "bodyText": "We use 4 spaces in forge, and please put the brace on a newline for consistency in this class", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r362769655", "createdAt": "2020-01-03T10:51:17Z", "author": {"login": "ichttt"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2019.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.server.command;\n+\n+import java.util.function.Function;\n+\n+import net.minecraft.entity.Entity;\n+import net.minecraft.world.server.ServerWorld;\n+import net.minecraftforge.common.util.ITeleporter;\n+\n+public class PortallessTeleporter implements ITeleporter \n+{\n+\n+   @Override\n+   public Entity placeEntity(Entity entity, ServerWorld currentWorld, ServerWorld destWorld, float yaw, Function<Boolean, Entity> repositionEntity) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MDExMjgxOnYy", "diffSide": "RIGHT", "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMDo1NDozMFrOFZ9wOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMDo1NDozMFrOFZ9wOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MDQ4OA==", "bodyText": "please keep the indent the same as the vanilla source here, and maybe add a comment noting that this belongs to the ITeleporter patch", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r362770488", "createdAt": "2020-01-03T10:54:30Z", "author": {"login": "ichttt"}, "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "diffHunk": "@@ -58,39 +60,57 @@\n           } else if (dimensiontype == DimensionType.field_223227_a_ && p_212321_1_ == DimensionType.field_223229_c_) {\n              BlockPos blockpos = serverworld1.func_180504_m();\n              d0 = (double)blockpos.func_177958_n();\n-@@ -653,6 +655,7 @@\n+@@ -630,7 +633,7 @@\n+ \n+             this.func_70012_b((double)i, (double)j, (double)k, f1, 0.0F);\n+             this.func_213317_d(Vec3d.field_186680_a);\n+-         } else if (!serverworld1.func_85176_s().func_222268_a(this, f2)) {\n++         } else if (spawnPortal && !serverworld1.func_85176_s().func_222268_a(this, f2)) {\n+             serverworld1.func_85176_s().func_85188_a(this);\n+             serverworld1.func_85176_s().func_222268_a(this, f2);\n+          }\n+@@ -640,6 +643,8 @@\n+          serverworld1.func_217447_b(this);\n+          this.func_213846_b(serverworld);\n+          this.field_71135_a.func_147364_a(this.func_226277_ct_(), this.func_226278_cu_(), this.func_226281_cx_(), f1, f);\n++            return this;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MDEyMjk4OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/common/util/ITeleporter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMDo1OTo0MlrOFZ92Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMjoyMTozM1rOFZ_AbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MTk3OA==", "bodyText": "I don't see this used anywhere, is this still needed when using the new placeEntity semantics?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r362771978", "createdAt": "2020-01-03T10:59:42Z", "author": {"login": "ichttt"}, "path": "src/main/java/net/minecraftforge/common/util/ITeleporter.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2019.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.common.util;\n+\n+import java.util.function.Function;\n+\n+import net.minecraft.entity.Entity;\n+import net.minecraft.world.Teleporter;\n+import net.minecraft.world.dimension.Dimension;\n+import net.minecraft.world.server.ServerWorld;\n+\n+/**\n+ * Interface for handling the placement of entities during dimension change.\n+ *\n+ * An implementation of this interface can be used to place the entity\n+ * in a safe location, or generate a return portal, for instance.\n+ *\n+ * See the {@link net.minecraft.world.Teleporter} class, which has\n+ * been patched to implement this interface, for a vanilla example.\n+ */\n+public interface ITeleporter {\n+\n+    /**\n+     * Called to handle placing the entity in the new world.\n+     *\n+     * The initial position of the entity will be its\n+     * position in the origin world, multiplied horizontally\n+     * by the computed cross-dimensional movement factor\n+     * (see {@link Dimension#getMovementFactor()}).\n+     *\n+     * Note that the supplied entity has not yet been spawned\n+     * in the destination world at the time.\n+     *\n+     * @param entity           the entity to be placed\n+     * @param currentWorld     the entity's origin\n+     * @param destWorld        the entity's destination\n+     * @param yaw              the suggested yaw value to apply\n+     * @param repositionEntity a function to reposition the entity, which returns the new entity in the new dimension. This is the vanilla implementation of the dimension travel logic. If the supplied boolean is true, it is attempted to spawn a new portal.\n+     */\n+    default Entity placeEntity(Entity entity, ServerWorld currentWorld, ServerWorld destWorld, float yaw, Function<Boolean, Entity> repositionEntity) {\n+       return repositionEntity.apply(true);\n+    }\n+\n+    // used internally to handle vanilla hardcoding\n+    default boolean isVanilla()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc5MTAyMA==", "bodyText": "Right this is not needed anymore", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r362791020", "createdAt": "2020-01-03T12:21:33Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/common/util/ITeleporter.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2019.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.common.util;\n+\n+import java.util.function.Function;\n+\n+import net.minecraft.entity.Entity;\n+import net.minecraft.world.Teleporter;\n+import net.minecraft.world.dimension.Dimension;\n+import net.minecraft.world.server.ServerWorld;\n+\n+/**\n+ * Interface for handling the placement of entities during dimension change.\n+ *\n+ * An implementation of this interface can be used to place the entity\n+ * in a safe location, or generate a return portal, for instance.\n+ *\n+ * See the {@link net.minecraft.world.Teleporter} class, which has\n+ * been patched to implement this interface, for a vanilla example.\n+ */\n+public interface ITeleporter {\n+\n+    /**\n+     * Called to handle placing the entity in the new world.\n+     *\n+     * The initial position of the entity will be its\n+     * position in the origin world, multiplied horizontally\n+     * by the computed cross-dimensional movement factor\n+     * (see {@link Dimension#getMovementFactor()}).\n+     *\n+     * Note that the supplied entity has not yet been spawned\n+     * in the destination world at the time.\n+     *\n+     * @param entity           the entity to be placed\n+     * @param currentWorld     the entity's origin\n+     * @param destWorld        the entity's destination\n+     * @param yaw              the suggested yaw value to apply\n+     * @param repositionEntity a function to reposition the entity, which returns the new entity in the new dimension. This is the vanilla implementation of the dimension travel logic. If the supplied boolean is true, it is attempted to spawn a new portal.\n+     */\n+    default Entity placeEntity(Entity entity, ServerWorld currentWorld, ServerWorld destWorld, float yaw, Function<Boolean, Entity> repositionEntity) {\n+       return repositionEntity.apply(true);\n+    }\n+\n+    // used internally to handle vanilla hardcoding\n+    default boolean isVanilla()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MTk3OA=="}, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MDEzMDk5OnYy", "diffSide": "RIGHT", "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMTowNDo1M1rOFZ969A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDozOToyMFrOFcV9Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MzIzNg==", "bodyText": "This entity seems to be unused, it should be returned at the end of the function", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r362773236", "createdAt": "2020-01-03T11:04:53Z", "author": {"login": "ichttt"}, "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "diffHunk": "@@ -38,10 +39,11 @@\n -         this.field_70128_L = false;\n +         serverworld.removeEntity(this, true); //Forge: the player entity is moved to the new world, NOT cloned. So keep the data alive with no matching invalidate call.\n +         this.revive();\n++         Entity e = teleporter.placeEntity(this, serverworld, serverworld1, this.field_70177_z, spawnPortal -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc5MDgzMA==", "bodyText": "I was thinking about checking if the retuned entity is the same as this (so the player) because the player should not ever be recreated.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r362790830", "createdAt": "2020-01-03T12:20:47Z", "author": {"login": "mcenderdragon"}, "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "diffHunk": "@@ -38,10 +39,11 @@\n -         this.field_70128_L = false;\n +         serverworld.removeEntity(this, true); //Forge: the player entity is moved to the new world, NOT cloned. So keep the data alive with no matching invalidate call.\n +         this.revive();\n++         Entity e = teleporter.placeEntity(this, serverworld, serverworld1, this.field_70177_z, spawnPortal -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MzIzNg=="}, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NjY4NQ==", "bodyText": "Have you decided what to do with this? It seems that the basic value would just be to return e instead of this below.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r363976685", "createdAt": "2020-01-07T22:11:53Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "diffHunk": "@@ -38,10 +39,11 @@\n -         this.field_70128_L = false;\n +         serverworld.removeEntity(this, true); //Forge: the player entity is moved to the new world, NOT cloned. So keep the data alive with no matching invalidate call.\n +         this.revive();\n++         Entity e = teleporter.placeEntity(this, serverworld, serverworld1, this.field_70177_z, spawnPortal -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MzIzNg=="}, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTI2NDE0Mw==", "bodyText": "I added a check and throw an excpetion if the retuned enity is not the same player.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r365264143", "createdAt": "2020-01-10T14:39:20Z", "author": {"login": "mcenderdragon"}, "path": "patches/minecraft/net/minecraft/entity/player/ServerPlayerEntity.java.patch", "diffHunk": "@@ -38,10 +39,11 @@\n -         this.field_70128_L = false;\n +         serverworld.removeEntity(this, true); //Forge: the player entity is moved to the new world, NOT cloned. So keep the data alive with no matching invalidate call.\n +         this.revive();\n++         Entity e = teleporter.placeEntity(this, serverworld, serverworld1, this.field_70177_z, spawnPortal -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MzIzNg=="}, "originalCommit": {"oid": "de3dd89041abcdf6dbcd151c4f4b6c93d30c85e4"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0Nzk2OTIwOnYy", "diffSide": "RIGHT", "path": "patches/minecraft/net/minecraft/entity/Entity.java.patch", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMjowNDo1MVrOFbHN9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDozODoyMlrOFcV67Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NDEzNQ==", "bodyText": "Please add //Forge: Start/End vanilla logic to the braces so it's easier for us to grok the logic without the indentations.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r363974135", "createdAt": "2020-01-07T22:04:51Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/entity/Entity.java.patch", "diffHunk": "@@ -222,15 +222,27 @@\n     }\n  \n     public boolean func_70028_i(Entity p_70028_1_) {\n-@@ -2046,6 +2073,7 @@\n+@@ -2046,6 +2073,11 @@\n  \n     @Nullable\n     public Entity func_212321_a(DimensionType p_212321_1_) {\n++      return this.changeDimension(p_212321_1_, func_184102_h().func_71218_a(p_212321_1_).func_85176_s());\n++   }\n++   @Nullable\n++   public Entity changeDimension(DimensionType p_212321_1_, net.minecraftforge.common.util.ITeleporter teleporter) {\n +      if (!net.minecraftforge.common.ForgeHooks.onTravelToDimension(this, p_212321_1_)) return null;\n        if (!this.field_70170_p.field_72995_K && !this.field_70128_L) {\n           this.field_70170_p.func_217381_Z().func_76320_a(\"changeDimension\");\n           MinecraftServer minecraftserver = this.func_184102_h();\n-@@ -2063,16 +2091,9 @@\n+@@ -2055,6 +2087,7 @@\n+          this.field_71093_bK = p_212321_1_;\n+          this.func_213319_R();\n+          this.field_70170_p.func_217381_Z().func_76320_a(\"reposition\");\n++         Entity transportedEntity = teleporter.placeEntity(this, serverworld, serverworld1, this.field_70177_z, spawnPortal -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3987b33832df93bac3d38fdafb19202a149864cf"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTI2MzU5Nw==", "bodyText": "Done", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r365263597", "createdAt": "2020-01-10T14:38:22Z", "author": {"login": "mcenderdragon"}, "path": "patches/minecraft/net/minecraft/entity/Entity.java.patch", "diffHunk": "@@ -222,15 +222,27 @@\n     }\n  \n     public boolean func_70028_i(Entity p_70028_1_) {\n-@@ -2046,6 +2073,7 @@\n+@@ -2046,6 +2073,11 @@\n  \n     @Nullable\n     public Entity func_212321_a(DimensionType p_212321_1_) {\n++      return this.changeDimension(p_212321_1_, func_184102_h().func_71218_a(p_212321_1_).func_85176_s());\n++   }\n++   @Nullable\n++   public Entity changeDimension(DimensionType p_212321_1_, net.minecraftforge.common.util.ITeleporter teleporter) {\n +      if (!net.minecraftforge.common.ForgeHooks.onTravelToDimension(this, p_212321_1_)) return null;\n        if (!this.field_70170_p.field_72995_K && !this.field_70128_L) {\n           this.field_70170_p.func_217381_Z().func_76320_a(\"changeDimension\");\n           MinecraftServer minecraftserver = this.func_184102_h();\n-@@ -2063,16 +2091,9 @@\n+@@ -2055,6 +2087,7 @@\n+          this.field_71093_bK = p_212321_1_;\n+          this.func_213319_R();\n+          this.field_70170_p.func_217381_Z().func_76320_a(\"reposition\");\n++         Entity transportedEntity = teleporter.placeEntity(this, serverworld, serverworld1, this.field_70177_z, spawnPortal -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NDEzNQ=="}, "originalCommit": {"oid": "3987b33832df93bac3d38fdafb19202a149864cf"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0Nzk4OTQwOnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/common/util/ITeleporter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMjoxMzozMlrOFbHaYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDozODozNVrOFcV7bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NzMxMw==", "bodyText": "You don't describe what the return should be, so the docs are incomplete.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r363977313", "createdAt": "2020-01-07T22:13:32Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/common/util/ITeleporter.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2019.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.common.util;\n+\n+import java.util.function.Function;\n+\n+import net.minecraft.entity.Entity;\n+import net.minecraft.world.Teleporter;\n+import net.minecraft.world.dimension.Dimension;\n+import net.minecraft.world.server.ServerWorld;\n+\n+/**\n+ * Interface for handling the placement of entities during dimension change.\n+ *\n+ * An implementation of this interface can be used to place the entity\n+ * in a safe location, or generate a return portal, for instance.\n+ *\n+ * See the {@link net.minecraft.world.Teleporter} class, which has\n+ * been patched to implement this interface, for a vanilla example.\n+ */\n+public interface ITeleporter {\n+\n+    /**\n+     * Called to handle placing the entity in the new world.\n+     *\n+     * The initial position of the entity will be its\n+     * position in the origin world, multiplied horizontally\n+     * by the computed cross-dimensional movement factor\n+     * (see {@link Dimension#getMovementFactor()}).\n+     *\n+     * Note that the supplied entity has not yet been spawned\n+     * in the destination world at the time.\n+     *\n+     * @param entity           the entity to be placed\n+     * @param currentWorld     the entity's origin\n+     * @param destWorld        the entity's destination\n+     * @param yaw              the suggested yaw value to apply\n+     * @param repositionEntity a function to reposition the entity, which returns the new entity in the new dimension. This is the vanilla implementation of the dimension travel logic. If the supplied boolean is true, it is attempted to spawn a new portal.\n+     */\n+    default Entity placeEntity(Entity entity, ServerWorld currentWorld, ServerWorld destWorld, float yaw, Function<Boolean, Entity> repositionEntity) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3987b33832df93bac3d38fdafb19202a149864cf"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTI2MzcyNQ==", "bodyText": "I fixed this.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r365263725", "createdAt": "2020-01-10T14:38:35Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/common/util/ITeleporter.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2019.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.common.util;\n+\n+import java.util.function.Function;\n+\n+import net.minecraft.entity.Entity;\n+import net.minecraft.world.Teleporter;\n+import net.minecraft.world.dimension.Dimension;\n+import net.minecraft.world.server.ServerWorld;\n+\n+/**\n+ * Interface for handling the placement of entities during dimension change.\n+ *\n+ * An implementation of this interface can be used to place the entity\n+ * in a safe location, or generate a return portal, for instance.\n+ *\n+ * See the {@link net.minecraft.world.Teleporter} class, which has\n+ * been patched to implement this interface, for a vanilla example.\n+ */\n+public interface ITeleporter {\n+\n+    /**\n+     * Called to handle placing the entity in the new world.\n+     *\n+     * The initial position of the entity will be its\n+     * position in the origin world, multiplied horizontally\n+     * by the computed cross-dimensional movement factor\n+     * (see {@link Dimension#getMovementFactor()}).\n+     *\n+     * Note that the supplied entity has not yet been spawned\n+     * in the destination world at the time.\n+     *\n+     * @param entity           the entity to be placed\n+     * @param currentWorld     the entity's origin\n+     * @param destWorld        the entity's destination\n+     * @param yaw              the suggested yaw value to apply\n+     * @param repositionEntity a function to reposition the entity, which returns the new entity in the new dimension. This is the vanilla implementation of the dimension travel logic. If the supplied boolean is true, it is attempted to spawn a new portal.\n+     */\n+    default Entity placeEntity(Entity entity, ServerWorld currentWorld, ServerWorld destWorld, float yaw, Function<Boolean, Entity> repositionEntity) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NzMxMw=="}, "originalCommit": {"oid": "3987b33832df93bac3d38fdafb19202a149864cf"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0Nzk5MDAzOnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/server/command/CommandSetDimension.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMjoxMzo1M1rOFbHa1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDozODo0NFrOFcV7zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NzQzMA==", "bodyText": "Shouldn't need to recreate this every invocation.  Or at the very least, just make it a lambda", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r363977430", "createdAt": "2020-01-07T22:13:53Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/server/command/CommandSetDimension.java", "diffHunk": "@@ -64,7 +64,7 @@ private static int execute(CommandSource sender, Collection<? extends Entity> en\n         //    throw INVALID_DIMENSION.create(dim);\n \n         entities.stream().filter(e -> e.dimension == dim).forEach(e -> sender.sendFeedback(new TranslationTextComponent(\"commands.forge.setdim.invalid.nochange\", e.getDisplayName().getFormattedText(), dim), true));\n-        entities.stream().filter(e -> e.dimension != dim).forEach(e ->  e.changeDimension(dim));\n+        entities.stream().filter(e -> e.dimension != dim).forEach(e ->  e.changeDimension(dim, new PortallessTeleporter()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3987b33832df93bac3d38fdafb19202a149864cf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTI2MzgyMw==", "bodyText": "fixed.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r365263823", "createdAt": "2020-01-10T14:38:44Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/server/command/CommandSetDimension.java", "diffHunk": "@@ -64,7 +64,7 @@ private static int execute(CommandSource sender, Collection<? extends Entity> en\n         //    throw INVALID_DIMENSION.create(dim);\n \n         entities.stream().filter(e -> e.dimension == dim).forEach(e -> sender.sendFeedback(new TranslationTextComponent(\"commands.forge.setdim.invalid.nochange\", e.getDisplayName().getFormattedText(), dim), true));\n-        entities.stream().filter(e -> e.dimension != dim).forEach(e ->  e.changeDimension(dim));\n+        entities.stream().filter(e -> e.dimension != dim).forEach(e ->  e.changeDimension(dim, new PortallessTeleporter()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3NzQzMA=="}, "originalCommit": {"oid": "3987b33832df93bac3d38fdafb19202a149864cf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODYyMTM4OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMDoxOToxOFrOFeKi6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxMTo1OTo1NVrOFg7wBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDM3OQ==", "bodyText": "Remove, replace with lambda, (_,_,_,_,repos) -> repos.apply(false)", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r367174379", "createdAt": "2020-01-16T00:19:18Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Minecraft Forge", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "470028b4377ed440adf2ae51a48812f77e565644"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM3MDAwMw==", "bodyText": "This is not possible since ITeleporter would need to be a functional interface then, and functional interfaces are not allowed to be only a default method.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r367370003", "createdAt": "2020-01-16T11:34:57Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Minecraft Forge", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDM3OQ=="}, "originalCommit": {"oid": "470028b4377ed440adf2ae51a48812f77e565644"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwOTQxNw==", "bodyText": "Should I increase patch size of the Teleporter class to make it a functional interface?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r367509417", "createdAt": "2020-01-16T16:11:37Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Minecraft Forge", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDM3OQ=="}, "originalCommit": {"oid": "470028b4377ed440adf2ae51a48812f77e565644"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzU5NDI1OQ==", "bodyText": "Lambda should be possible if the interface is a single method even with a default. I'd have to check later but I could of sworn that I've done that before... But the point is I dont want this 'PortalessTeleporter' class as public api we have to maintain.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r367594259", "createdAt": "2020-01-16T19:00:40Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Minecraft Forge", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDM3OQ=="}, "originalCommit": {"oid": "470028b4377ed440adf2ae51a48812f77e565644"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg4Njc2Mw==", "bodyText": "unterstandable, would a anonymous inner class be better?\nso something like\nprivate static ITeleporter portalless = new ITeleporter(){\n    @Override\n    public Entity placeEntity(Entity entity, ServerWorld currentWorld, ServerWorld destWorld, float yaw, Function<Boolean, Entity> repositionEntity) \n    {\n        return repositionEntity.apply(false);\n    }\n}", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r367886763", "createdAt": "2020-01-17T11:15:56Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Minecraft Forge", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDM3OQ=="}, "originalCommit": {"oid": "470028b4377ed440adf2ae51a48812f77e565644"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDA3NzcwMw==", "bodyText": "Now it is no longer public api.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6404#discussion_r370077703", "createdAt": "2020-01-23T11:59:55Z", "author": {"login": "mcenderdragon"}, "path": "src/main/java/net/minecraftforge/server/command/PortallessTeleporter.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Minecraft Forge", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE3NDM3OQ=="}, "originalCommit": {"oid": "470028b4377ed440adf2ae51a48812f77e565644"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1024, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}