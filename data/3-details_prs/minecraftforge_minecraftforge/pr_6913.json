{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTg4Njc4", "number": 6913, "title": "Load Modded Datapacks in DatapackScreen, before world creation", "bodyText": "There is a new Datapack selection menu when creating worlds, but it is currently impossible to add custom datapacks to it.\nThis is because a ResourcePackList is created, and it needs the ResourcePackLoader.loadResourcePacks hook added to find mod datapacks. Without mod datapacks, some tags get defined in code but are not found in datapack files.\nThis alone fixes #6898 .\nHowever, I also polished up additional things.\nFirst, at that point Forge's Tags was not yet init, and its tags were not all being added to their tag collection. I am not sure what impact tags not being init could have for the datapack screen, but it seems wrong.\nSecondly, the forge:dyes tags are created twice, I removed their creation from Tags and referenced DyeColor instead.\nThirdly, vanilla checks default datapack using a DatapackCodec so I created one which incorporates mods. (This is QOL only, if default and actual dont match, a verification occurs that loads up all datapacks but otherwise no impact)", "createdAt": "2020-07-03T20:42:39Z", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913", "merged": true, "mergeCommit": {"oid": "24f3ef5ffead65bac6618af78ff656e8e8dd414c"}, "closed": true, "closedAt": "2020-07-20T22:56:22Z", "author": {"login": "Cyborgmas"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxZCqDAH2gAyNDQ0MTg4Njc4OmNkZmU5NWI4ZDNjNTcyOTI2OGJiYWIxODE0Y2E1NmYxYjg3YTA3Zjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2xU_UAH2gAyNDQ0MTg4Njc4OmUzMTgyZGExZjZlNGM3NmI2Zjc4MjdiNjVmYzJiNTFkN2ZkNjgwN2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cdfe95b8d3c5729268bbab1814ca56f1b87a07f8", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/cdfe95b8d3c5729268bbab1814ca56f1b87a07f8", "committedDate": "2020-07-03T19:58:54Z", "message": "load forge datapack\n\nremoved duplicate creation of dye tags\ninit forge tags on bootstrap\nUpdated the mcmeta files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5afc3d0d229714197ee524e2de46f7f2160910d8", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5afc3d0d229714197ee524e2de46f7f2160910d8", "committedDate": "2020-07-09T11:18:27Z", "message": "Merge remote-tracking branch 'MinecraftForge/1.16.x' into datapack-validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c942615864d56fd57aa76a9057cb61edc8c4653e", "committedDate": "2020-07-09T23:53:31Z", "message": "Modify the default datapack check to incorporate mods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjU1MDM5", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#pullrequestreview-447655039", "createdAt": "2020-07-13T22:30:06Z", "commit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMDowNlrOGw82JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMDowNlrOGw82JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MTczMg==", "bodyText": "This needs to\n\nNot be a random method shoved onto DatapackCodec\nMake sure all uses of the DatapackCodec.field_234880_a_ uses our default mod pack list.\nNot change this entry every time the button is pressed, but instead do it once in the initalizer and use the argument passed into the constructor like vanilla does.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453981732", "createdAt": "2020-07-13T22:30:06Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/client/gui/screen/CreateWorldScreen.java.patch", "diffHunk": "@@ -0,0 +1,12 @@\n+--- a/net/minecraft/client/gui/screen/CreateWorldScreen.java\n++++ b/net/minecraft/client/gui/screen/CreateWorldScreen.java\n+@@ -384,7 +384,9 @@\n+       if (path != null) {\n+          File file1 = path.toFile();\n+          ResourcePackList<ResourcePackInfo> resourcepacklist = new ResourcePackList<>(ResourcePackInfo::new, new ServerPackFinder(), new FolderPackFinder(file1, IPackNameDecorator.field_232625_a_));\n++         net.minecraftforge.fml.packs.ResourcePackLoader.loadResourcePacks(resourcepacklist, net.minecraftforge.fml.server.ServerLifecycleHooks::buildPackFinder);\n+          resourcepacklist.func_198983_a();\n++         this.field_238933_b_ = DatapackCodec.getModdedDefault();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjU1NDA5", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#pullrequestreview-447655409", "createdAt": "2020-07-13T22:30:46Z", "commit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMDo0NlrOGw84Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMDo0NlrOGw84Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MjI2Mg==", "bodyText": "Again, why are you adding a random method onto this random class instead of say... anywhere else we stick random functions like ForgeHooks?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453982262", "createdAt": "2020-07-13T22:30:46Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/util/datafix/codec/DatapackCodec.java.patch", "diffHunk": "@@ -0,0 +1,12 @@\n+--- a/net/minecraft/util/datafix/codec/DatapackCodec.java\n++++ b/net/minecraft/util/datafix/codec/DatapackCodec.java\n+@@ -29,4 +29,9 @@\n+    public List<String> func_234887_b_() {\n+       return this.field_234883_d_;\n+    }\n++\n++   @Deprecated //Forge internal\n++   public static DatapackCodec getModdedDefault() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjU1NzUy", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#pullrequestreview-447655752", "createdAt": "2020-07-13T22:31:24Z", "commit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMToyNVrOGw86BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMToyNVrOGw86BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MjcyNQ==", "bodyText": "This does absolutely nothing. Congrats you run the static tantalizer of the outer class. It doesn't do anything to the inner classes.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453982725", "createdAt": "2020-07-13T22:31:25Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/common/Tags.java", "diffHunk": "@@ -34,6 +35,8 @@\n \n public class Tags\n {\n+    public static void init () {}; //Dummy init, create the tags so that they are added to their collections.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjU2NDc1", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#pullrequestreview-447656475", "createdAt": "2020-07-13T22:32:49Z", "commit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMjo0OVrOGw89tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozMjo0OVrOGw89tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MzY3MQ==", "bodyText": "I mean, is there a reason for this change? Ya I guess it's a little bit of cleanup making only one instance referenced multiple places. But that doesn't matter. The game will update both just fine.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453983671", "createdAt": "2020-07-13T22:32:49Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/common/Tags.java", "diffHunk": "@@ -153,22 +156,22 @@\n         public static final ITag.INamedTag<Item> DUSTS_GLOWSTONE = tag(\"dusts/glowstone\");\n \n         public static final ITag.INamedTag<Item> DYES = tag(\"dyes\");\n-        public static final ITag.INamedTag<Item> DYES_BLACK = tag(\"dyes/black\");\n-        public static final ITag.INamedTag<Item> DYES_RED = tag(\"dyes/red\");\n-        public static final ITag.INamedTag<Item> DYES_GREEN = tag(\"dyes/green\");\n-        public static final ITag.INamedTag<Item> DYES_BROWN = tag(\"dyes/brown\");\n-        public static final ITag.INamedTag<Item> DYES_BLUE = tag(\"dyes/blue\");\n-        public static final ITag.INamedTag<Item> DYES_PURPLE = tag(\"dyes/purple\");\n-        public static final ITag.INamedTag<Item> DYES_CYAN = tag(\"dyes/cyan\");\n-        public static final ITag.INamedTag<Item> DYES_LIGHT_GRAY = tag(\"dyes/light_gray\");\n-        public static final ITag.INamedTag<Item> DYES_GRAY = tag(\"dyes/gray\");\n-        public static final ITag.INamedTag<Item> DYES_PINK = tag(\"dyes/pink\");\n-        public static final ITag.INamedTag<Item> DYES_LIME = tag(\"dyes/lime\");\n-        public static final ITag.INamedTag<Item> DYES_YELLOW = tag(\"dyes/yellow\");\n-        public static final ITag.INamedTag<Item> DYES_LIGHT_BLUE = tag(\"dyes/light_blue\");\n-        public static final ITag.INamedTag<Item> DYES_MAGENTA = tag(\"dyes/magenta\");\n-        public static final ITag.INamedTag<Item> DYES_ORANGE = tag(\"dyes/orange\");\n-        public static final ITag.INamedTag<Item> DYES_WHITE = tag(\"dyes/white\");\n+        public static final ITag.INamedTag<Item> DYES_BLACK = DyeColor.BLACK.getTag();\n+        public static final ITag.INamedTag<Item> DYES_RED = DyeColor.RED.getTag();\n+        public static final ITag.INamedTag<Item> DYES_GREEN = DyeColor.GREEN.getTag();\n+        public static final ITag.INamedTag<Item> DYES_BROWN = DyeColor.BROWN.getTag();\n+        public static final ITag.INamedTag<Item> DYES_BLUE = DyeColor.BLUE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_PURPLE = DyeColor.PURPLE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_CYAN = DyeColor.CYAN.getTag();\n+        public static final ITag.INamedTag<Item> DYES_LIGHT_GRAY = DyeColor.LIGHT_GRAY.getTag();\n+        public static final ITag.INamedTag<Item> DYES_GRAY = DyeColor.GRAY.getTag();\n+        public static final ITag.INamedTag<Item> DYES_PINK = DyeColor.PINK.getTag();\n+        public static final ITag.INamedTag<Item> DYES_LIME = DyeColor.LIME.getTag();\n+        public static final ITag.INamedTag<Item> DYES_YELLOW = DyeColor.YELLOW.getTag();\n+        public static final ITag.INamedTag<Item> DYES_LIGHT_BLUE = DyeColor.LIGHT_BLUE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_MAGENTA = DyeColor.MAGENTA.getTag();\n+        public static final ITag.INamedTag<Item> DYES_ORANGE = DyeColor.ORANGE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_WHITE = DyeColor.WHITE.getTag();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjU3NDcy", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#pullrequestreview-447657472", "createdAt": "2020-07-13T22:34:49Z", "commit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozNDo0OVrOGw9DPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjozNDo0OVrOGw9DPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4NTA4Nw==", "bodyText": "Unrelated but sure whatever", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453985087", "createdAt": "2020-07-13T22:34:49Z", "author": {"login": "LexManos"}, "path": "src/main/resources/pack.mcmeta", "diffHunk": "@@ -1,6 +1,6 @@\n {\n    \"pack\": {\n-      \"pack_format\": 4,\n+      \"pack_format\": 5,\n       \"description\": \"Forge resource pack\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0ff06fb03bda3d76839fdb49679965f11067940", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a0ff06fb03bda3d76839fdb49679965f11067940", "committedDate": "2020-07-13T23:54:23Z", "message": "Merge branch '1.16.x' into datapack-validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95a5582c9692f70a25dbdd9a9c5ff2fb164ada05", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/95a5582c9692f70a25dbdd9a9c5ff2fb164ada05", "committedDate": "2020-07-14T19:08:03Z", "message": "fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb74b43007a88f1d0647239030791edf4ba3b637", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/eb74b43007a88f1d0647239030791edf4ba3b637", "committedDate": "2020-07-14T19:15:57Z", "message": "patch clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c13e9e9fda9cd9711c715cd0819912516ed81e80", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c13e9e9fda9cd9711c715cd0819912516ed81e80", "committedDate": "2020-07-20T12:59:48Z", "message": "Merge branch '1.16.x' into datapack-validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3182da1f6e4c76b6f7827b65fc2b51d7fd6807a", "author": {"user": {"login": "Cyborgmas", "name": "Cyborgmas"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/e3182da1f6e4c76b6f7827b65fc2b51d7fd6807a", "committedDate": "2020-07-20T13:06:16Z", "message": "merged"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2016, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}