{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MDgzMTUw", "number": 7515, "title": "Allow mods to use custom LootParameter when querying existing loot tables (e.g. blocks).", "bodyText": "I had recently encountered a situation upon which I wanted to break a block via code, but not drop the normal drops (in this case, drop something different entirely). Now, I could just set the block state, don't cause vanilla drops, and spawn my custom drops manually. However this goes against the benefits of having all block drops being done via loot tables. So the obvious answer is to make add some form of condition onto the loot table that is aware of this particular case. And vanilla has a perfectly usable system for this! Introduce LootParameter:\n\nThis is already used to pass a number of objects, such as the block state, position, player, or harvesting tool as part of the LootContext, which is then available to any code-defined LootFunctions, or LootConditions.\nThis seems like the ideal solution for my use case: define a new LootParameter (basically a marker), pass it into the LootContext builder, trigger block drops manually, and then using my new LootCondition, I am able to check for the existence of this parameter on the loot table itself! Fantastic!\n\nExcept there's a problem. Vanilla has a set of allowed and required LootParameters, and won't let you create a loot table with parameters that aren't already hardcoded in a predefined list for each loot table.\nThis PR simply removes the \"allowed\" limit, letting mods add new parameters to the loot context.", "createdAt": "2020-11-24T00:47:51Z", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7515", "merged": true, "mergeCommit": {"oid": "b8eca88f75be6b0800f933d464f13675dfaa9df2"}, "closed": true, "closedAt": "2021-02-15T22:52:00Z", "author": {"login": "alcatrazEscapee"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdftMVIgFqTUzNzc0NzE3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABd28e_bABqjQyOTMzMjIxNTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NzQ3MTc1", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7515#pullrequestreview-537747175", "createdAt": "2020-11-24T17:28:05Z", "commit": {"oid": "3eafff0cf4a2a2b52d087e3e92145b9576be9735"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzoyODowNVrOH5NhzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzoyODowNVrOH5NhzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc1MjUyNQ==", "bodyText": "This comment makes it sound like this patch prevents mods from adding their own parameters.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7515#discussion_r529752525", "createdAt": "2020-11-24T17:28:05Z", "author": {"login": "mrp-v2"}, "path": "patches/minecraft/net/minecraft/loot/LootContext.java.patch", "diffHunk": "@@ -26,3 +26,12 @@\n        public LootContext.Builder func_216023_a(Random p_216023_1_) {\n           this.field_216027_d = p_216023_1_;\n           return this;\n+@@ -177,7 +189,7 @@\n+ \n+       public LootContext func_216022_a(LootParameterSet p_216022_1_) {\n+          Set<LootParameter<?>> set = Sets.difference(this.field_216025_b.keySet(), p_216022_1_.func_216276_b());\n+-         if (!set.isEmpty()) {\n++         if (false && !set.isEmpty()) { // Forge: this prevents mods from adding their own parameters - just ignore extra provided parameters", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3eafff0cf4a2a2b52d087e3e92145b9576be9735"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df31f717795df5e549ad8489db4c0f7e00b438d2", "author": {"user": {"login": "alcatrazEscapee", "name": "Alex O'Neill"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/df31f717795df5e549ad8489db4c0f7e00b438d2", "committedDate": "2021-02-04T22:16:16Z", "message": "Fix merge conflict"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41ef44d8961c3795c8c33cc1c1fa349288c1f323", "author": {"user": {"login": "alcatrazEscapee", "name": "Alex O'Neill"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/41ef44d8961c3795c8c33cc1c1fa349288c1f323", "committedDate": "2020-11-24T17:58:00Z", "message": "Reword comment"}, "afterCommit": {"oid": "df31f717795df5e549ad8489db4c0f7e00b438d2", "author": {"user": {"login": "alcatrazEscapee", "name": "Alex O'Neill"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/df31f717795df5e549ad8489db4c0f7e00b438d2", "committedDate": "2021-02-04T22:16:16Z", "message": "Fix merge conflict"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2232, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}