{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MjY5Mzc3", "number": 7181, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToyNzo0MlrOESuu2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNzo0MTo1OVrOEWf_Ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDc1NDgwOnYy", "diffSide": "RIGHT", "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToyNzo0MlrOG4Ebcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToyNzo0MlrOG4Ebcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ0NjAwMg==", "bodyText": "Should probably be disabled by default. Also, please keep you curly brackets style at least consistent within on class and move it to a new line.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r461446002", "createdAt": "2020-07-28T09:27:42Z", "author": {"login": "ichttt"}, "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.debug.fluid;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.fluid.FluidState;\n+import net.minecraft.fluid.Fluids;\n+import net.minecraftforge.event.world.BlockEvent;\n+import net.minecraftforge.eventbus.api.Event;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+\n+@Mod(\"finite_water_test\")\n+@Mod.EventBusSubscriber()\n+public class FiniteWaterTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cc79a2685ad7aff8176b17a5183cefc849e91dc"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDc1NTczOnYy", "diffSide": "RIGHT", "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToyNzo1NFrOG4EcAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToyNzo1NFrOG4EcAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ0NjE0NA==", "bodyText": "spaces between if and bracket please", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r461446144", "createdAt": "2020-07-28T09:27:54Z", "author": {"login": "ichttt"}, "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.debug.fluid;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.fluid.FluidState;\n+import net.minecraft.fluid.Fluids;\n+import net.minecraftforge.event.world.BlockEvent;\n+import net.minecraftforge.eventbus.api.Event;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+\n+@Mod(\"finite_water_test\")\n+@Mod.EventBusSubscriber()\n+public class FiniteWaterTest {\n+    @SubscribeEvent\n+    public static void handleFiniteWaterSource(BlockEvent.CreateFluidSourceEvent event)\n+    {\n+        BlockState state = event.getState();\n+        FluidState fluidState = state.getFluidState();\n+        if(fluidState.getFluid().isEquivalentTo(Fluids.WATER))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cc79a2685ad7aff8176b17a5183cefc849e91dc"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDgwOTUxOnYy", "diffSide": "RIGHT", "path": "patches/minecraft/net/minecraft/fluid/FlowingFluid.java.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo0MTo0OFrOG4E9Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo0MTo0OFrOG4E9Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ1NDYxOQ==", "bodyText": "This is not the correct place to insert the patch. Move it below to where if (this.canSourcesMultiply() && j >= 2) is checked, and replace it with j >= 2 && if (j >= 2 && net.minecraftforge.event.ForgeEventFactory.canCreateFluidSource(worldIn, pos, blockStateIn, canSourcesMultiply())), so you can also use the event the other way around (making fluid sources for blocks that normally don't make them).\nIt would also be better if we could just change the method to accept IWorldReader instead of casting to World.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r461454619", "createdAt": "2020-07-28T09:41:48Z", "author": {"login": "ichttt"}, "path": "patches/minecraft/net/minecraft/fluid/FlowingFluid.java.patch", "diffHunk": "@@ -0,0 +1,11 @@\n+--- a/net/minecraft/fluid/FlowingFluid.java\n++++ b/net/minecraft/fluid/FlowingFluid.java\n+@@ -159,7 +159,7 @@\n+          BlockState blockstate = p_205576_1_.func_180495_p(blockpos);\n+          FluidState fluidstate = blockstate.func_204520_s();\n+          if (fluidstate.func_206886_c().func_207187_a(this) && this.func_212751_a(direction, p_205576_1_, p_205576_2_, p_205576_3_, blockpos, blockstate)) {\n+-            if (fluidstate.func_206889_d()) {\n++            if (fluidstate.func_206889_d() && net.minecraftforge.event.ForgeEventFactory.canCreateFluidSource((World) p_205576_1_, p_205576_2_, blockstate, this.func_205579_d())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cc79a2685ad7aff8176b17a5183cefc849e91dc"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDI0NzI4OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/event/ForgeEventFactory.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1MjozOVrOG906ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1MjozOVrOG906ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzIzNw==", "bodyText": "This is a binary-breaking change and won't be accepted for 1.16.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483237", "createdAt": "2020-08-08T16:52:39Z", "author": {"login": "diesieben07"}, "path": "src/main/java/net/minecraftforge/event/ForgeEventFactory.java", "diffHunk": "@@ -661,7 +662,7 @@ public static LootTable loadLootTable(ResourceLocation name, LootTable table, Lo\n         return event.getTable();\n     }\n \n-    public static boolean canCreateFluidSource(World world, BlockPos pos, BlockState state, boolean def)\n+    public static boolean canCreateFluidSource(IWorldReader world, BlockPos pos, BlockState state, boolean def)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a776ba94b3b2c780df37af871d125d1395c5931e"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDI0NzQ1OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1Mjo1M1rOG906ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1Mjo1M1rOG906ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzI1OQ==", "bodyText": "Binary breaking change", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483259", "createdAt": "2020-08-08T16:52:53Z", "author": {"login": "diesieben07"}, "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -281,9 +282,9 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n-        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a776ba94b3b2c780df37af871d125d1395c5931e"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDI0NzY4OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1MzoxN1rOG906lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNzo0MTowOFrOG91KmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzI4NQ==", "bodyText": "You can't just blindly cast things.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483285", "createdAt": "2020-08-08T16:53:17Z", "author": {"login": "diesieben07"}, "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -281,9 +282,9 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n-        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)\n         {\n-            super(world, pos, state);\n+            super((IWorld) world, pos, state);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a776ba94b3b2c780df37af871d125d1395c5931e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzM4NQ==", "bodyText": "What do you think about it? super(world instanceof IWorld ? (IWorld) world : null, pos, state);", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467487385", "createdAt": "2020-08-08T17:41:08Z", "author": {"login": "Edivad99"}, "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -281,9 +282,9 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n-        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)\n         {\n-            super(world, pos, state);\n+            super((IWorld) world, pos, state);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzI4NQ=="}, "originalCommit": {"oid": "a776ba94b3b2c780df37af871d125d1395c5931e"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDI0Nzk4OnYy", "diffSide": "RIGHT", "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1Mzo0OVrOG906uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjo1Mzo0OVrOG906uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzMyMQ==", "bodyText": "Formatting (braces on newlines).", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467483321", "createdAt": "2020-08-08T16:53:49Z", "author": {"login": "diesieben07"}, "path": "src/test/java/net/minecraftforge/debug/fluid/FiniteWaterTest.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.debug.fluid;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.fluid.FluidState;\n+import net.minecraft.fluid.Fluids;\n+import net.minecraftforge.event.world.BlockEvent;\n+import net.minecraftforge.eventbus.api.Event;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import net.minecraftforge.fml.common.Mod;\n+\n+@Mod(\"finite_water_test\")\n+@Mod.EventBusSubscriber()\n+public class FiniteWaterTest\n+{\n+    private static final boolean ENABLED = false;\n+\n+    @SubscribeEvent\n+    public static void handleFiniteWaterSource(BlockEvent.CreateFluidSourceEvent event)\n+    {\n+        if (ENABLED) {\n+            BlockState state = event.getState();\n+            FluidState fluidState = state.getFluidState();\n+            if (fluidState.getFluid().isEquivalentTo(Fluids.WATER)) {\n+                event.setResult(Event.Result.DENY);\n+            }\n+            else if (fluidState.getFluid().isEquivalentTo(Fluids.LAVA)) {\n+                event.setResult(Event.Result.ALLOW);\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a776ba94b3b2c780df37af871d125d1395c5931e"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDI4MTk0OnYy", "diffSide": "RIGHT", "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNzo0MTo1OVrOG91K6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNzo0MTo1OVrOG91K6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzQ2NQ==", "bodyText": "So if it's not an IWorld you can't access it at all? That's not helpful...", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7181#discussion_r467487465", "createdAt": "2020-08-08T17:41:59Z", "author": {"login": "diesieben07"}, "path": "src/main/java/net/minecraftforge/event/world/BlockEvent.java", "diffHunk": "@@ -282,9 +282,15 @@ public boolean getForceRedstoneUpdate()\n     @HasResult\n     public static class CreateFluidSourceEvent extends BlockEvent\n     {\n+        @Deprecated\n+        public CreateFluidSourceEvent(World world, BlockPos pos, BlockState state)\n+        {\n+            super(world, pos, state);\n+        }\n+\n         public CreateFluidSourceEvent(IWorldReader world, BlockPos pos, BlockState state)\n         {\n-            super((IWorld) world, pos, state);\n+            super(world instanceof IWorld ? (IWorld) world : null, pos, state);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a60775dbfe09856e40afaa34b4507c23ef2c98a"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 878, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}