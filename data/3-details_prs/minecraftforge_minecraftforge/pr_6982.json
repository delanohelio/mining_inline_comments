{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMjcyODYy", "number": 6982, "title": "[1.16] Add data generators for sounds.json", "bodyText": "Abstract\nThis is the 1.16.1 port of PR #6746, whose goal is to provide a data generator for the sounds.json file, as previously requested in #6523 (comment).\nAll restrictions in place have been taken directly from vanilla's SoundListSerializer, which is used to convert this file into an actual list of sounds.\nTo account for sounds being downloaded separately from the game, a modification of the arguments needed for data generation and therefore the main entry point for user dev (LaunchTesting) has been changed to accommodate the need for additional parameters. This has been done as a completely separate commit from the rest, so that it can be easily dropped in case the changes are deemed too invasive.", "createdAt": "2020-07-17T16:58:17Z", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982", "merged": true, "mergeCommit": {"oid": "a6d1646591d73c07e4c065b7094d440f43df6177"}, "closed": true, "closedAt": "2021-07-17T00:24:16Z", "author": {"login": "TheSilkMiner"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc125B5ABqjM1NTkwMzA2NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeoGv3IAFqTcwMTE4NTA2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b921393201f65043a999c0edf2917c3b4c9b437", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/9b921393201f65043a999c0edf2917c3b4c9b437", "committedDate": "2020-07-17T16:53:51Z", "message": "Add data-generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "5de2448019d6f36e65ef075c0ecbcc3e2b1058ac", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5de2448019d6f36e65ef075c0ecbcc3e2b1058ac", "committedDate": "2020-07-17T17:00:55Z", "message": "Add data-generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5de2448019d6f36e65ef075c0ecbcc3e2b1058ac", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5de2448019d6f36e65ef075c0ecbcc3e2b1058ac", "committedDate": "2020-07-17T17:00:55Z", "message": "Add data-generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "00455dc1b20de8657b43be60b1bf2847a12e4979", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/00455dc1b20de8657b43be60b1bf2847a12e4979", "committedDate": "2020-07-23T10:26:31Z", "message": "Add data-generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDU0MTY4", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-456454168", "createdAt": "2020-07-28T09:19:30Z", "commit": {"oid": "00455dc1b20de8657b43be60b1bf2847a12e4979"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToxOTozMFrOG4EIXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOToyMDo0NlrOG4ELPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ0MTExOA==", "bodyText": "Please move this and all related classes to the data gen package.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r461441118", "createdAt": "2020-07-28T09:19:30Z", "author": {"login": "ichttt"}, "path": "src/main/java/net/minecraftforge/client/sounds/generators/SoundDefinition.java", "diffHunk": "@@ -0,0 +1,449 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.client.sounds.generators;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00455dc1b20de8657b43be60b1bf2847a12e4979"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ0MTg1Mg==", "bodyText": "it would be nice if this could match the vanilla file, so if you could auto-remove the minecraft prefix if that would be great!", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r461441852", "createdAt": "2020-07-28T09:20:46Z", "author": {"login": "ichttt"}, "path": "src/generated_test/resources/assets/data_gen_test/sounds.json", "diffHunk": "@@ -0,0 +1,125 @@\n+{\n+  \"ambient.underwater.loop.additions\": {\n+    \"sounds\": [\n+      \"minecraft:ambient/underwater/additions/bubbles1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00455dc1b20de8657b43be60b1bf2847a12e4979"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00455dc1b20de8657b43be60b1bf2847a12e4979", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/00455dc1b20de8657b43be60b1bf2847a12e4979", "committedDate": "2020-07-23T10:26:31Z", "message": "Add data-generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "d5ada60fc7a4c93107e624b7ecf08da4d6c1b3b6", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/d5ada60fc7a4c93107e624b7ecf08da4d6c1b3b6", "committedDate": "2020-07-28T12:40:01Z", "message": "Allow the downloadable resource pack to be queried in datagen\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5ada60fc7a4c93107e624b7ecf08da4d6c1b3b6", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/d5ada60fc7a4c93107e624b7ecf08da4d6c1b3b6", "committedDate": "2020-07-28T12:40:01Z", "message": "Allow the downloadable resource pack to be queried in datagen\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "677fa031f0f89d2d19135fed6729f78b42adc25e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/677fa031f0f89d2d19135fed6729f78b42adc25e", "committedDate": "2020-07-28T12:43:02Z", "message": "Allow the downloadable resource pack to be queried in datagen\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "677fa031f0f89d2d19135fed6729f78b42adc25e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/677fa031f0f89d2d19135fed6729f78b42adc25e", "committedDate": "2020-07-28T12:43:02Z", "message": "Allow the downloadable resource pack to be queried in datagen\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "c4f807b1cf83086ee04361899729912554c6031f", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c4f807b1cf83086ee04361899729912554c6031f", "committedDate": "2020-09-13T09:31:43Z", "message": "Fix conflicts and update to 1.16.3\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4f807b1cf83086ee04361899729912554c6031f", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c4f807b1cf83086ee04361899729912554c6031f", "committedDate": "2020-09-13T09:31:43Z", "message": "Fix conflicts and update to 1.16.3\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "99677cff3b53928b37cc0d11bd6ea5d8a5ce6a42", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/99677cff3b53928b37cc0d11bd6ea5d8a5ce6a42", "committedDate": "2020-09-13T11:06:21Z", "message": "Fix conflicts and update to 1.16.3\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99677cff3b53928b37cc0d11bd6ea5d8a5ce6a42", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/99677cff3b53928b37cc0d11bd6ea5d8a5ce6a42", "committedDate": "2020-09-13T11:06:21Z", "message": "Fix conflicts and update to 1.16.3\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "fe813d362fd4d720328ffeb9854798b2ba0c4eab", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/fe813d362fd4d720328ffeb9854798b2ba0c4eab", "committedDate": "2020-09-13T11:35:33Z", "message": "Fix conflicts and update to 1.16.3\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNzQzNDg3", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-493743487", "createdAt": "2020-09-22T18:37:24Z", "commit": {"oid": "fe813d362fd4d720328ffeb9854798b2ba0c4eab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxODozNzoyNVrOHWHc9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxODozNzoyNVrOHWHc9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk1MjgyMQ==", "bodyText": "This will NPE if someone doesn't specify the assetsDir, its not marked as required, and it shouldn't be. So you can't do .toPath directly. You need a null check", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r492952821", "createdAt": "2020-09-22T18:37:25Z", "author": {"login": "LexManos"}, "path": "patches/minecraft/net/minecraft/data/Main.java.patch", "diffHunk": "@@ -26,7 +28,7 @@\n +         Collection<Path> existingPacks = optionset.valuesOf(existing).stream().map(Paths::get).collect(Collectors.toList());\n +         java.util.Set<String> mods = new java.util.HashSet<>(optionset.valuesOf(mod));\n +         boolean isFlat = mods.isEmpty() || optionset.has(flat);\n-+         net.minecraftforge.fml.DatagenModLoader.begin(mods, path, inputs, existingPacks, flag2, flag1, flag3, flag4, flag5, isFlat);\n++         net.minecraftforge.fml.DatagenModLoader.begin(mods, path, inputs, existingPacks, optionset.valueOf(assetIndex), optionset.valueOf(assetsDir).toPath(), flag2, flag1, flag3, flag4, flag5, isFlat);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe813d362fd4d720328ffeb9854798b2ba0c4eab"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNzQ0MjM0", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-493744234", "createdAt": "2020-09-22T18:38:20Z", "commit": {"oid": "fe813d362fd4d720328ffeb9854798b2ba0c4eab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxODozODoyMFrOHWHe9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxODozODoyMFrOHWHe9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk1MzMzNA==", "bodyText": "What is your facination with adding arguments to the middle of the argument list?\nNew arguments go on the end, and ideally keep the old method bouncing to the new with default values.", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r492953334", "createdAt": "2020-09-22T18:38:20Z", "author": {"login": "LexManos"}, "path": "src/main/java/net/minecraftforge/common/data/ExistingFileHelper.java", "diffHunk": "@@ -48,17 +52,24 @@\n     private final SimpleReloadableResourceManager clientResources, serverData;\n     private final boolean enable;\n \n-    public ExistingFileHelper(Collection<Path> existingPacks, boolean enable) {\n+    public ExistingFileHelper(Collection<Path> existingPacks, @Nullable final String assetIndex, @Nullable final File assetsDir, boolean enable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe813d362fd4d720328ffeb9854798b2ba0c4eab"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe813d362fd4d720328ffeb9854798b2ba0c4eab", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/fe813d362fd4d720328ffeb9854798b2ba0c4eab", "committedDate": "2020-09-13T11:35:33Z", "message": "Fix conflicts and update to 1.16.3\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "a767fe99237384506ead78d8bd31cbb70a2b4328", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a767fe99237384506ead78d8bd31cbb70a2b4328", "committedDate": "2020-09-22T19:23:55Z", "message": "Address comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a767fe99237384506ead78d8bd31cbb70a2b4328", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a767fe99237384506ead78d8bd31cbb70a2b4328", "committedDate": "2020-09-22T19:23:55Z", "message": "Address comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "64a3e225513cf63d84511415e2127ce1ef76523c", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/64a3e225513cf63d84511415e2127ce1ef76523c", "committedDate": "2020-10-21T09:58:59Z", "message": "Address comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NjkzMzAz", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-559693303", "createdAt": "2020-12-29T20:43:07Z", "commit": {"oid": "64a3e225513cf63d84511415e2127ce1ef76523c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMDo0MzowN1rOIMXnug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMDo0NTo1MFrOIMXqgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg0MDgyNg==", "bodyText": "Don't we have that set up now? We should be able to compare the generated file with the original file", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r549840826", "createdAt": "2020-12-29T20:43:07Z", "author": {"login": "ichttt"}, "path": "src/test/java/net/minecraftforge/debug/DataGeneratorTest.java", "diffHunk": "@@ -201,6 +205,83 @@ protected void registerRecipes(Consumer<IFinishedRecipe> consumer)\n         }\n     }\n \n+    public static class SoundDefinitions extends SoundDefinitionsProvider\n+    {\n+        public SoundDefinitions(final DataGenerator generator, final ExistingFileHelper helper)\n+        {\n+            super(generator, MODID, helper);\n+        }\n+\n+        @Override\n+        public void registerSounds()\n+        {\n+            // Taken from vanilla's 'sounds.json'. These are supposed to be 1-to-1 copies, but currently\n+            // automatic testing of those copies cannot be performed due to limitations in the data-gen\n+            // system, where the additional data pack that vanilla loads from the launcher's assets/\n+            // directory isn't actually loaded when running data-gen.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64a3e225513cf63d84511415e2127ce1ef76523c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg0MTUzOQ==", "bodyText": "Although run from datagen, this is a binary break. Please just leave the old contructor, and deprecate it. Also, please add the new parameters to the end of the parameter list", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r549841539", "createdAt": "2020-12-29T20:45:50Z", "author": {"login": "ichttt"}, "path": "src/main/java/net/minecraftforge/fml/DatagenModLoader.java", "diffHunk": "@@ -39,13 +40,13 @@ public static boolean isRunningDataGen() {\n         return runningDataGen;\n     }\n \n-    public static void begin(final Set<String> mods, final Path path, final java.util.Collection<Path> inputs, Collection<Path> existingPacks, final boolean serverGenerators, final boolean clientGenerators, final boolean devToolGenerators, final boolean reportsGenerator, final boolean structureValidator, final boolean flat) {\n+    public static void begin(final Set<String> mods, final Path path, final Collection<Path> inputs, Collection<Path> existingPacks, final String assetIndex, final File assetsDir, final boolean serverGenerators, final boolean clientGenerators, final boolean devToolGenerators, final boolean reportsGenerator, final boolean structureValidator, final boolean flat) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64a3e225513cf63d84511415e2127ce1ef76523c"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64a3e225513cf63d84511415e2127ce1ef76523c", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/64a3e225513cf63d84511415e2127ce1ef76523c", "committedDate": "2020-10-21T09:58:59Z", "message": "Address comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "f8dac26d7a6258d32563f0480d56bf93550a7c5e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f8dac26d7a6258d32563f0480d56bf93550a7c5e", "committedDate": "2020-12-30T14:21:59Z", "message": "Add automatic test of generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4MTQyOTQx", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-568142941", "createdAt": "2021-01-14T11:23:12Z", "commit": {"oid": "f8dac26d7a6258d32563f0480d56bf93550a7c5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjQ0NDAwMjA1", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-644400205", "createdAt": "2021-04-26T08:32:19Z", "commit": {"oid": "f8dac26d7a6258d32563f0480d56bf93550a7c5e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0yNlQwODozMjoxOVrOJPW3JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0yNlQwODozMjoxOVrOJPW3JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDA4Mjk4MQ==", "bodyText": "It seems a bit unnecessary to define bouncers for all these methods when they could just be defined in this class entirely. What purpose does defining them inside the implementation serve?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r620082981", "createdAt": "2021-04-26T08:32:19Z", "author": {"login": "tterrag1098"}, "path": "src/main/java/net/minecraftforge/common/data/SoundDefinitionsProvider.java", "diffHunk": "@@ -0,0 +1,270 @@\n+/*\n+ * Minecraft Forge\n+ * Copyright (c) 2016-2020.\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.minecraftforge.common.data;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+import com.google.gson.JsonObject;\n+import net.minecraft.data.DataGenerator;\n+import net.minecraft.data.DirectoryCache;\n+import net.minecraft.data.IDataProvider;\n+import net.minecraft.resources.ResourcePackType;\n+import net.minecraft.util.ResourceLocation;\n+import net.minecraft.util.SoundEvent;\n+import net.minecraftforge.registries.ForgeRegistries;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Data provider for the {@code sounds.json} file, which identifies sound definitions\n+ * for the various sound events in Minecraft.\n+ */\n+public abstract class SoundDefinitionsProvider implements IDataProvider\n+{\n+    private static final Logger LOGGER = LogManager.getLogger();\n+    private static final Gson GSON = new GsonBuilder().setPrettyPrinting().disableHtmlEscaping().create();\n+    private final DataGenerator generator;\n+    private final String modId;\n+    private final ExistingFileHelper helper;\n+\n+    private final Map<String, SoundDefinition> sounds = new LinkedHashMap<>();\n+\n+    /**\n+     * Creates a new instance of this data provider.\n+     *\n+     * @param generator The data generator instance provided by the event you are initializing this provider in.\n+     * @param modId The mod ID of the current mod.\n+     * @param helper The existing file helper provided by the event you are initializing this provider in.\n+     */\n+    protected SoundDefinitionsProvider(final DataGenerator generator, final String modId, final ExistingFileHelper helper)\n+    {\n+        this.generator = generator;\n+        this.modId = modId;\n+        this.helper = helper;\n+    }\n+\n+    /**\n+     * Registers the sound definitions that should be generated via one of the {@code add} methods.\n+     */\n+    public abstract void registerSounds();\n+\n+    @Override\n+    public void act(DirectoryCache cache) throws IOException\n+    {\n+        this.sounds.clear();\n+        this.registerSounds();\n+        this.validate();\n+        if (!this.sounds.isEmpty())\n+        {\n+            this.save(cache, this.generator.getOutputFolder().resolve(\"assets/\" + this.modId + \"/sounds.json\"));\n+        }\n+    }\n+\n+    @Override\n+    public String getName()\n+    {\n+        return \"Sound Definitions\";\n+    }\n+\n+    // Quick helpers\n+    /**\n+     * @see SoundDefinition#definition()\n+     */\n+    protected static SoundDefinition definition()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8dac26d7a6258d32563f0480d56bf93550a7c5e"}, "originalPosition": 98}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8dac26d7a6258d32563f0480d56bf93550a7c5e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f8dac26d7a6258d32563f0480d56bf93550a7c5e", "committedDate": "2020-12-30T14:21:59Z", "message": "Add automatic test of generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "18dad3c388551e46660002a69268a98f7a7f4507", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/18dad3c388551e46660002a69268a98f7a7f4507", "committedDate": "2021-04-26T20:05:16Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjQ5OTA0OTEw", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-649904910", "createdAt": "2021-05-02T11:10:49Z", "commit": {"oid": "18dad3c388551e46660002a69268a98f7a7f4507"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wMlQxMToxMDo0OVrOJTvOoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wMlQxMToxMTo0OFrOJTvPOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDY3NjUxMg==", "bodyText": "What's with these whitespace changes?", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r624676512", "createdAt": "2021-05-02T11:10:49Z", "author": {"login": "TheCurle"}, "path": "src/main/java/net/minecraftforge/client/model/generators/ModelProvider.java", "diffHunk": "@@ -357,7 +356,7 @@ public T nested()\n         ret.assertExistence();\n         return ret;\n     }\n-    \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18dad3c388551e46660002a69268a98f7a7f4507"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDY3NjY2NA==", "bodyText": "w-w-w-whitespace!", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#discussion_r624676664", "createdAt": "2021-05-02T11:11:48Z", "author": {"login": "TheCurle"}, "path": "src/main/java/net/minecraftforge/common/data/ExistingFileHelper.java", "diffHunk": "@@ -218,7 +233,7 @@ public void trackGenerated(ResourceLocation loc, IResourceType type) {\n      * <p>\n      * This represents a <em>promise</em> to generate the file later, since other\n      * datagen may rely on this file existing.\n-     * \n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18dad3c388551e46660002a69268a98f7a7f4507"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d8958546d3f61c9a1cf4ed1336caa8028ccfb53", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/8d8958546d3f61c9a1cf4ed1336caa8028ccfb53", "committedDate": "2021-07-01T16:11:15Z", "message": "Add data generators for sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bdb8c6522b5a2034097162a73863e5090c8e16e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/2bdb8c6522b5a2034097162a73863e5090c8e16e", "committedDate": "2021-07-01T16:11:19Z", "message": "Add data gen test mod\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e97c241183a47dd42c6d5457334ec55002e00d6f", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/e97c241183a47dd42c6d5457334ec55002e00d6f", "committedDate": "2021-07-01T16:11:19Z", "message": "Refactor package and remove 'minecraft' prefix from definitions\n\nAlso add data-generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f65b1a6cf500735bb9c06b9217b94b926ee7852", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1f65b1a6cf500735bb9c06b9217b94b926ee7852", "committedDate": "2021-07-01T16:11:20Z", "message": "Allow the downloadable resource pack to be queried in datagen\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9df3ed63973302e8c1967de3b94627dace7d0e42", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/9df3ed63973302e8c1967de3b94627dace7d0e42", "committedDate": "2021-07-01T16:11:21Z", "message": "Fix conflicts and update to 1.16.4\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceda61b40a7eb8ac45757d7f5f09f8e5c04b7399", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/ceda61b40a7eb8ac45757d7f5f09f8e5c04b7399", "committedDate": "2021-07-01T16:11:22Z", "message": "Add automatic test of generated sounds.json\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18dad3c388551e46660002a69268a98f7a7f4507", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/18dad3c388551e46660002a69268a98f7a7f4507", "committedDate": "2021-04-26T20:05:16Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "1fa72c2c3a30afe7d8f2061eb3ada005dff5cebc", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1fa72c2c3a30afe7d8f2061eb3ada005dff5cebc", "committedDate": "2021-07-01T16:18:47Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fa72c2c3a30afe7d8f2061eb3ada005dff5cebc", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1fa72c2c3a30afe7d8f2061eb3ada005dff5cebc", "committedDate": "2021-07-01T16:18:47Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "0489737595efa1ecf12c48329f2061dda64745c6", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0489737595efa1ecf12c48329f2061dda64745c6", "committedDate": "2021-07-01T16:20:13Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e89911def42c315bb573f212a1de5e2a37b1fb4e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/e89911def42c315bb573f212a1de5e2a37b1fb4e", "committedDate": "2021-07-01T16:22:14Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0489737595efa1ecf12c48329f2061dda64745c6", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0489737595efa1ecf12c48329f2061dda64745c6", "committedDate": "2021-07-01T16:20:13Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}, "afterCommit": {"oid": "e89911def42c315bb573f212a1de5e2a37b1fb4e", "author": {"user": {"login": "TheSilkMiner", "name": "Silk"}}, "url": "https://github.com/MinecraftForge/MinecraftForge/commit/e89911def42c315bb573f212a1de5e2a37b1fb4e", "committedDate": "2021-07-01T16:22:14Z", "message": "Fix merge conflicts and address PR comments\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk3NDQ0MTE2", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-697444116", "createdAt": "2021-07-01T16:28:18Z", "commit": {"oid": "e89911def42c315bb573f212a1de5e2a37b1fb4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAxMTg1MDY3", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6982#pullrequestreview-701185067", "createdAt": "2021-07-07T15:57:04Z", "commit": {"oid": "e89911def42c315bb573f212a1de5e2a37b1fb4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2045, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}