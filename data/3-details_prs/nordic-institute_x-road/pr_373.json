{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MTUwMzUx", "number": 373, "title": "XRDDEV-873 Load internal tls key cert", "bodyText": "InternalKeyManager and InternalTrustManager are now able to get a new InternalSSLKey -> this removes the need to restart the proxy process every time the internal key is rotated by an admin.\nThe InternalSSLKey is cached by default for 180 seconds to possibly avoid a file system read every time an internal request is processed.\nJIRA: https://jira.niis.org/browse/XRDDEV-873", "createdAt": "2020-02-17T13:56:52Z", "url": "https://github.com/nordic-institute/X-Road/pull/373", "merged": true, "mergeCommit": {"oid": "bedd13afe5f63fb233af3ada80a1561a2b43de87"}, "closed": true, "closedAt": "2020-03-03T12:27:36Z", "author": {"login": "carohauta"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEOzTMgH2gAyMzc2MTUwMzUxOjQ5ZjhiMGYyNjJhNDIwMTFhZjE2MzBhMDU5MjA3ZWM1ODJlNWU4MGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKBdFiAFqTM2NzkzNTc4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "49f8b0f262a42011af1630a059207ec582e5e80b", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/49f8b0f262a42011af1630a059207ec582e5e80b", "committedDate": "2020-02-14T12:36:29Z", "message": "XRDDEV-873 Internal key cache and get\n\n* adds InternalSSLKey caching in CachingServerConfImpl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60adc50f438f17294ffdcb278c9a082492dbfd4d", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/60adc50f438f17294ffdcb278c9a082492dbfd4d", "committedDate": "2020-02-17T13:22:19Z", "message": "XRDDEV-873 Internal key cache and get // lower default cache time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c39186abd910755d10ad0c458752854da389a28f", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/c39186abd910755d10ad0c458752854da389a28f", "committedDate": "2020-02-17T13:45:05Z", "message": "XRDDEV-873 Internal key cache and get // update docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94a6a75287e709e535b5b27a5e5fee5694489a6d", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/94a6a75287e709e535b5b27a5e5fee5694489a6d", "committedDate": "2020-02-17T13:55:07Z", "message": "XRDDEV-873 Internal key cache and get // change constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60f13c515a13f7df6cac47caa0f0efcc7469f91b", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/60f13c515a13f7df6cac47caa0f0efcc7469f91b", "committedDate": "2020-02-24T07:44:14Z", "message": "XRDDEV-873 Internal key cache and get // update docs 2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NzM0ODg4", "url": "https://github.com/nordic-institute/X-Road/pull/373#pullrequestreview-367734888", "createdAt": "2020-03-03T06:48:33Z", "commit": {"oid": "60f13c515a13f7df6cac47caa0f0efcc7469f91b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNjo0ODozM1rOFw5_tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzoyNjo0MVrOFw6scA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyNjE2NA==", "bodyText": "This annotation is unnecessary (If a class contains no constructors, then a default no-args constructor is implicitly declared)", "url": "https://github.com/nordic-institute/X-Road/pull/373#discussion_r386826164", "createdAt": "2020-03-03T06:48:33Z", "author": {"login": "jhyoty"}, "path": "src/proxy/src/main/java/ee/ria/xroad/proxy/util/InternalKeyManager.java", "diffHunk": "@@ -41,16 +42,14 @@\n /**\n  * a KeyManager that holds the internal SSL Key\n  */\n-@RequiredArgsConstructor\n+@NoArgsConstructor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60f13c515a13f7df6cac47caa0f0efcc7469f91b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgzNzYxNg==", "bodyText": "Setting server-conf-cache-period to zero disables all serverconf caching, in which case this setting has no effect. Is it really necessary to have a separate cache period for the internal key?", "url": "https://github.com/nordic-institute/X-Road/pull/373#discussion_r386837616", "createdAt": "2020-03-03T07:26:41Z", "author": {"login": "jhyoty"}, "path": "src/common-util/src/main/java/ee/ria/xroad/common/SystemProperties.java", "diffHunk": "@@ -174,6 +174,9 @@ private SystemProperties() {\n     public static final String SERVER_CONF_CACHE_PERIOD =\n             PREFIX + \"proxy.server-conf-cache-period\";\n \n+    public static final String INTERNAL_KEY_CACHE_PERIOD =\n+            PREFIX + \"proxy.internal-key-cache-period\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60f13c515a13f7df6cac47caa0f0efcc7469f91b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a725998d6b782f8776361f6a49c192bf2343d5d9", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a725998d6b782f8776361f6a49c192bf2343d5d9", "committedDate": "2020-03-03T08:25:28Z", "message": "Merge branch 'develop' into XRDDEV-873-load-internal-tls-key-cert\n\n# Conflicts:\n#\tsrc/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/InternalTlsCertificateService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cf63eecaf7cf7105983c6343d90af4c57f6a921", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/0cf63eecaf7cf7105983c6343d90af4c57f6a921", "committedDate": "2020-03-03T08:34:51Z", "message": "XRDDEV-873 Remove unnecessary annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34b831ce8ab24e06d82c4f9738b939a1468698ee", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/34b831ce8ab24e06d82c4f9738b939a1468698ee", "committedDate": "2020-03-03T10:41:41Z", "message": "XRDDEV-873 Remove separate cache period for Internal Key"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3OTM1Nzg0", "url": "https://github.com/nordic-institute/X-Road/pull/373#pullrequestreview-367935784", "createdAt": "2020-03-03T12:27:00Z", "commit": {"oid": "34b831ce8ab24e06d82c4f9738b939a1468698ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4321, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}