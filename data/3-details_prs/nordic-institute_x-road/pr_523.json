{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NDc5MTYz", "number": 523, "title": "XRDDEV-1001 Validation error structure", "bodyText": "JIRA: https://jira.niis.org/browse/XRDDEV-1001", "createdAt": "2020-05-28T13:16:11Z", "url": "https://github.com/nordic-institute/X-Road/pull/523", "merged": true, "mergeCommit": {"oid": "14dd0c97834c9841d67ba574b252b8db342f9338"}, "closed": true, "closedAt": "2020-06-08T06:41:11Z", "author": {"login": "carohauta"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclsD51AH2gAyNDI0NDc5MTYzOjkzYzQxZTA2ZTllYzhkOWRhYWI2ZmQ2YmZiYmNmNDQyN2I4Mzk3MGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoSMbRgH2gAyNDI0NDc5MTYzOmU0YWMwYjI2MWRlZTgyZWNhNWYxOTQ5NmU0MmU3ZGMzZTczYTJjNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93c41e06e9ec8d9daab6fd6bfbbcf4427b83970a", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/93c41e06e9ec8d9daab6fd6bfbbcf4427b83970a", "committedDate": "2020-05-28T11:21:22Z", "message": "XRDDEV-1101 Initial validation error structure\n\n* updated API definition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5774b4dfca6d12b5d63e8e7062a1e883b73ed028", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/5774b4dfca6d12b5d63e8e7062a1e883b73ed028", "committedDate": "2020-05-28T13:02:57Z", "message": "XRDDEV-1101 Field validation error tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbae24dea7925207ddeee7ddf40b64a8931720f4", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/bbae24dea7925207ddeee7ddf40b64a8931720f4", "committedDate": "2020-05-29T06:30:59Z", "message": "XRDDEV-1101 Simplify test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MTg3NDM4", "url": "https://github.com/nordic-institute/X-Road/pull/523#pullrequestreview-425187438", "createdAt": "2020-06-05T10:37:25Z", "commit": {"oid": "bbae24dea7925207ddeee7ddf40b64a8931720f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDozNzoyNVrOGfpaqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMDo1MDoyMVrOGfpwpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgzNzYxMA==", "bodyText": "maybe add mention about validation errors here, now it mentions only code and metadata?", "url": "https://github.com/nordic-institute/X-Road/pull/523#discussion_r435837610", "createdAt": "2020-06-05T10:37:25Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -4875,7 +4875,7 @@ components:\n         - ERROR_CODE_MISSING_PRIVATE_PARAMS # The downloaded global configuration did not contain private parameters\n         - ERROR_CODE_UNINITIALIZED # The configuration client is initializing.\n         - UNKNOWN\n-    CodeWithMetadata:\n+    CodeWithDetails:\n       type: object\n       description: object that contains a code identifier and possibly collection of", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbae24dea7925207ddeee7ddf40b64a8931720f4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgzODI4Mw==", "bodyText": "would mentioning \"dictionary\" help to make this structure more clear? I was a bit befuddled at first, not understanding how this results in Map<String, List<String>> validationErrors (granted, due to my lack of knowledge in openapi)", "url": "https://github.com/nordic-institute/X-Road/pull/523#discussion_r435838283", "createdAt": "2020-06-05T10:38:54Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -4895,6 +4895,19 @@ components:\n           items:\n             type: string\n             format: text\n+        validation_errors:\n+          description: object that contains validation errors bound to their respected fields - the object's key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbae24dea7925207ddeee7ddf40b64a8931720f4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTg0MzIzNg==", "bodyText": "I think that we should document the different validation error codes for the end users. Both our own custom errors (NoPercent, NoBackslashes, etc) and standard bean validation errors (NotNull, Size, etc - this should probably be just a link to documentation elsewhere, possible some section of Bean Validation API specification?).\nNot sure what is a good way to do this, in openapi specification, or maybe somewhere in https://github.com/nordic-institute/X-Road/blob/develop/doc/Manuals/ug-ss_x-road_6_security_server_user_guide.md#19-management-rest-apis ?\nSimilar documentation is missing for error codes and metadata, but we already have a ticket about that https://jira.niis.org/browse/XRDDEV-665", "url": "https://github.com/nordic-institute/X-Road/pull/523#discussion_r435843236", "createdAt": "2020-06-05T10:50:21Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -4895,6 +4895,19 @@ components:\n           items:\n             type: string\n             format: text\n+        validation_errors:\n+          description: object that contains validation errors bound to their respected fields - the object's key\n+            represents the field where the validation error has happened and the key's value is the validation error\n+          type: object\n+          additionalProperties:\n+            type: array\n+            description: array containing the validation errors of a field\n+            items:\n+              type: string\n+              format: text\n+          example:\n+            clientAdd.client.memberCode: [\"NoPercent\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbae24dea7925207ddeee7ddf40b64a8931720f4"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c5285cffddc85aacd4da1e8622c2c444bb8ff64", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/8c5285cffddc85aacd4da1e8622c2c444bb8ff64", "committedDate": "2020-06-05T11:44:08Z", "message": "XRDDEV-1001 Improved API docs // PR comment fix 1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77ef1cbfde53e27bcb6c3f6ec8a41a5a72a33c8c", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/77ef1cbfde53e27bcb6c3f6ec8a41a5a72a33c8c", "committedDate": "2020-06-05T12:47:33Z", "message": "XRDDEV-1001 Validation errors docs // PR comment fix 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2582b04aea30af219c9cdfb3028b45a967fc24c7", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/2582b04aea30af219c9cdfb3028b45a967fc24c7", "committedDate": "2020-06-05T12:49:53Z", "message": "Merge branch 'develop' into XRDDEV-1001-validation-error-structure\n\n# Conflicts:\n#\tdoc/Manuals/ug-ss_x-road_6_security_server_user_guide.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4ac0b261dee82eca5f19496e42e7dc3e73a2c71", "author": {"user": {"login": "carohauta", "name": "Caro Hautam\u00e4ki"}}, "url": "https://github.com/nordic-institute/X-Road/commit/e4ac0b261dee82eca5f19496e42e7dc3e73a2c71", "committedDate": "2020-06-05T12:54:55Z", "message": "XRDDEV-1001 API definition docs update // PR comment fix 3"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4099, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}