{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwODM4NTIy", "number": 482, "title": "XRDDEV-828", "bodyText": "Add support for Microsoft Azure database for PostgreSQL servers to CS and SS installation scripts and backup & restore functionality\nImprove the local development Ansible script xroad_dev.yml\nAdd documentation to installation manuals\nFix some typos", "createdAt": "2020-04-29T17:04:39Z", "url": "https://github.com/nordic-institute/X-Road/pull/482", "merged": true, "mergeCommit": {"oid": "54e3128dea04b622a82a124bb4543a0178ecb05c"}, "closed": true, "closedAt": "2020-05-07T10:41:27Z", "author": {"login": "iluwatar"}, "timelineItems": {"totalCount": 71, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcadNW4gH2gAyNDEwODM4NTIyOjQyM2EyZWM0OWE5ZTg2YjdkYjcxNTI4ODc2Y2ZiNmU4ZTliZTY2NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABce6yYYAFqTQwNzM0NzU2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "423a2ec49a9e86b7db71528876cfb6e8e9be6660", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/423a2ec49a9e86b7db71528876cfb6e8e9be6660", "committedDate": "2020-04-23T13:49:57Z", "message": "XRDDEV-828 support azure style usernames"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a70fae70d965ad40ccf7a34f39c580a1d2faeff8", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a70fae70d965ad40ccf7a34f39c580a1d2faeff8", "committedDate": "2020-04-23T14:59:41Z", "message": "XRDDEV-828 apply previous to dbuser connection too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3846dba279e3c94a562035edcb571c0ba371e240", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/3846dba279e3c94a562035edcb571c0ba371e240", "committedDate": "2020-04-24T05:40:42Z", "message": "XRDDEV-828 update liquibase commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23dac51b3f748a81c64b061ad7f9da2991a56028", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/23dac51b3f748a81c64b061ad7f9da2991a56028", "committedDate": "2020-04-24T06:38:19Z", "message": "XRDDEV-828 changes to messagelog installation scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a922a359054b0eb80e7a771473f43d6b30b4f32", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/6a922a359054b0eb80e7a771473f43d6b30b4f32", "committedDate": "2020-04-24T08:24:53Z", "message": "XRDDEV-828 fix syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0dd4b8c59c46c60b7f08ac17784049461a61db1", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/b0dd4b8c59c46c60b7f08ac17784049461a61db1", "committedDate": "2020-04-24T11:16:47Z", "message": "XRDDEV-828 jdbc url handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ff7003676b4867697123314ca50cb54ce9893e5", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/5ff7003676b4867697123314ca50cb54ce9893e5", "committedDate": "2020-04-24T13:08:24Z", "message": "XRDDEV-828 update opmonitor installation scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9c91c888518d62a6cee4fdbb193b3d30d7a2a5c", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a9c91c888518d62a6cee4fdbb193b3d30d7a2a5c", "committedDate": "2020-04-24T13:26:48Z", "message": "XRDDEV-828 fix messagelog installation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b607516c30136b62aaf2c5d749ea3d15d6fc8b14", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/b607516c30136b62aaf2c5d749ea3d15d6fc8b14", "committedDate": "2020-04-24T14:23:57Z", "message": "XRDDEV-828 fix messagelog installation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "265be3465df551bd3e9c6221ce328a4583604d0d", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/265be3465df551bd3e9c6221ce328a4583604d0d", "committedDate": "2020-04-27T07:29:18Z", "message": "XRDDEV-828 drop unneeded db extensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f58bd8b5d4755b3a216e1ba1c80cd9257974dc", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/55f58bd8b5d4755b3a216e1ba1c80cd9257974dc", "committedDate": "2020-04-27T08:20:01Z", "message": "XRDDEV-828 separate compile and building packages steps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc084f949839ea3b95f3ad28189455f25a2ac8cf", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/bc084f949839ea3b95f3ad28189455f25a2ac8cf", "committedDate": "2020-04-27T08:20:13Z", "message": "XRDDEV-828 fix syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33bf66014809d5a77fa4f760e34665d20077a940", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/33bf66014809d5a77fa4f760e34665d20077a940", "committedDate": "2020-04-27T08:38:39Z", "message": "XRDDEV-828 drop extensions if they exist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19bc4e1d25a2427cf01cd4592c4b9c6fb5257ecc", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/19bc4e1d25a2427cf01cd4592c4b9c6fb5257ecc", "committedDate": "2020-04-27T09:03:37Z", "message": "XRDDEV-828 refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78172f9511736034d1fa91fd1580557a66454a66", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/78172f9511736034d1fa91fd1580557a66454a66", "committedDate": "2020-04-27T09:20:42Z", "message": "XRDDEV-828 fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9600a263bbed89138b78e107524cebd1777e306", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/e9600a263bbed89138b78e107524cebd1777e306", "committedDate": "2020-04-27T09:38:32Z", "message": "XRDDEV-828 refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adb9b2743a6c84a263ea57a4bb9803d5ef32ec20", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/adb9b2743a6c84a263ea57a4bb9803d5ef32ec20", "committedDate": "2020-04-27T14:13:40Z", "message": "XRDDEV-828 work on CS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37c21621cdff8a228b0e713530d3a5153557b82a", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/37c21621cdff8a228b0e713530d3a5153557b82a", "committedDate": "2020-04-28T06:16:48Z", "message": "XRDDEV-828 write suffix into db.propertees"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba30e8b07039752af2b16124e593b0bd640ea6fa", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ba30e8b07039752af2b16124e593b0bd640ea6fa", "committedDate": "2020-04-28T06:46:04Z", "message": "XRDDEV-828 add debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35b1309ee01ba6e29d1b060539caaff7f1f2046c", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/35b1309ee01ba6e29d1b060539caaff7f1f2046c", "committedDate": "2020-04-28T06:55:13Z", "message": "XRDDEV-828 fix missing database"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc8876fa31d4d8d48e7fc5a98558912f0449e96", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ccc8876fa31d4d8d48e7fc5a98558912f0449e96", "committedDate": "2020-04-28T07:51:57Z", "message": "XRDDEV-828 fix typos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a047fbb9a0ceae3bfc14aecb4d5a54845536844b", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a047fbb9a0ceae3bfc14aecb4d5a54845536844b", "committedDate": "2020-04-28T09:35:50Z", "message": "XRDDEV-828 set username"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31e8601a45845f1fdd221548da91b9f6aa3da93b", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/31e8601a45845f1fdd221548da91b9f6aa3da93b", "committedDate": "2020-04-28T10:41:29Z", "message": "XRDDEV-828 switch on debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03e4538427851d9af7a4e2d6e8671c1d36e6779b", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/03e4538427851d9af7a4e2d6e8671c1d36e6779b", "committedDate": "2020-04-28T14:00:53Z", "message": "XRDDEV-828 refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6d73d6b066775adaaf3c9e54fb86857beca8505", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a6d73d6b066775adaaf3c9e54fb86857beca8505", "committedDate": "2020-04-29T05:35:57Z", "message": "Merge branch 'develop' into XRDDEV-828"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee0cbd40a6bfefd25c71e737ac9965c8f3e7fc41", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ee0cbd40a6bfefd25c71e737ac9965c8f3e7fc41", "committedDate": "2020-04-29T06:11:46Z", "message": "XRDDEV-828 remove jdbc suffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84bb86b3c52b2d9a47f172778a938b45c0276535", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/84bb86b3c52b2d9a47f172778a938b45c0276535", "committedDate": "2020-04-29T06:40:53Z", "message": "XRDDEV-828 apply Jarkko's patch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f11fb547429d5b907c516fe11273ff4abdfe4298", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/f11fb547429d5b907c516fe11273ff4abdfe4298", "committedDate": "2020-04-29T08:18:19Z", "message": "XRDDEV-828 use login suffix on CS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d3ea06c181b585e64c7023b84568519a63126f2", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4d3ea06c181b585e64c7023b84568519a63126f2", "committedDate": "2020-04-29T08:47:28Z", "message": "XRDDEV-828 fix db master user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7644d55121ebe11c4a6df536a18ce88c5e9c4a6a", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/7644d55121ebe11c4a6df536a18ce88c5e9c4a6a", "committedDate": "2020-04-29T13:10:13Z", "message": "XRDDEV-828 fix db_user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22711be80a3760fa1986ebcf1984262e33fb1727", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/22711be80a3760fa1986ebcf1984262e33fb1727", "committedDate": "2020-04-29T13:31:26Z", "message": "XRDDEV-828 write back db_user with suffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2810ee3b41a66d415145889098c180ecbac3782a", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/2810ee3b41a66d415145889098c180ecbac3782a", "committedDate": "2020-04-29T13:43:36Z", "message": "XRDDEV-828 fix condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7b8be14f10ab33888d2fdb57b7febbbbd69e470", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/f7b8be14f10ab33888d2fdb57b7febbbbd69e470", "committedDate": "2020-04-29T13:58:00Z", "message": "XRDDEV-828 refactor SS isntall"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f80c32a6f1c2c25c3d50977ae40c31769b31c8e3", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/f80c32a6f1c2c25c3d50977ae40c31769b31c8e3", "committedDate": "2020-04-29T14:03:54Z", "message": "XRDDEV-828 make suffix uniform with CS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a83b1547c2d387b050cf00b7f4bd09560467243", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/6a83b1547c2d387b050cf00b7f4bd09560467243", "committedDate": "2020-04-29T14:12:05Z", "message": "XRDDDEV-828 messagelog and opmonitor refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dced8242918070ff51ddd04932d82bb57524e7c", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/8dced8242918070ff51ddd04932d82bb57524e7c", "committedDate": "2020-04-29T14:22:09Z", "message": "XRDDEV-828 fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07d1e22fc12e6687196832fbb1d0d7166627e7bf", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/07d1e22fc12e6687196832fbb1d0d7166627e7bf", "committedDate": "2020-04-29T14:45:44Z", "message": "XRDDEV-828 fix missing double quote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776d596e7edb6a080c490cccfebc3dd2c9894a0e", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/776d596e7edb6a080c490cccfebc3dd2c9894a0e", "committedDate": "2020-04-29T15:00:06Z", "message": "XRDDEV-828 fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8959654efd19dfd842d93071e11f08a1e70d7e0", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a8959654efd19dfd842d93071e11f08a1e70d7e0", "committedDate": "2020-04-29T15:27:39Z", "message": "XRDDEV-828 fix db.properties usernames"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e0b0e17072bfd66b116553e07ee27ad2276d0b2", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/5e0b0e17072bfd66b116553e07ee27ad2276d0b2", "committedDate": "2020-04-29T16:17:30Z", "message": "XRDDEV-828 update documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43c1a99f43aa36960694abaf3bd48ba51fbf985c", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/43c1a99f43aa36960694abaf3bd48ba51fbf985c", "committedDate": "2020-04-29T17:43:27Z", "message": "XRDDEV-828 Red Hat SS scripts to support Azure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eee842badc1eb3607cd8263f5e2c141cb630990", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/9eee842badc1eb3607cd8263f5e2c141cb630990", "committedDate": "2020-04-29T18:44:47Z", "message": "XRDDEV-828 add possibility to skip deb package building"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47c917fb0239f74c701c55f1b3f3ae2de20709be", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/47c917fb0239f74c701c55f1b3f3ae2de20709be", "committedDate": "2020-04-29T18:45:08Z", "message": "XRDDEV-828 fix bug in settng username"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0de4cab182827997cf0bacc72b4fdb2562636e23", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/0de4cab182827997cf0bacc72b4fdb2562636e23", "committedDate": "2020-04-29T19:28:56Z", "message": "XRDDEV-828 fix user"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "874189d1f9e7e40a601b44e1523e54a7fc898768", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/874189d1f9e7e40a601b44e1523e54a7fc898768", "committedDate": "2020-04-29T19:47:16Z", "message": "XRDDEV-828 fix user bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd053b560afb3e5c518ab49fe4dff991457ee6ed", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/dd053b560afb3e5c518ab49fe4dff991457ee6ed", "committedDate": "2020-04-29T20:02:09Z", "message": "XRDDEV-828 fix messagelog install"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c24bd510a323acf84df57c7a04c9fcf577794be", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/0c24bd510a323acf84df57c7a04c9fcf577794be", "committedDate": "2020-04-30T04:55:37Z", "message": "XRDDEV-828 update rhel ss installation manual"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eda8e6e21cafb9938ab77119644cd3965e0b192c", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/eda8e6e21cafb9938ab77119644cd3965e0b192c", "committedDate": "2020-04-30T12:15:14Z", "message": "XRDDEV-828 work on backup and restore scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f616e68f7f6680133c36cc459e55c48fcef06cd8", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/f616e68f7f6680133c36cc459e55c48fcef06cd8", "committedDate": "2020-04-30T13:43:30Z", "message": "XRDDEV-828 update cs backup and restore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd0cdf775e9488e8fe04bb6397cf17958d381361", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/dd0cdf775e9488e8fe04bb6397cf17958d381361", "committedDate": "2020-04-30T14:24:13Z", "message": "XRDDEV-828 remove debug logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/6e35d45dce58b618b95fe35b86cce8f0bba792d0", "committedDate": "2020-05-04T06:44:32Z", "message": "XRDDEV-828 fix documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjE1NzU5", "url": "https://github.com/nordic-institute/X-Road/pull/482#pullrequestreview-405615759", "createdAt": "2020-05-05T09:12:34Z", "commit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToxMjozNVrOGQg2lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOTo1Mzo1MlrOGQiQBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk2ODY2MQ==", "bodyText": "hard-coded schema serverconf, but the db setup uses configurable schema name (same as username)", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419968661", "createdAt": "2020-05-05T09:12:35Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/common/proxy/usr/share/xroad/scripts/backup_db.sh", "diffHunk": "@@ -6,7 +6,7 @@ dump_file=\"$1\"\n db_properties=/etc/xroad/db.properties\n db_host=\"127.0.0.1:5432\"\n db_user=\"$(get_prop ${db_properties} 'serverconf.hibernate.connection.username' 'serverconf')\"\n-db_schema=\"$db_user\"\n+db_schema=serverconf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk2ODg1Mg==", "bodyText": "hard-coded schema serverconf, but the db setup uses configurable schema name (same as username).", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419968852", "createdAt": "2020-05-05T09:12:58Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/common/proxy/usr/share/xroad/scripts/restore_db.sh", "diffHunk": "@@ -6,7 +6,7 @@ dump_file=\"$1\"\n db_properties=/etc/xroad/db.properties\n db_host=\"127.0.0.1:5432\"\n db_user=\"$(get_prop ${db_properties} 'serverconf.hibernate.connection.username' 'serverconf')\"\n-db_schema=\"$db_user\"\n+db_schema=serverconf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk2OTQyMg==", "bodyText": "why is the default schema name hardcoded to centerui?", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419969422", "createdAt": "2020-05-05T09:13:56Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/common/center/usr/share/xroad/scripts/restore_db.sh", "diffHunk": "@@ -9,7 +9,7 @@ abort() { local rc=$?; echo -e \"FATAL: $*\" >&2; exit $rc; }\n \n DUMP_FILE=$1\n USER=$(get_db_prop 'username' 'centerui')\n-SCHEMA=$(get_db_prop 'schema' \"$USER\")\n+SCHEMA=$(get_db_prop 'schema' 'centerui')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MjU4MQ==", "bodyText": "On line 139, the username is (potentially) written as user@suffix. During subsequent upgrade, the username is read from properties (line 61), and here the suffix would be re-applied (user@suffix@suffix). And so on.\nI think it would be better to read the username from the properties file, assume that it has the suffix if it is required, and then remove the suffix to get a \"plain\" username which is used where required.", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419972581", "createdAt": "2020-05-05T09:19:47Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/redhat/SOURCES/proxy/xroad-proxy-setup.sh", "diffHunk": "@@ -85,24 +86,30 @@ setup_database() {\n     local_psql() { su -l -c \"psql -qtA -p ${db_port:-5432} $*\" postgres; }\n     remote_psql() { psql -h \"${db_addr:-127.0.0.1}\" -p \"${db_port:-5432}\" -qtA \"$@\"; }\n \n-    psql_dbuser() {\n-        PGDATABASE=\"$db_database\" PGUSER=\"$db_user\" PGPASSWORD=\"$db_password\" remote_psql \"$@\"\n-    }\n-\n     if [[ -f ${root_properties} && $(get_prop ${root_properties} postgres.connection.password) != \"\" ]]; then\n         local db_master_passwd=$(get_prop ${root_properties} postgres.connection.password)\n         db_master_user=$(get_prop ${root_properties} postgres.connection.user 'postgres')\n+        db_conn_master_user=\"${db_master_user}\"\n+        if [[ $(get_prop ${root_properties} postgres.connection.login_suffix) != \"\" ]]; then\n+            suffix=$(get_prop ${root_properties} postgres.connection.login_suffix)\n+            db_conn_master_user=\"${db_master_user}${suffix}\"\n+            db_conn_user=\"${db_user}${suffix}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3NDA0MQ==", "bodyText": "duplicates the suffix if the db_user is already in format user@suffix (as written on line 151)", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419974041", "createdAt": "2020-05-05T09:22:26Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/redhat/SOURCES/opmonitor/xroad-opmonitor-initdb.sh", "diffHunk": "@@ -73,6 +81,7 @@ then\n \n   db_url=$(get_prop ${db_properties} op-monitor.hibernate.connection.url)\n   db_user=$(get_prop ${db_properties} op-monitor.hibernate.connection.username \"$db_user\")\n+  db_conn_user=\"${db_user}${suffix}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3NjE2Mg==", "bodyText": "can duplicate the suffix if db_user is already in that format.", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419976162", "createdAt": "2020-05-05T09:26:09Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/redhat/SPECS/xroad-addon-messagelog.spec", "diffHunk": "@@ -66,12 +66,19 @@ rm -rf %{buildroot}\n \n %post\n \n+db_properties=/etc/xroad/db.properties\n+root_properties=/etc/xroad.properties\n db_name=messagelog\n db_url=jdbc:postgresql://127.0.0.1:5432/${db_name}\n db_user=messagelog\n+db_conn_user=\"${db_user}\"\n+if  [[ -f ${root_properties}  && `crudini --get ${root_properties} '' postgres.connection.login_suffix` != \"\" ]]\n+then\n+    suffix=`crudini --get ${root_properties} '' postgres.connection.login_suffix`\n+    db_conn_user=\"${db_user}${suffix}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3NjkwMA==", "bodyText": "the suffix should only be applied if the username does not already contain one.", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419976900", "createdAt": "2020-05-05T09:27:29Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/ubuntu/generic/xroad-center.postinst", "diffHunk": "@@ -46,11 +46,12 @@ setup_database() {\n     crudini --set \"${db_properties}\" '' host \"${db_addr}\"\n     crudini --set \"${db_properties}\" '' port \"${db_port}\"\n \n-    local db_user=$(get_prop ${db_properties} 'username' 'centerui')\n-    local db_schema=$(get_prop ${db_properties} 'schema' \"$db_user\")\n+    local suffix=$(get_prop ${root_properties} postgres.connection.login_suffix \"\")\n+    local db_user=$(get_prop ${db_properties} 'username' 'centerui')\"${suffix}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk5MTM3MA==", "bodyText": "if db_user already has the suffix (line 134), the schema name will be invalid", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419991370", "createdAt": "2020-05-05T09:53:33Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/ubuntu/generic/xroad-proxy.postinst", "diffHunk": "@@ -53,7 +53,8 @@ setup_database() {\n \n     local tmp_password=\"$(head -c 24 /dev/urandom | base64 | tr \"/+\" \"_-\")\"\n     local db_user=$(get_prop ${db_properties} 'serverconf.hibernate.connection.username' 'serverconf')\n-    local db_schema=\"$db_user\"\n+    local db_conn_user=\"${db_user}\"\n+    local db_schema=\"${db_user}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk5MTU1Ng==", "bodyText": "suffix potentially duplicated", "url": "https://github.com/nordic-institute/X-Road/pull/482#discussion_r419991556", "createdAt": "2020-05-05T09:53:52Z", "author": {"login": "jhyoty"}, "path": "src/packages/src/xroad/ubuntu/generic/xroad-proxy.postinst", "diffHunk": "@@ -80,24 +81,30 @@ setup_database() {\n     local_psql() { su -l -c \"psql -qtA -p ${db_port:-5432} ${*@Q}\" postgres; }\n     remote_psql() { psql -h \"${db_addr:-127.0.0.1}\" -p \"${db_port:-5432}\" -qtA \"$@\"; }\n \n-    psql_dbuser() {\n-        PGDATABASE=\"$db_database\" PGUSER=\"$db_user\" PGPASSWORD=\"$db_password\" remote_psql \"$@\"\n-    }\n-\n     if [[ -f ${root_properties} && $(get_prop ${root_properties} postgres.connection.password) != \"\" ]]; then\n         local db_master_passwd=$(get_prop ${root_properties} postgres.connection.password)\n         db_master_user=$(get_prop ${root_properties} postgres.connection.user 'postgres')\n+        db_conn_master_user=\"${db_master_user}\"\n+        if [[ $(get_prop ${root_properties} postgres.connection.login_suffix) != \"\" ]]; then\n+            suffix=$(get_prop ${root_properties} postgres.connection.login_suffix)\n+            db_conn_master_user=\"${db_master_user}${suffix}\"\n+            db_conn_user=\"${db_user}${suffix}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e35d45dce58b618b95fe35b86cce8f0bba792d0"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df804e23c605895372c2d22c40dac0aa54e67713", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/df804e23c605895372c2d22c40dac0aa54e67713", "committedDate": "2020-05-06T07:35:24Z", "message": "XRDDEV-828 revert hard-coded schema from backup/restore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df81df824ba3b6718f4b17707e98502cb2eb0bb5", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/df81df824ba3b6718f4b17707e98502cb2eb0bb5", "committedDate": "2020-05-06T07:45:08Z", "message": "XRDDEV-828 add debug logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a317a50fde2205ca672c94cf9c64b1bd8e643527", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a317a50fde2205ca672c94cf9c64b1bd8e643527", "committedDate": "2020-05-06T08:24:20Z", "message": "Revert \"XRDDEV-828 remove debug logging\"\n\nThis reverts commit dd0cdf775e9488e8fe04bb6397cf17958d381361."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "051894f48fc07c3373bb7ae8416ef6474569a221", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/051894f48fc07c3373bb7ae8416ef6474569a221", "committedDate": "2020-05-06T11:59:08Z", "message": "XRDDEV-828 restore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8e5f4fc9656f1bb9cca2d611383194d05bb8888", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/d8e5f4fc9656f1bb9cca2d611383194d05bb8888", "committedDate": "2020-05-06T13:35:25Z", "message": "XRDDEV-828 update cs install guide"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4339293c6442eae9f4abdfe3c00aedc96df79fb", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a4339293c6442eae9f4abdfe3c00aedc96df79fb", "committedDate": "2020-05-06T13:53:26Z", "message": "XRDDEV-828 fix cs docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b46a09e0aeee92e1d56e35735645b8cc8ee0d8ee", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/b46a09e0aeee92e1d56e35735645b8cc8ee0d8ee", "committedDate": "2020-05-06T14:50:23Z", "message": "XRDDEV-828 refactor ubuntu ss installation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7742f91054993c61c9969ed8fa46759a05221c5", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/e7742f91054993c61c9969ed8fa46759a05221c5", "committedDate": "2020-05-06T15:21:54Z", "message": "XRDDEV-828 test with serverconf schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce18dcabd9b9ef226c4cd0441d5def191c76f242", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ce18dcabd9b9ef226c4cd0441d5def191c76f242", "committedDate": "2020-05-06T15:44:50Z", "message": "XRDDEV-828 fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3259e6eeeae42ee2cc675131f594d4437a1d5d7", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/d3259e6eeeae42ee2cc675131f594d4437a1d5d7", "committedDate": "2020-05-06T16:01:19Z", "message": "XRDDEV-828 fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97bdec5e6a10c5547578f1db92fcac5283709612", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/97bdec5e6a10c5547578f1db92fcac5283709612", "committedDate": "2020-05-06T18:54:58Z", "message": "XRDDEV-828 refactor red hat installation scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b84b3d0d41ac94171b6cc55fc5a802a735c6f14", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/3b84b3d0d41ac94171b6cc55fc5a802a735c6f14", "committedDate": "2020-05-06T19:26:11Z", "message": "XRDDEV-828 fixes and doc updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd52ba957672a89c6eaa25672fcade252e328af6", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/bd52ba957672a89c6eaa25672fcade252e328af6", "committedDate": "2020-05-06T19:42:51Z", "message": "XRDDEV-828 remove suffix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MTUzODU0", "url": "https://github.com/nordic-institute/X-Road/pull/482#pullrequestreview-407153854", "createdAt": "2020-05-07T05:15:05Z", "commit": {"oid": "bd52ba957672a89c6eaa25672fcade252e328af6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "119228da003dd8c12224759192ed991db070bec4", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/119228da003dd8c12224759192ed991db070bec4", "committedDate": "2020-05-07T06:18:54Z", "message": "XRDDEV-828 ss backup/restore schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e68121262f6186586b8b92c02032d633979f9e3", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/9e68121262f6186586b8b92c02032d633979f9e3", "committedDate": "2020-05-07T07:24:01Z", "message": "XRDDEV-828 update cs manual"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83053872a0d9ad8e244b862383c1df9e059097b1", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/83053872a0d9ad8e244b862383c1df9e059097b1", "committedDate": "2020-05-07T08:44:14Z", "message": "XRDDEV-828 fix messagelog local install"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61f44b1394468946d5eb9b7f0269122dfbddd43e", "author": {"user": {"login": "iluwatar", "name": "Ilkka Sepp\u00e4l\u00e4"}}, "url": "https://github.com/nordic-institute/X-Road/commit/61f44b1394468946d5eb9b7f0269122dfbddd43e", "committedDate": "2020-05-07T09:36:18Z", "message": "XRDDEV-828 remove debug logging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MzQ3NTY3", "url": "https://github.com/nordic-institute/X-Road/pull/482#pullrequestreview-407347567", "createdAt": "2020-05-07T10:33:20Z", "commit": {"oid": "61f44b1394468946d5eb9b7f0269122dfbddd43e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4236, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}