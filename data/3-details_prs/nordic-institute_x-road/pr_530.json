{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MTgyNDA3", "number": 530, "title": "XRDDEV-446 eslint+prettier", "bodyText": "https://jira.niis.org/browse/XRDDEV-446\n\nFixed 60+ linter errors\nMost of the error fixes were trivial, but some needed a bit of work\nThere are still a lot of warnings. Some of those should be fixed later and rest we need to think about.\nAlso removed some unused things that came up when going through the code\n\nThese files need attention:\nsrc/views/Clients/ServiceClients/ServiceClientAccessRights.vue\nsrc/views/Service/Endpoints/Endpoints.vue\nsrc/views/ServiceDescriptionDetails/ServiceDescriptionDetails.vue", "createdAt": "2020-06-01T19:54:47Z", "url": "https://github.com/nordic-institute/X-Road/pull/530", "merged": true, "mergeCommit": {"oid": "e0409fcd7ee9ba87e6000afeb0dde52b3da977ca"}, "closed": true, "closedAt": "2020-06-05T12:03:54Z", "author": {"login": "Riippi"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcm-DP6AH2gAyNDI2MTgyNDA3OjZhNGJjMGYwMDlkYmFkYWQxNTZmZmU5NjlmNWM1ZWYyNjY1ZDc5YjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoQ001AFqTQyNTIxMTkxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a4bc0f009dbadad156ffe969f5c5ef2665d79b0", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/6a4bc0f009dbadad156ffe969f5c5ef2665d79b0", "committedDate": "2020-06-01T10:52:52Z", "message": "XRDDEV-446 Update package.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eb97b639b9baae4cf363fc7bc744f3458dace79", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/3eb97b639b9baae4cf363fc7bc744f3458dace79", "committedDate": "2020-06-01T11:07:38Z", "message": "XRDDEV-446 Modify conf files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cce5c11ea9216a739f34118f7ac46acef1ee8069", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/cce5c11ea9216a739f34118f7ac46acef1ee8069", "committedDate": "2020-06-01T11:14:48Z", "message": "XRDDEV-446 Linter automatic fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18ec6e613e0a472e0b165eb532af9e3ba86b844c", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/18ec6e613e0a472e0b165eb532af9e3ba86b844c", "committedDate": "2020-06-01T11:18:34Z", "message": "XRDDEV-446 Remove unused mockData store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7a92f0a44cc2b0236c4e4b9737ee32db00e34e1", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/d7a92f0a44cc2b0236c4e4b9737ee32db00e34e1", "committedDate": "2020-06-01T11:39:34Z", "message": "XRDDEV-446 Fix errors in LocalGroup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e09731d4a68b75586034fce95180e8fbc314b44", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4e09731d4a68b75586034fce95180e8fbc314b44", "committedDate": "2020-06-01T11:40:04Z", "message": "XRDDEV-446 Fix linter error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86285f30f4535353306903b9420df8329b719c3e", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/86285f30f4535353306903b9420df8329b719c3e", "committedDate": "2020-06-01T12:03:15Z", "message": "XRDDEV-446 Fix linter errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee412993e74bd30dbf418b8500c3e52567e99aa5", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ee412993e74bd30dbf418b8500c3e52567e99aa5", "committedDate": "2020-06-01T12:56:38Z", "message": "XRDDEV-446 Fix linter errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a4f1f738f748203f3ef8392818fdb17ccdb8b4a", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/9a4f1f738f748203f3ef8392818fdb17ccdb8b4a", "committedDate": "2020-06-01T15:35:56Z", "message": "XRDDEV-446 Fix linter warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "082a5b152395036782c10239ec5354e59cba513d", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/082a5b152395036782c10239ec5354e59cba513d", "committedDate": "2020-06-01T15:36:52Z", "message": "XRDDEV-446 Fix the most complicated linter errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec822026bb51587cb510cbf1e74603172e461d3d", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ec822026bb51587cb510cbf1e74603172e461d3d", "committedDate": "2020-06-01T19:17:17Z", "message": "XRDDEV-929 Fix build errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ba5b77a3d2deb39ea310bc4722600a1bc54a1a8", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/5ba5b77a3d2deb39ea310bc4722600a1bc54a1a8", "committedDate": "2020-06-01T19:40:01Z", "message": "XRDDEV-929 Update package-lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c6ca0f25dbc7a99340b1588de7c4ba3850a76ff", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/7c6ca0f25dbc7a99340b1588de7c4ba3850a76ff", "committedDate": "2020-06-01T19:43:34Z", "message": "Merge commit '53e837dbb7b1e65f3f86560f49f70497e0dc62fe' into XRDDEV-446-eslint\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eba1e80acc65cf8fe62f599b2b2afe184461ca48", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/eba1e80acc65cf8fe62f599b2b2afe184461ca48", "committedDate": "2020-06-03T14:50:02Z", "message": "Merge branch 'develop' into XRDDEV-446-eslint\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/package-lock.json\n#\tsrc/proxy-ui-api/frontend/package.json"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDM3NzYz", "url": "https://github.com/nordic-institute/X-Road/pull/530#pullrequestreview-425037763", "createdAt": "2020-06-05T06:52:30Z", "commit": {"oid": "eba1e80acc65cf8fe62f599b2b2afe184461ca48"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDgwNzcz", "url": "https://github.com/nordic-institute/X-Road/pull/530#pullrequestreview-425080773", "createdAt": "2020-06-05T08:01:59Z", "commit": {"oid": "eba1e80acc65cf8fe62f599b2b2afe184461ca48"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODowMTo1OVrOGfkXuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODowMTo1OVrOGfkXuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc1NDkzNg==", "bodyText": "Currently endpoints view lists only base endpoint. I think this should be\nreturn endpoint.method !== '*' && endpoint.path !== '**';", "url": "https://github.com/nordic-institute/X-Road/pull/530#discussion_r435754936", "createdAt": "2020-06-05T08:01:59Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Service/Endpoints/Endpoints.vue", "diffHunk": "@@ -77,8 +82,16 @@ export default Vue.extend({\n   },\n   computed: {\n     ...mapGetters(['service']),\n+\n+    endpoints(): Endpoint[] {\n+      const filtered = this.service.endpoints.filter((endpoint: Endpoint) => {\n+        return endpoint.method === '*' && endpoint.path === '**';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eba1e80acc65cf8fe62f599b2b2afe184461ca48"}, "originalPosition": 98}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDg5Nzg5", "url": "https://github.com/nordic-institute/X-Road/pull/530#pullrequestreview-425089789", "createdAt": "2020-06-05T08:15:39Z", "commit": {"oid": "eba1e80acc65cf8fe62f599b2b2afe184461ca48"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODoxNTozOVrOGfkyGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODoxNTozOVrOGfkyGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc2MTY4OQ==", "bodyText": "i think this could be simplified a bit with just a map-function something like this:\nkeyedServiceClientAccessRights(): UiAccessRight[] { return this.serviceClientAccessRights.map( (sca: AccessRight, index: number) => { return { ... sca, uiKey: index }; }) as UiAccessRight[]; },", "url": "https://github.com/nordic-institute/X-Road/pull/530#discussion_r435761689", "createdAt": "2020-06-05T08:15:39Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Clients/ServiceClients/ServiceClientAccessRights.vue", "diffHunk": "@@ -189,23 +221,42 @@ export default Vue.extend({\n       this.showConfirmDeleteAll = false;\n \n       api\n-        .post(`/clients/${this.id}/service-clients/${this.serviceClientId}/access-rights/delete`,\n-          {items: this.serviceClientAccessRights.map((item: AccessRight) => ({service_code: item.service_code}))})\n+        .post(\n+          `/clients/${this.id}/service-clients/${this.serviceClientId}/access-rights/delete`,\n+          {\n+            items: this.serviceClientAccessRights.map((item: AccessRight) => ({\n+              service_code: item.service_code,\n+            })),\n+          },\n+        )\n         .then(() => {\n           this.$store.dispatch('showSuccess', 'serviceClients.removeSuccess');\n           this.serviceClientAccessRights = [];\n         })\n         .catch((error: any) => this.$store.dispatch('showError', error));\n-\n     },\n     serviceCandidates(): ServiceCandidate[] {\n-      return serviceCandidatesForServiceClient(this.clientServiceDescriptions, this.serviceClientAccessRights);\n+      return serviceCandidatesForServiceClient(\n+        this.clientServiceDescriptions,\n+        this.serviceClientAccessRights,\n+      );\n+    },\n+\n+    keyedServiceClientAccessRights() {\n+      let index = 0;\n+      const arrWithKeys = [];\n+      for (const accessRight of this.serviceClientAccessRights) {\n+        arrWithKeys[index] = accessRight as UiAccessRight;\n+        arrWithKeys[index].uiKey = index;\n+        index++;\n+      }\n+\n+      return arrWithKeys;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eba1e80acc65cf8fe62f599b2b2afe184461ca48"}, "originalPosition": 266}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ef35c9e12922feb4f2b4d5ed5bdc623c3eea2dd", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/7ef35c9e12922feb4f2b4d5ed5bdc623c3eea2dd", "committedDate": "2020-06-05T08:33:22Z", "message": "XRDDEV-446 Fix review issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ebc1afaedd7ce0f3969bded58cc3b7727748b9", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/65ebc1afaedd7ce0f3969bded58cc3b7727748b9", "committedDate": "2020-06-05T10:03:55Z", "message": "XRDDEV-446 Fix endpoints bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d10c7e05f5aab5b08b992794bd4c01074335248", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4d10c7e05f5aab5b08b992794bd4c01074335248", "committedDate": "2020-06-05T10:55:22Z", "message": "Merge commit '7f46ae97ae7c03a9d9399720fa3625bb68f63d77' into XRDDEV-446-eslint\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/views/Service/Parameters/ServiceParameters.vue\n#\tsrc/proxy-ui-api/frontend/src/views/Service/Service.vue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MjAyNzc2", "url": "https://github.com/nordic-institute/X-Road/pull/530#pullrequestreview-425202776", "createdAt": "2020-06-05T11:03:21Z", "commit": {"oid": "4d10c7e05f5aab5b08b992794bd4c01074335248"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMTowMzoyMVrOGfqHoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxMTowMzoyMVrOGfqHoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTg0OTEyMA==", "bodyText": "one more thing. there's no need to create that filtered -variable. Just return the value from expression.", "url": "https://github.com/nordic-institute/X-Road/pull/530#discussion_r435849120", "createdAt": "2020-06-05T11:03:21Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Service/Endpoints/Endpoints.vue", "diffHunk": "@@ -77,8 +82,16 @@ export default Vue.extend({\n   },\n   computed: {\n     ...mapGetters(['service']),\n+\n+    endpoints(): Endpoint[] {\n+      const filtered = this.service.endpoints.filter((endpoint: Endpoint) => {\n+        return !this.isBaseEndpoint(endpoint);\n+      });\n+\n+      return filtered;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d10c7e05f5aab5b08b992794bd4c01074335248"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba47d2cfc8fdd7ef83d8c2b8fbb00a4f9113696c", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ba47d2cfc8fdd7ef83d8c2b8fbb00a4f9113696c", "committedDate": "2020-06-05T11:06:09Z", "message": "XRDDEV-446 Simplify code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MjExOTE4", "url": "https://github.com/nordic-institute/X-Road/pull/530#pullrequestreview-425211918", "createdAt": "2020-06-05T11:19:14Z", "commit": {"oid": "ba47d2cfc8fdd7ef83d8c2b8fbb00a4f9113696c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4105, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}