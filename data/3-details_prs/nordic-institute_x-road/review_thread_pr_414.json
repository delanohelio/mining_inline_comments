{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NjcwNzk2", "number": 414, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOToyMTowN1rODoo8_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOToyMTowN1rODoo8_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzOTQwNjA0OnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/frontend/src/views/Settings/SystemParameters/SystemParameters.vue", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOToyMTowN1rOF3TzMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOTo0OToyNVrOF3U0Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0MDQwMw==", "bodyText": "The hearers are \"black\" or darker in the design.\nAlso some fonts seem larger or bolder compared to the design.", "url": "https://github.com/nordic-institute/X-Road/pull/414#discussion_r393540403", "createdAt": "2020-03-17T09:21:07Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/Settings/SystemParameters/SystemParameters.vue", "diffHunk": "@@ -0,0 +1,175 @@\n+<template>\n+  <div class=\"pt-2\">\n+    <v-card flat class=\"xrd-card\">\n+      <v-container>\n+        <v-row v-if=\"hasPermission(permissions.VIEW_ANCHOR)\">\n+          <v-col><h3>{{$t('systemParameters.configurationAnchor.title')}}</h3></v-col>\n+          <v-col class=\"text-right\">\n+            <large-button data-test=\"system-parameters-configuration-anchor-download-button\" outlined :requires-permission=\"permissions.DOWNLOAD_ANCHOR\">\n+              {{$t('systemParameters.configurationAnchor.action.download')}}\n+            </large-button>\n+            <large-button data-test=\"system-parameters-configuration-anchor-upload-button\" outlined :requires-permission=\"permissions.UPLOAD_ANCHOR\" class=\"ml-5\">\n+              {{$t('systemParameters.configurationAnchor.action.upload')}}\n+            </large-button>\n+          </v-col>\n+        </v-row>\n+        <v-row v-if=\"hasPermission(permissions.VIEW_ANCHOR)\">\n+          <v-col>\n+            <table class=\"xrd-table\">\n+              <thead>\n+              <tr>\n+                <th>{{$t('systemParameters.configurationAnchor.table.header.distinguishedName')}}</th>\n+                <th>{{$t('systemParameters.configurationAnchor.table.header.generated')}}</th>\n+              </tr>\n+              </thead>\n+              <tbody data-test=\"system-parameters-configuration-anchor-table-body\">\n+              <tr>\n+                <td>{{this.configuratonAnchor.hash}}</td>\n+                <td>{{this.configuratonAnchor.created_at | formatDateTime}}</td>\n+              </tr>\n+              </tbody>\n+            </table>\n+          </v-col>\n+        </v-row>\n+        <v-row class=\"mt-5\" v-if=\"hasPermission(permissions.VIEW_TSPS)\">\n+          <v-col><h3>{{$t('systemParameters.timestampingServices.title')}}</h3></v-col>\n+          <v-col class=\"text-right\">\n+            <large-button data-test=\"system-parameters-timestamping-services-add-button\" outlined :requires-permission=\"permissions.ADD_TSP\">\n+              {{$t('systemParameters.timestampingServices.action.add')}}\n+            </large-button>\n+          </v-col>\n+        </v-row>\n+        <v-row v-if=\"hasPermission(permissions.VIEW_TSPS)\">\n+          <v-col>\n+            <table class=\"xrd-table\">\n+              <thead>\n+              <tr>\n+                <th>{{$t('systemParameters.timestampingServices.table.header.certificateHash')}}</th>\n+                <th>{{$t('systemParameters.timestampingServices.table.header.serviceURL')}}</th>\n+                <th>&nbsp;</th>\n+              </tr>\n+              </thead>\n+              <tbody data-test=\"system-parameters-timestamping-services-table-body\">\n+              <tr v-for=\"timestampingService in this.configuredTimestampingServices\" :key=\"timestampingService.url\">\n+                <td>{{timestampingService.name}}</td>\n+                <td>{{timestampingService.url}}</td>\n+                <td>\n+                  <small-button data-test=\"system-parameters-timestamping-services-delete-button\" outlined :requires-permission=\"permissions.DELETE_TSP\">\n+                    {{$t('systemParameters.timestampingServices.table.action.delete')}}\n+                  </small-button>\n+                </td>\n+              </tr>\n+              </tbody>\n+            </table>\n+          </v-col>\n+        </v-row>\n+        <v-row class=\"mt-5\">\n+          <v-col><h3>{{$t('systemParameters.approvedCertificateAuthorities.title')}}</h3></v-col>\n+        </v-row>\n+        <v-row>\n+          <v-col>\n+            <table class=\"xrd-table\">\n+              <thead>\n+              <tr>\n+                <th>{{$t('systemParameters.approvedCertificateAuthorities.table.header.distinguishedName')}}</th>\n+                <th>{{$t('systemParameters.approvedCertificateAuthorities.table.header.ocspResponse')}}</th>\n+                <th>{{$t('systemParameters.approvedCertificateAuthorities.table.header.expires')}}</th>\n+              </tr>\n+              </thead>\n+              <tbody data-test=\"system-parameters-approved-ca-table-body\">\n+              <tr v-for=\"approvedCA in orderedCertificateAuthorities\" :key=\"approvedCA.path\">\n+                <td :class=\"{'interm-ca': !approvedCA.top_ca}\">{{approvedCA.subject_distinguished_name}}</td>\n+                <td v-if=\"approvedCA.top_ca\">{{$t('systemParameters.approvedCertificateAuthorities.table.ocspResponse.NOT_AVAILABLE')}}</td>\n+                <td v-if=\"!approvedCA.top_ca\">{{$t(`systemParameters.approvedCertificateAuthorities.table.ocspResponse.${approvedCA.ocsp_response}`)}}</td>\n+                <td>{{approvedCA.not_after | formatDate}}</td>\n+              </tr>\n+              </tbody>\n+            </table>\n+          </v-col>\n+        </v-row>\n+      </v-container>\n+    </v-card>\n+  </div>\n+</template>\n+\n+<script lang=\"ts\">\n+import Vue from 'vue';\n+import LargeButton from '@/components/ui/LargeButton.vue';\n+import SmallButton from '@/components/ui/SmallButton.vue';\n+import { Anchor, CertificateAuthority, TimestampingService } from '@/types';\n+import * as api from '@/util/api';\n+import { Permissions } from '@/global';\n+\n+export default Vue.extend({\n+  components: {\n+    LargeButton,\n+    SmallButton,\n+  },\n+  data() {\n+    return {\n+      configuratonAnchor: {} as Anchor,\n+      configuredTimestampingServices: [] as TimestampingService[],\n+      certificateAuthorities: [] as CertificateAuthority[],\n+      permissions: Permissions,\n+    };\n+  },\n+  computed: {\n+    orderedCertificateAuthorities(): CertificateAuthority[] {\n+      return this.certificateAuthorities.sort((authorityA, authorityB) => authorityA.path.localeCompare(authorityB.path));\n+    },\n+  },\n+  methods: {\n+    hasPermission(permission: Permissions): boolean {\n+      return this.$store.getters.hasPermission(permission);\n+    },\n+    async fetchConfigurationAnchor() {\n+      return api.get('/system/anchor')\n+        .then((resp) => this.configuratonAnchor = resp.data)\n+        .catch((error) => this.$bus.$emit('show-error', error.message));\n+    },\n+    async fetchConfiguredTimestampingServiced() {\n+      return api.get('/system/timestamping-services')\n+        .then((resp) => this.configuredTimestampingServices = resp.data)\n+        .catch((error) => this.$bus.$emit('show-error', error.message));\n+    },\n+    async fetchApprovedCertificateAuthorities() {\n+      return api.get('/certificate-authorities?include_intermediate_cas=true')\n+        .then((resp) => this.certificateAuthorities = resp.data)\n+        .catch((error) => this.$bus.$emit('show-error', error.message));\n+    },\n+  },\n+  created(): void {\n+    this.fetchConfigurationAnchor();\n+    this.fetchConfiguredTimestampingServiced();\n+    this.fetchApprovedCertificateAuthorities();\n+  },\n+});\n+</script>\n+\n+<style lang=\"scss\" scoped>\n+  @import \"../../../assets/colors\";\n+  @import '../../../assets/tables';\n+\n+  h3 {\n+    color: $XRoad-Grey60;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d33ae2e823fa377752b31d8542af9106c503ed"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU1NzAwNw==", "bodyText": "Fixed the styling to better match the design", "url": "https://github.com/nordic-institute/X-Road/pull/414#discussion_r393557007", "createdAt": "2020-03-17T09:49:25Z", "author": {"login": "raits"}, "path": "src/proxy-ui-api/frontend/src/views/Settings/SystemParameters/SystemParameters.vue", "diffHunk": "@@ -0,0 +1,175 @@\n+<template>\n+  <div class=\"pt-2\">\n+    <v-card flat class=\"xrd-card\">\n+      <v-container>\n+        <v-row v-if=\"hasPermission(permissions.VIEW_ANCHOR)\">\n+          <v-col><h3>{{$t('systemParameters.configurationAnchor.title')}}</h3></v-col>\n+          <v-col class=\"text-right\">\n+            <large-button data-test=\"system-parameters-configuration-anchor-download-button\" outlined :requires-permission=\"permissions.DOWNLOAD_ANCHOR\">\n+              {{$t('systemParameters.configurationAnchor.action.download')}}\n+            </large-button>\n+            <large-button data-test=\"system-parameters-configuration-anchor-upload-button\" outlined :requires-permission=\"permissions.UPLOAD_ANCHOR\" class=\"ml-5\">\n+              {{$t('systemParameters.configurationAnchor.action.upload')}}\n+            </large-button>\n+          </v-col>\n+        </v-row>\n+        <v-row v-if=\"hasPermission(permissions.VIEW_ANCHOR)\">\n+          <v-col>\n+            <table class=\"xrd-table\">\n+              <thead>\n+              <tr>\n+                <th>{{$t('systemParameters.configurationAnchor.table.header.distinguishedName')}}</th>\n+                <th>{{$t('systemParameters.configurationAnchor.table.header.generated')}}</th>\n+              </tr>\n+              </thead>\n+              <tbody data-test=\"system-parameters-configuration-anchor-table-body\">\n+              <tr>\n+                <td>{{this.configuratonAnchor.hash}}</td>\n+                <td>{{this.configuratonAnchor.created_at | formatDateTime}}</td>\n+              </tr>\n+              </tbody>\n+            </table>\n+          </v-col>\n+        </v-row>\n+        <v-row class=\"mt-5\" v-if=\"hasPermission(permissions.VIEW_TSPS)\">\n+          <v-col><h3>{{$t('systemParameters.timestampingServices.title')}}</h3></v-col>\n+          <v-col class=\"text-right\">\n+            <large-button data-test=\"system-parameters-timestamping-services-add-button\" outlined :requires-permission=\"permissions.ADD_TSP\">\n+              {{$t('systemParameters.timestampingServices.action.add')}}\n+            </large-button>\n+          </v-col>\n+        </v-row>\n+        <v-row v-if=\"hasPermission(permissions.VIEW_TSPS)\">\n+          <v-col>\n+            <table class=\"xrd-table\">\n+              <thead>\n+              <tr>\n+                <th>{{$t('systemParameters.timestampingServices.table.header.certificateHash')}}</th>\n+                <th>{{$t('systemParameters.timestampingServices.table.header.serviceURL')}}</th>\n+                <th>&nbsp;</th>\n+              </tr>\n+              </thead>\n+              <tbody data-test=\"system-parameters-timestamping-services-table-body\">\n+              <tr v-for=\"timestampingService in this.configuredTimestampingServices\" :key=\"timestampingService.url\">\n+                <td>{{timestampingService.name}}</td>\n+                <td>{{timestampingService.url}}</td>\n+                <td>\n+                  <small-button data-test=\"system-parameters-timestamping-services-delete-button\" outlined :requires-permission=\"permissions.DELETE_TSP\">\n+                    {{$t('systemParameters.timestampingServices.table.action.delete')}}\n+                  </small-button>\n+                </td>\n+              </tr>\n+              </tbody>\n+            </table>\n+          </v-col>\n+        </v-row>\n+        <v-row class=\"mt-5\">\n+          <v-col><h3>{{$t('systemParameters.approvedCertificateAuthorities.title')}}</h3></v-col>\n+        </v-row>\n+        <v-row>\n+          <v-col>\n+            <table class=\"xrd-table\">\n+              <thead>\n+              <tr>\n+                <th>{{$t('systemParameters.approvedCertificateAuthorities.table.header.distinguishedName')}}</th>\n+                <th>{{$t('systemParameters.approvedCertificateAuthorities.table.header.ocspResponse')}}</th>\n+                <th>{{$t('systemParameters.approvedCertificateAuthorities.table.header.expires')}}</th>\n+              </tr>\n+              </thead>\n+              <tbody data-test=\"system-parameters-approved-ca-table-body\">\n+              <tr v-for=\"approvedCA in orderedCertificateAuthorities\" :key=\"approvedCA.path\">\n+                <td :class=\"{'interm-ca': !approvedCA.top_ca}\">{{approvedCA.subject_distinguished_name}}</td>\n+                <td v-if=\"approvedCA.top_ca\">{{$t('systemParameters.approvedCertificateAuthorities.table.ocspResponse.NOT_AVAILABLE')}}</td>\n+                <td v-if=\"!approvedCA.top_ca\">{{$t(`systemParameters.approvedCertificateAuthorities.table.ocspResponse.${approvedCA.ocsp_response}`)}}</td>\n+                <td>{{approvedCA.not_after | formatDate}}</td>\n+              </tr>\n+              </tbody>\n+            </table>\n+          </v-col>\n+        </v-row>\n+      </v-container>\n+    </v-card>\n+  </div>\n+</template>\n+\n+<script lang=\"ts\">\n+import Vue from 'vue';\n+import LargeButton from '@/components/ui/LargeButton.vue';\n+import SmallButton from '@/components/ui/SmallButton.vue';\n+import { Anchor, CertificateAuthority, TimestampingService } from '@/types';\n+import * as api from '@/util/api';\n+import { Permissions } from '@/global';\n+\n+export default Vue.extend({\n+  components: {\n+    LargeButton,\n+    SmallButton,\n+  },\n+  data() {\n+    return {\n+      configuratonAnchor: {} as Anchor,\n+      configuredTimestampingServices: [] as TimestampingService[],\n+      certificateAuthorities: [] as CertificateAuthority[],\n+      permissions: Permissions,\n+    };\n+  },\n+  computed: {\n+    orderedCertificateAuthorities(): CertificateAuthority[] {\n+      return this.certificateAuthorities.sort((authorityA, authorityB) => authorityA.path.localeCompare(authorityB.path));\n+    },\n+  },\n+  methods: {\n+    hasPermission(permission: Permissions): boolean {\n+      return this.$store.getters.hasPermission(permission);\n+    },\n+    async fetchConfigurationAnchor() {\n+      return api.get('/system/anchor')\n+        .then((resp) => this.configuratonAnchor = resp.data)\n+        .catch((error) => this.$bus.$emit('show-error', error.message));\n+    },\n+    async fetchConfiguredTimestampingServiced() {\n+      return api.get('/system/timestamping-services')\n+        .then((resp) => this.configuredTimestampingServices = resp.data)\n+        .catch((error) => this.$bus.$emit('show-error', error.message));\n+    },\n+    async fetchApprovedCertificateAuthorities() {\n+      return api.get('/certificate-authorities?include_intermediate_cas=true')\n+        .then((resp) => this.certificateAuthorities = resp.data)\n+        .catch((error) => this.$bus.$emit('show-error', error.message));\n+    },\n+  },\n+  created(): void {\n+    this.fetchConfigurationAnchor();\n+    this.fetchConfiguredTimestampingServiced();\n+    this.fetchApprovedCertificateAuthorities();\n+  },\n+});\n+</script>\n+\n+<style lang=\"scss\" scoped>\n+  @import \"../../../assets/colors\";\n+  @import '../../../assets/tables';\n+\n+  h3 {\n+    color: $XRoad-Grey60;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0MDQwMw=="}, "originalCommit": {"oid": "c4d33ae2e823fa377752b31d8542af9106c503ed"}, "originalPosition": 154}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2776, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}