{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDg2NjU1", "number": 425, "title": "XRDDEV-998: Change updateEndpoint api to not alter service code", "bodyText": "", "createdAt": "2020-03-20T11:40:36Z", "url": "https://github.com/nordic-institute/X-Road/pull/425", "merged": true, "mergeCommit": {"oid": "74008a24c559f884ad260db6320dac2c93eca538"}, "closed": true, "closedAt": "2020-04-07T16:56:33Z", "author": {"login": "TJaakkola"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPe96BgH2gAyMzkxNDg2NjU1OjhiZjhjOGRkNjg0OGU3NjIyNWU2YzM3Njk4YzhmZmJkZmE2ZTNkMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVVIEtgH2gAyMzkxNDg2NjU1OmNkMjNjMjg0YTBiMjYyNmUzNTgxMjllZGRhMjA0OTAyYjA4MmE1YTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8bf8c8dd6848e76225e6c37698c8ffbdfa6e3d28", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/8bf8c8dd6848e76225e6c37698c8ffbdfa6e3d28", "committedDate": "2020-03-20T11:39:43Z", "message": "XRDDEV-998: Change updateEndpoint api to not alter service code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "513d750ed73cccdf9c602e2477d7eff0ac7693e6", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/513d750ed73cccdf9c602e2477d7eff0ac7693e6", "committedDate": "2020-03-20T22:39:10Z", "message": "XRDDEV-998: Remove default values so that api users can update only one of path and method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fedaffe7409fad68c43f009068470a8bfca8fd8", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4fedaffe7409fad68c43f009068470a8bfca8fd8", "committedDate": "2020-03-20T22:40:12Z", "message": "XRDDEV-998: Additional null checks and tests for updating endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDg0Mzg1", "url": "https://github.com/nordic-institute/X-Road/pull/425#pullrequestreview-379484385", "createdAt": "2020-03-23T14:31:04Z", "commit": {"oid": "4fedaffe7409fad68c43f009068470a8bfca8fd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDozMTowNFrOF6ID2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDozMTowNFrOF6ID2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5Mzc4NQ==", "bodyText": "The allOf keyword, combined with the OpenAPI model generator that we are using, seems to generate a redundant EndpointAllOf object. We have mainly tried to avoid these and created for example a ClientAdd and ServiceDescriptionUpdate models that only have the allowed and required fields in them. So maybe consider separate models (without allOf) for these endpoint schemas.\nThere is a task (XRDDEV-668) about using readOnly keyword in those fields that aren't supposed to be sent in a request. So maybe some unifying methods should be considered and documented when that task is being investigated further. Spoiler alert: The readOnly flag has no effect on anything", "url": "https://github.com/nordic-institute/X-Road/pull/425#discussion_r396493785", "createdAt": "2020-03-23T14:31:04Z", "author": {"login": "carohauta"}, "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -4910,36 +4910,40 @@ components:\n           example: false\n           default: false\n     Endpoint:\n+      allOf:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fedaffe7409fad68c43f009068470a8bfca8fd8"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0af929718c5c51e625efe42baa1b52aa11a4f210", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/0af929718c5c51e625efe42baa1b52aa11a4f210", "committedDate": "2020-03-26T12:35:07Z", "message": "XRDDEV-998: Change openapi-definition not to use allOf -operator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69de872a1d1973aaa1f5fa170cf70cc78689d80b", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/69de872a1d1973aaa1f5fa170cf70cc78689d80b", "committedDate": "2020-03-26T13:16:33Z", "message": "XRDDEV-998: Rename EndpointPathAndMethod to EndpointUpdate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyODgwNjg2", "url": "https://github.com/nordic-institute/X-Road/pull/425#pullrequestreview-382880686", "createdAt": "2020-03-27T13:57:59Z", "commit": {"oid": "69de872a1d1973aaa1f5fa170cf70cc78689d80b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzo1Nzo1OVrOF8yTUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzo1Nzo1OVrOF8yTUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MzAyNQ==", "bodyText": "OpenAPI models shouldn't be referenced in the service layer: https://confluence.niis.org/pages/viewpage.action?spaceKey=XRDDEV&title=API+backend+implementation\nMaybe map the values to a separate Method enum?", "url": "https://github.com/nordic-institute/X-Road/pull/425#discussion_r399283025", "createdAt": "2020-03-27T13:57:59Z", "author": {"login": "carohauta"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/EndpointService.java", "diffHunk": "@@ -111,7 +111,7 @@ public void deleteEndpoint(Long id) throws EndpointNotFoundException, ClientNotF\n      * @throws IllegalGeneratedEndpointUpdateException  trying to update that is generated automatically\n      * @throws IllegalArgumentException                 passing illegal combination of parameters\n      */\n-    public EndpointType updateEndpoint(Long id, EndpointPathAndMethod.MethodEnum method, String path)\n+    public EndpointType updateEndpoint(Long id, EndpointUpdate.MethodEnum method, String path)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69de872a1d1973aaa1f5fa170cf70cc78689d80b"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eac515d8cce45b49a961b7b5e2c3fcd85b09658", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/7eac515d8cce45b49a961b7b5e2c3fcd85b09658", "committedDate": "2020-03-27T14:42:37Z", "message": "XRDDEV-803: Pass method to service layer as a String instead of openapi generated enum that are meant to be used only on controller layer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyOTM0MjMw", "url": "https://github.com/nordic-institute/X-Road/pull/425#pullrequestreview-382934230", "createdAt": "2020-03-27T14:56:56Z", "commit": {"oid": "7eac515d8cce45b49a961b7b5e2c3fcd85b09658"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d0cefbe0b984f05e7f8c38b66cce324bed4eb99", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/1d0cefbe0b984f05e7f8c38b66cce324bed4eb99", "committedDate": "2020-03-27T15:17:48Z", "message": "Merge branch 'develop' into XRDDEV-998"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fef093d1dcaaf3019ed0cf634f8b2b0710169137", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/fef093d1dcaaf3019ed0cf634f8b2b0710169137", "committedDate": "2020-04-03T06:39:43Z", "message": "XRDDEV-803: Replace verifyAuthority method usage with preAuthorize-annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9be8b53956b8ec8c6cd89b4e7299e6c0f84d1a1f", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/9be8b53956b8ec8c6cd89b4e7299e6c0f84d1a1f", "committedDate": "2020-04-03T08:02:46Z", "message": "XRDDEV-998 Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "688a94a3afebe0942392ad4b1cd9a4703932d088", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/688a94a3afebe0942392ad4b1cd9a4703932d088", "committedDate": "2020-04-06T18:12:30Z", "message": "XRDDEV-998: Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b611987461fc041dbe2c5432f59ad073d987c31d", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/b611987461fc041dbe2c5432f59ad073d987c31d", "committedDate": "2020-04-07T10:47:14Z", "message": "Merge branch 'develop' into XRDDEV-998"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2400a8e3c1332afcb667f7a075d8226e88a7ac5", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/e2400a8e3c1332afcb667f7a075d8226e88a7ac5", "committedDate": "2020-04-07T14:17:45Z", "message": "XRDDEV-998: Fix test checkstyles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd23c284a0b2626e358129edda204902b082a5a4", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/cd23c284a0b2626e358129edda204902b082a5a4", "committedDate": "2020-04-07T15:35:19Z", "message": "Merge branch 'develop' into XRDDEV-998"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4170, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}