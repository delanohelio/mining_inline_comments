{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NDI0MjU4", "number": 536, "title": "XRDDEV-1046 csr dropdown fix", "bodyText": "https://jira.niis.org/browse/XRDDEV-1046\nFixes also a bug in saving a csr file", "createdAt": "2020-06-05T12:38:14Z", "url": "https://github.com/nordic-institute/X-Road/pull/536", "merged": true, "mergeCommit": {"oid": "bb6e9f3dd7d74ef2379a0655b207b09c35b8738e"}, "closed": true, "closedAt": "2020-06-11T07:44:13Z", "author": {"login": "Riippi"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnSuWngH2gAyNDI4NDI0MjU4OjYzOTgyNjQ5ODlhNTMyNmQzMDk5NWMyZTM1MWFkNGZlMWNmNTk4ODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqIqJvgH2gAyNDI4NDI0MjU4OmRkZDMwOGFlYWViOWNjYjBkZDYwZGQwZjA0ZDE2NmM3MTk2NzBiMzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6398264989a5326d30995c2e351ad4fe1cf59887", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/6398264989a5326d30995c2e351ad4fe1cf59887", "committedDate": "2020-06-02T10:58:03Z", "message": "XRDDEV-1046 Add method for fetching proper member id data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fed3ddc0716f3103d1f36637b3ab320acf8e61b4", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/fed3ddc0716f3103d1f36637b3ab320acf8e61b4", "committedDate": "2020-06-02T10:59:06Z", "message": "XRDDEV-1046 Fix bug when saving csr file via create csr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a14fd546a209b556da70eb9f91ccdf2f004d51a8", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a14fd546a209b556da70eb9f91ccdf2f004d51a8", "committedDate": "2020-06-02T11:03:28Z", "message": "XRDDEV-1046 Fix linter error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a524478a00fbd289c36f8966393fc86406451b5", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/2a524478a00fbd289c36f8966393fc86406451b5", "committedDate": "2020-06-02T11:05:17Z", "message": "XRDDEV-1046 Remove useless vuex store calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc6d2b02a9aaadf086cba14877fa476f1c279c1b", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/bc6d2b02a9aaadf086cba14877fa476f1c279c1b", "committedDate": "2020-06-03T14:37:33Z", "message": "Merge branch 'develop' into XRDDEV-1046-csr-dropdown-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1966d24f71c8e3a5ad8cb17767752abb34531bd", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a1966d24f71c8e3a5ad8cb17767752abb34531bd", "committedDate": "2020-06-05T12:34:05Z", "message": "Merge commit 'e0409fcd7ee9ba87e6000afeb0dde52b3da977ca' into XRDDEV-1046-csr-dropdown-fix\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts\n#\tsrc/proxy-ui-api/frontend/src/store/modules/clients.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9437668819c911f8a31353eb6c36c3523b5d95a", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/d9437668819c911f8a31353eb6c36c3523b5d95a", "committedDate": "2020-06-05T12:35:20Z", "message": "XRDDEV-1046 Linter fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a46d4f89ef4baf9dd89874d284ed8217fff2f86", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/6a46d4f89ef4baf9dd89874d284ed8217fff2f86", "committedDate": "2020-06-05T14:15:04Z", "message": "XRDDEV-1046 Fix missing import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfbcb3b05a6b70705970044f1773d4bd87d7ee6e", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/dfbcb3b05a6b70705970044f1773d4bd87d7ee6e", "committedDate": "2020-06-10T07:38:29Z", "message": "Merge commit '0356a46f770f20a0bb2a10259be99ef72e335365' into XRDDEV-1046-csr-dropdown-fix\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3OTU3NTI0", "url": "https://github.com/nordic-institute/X-Road/pull/536#pullrequestreview-427957524", "createdAt": "2020-06-10T11:23:53Z", "commit": {"oid": "dfbcb3b05a6b70705970044f1773d4bd87d7ee6e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMToyMzo1M1rOGhwb4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMToyMzo1M1rOGhwb4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA0OTc2Mw==", "bodyText": "As we have the latest javascript & typescript language features in use here I would like to see we embrace the current way of writing idiomatic javascript. I mean that although initializing a new array with in for loop works correctly in this case I urge using arrays map-function and Set -data structure (or filter-function) to solve creating 1:1 transformations on array of objects & removing duplicates.", "url": "https://github.com/nordic-institute/X-Road/pull/536#discussion_r438049763", "createdAt": "2020-06-10T11:23:53Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts", "diffHunk": "@@ -263,6 +270,27 @@ export const actions: ActionTree<CsrState, RootState> = {\n     commit('storeCsrKey', templateKey);\n     commit('storeUsage', UsageTypes.SIGNING);\n   },\n+\n+  fetchAllMemberIds({ commit, rootGetters }) {\n+    return api\n+      .get('/clients?show_members=true')\n+      .then((res) => {\n+        const idArray: string[] = [];\n+        res.data.forEach((client: Client) => {\n+          // Create id:s without possible subsystem code\n+          const partialId = `${client.instance_id}:${client.member_class}:${client.member_code}`;\n+\n+          if (!idArray.includes(partialId)) {\n+            idArray.push(partialId);\n+          }\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfbcb3b05a6b70705970044f1773d4bd87d7ee6e"}, "originalPosition": 98}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd45fe080c626625ec35b59120c6d28e2ba8b33d", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/fd45fe080c626625ec35b59120c6d28e2ba8b33d", "committedDate": "2020-06-10T13:32:38Z", "message": "Merge branch 'develop' into XRDDEV-1046-csr-dropdown-fix\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a064ab10ddf2e1814317817bf76007df76f3014", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/5a064ab10ddf2e1814317817bf76007df76f3014", "committedDate": "2020-06-10T19:03:13Z", "message": "XRDDEV-1046 Fix PR issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NjMxNDgz", "url": "https://github.com/nordic-institute/X-Road/pull/536#pullrequestreview-428631483", "createdAt": "2020-06-11T06:42:24Z", "commit": {"oid": "5a064ab10ddf2e1814317817bf76007df76f3014"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddd308aeaeb9ccb0dd60dd0f04d166c719670b32", "author": {"user": {"login": "Riippi", "name": "Mikko Riippi"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ddd308aeaeb9ccb0dd60dd0f04d166c719670b32", "committedDate": "2020-06-11T06:56:11Z", "message": "XRDDEV-1046 Switch map to foreach"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4108, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}