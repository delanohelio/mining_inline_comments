{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNDg2MTMy", "number": 486, "title": "XRDDEV-59 Using ISO-8601", "bodyText": "", "createdAt": "2020-04-30T13:22:05Z", "url": "https://github.com/nordic-institute/X-Road/pull/486", "merged": true, "mergeCommit": {"oid": "11758a22c188515f2cecc6495065f9ab6ab6c356"}, "closed": true, "closedAt": "2020-05-11T07:10:09Z", "author": {"login": "martensoo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccs5gmAH2gAyNDExNDg2MTMyOjRjYTIzNzAyYTZkZDVmZjZkZmI1YTdmM2QwZDA5Yzc1YjEyOThiYmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgKRYvAFqTQwODkxMTk3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe", "author": {"user": {"login": "martensoo", "name": "M\u00e4rten Soo"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe", "committedDate": "2020-04-30T13:14:36Z", "message": "XRDDEV-59 Using ISO-8601"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODEzOTk0", "url": "https://github.com/nordic-institute/X-Road/pull/486#pullrequestreview-405813994", "createdAt": "2020-05-05T13:57:33Z", "commit": {"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1NzozM1rOGQqr9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1OToyNFrOGQqxog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEyOTc4Mw==", "bodyText": "This could be simplified, converting the instant is not necessary when UTC is used ( https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#toString-- )", "url": "https://github.com/nordic-institute/X-Road/pull/486#discussion_r420129783", "createdAt": "2020-05-05T13:57:33Z", "author": {"login": "jhyoty"}, "path": "src/common-verifier/src/main/java/ee/ria/xroad/common/ocsp/OcspVerifier.java", "diffHunk": "@@ -172,10 +174,12 @@ private void verifyValidityAt(Date atDate, SingleResp singleResp) {\n             log.debug(\"Verify OCSP nextUpdate, atDate: {} nextUpdate: {}\", atDate, singleResp.getNextUpdate());\n             if (singleResp.getNextUpdate() != null\n                     && singleResp.getNextUpdate().before(atDate)) {\n-                SimpleDateFormat fmt = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ss\");\n                 throw new CodedException(X_INCORRECT_VALIDATION_INFO,\n-                        String.format(\"OCSP nextUpdate is too old, atDate: %s nextUpdate: %s\", fmt.format(atDate),\n-                                fmt.format(singleResp.getNextUpdate())));\n+                        String.format(\"OCSP nextUpdate is too old, atDate: %s nextUpdate: %s\",\n+                                ZonedDateTime.ofInstant(atDate.toInstant(),\n+                                        ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT),\n+                                ZonedDateTime.ofInstant(singleResp.getNextUpdate().toInstant(),\n+                                        ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEzMTIzNA==", "bodyText": "Could be simplified to anchor.getGeneratedAt().toInstant()", "url": "https://github.com/nordic-institute/X-Road/pull/486#discussion_r420131234", "createdAt": "2020-05-05T13:59:24Z", "author": {"login": "jhyoty"}, "path": "src/configuration-proxy/src/main/java/ee/ria/xroad/confproxy/commandline/ConfProxyUtilViewConf.java", "diffHunk": "@@ -124,11 +125,9 @@ private void displayInfo(final String instance,\n         if (anchorError == null) {\n             System.out.println(\"Instance identifier: \"\n                     + anchor.getInstanceIdentifier());\n-            SimpleDateFormat sdf =\n-                    new SimpleDateFormat(\"z yyyy-MMM-d hh:mm:ss\");\n-            sdf.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n             System.out.println(\"Generated at:        \"\n-                    + sdf.format(anchor.getGeneratedAt()));\n+                    + ZonedDateTime.ofInstant(anchor.getGeneratedAt().toInstant(),\n+                    ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "accccb417a183d1460d3e45e495419f745825385", "author": {"user": {"login": "martensoo", "name": "M\u00e4rten Soo"}}, "url": "https://github.com/nordic-institute/X-Road/commit/accccb417a183d1460d3e45e495419f745825385", "committedDate": "2020-05-06T15:41:17Z", "message": "XRDDEV-59 Use ISO 8601"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16974b76240762c86122716b190b4ee88e61daff", "author": {"user": {"login": "martensoo", "name": "M\u00e4rten Soo"}}, "url": "https://github.com/nordic-institute/X-Road/commit/16974b76240762c86122716b190b4ee88e61daff", "committedDate": "2020-05-06T15:41:54Z", "message": "Merge branch 'develop' into XRDDEV-59-date-format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "984270046f5f2761eccb1d68a4aacb1c42b7404a", "author": {"user": {"login": "martensoo", "name": "M\u00e4rten Soo"}}, "url": "https://github.com/nordic-institute/X-Road/commit/984270046f5f2761eccb1d68a4aacb1c42b7404a", "committedDate": "2020-05-11T05:49:41Z", "message": "XRDDEV-59 Refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTExOTc0", "url": "https://github.com/nordic-institute/X-Road/pull/486#pullrequestreview-408911974", "createdAt": "2020-05-11T07:09:42Z", "commit": {"oid": "984270046f5f2761eccb1d68a4aacb1c42b7404a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4239, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}