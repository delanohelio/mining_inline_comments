{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyOTMzNDY1", "number": 401, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyMToxN1rODlcMKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyMToxN1rODlcMKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTg1NzcxOnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/SecurityServerTlsCertificate/GenerateInternalCsr.vue", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyMToxN1rOFyVVbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNzozNzowNFrOFyverg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyMjY3MQ==", "bodyText": "Would it be possible to use saveResponseAsFile from helpers.ts ? Or is this a different kind of thing?", "url": "https://github.com/nordic-institute/X-Road/pull/401#discussion_r388322671", "createdAt": "2020-03-05T14:21:17Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/SecurityServerTlsCertificate/GenerateInternalCsr.vue", "diffHunk": "@@ -0,0 +1,124 @@\n+<template>\n+  <v-container class=\"xrd-view-common justify-center wrapper\">\n+    <SubViewTitle :title=\"$t('ssTlsCertificate.generateInternalCsr.title')\" :show-close=false></SubViewTitle>\n+    <v-row class=\"first-action\">\n+      <v-col>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.description')}}\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"3\" class=\"mt-6\">\n+        <HelpIcon :text=\"$t('ssTlsCertificate.generateInternalCsr.step1.tooltip')\"/>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.label')}}\n+      </v-col>\n+      <v-col cols=\"8\">\n+        <v-text-field v-model=\"distinguishedName\" data-text=\"generate-internal-csr-distinguished-name-field\"\n+                      :placeholder=\"$t('ssTlsCertificate.generateInternalCsr.step1.placeholder')\"/>\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"8\" class=\"mt-2\">\n+        {{$t('ssTlsCertificate.generateInternalCsr.step2.description')}}\n+      </v-col>\n+      <v-col cols=\"4\" class=\"text-right\">\n+        <large-button outlined data-text=\"generate-internal-csr-generate-csr-button\"\n+                      :disabled=\"distinguishedName.length === 0 || csrGenerated\" :loading=\"generatingCsr\"\n+                      @click=\"generateCsr\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.step2.generateCSR')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+    <v-row class=\"bottom-buttons-wrapper\">\n+      <v-col cols=\"6\" class=\"text-left\">\n+        <large-button @click=\"back\" :disabled=\"csrGenerated || generatingCsr\" outlined\n+                      data-test=\"generate-internal-csr-cancel-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.cancel')}}\n+        </large-button>\n+      </v-col>\n+      <v-col cols=\"6\" class=\"text-right\">\n+        <large-button @click=\"back\" :disabled=\"!csrGenerated\" data-test=\"generate-internal-csr-done-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.done')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+  </v-container>\n+</template>\n+\n+<script lang=\"ts\">\n+  import Vue from 'vue';\n+  import * as api from '@/util/api';\n+  import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+  import SubViewFooter from '@/components/ui/SubViewFooter.vue';\n+  import LargeButton from '@/components/ui/LargeButton.vue';\n+  import HelpIcon from '@/components/ui/HelpIcon.vue';\n+\n+  export default Vue.extend({\n+    components: {\n+      SubViewTitle,\n+      LargeButton,\n+      SubViewFooter,\n+      HelpIcon,\n+    },\n+    data() {\n+      return {\n+        distinguishedName: '',\n+        csrGenerated: false,\n+        generatingCsr: false,\n+      };\n+    },\n+    methods: {\n+      back(): void {\n+        this.$router.go(-1);\n+      },\n+      generateCsr(): void {\n+        this.generatingCsr = true;\n+        api\n+          .post('/system/certificate/csr', { name: this.distinguishedName }, { responseType: 'blob' })\n+          .then((res) => {\n+            const tempLink = document.createElement('a');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc1MTAyMg==", "bodyText": "Yes, that would be better. Didn't find it when initially looking for a preexisting solution. Also modified the helper function a bit:\n\nMade it possible to pass the default file name\nAdded data-test attribute to generated link\nRemove generated link from DOM after clicking", "url": "https://github.com/nordic-institute/X-Road/pull/401#discussion_r388751022", "createdAt": "2020-03-06T07:37:04Z", "author": {"login": "raits"}, "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/SecurityServerTlsCertificate/GenerateInternalCsr.vue", "diffHunk": "@@ -0,0 +1,124 @@\n+<template>\n+  <v-container class=\"xrd-view-common justify-center wrapper\">\n+    <SubViewTitle :title=\"$t('ssTlsCertificate.generateInternalCsr.title')\" :show-close=false></SubViewTitle>\n+    <v-row class=\"first-action\">\n+      <v-col>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.description')}}\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"3\" class=\"mt-6\">\n+        <HelpIcon :text=\"$t('ssTlsCertificate.generateInternalCsr.step1.tooltip')\"/>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.label')}}\n+      </v-col>\n+      <v-col cols=\"8\">\n+        <v-text-field v-model=\"distinguishedName\" data-text=\"generate-internal-csr-distinguished-name-field\"\n+                      :placeholder=\"$t('ssTlsCertificate.generateInternalCsr.step1.placeholder')\"/>\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"8\" class=\"mt-2\">\n+        {{$t('ssTlsCertificate.generateInternalCsr.step2.description')}}\n+      </v-col>\n+      <v-col cols=\"4\" class=\"text-right\">\n+        <large-button outlined data-text=\"generate-internal-csr-generate-csr-button\"\n+                      :disabled=\"distinguishedName.length === 0 || csrGenerated\" :loading=\"generatingCsr\"\n+                      @click=\"generateCsr\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.step2.generateCSR')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+    <v-row class=\"bottom-buttons-wrapper\">\n+      <v-col cols=\"6\" class=\"text-left\">\n+        <large-button @click=\"back\" :disabled=\"csrGenerated || generatingCsr\" outlined\n+                      data-test=\"generate-internal-csr-cancel-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.cancel')}}\n+        </large-button>\n+      </v-col>\n+      <v-col cols=\"6\" class=\"text-right\">\n+        <large-button @click=\"back\" :disabled=\"!csrGenerated\" data-test=\"generate-internal-csr-done-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.done')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+  </v-container>\n+</template>\n+\n+<script lang=\"ts\">\n+  import Vue from 'vue';\n+  import * as api from '@/util/api';\n+  import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+  import SubViewFooter from '@/components/ui/SubViewFooter.vue';\n+  import LargeButton from '@/components/ui/LargeButton.vue';\n+  import HelpIcon from '@/components/ui/HelpIcon.vue';\n+\n+  export default Vue.extend({\n+    components: {\n+      SubViewTitle,\n+      LargeButton,\n+      SubViewFooter,\n+      HelpIcon,\n+    },\n+    data() {\n+      return {\n+        distinguishedName: '',\n+        csrGenerated: false,\n+        generatingCsr: false,\n+      };\n+    },\n+    methods: {\n+      back(): void {\n+        this.$router.go(-1);\n+      },\n+      generateCsr(): void {\n+        this.generatingCsr = true;\n+        api\n+          .post('/system/certificate/csr', { name: this.distinguishedName }, { responseType: 'blob' })\n+          .then((res) => {\n+            const tempLink = document.createElement('a');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyMjY3MQ=="}, "originalCommit": {"oid": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918"}, "originalPosition": 78}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2975, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}