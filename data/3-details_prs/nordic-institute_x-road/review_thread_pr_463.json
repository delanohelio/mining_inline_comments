{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNjcxMTMw", "number": 463, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzozMDowOFrOD14ScA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzo0NjoyM1rOD14rng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODIzMzQ0OnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzozMDowOFrOGLh8fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQxMDoyNDo1N1rOGMCZjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0MzY3OA==", "bodyText": "typo", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r414743678", "createdAt": "2020-04-24T17:30:08Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">\n+              <td>\n+                <StatusIcon :status=\"statusIconType(globalconf.status_class)\" />\n+              </td>\n+\n+              <td>{{$t('diagnostics.globalCongiguration.configurationStatus.'+globalconf.status_code)}}</td>\n+              <td class=\"time-column\">{{globalconf.prev_update_at | formatHoursMins}}</td>\n+              <td class=\"time-column\">{{globalconf.next_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.timestamping.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr\n+              v-for=\"timestampingService in timestapmingServices\"\n+              v-bind:key=\"timestampingService.url\"\n+            >\n+              <td>\n+                <StatusIcon :status=\"statusIconType(timestampingService.status_class)\" />\n+              </td>\n+              <td class=\"url-column\" data-test=\"service-url\">{{timestampingService.url}}</td>\n+              <td>{{$t('diagnostics.timestamping.timestampingStatus.'+timestampingService.status_code)}}</td>\n+              <td class=\"time-column\">{{timestampingService.prev_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.ocspResponders.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <div\n+          v-for=\"ocspDiags in ocspResponderDiagnostics\"\n+          v-bind:key=\"ocspDiags.distinguished_name\"\n+        >\n+          <div class=\"cert-service-name\">\n+            <span>{{$t('diagnostics.ocspResponders.certificationService')}}</span>\n+            {{ocspDiags.distinguished_name}}\n+          </div>\n+          <table class=\"xrd-table\">\n+            <thead>\n+              <tr>\n+                <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+                <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+                <th>{{$t('diagnostics.message')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+              </tr>\n+            </thead>\n+            <tbody>\n+              <tr v-for=\"ocsp in ocspDiags.ocsp_responders\" v-bind:key=\"ocsp.url\">\n+                <td>\n+                  <StatusIcon :status=\"statusIconType(ocsp.status_class)\" />\n+                </td>\n+                <td class=\"url-column\" data-test=\"service-url\">{{ocsp.url}}</td>\n+                <td>{{$t('diagnostics.ocspResponders.ocspStatus.'+ocsp.status_code)}}</td>\n+                <td class=\"time-column\">{{ocsp.prev_update_at | formatHoursMins}}</td>\n+                <td class=\"time-column\">{{ocsp.next_update_at | formatHoursMins}}</td>\n+              </tr>\n+            </tbody>\n+          </table>\n+        </div>\n+      </v-card-text>\n+    </v-card>\n   </v-layout>\n </template>\n \n <script lang=\"ts\">\n import Vue from 'vue';\n+import * as api from '@/util/api';\n+import {\n+  TimestampingServiceDiagnostics,\n+  OcspResponderDiagnostics,\n+  GlobalConfDiagnostics,\n+} from '@/types';\n+import StatusIcon from '@/components/ui/StatusIcon.vue';\n \n export default Vue.extend({\n-  data: () => ({}),\n+  components: {\n+    StatusIcon,\n+  },\n+  data: () => ({\n+    timestapmingServices: [] as TimestampingServiceDiagnostics[],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI3NTQwNA==", "bodyText": "Fixed", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r415275404", "createdAt": "2020-04-26T10:24:57Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">\n+              <td>\n+                <StatusIcon :status=\"statusIconType(globalconf.status_class)\" />\n+              </td>\n+\n+              <td>{{$t('diagnostics.globalCongiguration.configurationStatus.'+globalconf.status_code)}}</td>\n+              <td class=\"time-column\">{{globalconf.prev_update_at | formatHoursMins}}</td>\n+              <td class=\"time-column\">{{globalconf.next_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.timestamping.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr\n+              v-for=\"timestampingService in timestapmingServices\"\n+              v-bind:key=\"timestampingService.url\"\n+            >\n+              <td>\n+                <StatusIcon :status=\"statusIconType(timestampingService.status_class)\" />\n+              </td>\n+              <td class=\"url-column\" data-test=\"service-url\">{{timestampingService.url}}</td>\n+              <td>{{$t('diagnostics.timestamping.timestampingStatus.'+timestampingService.status_code)}}</td>\n+              <td class=\"time-column\">{{timestampingService.prev_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.ocspResponders.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <div\n+          v-for=\"ocspDiags in ocspResponderDiagnostics\"\n+          v-bind:key=\"ocspDiags.distinguished_name\"\n+        >\n+          <div class=\"cert-service-name\">\n+            <span>{{$t('diagnostics.ocspResponders.certificationService')}}</span>\n+            {{ocspDiags.distinguished_name}}\n+          </div>\n+          <table class=\"xrd-table\">\n+            <thead>\n+              <tr>\n+                <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+                <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+                <th>{{$t('diagnostics.message')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+              </tr>\n+            </thead>\n+            <tbody>\n+              <tr v-for=\"ocsp in ocspDiags.ocsp_responders\" v-bind:key=\"ocsp.url\">\n+                <td>\n+                  <StatusIcon :status=\"statusIconType(ocsp.status_class)\" />\n+                </td>\n+                <td class=\"url-column\" data-test=\"service-url\">{{ocsp.url}}</td>\n+                <td>{{$t('diagnostics.ocspResponders.ocspStatus.'+ocsp.status_code)}}</td>\n+                <td class=\"time-column\">{{ocsp.prev_update_at | formatHoursMins}}</td>\n+                <td class=\"time-column\">{{ocsp.next_update_at | formatHoursMins}}</td>\n+              </tr>\n+            </tbody>\n+          </table>\n+        </div>\n+      </v-card-text>\n+    </v-card>\n   </v-layout>\n </template>\n \n <script lang=\"ts\">\n import Vue from 'vue';\n+import * as api from '@/util/api';\n+import {\n+  TimestampingServiceDiagnostics,\n+  OcspResponderDiagnostics,\n+  GlobalConfDiagnostics,\n+} from '@/types';\n+import StatusIcon from '@/components/ui/StatusIcon.vue';\n \n export default Vue.extend({\n-  data: () => ({}),\n+  components: {\n+    StatusIcon,\n+  },\n+  data: () => ({\n+    timestapmingServices: [] as TimestampingServiceDiagnostics[],", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0MzY3OA=="}, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 121}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODI0MzM3OnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzozMjozOFrOGLiCgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQxMDoyNDo1MFrOGMCZdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0NTIxNg==", "bodyText": "Preferably group all the style rules of a single element to same place. This width: 100%; and margin-bottom: 30px; below should stay next to each other so it'll be easier to see what rules are set for this class.", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r414745216", "createdAt": "2020-04-24T17:32:38Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">\n+              <td>\n+                <StatusIcon :status=\"statusIconType(globalconf.status_class)\" />\n+              </td>\n+\n+              <td>{{$t('diagnostics.globalCongiguration.configurationStatus.'+globalconf.status_code)}}</td>\n+              <td class=\"time-column\">{{globalconf.prev_update_at | formatHoursMins}}</td>\n+              <td class=\"time-column\">{{globalconf.next_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.timestamping.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr\n+              v-for=\"timestampingService in timestapmingServices\"\n+              v-bind:key=\"timestampingService.url\"\n+            >\n+              <td>\n+                <StatusIcon :status=\"statusIconType(timestampingService.status_class)\" />\n+              </td>\n+              <td class=\"url-column\" data-test=\"service-url\">{{timestampingService.url}}</td>\n+              <td>{{$t('diagnostics.timestamping.timestampingStatus.'+timestampingService.status_code)}}</td>\n+              <td class=\"time-column\">{{timestampingService.prev_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.ocspResponders.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <div\n+          v-for=\"ocspDiags in ocspResponderDiagnostics\"\n+          v-bind:key=\"ocspDiags.distinguished_name\"\n+        >\n+          <div class=\"cert-service-name\">\n+            <span>{{$t('diagnostics.ocspResponders.certificationService')}}</span>\n+            {{ocspDiags.distinguished_name}}\n+          </div>\n+          <table class=\"xrd-table\">\n+            <thead>\n+              <tr>\n+                <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+                <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+                <th>{{$t('diagnostics.message')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+              </tr>\n+            </thead>\n+            <tbody>\n+              <tr v-for=\"ocsp in ocspDiags.ocsp_responders\" v-bind:key=\"ocsp.url\">\n+                <td>\n+                  <StatusIcon :status=\"statusIconType(ocsp.status_class)\" />\n+                </td>\n+                <td class=\"url-column\" data-test=\"service-url\">{{ocsp.url}}</td>\n+                <td>{{$t('diagnostics.ocspResponders.ocspStatus.'+ocsp.status_code)}}</td>\n+                <td class=\"time-column\">{{ocsp.prev_update_at | formatHoursMins}}</td>\n+                <td class=\"time-column\">{{ocsp.next_update_at | formatHoursMins}}</td>\n+              </tr>\n+            </tbody>\n+          </table>\n+        </div>\n+      </v-card-text>\n+    </v-card>\n   </v-layout>\n </template>\n \n <script lang=\"ts\">\n import Vue from 'vue';\n+import * as api from '@/util/api';\n+import {\n+  TimestampingServiceDiagnostics,\n+  OcspResponderDiagnostics,\n+  GlobalConfDiagnostics,\n+} from '@/types';\n+import StatusIcon from '@/components/ui/StatusIcon.vue';\n \n export default Vue.extend({\n-  data: () => ({}),\n+  components: {\n+    StatusIcon,\n+  },\n+  data: () => ({\n+    timestapmingServices: [] as TimestampingServiceDiagnostics[],\n+    globalconf: undefined as GlobalConfDiagnostics | undefined,\n+    ocspResponderDiagnostics: [] as OcspResponderDiagnostics[],\n+  }),\n+  methods: {\n+    fetchData(): void {\n+      api\n+        .get(`/diagnostics/timestamping-services`)\n+        .then((res) => {\n+          this.timestapmingServices = res.data;\n+        })\n+        .catch((error) => {\n+          this.$store.dispatch('showError', error);\n+        });\n+\n+      api\n+        .get(`/diagnostics/globalconf`)\n+        .then((res) => {\n+          this.globalconf = res.data;\n+        })\n+        .catch((error) => {\n+          this.$store.dispatch('showError', error);\n+        });\n+\n+      api\n+        .get(`/diagnostics/ocsp-responders`)\n+        .then((res) => {\n+          this.ocspResponderDiagnostics = res.data;\n+        })\n+        .catch((error) => {\n+          this.$store.dispatch('showError', error);\n+        });\n+    },\n+\n+    statusIconType(status: string): string {\n+      if (!status) {\n+        return '';\n+      }\n+      switch (status) {\n+        case 'OK':\n+          return 'green';\n+        case 'WAITING':\n+          return 'orange-ring';\n+        case 'FAIL':\n+          return 'red';\n+        default:\n+          return 'red';\n+      }\n+    },\n+  },\n+  created() {\n+    this.fetchData();\n+  },\n });\n </script>\n \n <style lang=\"scss\" scoped>\n+@import '../../assets/shared';\n+@import '../../assets/colors';\n+@import '../../assets/tables';\n+\n+.diagnostic-card {\n+  &:first-of-type {\n+    margin-top: 40px;\n+  }\n+\n+  width: 100%;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 187}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI3NTM4MQ==", "bodyText": "Fixed", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r415275381", "createdAt": "2020-04-26T10:24:50Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">\n+              <td>\n+                <StatusIcon :status=\"statusIconType(globalconf.status_class)\" />\n+              </td>\n+\n+              <td>{{$t('diagnostics.globalCongiguration.configurationStatus.'+globalconf.status_code)}}</td>\n+              <td class=\"time-column\">{{globalconf.prev_update_at | formatHoursMins}}</td>\n+              <td class=\"time-column\">{{globalconf.next_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.timestamping.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr\n+              v-for=\"timestampingService in timestapmingServices\"\n+              v-bind:key=\"timestampingService.url\"\n+            >\n+              <td>\n+                <StatusIcon :status=\"statusIconType(timestampingService.status_class)\" />\n+              </td>\n+              <td class=\"url-column\" data-test=\"service-url\">{{timestampingService.url}}</td>\n+              <td>{{$t('diagnostics.timestamping.timestampingStatus.'+timestampingService.status_code)}}</td>\n+              <td class=\"time-column\">{{timestampingService.prev_update_at | formatHoursMins}}</td>\n+            </tr>\n+          </tbody>\n+        </table>\n+      </v-card-text>\n+    </v-card>\n+\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.ocspResponders.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <div\n+          v-for=\"ocspDiags in ocspResponderDiagnostics\"\n+          v-bind:key=\"ocspDiags.distinguished_name\"\n+        >\n+          <div class=\"cert-service-name\">\n+            <span>{{$t('diagnostics.ocspResponders.certificationService')}}</span>\n+            {{ocspDiags.distinguished_name}}\n+          </div>\n+          <table class=\"xrd-table\">\n+            <thead>\n+              <tr>\n+                <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+                <th class=\"url-column\">{{$t('diagnostics.serviceUrl')}}</th>\n+                <th>{{$t('diagnostics.message')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+                <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+              </tr>\n+            </thead>\n+            <tbody>\n+              <tr v-for=\"ocsp in ocspDiags.ocsp_responders\" v-bind:key=\"ocsp.url\">\n+                <td>\n+                  <StatusIcon :status=\"statusIconType(ocsp.status_class)\" />\n+                </td>\n+                <td class=\"url-column\" data-test=\"service-url\">{{ocsp.url}}</td>\n+                <td>{{$t('diagnostics.ocspResponders.ocspStatus.'+ocsp.status_code)}}</td>\n+                <td class=\"time-column\">{{ocsp.prev_update_at | formatHoursMins}}</td>\n+                <td class=\"time-column\">{{ocsp.next_update_at | formatHoursMins}}</td>\n+              </tr>\n+            </tbody>\n+          </table>\n+        </div>\n+      </v-card-text>\n+    </v-card>\n   </v-layout>\n </template>\n \n <script lang=\"ts\">\n import Vue from 'vue';\n+import * as api from '@/util/api';\n+import {\n+  TimestampingServiceDiagnostics,\n+  OcspResponderDiagnostics,\n+  GlobalConfDiagnostics,\n+} from '@/types';\n+import StatusIcon from '@/components/ui/StatusIcon.vue';\n \n export default Vue.extend({\n-  data: () => ({}),\n+  components: {\n+    StatusIcon,\n+  },\n+  data: () => ({\n+    timestapmingServices: [] as TimestampingServiceDiagnostics[],\n+    globalconf: undefined as GlobalConfDiagnostics | undefined,\n+    ocspResponderDiagnostics: [] as OcspResponderDiagnostics[],\n+  }),\n+  methods: {\n+    fetchData(): void {\n+      api\n+        .get(`/diagnostics/timestamping-services`)\n+        .then((res) => {\n+          this.timestapmingServices = res.data;\n+        })\n+        .catch((error) => {\n+          this.$store.dispatch('showError', error);\n+        });\n+\n+      api\n+        .get(`/diagnostics/globalconf`)\n+        .then((res) => {\n+          this.globalconf = res.data;\n+        })\n+        .catch((error) => {\n+          this.$store.dispatch('showError', error);\n+        });\n+\n+      api\n+        .get(`/diagnostics/ocsp-responders`)\n+        .then((res) => {\n+          this.ocspResponderDiagnostics = res.data;\n+        })\n+        .catch((error) => {\n+          this.$store.dispatch('showError', error);\n+        });\n+    },\n+\n+    statusIconType(status: string): string {\n+      if (!status) {\n+        return '';\n+      }\n+      switch (status) {\n+        case 'OK':\n+          return 'green';\n+        case 'WAITING':\n+          return 'orange-ring';\n+        case 'FAIL':\n+          return 'red';\n+        default:\n+          return 'red';\n+      }\n+    },\n+  },\n+  created() {\n+    this.fetchData();\n+  },\n });\n </script>\n \n <style lang=\"scss\" scoped>\n+@import '../../assets/shared';\n+@import '../../assets/colors';\n+@import '../../assets/tables';\n+\n+.diagnostic-card {\n+  &:first-of-type {\n+    margin-top: 40px;\n+  }\n+\n+  width: 100%;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0NTIxNg=="}, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 187}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODI5NzkwOnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzo0NjoyM1rOGLiivw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNDozMjo0OVrOGMQRGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1MzQ3MQ==", "bodyText": "This applies to timestamping and ocsp responders -cards as well. Should there be some sort of status/infotext if no globalconf is empty for some reason? Now the table body is just empty and yet the table headers stay.", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r414753471", "createdAt": "2020-04-24T17:46:23Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI3NjM3OQ==", "bodyText": "It might be good to have some \"no data found\" text or something like that, but there should be a one consistent way that the whole app uses. Currently a \"empty table\" is the way it's done in all other places also. This probably should be improved at some point.\nI added a loading indicator on the cards so at least the user sees if it's empty or loading.", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r415276379", "createdAt": "2020-04-26T10:30:27Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1MzQ3MQ=="}, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUwMjYxOA==", "bodyText": "Yeah, it should be improved. I've added such infotext to a couple of table views. I guess we should make a component of that.", "url": "https://github.com/nordic-institute/X-Road/pull/463#discussion_r415502618", "createdAt": "2020-04-27T04:32:49Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/frontend/src/views/Diagnostics/Diagnostics.vue", "diffHunk": "@@ -1,16 +1,216 @@\n <template>\n   <v-layout align-center justify-center column fill-height elevation-0>\n-    <div>Placeholder</div>\n+    <v-card class=\"xrd-card diagnostic-card\">\n+      <v-card-title>\n+        <span class=\"headline\">{{$t('diagnostics.globalCongiguration.title')}}</span>\n+      </v-card-title>\n+      <v-card-text class=\"pt-4\">\n+        <table class=\"xrd-table\">\n+          <thead>\n+            <tr>\n+              <th class=\"status-column\">{{$t('diagnostics.status')}}</th>\n+              <th>{{$t('diagnostics.message')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.previousUpdate')}}</th>\n+              <th class=\"time-column\">{{$t('diagnostics.nextUpdate')}}</th>\n+            </tr>\n+          </thead>\n+          <tbody>\n+            <tr v-if=\"globalconf\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1MzQ3MQ=="}, "originalCommit": {"oid": "dca13d4dc390f5fac38e093ebb1c51df751097bf"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2823, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}