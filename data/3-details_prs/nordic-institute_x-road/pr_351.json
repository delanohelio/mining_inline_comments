{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMDM0MzU2", "number": 351, "title": "XRDDEV-810 refresh OPENAPI3/REST Service Description", "bodyText": "", "createdAt": "2020-02-04T20:26:01Z", "url": "https://github.com/nordic-institute/X-Road/pull/351", "merged": true, "mergeCommit": {"oid": "c5d76583de6f3a9e8d91cb13c41f1e1b7c64c54f"}, "closed": true, "closedAt": "2020-02-14T10:27:28Z", "author": {"login": "TJaakkola"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_rICHgH2gAyMzcxMDM0MzU2OmM3M2NhNDBmOTVkYTc3MjdjYzdlYmI2Njk0MmQwM2NiYzIwMTViMmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEMBC_gH2gAyMzcxMDM0MzU2OjFlYjUxZjJkNWZiNTE0ODhjMjZjNTE4NjNiOTg3NjY1NmY1ZmUzODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c73ca40f95da7727cc7ebb66942d03cbc2015b2f", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/c73ca40f95da7727cc7ebb66942d03cbc2015b2f", "committedDate": "2020-01-31T08:46:51Z", "message": "XRDDEV-810: Added implementation for refreshing REST and OPENAPI3 type of Service Description"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b125f248720fe4446b3b95f062dcb73c7bab2942", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/b125f248720fe4446b3b95f062dcb73c7bab2942", "committedDate": "2020-01-31T09:50:07Z", "message": "XRDDEV-810: Add URL validation and updating refreshedDate-values on refreshing and adding ServiceDescriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c26f76a16d1fc15f7c1cc8f2443730c6ed595b4e", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/c26f76a16d1fc15f7c1cc8f2443730c6ed595b4e", "committedDate": "2020-02-03T09:57:50Z", "message": "Merge branch 'develop' into XRDDEV-810"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93bab99a5fa678aff1a7035f06291e07817d4386", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/93bab99a5fa678aff1a7035f06291e07817d4386", "committedDate": "2020-02-04T07:33:15Z", "message": "XRDDEV-810: Add refresh functionality for REST and OPENAPI3 service descriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0912543819e378a89cf165d7902b3b3acdd72dc5", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/0912543819e378a89cf165d7902b3b3acdd72dc5", "committedDate": "2020-02-04T12:41:54Z", "message": "XRDDEV-810: Fix refresh-button spinners to work separately"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2beb45f99fa7f8ed4725a92a6ae505d2ab3f322", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/a2beb45f99fa7f8ed4725a92a6ae505d2ab3f322", "committedDate": "2020-02-04T20:12:06Z", "message": "XRDDEV-810: Fix failing test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/01cdf6b663a524e2dd9f7190552c538c0f026fd3", "committedDate": "2020-02-05T07:19:53Z", "message": "XRDDEV-810: Fix style error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNjU1OTUz", "url": "https://github.com/nordic-institute/X-Road/pull/351#pullrequestreview-353655953", "createdAt": "2020-02-05T11:48:11Z", "commit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMTo0ODoxMVrOFl1Amg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMTo0ODoxMVrOFl1Amg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIxMDEzOA==", "bodyText": "Would be nice to add comment about what the permission is or where it's used. Helps to keep track on these and in the end it's easier to see if we have some unused permissions.", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375210138", "createdAt": "2020-02-05T11:48:11Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/global.ts", "diffHunk": "@@ -78,7 +78,9 @@ export enum Permissions {\n   IMPORT_INTERNAL_SSL_CERT = 'IMPORT_INTERNAL_SSL_CERT', // Security server TLS certificate\n   IMPORT_SIGN_CERT = 'IMPORT_SIGN_CERT',\n   INIT_CONFIG = 'INIT_CONFIG',\n-  REFRESH_WSDL = 'REFRESH_WSDL', // client > services > refresh WSDL\n+  REFRESH_WSDL = 'REFRESH_WSDL', // client > services > refresh\n+  REFRESH_REST = 'REFRESH_REST',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNjUxMDI1", "url": "https://github.com/nordic-institute/X-Road/pull/351#pullrequestreview-353651025", "createdAt": "2020-02-05T11:39:08Z", "commit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMTozOTowOFrOFl0xsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMjo0MzoyOFrOFl2ahQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIwNjMyMg==", "bodyText": "Why is this permission not in old UI already? Was there some reason behind it, and what permission did old UI require for \"refresh rest\" operation?", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375206322", "createdAt": "2020-02-05T11:39:08Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/resources/permissions.yml", "diffHunk": "@@ -33,6 +33,7 @@\n -       edit_openapi3_endpoint: [XROAD_SERVICE_ADMINISTRATOR]\n -       refresh_wsdl: [XROAD_SERVICE_ADMINISTRATOR]\n -       refresh_openapi3: [XROAD_SERVICE_ADMINISTRATOR]\n+        refresh_rest: [XROAD_SERVICE_ADMINISTRATOR]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIwNzc1NA==", "bodyText": "Should this already include the \"testability identifiers\"? At least definition of done already mentions it.\nhttps://confluence.niis.org/display/XRDDEV/Testability", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375207754", "createdAt": "2020-02-05T11:42:41Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/src/views/Clients/Services/Services.vue", "diffHunk": "@@ -24,7 +24,7 @@\n         <v-btn\n           v-if=\"showAddButton\"\n           color=\"primary\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIxOTAzMQ==", "bodyText": "ServiceDescriptionException is not really a HTTP 404 resource not found. API URL defines what the resource is, in this case /service-descriptions/{id}/refresh, and that does exist. If the processing of this request fails then error is something else, like for example http 500 internal server error, http 409 conflict, or something else.\nI am not 100% sure if ServiceNotFoundException is correct exception class to be used in this case altogether. refreshRESTServiceDescription does not throw it even though it claims to. refreshOPENAPI3ServiceDescription throws it if we had for some reason a service description without any services. So it is more a problem with a service description, not a problem of not finding one specific service. It could have a different exception type, or just be a (DeviationAware)RuntimeException.\nOr keep it as a ServiceNotFoundException (which is not 100% accurate IMO) but at least map it to http 500 internal server error? Isn't that what it is, something weird has happened for it to be possible, and it is not anything that client request has caused, so it cannot be http 4xx?", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375219031", "createdAt": "2020-02-05T12:09:29Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/openapi/ServiceDescriptionsApiController.java", "diffHunk": "@@ -191,12 +191,13 @@ public ServiceDescriptionsApiController(ServiceDescriptionService serviceDescrip\n                             ignoreWarnings.getIgnoreWarnings()));\n         } catch (WsdlParser.WsdlNotFoundException | UnhandledWarningsException\n                 | InvalidUrlException | InvalidWsdlException\n-                | ServiceDescriptionService.WrongServiceDescriptionTypeException e) {\n+                | ServiceDescriptionService.WrongServiceDescriptionTypeException\n+                | OpenApiParser.ParsingException e) {\n             throw new BadRequestException(e);\n         } catch (ServiceDescriptionService.ServiceAlreadyExistsException\n                 | ServiceDescriptionService.WsdlUrlAlreadyExistsException e) {\n             throw new ConflictException(e);\n-        } catch (ServiceDescriptionNotFoundException e) {\n+        } catch (ServiceNotFoundException | ServiceDescriptionNotFoundException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyMDU3Mw==", "bodyText": "Does not throw ServiceNotFoundException", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375220573", "createdAt": "2020-02-05T12:13:14Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/ServiceDescriptionService.java", "diffHunk": "@@ -534,6 +581,71 @@ public ServiceDescriptionType refreshServiceDescription(Long id, boolean ignoreW\n         throw new NotImplementedException(\"REST ServiceDescription refresh not implemented yet\");\n     }\n \n+    /**\n+     * Refresh REST service description\n+     *\n+     * @param serviceDescriptionType\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not REST\n+     * @throws ServiceNotFoundException             if there is no service linked to service description\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshRESTServiceDescription(ServiceDescriptionType serviceDescriptionType)\n+            throws WrongServiceDescriptionTypeException, ServiceNotFoundException, InvalidUrlException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 169}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyMDgwMQ==", "bodyText": "Why does this method / functionality actually exist? Doesn't it only update refreshedDate?", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375220801", "createdAt": "2020-02-05T12:13:50Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/ServiceDescriptionService.java", "diffHunk": "@@ -534,6 +581,71 @@ public ServiceDescriptionType refreshServiceDescription(Long id, boolean ignoreW\n         throw new NotImplementedException(\"REST ServiceDescription refresh not implemented yet\");\n     }\n \n+    /**\n+     * Refresh REST service description\n+     *\n+     * @param serviceDescriptionType\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not REST\n+     * @throws ServiceNotFoundException             if there is no service linked to service description\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshRESTServiceDescription(ServiceDescriptionType serviceDescriptionType)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 168}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyMjQwMw==", "bodyText": "This handles warnings pretty differently from what refreshWSDLServiceDescription does. WSDL side gives warnings if new services were added or removed, this does not do it AFAIK?\n\nI think this is how old UI works too, right? Old UI does not warn about adding / removing openapi services either?\nis this by design or accidental?", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375222403", "createdAt": "2020-02-05T12:17:48Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/ServiceDescriptionService.java", "diffHunk": "@@ -534,6 +581,71 @@ public ServiceDescriptionType refreshServiceDescription(Long id, boolean ignoreW\n         throw new NotImplementedException(\"REST ServiceDescription refresh not implemented yet\");\n     }\n \n+    /**\n+     * Refresh REST service description\n+     *\n+     * @param serviceDescriptionType\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not REST\n+     * @throws ServiceNotFoundException             if there is no service linked to service description\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshRESTServiceDescription(ServiceDescriptionType serviceDescriptionType)\n+            throws WrongServiceDescriptionTypeException, ServiceNotFoundException, InvalidUrlException {\n+        verifyAuthority(\"REFRESH_REST\");\n+\n+        if (!serviceDescriptionType.getType().equals(DescriptionType.REST)) {\n+            throw new WrongServiceDescriptionTypeException(\"Expected description type REST\");\n+        }\n+\n+        validateUrl(serviceDescriptionType.getUrl());\n+\n+        serviceDescriptionType.setRefreshedDate(new Date());\n+\n+        return serviceDescriptionType;\n+    }\n+\n+    /**\n+     * Refresh OPENAPI3 ServiceDescription\n+     *\n+     * @param serviceDescriptionType\n+     * @param ignoreWarnings\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not openapi3\n+     * @throws ServiceNotFoundException             if there is no service linked to given service description\n+     * @throws UnhandledWarningsException           if unhandled warnings are found and ignoreWarnings if false\n+     * @throws OpenApiParser.ParsingException       if parsing openapi3 description fails\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshOPENAPI3ServiceDescription(ServiceDescriptionType serviceDescriptionType,\n+            boolean ignoreWarnings) throws WrongServiceDescriptionTypeException, ServiceNotFoundException,\n+            UnhandledWarningsException, OpenApiParser.ParsingException, InvalidUrlException {\n+\n+        verifyAuthority(\"REFRESH_OPENAPI3\");\n+\n+        if (!serviceDescriptionType.getType().equals(DescriptionType.OPENAPI3)) {\n+            throw new WrongServiceDescriptionTypeException(\"Expected description type OPENAPI3\");\n+        }\n+\n+        if (serviceDescriptionType.getService().get(0) == null) {\n+            throw new ServiceNotFoundException(\"Service not found from servicedescription with id \"\n+                    + serviceDescriptionType.getId());\n+        }\n+\n+        validateUrl(serviceDescriptionType.getUrl());\n+\n+        serviceDescriptionType.setRefreshedDate(new Date());\n+\n+        parseOpenapi3ToServiceDescription(serviceDescriptionType.getUrl(),\n+                serviceDescriptionType.getService().get(0).getServiceCode(),\n+                ignoreWarnings,\n+                serviceDescriptionType);\n+\n+        clientRepository.saveOrUpdateAndFlush(serviceDescriptionType.getClient());\n+\n+        return serviceDescriptionType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 221}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyNTQwNw==", "bodyText": "services.rb does these checks\n      check_duplicate_url(item)\n      check_duplicate_service_codes(item)\n\nrefreshWSDLServiceDescription throws WsdlUrlAlreadyExistsException and ServiceAlreadyExistsException if this kind of checks fail. Are these missing from refreshOPENAPI3ServiceDescription?", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375225407", "createdAt": "2020-02-05T12:25:02Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/ServiceDescriptionService.java", "diffHunk": "@@ -534,6 +581,71 @@ public ServiceDescriptionType refreshServiceDescription(Long id, boolean ignoreW\n         throw new NotImplementedException(\"REST ServiceDescription refresh not implemented yet\");\n     }\n \n+    /**\n+     * Refresh REST service description\n+     *\n+     * @param serviceDescriptionType\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not REST\n+     * @throws ServiceNotFoundException             if there is no service linked to service description\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshRESTServiceDescription(ServiceDescriptionType serviceDescriptionType)\n+            throws WrongServiceDescriptionTypeException, ServiceNotFoundException, InvalidUrlException {\n+        verifyAuthority(\"REFRESH_REST\");\n+\n+        if (!serviceDescriptionType.getType().equals(DescriptionType.REST)) {\n+            throw new WrongServiceDescriptionTypeException(\"Expected description type REST\");\n+        }\n+\n+        validateUrl(serviceDescriptionType.getUrl());\n+\n+        serviceDescriptionType.setRefreshedDate(new Date());\n+\n+        return serviceDescriptionType;\n+    }\n+\n+    /**\n+     * Refresh OPENAPI3 ServiceDescription\n+     *\n+     * @param serviceDescriptionType\n+     * @param ignoreWarnings\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not openapi3\n+     * @throws ServiceNotFoundException             if there is no service linked to given service description\n+     * @throws UnhandledWarningsException           if unhandled warnings are found and ignoreWarnings if false\n+     * @throws OpenApiParser.ParsingException       if parsing openapi3 description fails\n+     * @throws InvalidUrlException                  if url is invalid", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyNzExMQ==", "bodyText": "refreshOPENAPI3ServiceDescription differs from convention used elsewhere, should probably be refreshOpenApi3ServiceDescription? There is also variant parseOpenapi3ToServiceDescription in use in several places.", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375227111", "createdAt": "2020-02-05T12:29:23Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/ServiceDescriptionService.java", "diffHunk": "@@ -534,6 +581,71 @@ public ServiceDescriptionType refreshServiceDescription(Long id, boolean ignoreW\n         throw new NotImplementedException(\"REST ServiceDescription refresh not implemented yet\");\n     }\n \n+    /**\n+     * Refresh REST service description\n+     *\n+     * @param serviceDescriptionType\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not REST\n+     * @throws ServiceNotFoundException             if there is no service linked to service description\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshRESTServiceDescription(ServiceDescriptionType serviceDescriptionType)\n+            throws WrongServiceDescriptionTypeException, ServiceNotFoundException, InvalidUrlException {\n+        verifyAuthority(\"REFRESH_REST\");\n+\n+        if (!serviceDescriptionType.getType().equals(DescriptionType.REST)) {\n+            throw new WrongServiceDescriptionTypeException(\"Expected description type REST\");\n+        }\n+\n+        validateUrl(serviceDescriptionType.getUrl());\n+\n+        serviceDescriptionType.setRefreshedDate(new Date());\n+\n+        return serviceDescriptionType;\n+    }\n+\n+    /**\n+     * Refresh OPENAPI3 ServiceDescription\n+     *\n+     * @param serviceDescriptionType\n+     * @param ignoreWarnings\n+     * @return {@link ServiceDescriptionType}\n+     * @throws WrongServiceDescriptionTypeException if service type is not openapi3\n+     * @throws ServiceNotFoundException             if there is no service linked to given service description\n+     * @throws UnhandledWarningsException           if unhandled warnings are found and ignoreWarnings if false\n+     * @throws OpenApiParser.ParsingException       if parsing openapi3 description fails\n+     * @throws InvalidUrlException                  if url is invalid\n+     */\n+    private ServiceDescriptionType refreshOPENAPI3ServiceDescription(ServiceDescriptionType serviceDescriptionType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 195}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIzMzE1Nw==", "bodyText": "I kind of get the feeling that more tests for refreshOpenApi3Description could be good (here and in ServiceDescriptionServiceIntegrationTest)? Now ServiceDescriptionsApiControllerIntegrationTest tests only WSDL related operations?\nMaybe \"ignore warnings\" feature would be good to test in ServiceDescriptionServiceIntegrationTest? Especially if we would add \"add/remove services\" warnings.", "url": "https://github.com/nordic-institute/X-Road/pull/351#discussion_r375233157", "createdAt": "2020-02-05T12:43:28Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/src/test/java/org/niis/xroad/restapi/openapi/ServiceDescriptionsApiControllerIntegrationTest.java", "diffHunk": "@@ -39,7 +39,7 @@\n import org.niis.xroad.restapi.openapi.model.ServiceDescriptionDisabledNotice;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01cdf6b663a524e2dd9f7190552c538c0f026fd3"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05f0eea59e2e242fb8bdb59e6c1f9594f9fb035a", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/05f0eea59e2e242fb8bdb59e6c1f9594f9fb035a", "committedDate": "2020-02-05T20:26:59Z", "message": "XRDDEV-810: Fix sonarqube error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a3947b5aa9a0ba919daeab15a4a5e9143ac78fa", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/2a3947b5aa9a0ba919daeab15a4a5e9143ac78fa", "committedDate": "2020-02-06T07:52:07Z", "message": "XRDDEV-810: Add comment to permission changes and data-test attributes to html markup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cbfb063a588ec70f628add8bdb5a521a7dfbf31", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/2cbfb063a588ec70f628add8bdb5a521a7dfbf31", "committedDate": "2020-02-11T09:26:32Z", "message": "XRDDEV-810: Use DeviationAwareRuntimeException instead of checked ServiceException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c19a830581dc27e9522c3a77a52a8ac96247d2b", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/1c19a830581dc27e9522c3a77a52a8ac96247d2b", "committedDate": "2020-02-11T09:57:02Z", "message": "XRDDEV-810: Align naming convention"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e04f9dd52489069cbbc03806ec25e1297b61424b", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/e04f9dd52489069cbbc03806ec25e1297b61424b", "committedDate": "2020-02-11T14:18:20Z", "message": "XRDDEV-810: Add tests to refresh Service Description functionality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47fc36b08c8dad8f3c2e382acbbfcd52802c3027", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/47fc36b08c8dad8f3c2e382acbbfcd52802c3027", "committedDate": "2020-02-12T06:35:42Z", "message": "Merge branch 'develop' into XRDDEV-810"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4662522cd817980611eee6431cffe6f6e21bd4ea", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4662522cd817980611eee6431cffe6f6e21bd4ea", "committedDate": "2020-02-13T08:55:36Z", "message": "XRDDEV-810: Fix method naming conventions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "338972c10093c69ef6b366a53ad4dde75af3904d", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/338972c10093c69ef6b366a53ad4dde75af3904d", "committedDate": "2020-02-13T08:57:15Z", "message": "Merge branch 'XRDDEV-810' of github.com:nordic-institute/X-Road into XRDDEV-810"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MjI5NTc0", "url": "https://github.com/nordic-institute/X-Road/pull/351#pullrequestreview-358229574", "createdAt": "2020-02-13T13:51:04Z", "commit": {"oid": "338972c10093c69ef6b366a53ad4dde75af3904d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1eb51f2d5fb51488c26c51863b9876656f5fe388", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/1eb51f2d5fb51488c26c51863b9876656f5fe388", "committedDate": "2020-02-14T09:21:47Z", "message": "Merge branch 'develop' into XRDDEV-810"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4292, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}