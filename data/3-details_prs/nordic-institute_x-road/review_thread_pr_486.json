{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNDg2MTMy", "number": 486, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1NzozM1rOD5al0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1OToyNFrOD5apPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNTMxMDkwOnYy", "diffSide": "RIGHT", "path": "src/common-verifier/src/main/java/ee/ria/xroad/common/ocsp/OcspVerifier.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1NzozM1rOGQqr9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1NzozM1rOGQqr9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEyOTc4Mw==", "bodyText": "This could be simplified, converting the instant is not necessary when UTC is used ( https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#toString-- )", "url": "https://github.com/nordic-institute/X-Road/pull/486#discussion_r420129783", "createdAt": "2020-05-05T13:57:33Z", "author": {"login": "jhyoty"}, "path": "src/common-verifier/src/main/java/ee/ria/xroad/common/ocsp/OcspVerifier.java", "diffHunk": "@@ -172,10 +174,12 @@ private void verifyValidityAt(Date atDate, SingleResp singleResp) {\n             log.debug(\"Verify OCSP nextUpdate, atDate: {} nextUpdate: {}\", atDate, singleResp.getNextUpdate());\n             if (singleResp.getNextUpdate() != null\n                     && singleResp.getNextUpdate().before(atDate)) {\n-                SimpleDateFormat fmt = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ss\");\n                 throw new CodedException(X_INCORRECT_VALIDATION_INFO,\n-                        String.format(\"OCSP nextUpdate is too old, atDate: %s nextUpdate: %s\", fmt.format(atDate),\n-                                fmt.format(singleResp.getNextUpdate())));\n+                        String.format(\"OCSP nextUpdate is too old, atDate: %s nextUpdate: %s\",\n+                                ZonedDateTime.ofInstant(atDate.toInstant(),\n+                                        ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT),\n+                                ZonedDateTime.ofInstant(singleResp.getNextUpdate().toInstant(),\n+                                        ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNTMxOTY3OnYy", "diffSide": "RIGHT", "path": "src/configuration-proxy/src/main/java/ee/ria/xroad/confproxy/commandline/ConfProxyUtilViewConf.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1OToyNFrOGQqxog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMzo1OToyNFrOGQqxog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEzMTIzNA==", "bodyText": "Could be simplified to anchor.getGeneratedAt().toInstant()", "url": "https://github.com/nordic-institute/X-Road/pull/486#discussion_r420131234", "createdAt": "2020-05-05T13:59:24Z", "author": {"login": "jhyoty"}, "path": "src/configuration-proxy/src/main/java/ee/ria/xroad/confproxy/commandline/ConfProxyUtilViewConf.java", "diffHunk": "@@ -124,11 +125,9 @@ private void displayInfo(final String instance,\n         if (anchorError == null) {\n             System.out.println(\"Instance identifier: \"\n                     + anchor.getInstanceIdentifier());\n-            SimpleDateFormat sdf =\n-                    new SimpleDateFormat(\"z yyyy-MMM-d hh:mm:ss\");\n-            sdf.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n             System.out.println(\"Generated at:        \"\n-                    + sdf.format(anchor.getGeneratedAt()));\n+                    + ZonedDateTime.ofInstant(anchor.getGeneratedAt().toInstant(),\n+                    ZoneId.of(\"UTC\")).format(DateTimeFormatter.ISO_INSTANT));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca23702a6dd5ff6dfb5a7f3d0d09c75b1298bbe"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2857, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}