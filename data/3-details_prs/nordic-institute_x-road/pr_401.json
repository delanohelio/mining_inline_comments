{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyOTMzNDY1", "number": 401, "title": "XRDDEV-835: implemented internal CSR generation view on frontend", "bodyText": "JIRA task: https://jira.niis.org/browse/XRDDEV-835", "createdAt": "2020-03-03T12:51:47Z", "url": "https://github.com/nordic-institute/X-Road/pull/401", "merged": true, "mergeCommit": {"oid": "fba08574e53457d762d56b5a96b747464351accf"}, "closed": true, "closedAt": "2020-03-11T08:59:57Z", "author": {"login": "raits"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKBy0KAH2gAyMzgyOTMzNDY1OmRhOGJkMzllYWM0NWEwY2I1ZTRmNjFjZTUwNzk4M2UzOGY5ZTU5MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMjSQ6AFqTM3MjU3MjE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918", "author": {"user": {"login": "raits", "name": "Raido Kaju"}}, "url": "https://github.com/nordic-institute/X-Road/commit/da8bd39eac45a0cb5e4f61ce507983e38f9e5918", "committedDate": "2020-03-03T12:50:44Z", "message": "XRDDEV-835: implemented internal CSR generation view on frontend"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NjA2MzU5", "url": "https://github.com/nordic-institute/X-Road/pull/401#pullrequestreview-369606359", "createdAt": "2020-03-05T14:21:17Z", "commit": {"oid": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyMToxN1rOFyVVbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyMToxN1rOFyVVbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyMjY3MQ==", "bodyText": "Would it be possible to use saveResponseAsFile from helpers.ts ? Or is this a different kind of thing?", "url": "https://github.com/nordic-institute/X-Road/pull/401#discussion_r388322671", "createdAt": "2020-03-05T14:21:17Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/SecurityServerTlsCertificate/GenerateInternalCsr.vue", "diffHunk": "@@ -0,0 +1,124 @@\n+<template>\n+  <v-container class=\"xrd-view-common justify-center wrapper\">\n+    <SubViewTitle :title=\"$t('ssTlsCertificate.generateInternalCsr.title')\" :show-close=false></SubViewTitle>\n+    <v-row class=\"first-action\">\n+      <v-col>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.description')}}\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"3\" class=\"mt-6\">\n+        <HelpIcon :text=\"$t('ssTlsCertificate.generateInternalCsr.step1.tooltip')\"/>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.label')}}\n+      </v-col>\n+      <v-col cols=\"8\">\n+        <v-text-field v-model=\"distinguishedName\" data-text=\"generate-internal-csr-distinguished-name-field\"\n+                      :placeholder=\"$t('ssTlsCertificate.generateInternalCsr.step1.placeholder')\"/>\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"8\" class=\"mt-2\">\n+        {{$t('ssTlsCertificate.generateInternalCsr.step2.description')}}\n+      </v-col>\n+      <v-col cols=\"4\" class=\"text-right\">\n+        <large-button outlined data-text=\"generate-internal-csr-generate-csr-button\"\n+                      :disabled=\"distinguishedName.length === 0 || csrGenerated\" :loading=\"generatingCsr\"\n+                      @click=\"generateCsr\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.step2.generateCSR')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+    <v-row class=\"bottom-buttons-wrapper\">\n+      <v-col cols=\"6\" class=\"text-left\">\n+        <large-button @click=\"back\" :disabled=\"csrGenerated || generatingCsr\" outlined\n+                      data-test=\"generate-internal-csr-cancel-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.cancel')}}\n+        </large-button>\n+      </v-col>\n+      <v-col cols=\"6\" class=\"text-right\">\n+        <large-button @click=\"back\" :disabled=\"!csrGenerated\" data-test=\"generate-internal-csr-done-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.done')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+  </v-container>\n+</template>\n+\n+<script lang=\"ts\">\n+  import Vue from 'vue';\n+  import * as api from '@/util/api';\n+  import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+  import SubViewFooter from '@/components/ui/SubViewFooter.vue';\n+  import LargeButton from '@/components/ui/LargeButton.vue';\n+  import HelpIcon from '@/components/ui/HelpIcon.vue';\n+\n+  export default Vue.extend({\n+    components: {\n+      SubViewTitle,\n+      LargeButton,\n+      SubViewFooter,\n+      HelpIcon,\n+    },\n+    data() {\n+      return {\n+        distinguishedName: '',\n+        csrGenerated: false,\n+        generatingCsr: false,\n+      };\n+    },\n+    methods: {\n+      back(): void {\n+        this.$router.go(-1);\n+      },\n+      generateCsr(): void {\n+        this.generatingCsr = true;\n+        api\n+          .post('/system/certificate/csr', { name: this.distinguishedName }, { responseType: 'blob' })\n+          .then((res) => {\n+            const tempLink = document.createElement('a');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1408ecbd02046bb17806659cad6e454331a3162c", "author": {"user": {"login": "raits", "name": "Raido Kaju"}}, "url": "https://github.com/nordic-institute/X-Road/commit/1408ecbd02046bb17806659cad6e454331a3162c", "committedDate": "2020-03-06T07:35:01Z", "message": "XRDDEV-835: changed to use the preexisting helper function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNTcyMTQ3", "url": "https://github.com/nordic-institute/X-Road/pull/401#pullrequestreview-372572147", "createdAt": "2020-03-11T08:59:48Z", "commit": {"oid": "1408ecbd02046bb17806659cad6e454331a3162c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4354, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}