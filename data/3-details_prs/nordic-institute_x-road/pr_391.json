{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMzMyMjE2", "number": 391, "title": "Xrddev 875 localgroups members e2etests", "bodyText": "Added local group member e2e tests", "createdAt": "2020-02-26T15:00:41Z", "url": "https://github.com/nordic-institute/X-Road/pull/391", "merged": true, "mergeCommit": {"oid": "52b18c668ee3bf23d69463cb01ea7e68dde221df"}, "closed": true, "closedAt": "2020-03-24T08:15:03Z", "author": {"login": "olliru"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbxOFB7gH2gAyMzgwMzMyMjE2OmY0OTRhZWFmYTIzOTdiNmI3Njc4N2JiNTU2MDNmODhmOWVjZGNlMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQfCZqgH2gAyMzgwMzMyMjE2OjMyODcyZTk1ZDQ2ODE3ZmIzODg0ZTZiYmU0MWYxODBiN2I4ODUwNTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f494aeafa2397b6b76787bb55603f88f9ecdce11", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/f494aeafa2397b6b76787bb55603f88f9ecdce11", "committedDate": "2019-12-17T11:01:23Z", "message": "XRDDEV-459 clientslist e2e tests\n\nAdd e2e test for security server clients list."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23cea51577a7f27d59d26cb73347787d00a3e54c", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/23cea51577a7f27d59d26cb73347787d00a3e54c", "committedDate": "2019-12-27T14:15:55Z", "message": "XRDDEV-459 clientslist e2e tests\n\nChange to chrome style sorting, add more test data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce273ff209c1b6e793b9490722cfb8e7b814ab7f", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/ce273ff209c1b6e793b9490722cfb8e7b814ab7f", "committedDate": "2019-12-27T15:11:29Z", "message": "XRDDEV-459 clientslist e2e tests\n\nChange test data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cae260d780b63a1a40190f02cf82605467a2f376", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/cae260d780b63a1a40190f02cf82605467a2f376", "committedDate": "2020-01-09T05:31:24Z", "message": "XRDDEV-460 client details e2e tests\n\nAdd test for client details and update page object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "876415efe6bbd4db1aa19737ed56f1ecde3dda0d", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/876415efe6bbd4db1aa19737ed56f1ecde3dda0d", "committedDate": "2020-01-10T17:39:40Z", "message": "XRDDEV-327 logout e2e tests\n\nAdd test for logout and timed logout, update page object and global settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b6bf459bfae7a8d9875ca377c8a6bf41857185a", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/1b6bf459bfae7a8d9875ca377c8a6bf41857185a", "committedDate": "2020-01-28T17:19:04Z", "message": "XRDDEV-841 client local groups filtering e2e tests\n\nAdd e2e test for filtering client local groups\nChange default selector to xpath\nMove clearValue2 to common library"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b946bcec8b809744e86286a3c595ebdcc57a086", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/9b946bcec8b809744e86286a3c595ebdcc57a086", "committedDate": "2020-01-29T12:00:14Z", "message": "XRDDEV-841 client local groups filtering e2e tests\n\nFixed json error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17bb3ead55222c674cde508dd95bd32e982ee63f", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/17bb3ead55222c674cde508dd95bd32e982ee63f", "committedDate": "2020-02-03T14:40:20Z", "message": "XRDDEV-842 client local groups add new group e2e tests\n\nAdd new e2e tests for add  local group dialog\nChange to use data-test attributes\nFix to client details certificate UI change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30f1249ade9d99fddf7883493d75d39781c82e02", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/30f1249ade9d99fddf7883493d75d39781c82e02", "committedDate": "2020-02-20T07:19:08Z", "message": "XRDDEV-842 local group add new group e2e tests\n\nFix chromedriver version and settings."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "560a1d56af7be43bf2c3c8650fb96229414e5c61", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/560a1d56af7be43bf2c3c8650fb96229414e5c61", "committedDate": "2020-02-20T07:45:49Z", "message": "XRDDEV-842 local group add new group e2e tests\n\nFix logout test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70a1fc117562a732ae70f87f29ddfa8a6dee1799", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/70a1fc117562a732ae70f87f29ddfa8a6dee1799", "committedDate": "2020-02-26T13:46:26Z", "message": "XRDDEV-875 clients localgroup members e2e tests\n\nAdd localgroup member e2e tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23", "committedDate": "2020-02-26T14:04:00Z", "message": "Merge branch 'XRDDEV-842-localgroups-add-e2etests' into XRDDEV-875-localgroups-members-e2etests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3ODAwNTAx", "url": "https://github.com/nordic-institute/X-Road/pull/391#pullrequestreview-367800501", "createdAt": "2020-03-03T09:02:05Z", "commit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwOTowMjowNVrOFw9Leg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwOToxMzoyMFrOFw9jHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg3ODMzMA==", "bodyText": "This kind of bootstrapping repeats a lot, could this be implemented as e.g. a helper method?", "url": "https://github.com/nordic-institute/X-Road/pull/391#discussion_r386878330", "createdAt": "2020-03-03T09:02:05Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/tests/e2e/specs/ss-clients-localgroups.js", "diffHunk": "@@ -0,0 +1,362 @@\n+\n+module.exports = {\n+  tags: ['ss', 'clients', 'localgroups'],\n+  'Security server client local groups filtering': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    // Verify default sorting\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('bb');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"cbb\")]')\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('Desc');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"bac\")]');\n+\n+    browser.end();\n+  },\n+  'Security server client add local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+\n+    // Cancel add local group dialog, verify that nothing happens\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterCode('abc');\n+    browser.assert.valueContains('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"abc\");\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[8]');;\n+\n+    // Verify that local group dialog fields are empty after re-opening\n+    clientLocalGroups.openAddDialog();\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"\");\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Description\")]]//input', \"\");\n+\n+    // Verify that add is disabled if only Code is entered\n+    clientLocalGroups.enterCode('abc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    // Verify that add is disabled if only description is entered\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterDescription('addDesc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+\n+    // Verify that trying to add a group with existing code results in an error message\n+    clientLocalGroups.enterCode('abb');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"409\")]]');\n+ \n+    // Add a new group and verify\n+    clientLocalGroups.enterCode('abc');\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"Local group added\")]]');\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"abc\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[8]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[9]');;\n+\n+    browser.end();\n+\n+  },\n+  'Security server add local group member': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openAbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Add new member to local group\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.cancelAddMembersDialog();\n+\n+    //localGroupPopup.addSelectedMembers();\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.addSelectedMembers();\n+\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    browser.end();\n+\n+  },\n+  'Security server delete local group members': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "originalPosition": 214}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg4MDkzMA==", "bodyText": "Would maybe be beneficial to test corner case: 255 characters long description can be saved. Even though acceptance criteria does not require it.", "url": "https://github.com/nordic-institute/X-Road/pull/391#discussion_r386880930", "createdAt": "2020-03-03T09:06:56Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/tests/e2e/specs/ss-clients-localgroups.js", "diffHunk": "@@ -0,0 +1,362 @@\n+\n+module.exports = {\n+  tags: ['ss', 'clients', 'localgroups'],\n+  'Security server client local groups filtering': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    // Verify default sorting\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('bb');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"cbb\")]')\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('Desc');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"bac\")]');\n+\n+    browser.end();\n+  },\n+  'Security server client add local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+\n+    // Cancel add local group dialog, verify that nothing happens\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterCode('abc');\n+    browser.assert.valueContains('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"abc\");\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[8]');;\n+\n+    // Verify that local group dialog fields are empty after re-opening\n+    clientLocalGroups.openAddDialog();\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"\");\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Description\")]]//input', \"\");\n+\n+    // Verify that add is disabled if only Code is entered\n+    clientLocalGroups.enterCode('abc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    // Verify that add is disabled if only description is entered\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterDescription('addDesc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+\n+    // Verify that trying to add a group with existing code results in an error message\n+    clientLocalGroups.enterCode('abb');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"409\")]]');\n+ \n+    // Add a new group and verify\n+    clientLocalGroups.enterCode('abc');\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"Local group added\")]]');\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"abc\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[8]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[9]');;\n+\n+    browser.end();\n+\n+  },\n+  'Security server add local group member': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openAbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Add new member to local group\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.cancelAddMembersDialog();\n+\n+    //localGroupPopup.addSelectedMembers();\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.addSelectedMembers();\n+\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    browser.end();\n+\n+  },\n+  'Security server delete local group members': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+\n+    // Remove single \n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]');\n+\n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]');\n+    localGroupPopup.close();\n+\n+    // Remove All\n+\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    browser.end();\n+\n+  },\n+  'Security server edit local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Change description\n+    localGroupPopup.changeDescription('');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');\n+    mainPage.closeSnackbar();\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription(browser.globals.test_string_300.slice(0,256));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "originalPosition": 299}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg4MTUwMA==", "bodyText": "Maybe even this part, also?", "url": "https://github.com/nordic-institute/X-Road/pull/391#discussion_r386881500", "createdAt": "2020-03-03T09:08:06Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/tests/e2e/specs/ss-clients-localgroups.js", "diffHunk": "@@ -0,0 +1,362 @@\n+\n+module.exports = {\n+  tags: ['ss', 'clients', 'localgroups'],\n+  'Security server client local groups filtering': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    // Verify default sorting\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('bb');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"cbb\")]')\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('Desc');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"bac\")]');\n+\n+    browser.end();\n+  },\n+  'Security server client add local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+\n+    // Cancel add local group dialog, verify that nothing happens\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterCode('abc');\n+    browser.assert.valueContains('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"abc\");\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[8]');;\n+\n+    // Verify that local group dialog fields are empty after re-opening\n+    clientLocalGroups.openAddDialog();\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"\");\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Description\")]]//input', \"\");\n+\n+    // Verify that add is disabled if only Code is entered\n+    clientLocalGroups.enterCode('abc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    // Verify that add is disabled if only description is entered\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterDescription('addDesc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+\n+    // Verify that trying to add a group with existing code results in an error message\n+    clientLocalGroups.enterCode('abb');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"409\")]]');\n+ \n+    // Add a new group and verify\n+    clientLocalGroups.enterCode('abc');\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"Local group added\")]]');\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"abc\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[8]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[9]');;\n+\n+    browser.end();\n+\n+  },\n+  'Security server add local group member': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openAbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Add new member to local group\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.cancelAddMembersDialog();\n+\n+    //localGroupPopup.addSelectedMembers();\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.addSelectedMembers();\n+\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    browser.end();\n+\n+  },\n+  'Security server delete local group members': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "originalPosition": 223}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg4MzE4MQ==", "bodyText": "This cancels local group removal, not local group member removal, right? Should the name be different?", "url": "https://github.com/nordic-institute/X-Road/pull/391#discussion_r386883181", "createdAt": "2020-03-03T09:11:13Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/tests/e2e/specs/ss-clients-localgroups.js", "diffHunk": "@@ -0,0 +1,362 @@\n+\n+module.exports = {\n+  tags: ['ss', 'clients', 'localgroups'],\n+  'Security server client local groups filtering': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    // Verify default sorting\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('bb');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"cbb\")]')\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('Desc');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"bac\")]');\n+\n+    browser.end();\n+  },\n+  'Security server client add local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+\n+    // Cancel add local group dialog, verify that nothing happens\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterCode('abc');\n+    browser.assert.valueContains('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"abc\");\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[8]');;\n+\n+    // Verify that local group dialog fields are empty after re-opening\n+    clientLocalGroups.openAddDialog();\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"\");\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Description\")]]//input', \"\");\n+\n+    // Verify that add is disabled if only Code is entered\n+    clientLocalGroups.enterCode('abc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    // Verify that add is disabled if only description is entered\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterDescription('addDesc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+\n+    // Verify that trying to add a group with existing code results in an error message\n+    clientLocalGroups.enterCode('abb');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"409\")]]');\n+ \n+    // Add a new group and verify\n+    clientLocalGroups.enterCode('abc');\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"Local group added\")]]');\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"abc\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[8]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[9]');;\n+\n+    browser.end();\n+\n+  },\n+  'Security server add local group member': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openAbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Add new member to local group\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.cancelAddMembersDialog();\n+\n+    //localGroupPopup.addSelectedMembers();\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.addSelectedMembers();\n+\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    browser.end();\n+\n+  },\n+  'Security server delete local group members': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+\n+    // Remove single \n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]');\n+\n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]');\n+    localGroupPopup.close();\n+\n+    // Remove All\n+\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    browser.end();\n+\n+  },\n+  'Security server edit local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Change description\n+    localGroupPopup.changeDescription('');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');\n+    mainPage.closeSnackbar();\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription(browser.globals.test_string_300.slice(0,256));\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');;\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription('GroupChanged');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Description saved');\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"GroupChanged\")]]')\n+    browser.end();\n+\n+  },\n+  'Security server delete local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Delete and cancel\n+    localGroupPopup.deleteThisGroup();\n+    browser.waitForElementVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');\n+    localGroupPopup.cancelMemberRemove();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "originalPosition": 346}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg4MzYwNw==", "bodyText": "This confirms local group removal, not local group member removal, right? Should the name be different?", "url": "https://github.com/nordic-institute/X-Road/pull/391#discussion_r386883607", "createdAt": "2020-03-03T09:11:56Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/tests/e2e/specs/ss-clients-localgroups.js", "diffHunk": "@@ -0,0 +1,362 @@\n+\n+module.exports = {\n+  tags: ['ss', 'clients', 'localgroups'],\n+  'Security server client local groups filtering': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    // Verify default sorting\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('bb');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"cbb\")]')\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('Desc');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"bac\")]');\n+\n+    browser.end();\n+  },\n+  'Security server client add local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+\n+    // Cancel add local group dialog, verify that nothing happens\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterCode('abc');\n+    browser.assert.valueContains('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"abc\");\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[8]');;\n+\n+    // Verify that local group dialog fields are empty after re-opening\n+    clientLocalGroups.openAddDialog();\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"\");\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Description\")]]//input', \"\");\n+\n+    // Verify that add is disabled if only Code is entered\n+    clientLocalGroups.enterCode('abc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    // Verify that add is disabled if only description is entered\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterDescription('addDesc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+\n+    // Verify that trying to add a group with existing code results in an error message\n+    clientLocalGroups.enterCode('abb');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"409\")]]');\n+ \n+    // Add a new group and verify\n+    clientLocalGroups.enterCode('abc');\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"Local group added\")]]');\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"abc\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[8]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[9]');;\n+\n+    browser.end();\n+\n+  },\n+  'Security server add local group member': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openAbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Add new member to local group\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.cancelAddMembersDialog();\n+\n+    //localGroupPopup.addSelectedMembers();\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.addSelectedMembers();\n+\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    browser.end();\n+\n+  },\n+  'Security server delete local group members': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+\n+    // Remove single \n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]');\n+\n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]');\n+    localGroupPopup.close();\n+\n+    // Remove All\n+\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    browser.end();\n+\n+  },\n+  'Security server edit local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Change description\n+    localGroupPopup.changeDescription('');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');\n+    mainPage.closeSnackbar();\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription(browser.globals.test_string_300.slice(0,256));\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');;\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription('GroupChanged');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Description saved');\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"GroupChanged\")]]')\n+    browser.end();\n+\n+  },\n+  'Security server delete local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Delete and cancel\n+    localGroupPopup.deleteThisGroup();\n+    browser.waitForElementVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');   \n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")]]')\n+\n+    // Delete and confirm\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    localGroupPopup.deleteThisGroup();\n+    browser.waitForElementVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');\n+    localGroupPopup.confirmMemberRemove();  ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "originalPosition": 357}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg4NDM4MQ==", "bodyText": "Should this test that the removed local group was successfully removed, ie. does not exist in the list anymore?", "url": "https://github.com/nordic-institute/X-Road/pull/391#discussion_r386884381", "createdAt": "2020-03-03T09:13:20Z", "author": {"login": "jansu76"}, "path": "src/proxy-ui-api/frontend/tests/e2e/specs/ss-clients-localgroups.js", "diffHunk": "@@ -0,0 +1,362 @@\n+\n+module.exports = {\n+  tags: ['ss', 'clients', 'localgroups'],\n+  'Security server client local groups filtering': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    // Verify default sorting\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('bb');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"cbb\")]')\n+\n+    // Change filtering and verify\n+    clientLocalGroups.filterBy('Desc');\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"bac\")]');\n+\n+    browser.end();\n+  },\n+  'Security server client add local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+\n+    // Cancel add local group dialog, verify that nothing happens\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]');\n+\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterCode('abc');\n+    browser.assert.valueContains('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"abc\");\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[8]');;\n+\n+    // Verify that local group dialog fields are empty after re-opening\n+    clientLocalGroups.openAddDialog();\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Code\")]]//input', \"\");\n+    browser.assert.value('//div[contains(@class, \"dlg-edit-row\") and .//*[contains(text(), \"Description\")]]//input', \"\");\n+\n+    // Verify that add is disabled if only Code is entered\n+    clientLocalGroups.enterCode('abc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+    clientLocalGroups.cancelAddDialog();\n+\n+    // Verify that add is disabled if only description is entered\n+    clientLocalGroups.openAddDialog();\n+    clientLocalGroups.enterDescription('addDesc');\n+    browser.waitForElementVisible('//button[contains(@data-test, \"dialog-save-button\") and @disabled=\"disabled\"]');\n+\n+    // Verify that trying to add a group with existing code results in an error message\n+    clientLocalGroups.enterCode('abb');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"409\")]]');\n+ \n+    // Add a new group and verify\n+    clientLocalGroups.enterCode('abc');\n+    clientLocalGroups.enterDescription('addDesc');\n+    clientLocalGroups.confirmAddDialog();\n+    browser.waitForElementVisible('//*[contains(@class, \"v-snack\") and .//*[contains(text(), \"Local group added\")]]');\n+\n+    browser\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[2]//span[contains(text(),\"1122\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[3]//span[contains(text(),\"1212\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[4]//span[contains(text(),\"2233\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[5]//span[contains(text(),\"abb\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[6]//span[contains(text(),\"abc\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[7]//span[contains(text(),\"bac\")]')\n+      .waitForElementVisible('(//table[contains(@class, \"details-certificates\")]/tr)[8]//span[contains(text(),\"cbb\")]')\n+      .waitForElementNotPresent('(//table[contains(@class, \"details-certificates\")]/tr)[9]');;\n+\n+    browser.end();\n+\n+  },\n+  'Security server add local group member': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openAbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Add new member to local group\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.cancelAddMembersDialog();\n+\n+    //localGroupPopup.addSelectedMembers();\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    localGroupPopup.openAddMembers();\n+    localGroupPopup.searchMembers();\n+    localGroupPopup.selectNewTestComMember();\n+    localGroupPopup.addSelectedMembers();\n+\n+    browser.waitForElementNotVisible('//span[contains(@class, \"headline\") and contains(text(), \"Add Members\")]');\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]')\n+\n+    browser.end();\n+\n+  },\n+  'Security server delete local group members': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+\n+    // Remove single \n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestCom\")]');\n+\n+    localGroupPopup.clickRemoveTestComMember();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove member?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestCom\")]');\n+    localGroupPopup.close();\n+\n+    // Remove All\n+\n+    clientLocalGroups.openBacDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+\n+    localGroupPopup.clickRemoveAll();\n+    localGroupPopup.confirmMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Remove all members?\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestGov\")]');\n+    browser.assert.not.elementPresent('//*[contains(text(),\"TestOrg\")]');\n+\n+    browser.end();\n+\n+  },\n+  'Security server edit local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Change description\n+    localGroupPopup.changeDescription('');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');\n+    mainPage.closeSnackbar();\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription(browser.globals.test_string_300.slice(0,256));\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Request failed with status code 500');;\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"Group4\")]]')\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+    localGroupPopup.changeDescription('GroupChanged');\n+    localGroupPopup.clickHeader();\n+    browser.assert.containsText('//div[contains(@class, \"v-snack__content\")]', 'Description saved');\n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")] and .//*[contains(text(), \"GroupChanged\")]]')\n+    browser.end();\n+\n+  },\n+  'Security server delete local group': browser => {\n+    const frontPage = browser.page.ssFrontPage();\n+    const mainPage = browser.page.ssMainPage();\n+    const clientsTab = mainPage.section.clientsTab;\n+    const clientInfo = mainPage.section.clientInfo;\n+    const clientLocalGroups = clientInfo.section.localGroups;\n+    const localGroupPopup = mainPage.section.localGroupPopup;\n+    // Open SUT and check that page is loaded\n+    frontPage.navigate();\n+    browser.waitForElementVisible('//*[@id=\"app\"]');\n+\n+    // Enter valid credentials\n+    frontPage\n+      .clearUsername()\n+      .clearPassword()\n+      .enterUsername(browser.globals.login_usr)\n+      .enterPassword(browser.globals.login_pwd)\n+      .signin();\n+\n+    // Open TestGov Internal Servers and local group details view\n+    mainPage.openClientsTab();\n+    browser.waitForElementVisible(clientsTab);\n+    clientsTab.openTestService();\n+    browser.waitForElementVisible(clientInfo);\n+    clientInfo.openLocalGroupsTab();\n+    browser.waitForElementVisible(clientLocalGroups);\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    // Delete and cancel\n+    localGroupPopup.deleteThisGroup();\n+    browser.waitForElementVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');\n+    localGroupPopup.cancelMemberRemove();\n+    browser.waitForElementNotVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');   \n+    localGroupPopup.close();\n+    browser.waitForElementVisible('//table[contains(@class, \"details-certificates\")]//tr[.//*[contains(text(),\"cbb\")]]')\n+\n+    // Delete and confirm\n+    clientLocalGroups.openCbbDetails();\n+    browser.waitForElementVisible(localGroupPopup);\n+\n+    localGroupPopup.deleteThisGroup();\n+    browser.waitForElementVisible('//*[contains(@data-test, \"dialog-title\") and contains(text(), \"Delete group?\")]');\n+    localGroupPopup.confirmMemberRemove();  \n+    browser.waitForElementVisible(clientLocalGroups); ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f91f05d192eac0588d6b5b8ad8bb29dc48ae6b23"}, "originalPosition": 358}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e17a2c58d985e3d3cdc16bbc5ad51f90ef8da184", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/e17a2c58d985e3d3cdc16bbc5ad51f90ef8da184", "committedDate": "2020-03-17T07:52:22Z", "message": "XRDDEV-875 localgroup members e2etests\n\nImplement review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "299353798960056e204fa52ba3be8f6c5f8c3a26", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/299353798960056e204fa52ba3be8f6c5f8c3a26", "committedDate": "2020-03-17T19:14:59Z", "message": "Merge branch 'develop' into XRDDEV-875-localgroups-members-e2etests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efad5abe15980c8a49cf2a1522ad10ec55c091de", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/efad5abe15980c8a49cf2a1522ad10ec55c091de", "committedDate": "2020-03-18T16:14:54Z", "message": "Merge branch 'develop' into XRDDEV-875-localgroups-members-e2etests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5Mzk2NTE3", "url": "https://github.com/nordic-institute/X-Road/pull/391#pullrequestreview-379396517", "createdAt": "2020-03-23T12:49:51Z", "commit": {"oid": "efad5abe15980c8a49cf2a1522ad10ec55c091de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32872e95d46817fb3884e6bbe41f180b7b885053", "author": {"user": {"login": "olliru", "name": "Olli Ruotsalainen"}}, "url": "https://github.com/nordic-institute/X-Road/commit/32872e95d46817fb3884e6bbe41f180b7b885053", "committedDate": "2020-03-23T14:18:33Z", "message": "Merge branch 'develop' into XRDDEV-875-localgroups-members-e2etests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4343, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}