{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5Njc0MjU1", "number": 568, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjo1NzowN1rOEIomDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNzoxMDozMlrOEIoz0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NDg5MTY0OnYy", "diffSide": "RIGHT", "path": "doc/EnvironmentalMonitoring/Monitoring-architecture.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNjo1NzowN1rOGotssQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNzowMToyOFrOGotzww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0NDk0NQ==", "bodyText": "PROXY_PARAMS should be MONITOR_PARAMS", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445344945", "createdAt": "2020-06-25T06:57:07Z", "author": {"login": "jhyoty"}, "path": "doc/EnvironmentalMonitoring/Monitoring-architecture.md", "diffHunk": "@@ -126,10 +128,24 @@ The following sensors produce monitoring data:\n \n Monitoring service is installed as a separate package, with name `xroad-monitor`. It runs in a separate process.\n \n-The service also publishes the monitoring data via JMX. Local monitoring agents can use this as an alternative way to fetch monitoring data. With default configuration, JMX access is only allowed from localhost.\n+#### 2.2.1 JMX interface\n+\n+The service also publishes the monitoring data via JMX. Local monitoring agents can use this as an alternative way to fetch monitoring data. With the default configuration, JMX is disabled.\n \n ![monitoring JMX agent](img/monitoring-jmx.png)\n \n+JMX is enabled by adding the required configuration in `/etc/xroad/services/local.conf` file. The file is opened for editing and changes are made on the `PROXY_PARAMS` variable value. After the `PROXY_PARAMS` variable value has been updated, the `xroad-monitor` service must be restarted.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b813fd96514d5618908327c5b200fb9cedc5f1c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0Njc1NQ==", "bodyText": "Copy/paste error...fixed.", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445346755", "createdAt": "2020-06-25T07:01:28Z", "author": {"login": "petkivim"}, "path": "doc/EnvironmentalMonitoring/Monitoring-architecture.md", "diffHunk": "@@ -126,10 +128,24 @@ The following sensors produce monitoring data:\n \n Monitoring service is installed as a separate package, with name `xroad-monitor`. It runs in a separate process.\n \n-The service also publishes the monitoring data via JMX. Local monitoring agents can use this as an alternative way to fetch monitoring data. With default configuration, JMX access is only allowed from localhost.\n+#### 2.2.1 JMX interface\n+\n+The service also publishes the monitoring data via JMX. Local monitoring agents can use this as an alternative way to fetch monitoring data. With the default configuration, JMX is disabled.\n \n ![monitoring JMX agent](img/monitoring-jmx.png)\n \n+JMX is enabled by adding the required configuration in `/etc/xroad/services/local.conf` file. The file is opened for editing and changes are made on the `PROXY_PARAMS` variable value. After the `PROXY_PARAMS` variable value has been updated, the `xroad-monitor` service must be restarted.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0NDk0NQ=="}, "originalCommit": {"oid": "5b813fd96514d5618908327c5b200fb9cedc5f1c"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NDkyNjkxOnYy", "diffSide": "RIGHT", "path": "doc/OperationalMonitoring/Testing/test-opmon_x-road_operational_monitoring_testing_plan_Y-1104-2.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNzoxMDozMlrOGouCpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNzo0MTozM1rOGovA-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM1MDU2Nw==", "bodyText": "Should be:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            OPMON_PARAMS=\"OPMON_PARAMS \\\n          \n          \n            \n            OPMON_PARAMS=\"$OPMON_PARAMS \\", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445350567", "createdAt": "2020-06-25T07:10:32Z", "author": {"login": "jhyoty"}, "path": "doc/OperationalMonitoring/Testing/test-opmon_x-road_operational_monitoring_testing_plan_Y-1104-2.md", "diffHunk": "@@ -166,11 +167,10 @@ Direct observation of JMX metrics in `jconsole` is described in the following se\n \n ### 6.1 Testing the JMXMP Interface Using jconsole\n \n-By default, the JMX interface of the operational monitoring daemon has been configured to listen on localhost, with authentication disabled and TLS enabled. In order to conveniently access this interface from a remote host, either directly or through an SSH tunnel, the following configuration must be used in `/etc/xroad/services/local.conf`, effectively overriding the value of the variable OPMON_PARAMS:\n+By default, the JMX interface of the operational monitoring daemon is disabled. In order to conveniently access this interface from a remote host, either directly or through an SSH tunnel, the following configuration must be used in `/etc/xroad/services/local.conf`, effectively making changes on the `OPMON_PARAMS` parameter value:\n \n ```bash\n-OPMON_PARAMS=\" -javaagent:$METRICS_BUGFIX_AGENT -Xms50m -Xmx256m -XX:MaxMetaspaceSize=70m \\\n--Dlogback.configurationFile=/etc/xroad/conf.d/op-monitor-logback.xml \\\n+OPMON_PARAMS=\"OPMON_PARAMS \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dc529081b6b03772304c8bb5f390e4e1cb010f7"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM2NjUyMw==", "bodyText": "Fixed.", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445366523", "createdAt": "2020-06-25T07:41:33Z", "author": {"login": "petkivim"}, "path": "doc/OperationalMonitoring/Testing/test-opmon_x-road_operational_monitoring_testing_plan_Y-1104-2.md", "diffHunk": "@@ -166,11 +167,10 @@ Direct observation of JMX metrics in `jconsole` is described in the following se\n \n ### 6.1 Testing the JMXMP Interface Using jconsole\n \n-By default, the JMX interface of the operational monitoring daemon has been configured to listen on localhost, with authentication disabled and TLS enabled. In order to conveniently access this interface from a remote host, either directly or through an SSH tunnel, the following configuration must be used in `/etc/xroad/services/local.conf`, effectively overriding the value of the variable OPMON_PARAMS:\n+By default, the JMX interface of the operational monitoring daemon is disabled. In order to conveniently access this interface from a remote host, either directly or through an SSH tunnel, the following configuration must be used in `/etc/xroad/services/local.conf`, effectively making changes on the `OPMON_PARAMS` parameter value:\n \n ```bash\n-OPMON_PARAMS=\" -javaagent:$METRICS_BUGFIX_AGENT -Xms50m -Xmx256m -XX:MaxMetaspaceSize=70m \\\n--Dlogback.configurationFile=/etc/xroad/conf.d/op-monitor-logback.xml \\\n+OPMON_PARAMS=\"OPMON_PARAMS \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM1MDU2Nw=="}, "originalCommit": {"oid": "5dc529081b6b03772304c8bb5f390e4e1cb010f7"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2735, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}