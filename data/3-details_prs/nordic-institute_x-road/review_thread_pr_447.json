{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NTg0NzA1", "number": 447, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzo0MDoyOVrODuYb-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzo0MDoyOVrODuYb-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTYxNDY1OnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/ApiKey/CreateApiKeyStepper.vue", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzo0MDoyOVrOGAV7nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzo1ODowNlrOGAWqzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAxMjUwOA==", "bodyText": "Empty class", "url": "https://github.com/nordic-institute/X-Road/pull/447#discussion_r403012508", "createdAt": "2020-04-03T13:40:29Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/ApiKey/CreateApiKeyStepper.vue", "diffHunk": "@@ -0,0 +1,210 @@\n+<template>\n+  <v-container class=\"xrd-view-common justify-center wrapper\">\n+    <sub-view-title\n+      :title=\"$t('apiKey.createApiKey.title')\"\n+      :show-close=\"true\"\n+      @close=\"close\"\n+    ></sub-view-title>\n+    <v-stepper :alt-labels=\"true\" v-model=\"step\" class=\"stepper mt-2\">\n+      <v-stepper-header class=\"stepper-header\">\n+        <v-stepper-step :complete=\"step > 1\" step=\"1\">{{\n+          $t('apiKey.createApiKey.step.roles.name')\n+        }}</v-stepper-step>\n+        <v-divider />\n+        <v-stepper-step :complete=\"keyGenerated\" step=\"2\">{{\n+          $t('apiKey.createApiKey.step.keyDetails.name')\n+        }}</v-stepper-step>\n+      </v-stepper-header>\n+      <v-stepper-items class=\"stepper-items-wrapper\">\n+        <v-stepper-content step=\"1\" class=\"pa-0\">\n+          <v-row class=\"mb-5\">\n+            <v-col>\n+              <h3>{{ $t('apiKey.createApiKey.step.roles.description') }}</h3>\n+            </v-col>\n+          </v-row>\n+          <v-row no-gutters v-for=\"role in roles\" :key=\"role\">\n+            <v-col class=\"checkbox-wrapper\">\n+              <v-checkbox\n+                v-model=\"selectedRoles\"\n+                height=\"10px\"\n+                :value=\"role\"\n+                :label=\"$t(`apiKey.role.${role}`)\"\n+              />\n+            </v-col>\n+          </v-row>\n+          <v-row class=\"stepper-item-footer mt-12\" no-gutters>\n+            <v-col>\n+              <large-button outlined @click=\"close\">\n+                {{ $t('action.cancel') }}\n+              </large-button>\n+            </v-col>\n+            <v-col class=\"text-right\">\n+              <large-button :disabled=\"nextButtonDisabled\" @click=\"step++\">\n+                {{ $t('action.next') }}\n+              </large-button>\n+            </v-col>\n+          </v-row>\n+        </v-stepper-content>\n+        <v-stepper-content step=\"2\">\n+          <v-row>\n+            <v-col class=\"text-right\">\n+              <large-button\n+                :disabled=\"keyGenerated\"\n+                :loading=\"generatingKey\"\n+                @click=\"generateKey\"\n+              >\n+                {{ $t('apiKey.createApiKey.step.keyDetails.createKeyButton') }}\n+              </large-button>\n+            </v-col>\n+          </v-row>\n+          <v-row>\n+            <v-col cols=\"6\" sm=\"3\" class=\"api-key-label\">\n+              {{ $t('apiKey.createApiKey.step.keyDetails.apiKey') }}\n+            </v-col>\n+            <v-col cols=\"6\" sm=\"9\">\n+              {{ apiKey.key }}\n+            </v-col>\n+          </v-row>\n+          <v-row>\n+            <v-col cols=\"6\" sm=\"3\" class=\"api-key-label\">\n+              {{ $t('apiKey.createApiKey.step.keyDetails.apiKeyID') }}\n+            </v-col>\n+            <v-col cols=\"6\" sm=\"9\">\n+              {{ apiKey.id }}\n+            </v-col>\n+          </v-row>\n+          <v-row>\n+            <v-col cols=\"6\" sm=\"3\" class=\"api-key-label\">\n+              {{ $t('apiKey.createApiKey.step.keyDetails.assignedRoles') }}\n+            </v-col>\n+            <v-col cols=\"6\" sm=\"9\">\n+              {{ translatedRoles | commaSeparate }}\n+            </v-col>\n+          </v-row>\n+          <v-row class=\"mt-12\">\n+            <v-col>\n+              {{ $t('apiKey.createApiKey.step.keyDetails.note') }}\n+            </v-col>\n+          </v-row>\n+          <v-row class=\"stepper-item-footer mt-12\" no-gutters>\n+            <v-col>\n+              <large-button\n+                outlined\n+                @click=\"close\"\n+                :disabled=\"keyGenerated || generatingKey\"\n+              >\n+                {{ $t('action.cancel') }}\n+              </large-button>\n+            </v-col>\n+            <v-col class=\"text-right\">\n+              <large-button\n+                outlined\n+                @click=\"step--\"\n+                class=\"mr-5\"\n+                :disabled=\"keyGenerated || generatingKey\"\n+              >\n+                {{ $t('action.previous') }}\n+              </large-button>\n+              <large-button :disabled=\"!keyGenerated\" @click=\"close\">\n+                {{ $t('action.finish') }}\n+              </large-button>\n+            </v-col>\n+          </v-row>\n+        </v-stepper-content>\n+      </v-stepper-items>\n+    </v-stepper>\n+  </v-container>\n+</template>\n+\n+<script lang=\"ts\">\n+import Vue from 'vue';\n+import LargeButton from '@/components/ui/LargeButton.vue';\n+import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+import { Roles } from '@/global';\n+import { ApiKey } from '@/global-types';\n+import * as api from '@/util/api';\n+\n+export default Vue.extend({\n+  name: 'CreateApiKeyStepper',\n+  components: {\n+    LargeButton,\n+    SubViewTitle,\n+  },\n+  data() {\n+    return {\n+      step: 1,\n+      roles: Roles,\n+      generatingKey: false,\n+      selectedRoles: [] as string[],\n+      apiKey: {} as ApiKey,\n+    };\n+  },\n+  computed: {\n+    nextButtonDisabled(): boolean {\n+      return this.selectedRoles.length === 0;\n+    },\n+    translatedRoles(): string[] {\n+      return !this.apiKey.roles\n+        ? []\n+        : this.apiKey.roles.map(\n+            (role) => this.$t(`apiKey.role.${role}`) as string,\n+          );\n+    },\n+    keyGenerated(): boolean {\n+      return this.apiKey.key !== undefined;\n+    },\n+  },\n+  methods: {\n+    close(): void {\n+      this.$router.back();\n+    },\n+    async generateKey() {\n+      this.generatingKey = true;\n+      api\n+        .post('/api-keys', this.selectedRoles)\n+        .then((resp) => {\n+          this.apiKey = resp.data;\n+          this.$store.dispatch('showSuccess', 'apiKey.createApiKey.success');\n+        })\n+        .catch((error) => this.$store.dispatch('showError', error))\n+        .finally(() => (this.generatingKey = false));\n+    },\n+  },\n+});\n+</script>\n+\n+<style scoped lang=\"scss\">\n+@import '../../../assets/detail-views';\n+@import '../../../assets/colors';\n+.wrapper {\n+  max-width: 850px;\n+  height: 100%;\n+  width: 100%;\n+  color: $XRoad-Grey60;\n+}\n+.stepper {\n+  box-shadow: unset;\n+}\n+.stepper-header {\n+  box-shadow: unset;\n+  width: 50%;\n+  margin: auto;\n+}\n+.stepper-item-footer {\n+  margin-top: 20px;\n+  padding-top: 30px;\n+  border-top: 1px solid $XRoad-Grey40;\n+}\n+.stepper-items-wrapper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4b21d766aa4434652048969addc19476175a632"}, "originalPosition": 198}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAyNDU4OQ==", "bodyText": "Fixed.", "url": "https://github.com/nordic-institute/X-Road/pull/447#discussion_r403024589", "createdAt": "2020-04-03T13:58:06Z", "author": {"login": "raits"}, "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/ApiKey/CreateApiKeyStepper.vue", "diffHunk": "@@ -0,0 +1,210 @@\n+<template>\n+  <v-container class=\"xrd-view-common justify-center wrapper\">\n+    <sub-view-title\n+      :title=\"$t('apiKey.createApiKey.title')\"\n+      :show-close=\"true\"\n+      @close=\"close\"\n+    ></sub-view-title>\n+    <v-stepper :alt-labels=\"true\" v-model=\"step\" class=\"stepper mt-2\">\n+      <v-stepper-header class=\"stepper-header\">\n+        <v-stepper-step :complete=\"step > 1\" step=\"1\">{{\n+          $t('apiKey.createApiKey.step.roles.name')\n+        }}</v-stepper-step>\n+        <v-divider />\n+        <v-stepper-step :complete=\"keyGenerated\" step=\"2\">{{\n+          $t('apiKey.createApiKey.step.keyDetails.name')\n+        }}</v-stepper-step>\n+      </v-stepper-header>\n+      <v-stepper-items class=\"stepper-items-wrapper\">\n+        <v-stepper-content step=\"1\" class=\"pa-0\">\n+          <v-row class=\"mb-5\">\n+            <v-col>\n+              <h3>{{ $t('apiKey.createApiKey.step.roles.description') }}</h3>\n+            </v-col>\n+          </v-row>\n+          <v-row no-gutters v-for=\"role in roles\" :key=\"role\">\n+            <v-col class=\"checkbox-wrapper\">\n+              <v-checkbox\n+                v-model=\"selectedRoles\"\n+                height=\"10px\"\n+                :value=\"role\"\n+                :label=\"$t(`apiKey.role.${role}`)\"\n+              />\n+            </v-col>\n+          </v-row>\n+          <v-row class=\"stepper-item-footer mt-12\" no-gutters>\n+            <v-col>\n+              <large-button outlined @click=\"close\">\n+                {{ $t('action.cancel') }}\n+              </large-button>\n+            </v-col>\n+            <v-col class=\"text-right\">\n+              <large-button :disabled=\"nextButtonDisabled\" @click=\"step++\">\n+                {{ $t('action.next') }}\n+              </large-button>\n+            </v-col>\n+          </v-row>\n+        </v-stepper-content>\n+        <v-stepper-content step=\"2\">\n+          <v-row>\n+            <v-col class=\"text-right\">\n+              <large-button\n+                :disabled=\"keyGenerated\"\n+                :loading=\"generatingKey\"\n+                @click=\"generateKey\"\n+              >\n+                {{ $t('apiKey.createApiKey.step.keyDetails.createKeyButton') }}\n+              </large-button>\n+            </v-col>\n+          </v-row>\n+          <v-row>\n+            <v-col cols=\"6\" sm=\"3\" class=\"api-key-label\">\n+              {{ $t('apiKey.createApiKey.step.keyDetails.apiKey') }}\n+            </v-col>\n+            <v-col cols=\"6\" sm=\"9\">\n+              {{ apiKey.key }}\n+            </v-col>\n+          </v-row>\n+          <v-row>\n+            <v-col cols=\"6\" sm=\"3\" class=\"api-key-label\">\n+              {{ $t('apiKey.createApiKey.step.keyDetails.apiKeyID') }}\n+            </v-col>\n+            <v-col cols=\"6\" sm=\"9\">\n+              {{ apiKey.id }}\n+            </v-col>\n+          </v-row>\n+          <v-row>\n+            <v-col cols=\"6\" sm=\"3\" class=\"api-key-label\">\n+              {{ $t('apiKey.createApiKey.step.keyDetails.assignedRoles') }}\n+            </v-col>\n+            <v-col cols=\"6\" sm=\"9\">\n+              {{ translatedRoles | commaSeparate }}\n+            </v-col>\n+          </v-row>\n+          <v-row class=\"mt-12\">\n+            <v-col>\n+              {{ $t('apiKey.createApiKey.step.keyDetails.note') }}\n+            </v-col>\n+          </v-row>\n+          <v-row class=\"stepper-item-footer mt-12\" no-gutters>\n+            <v-col>\n+              <large-button\n+                outlined\n+                @click=\"close\"\n+                :disabled=\"keyGenerated || generatingKey\"\n+              >\n+                {{ $t('action.cancel') }}\n+              </large-button>\n+            </v-col>\n+            <v-col class=\"text-right\">\n+              <large-button\n+                outlined\n+                @click=\"step--\"\n+                class=\"mr-5\"\n+                :disabled=\"keyGenerated || generatingKey\"\n+              >\n+                {{ $t('action.previous') }}\n+              </large-button>\n+              <large-button :disabled=\"!keyGenerated\" @click=\"close\">\n+                {{ $t('action.finish') }}\n+              </large-button>\n+            </v-col>\n+          </v-row>\n+        </v-stepper-content>\n+      </v-stepper-items>\n+    </v-stepper>\n+  </v-container>\n+</template>\n+\n+<script lang=\"ts\">\n+import Vue from 'vue';\n+import LargeButton from '@/components/ui/LargeButton.vue';\n+import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+import { Roles } from '@/global';\n+import { ApiKey } from '@/global-types';\n+import * as api from '@/util/api';\n+\n+export default Vue.extend({\n+  name: 'CreateApiKeyStepper',\n+  components: {\n+    LargeButton,\n+    SubViewTitle,\n+  },\n+  data() {\n+    return {\n+      step: 1,\n+      roles: Roles,\n+      generatingKey: false,\n+      selectedRoles: [] as string[],\n+      apiKey: {} as ApiKey,\n+    };\n+  },\n+  computed: {\n+    nextButtonDisabled(): boolean {\n+      return this.selectedRoles.length === 0;\n+    },\n+    translatedRoles(): string[] {\n+      return !this.apiKey.roles\n+        ? []\n+        : this.apiKey.roles.map(\n+            (role) => this.$t(`apiKey.role.${role}`) as string,\n+          );\n+    },\n+    keyGenerated(): boolean {\n+      return this.apiKey.key !== undefined;\n+    },\n+  },\n+  methods: {\n+    close(): void {\n+      this.$router.back();\n+    },\n+    async generateKey() {\n+      this.generatingKey = true;\n+      api\n+        .post('/api-keys', this.selectedRoles)\n+        .then((resp) => {\n+          this.apiKey = resp.data;\n+          this.$store.dispatch('showSuccess', 'apiKey.createApiKey.success');\n+        })\n+        .catch((error) => this.$store.dispatch('showError', error))\n+        .finally(() => (this.generatingKey = false));\n+    },\n+  },\n+});\n+</script>\n+\n+<style scoped lang=\"scss\">\n+@import '../../../assets/detail-views';\n+@import '../../../assets/colors';\n+.wrapper {\n+  max-width: 850px;\n+  height: 100%;\n+  width: 100%;\n+  color: $XRoad-Grey60;\n+}\n+.stepper {\n+  box-shadow: unset;\n+}\n+.stepper-header {\n+  box-shadow: unset;\n+  width: 50%;\n+  margin: auto;\n+}\n+.stepper-item-footer {\n+  margin-top: 20px;\n+  padding-top: 30px;\n+  border-top: 1px solid $XRoad-Grey40;\n+}\n+.stepper-items-wrapper {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAxMjUwOA=="}, "originalCommit": {"oid": "f4b21d766aa4434652048969addc19476175a632"}, "originalPosition": 198}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2800, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}