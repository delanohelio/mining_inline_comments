{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MDc5MDEz", "number": 492, "title": "XRDDEV-959: Add subjects wizard", "bodyText": "DON'T MERGE BEFORE XRDDEV-962 & XRDDEV-957", "createdAt": "2020-05-08T06:53:43Z", "url": "https://github.com/nordic-institute/X-Road/pull/492", "merged": true, "mergeCommit": {"oid": "551f1fc1efab4bead473bd14a1283738893d84c7"}, "closed": true, "closedAt": "2020-05-14T10:26:33Z", "author": {"login": "TJaakkola"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfMOMfAH2gAyNDE1MDc5MDEzOjRkZjkyYWU4OTM4NzM4MmJjYWU1OGJhMmJlOTM3MzliY2UzNDc2ZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchK4fOAFqTQxMTY3MDM2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4df92ae89387382bcae58ba2be93739bce3476e2", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/4df92ae89387382bcae58ba2be93739bce3476e2", "committedDate": "2020-05-08T06:52:06Z", "message": "XRDDEV-959: Implemented add subjects wizard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbe8633ffea55a961b4d78a33f6fa0143c89439e", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/fbe8633ffea55a961b4d78a33f6fa0143c89439e", "committedDate": "2020-05-14T09:18:55Z", "message": "Merge branch 'develop' into XRDDEV-959"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "938c1079bcae8acb236d91542762d84cd0af6f27", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/938c1079bcae8acb236d91542762d84cd0af6f27", "committedDate": "2020-05-14T09:26:39Z", "message": "XRDDEV-959: Remove unused code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjU5MDQ2", "url": "https://github.com/nordic-institute/X-Road/pull/492#pullrequestreview-411659046", "createdAt": "2020-05-14T10:10:29Z", "commit": {"oid": "938c1079bcae8acb236d91542762d84cd0af6f27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMDoxMDoyOVrOGVVbLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMDoxMDoyOVrOGVVbLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAyNDMwMA==", "bodyText": "Can you add comments about what is happening in this chain?", "url": "https://github.com/nordic-institute/X-Road/pull/492#discussion_r425024300", "createdAt": "2020-05-14T10:10:29Z", "author": {"login": "Riippi"}, "path": "src/proxy-ui-api/frontend/src/views/Clients/ServiceClients/AddServiceClientAccessRightsWizard.vue", "diffHunk": "@@ -0,0 +1,140 @@\n+<template>\n+  <div class=\"xrd-tab-max-width xrd-view-common\">\n+    <subViewTitle\n+      :title=\"$t('serviceClients.addServiceClientTitle')\"\n+      :showClose=\"false\"\n+      data-test=\"add-subject-title\"\n+    />\n+\n+    <v-stepper :alt-labels=\"true\" v-model=\"step\" class=\"stepper noshadow\">\n+      <v-stepper-header class=\"noshadow stepper-header\">\n+        <v-stepper-step :complete=\"step > 1\" step=\"1\">{{$t('serviceClients.memberGroupStep')}}</v-stepper-step>\n+        <v-divider></v-divider>\n+        <v-stepper-step :complete=\"step > 2\" step=\"2\">{{$t('serviceClients.servicesStep')}}</v-stepper-step>\n+      </v-stepper-header>\n+\n+      <v-stepper-items class=\"stepper-content\">\n+        <v-stepper-content step=\"1\">\n+          <MemberOrGroupSelectionStep\n+            :id=\"this.id\"\n+            :service-clients=\"serviceClients\"\n+            v-on:candidate-selection=\"candidateSelection\"\n+            v-on:set-step=\"nextStep\"></MemberOrGroupSelectionStep>\n+        </v-stepper-content>\n+        <v-stepper-content step=\"2\">\n+          <ServiceSelectionStep\n+            v-if=\"serviceClientCandidateSelection\"\n+            :serviceCandidates=\"serviceCandidates\"\n+            :serviceClientCandidateSelection=\"serviceClientCandidateSelection\"\n+            :id=\"id\"\n+            v-on:set-step=\"previousStep\"></ServiceSelectionStep>\n+        </v-stepper-content>\n+      </v-stepper-items>\n+    </v-stepper>\n+\n+  </div>\n+</template>\n+\n+<script lang=\"ts\">\n+  import Vue from 'vue';\n+  import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+  import MemberOrGroupSelectionStep from '@/views/Clients/ServiceClients/MemberOrGroupSelectionStep.vue';\n+  import ServiceSelectionStep from '@/views/Clients/ServiceClients/ServiceSelectionStep.vue';\n+  import LargeButton from '@/components/ui/LargeButton.vue';\n+  import {AccessRight, Service, ServiceClient, ServiceDescription} from '@/types';\n+  import * as api from '@/util/api';\n+  import {ServiceCandidate} from '@/ui-types';\n+\n+  export default Vue.extend({\n+    props: {\n+      id: {\n+        type: String,\n+        required: true,\n+      },\n+    },\n+    components: {\n+      SubViewTitle,\n+      MemberOrGroupSelectionStep,\n+      ServiceSelectionStep,\n+      LargeButton,\n+    },\n+    data() {\n+      return {\n+        step: 1 as number,\n+        serviceClientAccessRights: [] as AccessRight[],\n+        serviceCandidates: [] as ServiceCandidate[],\n+        serviceClients: [] as ServiceClient[],\n+        serviceClientCandidateSelection: undefined as undefined | ServiceClient,\n+      };\n+    },\n+    methods: {\n+      candidateSelection(candidate: ServiceClient): void {\n+        this.serviceClientCandidateSelection = candidate;\n+      },\n+      fetchData(): void {\n+\n+        api.get(`/clients/${this.id}/service-clients`, {})\n+          .then( ( response: any ): void => this.serviceClients = response.data )\n+          .catch( (error: any) =>\n+            this.$store.dispatch('showError', error));\n+\n+        api\n+          .get(`/clients/${this.id}/service-descriptions`)\n+          .then( (response: any) => {\n+            const serviceDescriptions = response.data as ServiceDescription[];\n+            this.serviceCandidates = serviceDescriptions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "938c1079bcae8acb236d91542762d84cd0af6f27"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "456706e9ee31e866151462d77a453179a11d805b", "author": {"user": {"login": "TJaakkola", "name": "Tapio Jaakkola"}}, "url": "https://github.com/nordic-institute/X-Road/commit/456706e9ee31e866151462d77a453179a11d805b", "committedDate": "2020-05-14T10:23:34Z", "message": "XRDDEV-959: Add comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjcwMzYw", "url": "https://github.com/nordic-institute/X-Road/pull/492#pullrequestreview-411670360", "createdAt": "2020-05-14T10:26:20Z", "commit": {"oid": "456706e9ee31e866151462d77a453179a11d805b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4244, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}