{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDg2NjU1", "number": 425, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDozMTowNFrODqZyGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzo1Nzo1OVrODsE3bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Nzg5MjA4OnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDozMTowNFrOF6ID2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMzoxNzoyMFrOF8GXWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5Mzc4NQ==", "bodyText": "The allOf keyword, combined with the OpenAPI model generator that we are using, seems to generate a redundant EndpointAllOf object. We have mainly tried to avoid these and created for example a ClientAdd and ServiceDescriptionUpdate models that only have the allowed and required fields in them. So maybe consider separate models (without allOf) for these endpoint schemas.\nThere is a task (XRDDEV-668) about using readOnly keyword in those fields that aren't supposed to be sent in a request. So maybe some unifying methods should be considered and documented when that task is being investigated further. Spoiler alert: The readOnly flag has no effect on anything", "url": "https://github.com/nordic-institute/X-Road/pull/425#discussion_r396493785", "createdAt": "2020-03-23T14:31:04Z", "author": {"login": "carohauta"}, "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -4910,36 +4910,40 @@ components:\n           example: false\n           default: false\n     Endpoint:\n+      allOf:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fedaffe7409fad68c43f009068470a8bfca8fd8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MzE2MQ==", "bodyText": "Removed allOf -operator and renamed EndpointPathAndMethod to EndpointUpdate.", "url": "https://github.com/nordic-institute/X-Road/pull/425#discussion_r398563161", "createdAt": "2020-03-26T13:17:20Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -4910,36 +4910,40 @@ components:\n           example: false\n           default: false\n     Endpoint:\n+      allOf:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5Mzc4NQ=="}, "originalCommit": {"oid": "4fedaffe7409fad68c43f009068470a8bfca8fd8"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTQzNjYxOnYy", "diffSide": "RIGHT", "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/EndpointService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzo1Nzo1OVrOF8yTUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo0MzozNlrOF80Sjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MzAyNQ==", "bodyText": "OpenAPI models shouldn't be referenced in the service layer: https://confluence.niis.org/pages/viewpage.action?spaceKey=XRDDEV&title=API+backend+implementation\nMaybe map the values to a separate Method enum?", "url": "https://github.com/nordic-institute/X-Road/pull/425#discussion_r399283025", "createdAt": "2020-03-27T13:57:59Z", "author": {"login": "carohauta"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/EndpointService.java", "diffHunk": "@@ -111,7 +111,7 @@ public void deleteEndpoint(Long id) throws EndpointNotFoundException, ClientNotF\n      * @throws IllegalGeneratedEndpointUpdateException  trying to update that is generated automatically\n      * @throws IllegalArgumentException                 passing illegal combination of parameters\n      */\n-    public EndpointType updateEndpoint(Long id, EndpointPathAndMethod.MethodEnum method, String path)\n+    public EndpointType updateEndpoint(Long id, EndpointUpdate.MethodEnum method, String path)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69de872a1d1973aaa1f5fa170cf70cc78689d80b"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMxNTU5OA==", "bodyText": "I decided to just pass string version of the method to service layer extra mapping feels a bit too much here.", "url": "https://github.com/nordic-institute/X-Road/pull/425#discussion_r399315598", "createdAt": "2020-03-27T14:43:36Z", "author": {"login": "TJaakkola"}, "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/EndpointService.java", "diffHunk": "@@ -111,7 +111,7 @@ public void deleteEndpoint(Long id) throws EndpointNotFoundException, ClientNotF\n      * @throws IllegalGeneratedEndpointUpdateException  trying to update that is generated automatically\n      * @throws IllegalArgumentException                 passing illegal combination of parameters\n      */\n-    public EndpointType updateEndpoint(Long id, EndpointPathAndMethod.MethodEnum method, String path)\n+    public EndpointType updateEndpoint(Long id, EndpointUpdate.MethodEnum method, String path)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MzAyNQ=="}, "originalCommit": {"oid": "69de872a1d1973aaa1f5fa170cf70cc78689d80b"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2787, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}