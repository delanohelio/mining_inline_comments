{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NDM0NjU0", "number": 9020, "title": "Deprecate UI.getRouter() and use it only as internal", "bodyText": "Fixes #8989\nRouter.navigate behaviour is now different than UI.navigate and won't update the browser history when used with NavigationTrigger.PROGRAMMATIC.", "createdAt": "2020-09-17T06:17:45Z", "url": "https://github.com/vaadin/flow/pull/9020", "merged": true, "mergeCommit": {"oid": "51d6bd997687bf092128ead03882fce85356b982"}, "closed": true, "closedAt": "2020-09-17T13:40:15Z", "author": {"login": "bogdanudrescu"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJZgu6AH2gAyNDg4NDM0NjU0OmEzMGRkODk1NGU0NWIyN2E3YzhiOTU5MGVkODAxYzc1YmU2MzkzNjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJxHlPgFqTQ5MDYwMTg0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a30dd8954e45b27a7c8b9590ed801c75be639367", "author": {"user": {"login": "bogdanudrescu", "name": "Bogdan Udrescu"}}, "url": "https://github.com/vaadin/flow/commit/a30dd8954e45b27a7c8b9590ed801c75be639367", "committedDate": "2020-09-16T10:05:56Z", "message": "Deprecate UI.getRouter()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a07dd3d3ffd2a6cb96dd1f65fb0420463f646cd7", "author": {"user": {"login": "bogdanudrescu", "name": "Bogdan Udrescu"}}, "url": "https://github.com/vaadin/flow/commit/a07dd3d3ffd2a6cb96dd1f65fb0420463f646cd7", "committedDate": "2020-09-17T06:18:54Z", "message": "make getRouter public again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e26cd3e7a1c53301a1c90ddb51f1d24b51619e13", "author": {"user": {"login": "bogdanudrescu", "name": "Bogdan Udrescu"}}, "url": "https://github.com/vaadin/flow/commit/e26cd3e7a1c53301a1c90ddb51f1d24b51619e13", "committedDate": "2020-09-17T07:07:18Z", "message": "Add getRouter to WebComponentUI."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73c49ad5ffee1bf33c27768b3af20faf347a936a", "author": {"user": {"login": "bogdanudrescu", "name": "Bogdan Udrescu"}}, "url": "https://github.com/vaadin/flow/commit/73c49ad5ffee1bf33c27768b3af20faf347a936a", "committedDate": "2020-09-17T08:14:25Z", "message": "Use navigation supported property for web components."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMzk0NjI5", "url": "https://github.com/vaadin/flow/pull/9020#pullrequestreview-490394629", "createdAt": "2020-09-17T09:09:27Z", "commit": {"oid": "73c49ad5ffee1bf33c27768b3af20faf347a936a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwOTowOToyN1rOHTYy2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwOTowOToyN1rOHTYy2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA5MTIyNA==", "bodyText": "Do not forget to remove this deprecated code someday.", "url": "https://github.com/vaadin/flow/pull/9020#discussion_r490091224", "createdAt": "2020-09-17T09:09:27Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/UI.java", "diffHunk": "@@ -929,14 +931,28 @@ public void navigate(String location, QueryParameters queryParameters) {\n         Objects.requireNonNull(location, \"Location must not be null\");\n         Objects.requireNonNull(queryParameters, \"Query parameters must not be null\");\n \n-        getRouter().navigate(this, new Location(location, queryParameters),\n+        getInternals().getRouter().navigate(this,\n+                new Location(location, queryParameters),\n                 NavigationTrigger.UI_NAVIGATE);\n     }\n \n+    /**\n+     * Returns true if this UI instance supports navigation.\n+     *\n+     * @return true if this UI instance supports navigation, otherwise false.\n+     */\n+    public boolean isNavigationSupported() {\n+        // By default any UI supports navigation. Override this to return false\n+        // if navigation is not supported.\n+        return true;\n+    }\n+\n     /**\n      * Gets the router used for navigating in this UI.\n      *\n      * @return a router\n+     *\n+     * @deprecated For internal use only. Will be removed in the future.\n      */\n     public Router getRouter() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73c49ad5ffee1bf33c27768b3af20faf347a936a"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "901ba2389d1abe57e28b9559628c1bbac24bb6c4", "author": {"user": {"login": "bogdanudrescu", "name": "Bogdan Udrescu"}}, "url": "https://github.com/vaadin/flow/commit/901ba2389d1abe57e28b9559628c1bbac24bb6c4", "committedDate": "2020-09-17T09:11:12Z", "message": "Add deprecated annotation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNjAxODQ5", "url": "https://github.com/vaadin/flow/pull/9020#pullrequestreview-490601849", "createdAt": "2020-09-17T13:36:11Z", "commit": {"oid": "901ba2389d1abe57e28b9559628c1bbac24bb6c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4895, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}