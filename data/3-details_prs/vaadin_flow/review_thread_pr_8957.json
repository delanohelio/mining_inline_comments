{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMjg4Njk5", "number": 8957, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoyMDozOFrOEg6kOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjoyMjowNFrOEhGQKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyOTQ5NDMzOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoyMDozOFrOHN9THg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoyMDozOFrOHN9THg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM5Nzg1NA==", "bodyText": "Call \"tagName.isPresent()\" before accessing the value.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484397854", "createdAt": "2020-09-07T12:20:38Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "diffHunk": "@@ -121,16 +124,18 @@ private void collectedInjectedId(Field field,\n      * @return <code>false</code> if the mapping did not pass validation,\n      *         <code>true</code> otherwise\n      */\n-    private boolean addTagName(String id, Field field) {\n+    private boolean collectElementData(String id, Field field) {\n         idByField.put(field, id);\n         if (templateRoot != null) {\n             // The template is available for parsing so check up front if the id\n             // exists\n-            Optional<String> tagName = Optional\n-                    .ofNullable(templateRoot.getElementById(id))\n+            Optional<Element> element = Optional\n+                    .ofNullable(templateRoot.getElementById(id));\n+            Optional<String> tagName = element\n                     .map(org.jsoup.nodes.Element::tagName);\n-            if (tagName.isPresent()) {\n+            if (element.isPresent()) {\n                 tagById.put(id, tagName.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTE1MDU3OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNDowNzo0NlrOHOMAIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjozMDo1OFrOHOOg2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYzODc1NQ==", "bodyText": "This should stay as tagName.isPresent() and the fetchAttributes be put in it's own if(element.isPresent()) as now we may store a null tagName", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484638755", "createdAt": "2020-09-08T04:07:46Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "diffHunk": "@@ -121,16 +124,18 @@ private void collectedInjectedId(Field field,\n      * @return <code>false</code> if the mapping did not pass validation,\n      *         <code>true</code> otherwise\n      */\n-    private boolean addTagName(String id, Field field) {\n+    private boolean collectElementData(String id, Field field) {\n         idByField.put(field, id);\n         if (templateRoot != null) {\n             // The template is available for parsing so check up front if the id\n             // exists\n-            Optional<String> tagName = Optional\n-                    .ofNullable(templateRoot.getElementById(id))\n+            Optional<Element> element = Optional\n+                    .ofNullable(templateRoot.getElementById(id));\n+            Optional<String> tagName = element\n                     .map(org.jsoup.nodes.Element::tagName);\n-            if (tagName.isPresent()) {\n+            if (element.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY2NjM5NA==", "bodyText": "tagName is mapped from Element. Element must have tag name\nSo the absence of tag name is the same as absence of Element.\nOr do I miss something ?", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484666394", "createdAt": "2020-09-08T05:55:21Z", "author": {"login": "denis-anisimov"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "diffHunk": "@@ -121,16 +124,18 @@ private void collectedInjectedId(Field field,\n      * @return <code>false</code> if the mapping did not pass validation,\n      *         <code>true</code> otherwise\n      */\n-    private boolean addTagName(String id, Field field) {\n+    private boolean collectElementData(String id, Field field) {\n         idByField.put(field, id);\n         if (templateRoot != null) {\n             // The template is available for parsing so check up front if the id\n             // exists\n-            Optional<String> tagName = Optional\n-                    .ofNullable(templateRoot.getElementById(id))\n+            Optional<Element> element = Optional\n+                    .ofNullable(templateRoot.getElementById(id));\n+            Optional<String> tagName = element\n                     .map(org.jsoup.nodes.Element::tagName);\n-            if (tagName.isPresent()) {\n+            if (element.isPresent()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYzODc1NQ=="}, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3Nzg1OA==", "bodyText": "Going by the normal creation methods tag is always needed. But should the end return be changed to element.isPresent instead of tagName.isPresent and handle the tagName inside the if clause", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484677858", "createdAt": "2020-09-08T06:25:47Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "diffHunk": "@@ -121,16 +124,18 @@ private void collectedInjectedId(Field field,\n      * @return <code>false</code> if the mapping did not pass validation,\n      *         <code>true</code> otherwise\n      */\n-    private boolean addTagName(String id, Field field) {\n+    private boolean collectElementData(String id, Field field) {\n         idByField.put(field, id);\n         if (templateRoot != null) {\n             // The template is available for parsing so check up front if the id\n             // exists\n-            Optional<String> tagName = Optional\n-                    .ofNullable(templateRoot.getElementById(id))\n+            Optional<Element> element = Optional\n+                    .ofNullable(templateRoot.getElementById(id));\n+            Optional<String> tagName = element\n                     .map(org.jsoup.nodes.Element::tagName);\n-            if (tagName.isPresent()) {\n+            if (element.isPresent()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYzODc1NQ=="}, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3OTg5OA==", "bodyText": "Right.\nTechnically it doesn't matter but logically it's better to use the same unified code.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484679898", "createdAt": "2020-09-08T06:30:58Z", "author": {"login": "denis-anisimov"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdCollector.java", "diffHunk": "@@ -121,16 +124,18 @@ private void collectedInjectedId(Field field,\n      * @return <code>false</code> if the mapping did not pass validation,\n      *         <code>true</code> otherwise\n      */\n-    private boolean addTagName(String id, Field field) {\n+    private boolean collectElementData(String id, Field field) {\n         idByField.put(field, id);\n         if (templateRoot != null) {\n             // The template is available for parsing so check up front if the id\n             // exists\n-            Optional<String> tagName = Optional\n-                    .ofNullable(templateRoot.getElementById(id))\n+            Optional<Element> element = Optional\n+                    .ofNullable(templateRoot.getElementById(id));\n+            Optional<String> tagName = element\n                     .map(org.jsoup.nodes.Element::tagName);\n-            if (tagName.isPresent()) {\n+            if (element.isPresent()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYzODc1NQ=="}, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTI1NDU0OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/TemplateInitializer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToxNDozMVrOHOM8Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToxNDozMVrOHOM8Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NDA5NA==", "bodyText": "Could we add debug log for skipped attributes so that if there comes confusion on the issue it could be seen in the devug level logs.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484654094", "createdAt": "2020-09-08T05:14:31Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/TemplateInitializer.java", "diffHunk": "@@ -153,9 +153,32 @@ private void attachComponentIfUses(Element element) {\n     /* Map declared fields marked @Id */\n \n     private void mapComponents() {\n-        parserData.forEachInjectedField(\n-                (field, id, tag) -> idMapper.mapComponentOrElement(field, id,\n-                        tag, this::attachComponentIfUses));\n+        parserData.forEachInjectedField((field, id, tag) -> idMapper\n+                .mapComponentOrElement(field, id, tag, element -> {\n+                    Map<String, String> attributes = parserData\n+                            .getAttributes(id);\n+                    attributes.forEach((name, value) -> setAttribute(element,\n+                            name, value));\n+                    attachComponentIfUses(element);\n+                }));\n+    }\n+\n+    private void setAttribute(Element element, String name, String value) {\n+        if (name.endsWith(\"$\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTI2MTA4OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdMapper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToxNzo0N1rOHOM_oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNTo1NjoxMlrOHONtOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NTAwOQ==", "bodyText": "Parameter is missing documentation should be filled even for privates if javadoc added.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param beforeInject\n          \n          \n            \n                 * @param beforeInject\n          \n          \n            \n                 *            a callback invoked before assigning the element/component to\n          \n          \n            \n                 *            the field", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484655009", "createdAt": "2020-09-08T05:17:47Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdMapper.java", "diffHunk": "@@ -129,10 +131,10 @@ private Element getElement() {\n      *            id of element to attach to\n      * @param field\n      *            field to attach {@code Element} or {@code Component} to\n-     * @param beforeComponentInject\n+     * @param beforeInject", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY2NjY4Mg==", "bodyText": "This is technically out of scope of this PR since no changes except parameter name has been done.\nBut ok.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484666682", "createdAt": "2020-09-08T05:56:12Z", "author": {"login": "denis-anisimov"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/IdMapper.java", "diffHunk": "@@ -129,10 +131,10 @@ private Element getElement() {\n      *            id of element to attach to\n      * @param field\n      *            field to attach {@code Element} or {@code Component} to\n-     * @param beforeComponentInject\n+     * @param beforeInject", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NTAwOQ=="}, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTI3MjU3OnYy", "diffSide": "RIGHT", "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToyNDowNFrOHONGJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNTo1Njo0NlrOHONuJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NjY3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                + \"' someattrtibute></dom-module>\");\n          \n          \n            \n                                + \"' someattribute></dom-module>\");\n          \n      \n    \n    \n  \n\nTypo", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484656676", "createdAt": "2020-09-08T05:24:04Z", "author": {"login": "caalador"}, "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "diffHunk": "@@ -100,7 +100,8 @@ public TemplateData getTemplateContent(\n     private static class SimpleTemplateParser extends TestTemplateParser {\n \n         SimpleTemplateParser() {\n-            super(tag -> \"<dom-module id='\" + tag + \"' someattrtibute></dom-module>\");\n+            super(tag -> \"<dom-module id='\" + tag\n+                    + \"' someattrtibute></dom-module>\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY2NjkxOQ==", "bodyText": "This typo is all over the class.\nI'm not sure that it's worth to correct it only in this place.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484666919", "createdAt": "2020-09-08T05:56:46Z", "author": {"login": "denis-anisimov"}, "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "diffHunk": "@@ -100,7 +100,8 @@ public TemplateData getTemplateContent(\n     private static class SimpleTemplateParser extends TestTemplateParser {\n \n         SimpleTemplateParser() {\n-            super(tag -> \"<dom-module id='\" + tag + \"' someattrtibute></dom-module>\");\n+            super(tag -> \"<dom-module id='\" + tag\n+                    + \"' someattrtibute></dom-module>\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NjY3Ng=="}, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTI3MzA1OnYy", "diffSide": "RIGHT", "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToyNDoxN1rOHONGZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToyNDoxN1rOHONGZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1Njc0Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        + \"'><label id='labelId' someattrtibute property-binding='[[foo]]' \"\n          \n          \n            \n                                        + \"'><label id='labelId' someattribute property-binding='[[foo]]' \"", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484656743", "createdAt": "2020-09-08T05:24:17Z", "author": {"login": "caalador"}, "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "diffHunk": "@@ -312,7 +313,9 @@ public TextNodesInHtmlTemplate(TestTemplateParser parser) {\n         public IdElementTemplate() {\n             this((clazz, tag, service) -> new TemplateData(\"\",\n                     Jsoup.parse(\"<dom-module id='\" + tag\n-                            + \"'><label id='labelId' someattrtibute></dom-module>\")));\n+                            + \"'><label id='labelId' someattrtibute property-binding='[[foo]]' \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTI3NDUwOnYy", "diffSide": "RIGHT", "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToyNDo1MFrOHONHKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNToyNDo1MFrOHONHKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NjkzOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Assert.assertTrue(template.label.hasAttribute(\"someattrtibute\"));\n          \n          \n            \n                    Assert.assertNotNull(template.label.getAttribute(\"someattrtibute\"));\n          \n          \n            \n                    Assert.assertTrue(\n          \n          \n            \n                            template.label.getAttribute(\"someattrtibute\").isEmpty());\n          \n          \n            \n                    Assert.assertTrue(template.label.hasAttribute(\"someattribute\"));\n          \n          \n            \n                    Assert.assertNotNull(template.label.getAttribute(\"someattribute\"));\n          \n          \n            \n                    Assert.assertTrue(\n          \n          \n            \n                            template.label.getAttribute(\"someattribute\").isEmpty());", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484656938", "createdAt": "2020-09-08T05:24:50Z", "author": {"login": "caalador"}, "path": "flow-server/src/test/java/com/vaadin/flow/component/polymertemplate/PolymerTemplateTest.java", "diffHunk": "@@ -765,6 +766,31 @@ public void attachExistingElement_elementIsCreatedAndSetAsVirtualChild() {\n         assertElementData(child, NodeProperties.INJECT_BY_ID, \"labelId\");\n     }\n \n+    @Test\n+    public void attachExistingElementWithAttributeValue_elementHasAttribute() {\n+        IdElementTemplate template = new IdElementTemplate();\n+\n+        Assert.assertTrue(template.label.hasAttribute(\"someattrtibute\"));\n+        Assert.assertNotNull(template.label.getAttribute(\"someattrtibute\"));\n+        Assert.assertTrue(\n+                template.label.getAttribute(\"someattrtibute\").isEmpty());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e2d8f59f356a708957260a8e7eff0991c2155b1"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTQwOTA0OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/TemplateInitializer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjoyMjowNFrOHOOTRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjoyOToxM1rOHOOeGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3NjQyMA==", "bodyText": "info might bring too much logs, but this will become apparent quite early on I expect.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484676420", "createdAt": "2020-09-08T06:22:04Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/TemplateInitializer.java", "diffHunk": "@@ -153,9 +156,44 @@ private void attachComponentIfUses(Element element) {\n     /* Map declared fields marked @Id */\n \n     private void mapComponents() {\n-        parserData.forEachInjectedField(\n-                (field, id, tag) -> idMapper.mapComponentOrElement(field, id,\n-                        tag, this::attachComponentIfUses));\n+        parserData.forEachInjectedField((field, id, tag) -> idMapper\n+                .mapComponentOrElement(field, id, tag, element -> {\n+                    Map<String, String> attributes = parserData\n+                            .getAttributes(id);\n+                    attributes.forEach((name, value) -> setAttribute(element,\n+                            name, value));\n+                    attachComponentIfUses(element);\n+                }));\n+    }\n+\n+    private void setAttribute(Element element, String name, String value) {\n+        if (name.endsWith(\"$\")) {\n+            // this is an attribute binding, ignore it since we don't support\n+            // bindings: the value is not an expression\n+            getLogger().info(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7a86bc75be4037cbf4e73fdd433ad4277555cae"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3ODY0OA==", "bodyText": "Right, should be debug or trace.\nLet's make it debug ( or trace ) ?", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484678648", "createdAt": "2020-09-08T06:27:49Z", "author": {"login": "denis-anisimov"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/TemplateInitializer.java", "diffHunk": "@@ -153,9 +156,44 @@ private void attachComponentIfUses(Element element) {\n     /* Map declared fields marked @Id */\n \n     private void mapComponents() {\n-        parserData.forEachInjectedField(\n-                (field, id, tag) -> idMapper.mapComponentOrElement(field, id,\n-                        tag, this::attachComponentIfUses));\n+        parserData.forEachInjectedField((field, id, tag) -> idMapper\n+                .mapComponentOrElement(field, id, tag, element -> {\n+                    Map<String, String> attributes = parserData\n+                            .getAttributes(id);\n+                    attributes.forEach((name, value) -> setAttribute(element,\n+                            name, value));\n+                    attachComponentIfUses(element);\n+                }));\n+    }\n+\n+    private void setAttribute(Element element, String name, String value) {\n+        if (name.endsWith(\"$\")) {\n+            // this is an attribute binding, ignore it since we don't support\n+            // bindings: the value is not an expression\n+            getLogger().info(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3NjQyMA=="}, "originalCommit": {"oid": "d7a86bc75be4037cbf4e73fdd433ad4277555cae"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3OTE5Mg==", "bodyText": "I would propose debug.", "url": "https://github.com/vaadin/flow/pull/8957#discussion_r484679192", "createdAt": "2020-09-08T06:29:13Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/polymertemplate/TemplateInitializer.java", "diffHunk": "@@ -153,9 +156,44 @@ private void attachComponentIfUses(Element element) {\n     /* Map declared fields marked @Id */\n \n     private void mapComponents() {\n-        parserData.forEachInjectedField(\n-                (field, id, tag) -> idMapper.mapComponentOrElement(field, id,\n-                        tag, this::attachComponentIfUses));\n+        parserData.forEachInjectedField((field, id, tag) -> idMapper\n+                .mapComponentOrElement(field, id, tag, element -> {\n+                    Map<String, String> attributes = parserData\n+                            .getAttributes(id);\n+                    attributes.forEach((name, value) -> setAttribute(element,\n+                            name, value));\n+                    attachComponentIfUses(element);\n+                }));\n+    }\n+\n+    private void setAttribute(Element element, String name, String value) {\n+        if (name.endsWith(\"$\")) {\n+            // this is an attribute binding, ignore it since we don't support\n+            // bindings: the value is not an expression\n+            getLogger().info(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3NjQyMA=="}, "originalCommit": {"oid": "d7a86bc75be4037cbf4e73fdd433ad4277555cae"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3232, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}