{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjE5NDcz", "number": 9588, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOToyNzoxNVrOFCN2iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo0MDo0NFrOFCOPZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODY4NDI3OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/component/webcomponent/WebComponentUI.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOToyNzoxNVrOIBPi4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo1NDo1NlrOIBQznA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE3NDE3OA==", "bodyText": "So if one has @Theme(value=\"my-theme\", variant=Lumo.DARK) in their exported web component it will not apply the variant ?\nOr does it fail already before this place ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538174178", "createdAt": "2020-12-08T09:27:15Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/webcomponent/WebComponentUI.java", "diffHunk": "@@ -286,7 +288,8 @@ private void assignThemeVariant() {\n         WebComponentConfigurationRegistry registry = getConfigurationRegistry();\n         Optional<Theme> theme = registry\n                 .getEmbeddedApplicationAnnotation(Theme.class);\n-        if (!theme.isPresent()) {\n+        if (!theme.isPresent() || theme.get().themeClass()\n+            .equals(AbstractTheme.class)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5NDg0NA==", "bodyText": "This will not do anything if you have a themeClass in theme. You can have my-theme and theme variant.", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538194844", "createdAt": "2020-12-08T09:54:56Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/webcomponent/WebComponentUI.java", "diffHunk": "@@ -286,7 +288,8 @@ private void assignThemeVariant() {\n         WebComponentConfigurationRegistry registry = getConfigurationRegistry();\n         Optional<Theme> theme = registry\n                 .getEmbeddedApplicationAnnotation(Theme.class);\n-        if (!theme.isPresent()) {\n+        if (!theme.isPresent() || theme.get().themeClass()\n+            .equals(AbstractTheme.class)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE3NDE3OA=="}, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODcyNjczOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/server/InitParameters.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTozNjoyMlrOIBP8dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo1NjowN1rOIBQ3VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MDcyNQ==", "bodyText": "Not sure why do we need to expose this even now ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538180725", "createdAt": "2020-12-08T09:36:22Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/InitParameters.java", "diffHunk": "@@ -158,4 +158,10 @@\n      * component UI imports them as dependencies.\n      */\n     public static final String COMPILED_WEB_COMPONENTS_PATH = \"compiled.web.components.path\";\n+\n+    /**\n+     * Configuration for determining if embeddable web components should\n+     * be generated. By default they are generated.\n+     */\n+    public static final String GENERATE_WEB_COMPONENTS = \"generateEmbeddableWebComponents\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5NTc5Ng==", "bodyText": "I don't understand why this was not configurable from the beginning, but I'll revert this.", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538195796", "createdAt": "2020-12-08T09:56:07Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/InitParameters.java", "diffHunk": "@@ -158,4 +158,10 @@\n      * component UI imports them as dependencies.\n      */\n     public static final String COMPILED_WEB_COMPONENTS_PATH = \"compiled.web.components.path\";\n+\n+    /**\n+     * Configuration for determining if embeddable web components should\n+     * be generated. By default they are generated.\n+     */\n+    public static final String GENERATE_WEB_COMPONENTS = \"generateEmbeddableWebComponents\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MDcyNQ=="}, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODc0MzA4OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTozOTo0MVrOIBQFzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDowNDo0MlrOIBRQCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzExNg==", "bodyText": "These look odd since there is no whitespace after the _ThemeImport_ like with _TagCamel_, looks like a mistake but it still works ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538183116", "createdAt": "2020-12-08T09:39:41Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -1,4 +1,4 @@\n-class _TagCamel_ extends HTMLElement {\n+_ThemeImport_class _TagCamel_ extends HTMLElement {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5MjY3OA==", "bodyText": "The reason is that it is replaced with something  + new line or with nothing\nIt's this way by design, but we can update tests to check for \\n\\nStart String also the matching target is name which doesn't actually need spaces before or after, it's more on what replaces the placeholder.", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538192678", "createdAt": "2020-12-08T09:51:57Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -1,4 +1,4 @@\n-class _TagCamel_ extends HTMLElement {\n+_ThemeImport_class _TagCamel_ extends HTMLElement {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzExNg=="}, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIwMjEyMw==", "bodyText": "see WebComponentGenerator::getReplacementsMap l162", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538202123", "createdAt": "2020-12-08T10:04:42Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -1,4 +1,4 @@\n-class _TagCamel_ extends HTMLElement {\n+_ThemeImport_class _TagCamel_ extends HTMLElement {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzExNg=="}, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODc0NTA3OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo0MDoxMFrOIBQHGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo1NDowM1rOIBQxFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzQ0OQ==", "bodyText": "Same here, the missing whitespace looks like a mishap even though it doesn't fail due to the ; ending", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538183449", "createdAt": "2020-12-08T09:40:10Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -12,7 +12,7 @@ class _TagCamel_ extends HTMLElement {\n         display: inline-block;\n       }\n     `;\n-    shadow.appendChild(style);\n+    _ApplyTheme_shadow.appendChild(style);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5NDE5OA==", "bodyText": "this is also replaced by something+newLine or \"\"", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538194198", "createdAt": "2020-12-08T09:54:03Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -12,7 +12,7 @@ class _TagCamel_ extends HTMLElement {\n         display: inline-block;\n       }\n     `;\n-    shadow.appendChild(style);\n+    _ApplyTheme_shadow.appendChild(style);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzQ0OQ=="}, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODc0NzkwOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/plugins/application-theme-plugin/package.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo0MDo0NFrOIBQI0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo1MDowMlrOIBQlhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4Mzg5MQ==", "bodyText": "Isn't exported web component support a new feature ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538183891", "createdAt": "2020-12-08T09:40:44Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/package.json", "diffHunk": "@@ -6,7 +6,7 @@\n   ],\n   \"repository\": \"vaadin/flow\",\n   \"name\": \"@vaadin/application-theme-plugin\",\n-  \"version\": \"0.2.0\",\n+  \"version\": \"0.2.1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE5MTIzNg==", "bodyText": "Not from the plugin point of view as the addition is only a globalCssCode.push", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538191236", "createdAt": "2020-12-08T09:50:02Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/package.json", "diffHunk": "@@ -6,7 +6,7 @@\n   ],\n   \"repository\": \"vaadin/flow\",\n   \"name\": \"@vaadin/application-theme-plugin\",\n-  \"version\": \"0.2.0\",\n+  \"version\": \"0.2.1\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4Mzg5MQ=="}, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2890, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}