{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNjE5NDcz", "number": 9588, "title": "feat: Embedded component appTheme support", "bodyText": "Add support for application theme with\nembedded components.\nFixes #8564", "createdAt": "2020-12-07T12:02:52Z", "url": "https://github.com/vaadin/flow/pull/9588", "merged": true, "mergeCommit": {"oid": "bd84a1d4a7932f92c2f08f30cfe015ec59969a73"}, "closed": true, "closedAt": "2020-12-08T11:38:07Z", "author": {"login": "caalador"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj0UkhgH2gAyNTMzNjE5NDczOjg5Y2Q2MmY4NTg5OTVhNmM2NjhlOTFjYjE0MzU3ZDg2OTlhNzhiMWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkIkm0AFqTU0NzE1MDk5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "89cd62f858995a6c668e91cb14357d8699a78b1b", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/89cd62f858995a6c668e91cb14357d8699a78b1b", "committedDate": "2020-12-07T12:02:07Z", "message": "feat: Embedded component appTheme support\n\nAdd support for application theme with\nembedded components.\n\nFixes #8564"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f09fdb9693e6830e5a2d82b9c88472e42c71d85c", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/f09fdb9693e6830e5a2d82b9c88472e42c71d85c", "committedDate": "2020-12-08T07:38:02Z", "message": "Enable disabling of web component generation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/aba80a41959b8e013860e81d95aced48a1d28d27", "committedDate": "2020-12-08T09:12:16Z", "message": "Handle null themeDefinition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2OTM3OTk5", "url": "https://github.com/vaadin/flow/pull/9588#pullrequestreview-546937999", "createdAt": "2020-12-08T09:27:15Z", "commit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOToyNzoxNVrOIBPi4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwOTo0MDo0NFrOIBQI0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE3NDE3OA==", "bodyText": "So if one has @Theme(value=\"my-theme\", variant=Lumo.DARK) in their exported web component it will not apply the variant ?\nOr does it fail already before this place ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538174178", "createdAt": "2020-12-08T09:27:15Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/webcomponent/WebComponentUI.java", "diffHunk": "@@ -286,7 +288,8 @@ private void assignThemeVariant() {\n         WebComponentConfigurationRegistry registry = getConfigurationRegistry();\n         Optional<Theme> theme = registry\n                 .getEmbeddedApplicationAnnotation(Theme.class);\n-        if (!theme.isPresent()) {\n+        if (!theme.isPresent() || theme.get().themeClass()\n+            .equals(AbstractTheme.class)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MDcyNQ==", "bodyText": "Not sure why do we need to expose this even now ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538180725", "createdAt": "2020-12-08T09:36:22Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/InitParameters.java", "diffHunk": "@@ -158,4 +158,10 @@\n      * component UI imports them as dependencies.\n      */\n     public static final String COMPILED_WEB_COMPONENTS_PATH = \"compiled.web.components.path\";\n+\n+    /**\n+     * Configuration for determining if embeddable web components should\n+     * be generated. By default they are generated.\n+     */\n+    public static final String GENERATE_WEB_COMPONENTS = \"generateEmbeddableWebComponents\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzExNg==", "bodyText": "These look odd since there is no whitespace after the _ThemeImport_ like with _TagCamel_, looks like a mistake but it still works ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538183116", "createdAt": "2020-12-08T09:39:41Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -1,4 +1,4 @@\n-class _TagCamel_ extends HTMLElement {\n+_ThemeImport_class _TagCamel_ extends HTMLElement {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4MzQ0OQ==", "bodyText": "Same here, the missing whitespace looks like a mishap even though it doesn't fail due to the ; ending", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538183449", "createdAt": "2020-12-08T09:40:10Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/com/vaadin/flow/server/webcomponent/webcomponent-script-template.js", "diffHunk": "@@ -12,7 +12,7 @@ class _TagCamel_ extends HTMLElement {\n         display: inline-block;\n       }\n     `;\n-    shadow.appendChild(style);\n+    _ApplyTheme_shadow.appendChild(style);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE4Mzg5MQ==", "bodyText": "Isn't exported web component support a new feature ?", "url": "https://github.com/vaadin/flow/pull/9588#discussion_r538183891", "createdAt": "2020-12-08T09:40:44Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/package.json", "diffHunk": "@@ -6,7 +6,7 @@\n   ],\n   \"repository\": \"vaadin/flow\",\n   \"name\": \"@vaadin/application-theme-plugin\",\n-  \"version\": \"0.2.0\",\n+  \"version\": \"0.2.1\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aba80a41959b8e013860e81d95aced48a1d28d27"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2558f7e3014c694bbdc799ec9db5d120c127e86", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/c2558f7e3014c694bbdc799ec9db5d120c127e86", "committedDate": "2020-12-08T09:55:37Z", "message": "Revert \"Enable disabling of web component generation.\"\n\nThis reverts commit f09fdb9693e6830e5a2d82b9c88472e42c71d85c."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "660b0c7ac9922bcca9728c4d52c214057f83e8d1", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/660b0c7ac9922bcca9728c4d52c214057f83e8d1", "committedDate": "2020-12-08T10:07:10Z", "message": "Fix test to have correct name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "757bba791e5f68630558540c0e9e705f429c81b0", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/757bba791e5f68630558540c0e9e705f429c81b0", "committedDate": "2020-12-08T10:19:38Z", "message": "Clean imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTUwOTk4", "url": "https://github.com/vaadin/flow/pull/9588#pullrequestreview-547150998", "createdAt": "2020-12-08T11:37:44Z", "commit": {"oid": "757bba791e5f68630558540c0e9e705f429c81b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4636, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}