{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMTU1NzQz", "number": 9172, "title": "fix: only register endpoint request handler when endpoint presents", "bodyText": "Fixes #9005\nFor a non-boot Spring application or a Spring Boot application with auto-configuration disabled (e.g. when using @EnableWebMvc), Vaadin registers a request handler with mapping /{endpoint}/{method}. Note the connect prefix is not added in this case, since it relies on Spring Boot auto-configuraiton.\nSo it's better for users who are using endpoints, we don't register the endpoint request handler.\nTest is in vaadin/spring#672", "createdAt": "2020-10-14T06:53:32Z", "url": "https://github.com/vaadin/flow/pull/9172", "merged": true, "mergeCommit": {"oid": "474e760d9fe3aa391ee405dec869ac6b6989cd37"}, "closed": true, "closedAt": "2020-10-16T16:44:47Z", "author": {"login": "haijian-vaadin"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSXhRlAH2gAyNTAzMTU1NzQzOjdmOTZhMGQzN2QwMTQ4ZTcxMjQyZWE5YTRiMmFhOTQwMDk3ZmVhNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTGUwhAFqTUxMDQ2NTM5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7f96a0d37d0148e71242ea9a4b2aa940097fea51", "author": {"user": {"login": "haijian-vaadin", "name": "Haijian Wang"}}, "url": "https://github.com/vaadin/flow/commit/7f96a0d37d0148e71242ea9a4b2aa940097fea51", "committedDate": "2020-10-14T06:52:02Z", "message": "fix: only register endpoint request handler when endpoint presents"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MjU1MzQ1", "url": "https://github.com/vaadin/flow/pull/9172#pullrequestreview-508255345", "createdAt": "2020-10-14T11:38:18Z", "commit": {"oid": "7f96a0d37d0148e71242ea9a4b2aa940097fea51"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMTozODoxOFrOHhOyCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMTozODoxOFrOHhOyCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYwNzI0Mg==", "bodyText": "Just a question; would it be better to use Custom Conditional to only activate the controller if the @Endpoint annotation is used? Or is this over-engineered because you guys think about removing spring? https://reflectoring.io/spring-boot-conditionals/#custom-conditions", "url": "https://github.com/vaadin/flow/pull/9172#discussion_r504607242", "createdAt": "2020-10-14T11:38:18Z", "author": {"login": "knoobie"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java", "diffHunk": "@@ -94,6 +97,7 @@\n @RestController\n @Import({ VaadinConnectControllerConfiguration.class,\n         VaadinEndpointProperties.class })\n+@ConditionalOnProperty(value = VAADIN_ENDPINT_ENABLED, havingValue = \"true\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f96a0d37d0148e71242ea9a4b2aa940097fea51"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMzY4MDM1", "url": "https://github.com/vaadin/flow/pull/9172#pullrequestreview-510368035", "createdAt": "2020-10-16T11:02:42Z", "commit": {"oid": "7f96a0d37d0148e71242ea9a4b2aa940097fea51"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMTowMjo0MlrOHi15uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMTowMjo0MlrOHi15uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjI5Njc2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final String VAADIN_ENDPINT_ENABLED = \"endpoint.enabled\";\n          \n          \n            \n                public static final String VAADIN_ENDPOINT_ENABLED = \"endpoint.enabled\";\n          \n      \n    \n    \n  \n\nThere's a typo in the constant. BTW, should it be a public constant (from API maintenance point of view this means it can't easily be removed or renamed later) or could it be put inside com.vaadin.flow.server.connect (e.g., within an internal package)?", "url": "https://github.com/vaadin/flow/pull/9172#discussion_r506296760", "createdAt": "2020-10-16T11:02:42Z", "author": {"login": "joheriks"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/Constants.java", "diffHunk": "@@ -412,6 +412,8 @@\n     // Non-default port currently not supported (#7970)\n     public static final int SPRING_BOOT_DEFAULT_LIVE_RELOAD_PORT = 35729;\n \n+    public static final String VAADIN_ENDPINT_ENABLED = \"endpoint.enabled\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f96a0d37d0148e71242ea9a4b2aa940097fea51"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f16ff62ffef91efcca81a00d4f098d60f286615a", "author": {"user": {"login": "haijian-vaadin", "name": "Haijian Wang"}}, "url": "https://github.com/vaadin/flow/commit/f16ff62ffef91efcca81a00d4f098d60f286615a", "committedDate": "2020-10-16T11:19:42Z", "message": "move constant to internal package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "882539c3524b0576649d0a7b8c3c5520f9f2c968", "author": {"user": {"login": "haijian-vaadin", "name": "Haijian Wang"}}, "url": "https://github.com/vaadin/flow/commit/882539c3524b0576649d0a7b8c3c5520f9f2c968", "committedDate": "2020-10-16T12:02:10Z", "message": "update package name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDIxNzA3", "url": "https://github.com/vaadin/flow/pull/9172#pullrequestreview-510421707", "createdAt": "2020-10-16T12:28:31Z", "commit": {"oid": "882539c3524b0576649d0a7b8c3c5520f9f2c968"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c228de12297485145038127180600a812fb545cf", "author": {"user": {"login": "haijian-vaadin", "name": "Haijian Wang"}}, "url": "https://github.com/vaadin/flow/commit/c228de12297485145038127180600a812fb545cf", "committedDate": "2020-10-16T12:59:12Z", "message": "fix sonar issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDY1Mzk0", "url": "https://github.com/vaadin/flow/pull/9172#pullrequestreview-510465394", "createdAt": "2020-10-16T13:23:54Z", "commit": {"oid": "c228de12297485145038127180600a812fb545cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4684, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}