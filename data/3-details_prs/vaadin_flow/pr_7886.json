{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjg2MTkz", "number": 7886, "title": "Added toggle for live-reload on a per-window basis", "bodyText": "Closes #7834.\n\n\nThis change is\u2002", "createdAt": "2020-03-25T16:18:25Z", "url": "https://github.com/vaadin/flow/pull/7886", "merged": true, "mergeCommit": {"oid": "34386c768b84fcea7eef366012a6f6b8c3f447d7"}, "closed": true, "closedAt": "2020-03-26T14:32:27Z", "author": {"login": "joheriks"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRJ8GRgH2gAyMzkzNjg2MTkzOmNlNTliMmU3OWVmNDgxMDRlODUzNmQ5MDQ2ZDEyODViYTIzYTVhMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRcwPtAFqTM4MjA0ODE4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ce59b2e79ef48104e8536d9046d1285ba23a5a39", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/ce59b2e79ef48104e8536d9046d1285ba23a5a39", "committedDate": "2020-03-25T16:17:35Z", "message": "Added toggle for live-reload on a per-window basis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f1e889ca8ab8bbf949d2f401bca3081cad57354", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/2f1e889ca8ab8bbf949d2f401bca3081cad57354", "committedDate": "2020-03-25T20:03:02Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2616b878ecd0d675e1d9ce930fbff4cae28dc9de", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/2616b878ecd0d675e1d9ce930fbff4cae28dc9de", "committedDate": "2020-03-25T20:21:06Z", "message": "Use closeWebSOcketConnection method, formatting."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxODg2MDU2", "url": "https://github.com/vaadin/flow/pull/7886#pullrequestreview-381886056", "createdAt": "2020-03-26T10:41:26Z", "commit": {"oid": "2616b878ecd0d675e1d9ce930fbff4cae28dc9de"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e2035cbee8eca09955e6d67c67398cae8c75c74", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/9e2035cbee8eca09955e6d67c67398cae8c75c74", "committedDate": "2020-03-26T13:17:04Z", "message": "Show an error state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74787b7913589f3639d1e044e65501104e919703", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/74787b7913589f3639d1e044e65501104e919703", "committedDate": "2020-03-26T13:21:12Z", "message": "Tuned message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMDAwMTMx", "url": "https://github.com/vaadin/flow/pull/7886#pullrequestreview-382000131", "createdAt": "2020-03-26T13:21:26Z", "commit": {"oid": "74787b7913589f3639d1e044e65501104e919703"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMDA5NjMx", "url": "https://github.com/vaadin/flow/pull/7886#pullrequestreview-382009631", "createdAt": "2020-03-26T13:31:59Z", "commit": {"oid": "74787b7913589f3639d1e044e65501104e919703"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMzozMTo1OVrOF8G_Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMzozMTo1OVrOF8G_Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU3MzMyMg==", "bodyText": "Remove this unused method parameter \"ev\".", "url": "https://github.com/vaadin/flow/pull/7886#discussion_r398573322", "createdAt": "2020-03-26T13:31:59Z", "author": {"login": "vaadin-bot"}, "path": "flow-client/src/main/java/com/vaadin/client/LiveReload.java", "diffHunk": "@@ -84,16 +104,35 @@ private native WebSocket createWebSocket(String url)\n     private void handleMessageEvent(Event evt) {\n         MessageEvent messageEvent = (MessageEvent) evt;\n         JsonObject data = Json.parse((String) messageEvent.getData());\n-        indicator = getOrCreateIndicator();\n-        Element indicatorMessage = Browser.getDocument()\n-                .getElementById(\"vaadin-live-reload-message\");\n         if (\"hello\".equals(data.getString(\"command\"))) {\n-            indicatorMessage.setInnerHTML(\"Live reload: enabled\");\n+            updateActiveIndicator();\n+            showMessage(\"Live reload: available\");\n         } else if (\"reload\".equals(data.getString(\"command\"))) {\n-            indicatorMessage.setInnerHTML(\"Live reload: in progress ...\");\n-            Browser.getWindow().getLocation().reload();\n+            if (isActive()) {\n+                showMessage(\"Live reload: in progress ...\");\n+                Browser.getWindow().getLocation().reload();\n+            }\n+        } else {\n+            showMessage(null);\n+        }\n+    }\n+\n+    private void handleErrorEvent(Event ev) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74787b7913589f3639d1e044e65501104e919703"}, "originalPosition": 78}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMDMyNjkw", "url": "https://github.com/vaadin/flow/pull/7886#pullrequestreview-382032690", "createdAt": "2020-03-26T13:56:41Z", "commit": {"oid": "74787b7913589f3639d1e044e65501104e919703"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMDQ4MTg4", "url": "https://github.com/vaadin/flow/pull/7886#pullrequestreview-382048188", "createdAt": "2020-03-26T14:12:50Z", "commit": {"oid": "74787b7913589f3639d1e044e65501104e919703"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 618, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}