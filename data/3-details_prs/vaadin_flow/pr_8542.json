{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNDgzNjgw", "number": 8542, "title": "Live reload: construct correct push URL when both service URL (and context path) and liveReloadPath are given", "bodyText": "Closes #8541.\nNote: Fix needs to be picked to master also, but will require some adaptation to the TS bootstrapping as the flow-client method for computing the URL with context root is not available there.", "createdAt": "2020-06-10T14:10:42Z", "url": "https://github.com/vaadin/flow/pull/8542", "merged": true, "mergeCommit": {"oid": "1e62279832788150b8408ebae89e792acf03f04d"}, "closed": true, "closedAt": "2020-06-11T12:56:19Z", "author": {"login": "joheriks"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp6Ln5AH2gAyNDMyNDgzNjgwOmQyMTE3ZDhhYjQ0MjlkOTZkODg3MjU0YmJhNGE4NDdiMWVkNmJlNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqNMitAFqTQyODg0ODY5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d2117d8ab4429d96d887254bba4a847b1ed6be54", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/d2117d8ab4429d96d887254bba4a847b1ed6be54", "committedDate": "2020-06-10T14:04:10Z", "message": "Live reload: construct correct push URL when both service url (and context path) and liveReloadPath are given"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f17767eb9f1965d010430441c7a41e9a08d82c9", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/6f17767eb9f1965d010430441c7a41e9a08d82c9", "committedDate": "2020-06-11T10:22:13Z", "message": "Move logic for determining push URL to ApplicationConnection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NzkzNDk0", "url": "https://github.com/vaadin/flow/pull/8542#pullrequestreview-428793494", "createdAt": "2020-06-11T10:41:45Z", "commit": {"oid": "6f17767eb9f1965d010430441c7a41e9a08d82c9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4Nzk3NTQ3", "url": "https://github.com/vaadin/flow/pull/8542#pullrequestreview-428797547", "createdAt": "2020-06-11T10:48:32Z", "commit": {"oid": "6f17767eb9f1965d010430441c7a41e9a08d82c9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMDo0ODozMlrOGiYHNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxMDo0OTo1OFrOGiYJxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY5OTgzMA==", "bodyText": "So the reload connection URL is just the same URL as the application URL?\nIs it correct actually ?\nReload channel will use the application channel.\nWon't they overlap ?", "url": "https://github.com/vaadin/flow/pull/8542#discussion_r438699830", "createdAt": "2020-06-11T10:48:32Z", "author": {"login": "denis-anisimov"}, "path": "flow-client/src/main/java/com/vaadin/client/ApplicationConnection.java", "diffHunk": "@@ -94,9 +94,16 @@ public ApplicationConnection(\n             Console.log(\n                     \"Vaadin application servlet version: \" + servletVersion);\n \n+            String reloadConnectionUrl;\n+            if (applicationConfiguration.getLiveReloadPath() != null) {\n+                reloadConnectionUrl = applicationConfiguration\n+                        .getContextRootUrl()\n+                        + applicationConfiguration.getLiveReloadPath();\n+            } else {\n+                reloadConnectionUrl = applicationConfiguration.getServiceUrl();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f17767eb9f1965d010430441c7a41e9a08d82c9"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcwMDQ4NQ==", "bodyText": "OR this is not a complete URL actually ?\nWill it be used to append query parameters ?\nThen from the comment above : looks like the name is confusing because it's not final URL....", "url": "https://github.com/vaadin/flow/pull/8542#discussion_r438700485", "createdAt": "2020-06-11T10:49:58Z", "author": {"login": "denis-anisimov"}, "path": "flow-client/src/main/java/com/vaadin/client/ApplicationConnection.java", "diffHunk": "@@ -94,9 +94,16 @@ public ApplicationConnection(\n             Console.log(\n                     \"Vaadin application servlet version: \" + servletVersion);\n \n+            String reloadConnectionUrl;\n+            if (applicationConfiguration.getLiveReloadPath() != null) {\n+                reloadConnectionUrl = applicationConfiguration\n+                        .getContextRootUrl()\n+                        + applicationConfiguration.getLiveReloadPath();\n+            } else {\n+                reloadConnectionUrl = applicationConfiguration.getServiceUrl();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY5OTgzMA=="}, "originalCommit": {"oid": "6f17767eb9f1965d010430441c7a41e9a08d82c9"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4ODMzOTU4", "url": "https://github.com/vaadin/flow/pull/8542#pullrequestreview-428833958", "createdAt": "2020-06-11T11:49:44Z", "commit": {"oid": "6f17767eb9f1965d010430441c7a41e9a08d82c9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5193faf38ec7ca8b7316d1fc078c58c3ac39d91", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/b5193faf38ec7ca8b7316d1fc078c58c3ac39d91", "committedDate": "2020-06-11T12:06:26Z", "message": "s/reloadConnectionUrl/reloadConnectionBaseUri/"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4ODQ4Njk2", "url": "https://github.com/vaadin/flow/pull/8542#pullrequestreview-428848696", "createdAt": "2020-06-11T12:13:22Z", "commit": {"oid": "b5193faf38ec7ca8b7316d1fc078c58c3ac39d91"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 490, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}