{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzOTk3MTAy", "number": 9280, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo0Mjo1N1rOE0V_mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo0Mjo1N1rOE0V_mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMzIxNzUyOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/sw.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo0Mjo1N1rOHsBCQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMTo0Mjo1N1rOHsBCQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkxNjM1Mg==", "bodyText": "This is the main change here.\nThe else block (which used to separately handle offline start situation) from previous if (OFFLINE_PATH_ENABLED) { is removed. The main condition is now on this line. Otherwise the contents that were inside the if is kept as is.", "url": "https://github.com/vaadin/flow/pull/9280#discussion_r515916352", "createdAt": "2020-11-02T11:42:57Z", "author": {"login": "Haprog"}, "path": "flow-server/src/main/resources/sw.ts", "diffHunk": "@@ -5,43 +5,33 @@ import {skipWaiting, clientsClaim} from 'workbox-core';\n import {matchPrecache, precacheAndRoute} from 'workbox-precaching';\n import {NavigationRoute, registerRoute} from 'workbox-routing';\n import {PrecacheEntry} from 'workbox-precaching/_types';\n-import {NetworkFirst, NetworkOnly} from 'workbox-strategies';\n+import {NetworkOnly} from 'workbox-strategies';\n \n skipWaiting();\n clientsClaim();\n \n-let navigationFallback;\n-// @ts-ignore: OFFLINE_PATH_ENABLED is defined by webpack.generated.js\n-if (OFFLINE_PATH_ENABLED) {\n-  // @ts-ignore\n-  const offlinePath = '/' + OFFLINE_PATH;\n-  const networkOnly = new NetworkOnly();\n-  navigationFallback = new NavigationRoute(async (params: any) => {\n-    // Use offlinePath fallback if offline was detected\n-    if (!self.navigator.onLine) {\n-      const offlinePathPrecachedResponse = await matchPrecache(offlinePath);\n-      if (offlinePathPrecachedResponse) {\n-        return offlinePathPrecachedResponse;\n-      }\n+const appShellPath = '/';\n+// @ts-ignore: OFFLINE_PATH_ENABLED and OFFLINE_PATH are defined by webpack.generated.js\n+const offlinePath = OFFLINE_PATH_ENABLED ? '/' + OFFLINE_PATH : appShellPath;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d6e29114d794b9a97044846c08dcc1df8b413bd"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2967, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}