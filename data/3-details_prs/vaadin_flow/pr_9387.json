{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NzAwNjQz", "number": 9387, "title": "Cherry picks for 5.0", "bodyText": "Merge, not squash", "createdAt": "2020-11-12T08:06:51Z", "url": "https://github.com/vaadin/flow/pull/9387", "merged": true, "mergeCommit": {"oid": "7f739e7b0d41df30f88a7c2a60dabdd27e8b164d"}, "closed": true, "closedAt": "2020-11-19T13:12:49Z", "author": {"login": "mshabarov"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbuQmGgH2gAyNTE5NzAwNjQzOmZjYzZhYTNkMDM4MGYzMzdiNThkMWM2ZmQ5YjE5Zjc0YWQxMTEwMDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeCiNEAFqTUzNDQyMjg3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fcc6aa3d0380f337b58d1c6fd9b19f74ad111001", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/fcc6aa3d0380f337b58d1c6fd9b19f74ad111001", "committedDate": "2020-11-12T08:26:57Z", "message": "chore: do not depend on commons.lang3 (#9271)\n\n(cherry picked from commit 427ca7840cb2ec4fea44e7bb81fef22cf9d41965)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0184d9de5589a325ec1a334b2b8f790d2080c699", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/0184d9de5589a325ec1a334b2b8f790d2080c699", "committedDate": "2020-11-12T08:27:08Z", "message": "chore: fix typo (#9272)\n\nFix typo in DataCommunicator::getDataProviderSize() javadoc.\n\n(cherry picked from commit 3fd66e0fb14b2fb7e11e92d198cc776f0fb14de5)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6038692f3dd4121bcdc5dc48491ebdbce9a1bfe", "author": {"user": {"login": "fluorumlabs", "name": "Artem Godin"}}, "url": "https://github.com/vaadin/flow/commit/a6038692f3dd4121bcdc5dc48491ebdbce9a1bfe", "committedDate": "2020-11-12T08:57:45Z", "message": "refactor: make web browser immutable (#9298)\n\n(cherry picked from commit 9f7cfa76fd21d8d18338237e6e325c1eeaf5c21b)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "386bd365591a585987707dc2405242c68b9b7451", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/386bd365591a585987707dc2405242c68b9b7451", "committedDate": "2020-11-12T09:12:44Z", "message": "fix: AppShellConfigurator is now considered for theme endpoint (#9332)\n\nAppShellConfigurator is now also considered when\nscanning for annotations and deciding theme.\n\nFixes #9110\n\n(cherry picked from commit 0ad3b215d2487bab11477e9379d8b063581bb656)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0af733e91dd41200a853b236fdc3d6d4387a0db9", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/0af733e91dd41200a853b236fdc3d6d4387a0db9", "committedDate": "2020-11-12T09:15:08Z", "message": "feat!: Theme annotation should be only on AppShellConfigurator (#9313)\n\nHaving the `@Theme` annotation on Flow views or router layouts will not be allowed anymore, it should be on `AppShellConfigurator` instead.\n\nFixes #9092\n\n(cherry picked from commit c5f531937fe99ae7b49b2a7310abfccfdc5e5bcc)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ce616c78558b1de9e37391e17a17372f2d0c5fa", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/8ce616c78558b1de9e37391e17a17372f2d0c5fa", "committedDate": "2020-11-12T09:18:32Z", "message": "test(TypeScript): ensure CSRF token is updated when session is invalidated (#9329)\n\n* test(TypeScript): ensure CSRF token is updated when session is invalidated\n\nFixes #9164\n\n* add log message\n\n(cherry picked from commit 5a385294ad6d12f81da3244d9941c0373587d6fa)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79203fe234fb1b2a67f47b211cce6c2f4a3b6b93", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/79203fe234fb1b2a67f47b211cce6c2f4a3b6b93", "committedDate": "2020-11-12T09:30:40Z", "message": "fix: increase threshold for performance test (#9381)\n\n(cherry picked from commit 529f7111729fe68c3c3190d12b22e3d41fcb84b6)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9bbd1576f4372495990b44783c3215b2519360a", "author": {"user": {"login": "haijian-vaadin", "name": "Haijian Wang"}}, "url": "https://github.com/vaadin/flow/commit/e9bbd1576f4372495990b44783c3215b2519360a", "committedDate": "2020-11-12T09:31:09Z", "message": "fix: hide loading indicator when endpoint call fails (#9380)\n\n(cherry picked from commit 676f7529f1eafeb188d3cf3bb87be86ea7722af6)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1002a803ca7bd492fb60c51721288c037d1a1608", "author": {"user": {"login": "haijian-vaadin", "name": "Haijian Wang"}}, "url": "https://github.com/vaadin/flow/commit/1002a803ca7bd492fb60c51721288c037d1a1608", "committedDate": "2020-11-12T09:33:11Z", "message": "feat: tree-shakeable ES imports for TS form validators (#9374)\n\n- Use tree-shakeable ES imports for TS form validators based on the latest version of validators lib.\n- Add missing `return` in the `submit()` method\n\n(cherry picked from commit 6608604b94af4f11013463dfdcf9521681ddb4e0)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebb2a888bceddd86fa0df0de89cdab70f692b86c", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/ebb2a888bceddd86fa0df0de89cdab70f692b86c", "committedDate": "2020-11-12T09:35:40Z", "message": "fix!: Use data view filter and sorting only to that component (#9315)\n\nIn-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.\n\nFixes #8655\n\n(cherry picked from commit 5b2d4d8259a2efb3de70ea9d38fda18c4979cac6)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5666cd61f3b39b0ffbe3b0f71d156b79d0283684", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/5666cd61f3b39b0ffbe3b0f71d156b79d0283684", "committedDate": "2020-11-12T09:38:13Z", "message": "fix: support Range requests with either start or end byte index omitted (#9368)\n\nSupports headers of the type Range: -123 and Range: 123-.\n\nFixes #9083.\n\n(cherry picked from commit ff28dd041ce8f477b4a0734c37540cec71ea524d)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c218eec07d87661575ad0d1843e72675e447542", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/9c218eec07d87661575ad0d1843e72675e447542", "committedDate": "2020-11-12T08:04:33Z", "message": "fix!: Use data view filter and sorting only to that component (#9315)\n\nIn-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.\n\nFixes #8655\n\n(cherry picked from commit 5b2d4d8259a2efb3de70ea9d38fda18c4979cac6)"}, "afterCommit": {"oid": "5666cd61f3b39b0ffbe3b0f71d156b79d0283684", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/5666cd61f3b39b0ffbe3b0f71d156b79d0283684", "committedDate": "2020-11-12T09:38:13Z", "message": "fix: support Range requests with either start or end byte index omitted (#9368)\n\nSupports headers of the type Range: -123 and Range: 123-.\n\nFixes #9083.\n\n(cherry picked from commit ff28dd041ce8f477b4a0734c37540cec71ea524d)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4OTUzOTgy", "url": "https://github.com/vaadin/flow/pull/9387#pullrequestreview-528953982", "createdAt": "2020-11-12T10:34:50Z", "commit": {"oid": "5666cd61f3b39b0ffbe3b0f71d156b79d0283684"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxMDozNDo1MFrOHx0k_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxMDozNDo1MFrOHx0k_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAwMzcwOA==", "bodyText": "Do not forget to remove this deprecated code someday.", "url": "https://github.com/vaadin/flow/pull/9387#discussion_r522003708", "createdAt": "2020-11-12T10:34:50Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/WebBrowser.java", "diffHunk": "@@ -296,7 +322,12 @@ public boolean isChromeOS() {\n      *\n      * @param request\n      *            the Vaadin request to read the information from\n+     *\n+     * @deprecated Use {@link #WebBrowser(VaadinRequest)} constructor instead\n+     *             and create a new instance of WebBrowser to apply the changes\n+     *             from given {@link VaadinRequest}.\n      */\n+    @Deprecated\n     public void updateRequestDetails(VaadinRequest request) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5666cd61f3b39b0ffbe3b0f71d156b79d0283684"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b40b5e34947baf69cf66425dc73abf60802d425", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/6b40b5e34947baf69cf66425dc73abf60802d425", "committedDate": "2020-11-16T12:55:20Z", "message": "fix!: move filter and sorting handling methods to util class (#9391)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7725740fb537610eebd57c92df5b5ba1779ed2c0", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/7725740fb537610eebd57c92df5b5ba1779ed2c0", "committedDate": "2020-11-18T11:23:28Z", "message": "fix: check if Url contains directory change in Dev Mode (#9392)\n\nChecks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.\n\n(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMzkwNDUy", "url": "https://github.com/vaadin/flow/pull/9387#pullrequestreview-533390452", "createdAt": "2020-11-18T12:21:58Z", "commit": {"oid": "7725740fb537610eebd57c92df5b5ba1779ed2c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMjoyMTo1OFrOH1rOFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMjoyMTo1OFrOH1rOFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjA0NDY5NQ==", "bodyText": "Define and throw a dedicated exception instead of using a generic one.", "url": "https://github.com/vaadin/flow/pull/9387#discussion_r526044695", "createdAt": "2020-11-18T12:21:58Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/HandlerHelper.java", "diffHunk": "@@ -176,4 +189,26 @@ public static String getCancelingRelativePath(String pathToCancel) {\n         return sb.toString();\n     }\n \n+    /**\n+     * Checks if the given URL path contains the directory change instruction\n+     * (dot-dot), taking into account possible double encoding in hexadecimal\n+     * format, which can be injected maliciously.\n+     *\n+     * @param path\n+     *            the URL path to be verified.\n+     * @return {@code true}, if the given path has a directory change\n+     *         instruction, {@code false} otherwise.\n+     */\n+    public static boolean isPathUnsafe(String path) {\n+        // Check that the path does not have '/../', '\\..\\', %5C..%5C,\n+        // %2F..%2F, nor '/..', '\\..', %5C.., %2F..\n+        try {\n+            path = URLDecoder.decode(path, StandardCharsets.UTF_8.name());\n+        } catch (UnsupportedEncodingException e) {\n+            throw new RuntimeException(\"An error occurred during decoding URL.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7725740fb537610eebd57c92df5b5ba1779ed2c0"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51580d6589aa5ebea613c1f8273b2931abada6b3", "author": {"user": {"login": "joheriks", "name": "Johannes Eriksson"}}, "url": "https://github.com/vaadin/flow/commit/51580d6589aa5ebea613c1f8273b2931abada6b3", "committedDate": "2020-11-18T13:17:52Z", "message": "chore: remove test module test-subcontext (#9394)\n\nThis module is subsumed by test-router-custom-context.\n\n(cherry picked from commit ea7d5c6ace26628da706bf335ec5bfef5e37df44)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "428b2e58c51669a1a6daf5e7e8887db86e04e411", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/428b2e58c51669a1a6daf5e7e8887db86e04e411", "committedDate": "2020-11-18T19:44:10Z", "message": "fix: preserve filter to not lose it between page requests (#9421)\n\nData communicator's filter removal, which has been introduced for components with internal filtering (like a ComboBox), may lead to filter loss during the items scrolling. This fix reverts the filter removal and the components should implement this feature on their side, if necessary.\n\nRelated-to: vaadin/vaadin-flow-components#388\n\n(cherry picked from commit f3be09a172b2b63a5e1875ae5a939b708cc1692c)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "808a8ee29035e8098ee5363ff1c439b01c8ed70c", "author": {"user": {"login": "manolo", "name": "Manuel Carrasco Mo\u00f1ino"}}, "url": "https://github.com/vaadin/flow/commit/808a8ee29035e8098ee5363ff1c439b01c8ed70c", "committedDate": "2020-11-19T08:34:14Z", "message": "test: remove Theme annotation from demo helpers module (#9395)\n\n(cherry picked from commit f1fcf4f51ff3e70f6056a02d042fa67345a2d9de)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NDA2OTAw", "url": "https://github.com/vaadin/flow/pull/9387#pullrequestreview-534406900", "createdAt": "2020-11-19T12:51:41Z", "commit": {"oid": "808a8ee29035e8098ee5363ff1c439b01c8ed70c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMjo1MTo0MVrOH2cwag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMjo1MTo0MVrOH2cwag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1NjI5OA==", "bodyText": "Is this now picked intentionally or not ?", "url": "https://github.com/vaadin/flow/pull/9387#discussion_r526856298", "createdAt": "2020-11-19T12:51:41Z", "author": {"login": "pleku"}, "path": "flow-tests/test-npm-only-features/test-npm-performance-regression/src/test/java/com/vaadin/flow/testnpmonlyfeatures/performanceregression/StartupPerformanceIT.java", "diffHunk": "@@ -55,7 +55,7 @@ public void devModeInitializerToWebpackUpIsBelowThreshold() {\n         final int thresholdMs = Boolean.getBoolean(\n                 System.getProperty(\"vaadin.useDeprecatedV14Bootstrapping\"))\n                         ? 5500\n-                        : 10500;\n+                        : 10700;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "808a8ee29035e8098ee5363ff1c439b01c8ed70c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NDA3OTgz", "url": "https://github.com/vaadin/flow/pull/9387#pullrequestreview-534407983", "createdAt": "2020-11-19T12:53:06Z", "commit": {"oid": "808a8ee29035e8098ee5363ff1c439b01c8ed70c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMjo1MzowN1rOH2czsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMjo1MzowN1rOH2czsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1NzEzOQ==", "bodyText": "Why was this picked to 5.0 ?", "url": "https://github.com/vaadin/flow/pull/9387#discussion_r526857139", "createdAt": "2020-11-19T12:53:07Z", "author": {"login": "pleku"}, "path": "flow-component-demo-helpers/src/main/java/com/vaadin/flow/demo/DemoView.java", "diffHunk": "@@ -47,7 +45,6 @@\n  * @since 1.0\n  */\n @Tag(Tag.DIV)\n-@Theme(Lumo.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "808a8ee29035e8098ee5363ff1c439b01c8ed70c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NDIyODc2", "url": "https://github.com/vaadin/flow/pull/9387#pullrequestreview-534422876", "createdAt": "2020-11-19T13:12:08Z", "commit": {"oid": "808a8ee29035e8098ee5363ff1c439b01c8ed70c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4832, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}