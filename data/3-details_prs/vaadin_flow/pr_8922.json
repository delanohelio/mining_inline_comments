{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MTgwNzgz", "number": 8922, "title": "Add HasHelper interface", "bodyText": "On this PR:\n\nAdd HasHelper interface to be used for field components that have a \"helper\" feature (such as TextField)\nThe interface contains getters and setters with default implementation for text and component APIs\nTests for the methods\n\nFix #8871", "createdAt": "2020-08-31T09:35:53Z", "url": "https://github.com/vaadin/flow/pull/8922", "merged": true, "mergeCommit": {"oid": "838acb828816f3d4cdc48ec10451b098c0a35fb2"}, "closed": true, "closedAt": "2020-09-02T05:48:51Z", "author": {"login": "DiegoCardoso"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEPMw5gH2gAyNDc2MTgwNzgzOjk3OGMyOWE4ZGRiYzFkYWIxMTU3OWEyNmY4OTBlNmMzYmE1N2ZiN2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE1TDrgFqTQ4MDQ5NjY5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f", "author": {"user": {"login": "DiegoCardoso", "name": "Diego Cardoso"}}, "url": "https://github.com/vaadin/flow/commit/978c29a8ddbc1dab11579a26f890e6c3ba57fb7f", "committedDate": "2020-08-31T09:15:27Z", "message": "Add HasHelper interface (#8532)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NDc1Mzkz", "url": "https://github.com/vaadin/flow/pull/8922#pullrequestreview-478475393", "createdAt": "2020-08-31T09:58:41Z", "commit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwOTo1ODo0MlrOHJyQEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMjoyODo0NVrOHJ2xbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAyMjU0NQ==", "bodyText": "Empty @since tag please", "url": "https://github.com/vaadin/flow/pull/8922#discussion_r480022545", "createdAt": "2020-08-31T09:58:42Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/HasHelper.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.component;\n+\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import com.vaadin.flow.dom.Element;\n+\n+/**\n+ * Mixin interface for field components that have helper text as property and\n+ * slots for inserting components.\n+ *\n+ * @author Vaadin Ltd", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MDAwMw==", "bodyText": "One might wonder, \"what is helper text\" as it is not that universal concept (yet?) compared to e.g. placeholder. At least could be unfamiliar for Java developers. So I think it would be good to add a clarification on \"how/when it might be shown on the component\"", "url": "https://github.com/vaadin/flow/pull/8922#discussion_r480080003", "createdAt": "2020-08-31T11:54:39Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/HasHelper.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.component;\n+\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import com.vaadin.flow.dom.Element;\n+\n+/**\n+ * Mixin interface for field components that have helper text as property and\n+ * slots for inserting components.\n+ *\n+ * @author Vaadin Ltd\n+ */\n+public interface HasHelper extends HasElement {\n+  /**\n+   * String used for the helper text.\n+   *\n+   * @return the {@code helperText} property from the web component\n+   */\n+  default String getHelperText() {\n+    return getElement().getProperty(\"helperText\");\n+  }\n+\n+  /**\n+   * <p>\n+   * String used for the helper text.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MDEwNw==", "bodyText": "And same for setHelperComponent", "url": "https://github.com/vaadin/flow/pull/8922#discussion_r480080107", "createdAt": "2020-08-31T11:54:51Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/HasHelper.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.component;\n+\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import com.vaadin.flow.dom.Element;\n+\n+/**\n+ * Mixin interface for field components that have helper text as property and\n+ * slots for inserting components.\n+ *\n+ * @author Vaadin Ltd\n+ */\n+public interface HasHelper extends HasElement {\n+  /**\n+   * String used for the helper text.\n+   *\n+   * @return the {@code helperText} property from the web component\n+   */\n+  default String getHelperText() {\n+    return getElement().getProperty(\"helperText\");\n+  }\n+\n+  /**\n+   * <p>\n+   * String used for the helper text.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MDAwMw=="}, "originalCommit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4OTIwNg==", "bodyText": "Unnecessary collecting to a list since it seems like there can only ever be one child with the slot=helper, so could go with findAny().ifPresent(...) instead", "url": "https://github.com/vaadin/flow/pull/8922#discussion_r480089206", "createdAt": "2020-08-31T12:14:25Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/HasHelper.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.component;\n+\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import com.vaadin.flow.dom.Element;\n+\n+/**\n+ * Mixin interface for field components that have helper text as property and\n+ * slots for inserting components.\n+ *\n+ * @author Vaadin Ltd\n+ */\n+public interface HasHelper extends HasElement {\n+  /**\n+   * String used for the helper text.\n+   *\n+   * @return the {@code helperText} property from the web component\n+   */\n+  default String getHelperText() {\n+    return getElement().getProperty(\"helperText\");\n+  }\n+\n+  /**\n+   * <p>\n+   * String used for the helper text.\n+   * </p>\n+   * \n+   * <p>\n+   * In case both {@link #setHelperText(String)} and\n+   * {@link #setHelperComponent(Component)} are used, only the element defined\n+   * by {@link #setHelperComponent(Component)} will be visible, regardless of\n+   * the order on which they are defined.\n+   * </p>\n+   *\n+   * @param helperText\n+   *            the String value to set\n+   */\n+  default void setHelperText(String helperText) {\n+    getElement().setProperty(\"helperText\", helperText);\n+  }\n+  /**\n+   * Adds the given component into helper slot of component, replacing any\n+   * existing helper component.\n+   * \n+   * @param component\n+   *            the component to set, can be {@code null} to remove existing\n+   *            helper component\n+   * \n+   * @see #setHelperText(String)\n+   */\n+  default void setHelperComponent(Component component) {\n+    getElement().getChildren()\n+      .filter(child -> \"helper\".equals(child.getAttribute(\"slot\")))\n+      .collect(Collectors.toList())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA5NTQ4NA==", "bodyText": "I don't think this is necessary for readability as it adds more lines, could just use mapping to the Stream with map(Element::get) before findFirst() and then return component.orElse(null);.", "url": "https://github.com/vaadin/flow/pull/8922#discussion_r480095484", "createdAt": "2020-08-31T12:26:45Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/java/com/vaadin/flow/component/HasHelper.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.component;\n+\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import com.vaadin.flow.dom.Element;\n+\n+/**\n+ * Mixin interface for field components that have helper text as property and\n+ * slots for inserting components.\n+ *\n+ * @author Vaadin Ltd\n+ */\n+public interface HasHelper extends HasElement {\n+  /**\n+   * String used for the helper text.\n+   *\n+   * @return the {@code helperText} property from the web component\n+   */\n+  default String getHelperText() {\n+    return getElement().getProperty(\"helperText\");\n+  }\n+\n+  /**\n+   * <p>\n+   * String used for the helper text.\n+   * </p>\n+   * \n+   * <p>\n+   * In case both {@link #setHelperText(String)} and\n+   * {@link #setHelperComponent(Component)} are used, only the element defined\n+   * by {@link #setHelperComponent(Component)} will be visible, regardless of\n+   * the order on which they are defined.\n+   * </p>\n+   *\n+   * @param helperText\n+   *            the String value to set\n+   */\n+  default void setHelperText(String helperText) {\n+    getElement().setProperty(\"helperText\", helperText);\n+  }\n+  /**\n+   * Adds the given component into helper slot of component, replacing any\n+   * existing helper component.\n+   * \n+   * @param component\n+   *            the component to set, can be {@code null} to remove existing\n+   *            helper component\n+   * \n+   * @see #setHelperText(String)\n+   */\n+  default void setHelperComponent(Component component) {\n+    getElement().getChildren()\n+      .filter(child -> \"helper\".equals(child.getAttribute(\"slot\")))\n+      .collect(Collectors.toList())\n+      .forEach(getElement()::removeChild);\n+\n+    if (component != null) {\n+        component.getElement().setAttribute(\"slot\", \"helper\");\n+        getElement().appendChild(component.getElement());\n+    }\n+  }\n+\n+  /**\n+   * Gets the component in the helper slot of this field.\n+   * \n+   * @return the helper component of this field, or {@code null} if no helper\n+   *         component has been set\n+   * @see #setHelperComponent(Component)\n+   */\n+  default Component getHelperComponent() {\n+    Optional<Element> element = getElement().getChildren()\n+      .filter(child -> \"helper\".equals(child.getAttribute(\"slot\")))\n+      .findFirst();\n+    if (element.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA5NjYyMg==", "bodyText": "Slightly nit-picking, but could validate the default values too so that those are not accidentally changed", "url": "https://github.com/vaadin/flow/pull/8922#discussion_r480096622", "createdAt": "2020-08-31T12:28:45Z", "author": {"login": "pleku"}, "path": "flow-server/src/test/java/com/vaadin/flow/component/HasHelperTest.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.component;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+public class HasHelperTest {\n+\n+    @Tag(\"div\")\n+    public static class HasHelperComponent extends Component implements HasHelper {\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "978c29a8ddbc1dab11579a26f890e6c3ba57fb7f"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "641e0403cc22a9da0f55c612aa529a9000f88ad8", "author": {"user": {"login": "DiegoCardoso", "name": "Diego Cardoso"}}, "url": "https://github.com/vaadin/flow/commit/641e0403cc22a9da0f55c612aa529a9000f88ad8", "committedDate": "2020-09-01T13:34:01Z", "message": "test: add tests for default values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3bfbcf40fa4025dc924e17aad18d07ed248a76b", "author": {"user": {"login": "DiegoCardoso", "name": "Diego Cardoso"}}, "url": "https://github.com/vaadin/flow/commit/f3bfbcf40fa4025dc924e17aad18d07ed248a76b", "committedDate": "2020-09-01T13:42:58Z", "message": "refactor: adjust code as suggested by reviewer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "203a27b39720df29a350800ffbe79b176f1f4652", "author": {"user": {"login": "DiegoCardoso", "name": "Diego Cardoso"}}, "url": "https://github.com/vaadin/flow/commit/203a27b39720df29a350800ffbe79b176f1f4652", "committedDate": "2020-09-01T13:49:50Z", "message": "doc: add more details for HasHelper#setHelperComponent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b28f88eb4d67ec3ba7d96df639bbe9d2123c585", "author": {"user": {"login": "DiegoCardoso", "name": "Diego Cardoso"}}, "url": "https://github.com/vaadin/flow/commit/2b28f88eb4d67ec3ba7d96df639bbe9d2123c585", "committedDate": "2020-09-01T14:29:00Z", "message": "refactor: remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNDk2Njk5", "url": "https://github.com/vaadin/flow/pull/8922#pullrequestreview-480496699", "createdAt": "2020-09-02T05:38:43Z", "commit": {"oid": "2b28f88eb4d67ec3ba7d96df639bbe9d2123c585"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 119, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}