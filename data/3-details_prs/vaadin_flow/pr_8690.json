{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTQzMDcy", "number": 8690, "title": "fix: render server errors and submitting state", "bodyText": "Fixes #8631", "createdAt": "2020-07-03T17:14:41Z", "url": "https://github.com/vaadin/flow/pull/8690", "merged": true, "mergeCommit": {"oid": "191e55170b250659c273c613b71a82e98d64ff7a"}, "closed": true, "closedAt": "2020-07-06T19:33:38Z", "author": {"login": "platosha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxWrLtgH2gAyNDQ0MTQzMDcyOmE5NDJkMGNhMGEyNDlkZWY0MTRhMThhNDJlNTQ3MGM2NjdlYmM3Y2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyPeJaAFqTQ0Mjk5MDE3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a942d0ca0a249def414a18a42e5470c667ebc7cd", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/a942d0ca0a249def414a18a42e5470c667ebc7cd", "committedDate": "2020-07-03T17:13:27Z", "message": "fix: render server errors and submitting state\n\nFixes #8631"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyODU2NjM2", "url": "https://github.com/vaadin/flow/pull/8690#pullrequestreview-442856636", "createdAt": "2020-07-06T08:04:45Z", "commit": {"oid": "a942d0ca0a249def414a18a42e5470c667ebc7cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwODowNDo0NVrOGtM7gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwODowNDo0NVrOGtM7gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDA1MDk0NQ==", "bodyText": "What's the main reason why reset(this.value) does not always call update() itself?\nIn this case it would be convenient to keep the one line reset(this.value) instead of implementing something similar to reset locally.\nWhat's the case when I would want to call reset() without calling update()? Should there be a short comment to explain this here?", "url": "https://github.com/vaadin/flow/pull/8690#discussion_r450050945", "createdAt": "2020-07-06T08:04:45Z", "author": {"login": "vlukashov"}, "path": "flow-client/src/main/resources/META-INF/resources/frontend/form/Binder.ts", "diffHunk": "@@ -109,18 +109,20 @@ export class Binder<T, M extends AbstractModel<T>> extends BinderNode<T, M> {\n       return await endpointMethod.call(this.context, this.value);\n     } catch (error) {\n       if (error.validationErrorData && error.validationErrorData.length) {\n-        const valueErrors:Array<ValueError<any>> = [];\n+        const valueErrors: Array<ValueError<any>> = [];\n         error.validationErrorData.forEach((data:any) => {\n           const res = /Object of type '(.+)' has invalid property '(.+)' with value '(.+)', validation error: '(.+)'/.exec(data.message);\n           const [property, value, message] = res ? res.splice(2) : [data.parameterName, undefined, data.message];\n           valueErrors.push({ property, value, validator: new ServerValidator(message), message });\n         });\n+        this.setErrorsWithDescendants(valueErrors);\n         error = new ValidationError(valueErrors);\n       }\n       throw (error);\n     } finally {\n       this[submittingSymbol] = false;\n-      this.reset(this.value);\n+      this.defaultValue = this.value;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a942d0ca0a249def414a18a42e5470c667ebc7cd"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42b5dc3d2795065029b6e99a461fbc23b34174a5", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/42b5dc3d2795065029b6e99a461fbc23b34174a5", "committedDate": "2020-07-06T10:16:54Z", "message": "Fix linter error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21ed3744a7f90e5d4ffe419c206d9a9921669467", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/21ed3744a7f90e5d4ffe419c206d9a9921669467", "committedDate": "2020-07-06T10:29:16Z", "message": "Add comments to code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyOTkwMTc0", "url": "https://github.com/vaadin/flow/pull/8690#pullrequestreview-442990174", "createdAt": "2020-07-06T11:23:48Z", "commit": {"oid": "21ed3744a7f90e5d4ffe419c206d9a9921669467"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 282, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}