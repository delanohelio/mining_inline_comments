{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MzUxNzEz", "number": 8585, "title": "Fix adding existing item", "bodyText": "If item is moved from before\nthe target item the item index\nwas wrong as the old item was removed.", "createdAt": "2020-06-18T09:37:46Z", "url": "https://github.com/vaadin/flow/pull/8585", "merged": true, "mergeCommit": {"oid": "bed7b4c503bd593da9321f7f6ff59a2c5816bf6f"}, "closed": true, "closedAt": "2020-06-18T11:14:07Z", "author": {"login": "caalador"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsbKCYgH2gAyNDM2MzUxNzEzOjdlMjRhMTNiZmE1NjQxOWFlY2E4YjA3NTZlNjY0YWEwNGU4YjAwNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsbo0HAFqTQzMzEzNzA3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7e24a13bfa56419aeca8b0756e664aa04e8b0073", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/7e24a13bfa56419aeca8b0756e664aa04e8b0073", "committedDate": "2020-06-18T09:37:09Z", "message": "Fix adding existing item\n\nIf item is moved from before\nthe target item the item index\nwas wrong as the old item was removed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMTI4OTM3", "url": "https://github.com/vaadin/flow/pull/8585#pullrequestreview-433128937", "createdAt": "2020-06-18T09:59:55Z", "commit": {"oid": "7e24a13bfa56419aeca8b0756e664aa04e8b0073"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOTo1OTo1NVrOGloYxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOTo1OTo1NVrOGloYxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjExMjE5Ng==", "bodyText": "Oh, such a silly mistake!\nCould we then replace the first call to getItemIndex with contains:\n        if (!contains(targetItemIndex, dataProvider)) {\n            throw new IllegalArgumentException(targetItemNotFoundErrorMessage);\n        }\n\nIt's easier to read.", "url": "https://github.com/vaadin/flow/pull/8585#discussion_r442112196", "createdAt": "2020-06-18T09:59:55Z", "author": {"login": "mshabarov"}, "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/AbstractListDataView.java", "diffHunk": "@@ -371,7 +371,8 @@ private void addItemOnTarget(\n          * the proper position towards to target item.\n          */\n         removeItemIfPresent(item, dataProvider);\n-        itemList.add(insertItemsIndexProvider.apply(targetItemIndex), item);\n+        itemList.add(insertItemsIndexProvider\n+                .apply(getItemIndex(target, dataProvider::getId)), item);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e24a13bfa56419aeca8b0756e664aa04e8b0073"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e63776687c1a5e920797e5da6e1f2cb475a9fc9", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/8e63776687c1a5e920797e5da6e1f2cb475a9fc9", "committedDate": "2020-06-18T10:08:59Z", "message": "Use contains."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMTM3MDc2", "url": "https://github.com/vaadin/flow/pull/8585#pullrequestreview-433137076", "createdAt": "2020-06-18T10:10:46Z", "commit": {"oid": "8e63776687c1a5e920797e5da6e1f2cb475a9fc9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 177, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}