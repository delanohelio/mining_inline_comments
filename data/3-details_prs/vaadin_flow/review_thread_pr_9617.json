{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDU1NTk4", "number": 9617, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo0ODoyMlrOFDW5QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo1MzozOVrOFDXCeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDY1MTUzOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-copy.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo0ODoyMlrOIC93AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOToyMjo1N1rOIC_TlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MTU2OQ==", "bodyText": "Would it be better if we would check for all the missing packages in a loop and output all of them at once ?\nSo if one is missing 5 of those (for example due to not reading our docs on how to package a reusable theme), they could know all of the missing things after one run instead of 5 ?", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r539981569", "createdAt": "2020-12-10T08:48:22Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-copy.js", "diffHunk": "@@ -66,7 +66,10 @@ function copyStaticAssets(themeName, themeProperties, projectStaticAssetsOutputF\n     const copyRules = assets[module];\n     Object.keys(copyRules).forEach((copyRule) => {\n       const nodeSources = path.resolve('node_modules/', module, copyRule);\n-      const files = glob.sync(nodeSources, {nodir: true});\n+      if(!fs.existsSync(path.resolve('node_modules/', module))) {\n+        throw Error(\"Missing '\" + module + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAwNTI2OA==", "bodyText": "done.", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r540005268", "createdAt": "2020-12-10T09:22:57Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-copy.js", "diffHunk": "@@ -66,7 +66,10 @@ function copyStaticAssets(themeName, themeProperties, projectStaticAssetsOutputF\n     const copyRules = assets[module];\n     Object.keys(copyRules).forEach((copyRule) => {\n       const nodeSources = path.resolve('node_modules/', module, copyRule);\n-      const files = glob.sync(nodeSources, {nodir: true});\n+      if(!fs.existsSync(path.resolve('node_modules/', module))) {\n+        throw Error(\"Missing '\" + module + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MTU2OQ=="}, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDY2MTUwOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-copy.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo1MDozNVrOIC98vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOToyNDoxN1rOIC_XGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzAzNw==", "bodyText": "Should this clarify that the module is needed as an CSS asset in theme.json so they don't have to wonder where does this module come from ?", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r539983037", "createdAt": "2020-12-10T08:50:35Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-copy.js", "diffHunk": "@@ -66,7 +66,10 @@ function copyStaticAssets(themeName, themeProperties, projectStaticAssetsOutputF\n     const copyRules = assets[module];\n     Object.keys(copyRules).forEach((copyRule) => {\n       const nodeSources = path.resolve('node_modules/', module, copyRule);\n-      const files = glob.sync(nodeSources, {nodir: true});\n+      if(!fs.existsSync(path.resolve('node_modules/', module))) {\n+        throw Error(\"Missing '\" + module + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAwNjE2OA==", "bodyText": "No the assets are of style:\n  \"assets\": {\n    \"@fortawesome/fontawesome-free\": {\n      \"svgs/regular/**\": \"fortawesome/icons\"\n    }\n  }\n\nso it's just the module that is missing. These are added when you want to use it from java.\nBut added clarification.", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r540006168", "createdAt": "2020-12-10T09:24:17Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-copy.js", "diffHunk": "@@ -66,7 +66,10 @@ function copyStaticAssets(themeName, themeProperties, projectStaticAssetsOutputF\n     const copyRules = assets[module];\n     Object.keys(copyRules).forEach((copyRule) => {\n       const nodeSources = path.resolve('node_modules/', module, copyRule);\n-      const files = glob.sync(nodeSources, {nodir: true});\n+      if(!fs.existsSync(path.resolve('node_modules/', module))) {\n+        throw Error(\"Missing '\" + module + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzAzNw=="}, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDY2Mjk4OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo1MDo1MlrOIC99iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOTozNDo0OVrOIC_1eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzI0MQ==", "bodyText": "Same comment here, should we first collect all of the missing packages and output them once ?", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r539983241", "createdAt": "2020-12-10T08:50:52Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "diffHunk": "@@ -83,6 +84,11 @@ function generateThemeFile(themeFolder, themeName, themeProperties) {\n   let i = 0;\n   if (themeProperties.importCss) {\n     themeProperties.importCss.forEach((cssPath) => {\n+      const nodeSources = path.resolve('node_modules/', cssPath);\n+      if(!fs.existsSync(nodeSources)) {\n+        throw Error(\"Missing resource '\" + cssPath + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxMzk0NA==", "bodyText": "done", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r540013944", "createdAt": "2020-12-10T09:34:49Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "diffHunk": "@@ -83,6 +84,11 @@ function generateThemeFile(themeFolder, themeName, themeProperties) {\n   let i = 0;\n   if (themeProperties.importCss) {\n     themeProperties.importCss.forEach((cssPath) => {\n+      const nodeSources = path.resolve('node_modules/', cssPath);\n+      if(!fs.existsSync(nodeSources)) {\n+        throw Error(\"Missing resource '\" + cssPath + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzI0MQ=="}, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDY3NTE0OnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo1MzozOVrOIC-Eng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOTozNDo1M1rOIC_1pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4NTA1NA==", "bodyText": "Same, should this mention what this resource is and where is it coming from, like \"Missing imported css file  imported by theme.json. Install ...\"", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r539985054", "createdAt": "2020-12-10T08:53:39Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "diffHunk": "@@ -83,6 +84,11 @@ function generateThemeFile(themeFolder, themeName, themeProperties) {\n   let i = 0;\n   if (themeProperties.importCss) {\n     themeProperties.importCss.forEach((cssPath) => {\n+      const nodeSources = path.resolve('node_modules/', cssPath);\n+      if(!fs.existsSync(nodeSources)) {\n+        throw Error(\"Missing resource '\" + cssPath + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxMzk5MQ==", "bodyText": "added", "url": "https://github.com/vaadin/flow/pull/9617#discussion_r540013991", "createdAt": "2020-12-10T09:34:53Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "diffHunk": "@@ -83,6 +84,11 @@ function generateThemeFile(themeFolder, themeName, themeProperties) {\n   let i = 0;\n   if (themeProperties.importCss) {\n     themeProperties.importCss.forEach((cssPath) => {\n+      const nodeSources = path.resolve('node_modules/', cssPath);\n+      if(!fs.existsSync(nodeSources)) {\n+        throw Error(\"Missing resource '\" + cssPath + \"'. Install package by adding a @NpmPackage annotation or install it using 'npm/pnpm i'\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4NTA1NA=="}, "originalCommit": {"oid": "d43242e419cbae9b032563a20d583770f7b4db6f"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2911, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}