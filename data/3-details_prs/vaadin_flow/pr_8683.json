{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNzY0NzA4", "number": 8683, "title": "Clear client-side validation and visits on .reset() and .clear()", "bodyText": "Fixes #8619", "createdAt": "2020-07-02T22:16:36Z", "url": "https://github.com/vaadin/flow/pull/8683", "merged": true, "mergeCommit": {"oid": "0387c12a475c76d8819be6c678233b097974a1a8"}, "closed": true, "closedAt": "2020-07-03T12:41:41Z", "author": {"login": "platosha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxGZSEgH2gAyNDQzNzY0NzA4OjFiN2ZhYTc0NjNkOTJiMTVmMGJhODlhMmNmYjNiY2JkMzllMjk0ZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxRwMiAFqTQ0MjM0OTM4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6", "committedDate": "2020-07-02T22:15:25Z", "message": "Clear client-side validation and visits on .reset() and .clear()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTY1MTc3", "url": "https://github.com/vaadin/flow/pull/8683#pullrequestreview-442165177", "createdAt": "2020-07-03T06:05:18Z", "commit": {"oid": "1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjowNToxOFrOGsks8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjowNToxOFrOGsks8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTM5MTg1OQ==", "bodyText": "It looks like the defaultValue setter is going to be called twice: once at this.defaultValue = this[emptyValueSymbol], and then second time at this.reset() -> this.defaultValue = this[defaultValueSymbol]. Is this intentional?", "url": "https://github.com/vaadin/flow/pull/8683#discussion_r449391859", "createdAt": "2020-07-03T06:05:18Z", "author": {"login": "vlukashov"}, "path": "flow-client/src/main/resources/META-INF/resources/frontend/form/Binder.ts", "diffHunk": "@@ -78,15 +83,14 @@ export class Binder<T, M extends AbstractModel<T>> extends BinderNode<T, M> {\n     this.updateValidation();\n   }\n \n-  reset(defaultValue?: T) {\n-    if (defaultValue !== undefined) {\n-      this.defaultValue = defaultValue;\n-    }\n+  reset(defaultValue: T = this[defaultValueSymbol]) {\n+    this.defaultValue = defaultValue;\n     this.value = this.defaultValue;\n   }\n \n   clear() {\n-    this.value = this[emptyValueSymbol];\n+    this.defaultValue = this[emptyValueSymbol];\n+    this.reset();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86989289c9d80ea65b008df7ec4786d52b33b70c", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/86989289c9d80ea65b008df7ec4786d52b33b70c", "committedDate": "2020-07-03T10:19:01Z", "message": "Prevent extra updates on .clear()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42b46dadfdf4b261c2db4161d2dfe7ce6c216d0f", "author": {"user": {"login": "platosha", "name": "Anton Platonov"}}, "url": "https://github.com/vaadin/flow/commit/42b46dadfdf4b261c2db4161d2dfe7ce6c216d0f", "committedDate": "2020-07-03T10:52:33Z", "message": "Remove extra defaultValue setter call on clear()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzQ5Mzg0", "url": "https://github.com/vaadin/flow/pull/8683#pullrequestreview-442349384", "createdAt": "2020-07-03T11:29:24Z", "commit": {"oid": "42b46dadfdf4b261c2db4161d2dfe7ce6c216d0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 278, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}