{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMjA1MDg2", "number": 9418, "title": "feat: Theme component with app theme.", "bodyText": "Added the feature that you can theme components\nwith the app theme by creating a css file in\n'frontend/theme/myTheme/components' with the\ncomponent tag name e.g. 'my-field'  should have 'my-field.css'\nFixes #9348", "createdAt": "2020-11-17T07:35:37Z", "url": "https://github.com/vaadin/flow/pull/9418", "merged": true, "mergeCommit": {"oid": "62e1e2693c773c1368ab0e716c74680f76b690d5"}, "closed": true, "closedAt": "2020-11-24T08:18:30Z", "author": {"login": "caalador"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddURvVgH2gAyNTIyMjA1MDg2OmE1OTA3NTNjNWJjNzYwZWI3Zjg5ZGU2NmUwMmIzMTFiOTJmZTEwYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdflTwKgFqTUzNzE4NzA3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a590753c5bc760eb7f89de66e02b311b92fe10c4", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/a590753c5bc760eb7f89de66e02b311b92fe10c4", "committedDate": "2020-11-17T07:18:31Z", "message": "feat: Theme component with app theme.\n\nAdded the feature that you can theme components\nwith the app theme by creating a css file in\n'frontend/theme/myTheme/components' with the\ncomponent tag name e.g. 'my-field'  should have 'my-field.css'\n\nFixes #9348"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMTMxOTgw", "url": "https://github.com/vaadin/flow/pull/9418#pullrequestreview-532131980", "createdAt": "2020-11-17T08:41:18Z", "commit": {"oid": "a590753c5bc760eb7f89de66e02b311b92fe10c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwODo0MToxOFrOH0p8hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwODo0MToxOFrOH0p8hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDk3NTIzNw==", "bodyText": "Would it be good to add a test for lit template as well because it replaces polymer in the future?", "url": "https://github.com/vaadin/flow/pull/9418#discussion_r524975237", "createdAt": "2020-11-17T08:41:18Z", "author": {"login": "knoobie"}, "path": "flow-tests/test-themes/frontend/my-field.js", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import '@vaadin/vaadin-lumo-styles/color.js';\n+import '@vaadin/vaadin-lumo-styles/sizing.js';\n+import '@vaadin/vaadin-lumo-styles/spacing.js';\n+import '@vaadin/vaadin-lumo-styles/style.js';\n+import '@vaadin/vaadin-lumo-styles/typography.js';\n+import '@vaadin/vaadin-lumo-styles/mixins/required-field.js';\n+import '@vaadin/vaadin-lumo-styles/font-icons.js';\n+import '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\n+import { html } from '@polymer/polymer/lib/utils/html-tag.js';\n+\n+const $_documentContainer = html`<dom-module id=\"lumo-text-field\" theme-for=\"my-field\">\n+  <template>\n+    <style include=\"lumo-required-field lumo-field-button\">\n+      :host {\n+        --lumo-text-field-size: var(--lumo-size-m);\n+        color: var(--lumo-body-text-color);\n+        font-size: var(--lumo-font-size-m);\n+        font-family: var(--lumo-font-family);\n+        -webkit-font-smoothing: antialiased;\n+        -moz-osx-font-smoothing: grayscale;\n+        -webkit-tap-highlight-color: transparent;\n+        padding: var(--lumo-space-xs) 0;\n+        display: inline-flex;\n+        outline: none;\n+      }\n+\n+      :host::before {\n+        height: var(--lumo-text-field-size);\n+        box-sizing: border-box;\n+        display: inline-flex;\n+        align-items: center;\n+        content: \"\\\\2003\";\n+        width: 0;\n+        display: inline-block;\n+        /* Size and position this element on the same vertical position as the input-field element\n+           to make vertical align for the host element work as expected */\n+      }\n+\n+      :host([focused]:not([readonly])) [part=\"label\"] {\n+        color: var(--lumo-primary-text-color);\n+      }\n+\n+      [part=\"value\"],\n+      [part=\"input-field\"] ::slotted(input),\n+      [part=\"input-field\"] ::slotted(textarea),\n+      /* Slotted by vaadin-select-text-field */\n+      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n+        cursor: inherit;\n+        min-height: var(--lumo-text-field-size);\n+        padding: 0 0.25em;\n+        --_lumo-text-field-overflow-mask-image: linear-gradient(to left, transparent, #000 1.25em);\n+        -webkit-mask-image: var(--_lumo-text-field-overflow-mask-image);\n+      }\n+\n+      [part=\"value\"]:focus,\n+      :host([focused]) [part=\"input-field\"] ::slotted(input),\n+      :host([focused]) [part=\"input-field\"] ::slotted(textarea) {\n+        -webkit-mask-image: none;\n+        mask-image: none;\n+      }\n+\n+      [part=\"input-field\"] {\n+        border-radius: var(--lumo-border-radius);\n+        background-color: var(--lumo-contrast-10pct);\n+        padding: 0 calc(0.375em + var(--lumo-border-radius) / 4 - 1px);\n+        font-weight: 500;\n+        line-height: 1;\n+        position: relative;\n+        cursor: text;\n+        box-sizing: border-box;\n+      }\n+\n+      /* Used for hover and activation effects */\n+      [part=\"input-field\"]::after {\n+        content: \"\";\n+        position: absolute;\n+        top: 0;\n+        right: 0;\n+        bottom: 0;\n+        left: 0;\n+        border-radius: inherit;\n+        pointer-events: none;\n+        background-color: var(--lumo-contrast-50pct);\n+        opacity: 0;\n+        transition: transform 0.15s, opacity 0.2s;\n+        transform-origin: 100% 0;\n+      }\n+      \n+      /* Slotted content */\n+\n+      [part=\"input-field\"] ::slotted(:not([part]):not(iron-icon):not(input):not(textarea)) {\n+        color: var(--lumo-secondary-text-color);\n+        font-weight: 400;\n+      }\n+      \n+      .my-field-container {\n+        display: flex;\n+        flex-direction: column;\n+        min-width: 100%;\n+        max-width: 100%;\n+        width: var(--vaadin-text-field-default-width, 12em);\n+      }\n+\n+      [part=\"input-field\"] {\n+        display: flex;\n+        align-items: center;\n+        flex: auto;\n+      }\n+\n+      .my-field-container [part=\"input-field\"] {\n+        flex-grow: 0;\n+      }\n+\n+      /* Reset the native input styles */\n+      [part=\"value\"],\n+      [part=\"input-field\"] ::slotted(input),\n+      [part=\"input-field\"] ::slotted(textarea) {\n+        -webkit-appearance: none;\n+        -moz-appearance: none;\n+        outline: none;\n+        margin: 0;\n+        padding: 0;\n+        border: 0;\n+        border-radius: 0;\n+        min-width: 0;\n+        font: inherit;\n+        font-size: 1em;\n+        line-height: normal;\n+        color: inherit;\n+        background-color: transparent;\n+        /* Disable default invalid style in Firefox */\n+        box-shadow: none;\n+      }\n+\n+      [part=\"input-field\"] ::slotted(*) {\n+        flex: none;\n+      }\n+\n+      [part=\"value\"],\n+      [part=\"input-field\"] ::slotted(input),\n+      [part=\"input-field\"] ::slotted(textarea),\n+      /* Slotted by vaadin-select-text-field */\n+      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n+        flex: auto;\n+        white-space: nowrap;\n+        overflow: hidden;\n+        width: 100%;\n+        height: 100%;\n+      }\n+\n+      [part=\"input-field\"] ::slotted(textarea) {\n+        resize: none;\n+      }\n+\n+      [part=\"value\"]::-ms-clear,\n+      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n+        display: none;\n+      }\n+    </style>\n+  </template>\n+</dom-module>`;\n+\n+document.head.appendChild($_documentContainer.content);\n+\n+import { PolymerElement } from '@polymer/polymer/polymer-element.js';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a590753c5bc760eb7f89de66e02b311b92fe10c4"}, "originalPosition": 181}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzU5MTA2", "url": "https://github.com/vaadin/flow/pull/9418#pullrequestreview-532359106", "createdAt": "2020-11-17T13:29:27Z", "commit": {"oid": "a590753c5bc760eb7f89de66e02b311b92fe10c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzoyOToyN1rOH00xPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzoyOToyN1rOH00xPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE1MjU3Mg==", "bodyText": "Not sure if this is intentional, but it will conflict with the official Vaadin Text Field component style sheet, if both are imported to the same app. Prefer using unique IDs instead.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const $_documentContainer = html`<dom-module id=\"lumo-text-field\" theme-for=\"my-field\">\n          \n          \n            \n            const $_documentContainer = html`<dom-module id=\"my-text-field\" theme-for=\"my-field\">", "url": "https://github.com/vaadin/flow/pull/9418#discussion_r525152572", "createdAt": "2020-11-17T13:29:27Z", "author": {"login": "jouni"}, "path": "flow-tests/test-themes/frontend/my-field.js", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import '@vaadin/vaadin-lumo-styles/color.js';\n+import '@vaadin/vaadin-lumo-styles/sizing.js';\n+import '@vaadin/vaadin-lumo-styles/spacing.js';\n+import '@vaadin/vaadin-lumo-styles/style.js';\n+import '@vaadin/vaadin-lumo-styles/typography.js';\n+import '@vaadin/vaadin-lumo-styles/mixins/required-field.js';\n+import '@vaadin/vaadin-lumo-styles/font-icons.js';\n+import '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\n+import { html } from '@polymer/polymer/lib/utils/html-tag.js';\n+\n+const $_documentContainer = html`<dom-module id=\"lumo-text-field\" theme-for=\"my-field\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a590753c5bc760eb7f89de66e02b311b92fe10c4"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "887705a1bfd9f042da84f74575f395f55eac72d4", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/887705a1bfd9f042da84f74575f395f55eac72d4", "committedDate": "2020-11-18T05:07:38Z", "message": "Merge branch 'master' into issues/9348_component_theme\n\n# Conflicts:\n#\tflow-server/src/main/resources/plugins/application-theme-plugin/package.json\n#\tflow-tests/test-themes/src/test/java/com/vaadin/flow/uitest/ui/theme/ThemeIT.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fcd20872effb2377147390c32502f2099a4d1f2", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/2fcd20872effb2377147390c32502f2099a4d1f2", "committedDate": "2020-11-18T11:36:02Z", "message": "Use npm components for theme test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MzU3ODI5", "url": "https://github.com/vaadin/flow/pull/9418#pullrequestreview-536357829", "createdAt": "2020-11-23T10:50:27Z", "commit": {"oid": "2fcd20872effb2377147390c32502f2099a4d1f2"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMDo1MDoyN1rOH4IHTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMDo1MDoyN1rOH4IHTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYxNTI0NA==", "bodyText": "While not entirely connected to this PR, we should probably document this thing a bit, as it is quite unclear what does this applyTheme do and when it is used. At least when just reading the code again after I while, it makes me go wat, what is this for and why ...", "url": "https://github.com/vaadin/flow/pull/9418#discussion_r528615244", "createdAt": "2020-11-23T10:50:27Z", "author": {"login": "pleku"}, "path": "flow-server/src/main/resources/plugins/application-theme-plugin/theme-generator.js", "diffHunk": "@@ -77,6 +107,10 @@ function generateThemeFile(themeFolder, themeName) {\n     ${globalCssCode.join('')}\n     target['${globalCssFlag}'] = true;\n   }\n+  if (!document['${componentCssFlag}']) {\n+    ${componentCssCode.join('')}\n+    document['${componentCssFlag}'] = true;\n+  }\n }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fcd20872effb2377147390c32502f2099a4d1f2"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3530386142d8e98bc8032bec05734f8f9c20b20", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/c3530386142d8e98bc8032bec05734f8f9c20b20", "committedDate": "2020-11-23T11:09:40Z", "message": "Merge branch 'master' into issues/9348_component_theme\n\n# Conflicts:\n#\tflow-tests/test-themes/src/main/java/com/vaadin/flow/uitest/ui/theme/ThemeView.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0da67d4b82fb375e5bfffb95e415aa179a8d3ab", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/b0da67d4b82fb375e5bfffb95e415aa179a8d3ab", "committedDate": "2020-11-23T11:12:38Z", "message": "add comment for if"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NDQwMzUx", "url": "https://github.com/vaadin/flow/pull/9418#pullrequestreview-536440351", "createdAt": "2020-11-23T12:47:58Z", "commit": {"oid": "b0da67d4b82fb375e5bfffb95e415aa179a8d3ab"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7501575886343bd216ed8e80e25b78542b28e561", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/7501575886343bd216ed8e80e25b78542b28e561", "committedDate": "2020-11-23T12:55:38Z", "message": "Fix merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2186ffffa732942cbb6d248c1d7a31d27ebdc4c", "author": {"user": {"login": "caalador", "name": null}}, "url": "https://github.com/vaadin/flow/commit/a2186ffffa732942cbb6d248c1d7a31d27ebdc4c", "committedDate": "2020-11-24T06:24:12Z", "message": "Merge branch 'master' into issues/9348_component_theme\n\n# Conflicts:\n#\tflow-server/src/main/resources/plugins/application-theme-plugin/package.json\n#\tflow-tests/test-themes/src/main/java/com/vaadin/flow/uitest/ui/theme/ThemeView.java\n#\tflow-tests/test-themes/src/test/java/com/vaadin/flow/uitest/ui/theme/ThemeIT.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MTg3MDc3", "url": "https://github.com/vaadin/flow/pull/9418#pullrequestreview-537187077", "createdAt": "2020-11-24T08:16:57Z", "commit": {"oid": "a2186ffffa732942cbb6d248c1d7a31d27ebdc4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4865, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}