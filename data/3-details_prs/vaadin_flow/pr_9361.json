{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NDYyMjUx", "number": 9361, "title": "[OSGi] - Cleanup BudleActivator and Service registration, Update bnd and osgi deps", "bodyText": "cleanup BudleActivator\ncleanup Service registration\nuse declarative services\nupdate bnd\nupdate osgi deps\nbase it-test", "createdAt": "2020-11-10T12:42:42Z", "url": "https://github.com/vaadin/flow/pull/9361", "merged": true, "mergeCommit": {"oid": "1df5b02cad7b5a9eaa84149ea8d702ed1f4a2a43"}, "closed": true, "closedAt": "2020-11-11T10:04:17Z", "author": {"login": "stbischof"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbIq4SAH2gAyNTE4NDYyMjUxOjdhOTlhNmNlNmRmNDExZWFjMmQ4YWE5NjA1NGI1MGY2YTA4MDBlNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbbCZrgFqTUyODAyODE0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7a99a6ce6df411eac2d8aa96054b50f6a0800e59", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/7a99a6ce6df411eac2d8aa96054b50f6a0800e59", "committedDate": "2020-11-10T12:39:16Z", "message": "update bnd-version\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "405662d9fb09e4879b4e4be8abbe205cdf3f148d", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/405662d9fb09e4879b4e4be8abbe205cdf3f148d", "committedDate": "2020-11-10T12:58:45Z", "message": "update osgi dependency and version\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06ed6c7ab69c9c236592107e05b417b3ba4db9b9", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/06ed6c7ab69c9c236592107e05b417b3ba4db9b9", "committedDate": "2020-11-10T17:20:42Z", "message": "fix mocking osgi-classes\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3545d95fd9150c2b8c0fc1cc66aaa8c2f94627c5", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/3545d95fd9150c2b8c0fc1cc66aaa8c2f94627c5", "committedDate": "2020-11-10T18:00:23Z", "message": "OSGiResourceProvider uses @Component to declare the service\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7e23014373990379268a6d950ada028af496ac4", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/a7e23014373990379268a6d950ada028af496ac4", "committedDate": "2020-11-10T18:08:29Z", "message": "VaadinBundleTracker uses @Component to declare the service\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15db6de8ea6b4ea689bcd5d207f2cd1004c1e258", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/15db6de8ea6b4ea689bcd5d207f2cd1004c1e258", "committedDate": "2020-11-10T18:09:40Z", "message": "Remove `empty` BundleActivator\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "397129912b7d4b5d85ce2e07c10587b95ebcc57f", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/397129912b7d4b5d85ce2e07c10587b95ebcc57f", "committedDate": "2020-11-10T18:12:14Z", "message": "use constants for osgi.http.whiteboard.servlet.pattern\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccfe47e496b1b3a7278e25c9f8bfa6ef85a0c553", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/ccfe47e496b1b3a7278e25c9f8bfa6ef85a0c553", "committedDate": "2020-11-10T18:40:27Z", "message": "fix unregister Service PolymerPublishedEventRpcHandler\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/173f672744bf1d6c8feaa16af9fb3262af3059fe", "committedDate": "2020-11-10T19:16:58Z", "message": "registers PolymerPublishedEventRpcHandler as a declarative service\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ec425e645233be13db30c2ee4e81cadf0bb43be", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/2ec425e645233be13db30c2ee4e81cadf0bb43be", "committedDate": "2020-11-10T18:43:31Z", "message": "registers PolymerPublishedEventRpcHandler as a declarative service\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}, "afterCommit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/173f672744bf1d6c8feaa16af9fb3262af3059fe", "committedDate": "2020-11-10T19:16:58Z", "message": "registers PolymerPublishedEventRpcHandler as a declarative service\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTcyNzIy", "url": "https://github.com/vaadin/flow/pull/9361#pullrequestreview-527572722", "createdAt": "2020-11-10T20:15:50Z", "commit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDoxNTo1MFrOHwuAEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDoxNTo1MFrOHwuAEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg0NzM3OQ==", "bodyText": "Remove this call from a constructor to the overridable \"open\" method.", "url": "https://github.com/vaadin/flow/pull/9361#discussion_r520847379", "createdAt": "2020-11-10T20:15:50Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java", "diffHunk": "@@ -99,15 +105,26 @@ protected void doGet(HttpServletRequest req, HttpServletResponse resp)\n \n     /**\n      * Creates a new instance of a bundle tracker.\n-     *\n+     * OSGi ServiceComponentRuntime injects the BundleContext because of the @Activate\n      * @param context\n      *            the {@code BundleContext} against which the tracking is done\n      */\n+    @Activate\n     public VaadinBundleTracker(BundleContext context) {\n         super(context, Bundle.ACTIVE | Bundle.RESOLVED, null);\n         flowServerBundle = context.getBundle();\n+        open();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTcyNzQx", "url": "https://github.com/vaadin/flow/pull/9361#pullrequestreview-527572741", "createdAt": "2020-11-10T20:15:51Z", "commit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDoxNTo1MVrOHwuAIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDoxNTo1MVrOHwuAIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg0NzM5Mg==", "bodyText": "Replace the synchronized class \"Hashtable\" by an unsynchronized one such as \"HashMap\".", "url": "https://github.com/vaadin/flow/pull/9361#discussion_r520847392", "createdAt": "2020-11-10T20:15:51Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java", "diffHunk": "@@ -145,7 +162,7 @@ public Bundle addingBundle(Bundle bundle, BundleEvent event) {\n \n     private void registerPushResources(Bundle pushBundle) {\n         Hashtable<String, Object> properties = new Hashtable<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTcyNzUz", "url": "https://github.com/vaadin/flow/pull/9361#pullrequestreview-527572753", "createdAt": "2020-11-10T20:15:52Z", "commit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDoxNTo1MlrOHwuAMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDoxNTo1MlrOHwuAMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg0NzQxMA==", "bodyText": "Remove this use of \"DeprecatedPolymerPublishedEventHandler\"; it is deprecated.", "url": "https://github.com/vaadin/flow/pull/9361#discussion_r520847410", "createdAt": "2020-11-10T20:15:52Z", "author": {"login": "vaadin-bot"}, "path": "flow-polymer-template/src/main/java/com/vaadin/flow/component/polymertemplate/rpc/PolymerPublishedEventRpcHandler.java", "diffHunk": "@@ -31,8 +32,11 @@\n /**\n  * Polymer utilitiy class for handling polymer rpc events for @EventHandler.\n  *\n+ * Registers {@link PolymerPublishedEventRpcHandler} as a service to make it\n+ * available in {@link Lookup} in an OSGi container. *\n  * @since\n  */\n+@org.osgi.service.component.annotations.Component(immediate = true)\n public class PolymerPublishedEventRpcHandler\n         implements DeprecatedPolymerPublishedEventHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b1e8c92eca7f58a7a1227abc5bd0ec913f3c870", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/4b1e8c92eca7f58a7a1227abc5bd0ec913f3c870", "committedDate": "2020-11-10T22:08:32Z", "message": "Merge pull request #1 from bipolis/osgi-master-tests\n\nosgi test infrastructure and basic test"}, "afterCommit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/vaadin/flow/commit/173f672744bf1d6c8feaa16af9fb3262af3059fe", "committedDate": "2020-11-10T19:16:58Z", "message": "registers PolymerPublishedEventRpcHandler as a declarative service\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDI4MTQw", "url": "https://github.com/vaadin/flow/pull/9361#pullrequestreview-528028140", "createdAt": "2020-11-11T10:02:05Z", "commit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMDowMjowNlrOHxGWfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMDowMjowNlrOHxGWfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI0NjMzNA==", "bodyText": "No need to use FQN. Just add an import.", "url": "https://github.com/vaadin/flow/pull/9361#discussion_r521246334", "createdAt": "2020-11-11T10:02:06Z", "author": {"login": "denis-anisimov"}, "path": "flow-polymer-template/src/main/java/com/vaadin/flow/component/polymertemplate/rpc/PolymerPublishedEventRpcHandler.java", "diffHunk": "@@ -31,8 +32,11 @@\n /**\n  * Polymer utilitiy class for handling polymer rpc events for @EventHandler.\n  *\n+ * Registers {@link PolymerPublishedEventRpcHandler} as a service to make it\n+ * available in {@link Lookup} in an OSGi container. *\n  * @since\n  */\n+@org.osgi.service.component.annotations.Component(immediate = true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "173f672744bf1d6c8feaa16af9fb3262af3059fe"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4818, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}