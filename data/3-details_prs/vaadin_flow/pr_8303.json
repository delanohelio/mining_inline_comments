{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MzAzOTEz", "number": 8303, "title": "Take DataView concept into use #141", "bodyText": "See dataview implementation in vaadin-checkbox-flow project\n\nThis change is\u2002", "createdAt": "2020-05-11T19:39:26Z", "url": "https://github.com/vaadin/flow/pull/8303", "merged": true, "mergeCommit": {"oid": "97da10b21de9065c2ac6f7b2489c4f5063fe2606"}, "closed": true, "closedAt": "2020-05-18T07:27:01Z", "author": {"login": "mshabarov"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgUUh3gH2gAyNDE2MzAzOTEzOjQzZWQxYzU0ZTcxYWNlZWFkYTg2OTY3ZGJiNmExN2JiMzU2OGMyOGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciasoHgFqTQxMzMzMTk1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "43ed1c54e71aceeada86967dbb6a17bb3568c28a", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/43ed1c54e71aceeada86967dbb6a17bb3568c28a", "committedDate": "2020-05-11T18:52:11Z", "message": "Sort Comparator added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0819caa89ad50177faab1e3d0315015ca46c4e03", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/0819caa89ad50177faab1e3d0315015ca46c4e03", "committedDate": "2020-05-11T19:37:04Z", "message": "Checkbox submodule added"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzQyNzU3", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-409742757", "createdAt": "2020-05-12T06:46:59Z", "commit": {"oid": "0819caa89ad50177faab1e3d0315015ca46c4e03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzQyOTM3", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-409742937", "createdAt": "2020-05-12T06:47:18Z", "commit": {"oid": "0819caa89ad50177faab1e3d0315015ca46c4e03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzgyNjY5", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-409782669", "createdAt": "2020-05-12T07:48:16Z", "commit": {"oid": "0819caa89ad50177faab1e3d0315015ca46c4e03"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Nzg2NjE3", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-409786617", "createdAt": "2020-05-12T07:53:39Z", "commit": {"oid": "0819caa89ad50177faab1e3d0315015ca46c4e03"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Nzg2ODMz", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-409786833", "createdAt": "2020-05-12T07:53:58Z", "commit": {"oid": "0819caa89ad50177faab1e3d0315015ca46c4e03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a2573d99e17d54841806dcce272d1d02e3fa390", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/2a2573d99e17d54841806dcce272d1d02e3fa390", "committedDate": "2020-05-12T08:42:10Z", "message": "Sonar comments and feature version fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODYwODc3", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-409860877", "createdAt": "2020-05-12T09:25:50Z", "commit": {"oid": "2a2573d99e17d54841806dcce272d1d02e3fa390"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc9e7a377f3f3d681e2123b4be1c7f5c127b7f69", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/cc9e7a377f3f3d681e2123b4be1c7f5c127b7f69", "committedDate": "2020-05-13T14:06:58Z", "message": "New abstract data view interfaces, PR fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2f055c425bddcd3aa9e12740e81a291c3e8833a", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/e2f055c425bddcd3aa9e12740e81a291c3e8833a", "committedDate": "2020-05-13T14:07:47Z", "message": "Revert feature version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eb30435fa670c9705ff5a1167b94f559d36ef6b", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/6eb30435fa670c9705ff5a1167b94f559d36ef6b", "committedDate": "2020-05-13T14:56:06Z", "message": "Use fetch(Query) for methods what need filtered data set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37a7f4eaba3a267a5038ea3040b094367709c317", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/37a7f4eaba3a267a5038ea3040b094367709c317", "committedDate": "2020-05-13T17:40:32Z", "message": "Code duplicates removal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/e0d82babd11f56a54fffc3391d16c007be7e1b1b", "committedDate": "2020-05-14T06:29:11Z", "message": "Fixed missed serializable interface"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTM2MDIw", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-411536020", "createdAt": "2020-05-14T07:33:46Z", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTM3NTE4", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-411537518", "createdAt": "2020-05-14T07:35:54Z", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTQxMjA1", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-411541205", "createdAt": "2020-05-14T07:41:23Z", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTk0MDE2", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-411594016", "createdAt": "2020-05-14T08:49:49Z", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjAyODQ4", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-411602848", "createdAt": "2020-05-14T09:00:19Z", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjk2NTI5", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-411696529", "createdAt": "2020-05-14T11:05:18Z", "commit": {"oid": "e0d82babd11f56a54fffc3391d16c007be7e1b1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6fb8c111931a29dff5a35cc98e92c3dfd2b7b35", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/c6fb8c111931a29dff5a35cc98e92c3dfd2b7b35", "committedDate": "2020-05-14T18:55:57Z", "message": "A new DataController API introduced, PR comment fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a5cd725a9d1f4d4534b8bdaa6e48931c795fa07", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/1a5cd725a9d1f4d4534b8bdaa6e48931c795fa07", "committedDate": "2020-05-15T07:29:47Z", "message": "Javadoc fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNDExMTAx", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412411101", "createdAt": "2020-05-15T07:31:58Z", "commit": {"oid": "1a5cd725a9d1f4d4534b8bdaa6e48931c795fa07"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNDQxMjI4", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412441228", "createdAt": "2020-05-15T08:19:15Z", "commit": {"oid": "1a5cd725a9d1f4d4534b8bdaa6e48931c795fa07"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNDQyNDU3", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412442457", "createdAt": "2020-05-15T08:20:59Z", "commit": {"oid": "1a5cd725a9d1f4d4534b8bdaa6e48931c795fa07"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df7379f7d1cae115f6b3962ccc1dcefd22c4a953", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/df7379f7d1cae115f6b3962ccc1dcefd22c4a953", "committedDate": "2020-05-15T09:27:29Z", "message": "Fix data provider type validation message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTM1MjM1", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412535235", "createdAt": "2020-05-15T10:37:18Z", "commit": {"oid": "df7379f7d1cae115f6b3962ccc1dcefd22c4a953"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDozNzoxOFrOGV_ndg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMDozNzoxOFrOGV_ndg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcxNTU3NA==", "bodyText": "Remove usage of generic wildcard type.", "url": "https://github.com/vaadin/flow/pull/8303#discussion_r425715574", "createdAt": "2020-05-15T10:37:18Z", "author": {"login": "vaadin-bot"}, "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/DataController.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.data.provider;\n+\n+import com.vaadin.flow.shared.Registration;\n+\n+import java.io.Serializable;\n+import java.util.stream.Stream;\n+\n+/**\n+ * Base class for abstract layer between {@link DataView} and {@link DataCommunicator}.\n+ * Allows {@link DataView} high-level API to be separated from component's specifics.\n+ *\n+ * @param <T>\n+ *        data type\n+ */\n+public interface DataController<T> extends Serializable {\n+\n+    /**\n+     * Returns {@link DataProvider} instance tied with component/data communicator.\n+     *\n+     * @return data provider instance\n+     */\n+    DataProvider<T, ?> getDataProvider();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df7379f7d1cae115f6b3962ccc1dcefd22c4a953"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfc1c28f70e456414ea3d2268a99d3921a16aef8", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/cfc1c28f70e456414ea3d2268a99d3921a16aef8", "committedDate": "2020-05-15T11:29:42Z", "message": "Fix Sonar comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTgwNjUx", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412580651", "createdAt": "2020-05-15T11:55:13Z", "commit": {"oid": "cfc1c28f70e456414ea3d2268a99d3921a16aef8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNTgzODc0", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412583874", "createdAt": "2020-05-15T12:00:17Z", "commit": {"oid": "cfc1c28f70e456414ea3d2268a99d3921a16aef8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fac3f237f703081b3ab0c83260d85060c70a2892", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/fac3f237f703081b3ab0c83260d85060c70a2892", "committedDate": "2020-05-15T12:19:58Z", "message": "Verify DP method modified, isItemPresent method should be delegated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNjQ1Mzgz", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412645383", "createdAt": "2020-05-15T13:24:28Z", "commit": {"oid": "fac3f237f703081b3ab0c83260d85060c70a2892"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzoyNDoyOFrOGWEt3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzoyNDoyOFrOGWEt3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5OTEzNQ==", "bodyText": "Remove usage of generic wildcard type.", "url": "https://github.com/vaadin/flow/pull/8303#discussion_r425799135", "createdAt": "2020-05-15T13:24:28Z", "author": {"login": "vaadin-bot"}, "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/AbstractDataView.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.data.provider;\n+\n+import com.vaadin.flow.shared.Registration;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Abstract data view implementation which takes care of processing\n+ * component data size change events.\n+ *\n+ * @param <T>\n+ *        data type\n+ */\n+public abstract class AbstractDataView<T> implements DataView<T> {\n+\n+    protected DataController<T> dataController;\n+\n+    /**\n+     * Creates a new instance of {@link AbstractDataView} subclass\n+     * and verifies the passed data controller is compatible with this\n+     * data view implementation.\n+     * <p>\n+     * Data controller reference is stored then internally and used for\n+     * data set manipulations.\n+     *\n+     * @param dataController\n+     *          data controller reference\n+     */\n+    public AbstractDataView(DataController<T> dataController) {\n+        Objects.requireNonNull(dataController, \"DataController cannot be null\");\n+        this.dataController = dataController;\n+        DataProvider<T, ?> dataProvider = dataController.getDataProvider();\n+        Objects.requireNonNull(dataProvider, \"DataProvider cannot be null\");\n+        verifyDataProviderType(dataProvider.getClass());\n+    }\n+\n+    @Override\n+    public Registration addSizeChangeListener(SizeChangeListener listener) {\n+        Objects.requireNonNull(listener, \"SizeChangeListener cannot be null\");\n+        return dataController.addSizeChangeListener(listener);\n+    }\n+\n+    /**\n+     * Returns supported {@link DataProvider} type for this {@link DataView}.\n+     *\n+     * @return supported data provider type\n+     */\n+    protected abstract Class<?> getSupportedDataProviderType();\n+\n+    /**\n+     * Verifies an obtained {@link DataProvider} type is appropriate\n+     * for current Data View type.\n+     *\n+     * @param dataProviderType\n+     *              data provider type to be verified\n+     *\n+     * @throws IllegalStateException\n+     *              if data provider type is incompatible with data view type\n+     */\n+    protected final void verifyDataProviderType(Class<?> dataProviderType) {\n+        Class<?> supportedDataProviderType = getSupportedDataProviderType();\n+        if (!supportedDataProviderType.isAssignableFrom(dataProviderType)) {\n+            final String message = String\n+                    .format(\"%s only supports '%s' or it's subclasses, but was given a '%s'\",\n+                            this.getClass().getSimpleName(), supportedDataProviderType.getSimpleName(),\n+                            dataProviderType.getSuperclass().getSimpleName());\n+            throw new IllegalStateException(message);\n+        }\n+    }\n+\n+    /**\n+     * Obtains an appropriate {@link DataProvider} instance from {@link DataController}.\n+     * Throws a runtime exception otherwise, if the {@link DataProvider} instance is incompatible\n+     * with current implementation of {@link DataView}.\n+     *\n+     * @return data provider instance\n+     *\n+     * @throws IllegalStateException if data provider type is incompatible\n+     */\n+    protected abstract DataProvider<T, ?> getDataProvider();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac3f237f703081b3ab0c83260d85060c70a2892"}, "originalPosition": 95}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNjQ1NDA4", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-412645408", "createdAt": "2020-05-15T13:24:30Z", "commit": {"oid": "fac3f237f703081b3ab0c83260d85060c70a2892"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzoyNDozMFrOGWEt9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzoyNDozMFrOGWEt9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5OTE1OA==", "bodyText": "Complete the task associated to this TODO comment.", "url": "https://github.com/vaadin/flow/pull/8303#discussion_r425799158", "createdAt": "2020-05-15T13:24:30Z", "author": {"login": "vaadin-bot"}, "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/AbstractListDataView.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * Copyright 2000-2020 Vaadin Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package com.vaadin.flow.data.provider;\n+\n+import com.vaadin.flow.function.SerializableComparator;\n+import com.vaadin.flow.function.SerializableConsumer;\n+import com.vaadin.flow.function.SerializablePredicate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Objects;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+/**\n+ * Abstract list data view implementation which provides common methods\n+ * for fetching, filtering and sorting in-memory data to all {@link ListDataView} subclasses.\n+ *\n+ * @param <T>\n+ *        data type\n+ */\n+public abstract class AbstractListDataView<T> extends AbstractDataView<T>\n+        implements ListDataView<T, AbstractListDataView<T>> {\n+\n+    /**\n+     * Creates a new instance of {@link AbstractListDataView} subclass\n+     * which rely on in-memory data set, i.e. data set stored in a collection.\n+     *\n+     * @param dataController\n+     *          data controller reference\n+     */\n+    public AbstractListDataView(DataController<T> dataController) {\n+        super(dataController);\n+    }\n+\n+    @Override\n+    public boolean hasNextItem(T item) {\n+        return getNextItemIndex(notNull(item), getAllItemsAsList()).isPresent();\n+    }\n+\n+    @Override\n+    public T getNextItem(T item) {\n+        List<T> items = getAllItemsAsList();\n+        Optional<Integer> nextItemIndex = getNextItemIndex(notNull(item), items);\n+        return nextItemIndex.map(items::get).orElse(null);\n+    }\n+\n+    @Override\n+    public boolean hasPreviousItem(T item) {\n+        return getPreviousItemIndex(notNull(item), getAllItemsAsList()).isPresent();\n+    }\n+\n+    @Override\n+    public T getPreviousItem(T item) {\n+        List<T> items = getAllItemsAsList();\n+        Optional<Integer> previousItemIndex = getPreviousItemIndex(notNull(item), items);\n+        return previousItemIndex.map(items::get).orElse(null);\n+    }\n+\n+    @Override\n+    public AbstractListDataView<T> withFilter(SerializablePredicate<T> filter) {\n+        return withFilterOrOrder(dataProvider -> dataProvider.setFilter(filter));\n+    }\n+\n+    @Override\n+    public AbstractListDataView<T> withSortComparator(SerializableComparator<T> sortComparator) {\n+        return withFilterOrOrder(dataProvider -> dataProvider.setSortComparator(sortComparator));\n+    }\n+\n+    @Override\n+    public Stream<T> getAllItems() {\n+        return dataController.getAllItems();\n+    }\n+\n+    @Override\n+    public int getDataSize() {\n+        return dataController.getDataSize();\n+    }\n+\n+    @Override\n+    public boolean isItemPresent(T item) {\n+        // TODO: delegate this to the data communicator/component, since the equality could be", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac3f237f703081b3ab0c83260d85060c70a2892"}, "originalPosition": 95}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMzMxOTUz", "url": "https://github.com/vaadin/flow/pull/8303#pullrequestreview-413331953", "createdAt": "2020-05-18T07:25:47Z", "commit": {"oid": "fac3f237f703081b3ab0c83260d85060c70a2892"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 532, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}