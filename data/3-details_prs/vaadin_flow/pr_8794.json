{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4ODkzMjA0", "number": 8794, "title": "ListDataView: addItemAfter doesn't work with filter", "bodyText": "Fixes #8762\nThanks @mstahv for this fix! I've just added a regression tests and created a new branch.", "createdAt": "2020-07-30T05:56:49Z", "url": "https://github.com/vaadin/flow/pull/8794", "merged": true, "mergeCommit": {"oid": "312687dd2b576b86b7c67ebc417e171c0bd54405"}, "closed": true, "closedAt": "2020-07-30T08:58:41Z", "author": {"login": "mshabarov"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc55JhIgH2gAyNDU4ODkzMjA0OjA2OTYzMjA3ZWMwMjA3NGVkZWIyY2E5NmIyNzNlYTFkODNhODU4Mzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc565vwAFqTQ1ODE2ODYxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "06963207ec02074edeb2ca96b273ea1d83a85839", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/06963207ec02074edeb2ca96b273ea1d83a85839", "committedDate": "2020-07-30T05:54:45Z", "message": "ListDataView: addItemAfter doesn't work with filter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MTE2MDQ4", "url": "https://github.com/vaadin/flow/pull/8794#pullrequestreview-458116048", "createdAt": "2020-07-30T06:37:16Z", "commit": {"oid": "06963207ec02074edeb2ca96b273ea1d83a85839"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjozNzoxNlrOG5VCEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjozOTo0OVrOG5VGYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NjYxMQ==", "bodyText": "Please avoid one letter variable", "url": "https://github.com/vaadin/flow/pull/8794#discussion_r462766611", "createdAt": "2020-07-30T06:37:16Z", "author": {"login": "denis-anisimov"}, "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/AbstractListDataView.java", "diffHunk": "@@ -267,11 +268,11 @@ protected void validateItemIndex(int itemIndex) {\n         return this;\n     }\n \n-    private int getItemIndex(T item) {\n+    private int getItemIndex(T item, Stream<T> stream) {\n         Objects.requireNonNull(item, NULL_ITEM_ERROR_MESSAGE);\n         AtomicInteger index = new AtomicInteger(-1);\n         //@formatter:off\n-        if (!getItems().peek(t -> index.incrementAndGet())\n+        if (!stream.peek(t -> index.incrementAndGet())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06963207ec02074edeb2ca96b273ea1d83a85839"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NzcxMg==", "bodyText": "Also : it's an existing code but I'm a bit uncomfortable with using peek which should not have side effects but it has here.\nThis is minor.", "url": "https://github.com/vaadin/flow/pull/8794#discussion_r462767712", "createdAt": "2020-07-30T06:39:49Z", "author": {"login": "denis-anisimov"}, "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/AbstractListDataView.java", "diffHunk": "@@ -267,11 +268,11 @@ protected void validateItemIndex(int itemIndex) {\n         return this;\n     }\n \n-    private int getItemIndex(T item) {\n+    private int getItemIndex(T item, Stream<T> stream) {\n         Objects.requireNonNull(item, NULL_ITEM_ERROR_MESSAGE);\n         AtomicInteger index = new AtomicInteger(-1);\n         //@formatter:off\n-        if (!getItems().peek(t -> index.incrementAndGet())\n+        if (!stream.peek(t -> index.incrementAndGet())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NjYxMQ=="}, "originalCommit": {"oid": "06963207ec02074edeb2ca96b273ea1d83a85839"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4fe8c810496c14a64922a3cc781189dbcb9142a", "author": {"user": {"login": "mshabarov", "name": "Mikhail Shabarov"}}, "url": "https://github.com/vaadin/flow/commit/e4fe8c810496c14a64922a3cc781189dbcb9142a", "committedDate": "2020-07-30T07:35:47Z", "message": "Removes one-letter variable names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MTY4NjE4", "url": "https://github.com/vaadin/flow/pull/8794#pullrequestreview-458168618", "createdAt": "2020-07-30T07:57:20Z", "commit": {"oid": "e4fe8c810496c14a64922a3cc781189dbcb9142a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 46, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}