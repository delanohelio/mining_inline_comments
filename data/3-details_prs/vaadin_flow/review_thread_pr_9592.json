{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzOTI0MTY5", "number": 9592, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNToxNjo1M1rOFDh6IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNToxNjo1M1rOFDh6IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MjQ1NjAwOnYy", "diffSide": "RIGHT", "path": "flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNToxNjo1M1rOIDOWEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNjo1MTowOFrOIDTLdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI1MTY2Ng==", "bodyText": "This does set the accessible override flag on all public methods in the class, including those inherited from Object (wait, toString, ...) even though these are from being exposed as endpoints later on. Seems it would be safer to flag only the methods that can actually be called as endpoints.", "url": "https://github.com/vaadin/flow/pull/9592#discussion_r540251666", "createdAt": "2020-12-10T15:16:53Z", "author": {"login": "joheriks"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java", "diffHunk": "@@ -221,8 +222,11 @@ void validateEndpointBean(EndpointNameChecker endpointNameChecker,\n                             endpointName, validationError));\n         }\n \n+        Method[] endpointPublicMethods = beanType.getMethods();\n+        AccessibleObject.setAccessible(endpointPublicMethods, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5beff92a9fa8c753eafea608ffec133c39901d3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMxMzY3OQ==", "bodyText": "setAccessible is not changing method itself, it's changing only instance of that Method (it's not singleton). The rest of security checks is done in com.vaadin.flow.server.connect.auth.VaadinConnectAccessChecker which is not changed in this PR.", "url": "https://github.com/vaadin/flow/pull/9592#discussion_r540313679", "createdAt": "2020-12-10T16:31:17Z", "author": {"login": "tdq"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java", "diffHunk": "@@ -221,8 +222,11 @@ void validateEndpointBean(EndpointNameChecker endpointNameChecker,\n                             endpointName, validationError));\n         }\n \n+        Method[] endpointPublicMethods = beanType.getMethods();\n+        AccessibleObject.setAccessible(endpointPublicMethods, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI1MTY2Ng=="}, "originalCommit": {"oid": "b5beff92a9fa8c753eafea608ffec133c39901d3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMzMDUzMg==", "bodyText": "Right. I missed that getMethods returns copies so the override has only local impact. This looks fine then.", "url": "https://github.com/vaadin/flow/pull/9592#discussion_r540330532", "createdAt": "2020-12-10T16:50:40Z", "author": {"login": "joheriks"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java", "diffHunk": "@@ -221,8 +222,11 @@ void validateEndpointBean(EndpointNameChecker endpointNameChecker,\n                             endpointName, validationError));\n         }\n \n+        Method[] endpointPublicMethods = beanType.getMethods();\n+        AccessibleObject.setAccessible(endpointPublicMethods, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI1MTY2Ng=="}, "originalCommit": {"oid": "b5beff92a9fa8c753eafea608ffec133c39901d3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMzMDg2OQ==", "bodyText": "Looks good to me after conflict resolution then.", "url": "https://github.com/vaadin/flow/pull/9592#discussion_r540330869", "createdAt": "2020-12-10T16:51:08Z", "author": {"login": "joheriks"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java", "diffHunk": "@@ -221,8 +222,11 @@ void validateEndpointBean(EndpointNameChecker endpointNameChecker,\n                             endpointName, validationError));\n         }\n \n+        Method[] endpointPublicMethods = beanType.getMethods();\n+        AccessibleObject.setAccessible(endpointPublicMethods, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI1MTY2Ng=="}, "originalCommit": {"oid": "b5beff92a9fa8c753eafea608ffec133c39901d3"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2895, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}