{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MjMzOTg0", "number": 8504, "title": "Always send and update innerHTML property value", "bodyText": "", "createdAt": "2020-06-05T05:39:36Z", "url": "https://github.com/vaadin/flow/pull/8504", "merged": true, "mergeCommit": {"oid": "d136b6ce8e2ac4345bc81799405066f6db351ac0"}, "closed": true, "closedAt": "2020-06-16T05:55:08Z", "author": {"login": "denis-anisimov"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoONKXAH2gAyNDI4MjMzOTg0OjQ1NmJmMDVhY2ZjMTRkMDkxY2Y5Mzg4ZGM0OTRkMGU3NGRhZGI3NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp2iyhgFqTQyNzg5NDMyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "456bf05acfc14d091cf9388dc494d0e74dadb742", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/456bf05acfc14d091cf9388dc494d0e74dadb742", "committedDate": "2020-06-05T08:16:06Z", "message": "Run collect changes logic for features whose changes are not responded\n\n- In inactive state changes for features which are \"not important\" are\nnot sent to the client side.\n- But internal logic which updates the feature is still invoked which\nmakes change tracker collect undesired changes in case of update.\n- On the other hand the collection logic for such features doesn't do\nanything which kind of break the contract.\n- To be able to avoid broken contract the changes should be collected\nfor all features\n- For \"important\" features the collector should be applied as is.\n- For other feature the collector should be no-op.\n\n\nFixes #8235"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95d68e8bd9b8bf75ddc90b521a51c69a2609c260", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/95d68e8bd9b8bf75ddc90b521a51c69a2609c260", "committedDate": "2020-06-05T08:16:07Z", "message": "Always send and apply update for innerHTML property\n\nFixes #8235"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a497ebe5950bc641c31dc9594ed60c3e15200d6", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/8a497ebe5950bc641c31dc9594ed60c3e15200d6", "committedDate": "2020-06-05T08:16:07Z", "message": "Add unit test for put change producing in ElementPropertyMap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc8c9df569526ec13e041a35ea97ceb7877b90a8", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/cc8c9df569526ec13e041a35ea97ceb7877b90a8", "committedDate": "2020-06-05T08:16:07Z", "message": "Add unit test for \"internal API\" \"producePutChange\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17107632f54119e3dac7f9a342aef80f408217a6", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/17107632f54119e3dac7f9a342aef80f408217a6", "committedDate": "2020-06-05T08:16:08Z", "message": "Add accidentially removed code back"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92c2375bbeb3b05399d11dd280eccb51fc9a262c", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/92c2375bbeb3b05399d11dd280eccb51fc9a262c", "committedDate": "2020-06-05T06:27:52Z", "message": "Add accidentially removed code back"}, "afterCommit": {"oid": "ce424de3a3950a466e512c089edeef31ae994c86", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/ce424de3a3950a466e512c089edeef31ae994c86", "committedDate": "2020-06-05T08:16:08Z", "message": "temp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84f944193841ce1c47ca23362d6c5f4f679945c2", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/84f944193841ce1c47ca23362d6c5f4f679945c2", "committedDate": "2020-06-05T09:22:26Z", "message": "Update values in the map even if the value is the same for specific\nproperties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce424de3a3950a466e512c089edeef31ae994c86", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/ce424de3a3950a466e512c089edeef31ae994c86", "committedDate": "2020-06-05T08:16:08Z", "message": "temp"}, "afterCommit": {"oid": "84f944193841ce1c47ca23362d6c5f4f679945c2", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/84f944193841ce1c47ca23362d6c5f4f679945c2", "committedDate": "2020-06-05T09:22:26Z", "message": "Update values in the map even if the value is the same for specific\nproperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3941c8afc60429af6dcd9f22ab60247f5e4e0e78", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/3941c8afc60429af6dcd9f22ab60247f5e4e0e78", "committedDate": "2020-06-05T09:40:21Z", "message": "Add GWT unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d20d44c071e134f8c7ffffc10f28ccf829470ee", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/3d20d44c071e134f8c7ffffc10f28ccf829470ee", "committedDate": "2020-06-05T09:46:39Z", "message": "Add IT for the fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MTQxMjc5", "url": "https://github.com/vaadin/flow/pull/8504#pullrequestreview-427141279", "createdAt": "2020-06-09T13:26:06Z", "commit": {"oid": "95d68e8bd9b8bf75ddc90b521a51c69a2609c260"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzoyNjowNlrOGhJrTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzoyNjowNlrOGhJrTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQxNDczNA==", "bodyText": "Could simplify the code removing the inner if. For instance:\nelse if (containsNow && producePutChange(key, containedEarlier, value)) {\n    Object currentValue = values.get(key);\n    // New or changed value\n    collector.accept(new MapPutChange(this, key, currentValue));\n    hasChanges = true;\n}", "url": "https://github.com/vaadin/flow/pull/8504#discussion_r437414734", "createdAt": "2020-06-09T13:26:06Z", "author": {"login": "joheriks"}, "path": "flow-server/src/main/java/com/vaadin/flow/internal/nodefeature/NodeMap.java", "diffHunk": "@@ -421,7 +421,7 @@ public void collectChanges(Consumer<NodeChange> collector) {\n                 hasChanges = true;\n             } else if (containsNow) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95d68e8bd9b8bf75ddc90b521a51c69a2609c260"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ade2301a4925540fa4d269495d253b3388dac28", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/7ade2301a4925540fa4d269495d253b3388dac28", "committedDate": "2020-06-10T09:22:27Z", "message": "Improve the code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3ODk0MzI5", "url": "https://github.com/vaadin/flow/pull/8504#pullrequestreview-427894329", "createdAt": "2020-06-10T09:49:51Z", "commit": {"oid": "7ade2301a4925540fa4d269495d253b3388dac28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 440, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}