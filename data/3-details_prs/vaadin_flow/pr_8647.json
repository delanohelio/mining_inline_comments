{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNDAzMTE3", "number": 8647, "title": "Add support for enums in endpoints", "bodyText": "The OpenAPI JSON output for enums is based on \"Reusable enums\" description at https://swagger.io/docs/specification/data-models/enums/\nFixes #8144\nExamples input 1\npublic enum MyEnum {\n    ENUM1(1), ENUM2(2);\n    private final int value;\n\n    MyEnum(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\nGenerated OpenAPI json:\n...\n  \"components\" : {\n    \"schemas\" : {\n      \"com.vaadin.flow.server.connect.generator.endpoints.enumtype.EnumEndpoint.MyEnum\" : {\n        \"type\" : \"string\",\n        \"enum\" : [ \"ENUM1\", \"ENUM2\" ],\n        \"x-vaadin-file-path\" : \"/home/haprog/repos/Work/flow/flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/enumtype/EnumEndpoint.java\"\n      }\n    },\n    \"securitySchemes\" : { ... }\n  }\nIn the json where the enum type has been used in the API it will show under properties like this:\n          \"myValue\" : {\n            \"$ref\" : \"#/components/schemas/com.vaadin.flow.server.connect.generator.endpoints.enumtype.EnumEndpoint.MyEnum\"\"\n          },\nOutput TS:\nconst enum MyEnum {\n  ENUM1 = 'ENUM1',\n  ENUM2 = 'ENUM2',\n}\nexport default MyEnum;\nExamples input 2\npublic enum Permissions {\n  ADMIN, USER, GUEST;\n}\nGenerated OpenAPI json:\n...\n  \"components\" : {\n    \"schemas\" : {\n      \"com.vaadin.flow.server.connect.generator.endpoints.json.JsonTestEndpoint.Permissions\" : {\n        \"type\" : \"string\",\n        \"enum\" : [ \"ADMIN\", \"USER\", \"GUEST\" ],\n        \"x-vaadin-file-path\" : \"com/vaadin/flow/server/connect/generator/endpoints/json/JsonTestEndpoint.java\"\n      }\n    },\n    \"securitySchemes\" : { ... }\n  }\nIn the json where the enum type has been used in the API it will show under properties like this:\n          \"permissions\" : {\n            \"$ref\" : \"#/components/schemas/com.vaadin.flow.server.connect.generator.endpoints.json.JsonTestEndpoint.Permissions\"\n          },\nOutput TS:\nconst enum Permissions {\n  ADMIN = 'ADMIN',\n  USER = 'USER',\n  GUEST = 'GUEST',\n}\nexport default Permissions;", "createdAt": "2020-06-29T13:09:38Z", "url": "https://github.com/vaadin/flow/pull/8647", "merged": true, "mergeCommit": {"oid": "39e6d6650e5190b9de3ac59d68e059a0272efd67"}, "closed": true, "closedAt": "2020-06-30T12:31:22Z", "author": {"login": "Haprog"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwA1eDgFqTQzOTEyODEyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwSx-8AFqTQzOTg2NzY4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTI4MTI1", "url": "https://github.com/vaadin/flow/pull/8647#pullrequestreview-439128125", "createdAt": "2020-06-29T13:12:50Z", "commit": {"oid": "6ec1f3b954119e08230e0bc519c24103427b4dbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzoxMjo1MFrOGqQRnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzoxMjo1MFrOGqQRnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk2MDAyOA==", "bodyText": "Unrelated change, but I noticed this Javadoc was incorrect (had one extra param and the order of params didn't match the declaration).", "url": "https://github.com/vaadin/flow/pull/8647#discussion_r446960028", "createdAt": "2020-06-29T13:12:50Z", "author": {"login": "Haprog"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/frontend/TaskGenerateConnect.java", "diffHunk": "@@ -38,14 +38,14 @@\n     /**\n      * Create a task for generating TS files based.\n      *\n-     * @param output\n-     *            the output folder.\n      * @param applicationProperties\n- *            application properties file.\n+     *            application properties file.\n      * @param openApi\n-*            openApi json file.\n+     *            openApi json file.\n+     * @param outputFolder\n+     *            the output folder.\n      * @param frontendDirectory\n-     *       the frontend folder.\n+     *            the frontend folder.\n      */\n     TaskGenerateConnect(File applicationProperties, File openApi,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec1f3b954119e08230e0bc519c24103427b4dbb"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTMxNDU5", "url": "https://github.com/vaadin/flow/pull/8647#pullrequestreview-439131459", "createdAt": "2020-06-29T13:16:31Z", "commit": {"oid": "6ec1f3b954119e08230e0bc519c24103427b4dbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzoxNjozMVrOGqQbQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzoxNjozMVrOGqQbQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk2MjQ5OA==", "bodyText": "Just fixing a typo in test method name.", "url": "https://github.com/vaadin/flow/pull/8647#discussion_r446962498", "createdAt": "2020-06-29T13:16:31Z", "author": {"login": "Haprog"}, "path": "flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/datetime/DateTimeEndpointTest.java", "diffHunk": "@@ -21,15 +21,13 @@\n \n import com.vaadin.flow.server.connect.generator.endpoints.AbstractEndpointGenerationTest;\n \n-//import com.vaadin.flow.server.connect.generator.AbstractEndpointGenerationTest;\n-\n public class DateTimeEndpointTest extends AbstractEndpointGenerationTest {\n     public DateTimeEndpointTest() {\n         super(Collections.singletonList(DateTimeEndpoint.class));\n     }\n \n     @Test\n-    public void should_GenerateStringType_When_ReferingToDateTimeTypes() {\n+    public void should_GenerateStringType_When_ReferringToDateTimeTypes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ec1f3b954119e08230e0bc519c24103427b4dbb"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "571b19693282e9b7cb1e6a21c6db3eea6ecbc138", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/571b19693282e9b7cb1e6a21c6db3eea6ecbc138", "committedDate": "2020-06-30T07:03:47Z", "message": "wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "734814d812661fb60a82200490e0d64f195594bb", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/734814d812661fb60a82200490e0d64f195594bb", "committedDate": "2020-06-30T07:03:47Z", "message": "wip2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57d9bc0327c9b368ef645bc915bd96ce2836e175", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/57d9bc0327c9b368ef645bc915bd96ce2836e175", "committedDate": "2020-06-30T07:03:47Z", "message": "Fix SonarQube issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "840c5c3e8feb9d75eb2983745c5fa51ded518862", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/840c5c3e8feb9d75eb2983745c5fa51ded518862", "committedDate": "2020-06-30T07:03:47Z", "message": "Fix compilation error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aea3f935084667788d89661de97cd3951fc26ba9", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/aea3f935084667788d89661de97cd3951fc26ba9", "committedDate": "2020-06-30T06:46:21Z", "message": "Fix compilation error"}, "afterCommit": {"oid": "840c5c3e8feb9d75eb2983745c5fa51ded518862", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/840c5c3e8feb9d75eb2983745c5fa51ded518862", "committedDate": "2020-06-30T07:03:47Z", "message": "Fix compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35b737e8a111d04bc5c5d2011041cb964ff2d08d", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/35b737e8a111d04bc5c5d2011041cb964ff2d08d", "committedDate": "2020-06-30T07:51:57Z", "message": "fix the enum import / export style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d9cb22b345ec1729fd0b5996a5725e4bc13f4bc", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/3d9cb22b345ec1729fd0b5996a5725e4bc13f4bc", "committedDate": "2020-06-30T10:01:15Z", "message": "fix: remove raw type usage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9bc8379f9f6ef265069b39bd8976f0d1d99d69a", "author": {"user": {"login": "Haprog", "name": "Kari S\u00f6derholm"}}, "url": "https://github.com/vaadin/flow/commit/d9bc8379f9f6ef265069b39bd8976f0d1d99d69a", "committedDate": "2020-06-30T10:05:35Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODY3Njgy", "url": "https://github.com/vaadin/flow/pull/8647#pullrequestreview-439867682", "createdAt": "2020-06-30T10:07:20Z", "commit": {"oid": "d9bc8379f9f6ef265069b39bd8976f0d1d99d69a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 237, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}