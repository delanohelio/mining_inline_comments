{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2ODE5NTg0", "number": 9729, "title": "fix: lookup for all available Executor services instead of only one", "bodyText": "", "createdAt": "2020-12-30T06:48:54Z", "url": "https://github.com/vaadin/flow/pull/9729", "merged": true, "mergeCommit": {"oid": "96c9f3bbcaa96357ec601744b395f0d16afc33a5"}, "closed": true, "closedAt": "2020-12-30T10:06:31Z", "author": {"login": "denis-anisimov"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdrJnVIgH2gAyNTQ2ODE5NTg0OjM0ZTkyYWE0ZjRjMDJlMTY1NDc2ZGJiNmNhYzFlODkxMmRkMzM0NTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrLK-FgFqTU1OTk1NDM5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/34e92aa4f4c02e165476dbb6cac1e8912dd33458", "committedDate": "2020-12-30T06:48:05Z", "message": "fix: lookup for all available Executor services instead of only one"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5OTM5NTYx", "url": "https://github.com/vaadin/flow/pull/9729#pullrequestreview-559939561", "createdAt": "2020-12-30T07:42:30Z", "commit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwNzo0MjozMVrOIMhFCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwNzo0MjozMVrOIMhFCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTk5NTc4NQ==", "bodyText": "A \"NullPointerException\" could be thrown; \"lookup\" is nullable here.", "url": "https://github.com/vaadin/flow/pull/9729#discussion_r549995785", "createdAt": "2020-12-30T07:42:31Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/startup/DevModeInitializer.java", "diffHunk": "@@ -359,7 +359,8 @@ public static void initDevModeHandler(Set<Class<?>> classes,\n                 .withHomeNodeExecRequired(useHomeNodeExec).build();\n \n         // Check whether executor is provided by the caller (framework)\n-        Executor service = lookup.lookup(Executor.class);\n+        Executor service = lookup.lookupAll(Executor.class).stream().findFirst()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5OTQ5OTM2", "url": "https://github.com/vaadin/flow/pull/9729#pullrequestreview-559949936", "createdAt": "2020-12-30T08:21:32Z", "commit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoyMTozMlrOIMi2GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoyMTozMlrOIMi2GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDAyNDcyOA==", "bodyText": "Even if all executors are looked up, only any first one is used. So, what is the meaning of using lookupAll in place of lookup?\nIt's totally clear when it used as below:\nCollection<InstantiatorFactory> factories = lookup.lookupAll(InstantiatorFactory.class);\nfor (InstantiatorFactory factory : factories) { ... }\nI propose to add some explanatory comment.", "url": "https://github.com/vaadin/flow/pull/9729#discussion_r550024728", "createdAt": "2020-12-30T08:21:32Z", "author": {"login": "mshabarov"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/DevModeHandler.java", "diffHunk": "@@ -149,7 +149,8 @@ private DevModeHandler(Lookup lookup, int runningPort, File npmFolder,\n         devServerPortFile = getDevServerPortFile(npmFolder);\n \n         // Check whether executor is provided by the caller (framework)\n-        Executor service = lookup.lookup(Executor.class);\n+        Executor service = lookup.lookupAll(Executor.class).stream().findFirst()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5OTUwNTQw", "url": "https://github.com/vaadin/flow/pull/9729#pullrequestreview-559950540", "createdAt": "2020-12-30T08:23:35Z", "commit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoyMzozNVrOIMi8Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwODoyMzozNVrOIMi8Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDAyNjI5NQ==", "bodyText": "Is that change for further features/bugfixes? Does it require to be covered by unit test, or it anyway will be covered in other PRs?", "url": "https://github.com/vaadin/flow/pull/9729#discussion_r550026295", "createdAt": "2020-12-30T08:23:35Z", "author": {"login": "mshabarov"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/DevModeHandler.java", "diffHunk": "@@ -149,7 +149,8 @@ private DevModeHandler(Lookup lookup, int runningPort, File npmFolder,\n         devServerPortFile = getDevServerPortFile(npmFolder);\n \n         // Check whether executor is provided by the caller (framework)\n-        Executor service = lookup.lookup(Executor.class);\n+        Executor service = lookup.lookupAll(Executor.class).stream().findFirst()\n+                .orElse(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34e92aa4f4c02e165476dbb6cac1e8912dd33458"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d055705479fc0c633eb7679117ad17ec77a17c8d", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/d055705479fc0c633eb7679117ad17ec77a17c8d", "committedDate": "2020-12-30T08:34:17Z", "message": "fix: add comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5OTU0Mzk4", "url": "https://github.com/vaadin/flow/pull/9729#pullrequestreview-559954398", "createdAt": "2020-12-30T08:36:55Z", "commit": {"oid": "d055705479fc0c633eb7679117ad17ec77a17c8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 832, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}