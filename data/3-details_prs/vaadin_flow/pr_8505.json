{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4Mjc1MjQ0", "number": 8505, "title": "Usability and visual design improvements for devmode gizmo and notifications", "bodyText": "Partial redesign of the UI design. Wanted to clean up the visual hierarchy and improve the usability of the notifications (dismissing and the \u201cdon\u2019t show again\u201d feature).\nAs a disclaimer: I didn\u2019t pay any attention to accessibility, as it looked like that wasn\u2019t a concern previously either (color contrast, keyboard or screen reader usability). The gizmo is only usable with a mouse or a touch device, and by sighted people.\nApologies for the unnecessary white-space changes (my IDE does the formatting automatically). I didn\u2019t bother leaving those out.\nNot super happy about the code quality, but it does the job.\nChanges\n\nRefined typographic styles (slightly smaller overall)\nVisually detached the gizmo and notifications from the edge of the browser\nAdded a blue color for \u201cinformation\u201d\u00a0messages\nAdded a shadow for the gizmo and notifications\nAdded an explicit \u201cDismiss\u201d button (previously the user could click anywhere on the notification to dismiss it)\n\n\n\nMoved the \u201cRead more\u201d link to be part of the message details\nChanged the \u201cDon\u2019t show again\u201d from a button to a checkbox\nAdded a \u201clog\u201d\u00a0style message, which does not have an icon and uses the gray color\n\n\n\nSimplified the window layout: removed the title bar (moved the title to a message in the log)\nRedesigned minimize icon\n\n\n\nIf there\u2019s a notification at the same time as the window is open, the notification shows above the window (previously was on top of it)\n\n\n\nAllow the log window to scroll if there are many message (previously the window grew outside the browser viewport and it was impossible to minimize the window)\nIn general, restricted the UI from growing outside the browser viewport (long messages, small viewports, etc.)", "createdAt": "2020-06-05T07:33:57Z", "url": "https://github.com/vaadin/flow/pull/8505", "merged": true, "mergeCommit": {"oid": "82f466f9ac80c093234471a4091f8e7efe7f400c"}, "closed": true, "closedAt": "2020-06-08T08:22:48Z", "author": {"login": "jouni"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoM_FSgH2gAyNDI4Mjc1MjQ0OmFhYzE2MDIzMjgwZmU5MzE0NjgwMWZjMTZlYzFiZmViY2M4NGI0YTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpMFt8gFqTQyNjAwODg0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aac16023280fe93146801fc16ec1bfebcc84b4a6", "author": {"user": {"login": "jouni", "name": "Jouni Koivuviita"}}, "url": "https://github.com/vaadin/flow/commit/aac16023280fe93146801fc16ec1bfebcc84b4a6", "committedDate": "2020-06-05T06:50:49Z", "message": "Usability and visual design improvements for devmode gizmo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1", "author": {"user": {"login": "jouni", "name": "Jouni Koivuviita"}}, "url": "https://github.com/vaadin/flow/commit/70ac1db1d664f391622cd6e13fe9c817ad50d5d1", "committedDate": "2020-06-05T06:54:30Z", "message": "Re-enable selecting the notification text"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDYzMzE5", "url": "https://github.com/vaadin/flow/pull/8505#pullrequestreview-425063319", "createdAt": "2020-06-05T07:38:00Z", "commit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzozODowMVrOGfjn_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzozODowMVrOGfjn_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc0MjcxOQ==", "bodyText": "Removed the unnecessary wrapper element, as it only seemed to serve the purpose of one CSS selector.", "url": "https://github.com/vaadin/flow/pull/8505#discussion_r435742719", "createdAt": "2020-06-05T07:38:01Z", "author": {"login": "jouni"}, "path": "flow-client/src/main/resources/META-INF/resources/frontend/VaadinDevmodeGizmo.js", "diffHunk": "@@ -787,69 +956,59 @@ class VaadinDevmodeGizmo extends LitElement {\n \n   renderMessage(messageObject) {\n     return html`\n-      <div class=\"message ${messageObject.type} ${messageObject.deleted ? 'animate-out' : ''}\" @click=${e => this.dismissNotification(messageObject.id)}>\n-        <div class=\"message-content\">${messageObject.message}</div>\n-        ${messageObject.details ? html`<div class=\"message-details\">${messageObject.details}</div>` : ''}\n-        <div class=\"message-actions\">\n-            ${messageObject.link ? html`<a href=\"${messageObject.link}\" target=\"_blank\">Read more</a>` : ''}\n-            ${messageObject.persistentId ? html`<span class=\"ahreflike dismiss-message\" @click=${e => this.dismissNotification(messageObject.id, true)}>Don't show again</span>` : ''}\n+      <div class=\"message ${messageObject.type} ${messageObject.deleted ? 'animate-out' : ''} ${messageObject.details ||\u00a0messageObject.link ? 'has-details' : ''}\">\n+        <div class=\"message-content\">\n+          <div class=\"message-heading\">${messageObject.message}</div>\n+          <div class=\"message-details\" ?hidden=\"${!messageObject.details &&\u00a0!messageObject.link}\">\n+            ${messageObject.details ? html`<p>${messageObject.details}</p>` : ''}\n+            ${messageObject.link ? html`<a class=\"ahreflike\" href=\"${messageObject.link}\" target=\"_blank\">Read more</a>` : ''}\n+          </div>\n+          ${messageObject.persistentId ? html`<div class=\"persist ${messageObject.dontShowAgain ? 'on' : 'off'}\" @click=${e => this.toggleDontShowAgain(messageObject.id)}>Don\u2019t show again</div>` : ''}\n         </div>\n+        <div class=\"dismiss-message\" @click=${e => this.dismissNotification(messageObject.id)}>Dismiss</div>\n       </div>\n       `;\n   }\n \n   render() {\n     return html`\n-      <div class=\"vaadin-devmode-gizmo-root\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1"}, "originalPosition": 877}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDY0MzUy", "url": "https://github.com/vaadin/flow/pull/8505#pullrequestreview-425064352", "createdAt": "2020-06-05T07:39:39Z", "commit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzozOTozOVrOGfjrDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzozOTozOVrOGfjrDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc0MzUwMQ==", "bodyText": "Show splash messages immediately inside the window if it is open.", "url": "https://github.com/vaadin/flow/pull/8505#discussion_r435743501", "createdAt": "2020-06-05T07:39:39Z", "author": {"login": "jouni"}, "path": "flow-client/src/main/resources/META-INF/resources/frontend/VaadinDevmodeGizmo.js", "diffHunk": "@@ -681,17 +830,21 @@ class VaadinDevmodeGizmo extends LitElement {\n \n   showSplashMessage(msg) {\n     this.splashMessage = msg;\n-    // automatically move notification to message tray after a certain amount of time\n     if (this.splashMessage != null) {\n-      setTimeout(() => {\n+      if (this.expanded) {\n         this.demoteSplashMessage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1"}, "originalPosition": 776}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDY0NjA5", "url": "https://github.com/vaadin/flow/pull/8505#pullrequestreview-425064609", "createdAt": "2020-06-05T07:40:04Z", "commit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzo0MDowNFrOGfjr6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNzo0MDowNFrOGfjr6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc0MzcyMw==", "bodyText": "Removed hardcoded timeout durations and used the single value from CSS.", "url": "https://github.com/vaadin/flow/pull/8505#discussion_r435743723", "createdAt": "2020-06-05T07:40:04Z", "author": {"login": "jouni"}, "path": "flow-client/src/main/resources/META-INF/resources/frontend/VaadinDevmodeGizmo.js", "diffHunk": "@@ -657,6 +804,8 @@ class VaadinDevmodeGizmo extends LitElement {\n       this.showSplashMessage('Automatic reload #' + count + ' finished at ' + reloaded);\n       window.sessionStorage.removeItem(VaadinDevmodeGizmo.TRIGGERED_KEY_IN_SESSION_STORAGE);\n     }\n+\n+    this.__transitionDuration = parseInt(window.getComputedStyle(this).getPropertyValue('--gizmo-transition-duration'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70ac1db1d664f391622cd6e13fe9c817ad50d5d1"}, "originalPosition": 764}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04e9ac1f02d787c5ae8852dc074bd9ebc8dd33a9", "author": {"user": {"login": "jouni", "name": "Jouni Koivuviita"}}, "url": "https://github.com/vaadin/flow/commit/04e9ac1f02d787c5ae8852dc074bd9ebc8dd33a9", "committedDate": "2020-06-08T06:53:40Z", "message": "FIx whitespace characters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDA4ODQ5", "url": "https://github.com/vaadin/flow/pull/8505#pullrequestreview-426008849", "createdAt": "2020-06-08T08:22:05Z", "commit": {"oid": "04e9ac1f02d787c5ae8852dc074bd9ebc8dd33a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 443, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}