{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDY0MzY5", "number": 9618, "title": "chore: add internal classes to access classloader and init context", "bodyText": "related to #9601 : needed to restore OSGi resource provider", "createdAt": "2020-12-09T10:11:21Z", "url": "https://github.com/vaadin/flow/pull/9618", "merged": true, "mergeCommit": {"oid": "f0a6e84eda0b2e838ef05bb0978ecba6707921c3"}, "closed": true, "closedAt": "2020-12-09T13:04:45Z", "author": {"login": "denis-anisimov"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkb7QQAH2gAyNTM1MDY0MzY5OjI2ODE4NGJmYjJhMWUxZTc5ZTUzODk3YTYwNzlmNmY5Y2NhMWUyNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkdyB0AFqTU0ODEyNzAzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "268184bfb2a1e1e79e53897a6079f6f9cca1e277", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/268184bfb2a1e1e79e53897a6079f6f9cca1e277", "committedDate": "2020-12-09T10:10:40Z", "message": "chore: add internal classes to access classloader and init context\n\nrelated to #9601 : needed to restore OSGi resource provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f23f1007dcbbe4801005e74d79a3dfd795afdaf", "author": {"user": null}, "url": "https://github.com/vaadin/flow/commit/3f23f1007dcbbe4801005e74d79a3dfd795afdaf", "committedDate": "2020-12-09T10:54:47Z", "message": "fix: exclude helper interfaces from serializable classes test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTAyMTM1", "url": "https://github.com/vaadin/flow/pull/9618#pullrequestreview-548102135", "createdAt": "2020-12-09T11:46:36Z", "commit": {"oid": "3f23f1007dcbbe4801005e74d79a3dfd795afdaf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMTo0NjozNlrOICQjmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMTo0NjozNlrOICQjmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIzOTMyMA==", "bodyText": "Replace this lambda with a method reference.", "url": "https://github.com/vaadin/flow/pull/9618#discussion_r539239320", "createdAt": "2020-12-09T11:46:36Z", "author": {"login": "vaadin-bot"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/VaadinServlet.java", "diffHunk": "@@ -513,4 +520,22 @@ public void destroy() {\n         getService().destroy();\n     }\n \n+    private VaadinServletContext initializeContext() {\n+        ServletContext servletContext = getServletConfig().getServletContext();\n+        VaadinServletContext vaadinServletContext = new VaadinServletContext(\n+                servletContext);\n+        // ensure the web application classloader is available via context\n+        ApplicationClassLoaderAccess access = () -> servletContext", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f23f1007dcbbe4801005e74d79a3dfd795afdaf"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDc1MTAw", "url": "https://github.com/vaadin/flow/pull/9618#pullrequestreview-548075100", "createdAt": "2020-12-09T11:09:17Z", "commit": {"oid": "3f23f1007dcbbe4801005e74d79a3dfd795afdaf"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMTowOToxOFrOICPHmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMTowOToxOFrOICPHmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIxNTc3MA==", "bodyText": "Why do we have a runnable running a runnable. can't we just have access as the default instead of  () -> access` else drop access and put it directly in the getAttribute default value.", "url": "https://github.com/vaadin/flow/pull/9618#discussion_r539215770", "createdAt": "2020-12-09T11:09:18Z", "author": {"login": "caalador"}, "path": "flow-server/src/main/java/com/vaadin/flow/server/VaadinServlet.java", "diffHunk": "@@ -513,4 +520,22 @@ public void destroy() {\n         getService().destroy();\n     }\n \n+    private VaadinServletContext initializeContext() {\n+        ServletContext servletContext = getServletConfig().getServletContext();\n+        VaadinServletContext vaadinServletContext = new VaadinServletContext(\n+                servletContext);\n+        // ensure the web application classloader is available via context\n+        ApplicationClassLoaderAccess access = () -> servletContext\n+                .getClassLoader();\n+        vaadinServletContext.getAttribute(ApplicationClassLoaderAccess.class,\n+                () -> access);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f23f1007dcbbe4801005e74d79a3dfd795afdaf"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTI3MDM2", "url": "https://github.com/vaadin/flow/pull/9618#pullrequestreview-548127036", "createdAt": "2020-12-09T12:20:24Z", "commit": {"oid": "3f23f1007dcbbe4801005e74d79a3dfd795afdaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4667, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}