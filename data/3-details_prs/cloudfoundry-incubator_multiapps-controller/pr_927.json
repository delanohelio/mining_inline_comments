{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MTkxMjU0", "number": 927, "title": "Replace DynatraceMeterRegistry to JMXmeterRegistry", "bodyText": "Jira: LMCROSSITXSADEPLOY-2178", "createdAt": "2020-08-11T15:45:05Z", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/927", "merged": true, "mergeCommit": {"oid": "2e96a9c4b05fc38ecb32cc76e59dcd442a01e33a"}, "closed": true, "closedAt": "2020-08-12T15:22:05Z", "author": {"login": "boyan-velinov"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-GtNiAFqTQ2NTY3NTkxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-NCstAFqTQ2NjAyMjE1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1Njc1OTEw", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/927#pullrequestreview-465675910", "createdAt": "2020-08-12T07:56:54Z", "commit": {"oid": "edc956a3cc9505c2a8c3e45da3cab9193de067f4"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzo1Njo1NVrOG_WFJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzo1ODowM1rOG_WHdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA3NTIzOQ==", "bodyText": "Replace the tabs with spaces.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/927#discussion_r469075239", "createdAt": "2020-08-12T07:56:55Z", "author": {"login": "nictas"}, "path": "pom.xml", "diffHunk": "@@ -310,10 +310,10 @@\n                 <version>${snakeyaml.version}</version>\n             </dependency>\n             <dependency>\n-                <groupId>io.micrometer</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc956a3cc9505c2a8c3e45da3cab9193de067f4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA3NTY5NA==", "bodyText": "Do we need this now?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/927#discussion_r469075694", "createdAt": "2020-08-12T07:57:47Z", "author": {"login": "nictas"}, "path": "multiapps-controller-web/src/main/java/org/cloudfoundry/multiapps/controller/web/configuration/MicrometerConfiguration.java", "diffHunk": "@@ -76,42 +49,20 @@ public Duration step() {\n                 return Duration.ofSeconds(stepInSeconds);\n             }\n \n-            @Override\n-            public int batchSize() {\n-                if (batchSize == null) {\n-                    return DynatraceConfig.super.batchSize();\n-                }\n-                return batchSize;\n-            }\n-\n             @Override\n             @Nullable\n             public String get(String k) {\n                 return null;\n             }\n         };\n-        DynatraceMeterRegistry registry = new DynatraceMeterRegistry(dynatraceConfig, Clock.SYSTEM);\n+        JmxMeterRegistry registry = new JmxMeterRegistry(jmxConfig, Clock.SYSTEM);\n         registry.config()\n                 .meterFilter(MeterFilter.acceptNameStartsWith(CLIENT_CONNECTIONS_METRICS_PREFIX))\n                 .meterFilter(MeterFilter.deny());\n         Metrics.globalRegistry.add(registry);\n         return registry;\n     }\n \n-    private String getDynatraceToken(DynatraceServiceInfo serviceInfo) {\n-        if(serviceInfo == null) {\n-            return null;\n-        }\n-        return serviceInfo.getMicrometerToken();\n-    }\n-\n-    private String getDynatraceUrl(DynatraceServiceInfo serviceInfo) {\n-        if (serviceInfo == null) {\n-            return null;\n-        }\n-        return serviceInfo.getMicrometerUrl();\n-    }\n-\n     private DynatraceServiceInfo getDynatraceServiceInfo() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc956a3cc9505c2a8c3e45da3cab9193de067f4"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA3NTgyOA==", "bodyText": "This should no longer be needed, right?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/927#discussion_r469075828", "createdAt": "2020-08-12T07:58:03Z", "author": {"login": "nictas"}, "path": "multiapps-controller-web/src/main/java/org/cloudfoundry/multiapps/controller/web/configuration/MicrometerConfiguration.java", "diffHunk": "@@ -32,41 +32,14 @@\n \n     @Inject\n     @Bean\n-    public DynatraceMeterRegistry dynatraceMeterRegistry(ApplicationConfiguration appConfig) {\n+    public JmxMeterRegistry jmxMeterRegistry(ApplicationConfiguration appConfig) {\n         DynatraceServiceInfo serviceInfo = getDynatraceServiceInfo();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc956a3cc9505c2a8c3e45da3cab9193de067f4"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "edc956a3cc9505c2a8c3e45da3cab9193de067f4", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/edc956a3cc9505c2a8c3e45da3cab9193de067f4", "committedDate": "2020-08-11T15:39:10Z", "message": "Replace DynatraceMeterRegistry to JMXmeterRegistry\n\nJira: LMCROSSITXSADEPLOY-2178"}, "afterCommit": {"oid": "296b756253f2d63b0a2e471ee097317a78b8ed8a", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/296b756253f2d63b0a2e471ee097317a78b8ed8a", "committedDate": "2020-08-12T09:10:02Z", "message": "Replace DynatraceMeterRegistry to JMXmeterRegistry\n\nJira: LMCROSSITXSADEPLOY-2178"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa550d011949f564cd65a979694008823ed5ae0d", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/fa550d011949f564cd65a979694008823ed5ae0d", "committedDate": "2020-08-12T15:13:59Z", "message": "Replace DynatraceMeterRegistry to JMXmeterRegistry\n\nJira: LMCROSSITXSADEPLOY-2178"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "296b756253f2d63b0a2e471ee097317a78b8ed8a", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/296b756253f2d63b0a2e471ee097317a78b8ed8a", "committedDate": "2020-08-12T09:10:02Z", "message": "Replace DynatraceMeterRegistry to JMXmeterRegistry\n\nJira: LMCROSSITXSADEPLOY-2178"}, "afterCommit": {"oid": "fa550d011949f564cd65a979694008823ed5ae0d", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/fa550d011949f564cd65a979694008823ed5ae0d", "committedDate": "2020-08-12T15:13:59Z", "message": "Replace DynatraceMeterRegistry to JMXmeterRegistry\n\nJira: LMCROSSITXSADEPLOY-2178"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDIyMTU0", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/927#pullrequestreview-466022154", "createdAt": "2020-08-12T15:21:06Z", "commit": {"oid": "fa550d011949f564cd65a979694008823ed5ae0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 774, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}