{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxOTc0MzI5", "number": 946, "title": "Log expired flowable jobs", "bodyText": "", "createdAt": "2020-09-08T11:25:49Z", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/946", "merged": true, "mergeCommit": {"oid": "ca167476c1b62babb775f660e09dff1beec1d153"}, "closed": true, "closedAt": "2020-09-09T07:41:34Z", "author": {"login": "theghost5800"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdG2Fs-gBqjM3NDA1MDcxMzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHHGWzgBqjM3NDQzNTM5NTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99a26f233335e325cb930526fc6712257360a603", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/99a26f233335e325cb930526fc6712257360a603", "committedDate": "2020-09-08T11:24:29Z", "message": "Log expired flowable jobs"}, "afterCommit": {"oid": "3fb03424e2e190208f689021c2832db357281c76", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/3fb03424e2e190208f689021c2832db357281c76", "committedDate": "2020-09-08T11:41:44Z", "message": "Log expired flowable jobs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MDY2ODQ3", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/946#pullrequestreview-484066847", "createdAt": "2020-09-08T12:07:46Z", "commit": {"oid": "3fb03424e2e190208f689021c2832db357281c76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMjowNzo0NlrOHOZ0ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMjowNzo0NlrOHOZ0ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg2NTIxOQ==", "bodyText": "maybe split this if for readability", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/946#discussion_r484865219", "createdAt": "2020-09-08T12:07:46Z", "author": {"login": "ikasarov"}, "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/listeners/ExpiredJobListener.java", "diffHunk": "@@ -0,0 +1,53 @@\n+package org.cloudfoundry.multiapps.controller.process.listeners;\n+\n+import static java.text.MessageFormat.format;\n+\n+import java.time.Instant;\n+\n+import javax.inject.Named;\n+\n+import org.cloudfoundry.multiapps.controller.process.Messages;\n+import org.flowable.common.engine.api.delegate.event.FlowableEngineEntityEvent;\n+import org.flowable.engine.delegate.event.AbstractFlowableEngineEventListener;\n+import org.flowable.job.service.impl.persistence.entity.JobEntity;\n+import org.flowable.job.service.impl.persistence.entity.JobInfoEntity;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+@Named(\"expiredJobListener\")\n+public class ExpiredJobListener extends AbstractFlowableEngineEventListener {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(ExpiredJobListener.class);\n+\n+    @Override\n+    public boolean isFailOnException() {\n+        return false;\n+    }\n+\n+    @Override\n+    protected void entityDeleted(FlowableEngineEntityEvent event) {\n+        JobEntity jobEntity = getJobEntity(event);\n+        if (jobEntity != null && hasJobEntityExpired(jobEntity)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fb03424e2e190208f689021c2832db357281c76"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MDY2ODkx", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/946#pullrequestreview-484066891", "createdAt": "2020-09-08T12:07:49Z", "commit": {"oid": "3fb03424e2e190208f689021c2832db357281c76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fb03424e2e190208f689021c2832db357281c76", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/3fb03424e2e190208f689021c2832db357281c76", "committedDate": "2020-09-08T11:41:44Z", "message": "Log expired flowable jobs"}, "afterCommit": {"oid": "98c0dce0299c6b12587599da59f9e7b2f2e7ba5c", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/98c0dce0299c6b12587599da59f9e7b2f2e7ba5c", "committedDate": "2020-09-08T15:04:55Z", "message": "Split condition statements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NzI3Nzg3", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/946#pullrequestreview-484727787", "createdAt": "2020-09-09T07:23:35Z", "commit": {"oid": "98c0dce0299c6b12587599da59f9e7b2f2e7ba5c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f016cc332795cff2e807acb175165cace937ed9d", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/f016cc332795cff2e807acb175165cace937ed9d", "committedDate": "2020-09-09T07:30:45Z", "message": "Log expired flowable jobs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98c0dce0299c6b12587599da59f9e7b2f2e7ba5c", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/98c0dce0299c6b12587599da59f9e7b2f2e7ba5c", "committedDate": "2020-09-08T15:04:55Z", "message": "Split condition statements"}, "afterCommit": {"oid": "f016cc332795cff2e807acb175165cace937ed9d", "author": {"user": {"login": "theghost5800", "name": "Kristian Atanasov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/f016cc332795cff2e807acb175165cace937ed9d", "committedDate": "2020-09-09T07:30:45Z", "message": "Log expired flowable jobs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 794, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}