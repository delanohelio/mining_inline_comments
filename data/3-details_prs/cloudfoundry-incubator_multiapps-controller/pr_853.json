{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NTExODU0", "number": 853, "title": "Credstore integration", "bodyText": "Prepare multiapps-controller to use SCP credstore\nJira: LMCROSSITXSADEPLOY-729", "createdAt": "2020-05-12T06:20:35Z", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853", "merged": true, "mergeCommit": {"oid": "9f8de4546fd6d6ae31e68fb69d989369d7c91aa0"}, "closed": true, "closedAt": "2020-07-07T08:05:28Z", "author": {"login": "boyan-velinov"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgeLGUABqjMzMjU5MzA3NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyhDskABqjM1MTkxMDcwNzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e81b91f25f8ac6c55cc1a1926e8481e6816a555", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/3e81b91f25f8ac6c55cc1a1926e8481e6816a555", "committedDate": "2020-05-12T06:14:15Z", "message": "Credstore integration"}, "afterCommit": {"oid": "37eaadfb85787a6e4fdc07c66ab643605acc6b80", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/37eaadfb85787a6e4fdc07c66ab643605acc6b80", "committedDate": "2020-05-12T06:20:43Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37eaadfb85787a6e4fdc07c66ab643605acc6b80", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/37eaadfb85787a6e4fdc07c66ab643605acc6b80", "committedDate": "2020-05-12T06:20:43Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}, "afterCommit": {"oid": "06c11cddc9d846cdaefc38026307c89130c32d95", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/06c11cddc9d846cdaefc38026307c89130c32d95", "committedDate": "2020-05-12T10:42:58Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06c11cddc9d846cdaefc38026307c89130c32d95", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/06c11cddc9d846cdaefc38026307c89130c32d95", "committedDate": "2020-05-12T10:42:58Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}, "afterCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/edad4023777cfeeec4243f7d69b82201730a59ba", "committedDate": "2020-05-20T12:29:30Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNDI1MDU0", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#pullrequestreview-430425054", "createdAt": "2020-06-15T08:26:25Z", "commit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODoyNjoyNVrOGjoGMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo1NDowMVrOGjpE8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMDI4OA==", "bodyText": "All new methods except for deleteAll aren't used anywhere (at least as far as I can see). Can we remove them from the PR?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440010288", "createdAt": "2020-06-15T08:26:25Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationEntryQuery.java", "diffHunk": "@@ -19,11 +20,23 @@\n     ConfigurationEntryQuery requiredProperties(Map<String, Object> requiredProperties);\n \n     ConfigurationEntryQuery spaceId(String spaceId);\n+    \n+    ConfigurationEntryQuery spaceIdNotNull();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMjYxNw==", "bodyText": "All new methods except for deleteAll aren't used anywhere (at least as far as I can see). Can we remove them from the PR?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440012617", "createdAt": "2020-06-15T08:30:25Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationSubscriptionQuery.java", "diffHunk": "@@ -19,4 +20,12 @@\n \n     ConfigurationSubscriptionQuery onSelectMatching(List<ConfigurationEntry> entries);\n \n+    ConfigurationSubscriptionQuery moduleIdNull();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNjUyOQ==", "bodyText": "Can we avoid the complexity of having this object be built with Spring bean factories by keeping the @Named and @Inject annotations and add a @Primary annotation to the CredstoreConfigurationEntryMapper class from the internal project? @Profile annotations might also be an option if the first doesn't work.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440016529", "createdAt": "2020-06-15T08:37:21Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationEntryService.java", "diffHunk": "@@ -22,15 +20,13 @@\n import com.sap.cloud.lm.sl.common.util.JsonUtil;\n import com.sap.cloud.lm.sl.mta.model.Version;\n \n-@Named\n public class ConfigurationEntryService extends PersistenceService<ConfigurationEntry, ConfigurationEntryDto, Long> {\n \n-    @Inject\n     protected ConfigurationEntryMapper entryMapper;\n \n-    @Inject\n-    public ConfigurationEntryService(EntityManagerFactory entityManagerFactory) {\n+    public ConfigurationEntryService(EntityManagerFactory entityManagerFactory, ConfigurationEntryMapper entryMapper) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDI3Mg==", "bodyText": "Why do we need this change?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440024272", "createdAt": "2020-06-15T08:50:36Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/PersistenceService.java", "diffHunk": "@@ -39,10 +39,11 @@ public T add(T object) {\n         return null;\n     }\n \n-    public T update(P primaryKey, T newObject) {\n+    public T update(T oldObject, T newObject) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDc2Ng==", "bodyText": "This is not used anywhere. Can we remove it from the PR?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440024766", "createdAt": "2020-06-15T08:51:23Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/util/ConfigurationEntriesUtil.java", "diffHunk": "@@ -23,6 +23,7 @@ private ConfigurationEntriesUtil() {\n \r\n     private static final Logger LOGGER = LoggerFactory.getLogger(ConfigurationEntriesUtil.class);\r\n \r\n+    public static final String EMPTY_CONTENT = \"{}\";\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjI4OA==", "bodyText": "Fix this TODO.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440026288", "createdAt": "2020-06-15T08:53:54Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationSubscriptionServiceTest.java", "diffHunk": "@@ -172,12 +173,14 @@ private void assertConfigurationSubscriptionExists(Long id) {\n     private static ConfigurationSubscription createConfigurationSubscription(long id, String mtaId, String spaceId, String appName,\n                                                                              ConfigurationFilter filter, ModuleDto moduleDto,\n                                                                              ResourceDto resourceDto) {\n-        return new ConfigurationSubscription(id, mtaId, spaceId, appName, filter, moduleDto, resourceDto);\n+        //TODO check moduleid and resourceid", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjM1NA==", "bodyText": "Fix this TODO.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440026354", "createdAt": "2020-06-15T08:54:01Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/security/data/termination/DataTerminationServiceTest.java", "diffHunk": "@@ -154,7 +154,9 @@ private void prepareServices(List<String> deletedSpaces, boolean isExistSubscrip\n                                                                new CloudTarget(),\n                                                                \"\",\n                                                                Collections.emptyList(),\n-                                                               \"\"))\n+                                                               \"\",\n+                                                               //TODO check what should be instead of null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/edad4023777cfeeec4243f7d69b82201730a59ba", "committedDate": "2020-05-20T12:29:30Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}, "afterCommit": {"oid": "fabc495e2ffc94cc4a7e64d944096d7de0a10034", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/fabc495e2ffc94cc4a7e64d944096d7de0a10034", "committedDate": "2020-06-24T12:23:32Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fabc495e2ffc94cc4a7e64d944096d7de0a10034", "author": {"user": {"login": "boyan-velinov", "name": "Boyan Velinov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/fabc495e2ffc94cc4a7e64d944096d7de0a10034", "committedDate": "2020-06-24T12:23:32Z", "message": "Credstore integration\n\nPrepare multiapps-controller to use SCP credstore\n\nJira: LMCROSSITXSADEPLOY-729"}, "afterCommit": {"oid": "5d05c525d78d594640cb5c738ebb7f6b37c54577", "author": {"user": {"login": "IvanBorislavovDimitrov", "name": "Ivan Dimitrov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/5d05c525d78d594640cb5c738ebb7f6b37c54577", "committedDate": "2020-06-25T14:11:27Z", "message": "Fix sonar issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d05c525d78d594640cb5c738ebb7f6b37c54577", "author": {"user": {"login": "IvanBorislavovDimitrov", "name": "Ivan Dimitrov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/5d05c525d78d594640cb5c738ebb7f6b37c54577", "committedDate": "2020-06-25T14:11:27Z", "message": "Fix sonar issues"}, "afterCommit": {"oid": "9c01bf2b95fdca46a7508b49d9be39a98269c892", "author": {"user": {"login": "IvanBorislavovDimitrov", "name": "Ivan Dimitrov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/9c01bf2b95fdca46a7508b49d9be39a98269c892", "committedDate": "2020-07-06T15:28:09Z", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "931a51163235584049dd617227a7dbea47a17c06", "author": {"user": {"login": "IvanBorislavovDimitrov", "name": "Ivan Dimitrov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/931a51163235584049dd617227a7dbea47a17c06", "committedDate": "2020-07-06T15:55:19Z", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c01bf2b95fdca46a7508b49d9be39a98269c892", "author": {"user": {"login": "IvanBorislavovDimitrov", "name": "Ivan Dimitrov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/9c01bf2b95fdca46a7508b49d9be39a98269c892", "committedDate": "2020-07-06T15:28:09Z", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729"}, "afterCommit": {"oid": "931a51163235584049dd617227a7dbea47a17c06", "author": {"user": {"login": "IvanBorislavovDimitrov", "name": "Ivan Dimitrov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/931a51163235584049dd617227a7dbea47a17c06", "committedDate": "2020-07-06T15:55:19Z", "message": "Prepare for secure storing configuration entities\n\nJira: LMCROSSITXSADEPLOY-729"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 910, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}