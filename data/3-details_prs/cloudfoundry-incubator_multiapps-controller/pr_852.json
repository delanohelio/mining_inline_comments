{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTgyMDQ0", "number": 852, "title": "remove logging of app environment without masking", "bodyText": "Description:\nThe CF platform has no notion of sensitive environment variables. Therefore, without additional tracking there is no way to distinguish and mask the sensitive ones in log.\nUntil such a mechanism is implemented, all such tracing is removed.", "createdAt": "2020-05-08T00:17:28Z", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/852", "merged": true, "mergeCommit": {"oid": "a87d90f43faefdb005ca0556f8557e124569da48"}, "closed": true, "closedAt": "2020-05-08T12:57:40Z", "author": {"login": "ddonchev"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfM7rngFqTQwODA1NTc3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfRbbogBqjMzMTY4NTA2Njk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MDU1Nzcy", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/852#pullrequestreview-408055772", "createdAt": "2020-05-08T07:32:51Z", "commit": {"oid": "9c842ee8dd68a612a47b1b15fa3c9601102f4954"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQwNzozMjo1MVrOGScUng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQwNzo0MDoyOVrOGSch6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTk5MTU4Mg==", "bodyText": "Method reference could be used: secureSerializer::toJson", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/852#discussion_r421991582", "createdAt": "2020-05-08T07:32:51Z", "author": {"login": "IvanBorislavovDimitrov"}, "path": "com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/steps/BuildCloudDeployModelStep.java", "diffHunk": "@@ -79,8 +79,10 @@ protected StepPhase executeStep(ProcessContext context) {\n         // Build a list of applications for deployment and save them in the context:\r\n         List<Module> modulesCalculatedForDeployment = calculateModulesForDeployment(context, deploymentDescriptor, mtaArchiveModules,\r\n                                                                                     deployedModuleNames, mtaModules);\r\n-\r\n-        getStepLogger().debug(Messages.MODULES_TO_DEPLOY, secureSerializer.toJson(modulesCalculatedForDeployment));\r\n+        List<String> moduleJsons = modulesCalculatedForDeployment.stream()\r\n+                                                                 .map(module -> secureSerializer.toJson(module))\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c842ee8dd68a612a47b1b15fa3c9601102f4954"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTk5MzI2Mg==", "bodyText": "Could you format this?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/852#discussion_r421993262", "createdAt": "2020-05-08T07:36:41Z", "author": {"login": "IvanBorislavovDimitrov"}, "path": "com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/util/EnvironmentApplicationAttributeUpdater.java", "diffHunk": "@@ -28,10 +28,8 @@ protected void updateAttribute(CloudApplication existingApplication, CloudApplic\n     }\n \n     private Map<String, String> applyUpdateStrategy(Map<String, String> existingEnv, Map<String, String> env) {\n-        getLogger().debug(Messages.EXISTING_ENV_0, JsonUtil.toJson(existingEnv, true));\n-        getLogger().debug(Messages.APPLYING_UPDATE_STRATEGY_0_TO_ENV_1, updateStrategy, JsonUtil.toJson(env, true));\n+        getLogger().debug(Messages.APPLYING_UPDATE_STRATEGY_0_TO_ENV, updateStrategy );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c842ee8dd68a612a47b1b15fa3c9601102f4954"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTk5NDk4Nw==", "bodyText": "The result can be returned directly.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/852#discussion_r421994987", "createdAt": "2020-05-08T07:40:29Z", "author": {"login": "IvanBorislavovDimitrov"}, "path": "com.sap.cloud.lm.sl.cf.process/src/main/java/com/sap/cloud/lm/sl/cf/process/util/EnvironmentApplicationAttributeUpdater.java", "diffHunk": "@@ -28,10 +28,8 @@ protected void updateAttribute(CloudApplication existingApplication, CloudApplic\n     }\n \n     private Map<String, String> applyUpdateStrategy(Map<String, String> existingEnv, Map<String, String> env) {\n-        getLogger().debug(Messages.EXISTING_ENV_0, JsonUtil.toJson(existingEnv, true));\n-        getLogger().debug(Messages.APPLYING_UPDATE_STRATEGY_0_TO_ENV_1, updateStrategy, JsonUtil.toJson(env, true));\n+        getLogger().debug(Messages.APPLYING_UPDATE_STRATEGY_0_TO_ENV, updateStrategy );\n         Map<String, String> result = getElementUpdater().updateMap(existingEnv, env);\n-        getLogger().debug(Messages.RESULT_0, JsonUtil.toJson(result, true));\n         return result;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c842ee8dd68a612a47b1b15fa3c9601102f4954"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b534fa6a550f5d8dc2a227936bf973c7aa4ecbfa", "author": {"user": {"login": "ddonchev", "name": "Dido"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/b534fa6a550f5d8dc2a227936bf973c7aa4ecbfa", "committedDate": "2020-05-08T12:55:57Z", "message": "remove logging of app environment without masking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c842ee8dd68a612a47b1b15fa3c9601102f4954", "author": {"user": {"login": "ddonchev", "name": "Dido"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/9c842ee8dd68a612a47b1b15fa3c9601102f4954", "committedDate": "2020-05-08T00:15:21Z", "message": "remove logging of app environment without masking"}, "afterCommit": {"oid": "b534fa6a550f5d8dc2a227936bf973c7aa4ecbfa", "author": {"user": {"login": "ddonchev", "name": "Dido"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/b534fa6a550f5d8dc2a227936bf973c7aa4ecbfa", "committedDate": "2020-05-08T12:55:57Z", "message": "remove logging of app environment without masking"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 907, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}