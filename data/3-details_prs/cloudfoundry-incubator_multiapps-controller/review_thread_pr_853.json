{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NTExODU0", "number": 853, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODoyNjoyNVrOEFcCcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo1NDowMVrOEFcqmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTM3NzEyOnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationEntryQuery.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODoyNjoyNVrOGjoGMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwOTozMzozMFrOGmOaUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMDI4OA==", "bodyText": "All new methods except for deleteAll aren't used anywhere (at least as far as I can see). Can we remove them from the PR?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440010288", "createdAt": "2020-06-15T08:26:25Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationEntryQuery.java", "diffHunk": "@@ -19,11 +20,23 @@\n     ConfigurationEntryQuery requiredProperties(Map<String, Object> requiredProperties);\n \n     ConfigurationEntryQuery spaceId(String spaceId);\n+    \n+    ConfigurationEntryQuery spaceIdNotNull();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczNTE4Ng==", "bodyText": "Done", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442735186", "createdAt": "2020-06-19T09:33:30Z", "author": {"login": "boyan-velinov"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationEntryQuery.java", "diffHunk": "@@ -19,11 +20,23 @@\n     ConfigurationEntryQuery requiredProperties(Map<String, Object> requiredProperties);\n \n     ConfigurationEntryQuery spaceId(String spaceId);\n+    \n+    ConfigurationEntryQuery spaceIdNotNull();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMDI4OA=="}, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTM5MTk2OnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationSubscriptionQuery.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozMDoyNVrOGjoPSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwOTozODowMFrOGmOiuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMjYxNw==", "bodyText": "All new methods except for deleteAll aren't used anywhere (at least as far as I can see). Can we remove them from the PR?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440012617", "createdAt": "2020-06-15T08:30:25Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationSubscriptionQuery.java", "diffHunk": "@@ -19,4 +20,12 @@\n \n     ConfigurationSubscriptionQuery onSelectMatching(List<ConfigurationEntry> entries);\n \n+    ConfigurationSubscriptionQuery moduleIdNull();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczNzMzNw==", "bodyText": "Done, sorry for the dev leftovers", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442737337", "createdAt": "2020-06-19T09:38:00Z", "author": {"login": "boyan-velinov"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/query/ConfigurationSubscriptionQuery.java", "diffHunk": "@@ -19,4 +20,12 @@\n \n     ConfigurationSubscriptionQuery onSelectMatching(List<ConfigurationEntry> entries);\n \n+    ConfigurationSubscriptionQuery moduleIdNull();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxMjYxNw=="}, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQxNjcyOnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationEntryService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozNzoyMVrOGjoekQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODozNzoyMVrOGjoekQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAxNjUyOQ==", "bodyText": "Can we avoid the complexity of having this object be built with Spring bean factories by keeping the @Named and @Inject annotations and add a @Primary annotation to the CredstoreConfigurationEntryMapper class from the internal project? @Profile annotations might also be an option if the first doesn't work.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440016529", "createdAt": "2020-06-15T08:37:21Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationEntryService.java", "diffHunk": "@@ -22,15 +20,13 @@\n import com.sap.cloud.lm.sl.common.util.JsonUtil;\n import com.sap.cloud.lm.sl.mta.model.Version;\n \n-@Named\n public class ConfigurationEntryService extends PersistenceService<ConfigurationEntry, ConfigurationEntryDto, Long> {\n \n-    @Inject\n     protected ConfigurationEntryMapper entryMapper;\n \n-    @Inject\n-    public ConfigurationEntryService(EntityManagerFactory entityManagerFactory) {\n+    public ConfigurationEntryService(EntityManagerFactory entityManagerFactory, ConfigurationEntryMapper entryMapper) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQ2NjQwOnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/PersistenceService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo1MDozNlrOGjo80A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwOTozOTozMlrOGmOluA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDI3Mg==", "bodyText": "Why do we need this change?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440024272", "createdAt": "2020-06-15T08:50:36Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/PersistenceService.java", "diffHunk": "@@ -39,10 +39,11 @@ public T add(T object) {\n         return null;\n     }\n \n-    public T update(P primaryKey, T newObject) {\n+    public T update(T oldObject, T newObject) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczODEwNA==", "bodyText": "Because we have to inherit it in the internal SAP project", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442738104", "createdAt": "2020-06-19T09:39:32Z", "author": {"login": "boyan-velinov"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/persistence/service/PersistenceService.java", "diffHunk": "@@ -39,10 +39,11 @@ public T add(T object) {\n         return null;\n     }\n \n-    public T update(P primaryKey, T newObject) {\n+    public T update(T oldObject, T newObject) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDI3Mg=="}, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQ2OTUzOnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/util/ConfigurationEntriesUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo1MToyM1rOGjo-vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwOTo0MTowOFrOGmOo6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDc2Ng==", "bodyText": "This is not used anywhere. Can we remove it from the PR?", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440024766", "createdAt": "2020-06-15T08:51:23Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/util/ConfigurationEntriesUtil.java", "diffHunk": "@@ -23,6 +23,7 @@ private ConfigurationEntriesUtil() {\n \r\n     private static final Logger LOGGER = LoggerFactory.getLogger(ConfigurationEntriesUtil.class);\r\n \r\n+    public static final String EMPTY_CONTENT = \"{}\";\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjczODkyMA==", "bodyText": "Done - dev leftover", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442738920", "createdAt": "2020-06-19T09:41:08Z", "author": {"login": "boyan-velinov"}, "path": "com.sap.cloud.lm.sl.cf.core/src/main/java/com/sap/cloud/lm/sl/cf/core/util/ConfigurationEntriesUtil.java", "diffHunk": "@@ -23,6 +23,7 @@ private ConfigurationEntriesUtil() {\n \r\n     private static final Logger LOGGER = LoggerFactory.getLogger(ConfigurationEntriesUtil.class);\r\n \r\n+    public static final String EMPTY_CONTENT = \"{}\";\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNDc2Ng=="}, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQ3OTYxOnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationSubscriptionServiceTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo1Mzo1NFrOGjpEsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMDowNTo1MlrOGmPZVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjI4OA==", "bodyText": "Fix this TODO.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440026288", "createdAt": "2020-06-15T08:53:54Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationSubscriptionServiceTest.java", "diffHunk": "@@ -172,12 +173,14 @@ private void assertConfigurationSubscriptionExists(Long id) {\n     private static ConfigurationSubscription createConfigurationSubscription(long id, String mtaId, String spaceId, String appName,\n                                                                              ConfigurationFilter filter, ModuleDto moduleDto,\n                                                                              ResourceDto resourceDto) {\n-        return new ConfigurationSubscription(id, mtaId, spaceId, appName, filter, moduleDto, resourceDto);\n+        //TODO check moduleid and resourceid", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1MTMxNg==", "bodyText": "Done - the values should be null", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442751316", "createdAt": "2020-06-19T10:05:52Z", "author": {"login": "boyan-velinov"}, "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/persistence/service/ConfigurationSubscriptionServiceTest.java", "diffHunk": "@@ -172,12 +173,14 @@ private void assertConfigurationSubscriptionExists(Long id) {\n     private static ConfigurationSubscription createConfigurationSubscription(long id, String mtaId, String spaceId, String appName,\n                                                                              ConfigurationFilter filter, ModuleDto moduleDto,\n                                                                              ResourceDto resourceDto) {\n-        return new ConfigurationSubscription(id, mtaId, spaceId, appName, filter, moduleDto, resourceDto);\n+        //TODO check moduleid and resourceid", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjI4OA=="}, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTQ3OTk1OnYy", "diffSide": "RIGHT", "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/security/data/termination/DataTerminationServiceTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwODo1NDowMVrOGjpE8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMDoxNTo1MlrOGmPr3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjM1NA==", "bodyText": "Fix this TODO.", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r440026354", "createdAt": "2020-06-15T08:54:01Z", "author": {"login": "nictas"}, "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/security/data/termination/DataTerminationServiceTest.java", "diffHunk": "@@ -154,7 +154,9 @@ private void prepareServices(List<String> deletedSpaces, boolean isExistSubscrip\n                                                                new CloudTarget(),\n                                                                \"\",\n                                                                Collections.emptyList(),\n-                                                               \"\"))\n+                                                               \"\",\n+                                                               //TODO check what should be instead of null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1NjA2MA==", "bodyText": "Done - should be null", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/853#discussion_r442756060", "createdAt": "2020-06-19T10:15:52Z", "author": {"login": "boyan-velinov"}, "path": "com.sap.cloud.lm.sl.cf.core/src/test/java/com/sap/cloud/lm/sl/cf/core/security/data/termination/DataTerminationServiceTest.java", "diffHunk": "@@ -154,7 +154,9 @@ private void prepareServices(List<String> deletedSpaces, boolean isExistSubscrip\n                                                                new CloudTarget(),\n                                                                \"\",\n                                                                Collections.emptyList(),\n-                                                               \"\"))\n+                                                               \"\",\n+                                                               //TODO check what should be instead of null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyNjM1NA=="}, "originalCommit": {"oid": "edad4023777cfeeec4243f7d69b82201730a59ba"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 524, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}