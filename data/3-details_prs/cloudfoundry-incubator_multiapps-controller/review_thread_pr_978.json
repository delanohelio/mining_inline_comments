{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMTA5OTE4", "number": 978, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNzo1OToyOFrOEs6eqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjoxN1rOEs6ihA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTMwOTIxOnYy", "diffSide": "LEFT", "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNzo1OToyOFrOHgaIOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNzo1OToyOFrOHgaIOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NDU3MA==", "bodyText": "Revert this back to what it was. existingService.getCredentials() will always be empty anyway, since the controller doesn't return the actual credentials (host, username, password, etc.) when calling /v2/service_instances/:guid (at least as far as I know). Even if it does you're comparing apples to oranges here, as service.getCredentials() are basically the service instance parameters, whereas existingService.getCredentials() are the actual credentials returned by the broker. Yes, there's a lot of complexity in this line and what I've written is just half of it. :D", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#discussion_r503744570", "createdAt": "2020-10-13T07:59:28Z", "author": {"login": "nictas"}, "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "diffHunk": "@@ -273,10 +268,9 @@ private boolean shouldUpdateCredentials(CloudServiceInstanceExtended service, Cl\n             getStepLogger().debug(\"Existing service parameters: \" + SecureSerialization.toJson(serviceParameters));\n             return !Objects.equals(service.getCredentials(), serviceParameters);\n         } catch (CloudOperationException e) {\n-            if (HttpStatus.NOT_IMPLEMENTED == e.getStatusCode() || HttpStatus.BAD_REQUEST == e.getStatusCode()) {\n+            if (e.getStatusCode() == HttpStatus.BAD_REQUEST) {\n                 getStepLogger().warnWithoutProgressMessage(Messages.CANNOT_RETRIEVE_SERVICE_INSTANCE_PARAMETERS, service.getName());\n-                // TODO: Optimization (Hack) that should be deprecated at some point. So here is a todo for that.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTMxOTA4OnYy", "diffSide": "LEFT", "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjoxN1rOHgaOnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjoxN1rOHgaOnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NjIwNA==", "bodyText": "I feel a bit iffy about this change, but let's see how it works out. :D", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#discussion_r503746204", "createdAt": "2020-10-13T08:02:17Z", "author": {"login": "nictas"}, "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "diffHunk": "@@ -273,10 +268,9 @@ private boolean shouldUpdateCredentials(CloudServiceInstanceExtended service, Cl\n             getStepLogger().debug(\"Existing service parameters: \" + SecureSerialization.toJson(serviceParameters));\n             return !Objects.equals(service.getCredentials(), serviceParameters);\n         } catch (CloudOperationException e) {\n-            if (HttpStatus.NOT_IMPLEMENTED == e.getStatusCode() || HttpStatus.BAD_REQUEST == e.getStatusCode()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e"}, "originalPosition": 82}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 445, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}