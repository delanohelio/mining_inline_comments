{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMTA5OTE4", "number": 978, "title": "Adopt cf-java-client 1.31.2", "bodyText": "", "createdAt": "2020-10-11T09:41:48Z", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978", "merged": true, "mergeCommit": {"oid": "c2f5ab092bf0388981cbdf0c880575cd1c12b523"}, "closed": true, "closedAt": "2020-10-13T11:39:39Z", "author": {"login": "radito3"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR2t2TABqjM4Njc0NjEwNzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSHBoDgFqTUwNzM0MTM2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f151391e5c2a879eab625c2870d7fad6b09d6fa", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/2f151391e5c2a879eab625c2870d7fad6b09d6fa", "committedDate": "2020-10-11T09:15:26Z", "message": "Adopt cf-java-client 1.31.2"}, "afterCommit": {"oid": "3183cb8f01437d153d6384269fbea1c5fe583835", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/3183cb8f01437d153d6384269fbea1c5fe583835", "committedDate": "2020-10-12T16:38:43Z", "message": "Adopt cf-java-client 1.31.2"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3183cb8f01437d153d6384269fbea1c5fe583835", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/3183cb8f01437d153d6384269fbea1c5fe583835", "committedDate": "2020-10-12T16:38:43Z", "message": "Adopt cf-java-client 1.31.2"}, "afterCommit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/b39dcc21c91d4b12864c01d69554d30642b2b27e", "committedDate": "2020-10-12T16:41:13Z", "message": "Adopt cf-java-client 1.31.2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTY1NjM5", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#pullrequestreview-507165639", "createdAt": "2020-10-13T07:59:28Z", "commit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNzo1OToyOFrOHgaIOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjoxN1rOHgaOnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NDU3MA==", "bodyText": "Revert this back to what it was. existingService.getCredentials() will always be empty anyway, since the controller doesn't return the actual credentials (host, username, password, etc.) when calling /v2/service_instances/:guid (at least as far as I know). Even if it does you're comparing apples to oranges here, as service.getCredentials() are basically the service instance parameters, whereas existingService.getCredentials() are the actual credentials returned by the broker. Yes, there's a lot of complexity in this line and what I've written is just half of it. :D", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#discussion_r503744570", "createdAt": "2020-10-13T07:59:28Z", "author": {"login": "nictas"}, "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "diffHunk": "@@ -273,10 +268,9 @@ private boolean shouldUpdateCredentials(CloudServiceInstanceExtended service, Cl\n             getStepLogger().debug(\"Existing service parameters: \" + SecureSerialization.toJson(serviceParameters));\n             return !Objects.equals(service.getCredentials(), serviceParameters);\n         } catch (CloudOperationException e) {\n-            if (HttpStatus.NOT_IMPLEMENTED == e.getStatusCode() || HttpStatus.BAD_REQUEST == e.getStatusCode()) {\n+            if (e.getStatusCode() == HttpStatus.BAD_REQUEST) {\n                 getStepLogger().warnWithoutProgressMessage(Messages.CANNOT_RETRIEVE_SERVICE_INSTANCE_PARAMETERS, service.getName());\n-                // TODO: Optimization (Hack) that should be deprecated at some point. So here is a todo for that.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NjIwNA==", "bodyText": "I feel a bit iffy about this change, but let's see how it works out. :D", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#discussion_r503746204", "createdAt": "2020-10-13T08:02:17Z", "author": {"login": "nictas"}, "path": "multiapps-controller-process/src/main/java/org/cloudfoundry/multiapps/controller/process/steps/DetermineServiceCreateUpdateServiceActionsStep.java", "diffHunk": "@@ -273,10 +268,9 @@ private boolean shouldUpdateCredentials(CloudServiceInstanceExtended service, Cl\n             getStepLogger().debug(\"Existing service parameters: \" + SecureSerialization.toJson(serviceParameters));\n             return !Objects.equals(service.getCredentials(), serviceParameters);\n         } catch (CloudOperationException e) {\n-            if (HttpStatus.NOT_IMPLEMENTED == e.getStatusCode() || HttpStatus.BAD_REQUEST == e.getStatusCode()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aedd069a6a4f6cb1e824aa6f6838b5d9c5df7754", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/aedd069a6a4f6cb1e824aa6f6838b5d9c5df7754", "committedDate": "2020-10-13T11:37:30Z", "message": "Reduce methods parameters in DetermineServiceCreateUpdateServiceActionsStep"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62782f26f40a3d8c26d5ebc4374088872ce24d5d", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/62782f26f40a3d8c26d5ebc4374088872ce24d5d", "committedDate": "2020-10-13T11:37:30Z", "message": "Adopt cf-java-client 1.31.2"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b39dcc21c91d4b12864c01d69554d30642b2b27e", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/b39dcc21c91d4b12864c01d69554d30642b2b27e", "committedDate": "2020-10-12T16:41:13Z", "message": "Adopt cf-java-client 1.31.2"}, "afterCommit": {"oid": "62782f26f40a3d8c26d5ebc4374088872ce24d5d", "author": {"user": {"login": "radito3", "name": "Rangel Ivanov"}}, "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/commit/62782f26f40a3d8c26d5ebc4374088872ce24d5d", "committedDate": "2020-10-13T11:37:30Z", "message": "Adopt cf-java-client 1.31.2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MzQxMzY4", "url": "https://github.com/cloudfoundry-incubator/multiapps-controller/pull/978#pullrequestreview-507341368", "createdAt": "2020-10-13T11:38:59Z", "commit": {"oid": "62782f26f40a3d8c26d5ebc4374088872ce24d5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 827, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}