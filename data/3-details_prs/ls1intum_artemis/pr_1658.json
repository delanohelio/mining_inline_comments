{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0OTMzMzgx", "number": 1658, "title": "[Exam] File upload exercises for exam mode", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I added multiple integration tests (Jest) related to the features\n Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nFile upload exercise CRUD operations must be adapted for exam mode.\nDescription\nClient:\n\n Created new client routes for text-exercise update and creation\nFor creation: ':examId/exercise-groups/:groupId/file-upload-exercises/new'\nFor update: ':examId/exercise-groups/:groupId/file-upload-exercises/:exerciseId/edit'\n Load file upload exercise module\n Extend FileUploadExerciseResolver by fetching of exerciseGroup for the new routes\n Deactivate categories in exam mode, as this relies on a Course\n Added \"Add file upload exercise\" button to exercise group component\n Refactored the TextExerciseRowButtonsComponent. This component is responsible for displaying  edit and delete button of exam exercises. The component can now be used for all exercise types.\n Added exam mode to TextExercise and FileUploadExercise Detail Component.\n\nServer:\n\n Check that course and exerciseGroup is never set simultaneously for creation/update\n Extend exercise creation/update authorization check for exam mode\n Deactivate Tutor/Student notification on exercise creation/update\n Add additional authorization check to GET file upload exercise route. Only instructors and admins should be allowed to access an exam file upload exercise\n GET for exam text and file upload exercises now also returns the exam and course. The client can use this to build the right routes for example for the Edit button of the Detail Component\n Adapted authorization check for deletion\n Refactored course retrieval over ExerciseGroups\n\nWe still have a problem with client route consistency. For example we only use the exerciseId of edit routes such as course-management/:courseId/exams/:examId/exercise-groups/:groupId/file-upload-exercises/:exerciseId/edit to retrieve the exercise. The other id are not used and could be anything. This is not a security problem as the server still does all the authorization checks. Nevertheless this should be fixed in the future\nSteps for Testing\nEnsure that the existing CRUD operations for regular file upload exercises still work\n\nLog in as admin or instructor\nCreate a regular file upload exercise\n--> Exercise was created\nUpdate the exercise\n--> Exercise was updated\nView the exercise\n--> Can open the page\nDelete the exercise\n--> Exercise was deleted\n\nEnsure that CRUD operations for exam file upload exercises work\n\nLog in as admin or instructor\nCreate an exam\nCreate an exercise group\nCreate a file upload exercise\n--> Exercise was created\nEdit the file upload exercise\n--> Can update the file upload exercise\nNavigate to /course-management/:courseId/file-upload-exercises/:exerciseId using the id of an exam file upload exercise\n--> Should be able to see the exercise\nDelete the exercise\n--> Exercise was deleted\n\nEnsure correct authorization for file upload exercises\n\nLog in as a tutor or student\nNavigate to course-management/:courseId/exams/:examId/exercise-groups/:groupId/file-upload-exercises/new\n--> You should not be able to access the route\nUse the id of an exam exercise for the following steps\nNavigate to course-management/:courseId/exams/:examId/exercise-groups/:groupId/file-upload-exercises/:exerciseId/edit\n--> You should not be able to access the route\nNavigate to /course-management/:courseId/file-upload-exercises/:exerciseId\n--> You should not be able to see the exercise\n\nPlease also test regular and exam text exercises again as the component which displays buttons such as edit, view, teams (for regular exercise) was refactored.\nScreenshots", "createdAt": "2020-06-16T02:23:49Z", "url": "https://github.com/ls1intum/Artemis/pull/1658", "merged": true, "mergeCommit": {"oid": "db90b003c4d0bf667d6537582af79a2d830a896f"}, "closed": true, "closedAt": "2020-06-18T14:06:44Z", "author": {"login": "kloessst"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrm5U3AH2gAyNDM0OTMzMzgxOjU5M2JhYTkxZDI4NjQ3YmJiMzdjYmRmMGZhZWU5MDM1NjAxZDQ5MmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsfAplgFqTQzMzMxOTE3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "593baa91d28647bbb37cbdf0faee9035601d492d", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/593baa91d28647bbb37cbdf0faee9035601d492d", "committedDate": "2020-06-15T20:43:50Z", "message": "Create client routes for exam file-upload exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ddb5e733a952baac72a3d053323546ff484bf37", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/0ddb5e733a952baac72a3d053323546ff484bf37", "committedDate": "2020-06-15T21:04:47Z", "message": "Extend FileUploadExerciseResolver by exerciseGroup support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f3fd9e437f26c2c1475f06351d7d587f03ed463", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/8f3fd9e437f26c2c1475f06351d7d587f03ed463", "committedDate": "2020-06-15T21:17:54Z", "message": "Adapt FileUploadUpdateComponent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f7588703ca655c47641b67b09bdc8b86994b18c", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/5f7588703ca655c47641b67b09bdc8b86994b18c", "committedDate": "2020-06-15T21:29:02Z", "message": "Extended FileUploadUpdateComponent client tests for exam mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92754f1d5ee448d1b170e0ddd7712fd5f91fc998", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/92754f1d5ee448d1b170e0ddd7712fd5f91fc998", "committedDate": "2020-06-15T21:36:26Z", "message": "Adjust creation of file upload exercise for exam mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a24aff99d81d24c669a15e4f4bb646d1ae7fe22d", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/a24aff99d81d24c669a15e4f4bb646d1ae7fe22d", "committedDate": "2020-06-15T21:37:22Z", "message": "Merge branch 'develop' into exam/management/file-upload-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bd10e0e3ce9a7217732651b6e382b2b0fab2572", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3bd10e0e3ce9a7217732651b6e382b2b0fab2572", "committedDate": "2020-06-15T22:21:55Z", "message": "Integration tests for file upload exercise creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a2c1b7e1a13938e586cae593d41b630450a0f4c", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/6a2c1b7e1a13938e586cae593d41b630450a0f4c", "committedDate": "2020-06-16T00:46:28Z", "message": "File upload exercise update functionality for exams with integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18c490cfd07d312271700306a1553a63e1de6fe7", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/18c490cfd07d312271700306a1553a63e1de6fe7", "committedDate": "2020-06-16T01:55:31Z", "message": "Get for exam file upload exercises and integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0da46a44111c03f0d5541a93e8919383df84d968", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/0da46a44111c03f0d5541a93e8919383df84d968", "committedDate": "2020-06-16T02:19:45Z", "message": "Delete for file upload exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3164699121b6ea2e02aa7026df1d0934c6e74930", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3164699121b6ea2e02aa7026df1d0934c6e74930", "committedDate": "2020-06-16T02:28:15Z", "message": "Fix comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a31d1145f5bd103cf4c3c43a638829a6be263cb", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/1a31d1145f5bd103cf4c3c43a638829a6be263cb", "committedDate": "2020-06-16T21:37:15Z", "message": "Merge develop. Resolve conflict in exam-management-module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "417771796811e18dbc72fcff68494a8048b2c819", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/417771796811e18dbc72fcff68494a8048b2c819", "committedDate": "2020-06-16T21:56:13Z", "message": "Add button for file upload exercise creation to exerciseGroup component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d169e7b81f220bf3ea85492daf9623e936ad7801", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d169e7b81f220bf3ea85492daf9623e936ad7801", "committedDate": "2020-06-17T00:18:06Z", "message": "Refactored TextExerciseRowButtonsComponent. It can now be used to display the buttons for all exerciseTypes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3441b6ae6a05373bcf6bdc49f62959fa3e92655e", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3441b6ae6a05373bcf6bdc49f62959fa3e92655e", "committedDate": "2020-06-17T00:21:01Z", "message": "Merge branch 'develop' into exam/management/file-upload-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "403ea914fb7a5176df0fb8ac202a135c5aea278f", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/403ea914fb7a5176df0fb8ac202a135c5aea278f", "committedDate": "2020-06-17T17:19:52Z", "message": "On GET exam text-exercise the server now sends exerciseGroup, exam and course to the client. Add exam mode to TextExerciseDetailComponent."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff934bf746f66c2283520d45a8f08723f1773d3b", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/ff934bf746f66c2283520d45a8f08723f1773d3b", "committedDate": "2020-06-17T17:21:21Z", "message": "Update client test of TextExerciseDetailComponent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab5d25d78bf0fa5af95760dbb7bdba1fa11cbac2", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/ab5d25d78bf0fa5af95760dbb7bdba1fa11cbac2", "committedDate": "2020-06-17T17:22:32Z", "message": "Merge branch 'develop' into exam/management/file-upload-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09fca413c090fce18a20f604183040d912daded5", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/09fca413c090fce18a20f604183040d912daded5", "committedDate": "2020-06-17T18:14:36Z", "message": "Fix edit button on file upload exercise detail page."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b3f97f759b01d6276e6fd84a12f40a2d43abb6d", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3b3f97f759b01d6276e6fd84a12f40a2d43abb6d", "committedDate": "2020-06-17T18:29:12Z", "message": "Refactor retrieval of course over exerciseGroup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59160c6f62f72b14ee19afbf24314d83e6d311e3", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/59160c6f62f72b14ee19afbf24314d83e6d311e3", "committedDate": "2020-06-17T18:31:55Z", "message": "Remove button check as it doesn't work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a763cbab68a21fb97ed28e54d9276381366a25a", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/6a763cbab68a21fb97ed28e54d9276381366a25a", "committedDate": "2020-06-17T18:36:55Z", "message": "Set exam mode flag to true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a053cc2f7ee95e082418690c0bf6d04f94a75c0c", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/a053cc2f7ee95e082418690c0bf6d04f94a75c0c", "committedDate": "2020-06-17T18:46:13Z", "message": "Fix missing return"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b", "committedDate": "2020-06-18T12:34:13Z", "message": "Merge branch 'develop' into exam/management/file-upload-exercise"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMjQzMDk4", "url": "https://github.com/ls1intum/Artemis/pull/1658#pullrequestreview-433243098", "createdAt": "2020-06-18T12:43:25Z", "commit": {"oid": "c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMjQyMzY2", "url": "https://github.com/ls1intum/Artemis/pull/1658#pullrequestreview-433242366", "createdAt": "2020-06-18T12:42:30Z", "commit": {"oid": "c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjo0MjozMFrOGltg1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMzoxMDo0OFrOGluksg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE5NjE4Mg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/ls1intum/Artemis/pull/1658#discussion_r442196182", "createdAt": "2020-06-18T12:42:30Z", "author": {"login": "sascha11110"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileUploadExerciseResource.java", "diffHunk": "@@ -127,22 +148,29 @@ private boolean isFilePatternValid(FileUploadExercise exercise) {\n     public ResponseEntity<FileUploadExercise> updateFileUploadExercise(@RequestBody FileUploadExercise fileUploadExercise,\n             @RequestParam(value = \"notificationText\", required = false) String notificationText, @PathVariable Long exerciseId) throws URISyntaxException {\n         log.debug(\"REST request to update FileUploadExercise : {}\", fileUploadExercise);\n-        // fetch course from database to make sure client didn't change groups\n-        Course course = courseService.findOne(fileUploadExercise.getCourse().getId());\n+\n+        // TODO: The route has an exerciseId but we don't do anything useful with it. Change route and client requests?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjIxMzU1NA==", "bodyText": "Should be reverted on release :-)", "url": "https://github.com/ls1intum/Artemis/pull/1658#discussion_r442213554", "createdAt": "2020-06-18T13:10:48Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -21,7 +21,7 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n     predicate: string;\n     reverse: boolean;\n     showOnlyActive = true;\n-    showExamButton = false;\n+    showExamButton = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMzE5MTc1", "url": "https://github.com/ls1intum/Artemis/pull/1658#pullrequestreview-433319175", "createdAt": "2020-06-18T14:06:31Z", "commit": {"oid": "c7f861bfdb2c0ecbd84aa0c4f34d9f50c0dcbc0b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2435, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}