{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NzgwMjkx", "number": 1477, "title": "Quiz Performance and Usability Improvements", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\nWe had performance issues with quizzes due to many reloads and a full inbound WS queue due to slow communication in the outbound WS queue.\nDescription\nWe investigated the issues in more detail and significantly improved the performance of the quiz submission from a few milliseconds (sometimes hundreds of milliseconds) to a few microseconds. So without taking the time of the JSON serialization / deserialization into account, quiz submissions should be 1000x faster than previously \ud83e\udd47\nWe changed the following:\n\n We removed the confirmation (outbound) WS message for quiz submissions to lower the stress of the outbound WS queue and make the submissions faster. This means automatic quiz submissions (i.e. when users change their answers in the quiz) are not confirmed any more. In case the client is connected via WS, we assume that saving worked correctly without problems. In case the client is disconnected via WS, automatic saving fails which is displayed. This change might slightly decrease the reliability of the automatic save mechanism.\n To deal better with cases, where the inbound WS queue is not empty, we now use a REST call, when the user clicks on Submit.\n We increased the grace period for quizzes, in case of delayed messages to the server, more quiz submissions will be counted\n We improved the caching of exercises to reduce the database impact in quiz submissions\n We use saveAll instead of a for loop and save to improve the database write performance when users have submitted their quiz answers\n We added a refresh button for visible quizzes without start date (that have not yet started). In case the quiz starts while the user is disconnected, the user can press the refresh button and does not have to reload the page\n We increased the font size for the Disconnect warning\n When a quiz is visible, but not yet started in the quiz participation page, it can happen that the client is disconnected from the server. In case the client is connected again, it should automatically refresh the page so that students don't miss the quiz in such cases\n Improve error handling when quiz submit does work. Currently, a generic message is shown in the client, this should be improved though\n\nAdditional code improvements:\n\n Fix the REST route for re-evaluate\n\nSteps for Testing\n\nParticipate in live quizzes in different ways:\n\n\nStart the quiz manually (instructor) while it is open (student) --> it should start automatically\n1a) Do the same while being offline (student), go back online, the quiz should start automatically when you have reconnected\nStart the quiz manually (instructor) while you are in the exercise list of the course (student) --> if you navigate into the quiz, it should start\nConfigure a quiz to start automatically (instructor) --> navigate in the quiz as student (it should start at the start time of the quiz)\n3a) Do the same while being offline (student), go back online, the quiz should start automatically when you have reconnected\n\n\nTry out different scenarios for disconnects:\n\n\nDisconnect before the quiz starts and reconnect after quiz start\nDisconnect during the quiz (keep changing answers) and reconnect before the quiz ends (the last version should be saved automatically then)\nDisconnect during the quiz (keep changing answers) and reconnect after the quiz ends.\n==> Check that the messages shown to the user make sense and include useful information.\n\n\nCheck other edge cases and inspect the network traffic so that no information is processed that the student should not see (e.g. answers to quiz questions before the quiz ends and quiz questions before the quiz starts)", "createdAt": "2020-05-15T19:57:20Z", "url": "https://github.com/ls1intum/Artemis/pull/1477", "merged": true, "mergeCommit": {"oid": "fb46e88cab2ea6e9fca6d3ec6a63efa3b2e521f5"}, "closed": true, "closedAt": "2020-05-26T15:44:06Z", "author": {"login": "sleiss"}, "timelineItems": {"totalCount": 63, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchmca0gH2gAyNDE4NzgwMjkxOjJmY2QxMGJmNGRmYzhjMWQxMTRiZmU1MDliNDI2MDQ5YTgzZWQ3MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclGQn2AFqTQxODQwNjIwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2fcd10bf4dfc8c1d114bfe509b426049a83ed726", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/2fcd10bf4dfc8c1d114bfe509b426049a83ed726", "committedDate": "2020-05-15T18:33:01Z", "message": "Add debug for quiz save."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a971b0ce331297e26c39b6201410692cd28da87", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/0a971b0ce331297e26c39b6201410692cd28da87", "committedDate": "2020-05-15T19:15:46Z", "message": "Change log level back to info."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cee5fd17cacc85615f647d1af9d4d3689c476ed2", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/cee5fd17cacc85615f647d1af9d4d3689c476ed2", "committedDate": "2020-05-15T19:55:43Z", "message": "Add more debug."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa359f8c4f42426992a632b388f24680741bec27", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fa359f8c4f42426992a632b388f24680741bec27", "committedDate": "2020-05-15T20:56:14Z", "message": "do not block inbound channel during quiz, cache quiz exercise to prevent database access"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ec600ceb2456889a9b21e52945682040462925b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/3ec600ceb2456889a9b21e52945682040462925b", "committedDate": "2020-05-20T07:56:07Z", "message": "changed font size to 18px for disconnect message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aec53f22a6247c41b6779e608abf2bad73ad3e68", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/aec53f22a6247c41b6779e608abf2bad73ad3e68", "committedDate": "2020-05-20T07:56:50Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc92eed24fd0e755290be9b06555433d9e38fb53", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/dc92eed24fd0e755290be9b06555433d9e38fb53", "committedDate": "2020-05-22T11:59:04Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "023a27bb9ff4b367bc50c2be523c10b20d631f42", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/023a27bb9ff4b367bc50c2be523c10b20d631f42", "committedDate": "2020-05-22T19:06:32Z", "message": "further improve quiz performance\n\nsubmit is now a REST call\nuse quiz exercise hashmap properly\ndo not send quiz submissions back to the client for websockets to prevent WS.outbound queue of getting full due to slow clients\nlarger gab between quiz schedule calls\nincreased grace period at the end of the quiz to avoid problems during high server load"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "268277340c78f5f2549b87ec73b3a5fdb00fb589", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/268277340c78f5f2549b87ec73b3a5fdb00fb589", "committedDate": "2020-05-22T20:07:02Z", "message": "try to break dependency cycle, fix documentation and fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77070ee8358c3a9218132837d78c2404d338b5fb", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/77070ee8358c3a9218132837d78c2404d338b5fb", "committedDate": "2020-05-22T20:58:59Z", "message": "try to fix circular depdency, test 1000 quiz submissions, improve performance for quiz schedule service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b1049d2b7e3d7d0bac6532b3b949f8b3ef1acd6", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/6b1049d2b7e3d7d0bac6532b3b949f8b3ef1acd6", "committedDate": "2020-05-23T06:18:08Z", "message": "improve quiz processing in quiz schedule service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04eafcefb6bee37e55c6ba82741bf9177d73a6f1", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/04eafcefb6bee37e55c6ba82741bf9177d73a6f1", "committedDate": "2020-05-23T06:37:04Z", "message": "logging improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8831b7f31baf47e9e80a3ff9e5f0cb7f76b4d48f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8831b7f31baf47e9e80a3ff9e5f0cb7f76b4d48f", "committedDate": "2020-05-23T07:34:29Z", "message": "improve re-evaluate URL, try to fix flaky test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b56c48767b1d2db00115806ae670d2449c9d63c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1b56c48767b1d2db00115806ae670d2449c9d63c", "committedDate": "2020-05-23T08:50:42Z", "message": "another attempt to fix the test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85d00b08bbaec9032069d92249afe49fb0ceef73", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/85d00b08bbaec9032069d92249afe49fb0ceef73", "committedDate": "2020-05-23T11:04:13Z", "message": "added refresh button in quiz participation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4b24ee57a0373845575c3a608e7c4bea120ee7e", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d4b24ee57a0373845575c3a608e7c4bea120ee7e", "committedDate": "2020-05-23T11:04:42Z", "message": "Merge branch 'fix/add-debug-for-quiz-save' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0835393e86e7400ebecf8792c9f646173b9c7c2a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/0835393e86e7400ebecf8792c9f646173b9c7c2a", "committedDate": "2020-05-23T11:07:35Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "297c5e54a4a244f51f8349f40bedb5f0e86dd4a8", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/297c5e54a4a244f51f8349f40bedb5f0e86dd4a8", "committedDate": "2020-05-23T16:34:00Z", "message": "Update quiz simulation to answer questions one by one."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "025a1dd04777ac0e6bdff7de35d70e7d2f9742f5", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/025a1dd04777ac0e6bdff7de35d70e7d2f9742f5", "committedDate": "2020-05-23T17:21:10Z", "message": "added start-now case into QuizExerciseService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd9b9a6ac435034f13631aa3553356977fe3e9e8", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/bd9b9a6ac435034f13631aa3553356977fe3e9e8", "committedDate": "2020-05-23T17:22:32Z", "message": "added Modal and WebSocket when quiz starts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c225e400e0c319e5d37355911068c3a6bb8c728b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c225e400e0c319e5d37355911068c3a6bb8c728b", "committedDate": "2020-05-23T17:22:39Z", "message": "Merge branch 'fix/add-debug-for-quiz-save' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc54c0e3eb74fcc61418b574186d63308247169d", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/bc54c0e3eb74fcc61418b574186d63308247169d", "committedDate": "2020-05-23T18:24:00Z", "message": "fixed issue with modal\ndelete console logs\nadded translations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28dc4dd015621921f4eeb05d3b767dad8ed6f44a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/28dc4dd015621921f4eeb05d3b767dad8ed6f44a", "committedDate": "2020-05-23T18:24:20Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzM3Mzkz", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-417337393", "createdAt": "2020-05-24T08:22:45Z", "commit": {"oid": "28dc4dd015621921f4eeb05d3b767dad8ed6f44a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwODoyMjo0NVrOGZtbVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwODoyMjo0NVrOGZtbVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYxMTg2Mw==", "bodyText": "This is not a good change. It will lead to the case, that quizzes won't start automatically when students have opened them before. I think we should unify the web socket channels here", "url": "https://github.com/ls1intum/Artemis/pull/1477#discussion_r429611863", "createdAt": "2020-05-24T08:22:45Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/QuizExerciseService.java", "diffHunk": "@@ -335,12 +346,14 @@ public void sendQuizExerciseToSubscribedClients(QuizExercise quizExercise, Strin\n             if (quizChange.equals(\"set-visible\")) {\n                 // the quiz id is not yet known to the client, we need to use a more generic topic\n                 messagingTemplate.send(\"/topic/\" + quizExercise.getCourse().getId() + \"/quizExercises\", MessageBuilder.withPayload(payload).build());\n-                // TODO: start-now would also be interesting to be supported in the client, but needs to be handled differently in the client\n+            } else if(quizChange.equals(\"start-now\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28dc4dd015621921f4eeb05d3b767dad8ed6f44a"}, "originalPosition": 164}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6b1cbbecd938673495b713e0525c44178bc6200", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c6b1cbbecd938673495b713e0525c44178bc6200", "committedDate": "2020-05-24T08:25:15Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67a48256aff9f29452fb49b68bee9283f31170b7", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/67a48256aff9f29452fb49b68bee9283f31170b7", "committedDate": "2020-05-24T08:40:09Z", "message": "Changes to quiz simulation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffde67172fcb46fad4eacc27c45b3438e12d66ec", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/ffde67172fcb46fad4eacc27c45b3438e12d66ec", "committedDate": "2020-05-24T08:40:19Z", "message": "Merge remote-tracking branch 'origin/fix/add-debug-for-quiz-save' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fd09dfeccfd09d318c119a528e41fc6fa434101", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/0fd09dfeccfd09d318c119a528e41fc6fa434101", "committedDate": "2020-05-24T08:45:02Z", "message": "try to fix type script errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6c2d6312a74c070900dc2b3e3a1204b51617a05", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d6c2d6312a74c070900dc2b3e3a1204b51617a05", "committedDate": "2020-05-24T08:47:56Z", "message": "Merge branch 'fix/add-debug-for-quiz-save' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "169eb164a21c7dfd2f039e67eb13a191f7d2f3c6", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/169eb164a21c7dfd2f039e67eb13a191f7d2f3c6", "committedDate": "2020-05-24T08:53:15Z", "message": "Use timeout from argument."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "044d3ab88542c3c43d26daf5aee2cde222a02d60", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/044d3ab88542c3c43d26daf5aee2cde222a02d60", "committedDate": "2020-05-24T09:32:55Z", "message": "further bugfixes and improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67f6bbc922076631ab023041fbf89ecac4062849", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/67f6bbc922076631ab023041fbf89ecac4062849", "committedDate": "2020-05-24T09:45:35Z", "message": "do not show refresh button for quizzes planned to start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d37d6c1f5d526741218c02555c26eb8736ca951d", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d37d6c1f5d526741218c02555c26eb8736ca951d", "committedDate": "2020-05-24T09:47:09Z", "message": "run prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d605c6092b80fa36763f4313b3d199e4374663ad", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/d605c6092b80fa36763f4313b3d199e4374663ad", "committedDate": "2020-05-24T10:24:09Z", "message": "Reduce time between submissions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1af55a4acf65f08cdea64e9d92beaa6d3d9ba566", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/1af55a4acf65f08cdea64e9d92beaa6d3d9ba566", "committedDate": "2020-05-24T10:25:01Z", "message": "Merge remote-tracking branch 'origin/fix/add-debug-for-quiz-save' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5af8d506a8e5117d2eeae868ce3c2b42bbc4771c", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/5af8d506a8e5117d2eeae868ce3c2b42bbc4771c", "committedDate": "2020-05-24T10:34:45Z", "message": "Increase load for k6 test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "275443fa2778998cbd7a65a15f163d44e92ddb34", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/275443fa2778998cbd7a65a15f163d44e92ddb34", "committedDate": "2020-05-24T11:00:33Z", "message": "Perform last submission via REST instead of WS."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0e65f6a1a85fbc225f5f2c6d93a2635a6922fa4", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/a0e65f6a1a85fbc225f5f2c6d93a2635a6922fa4", "committedDate": "2020-05-24T11:13:19Z", "message": "Fail if something goes wrong instead of logging."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cb8e903f6c113efeeba6be9c53d40561570f18b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2cb8e903f6c113efeeba6be9c53d40561570f18b", "committedDate": "2020-05-24T19:31:39Z", "message": "run prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61059c99f1c3991252a8d58075a0160e7f203733", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/61059c99f1c3991252a8d58075a0160e7f203733", "committedDate": "2020-05-24T19:49:34Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "698593bf2bf3cab26c0d1aa572f3410d69ee8425", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/698593bf2bf3cab26c0d1aa572f3410d69ee8425", "committedDate": "2020-05-24T21:37:40Z", "message": "improve error handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjAwNDg4", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-417600488", "createdAt": "2020-05-25T09:56:10Z", "commit": {"oid": "698593bf2bf3cab26c0d1aa572f3410d69ee8425"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwOTo1NjoxMFrOGZ7yLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwOTo1NjoxMFrOGZ7yLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0NzA4Ng==", "bodyText": "That's quite a lot of code commented out. Can it be deleted or is left there on purpose?", "url": "https://github.com/ls1intum/Artemis/pull/1477#discussion_r429847086", "createdAt": "2020-05-25T09:56:10Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/exercises/quiz/participate/quiz-participation.component.ts", "diffHunk": "@@ -815,47 +820,48 @@ export class QuizParticipationComponent implements OnInit, OnDestroy {\n \n     /**\n      * Callback function for handling quiz submission after saving submission to server\n-     * @param quizSubmission The quiz submission data from the server\n      * @param error a potential error during save\n      */\n-    onSaveSuccess(quizSubmission: QuizSubmission | null, error: string | null) {\n-        if (!quizSubmission || error) {\n-            alert('Saving Answers failed: ' + error);\n+    onSaveError(error: string) {\n+        if (error) {\n+            const errorMessage = 'Saving answers failed: ' + error;\n+            // TODO: this is a workaround to avoid translation not found issues. Provide proper translations\n+            const jhiAlert = this.jhiAlertService.error(errorMessage);\n+            jhiAlert.msg = errorMessage;\n             this.unsavedChanges = true;\n             this.isSubmitting = false;\n-            if (this.outstandingWebsocketResponses > 0) {\n-                this.outstandingWebsocketResponses--;\n-            }\n-            if (this.outstandingWebsocketResponses === 0) {\n-                this.isSaving = false;\n-            }\n-            return;\n-        }\n-        if (quizSubmission.submitted) {\n-            this.outstandingWebsocketResponses = 0;\n-            this.isSaving = false;\n-            this.unsavedChanges = false;\n-            this.isSubmitting = false;\n-            this.submission = quizSubmission;\n-            this.updateSubmissionTime();\n-            this.applySubmission();\n-        } else if (this.outstandingWebsocketResponses === 0) {\n-            this.isSaving = false;\n-            this.unsavedChanges = false;\n-            this.submission = quizSubmission;\n-            this.updateSubmissionTime();\n-            this.applySubmission();\n-        } else {\n-            this.outstandingWebsocketResponses--;\n-            if (this.outstandingWebsocketResponses === 0) {\n-                this.isSaving = false;\n-                this.unsavedChanges = false;\n-                if (quizSubmission) {\n-                    this.submission.submissionDate = quizSubmission.submissionDate;\n-                    this.updateSubmissionTime();\n-                }\n-            }\n+            // if (this.outstandingWebsocketResponses > 0) {\n+            //     this.outstandingWebsocketResponses--;\n+            // }\n+            // if (this.outstandingWebsocketResponses === 0) {\n+            //     this.isSaving = false;\n+            // }\n         }\n+        // if (quizSubmission.submitted) {\n+        //     // this.outstandingWebsocketResponses = 0;\n+        //     this.isSaving = false;\n+        //     this.unsavedChanges = false;\n+        //     this.isSubmitting = false;\n+        //     this.submission = quizSubmission;\n+        //     this.updateSubmissionTime();\n+        //     this.applySubmission();\n+        // } else if (this.outstandingWebsocketResponses === 0) {\n+        //     this.isSaving = false;\n+        //     this.unsavedChanges = false;\n+        //     this.submission = quizSubmission;\n+        //     this.updateSubmissionTime();\n+        //     this.applySubmission();\n+        // } else {\n+        //     this.outstandingWebsocketResponses--;\n+        //     if (this.outstandingWebsocketResponses === 0) {\n+        //         this.isSaving = false;\n+        //         this.unsavedChanges = false;\n+        //         if (quizSubmission) {\n+        //             this.submission.submissionDate = quizSubmission.submissionDate;\n+        //             this.updateSubmissionTime();\n+        //         }\n+        //     }\n+        // }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "698593bf2bf3cab26c0d1aa572f3410d69ee8425"}, "originalPosition": 220}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d3826d680d4a493d32ef242af8feb85a5b1db62", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/3d3826d680d4a493d32ef242af8feb85a5b1db62", "committedDate": "2020-05-25T13:09:01Z", "message": "convert date into moment to prevent java script runtime errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "938a13fbdbd98acf88e39382a900f23ac4c1f313", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/938a13fbdbd98acf88e39382a900f23ac4c1f313", "committedDate": "2020-05-25T13:56:00Z", "message": "fix issue with wrong text when the student does not hit the submit bubtton"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b76fb9389a005c7acf7d84f89f6298ee9e6c0e33", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b76fb9389a005c7acf7d84f89f6298ee9e6c0e33", "committedDate": "2020-05-25T14:55:16Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "979e52050efaae12e8a4996abdcfac8267552f05", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/979e52050efaae12e8a4996abdcfac8267552f05", "committedDate": "2020-05-25T19:33:01Z", "message": "small improvements and bugfixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c68e91adc6d8efa4ad3e048ed80374bb96ebe1a1", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c68e91adc6d8efa4ad3e048ed80374bb96ebe1a1", "committedDate": "2020-05-25T19:33:44Z", "message": "Merge branch 'fix/add-debug-for-quiz-save' of https://github.com/ls1intum/Artemis into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85629f1fe85f858616dc26348db92558bd751859", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/85629f1fe85f858616dc26348db92558bd751859", "committedDate": "2020-05-26T06:22:41Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/quiz/participate/quiz-participation.component.html\n#\tsrc/main/webapp/app/overview/courses.component.html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cf8db10544993e839f7cd60e8972baed7f5f903", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/0cf8db10544993e839f7cd60e8972baed7f5f903", "committedDate": "2020-05-26T06:29:14Z", "message": "reload quiz if it has ended and the user was reconnected"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a282bd03aa978d56abf5b6f19f90c0dcb76968e", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8a282bd03aa978d56abf5b6f19f90c0dcb76968e", "committedDate": "2020-05-26T08:00:11Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22cb0e5f46bbe92b1eda85cde8febcb627fcd92d", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/22cb0e5f46bbe92b1eda85cde8febcb627fcd92d", "committedDate": "2020-05-26T09:04:40Z", "message": "fix null pointer exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af43708085223adeddc0b5ec56dfdfe4db2d9940", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/af43708085223adeddc0b5ec56dfdfe4db2d9940", "committedDate": "2020-05-26T09:40:52Z", "message": "improve automatic submission after reconnect websocket"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a9154972f1a393767c87a4aff757617f62c5ffc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/3a9154972f1a393767c87a4aff757617f62c5ffc", "committedDate": "2020-05-26T09:57:50Z", "message": "improve disconnect behavior and text messages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTU2NTc5", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-418156579", "createdAt": "2020-05-26T10:11:36Z", "commit": {"oid": "3a9154972f1a393767c87a4aff757617f62c5ffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoxMTozNlrOGaXpVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoxMTozNlrOGaXpVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMwMzU3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            <jhi-connection-status *ngIf=\"mode === 'live'\" class=\"conxnection-status-quiz\">\n          \n          \n            \n                            <jhi-connection-status *ngIf=\"mode === 'live'\" class=\"connection-status-quiz\">\n          \n      \n    \n    \n  \n\nsmall typo here", "url": "https://github.com/ls1intum/Artemis/pull/1477#discussion_r430303572", "createdAt": "2020-05-26T10:11:36Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/exercises/quiz/participate/quiz-participation.component.html", "diffHunk": "@@ -119,21 +120,20 @@ <h2 [ngSwitch]=\"mode\">\n                     <span jhiTranslate=\"artemisApp.quizExercise.waitingForStart\"></span>\n                 </div>\n                 <div *ngIf=\"mode === 'live' && !waitingForQuizStart\">\n-                    <span *ngIf=\"isSaving\" jhiTranslate=\"artemisApp.quizExercise.isSaving\">Saving answers...</span>\n-                    <span *ngIf=\"!isSaving && !isMobile()\" ngbTooltip=\"{{ submission.adjustedSubmissionDate | artemisDate: 'long':true }}\" placement=\"right\">\n+                    <span *ngIf=\"!isMobile()\" ngbTooltip=\"{{ submission.adjustedSubmissionDate | artemisDate: 'long':true }}\" placement=\"right\">\n                         <span *ngIf=\"!submission.submitted\" jhiTranslate=\"artemisApp.quizExercise.lastSaved\" class=\"colon-suffix\"></span>\n                         <span *ngIf=\"submission.submitted\" jhiTranslate=\"artemisApp.quizExercise.submitted\" class=\"colon-suffix\"></span>\n                         <span *ngIf=\"justSaved\" jhiTranslate=\"justNow\"></span>\n                         <span *ngIf=\"!justSaved && lastSavedTimeText !== ''\">{{ lastSavedTimeText }}</span>\n                         <span *ngIf=\"!justSaved && lastSavedTimeText === ''\" jhiTranslate=\"artemisApp.quizExercise.lastSavedTimeNever\"></span>\n                     </span>\n                     <!-- Only display save and submission hint without time stamps for mobile -->\n-                    <span *ngIf=\"!isSaving && isMobile()\" ngbTooltip=\"{{ submission.adjustedSubmissionDate | artemisDate: 'long':true }}\" placement=\"right\">\n+                    <span *ngIf=\"isMobile()\" ngbTooltip=\"{{ submission.adjustedSubmissionDate | artemisDate: 'long':true }}\" placement=\"right\">\n                         <span *ngIf=\"!submission.submitted\" jhiTranslate=\"artemisApp.quizExercise.lastSaved\"></span>\n                         <span *ngIf=\"submission.submitted\" jhiTranslate=\"artemisApp.quizExercise.submitted\"></span>\n                     </span>\n                 </div>\n-                <jhi-connection-status *ngIf=\"mode === 'live'\" class=\"connection-status-quiz\">\n+                <jhi-connection-status *ngIf=\"mode === 'live'\" class=\"conxnection-status-quiz\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a9154972f1a393767c87a4aff757617f62c5ffc"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTU5MjAz", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-418159203", "createdAt": "2020-05-26T10:15:24Z", "commit": {"oid": "3a9154972f1a393767c87a4aff757617f62c5ffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoxNToyNFrOGaXxEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoxNToyNFrOGaXxEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMwNTU1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"quizIsOverText\": \"The quiz has ended. Please wait. If the results so not load automatically within 60s, please refresh the page.\",\n          \n          \n            \n                        \"quizIsOverText\": \"The quiz has ended. Please wait. If the results do not load automatically within 60s, please refresh the page.\",\n          \n      \n    \n    \n  \n\nsmall typo", "url": "https://github.com/ls1intum/Artemis/pull/1477#discussion_r430305552", "createdAt": "2020-05-26T10:15:24Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/i18n/en/quizExercise.json", "diffHunk": "@@ -106,10 +106,10 @@\n             \"previewMode\": \"Preview\",\n             \"preview\": \"Preview Quiz\",\n             \"solution\": \"Sample Solution\",\n-            \"quizIsOverText\": \"The quiz has ended. Please wait. The results will load automatically.\",\n+            \"quizIsOverText\": \"The quiz has ended. Please wait. If the results so not load automatically within 60s, please refresh the page.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a9154972f1a393767c87a4aff757617f62c5ffc"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTk1MjAx", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-418195201", "createdAt": "2020-05-26T11:10:20Z", "commit": {"oid": "3a9154972f1a393767c87a4aff757617f62c5ffc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed96e34255801a282e0ea7a95717b0bde5d7a1ce", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/ed96e34255801a282e0ea7a95717b0bde5d7a1ce", "committedDate": "2020-05-26T11:54:23Z", "message": "Update src/main/webapp/app/exercises/quiz/participate/quiz-participation.component.html\n\nCo-authored-by: Filip Gregurevic <51987021+filip-gregurevic@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd65fd80caf771dc2014828abd459a44710daff6", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/bd65fd80caf771dc2014828abd459a44710daff6", "committedDate": "2020-05-26T11:55:47Z", "message": "Update src/main/webapp/i18n/en/quizExercise.json\n\nCo-authored-by: Filip Gregurevic <51987021+filip-gregurevic@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b23eafad943dd6dbb3f61212f289e4be6124ada", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8b23eafad943dd6dbb3f61212f289e4be6124ada", "committedDate": "2020-05-26T13:04:07Z", "message": "try to fix timing issue for start now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "095c8a7adbda818ee3142d2aeb102d1f8dcbd10f", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/095c8a7adbda818ee3142d2aeb102d1f8dcbd10f", "committedDate": "2020-05-26T15:14:11Z", "message": "Merge branch 'develop' into fix/add-debug-for-quiz-save"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NDAwNjgy", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-418400682", "createdAt": "2020-05-26T15:14:15Z", "commit": {"oid": "8b23eafad943dd6dbb3f61212f289e4be6124ada"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NDAxNTUy", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-418401552", "createdAt": "2020-05-26T15:15:08Z", "commit": {"oid": "095c8a7adbda818ee3142d2aeb102d1f8dcbd10f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NDA2MjAx", "url": "https://github.com/ls1intum/Artemis/pull/1477#pullrequestreview-418406201", "createdAt": "2020-05-26T15:18:52Z", "commit": {"oid": "095c8a7adbda818ee3142d2aeb102d1f8dcbd10f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2652, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}