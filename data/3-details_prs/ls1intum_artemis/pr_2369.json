{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3NjEwMTU3", "number": 2369, "title": "[Enhancement] Hide the name of the student when downloading repos for Programming Assessment", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I followed the coding and design guidelines.\n Server: I documented the Java code using JavaDoc style.\n Client: I followed the coding and design guidelines.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nThis PR enables the possibility to hide the students name when downloading the repo. For the manual assessment for programming exercises we then can assure that the assessor is not biased when downloading the repo.\nDescription\n\n\nAdded boolean check if student name needs to be hidden\nAdded alternative folder name when student name needs to be hidden\n\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to Course Administration\nAssess a programming exercise\nClick on Download repoand download the repo (test different options)\nDownloaded repo should not contain information about the student\n\nTest Coverage\n\nNothing changed\nScreenshots", "createdAt": "2020-11-09T09:14:50Z", "url": "https://github.com/ls1intum/Artemis/pull/2369", "merged": true, "mergeCommit": {"oid": "da81c681abb2320b838c5e9f18fcc15e80fb1f54"}, "closed": true, "closedAt": "2020-11-17T19:31:43Z", "author": {"login": "fde312"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdaxCgSgH2gAyNTE3NjEwMTU3Ojc0OTE3ZTVhMGVkNDc3MGU0ODY0Mzg4ZjJmZGJkZTNlMGRjZDE0MGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddVPuIgFqTUzMjEyMDgyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74917e5a0ed4770e4864388f2fdbde3e0dcd140a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/74917e5a0ed4770e4864388f2fdbde3e0dcd140a", "committedDate": "2020-11-09T09:07:21Z", "message": "hide the name of the student when downloading repos during programming assessment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88acf67e06255ec9af83b994135278d6e6cbb4a6", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/88acf67e06255ec9af83b994135278d6e6cbb4a6", "committedDate": "2020-11-09T10:16:02Z", "message": "add docu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0", "committedDate": "2020-11-10T08:09:22Z", "message": "Merge branch 'develop' into feature/programming-assessment/hide-student-name-repo-download"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2OTYwMjQ0", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-526960244", "createdAt": "2020-11-10T08:29:47Z", "commit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwODoyOTo0N1rOHwRNDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwODozMTozNlrOHwRR0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM3NTU2Nw==", "bodyText": "Can you assign repositoryUrlComponents[n] to a variable with a meaningful name?\nWould help if we need to touch this again in a week or so :D", "url": "https://github.com/ls1intum/Artemis/pull/2369#discussion_r520375567", "createdAt": "2020-11-10T08:29:47Z", "author": {"login": "jpbernius"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/GitService.java", "diffHunk": "@@ -657,23 +657,30 @@ public void deleteLocalRepository(URL repoUrl, String targetPath) {\n      * @return path to zip file.\n      */\n     public Path zipRepository(Repository repo) throws IOException {\n-        return zipRepository(repo, REPO_CLONE_PATH);\n+        return zipRepository(repo, REPO_CLONE_PATH, false);\n     }\n \n     /**\n      * Zip the content of a git repository.\n      *\n      * @param repo Local Repository Object.\n      * @param targetPath path where the repo is located on disk\n+     * @param hideStudentName option to hide the student name for the zip file\n      * @throws IOException if the zipping process failed.\n      * @return path to zip file.\n      */\n-    public Path zipRepository(Repository repo, String targetPath) throws IOException {\n+    public Path zipRepository(Repository repo, String targetPath, boolean hideStudentName) throws IOException {\n         String[] repositoryUrlComponents = repo.getParticipation().getRepositoryUrl().split(File.separator);\n         ProgrammingExercise exercise = repo.getParticipation().getProgrammingExercise();\n         String courseShortName = exercise.getCourseViaExerciseGroupOrCourseMember().getShortName().replaceAll(\"\\\\s\", \"\");\n-        // take the last component\n-        String zipRepoName = courseShortName + \"-\" + repositoryUrlComponents[repositoryUrlComponents.length - 1] + \".zip\";\n+        String zipRepoName;\n+        if (hideStudentName) {\n+            zipRepoName = courseShortName + \"-\" + repositoryUrlComponents[repositoryUrlComponents.length - 2].toLowerCase() + \"-student-submission\" + \".zip\";\n+        }\n+        else {\n+            // take the last component\n+            zipRepoName = courseShortName + \"-\" + repositoryUrlComponents[repositoryUrlComponents.length - 1] + \".zip\";\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM3Njc4NA==", "bodyText": "What are the export options? Hiding a student name sounds like an export option.", "url": "https://github.com/ls1intum/Artemis/pull/2369#discussion_r520376784", "createdAt": "2020-11-10T08:31:36Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "diffHunk": "@@ -75,16 +76,18 @@ export class ProgrammingAssessmentRepoExportDialogComponent implements OnInit {\n         if (this.participationIdList) {\n             // We anonymize the assessment process (\"double-blind\").\n             this.repositoryExportOptions.addParticipantName = false;\n-            this.repoExportService.exportReposByParticipations(exerciseId, this.participationIdList, this.repositoryExportOptions).subscribe(this.handleExportRepoResponse, () => {\n-                this.exportInProgress = false;\n-            });\n+            this.repoExportService\n+                .exportReposByParticipations(exerciseId, this.participationIdList, this.repositoryExportOptions, this.hideStudentName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2OTc0NDgz", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-526974483", "createdAt": "2020-11-10T08:47:25Z", "commit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwODo0NzoyNVrOHwR3iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwODo0NzoyNVrOHwR3iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM4NjQ0Mw==", "bodyText": "not sure if I understand what's going on here. Can you document this a bit better?", "url": "https://github.com/ls1intum/Artemis/pull/2369#discussion_r520386443", "createdAt": "2020-11-10T08:47:25Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/GitService.java", "diffHunk": "@@ -657,23 +657,30 @@ public void deleteLocalRepository(URL repoUrl, String targetPath) {\n      * @return path to zip file.\n      */\n     public Path zipRepository(Repository repo) throws IOException {\n-        return zipRepository(repo, REPO_CLONE_PATH);\n+        return zipRepository(repo, REPO_CLONE_PATH, false);\n     }\n \n     /**\n      * Zip the content of a git repository.\n      *\n      * @param repo Local Repository Object.\n      * @param targetPath path where the repo is located on disk\n+     * @param hideStudentName option to hide the student name for the zip file\n      * @throws IOException if the zipping process failed.\n      * @return path to zip file.\n      */\n-    public Path zipRepository(Repository repo, String targetPath) throws IOException {\n+    public Path zipRepository(Repository repo, String targetPath, boolean hideStudentName) throws IOException {\n         String[] repositoryUrlComponents = repo.getParticipation().getRepositoryUrl().split(File.separator);\n         ProgrammingExercise exercise = repo.getParticipation().getProgrammingExercise();\n         String courseShortName = exercise.getCourseViaExerciseGroupOrCourseMember().getShortName().replaceAll(\"\\\\s\", \"\");\n-        // take the last component\n-        String zipRepoName = courseShortName + \"-\" + repositoryUrlComponents[repositoryUrlComponents.length - 1] + \".zip\";\n+        String zipRepoName;\n+        if (hideStudentName) {\n+            zipRepoName = courseShortName + \"-\" + repositoryUrlComponents[repositoryUrlComponents.length - 2].toLowerCase() + \"-student-submission\" + \".zip\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2OTc2MDIy", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-526976022", "createdAt": "2020-11-10T08:49:22Z", "commit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MTg2NjEy", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-527186612", "createdAt": "2020-11-10T13:12:45Z", "commit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MzA4OTAw", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-527308900", "createdAt": "2020-11-10T15:17:27Z", "commit": {"oid": "b16bc6ea51dedb9ec0793ee83b87ecad6664a3e0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29b9f73767193d10d7d9292bfe24ccc6bf52c7be", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/29b9f73767193d10d7d9292bfe24ccc6bf52c7be", "committedDate": "2020-11-10T16:10:49Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/programming-assessment/hide-student-name-repo-download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f33ee8aa190d62ca2b110e1fa87d1d717a464830", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f33ee8aa190d62ca2b110e1fa87d1d717a464830", "committedDate": "2020-11-12T20:50:33Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/programming-assessment/hide-student-name-repo-download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5ecc44a486fffc3e16b0a8f842e1e6b5d5321c2", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e5ecc44a486fffc3e16b0a8f842e1e6b5d5321c2", "committedDate": "2020-11-12T21:24:19Z", "message": "refactor to use exportOptions for hiding the student name on the client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2cebd9e9bbc00c994a67bb95f021b68259227cd", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f2cebd9e9bbc00c994a67bb95f021b68259227cd", "committedDate": "2020-11-12T21:35:18Z", "message": "refactor to use exportOptions for hiding the student name on server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4a225b2207c567b41ae81e3c363c79974488e8b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d4a225b2207c567b41ae81e3c363c79974488e8b", "committedDate": "2020-11-12T21:50:08Z", "message": "add comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMDI0NDg1", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-530024485", "createdAt": "2020-11-13T12:33:58Z", "commit": {"oid": "d4a225b2207c567b41ae81e3c363c79974488e8b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMjI5MjM5", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-530229239", "createdAt": "2020-11-13T16:54:02Z", "commit": {"oid": "d4a225b2207c567b41ae81e3c363c79974488e8b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d12a5ef70e0a53c76162a93336fef13eea75f14b", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/d12a5ef70e0a53c76162a93336fef13eea75f14b", "committedDate": "2020-11-14T11:50:09Z", "message": "Merge branch 'develop' into feature/programming-assessment/hide-student-name-repo-download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f5a22a9d9c8329b64e4aca26d67fa75d66e4d66", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/9f5a22a9d9c8329b64e4aca26d67fa75d66e4d66", "committedDate": "2020-11-15T23:10:01Z", "message": "Merge branch 'develop' into feature/programming-assessment/hide-student-name-repo-download"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMTI2Mjcx", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-531126271", "createdAt": "2020-11-16T09:03:06Z", "commit": {"oid": "9f5a22a9d9c8329b64e4aca26d67fa75d66e4d66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMTY4NjA2", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-531168606", "createdAt": "2020-11-16T09:57:43Z", "commit": {"oid": "9f5a22a9d9c8329b64e4aca26d67fa75d66e4d66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMjc3MjUx", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-531277251", "createdAt": "2020-11-16T12:31:42Z", "commit": {"oid": "9f5a22a9d9c8329b64e4aca26d67fa75d66e4d66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMjgwNzEz", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-531280713", "createdAt": "2020-11-16T12:36:42Z", "commit": {"oid": "9f5a22a9d9c8329b64e4aca26d67fa75d66e4d66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0925c24815b2ebe7f4e38a472bf0aa5710eb0a1", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/e0925c24815b2ebe7f4e38a472bf0aa5710eb0a1", "committedDate": "2020-11-17T00:30:19Z", "message": "Merge branch 'develop' into feature/programming-assessment/hide-student-name-repo-download"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMTIwODIz", "url": "https://github.com/ls1intum/Artemis/pull/2369#pullrequestreview-532120823", "createdAt": "2020-11-17T08:26:13Z", "commit": {"oid": "e0925c24815b2ebe7f4e38a472bf0aa5710eb0a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3634, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}