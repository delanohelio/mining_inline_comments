{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2Mzk3NjAx", "number": 1549, "title": "Feature/overview/loading icon for views", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nCloses #1337 and displays a loading notification when a HTTP Request takes longer than 1000ms.\nDescription\n\n\nCreated loading-notification component and service\nThe loading notification will be displayed in the navigation bar next to the version\nWe are using HttpInterceptor to trigger if the loading notification will be visible or not\n\nSteps for Testing\n\n\nLog in to Artemis\nNavigate through the application (views, create exercises, dashboards)\nCheck whether the loading spinner appears or not. To do so use throttling to trigger the loading spinner\nTest edge/weird cases (e.g. lost internet connection or changing views fast) and see if loading spinner disappears\n\nScreenshots\n\n\nThis is how the loading spinner should appear when the http requests take longer than 1000ms (in this gif, the time was set to 100ms in order to trigger the animation easier)", "createdAt": "2020-06-02T07:18:00Z", "url": "https://github.com/ls1intum/Artemis/pull/1549", "merged": true, "mergeCommit": {"oid": "8e14b5cd04216ab95a4e24e05e7752936a41fd2b"}, "closed": true, "closedAt": "2020-06-16T21:16:14Z", "author": {"login": "fde312"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmylMagH2gAyNDI2Mzk3NjAxOjhhZmJkYWNhMTE4YjdkMDRlNzY1YTJiZTk0MDRiODgzNTVhNjg5MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr783DAFqTQzMTg5NzU2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8afbdaca118b7d04e765a2be9404b88355a68915", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8afbdaca118b7d04e765a2be9404b88355a68915", "committedDate": "2020-05-31T21:31:05Z", "message": "added loading screen for course overview view and added null check for course registration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d721c522b6a44d7288614b51325d907b87433c8f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d721c522b6a44d7288614b51325d907b87433c8f", "committedDate": "2020-05-31T21:32:05Z", "message": "added loading screen for course management view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca5a02243367ab71ea73ba9f84fd4524d248e194", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/ca5a02243367ab71ea73ba9f84fd4524d248e194", "committedDate": "2020-05-31T21:49:22Z", "message": "added loading screen to course detail view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a41f750e56878bfbc0f1e155d91c003812111e41", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a41f750e56878bfbc0f1e155d91c003812111e41", "committedDate": "2020-06-01T06:36:05Z", "message": "added loading screen for:\n- course management exercises\n- file upload exercise\n- modeling exercise\n- programming exercise\n- quiz exercise\n- text exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84883626e6f8bc18820f7ae875b145035486064", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f84883626e6f8bc18820f7ae875b145035486064", "committedDate": "2020-06-01T07:46:52Z", "message": "added loading screen to all exercise detail components"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa0994cd9323d647a01a6154a3afda86fa5407a3", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fa0994cd9323d647a01a6154a3afda86fa5407a3", "committedDate": "2020-06-01T19:45:45Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7586ee477e9fb736c65b9f4eada311b4184464c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a7586ee477e9fb736c65b9f4eada311b4184464c", "committedDate": "2020-06-02T07:16:43Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c71fcd2329e43dc2bada0c1d6284a8e04278c9b3", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c71fcd2329e43dc2bada0c1d6284a8e04278c9b3", "committedDate": "2020-06-02T12:02:07Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36a9d8ed282423d74cb4b4ae70592b1caba0b605", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/36a9d8ed282423d74cb4b4ae70592b1caba0b605", "committedDate": "2020-06-03T14:15:06Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c5c47d6e305aea2bfe6d825716cc774cfeab572", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7c5c47d6e305aea2bfe6d825716cc774cfeab572", "committedDate": "2020-06-03T14:16:59Z", "message": "revert changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4717ccd559e4378fded01309f9bfc3b30153aa82", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/4717ccd559e4378fded01309f9bfc3b30153aa82", "committedDate": "2020-06-03T15:21:11Z", "message": "added loading-notification component, service and interceptor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20807827b6191be851395a698f982e52692c5887", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/20807827b6191be851395a698f982e52692c5887", "committedDate": "2020-06-05T08:35:21Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b45f284cc306c2151a7d9248cf695eebc84b7c2", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7b45f284cc306c2151a7d9248cf695eebc84b7c2", "committedDate": "2020-06-05T08:39:58Z", "message": "remove empty file and position connection-notification into the right directoy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9873e6e3c539a8eab238183e4065b94492a90db", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d9873e6e3c539a8eab238183e4065b94492a90db", "committedDate": "2020-06-05T08:40:37Z", "message": "added new progress-bar and comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d3c65b760562a77fd4f900192dec13cd3945e8f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/3d3c65b760562a77fd4f900192dec13cd3945e8f", "committedDate": "2020-06-05T08:43:09Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5251eaa9f00615b8fd0938521fc6243b7fd10335", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/5251eaa9f00615b8fd0938521fc6243b7fd10335", "committedDate": "2020-06-05T12:53:56Z", "message": "try other loading bar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc8889d7d953b5ae34f2f3a1f746d7fd0752c5f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/ccc8889d7d953b5ae34f2f3a1f746d7fd0752c5f", "committedDate": "2020-06-05T13:13:15Z", "message": "run prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "088d56f0d305bbf5255e53f99e49cb15f177cbad", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/088d56f0d305bbf5255e53f99e49cb15f177cbad", "committedDate": "2020-06-08T20:40:28Z", "message": "move from main component to navbar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78f1117e106af537e1020b4f060273be775fe800", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/78f1117e106af537e1020b4f060273be775fe800", "committedDate": "2020-06-08T20:41:39Z", "message": "changed icon to loading spinner and increased debounce time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ec46596d156b8ddfd74f1be959a5eebd1a8eabb", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/4ec46596d156b8ddfd74f1be959a5eebd1a8eabb", "committedDate": "2020-06-08T20:46:15Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/06c89f51515fe5181bd6a22bdbe55214c0c9b14a", "committedDate": "2020-06-08T21:29:37Z", "message": "try to fix failing test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NzAxMjgw", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-426701280", "createdAt": "2020-06-09T00:01:54Z", "commit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2ODY2NDA5", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-426866409", "createdAt": "2020-06-09T07:39:15Z", "commit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNzozOToxNVrOGg8gsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNzozOToxNVrOGg8gsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE5OTAyNA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/ls1intum/Artemis/pull/1549#discussion_r437199024", "createdAt": "2020-06-09T07:39:15Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/shared/notification/connection-notification/connection-notification.component.ts", "diffHunk": "@@ -2,7 +2,7 @@ import { Component, OnDestroy, OnInit } from '@angular/core';\n import { AccountService } from 'app/core/auth/account.service';\n import { JhiWebsocketService } from 'app/core/websocket/websocket.service';\n import { User } from 'app/core/user/user.model';\n-import { ConnectionNotification, ConnectionNotificationType } from 'app/shared/layouts/connection-notification/connection-notification.model';\n+import { ConnectionNotification, ConnectionNotificationType } from 'app/shared/notification/connection-notification/connection-notification.model';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MDc0Nzc3", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-427074777", "createdAt": "2020-06-09T12:13:00Z", "commit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MTUzMTMx", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-428153131", "createdAt": "2020-06-10T15:07:49Z", "commit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNTowNzo0OVrOGh5bqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNTowNzo0OVrOGh5bqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE5NzE2Mg==", "bodyText": "what happens if finalize() is never called for one request? Then the counter activeRequests is always > 0 and the spinner will always be shown.\nFor example, when the internet connection breaks or when we get into a timeout or when the user changes the page too quickly? Or any other weird cases", "url": "https://github.com/ls1intum/Artemis/pull/1549#discussion_r438197162", "createdAt": "2020-06-10T15:07:49Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/shared/notification/loading-notification/loading-notification.interceptor.ts", "diffHunk": "@@ -0,0 +1,36 @@\n+import { Injectable } from '@angular/core';\n+import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\n+import { Observable } from 'rxjs';\n+import { finalize } from 'rxjs/operators';\n+import { LoadingNotificationService } from 'app/shared/notification/loading-notification/loading-notification.service';\n+\n+@Injectable()\n+export class LoadingNotificationInterceptor implements HttpInterceptor {\n+    activeRequests = 0;\n+\n+    constructor(private loadingNotificationService: LoadingNotificationService) {}\n+\n+    /**\n+     * Identifies and handles a given HTTP request. If any HTTP request is sent we enable the loading screen and count up the active requests.\n+     * While all HTTP request complete we count down the active requests and when all HTTP requests are completed we disable the loading screen.\n+     * @param request The outgoing request object to handle.\n+     * @param next The next interceptor in the chain, or the backend\n+     * if no interceptors remain in the chain.\n+     * @returns An observable of the event stream.\n+     */\n+    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n+        if (this.activeRequests === 0) {\n+            this.loadingNotificationService.startLoading();\n+        }\n+        this.activeRequests++;\n+\n+        return next.handle(request).pipe(\n+            finalize(() => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5157d32bdd10f3eb0985001b71d6182f8e2c2c32", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/5157d32bdd10f3eb0985001b71d6182f8e2c2c32", "committedDate": "2020-06-15T18:37:33Z", "message": "remove loading screens with h2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65076b7f647c68e42638ff12f57fa037eeceb47c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/65076b7f647c68e42638ff12f57fa037eeceb47c", "committedDate": "2020-06-15T18:40:36Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8a8b5aeebca8eb8e4fa33520df426e1558efcae", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f8a8b5aeebca8eb8e4fa33520df426e1558efcae", "committedDate": "2020-06-15T19:07:43Z", "message": "try to fix build error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzgyMzQx", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-431782341", "createdAt": "2020-06-16T18:26:18Z", "commit": {"oid": "f8a8b5aeebca8eb8e4fa33520df426e1558efcae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODAwMzU1", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-431800355", "createdAt": "2020-06-16T18:51:05Z", "commit": {"oid": "f8a8b5aeebca8eb8e4fa33520df426e1558efcae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODk3NTY0", "url": "https://github.com/ls1intum/Artemis/pull/1549#pullrequestreview-431897564", "createdAt": "2020-06-16T21:15:42Z", "commit": {"oid": "f8a8b5aeebca8eb8e4fa33520df426e1558efcae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2721, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}