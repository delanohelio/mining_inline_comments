{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0Nzc4MzY2", "number": 2216, "title": "Add option to checkout solution repository for Haskell exercises.", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features (with a high test coverage)\n Server: I documented the Java code using JavaDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nFor Haskell exercises, it sometimes is required to check the student submission by comparing it to the sample solution.\nThis is already possible now, but only after manual setup of Bamboo.\nDescription\nThis PR adds an option to checkout the solution repository (into a solution folder) during testing. The test cases can then execute both the students submission and the sample solution and compare the output (e.g. when testing with random input).\nNote: It's the instructor's responsibility to ensure that the student's code can not leak the sample solution.\nSteps for Testing\n\nCreate a Haskell programming exercise and enable the checkout of the solution repository (see screenshots below).\nOpen both the base and solution build plans in Bamboo, and verify that the solution repository is added:\n\nCheck the tasks and verify that the solution repository is checked out into the solution path.\n\nCreate one Haskell programming exercise and one Java programming exercise without enabling this option and verify that the solution repository is not added to the repositories (see step 2) and checkout task (see step 3).\n\nTest Coverage\n\n\nExerciseService.java: 85%\nprogramming-exercise.component.ts 95%\n\nScreenshots\nAdded an option during exercise creation that is only available for Haskell exercises.\n\nNote: As we do not persist whether the solution repository should be checked out, we do not show the value of this flag in the View and Edit dialogs.", "createdAt": "2020-10-16T11:32:43Z", "url": "https://github.com/ls1intum/Artemis/pull/2216", "merged": true, "mergeCommit": {"oid": "de664eefc3f2e69e3020538ea204aa3e87915505"}, "closed": true, "closedAt": "2020-10-19T23:36:06Z", "author": {"login": "sleiss"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTEuihgH2gAyNTA0Nzc4MzY2OmM5YzdkMTQ5ZDQwYjMzZWZhMWYwOGIxOTk4ZjI1MzhlMmExZTNmMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUM4H6gFqTUxMjIzMTE2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c9c7d149d40b33efa1f08b1998f2538e2a1e3f24", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/c9c7d149d40b33efa1f08b1998f2538e2a1e3f24", "committedDate": "2020-10-16T11:32:15Z", "message": "Add option to checkout solution repository for Haskell exercises."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "443a50984e61fc22c0d2ba3822b609f5b1eea0ba", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/443a50984e61fc22c0d2ba3822b609f5b1eea0ba", "committedDate": "2020-10-16T11:43:11Z", "message": "Add test case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f65a67c1731644ef56d0fcb0c52cf6fd06d807fd", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/f65a67c1731644ef56d0fcb0c52cf6fd06d807fd", "committedDate": "2020-10-16T11:55:00Z", "message": "Fix error message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/946925846cce0d606517a730871b1b9f540cb52c", "committedDate": "2020-10-16T12:09:24Z", "message": "Remove trigger of base repository when solution repository is updated."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODU1NzE1", "url": "https://github.com/ls1intum/Artemis/pull/2216#pullrequestreview-510855715", "createdAt": "2020-10-17T00:22:41Z", "commit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMDoyMjo0MlrOHjS0sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMDoyMjo0MlrOHjS0sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3MDYwOQ==", "bodyText": "does this mean the solution repo is checked out twice in the SOLUTION build plan?", "url": "https://github.com/ls1intum/Artemis/pull/2216#discussion_r506770609", "createdAt": "2020-10-17T00:22:42Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseService.java", "diffHunk": "@@ -174,9 +174,9 @@ private void setupBuildPlansForNewExercise(ProgrammingExercise programmingExerci\n         String projectKey = programmingExercise.getProjectKey();\n         continuousIntegrationService.get().createProjectForExercise(programmingExercise);\n         // template build plan\n-        continuousIntegrationService.get().createBuildPlanForExercise(programmingExercise, TEMPLATE.getName(), exerciseRepoUrl, testsRepoUrl);\n+        continuousIntegrationService.get().createBuildPlanForExercise(programmingExercise, TEMPLATE.getName(), exerciseRepoUrl, testsRepoUrl, solutionRepoUrl);\n         // solution build plan\n-        continuousIntegrationService.get().createBuildPlanForExercise(programmingExercise, SOLUTION.getName(), solutionRepoUrl, testsRepoUrl);\n+        continuousIntegrationService.get().createBuildPlanForExercise(programmingExercise, SOLUTION.getName(), solutionRepoUrl, testsRepoUrl, solutionRepoUrl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNTIzNzg0", "url": "https://github.com/ls1intum/Artemis/pull/2216#pullrequestreview-511523784", "createdAt": "2020-10-19T08:28:08Z", "commit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODoyODowOVrOHkDOow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODoyODowOVrOHkDOow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU2MzY4Mw==", "bodyText": "can we improve this test using the programming language as enum parameter so that all programming languages except Haskell are tested to produce a bad request? (this would then also include future programming languages", "url": "https://github.com/ls1intum/Artemis/pull/2216#discussion_r507563683", "createdAt": "2020-10-19T08:28:09Z", "author": {"login": "krusche"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseIntegrationTest.java", "diffHunk": "@@ -742,6 +742,16 @@ public void createProgrammingExercise_bambooProjectWithSameTitleAlreadyExists_ba\n         request.post(ROOT + SETUP, programmingExercise, HttpStatus.BAD_REQUEST);\n     }\n \n+    @Test\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void createProgrammingExercise_checkoutSolutionRepositoryProgrammingLanguageNotSupported_badRequest() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNTI0ODkw", "url": "https://github.com/ls1intum/Artemis/pull/2216#pullrequestreview-511524890", "createdAt": "2020-10-19T08:29:24Z", "commit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODoyOToyNFrOHkDR9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODoyOToyNFrOHkDR9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU2NDUzNQ==", "bodyText": "Can you please document the property and its default value here? thanks!", "url": "https://github.com/ls1intum/Artemis/pull/2216#discussion_r507564535", "createdAt": "2020-10-19T08:29:24Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "diffHunk": "@@ -99,6 +99,10 @@\n     @Transient\n     private boolean isLocalSimulationTransient;\n \n+    @Transient\n+    @JsonProperty\n+    private boolean checkoutSolutionRepository = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNTI1NDAy", "url": "https://github.com/ls1intum/Artemis/pull/2216#pullrequestreview-511525402", "createdAt": "2020-10-19T08:29:59Z", "commit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODoyOTo1OVrOHkDThQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwODoyOTo1OVrOHkDThQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU2NDkzMw==", "bodyText": "please add a hint that this is only used for special cases", "url": "https://github.com/ls1intum/Artemis/pull/2216#discussion_r507564933", "createdAt": "2020-10-19T08:29:59Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/ContinuousIntegrationService.java", "diffHunk": "@@ -28,12 +28,13 @@\n     /**\n      * Creates the base build plan for the given programming exercise\n      *\n-     * @param exercise          a programming exercise with the required information to create the base build plan\n-     * @param planKey           the key of the plan\n-     * @param repositoryURL     the URL of the assignment repository (used to separate between exercise and solution)\n-     * @param testRepositoryURL the URL of the test repository\n+     * @param exercise              a programming exercise with the required information to create the base build plan\n+     * @param planKey               the key of the plan\n+     * @param repositoryURL         the URL of the assignment repository (used to separate between exercise and solution)\n+     * @param testRepositoryURL     the URL of the test repository\n+     * @param solutionRepositoryURL the URL of the solution repository", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "946925846cce0d606517a730871b1b9f540cb52c"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d377e645336a1d4372d23c3b4cd803e490ea672", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/1d377e645336a1d4372d23c3b4cd803e490ea672", "committedDate": "2020-10-19T08:48:19Z", "message": "Merge branch 'develop' into feature/haskell-checkout-solution-repository"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63d05a82cbfa5f87eef6633f7b4f604ac47689e8", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/63d05a82cbfa5f87eef6633f7b4f604ac47689e8", "committedDate": "2020-10-19T18:29:38Z", "message": "Use ParameterizedTest to ensure only Haskell is supported."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59e377126d5b3f2afc3bf7493f748ee0d070c4c8", "author": {"user": {"login": "sleiss", "name": "Simon Lei\u00df"}}, "url": "https://github.com/ls1intum/Artemis/commit/59e377126d5b3f2afc3bf7493f748ee0d070c4c8", "committedDate": "2020-10-19T18:36:39Z", "message": "Add documentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDU2Mjgx", "url": "https://github.com/ls1intum/Artemis/pull/2216#pullrequestreview-512056281", "createdAt": "2020-10-19T18:40:28Z", "commit": {"oid": "59e377126d5b3f2afc3bf7493f748ee0d070c4c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0MDoyOFrOHkcsYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0MDoyOFrOHkcsYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4MDg5OA==", "bodyText": "Codacy found an issue: These nested if statements could be combined", "url": "https://github.com/ls1intum/Artemis/pull/2216#discussion_r507980898", "createdAt": "2020-10-19T18:40:28Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseResource.java", "diffHunk": "@@ -321,6 +321,15 @@ public ProgrammingExerciseResource(ProgrammingExerciseRepository programmingExer\n             }\n         }\n \n+        // Check if checkout solution repository is enabled\n+        if (programmingExercise.getCheckoutSolutionRepository()) {\n+            if (programmingExercise.getProgrammingLanguage() != ProgrammingLanguage.HASKELL) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59e377126d5b3f2afc3bf7493f748ee0d070c4c8"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMjMxMTY2", "url": "https://github.com/ls1intum/Artemis/pull/2216#pullrequestreview-512231166", "createdAt": "2020-10-19T23:35:53Z", "commit": {"oid": "59e377126d5b3f2afc3bf7493f748ee0d070c4c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3840, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}