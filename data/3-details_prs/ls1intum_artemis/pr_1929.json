{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMTQ2MjE2", "number": 1929, "title": "Exam QuizExercises no submissions in summary after reload for DnD and SA questions", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) locally\n\nMotivation and Context\n\n\nShow correct submission in summary and do not destory the previous submitted answers on the server\nDescription\n\nbackreference submitted answers in DnDMapping/SASubmittedText\non submit return latest exam from server -> we are able to display latest version on server in summary\nSteps for Testing\n\n\nCreate an exam with multiple quizzes (DnD and SA questions)\nfill out one quiz (with DnD and SA)- save the changes\nreload the page\ndo not change the previous made submission and do not submit it again to the server\nsubmit the exam\nSummary should display the studentExam that you submitted\n\nScreenshots", "createdAt": "2020-07-18T21:14:43Z", "url": "https://github.com/ls1intum/Artemis/pull/1929", "merged": true, "mergeCommit": {"oid": "83e3351fe5ad51540bd319700047a7eb15c33cc6"}, "closed": true, "closedAt": "2020-07-19T06:33:21Z", "author": {"login": "TobiasPr"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2PAvvgH2gAyNDUyMTQ2MjE2OmQyNGZjMTNjMTA1YThjYjFjMzM0ZTljMDhmMjAxNDQ1NDYxODBkZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2XGamgFqTQ1MTEwMzEyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d24fc13c105a8cb1c334e9c08f20144546180df9", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/d24fc13c105a8cb1c334e9c08f20144546180df9", "committedDate": "2020-07-18T21:07:23Z", "message": "back reference student Answers\nload latest server version on submit and display in summary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02be013392c0f95b00606142852b7cb91ffc5f75", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/02be013392c0f95b00606142852b7cb91ffc5f75", "committedDate": "2020-07-18T21:49:18Z", "message": "Merge branch 'develop' into bugfix/exam/quizzes-dnd-and-sa-no-submission-after-reload"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDg0MzQ2", "url": "https://github.com/ls1intum/Artemis/pull/1929#pullrequestreview-451084346", "createdAt": "2020-07-18T21:52:28Z", "commit": {"oid": "02be013392c0f95b00606142852b7cb91ffc5f75"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMTo1MjoyOFrOGzqx_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMTo1MzowNlrOGzqyJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMTQ4NA==", "bodyText": "Is already checked via checkCourseAndExamAndStudentExamAccess()", "url": "https://github.com/ls1intum/Artemis/pull/1929#discussion_r456831484", "createdAt": "2020-07-18T21:52:28Z", "author": {"login": "sascha11110"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/StudentExamResource.java", "diffHunk": "@@ -138,7 +138,12 @@ public StudentExamResource(ExamAccessService examAccessService, StudentExamServi\n         if (workingTime <= 0) {\n             return badRequest();\n         }\n-        Exam exam = examRepository.findById(examId).get();\n+        Optional<Exam> optionalExam = examRepository.findById(examId);\n+        if (optionalExam.isEmpty()) {\n+            return notFound();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02be013392c0f95b00606142852b7cb91ffc5f75"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMTQ5NA==", "bodyText": "?", "url": "https://github.com/ls1intum/Artemis/pull/1929#discussion_r456831494", "createdAt": "2020-07-18T21:52:46Z", "author": {"login": "sascha11110"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/StudentExamResource.java", "diffHunk": "@@ -151,35 +156,35 @@ public StudentExamResource(ExamAccessService examAccessService, StudentExamServi\n     /**\n      * POST /courses/{courseId}/exams/{examId}/studentExams/submit : Submits the student exam\n      * Updates all submissions and marks student exam as submitted according to given student exam\n-     *\n+     * <p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02be013392c0f95b00606142852b7cb91ffc5f75"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMTUyNA==", "bodyText": "?", "url": "https://github.com/ls1intum/Artemis/pull/1929#discussion_r456831524", "createdAt": "2020-07-18T21:53:06Z", "author": {"login": "sascha11110"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/StudentExamResource.java", "diffHunk": "@@ -151,35 +156,35 @@ public StudentExamResource(ExamAccessService examAccessService, StudentExamServi\n     /**\n      * POST /courses/{courseId}/exams/{examId}/studentExams/submit : Submits the student exam\n      * Updates all submissions and marks student exam as submitted according to given student exam\n-     *\n+     * <p>\n      * NOTE: the studentExam has to be sent with all exercises, participations and submissions\n      *\n-     * @param courseId      the course to which the student exams belong to\n-     * @param examId        the exam to which the student exams belong to\n-     * @param studentExam   the student exam with exercises, participations and submissions\n-     * @return              empty response with status code:\n-     *                          200 if successful\n-     *                          400 if student exam was in an illegal state\n+     * @param courseId    the course to which the student exams belong to\n+     * @param examId      the exam to which the student exams belong to\n+     * @param studentExam the student exam with exercises, participations and submissions\n+     * @return empty response with status code:\n+     * 200 if successful\n+     * 400 if student exam was in an illegal state\n      */\n     @PostMapping(\"/courses/{courseId}/exams/{examId}/studentExams/submit\")\n     @PreAuthorize(\"hasAnyRole('USER', 'TA', 'INSTRUCTOR', 'ADMIN')\")\n-    public ResponseEntity<Void> submitStudentExam(@PathVariable Long courseId, @PathVariable Long examId, @RequestBody StudentExam studentExam) {\n+    public ResponseEntity<StudentExam> submitStudentExam(@PathVariable Long courseId, @PathVariable Long examId, @RequestBody StudentExam studentExam) {\n         log.debug(\"REST request to mark the studentExam as submitted : {}\", studentExam.getId());\n         User currentUser = userService.getUserWithGroupsAndAuthorities();\n-        Optional<ResponseEntity<Void>> accessFailure = this.studentExamAccessService.checkStudentExamAccess(courseId, examId, studentExam.getId(), currentUser);\n+        Optional<ResponseEntity<StudentExam>> accessFailure = this.studentExamAccessService.checkStudentExamAccess(courseId, examId, studentExam.getId(), currentUser);\n         return accessFailure.orElseGet(() -> studentExamService.submitStudentExam(studentExam, currentUser));\n     }\n \n     /**\n      * GET /courses/{courseId}/exams/{examId}/studentExams/conduction : Find a student exam for the user.\n      * This will be used for the actual conduction of the exam. The student exam will be returned with the exercises\n      * and with the student participation and with the submissions.\n-     *\n+     * <p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02be013392c0f95b00606142852b7cb91ffc5f75"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4eeb8053d31d419ea9d569f1f0c089642f4fd43", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/e4eeb8053d31d419ea9d569f1f0c089642f4fd43", "committedDate": "2020-07-18T22:00:49Z", "message": "revert change because it is already checked in checkCourseAndExamAndStudentExamAccess()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fd1a3a27d75d57d22bf9c081eda3020b00f6b29", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/6fd1a3a27d75d57d22bf9c081eda3020b00f6b29", "committedDate": "2020-07-18T22:03:23Z", "message": "remove strang comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDg1NjIx", "url": "https://github.com/ls1intum/Artemis/pull/1929#pullrequestreview-451085621", "createdAt": "2020-07-18T22:22:01Z", "commit": {"oid": "6fd1a3a27d75d57d22bf9c081eda3020b00f6b29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTAzMTI5", "url": "https://github.com/ls1intum/Artemis/pull/1929#pullrequestreview-451103129", "createdAt": "2020-07-19T06:32:49Z", "commit": {"oid": "6fd1a3a27d75d57d22bf9c081eda3020b00f6b29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4390, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}