{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MzU1NTIy", "number": 1875, "title": "[Exam] Code Editor bugfixes for multiple instances", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I documented the TypeScript code using JSDoc style.\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nAfter today's testing session a few bugs were identified.\nDescription\n\nAutomatic saving after exercises switching threw a false error on the client\nThe taskbar in the instructions was falsely updated by other exercise's participation results causing the instructions of another exercise which was recently committed to be loaded.\nNavigation bar did not react to exercise participation changes to update the status when no commit was made by the student. See #1850\n\nSteps for Testing\n\nLog in to Artemis\nCreate an exam with multiple programing exercises\nStart your exam conduction\nselect a file and edit the content. Switch the exercise, without saving\n=> No error should be thrown, it should be saved successfully.\nSubmit your changes and change the exercise. Wait a few seconds until the build is finished and check if the taskbar (in the instructions) is displayed correctly.\nDuring all changes, the navigation bar should be updated to show the correct status.", "createdAt": "2020-07-13T16:15:10Z", "url": "https://github.com/ls1intum/Artemis/pull/1875", "merged": true, "mergeCommit": {"oid": "7135bafad6c19b3bbb3c30031386a857abd62ef5"}, "closed": true, "closedAt": "2020-07-14T06:59:18Z", "author": {"login": "anditurdiu"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0iOgvAH2gAyNDQ4MzU1NTIyOjI0ZWViZWY5MDllZGMwN2RkZDgyYTUwMmUyNDExNmNkM2IyMTI3YzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0weqqgFqTQ0NzgzNzY2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24eebef909edc07ddd82a502e24116cd3b2127c3", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/24eebef909edc07ddd82a502e24116cd3b2127c3", "committedDate": "2020-07-13T14:22:46Z", "message": "fix client error onSave when switching exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f7320730173f2c72d8329adf8a862ad25aca209", "author": {"user": {"login": "anditurdiu", "name": "Andi Turdiu"}}, "url": "https://github.com/ls1intum/Artemis/commit/3f7320730173f2c72d8329adf8a862ad25aca209", "committedDate": "2020-07-13T16:15:33Z", "message": "Merge branch 'develop' into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "871fa16921713f0bb8666d06d96ac8ffae3e9aa0", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/871fa16921713f0bb8666d06d96ac8ffae3e9aa0", "committedDate": "2020-07-13T19:04:26Z", "message": "Add initial programmingSubmission when first loading the exam for student exam conduction."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e45646cd923987c1bd7f47871eb4f4258daa138", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7e45646cd923987c1bd7f47871eb4f4258daa138", "committedDate": "2020-07-13T19:05:39Z", "message": "Try to check if the results are for the correct exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd78e88baeaf347ba6119274107a5eabe0f843ca", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fd78e88baeaf347ba6119274107a5eabe0f843ca", "committedDate": "2020-07-13T19:06:31Z", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ac4d13df39a0b37900128d4d6c72f7255850339", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/9ac4d13df39a0b37900128d4d6c72f7255850339", "committedDate": "2020-07-13T19:29:20Z", "message": "always set the result, if no result is already set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fa32b7f9f00310d9f3376db5f9fa9119227b8aa", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/4fa32b7f9f00310d9f3376db5f9fa9119227b8aa", "committedDate": "2020-07-13T19:32:45Z", "message": "user participation id instead of result.participation.id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NTQzOTgz", "url": "https://github.com/ls1intum/Artemis/pull/1875#pullrequestreview-447543983", "createdAt": "2020-07-13T19:37:34Z", "commit": {"oid": "4fa32b7f9f00310d9f3376db5f9fa9119227b8aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxOTozNzozNFrOGw3ALg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxOTozNzozNFrOGw3ALg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg4NTk5OA==", "bodyText": "why are you doing this? Can you add some comments?", "url": "https://github.com/ls1intum/Artemis/pull/1875#discussion_r453885998", "createdAt": "2020-07-13T19:37:34Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -191,6 +192,8 @@ export class ExamParticipationComponent implements OnInit, OnDestroy, ComponentC\n                         participation.submissions.forEach((submission) => {\n                             submission.isSynced = true;\n                         });\n+                    } else if (exercise.type === ExerciseType.PROGRAMMING) {\n+                        participation.submissions.push(new ProgrammingSubmission());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fa32b7f9f00310d9f3376db5f9fa9119227b8aa"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fd947d5563aafdc0338d1949f18614b7000fc41", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/2fd947d5563aafdc0338d1949f18614b7000fc41", "committedDate": "2020-07-13T20:36:42Z", "message": "Fix task steps bar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30e6d9ba8caf032be1b5449262e8ae6200f2e998", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/30e6d9ba8caf032be1b5449262e8ae6200f2e998", "committedDate": "2020-07-13T21:28:23Z", "message": "refactor saveFiles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f81603007b1998c20f4ef25b0a9640a18d13cd06", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f81603007b1998c20f4ef25b0a9640a18d13cd06", "committedDate": "2020-07-13T21:29:31Z", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c6858e267d36cb2e2b93e3cfee7bfe05d7dc169", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/6c6858e267d36cb2e2b93e3cfee7bfe05d7dc169", "committedDate": "2020-07-13T21:35:30Z", "message": "Remove unnecessary check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcb2144576486db83b31765970d8f397411b64b5", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/fcb2144576486db83b31765970d8f397411b64b5", "committedDate": "2020-07-13T21:35:49Z", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of https://github.com/ls1intum/Artemis into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcc2d98c10997d1e21d4fb81577b8aed2d3f9ce8", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/bcc2d98c10997d1e21d4fb81577b8aed2d3f9ce8", "committedDate": "2020-07-13T22:21:09Z", "message": "fix commit jest test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a2a675453e3fa898e42c836311852f9ab42da1c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1a2a675453e3fa898e42c836311852f9ab42da1c", "committedDate": "2020-07-13T22:28:01Z", "message": "throw error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "740aa6178ff4062127008d83cd8a56feb3d8aa01", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/740aa6178ff4062127008d83cd8a56feb3d8aa01", "committedDate": "2020-07-13T22:34:05Z", "message": "Merge branch 'develop' into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb6efd9c1d752a8d83cf7469b5d828a797e88e51", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/bb6efd9c1d752a8d83cf7469b5d828a797e88e51", "committedDate": "2020-07-13T22:50:06Z", "message": "rethrow error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ca4a5c9839cd417cf1f6060b0f9989d357c926d", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/6ca4a5c9839cd417cf1f6060b0f9989d357c926d", "committedDate": "2020-07-13T22:51:49Z", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1d5e6672633f854d3f7a87fce96415797eb75ec", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d1d5e6672633f854d3f7a87fce96415797eb75ec", "committedDate": "2020-07-13T22:57:16Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e37c3611405a1d6d806f3c6335d49d31a45d6f6", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/7e37c3611405a1d6d806f3c6335d49d31a45d6f6", "committedDate": "2020-07-13T22:58:33Z", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of https://github.com/ls1intum/Artemis into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dfac560f56d4b82da63ec6bcb09b57da093b699", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/1dfac560f56d4b82da63ec6bcb09b57da093b699", "committedDate": "2020-07-13T23:01:49Z", "message": "another one!"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Njc0MDIw", "url": "https://github.com/ls1intum/Artemis/pull/1875#pullrequestreview-447674020", "createdAt": "2020-07-13T23:16:03Z", "commit": {"oid": "1dfac560f56d4b82da63ec6bcb09b57da093b699"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzoxNjowM1rOGw99QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzoxNjowM1rOGw99QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk5OTkzNg==", "bodyText": "Reason to edit test: This test expected the status to be uncommited_changes as we did not wait for a response from saveFiles called by commit. With the changes introduced, we wait for saveFiles to return before we commit. The commitState  is set to committing, after saving the changes, before sending the (commit) request to the server.", "url": "https://github.com/ls1intum/Artemis/pull/1875#discussion_r453999936", "createdAt": "2020-07-13T23:16:03Z", "author": {"login": "anditurdiu"}, "path": "src/test/javascript/spec/integration/code-editor/code-editor-student.integration.spec.ts", "diffHunk": "@@ -496,13 +496,11 @@ describe('CodeEditorStudentIntegration', () => {\n         expect(saveFilesStub).to.have.been.calledOnceWithExactly([{ fileName: unsavedFile, fileContent: 'lorem ipsum' }]);\n         expect(container.editorState).to.equal(EditorState.SAVING);\n         expect(container.fileBrowser.status.editorState).to.equal(EditorState.SAVING);\n-        expect(container.commitState).to.equal(CommitState.UNCOMMITTED_CHANGES);\n-        expect(container.fileBrowser.status.commitState).to.equal(CommitState.UNCOMMITTED_CHANGES);\n-        saveFilesSubject.next({ [unsavedFile]: null });\n-\n         // committing\n         expect(commitStub).to.have.been.calledOnce;\n         expect(container.commitState).to.equal(CommitState.COMMITTING);\n+        expect(container.fileBrowser.status.commitState).to.equal(CommitState.COMMITTING);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dfac560f56d4b82da63ec6bcb09b57da093b699"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65174c8dc06f18ad178b1be7851177b0e64d5705", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/65174c8dc06f18ad178b1be7851177b0e64d5705", "committedDate": "2020-07-13T23:29:43Z", "message": "Set return type of interface method updateFiles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "386ce74ff745d8e336510555d4ef70d23f8cc5e7", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/386ce74ff745d8e336510555d4ef70d23f8cc5e7", "committedDate": "2020-07-13T23:30:27Z", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODM3NjY3", "url": "https://github.com/ls1intum/Artemis/pull/1875#pullrequestreview-447837667", "createdAt": "2020-07-14T06:59:05Z", "commit": {"oid": "386ce74ff745d8e336510555d4ef70d23f8cc5e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4335, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}