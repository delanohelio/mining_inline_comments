{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMTM1Mzkw", "number": 2277, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMzoxMjoxOFrOEzF4AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMzoxOTo0NlrOEzSzpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMDA5MDg4OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMzoxMjoxOFrOHqGfpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjo1NDozN1rOHqab5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwODY0Nw==", "bodyText": "I don't see where isAssessmentOver is used. Maybe I'm blind because codacy didn't report anything \ud83d\ude04", "url": "https://github.com/ls1intum/Artemis/pull/2277#discussion_r513908647", "createdAt": "2020-10-29T03:12:18Z", "author": {"login": "kloessst"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "diffHunk": "@@ -500,38 +500,7 @@ public void filterSensitiveInformation() {\n     @Override\n     public Set<Result> findResultsFilteredForStudents(Participation participation) {\n         boolean isAssessmentOver = getAssessmentDueDate() == null || getAssessmentDueDate().isBefore(ZonedDateTime.now());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10e10e4a44cebae9d361d2542b95c455974e1bff"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIzNTM2NQ==", "bodyText": "Jupe you are right, this can be removed as it is already called in checkForRatedAndAssessedResult. Good catch! :)", "url": "https://github.com/ls1intum/Artemis/pull/2277#discussion_r514235365", "createdAt": "2020-10-29T12:54:37Z", "author": {"login": "fde312"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "diffHunk": "@@ -500,38 +500,7 @@ public void filterSensitiveInformation() {\n     @Override\n     public Set<Result> findResultsFilteredForStudents(Participation participation) {\n         boolean isAssessmentOver = getAssessmentDueDate() == null || getAssessmentDueDate().isBefore(ZonedDateTime.now());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkwODY0Nw=="}, "originalCommit": {"oid": "10e10e4a44cebae9d361d2542b95c455974e1bff"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjExMTY4OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjo1NToxMlrOHqadeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjo1NToxMlrOHqadeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIzNTc2OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    boolean isAssessmentOver = getAssessmentDueDate() == null || getAssessmentDueDate().isBefore(ZonedDateTime.now());", "url": "https://github.com/ls1intum/Artemis/pull/2277#discussion_r514235768", "createdAt": "2020-10-29T12:55:12Z", "author": {"login": "fde312"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "diffHunk": "@@ -500,38 +500,7 @@ public void filterSensitiveInformation() {\n     @Override\n     public Set<Result> findResultsFilteredForStudents(Participation participation) {\n         boolean isAssessmentOver = getAssessmentDueDate() == null || getAssessmentDueDate().isBefore(ZonedDateTime.now());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10e10e4a44cebae9d361d2542b95c455974e1bff"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjIwOTU3OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/domain/Exercise.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMzoxOTo0NVrOHqbaZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMzoxOTo0NVrOHqbaZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI1MTM2Nw==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/ls1intum/Artemis/pull/2277#discussion_r514251367", "createdAt": "2020-10-29T13:19:45Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/Exercise.java", "diffHunk": "@@ -536,12 +536,17 @@ public Submission findLatestSubmissionWithRatedResultWithCompletionDate(Particip\n         }\n         for (var submission : participation.getSubmissions()) {\n             var result = submission.getResult();\n-            if (result == null) {\n+            // If not the result does not exist or is not assessed yet, we can skip it\n+            if (result == null || result.getCompletionDate() == null) {\n                 continue;\n             }\n             // NOTE: for the dashboard we only use rated results with completion date\n             boolean isAssessmentOver = ignoreAssessmentDueDate || getAssessmentDueDate() == null || getAssessmentDueDate().isBefore(ZonedDateTime.now());\n-            if (result.getCompletionDate() != null && Boolean.TRUE.equals(result.isRated()) && isAssessmentOver) {\n+            boolean isProgrammingExercise = participation.getExercise() instanceof ProgrammingExercise;\n+            // Check that submission was submitted in time (rated). For non programming exercises we check if the assessment due date has passed (if set)\n+            if (Boolean.TRUE.equals(result.isRated()) && (!isProgrammingExercise && isAssessmentOver\n+                    // For programming exercises we check that the assessment due date has passed (if set) for manual results otherwise we always show the automatic result\n+                    || isProgrammingExercise && ((result.isManualResult() && isAssessmentOver) || result.getAssessmentType().equals(AssessmentType.AUTOMATIC)))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08253bfd218cb2cd954134eabc297d2211315ca3"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjIwOTY2OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMzoxOTo0NlrOHqbadg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMzoxOTo0NlrOHqbadg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI1MTM4Mg==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/ls1intum/Artemis/pull/2277#discussion_r514251382", "createdAt": "2020-10-29T13:19:46Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/ProgrammingExercise.java", "diffHunk": "@@ -544,6 +512,12 @@ public boolean areManualResultsAllowed() {\n         return getAssessmentType() == AssessmentType.SEMI_AUTOMATIC && (relevantDueDate == null || relevantDueDate.isBefore(ZonedDateTime.now()));\n     }\n \n+    private boolean checkForRatedAndAssessedResult(Result result) {\n+        boolean isAssessmentOver = getAssessmentDueDate() == null || getAssessmentDueDate().isBefore(ZonedDateTime.now());\n+        return Boolean.TRUE.equals(result.isRated()) && result.getCompletionDate() != null\n+                && ((result.isManualResult() && isAssessmentOver) || result.getAssessmentType().equals(AssessmentType.AUTOMATIC));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08253bfd218cb2cd954134eabc297d2211315ca3"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4592, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}