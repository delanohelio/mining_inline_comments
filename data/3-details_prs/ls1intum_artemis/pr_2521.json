{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NjQ2Nzk5", "number": 2521, "title": "Fix the login screen shortly displaying even when logged in", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\nWe opening the main page (e.g. \"https://artemistest.ase.in.tum.de\") you'd often see the login screen for a split second before being redirected to the courses page.\nDescription\nThe login page now only displays when we actually need the user to log in.\nCode reviewing\nI suggest using https://github.com/ls1intum/Artemis/pull/2521/files?w=1 or selecting \"Hide whitespace changes\" in the diff settings to reduce the visual noise.\nSteps for Testing\nIt is best to compare this to the previous behaviour. Enter the URL of the Artemis instance without any further paths. (E.g. just \"https://artemistest.ase.in.tum.de\") On older versions you will see the login screen, with this fix you will not.\nThe LTI Integration of edX will also need to be tested. (Would be nice if one of the seecx tutors could give this a go.)\nGif of the wrong behaviour:", "createdAt": "2020-12-08T18:41:01Z", "url": "https://github.com/ls1intum/Artemis/pull/2521", "merged": true, "mergeCommit": {"oid": "c0b41fdc0a94c11953038ffd433b00c5eecbb337"}, "closed": true, "closedAt": "2020-12-10T11:45:28Z", "author": {"login": "FrankeLukas"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkOgqDgH2gAyNTM0NjQ2Nzk5Ojk0MTljZDc4YjYwZTMxMzEzMzljMGJjYjE1MDFiM2I5OGZjZTkzN2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkuqp-AFqTU0ODkzMzk3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a", "author": {"user": {"login": "FrankeLukas", "name": "Lukas Franke"}}, "url": "https://github.com/ls1intum/Artemis/commit/9419cd78b60e3131339c0bcb1501b3b98fce937a", "committedDate": "2020-12-08T18:32:51Z", "message": "Fix the login screen shortly displaying even when logged in"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTkyNDc3", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-547592477", "createdAt": "2020-12-08T20:12:58Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTkzNTM3", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-547593537", "createdAt": "2020-12-08T20:14:35Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjMwNzYz", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-547630763", "createdAt": "2020-12-08T21:04:40Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjM0Nzg5", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-547634789", "createdAt": "2020-12-08T21:10:45Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NzI3NTg5", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-547727589", "createdAt": "2020-12-08T23:45:53Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDUyNDkz", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548052493", "createdAt": "2020-12-09T10:41:21Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTA2NjQz", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548106643", "createdAt": "2020-12-09T11:52:51Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MzE2NDY2", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548316466", "createdAt": "2020-12-09T15:41:43Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjE5NDQy", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548619442", "createdAt": "2020-12-09T21:21:23Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjQzMzA5", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548643309", "createdAt": "2020-12-09T21:55:40Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMTo1NTo0MVrOICrTbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMTo1NTo0MVrOICrTbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3NzU0OA==", "bodyText": "Is the use of hidden intentional? Why not use `ngif (hmtl content is not loaded when the statement evaluates to false)?", "url": "https://github.com/ls1intum/Artemis/pull/2521#discussion_r539677548", "createdAt": "2020-12-09T21:55:41Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/home/home.component.html", "diffHunk": "@@ -1,93 +1,95 @@\n-<div class=\"row\">\n-    <div class=\"col-md-8 offset-md-2 text-center\">\n-        <h1 jhiTranslate=\"home.title\">Welcome to Artemis!</h1>\n-        <p class=\"lead\" jhiTranslate=\"home.subtitle\">Interactive Learning with Individual Feedback</p>\n-        <div *ngIf=\"!accountName\" class=\"lead\" [jhiTranslate]=\"'home.pleaseSignIn'\">Please sign in with your account.</div>\n-        <div *ngIf=\"accountName\" class=\"lead\" [jhiTranslate]=\"'home.pleaseSignInAccount'\" [translateValues]=\"{ account: accountName }\">Please sign in with your account.</div>\n+<div [hidden]=\"loading\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjQ3OTUy", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548647952", "createdAt": "2020-12-09T22:02:38Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjowMjozOVrOICrivw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjowMjozOVrOICrivw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MTQ3MQ==", "bodyText": "Just a question: Do you really need to add the inputFocused variable or is it redundant? I mean if the page isn't loaded, you shouldn't focus the input. And a use case where `this.inputFocused = true; this.loading = false) doesn't really play a role because you don't see the input", "url": "https://github.com/ls1intum/Artemis/pull/2521#discussion_r539681471", "createdAt": "2020-12-09T22:02:39Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/home/home.component.ts", "diffHunk": "@@ -91,8 +98,18 @@ export class HomeComponent implements OnInit, AfterViewInit {\n         });\n     }\n \n-    ngAfterViewInit() {\n-        this.renderer.selectRootElement('#username', true).focus();\n+    ngAfterViewChecked() {\n+        // Only focus the username input once, not on every update\n+        if (this.inputFocused || this.loading) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjQ5MTIz", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548649123", "createdAt": "2020-12-09T22:04:27Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTMzOTc1", "url": "https://github.com/ls1intum/Artemis/pull/2521#pullrequestreview-548933975", "createdAt": "2020-12-10T08:00:44Z", "commit": {"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3414, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}