{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MDIyMzAx", "number": 1883, "title": "[Feature] Embed Images in Markdown Editor", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I documented the Java code using JavaDoc style.\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nCurrently only external images can be loaded in the markdown editor. Artemis user can't upload screenshots or similar to visualize their problems / thoughts.\nDescription\n\nWe allow users to upload images (up to 10MB) using the markdown editor. The functionality is similar to how it is currently in github. You can upload images by copy pasting, dragging and dropping files or clicking the upload box below the editor.\nSteps for Testing\n\nLog in to Artemis\nNavigate to Any place which uses the markdown editor: eg: create an exercise.\nIn the markdown editor, insert your image\nSave\nNow view the exercise (e.g.) The image should be visible.\n\nScreenshots\n\n\nUpload box:\n\nUploaded image as markdown:\n\nImage embeded in Markdown:", "createdAt": "2020-07-14T17:45:33Z", "url": "https://github.com/ls1intum/Artemis/pull/1883", "merged": true, "mergeCommit": {"oid": "54517dc516de91f60593647721714d6a18f17edd"}, "closed": true, "closedAt": "2020-07-16T22:13:23Z", "author": {"login": "filip-gregurevic"}, "timelineItems": {"totalCount": 76, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdtwxQgH2gAyNDQ5MDIyMzAxOjhmYzQ2Yzk1OWQ1YjdlYjMzMDI4YjkzNWI1NTJiMDc2OWFhNWM0MmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1mwLWgFqTQ1MDI1MjI1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8fc46c959d5b7eb33028b935b552b0769aa5c42a", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/8fc46c959d5b7eb33028b935b552b0769aa5c42a", "committedDate": "2020-05-03T16:48:53Z", "message": "change deprecated ngbtabs to nav"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce6de51bba88a468413e2e3198fae72d0d841d62", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/ce6de51bba88a468413e2e3198fae72d0d841d62", "committedDate": "2020-05-03T17:38:02Z", "message": "update showdown-katex version, show blockquotes, fix linebreaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88b2eb14d4b4ef7e47522ca12c5789735a4e22e7", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/88b2eb14d4b4ef7e47522ca12c5789735a4e22e7", "committedDate": "2020-05-03T17:46:23Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cec8abc166445c66b093033b2b36df2337d5b864", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cec8abc166445c66b093033b2b36df2337d5b864", "committedDate": "2020-05-03T17:47:03Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b38b1ec093e26a40d93cd9c983509dd3ba17094c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/b38b1ec093e26a40d93cd9c983509dd3ba17094c", "committedDate": "2020-05-03T18:53:35Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fcb448234f7854c5be027c083e5104995518f98", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/1fcb448234f7854c5be027c083e5104995518f98", "committedDate": "2020-05-04T14:09:11Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dca129933510fed0e04c48e74cb7577a9c7727c8", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/dca129933510fed0e04c48e74cb7577a9c7727c8", "committedDate": "2020-05-04T14:10:39Z", "message": "init file upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a54f2576947e5882fbbb6618fb1f3f08da9dffa4", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/a54f2576947e5882fbbb6618fb1f3f08da9dffa4", "committedDate": "2020-05-04T17:55:47Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8495b67f8af17727302dbece26edaa8a086fbfd", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/f8495b67f8af17727302dbece26edaa8a086fbfd", "committedDate": "2020-05-05T10:37:49Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2402ca59c12a3d9b1a57fc3ccd0259d734133d82", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/2402ca59c12a3d9b1a57fc3ccd0259d734133d82", "committedDate": "2020-05-05T19:35:32Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61672eecdc67262bd56e423e932ace3ae9c3bc05", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/61672eecdc67262bd56e423e932ace3ae9c3bc05", "committedDate": "2020-05-05T21:05:38Z", "message": "init file input styling and logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1848698af8984d4d102866e51fa08aa9ad11c9a9", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/1848698af8984d4d102866e51fa08aa9ad11c9a9", "committedDate": "2020-05-06T16:12:40Z", "message": "add tooltip and link for markdown guide"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcf360ceb2d95242198c2ba6d697a19b22cac36c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/fcf360ceb2d95242198c2ba6d697a19b22cac36c", "committedDate": "2020-05-06T20:19:24Z", "message": "upload bar styling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "700aed4c329c012be27ccd5b3f21523ea9a275a8", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/700aed4c329c012be27ccd5b3f21523ea9a275a8", "committedDate": "2020-05-07T09:54:53Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "680def9fdc505ed3185aab84c8447ea5f923482c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/680def9fdc505ed3185aab84c8447ea5f923482c", "committedDate": "2020-05-07T19:34:12Z", "message": "upload file on input and add link to editor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "738d22c3128004af83f55f0731d902f778e6e685", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/738d22c3128004af83f55f0731d902f778e6e685", "committedDate": "2020-05-07T19:35:13Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc6a644d3054297ea273f5d68d765f0760f3fa50", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cc6a644d3054297ea273f5d68d765f0760f3fa50", "committedDate": "2020-05-07T21:59:37Z", "message": "add alt while loading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8608282e8264cacbd48e4c991e8cf74ca1f21861", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/8608282e8264cacbd48e4c991e8cf74ca1f21861", "committedDate": "2020-05-08T11:41:26Z", "message": "init drop upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e37b65a7a374e47a681f69d351148dd8101fe70", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/9e37b65a7a374e47a681f69d351148dd8101fe70", "committedDate": "2020-05-11T09:30:55Z", "message": "support multiple files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30c42b1c2436c2bc8269be83ef935332a950ad59", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/30c42b1c2436c2bc8269be83ef935332a950ad59", "committedDate": "2020-05-11T12:56:43Z", "message": "adapt change from refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb8067b5916b77d329b64d3b83149d2f5e0a589e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cb8067b5916b77d329b64d3b83149d2f5e0a589e", "committedDate": "2020-05-11T18:45:47Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files\n\n# Conflicts:\n#\tsrc/main/webapp/app/shared/markdown-editor/markdown-editor.component.html\n#\tyarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d26808c783845a417e1b2914f9a29cb98f464c95", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/d26808c783845a417e1b2914f9a29cb98f464c95", "committedDate": "2020-05-11T18:52:36Z", "message": "restore yarn lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cf552c7c5c0f3749bc98bdeb1f7feaa70056ff5", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/0cf552c7c5c0f3749bc98bdeb1f7feaa70056ff5", "committedDate": "2020-05-11T19:45:06Z", "message": "handle multiple files via input and drop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78712a0ff255fc8c6ee1eeeaae09846b3da4decc", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/78712a0ff255fc8c6ee1eeeaae09846b3da4decc", "committedDate": "2020-05-11T21:21:29Z", "message": "change to img"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33a8a0fcf8b30786d00f117dcd3900f0d263563a", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/33a8a0fcf8b30786d00f117dcd3900f0d263563a", "committedDate": "2020-05-12T08:14:19Z", "message": "disable drop if file upload disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d525e7ec476a24233ca069458e94d17e1e743fd8", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/d525e7ec476a24233ca069458e94d17e1e743fd8", "committedDate": "2020-05-12T08:32:11Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b2859d1cbb8d734c288ffc916631b9670375e44", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/4b2859d1cbb8d734c288ffc916631b9670375e44", "committedDate": "2020-05-12T10:57:51Z", "message": "remove unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42db8b282269d92b2d49798c29bc1ebc9902ec0c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/42db8b282269d92b2d49798c29bc1ebc9902ec0c", "committedDate": "2020-05-12T11:43:54Z", "message": "handle error and different file types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380d418ded969ce031e90eaafd70436a940f887e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/380d418ded969ce031e90eaafd70436a940f887e", "committedDate": "2020-05-12T11:54:45Z", "message": "Merge branch 'develop' into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d19b11a6ea8cfb5ae10f6705d51036a3e078895", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/8d19b11a6ea8cfb5ae10f6705d51036a3e078895", "committedDate": "2020-05-12T15:20:00Z", "message": "init pasting logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f68bf340911b93c2152be959fc1882705a073e5", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/5f68bf340911b93c2152be959fc1882705a073e5", "committedDate": "2020-05-13T13:05:59Z", "message": "handle only images"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2a8da5ddd9573c7996461a577d7817cc5a80f60", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/e2a8da5ddd9573c7996461a577d7817cc5a80f60", "committedDate": "2020-05-25T19:12:41Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c73aa42baaa0d0a859cf57ab0dca89d57c6a525", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/7c73aa42baaa0d0a859cf57ab0dca89d57c6a525", "committedDate": "2020-07-08T16:24:50Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3048ceb56e220382c7d1407e9beeb9424d2cd42e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/3048ceb56e220382c7d1407e9beeb9424d2cd42e", "committedDate": "2020-07-10T13:23:47Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bd10c3226f801dd16a00d85773021e196c3b1c8", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/5bd10c3226f801dd16a00d85773021e196c3b1c8", "committedDate": "2020-07-12T18:04:03Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "395ff34bc448485678bf6fd5e056d58ae0873126", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/395ff34bc448485678bf6fd5e056d58ae0873126", "committedDate": "2020-07-14T07:52:01Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93a618d91bc425d117f6907973c329320d02a896", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/93a618d91bc425d117f6907973c329320d02a896", "committedDate": "2020-07-14T14:39:48Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36d68a1da3b6104387bb90eed6819d3107b02985", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/36d68a1da3b6104387bb90eed6819d3107b02985", "committedDate": "2020-07-14T17:33:02Z", "message": "allow all requests for pictures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "260314974453f642c7fb44fbbc08e06934d8429d", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/260314974453f642c7fb44fbbc08e06934d8429d", "committedDate": "2020-07-14T17:45:12Z", "message": "revert small change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a02ffd02bf3c257508c172424818201e6d4654f", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/1a02ffd02bf3c257508c172424818201e6d4654f", "committedDate": "2020-07-14T18:09:35Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3e8e3744654b85d2fab89858713627be34a60b8", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/b3e8e3744654b85d2fab89858713627be34a60b8", "committedDate": "2020-07-15T13:42:07Z", "message": "add endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6f6ed2a497d8de68885ba219e1bf39deddda752", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/c6f6ed2a497d8de68885ba219e1bf39deddda752", "committedDate": "2020-07-15T13:44:37Z", "message": "add new service method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d928fe1b79642bbcd08620c4fa1c98c37dbcba18", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/d928fe1b79642bbcd08620c4fa1c98c37dbcba18", "committedDate": "2020-07-15T14:01:07Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63759afb547d2c7b0425aca9d6ab5e3fb48f6c17", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/63759afb547d2c7b0425aca9d6ab5e3fb48f6c17", "committedDate": "2020-07-15T14:07:55Z", "message": "Merge branch 'develop' into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42b041ca7437325e1695e8fcaaeea9d7db8cb4cc", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/42b041ca7437325e1695e8fcaaeea9d7db8cb4cc", "committedDate": "2020-07-15T15:47:37Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fc44f39d6347737ad34934243e2a55cbb0cbfa1", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/5fc44f39d6347737ad34934243e2a55cbb0cbfa1", "committedDate": "2020-07-15T18:59:38Z", "message": "refactor saveFiles,\nextract method to reuse code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c7faf57cfae29225170d831e91dcfeac66d025b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2c7faf57cfae29225170d831e91dcfeac66d025b", "committedDate": "2020-07-15T19:37:14Z", "message": "add tests for markdown file upload and normal file upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ef774f28abfc248a4d45d466cc345c91269f4bb", "author": {"user": {"login": "anditurdiu", "name": "Andi Turdiu"}}, "url": "https://github.com/ls1intum/Artemis/commit/9ef774f28abfc248a4d45d466cc345c91269f4bb", "committedDate": "2020-07-15T20:02:28Z", "message": "Merge branch 'develop' into feature/markdown-editor/embed-files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzA1NDgw", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-449705480", "createdAt": "2020-07-16T10:06:36Z", "commit": {"oid": "9ef774f28abfc248a4d45d466cc345c91269f4bb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMDowNjozNlrOGykLVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMDoxNDowNFrOGyka_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTY3NDcwOA==", "bodyText": "You've added @async here but the method itself is not async", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455674708", "createdAt": "2020-07-16T10:06:36Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/shared/http/file-uploader.service.ts", "diffHunk": "@@ -49,6 +49,42 @@ export class FileUploaderService {\n         return this.http.post<FileUploadResponse>(url, formData).toPromise();\n     }\n \n+    /**\n+     * Function which uploads a file. It checks for supported file extensions and file size.\n+     * Options must be passed as a dictionary. E.g: { keepFileName: true }\n+     * @async", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef774f28abfc248a4d45d466cc345c91269f4bb"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTY3NTM4MA==", "bodyText": "Will the error be passed to the alert service?", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455675380", "createdAt": "2020-07-16T10:07:53Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/shared/http/file-uploader.service.ts", "diffHunk": "@@ -49,6 +49,42 @@ export class FileUploaderService {\n         return this.http.post<FileUploadResponse>(url, formData).toPromise();\n     }\n \n+    /**\n+     * Function which uploads a file. It checks for supported file extensions and file size.\n+     * Options must be passed as a dictionary. E.g: { keepFileName: true }\n+     * @async\n+     * @param {Blob | File} file\n+     * @param {string} fileName\n+     * @param options\n+     */\n+    uploadMarkdownFile(file: Blob | File, fileName?: string, options?: any): Promise<FileUploadResponse> {\n+        /** Check file extension **/\n+        const fileExtension = fileName ? fileName.split('.').pop()!.toLocaleLowerCase() : file['name'].split('.').pop().toLocaleLowerCase();\n+        if (this.acceptedFileExtensions.split(',').indexOf(fileExtension) === -1) {\n+            return Promise.reject(\n+                new Error(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef774f28abfc248a4d45d466cc345c91269f4bb"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTY3ODcxOA==", "bodyText": "See comment above", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455678718", "createdAt": "2020-07-16T10:14:04Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/shared/http/file-uploader.service.ts", "diffHunk": "@@ -49,6 +49,42 @@ export class FileUploaderService {\n         return this.http.post<FileUploadResponse>(url, formData).toPromise();\n     }\n \n+    /**\n+     * Function which uploads a file. It checks for supported file extensions and file size.\n+     * Options must be passed as a dictionary. E.g: { keepFileName: true }\n+     * @async\n+     * @param {Blob | File} file\n+     * @param {string} fileName\n+     * @param options\n+     */\n+    uploadMarkdownFile(file: Blob | File, fileName?: string, options?: any): Promise<FileUploadResponse> {\n+        /** Check file extension **/\n+        const fileExtension = fileName ? fileName.split('.').pop()!.toLocaleLowerCase() : file['name'].split('.').pop().toLocaleLowerCase();\n+        if (this.acceptedFileExtensions.split(',').indexOf(fileExtension) === -1) {\n+            return Promise.reject(\n+                new Error(\n+                    'Unsupported file type! Only files of type ' +\n+                        this.acceptedFileExtensions\n+                            .split(',')\n+                            .map((extension) => `\".${extension}\"`)\n+                            .join(', ') +\n+                        ' allowed.',\n+                ),\n+            );\n+        }\n+\n+        /** Check file size **/\n+        if (file.size > MAX_FILE_SIZE) {\n+            return Promise.reject(new Error('File is too big! Maximum allowed file size: ' + MAX_FILE_SIZE / (1024 * 1024) + ' MB.'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ef774f28abfc248a4d45d466cc345c91269f4bb"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/18c6b46674bf1ed500345ad019020470280bc57c", "committedDate": "2020-07-16T10:44:42Z", "message": "remove async from doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzY1Njc5", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-449765679", "createdAt": "2020-07-16T11:39:36Z", "commit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTozOTozNlrOGynG0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTozOTozNlrOGynG0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTcyMjcwNA==", "bodyText": "We should think about the permission concept here. For now I suggest that we only allow this to ADMIN, INSTRUCTOR and TA roles.", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455722704", "createdAt": "2020-07-16T11:39:36Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -161,6 +110,34 @@ public FileResource(FileService fileService, ResourceLoader resourceLoader, Lect\n         return responseEntityForFilePath(FilePathService.getTempFilepath() + filename);\n     }\n \n+    /**\n+     * POST /markdownFileUpload : Upload a new file for markdown.\n+     *\n+     * @param file The file to save\n+     * @param keepFileName specifies if original file name should be kept\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @PostMapping(\"/markdownFileUpload\")\n+    @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA', 'USER')\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "originalPosition": 83}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzY1Nzcx", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-449765771", "createdAt": "2020-07-16T11:39:43Z", "commit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTozOTo0M1rOGynHJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTozOTo0M1rOGynHJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTcyMjc4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA', 'USER')\")\n          \n          \n            \n                @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA')\")", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455722789", "createdAt": "2020-07-16T11:39:43Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -161,6 +110,34 @@ public FileResource(FileService fileService, ResourceLoader resourceLoader, Lect\n         return responseEntityForFilePath(FilePathService.getTempFilepath() + filename);\n     }\n \n+    /**\n+     * POST /markdownFileUpload : Upload a new file for markdown.\n+     *\n+     * @param file The file to save\n+     * @param keepFileName specifies if original file name should be kept\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @PostMapping(\"/markdownFileUpload\")\n+    @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA', 'USER')\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "originalPosition": 83}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzY3NDIx", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-449767421", "createdAt": "2020-07-16T11:42:19Z", "commit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTo0MjoxOVrOGynMHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTo0MjoxOVrOGynMHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTcyNDA2Mw==", "bodyText": "Does this mean that really every user can download those files? I don't think this would be a good solution.\nCould we apply the same principle as for lecture downloads, so that only students within the same course (or students who have access to the exercise) can download markdown files?\nOr would this be too complicated for now?", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455724063", "createdAt": "2020-07-16T11:42:19Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -161,6 +110,34 @@ public FileResource(FileService fileService, ResourceLoader resourceLoader, Lect\n         return responseEntityForFilePath(FilePathService.getTempFilepath() + filename);\n     }\n \n+    /**\n+     * POST /markdownFileUpload : Upload a new file for markdown.\n+     *\n+     * @param file The file to save\n+     * @param keepFileName specifies if original file name should be kept\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @PostMapping(\"/markdownFileUpload\")\n+    @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA', 'USER')\")\n+    public ResponseEntity<String> saveMarkdownFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName) throws URISyntaxException {\n+        log.debug(\"REST request to upload file for markdown: {}\", file.getOriginalFilename());\n+        return handleSaveFile(file, keepFileName, true);\n+    }\n+\n+    /**\n+     * GET /files/markdown/:filename : Get the markdown file with the given filename\n+     *\n+     * @param filename The filename of the file to get\n+     * @return The requested file, or 404 if the file doesn't exist\n+     */\n+    @GetMapping(\"/files/markdown/{filename:.+}\")\n+    @PreAuthorize(\"permitAll()\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "originalPosition": 96}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzY4ODgw", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-449768880", "createdAt": "2020-07-16T11:44:34Z", "commit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTo0NDozNFrOGynQVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMTo0NDozNFrOGynQVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTcyNTE0MQ==", "bodyText": "How do you handle if two people upload a file with the same name? Does the file name include some random string to prevent that the 2nd file is overridden by the 1st one?", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455725141", "createdAt": "2020-07-16T11:44:34Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -311,6 +288,89 @@ private boolean validateTemporaryAccessToken(String temporaryAccessToken, String\n         return true;\n     }\n \n+    /**\n+     * Helper method which handles the file creation for both normal file uploads and for markdown\n+     * @param file The file to be uplaoded\n+     * @param keepFileName specifies if original file name should be kept\n+     * @param markdown boolean which is set to true, when we are uploading a file within the markdown editor\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @NotNull\n+    private ResponseEntity<String> handleSaveFile(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName, boolean markdown)\n+            throws URISyntaxException {\n+        // NOTE: Maximum file size is set in resources/config/application.yml\n+        // Currently set to 10 MB\n+\n+        // check for file type\n+        String fileExtension = FilenameUtils.getExtension(file.getOriginalFilename());\n+        if (fileExtension == null || this.allowedFileExtensions.stream().noneMatch(fileExtension::equalsIgnoreCase)) {\n+            return ResponseEntity.badRequest().body(\"Unsupported file type! Allowed file types: \" + String.join(\", \", this.allowedFileExtensions));\n+        }\n+\n+        final String filePath;\n+        final String fileNameAddition;\n+        final StringBuilder responsePath = new StringBuilder();\n+\n+        // set the appropriate values depending on the use case\n+        if (markdown) {\n+            filePath = FilePathService.getMarkdownFilepath();\n+            fileNameAddition = \"Markdown_\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18c6b46674bf1ed500345ad019020470280bc57c"}, "originalPosition": 136}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7810c6a539b189382204046febd2b8cb5fa71ec5", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/7810c6a539b189382204046febd2b8cb5fa71ec5", "committedDate": "2020-07-16T12:03:28Z", "message": "disable file upload for student questions markdown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/b7aa379ed75321fad6efbec2cab6c792e03a4ad4", "committedDate": "2020-07-16T14:14:37Z", "message": "Update integration tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDAzMzA4", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450003308", "createdAt": "2020-07-16T16:12:43Z", "commit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjoxMjo0M1rOGyyQzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjoxMjo0M1rOGyyQzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkwNTQ4NA==", "bodyText": "just a small thing but maybe something like markdown-file-upload  instead of camelCase", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455905484", "createdAt": "2020-07-16T16:12:43Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -161,6 +110,34 @@ public FileResource(FileService fileService, ResourceLoader resourceLoader, Lect\n         return responseEntityForFilePath(FilePathService.getTempFilepath() + filename);\n     }\n \n+    /**\n+     * POST /markdownFileUpload : Upload a new file for markdown.\n+     *\n+     * @param file The file to save\n+     * @param keepFileName specifies if original file name should be kept\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @PostMapping(\"/markdownFileUpload\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "originalPosition": 82}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDEzMDE4", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450013018", "createdAt": "2020-07-16T16:24:12Z", "commit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjoyNDoxMlrOGyyutQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjoyNDoxMlrOGyyutQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkxMzE0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private ResponseEntity<String> handleSaveFile(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName, boolean markdown)\n          \n          \n            \n                private ResponseEntity<String> handleSaveFile(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"keepFileName\") boolean keepFileName, boolean markdown)", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455913141", "createdAt": "2020-07-16T16:24:12Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -311,6 +288,89 @@ private boolean validateTemporaryAccessToken(String temporaryAccessToken, String\n         return true;\n     }\n \n+    /**\n+     * Helper method which handles the file creation for both normal file uploads and for markdown\n+     * @param file The file to be uplaoded\n+     * @param keepFileName specifies if original file name should be kept\n+     * @param markdown boolean which is set to true, when we are uploading a file within the markdown editor\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @NotNull\n+    private ResponseEntity<String> handleSaveFile(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName, boolean markdown)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "originalPosition": 118}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDE3NzIz", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450017723", "createdAt": "2020-07-16T16:30:05Z", "commit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjozMDowNlrOGyy9PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjozMDowNlrOGyy9PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkxNjg2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"fileUpload\": \"F\u00fcge Datein durch Drag & Drop oder ausw\u00e4hlen hinzu.\",\n          \n          \n            \n                        \"fileUpload\": \"F\u00fcge Dateien durch Drag & Drop oder durch Ausw\u00e4hlen hinzu.\",", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455916861", "createdAt": "2020-07-16T16:30:06Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/i18n/de/markdownEditor.json", "diffHunk": "@@ -4,7 +4,9 @@\n             \"commands\": {\n                 \"katex\": \"Formel\",\n                 \"fullscreen\": \"Vollbild\"\n-            }\n+            },\n+            \"fileUpload\": \"F\u00fcge Datein durch Drag & Drop oder ausw\u00e4hlen hinzu.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDE5NjQx", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450019641", "createdAt": "2020-07-16T16:32:34Z", "commit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjozMjozNFrOGyzC5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjozMjozNFrOGyzC5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkxODMxMQ==", "bodyText": "Maybe you could define a type for the options instead of having any here?", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r455918311", "createdAt": "2020-07-16T16:32:34Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/shared/http/file-uploader.service.ts", "diffHunk": "@@ -49,6 +48,41 @@ export class FileUploaderService {\n         return this.http.post<FileUploadResponse>(url, formData).toPromise();\n     }\n \n+    /**\n+     * Function which uploads a file. It checks for supported file extensions and file size.\n+     * Options must be passed as a dictionary. E.g: { keepFileName: true }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e2005e172fa172a66d4726faf8e0df41587d21f", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/4e2005e172fa172a66d4726faf8e0df41587d21f", "committedDate": "2020-07-16T16:33:18Z", "message": "Update src/main/webapp/i18n/de/markdownEditor.json\n\nCo-authored-by: Stefan Waldhauser <hello@stefanwaldhauser.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDMzMjM2", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450033236", "createdAt": "2020-07-16T16:50:13Z", "commit": {"oid": "b7aa379ed75321fad6efbec2cab6c792e03a4ad4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f61c5d10f32ba58844f74794ac2a5fc4273248a8", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/f61c5d10f32ba58844f74794ac2a5fc4273248a8", "committedDate": "2020-07-16T17:07:40Z", "message": "add type for options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/30f2b48b81471e9967db0a3a4158ac90a58af5da", "committedDate": "2020-07-16T17:12:56Z", "message": "no camel case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDcxMTQ4", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450071148", "createdAt": "2020-07-16T17:39:15Z", "commit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDg0NDcw", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450084470", "createdAt": "2020-07-16T17:57:11Z", "commit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTg4Mzcy", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450188372", "createdAt": "2020-07-16T20:23:14Z", "commit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDoyMzoxNFrOGy7aCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDoyMzoxNFrOGy7aCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA1NTMwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private ResponseEntity<String> handleSaveFile(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName, boolean markdown)\n          \n          \n            \n                private ResponseEntity<String> handleSaveFile(MultipartFile file, boolean keepFileName, boolean markdown)", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r456055306", "createdAt": "2020-07-16T20:23:14Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -311,6 +288,89 @@ private boolean validateTemporaryAccessToken(String temporaryAccessToken, String\n         return true;\n     }\n \n+    /**\n+     * Helper method which handles the file creation for both normal file uploads and for markdown\n+     * @param file The file to be uplaoded\n+     * @param keepFileName specifies if original file name should be kept\n+     * @param markdown boolean which is set to true, when we are uploading a file within the markdown editor\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @NotNull\n+    private ResponseEntity<String> handleSaveFile(@RequestParam(\"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName, boolean markdown)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "originalPosition": 118}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTg5NjIy", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450189622", "createdAt": "2020-07-16T20:25:09Z", "commit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDoyNTowOVrOGy7d7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDoyNTowOVrOGy7d7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA1NjMwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public ResponseEntity<String> saveMarkdownFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName) throws URISyntaxException {\n          \n          \n            \n                public ResponseEntity<String> saveMarkdownFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(defaultValue = \"false\") boolean keepFileName) throws URISyntaxException {", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r456056301", "createdAt": "2020-07-16T20:25:09Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -161,6 +110,34 @@ public FileResource(FileService fileService, ResourceLoader resourceLoader, Lect\n         return responseEntityForFilePath(FilePathService.getTempFilepath() + filename);\n     }\n \n+    /**\n+     * POST /markdown-file-upload : Upload a new file for markdown.\n+     *\n+     * @param file The file to save\n+     * @param keepFileName specifies if original file name should be kept\n+     * @return The path of the file\n+     * @throws URISyntaxException if response path can't be converted into URI\n+     */\n+    @PostMapping(\"/markdown-file-upload\")\n+    @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA')\")\n+    public ResponseEntity<String> saveMarkdownFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName) throws URISyntaxException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "originalPosition": 84}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTg5ODY2", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450189866", "createdAt": "2020-07-16T20:25:31Z", "commit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDoyNTozMVrOGy7etQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDoyNTozMVrOGy7etQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA1NjUwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public ResponseEntity<String> saveFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName) throws URISyntaxException {\n          \n          \n            \n                public ResponseEntity<String> saveFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(defaultValue = \"false\") boolean keepFileName) throws URISyntaxException {", "url": "https://github.com/ls1intum/Artemis/pull/1883#discussion_r456056501", "createdAt": "2020-07-16T20:25:31Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java", "diffHunk": "@@ -92,60 +93,8 @@ public FileResource(FileService fileService, ResourceLoader resourceLoader, Lect\n     @PreAuthorize(\"hasAnyRole('ADMIN', 'INSTRUCTOR', 'TA')\")\n     public ResponseEntity<String> saveFile(@RequestParam(value = \"file\") MultipartFile file, @RequestParam(\"keepFileName\") Boolean keepFileName) throws URISyntaxException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30f2b48b81471e9967db0a3a4158ac90a58af5da"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c17ff04625ebc05a1e07f21b422cec792cb0c1b2", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/c17ff04625ebc05a1e07f21b422cec792cb0c1b2", "committedDate": "2020-07-16T20:28:23Z", "message": "Update src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java\n\nCo-authored-by: Stephan Krusche <krusche@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42c763b58944f5bc03cfc4bff595452d7e232dad", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/42c763b58944f5bc03cfc4bff595452d7e232dad", "committedDate": "2020-07-16T20:28:58Z", "message": "Update src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java\n\nCo-authored-by: Stephan Krusche <krusche@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "328dc8e73d6c818f4c20ea48dbb1a62ddbefa61b", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/328dc8e73d6c818f4c20ea48dbb1a62ddbefa61b", "committedDate": "2020-07-16T20:29:33Z", "message": "Update src/main/java/de/tum/in/www1/artemis/web/rest/FileResource.java\n\nCo-authored-by: Stephan Krusche <krusche@in.tum.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjA4Njgz", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450208683", "createdAt": "2020-07-16T20:54:14Z", "commit": {"oid": "328dc8e73d6c818f4c20ea48dbb1a62ddbefa61b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjIxNzU2", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450221756", "createdAt": "2020-07-16T21:15:08Z", "commit": {"oid": "328dc8e73d6c818f4c20ea48dbb1a62ddbefa61b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f3b649db4fc534919f033a2f12405f76e0aba74", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/9f3b649db4fc534919f033a2f12405f76e0aba74", "committedDate": "2020-07-16T21:35:59Z", "message": "spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjUyMjU5", "url": "https://github.com/ls1intum/Artemis/pull/1883#pullrequestreview-450252259", "createdAt": "2020-07-16T22:13:05Z", "commit": {"oid": "9f3b649db4fc534919f033a2f12405f76e0aba74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4358, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}