{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NzIyMTQ5", "number": 1821, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNzo1NTozNFrOEL9vuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMzowMDo0NFrOEMENbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTgxNDMyOnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/ExamAccessService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNzo1NTozNFrOGtzKFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNzo1NTozNFrOGtzKFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY3NzI2OA==", "bodyText": "We should do this via an additional flag in the method to prevent side-effects on other requests", "url": "https://github.com/ls1intum/Artemis/pull/1821#discussion_r450677268", "createdAt": "2020-07-07T07:55:34Z", "author": {"login": "sascha11110"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ExamAccessService.java", "diffHunk": "@@ -94,7 +94,7 @@ public ExamAccessService(ExamRepository examRepository, ExerciseGroupRepository\n      */\n     public <T> Optional<ResponseEntity<T>> checkCourseAccess(Long courseId) {\n         Course course = courseService.findOne(courseId);\n-        if (!authorizationCheckService.isAtLeastInstructorInCourse(course, null)) {\n+        if (!authorizationCheckService.isAtLeastTeachingAssistantInCourse(course, null)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a25cf3725ce532f9a7f3f9d38e5dda10db186e6d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTgxNjYwOnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ExerciseResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNzo1NjoyMlrOGtzLng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwNzo1NjoyMlrOGtzLng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY3NzY2Mg==", "bodyText": "Possible NPE here", "url": "https://github.com/ls1intum/Artemis/pull/1821#discussion_r450677662", "createdAt": "2020-07-07T07:56:22Z", "author": {"login": "sascha11110"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ExerciseResource.java", "diffHunk": "@@ -106,7 +107,7 @@ public ExerciseResource(ExerciseService exerciseService, ParticipationService pa\n         User user = userService.getUserWithGroupsAndAuthorities();\n         Exercise exercise = exerciseService.findOneWithCategoriesAndTeamAssignmentConfig(exerciseId);\n \n-        if (exercise.hasExerciseGroup()) {\n+        if (exercise.hasExerciseGroup() && (exercise.getDueDate().isAfter(ZonedDateTime.now())) || exercise.getDueDate() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a25cf3725ce532f9a7f3f9d38e5dda10db186e6d"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTgyODc2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exercises/text/manage/example-text-submission/example-text-submission.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMDoxMVrOGtzTzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMDoxMVrOGtzTzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY3OTc1OQ==", "bodyText": "To be consistent we should add await here", "url": "https://github.com/ls1intum/Artemis/pull/1821#discussion_r450679759", "createdAt": "2020-07-07T08:00:11Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/exercises/text/manage/example-text-submission/example-text-submission.component.ts", "diffHunk": "@@ -370,11 +370,15 @@ export class ExampleTextSubmissionComponent implements OnInit, AfterViewInit {\n      */\n     async back() {\n         // check if exam exercise\n-        if (this.exercise.course == null) {\n+        if (this.exercise.course == null || !this.exercise.course) {\n             const courseId = this.exercise.exerciseGroup?.exam?.course.id;\n             const examId = this.exercise.exerciseGroup?.exam?.id;\n             const exerciseGroupId = this.exercise.exerciseGroup?.id;\n-            await this.router.navigate(['/course-management', courseId, 'exams', examId, 'exercise-groups', exerciseGroupId, 'text-exercises', this.exerciseId, 'edit']);\n+            if (this.readOnly || this.toComplete) {\n+                this.router.navigate([`/course-management/${courseId}/exercises/${this.exerciseId}/tutor-dashboard`]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a25cf3725ce532f9a7f3f9d38e5dda10db186e6d"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTgzMTcxOnYy", "diffSide": "LEFT", "path": "src/test/java/de/tum/in/www1/artemis/ExerciseIntegrationTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMTowOFrOGtzVvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMTowOFrOGtzVvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MDI1NQ==", "bodyText": "Add explicit test case", "url": "https://github.com/ls1intum/Artemis/pull/1821#discussion_r450680255", "createdAt": "2020-07-07T08:01:08Z", "author": {"login": "sascha11110"}, "path": "src/test/java/de/tum/in/www1/artemis/ExerciseIntegrationTest.java", "diffHunk": "@@ -206,12 +206,6 @@ public void testGetExamExercise_asStudent_forbidden() throws Exception {\n         getExamExercise();\n     }\n \n-    @Test\n-    @WithMockUser(value = \"tutor1\", roles = \"TA\")\n-    public void testGetExamExercise_asTutor_forbidden() throws Exception {\n-        getExamExercise();\n-    }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a25cf3725ce532f9a7f3f9d38e5dda10db186e6d"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTgzNTUwOnYy", "diffSide": "LEFT", "path": "src/test/java/de/tum/in/www1/artemis/service/ExamAccessServiceTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMjoxNVrOGtzYHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMjoxNVrOGtzYHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MDg2Mg==", "bodyText": "Possibly not all of the routes should be open to tutors", "url": "https://github.com/ls1intum/Artemis/pull/1821#discussion_r450680862", "createdAt": "2020-07-07T08:02:15Z", "author": {"login": "sascha11110"}, "path": "src/test/java/de/tum/in/www1/artemis/service/ExamAccessServiceTest.java", "diffHunk": "@@ -114,29 +114,6 @@ public void testCheckCourseAccess_asStudent() {\n         assertThat(accessFailureCourseAndExamAndStudentExam.get()).isEqualTo(forbidden());\n     }\n \n-    @Test\n-    @WithMockUser(username = \"tutor1\", roles = \"TA\")\n-    public void testCheckCourseAccess_asTutor() {\n-        // checkCourseAccess\n-        Optional<ResponseEntity<Exam>> accessFailureCourse = examAccessService.checkCourseAccess(course1.getId());\n-        assertThat(accessFailureCourse.isPresent()).isTrue();\n-        assertThat(accessFailureCourse.get()).isEqualTo(forbidden());\n-        // checkCourseAndExamAccess\n-        Optional<ResponseEntity<Exam>> accessFailureCourseAndExam = examAccessService.checkCourseAndExamAccess(course1.getId(), exam1.getId());\n-        assertThat(accessFailureCourseAndExam.isPresent()).isTrue();\n-        assertThat(accessFailureCourseAndExam.get()).isEqualTo(forbidden());\n-        // checkCourseAndExamAndExerciseGroupAccess\n-        Optional<ResponseEntity<Exam>> accessFailureCourseAndExamAndExerciseGroup = examAccessService.checkCourseAndExamAndExerciseGroupAccess(course1.getId(), exam1.getId(),\n-                exerciseGroup1.getId());\n-        assertThat(accessFailureCourseAndExamAndExerciseGroup.isPresent()).isTrue();\n-        assertThat(accessFailureCourseAndExamAndExerciseGroup.get()).isEqualTo(forbidden());\n-        // checkCourseAndExamAndStudentExamAccess\n-        Optional<ResponseEntity<Exam>> accessFailureCourseAndExamAndStudentExam = examAccessService.checkCourseAndExamAndStudentExamAccess(course1.getId(), exam1.getId(),\n-                studentExam1.getId());\n-        assertThat(accessFailureCourseAndExamAndStudentExam.isPresent()).isTrue();\n-        assertThat(accessFailureCourseAndExamAndStudentExam.get()).isEqualTo(forbidden());\n-    }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a25cf3725ce532f9a7f3f9d38e5dda10db186e6d"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMDg3MzQxOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/course/dashboards/tutor-course-dashboard/tutor-course-dashboard.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMzowMDo0NFrOGt9aTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMzowMDo0NFrOGt9aTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg0NTI2MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            <h2 *ngIf=\"isExamMode\">{{ 'artemisApp.tutorCourseDashboard.pageHeaderExam' | translate }} {{ exam.title }}</h2>\n          \n          \n            \n                            <h2 *ngIf=\"isExamMode\">{{ 'artemisApp.tutorCourseDashboard.pageHeaderExam' | translate }} {{ exam?.title }}</h2>", "url": "https://github.com/ls1intum/Artemis/pull/1821#discussion_r450845260", "createdAt": "2020-07-07T13:00:44Z", "author": {"login": "JonasPetry"}, "path": "src/main/webapp/app/course/dashboards/tutor-course-dashboard/tutor-course-dashboard.component.html", "diffHunk": "@@ -3,8 +3,8 @@\n         <div class=\"col-8\">\n             <h2>\n                 <fa-icon [icon]=\"'arrow-left'\" (click)=\"back()\" class=\"back-button mr-2\"></fa-icon>\n-                {{ 'artemisApp.tutorCourseDashboard.pageHeader' | translate }} {{ course?.title }}\n-\n+                <h2 *ngIf=\"!isExamMode\">{{ 'artemisApp.tutorCourseDashboard.pageHeader' | translate }} {{ course?.title }}</h2>\n+                <h2 *ngIf=\"isExamMode\">{{ 'artemisApp.tutorCourseDashboard.pageHeaderExam' | translate }} {{ exam.title }}</h2>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9d177bc42354f84e68a60810b225fc858ac1b90"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4858, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}