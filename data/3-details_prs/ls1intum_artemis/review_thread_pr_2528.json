{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MzIyNjE2", "number": 2528, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjowNzowM1rOFDKViw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMDozNDoyN1rOFDq7YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4ODU5NDAzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjowNzowNFrOICrsMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTozMjo0N1rOIDPK2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4Mzg4OA==", "bodyText": "I think you can simplify that line with getSubmittedTextForSpot(element)?.text ?? ''", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r539683888", "createdAt": "2020-12-09T22:07:04Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "diffHunk": "@@ -40,8 +40,8 @@ <h4 class=\"question-title-display\">\n                         class=\"short-answer-question-container__input\"\n                         disabled\n                         [style.background]=\"getBackgroundColourForInputField(element)\"\n-                        value=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"\n-                        size=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text!.length + 2 : 5 }}\"\n+                        value=\"{{ getSubmittedTextForSpot(element)?.text !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b8257c4989b5e5ce42aff1603b159ba6cede9d7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI2NTE3OA==", "bodyText": "@ivanchimeno can you provide an example of how to use the operator ?? in this case? I tried this and it throws a compilation error Expression expected", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540265178", "createdAt": "2020-12-10T15:32:47Z", "author": {"login": "anditurdiu"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "diffHunk": "@@ -40,8 +40,8 @@ <h4 class=\"question-title-display\">\n                         class=\"short-answer-question-container__input\"\n                         disabled\n                         [style.background]=\"getBackgroundColourForInputField(element)\"\n-                        value=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"\n-                        size=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text!.length + 2 : 5 }}\"\n+                        value=\"{{ getSubmittedTextForSpot(element)?.text !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4Mzg4OA=="}, "originalCommit": {"oid": "9b8257c4989b5e5ce42aff1603b159ba6cede9d7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4ODU5NzEyOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjowNzo1M1rOICrt7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTozMjowMVrOIDPINw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4NDMzNQ==", "bodyText": "I think you can simplify that line with getSubmittedTextForSpot(element)?.text ?? ''", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r539684335", "createdAt": "2020-12-09T22:07:53Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "diffHunk": "@@ -51,8 +51,8 @@ <h4 class=\"question-title-display\">\n                             class=\"short-answer-question-container__input\"\n                             style=\"background: grey\"\n                             disabled\n-                            value=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"\n-                            size=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text!.length + 2 : 5 }}\"\n+                            value=\"{{ getSubmittedTextForSpot(element)?.text !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b8257c4989b5e5ce42aff1603b159ba6cede9d7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4NDkyMQ==", "bodyText": "On another thought, wouldn't it be better to store getSubmittedTextForSpot(element)?.text as a variable so that we don't have to do method calls / make the html longer?", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r539684921", "createdAt": "2020-12-09T22:09:05Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "diffHunk": "@@ -51,8 +51,8 @@ <h4 class=\"question-title-display\">\n                             class=\"short-answer-question-container__input\"\n                             style=\"background: grey\"\n                             disabled\n-                            value=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"\n-                            size=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text!.length + 2 : 5 }}\"\n+                            value=\"{{ getSubmittedTextForSpot(element)?.text !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4NDMzNQ=="}, "originalCommit": {"oid": "9b8257c4989b5e5ce42aff1603b159ba6cede9d7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI1ODQyNQ==", "bodyText": "@ivanchimeno can you provide an example of how to use the operator ?? in this case? I tried this and it throws a compilation error Expression expected", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540258425", "createdAt": "2020-12-10T15:24:57Z", "author": {"login": "anditurdiu"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "diffHunk": "@@ -51,8 +51,8 @@ <h4 class=\"question-title-display\">\n                             class=\"short-answer-question-container__input\"\n                             style=\"background: grey\"\n                             disabled\n-                            value=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"\n-                            size=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text!.length + 2 : 5 }}\"\n+                            value=\"{{ getSubmittedTextForSpot(element)?.text !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4NDMzNQ=="}, "originalCommit": {"oid": "9b8257c4989b5e5ce42aff1603b159ba6cede9d7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI2NDUwMw==", "bodyText": "@ivanchimeno I agree with you it would be better to store the appropriate values as variables in the component but this would require a refactor to the whole component as it uses quite a lot of getters including getSubmittedTextForSpot getSampleSolutionForSpot, getBackgroundColourForInputField, isSubmittedTextCompletelyCorrect. I think this is out of scope for this bugfix, where we just want to fix the bugs found", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540264503", "createdAt": "2020-12-10T15:32:01Z", "author": {"login": "anditurdiu"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/short-answer-question/short-answer-question.component.html", "diffHunk": "@@ -51,8 +51,8 @@ <h4 class=\"question-title-display\">\n                             class=\"short-answer-question-container__input\"\n                             style=\"background: grey\"\n                             disabled\n-                            value=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"\n-                            size=\"{{ getSubmittedTextForSpot(element) !== undefined ? getSubmittedTextForSpot(element).text!.length + 2 : 5 }}\"\n+                            value=\"{{ getSubmittedTextForSpot(element)?.text !== undefined ? getSubmittedTextForSpot(element).text : '' }}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4NDMzNQ=="}, "originalCommit": {"oid": "9b8257c4989b5e5ce42aff1603b159ba6cede9d7"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MzQ2Mzc4OnYy", "diffSide": "LEFT", "path": "src/main/webapp/app/home/home.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODozODo1N1rOIDX1ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxODozODo1N1rOIDX1ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwNzE0Ng==", "bodyText": "This looks like it is reverting #2521 too.", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540407146", "createdAt": "2020-12-10T18:38:57Z", "author": {"login": "FrankeLukas"}, "path": "src/main/webapp/app/home/home.component.ts", "diffHunk": "@@ -81,11 +79,6 @@ export class HomeComponent implements OnInit, AfterViewChecked {\n         });\n         this.accountService.identity().then((user) => {\n             this.currentUserCallback(user!);\n-\n-            // Once this has loaded and the user is not defined, we know we need the user to log in\n-            if (!user) {\n-                this.loading = false;\n-            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b34249ccc34c2cef1d6e9e8cfc7e308d2947e09"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MzkzMzc2OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextSubmissionResource.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMDozNDoyN1rOIDcKNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMTowNTozM1rOIDdQWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ3ODAwNA==", "bodyText": "Why are we using toCharArray() instead of length() directly?", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540478004", "createdAt": "2020-12-10T20:34:27Z", "author": {"login": "FrankeLukas"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextSubmissionResource.java", "diffHunk": "@@ -296,4 +300,14 @@ else if (!authorizationCheckService.isAtLeastInstructorForExercise(exercise)) {\n         }\n         return bodyBuilder.body(textSubmission);\n     }\n+\n+    /**\n+     * Throws IllegalArgumentException if the text length is over 30000 characters.\n+     * @param textSubmission the text submission\n+     */\n+    private void checkTextLength(TextSubmission textSubmission) {\n+        if (textSubmission.getText() != null && textSubmission.getText().toCharArray().length > 30000) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b05f74bd6e887c3f9c2903af016de996862d3630"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MTMwNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (textSubmission.getText() != null && textSubmission.getText().toCharArray().length > 30000) {\n          \n          \n            \n                    if (textSubmission.getText() != null && textSubmission.getText().length() > 30000) {", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540491305", "createdAt": "2020-12-10T20:57:25Z", "author": {"login": "fde312"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextSubmissionResource.java", "diffHunk": "@@ -296,4 +300,14 @@ else if (!authorizationCheckService.isAtLeastInstructorForExercise(exercise)) {\n         }\n         return bodyBuilder.body(textSubmission);\n     }\n+\n+    /**\n+     * Throws IllegalArgumentException if the text length is over 30000 characters.\n+     * @param textSubmission the text submission\n+     */\n+    private void checkTextLength(TextSubmission textSubmission) {\n+        if (textSubmission.getText() != null && textSubmission.getText().toCharArray().length > 30000) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ3ODAwNA=="}, "originalCommit": {"oid": "b05f74bd6e887c3f9c2903af016de996862d3630"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5NTk2MQ==", "bodyText": "@FrankeLukas you are right, that is cleaner", "url": "https://github.com/ls1intum/Artemis/pull/2528#discussion_r540495961", "createdAt": "2020-12-10T21:05:33Z", "author": {"login": "anditurdiu"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextSubmissionResource.java", "diffHunk": "@@ -296,4 +300,14 @@ else if (!authorizationCheckService.isAtLeastInstructorForExercise(exercise)) {\n         }\n         return bodyBuilder.body(textSubmission);\n     }\n+\n+    /**\n+     * Throws IllegalArgumentException if the text length is over 30000 characters.\n+     * @param textSubmission the text submission\n+     */\n+    private void checkTextLength(TextSubmission textSubmission) {\n+        if (textSubmission.getText() != null && textSubmission.getText().toCharArray().length > 30000) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ3ODAwNA=="}, "originalCommit": {"oid": "b05f74bd6e887c3f9c2903af016de996862d3630"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4329, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}