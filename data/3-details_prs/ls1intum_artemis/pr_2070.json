{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NDIxMDQ4", "number": 2070, "title": "Enhancement/integration tests/search for exercise", "bodyText": "Checklist\n\n Server: I added multiple integration tests (Spring) related to the features (with a high test coverage)\n Server: I implemented the changes with a good performance and prevented too many database calls\n\nMotivation and Context\n\n\naccording to issue #2060 the test of the method getAllExercisesOnPage() is still not fully covered. To ensure a more stable functionality of this method, this pr has been made\nDescription\n\nIn class ProgrammingExerciseServiceIntegrationTest\n\nImplemented searchExercises_instructor_getResultsFromOwningCourses_thatIsNotEmpty()\nto test if the instructor in the group get the right search result of his/her programming exercise\nImplemented searchExercisesWithProperSearchTerm()\nto test if the method react correctly to different search term (search term matches the title of exercise, search term matches the prefix of the title, search term doesn't match)\n\nIn class TextExerciseIntegrationTest and ModelingExerciseIntegrationTest\n\nimplemented searchExercises_instructor_getResultsFromOwningCourses_thatIsNotEmpty()\nimplemented searchExercises_instructor_shouldOnlyGetResultsFromOwningCourses()\nwith the same reason addressed above\n\nTest Coverage\n\ngetAllOnPageWithSize(PageableSearchDTO, User) in\nTextExerciseService.java 0% in development -->  100% in this branch\nModelingExerciseResource.java 0% in development --> 100% in this branch\nProgrammingExerciseService.java 85% in development --> 100% in this branch\nCurrent test coverage in 3 classes:\nTextExerciseService.java 41% in development --> 100% in this branch\n\nModelingExerciseService.java 85% in dev -> 88% in this branch\n\nProgrammingExerciseService.java 79% in development -> 79% in this branch", "createdAt": "2020-08-28T13:55:24Z", "url": "https://github.com/ls1intum/Artemis/pull/2070", "merged": true, "mergeCommit": {"oid": "eef32feb4c41828d870c38c64bb213e3ac491a50"}, "closed": true, "closedAt": "2020-09-24T08:15:05Z", "author": {"login": "kokowaahmax"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDU9l1gH2gAyNDc1NDIxMDQ4OjE1YWU2ODI3YjZjODU3MzAzNTcwODJlYzM0Y2ZjNGE2YTQ3N2M3ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdL8t-BgFqTQ5NTMyNDM4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "15ae6827b6c85730357082ec34cfc4a6a477c786", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/15ae6827b6c85730357082ec34cfc4a6a477c786", "committedDate": "2020-08-28T13:24:23Z", "message": "implemented test case of methods getAllExercisesOnPage()\ntest cases\nfor Programming, Text and Modelling Exercise:\nexternal instructor get empty result back\nonly instructor in the group get result\n\nfor Programming exercise extra:\nsearch with proper search term return the right value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbeaec3cde79fc7f2ae286171de365d973b6cd51", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/dbeaec3cde79fc7f2ae286171de365d973b6cd51", "committedDate": "2020-08-28T13:24:35Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into 2060"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afdf08f1f4cbf7019c732a5d089618bf59b054ae", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/afdf08f1f4cbf7019c732a5d089618bf59b054ae", "committedDate": "2020-08-28T14:59:31Z", "message": "change methods name according to artemis bot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "013dbc8b418df72a9df8c6879ae0783ff513299a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/013dbc8b418df72a9df8c6879ae0783ff513299a", "committedDate": "2020-08-28T15:41:16Z", "message": "change according to the artemis bot about naming convention"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9654d22b9c83153d15af45b0f5c906e69b71387", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f9654d22b9c83153d15af45b0f5c906e69b71387", "committedDate": "2020-08-30T22:11:50Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancement/integration-tests/search-for-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "502c75856a80ec3a2c5466d37dd65d91f9bbdcd2", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/502c75856a80ec3a2c5466d37dd65d91f9bbdcd2", "committedDate": "2020-08-30T22:15:39Z", "message": "change according to artemis bot, run gradle spotlessApply"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NjM5MDcz", "url": "https://github.com/ls1intum/Artemis/pull/2070#pullrequestreview-479639073", "createdAt": "2020-09-01T11:14:53Z", "commit": {"oid": "502c75856a80ec3a2c5466d37dd65d91f9bbdcd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMToxNDo1NFrOHKxncg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxMToxNDo1NFrOHKxncg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA2MDcyMg==", "bodyText": "This is a lot of duplicated code. Please create a helper method and avoid duplicated code!", "url": "https://github.com/ls1intum/Artemis/pull/2070#discussion_r481060722", "createdAt": "2020-09-01T11:14:54Z", "author": {"login": "krusche"}, "path": "src/test/java/de/tum/in/www1/artemis/ModelingExerciseIntegrationTest.java", "diffHunk": "@@ -383,4 +391,37 @@ public void createModelingExercise_setNeitherCourseAndExerciseGroup_badRequest()\n         ModelingExercise modelingExercise = ModelFactory.generateModelingExerciseForExam(DiagramType.ClassDiagram, null);\n         request.postWithResponseBody(\"/api/modeling-exercises/\", modelingExercise, ModelingExercise.class, HttpStatus.BAD_REQUEST);\n     }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor2\", roles = \"INSTRUCTOR\")\n+    public void searchModelingExercises_instructor_shouldOnlyGetResultsFromOwningCourses() throws Exception {\n+        final var result = configureSearchAndReturnResult(\"\");\n+        assertThat(result.getResultsOnPage()).isEmpty();\n+    }\n+\n+    @Test\n+    @WithMockUser(value = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void searchModelingExercises_instructor_getResultsFromOwningCoursesNotEmpty() throws Exception {\n+        final var result = configureSearchAndReturnResult(\"ClassDiagram\");\n+        assertThat(result.getResultsOnPage().size()).isEqualTo(1);\n+    }\n+\n+    @SuppressWarnings(\"unchecked\")\n+    private SearchResultPageDTO<ModelingExercise> configureSearchAndReturnResult(String searchTerm) throws Exception {\n+        final var search = new PageableSearchDTO<String>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "502c75856a80ec3a2c5466d37dd65d91f9bbdcd2"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a73503cfefb7c67fdc84badacad882a548920c6", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/3a73503cfefb7c67fdc84badacad882a548920c6", "committedDate": "2020-09-01T12:08:19Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancement/integration-tests/search-for-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c65015d65a4d3d55eb377ef504e99e87eaeda7dd", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c65015d65a4d3d55eb377ef504e99e87eaeda7dd", "committedDate": "2020-09-01T14:33:24Z", "message": "change according to reviewer Stephan: add detailed test for text and Modeling exercise\neliminate duplicate in code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c6e57372ee1359fd489b9a566adf1de5eff69a9", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/9c6e57372ee1359fd489b9a566adf1de5eff69a9", "committedDate": "2020-09-01T14:50:31Z", "message": "run gradle spotlessApply manually"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "067a62cd838a79f09de09c1b1e43ec8238c44dca", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/067a62cd838a79f09de09c1b1e43ec8238c44dca", "committedDate": "2020-09-01T16:21:46Z", "message": "change according to reviewer Andi,\nadd test coverage for Admin role to improve the test coverage."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae8e7ff43e59be5e4cb3d32ca3257fe34361f274", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/ae8e7ff43e59be5e4cb3d32ca3257fe34361f274", "committedDate": "2020-09-01T20:49:10Z", "message": "try to fix the error message from codacy, add if statement to fulfill 100% coverage."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "067c824dc0fb185b22946e456690add60e462faa", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/067c824dc0fb185b22946e456690add60e462faa", "committedDate": "2020-09-01T20:49:22Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancement/integration-tests/search-for-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ca0ea6410a4d65a6fb3aa6c8886a3746f59aeb6", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2ca0ea6410a4d65a6fb3aa6c8886a3746f59aeb6", "committedDate": "2020-09-01T21:01:29Z", "message": "run gradle spotless check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f12155be96066eb3c5be8a9ec7e2d444a77ac0", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/21f12155be96066eb3c5be8a9ec7e2d444a77ac0", "committedDate": "2020-09-09T18:47:29Z", "message": "try to solve the issue from codacy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a43f0c72347ca87a21cea6f6580e673ea99cb6e0", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a43f0c72347ca87a21cea6f6580e673ea99cb6e0", "committedDate": "2020-09-09T19:00:49Z", "message": "second try for fix the codacy bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4060fed2694f92502eb272b805469d91e8041ee3", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/4060fed2694f92502eb272b805469d91e8041ee3", "committedDate": "2020-09-09T19:16:52Z", "message": "add Javadoc comment for public methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eb64ff3624c8189de8871ae5aadb60ebcaec93f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/4eb64ff3624c8189de8871ae5aadb60ebcaec93f", "committedDate": "2020-09-09T20:52:22Z", "message": "add Javadoc comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4934fff026096ef9353776153604156eb7f97a4", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c4934fff026096ef9353776153604156eb7f97a4", "committedDate": "2020-09-09T21:33:09Z", "message": "add Javadoc for implemented public methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjY1OTE5", "url": "https://github.com/ls1intum/Artemis/pull/2070#pullrequestreview-485665919", "createdAt": "2020-09-10T07:46:36Z", "commit": {"oid": "c4934fff026096ef9353776153604156eb7f97a4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MzI0Mzg0", "url": "https://github.com/ls1intum/Artemis/pull/2070#pullrequestreview-495324384", "createdAt": "2020-09-24T08:14:55Z", "commit": {"oid": "c4934fff026096ef9353776153604156eb7f97a4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4097, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}