{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NzA4NzEw", "number": 1554, "title": "Integrationtest CourseResource: Improvement of testcoverage", "bodyText": "Motivation and Context\n\n\nImproving the Testcoverage of the Course Resource\nDescription\n\nSteps for Testing\n\nScreenshots\n\n\nBefore:\n\nAfter:", "createdAt": "2020-06-02T16:52:49Z", "url": "https://github.com/ls1intum/Artemis/pull/1554", "merged": true, "mergeCommit": {"oid": "e69f5a5cd71e439c46bfee496e43b35d3c259446"}, "closed": true, "closedAt": "2020-06-02T20:27:51Z", "author": {"login": "F4lka"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnCe2TAH2gAyNDI2NzA4NzEwOmNmMTNlODFlZmI1MzFlZGYzN2FjZTcwZmQ5NmFmZjNiZTZhYWVjYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnavxBAFqTQyMzAyNjY5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cf13e81efb531edf37ace70fd96aff3be6aaecbd", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/cf13e81efb531edf37ace70fd96aff3be6aaecbd", "committedDate": "2020-06-01T16:02:38Z", "message": "added test testCreateCourseWithSameShortName"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ea5d09f48a7c86778e21b73206be714d82c5855", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0ea5d09f48a7c86778e21b73206be714d82c5855", "committedDate": "2020-06-01T16:59:25Z", "message": "added test testCreateCourseWithCustomNonExistingGroupNames"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ac20f560ee5b0254d854f2c0ea1bd65412dfb23", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6ac20f560ee5b0254d854f2c0ea1bd65412dfb23", "committedDate": "2020-06-01T17:53:28Z", "message": "added testcases for testing the method validateComplaintsConfig"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "494ddc43b447b3cf60b8983519e43a16bae8fbfa", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/494ddc43b447b3cf60b8983519e43a16bae8fbfa", "committedDate": "2020-06-01T18:25:51Z", "message": "added testcase for getCourseForDashboard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "877e5191168b72bbea54b23cdf04b6049fa9a140", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/877e5191168b72bbea54b23cdf04b6049fa9a140", "committedDate": "2020-06-02T11:04:14Z", "message": "added testcase for getAllCoursesWithUserStats"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b69a7ec985ca3bc2e1c333d29ca837cacc045d84", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b69a7ec985ca3bc2e1c333d29ca837cacc045d84", "committedDate": "2020-06-02T11:34:48Z", "message": "updated the getCourseForDashboard testcase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d9c071c198aad2bffc5992f0a26a3797d9f6ce9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/8d9c071c198aad2bffc5992f0a26a3797d9f6ce9", "committedDate": "2020-06-02T12:39:11Z", "message": "adjusted testAddStudentOrTutorOrInstructorToCourse(), testAddStudentOrTutorOrInstructorToCourse() and added testAddStudentOrTutorOrInstructorToCourse_WithNonExistingUser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61cf7c4c64999637c9da589a2dd3b2be6133a94a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/61cf7c4c64999637c9da589a2dd3b2be6133a94a", "committedDate": "2020-06-02T13:12:45Z", "message": "adjusted testRemoveStudentOrTutorOrInstructorFromCourse_AsInstructorOfOtherCourse_forbidden"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94164a61eee284fe5649cd2ee5f89af1a4ca2617", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/94164a61eee284fe5649cd2ee5f89af1a4ca2617", "committedDate": "2020-06-02T13:37:33Z", "message": "added testRemoveStudentOrTutorOrInstructorFromCourse_WithNonExistingUser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3d17335fe2660df51209a0c63d6ca585d171b65", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/f3d17335fe2660df51209a0c63d6ca585d171b65", "committedDate": "2020-06-02T15:23:41Z", "message": "adjusted testRemoveStudentOrTutorOrInstructorFromCourse and testRemoveStudentOrTutorOrInstructorFromCourse_forbidden"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d9b061d2d131d2c1a06fea85a7f4e268b559cc4", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/8d9b061d2d131d2c1a06fea85a7f4e268b559cc4", "committedDate": "2020-06-02T17:01:47Z", "message": "updated testcase names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73daa3dbbff129cc8a8080af8a646e49f73f8fea", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/73daa3dbbff129cc8a8080af8a646e49f73f8fea", "committedDate": "2020-06-02T17:05:57Z", "message": "merged two testcases into one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b0f98fb87af66610e0732ea5b7acfaacaba5e5b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6b0f98fb87af66610e0732ea5b7acfaacaba5e5b", "committedDate": "2020-06-02T17:27:55Z", "message": "Merge branch 'develop' into IntegrationTest/CourseResource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ad78f236309f54f1c8d8df6a840561915245809", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6ad78f236309f54f1c8d8df6a840561915245809", "committedDate": "2020-06-02T18:05:55Z", "message": "splitted one testcase into two"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e3b8a9917a935469c712a0e7da4657faa752ad2", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/9e3b8a9917a935469c712a0e7da4657faa752ad2", "committedDate": "2020-06-02T18:06:14Z", "message": "Merge remote-tracking branch 'origin/IntegrationTest/CourseResource' into IntegrationTest/CourseResource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74a05ab7256a4e22bb24ba4e4a39954cf1097747", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/74a05ab7256a4e22bb24ba4e4a39954cf1097747", "committedDate": "2020-06-02T18:06:46Z", "message": "Merge branch 'develop' into IntegrationTest/CourseResource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "778bdaa56db55cdaadbf59355665ddd30110db64", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/778bdaa56db55cdaadbf59355665ddd30110db64", "committedDate": "2020-06-02T18:31:17Z", "message": "added testcase testCreateCourseWithNegativeMaxTeamComplainNumber, fixed testCreateCourseWithModifiedMaxComplainTimeDaysAndMaxComplains\nand merged two test cases in one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b72c0e7d4c3bd309852ad9c066bbe21be949824c", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b72c0e7d4c3bd309852ad9c066bbe21be949824c", "committedDate": "2020-06-02T18:31:38Z", "message": "Merge remote-tracking branch 'origin/IntegrationTest/CourseResource' into IntegrationTest/CourseResource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyOTYyMTU1", "url": "https://github.com/ls1intum/Artemis/pull/1554#pullrequestreview-422962155", "createdAt": "2020-06-02T18:45:38Z", "commit": {"oid": "b72c0e7d4c3bd309852ad9c066bbe21be949824c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxODo0NTozOVrOGd_d3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxODo0NTozOVrOGd_d3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDEwMTcyNA==", "bodyText": "If I'm correct, this tests if the old course still exists, but not of the new one does not exist.", "url": "https://github.com/ls1intum/Artemis/pull/1554#discussion_r434101724", "createdAt": "2020-06-02T18:45:39Z", "author": {"login": "sleiss"}, "path": "src/test/java/de/tum/in/www1/artemis/CourseIntegrationTest.java", "diffHunk": "@@ -124,6 +124,101 @@ public void testCreateCourseWithPermission() throws Exception {\n         assertThat(courseRepo.findAll()).as(\"Course has not been stored\").contains(repoContent.toArray(new Course[0]));\n     }\n \n+    @Test\n+    @WithMockUser(username = \"admin\", roles = \"ADMIN\")\n+    public void testCreateCourseWithSameShortName() throws Exception {\n+        Course course = ModelFactory.generateCourse(null, null, null, new HashSet<>());\n+        course.setShortName(\"shortName\");\n+        jiraRequestMockProvider.enableMockingOfRequests();\n+        jiraRequestMockProvider.mockCreateGroup(course.getDefaultStudentGroupName());\n+        jiraRequestMockProvider.mockCreateGroup(course.getDefaultTeachingAssistantGroupName());\n+        jiraRequestMockProvider.mockCreateGroup(course.getDefaultInstructorGroupName());\n+        request.post(\"/api/courses\", course, HttpStatus.CREATED);\n+        List<Course> repoContent = courseRepo.findAll();\n+        assertThat(repoContent.size()).as(\"Course got stored\").isEqualTo(1);\n+        course = ModelFactory.generateCourse(null, null, null, new HashSet<>());\n+        course.setShortName(\"shortName\");\n+        request.post(\"/api/courses\", course, HttpStatus.BAD_REQUEST);\n+        assertThat(courseRepo.findAll()).as(\"Course has not been stored\").contains(repoContent.toArray(new Course[0]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b72c0e7d4c3bd309852ad9c066bbe21be949824c"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec3f9051bc4d2cf285563f24c267982638e063f", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6ec3f9051bc4d2cf285563f24c267982638e063f", "committedDate": "2020-06-02T19:04:40Z", "message": "adjusted test case testCreateCourseWithSameShortName"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyOTgyNDMz", "url": "https://github.com/ls1intum/Artemis/pull/1554#pullrequestreview-422982433", "createdAt": "2020-06-02T19:13:11Z", "commit": {"oid": "6ec3f9051bc4d2cf285563f24c267982638e063f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0266d6996cc27858abd55f1fbdca2b34bb2e6e7f", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0266d6996cc27858abd55f1fbdca2b34bb2e6e7f", "committedDate": "2020-06-02T20:07:14Z", "message": "Merge branch 'develop' into IntegrationTest/CourseResource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDIwNzA2", "url": "https://github.com/ls1intum/Artemis/pull/1554#pullrequestreview-423020706", "createdAt": "2020-06-02T20:09:42Z", "commit": {"oid": "0266d6996cc27858abd55f1fbdca2b34bb2e6e7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDIyODU3", "url": "https://github.com/ls1intum/Artemis/pull/1554#pullrequestreview-423022857", "createdAt": "2020-06-02T20:12:58Z", "commit": {"oid": "0266d6996cc27858abd55f1fbdca2b34bb2e6e7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDI2Njk3", "url": "https://github.com/ls1intum/Artemis/pull/1554#pullrequestreview-423026697", "createdAt": "2020-06-02T20:18:50Z", "commit": {"oid": "0266d6996cc27858abd55f1fbdca2b34bb2e6e7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2733, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}