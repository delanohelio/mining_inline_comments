{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NzI1NTkz", "number": 2012, "title": "[Enhancement/Feature] Refactor code editor annotations", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nThe annotation functionality of the code editor is currently restricted to the build errors and cannot be easily expanded. This pr introduces a more generic handling of annotations and uses this to include static code analysis issues as annotations.\nDescription\n\n\nCleanup and refactor annotations to be easier extensible\n\nMain changed comonents: code-editor-build-output, code-editor-ace, code-editor-container\nRemoved the buildLogErrors property and replaced it with a more generic annotations property.\nAnnotation state and functionality is now solely managed in the ace-editor component.\nRemoved the code-editor-session-service as its functionality is now included in the ace-editor component.\n\n\nAdd annotations for static code analysis issues\n\nAnnotations are extracted from the feedback elements of the submission result\n\n\nKeep support for Orion\n\nSince Orion does not support the changed annotation model, build logs are converted back to the original format before being sent to Orion.\n\n\n\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to an Programming Exercise with Static Code Analysis enabled\nWrite bad code \ud83d\ude48\nSubmit and inspect the annotations\nEdit and save some code, reload and check that the annotations are still at the correct lines.\n(For example add or remove lines before the annotation, which should move accordingly.)\n\nCurrent Test Coverage\n\ncode-editor-ace.component.ts: 94% of lines\ncode-editor-build-output.component.ts: 88% of lines\ncode-editor-container.component.ts: 84% of lines\nbuild-log.model.ts: 100% of lines\norion-connector.service.ts: 32% of lines\n\nScreenshots", "createdAt": "2020-08-10T20:52:25Z", "url": "https://github.com/ls1intum/Artemis/pull/2012", "merged": true, "mergeCommit": {"oid": "9790bce0fa4a3789818a584249dcfead4335d282"}, "closed": true, "closedAt": "2020-08-21T19:42:21Z", "author": {"login": "schultek"}, "timelineItems": {"totalCount": 67, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc773TSgH2gAyNDY1NzI1NTkzOmUwNDU2NTU5ZTMxNThhYjkyZDNiNjUwNDU2MWVlOTU0ZmUzNGRiYzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBBVaPgFqTQ3MjM0MDE1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e0456559e3158ab92d3b6504561ee954fe34dbc5", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e0456559e3158ab92d3b6504561ee954fe34dbc5", "committedDate": "2020-08-05T14:12:25Z", "message": "remove unused property in file-browser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d343da15bdb30095830b5df28ed2ed2331398e87", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d343da15bdb30095830b5df28ed2ed2331398e87", "committedDate": "2020-08-05T14:14:01Z", "message": "move exerciseTitle out of code-editor-grid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d1cc4d01b773f278e24eb0a1435f8c4103a65b0", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/0d1cc4d01b773f278e24eb0a1435f8c4103a65b0", "committedDate": "2020-08-05T14:14:53Z", "message": "create standalone code-editor-container component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5814699e8cd87b2c14281d32b53501c5529a0b60", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/5814699e8cd87b2c14281d32b53501c5529a0b60", "committedDate": "2020-08-05T14:15:42Z", "message": "edit code-editor-student-container to use new standalone component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81decb67ff30f4f5ac9215dad01b999996ffdf14", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/81decb67ff30f4f5ac9215dad01b999996ffdf14", "committedDate": "2020-08-05T16:47:43Z", "message": "fix formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "373f5410f15a03c052b2bd1af903cfa1e8f3c0b1", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/373f5410f15a03c052b2bd1af903cfa1e8f3c0b1", "committedDate": "2020-08-05T16:47:53Z", "message": "add to module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7346462979e8232c8da4d23cddd50a4da9f26c51", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7346462979e8232c8da4d23cddd50a4da9f26c51", "committedDate": "2020-08-05T17:13:11Z", "message": "try rename navbar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fdb5da388e07a9497a1c6ab20c4094718003139", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7fdb5da388e07a9497a1c6ab20c4094718003139", "committedDate": "2020-08-05T17:59:45Z", "message": "remove ng-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "443c7dcded23e572af21f9ddd152332d826c14a3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/443c7dcded23e572af21f9ddd152332d826c14a3", "committedDate": "2020-08-05T18:07:27Z", "message": "refactor code-editor-instructionns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f145ea72b2422a820219548569d9644a7d788c4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7f145ea72b2422a820219548569d9644a7d788c4", "committedDate": "2020-08-05T18:18:20Z", "message": "make grid-resize event explicit\n(todo: remove resize service)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97f6ae274690c9b963a9f8091184db7e30f99d75", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/97f6ae274690c9b963a9f8091184db7e30f99d75", "committedDate": "2020-08-05T18:25:44Z", "message": "make ace-editor resize explicit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "616ff3e87f737b4f860fef2c071236b48722fdaa", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/616ff3e87f737b4f860fef2c071236b48722fdaa", "committedDate": "2020-08-05T18:26:54Z", "message": "remove unused resize bits from code-editor-instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ad4c17c54dbd895b5d2e1a9d8c5df191c51fb1e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/4ad4c17c54dbd895b5d2e1a9d8c5df191c51fb1e", "committedDate": "2020-08-05T18:29:54Z", "message": "remove unused code-editor-grid-service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e32802ce222d3ee14e2b33acc56273eabd5a61eb", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e32802ce222d3ee14e2b33acc56273eabd5a61eb", "committedDate": "2020-08-05T19:17:28Z", "message": "fix code-editor-instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "058e65ea553028da3d54992a899fc664c71d0ee7", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/058e65ea553028da3d54992a899fc664c71d0ee7", "committedDate": "2020-08-05T19:50:23Z", "message": "refactor exam-code-editor-student-container to use new code-editor-container component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c19afcfc37ba35dbcbe59fe7e0617803a175ed", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d5c19afcfc37ba35dbcbe59fe7e0617803a175ed", "committedDate": "2020-08-05T20:40:20Z", "message": "refactor exam-code-editor-instructor-container to use new code-editor-container component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ef31a48e65a094f3a0f22be6eac4707085f63fe", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/9ef31a48e65a094f3a0f22be6eac4707085f63fe", "committedDate": "2020-08-05T20:40:52Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb2550c8df7161c6053915d26cabc26b9421a991", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/fb2550c8df7161c6053915d26cabc26b9421a991", "committedDate": "2020-08-05T20:52:32Z", "message": "wiring for onFileChanged in exam-code-editor-student-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf8692a863f1def04f3fa6020c142e32fd00ec78", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/bf8692a863f1def04f3fa6020c142e32fd00ec78", "committedDate": "2020-08-05T20:52:52Z", "message": "remove old unused code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca778fb443ee847b12e673ef0aadb02910c12e56", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ca778fb443ee847b12e673ef0aadb02910c12e56", "committedDate": "2020-08-05T21:03:43Z", "message": "fix code-editor reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b52c94f437879084c5956f7f10f8ae5304fa4ff", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/6b52c94f437879084c5956f7f10f8ae5304fa4ff", "committedDate": "2020-08-05T21:16:56Z", "message": "join exam-code-editor-student-container into programming-exam-submission component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc001eb9c58559975e36837eddff8d0535d78d4e", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/cc001eb9c58559975e36837eddff8d0535d78d4e", "committedDate": "2020-08-06T07:30:38Z", "message": "fix CodeEditorInstructor jest tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39ba51b98b16be240f854bdd0220464aa99e8cbc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/39ba51b98b16be240f854bdd0220464aa99e8cbc", "committedDate": "2020-08-06T08:24:51Z", "message": "try to fix CodeEditorStudentContainer tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c54c1cb313e393bae80a11e7777063497c33398", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/8c54c1cb313e393bae80a11e7777063497c33398", "committedDate": "2020-08-06T08:38:04Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef40247b545e9932bace0eded3d79470a9ec1c72", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ef40247b545e9932bace0eded3d79470a9ec1c72", "committedDate": "2020-08-06T16:36:37Z", "message": "fix canDeactivate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a51d61beaa884b3a25893c36cf0e13e2393db3b4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/a51d61beaa884b3a25893c36cf0e13e2393db3b4", "committedDate": "2020-08-06T16:36:59Z", "message": "fix editor layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc61e2456634d9dc0eb0e97cad9c3a59aab84a8", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ccc61e2456634d9dc0eb0e97cad9c3a59aab84a8", "committedDate": "2020-08-06T16:37:20Z", "message": "fix instructions test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e03bb620f6885669e7fb33a0843afa041ab3490f", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e03bb620f6885669e7fb33a0843afa041ab3490f", "committedDate": "2020-08-06T16:47:14Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/instructions/code-editor-instructions.component.ts\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/layout/code-editor-grid.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7df6545a2dcb4f54dae197de42003b98d9012b3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/f7df6545a2dcb4f54dae197de42003b98d9012b3", "committedDate": "2020-08-06T17:22:37Z", "message": "cleanup instructions-component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "327512fd8ac3f95932e1ca6d419b1fff1a987c3e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/327512fd8ac3f95932e1ca6d419b1fff1a987c3e", "committedDate": "2020-08-06T17:41:35Z", "message": "typescript formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8cc34151f8c132b410748d00a752a3a4451305e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d8cc34151f8c132b410748d00a752a3a4451305e", "committedDate": "2020-08-06T17:42:20Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c9a5cf8427a1bb446750efe55b6cfd9915e6356", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2c9a5cf8427a1bb446750efe55b6cfd9915e6356", "committedDate": "2020-08-06T19:49:06Z", "message": "add code-editor-container integration test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "875c230b0ad4c7dcafba956187dc463776645469", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/875c230b0ad4c7dcafba956187dc463776645469", "committedDate": "2020-08-06T20:07:21Z", "message": "typescript linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "646d023762b63ebe804395fc3c47c5ca6e750074", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/646d023762b63ebe804395fc3c47c5ca6e750074", "committedDate": "2020-08-10T10:14:30Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eff00addf0169ceb15971ad0581c9e6c1ca388e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/3eff00addf0169ceb15971ad0581c9e6c1ca388e", "committedDate": "2020-08-10T10:23:28Z", "message": "cleanup ace editor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "468fef8d9a24c609c2e23e84d66f019b5411802e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/468fef8d9a24c609c2e23e84d66f019b5411802e", "committedDate": "2020-08-10T14:18:21Z", "message": "refactor annotation handling and buildLogErrors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d6403486adc85865a7206f32471af9a9b80f07e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/0d6403486adc85865a7206f32471af9a9b80f07e", "committedDate": "2020-08-10T15:24:49Z", "message": "adjust tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44059568ad778b79b7cf8fb968d1d53ea1a42adf", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/44059568ad778b79b7cf8fb968d1d53ea1a42adf", "committedDate": "2020-08-10T20:47:04Z", "message": "add annotations from static code analysis feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a84d163c29ac1600411c2e2a7942f6fb4bd7be2", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/0a84d163c29ac1600411c2e2a7942f6fb4bd7be2", "committedDate": "2020-08-10T20:48:43Z", "message": "typescript formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffddca8dbcd17e2cc8a2800f98145b9ae4b4a3f5", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ffddca8dbcd17e2cc8a2800f98145b9ae4b4a3f5", "committedDate": "2020-08-10T21:28:01Z", "message": "fix date parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "566e2e9a34afcc6c26757dad1fcbb1f28eed4ffe", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/566e2e9a34afcc6c26757dad1fcbb1f28eed4ffe", "committedDate": "2020-08-10T21:30:15Z", "message": "fix undefined feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1125b5df92db6cf507f391e11c8052a52e08d8bf", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/1125b5df92db6cf507f391e11c8052a52e08d8bf", "committedDate": "2020-08-10T21:48:53Z", "message": "fix linting warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dccaf3fa5ca7fec4822544beab52315001c90a0", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/3dccaf3fa5ca7fec4822544beab52315001c90a0", "committedDate": "2020-08-10T22:25:07Z", "message": "fix code analysis issue filename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eb544942d1ce2f6fa717571875fc13b2b6d9772", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/9eb544942d1ce2f6fa717571875fc13b2b6d9772", "committedDate": "2020-08-10T22:29:33Z", "message": "fix annotation line number"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0fbbd5388e1081f39af69d8aea761aa596058ff", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e0fbbd5388e1081f39af69d8aea761aa596058ff", "committedDate": "2020-08-10T22:30:47Z", "message": "Merge branch 'develop' into enhancement/code-editor/refactor-code-editor-annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87aa064ee008fa3684a1b78788ff2673dabf9eb6", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/87aa064ee008fa3684a1b78788ff2673dabf9eb6", "committedDate": "2020-08-10T22:45:32Z", "message": "ts formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a5305804fa466f44c4354d401019262d4bc5143", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/4a5305804fa466f44c4354d401019262d4bc5143", "committedDate": "2020-08-10T22:45:50Z", "message": "Merge branch 'enhancement/code-editor/refactor-code-editor-annotations' of https://github.com/ls1intum/Artemis into enhancement/code-editor/refactor-code-editor-annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edc870b797547636d22e18474016e3d903ea75e1", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/edc870b797547636d22e18474016e3d903ea75e1", "committedDate": "2020-08-10T23:31:40Z", "message": "change annotations to input prop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b2a3fd2a3325d94672dbdf757d8656501ee4cae", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7b2a3fd2a3325d94672dbdf757d8656501ee4cae", "committedDate": "2020-08-10T23:37:28Z", "message": "fix interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a562b7b780152b653154b84775e4f485170a386", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/9a562b7b780152b653154b84775e4f485170a386", "committedDate": "2020-08-12T12:58:05Z", "message": "add default parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d48d22181329850b2532f2a0dd4ef0e69fe0b4da", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d48d22181329850b2532f2a0dd4ef0e69fe0b4da", "committedDate": "2020-08-13T18:27:26Z", "message": "add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "562ba18376523ce9f06c444358dccea34f5d2ce7", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/562ba18376523ce9f06c444358dccea34f5d2ce7", "committedDate": "2020-08-13T18:34:25Z", "message": "fix failing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b29d602f98b4ec376058a3d1591a41123c2b8076", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/b29d602f98b4ec376058a3d1591a41123c2b8076", "committedDate": "2020-08-13T18:47:59Z", "message": "Merge branch 'develop' into enhancement/code-editor/refactor-code-editor-annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ff13609ea8828036fe8413b53b550989b3eb88", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/45ff13609ea8828036fe8413b53b550989b3eb88", "committedDate": "2020-08-13T18:49:53Z", "message": "fix failing tests 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f78916ec13132241ddac3d15cae0fd4b33707840", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/f78916ec13132241ddac3d15cae0fd4b33707840", "committedDate": "2020-08-14T14:47:06Z", "message": "Merge branch 'develop' into enhancement/code-editor/refactor-code-editor-annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4MDAzMTIz", "url": "https://github.com/ls1intum/Artemis/pull/2012#pullrequestreview-468003123", "createdAt": "2020-08-15T16:18:56Z", "commit": {"oid": "f78916ec13132241ddac3d15cae0fd4b33707840"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2add8084d445291ae7368a7438753ba028977bd2", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2add8084d445291ae7368a7438753ba028977bd2", "committedDate": "2020-08-20T11:14:02Z", "message": "Merge branch 'develop' into enhancement/code-editor/refactor-code-editor-annotations\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts\n#\tsrc/main/webapp/app/exercises/programming/participate/code-editor-student-container.component.ts\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/ace/code-editor-ace.component.ts\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/container/code-editor-container.component.html\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/container/code-editor-container.component.ts\n#\tsrc/test/javascript/spec/integration/code-editor/code-editor-container.integration.spec.ts\n#\tsrc/test/javascript/spec/integration/code-editor/code-editor-student.integration.spec.ts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNjQ5NTUx", "url": "https://github.com/ls1intum/Artemis/pull/2012#pullrequestreview-471649551", "createdAt": "2020-08-20T14:06:01Z", "commit": {"oid": "2add8084d445291ae7368a7438753ba028977bd2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDowNjowMVrOHEDRfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDowNjowMVrOHEDRfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAwOTk4Mw==", "bodyText": "does this type change introduce errors in the orion plugin? I am not sure if it can handle that correctly", "url": "https://github.com/ls1intum/Artemis/pull/2012#discussion_r474009983", "createdAt": "2020-08-20T14:06:01Z", "author": {"login": "TobiasPr"}, "path": "src/main/webapp/app/shared/orion/orion-connector.service.ts", "diffHunk": "@@ -130,7 +130,7 @@ export class OrionConnectorService implements ArtemisOrionConnector {\n      *\n      * @param buildErrors All compile errors for the current build\n      */\n-    onBuildFailed(buildErrors: BuildLogErrors) {\n+    onBuildFailed(buildErrors: Array<Annotation>) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2add8084d445291ae7368a7438753ba028977bd2"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df903583823d35fbb892fbbbdf58ce1dae53bc67", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/df903583823d35fbb892fbbbdf58ce1dae53bc67", "committedDate": "2020-08-20T16:45:38Z", "message": "fix annotation format for orion plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f067e05de0609cbb3f82830d9d526fde09ebeaa", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/1f067e05de0609cbb3f82830d9d526fde09ebeaa", "committedDate": "2020-08-20T16:49:26Z", "message": "fix commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "218ad1126a35c00e6f16446070784a3a983c4c32", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/218ad1126a35c00e6f16446070784a3a983c4c32", "committedDate": "2020-08-20T17:29:10Z", "message": "typescript formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxODczNzQw", "url": "https://github.com/ls1intum/Artemis/pull/2012#pullrequestreview-471873740", "createdAt": "2020-08-20T18:24:25Z", "commit": {"oid": "218ad1126a35c00e6f16446070784a3a983c4c32"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTAxMDc4", "url": "https://github.com/ls1intum/Artemis/pull/2012#pullrequestreview-471901078", "createdAt": "2020-08-20T19:03:41Z", "commit": {"oid": "218ad1126a35c00e6f16446070784a3a983c4c32"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTowMzo0MVrOHEPR4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOTowMzo0MVrOHEPR4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIwNjY5MA==", "bodyText": "I think you could merge the two maps into one and save one loop", "url": "https://github.com/ls1intum/Artemis/pull/2012#discussion_r474206690", "createdAt": "2020-08-20T19:03:41Z", "author": {"login": "kloessst"}, "path": "src/main/webapp/app/exercises/programming/shared/code-editor/ace/code-editor-ace.component.ts", "diffHunk": "@@ -208,8 +177,115 @@ export class CodeEditorAceComponent implements AfterViewInit, OnChanges, OnDestr\n         if (this.annotationChange) {\n             this.annotationChange.unsubscribe();\n         }\n-        if (this.resizeSubscription) {\n-            this.resizeSubscription.unsubscribe();\n+    }\n+\n+    /**\n+     * Recalculates the position of annotations according to changes in the editor.\n+     * Annotations are affected by changes in previous rows for row updates,\n+     * in the same row and previous columns for column updates.\n+     * @param change\n+     */\n+    updateAnnotations(change: TextChange) {\n+        const {\n+            start: { row: rowStart, column: columnStart },\n+            end: { row: rowEnd, column: columnEnd },\n+            action,\n+        } = change;\n+        if (action === 'remove' || action === 'insert') {\n+            const sign = action === 'remove' ? -1 : 1;\n+            const updateRowDiff = sign * (rowEnd - rowStart);\n+            const updateColDiff = sign * (columnEnd - columnStart);\n+\n+            this.annotationsArray = this.annotationsArray.map((a) => {\n+                return this.selectedFile !== a.fileName\n+                    ? a\n+                    : {\n+                          ...a,\n+                          row: a.row > rowStart ? a.row + updateRowDiff : a.row,\n+                          column: a.column > columnStart && a.row === rowStart && a.row === rowEnd ? a.column + updateColDiff : a.column,\n+                      };\n+            });\n+            this.displayAnnotations();\n+        }\n+    }\n+\n+    /**\n+     * Sets the annotations for the editor.\n+     * Checks for each annotation whether an updated version exists in local storage.\n+     * @param annotations The new annotations array\n+     */\n+    setAnnotations(annotations: Array<Annotation> = []) {\n+        if (annotations.length > 0) {\n+            const sessionAnnotations = this.loadAnnotations();\n+            this.annotationsArray = annotations\n+                .map((a) => ({ ...a, hash: a.fileName + a.row + a.column + a.text }))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "218ad1126a35c00e6f16446070784a3a983c4c32"}, "originalPosition": 185}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "499c1104734cb02cc01bfe86a2deac7f2aa2ba49", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/499c1104734cb02cc01bfe86a2deac7f2aa2ba49", "committedDate": "2020-08-20T20:06:47Z", "message": "join map calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6ce84f38c3b46d04ee5fa8db3833317c6210353", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/f6ce84f38c3b46d04ee5fa8db3833317c6210353", "committedDate": "2020-08-20T20:46:09Z", "message": "fix typescript styling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMTU5NDAx", "url": "https://github.com/ls1intum/Artemis/pull/2012#pullrequestreview-472159401", "createdAt": "2020-08-21T05:48:06Z", "commit": {"oid": "f6ce84f38c3b46d04ee5fa8db3833317c6210353"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMzQwMTU5", "url": "https://github.com/ls1intum/Artemis/pull/2012#pullrequestreview-472340159", "createdAt": "2020-08-21T09:24:27Z", "commit": {"oid": "f6ce84f38c3b46d04ee5fa8db3833317c6210353"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3994, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}