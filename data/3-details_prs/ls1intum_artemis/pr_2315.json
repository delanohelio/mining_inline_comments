{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDY0NDMy", "number": 2315, "title": "[Enhancement] Fetch latest submission for instructor code editor", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\n\n\nThe instructor code editor initially issues a build log request for assignment, solution and template participation because it does not have a submission. The server will respond with a 403, if the actual submission hasn't failed to build.\nDescription\n\n\nAdd fetching of latest submission for student (assignment), solution and template participation to the request which loads these participations for the instructor code editor\n\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to Course Administration\nCreate a programming exercise\nOpen the network console\nNavigate to the \"Edit in editor\"\nCheck that no /buildLogs request in send and no 403 is returned\nSwitch between assignment, template, solution participation and check step 6.\nLet the build fail -> build logs should be fetched, also reload the page to see that the build logs are fetched right away\nParticipate in the programming exercise\nCheck the steps 6. and 8.", "createdAt": "2020-11-03T03:58:58Z", "url": "https://github.com/ls1intum/Artemis/pull/2315", "merged": true, "mergeCommit": {"oid": "c4a17b90127e6c8041ac1eec1a5985e3f8071f9b"}, "closed": true, "closedAt": "2020-11-05T23:06:37Z", "author": {"login": "kloessst"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYwwQPAH2gAyNTE0NDY0NDMyOjc1NTNhYWE3ZDM2ZWRmMmUwYWI5MmRjZWJkNTA3YzgyMTM5OTA4Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZm07ogFqTUyNDU1NzAwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7553aaa7d36edf2e0ab92dcebd507c8213990828", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/7553aaa7d36edf2e0ab92dcebd507c8213990828", "committedDate": "2020-11-03T03:39:34Z", "message": "Fetch submission for result when fetching the solution/template participation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f265b208865f39087df155ccb1d471a81d2e556d", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/f265b208865f39087df155ccb1d471a81d2e556d", "committedDate": "2020-11-03T03:46:38Z", "message": "Also fetch latest submission for student result"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MTUxNDE0", "url": "https://github.com/ls1intum/Artemis/pull/2315#pullrequestreview-524151414", "createdAt": "2020-11-05T11:05:07Z", "commit": {"oid": "f265b208865f39087df155ccb1d471a81d2e556d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDA2NjM1", "url": "https://github.com/ls1intum/Artemis/pull/2315#pullrequestreview-524406635", "createdAt": "2020-11-05T15:54:30Z", "commit": {"oid": "f265b208865f39087df155ccb1d471a81d2e556d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NTU1ODEy", "url": "https://github.com/ls1intum/Artemis/pull/2315#pullrequestreview-524555812", "createdAt": "2020-11-05T18:37:53Z", "commit": {"oid": "f265b208865f39087df155ccb1d471a81d2e556d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODozNzo1M1rOHuRHfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODozNzo1M1rOHuRHfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI3Njk4OQ==", "bodyText": "this could be in a new line\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        + \"left join fetch tpr.submission left join fetch spr.submission \" + \"where pe.id = :#{#exerciseId} and (tpr.id = (select max(id) from tp.results) or tpr.id = null) \"\n          \n          \n            \n                        + \"left join fetch tpr.submission left join fetch spr.submission \"\n          \n          \n            \n                        + \"where pe.id = :#{#exerciseId} and (tpr.id = (select max(id) from tp.results) or tpr.id = null) \"", "url": "https://github.com/ls1intum/Artemis/pull/2315#discussion_r518276989", "createdAt": "2020-11-05T18:37:53Z", "author": {"login": "derLalla"}, "path": "src/main/java/de/tum/in/www1/artemis/repository/ProgrammingExerciseRepository.java", "diffHunk": "@@ -38,7 +38,7 @@\n     // Get an a programmingExercise with template and solution participation, each with the latest result and feedbacks.\n     @Query(\"select distinct pe from ProgrammingExercise pe left join fetch pe.templateParticipation tp left join fetch pe.solutionParticipation sp \"\n             + \"left join fetch tp.results as tpr left join fetch sp.results as spr left join fetch tpr.feedbacks left join fetch spr.feedbacks \"\n-            + \"where pe.id = :#{#exerciseId} and (tpr.id = (select max(id) from tp.results) or tpr.id = null) \"\n+            + \"left join fetch tpr.submission left join fetch spr.submission \" + \"where pe.id = :#{#exerciseId} and (tpr.id = (select max(id) from tp.results) or tpr.id = null) \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f265b208865f39087df155ccb1d471a81d2e556d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NTU3MDA5", "url": "https://github.com/ls1intum/Artemis/pull/2315#pullrequestreview-524557009", "createdAt": "2020-11-05T18:39:33Z", "commit": {"oid": "f265b208865f39087df155ccb1d471a81d2e556d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3578, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}