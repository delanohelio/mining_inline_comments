{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNTE5Nzc3", "number": 1999, "title": "[Ehancement] Refactor code editor container", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I updated multiple integration tests (Jest) related to the features\n\nMotivation and Context\n\n\nThis PR aims to improve the structure and readability of the code-editor-container component and remove duplicate code.\nDescription\n\nRefactoring of the Online Code-Editor\n\nRefactor the abstract 'code-editor-mode-container' to a standalone 'code-editor-container' component.\n\nIncluded submodules: Actions, File-Browser, Ace-Editor, Build-Output\nThe Instructions module is injected via Content Projection\nAdditional Navbar Components are injected via Content Projection\n\n\nChange 'student-container', 'exam-student-container' and 'instructor-container' to use new component.\n\nSteps for Testing\n\nThere should not be any visual changes to the editors.\nPlease thoroughly test that all code-editor related functionality still works, in all three places.\n\nNormal Programming Exercise Code Editor\nExam Code Editor\nInstructor Code Editor\n\nDon't worry about the amount of changed lines of code, more than half of them are in tests.", "createdAt": "2020-08-05T16:52:54Z", "url": "https://github.com/ls1intum/Artemis/pull/1999", "merged": true, "mergeCommit": {"oid": "d91acad24c993f4a2c93dcdb6ad4eda78e095385"}, "closed": true, "closedAt": "2020-08-20T11:00:10Z", "author": {"login": "schultek"}, "timelineItems": {"totalCount": 49, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc773TSgH2gAyNDYzNTE5Nzc3OmUwNDU2NTU5ZTMxNThhYjkyZDNiNjUwNDU2MWVlOTU0ZmUzNGRiYzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAtBGhAH2gAyNDYzNTE5Nzc3OmVjOGRiMzZmNDZlNDY1MTZmNmI1MjJmOGEzNmQyMjgzOThmNDk3YWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e0456559e3158ab92d3b6504561ee954fe34dbc5", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e0456559e3158ab92d3b6504561ee954fe34dbc5", "committedDate": "2020-08-05T14:12:25Z", "message": "remove unused property in file-browser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d343da15bdb30095830b5df28ed2ed2331398e87", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d343da15bdb30095830b5df28ed2ed2331398e87", "committedDate": "2020-08-05T14:14:01Z", "message": "move exerciseTitle out of code-editor-grid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d1cc4d01b773f278e24eb0a1435f8c4103a65b0", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/0d1cc4d01b773f278e24eb0a1435f8c4103a65b0", "committedDate": "2020-08-05T14:14:53Z", "message": "create standalone code-editor-container component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5814699e8cd87b2c14281d32b53501c5529a0b60", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/5814699e8cd87b2c14281d32b53501c5529a0b60", "committedDate": "2020-08-05T14:15:42Z", "message": "edit code-editor-student-container to use new standalone component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81decb67ff30f4f5ac9215dad01b999996ffdf14", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/81decb67ff30f4f5ac9215dad01b999996ffdf14", "committedDate": "2020-08-05T16:47:43Z", "message": "fix formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "373f5410f15a03c052b2bd1af903cfa1e8f3c0b1", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/373f5410f15a03c052b2bd1af903cfa1e8f3c0b1", "committedDate": "2020-08-05T16:47:53Z", "message": "add to module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7346462979e8232c8da4d23cddd50a4da9f26c51", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7346462979e8232c8da4d23cddd50a4da9f26c51", "committedDate": "2020-08-05T17:13:11Z", "message": "try rename navbar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fdb5da388e07a9497a1c6ab20c4094718003139", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7fdb5da388e07a9497a1c6ab20c4094718003139", "committedDate": "2020-08-05T17:59:45Z", "message": "remove ng-template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "443c7dcded23e572af21f9ddd152332d826c14a3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/443c7dcded23e572af21f9ddd152332d826c14a3", "committedDate": "2020-08-05T18:07:27Z", "message": "refactor code-editor-instructionns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f145ea72b2422a820219548569d9644a7d788c4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7f145ea72b2422a820219548569d9644a7d788c4", "committedDate": "2020-08-05T18:18:20Z", "message": "make grid-resize event explicit\n(todo: remove resize service)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97f6ae274690c9b963a9f8091184db7e30f99d75", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/97f6ae274690c9b963a9f8091184db7e30f99d75", "committedDate": "2020-08-05T18:25:44Z", "message": "make ace-editor resize explicit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "616ff3e87f737b4f860fef2c071236b48722fdaa", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/616ff3e87f737b4f860fef2c071236b48722fdaa", "committedDate": "2020-08-05T18:26:54Z", "message": "remove unused resize bits from code-editor-instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ad4c17c54dbd895b5d2e1a9d8c5df191c51fb1e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/4ad4c17c54dbd895b5d2e1a9d8c5df191c51fb1e", "committedDate": "2020-08-05T18:29:54Z", "message": "remove unused code-editor-grid-service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e32802ce222d3ee14e2b33acc56273eabd5a61eb", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e32802ce222d3ee14e2b33acc56273eabd5a61eb", "committedDate": "2020-08-05T19:17:28Z", "message": "fix code-editor-instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "058e65ea553028da3d54992a899fc664c71d0ee7", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/058e65ea553028da3d54992a899fc664c71d0ee7", "committedDate": "2020-08-05T19:50:23Z", "message": "refactor exam-code-editor-student-container to use new code-editor-container component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c19afcfc37ba35dbcbe59fe7e0617803a175ed", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d5c19afcfc37ba35dbcbe59fe7e0617803a175ed", "committedDate": "2020-08-05T20:40:20Z", "message": "refactor exam-code-editor-instructor-container to use new code-editor-container component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ef31a48e65a094f3a0f22be6eac4707085f63fe", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/9ef31a48e65a094f3a0f22be6eac4707085f63fe", "committedDate": "2020-08-05T20:40:52Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb2550c8df7161c6053915d26cabc26b9421a991", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/fb2550c8df7161c6053915d26cabc26b9421a991", "committedDate": "2020-08-05T20:52:32Z", "message": "wiring for onFileChanged in exam-code-editor-student-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf8692a863f1def04f3fa6020c142e32fd00ec78", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/bf8692a863f1def04f3fa6020c142e32fd00ec78", "committedDate": "2020-08-05T20:52:52Z", "message": "remove old unused code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca778fb443ee847b12e673ef0aadb02910c12e56", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ca778fb443ee847b12e673ef0aadb02910c12e56", "committedDate": "2020-08-05T21:03:43Z", "message": "fix code-editor reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b52c94f437879084c5956f7f10f8ae5304fa4ff", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/6b52c94f437879084c5956f7f10f8ae5304fa4ff", "committedDate": "2020-08-05T21:16:56Z", "message": "join exam-code-editor-student-container into programming-exam-submission component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc001eb9c58559975e36837eddff8d0535d78d4e", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/cc001eb9c58559975e36837eddff8d0535d78d4e", "committedDate": "2020-08-06T07:30:38Z", "message": "fix CodeEditorInstructor jest tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39ba51b98b16be240f854bdd0220464aa99e8cbc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/39ba51b98b16be240f854bdd0220464aa99e8cbc", "committedDate": "2020-08-06T08:24:51Z", "message": "try to fix CodeEditorStudentContainer tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c54c1cb313e393bae80a11e7777063497c33398", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/8c54c1cb313e393bae80a11e7777063497c33398", "committedDate": "2020-08-06T08:38:04Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef40247b545e9932bace0eded3d79470a9ec1c72", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ef40247b545e9932bace0eded3d79470a9ec1c72", "committedDate": "2020-08-06T16:36:37Z", "message": "fix canDeactivate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a51d61beaa884b3a25893c36cf0e13e2393db3b4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/a51d61beaa884b3a25893c36cf0e13e2393db3b4", "committedDate": "2020-08-06T16:36:59Z", "message": "fix editor layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc61e2456634d9dc0eb0e97cad9c3a59aab84a8", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ccc61e2456634d9dc0eb0e97cad9c3a59aab84a8", "committedDate": "2020-08-06T16:37:20Z", "message": "fix instructions test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e03bb620f6885669e7fb33a0843afa041ab3490f", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/e03bb620f6885669e7fb33a0843afa041ab3490f", "committedDate": "2020-08-06T16:47:14Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/instructions/code-editor-instructions.component.ts\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/layout/code-editor-grid.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7df6545a2dcb4f54dae197de42003b98d9012b3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/f7df6545a2dcb4f54dae197de42003b98d9012b3", "committedDate": "2020-08-06T17:22:37Z", "message": "cleanup instructions-component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "327512fd8ac3f95932e1ca6d419b1fff1a987c3e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/327512fd8ac3f95932e1ca6d419b1fff1a987c3e", "committedDate": "2020-08-06T17:41:35Z", "message": "typescript formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8cc34151f8c132b410748d00a752a3a4451305e", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d8cc34151f8c132b410748d00a752a3a4451305e", "committedDate": "2020-08-06T17:42:20Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c9a5cf8427a1bb446750efe55b6cfd9915e6356", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2c9a5cf8427a1bb446750efe55b6cfd9915e6356", "committedDate": "2020-08-06T19:49:06Z", "message": "add code-editor-container integration test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "875c230b0ad4c7dcafba956187dc463776645469", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/875c230b0ad4c7dcafba956187dc463776645469", "committedDate": "2020-08-06T20:07:21Z", "message": "typescript linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "646d023762b63ebe804395fc3c47c5ca6e750074", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/646d023762b63ebe804395fc3c47c5ca6e750074", "committedDate": "2020-08-10T10:14:30Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5794a7925a7543a6fcaa705f1a25a38642294ded", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/5794a7925a7543a6fcaa705f1a25a38642294ded", "committedDate": "2020-08-12T11:23:07Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MjE1OTQy", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-466215942", "createdAt": "2020-08-12T19:38:15Z", "commit": {"oid": "5794a7925a7543a6fcaa705f1a25a38642294ded"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cc14274f173e22f8e78c3bfaad7a82279f93cd3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2cc14274f173e22f8e78c3bfaad7a82279f93cd3", "committedDate": "2020-08-14T14:24:21Z", "message": "fix styling issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7ca52fc276790076544393cece2906df860da5b", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d7ca52fc276790076544393cece2906df860da5b", "committedDate": "2020-08-14T14:46:30Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f58f4503e867e450c354da5c3b4d5c8c82dfd58", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/1f58f4503e867e450c354da5c3b4d5c8c82dfd58", "committedDate": "2020-08-17T23:53:29Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MTk5MjU0", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-469199254", "createdAt": "2020-08-18T10:35:59Z", "commit": {"oid": "1f58f4503e867e450c354da5c3b4d5c8c82dfd58"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDozNTo1OVrOHCNjPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDozNTo1OVrOHCNjPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA4MTIxNA==", "bodyText": "Is there a reason why you keep this method?", "url": "https://github.com/ls1intum/Artemis/pull/1999#discussion_r472081214", "createdAt": "2020-08-18T10:35:59Z", "author": {"login": "HanyaElhashemy"}, "path": "src/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "diffHunk": "@@ -34,28 +46,64 @@ export class ProgrammingExamSubmissionComponent extends ExamSubmissionComponent\n         return this.exercise;\n     }\n \n-    @ViewChild(ExamCodeEditorStudentContainerComponent, { static: false })\n-    codeEditorComponent: ExamCodeEditorStudentContainerComponent;\n-\n     isSaving: boolean;\n     readonly ButtonType = ButtonType;\n     readonly ButtonSize = ButtonSize;\n \n+    /**\n+     * On init set up the route param subscription.\n+     * Will load the participation according to participation Id with the latest result and result details.\n+     */\n+    ngOnInit(): void {\n+        // We lock the repository when the buildAndTestAfterDueDate is set and the due date has passed.\n+        const dueDateHasPassed = !this.exercise.dueDate || moment(this.exercise.dueDate).isBefore(moment());\n+        this.repositoryIsLocked = !!this.exercise.buildAndTestStudentSubmissionsAfterDueDate && !!this.exercise.dueDate && dueDateHasPassed;\n+\n+        const participation = { ...this.studentParticipation, exercise: this.exercise } as StudentParticipation;\n+        this.domainService.setDomain([DomainType.PARTICIPATION, participation]);\n+    }\n+\n+    reload(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f58f4503e867e450c354da5c3b4d5c8c82dfd58"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MjAwNzEx", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-469200711", "createdAt": "2020-08-18T10:37:56Z", "commit": {"oid": "1f58f4503e867e450c354da5c3b4d5c8c82dfd58"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDozNzo1NlrOHCNnbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDozNzo1NlrOHCNnbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA4MjI4NA==", "bodyText": "same comment here", "url": "https://github.com/ls1intum/Artemis/pull/1999#discussion_r472082284", "createdAt": "2020-08-18T10:37:56Z", "author": {"login": "HanyaElhashemy"}, "path": "src/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "diffHunk": "@@ -34,28 +46,64 @@ export class ProgrammingExamSubmissionComponent extends ExamSubmissionComponent\n         return this.exercise;\n     }\n \n-    @ViewChild(ExamCodeEditorStudentContainerComponent, { static: false })\n-    codeEditorComponent: ExamCodeEditorStudentContainerComponent;\n-\n     isSaving: boolean;\n     readonly ButtonType = ButtonType;\n     readonly ButtonSize = ButtonSize;\n \n+    /**\n+     * On init set up the route param subscription.\n+     * Will load the participation according to participation Id with the latest result and result details.\n+     */\n+    ngOnInit(): void {\n+        // We lock the repository when the buildAndTestAfterDueDate is set and the due date has passed.\n+        const dueDateHasPassed = !this.exercise.dueDate || moment(this.exercise.dueDate).isBefore(moment());\n+        this.repositoryIsLocked = !!this.exercise.buildAndTestStudentSubmissionsAfterDueDate && !!this.exercise.dueDate && dueDateHasPassed;\n+\n+        const participation = { ...this.studentParticipation, exercise: this.exercise } as StudentParticipation;\n+        this.domainService.setDomain([DomainType.PARTICIPATION, participation]);\n+    }\n+\n+    reload(): void {\n+        // this.ngOnInit();\n+        // if (this.instructions) {\n+        //     this.instructions.refreshInstructions();\n+        // }\n+    }\n+\n+    /**\n+     * Update {@link Submission#isSynced} & {@link Submission#submitted} based on the CommitState.\n+     * The submission is only synced, if all changes are committed (CommitState.CLEAN).\n+     *\n+     * @param commitState current CommitState from CodeEditorActionsComponent\n+     */\n+    onCommitStateChange(commitState: CommitState): void {\n+        if (this.studentParticipation.submissions && this.studentParticipation.submissions.length > 0) {\n+            if (commitState === CommitState.CLEAN) {\n+                this.studentParticipation.submissions[0].submitted = true;\n+                this.studentParticipation.submissions[0].isSynced = true;\n+            }\n+        }\n+    }\n+\n+    onFileChanged() {\n+        if (this.studentParticipation.submissions && this.studentParticipation.submissions.length > 0) {\n+            this.studentParticipation.submissions[0].isSynced = false;\n+        }\n+    }\n+\n     hasUnsavedChanges(): boolean {\n         if (this.exercise.allowOfflineIde && !this.exercise.allowOnlineEditor) {\n             return false;\n         }\n-        return this.codeEditorComponent.editorState === EditorState.UNSAVED_CHANGES;\n+        return this.codeEditorContainer.editorState === EditorState.UNSAVED_CHANGES;\n     }\n \n     onActivate(): void {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f58f4503e867e450c354da5c3b4d5c8c82dfd58"}, "originalPosition": 104}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NTQ5NTQ1", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-469549545", "createdAt": "2020-08-18T15:06:10Z", "commit": {"oid": "1f58f4503e867e450c354da5c3b4d5c8c82dfd58"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b14b1d28edfcbce0bc1ed7387e1d33bfba581e05", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/b14b1d28edfcbce0bc1ed7387e1d33bfba581e05", "committedDate": "2020-08-18T15:39:40Z", "message": "fix issue with multiple exam exercises"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NjkwMzc2", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-469690376", "createdAt": "2020-08-18T17:50:04Z", "commit": {"oid": "b14b1d28edfcbce0bc1ed7387e1d33bfba581e05"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1MDowNFrOHCfjVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxODozMDowOFrOHCg78A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM3NjE0OA==", "bodyText": "This went missing and caused the problems with multiple programming exercises in an exam. I'd rather have unique instances of these services for each code editor instance but calling ngOnInit on reload also works.", "url": "https://github.com/ls1intum/Artemis/pull/1999#discussion_r472376148", "createdAt": "2020-08-18T17:50:04Z", "author": {"login": "kloessst"}, "path": "src/main/webapp/app/exam/participate/exercises/programming/code-editor/exam-code-editor-student-container.component.ts", "diffHunk": "@@ -1,124 +0,0 @@\n-import { Component, Input, OnInit, ViewChild } from '@angular/core';\n-import * as moment from 'moment';\n-import { TranslateService } from '@ngx-translate/core';\n-import { AlertService } from 'app/core/alert/alert.service';\n-import { CodeEditorBuildOutputComponent } from 'app/exercises/programming/shared/code-editor/build-output/code-editor-build-output.component';\n-import { ButtonSize } from 'app/shared/components/button.component';\n-import { CodeEditorSessionService } from 'app/exercises/programming/shared/code-editor/service/code-editor-session.service';\n-import { CodeEditorFileService } from 'app/exercises/programming/shared/code-editor/service/code-editor-file.service';\n-import { CodeEditorActionsComponent } from 'app/exercises/programming/shared/code-editor/actions/code-editor-actions.component';\n-import { CodeEditorAceComponent } from 'app/exercises/programming/shared/code-editor/ace/code-editor-ace.component';\n-import { ExerciseType } from 'app/entities/exercise.model';\n-import { StudentParticipation } from 'app/entities/participation/student-participation.model';\n-import { CodeEditorContainerComponent } from 'app/exercises/programming/shared/code-editor/code-editor-mode-container.component';\n-import { CodeEditorInstructionsComponent } from 'app/exercises/programming/shared/code-editor/instructions/code-editor-instructions.component';\n-import { CodeEditorFileBrowserComponent } from 'app/exercises/programming/shared/code-editor/file-browser/code-editor-file-browser.component';\n-import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n-import { CommitState, DomainType, FileChange } from 'app/exercises/programming/shared/code-editor/model/code-editor.model';\n-import { DomainService } from 'app/exercises/programming/shared/code-editor/service/code-editor-domain.service';\n-import { CodeEditorConflictStateService } from 'app/exercises/programming/shared/code-editor/service/code-editor-conflict-state.service';\n-import { CodeEditorSubmissionService } from 'app/exercises/programming/shared/code-editor/service/code-editor-submission.service';\n-import {\n-    CodeEditorBuildLogService,\n-    CodeEditorRepositoryFileService,\n-    CodeEditorRepositoryService,\n-} from 'app/exercises/programming/shared/code-editor/service/code-editor-repository.service';\n-\n-@Component({\n-    selector: 'jhi-exam-code-editor-student',\n-    templateUrl: './exam-code-editor-student-container.component.html',\n-    providers: [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b14b1d28edfcbce0bc1ed7387e1d33bfba581e05"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM5ODgzMg==", "bodyText": "Do we need the ViewChild here? I think the instructions variable is never used.", "url": "https://github.com/ls1intum/Artemis/pull/1999#discussion_r472398832", "createdAt": "2020-08-18T18:30:08Z", "author": {"login": "kloessst"}, "path": "src/main/webapp/app/exercises/programming/participate/code-editor-student-container.component.ts", "diffHunk": "@@ -3,44 +3,33 @@ import { Observable, of } from 'rxjs';\n import { Subscription } from 'rxjs/Subscription';\n import { catchError, flatMap, map, switchMap, tap } from 'rxjs/operators';\n import * as moment from 'moment';\n-import { ParticipationService } from 'app/exercises/shared/participation/participation.service';\n-import { TranslateService } from '@ngx-translate/core';\n-import { ActivatedRoute } from '@angular/router';\n-import { AlertService } from 'app/core/alert/alert.service';\n import { ProgrammingExerciseParticipationService } from 'app/exercises/programming/manage/services/programming-exercise-participation.service';\n import { GuidedTourService } from 'app/guided-tour/guided-tour.service';\n import { codeEditorTour } from 'app/guided-tour/tours/code-editor-tour';\n-import { CodeEditorBuildOutputComponent } from 'app/exercises/programming/shared/code-editor/build-output/code-editor-build-output.component';\n import { ButtonSize } from 'app/shared/components/button.component';\n-import { CodeEditorSessionService } from 'app/exercises/programming/shared/code-editor/service/code-editor-session.service';\n import { ResultService } from 'app/exercises/shared/result/result.service';\n import { DomainService } from 'app/exercises/programming/shared/code-editor/service/code-editor-domain.service';\n-import { CodeEditorFileService } from 'app/exercises/programming/shared/code-editor/service/code-editor-file.service';\n-import { CodeEditorActionsComponent } from 'app/exercises/programming/shared/code-editor/actions/code-editor-actions.component';\n-import { CodeEditorAceComponent } from 'app/exercises/programming/shared/code-editor/ace/code-editor-ace.component';\n import { ExerciseType } from 'app/entities/exercise.model';\n import { AssessmentType } from 'app/entities/assessment-type.model';\n import { StudentParticipation } from 'app/entities/participation/student-participation.model';\n import { Result } from 'app/entities/result.model';\n-import { CodeEditorContainerComponent } from 'app/exercises/programming/shared/code-editor/code-editor-mode-container.component';\n import { Feedback } from 'app/entities/feedback.model';\n-import { CodeEditorInstructionsComponent } from 'app/exercises/programming/shared/code-editor/instructions/code-editor-instructions.component';\n-import { CodeEditorFileBrowserComponent } from 'app/exercises/programming/shared/code-editor/file-browser/code-editor-file-browser.component';\n import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n import { DomainType } from 'app/exercises/programming/shared/code-editor/model/code-editor.model';\n import { ExerciseHint } from 'app/entities/exercise-hint.model';\n import { ExerciseHintService } from 'app/exercises/shared/exercise-hint/manage/exercise-hint.service';\n+import { ActivatedRoute } from '@angular/router';\n+import { CodeEditorContainerComponent } from 'app/exercises/programming/shared/code-editor/container/code-editor-container.component';\n+import { ProgrammingExerciseInstructionComponent } from 'app/exercises/programming/shared/instructions-render/programming-exercise-instruction.component';\n+import { ComponentCanDeactivate } from 'app/shared/guard/can-deactivate.model';\n \n @Component({\n     selector: 'jhi-code-editor-student',\n     templateUrl: './code-editor-student-container.component.html',\n })\n-export class CodeEditorStudentContainerComponent extends CodeEditorContainerComponent implements OnInit, OnDestroy {\n-    @ViewChild(CodeEditorFileBrowserComponent, { static: false }) fileBrowser: CodeEditorFileBrowserComponent;\n-    @ViewChild(CodeEditorActionsComponent, { static: false }) actions: CodeEditorActionsComponent;\n-    @ViewChild(CodeEditorBuildOutputComponent, { static: false }) buildOutput: CodeEditorBuildOutputComponent;\n-    @ViewChild(CodeEditorInstructionsComponent, { static: false }) instructions: CodeEditorInstructionsComponent;\n-    @ViewChild(CodeEditorAceComponent, { static: false }) aceEditor: CodeEditorAceComponent;\n+export class CodeEditorStudentContainerComponent implements OnInit, OnDestroy, ComponentCanDeactivate {\n+    @ViewChild(CodeEditorContainerComponent, { static: false }) codeEditorContainer: CodeEditorContainerComponent;\n+    @ViewChild(ProgrammingExerciseInstructionComponent, { static: false }) instructions: ProgrammingExerciseInstructionComponent;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b14b1d28edfcbce0bc1ed7387e1d33bfba581e05"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e58b1f5379cbb06694a8acc271d50628c76ddda", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/6e58b1f5379cbb06694a8acc271d50628c76ddda", "committedDate": "2020-08-18T18:57:45Z", "message": "remove unused viewchild"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5Nzc4NTQw", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-469778540", "createdAt": "2020-08-18T19:56:39Z", "commit": {"oid": "6e58b1f5379cbb06694a8acc271d50628c76ddda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5ODAzNDk1", "url": "https://github.com/ls1intum/Artemis/pull/1999#pullrequestreview-469803495", "createdAt": "2020-08-18T20:23:22Z", "commit": {"oid": "6e58b1f5379cbb06694a8acc271d50628c76ddda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09951994ff2ab5c82c73a13b1f58944a756f0f86", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/09951994ff2ab5c82c73a13b1f58944a756f0f86", "committedDate": "2020-08-19T19:58:22Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec8db36f46e46516f6b522f8a36d228398f497af", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/ec8db36f46e46516f6b522f8a36d228398f497af", "committedDate": "2020-08-20T09:44:10Z", "message": "Merge branch 'develop' into ehancement/code-editor/refactor-code-editor-container"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4466, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}