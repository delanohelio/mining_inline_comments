{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMDg5NDU1", "number": 2580, "title": "Allow sorting exercises by start date", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I added multiple integration tests (Jest) related to the features (with a high test coverage)\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\n\nThe user is only able to sort for dueDates, but it should also be possible to sort for releaseDates\n\nDescription\n\nAdded nur dropdown with a new sortingtype, releaseDate\nadded tests for this component\nRemoved code which should be unused, please also double check this in the code review\n\nSteps for Testing\n\nLog in to Artemis\nNavigate to Course overview\nSee if exercises are ordered correctly after dueDate\nVary with the sorting options (Newest, Oldest, DueDate, ReleaseDate) and make sure exercises are correctly ordered based on the chosen sorting type (see screenshots). Play around with the sorting button and make sure no errors occur and the sorting is always correct.\n\nTest Coverage\ncourse-exercises.component.ts: 20% -> 97,93%\nScreenshots", "createdAt": "2020-12-20T16:06:46Z", "url": "https://github.com/ls1intum/Artemis/pull/2580", "merged": true, "mergeCommit": {"oid": "87a12379678397598a9192c24bde4e624f3f1316"}, "closed": true, "closedAt": "2021-01-18T20:56:39Z", "author": {"login": "1-alex98"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoDrKcAFqTU1NjAzMDgzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxdIpcgFqTU3MDc3MzQ5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDMwODMw", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-556030830", "createdAt": "2020-12-20T16:11:03Z", "commit": {"oid": "d436466b6235a271e4f82e979811112f97434aaf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxNjoxMTowM1rOIJFaYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxNjoxMTowM1rOIJFaYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5Njc2OA==", "bodyText": "Can be discussed how to handle this", "url": "https://github.com/ls1intum/Artemis/pull/2580#discussion_r546396768", "createdAt": "2020-12-20T16:11:03Z", "author": {"login": "1-alex98"}, "path": "src/main/webapp/app/overview/course-exercises/course-exercises.component.ts", "diffHunk": "@@ -190,7 +241,7 @@ export class CourseExercisesComponent implements OnInit, OnChanges, OnDestroy {\n                     groupedExercises[dateIndex] = {\n                         start: moment(dateValue).startOf('week'),\n                         end: moment(dateValue).endOf('week'),\n-                        isCollapsed: dateValue.isBefore(moment(), 'week'),\n+                        isCollapsed: this.sortingAttribute === this.DUE_DATE ? dateValue.isBefore(moment(), 'week') : dateValue.isBefore(moment().subtract(4, 'weeks'), 'week'),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d436466b6235a271e4f82e979811112f97434aaf"}, "originalPosition": 132}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35ae32e0c5b5ce11f0ff1f51678fb609cebc88d9", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/35ae32e0c5b5ce11f0ff1f51678fb609cebc88d9", "committedDate": "2020-12-20T16:12:49Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}, "afterCommit": {"oid": "d8a2b60a611a473f9de2563c75775074c4c4a7e0", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/d8a2b60a611a473f9de2563c75775074c4c4a7e0", "committedDate": "2020-12-20T16:14:02Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8a2b60a611a473f9de2563c75775074c4c4a7e0", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/d8a2b60a611a473f9de2563c75775074c4c4a7e0", "committedDate": "2020-12-20T16:14:02Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}, "afterCommit": {"oid": "148cc801807368b32792ae5ca3edcc85825345ed", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/148cc801807368b32792ae5ca3edcc85825345ed", "committedDate": "2020-12-20T16:14:45Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579\n\nAllow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da596275bea66e29614830769d44ed3327ed7f1b", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/da596275bea66e29614830769d44ed3327ed7f1b", "committedDate": "2020-12-20T17:22:06Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "148cc801807368b32792ae5ca3edcc85825345ed", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/148cc801807368b32792ae5ca3edcc85825345ed", "committedDate": "2020-12-20T16:14:45Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579\n\nAllow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}, "afterCommit": {"oid": "da596275bea66e29614830769d44ed3327ed7f1b", "author": {"user": {"login": "1-alex98", "name": "Alexander von Trostorff"}}, "url": "https://github.com/ls1intum/Artemis/commit/da596275bea66e29614830769d44ed3327ed7f1b", "committedDate": "2020-12-20T17:22:06Z", "message": "Allow sorting exercises by start date\n\nLet's the user choose on which date to sort\nFixes #2579"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8cd1a328330d132405de3cc86d93b6e6501ac3c", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/a8cd1a328330d132405de3cc86d93b6e6501ac3c", "committedDate": "2021-01-15T12:57:52Z", "message": "little refactoring of functionality and translations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf3199b6c9930237210853a0dadf9a523b07eb1c", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/cf3199b6c9930237210853a0dadf9a523b07eb1c", "committedDate": "2021-01-15T19:48:55Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/frontend/#2579-sort-by-start-date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b65346cb6c2a9b7700b56c76933891ffc8b6fd", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/44b65346cb6c2a9b7700b56c76933891ffc8b6fd", "committedDate": "2021-01-16T10:06:05Z", "message": "added tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021", "committedDate": "2021-01-16T10:25:28Z", "message": "removed unreachable statement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTAyOTU2", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569902956", "createdAt": "2021-01-16T11:01:34Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTA2MzIy", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569906322", "createdAt": "2021-01-16T11:05:58Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTA5MTUy", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569909152", "createdAt": "2021-01-16T11:10:41Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTMzNTk3", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569933597", "createdAt": "2021-01-16T12:02:49Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTM2Mjc5", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569936279", "createdAt": "2021-01-16T12:51:13Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTQwMjY4", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569940268", "createdAt": "2021-01-16T13:55:54Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTQwMzk4", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569940398", "createdAt": "2021-01-16T13:57:46Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTUwNTQ4", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569950548", "createdAt": "2021-01-16T16:30:44Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTYzMjUz", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569963253", "createdAt": "2021-01-16T19:44:53Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5OTY3NTMx", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-569967531", "createdAt": "2021-01-16T21:02:56Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMDQyMDgw", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570042080", "createdAt": "2021-01-17T10:11:30Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMDU5NzIz", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570059723", "createdAt": "2021-01-17T13:55:54Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMzE0NjYw", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570314660", "createdAt": "2021-01-18T09:37:00Z", "commit": {"oid": "2d68f0b5e87bd8a1c682a0d904b1d2efa37a1021"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4887e77d927362d7b79d4929dc984c603f69e99", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/d4887e77d927362d7b79d4929dc984c603f69e99", "committedDate": "2021-01-18T12:58:41Z", "message": "change tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdc572347920a968b5b836b8132dc689cd588941", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/cdc572347920a968b5b836b8132dc689cd588941", "committedDate": "2021-01-18T13:04:27Z", "message": "change array filling code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1eab96776636fe79551452fa9040ecbd51bf6519", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/1eab96776636fe79551452fa9040ecbd51bf6519", "committedDate": "2021-01-18T14:30:48Z", "message": "Merge branch 'develop' into feature/frontend/#2579-sort-by-start-date"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNTQzMDU0", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570543054", "createdAt": "2021-01-18T14:33:40Z", "commit": {"oid": "cdc572347920a968b5b836b8132dc689cd588941"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQxNDozNDowNFrOIVrvww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQxNDozNjo1N1rOIVr3Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTYwNzc0Nw==", "bodyText": "This is not needed in tests.", "url": "https://github.com/ls1intum/Artemis/pull/2580#discussion_r559607747", "createdAt": "2021-01-18T14:34:04Z", "author": {"login": "stefanwaldhauser"}, "path": "src/test/javascript/spec/component/course/course-exercises.component.spec.ts", "diffHunk": "@@ -0,0 +1,181 @@\n+import * as chai from 'chai';\n+import * as sinonChai from 'sinon-chai';\n+import { ComponentFixture, TestBed } from '@angular/core/testing';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { ArtemisTestModule } from '../../test.module';\n+import { MockSyncStorage } from '../../helpers/mocks/service/mock-sync-storage.service';\n+import { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n+import { of } from 'rxjs/internal/observable/of';\n+import { Course } from 'app/entities/course.model';\n+import { MockComponent, MockDirective, MockPipe } from 'ng-mocks';\n+import { OrionFilterDirective } from 'app/shared/orion/orion-filter.directive';\n+import { AlertComponent } from 'app/shared/alert/alert.component';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { MockHasAnyAuthorityDirective } from '../../helpers/mocks/directive/mock-has-any-authority.directive';\n+import { TranslatePipe, TranslateService } from '@ngx-translate/core';\n+import { JhiSortByDirective, JhiSortDirective } from 'ng-jhipster';\n+import { ArtemisDatePipe } from 'app/shared/pipes/artemis-date.pipe';\n+import { DeleteButtonDirective } from 'app/shared/delete-dialog/delete-button.directive';\n+import { MomentModule } from 'ngx-moment';\n+import { CourseExercisesComponent, ExerciseFilter, ExerciseSortingOrder, SortingAttribute } from 'app/overview/course-exercises/course-exercises.component';\n+import { CourseExerciseRowComponent } from 'app/overview/course-exercises/course-exercise-row.component';\n+import { SidePanelComponent } from 'app/shared/side-panel/side-panel.component';\n+import { MockTranslateService } from '../../helpers/mocks/service/mock-translate.service';\n+import { ActivatedRoute } from '@angular/router';\n+import { ModelingExercise, UMLDiagramType } from 'app/entities/modeling-exercise.model';\n+import { Exercise } from 'app/entities/exercise.model';\n+import { CourseScoreCalculationService } from 'app/overview/course-score-calculation.service';\n+import { stub } from 'sinon';\n+import { ExerciseService } from 'app/exercises/shared/exercise/exercise.service';\n+import * as sinon from 'sinon';\n+import * as moment from 'moment';\n+import { Subject } from 'rxjs';\n+import { MockTranslateValuesDirective } from './course-scores/course-scores.component.spec';\n+import { By } from '@angular/platform-browser';\n+\n+chai.use(sinonChai);\n+const expect = chai.expect;\n+\n+describe('CourseExercisesComponent', () => {\n+    let fixture: ComponentFixture<CourseExercisesComponent>;\n+    let component: CourseExercisesComponent;\n+    let service: CourseManagementService;\n+    let courseCalculation: CourseScoreCalculationService;\n+    let translateService: TranslateService;\n+    let exerciseService: ExerciseService;\n+    let localStorageService: LocalStorageService;\n+\n+    let course: Course;\n+    let exercise: Exercise;\n+    let courseCalculationSpy: sinon.SinonStub;\n+\n+    const parentRoute = ({ params: of({ courseId: '123' }) } as any) as ActivatedRoute;\n+    const route = ({ parent: parentRoute } as any) as ActivatedRoute;\n+\n+    beforeEach(() => {\n+        TestBed.configureTestingModule({\n+            imports: [ArtemisTestModule, RouterTestingModule.withRoutes([]), MomentModule],\n+            declarations: [\n+                CourseExercisesComponent,\n+                MockDirective(OrionFilterDirective),\n+                MockComponent(AlertComponent),\n+                MockComponent(CourseExerciseRowComponent),\n+                MockComponent(SidePanelComponent),\n+                MockDirective(MockHasAnyAuthorityDirective),\n+                MockDirective(JhiSortByDirective),\n+                MockPipe(TranslatePipe),\n+                MockDirective(JhiSortDirective),\n+                MockPipe(ArtemisDatePipe),\n+                MockDirective(DeleteButtonDirective),\n+                MockTranslateValuesDirective,\n+            ],\n+            providers: [\n+                { provide: LocalStorageService, useClass: MockSyncStorage },\n+                { provide: SessionStorageService, useClass: MockSyncStorage },\n+                { provide: TranslateService, useClass: MockTranslateService },\n+                {\n+                    provide: ActivatedRoute,\n+                    useValue: route,\n+                },\n+            ],\n+        })\n+            .compileComponents()\n+            .then(() => {\n+                fixture = TestBed.createComponent(CourseExercisesComponent);\n+                component = fixture.componentInstance;\n+                service = TestBed.inject(CourseManagementService);\n+                courseCalculation = TestBed.inject(CourseScoreCalculationService);\n+                translateService = TestBed.inject(TranslateService);\n+                exerciseService = TestBed.inject(ExerciseService);\n+                localStorageService = TestBed.inject(LocalStorageService);\n+\n+                course = new Course();\n+                course.id = 123;\n+                exercise = new ModelingExercise(UMLDiagramType.ClassDiagram, course, undefined) as Exercise;\n+                exercise.dueDate = moment('2021-01-13T16:11:00+01:00').add(1, 'days');\n+                exercise.releaseDate = moment('2021-01-13T16:11:00+01:00').subtract(1, 'days');\n+                course.exercises = [exercise];\n+                spyOn(service, 'getCourseUpdates').and.returnValue(of(course));\n+                spyOn(translateService, 'onLangChange').and.returnValue(of(new Subject()));\n+                spyOn(localStorageService, 'retrieve').and.returnValue('OVERDUE,NEEDS_WORK');\n+                courseCalculationSpy = stub(courseCalculation, 'getCourse').returns(course);\n+\n+                fixture.detectChanges();\n+            });\n+    });\n+\n+    afterEach(() => {\n+        component.ngOnDestroy();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1eab96776636fe79551452fa9040ecbd51bf6519"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTYwOTYxOA==", "bodyText": "You are not really asserting that the sorting worked here. I would expect to see some test that asserts that the sorting really happened", "url": "https://github.com/ls1intum/Artemis/pull/2580#discussion_r559609618", "createdAt": "2021-01-18T14:36:57Z", "author": {"login": "stefanwaldhauser"}, "path": "src/test/javascript/spec/component/course/course-exercises.component.spec.ts", "diffHunk": "@@ -0,0 +1,181 @@\n+import * as chai from 'chai';\n+import * as sinonChai from 'sinon-chai';\n+import { ComponentFixture, TestBed } from '@angular/core/testing';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { ArtemisTestModule } from '../../test.module';\n+import { MockSyncStorage } from '../../helpers/mocks/service/mock-sync-storage.service';\n+import { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n+import { of } from 'rxjs/internal/observable/of';\n+import { Course } from 'app/entities/course.model';\n+import { MockComponent, MockDirective, MockPipe } from 'ng-mocks';\n+import { OrionFilterDirective } from 'app/shared/orion/orion-filter.directive';\n+import { AlertComponent } from 'app/shared/alert/alert.component';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { MockHasAnyAuthorityDirective } from '../../helpers/mocks/directive/mock-has-any-authority.directive';\n+import { TranslatePipe, TranslateService } from '@ngx-translate/core';\n+import { JhiSortByDirective, JhiSortDirective } from 'ng-jhipster';\n+import { ArtemisDatePipe } from 'app/shared/pipes/artemis-date.pipe';\n+import { DeleteButtonDirective } from 'app/shared/delete-dialog/delete-button.directive';\n+import { MomentModule } from 'ngx-moment';\n+import { CourseExercisesComponent, ExerciseFilter, ExerciseSortingOrder, SortingAttribute } from 'app/overview/course-exercises/course-exercises.component';\n+import { CourseExerciseRowComponent } from 'app/overview/course-exercises/course-exercise-row.component';\n+import { SidePanelComponent } from 'app/shared/side-panel/side-panel.component';\n+import { MockTranslateService } from '../../helpers/mocks/service/mock-translate.service';\n+import { ActivatedRoute } from '@angular/router';\n+import { ModelingExercise, UMLDiagramType } from 'app/entities/modeling-exercise.model';\n+import { Exercise } from 'app/entities/exercise.model';\n+import { CourseScoreCalculationService } from 'app/overview/course-score-calculation.service';\n+import { stub } from 'sinon';\n+import { ExerciseService } from 'app/exercises/shared/exercise/exercise.service';\n+import * as sinon from 'sinon';\n+import * as moment from 'moment';\n+import { Subject } from 'rxjs';\n+import { MockTranslateValuesDirective } from './course-scores/course-scores.component.spec';\n+import { By } from '@angular/platform-browser';\n+\n+chai.use(sinonChai);\n+const expect = chai.expect;\n+\n+describe('CourseExercisesComponent', () => {\n+    let fixture: ComponentFixture<CourseExercisesComponent>;\n+    let component: CourseExercisesComponent;\n+    let service: CourseManagementService;\n+    let courseCalculation: CourseScoreCalculationService;\n+    let translateService: TranslateService;\n+    let exerciseService: ExerciseService;\n+    let localStorageService: LocalStorageService;\n+\n+    let course: Course;\n+    let exercise: Exercise;\n+    let courseCalculationSpy: sinon.SinonStub;\n+\n+    const parentRoute = ({ params: of({ courseId: '123' }) } as any) as ActivatedRoute;\n+    const route = ({ parent: parentRoute } as any) as ActivatedRoute;\n+\n+    beforeEach(() => {\n+        TestBed.configureTestingModule({\n+            imports: [ArtemisTestModule, RouterTestingModule.withRoutes([]), MomentModule],\n+            declarations: [\n+                CourseExercisesComponent,\n+                MockDirective(OrionFilterDirective),\n+                MockComponent(AlertComponent),\n+                MockComponent(CourseExerciseRowComponent),\n+                MockComponent(SidePanelComponent),\n+                MockDirective(MockHasAnyAuthorityDirective),\n+                MockDirective(JhiSortByDirective),\n+                MockPipe(TranslatePipe),\n+                MockDirective(JhiSortDirective),\n+                MockPipe(ArtemisDatePipe),\n+                MockDirective(DeleteButtonDirective),\n+                MockTranslateValuesDirective,\n+            ],\n+            providers: [\n+                { provide: LocalStorageService, useClass: MockSyncStorage },\n+                { provide: SessionStorageService, useClass: MockSyncStorage },\n+                { provide: TranslateService, useClass: MockTranslateService },\n+                {\n+                    provide: ActivatedRoute,\n+                    useValue: route,\n+                },\n+            ],\n+        })\n+            .compileComponents()\n+            .then(() => {\n+                fixture = TestBed.createComponent(CourseExercisesComponent);\n+                component = fixture.componentInstance;\n+                service = TestBed.inject(CourseManagementService);\n+                courseCalculation = TestBed.inject(CourseScoreCalculationService);\n+                translateService = TestBed.inject(TranslateService);\n+                exerciseService = TestBed.inject(ExerciseService);\n+                localStorageService = TestBed.inject(LocalStorageService);\n+\n+                course = new Course();\n+                course.id = 123;\n+                exercise = new ModelingExercise(UMLDiagramType.ClassDiagram, course, undefined) as Exercise;\n+                exercise.dueDate = moment('2021-01-13T16:11:00+01:00').add(1, 'days');\n+                exercise.releaseDate = moment('2021-01-13T16:11:00+01:00').subtract(1, 'days');\n+                course.exercises = [exercise];\n+                spyOn(service, 'getCourseUpdates').and.returnValue(of(course));\n+                spyOn(translateService, 'onLangChange').and.returnValue(of(new Subject()));\n+                spyOn(localStorageService, 'retrieve').and.returnValue('OVERDUE,NEEDS_WORK');\n+                courseCalculationSpy = stub(courseCalculation, 'getCourse').returns(course);\n+\n+                fixture.detectChanges();\n+            });\n+    });\n+\n+    afterEach(() => {\n+        component.ngOnDestroy();\n+        sinon.restore();\n+    });\n+\n+    it('should initialize', () => {\n+        expect(component.course).to.deep.equal(course);\n+        expect(courseCalculationSpy.callCount).to.equal(2);\n+        expect(courseCalculationSpy.getCall(0).calledWithExactly(course.id)).to.be.true;\n+        expect(courseCalculationSpy.getCall(1).calledWithExactly(course.id)).to.be.true;\n+    });\n+\n+    it('should invoke setSortingAttribute', () => {\n+        const sortingButton = fixture.debugElement.query(By.css('#dueDateSorting'));\n+        expect(sortingButton).to.exist;\n+        sortingButton.nativeElement.click();\n+        expect(component.sortingAttribute).to.equal(SortingAttribute.DUE_DATE);\n+    });\n+\n+    it('should react to changes', () => {\n+        spyOn(exerciseService, 'getNextExerciseForHours').and.returnValue(exercise);\n+        component.ngOnChanges();\n+        expect(component.nextRelevantExercise).to.deep.equal(exercise);\n+    });\n+\n+    it('should reorder all exercises', () => {\n+        component.sortingOrder = ExerciseSortingOrder.DESC;\n+        const sortingButton = fixture.debugElement.query(By.css('#flip'));\n+        expect(sortingButton).to.exist;\n+        sortingButton.nativeElement.click();\n+        expect(component.sortingOrder).to.equal(ExerciseSortingOrder.ASC);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1eab96776636fe79551452fa9040ecbd51bf6519"}, "originalPosition": 137}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80405fbc1dea9ebf80621ffc70f83f0569ecd7bb", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/80405fbc1dea9ebf80621ffc70f83f0569ecd7bb", "committedDate": "2021-01-18T15:48:47Z", "message": "added extended flipOrder check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ac47ac0619a292a194f9182b03c9c04a608621d", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/0ac47ac0619a292a194f9182b03c9c04a608621d", "committedDate": "2021-01-18T15:49:16Z", "message": "Merge branch 'feature/frontend/#2579-sort-by-start-date' of https://github.com/ls1intum/Artemis into feature/frontend/#2579-sort-by-start-date"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNzM2Mzg1", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570736385", "createdAt": "2021-01-18T19:23:50Z", "commit": {"oid": "0ac47ac0619a292a194f9182b03c9c04a608621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNzM5NDEx", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570739411", "createdAt": "2021-01-18T19:31:22Z", "commit": {"oid": "0ac47ac0619a292a194f9182b03c9c04a608621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNzQ1NDEw", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570745410", "createdAt": "2021-01-18T19:45:41Z", "commit": {"oid": "0ac47ac0619a292a194f9182b03c9c04a608621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNzUxMTA3", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570751107", "createdAt": "2021-01-18T19:59:35Z", "commit": {"oid": "0ac47ac0619a292a194f9182b03c9c04a608621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNzczNDkx", "url": "https://github.com/ls1intum/Artemis/pull/2580#pullrequestreview-570773491", "createdAt": "2021-01-18T20:56:13Z", "commit": {"oid": "0ac47ac0619a292a194f9182b03c9c04a608621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3499, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}