{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMTQwMzk2", "number": 2278, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1N1rOEzU70g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMVrOEzU7_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjU1ODI2OnYy", "diffSide": "RIGHT", "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseTemplateIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1N1rOHqez4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1N1rOHqez4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMwNzA0Mg==", "bodyText": "Codacy found an issue: Avoid unused private methods such as 'languageTypeBuilder()'.", "url": "https://github.com/ls1intum/Artemis/pull/2278#discussion_r514307042", "createdAt": "2020-10-29T14:34:57Z", "author": {"login": "artemis-bot"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseTemplateIntegrationTest.java", "diffHunk": "@@ -115,22 +124,45 @@ public void tearDown() throws IOException {\n         solutionRepo.resetLocalRepo();\n     }\n \n+    /**\n+     * Build a combination of valid programming languages and project types.\n+     * Programming languages without project type only have one template, set null to use this one.\n+     * Programming languages with project type should be executed once per project type.\n+     * @return valid combinations of programming languages and project types.\n+     */\n+    private Stream<Arguments> languageTypeBuilder() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07e347486f69851d6d916f827c5f014ad6867c43"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjU1ODM0OnYy", "diffSide": "RIGHT", "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseTemplateIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1OFrOHqez7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1OFrOHqez7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMwNzA1NA==", "bodyText": "Codacy found an issue: The instance method name 'test_template_solution' doesn't match '[a-z][a-zA-Z0-9]*'", "url": "https://github.com/ls1intum/Artemis/pull/2278#discussion_r514307054", "createdAt": "2020-10-29T14:34:58Z", "author": {"login": "artemis-bot"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseTemplateIntegrationTest.java", "diffHunk": "@@ -115,22 +124,45 @@ public void tearDown() throws IOException {\n         solutionRepo.resetLocalRepo();\n     }\n \n+    /**\n+     * Build a combination of valid programming languages and project types.\n+     * Programming languages without project type only have one template, set null to use this one.\n+     * Programming languages with project type should be executed once per project type.\n+     * @return valid combinations of programming languages and project types.\n+     */\n+    private Stream<Arguments> languageTypeBuilder() {\n+        Stream.Builder<Arguments> argumentBuilder = Stream.builder();\n+        // Add programming exercises that should be tested with Maven here\n+        List<ProgrammingLanguage> programmingLanguages = List.of(ProgrammingLanguage.JAVA, ProgrammingLanguage.KOTLIN);\n+        for (ProgrammingLanguage language : programmingLanguages) {\n+            List<ProjectType> projectTypes = programmingLanguageFeatureService.getProgrammingLanguageFeatures(language).getProjectTypes();\n+            if (projectTypes.isEmpty()) {\n+                argumentBuilder.add(Arguments.of(language, null));\n+            }\n+            for (ProjectType projectType : projectTypes) {\n+                argumentBuilder.add(Arguments.of(language, projectType));\n+            }\n+        }\n+        return argumentBuilder.build();\n+    }\n+\n     @ParameterizedTest\n     @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n-    @EnumSource(value = ProgrammingLanguage.class, names = { \"KOTLIN\", \"JAVA\" }, mode = EnumSource.Mode.INCLUDE)\n-    public void runTemplateTests_exercise(ProgrammingLanguage language) throws Exception {\n-        runTests(language, exerciseRepo, TestResult.FAILED);\n+    @MethodSource(\"languageTypeBuilder\")\n+    public void test_template_exercise(ProgrammingLanguage language, ProjectType projectType) throws Exception {\n+        runTests(language, projectType, exerciseRepo, TestResult.FAILED);\n     }\n \n     @ParameterizedTest\n     @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n-    @EnumSource(value = ProgrammingLanguage.class, names = { \"KOTLIN\", \"JAVA\" }, mode = EnumSource.Mode.INCLUDE)\n-    public void runTemplateTests_solution(ProgrammingLanguage language) throws Exception {\n-        runTests(language, solutionRepo, TestResult.SUCCESSFUL);\n+    @MethodSource(\"languageTypeBuilder\")\n+    public void test_template_solution(ProgrammingLanguage language, ProjectType projectType) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07e347486f69851d6d916f827c5f014ad6867c43"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjU1ODQwOnYy", "diffSide": "RIGHT", "path": "src/test/java/de/tum/in/www1/artemis/util/ProgrammingExerciseTestService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1OVrOHqez_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNDo1OVrOHqez_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMwNzA3MA==", "bodyText": "Codacy found an issue: The instance method name 'createProgrammingExercise_programmingLanguage_validExercise_created' doesn't match '[a-z][a-zA-Z0-9]*'", "url": "https://github.com/ls1intum/Artemis/pull/2278#discussion_r514307070", "createdAt": "2020-10-29T14:34:59Z", "author": {"login": "artemis-bot"}, "path": "src/test/java/de/tum/in/www1/artemis/util/ProgrammingExerciseTestService.java", "diffHunk": "@@ -212,8 +213,10 @@ public void createProgrammingExercise_mode_validExercise_created(ExerciseMode mo\n     }\n \n     // TEST\n-    public void createProgrammingExercise_programmingLanguage_validExercise_created(ProgrammingLanguage language) throws Exception {\n+    public void createProgrammingExercise_programmingLanguage_validExercise_created(ProgrammingLanguage language, ProgrammingLanguageFeature programmingLanguageFeature)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07e347486f69851d6d916f827c5f014ad6867c43"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjU1ODUxOnYy", "diffSide": "RIGHT", "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseTemplateIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMFrOHqe0Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMFrOHqe0Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMwNzA4Nw==", "bodyText": "Codacy found an issue: The instance method name 'test_template_exercise' doesn't match '[a-z][a-zA-Z0-9]*'", "url": "https://github.com/ls1intum/Artemis/pull/2278#discussion_r514307087", "createdAt": "2020-10-29T14:35:00Z", "author": {"login": "artemis-bot"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseTemplateIntegrationTest.java", "diffHunk": "@@ -115,22 +124,45 @@ public void tearDown() throws IOException {\n         solutionRepo.resetLocalRepo();\n     }\n \n+    /**\n+     * Build a combination of valid programming languages and project types.\n+     * Programming languages without project type only have one template, set null to use this one.\n+     * Programming languages with project type should be executed once per project type.\n+     * @return valid combinations of programming languages and project types.\n+     */\n+    private Stream<Arguments> languageTypeBuilder() {\n+        Stream.Builder<Arguments> argumentBuilder = Stream.builder();\n+        // Add programming exercises that should be tested with Maven here\n+        List<ProgrammingLanguage> programmingLanguages = List.of(ProgrammingLanguage.JAVA, ProgrammingLanguage.KOTLIN);\n+        for (ProgrammingLanguage language : programmingLanguages) {\n+            List<ProjectType> projectTypes = programmingLanguageFeatureService.getProgrammingLanguageFeatures(language).getProjectTypes();\n+            if (projectTypes.isEmpty()) {\n+                argumentBuilder.add(Arguments.of(language, null));\n+            }\n+            for (ProjectType projectType : projectTypes) {\n+                argumentBuilder.add(Arguments.of(language, projectType));\n+            }\n+        }\n+        return argumentBuilder.build();\n+    }\n+\n     @ParameterizedTest\n     @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n-    @EnumSource(value = ProgrammingLanguage.class, names = { \"KOTLIN\", \"JAVA\" }, mode = EnumSource.Mode.INCLUDE)\n-    public void runTemplateTests_exercise(ProgrammingLanguage language) throws Exception {\n-        runTests(language, exerciseRepo, TestResult.FAILED);\n+    @MethodSource(\"languageTypeBuilder\")\n+    public void test_template_exercise(ProgrammingLanguage language, ProjectType projectType) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07e347486f69851d6d916f827c5f014ad6867c43"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjU1ODU5OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMFrOHqe0GQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMFrOHqe0GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMwNzA5Nw==", "bodyText": "Codacy found an issue: Avoid really long methods.", "url": "https://github.com/ls1intum/Artemis/pull/2278#discussion_r514307097", "createdAt": "2020-10-29T14:35:00Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseService.java", "diffHunk": "@@ -320,42 +398,86 @@ private void setupTemplateAndPush(Repository repository, Resource[] resources, S\n      * @param user the user who has initiated the generation of the programming exercise\n      * @throws Exception If anything goes wrong\n      */\n-    private void setupTestTemplateAndPush(Repository repository, Resource[] resources, String prefix, String templateName, ProgrammingExercise programmingExercise, User user)\n-            throws Exception {\n+    private void setupTestTemplateAndPush(Repository repository, Resource[] resources, String prefix, Resource[] projectTypeResources, String projectTypePrefix,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07e347486f69851d6d916f827c5f014ad6867c43"}, "originalPosition": 158}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjU1ODY5OnYy", "diffSide": "RIGHT", "path": "src/test/java/de/tum/in/www1/artemis/util/ProgrammingExerciseTestService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMVrOHqe0KA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNDozNTowMVrOHqe0KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMwNzExMg==", "bodyText": "Codacy found an issue: Assigning an Object to null is a code smell.  Consider refactoring.", "url": "https://github.com/ls1intum/Artemis/pull/2278#discussion_r514307112", "createdAt": "2020-10-29T14:35:01Z", "author": {"login": "artemis-bot"}, "path": "src/test/java/de/tum/in/www1/artemis/util/ProgrammingExerciseTestService.java", "diffHunk": "@@ -212,8 +213,10 @@ public void createProgrammingExercise_mode_validExercise_created(ExerciseMode mo\n     }\n \n     // TEST\n-    public void createProgrammingExercise_programmingLanguage_validExercise_created(ProgrammingLanguage language) throws Exception {\n+    public void createProgrammingExercise_programmingLanguage_validExercise_created(ProgrammingLanguage language, ProgrammingLanguageFeature programmingLanguageFeature)\n+            throws Exception {\n         exercise.setProgrammingLanguage(language);\n+        exercise.setProjectType(programmingLanguageFeature.getProjectTypes().size() > 0 ? programmingLanguageFeature.getProjectTypes().get(0) : null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07e347486f69851d6d916f827c5f014ad6867c43"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4594, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}