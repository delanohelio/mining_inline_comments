{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NzM2ODYz", "number": 2355, "title": "Display an error when a user is not allowed to view a course", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\nWhen following a link to a course you are not enrolled in, you currently just get an empty page.\nDescription\nNow displays an error message:\n\nSteps for Testing\n\nLog in to Artemis using an account that does have access rights to a course\nNavigate to the course view page (e.g. \"https://vmbruegge60.in.tum.de/#/courses/1867/\" on TS3)\nCheck you can still access the page normally\nLog out and then in again using a different account without access rights (e.g. artemis_test_user_10 on TS3)\nTry to access the same URL (\"https://vmbruegge60.in.tum.de/#/courses/1867/\") directly (paste into browser bar)\nCheck if an error message appears", "createdAt": "2020-11-06T13:16:11Z", "url": "https://github.com/ls1intum/Artemis/pull/2355", "merged": true, "mergeCommit": {"oid": "7f9ed9b1ed4d2aaca19bed7d98bd6febfcba9a4f"}, "closed": true, "closedAt": "2020-11-10T13:19:55Z", "author": {"login": "FrankeLukas"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ2NCDgH2gAyNTE2NzM2ODYzOjc3NWYxMGMyNTY5NThkOWY2NDcxYTY5NDc1OTZiZGNjM2JhNGM3MTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbJP5bAFqTUyNzE5MjIwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719", "author": {"user": {"login": "FrankeLukas", "name": "Lukas Franke"}}, "url": "https://github.com/ls1intum/Artemis/commit/775f10c256958d9f6471a6947596bdcc3ba4c719", "committedDate": "2020-11-06T12:34:27Z", "message": "Display an error when a user is not allowed to view a course"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MjMwNDgw", "url": "https://github.com/ls1intum/Artemis/pull/2355#pullrequestreview-525230480", "createdAt": "2020-11-06T14:59:16Z", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1ODU2NDI3", "url": "https://github.com/ls1intum/Artemis/pull/2355#pullrequestreview-525856427", "createdAt": "2020-11-08T23:15:34Z", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MDE3Njc1", "url": "https://github.com/ls1intum/Artemis/pull/2355#pullrequestreview-526017675", "createdAt": "2020-11-09T08:26:24Z", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MzcyMTM1", "url": "https://github.com/ls1intum/Artemis/pull/2355#pullrequestreview-526372135", "createdAt": "2020-11-09T15:30:21Z", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozMDoyMVrOHv0NPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozMDoyMVrOHv0NPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkwMDQ3OQ==", "bodyText": "I am still not quite sure what this line does as you passed the alert service the errorMessage already.", "url": "https://github.com/ls1intum/Artemis/pull/2355#discussion_r519900479", "createdAt": "2020-11-09T15:30:21Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/course-overview.component.ts", "diffHunk": "@@ -61,12 +63,19 @@ export class CourseOverviewComponent implements OnInit, OnDestroy {\n \n     loadCourse(refresh = false) {\n         this.refreshingCourse = refresh;\n-        this.courseService.findOneForDashboard(this.courseId).subscribe((res: HttpResponse<Course>) => {\n-            this.courseCalculationService.updateCourse(res.body!);\n-            this.course = this.courseCalculationService.getCourse(this.courseId);\n-            this.adjustCourseDescription();\n-            setTimeout(() => (this.refreshingCourse = false), 500); // ensure min animation duration\n-        });\n+        this.courseService.findOneForDashboard(this.courseId).subscribe(\n+            (res: HttpResponse<Course>) => {\n+                this.courseCalculationService.updateCourse(res.body!);\n+                this.course = this.courseCalculationService.getCourse(this.courseId);\n+                this.adjustCourseDescription();\n+                setTimeout(() => (this.refreshingCourse = false), 500); // ensure min animation duration\n+            },\n+            (error: HttpErrorResponse) => {\n+                const errorMessage = error.headers.get('X-artemisApp-message')!;\n+                const jhiAlert = this.jhiAlertService.error(errorMessage);\n+                jhiAlert.msg = errorMessage;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2OTY0NjA1", "url": "https://github.com/ls1intum/Artemis/pull/2355#pullrequestreview-526964605", "createdAt": "2020-11-10T08:35:45Z", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MTkyMjAy", "url": "https://github.com/ls1intum/Artemis/pull/2355#pullrequestreview-527192202", "createdAt": "2020-11-10T13:19:42Z", "commit": {"oid": "775f10c256958d9f6471a6947596bdcc3ba4c719"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3619, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}