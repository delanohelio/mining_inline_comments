{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNjMwMDE2", "number": 1755, "title": "[Exam] Hide unnecessary navbar elements in exam mode", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\nHide unnecessary navbar elements to distract students less while participating in an exam\nSteps for Testing\n\nLog in to Artemis\nNavigate through Artemis\nMake sure the navbar stays unchanged unless you enter an exam which has already started and is not over, then it should look like in the screenshots below.\n\nScreenshots\nElements that should be hidden in exam mode:", "createdAt": "2020-06-29T20:24:47Z", "url": "https://github.com/ls1intum/Artemis/pull/1755", "merged": true, "mergeCommit": {"oid": "531ff8d0550d4e5def230098298876a9dd2a9dbe"}, "closed": true, "closedAt": "2020-07-02T22:50:41Z", "author": {"login": "balazs-czopf"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwG6DMgH2gAyNDQxNjMwMDE2OjQ2OTY0NTc3MjcyYjBlZDk3YzI2YTQ2NDY5Y2I3ZGEyOGMyZWMwYzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxGzIXgFqTQ0MjA1Njk4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "46964577272b0ed97c26a46469cb7da28c2ec0c1", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/46964577272b0ed97c26a46469cb7da28c2ec0c1", "committedDate": "2020-06-29T20:17:17Z", "message": "hide unnecessary navbar elements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd29b6c802bc8dad0907d8bb2813205a7028dd31", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/cd29b6c802bc8dad0907d8bb2813205a7028dd31", "committedDate": "2020-06-29T20:40:50Z", "message": "Merge branch 'develop' into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b96b972e8c9ae18e42707385680f5d78f83626a4", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/b96b972e8c9ae18e42707385680f5d78f83626a4", "committedDate": "2020-06-29T20:54:03Z", "message": "add check for management route"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c5907e4d664c120344f0a9c407f506aea6c2441", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/1c5907e4d664c120344f0a9c407f506aea6c2441", "committedDate": "2020-06-29T21:57:18Z", "message": "add exam active check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NTMyODEx", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-439532811", "createdAt": "2020-06-29T22:05:03Z", "commit": {"oid": "1c5907e4d664c120344f0a9c407f506aea6c2441"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMjowNTowM1rOGqj2ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMjowNTowM1rOGqj2ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI4MDgwMw==", "bodyText": "you could also check if it is already over so that its only between start and due date.", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r447280803", "createdAt": "2020-06-29T22:05:03Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.ts", "diffHunk": "@@ -126,4 +158,11 @@ export class NavbarComponent implements OnInit, OnDestroy {\n             }\n         }\n     }\n+\n+    /**\n+     * check if exam already started\n+     */\n+    examHasStarted(exam: Exam): boolean {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c5907e4d664c120344f0a9c407f506aea6c2441"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "136f3c4c1a916b7747177162fec729cd8b4a5396", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/136f3c4c1a916b7747177162fec729cd8b4a5396", "committedDate": "2020-06-30T09:54:10Z", "message": "fix undefined params issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ec4ee5e4c3963800338d46490f69dae1807a89", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/93ec4ee5e4c3963800338d46490f69dae1807a89", "committedDate": "2020-06-30T09:55:09Z", "message": "Merge branch 'develop' into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04222cde93742a5082bd6d64fca9f5f6c9936c0c", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/04222cde93742a5082bd6d64fca9f5f6c9936c0c", "committedDate": "2020-06-30T10:42:29Z", "message": "a little bit of refactoring in my life"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f06c21d3d70052f0e3abc2a7154426f2e53b16d7", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/f06c21d3d70052f0e3abc2a7154426f2e53b16d7", "committedDate": "2020-06-30T10:43:01Z", "message": "a little bit of refactoring by my side"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65e4024587e46b2db1e7c162242f91cbe4d2553f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/65e4024587e46b2db1e7c162242f91cbe4d2553f", "committedDate": "2020-06-30T10:43:08Z", "message": "Merge branch 'exam-mode/client/hide-unnecessary-navbar-elements' of https://github.com/ls1intum/Artemis into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c753ae6b91d8689ce97c9a2fe02bf70d62bae82f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/c753ae6b91d8689ce97c9a2fe02bf70d62bae82f", "committedDate": "2020-06-30T10:50:23Z", "message": "a little bit of refactoring is all i need"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5OTMwODE1", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-439930815", "createdAt": "2020-06-30T11:42:01Z", "commit": {"oid": "c753ae6b91d8689ce97c9a2fe02bf70d62bae82f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMTo0MjowMVrOGq4bjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMTo0MjowMVrOGq4bjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzYxNzkzMg==", "bodyText": "Instead of passing it to each method you could just check this.exam since it is the object which you pass to them, otherwise the code looks good to me \ud83d\udc4d", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r447617932", "createdAt": "2020-06-30T11:42:01Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.ts", "diffHunk": "@@ -126,4 +154,25 @@ export class NavbarComponent implements OnInit, OnDestroy {\n             }\n         }\n     }\n+\n+    /**\n+     * check if exam already started\n+     */\n+    examHasStarted(exam?: Exam): boolean {\n+        return exam?.startDate ? exam.startDate.isBefore(this.serverDateService.now()) : false;\n+    }\n+\n+    /**\n+     * check if exam is over\n+     */\n+    examIsOver(exam?: Exam): boolean {\n+        return exam?.endDate ? exam.endDate.isBefore(this.serverDateService.now()) : true;\n+    }\n+\n+    /**\n+     * check if exam mode is active\n+     */\n+    examModeActive(exam?: Exam): boolean {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c753ae6b91d8689ce97c9a2fe02bf70d62bae82f"}, "originalPosition": 84}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92e227db2a426b988588242406f977894227bb55", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/92e227db2a426b988588242406f977894227bb55", "committedDate": "2020-06-30T11:55:36Z", "message": "a little bit of refactoring is all i see"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5OTcxOTYx", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-439971961", "createdAt": "2020-06-30T12:40:39Z", "commit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMDQxOTY2", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440041966", "createdAt": "2020-06-30T13:57:42Z", "commit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMzo1Nzo0M1rOGq9qgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMzo1Nzo0M1rOGq9qgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcwMzY4Mw==", "bodyText": "Just out of interest. Why do you put it on the a element and not on the li element?", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r447703683", "createdAt": "2020-06-30T13:57:43Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.html", "diffHunk": "@@ -37,7 +37,7 @@\n                 routerLinkActive=\"active\"\n                 [routerLinkActiveOptions]=\"{ exact: true }\"\n             >\n-                <a class=\"guided-tour-course-admin nav-link\" routerLink=\"course-management\" (click)=\"collapseNavbar()\" id=\"course-admin-menu\">\n+                <a *ngIf=\"!examModeActive()\" class=\"guided-tour-course-admin nav-link\" routerLink=\"course-management\" (click)=\"collapseNavbar()\" id=\"course-admin-menu\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMDQ3NzU1", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440047755", "createdAt": "2020-06-30T14:03:20Z", "commit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDowMzoyMFrOGq97wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDowMzoyMFrOGq97wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcwODA5Ng==", "bodyText": "I am not an Angular Expert but this whole part seems extremely brittle. Anybody got an idea how to do this whole part in a more robust way than regexing and splitting?", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r447708096", "createdAt": "2020-06-30T14:03:20Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.ts", "diffHunk": "@@ -64,12 +73,31 @@ export class NavbarComponent implements OnInit, OnDestroy {\n             .getAuthenticationState()\n             .pipe(tap((user: User) => (this.currAccount = user)))\n             .subscribe();\n+\n+        this.routerEventSubscription = this.router.events.subscribe((event) => {\n+            if (event instanceof NavigationEnd) {\n+                this.exam = undefined;\n+                const examRoute = new RegExp('exams/[0-9]');\n+                if (examRoute.test(event.url) && !event.url.includes('management')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMDQ5NzM2", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440049736", "createdAt": "2020-06-30T14:05:18Z", "commit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDowNToxOVrOGq-BgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNDowNToxOVrOGq-BgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcwOTU2OQ==", "bodyText": "Activated Route is defined but never used", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r447709569", "createdAt": "2020-06-30T14:05:19Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.ts", "diffHunk": "@@ -15,6 +15,10 @@ import { ParticipationWebsocketService } from 'app/overview/participation-websoc\n import { AccountService } from 'app/core/auth/account.service';\n import { ProfileService } from 'app/shared/layouts/profiles/profile.service';\n import { LoginService } from 'app/core/login/login.service';\n+import { Router, NavigationEnd, ActivatedRoute } from '@angular/router';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92e227db2a426b988588242406f977894227bb55"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80bf4f974e6a81896a376c06780d8220de1f8997", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/80bf4f974e6a81896a376c06780d8220de1f8997", "committedDate": "2020-06-30T14:21:46Z", "message": "remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMTMwMDc2", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440130076", "createdAt": "2020-06-30T15:24:15Z", "commit": {"oid": "80bf4f974e6a81896a376c06780d8220de1f8997"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMTc4ODQ0", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440178844", "createdAt": "2020-06-30T16:16:41Z", "commit": {"oid": "80bf4f974e6a81896a376c06780d8220de1f8997"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNjoxNjo0MVrOGrEFYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNjoxNjo0MVrOGrEFYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzgwODg2NA==", "bodyText": "Can this be done in one check? (something like this?)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**\n          \n          \n            \n                 * check if exam already started\n          \n          \n            \n                 */\n          \n          \n            \n                examHasStarted(): boolean {\n          \n          \n            \n                    return this.exam?.startDate ? this.exam.startDate.isBefore(this.serverDateService.now()) : false;\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                /**\n          \n          \n            \n                 * check if exam is over\n          \n          \n            \n                 */\n          \n          \n            \n                examIsOver(): boolean {\n          \n          \n            \n                    return this.exam?.endDate ? this.exam.endDate.isBefore(this.serverDateService.now()) : true;\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                /**\n          \n          \n            \n                 * check if exam mode is active\n          \n          \n            \n                 */\n          \n          \n            \n                examModeActive(): boolean {\n          \n          \n            \n                    return this.examHasStarted() && !this.examIsOver();\n          \n          \n            \n                /**\n          \n          \n            \n                 * check if exam mode is active\n          \n          \n            \n                 */\n          \n          \n            \n                get examModeActive(): boolean {\n          \n          \n            \n                    if (this.exam && this.exam.startDate && this.exam.endDate) {\n          \n          \n            \n                        return this.serverDateService.now().isBetween(this.exam.startDate, this.exam.endDate);\n          \n          \n            \n                    }\n          \n          \n            \n                    return false;\n          \n          \n            \n                }\n          \n      \n    \n    \n  \n\n(Also, this could maybe be a getter.)", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r447808864", "createdAt": "2020-06-30T16:16:41Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.ts", "diffHunk": "@@ -126,4 +154,25 @@ export class NavbarComponent implements OnInit, OnDestroy {\n             }\n         }\n     }\n+\n+    /**\n+     * check if exam already started\n+     */\n+    examHasStarted(): boolean {\n+        return this.exam?.startDate ? this.exam.startDate.isBefore(this.serverDateService.now()) : false;\n+    }\n+\n+    /**\n+     * check if exam is over\n+     */\n+    examIsOver(): boolean {\n+        return this.exam?.endDate ? this.exam.endDate.isBefore(this.serverDateService.now()) : true;\n+    }\n+\n+    /**\n+     * check if exam mode is active\n+     */\n+    examModeActive(): boolean {\n+        return this.examHasStarted() && !this.examIsOver();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80bf4f974e6a81896a376c06780d8220de1f8997"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMjA3ODcz", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440207873", "createdAt": "2020-06-30T16:51:57Z", "commit": {"oid": "80bf4f974e6a81896a376c06780d8220de1f8997"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66304534093453077cd5184300629232f4529ea2", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/66304534093453077cd5184300629232f4529ea2", "committedDate": "2020-07-01T06:55:04Z", "message": "Merge branch 'develop' into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d9bac9fe71323983902c896758fa310f6d4abb", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/67d9bac9fe71323983902c896758fa310f6d4abb", "committedDate": "2020-07-01T08:58:08Z", "message": "refactor methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5ddeffd45dd401afd318315e763649ce08e4572", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/f5ddeffd45dd401afd318315e763649ce08e4572", "committedDate": "2020-07-01T09:35:01Z", "message": "fix elements not being hidden on reload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6b2566811948e91c1d651958f949c65f2626cbe", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/b6b2566811948e91c1d651958f949c65f2626cbe", "committedDate": "2020-07-01T09:36:58Z", "message": "Merge branch 'develop' into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNzgzNTUw", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-440783550", "createdAt": "2020-07-01T11:28:26Z", "commit": {"oid": "b6b2566811948e91c1d651958f949c65f2626cbe"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTMwMTQx", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-441130141", "createdAt": "2020-07-01T19:10:24Z", "commit": {"oid": "b6b2566811948e91c1d651958f949c65f2626cbe"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTU4NzY2", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-441158766", "createdAt": "2020-07-01T19:59:35Z", "commit": {"oid": "b6b2566811948e91c1d651958f949c65f2626cbe"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTY3MjMy", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-441167232", "createdAt": "2020-07-01T20:14:33Z", "commit": {"oid": "b6b2566811948e91c1d651958f949c65f2626cbe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDoxNDozM1rOGrz7fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDoxNDozM1rOGrz7fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU5Mjc2Nw==", "bodyText": "Please do not load the exam from the server in the navbar! This is a really bad idea!!!\nAlso the method name is confusing, because the outer method only subscribes for router changes.\nOnly the inner one actually loads the exam, so I suggest to extract the inner method and rename the outer one!\nI would suggest that we add some kind of examService that holds the currently visible exams (they are e.g. loaded by the courses for dashboard REST call or when students navigate into the exam. This could then notify the navbar, when an exam is available. The navbar then does not need to load it from the server!", "url": "https://github.com/ls1intum/Artemis/pull/1755#discussion_r448592767", "createdAt": "2020-07-01T20:14:33Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/shared/layouts/navbar/navbar.component.ts", "diffHunk": "@@ -126,4 +141,40 @@ export class NavbarComponent implements OnInit, OnDestroy {\n             }\n         }\n     }\n+\n+    loadExamIfAvailable() {\n+        this.routerEventSubscription = this.router.events.pipe(filter((event: RouterEvent) => event instanceof NavigationEnd)).subscribe((event) => {\n+            this.exam = undefined;\n+            if (event.url.includes('exams') && !event.url.includes('management')) {\n+                const routePathParams = of(event).pipe(\n+                    map(() => this.route.root),\n+                    map((root) => root.firstChild),\n+                    switchMap((firstChild) => {\n+                        if (firstChild) {\n+                            return firstChild?.paramMap.pipe(map((paramMap) => [paramMap.get('courseId'), paramMap.get('examId')]));\n+                        } else {\n+                            return of(null);\n+                        }\n+                    }),\n+                );\n+                routePathParams.subscribe((param) => {\n+                    if (param !== null) {\n+                        if (param[0] !== null && param[1] !== null) {\n+                            this.examParticipationService.loadExam(+param[0], +param[1]).subscribe((loadedExam) => (this.exam = loadedExam));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6b2566811948e91c1d651958f949c65f2626cbe"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e264fbbc0ef43e6eec4ff21ca8fc22f34967429", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/3e264fbbc0ef43e6eec4ff21ca8fc22f34967429", "committedDate": "2020-07-02T18:40:46Z", "message": "refactoring once again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "473bb64d92d393d03ed58e8a8a3bb50287479605", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/473bb64d92d393d03ed58e8a8a3bb50287479605", "committedDate": "2020-07-02T18:44:39Z", "message": "Merge branch 'develop' into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTY0NDAx", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-441964401", "createdAt": "2020-07-02T19:24:34Z", "commit": {"oid": "473bb64d92d393d03ed58e8a8a3bb50287479605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTg3NzU3", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-441987757", "createdAt": "2020-07-02T20:07:30Z", "commit": {"oid": "473bb64d92d393d03ed58e8a8a3bb50287479605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd66756a6261342102144d5f6d6e46d1c93b56c4", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/cd66756a6261342102144d5f6d6e46d1c93b56c4", "committedDate": "2020-07-02T21:18:13Z", "message": "Merge branch 'develop' into exam-mode/client/hide-unnecessary-navbar-elements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDU2OTg0", "url": "https://github.com/ls1intum/Artemis/pull/1755#pullrequestreview-442056984", "createdAt": "2020-07-02T22:43:39Z", "commit": {"oid": "cd66756a6261342102144d5f6d6e46d1c93b56c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2573, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}