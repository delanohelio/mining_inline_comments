{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNjE4NDM1", "number": 2586, "title": "Enhancements/user statistics", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I followed the coding and design guidelines.\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I followed the coding and design guidelines.\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\n\n\nTest data should not be considered in the charts, because this is not valid data. Also, a view-type between month and year displaying in weekly spans would be nice, because instructors usually plan in weeks.\nDescription\n\nAdds a new Tab named Quarter (Quartal) and removes the data from test courses.\nTest Coverage\nStatisticsResource.java: 100%\nStatisticsService.java: 91%\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to Server Administration -> User statistics\nFocus on the Quartal tab\nMake sure no initial error are thrown\nKeep in mind the values for the important bars\nCreate/participate/assess exams/exercises and make sure the corresponding bars in the charts change in the wanted way\nDeclare your course a test course and make sure the data is the same as in step 3.\n\nScreenshots", "createdAt": "2020-12-21T17:15:31Z", "url": "https://github.com/ls1intum/Artemis/pull/2586", "merged": true, "mergeCommit": {"oid": "525188887453da211fd10b0eb8dec702fe187fc2"}, "closed": true, "closedAt": "2020-12-29T20:39:12Z", "author": {"login": "FuchsDominik"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdn_tOfAH2gAyNTQzNjE4NDM1Ojc3MjQ3NGE2ZDJiNDU5ZDZiYjZlNmRlOGNkMWFiYWMwNDViYTc1MmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrAwY9AFqTU1OTY4OTMwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "772474a6d2b459d6bb6e6de8cd1abac045ba752b", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/772474a6d2b459d6bb6e6de8cd1abac045ba752b", "committedDate": "2020-12-20T11:33:42Z", "message": "removed test data from queries and add new weeks tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8940aabe7d0a7a43e77dfcedf030f272b0fd61a", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/b8940aabe7d0a7a43e77dfcedf030f272b0fd61a", "committedDate": "2020-12-20T11:34:12Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ff84d89146e339deafe6a1696aa23cc647c3658", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/6ff84d89146e339deafe6a1696aa23cc647c3658", "committedDate": "2020-12-22T15:43:51Z", "message": "finalized changes, testing tbd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd400b99d222890d4682ae812b1e00fe9428438c", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/fd400b99d222890d4682ae812b1e00fe9428438c", "committedDate": "2020-12-22T15:44:18Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da92668da5dae3eb2c5b7b9586e17416def1d579", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/da92668da5dae3eb2c5b7b9586e17416def1d579", "committedDate": "2020-12-22T16:49:52Z", "message": "changed to Quarter instead of calendar week"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca076c6a407015d64d656ec778ab0af1c83c3dbd", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/ca076c6a407015d64d656ec778ab0af1c83c3dbd", "committedDate": "2020-12-23T15:13:21Z", "message": "removed problem with year change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e56e1c1cb1e312ff2f9be71a1e1e0b48567de1f5", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/e56e1c1cb1e312ff2f9be71a1e1e0b48567de1f5", "committedDate": "2020-12-23T15:13:44Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc2e41460b84bd3bdbd92c7ba769a0c91dd1516f", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/bc2e41460b84bd3bdbd92c7ba769a0c91dd1516f", "committedDate": "2020-12-28T15:46:53Z", "message": "tried different week calculation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "142da792eb76c167204fd4db75adabacbd35cc79", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/142da792eb76c167204fd4db75adabacbd35cc79", "committedDate": "2020-12-28T15:47:21Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/301f5195b97d5cc02e025f948bf0dfb0bf2e09ed", "committedDate": "2020-12-28T16:15:47Z", "message": "worked, remove old week calculation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjE3NjM3", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559217637", "createdAt": "2020-12-28T16:39:58Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjE3NjQ2", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559217646", "createdAt": "2020-12-28T16:39:59Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjE3NjQ5", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559217649", "createdAt": "2020-12-28T16:39:59Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjE3ODM4", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559217838", "createdAt": "2020-12-28T16:40:31Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjE3OTQ5", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559217949", "createdAt": "2020-12-28T16:40:50Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjE4MDYw", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559218060", "createdAt": "2020-12-28T16:41:10Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Mjk3OTUz", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559297953", "createdAt": "2020-12-28T20:49:52Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NDE2OTk4", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559416998", "createdAt": "2020-12-29T07:58:30Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NDY5OTU3", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559469957", "createdAt": "2020-12-29T10:27:32Z", "commit": {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/07fdd0a2146ccce6bb64ad18f362f56f993ce9e7", "committedDate": "2020-12-29T10:55:46Z", "message": "Merge branch 'develop' into enhancements/user-statistics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NDgwNTQ0", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559480544", "createdAt": "2020-12-29T10:56:27Z", "commit": {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NTE5NjEy", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559519612", "createdAt": "2020-12-29T12:53:53Z", "commit": {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NTIxNzAz", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559521703", "createdAt": "2020-12-29T12:59:47Z", "commit": {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NTIyMTQ1", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559522145", "createdAt": "2020-12-29T13:01:00Z", "commit": {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzowMTowMVrOIMOx3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxMzowMTowMVrOIMOx3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY5NTk2Nw==", "bodyText": "This should default to 0 instead of null since we can't add null:\nInteger amount = map.get(\"amount\") != null ? ((Long) map.get(\"amount\")).intValue() : 0;\n(When this is null it gives me a NullPointerException in line 228.)", "url": "https://github.com/ls1intum/Artemis/pull/2586#discussion_r549695967", "createdAt": "2020-12-29T13:01:01Z", "author": {"login": "FrankeLukas"}, "path": "src/main/java/de/tum/in/www1/artemis/service/StatisticsService.java", "diffHunk": "@@ -196,6 +208,30 @@ public StatisticsService(StatisticsRepository statisticsRepository) {\n         return result;\n     }\n \n+    /**\n+     * Gets a list of maps, each map describing an entry in the database. The map has the two keys \"day\" and \"amount\",\n+     * which map to the date and the amount of the findings. This method handles the spanType WEEKS_ORDERED\n+     *\n+     * @param outcome A List<Map<String, Object>>, containing the content which should be refactored into an array\n+     * @param result the array in which the converted outcome should be inserted\n+     * @param endDate the endDate\n+     * @return an array, containing the values for each bar in the graph\n+     */\n+    private Integer[] createResultArrayForQuarter(List<Map<String, Object>> outcome, Integer[] result, ZonedDateTime endDate) {\n+        int week;\n+        for (Map<String, Object> map : outcome) {\n+            ZonedDateTime date = (ZonedDateTime) map.get(\"day\");\n+            Integer amount = map.get(\"amount\") != null ? ((Long) map.get(\"amount\")).intValue() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70b2059f1579ad8b830ed534bc3264130d3176ae", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/70b2059f1579ad8b830ed534bc3264130d3176ae", "committedDate": "2020-12-29T14:44:27Z", "message": "added first server tests and added CW and KW for labels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50b5e6b108b880de4ae4e5e4f1c15c6bfc66a77b", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/50b5e6b108b880de4ae4e5e4f1c15c6bfc66a77b", "committedDate": "2020-12-29T14:44:49Z", "message": "Merge branch 'enhancements/user-statistics' of https://github.com/ls1intum/Artemis into enhancements/user-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "432262fedbd5d1480e4a3b96ea38934be3d219da", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/432262fedbd5d1480e4a3b96ea38934be3d219da", "committedDate": "2020-12-29T15:26:19Z", "message": "Codacy and pr review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NjM1MDk0", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559635094", "createdAt": "2020-12-29T17:40:44Z", "commit": {"oid": "432262fedbd5d1480e4a3b96ea38934be3d219da"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NjQ1ODU4", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559645858", "createdAt": "2020-12-29T18:11:56Z", "commit": {"oid": "432262fedbd5d1480e4a3b96ea38934be3d219da"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6a3a3b56ec436bc4d5c1493087d2d4fb0f730a6", "author": {"user": {"login": "FuchsDominik", "name": "Dominik Fuchs"}}, "url": "https://github.com/ls1intum/Artemis/commit/e6a3a3b56ec436bc4d5c1493087d2d4fb0f730a6", "committedDate": "2020-12-29T18:14:31Z", "message": "Server tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/4174bf623a916f91d0eb94a699f990586d8e91dc", "committedDate": "2020-12-29T18:52:53Z", "message": "Merge branch 'develop' into enhancements/user-statistics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg3NjI2", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559687626", "createdAt": "2020-12-29T20:22:50Z", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg3NzI0", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559687724", "createdAt": "2020-12-29T20:23:12Z", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg3OTM5", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559687939", "createdAt": "2020-12-29T20:23:59Z", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg4ODQw", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559688840", "createdAt": "2020-12-29T20:27:14Z", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg5MTk5", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559689199", "createdAt": "2020-12-29T20:28:30Z", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg5MzAz", "url": "https://github.com/ls1intum/Artemis/pull/2586#pullrequestreview-559689303", "createdAt": "2020-12-29T20:28:50Z", "commit": {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3503, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}