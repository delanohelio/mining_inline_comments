{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4Nzg4MTg2", "number": 2380, "title": "Actions: Split Workflows into Build, Test and Docs", "bodyText": "Split up build.yml into\n\nbuild.yml,\ntest.yml, and\ndocs.yml.\n\nThis allows using the Test server action to deploy even though tests are still running.\nAlso, bump workflow dependency to include fix in ashley-taylor/junit-report-annotations-action#16.", "createdAt": "2020-11-10T21:57:10Z", "url": "https://github.com/ls1intum/Artemis/pull/2380", "merged": true, "mergeCommit": {"oid": "4343a86da844a9c3e87813785a9500b8844efed3"}, "closed": true, "closedAt": "2020-11-11T20:08:20Z", "author": {"login": "jpbernius"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbgA3hAFqTUyODI5NjE5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbjPjDgH2gAyNTE4Nzg4MTg2OmEzYTAyOTg5MmM2ODE0ZjY4Y2I4MWMyYmI4NTRkOWM0MTQ4MzRlNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Mjk2MTk0", "url": "https://github.com/ls1intum/Artemis/pull/2380#pullrequestreview-528296194", "createdAt": "2020-11-11T15:49:51Z", "commit": {"oid": "2a27ad2b9f4baf1d701231eeb7d2abc2232c7b1c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTo0OTo1MlrOHxS97A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNTo1MDozMFrOHxS_xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ1MzAzNg==", "bodyText": "Can we move Spotless and Checkstyle in front of the testing step? I think we should fail fast here in case something is wrong because the tests take a lot more time to run through.", "url": "https://github.com/ls1intum/Artemis/pull/2380#discussion_r521453036", "createdAt": "2020-11-11T15:49:52Z", "author": {"login": "kloessst"}, "path": ".github/workflows/test.yml", "diffHunk": "@@ -0,0 +1,105 @@\n+name: Test\n+\n+on:\n+  pull_request:\n+  push:\n+    branches:\n+    - develop\n+    - main\n+    tags: '[0-9]+.[0-9]+.[0-9]+'\n+    paths-ignore:\n+    - 'README.md'\n+    - 'CODE_OF_CONDUCT.md'\n+    - 'CONTRIBUTING.md'\n+    - 'LICENSE'\n+    - 'SECURITY.md'\n+    - 'docs/**'\n+    - '.github/**'\n+    - '!.github/workflows/test.yml'\n+  release:\n+    types:\n+    - created\n+\n+# Keep in sync with codeql-analysis.yml and build.yml\n+env:\n+  CI: true\n+  node: 14.x\n+  java: 15\n+\n+jobs:\n+\n+  server-tests:\n+    if: github.event_name != 'release'\n+    runs-on: ubuntu-latest\n+    steps:\n+    - name: Setup Java\n+      uses: actions/setup-java@v1\n+      with:\n+        java-version: '${{ env.java }}'\n+    - uses: actions/checkout@v2\n+    - name: Cache Gradle dependencies\n+      uses: actions/cache@v2\n+      with:\n+        path: ~/.gradle/caches\n+        key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle') }}\n+        restore-keys: |\n+          ${{ runner.os }}-gradle-\n+    - name: Java Tests\n+      run: ./gradlew --console=plain executeTests jacocoTestReport -x yarn -x webpack jacocoTestCoverageVerification\n+    - name: \"Codacy: Report coverage\"\n+      uses: codacy/codacy-coverage-reporter-action@master\n+      with:\n+        project-token: ${{ secrets.CODACY_PROJECT_TOKEN }}\n+        coverage-reports: build/reports/jacoco/test/jacocoTestReport.xml\n+      if: (github.event.pull_request.head.repo.full_name == github.event.pull_request.base.repo.full_name) && (success() || failure())\n+    - name: Java Code Style\n+      run: ./gradlew spotlessCheck\n+      if: success() || failure()\n+    - name: Java Documentation\n+      run: ./gradlew checkstyleMain -x yarn -x webpack\n+      if: success() || failure()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a27ad2b9f4baf1d701231eeb7d2abc2232c7b1c"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ1MzUxMA==", "bodyText": "Same suggestion as with the server test.", "url": "https://github.com/ls1intum/Artemis/pull/2380#discussion_r521453510", "createdAt": "2020-11-11T15:50:30Z", "author": {"login": "kloessst"}, "path": ".github/workflows/test.yml", "diffHunk": "@@ -0,0 +1,105 @@\n+name: Test\n+\n+on:\n+  pull_request:\n+  push:\n+    branches:\n+    - develop\n+    - main\n+    tags: '[0-9]+.[0-9]+.[0-9]+'\n+    paths-ignore:\n+    - 'README.md'\n+    - 'CODE_OF_CONDUCT.md'\n+    - 'CONTRIBUTING.md'\n+    - 'LICENSE'\n+    - 'SECURITY.md'\n+    - 'docs/**'\n+    - '.github/**'\n+    - '!.github/workflows/test.yml'\n+  release:\n+    types:\n+    - created\n+\n+# Keep in sync with codeql-analysis.yml and build.yml\n+env:\n+  CI: true\n+  node: 14.x\n+  java: 15\n+\n+jobs:\n+\n+  server-tests:\n+    if: github.event_name != 'release'\n+    runs-on: ubuntu-latest\n+    steps:\n+    - name: Setup Java\n+      uses: actions/setup-java@v1\n+      with:\n+        java-version: '${{ env.java }}'\n+    - uses: actions/checkout@v2\n+    - name: Cache Gradle dependencies\n+      uses: actions/cache@v2\n+      with:\n+        path: ~/.gradle/caches\n+        key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle') }}\n+        restore-keys: |\n+          ${{ runner.os }}-gradle-\n+    - name: Java Tests\n+      run: ./gradlew --console=plain executeTests jacocoTestReport -x yarn -x webpack jacocoTestCoverageVerification\n+    - name: \"Codacy: Report coverage\"\n+      uses: codacy/codacy-coverage-reporter-action@master\n+      with:\n+        project-token: ${{ secrets.CODACY_PROJECT_TOKEN }}\n+        coverage-reports: build/reports/jacoco/test/jacocoTestReport.xml\n+      if: (github.event.pull_request.head.repo.full_name == github.event.pull_request.base.repo.full_name) && (success() || failure())\n+    - name: Java Code Style\n+      run: ./gradlew spotlessCheck\n+      if: success() || failure()\n+    - name: Java Documentation\n+      run: ./gradlew checkstyleMain -x yarn -x webpack\n+      if: success() || failure()\n+    - uses: ashley-taylor/junit-report-annotations-action@9ac2f823854c677f30e062dfe779445e33e5d380\n+      if: always()\n+      with:\n+        access-token: ${{ secrets.GITHUB_TOKEN }}\n+        path: build/test-results/test/*.xml\n+        numFailures: 99\n+\n+  client-tests:\n+    if: github.event_name != 'release'\n+    runs-on: ubuntu-latest\n+    steps:\n+    - name: Setup Node.js\n+      uses: actions/setup-node@v1\n+      with:\n+        node-version: '${{ env.node }}'\n+    - uses: actions/checkout@v2\n+    - name: Cache node modules\n+      uses: actions/cache@v2\n+      with:\n+        path: node_modules\n+        key: ${{ runner.os }}-node_modules-${{ hashFiles('**/yarn.lock') }}\n+        restore-keys: |\n+          ${{ runner.os }}-node_modules-\n+    - name: Install Dependencies\n+      run: yarn install\n+    - name: TypeScript Tests\n+      run: yarn test:coverage --ci\n+    - name: \"Codacy: Report coverage\"\n+      uses: codacy/codacy-coverage-reporter-action@master\n+      with:\n+          project-token: ${{ secrets.CODACY_PROJECT_TOKEN }}\n+          coverage-reports: coverage/lcov.info\n+      if: (github.event.pull_request.head.repo.full_name == github.event.pull_request.base.repo.full_name) && (success() || failure())\n+    - name: TypeScript Formatting\n+      run: yarn prettier:check\n+      if: success() || failure()\n+    - name: TypeScript Code Style\n+      run: yarn lint\n+      if: success() || failure()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a27ad2b9f4baf1d701231eeb7d2abc2232c7b1c"}, "originalPosition": 99}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7249cc555bfcb21fa2841677f928ceb5575b7270", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/7249cc555bfcb21fa2841677f928ceb5575b7270", "committedDate": "2020-11-11T19:35:20Z", "message": "Split build/test/docs\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ff891d3a20acebdd9b08a042ee39a140aa11e4a", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/2ff891d3a20acebdd9b08a042ee39a140aa11e4a", "committedDate": "2020-11-11T19:35:20Z", "message": "Bump Junit annotionss action\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa0c31cb8ac6f363df98d5a30891856ef81fa44a", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/fa0c31cb8ac6f363df98d5a30891856ef81fa44a", "committedDate": "2020-11-11T19:35:21Z", "message": "Rename new Workflows\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59abbb635d49c23f46e46d8234e3d725a772dc32", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/59abbb635d49c23f46e46d8234e3d725a772dc32", "committedDate": "2020-11-11T19:35:21Z", "message": "Fix Cut/Paste mistake\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cea31ea0f5e306dd230e80c4a53ce9ac0620cdd", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/2cea31ea0f5e306dd230e80c4a53ce9ac0620cdd", "committedDate": "2020-11-11T19:35:21Z", "message": "Separate Tests & Documentation\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a27ad2b9f4baf1d701231eeb7d2abc2232c7b1c", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/2a27ad2b9f4baf1d701231eeb7d2abc2232c7b1c", "committedDate": "2020-11-10T22:25:02Z", "message": "Merge branch 'develop' into actions/split-workflowss"}, "afterCommit": {"oid": "2cea31ea0f5e306dd230e80c4a53ce9ac0620cdd", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/2cea31ea0f5e306dd230e80c4a53ce9ac0620cdd", "committedDate": "2020-11-11T19:35:21Z", "message": "Separate Tests & Documentation\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3a029892c6814f68cb81c2bb854d9c414834e61", "author": {"user": {"login": "jpbernius", "name": "Jan Philip Bernius"}}, "url": "https://github.com/ls1intum/Artemis/commit/a3a029892c6814f68cb81c2bb854d9c414834e61", "committedDate": "2020-11-11T19:36:51Z", "message": "Remove unneeded success || failure\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3643, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}