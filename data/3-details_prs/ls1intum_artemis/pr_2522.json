{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0Njk4MzUx", "number": 2522, "title": "Improve plagiarism detection for programming exercises", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I followed the coding and design guidelines.\n Server: I added multiple integration tests (Spring) related to the features (with a high test coverage)\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I followed the coding and design guidelines.\n Client: I added multiple integration tests (Jest) related to the features (with a high test coverage)\n Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nThis PR adds the possibility to inspect the plagiarism detection results for programming exercises in the Artemis client.\nDescription\nCurrently, improved plagiarism detection is available for text and modeling exercises only. This PR adds the new plagiarism workflow to programming exercises, making it easier for instructors to inspect and compare similar programming submissions.\nFor now, we want to keep the possibility to download the report generated by JPlag. To generate and download the JPlag report instead of using the improved plagiarism inspection workflow, users can check the option 'Generate JPlag Report' before clicking on 'Check Plagiarism'.\nSteps for Testing\nTo properly test this PR, you need a programming exercise with at least two similar submissions.\n\nLog in to Artemis\nNavigate to Course Administration\nSelect a course\nGo to Exercises\nNavigate to the details page of a programming exercise by clicking 'View'\nClick 'Check Plagiarism'\n\nYou should now see the plagiarism page for programming exercises. Make sure the following works:\n\nClicking on 'Check Plagiarism' triggers the plagiarism detection and displays the result when it's done\nFor programming exercises, the option 'Generate JPlag Report' should be visible and unchecked by default\nAfter the results are available, the first match is selected and the file contents of both submissions are displayed correctly\nClicking on the split pane header (currently selected file) opens the file list for the given submission\nSelecting a file from the file list updates the split pane content accordingly\nWhen the option  'Generate JPlag Report' is checked, clicking on 'Check Plagiarism' should download a ZIP file with the JPlag report instead\n\nTest Coverage\n\n\n\nScreenshots", "createdAt": "2020-12-08T20:17:46Z", "url": "https://github.com/ls1intum/Artemis/pull/2522", "merged": true, "mergeCommit": {"oid": "3a86668dfe3e732ac6df917563907d53fd5996fb"}, "closed": true, "closedAt": "2020-12-17T10:01:23Z", "author": {"login": "philippbauch"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkMLp7AH2gAyNTM0Njk4MzUxOjdiNjJmOWNhMzY1MjRmNTgxZDQ1NmZhYzNkOWUwMjdhMTNmODdkMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdm_DwogH2gAyNTM0Njk4MzUxOjQyYzE1MzAwZmRhYTE4YTQyYzUyNWQ0YmQzNzRjNjgwMTdhYzJlMjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b62f9ca36524f581d456fac3d9e027a13f87d14", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/7b62f9ca36524f581d456fac3d9e027a13f87d14", "committedDate": "2020-12-08T15:50:06Z", "message": "Add plagiarism route for programming exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b19d703ea39d8c3c4910a8bf5dc1439f2e4cfa6d", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/b19d703ea39d8c3c4910a8bf5dc1439f2e4cfa6d", "committedDate": "2020-12-12T18:30:11Z", "message": "Merge branch 'develop' into feature/improved-programming-plagiarism-detection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9de72085164b45b785318e5c96d30b3ef6f9d5d", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/e9de72085164b45b785318e5c96d30b3ef6f9d5d", "committedDate": "2020-12-13T20:51:34Z", "message": "Return TextPlagiarismResult for programming exercise from server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e6559eb455cc07140f02de2348af007a67161d9", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/6e6559eb455cc07140f02de2348af007a67161d9", "committedDate": "2020-12-14T13:32:57Z", "message": "Fix sorting when plagiarism results are available"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a5ea8c1f5da6b246632dc1f5c435669438af6c4", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/3a5ea8c1f5da6b246632dc1f5c435669438af6c4", "committedDate": "2020-12-14T13:40:07Z", "message": "Remove console.log statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf3d47184d402d97bdefee24bd52b5132e37237a", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/cf3d47184d402d97bdefee24bd52b5132e37237a", "committedDate": "2020-12-14T14:27:53Z", "message": "Add split pane header component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f84e90d03b710d7607e070ac910ccaad15aac08", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/6f84e90d03b710d7607e070ac910ccaad15aac08", "committedDate": "2020-12-14T15:26:10Z", "message": "Show files in split pane header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1f1415c7566d6ac9498df5d3380093cf8d389d", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/ab1f1415c7566d6ac9498df5d3380093cf8d389d", "committedDate": "2020-12-14T15:54:44Z", "message": "Add plagiarism submission viewer component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9875df4e158344b8fcc62478826937a95fc010a", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/b9875df4e158344b8fcc62478826937a95fc010a", "committedDate": "2020-12-14T16:06:43Z", "message": "Fix split pane overflow issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea4d6ae4e43a8450f5ac90b4fae3cf168697e208", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/ea4d6ae4e43a8450f5ac90b4fae3cf168697e208", "committedDate": "2020-12-14T16:47:12Z", "message": "Select active file from split pane header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ee25418696dc959d3ea72bbb06f7243c01d8f97", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/5ee25418696dc959d3ea72bbb06f7243c01d8f97", "committedDate": "2020-12-14T17:18:18Z", "message": "Fix rotated chevron icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ad2c5fa13ab21a365078f5f049233dfa58e7b8a", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/0ad2c5fa13ab21a365078f5f049233dfa58e7b8a", "committedDate": "2020-12-14T19:30:57Z", "message": "Include participation id in local repo path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a81b5b190e13e8e8ddc614aeb225ac7e7e769578", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/a81b5b190e13e8e8ddc614aeb225ac7e7e769578", "committedDate": "2020-12-14T19:32:05Z", "message": "Fix cleanup of template repo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d34509cf7a576e41fd308e91628fb23d8fba242d", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/d34509cf7a576e41fd308e91628fb23d8fba242d", "committedDate": "2020-12-14T19:49:20Z", "message": "Display actual file contents in split panes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10bf03b31c5cecc605afe20e2f70f7a4ae486144", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/10bf03b31c5cecc605afe20e2f70f7a4ae486144", "committedDate": "2020-12-14T20:02:25Z", "message": "Fix white-space wrap of text submission viewer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8250312d212ce1a33de40046a9eb49fed68ff85", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/e8250312d212ce1a33de40046a9eb49fed68ff85", "committedDate": "2020-12-15T21:59:16Z", "message": "Add checkbox to generate JPlag report"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "416be82f5973399d10bd7d133f7189c7021324d1", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/416be82f5973399d10bd7d133f7189c7021324d1", "committedDate": "2020-12-15T22:34:15Z", "message": "Load file content on initial load"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33d4910d027e3a63f114b6b189231026d1365754", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/33d4910d027e3a63f114b6b189231026d1365754", "committedDate": "2020-12-15T23:12:49Z", "message": "Add route to generate jplag report for programming exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fd9a36d6162c1a9c9b35e01e7540f6d79f506ff", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/9fd9a36d6162c1a9c9b35e01e7540f6d79f506ff", "committedDate": "2020-12-15T23:52:18Z", "message": "Add possibility to generate jplag report to client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d32fecbad7ef5b5c606c4636a124b35a6910932", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/4d32fecbad7ef5b5c606c4636a124b35a6910932", "committedDate": "2020-12-15T23:55:58Z", "message": "Merge branch 'develop' into feature/improved-programming-plagiarism-detection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjM5Mjcy", "url": "https://github.com/ls1intum/Artemis/pull/2522#pullrequestreview-553639272", "createdAt": "2020-12-16T12:29:04Z", "commit": {"oid": "4d32fecbad7ef5b5c606c4636a124b35a6910932"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjUyNzQ0", "url": "https://github.com/ls1intum/Artemis/pull/2522#pullrequestreview-553652744", "createdAt": "2020-12-16T12:48:02Z", "commit": {"oid": "4d32fecbad7ef5b5c606c4636a124b35a6910932"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjUzNTY3", "url": "https://github.com/ls1intum/Artemis/pull/2522#pullrequestreview-553653567", "createdAt": "2020-12-16T12:49:16Z", "commit": {"oid": "4d32fecbad7ef5b5c606c4636a124b35a6910932"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjU0MTA5", "url": "https://github.com/ls1intum/Artemis/pull/2522#pullrequestreview-553654109", "createdAt": "2020-12-16T12:49:57Z", "commit": {"oid": "4d32fecbad7ef5b5c606c4636a124b35a6910932"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjU2MDA2", "url": "https://github.com/ls1intum/Artemis/pull/2522#pullrequestreview-553656006", "createdAt": "2020-12-16T12:52:33Z", "commit": {"oid": "4d32fecbad7ef5b5c606c4636a124b35a6910932"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609f21f15a8f4a460055417aaa0448022c96c0bf", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/609f21f15a8f4a460055417aaa0448022c96c0bf", "committedDate": "2020-12-16T13:02:11Z", "message": "Fix plagiarism client tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba99d2b847692419d98eff0383e834f0d6862605", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/ba99d2b847692419d98eff0383e834f0d6862605", "committedDate": "2020-12-16T13:19:33Z", "message": "Fix codacy issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "130d224df199540d3c4c7764a253b06d6c1d246f", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/130d224df199540d3c4c7764a253b06d6c1d246f", "committedDate": "2020-12-16T14:14:11Z", "message": "Fix codacy issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTk3OTIy", "url": "https://github.com/ls1intum/Artemis/pull/2522#pullrequestreview-553997922", "createdAt": "2020-12-16T19:06:17Z", "commit": {"oid": "130d224df199540d3c4c7764a253b06d6c1d246f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowNjoxN1rOIHUwkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxOTowOTo1NlrOIHU5fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU1MTA1Nw==", "bodyText": "The title is a bit confusing, maybe you can use checkPlagiarismJplagReport instead?", "url": "https://github.com/ls1intum/Artemis/pull/2522#discussion_r544551057", "createdAt": "2020-12-16T19:06:17Z", "author": {"login": "anditurdiu"}, "path": "src/main/webapp/app/exercises/programming/manage/services/programming-exercise.service.ts", "diffHunk": "@@ -48,12 +49,25 @@ export class ProgrammingExerciseService {\n         return this.http.put<string>(this.resourceUrl + '/' + exerciseId + '/generate-tests', { responseType: 'text' });\n     }\n \n+    /**\n+     * Check plagiarism with JPlag\n+     *\n+     * @param exerciseId\n+     */\n+    checkPlagiarism(exerciseId: number): Observable<TextPlagiarismResult> {\n+        return this.http\n+            .get<TextPlagiarismResult>(`${this.resourceUrl}/${exerciseId}/check-plagiarism`, {\n+                observe: 'response',\n+            })\n+            .pipe(map((response: HttpResponse<TextPlagiarismResult>) => response.body!));\n+    }\n+\n     /**\n      * Check for plagiarism\n      * @param exerciseId of the programming exercise\n      */\n-    checkPlagiarism(exerciseId: number): Observable<HttpResponse<Blob>> {\n-        return this.http.get(`${this.resourceUrl}/${exerciseId}/check-plagiarism`, {\n+    checkPlagiarismJPlagResponse(exerciseId: number): Observable<HttpResponse<Blob>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "130d224df199540d3c4c7764a253b06d6c1d246f"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU1MzI3Mg==", "bodyText": "It is better if you don't call methods directly from the HTML because it will continuously trigger the function. You can achieve better performance if you store them as attributes in the component.", "url": "https://github.com/ls1intum/Artemis/pull/2522#discussion_r544553272", "createdAt": "2020-12-16T19:09:48Z", "author": {"login": "anditurdiu"}, "path": "src/main/webapp/app/exercises/shared/plagiarism/plagiarism-split-view/plagiarism-split-view.component.html", "diffHunk": "@@ -1,25 +1,17 @@\n <div class=\"plagiarism-split-view\">\n     <div class=\"plagiarism-split-pane\" jhiPane>\n-        <div class=\"plagiarism-split-pane-header\">\n-            {{ comparison.submissionA.studentLogin || ('artemisApp.plagiarism.unknown-student' | translate) }}\n-        </div>\n+        <jhi-modeling-submission-viewer *ngIf=\"isModelingExercise()\" [exercise]=\"exercise\" [plagiarismSubmission]=\"getModelingSubmissionA()\"></jhi-modeling-submission-viewer>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "130d224df199540d3c4c7764a253b06d6c1d246f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU1MzM0Mw==", "bodyText": "here also", "url": "https://github.com/ls1intum/Artemis/pull/2522#discussion_r544553343", "createdAt": "2020-12-16T19:09:56Z", "author": {"login": "anditurdiu"}, "path": "src/main/webapp/app/exercises/shared/plagiarism/plagiarism-split-view/plagiarism-split-view.component.html", "diffHunk": "@@ -1,25 +1,17 @@\n <div class=\"plagiarism-split-view\">\n     <div class=\"plagiarism-split-pane\" jhiPane>\n-        <div class=\"plagiarism-split-pane-header\">\n-            {{ comparison.submissionA.studentLogin || ('artemisApp.plagiarism.unknown-student' | translate) }}\n-        </div>\n+        <jhi-modeling-submission-viewer *ngIf=\"isModelingExercise()\" [exercise]=\"exercise\" [plagiarismSubmission]=\"getModelingSubmissionA()\"></jhi-modeling-submission-viewer>\n \n-        <div class=\"plagiarism-split-pane-body\">\n-            <jhi-modeling-submission-viewer *ngIf=\"isModelingExercise()\" [exercise]=\"exercise\" [plagiarismSubmission]=\"getModelingSubmissionA()\"></jhi-modeling-submission-viewer>\n+        <jhi-text-submission-viewer *ngIf=\"isTextExercise()\" [exercise]=\"exercise\" [plagiarismSubmission]=\"getTextSubmissionA()\"></jhi-text-submission-viewer>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "130d224df199540d3c4c7764a253b06d6c1d246f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b04a60a692e0b46956e7c128379a8bb5652fd13", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/2b04a60a692e0b46956e7c128379a8bb5652fd13", "committedDate": "2020-12-16T21:47:41Z", "message": "Apply request code review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be963b4875196b09b3ff8419315bb04e0f3022cd", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/be963b4875196b09b3ff8419315bb04e0f3022cd", "committedDate": "2020-12-17T08:13:55Z", "message": "Fix component tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42c15300fdaa18a42c525d4bd374c68017ac2e22", "author": {"user": {"login": "philippbauch", "name": "Philipp Bauch"}}, "url": "https://github.com/ls1intum/Artemis/commit/42c15300fdaa18a42c525d4bd374c68017ac2e22", "committedDate": "2020-12-17T08:14:29Z", "message": "Merge branch 'develop' into feature/improved-programming-plagiarism-detection"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3418, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}