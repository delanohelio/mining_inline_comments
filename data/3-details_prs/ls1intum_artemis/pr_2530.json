{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTAxMTAz", "number": 2530, "title": "[Bugfix] Fix issue with saving example text assessments", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I followed the coding and design guidelines.\n Server: I added multiple integration tests (Spring) related to the features (with a high test coverage)\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I followed the coding and design guidelines.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nFixes #2500\nDescription\n\n\nExtracted Resource call to parent\nAdapted children accordingly\nUse new endpoint for saving example assessment for text exercise\n\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to Course Administration\nCreate a new text exercise or use an old one and edit it\nCreate an example submission\nCreate a example assessment and click on update assessment\n\nTest Coverage\n\n\n\nScreenshots", "createdAt": "2020-12-09T22:20:59Z", "url": "https://github.com/ls1intum/Artemis/pull/2530", "merged": true, "mergeCommit": {"oid": "e7b29b58820ff0856930e01a27781a78786f4416"}, "closed": true, "closedAt": "2020-12-11T06:04:52Z", "author": {"login": "fde312"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkmVosAH2gAyNTM1NTAxMTAzOmRhMjlkMzg5MjA0ZDg4MzMyMTAzMDM1MzIyNmE0MTNmNjVjZjExYTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlBl6egFqTU0OTgyMjMwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da29d389204d883321030353226a413f65cf11a5", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/da29d389204d883321030353226a413f65cf11a5", "committedDate": "2020-12-09T22:18:32Z", "message": "move logic of endpoint to parent and adapt child classes accordingly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cc0efbc8f6c7809e19ca217166d7c1253488a93", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1cc0efbc8f6c7809e19ca217166d7c1253488a93", "committedDate": "2020-12-09T22:19:12Z", "message": "implement new endpoint on client"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjcwNTg4", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-548670588", "createdAt": "2020-12-09T22:34:12Z", "commit": {"oid": "1cc0efbc8f6c7809e19ca217166d7c1253488a93"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjozNDoxMlrOICsnxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjozNDoxMlrOICsnxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5OTE0MA==", "bodyText": "@jpbernius I am not quite sure if we need to use saveTextBlocks here. For the example assessment, we are using the old way of assessing text exercises.\nIt worked completely fine for me without.", "url": "https://github.com/ls1intum/Artemis/pull/2530#discussion_r539699140", "createdAt": "2020-12-09T22:34:12Z", "author": {"login": "fde312"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextAssessmentResource.java", "diffHunk": "@@ -107,6 +112,23 @@ public TextAssessmentResource(AuthorizationCheckService authCheckService, TextAs\n         return response;\n     }\n \n+    /**\n+     * PUT text-submissions/:submissionId/example-assessment : save manual example text assessment\n+     *\n+     * @param submissionId id of the submission\n+     * @param feedbacks list of feedbacks\n+     * @return result after saving example text assessment\n+     */\n+    @ResponseStatus(HttpStatus.OK)\n+    @ApiResponses({ @ApiResponse(code = 403, message = ErrorConstants.REQ_403_REASON), @ApiResponse(code = 404, message = ErrorConstants.REQ_404_REASON) })\n+    @PutMapping(\"/text-submissions/{submissionId}/example-assessment\")\n+    @PreAuthorize(\"hasAnyRole('TA', 'INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> saveTextExampleAssessment(@PathVariable long submissionId, @RequestBody List<Feedback> feedbacks) {\n+        log.debug(\"REST request to save text example assessment : {}\", submissionId);\n+        // TODO: Figure out if we need to use saveTextBlocks\n+        return super.saveExampleAssessment(submissionId, feedbacks);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cc0efbc8f6c7809e19ca217166d7c1253488a93"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjcxNDQx", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-548671441", "createdAt": "2020-12-09T22:35:37Z", "commit": {"oid": "1cc0efbc8f6c7809e19ca217166d7c1253488a93"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjozNTozN1rOICsqjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMjozNTozN1rOICsqjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5OTg1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // this.assessmentsService.save(this.exercise.id!, this.result.id!, this.assessments, [])", "url": "https://github.com/ls1intum/Artemis/pull/2530#discussion_r539699853", "createdAt": "2020-12-09T22:35:37Z", "author": {"login": "fde312"}, "path": "src/main/webapp/app/exercises/text/manage/example-text-submission/example-text-submission.component.ts", "diffHunk": "@@ -350,12 +350,12 @@ export class ExampleTextSubmissionComponent implements OnInit, AfterViewInit {\n             this.jhiAlertService.error('artemisApp.textAssessment.error.invalidAssessments');\n             return;\n         }\n-\n-        this.assessmentsService.save(this.exercise.id!, this.result.id!, this.assessments, []).subscribe((response) => {\n+        this.assessmentsService.saveExampleAssessment(this.assessments, this.exampleSubmission.id!).subscribe((response) => {\n             this.result = response.body!;\n             this.areNewAssessments = false;\n             this.jhiAlertService.success('artemisApp.textAssessment.saveSuccessful');\n         });\n+        // this.assessmentsService.save(this.exercise.id!, this.result.id!, this.assessments, [])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cc0efbc8f6c7809e19ca217166d7c1253488a93"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6178bf0b7415cf525042ab118fe557ad3fb75b0", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/f6178bf0b7415cf525042ab118fe557ad3fb75b0", "committedDate": "2020-12-09T22:35:44Z", "message": "Update src/main/webapp/app/exercises/text/manage/example-text-submission/example-text-submission.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba237ddbf0a3895de8957163be65bed1d638701", "author": {"user": {"login": "anditurdiu", "name": "Andi Turdiu"}}, "url": "https://github.com/ls1intum/Artemis/commit/6ba237ddbf0a3895de8957163be65bed1d638701", "committedDate": "2020-12-10T15:35:19Z", "message": "Merge branch 'develop' into bugfix/text-exercises/example-assessment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c11783fa978805cf460bc1301df67de8db00ed0a", "author": {"user": {"login": "anditurdiu", "name": "Andi Turdiu"}}, "url": "https://github.com/ls1intum/Artemis/commit/c11783fa978805cf460bc1301df67de8db00ed0a", "committedDate": "2020-12-10T19:43:20Z", "message": "Merge branch 'develop' into bugfix/text-exercises/example-assessment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1237ad60a9a1b9692c596e59891547bb74d803b1", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1237ad60a9a1b9692c596e59891547bb74d803b1", "committedDate": "2020-12-10T20:27:16Z", "message": "add server test for new text example submissions route"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f4f3078a7c277165e24134b8adf3dbc16c54d85b", "committedDate": "2020-12-10T20:27:44Z", "message": "Merge branch 'bugfix/text-exercises/example-assessment' of github.com:ls1intum/Artemis into bugfix/text-exercises/example-assessment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTg2OTMw", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549586930", "createdAt": "2020-12-10T20:45:05Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTg2OTc1", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549586975", "createdAt": "2020-12-10T20:45:09Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTg3MTY3", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549587167", "createdAt": "2020-12-10T20:45:27Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTg3MjM0", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549587234", "createdAt": "2020-12-10T20:45:32Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTkwNzE4", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549590718", "createdAt": "2020-12-10T20:50:34Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5Njk0ODgy", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549694882", "createdAt": "2020-12-10T23:32:14Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NzQxNDU3", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549741457", "createdAt": "2020-12-11T01:37:29Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5ODIyMzA0", "url": "https://github.com/ls1intum/Artemis/pull/2530#pullrequestreview-549822304", "createdAt": "2020-12-11T06:03:45Z", "commit": {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3441, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}