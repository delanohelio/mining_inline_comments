{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0OTMxODEw", "number": 2331, "title": "[Bugfix] Fix graphs on course statistics by taking bonus points into account", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nGraph was a bit broken when bonus points were applied, see screenshot:\n\nDescription\n\n\nTake bonus points into account for all calculations\n\nSteps for Testing\n\n\nLog in to Artemis\nGo to Course Overview and enter a course with exercises (different types) with bonus points that are assessed\nClick on Statistics\nCheck if the graphs displays the scores and points correctly. You can see the bonus points when hovering over the graph in Achieved Scores and the delta of Points and Reachable points on the right side\n\nTest Coverage\n\nNothing changed\nScreenshots\n\n\nFixed graphs", "createdAt": "2020-11-03T18:56:05Z", "url": "https://github.com/ls1intum/Artemis/pull/2331", "merged": true, "mergeCommit": {"oid": "642a8780fc9801833b983643b5c7e370d27c00f9"}, "closed": true, "closedAt": "2020-11-03T22:32:01Z", "author": {"login": "fde312"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdY9ytggH2gAyNTE0OTMxODEwOmU0NWViNGQwY2VmOTVjYjJlOGFjODBlMjlmNDE2NDAwMjMzNjc1YmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZA849gFqTUyMjkyMjI0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e45eb4d0cef95cb2e8ac80e29f416400233675bf", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e45eb4d0cef95cb2e8ac80e29f416400233675bf", "committedDate": "2020-11-03T18:51:01Z", "message": "take bonus points into account for course statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63f646dfd1d1de0e039827983a75e397b7baabd9", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/63f646dfd1d1de0e039827983a75e397b7baabd9", "committedDate": "2020-11-03T19:28:05Z", "message": "Merge branch 'develop' into bugfix/course-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eaa69c30e37402ddd7c96cc0d24090eeda6fa9f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/6eaa69c30e37402ddd7c96cc0d24090eeda6fa9f", "committedDate": "2020-11-03T19:44:54Z", "message": "revert change for maxScore and reachable score"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac4fe0cfa30dbee52b97c508a4c92a25c8c7e672", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/ac4fe0cfa30dbee52b97c508a4c92a25c8c7e672", "committedDate": "2020-11-03T19:45:06Z", "message": "Merge branch 'bugfix/course-statistics' of https://github.com/ls1intum/Artemis into bugfix/course-statistics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dd20773c94ad3e11c742e7b958ccaec33df5b29", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2dd20773c94ad3e11c742e7b958ccaec33df5b29", "committedDate": "2020-11-03T20:22:31Z", "message": "cap result.score so that max of 100% is deducted for calculation of missedScore"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODgzMjgy", "url": "https://github.com/ls1intum/Artemis/pull/2331#pullrequestreview-522883282", "createdAt": "2020-11-03T21:21:51Z", "commit": {"oid": "2dd20773c94ad3e11c742e7b958ccaec33df5b29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMToyMTo1MVrOHtA5cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMToyMTo1MVrOHtA5cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2MjY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            // const maxResultScore = Math.round((((exercise.bonusPoints ?? 0) + exercise.maxScore!) / exercise.maxScore!) * 100);", "url": "https://github.com/ls1intum/Artemis/pull/2331#discussion_r516962672", "createdAt": "2020-11-03T21:21:51Z", "author": {"login": "kloessst"}, "path": "src/main/webapp/app/overview/course-statistics/course-statistics.component.ts", "diffHunk": "@@ -280,6 +280,7 @@ export class CourseStatisticsComponent implements OnInit, OnDestroy {\n                         currentRelativeScore: 0,\n                     };\n                 }\n+                // const maxResultScore = Math.round((((exercise.bonusPoints ?? 0) + exercise.maxScore!) / exercise.maxScore!) * 100);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dd20773c94ad3e11c742e7b958ccaec33df5b29"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4c05f14df6b1b0a1a5e906fba4850e4c72cb8f4", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/f4c05f14df6b1b0a1a5e906fba4850e4c72cb8f4", "committedDate": "2020-11-03T21:29:30Z", "message": "Update src/main/webapp/app/overview/course-statistics/course-statistics.component.ts\n\nCo-authored-by: Stefan Kl\u00f6ss-Schuster <16407766+kloessst@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODg0Mjg3", "url": "https://github.com/ls1intum/Artemis/pull/2331#pullrequestreview-522884287", "createdAt": "2020-11-03T21:23:31Z", "commit": {"oid": "2dd20773c94ad3e11c742e7b958ccaec33df5b29"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMToyMzozMVrOHtA8fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMToyMzozMVrOHtA8fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2MzQ1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // This score is used to cap bonus points, sot that we not have negative values for the missedScores\n          \n          \n            \n                    // This score is used to cap bonus points, so that we not have negative values for the missedScores", "url": "https://github.com/ls1intum/Artemis/pull/2331#discussion_r516963455", "createdAt": "2020-11-03T21:23:31Z", "author": {"login": "kloessst"}, "path": "src/main/webapp/app/overview/course-statistics/course-statistics.component.ts", "diffHunk": "@@ -364,14 +365,17 @@ export class CourseStatisticsComponent implements OnInit, OnDestroy {\n         const replaced = result.resultString.replace(',', '.');\n         const split = replaced.split(' ');\n \n+        const missedPoints = parseFloat(split[2]) - parseFloat(split[0]) > 0 ? parseFloat(split[2]) - parseFloat(split[0]) : 0;\n+        // This score is used to cap bonus points, sot that we not have negative values for the missedScores", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dd20773c94ad3e11c742e7b958ccaec33df5b29"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48bcb5623e4d658658c128853ec52dc65220dea0", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/48bcb5623e4d658658c128853ec52dc65220dea0", "committedDate": "2020-11-03T21:34:12Z", "message": "Update src/main/webapp/app/overview/course-statistics/course-statistics.component.ts\n\nCo-authored-by: Stefan Kl\u00f6ss-Schuster <16407766+kloessst@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd4430d172c155399e81b81f1cf1058b83e85df7", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/cd4430d172c155399e81b81f1cf1058b83e85df7", "committedDate": "2020-11-03T21:42:17Z", "message": "fix edge case for donut graph"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTA4MTY2", "url": "https://github.com/ls1intum/Artemis/pull/2331#pullrequestreview-522908166", "createdAt": "2020-11-03T22:04:55Z", "commit": {"oid": "cd4430d172c155399e81b81f1cf1058b83e85df7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTA4MzE2", "url": "https://github.com/ls1intum/Artemis/pull/2331#pullrequestreview-522908316", "createdAt": "2020-11-03T22:05:12Z", "commit": {"oid": "cd4430d172c155399e81b81f1cf1058b83e85df7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTE2MTgy", "url": "https://github.com/ls1intum/Artemis/pull/2331#pullrequestreview-522916182", "createdAt": "2020-11-03T22:20:03Z", "commit": {"oid": "cd4430d172c155399e81b81f1cf1058b83e85df7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTIyMjQx", "url": "https://github.com/ls1intum/Artemis/pull/2331#pullrequestreview-522922241", "createdAt": "2020-11-03T22:31:51Z", "commit": {"oid": "cd4430d172c155399e81b81f1cf1058b83e85df7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3610, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}