{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjU5MjI5", "number": 1237, "title": "Test coverage for UserJWTController", "bodyText": "Checklist\n\n Server: I added multiple integration tests (Spring) related to the features\n\nMotivation and Context\nThis PR belongs to the series of PRs aiming at increasing the test coverage of all REST resources. See current state here.\nDescription\n\nAdds a test that performs an authenticate request and validates the received JWT token", "createdAt": "2020-02-10T17:25:27Z", "url": "https://github.com/ls1intum/Artemis/pull/1237", "merged": true, "mergeCommit": {"oid": "0bc40ed6ddb8a0000f47ed75c73ef443d3447d34"}, "closed": true, "closedAt": "2020-02-16T22:14:52Z", "author": {"login": "madwau"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBEKmIAH2gAyMzczMjU5MjI5OjlmZjY3ZjhjMzEyOWJiMGFiOTQwNGI5NjE2OTc4YzZlMGI1NTdkYzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFARYGgFqTM1OTQzMzM5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ff67f8c3129bb0ab9404b9616978c6e0b557dc0", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/9ff67f8c3129bb0ab9404b9616978c6e0b557dc0", "committedDate": "2020-02-04T16:31:12Z", "message": "UserJWTIntegrationTest (wip)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6223ef81792bb7656f6fba4f6645d673f824f7d1", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/6223ef81792bb7656f6fba4f6645d673f824f7d1", "committedDate": "2020-02-10T17:24:40Z", "message": "Finish test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc658bf34c0df526630d02ca7ebdd0b5886d5fc0", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/cc658bf34c0df526630d02ca7ebdd0b5886d5fc0", "committedDate": "2020-02-10T17:27:39Z", "message": "Merge branch 'develop' into chore/test-coverage/user-jwt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "deda188de7be752b98e8a054403c6503a477edc1", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/deda188de7be752b98e8a054403c6503a477edc1", "committedDate": "2020-02-10T17:49:24Z", "message": "Use different base class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74d15d0402697c748412bc0eb61145edd1a3d486", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/74d15d0402697c748412bc0eb61145edd1a3d486", "committedDate": "2020-02-10T18:10:33Z", "message": "Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7911c38eddc089747b7608523b6aadde48033e89", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/7911c38eddc089747b7608523b6aadde48033e89", "committedDate": "2020-02-11T15:00:29Z", "message": "Merge branch 'develop' into chore/test-coverage/user-jwt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c2486f720ed380d63679586cc29df196d0b255c", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/1c2486f720ed380d63679586cc29df196d0b255c", "committedDate": "2020-02-11T15:21:08Z", "message": "Show debug output (tmp)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ec6f4803e9c971fcf679aa2c964e3ce99f06c14", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/0ec6f4803e9c971fcf679aa2c964e3ce99f06c14", "committedDate": "2020-02-11T15:38:08Z", "message": "Jira profile should not be active when testing internal authentication"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b262710016fbd9223d8b8cccf8233e6c5b1c4e8", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/7b262710016fbd9223d8b8cccf8233e6c5b1c4e8", "committedDate": "2020-02-11T15:56:02Z", "message": "Do not use external authentication for this test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2ea67c6df841675fcdbaa72b3e704594f8b9671", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/f2ea67c6df841675fcdbaa72b3e704594f8b9671", "committedDate": "2020-02-11T16:11:50Z", "message": "Revert \"Show debug output (tmp)\"\n\nThis reverts commit 1c2486f7"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MDE0ODYw", "url": "https://github.com/ls1intum/Artemis/pull/1237#pullrequestreview-357014860", "createdAt": "2020-02-11T21:37:57Z", "commit": {"oid": "f2ea67c6df841675fcdbaa72b3e704594f8b9671"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMTozNzo1OFrOFoaEdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMTozNzo1OFrOFoaEdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzkxNDQ4NQ==", "bodyText": "can you move this into InternalAuthenticationIntegrationTest so that a we do not have 2 tests with different profiles?\nThis can significantly slow down test execution", "url": "https://github.com/ls1intum/Artemis/pull/1237#discussion_r377914485", "createdAt": "2020-02-11T21:37:58Z", "author": {"login": "krusche"}, "path": "src/test/java/de/tum/in/www1/artemis/authentication/UserJWTIntegrationTest.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package de.tum.in.www1.artemis.authentication;\n+\n+import static de.tum.in.www1.artemis.util.ModelFactory.USER_PASSWORD;\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.http.HttpHeaders;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.security.test.context.support.WithAnonymousUser;\n+import org.springframework.test.context.ActiveProfiles;\n+import org.springframework.test.context.TestPropertySource;\n+\n+import de.tum.in.www1.artemis.AbstractSpringIntegrationTest;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.security.jwt.TokenProvider;\n+import de.tum.in.www1.artemis.service.UserService;\n+import de.tum.in.www1.artemis.util.DatabaseUtilService;\n+import de.tum.in.www1.artemis.util.ModelFactory;\n+import de.tum.in.www1.artemis.util.RequestUtilService;\n+import de.tum.in.www1.artemis.web.rest.UserJWTController;\n+import de.tum.in.www1.artemis.web.rest.vm.LoginVM;\n+\n+@ActiveProfiles(\"artemis\")\n+@TestPropertySource(properties = \"artemis.user-management.use-external=false\")\n+public class UserJWTIntegrationTest extends AbstractSpringIntegrationTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2ea67c6df841675fcdbaa72b3e704594f8b9671"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MDE1MDEw", "url": "https://github.com/ls1intum/Artemis/pull/1237#pullrequestreview-357015010", "createdAt": "2020-02-11T21:38:13Z", "commit": {"oid": "f2ea67c6df841675fcdbaa72b3e704594f8b9671"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cec74049dfa7ae99ee4520779b4a3922e609e7cf", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/cec74049dfa7ae99ee4520779b4a3922e609e7cf", "committedDate": "2020-02-16T16:07:57Z", "message": "Merge branch 'develop' into chore/test-coverage/user-jwt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41295595d51de2e0fd95b2a00094ebe5a572c3da", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/41295595d51de2e0fd95b2a00094ebe5a572c3da", "committedDate": "2020-02-16T16:09:24Z", "message": "Move new test into existing InternalAuthenticationIntegrationTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDMzMzk2", "url": "https://github.com/ls1intum/Artemis/pull/1237#pullrequestreview-359433396", "createdAt": "2020-02-16T22:14:41Z", "commit": {"oid": "41295595d51de2e0fd95b2a00094ebe5a572c3da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3168, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}