{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NDg1NTI0", "number": 1356, "title": "adapt the new text assessment version to the SGI feature", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\n\n\nWe would like to use the SGI feature for the new text assessment version as well.\nDescription\n\nAllow the new assessment layout to accept drop of the SGI element.\nSteps for Testing\n\n\nNavigate to tutor course dashboard\nGo to a text exercise that has a submission to assess\nChange the url from  /submissions/ to /submissions-new/\nDrag and drop an SGI to the feedback field of a text block\nmake sure the points and feedback test are adjusted as well as the total score\n\nScreenshots", "createdAt": "2020-04-27T13:00:25Z", "url": "https://github.com/ls1intum/Artemis/pull/1356", "merged": true, "mergeCommit": {"oid": "80d784fd1ffce1aa9383904ae8fc83b8fc2bb419"}, "closed": true, "closedAt": "2020-04-28T17:27:24Z", "author": {"login": "HanyaElhashemy"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbuw_hgH2gAyNDA5NDg1NTI0OjhiYmI2OTM0MGNiYzQwY2I4NWNmMDQ2YTc2NzZiZGEwNzk1NjI3NTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccHT_eAFqTQwMjA1NjUyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8bbb69340cbc40cb85cf046a7676bda079562755", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8bbb69340cbc40cb85cf046a7676bda079562755", "committedDate": "2020-04-27T12:51:11Z", "message": "adapt the new text assessment version to the SGI feature by allowing drop on the new text assessment feedback layout"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMjY3Mzk3", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-401267397", "createdAt": "2020-04-27T19:38:34Z", "commit": {"oid": "8bbb69340cbc40cb85cf046a7676bda079562755"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57c38c19f3aa6015f4efbe9ed054b7268afc305b", "author": {"user": {"login": "sascha11110", "name": "Sascha Beele"}}, "url": "https://github.com/ls1intum/Artemis/commit/57c38c19f3aa6015f4efbe9ed054b7268afc305b", "committedDate": "2020-04-28T06:48:53Z", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNTYyMjc0", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-401562274", "createdAt": "2020-04-28T07:22:45Z", "commit": {"oid": "57c38c19f3aa6015f4efbe9ed054b7268afc305b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fe7cecd88adf9802b71036484d5aae6d92e5ef97", "committedDate": "2020-04-28T09:12:35Z", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNjg2MDMy", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-401686032", "createdAt": "2020-04-28T10:04:16Z", "commit": {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97"}, "state": "DISMISSED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMDowNDoxN1rOGNMivA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMDoxMDowN1rOGNMwew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MDE3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Connects the SGI with the Feedback of a Submission Element\n          \n          \n            \n                 * @param {Event} event - The drop event\n          \n          \n            \n                 * the SGI element sent on drag in processed in this method\n          \n          \n            \n                 * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n          \n          \n            \n                 */\n          \n          \n            \n                drop(event: any) {\n          \n          \n            \n                 * Connects the structured grading instructions with the feedback of a text block\n          \n          \n            \n                 * @param {Event} event - The drop event\n          \n          \n            \n                 * the SGI element sent on drag in processed in this method\n          \n          \n            \n                 * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n          \n          \n            \n                 */\n          \n          \n            \n                dropStructuredGradingInstruction(event: any) {", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416490172", "createdAt": "2020-04-28T10:04:17Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }\n+    /**\n+     * Connects the SGI with the Feedback of a Submission Element\n+     * @param {Event} event - The drop event\n+     * the SGI element sent on drag in processed in this method\n+     * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n+     */\n+    drop(event: any) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MjA5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const credits = instruction.credits;\n          \n          \n            \n                    const feedback = instruction.feedback;\n          \n          \n            \n                    this.feedback.credits = credits;\n          \n          \n            \n                    this.feedback.detailText = feedback;\n          \n          \n            \n                    this.feedback.credits = instruction.credits;\n          \n          \n            \n                    this.feedback.detailText = instruction.feedback;", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416492098", "createdAt": "2020-04-28T10:07:27Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }\n+    /**\n+     * Connects the SGI with the Feedback of a Submission Element\n+     * @param {Event} event - The drop event\n+     * the SGI element sent on drag in processed in this method\n+     * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n+     */\n+    drop(event: any) {\n+        event.preventDefault();\n+        const data = event.dataTransfer.getData('text');\n+        const instruction = JSON.parse(data);\n+        const credits = instruction.credits;\n+        const feedback = instruction.feedback;\n+        this.feedback.credits = credits;\n+        this.feedback.detailText = feedback;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MzIxMg==", "bodyText": "I think this should be in a service. Do you have a similar code for modeling as well?\nI could even imagine a service method like so:\nupdateFeedbackWithStructuredGradingInstructionevent(feedback: Feedback, event: any): void", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416493212", "createdAt": "2020-04-28T10:09:15Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }\n+    /**\n+     * Connects the SGI with the Feedback of a Submission Element\n+     * @param {Event} event - The drop event\n+     * the SGI element sent on drag in processed in this method\n+     * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n+     */\n+    drop(event: any) {\n+        event.preventDefault();\n+        const data = event.dataTransfer.getData('text');\n+        const instruction = JSON.parse(data);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MzY5MQ==", "bodyText": "I think this method should use a better name. Currently, I would prefer $event.preventDefault() in the template.", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416493691", "createdAt": "2020-04-28T10:10:07Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3b8f477c26820bac975e1f40eaa12fd05080348", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c3b8f477c26820bac975e1f40eaa12fd05080348", "committedDate": "2020-04-28T10:46:09Z", "message": "apply feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31cb999a38057c6c4df01541606d3355acd96a7f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/31cb999a38057c6c4df01541606d3355acd96a7f", "committedDate": "2020-04-28T12:06:39Z", "message": "refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf184d7c6e5dcfb05d54e58c348aab8d4e967771", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/cf184d7c6e5dcfb05d54e58c348aab8d4e967771", "committedDate": "2020-04-28T12:16:43Z", "message": "refactor modeling and file upload exercises accordingly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNzkzOTE2", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-401793916", "createdAt": "2020-04-28T12:41:32Z", "commit": {"oid": "cf184d7c6e5dcfb05d54e58c348aab8d4e967771"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxODE1ODA1", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-401815805", "createdAt": "2020-04-28T13:08:23Z", "commit": {"oid": "cf184d7c6e5dcfb05d54e58c348aab8d4e967771"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f22f0f80ce7bbaf8bb5b32f4abc1705d1f686fb1", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f22f0f80ce7bbaf8bb5b32f4abc1705d1f686fb1", "committedDate": "2020-04-28T13:19:58Z", "message": "add SGI to text area directly!?"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "097ed69da699eb83fced8befeb8f3feb7f21e8ae", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/097ed69da699eb83fced8befeb8f3feb7f21e8ae", "committedDate": "2020-04-28T15:33:04Z", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI\n\n# Conflicts:\n#\tsrc/main/webapp/app/assessment/assessment-detail/assessment-detail.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afd627fa2b60c3005eac0a408853b47730f33b0b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/afd627fa2b60c3005eac0a408853b47730f33b0b", "committedDate": "2020-04-28T15:37:51Z", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e6b8940a4394e329e34fab9fb17b42ce582780", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/40e6b8940a4394e329e34fab9fb17b42ce582780", "committedDate": "2020-04-28T16:04:02Z", "message": "merge develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDM4MTIz", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-402038123", "createdAt": "2020-04-28T17:03:26Z", "commit": {"oid": "40e6b8940a4394e329e34fab9fb17b42ce582780"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDQwNzU5", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-402040759", "createdAt": "2020-04-28T17:06:57Z", "commit": {"oid": "40e6b8940a4394e329e34fab9fb17b42ce582780"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDU2NTIx", "url": "https://github.com/ls1intum/Artemis/pull/1356#pullrequestreview-402056521", "createdAt": "2020-04-28T17:27:08Z", "commit": {"oid": "40e6b8940a4394e329e34fab9fb17b42ce582780"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2957, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}