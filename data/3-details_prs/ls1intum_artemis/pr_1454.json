{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MjU5MzI5", "number": 1454, "title": "Assessment of team submissions by team owner tutor", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nTutors need to be able to assess student submissions in team-based exercises. The concept here is  different than for regular exercises where tutors receive random submissions to assess without knowing to which students they belong. For team-based exercises, each team has a tutor assigned (also referred to as the team owner in technical terms) who acts as the team mentor and will assess the submissions of his or her teams (likely across all team-based exercises in a course).\nDescription\nSince this assessment flow is substantially different than the regular one, we decided on a different solution here for now than using the Tutor Exercise Dashboard. It works as follows: On the Tutor Course Dashboard, team-based exercises have a button \"Exercise Teams\" instead of the \"Exercise Dashboard\" button for regular individual exercises. When clicked, the tutor is presented with all teams assigned to him for that exercise. He or she can now click onto the different teams and see their participations in all exercises for the course. The rightmost column \"Assessment\" contains a button for the tutor to assess the students' submission.\nSteps for Testing\n\n\nLog in to Artemis as a tutor\nNavigate to Course Management\nClick on Tutor Course Dashboard for a Course with Team Exercises\nClick on the button \"Exercise Teams\" for one of the Team Exercises (in which you are the team owner of several teams)\nOpen several of your teams by clicking on the short names of the teams\nCheck that the new assessment column is present in the participations table for the team\nCheck that the label of the assessment button is correct depending on the state of the submission and result (button should be disabled if there is no submission, otherwise it should be enabled and say \"Start new assessment\" initially, then \"Continue assessment\" once a result exists and then finally \"Open assessment\" if the result has a completion date)\n\nScreenshots\nIf a tutor clicks on \"Exercise Teams\" on the Tutor Course Dashboard, he will get to an overview of his assigned teams for the exercise.\n\nThis uses the regular teams overview page but has the new filter \"Own teams\" enabled automatically when coming via the Tutor Course Dashboard.\n\nHaving clicked on a team short name, the team page is shown with the new assessment column to the right:", "createdAt": "2020-05-11T18:06:21Z", "url": "https://github.com/ls1intum/Artemis/pull/1454", "merged": true, "mergeCommit": {"oid": "d8f36be45a29397217f8d38fa849d6d227c60fd4"}, "closed": true, "closedAt": "2020-05-19T15:11:25Z", "author": {"login": "madwau"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfplqngH2gAyNDE2MjU5MzI5OjMyNzcxOWRmNjlmNDYxNTIzNzM4OTc5NTE0ZmUwZjQxZDRmMmVkMzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci19IjgFqTQxNDU0OTE0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "327719df69f461523738979514fe0f41d4f2ed35", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/327719df69f461523738979514fe0f41d4f2ed35", "committedDate": "2020-05-09T17:04:59Z", "message": "Preparation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db3e82508c9b825a85aa765f18853f8bad14dd30", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/db3e82508c9b825a85aa765f18853f8bad14dd30", "committedDate": "2020-05-11T18:06:46Z", "message": "Merge branch 'develop' into feature/assessment-by-team-owner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e689362de052df2361f25dee45959d4918f1002", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/7e689362de052df2361f25dee45959d4918f1002", "committedDate": "2020-05-13T14:49:02Z", "message": "Merge branch 'develop' into feature/assessment-by-team-owner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3798951d6ba8fc4f32e73bdac1b12dc9d7466a6", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/b3798951d6ba8fc4f32e73bdac1b12dc9d7466a6", "committedDate": "2020-05-17T11:43:19Z", "message": "Fetch latest submission"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5de8fa890f077d5b18bab781665940236e1ee032", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/5de8fa890f077d5b18bab781665940236e1ee032", "committedDate": "2020-05-17T12:53:55Z", "message": "Assessment column in team participation table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "729eb1e79cd5a4f5e9bb6691762a4d1a7210b4fc", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/729eb1e79cd5a4f5e9bb6691762a4d1a7210b4fc", "committedDate": "2020-05-17T12:59:17Z", "message": "Template fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff914f4605fc5383806eaec30e26b0fa8ce1a165", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/ff914f4605fc5383806eaec30e26b0fa8ce1a165", "committedDate": "2020-05-17T13:00:06Z", "message": "Merge branch 'develop' into feature/assessment-by-team-owner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e3b8b82dc1b3467146313044a00710db2c1f392", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/5e3b8b82dc1b3467146313044a00710db2c1f392", "committedDate": "2020-05-17T13:15:38Z", "message": "Link from tutor course dashboard to teams for team exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4331f55544329cf45bfc1bc20ff6d7ad4b547aa7", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/4331f55544329cf45bfc1bc20ff6d7ad4b547aa7", "committedDate": "2020-05-17T13:47:46Z", "message": "Link from tutor course dashboard to teams for team exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74a9b7491905688a6f1f2e5b61b6a44ef740c850", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/74a9b7491905688a6f1f2e5b61b6a44ef740c850", "committedDate": "2020-05-17T14:12:59Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "630559153817785fc67bd2d32c25383118a88935", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/630559153817785fc67bd2d32c25383118a88935", "committedDate": "2020-05-17T18:16:47Z", "message": "Result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c72cd52cbb03beacecffbf89a82625d809012f29", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/c72cd52cbb03beacecffbf89a82625d809012f29", "committedDate": "2020-05-17T18:25:32Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fb0d52fd78871a4111ab008719901728546563e", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/5fb0d52fd78871a4111ab008719901728546563e", "committedDate": "2020-05-17T18:27:50Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b21ec724cdeedb3d983a36df5550635ef6f650a9", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/b21ec724cdeedb3d983a36df5550635ef6f650a9", "committedDate": "2020-05-17T19:17:48Z", "message": "Server tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4835dea764091eff8251cdcb11857ad7debf5feb", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/4835dea764091eff8251cdcb11857ad7debf5feb", "committedDate": "2020-05-17T19:54:12Z", "message": "Allow assessing before due date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ce0476e9e09bf379c4d04a60027e9d134495232", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/5ce0476e9e09bf379c4d04a60027e9d134495232", "committedDate": "2020-05-18T11:42:50Z", "message": "Merge branch 'develop' into feature/assessment-by-team-owner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNTA4ODg1", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-413508885", "createdAt": "2020-05-18T11:34:28Z", "commit": {"oid": "4835dea764091eff8251cdcb11857ad7debf5feb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMTo0MTo1NlrOGWzZJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMTo0MTo1NlrOGWzZJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU2Mzg3Ng==", "bodyText": "I don't know if that's possible, but can the teams have different tutors in different exercises?\nIf so, I believe the anyMatch predicate would return too many teams (so maybe allMatch should be used?).", "url": "https://github.com/ls1intum/Artemis/pull/1454#discussion_r426563876", "createdAt": "2020-05-18T11:41:56Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java", "diffHunk": "@@ -384,18 +388,28 @@ public TeamResource(TeamRepository teamRepository, TeamService teamService, Team\n         // Set teams on exercises\n         exercises.forEach(exercise -> exercise.setTeams(Set.of(exerciseTeamMap.get(exercise.getId()))));\n \n-        // Fetch participations for team and set the submission count for each participation\n-        List<StudentParticipation> participations = participationService.findAllByCourseIdAndTeamShortName(courseId, teamShortName);\n+        // Fetch participations for team\n+        List<StudentParticipation> participations;\n+        if (authCheckService.isAtLeastInstructorInCourse(course, user) || teams.stream().map(Team::getOwner).anyMatch(user::equals)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4835dea764091eff8251cdcb11857ad7debf5feb"}, "originalPosition": 67}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "700e72e44fd5b2754f1e8c201991ebe425d69395", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/700e72e44fd5b2754f1e8c201991ebe425d69395", "committedDate": "2020-05-18T12:40:56Z", "message": "Checkbox fot filtering teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09e8c8304470fc260ae64e2b73b7ef25e6dc5b31", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/09e8c8304470fc260ae64e2b73b7ef25e6dc5b31", "committedDate": "2020-05-18T12:45:00Z", "message": "Merge branch 'develop' into feature/assessment-by-team-owner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "888ddd4c0323c140d76a00b1134ba6b151041763", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/888ddd4c0323c140d76a00b1134ba6b151041763", "committedDate": "2020-05-18T13:54:00Z", "message": "Propagate tutor change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "066303b19ba66f8354002931f5c8a37c070c7ce3", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/066303b19ba66f8354002931f5c8a37c070c7ce3", "committedDate": "2020-05-18T13:55:46Z", "message": "Change to allMatch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff02befadc9f529583342d0ac12b202799167b9f", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/ff02befadc9f529583342d0ac12b202799167b9f", "committedDate": "2020-05-18T13:57:33Z", "message": "Merge branch 'develop' into feature/assessment-by-team-owner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNjgzMDIz", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-413683023", "createdAt": "2020-05-18T15:05:10Z", "commit": {"oid": "ff02befadc9f529583342d0ac12b202799167b9f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/4f4c7a52f8cddddb2af8279a0427bc5faa8e142c", "committedDate": "2020-05-18T15:58:30Z", "message": "Optional participation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODIyNjc1", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-413822675", "createdAt": "2020-05-18T18:05:20Z", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODIzMzEy", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-413823312", "createdAt": "2020-05-18T18:06:22Z", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODM0Mjcx", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-413834271", "createdAt": "2020-05-18T18:22:50Z", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MjU3Mjkw", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-414257290", "createdAt": "2020-05-19T09:17:08Z", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0Mjc5ODAx", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-414279801", "createdAt": "2020-05-19T09:46:19Z", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTQ5MTQ0", "url": "https://github.com/ls1intum/Artemis/pull/1454#pullrequestreview-414549144", "createdAt": "2020-05-19T15:11:15Z", "commit": {"oid": "4f4c7a52f8cddddb2af8279a0427bc5faa8e142c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2636, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}