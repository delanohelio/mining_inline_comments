{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNzYyNjA4", "number": 1188, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Mjo0N1rODX8-zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOToxMDozOFrODX9Scg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQyOTU5OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Mjo0OFrOFdiKew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Mjo0OFrOFdiKew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxMjc2Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService, ResultService resultService1) {\n          \n          \n            \n                        StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService, ResultService resultService) {", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366512763", "createdAt": "2020-01-14T18:52:48Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "diffHunk": "@@ -17,12 +18,15 @@\n \n     private final UserService userService;\n \n+    private final ResultService resultService;\n+\n     public TextAssessmentService(UserService userService, ComplaintResponseService complaintResponseService, ComplaintRepository complaintRepository,\n             FeedbackRepository feedbackRepository, ResultRepository resultRepository, TextSubmissionRepository textSubmissionRepository,\n-            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService) {\n+            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService, ResultService resultService1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39fa65912fb52d693b3d2a180eede175f58f44dc"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQzMDA4OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Mjo1OFrOFdiK1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Mjo1OFrOFdiK1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxMjg1NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this.resultService = resultService1;\n          \n          \n            \n                    this.resultService = resultService;", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366512854", "createdAt": "2020-01-14T18:52:58Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "diffHunk": "@@ -17,12 +18,15 @@\n \n     private final UserService userService;\n \n+    private final ResultService resultService;\n+\n     public TextAssessmentService(UserService userService, ComplaintResponseService complaintResponseService, ComplaintRepository complaintRepository,\n             FeedbackRepository feedbackRepository, ResultRepository resultRepository, TextSubmissionRepository textSubmissionRepository,\n-            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService) {\n+            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService, ResultService resultService1) {\n         super(complaintResponseService, complaintRepository, feedbackRepository, resultRepository, studentParticipationRepository, resultService, authCheckService);\n         this.textSubmissionRepository = textSubmissionRepository;\n         this.userService = userService;\n+        this.resultService = resultService1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39fa65912fb52d693b3d2a180eede175f58f44dc"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQzOTY4OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1NjowN1rOFdiQ8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1NjowN1rOFdiQ8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxNDQxNg==", "bodyText": "can we move this method directly into the super class and use the submissionRepository instead?", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366514416", "createdAt": "2020-01-14T18:56:07Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "diffHunk": "@@ -112,4 +116,15 @@ public Result saveAssessment(Long resultId, List<Feedback> textAssessment, TextE\n     private Double calculateTotalScore(List<Feedback> assessments) {\n         return assessments.stream().mapToDouble(Feedback::getCredits).sum();\n     }\n+\n+    /**\n+     * Finds the example result for the given submission ID. The submission has to be an example submission\n+     *\n+     * @param submissionId The ID of the submission for which the result should be fetched\n+     * @return The example result, which is linked to the submission\n+     */\n+    public Result getExampleResult(long submissionId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQ0MTMzOnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/repository/TextSubmissionRepository.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Njo0MVrOFdiR9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1Njo0MVrOFdiR9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxNDY3Ng==", "bodyText": "can we move this into the submission repository?", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366514676", "createdAt": "2020-01-14T18:56:41Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/repository/TextSubmissionRepository.java", "diffHunk": "@@ -54,4 +54,7 @@\n      */\n     @EntityGraph(attributePaths = { \"blocks\", \"result\", \"participation\" })\n     List<TextSubmission> findByParticipation_ExerciseIdAndResultIsNullAndSubmittedIsTrue(Long exerciseId);\n+\n+    @Query(\"select distinct submission from TextSubmission submission left join fetch submission.result r left join fetch r.feedbacks where submission.exampleSubmission = true and submission.id = :#{#submissionId}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQ0ODE3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/example-text-submission/example-text-submission.component.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1OTowMFrOFdiWdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxODo1OTowMFrOFdiWdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxNTgyOA==", "bodyText": "I guess this should be update instead of upsert, right?", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366515828", "createdAt": "2020-01-14T18:59:00Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/example-text-submission/example-text-submission.component.ts", "diffHunk": "@@ -201,6 +202,7 @@ export class ExampleTextSubmissionComponent implements OnInit, AfterViewInit {\n     }\n \n     upsertExampleTextSubmission() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQ2NTY4OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTowNTozM1rOFdih8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOToxNjoxM1rOFdi1Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxODc3MQ==", "bodyText": "I think you have reslutService twice here.", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366518771", "createdAt": "2020-01-14T19:05:33Z", "author": {"login": "HanyaElhashemy"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "diffHunk": "@@ -17,12 +18,15 @@\n \n     private final UserService userService;\n \n+    private final ResultService resultService;\n+\n     public TextAssessmentService(UserService userService, ComplaintResponseService complaintResponseService, ComplaintRepository complaintRepository,\n             FeedbackRepository feedbackRepository, ResultRepository resultRepository, TextSubmissionRepository textSubmissionRepository,\n-            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService) {\n+            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService, ResultService resultService) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUyMzc0Mg==", "bodyText": "I fixed it, thanks!", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366523742", "createdAt": "2020-01-14T19:16:13Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TextAssessmentService.java", "diffHunk": "@@ -17,12 +18,15 @@\n \n     private final UserService userService;\n \n+    private final ResultService resultService;\n+\n     public TextAssessmentService(UserService userService, ComplaintResponseService complaintResponseService, ComplaintRepository complaintRepository,\n             FeedbackRepository feedbackRepository, ResultRepository resultRepository, TextSubmissionRepository textSubmissionRepository,\n-            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService) {\n+            StudentParticipationRepository studentParticipationRepository, ResultService resultService, AuthorizationCheckService authCheckService, ResultService resultService) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUxODc3MQ=="}, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQ3NjE1OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextAssessmentResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTowOToxOVrOFdioww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOTowOToxOVrOFdioww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUyMDUxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public ResponseEntity<Result> getExampleResultForTutor(@PathVariable Long exerciseId, @PathVariable Long submissionId) {\n          \n          \n            \n                public ResponseEntity<Result> getExampleResultForTutor(@PathVariable long exerciseId, @PathVariable long submissionId) {\n          \n      \n    \n    \n  \n\nhope I learned my lesson ;)", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366520515", "createdAt": "2020-01-14T19:09:19Z", "author": {"login": "HanyaElhashemy"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextAssessmentResource.java", "diffHunk": "@@ -321,23 +317,17 @@ private void computeBlocks(Result result, TextExercise textExercise) {\n      * @param submissionId the id of the submission\n      * @return the result linked to the submission\n      */\n-    @GetMapping(\"/exercise/{exerciseId}/submission/{submissionId}/exampleAssessment\")\n+    @GetMapping(\"/exercise/{exerciseId}/submission/{submissionId}/example-result\")\n     @PreAuthorize(\"hasAnyRole('TA', 'INSTRUCTOR', 'ADMIN')\")\n-    public ResponseEntity<Result> getExampleAssessmentForTutor(@PathVariable Long exerciseId, @PathVariable Long submissionId) {\n+    public ResponseEntity<Result> getExampleResultForTutor(@PathVariable Long exerciseId, @PathVariable Long submissionId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NDQ3OTg2OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/ResultService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOToxMDozOFrOFdirNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxOToxMDozOFrOFdirNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUyMTE0MA==", "bodyText": "The comment is a bit misleading. Is it the id of the submission or the id of the example submission?\nI guess it is the id of a submission that belongs to an example submission right?\nI guess we should also emphasize this in the comment at the top, that the submission must be connected to an example submission, otherwise this call throws an illegal argument exception. Otherwise another developer might be tempted to use this method.\nI even think you should rename the method to createNewExampleResultForSubmissionWithExampleSubmission or something similar", "url": "https://github.com/ls1intum/Artemis/pull/1188#discussion_r366521140", "createdAt": "2020-01-14T19:10:38Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ResultService.java", "diffHunk": "@@ -427,4 +427,24 @@ public void notifyUserAboutNewResult(Result result, Long participationId) {\n     private void notifyNewResult(Result result, Long participationId) {\n         websocketMessagingService.sendMessage(\"/topic/participation/\" + participationId + \"/newResults\", result);\n     }\n+\n+    /**\n+     * Create a new example result for the provided submission ID.\n+     *\n+     * @param submissionId The ID of the example submission for which a result should get created", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feba3c23a1032c4bfafd9edcb44ff36130c48bbd"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 186, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}