{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxODM3NzQ1", "number": 1760, "title": "[Exam] Add exam to course overview", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\n\n\nAdds exam banner to course overview in order to simplify navigation.\nDescription\n\n\nAdded banner to html file\nExtracted exams from courses\n\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to Course Administration\nCreate at least 2 exams with start date in the future\nGo to course overview\nExam banner should be displayed with the data of the exam with the first startDate and endDate is after now\n(whenendDate is before now then this exam should not be displayed anymore)\nWhen clicking on the exam banner, you are navigated to the exam\n\nScreenshots", "createdAt": "2020-06-30T07:29:09Z", "url": "https://github.com/ls1intum/Artemis/pull/1760", "merged": true, "mergeCommit": {"oid": "24ea4b2b9868a05b5fca0b1726163717a85bfbc4"}, "closed": true, "closedAt": "2020-07-02T13:06:37Z", "author": {"login": "fde312"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwQeWsgH2gAyNDQxODM3NzQ1OjAyNmE4MzU5NDU1NDllNGIzNjRmN2MyMWY4ZWVkZjMzNGJmMDkzNzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcw-Tw-gFqTQ0MTY0NTY0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "026a835945549e4b364f7c21f8eedf334bf09372", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/026a835945549e4b364f7c21f8eedf334bf09372", "committedDate": "2020-06-30T07:26:05Z", "message": "add exam to course overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e48fb49f00ed10ddc4aae501b37c9b1f6c5e6205", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e48fb49f00ed10ddc4aae501b37c9b1f6c5e6205", "committedDate": "2020-06-30T11:36:27Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c0329d9b60ee93544ce09428e29e6bb414ccdcc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8c0329d9b60ee93544ce09428e29e6bb414ccdcc", "committedDate": "2020-06-30T11:37:49Z", "message": "display only exams which start in the future"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27f595a192bf80741dd4388438a49017459ea9b9", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/27f595a192bf80741dd4388438a49017459ea9b9", "committedDate": "2020-06-30T11:38:41Z", "message": "added css file and refactored html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60a4bec9dfd1f5d5bd63fd97b5c618ba720b48cc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/60a4bec9dfd1f5d5bd63fd97b5c618ba720b48cc", "committedDate": "2020-06-30T11:56:15Z", "message": "added translation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63c90d03e120acfb2513ea68f9a389d953de7a1c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/63c90d03e120acfb2513ea68f9a389d953de7a1c", "committedDate": "2020-06-30T13:57:01Z", "message": "remove sever call as exams are already loaded in courses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fb1c22d4fd5d866d69229cfcfbe061ae458151f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/0fb1c22d4fd5d866d69229cfcfbe061ae458151f", "committedDate": "2020-06-30T13:57:10Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b282a2a37ea80d8b86203e1f8fc09481b5c1068", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7b282a2a37ea80d8b86203e1f8fc09481b5c1068", "committedDate": "2020-06-30T14:53:20Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81e605e136c703c0e6de757144a8ade8dc5ea6c4", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/81e605e136c703c0e6de757144a8ade8dc5ea6c4", "committedDate": "2020-06-30T17:08:02Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa89f24b15fadb3391f8da9bb28eacfd1203d906", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fa89f24b15fadb3391f8da9bb28eacfd1203d906", "committedDate": "2020-06-30T17:16:45Z", "message": "amend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f45026047c53b1c38db37e8d5a00a65363b7305e", "committedDate": "2020-06-30T18:49:14Z", "message": "change logic of next relevant exams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMzM3MjM0", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440337234", "createdAt": "2020-06-30T19:52:48Z", "commit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMzQzOTIz", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440343923", "createdAt": "2020-06-30T20:02:22Z", "commit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMzQ1NDAz", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440345403", "createdAt": "2020-06-30T20:04:26Z", "commit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMzU5Nzc1", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440359775", "createdAt": "2020-06-30T20:26:19Z", "commit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDI3MDYx", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440427061", "createdAt": "2020-06-30T22:22:55Z", "commit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjoyMjo1NVrOGrQhKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjoyMjo1NVrOGrQhKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxMjU4Ng==", "bodyText": "Discussed this with @MaisiKoleni . You should use the server time here and not moment() and calculate the individual endDate because some students have extra time", "url": "https://github.com/ls1intum/Artemis/pull/1760#discussion_r448012586", "createdAt": "2020-06-30T22:22:55Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -71,6 +72,18 @@ export class CoursesComponent implements OnInit, OnDestroy {\n                 // TODO: Stephan Krusche: this is deactivate at the moment, I think we need a more generic solution in more components, e.g. using the the existing notification\n                 // sent to the client, when a quiz starts. This should slide in from the side.\n                 // this.subscribeForQuizStartForCourses();\n+\n+                // get all exams of courses\n+                this.courses.forEach((course) => {\n+                    if (course.exams) {\n+                        // set course for exam as it is not loaded within the server call\n+                        course.exams.forEach((exam) => {\n+                            exam.course = course;\n+                            this.exams.push(exam);\n+                        });\n+                    }\n+                });\n+                this.nextRelevantExams = this.exams.filter((exam) => moment(exam.endDate!).isAfter(moment()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72570a150e0947340583ac84d15afc3116577ca5", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/72570a150e0947340583ac84d15afc3116577ca5", "committedDate": "2020-07-01T08:44:53Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00ec6e67da74755a93624245da97dfb6749136ea", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/00ec6e67da74755a93624245da97dfb6749136ea", "committedDate": "2020-07-01T10:56:08Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1839a15a873dbb557990591ac66e7c51b7950728", "committedDate": "2020-07-01T10:56:33Z", "message": "use server time instead of moment()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNzk3MjIx", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440797221", "createdAt": "2020-07-01T11:50:14Z", "commit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODE0ODg2", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-440814886", "createdAt": "2020-07-01T12:17:41Z", "commit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjoxNzo0MlrOGrjcXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjoxNzo0MlrOGrjcXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyMjY1NA==", "bodyText": "Could you maybe change this to use isBefore / isAfter. It would look a lot cleaner. (Even tough the logic is sometimes a bit tricky)", "url": "https://github.com/ls1intum/Artemis/pull/1760#discussion_r448322654", "createdAt": "2020-07-01T12:17:42Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -111,6 +126,33 @@ export class CoursesComponent implements OnInit, OnDestroy {\n         }\n     }\n \n+    /**\n+     * Sets the course for the next upcoming exam and returns the next upcoming exam or undefined\n+     */\n+    get nextRelevantExam(): Exam | undefined {\n+        let relevantExam: Exam | undefined = undefined;\n+        if (this.nextRelevantExams) {\n+            if (this.nextRelevantExams.length === 0) {\n+                return undefined;\n+            } else if (this.nextRelevantExams.length === 1) {\n+                relevantExam = this.nextRelevantExams[0];\n+            } else {\n+                relevantExam = this.nextRelevantExams.sort((a, b) => {\n+                    return moment(a.startDate).valueOf() - moment(b.startDate).valueOf();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728"}, "originalPosition": 76}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTI0NjM2", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-441124636", "createdAt": "2020-07-01T19:01:08Z", "commit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTU2NTQ4", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-441156548", "createdAt": "2020-07-01T19:55:55Z", "commit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjQ1NjQx", "url": "https://github.com/ls1intum/Artemis/pull/1760#pullrequestreview-441645641", "createdAt": "2020-07-02T12:50:09Z", "commit": {"oid": "1839a15a873dbb557990591ac66e7c51b7950728"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2587, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}