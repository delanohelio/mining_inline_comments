{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NzM2OTIx", "number": 1172, "title": "Feature: Clean up participation and restart tour", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I added multiple integration tests (Jest) related to the features\n Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nThis PR should solve the issue #1062\nDescription\nWhen a user restarts a guided tours, in which the user had to participate in an exercise, then the StudentParticipation, as well as the GuidedTourSetting of the current tutorial will be deleted. The user will be directed to the exercise overview page of the the current course and can start the exercise. Once the user navigates to the exercise page, the tutorial will be automatically displayed to the user again.\nNote :\nThis PR adds the logic of deleting participations for guided tours, allowing the groups USER and TA to delete their own participations. (/api/guided-tour/participations/{participationId})\nSteps for Testing\n\nLog in to Artemis\nNavigate to Tutorial Course\nVisit guided tour for Modeling or Programming Exercise\nComplete the tutorial and restart it\nThe StudentParticipation should have been deleted, when restarting the exercise, the tutorial should be displayed automatically from the beginning\n\nScreenshots", "createdAt": "2020-01-06T22:15:29Z", "url": "https://github.com/ls1intum/Artemis/pull/1172", "merged": true, "mergeCommit": {"oid": "26dc11cb9ab236635f562d4c43deaa5469a4ad10"}, "closed": true, "closedAt": "2020-01-28T12:03:42Z", "author": {"login": "lovaiible"}, "timelineItems": {"totalCount": 64, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3wV3AgH2gAyMzU5NzM2OTIxOjEzZWIyMmUyOTBjMmE5Yzk4MzM3ZjVkYzEzZWMyNGFjMzFkNGE1NGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-vxhoAH2gAyMzU5NzM2OTIxOmZjNjIwZTM4M2I1ZTk3YmY0NzcyMmVjZGM3NTRiNTMwNmYyY2RkMGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "13eb22e290c2a9c98337f5dc13ec24ac31d4a54d", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/13eb22e290c2a9c98337f5dc13ec24ac31d4a54d", "committedDate": "2020-01-06T18:20:05Z", "message": "Implement restart of guided tutorial"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "774a05a5071bc78c30849bc563c8774b61373fc2", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/774a05a5071bc78c30849bc563c8774b61373fc2", "committedDate": "2020-01-06T18:21:20Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfff24efd9a99352b67dc1ca7f23853a0f4b0a9c", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/bfff24efd9a99352b67dc1ca7f23853a0f4b0a9c", "committedDate": "2020-01-06T21:59:09Z", "message": "Optimize subscriptions and remove method from PersonClass task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0035e7a938438adbd325f6ddef6df4942cb42988", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/0035e7a938438adbd325f6ddef6df4942cb42988", "committedDate": "2020-01-06T22:21:51Z", "message": "Add missing param in JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23071302d12615a1ccd708ffe6cbc46203a1d418", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/23071302d12615a1ccd708ffe6cbc46203a1d418", "committedDate": "2020-01-07T10:13:39Z", "message": "Add missing null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10b6d703b10a86a5ea65747b35601221e0480ca1", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/10b6d703b10a86a5ea65747b35601221e0480ca1", "committedDate": "2020-01-07T10:48:48Z", "message": "Add server tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c83d72ca702cf7bea2dd60089dacc29cdfd77e8b", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/c83d72ca702cf7bea2dd60089dacc29cdfd77e8b", "committedDate": "2020-01-07T12:48:27Z", "message": "Add and update client tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31ed6433e7e810fd89cf3f1ff6da41c219b418e5", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/31ed6433e7e810fd89cf3f1ff6da41c219b418e5", "committedDate": "2020-01-07T14:21:51Z", "message": "Refactor client tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d677842b0f5fc74431449f482254cf62e1147d8e", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/d677842b0f5fc74431449f482254cf62e1147d8e", "committedDate": "2020-01-07T14:23:29Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8d68b2b936cf0474d2ea2637475f465df9d5549", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/a8d68b2b936cf0474d2ea2637475f465df9d5549", "committedDate": "2020-01-07T14:36:39Z", "message": "Add test for currentCourse and currentExercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faae29e8b835fa5c5137c158d6bd5f70a47e310b", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/faae29e8b835fa5c5137c158d6bd5f70a47e310b", "committedDate": "2020-01-07T16:08:41Z", "message": "Add TODOs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd48b281a4a18795d047f8191a907594420f29e", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/2cd48b281a4a18795d047f8191a907594420f29e", "committedDate": "2020-01-07T21:55:05Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour\n\n# Conflicts:\n#\tsrc/main/webapp/app/guided-tour/guided-tour.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25345b631b440284b337c3c83aefa85a899d3c7d", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/25345b631b440284b337c3c83aefa85a899d3c7d", "committedDate": "2020-01-08T01:24:13Z", "message": "Enable deletion of StudentParticipation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d12490ff065dc9a0cd687b1c08039463f41e17c", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/3d12490ff065dc9a0cd687b1c08039463f41e17c", "committedDate": "2020-01-08T14:25:35Z", "message": "Allow USER and TA to delete their own participations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb1c994bed59ad1c93750464a99b7a08e71a354e", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/cb1c994bed59ad1c93750464a99b7a08e71a354e", "committedDate": "2020-01-08T14:45:45Z", "message": "Update ParticipationResource method and fix server tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f45fb70ea82789ed564ca8541de7ab885b4c6a5", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/7f45fb70ea82789ed564ca8541de7ab885b4c6a5", "committedDate": "2020-01-09T01:09:58Z", "message": "Add client tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff9917a55e8e099a8cc5251d5ea05dfe4bb0e83c", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/ff9917a55e8e099a8cc5251d5ea05dfe4bb0e83c", "committedDate": "2020-01-09T01:15:43Z", "message": "Remove commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9382c40f324265d1a9dcd41d389733b560f9ae1", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/c9382c40f324265d1a9dcd41d389733b560f9ae1", "committedDate": "2020-01-09T01:48:07Z", "message": "Fix test build error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0f909f9fbbbb70baf6daaad3b4522698498e5de", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/e0f909f9fbbbb70baf6daaad3b4522698498e5de", "committedDate": "2020-01-09T20:52:52Z", "message": "Change permission check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8dc3df018e094b4049eef093ed96fb17ac89596", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/a8dc3df018e094b4049eef093ed96fb17ac89596", "committedDate": "2020-01-10T00:20:39Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa21ac8285888f741255db90bc0d8c30bdeb5621", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/aa21ac8285888f741255db90bc0d8c30bdeb5621", "committedDate": "2020-01-10T15:57:18Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38874c021d56bce6583c5cbd15724cc859ca957f", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/38874c021d56bce6583c5cbd15724cc859ca957f", "committedDate": "2020-01-10T16:40:26Z", "message": "Fix client test after merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/b4d83bbe5987f47e35256744d3482e75b41a8c1f", "committedDate": "2020-01-10T17:13:18Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDQ4NjM3", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-341448637", "createdAt": "2020-01-10T22:08:45Z", "commit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjowODo0NVrOFchS1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjowODo0NVrOFchS1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0OTk0MQ==", "bodyText": "can we add an additional check for now, that this can only happen in tutorial exercises for normal users and TAs?\nI think we store them in the yml file anyway, so we should be able to write a util function that checks this.\nI imagine some logic like:\n\nIf isAtLeastInstructor(...) { //do normal delete }\nelse if isTA or isStudent(...) { // check if the partcipation belongs to a tutorial exercise }\n\nAnother (maybe cleaner) alternative would be to introduce a new API endpoint for the case of deleting participations for tutorial exercises.", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r365449941", "createdAt": "2020-01-10T22:08:45Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ParticipationResource.java", "diffHunk": "@@ -586,7 +586,15 @@ else if (participation.getExercise() instanceof ProgrammingExercise) {\n         }\n \n         User user = userService.getUserWithGroupsAndAuthorities();\n-        checkAccessPermissionAtInstructor(participation, user);\n+\n+        // Allow USER's and TA's to delete their own StudentParticipations\n+        if (user.getId().equals(participation.getStudent().getId())) {\n+            checkAccessPermissionAtLeastStudent(participation, user);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDQ5MzE2", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-341449316", "createdAt": "2020-01-10T22:10:21Z", "commit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjoxMDoyMVrOFchUtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjoxMDoyMVrOFchUtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDQyMA==", "bodyText": "do we need this comment or can we get rid of it?", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r365450420", "createdAt": "2020-01-10T22:10:21Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/modeling-editor/modeling-editor.component.ts", "diffHunk": "@@ -165,6 +140,7 @@ export class ModelingEditorComponent implements AfterViewInit, OnDestroy, OnChan\n             // Check if the Person class is correct\n             case personUML.name: {\n                 const nameAttribute = this.elementWithAttribute(personUML.attribute, umlModel);\n+                // const emptyMethod = this.elementWithMethod('', umlModel);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDQ5Njk4", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-341449698", "createdAt": "2020-01-10T22:11:17Z", "commit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjoxMToxN1rOFchV1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjoxMToxN1rOFchV1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDcxMA==", "bodyText": "why do you call this mock settings? isn't this just simple test data?", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r365450710", "createdAt": "2020-01-10T22:11:17Z", "author": {"login": "krusche"}, "path": "src/test/java/de/tum/in/www1/artemis/GuidedTourSettingResourceTest.java", "diffHunk": "@@ -39,17 +39,7 @@ public void tearDown() {\n         database.resetDatabase();\n     }\n \n-    @Test\n-    @WithMockUser(value = \"student1\")\n-    public void guidedTourSettingsIsInitiallyNull() throws Exception {\n-        User user = request.get(\"/api/account\", HttpStatus.OK, User.class);\n-        assertThat(user.getGuidedTourSettings().isEmpty()).isTrue();\n-    }\n-\n-    @Test\n-    @WithMockUser(value = \"student1\")\n-    @SuppressWarnings(\"unchecked\")\n-    public void updateGuidedTourSettings() throws Exception {\n+    public Set<GuidedTourSetting> createMockSettings() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDUwNDAz", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-341450403", "createdAt": "2020-01-10T22:13:00Z", "commit": {"oid": "b4d83bbe5987f47e35256744d3482e75b41a8c1f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fad61d8f6f2882e44d945b9da206562543734b8", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/8fad61d8f6f2882e44d945b9da206562543734b8", "committedDate": "2020-01-13T04:06:19Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6993f8a7d6a6790b083b2c59e4d60cc061c7de0", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/d6993f8a7d6a6790b083b2c59e4d60cc061c7de0", "committedDate": "2020-01-13T04:11:09Z", "message": "Apply feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b11f7ed1068a6e09929d7ad8e22cdb6bee0c53b0", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/b11f7ed1068a6e09929d7ad8e22cdb6bee0c53b0", "committedDate": "2020-01-14T03:42:51Z", "message": "Add guided tour mapping check on the server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50fe1c1888b889c89ff00d68f5e9fa3316c1ecf3", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/50fe1c1888b889c89ff00d68f5e9fa3316c1ecf3", "committedDate": "2020-01-15T22:04:43Z", "message": "Fix tests and code formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e392a08d4aaa1ccdec8ecf7ea353b00ddafcf2", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/f5e392a08d4aaa1ccdec8ecf7ea353b00ddafcf2", "committedDate": "2020-01-15T22:16:29Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/a0a233519ac76210653221806d4621f32e0ab2b8", "committedDate": "2020-01-17T20:17:48Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTQyNzg4", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-344942788", "createdAt": "2020-01-18T13:07:13Z", "commit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MzQ5NjAx", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-345349601", "createdAt": "2020-01-20T14:36:15Z", "commit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNDozNjoxNVrOFfgS6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNToyMzoxNFrOFfhu7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU3OTMwNw==", "bodyText": "Please add some short JavaDoc", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r368579307", "createdAt": "2020-01-20T14:36:15Z", "author": {"login": "ungaralex"}, "path": "src/main/java/de/tum/in/www1/artemis/config/GuidedTourConfiguration.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package de.tum.in.www1.artemis.config;\n+\n+import java.util.*;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+\n+@Component\n+@EnableConfigurationProperties\n+@ConfigurationProperties(prefix = \"info.guided-tour\")\n+public class GuidedTourConfiguration {\n+\n+    private final Logger log = LoggerFactory.getLogger(GuidedTourConfiguration.class);\n+\n+    private String courseShortName = \"\";\n+\n+    private List<HashMap<String, String>> tours = new ArrayList<>();\n+\n+    public GuidedTourConfiguration() {\n+\n+    }\n+\n+    public List<HashMap<String, String>> getTours() {\n+        return this.tours;\n+    }\n+\n+    public void setTours(List<HashMap<String, String>> tours) {\n+        this.tours = tours;\n+    }\n+\n+    public String getCourseShortName() {\n+        return courseShortName;\n+    }\n+\n+    public void setCourseShortName(String courseShortName) {\n+        this.courseShortName = courseShortName;\n+    }\n+\n+    public boolean isExerciseForTutorial(Exercise exercise) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU4NjA1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n                /**\n          \n          \n            \n                 * Mapping of tourKey -> tourIdentifier \n          \n          \n            \n                 */", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r368586050", "createdAt": "2020-01-20T14:49:24Z", "author": {"login": "ungaralex"}, "path": "src/main/java/de/tum/in/www1/artemis/config/GuidedTourConfiguration.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package de.tum.in.www1.artemis.config;\n+\n+import java.util.*;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+\n+@Component\n+@EnableConfigurationProperties\n+@ConfigurationProperties(prefix = \"info.guided-tour\")\n+public class GuidedTourConfiguration {\n+\n+    private final Logger log = LoggerFactory.getLogger(GuidedTourConfiguration.class);\n+\n+    private String courseShortName = \"\";\n+\n+    private List<HashMap<String, String>> tours = new ArrayList<>();\n+\n+    public GuidedTourConfiguration() {\n+\n+    }\n+\n+    public List<HashMap<String, String>> getTours() {\n+        return this.tours;\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU4NzM3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for (HashMap<String, String> guidedTourMapping : this.getTours()) {\n          \n          \n            \n                    return tours.stream()\n          \n          \n            \n                            .flatMap(tour -> tour.values().stream())\n          \n          \n            \n                            .anyMatch(tourIdentifier -> tourIdentifier.equals(exerciseIdentifier));", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r368587370", "createdAt": "2020-01-20T14:51:57Z", "author": {"login": "ungaralex"}, "path": "src/main/java/de/tum/in/www1/artemis/config/GuidedTourConfiguration.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package de.tum.in.www1.artemis.config;\n+\n+import java.util.*;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+\n+@Component\n+@EnableConfigurationProperties\n+@ConfigurationProperties(prefix = \"info.guided-tour\")\n+public class GuidedTourConfiguration {\n+\n+    private final Logger log = LoggerFactory.getLogger(GuidedTourConfiguration.class);\n+\n+    private String courseShortName = \"\";\n+\n+    private List<HashMap<String, String>> tours = new ArrayList<>();\n+\n+    public GuidedTourConfiguration() {\n+\n+    }\n+\n+    public List<HashMap<String, String>> getTours() {\n+        return this.tours;\n+    }\n+\n+    public void setTours(List<HashMap<String, String>> tours) {\n+        this.tours = tours;\n+    }\n+\n+    public String getCourseShortName() {\n+        return courseShortName;\n+    }\n+\n+    public void setCourseShortName(String courseShortName) {\n+        this.courseShortName = courseShortName;\n+    }\n+\n+    public boolean isExerciseForTutorial(Exercise exercise) {\n+        String exerciseIdentifier = exercise instanceof ProgrammingExercise ? exercise.getShortName() : exercise.getTitle();\n+\n+        for (HashMap<String, String> guidedTourMapping : this.getTours()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU5NjM5MA==", "bodyText": "You should implement equals and hashCode in GuidedTourSetting and then delete the setting from the set in the user entity using this.guidedTourSettings.remove(setting). Looping over the set is not best practice.\nOne additional question: Shouldn't we move the guided tour related methods to a GuidedTourService? Not really in the scope of this PR, but if I were to work on guided tours, my initial intuition would be to look for such a service, and not in the UserService. Additionally, this service already has almost 600 LoC.", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r368596390", "createdAt": "2020-01-20T15:10:35Z", "author": {"login": "ungaralex"}, "path": "src/main/java/de/tum/in/www1/artemis/service/UserService.java", "diffHunk": "@@ -551,4 +550,22 @@ public User updateGuidedTourSettings(Set<GuidedTourSetting> guidedTourSettings)\n         }\n         return userRepository.save(loggedInUser);\n     }\n+\n+    /**\n+     * Delete a given guided tour setting of the currently logged in user\n+     * @param guidedTourSettingsKey the key of the guided tour setting that should be deleted\n+     * @return the updated user object without the deleted guided tour setting\n+     */\n+    public User deleteGuidedTourSetting(String guidedTourSettingsKey) {\n+        User loggedInUser = getUserWithGroupsAuthoritiesAndGuidedTourSettings();\n+        Set<GuidedTourSetting> guidedTourSettings = loggedInUser.getGuidedTourSettings();\n+        for (GuidedTourSetting setting : guidedTourSettings) {\n+            if (setting.getGuidedTourKey().equals(guidedTourSettingsKey)) {\n+                loggedInUser.removeGuidedTourSetting(setting);\n+                guidedTourSettingsRepository.save(setting);\n+                break;\n+            }\n+        }\n+        return userRepository.save(loggedInUser);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODU5OTcxMQ==", "bodyText": "You don't need this since the save operation on the user repository will already update the bidirectional relation and the orphanRemoval=true setting will remove the GuidedTourSetting on flush.", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r368599711", "createdAt": "2020-01-20T15:17:09Z", "author": {"login": "ungaralex"}, "path": "src/main/java/de/tum/in/www1/artemis/service/UserService.java", "diffHunk": "@@ -551,4 +550,22 @@ public User updateGuidedTourSettings(Set<GuidedTourSetting> guidedTourSettings)\n         }\n         return userRepository.save(loggedInUser);\n     }\n+\n+    /**\n+     * Delete a given guided tour setting of the currently logged in user\n+     * @param guidedTourSettingsKey the key of the guided tour setting that should be deleted\n+     * @return the updated user object without the deleted guided tour setting\n+     */\n+    public User deleteGuidedTourSetting(String guidedTourSettingsKey) {\n+        User loggedInUser = getUserWithGroupsAuthoritiesAndGuidedTourSettings();\n+        Set<GuidedTourSetting> guidedTourSettings = loggedInUser.getGuidedTourSettings();\n+        for (GuidedTourSetting setting : guidedTourSettings) {\n+            if (setting.getGuidedTourKey().equals(guidedTourSettingsKey)) {\n+                loggedInUser.removeGuidedTourSetting(setting);\n+                guidedTourSettingsRepository.save(setting);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYwMjg2MA==", "bodyText": "You can move this to switchMap operations in the pipe", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r368602860", "createdAt": "2020-01-20T15:23:14Z", "author": {"login": "ungaralex"}, "path": "src/main/webapp/app/guided-tour/guided-tour.service.ts", "diffHunk": "@@ -581,9 +586,33 @@ export class GuidedTourService {\n             }\n             this.setPreparedTourStep();\n             this.calculateTranslateValue(currentStep);\n-            if (this.currentTourStepIndex === 0 && this.currentTour.resetUMLModel) {\n-                this.resetUMLModelSubject.next(true);\n-            }\n+        }\n+    }\n+\n+    /** Resets participation and enables the restart of the current tour */\n+    public restartTour() {\n+        if (!this.availableTourForComponent) {\n+            return;\n+        }\n+        if (this.currentCourse && this.currentExercise) {\n+            const isProgrammingExercise = this.currentExercise.type === ExerciseType.PROGRAMMING;\n+            this.participationService\n+                .findParticipation(this.currentExercise.id)\n+                .pipe(\n+                    map((response: HttpResponse<StudentParticipation>) => response.body!),\n+                    flatMap(participation =>\n+                        this.participationService.delete(participation.id, { deleteBuildPlan: isProgrammingExercise, deleteRepository: isProgrammingExercise }),\n+                    ),\n+                )\n+                .subscribe(() => {\n+                    this.deleteGuidedTourSetting(this.availableTourForComponent!.settingsKey).subscribe(() => {\n+                        this.router.navigateByUrl(`/overview/${this.currentCourse!.id}/exercises`).then(() => {\n+                            location.reload();\n+                        });\n+                    });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0a233519ac76210653221806d4621f32e0ab2b8"}, "originalPosition": 135}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad247c614369c2c5a0a4237ef1c31afe82dcbe18", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/ad247c614369c2c5a0a4237ef1c31afe82dcbe18", "committedDate": "2020-01-21T00:18:14Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3e82c564674df48008357f6af4ba6ee1a273e96", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/c3e82c564674df48008357f6af4ba6ee1a273e96", "committedDate": "2020-01-21T10:05:41Z", "message": "Apply feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5f89541740cfdf74e9ecb6393cf1eaf74301c03", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/c5f89541740cfdf74e9ecb6393cf1eaf74301c03", "committedDate": "2020-01-21T10:41:11Z", "message": "Add 'restart tutorial' label to account menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c9ea534a3e56cffed8b92edd46c87627bc00981", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/4c9ea534a3e56cffed8b92edd46c87627bc00981", "committedDate": "2020-01-21T14:26:24Z", "message": "Add loading indicator when restarting a tutorial"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ab32964aba36e63660edc261878d96dcd534141", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/6ab32964aba36e63660edc261878d96dcd534141", "committedDate": "2020-01-21T14:30:16Z", "message": "Apply spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a8a4390739ec3f62950eb1638c9ff4c8f901c76", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/0a8a4390739ec3f62950eb1638c9ff4c8f901c76", "committedDate": "2020-01-21T15:09:07Z", "message": "Move deletion of participation for guided tour to its own REST call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06765f01b7429302876bbb8bc6693b2975898488", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/06765f01b7429302876bbb8bc6693b2975898488", "committedDate": "2020-01-21T15:10:36Z", "message": "Apply prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0efed4b651621d23c0580b69d50627a38cd213df", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/0efed4b651621d23c0580b69d50627a38cd213df", "committedDate": "2020-01-21T15:11:38Z", "message": "Apply spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2ec5860981c899c9a54f95533a706eb43ee0b77", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/b2ec5860981c899c9a54f95533a706eb43ee0b77", "committedDate": "2020-01-21T15:36:36Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28664cfed784595bd3527c69d9e37eb2509c2521", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/28664cfed784595bd3527c69d9e37eb2509c2521", "committedDate": "2020-01-22T01:12:04Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/service/UserService.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b77b2bda34c1f3f2c8bbcea6ab0253556e443666", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/b77b2bda34c1f3f2c8bbcea6ab0253556e443666", "committedDate": "2020-01-22T01:19:39Z", "message": "Adjust code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MzUwNzM1", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-347350735", "createdAt": "2020-01-23T14:45:13Z", "commit": {"oid": "b77b2bda34c1f3f2c8bbcea6ab0253556e443666"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e488ad70669040e8e558ccf21bc7813c3d509fa", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/1e488ad70669040e8e558ccf21bc7813c3d509fa", "committedDate": "2020-01-27T21:30:20Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTkyMjcw", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-348992270", "createdAt": "2020-01-27T21:37:03Z", "commit": {"oid": "1e488ad70669040e8e558ccf21bc7813c3d509fa"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDE0MDg0", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349014084", "createdAt": "2020-01-27T22:15:47Z", "commit": {"oid": "1e488ad70669040e8e558ccf21bc7813c3d509fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab7ad6ec71066dfcf387d04d961e057bb788491f", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/ab7ad6ec71066dfcf387d04d961e057bb788491f", "committedDate": "2020-01-28T09:54:18Z", "message": "Fix error in PR review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a07a49dc26ec2276680bd45d2a48871f62f4f1c6", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/a07a49dc26ec2276680bd45d2a48871f62f4f1c6", "committedDate": "2020-01-28T09:55:05Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c45581772b7dc902735f3b578f4d771f3fb6ad", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/c8c45581772b7dc902735f3b578f4d771f3fb6ad", "committedDate": "2020-01-28T10:25:27Z", "message": "Update client test and run prettier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5Mjg0MzE5", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349284319", "createdAt": "2020-01-28T10:53:42Z", "commit": {"oid": "c8c45581772b7dc902735f3b578f4d771f3fb6ad"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/9f9483cfadbd99c8c51884d46e3ec91206cb1274", "committedDate": "2020-01-28T11:18:12Z", "message": "Merge branch 'develop' into feature/guided-tour/restart-tour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzAwNjY1", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349300665", "createdAt": "2020-01-28T11:23:25Z", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzA0NzEz", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349304713", "createdAt": "2020-01-28T11:30:57Z", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMDo1N1rOFihuyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMDo1N1rOFihuyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc0ODU1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    User currentUser = userService.deleteGuidedTourSetting(settingsKey);\n          \n          \n            \n                    // Note: there is no explicit permission check here, because every user can delete the guided tour settings, e.g. by restarting a tutorial\n          \n          \n            \n                    User currentUser = userService.deleteGuidedTourSetting(settingsKey);", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r371748553", "createdAt": "2020-01-28T11:30:57Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/GuidedTourSettingsResource.java", "diffHunk": "@@ -46,4 +46,17 @@ public GuidedTourSettingsResource(UserService userService) {\n         User currentUser = userService.updateGuidedTourSettings(guidedTourSettings);\n         return new ResponseEntity<>(currentUser.getGuidedTourSettings(), null, HttpStatus.OK);\n     }\n+\n+    /**\n+     * DELETE /guided-tour-settings/:settingsKey : delete guided tour setting of the current user\n+     * @param settingsKey the guided tour settings key that of the setting that should be deleted\n+     * @return the guided tour settings\n+     */\n+    @DeleteMapping(\"/guided-tour-settings/{settingsKey}\")\n+    @PreAuthorize(\"hasAnyRole('USER', 'TA', 'INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Set<GuidedTourSetting>> deleteGuidedTourSetting(@PathVariable String settingsKey) {\n+        log.debug(\"REST request to delete GuidedTourSetting : {}\", settingsKey);\n+        User currentUser = userService.deleteGuidedTourSetting(settingsKey);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzA1MDg4", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349305088", "createdAt": "2020-01-28T11:31:41Z", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMTo0MVrOFihv8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMTo0MVrOFihv8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc0ODg0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Delete a given guided tour setting of the currently logged in user\n          \n          \n            \n                 * Delete a given guided tour setting of the currently logged in user (e.g. when the user restarts a guided tutorial)", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r371748848", "createdAt": "2020-01-28T11:31:41Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/UserService.java", "diffHunk": "@@ -641,6 +640,23 @@ public User updateGuidedTourSettings(Set<GuidedTourSetting> guidedTourSettings)\n         return userRepository.save(loggedInUser);\n     }\n \n+    /**\n+     * Delete a given guided tour setting of the currently logged in user", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzA1NTgy", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349305582", "createdAt": "2020-01-28T11:32:35Z", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMjozNlrOFihxXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMjozNlrOFihxXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc0OTIxNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private List<HashMap<String, String>> tours = new ArrayList<>();\n          \n          \n            \n                private List<Map<String, String>> tours = new ArrayList<>();", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r371749215", "createdAt": "2020-01-28T11:32:36Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/config/GuidedTourConfiguration.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package de.tum.in.www1.artemis.config;\n+\n+import java.util.*;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+\n+@Component\n+@EnableConfigurationProperties\n+@ConfigurationProperties(prefix = \"info.guided-tour\")\n+public class GuidedTourConfiguration {\n+\n+    private String courseShortName = \"\";\n+\n+    private List<HashMap<String, String>> tours = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzA1Njcw", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349305670", "createdAt": "2020-01-28T11:32:45Z", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMjo0NVrOFihxpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozMjo0NVrOFihxpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc0OTI4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public List<HashMap<String, String>> getTours() {\n          \n          \n            \n                public List<Map<String, String>> getTours() {", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r371749287", "createdAt": "2020-01-28T11:32:45Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/config/GuidedTourConfiguration.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package de.tum.in.www1.artemis.config;\n+\n+import java.util.*;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.domain.Exercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+\n+@Component\n+@EnableConfigurationProperties\n+@ConfigurationProperties(prefix = \"info.guided-tour\")\n+public class GuidedTourConfiguration {\n+\n+    private String courseShortName = \"\";\n+\n+    private List<HashMap<String, String>> tours = new ArrayList<>();\n+\n+    public GuidedTourConfiguration() {\n+\n+    }\n+\n+    /**\n+     * Get the list of of the mapping tourKey -> exerciseIdentifier from the info.guided-tour configuration in the application.yml file\n+     * @return List of mappings of tourKey -> exerciseIdentifier\n+     */\n+    public List<HashMap<String, String>> getTours() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzA2NDY4", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349306468", "createdAt": "2020-01-28T11:34:12Z", "commit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozNDoxMlrOFihz1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMTozNDoxMlrOFihz1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc0OTg0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * DELETE guided-tour/participations/:participationId : delete the \"participationId\" participation of student participations for guided tours.\n          \n          \n            \n                 * DELETE guided-tour/participations/:participationId : delete the \"participationId\" participation of student participations for guided tutorials (e.g. when restarting a tutorial)\n          \n          \n            \n                 * Please note: all users can delete their own participation when it belongs to a guided tutorial", "url": "https://github.com/ls1intum/Artemis/pull/1172#discussion_r371749846", "createdAt": "2020-01-28T11:34:12Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ParticipationResource.java", "diffHunk": "@@ -586,7 +587,50 @@ else if (participation.getExercise() instanceof ProgrammingExercise) {\n         }\n \n         User user = userService.getUserWithGroupsAndAuthorities();\n-        checkAccessPermissionAtInstructor(participation, user);\n+\n+        checkAccessPermissionAtLeastInstructor(participation, user);\n+\n+        String username = participation.getStudent().getFirstName();\n+        var auditEvent = new AuditEvent(user.getLogin(), Constants.DELETE_PARTICIPATION, \"participation=\" + participation.getId());\n+        auditEventRepository.add(auditEvent);\n+        log.info(\"Delete Participation {} of exercise {} for {}, deleteBuildPlan: {}, deleteRepository: {} by {}\", participationId, participation.getExercise().getTitle(),\n+                username, deleteBuildPlan, deleteRepository, principal.getName());\n+        participationService.delete(participationId, deleteBuildPlan, deleteRepository);\n+        return ResponseEntity.ok().headers(HeaderUtil.createEntityDeletionAlert(applicationName, true, \"participation\", username)).build();\n+    }\n+\n+    /**\n+     * DELETE guided-tour/participations/:participationId : delete the \"participationId\" participation of student participations for guided tours.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9483cfadbd99c8c51884d46e3ec91206cb1274"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c362840f1646484c4d1831b0d208b70832f26082", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/c362840f1646484c4d1831b0d208b70832f26082", "committedDate": "2020-01-28T11:35:35Z", "message": "Small changes from PR\r\n\r\nmostly additional comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzA3MzQ2", "url": "https://github.com/ls1intum/Artemis/pull/1172#pullrequestreview-349307346", "createdAt": "2020-01-28T11:35:50Z", "commit": {"oid": "c362840f1646484c4d1831b0d208b70832f26082"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc620e383b5e97bf47722ecdc754b5306f2cdd0a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fc620e383b5e97bf47722ecdc754b5306f2cdd0a", "committedDate": "2020-01-28T11:37:52Z", "message": "forget change from HashMap to Map"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3072, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}