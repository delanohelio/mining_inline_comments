{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTYxODA5", "number": 1433, "title": "Feature/tutor course dashboard/show locks", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I added multiple integration tests (Jest) related to the features\n\n\n\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nCloses #1182\nDescription\nGives tutors and instructors the possibility to see an overview of their assessments and locks.\nSteps for Testing\n\nLog in to Artemis\nNavigate to Course Administration\nClick on Exercises button then click all possible Submissions buttons (Modeling, Text, File Upload)\nGo back to Course Administration\nGo to Tutor Course Dashboard then click all possible Submissions buttons (Modeling, Text, File Upload)\nGo back to Course Administration\nGo to Instructor Dashboard then click all possible Submissions buttons (Modeling, Text, File Upload)\nGo back to Course Administration\nGo to Tutor Course Dashboard then click on Assessments locked by you\nGo back to Course Administration\nGo to Instructor Course Dashboard then click on Locked Assessments\n\nScreenshots\n\n\nNew buttons and links are highlighted in these screenshots:", "createdAt": "2020-05-07T23:01:51Z", "url": "https://github.com/ls1intum/Artemis/pull/1433", "merged": true, "mergeCommit": {"oid": "0b846372950c799306b8b33079ca7dea1cf124dc"}, "closed": true, "closedAt": "2020-06-02T10:32:38Z", "author": {"login": "balazs-czopf"}, "timelineItems": {"totalCount": 53, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfFGoPAH2gAyNDE0OTYxODA5OmQ0NTRmZjQzYWYwZTdhZWU0MDk2ODlkZWU4ZjlkYTMzMjU3ZDE5MWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnShz4gFqTQyMjU1NTg0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d454ff43af0e7aee409689dee8f9da33257d191c", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/d454ff43af0e7aee409689dee8f9da33257d191c", "committedDate": "2020-05-07T22:34:30Z", "message": "Adds possibility to show number of locks in dashboard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49a6f9d96f27d2d3049290510cf9db6bfe652813", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/49a6f9d96f27d2d3049290510cf9db6bfe652813", "committedDate": "2020-05-07T22:35:56Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6434ccaa5e1b92cf566186c6c82a9a2c0f5e4499", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/6434ccaa5e1b92cf566186c6c82a9a2c0f5e4499", "committedDate": "2020-05-08T08:40:02Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a705a19221302d434376aa55294e7e9d31d663e1", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/a705a19221302d434376aa55294e7e9d31d663e1", "committedDate": "2020-05-10T08:04:49Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b39d97239f09f8d995dd2c25f0bd82785dab296", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/7b39d97239f09f8d995dd2c25f0bd82785dab296", "committedDate": "2020-05-10T12:40:32Z", "message": "Few minor fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0d6735d3ac1efafb5c509c771a2d36c9daa65cb", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/c0d6735d3ac1efafb5c509c771a2d36c9daa65cb", "committedDate": "2020-05-10T15:36:36Z", "message": "Fix unused expression error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6606f3d5074f4e3feed3139877c07a92851cb195", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/6606f3d5074f4e3feed3139877c07a92851cb195", "committedDate": "2020-05-10T15:51:04Z", "message": "Fix part two"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/6f5a16d4d693ceb0c92821905e8048ab5e5af3df", "committedDate": "2020-05-10T18:00:44Z", "message": "Add missing button for instructor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4Nzg0MzY3", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-408784367", "createdAt": "2020-05-10T21:40:52Z", "commit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQyMTo0MDo1MlrOGTH0ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQyMjowMjowNVrOGTH9WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNDI2Ng==", "bodyText": "I do not think we need a new Module for this. Please check our module structure (e.g. #1248) and decide if this fits in an existing module.", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422704266", "createdAt": "2020-05-10T21:40:52Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.module.ts", "diffHunk": "@@ -0,0 +1,17 @@\n+import { NgModule } from '@angular/core';\n+import { AssessmentLocksComponent } from './assessment-locks.component';\n+import { MomentModule } from 'ngx-moment';\n+import { ClipboardModule } from 'ngx-clipboard';\n+import { RouterModule } from '@angular/router';\n+import { assessmentLocksRoute } from 'app/assessment/assessment-locks/assessment-locks.route';\n+import { SortByModule } from 'app/shared/pipes/sort-by.module';\n+import { ArtemisSharedModule } from 'app/shared/shared.module';\n+\n+const ENTITY_STATES = [...assessmentLocksRoute];\n+\n+@NgModule({\n+    imports: [ArtemisSharedModule, MomentModule, ClipboardModule, RouterModule.forChild(ENTITY_STATES), SortByModule],\n+    declarations: [AssessmentLocksComponent],\n+    exports: [AssessmentLocksComponent],\n+})\n+export class ArtemisAssessmentLocksModule {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNDYzNg==", "bodyText": "I do not like this change. A Submission does not have an exercise id. Adding this here may lead to many problems in the future that would lead to a compile error now.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public exerciseId?: number;", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422704636", "createdAt": "2020-05-10T21:44:18Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/entities/submission.model.ts", "diffHunk": "@@ -34,6 +34,8 @@ export abstract class Submission implements BaseEntity {\n \n     public language: Language | null;\n \n+    public exerciseId?: number;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNDc4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                readonly TEXT = ExerciseType.TEXT;\n          \n          \n            \n                readonly MODELING = ExerciseType.MODELING;\n          \n          \n            \n                readonly FILE_UPLOAD = ExerciseType.FILE_UPLOAD;\n          \n          \n            \n                readonly ExerciseType = ExerciseType;", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422704780", "createdAt": "2020-05-10T21:45:48Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/course/dashboards/tutor-course-dashboard/tutor-course-dashboard.component.ts", "diffHunk": "@@ -47,6 +48,10 @@ export class TutorCourseDashboardComponent implements OnInit, AfterViewInit {\n \n     exerciseForGuidedTour: Exercise | null;\n \n+    readonly TEXT = ExerciseType.TEXT;\n+    readonly MODELING = ExerciseType.MODELING;\n+    readonly FILE_UPLOAD = ExerciseType.FILE_UPLOAD;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNDk2NA==", "bodyText": "Could this work here?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    <button\n          \n          \n            \n                                        *ngIf=\"exercise.type === MODELING\"\n          \n          \n            \n                                        class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                        [routerLink]=\"['/course-management', course.id, 'modeling-exercises', exercise.id, 'assessment']\"\n          \n          \n            \n                                    >\n          \n          \n            \n                                        <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n          \n          \n            \n                                    </button>\n          \n          \n            \n                                    <button\n          \n          \n            \n                                        *ngIf=\"exercise.type === TEXT\"\n          \n          \n            \n                                        class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                        [routerLink]=\"['/course-management', course.id, 'text-exercises', exercise.id, 'assessment']\"\n          \n          \n            \n                                    >\n          \n          \n            \n                                        <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n          \n          \n            \n                                    </button>\n          \n          \n            \n                                    <button\n          \n          \n            \n                                        *ngIf=\"exercise.type === FILE_UPLOAD\"\n          \n          \n            \n                                        class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                        [routerLink]=\"['/course-management', course.id, 'file-upload-exercises', exercise.id, 'assessment']\"\n          \n          \n            \n                                    >\n          \n          \n            \n                                        <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n          \n          \n            \n                                    </button>\n          \n          \n            \n                                    <button\n          \n          \n            \n                                        class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                        [routerLink]=\"['/course-management', course.id, exercise.type + '-exercises', exercise.id, 'assessment']\"\n          \n          \n            \n                                    >\n          \n          \n            \n                                        <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n          \n          \n            \n                                    </button>", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422704964", "createdAt": "2020-05-10T21:47:51Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/course/dashboards/tutor-course-dashboard/tutor-course-dashboard.component.html", "diffHunk": "@@ -131,6 +140,27 @@ <h2>\n                         >\n                             <span class=\"d-none d-md-inline\" jhiTranslate=\"entity.action.exerciseDashboard\">Exercise dashboard</span>\n                         </button>\n+                        <button\n+                            *ngIf=\"exercise.type === MODELING\"\n+                            class=\"btn btn-primary btn-sm mr-1\"\n+                            [routerLink]=\"['/course-management', course.id, 'modeling-exercises', exercise.id, 'assessment']\"\n+                        >\n+                            <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n+                        </button>\n+                        <button\n+                            *ngIf=\"exercise.type === TEXT\"\n+                            class=\"btn btn-primary btn-sm mr-1\"\n+                            [routerLink]=\"['/course-management', course.id, 'text-exercises', exercise.id, 'assessment']\"\n+                        >\n+                            <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n+                        </button>\n+                        <button\n+                            *ngIf=\"exercise.type === FILE_UPLOAD\"\n+                            class=\"btn btn-primary btn-sm mr-1\"\n+                            [routerLink]=\"['/course-management', course.id, 'file-upload-exercises', exercise.id, 'assessment']\"\n+                        >\n+                            <span class=\"d-none d-md-inline\" jhiTranslate=\"artemisApp.exercise.submissions\">Submissions</span>\n+                        </button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNTEwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                readonly TEXT = ExerciseType.TEXT;\n          \n          \n            \n                readonly MODELING = ExerciseType.MODELING;\n          \n          \n            \n                readonly FILE_UPLOAD = ExerciseType.FILE_UPLOAD;\n          \n          \n            \n                readonly ExerciseType = ExerciseType;", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422705107", "createdAt": "2020-05-10T21:48:55Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/course/dashboards/instructor-course-dashboard/instructor-course-dashboard.component.ts", "diffHunk": "@@ -31,14 +34,29 @@ export class InstructorCourseDashboardComponent implements OnInit {\n     readonly MIN_POINTS_GREEN = 100;\n     readonly MIN_POINTS_ORANGE = 50;\n \n-    constructor(private courseService: CourseManagementService, private resultService: ResultService, private route: ActivatedRoute, private jhiAlertService: AlertService) {}\n+    readonly TEXT = ExerciseType.TEXT;\n+    readonly MODELING = ExerciseType.MODELING;\n+    readonly FILE_UPLOAD = ExerciseType.FILE_UPLOAD;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNTQ0Nw==", "bodyText": "Could this work here? Maybe filter like [ExerciseType.MODELING, ExerciseType. TEXT, ExerciseType. FILE_UPLOAD].includes(exercise.type).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            <button\n          \n          \n            \n                                                *ngIf=\"exercise.type === MODELING\"\n          \n          \n            \n                                                class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                                routerLink=\"/course-management/{{ course.id }}/modeling-exercises/{{ exercise.id }}/assessment\"\n          \n          \n            \n                                            >\n          \n          \n            \n                                                {{ 'artemisApp.exercise.submissions' | translate }}\n          \n          \n            \n                                            </button>\n          \n          \n            \n                                            <button\n          \n          \n            \n                                                *ngIf=\"exercise.type === TEXT\"\n          \n          \n            \n                                                class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                                routerLink=\"/course-management/{{ course.id }}/text-exercises/{{ exercise.id }}/assessment\"\n          \n          \n            \n                                            >\n          \n          \n            \n                                                {{ 'artemisApp.exercise.submissions' | translate }}\n          \n          \n            \n                                            </button>\n          \n          \n            \n                                            <button\n          \n          \n            \n                                                *ngIf=\"exercise.type === FILE_UPLOAD\"\n          \n          \n            \n                                                class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                                routerLink=\"/course-management/{{ course.id }}/file-upload-exercises/{{ exercise.id }}/assessment\"\n          \n          \n            \n                                            >\n          \n          \n            \n                                                {{ 'artemisApp.exercise.submissions' | translate }}\n          \n          \n            \n                                            </button>\n          \n          \n            \n                                            <button\n          \n          \n            \n                                                class=\"btn btn-primary btn-sm mr-1\"\n          \n          \n            \n                                                routerLink=\"/course-management/{{ course.id }}/{{exercise.type}}-exercises/{{ exercise.id }}/assessment\"\n          \n          \n            \n                                            >\n          \n          \n            \n                                                {{ 'artemisApp.exercise.submissions' | translate }}\n          \n          \n            \n                                            </button>\n          \n      \n    \n    \n  \n\nAlso consider using the [routerLink]=\"[..]\" notation maybe?", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422705447", "createdAt": "2020-05-10T21:52:25Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/course/dashboards/instructor-course-dashboard/instructor-course-dashboard.component.html", "diffHunk": "@@ -122,9 +127,32 @@ <h3>\n                             </div>\n                         </td>\n                         <td>\n-                            <button class=\"btn btn-primary\" routerLink=\"/course-management/{{ course.id }}/exercises/{{ exercise.id }}/instructor-dashboard\">\n-                                {{ 'artemisApp.instructorCourseDashboard.exerciseDashboard' | translate }}\n-                            </button>\n+                            <div class=\"btn-group flex-btn-group-container\">\n+                                <button class=\"btn btn-primary btn-sm mr-1\" routerLink=\"/course-management/{{ course.id }}/exercises/{{ exercise.id }}/instructor-dashboard\">\n+                                    {{ 'artemisApp.instructorCourseDashboard.exerciseDashboard' | translate }}\n+                                </button>\n+                                <button\n+                                    *ngIf=\"exercise.type === MODELING\"\n+                                    class=\"btn btn-primary btn-sm mr-1\"\n+                                    routerLink=\"/course-management/{{ course.id }}/modeling-exercises/{{ exercise.id }}/assessment\"\n+                                >\n+                                    {{ 'artemisApp.exercise.submissions' | translate }}\n+                                </button>\n+                                <button\n+                                    *ngIf=\"exercise.type === TEXT\"\n+                                    class=\"btn btn-primary btn-sm mr-1\"\n+                                    routerLink=\"/course-management/{{ course.id }}/text-exercises/{{ exercise.id }}/assessment\"\n+                                >\n+                                    {{ 'artemisApp.exercise.submissions' | translate }}\n+                                </button>\n+                                <button\n+                                    *ngIf=\"exercise.type === FILE_UPLOAD\"\n+                                    class=\"btn btn-primary btn-sm mr-1\"\n+                                    routerLink=\"/course-management/{{ course.id }}/file-upload-exercises/{{ exercise.id }}/assessment\"\n+                                >\n+                                    {{ 'artemisApp.exercise.submissions' | translate }}\n+                                </button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNTc1Mg==", "bodyText": "Can we do this in one network call? If we have a big course, this can trigger many (like 100) network calls!", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422705752", "createdAt": "2020-05-10T21:55:23Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.ts", "diffHunk": "@@ -0,0 +1,248 @@\n+import { Component, OnInit } from '@angular/core';\n+import { ActivatedRoute } from '@angular/router';\n+import { Location } from '@angular/common';\n+import { FileUploadExercise } from 'app/entities/file-upload-exercise.model';\n+import { FileUploadSubmission } from 'app/entities/file-upload-submission.model';\n+import { AccountService } from 'app/core/auth/account.service';\n+import { FileUploadSubmissionService } from 'app/exercises/file-upload/participate/file-upload-submission.service';\n+import { FileUploadAssessmentsService } from 'app/exercises/file-upload/assess/file-upload-assessment.service';\n+import { TranslateService } from '@ngx-translate/core';\n+import { Submission } from 'app/entities/submission.model';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { HttpResponse } from '@angular/common/http';\n+import { Course } from 'app/entities/course.model';\n+import { Exercise, ExerciseType } from 'app/entities/exercise.model';\n+import { AlertService } from 'app/core/alert/alert.service';\n+import { ModelingSubmissionService } from 'app/exercises/modeling/participate/modeling-submission.service';\n+import { ModelingExercise } from 'app/entities/modeling-exercise.model';\n+import { ModelingSubmission } from 'app/entities/modeling-submission.model';\n+import { ModelingAssessmentService } from 'app/exercises/modeling/assess/modeling-assessment.service';\n+import { TextSubmission } from 'app/entities/text-submission.model';\n+import { TextExercise } from 'app/entities/text-exercise.model';\n+import { TextSubmissionService } from 'app/exercises/text/participate/text-submission.service';\n+import { TextAssessmentsService } from 'app/exercises/text/assess/text-assessments.service';\n+\n+@Component({\n+    selector: 'jhi-assessment-locks',\n+    templateUrl: './assessment-locks.component.html',\n+})\n+export class AssessmentLocksComponent implements OnInit {\n+    course: Course;\n+    courseId: number;\n+    tutorId: number;\n+    exercises: Exercise[] = [];\n+\n+    modelingSubmissions: ModelingSubmission[] = [];\n+    textSubmissions: TextSubmission[] = [];\n+    fileUploadSubmissions: FileUploadSubmission[] = [];\n+\n+    private cancelConfirmationText: string;\n+\n+    constructor(\n+        private route: ActivatedRoute,\n+        private accountService: AccountService,\n+        private jhiAlertService: AlertService,\n+        private modelingSubmissionService: ModelingSubmissionService,\n+        private modelingAssessmentService: ModelingAssessmentService,\n+        private textSubmissionService: TextSubmissionService,\n+        private textAssessmentsService: TextAssessmentsService,\n+        private fileUploadSubmissionService: FileUploadSubmissionService,\n+        private fileUploadAssessmentsService: FileUploadAssessmentsService,\n+        translateService: TranslateService,\n+        private location: Location,\n+        private courseService: CourseManagementService,\n+    ) {\n+        translateService.get('artemisApp.assessment.messages.confirmCancel').subscribe((text) => (this.cancelConfirmationText = text));\n+    }\n+\n+    public async ngOnInit(): Promise<void> {\n+        this.route.params.subscribe((params) => {\n+            this.courseId = Number(params['courseId']);\n+        });\n+        this.route.queryParams.subscribe((queryParams) => {\n+            this.tutorId = Number(queryParams['tutorId']);\n+        });\n+        this.getExercises();\n+    }\n+\n+    /**\n+     * Get exercises for course\n+     */\n+    getExercises() {\n+        this.courseService.getForTutors(this.courseId).subscribe(\n+            (res: HttpResponse<Course>) => {\n+                if (!res.body) {\n+                    return;\n+                }\n+\n+                this.course = res.body;\n+                this.course.isAtLeastTutor = this.accountService.isAtLeastTutorInCourse(this.course);\n+                this.course.isAtLeastInstructor = this.accountService.isAtLeastInstructorInCourse(this.course);\n+\n+                if (this.course.exercises.length > 0) {\n+                    this.exercises = this.course.exercises;\n+                }\n+\n+                this.getAllSubmissions();\n+            },\n+            (response: string) => this.onError(response),\n+        );\n+    }\n+\n+    /**\n+     * Get submissions for exercise types modeling, text and file upload.\n+     * @param reload tells whether to reload all submissions\n+     */\n+    getAllSubmissions(reload?: boolean) {\n+        if (reload) {\n+            this.modelingSubmissions = [];\n+            this.textSubmissions = [];\n+            this.fileUploadSubmissions = [];\n+        }\n+        for (const exercise of this.exercises) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNTk0Mg==", "bodyText": "return not needed, remove arrow function.", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422705942", "createdAt": "2020-05-10T21:57:24Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.ts", "diffHunk": "@@ -0,0 +1,248 @@\n+import { Component, OnInit } from '@angular/core';\n+import { ActivatedRoute } from '@angular/router';\n+import { Location } from '@angular/common';\n+import { FileUploadExercise } from 'app/entities/file-upload-exercise.model';\n+import { FileUploadSubmission } from 'app/entities/file-upload-submission.model';\n+import { AccountService } from 'app/core/auth/account.service';\n+import { FileUploadSubmissionService } from 'app/exercises/file-upload/participate/file-upload-submission.service';\n+import { FileUploadAssessmentsService } from 'app/exercises/file-upload/assess/file-upload-assessment.service';\n+import { TranslateService } from '@ngx-translate/core';\n+import { Submission } from 'app/entities/submission.model';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { HttpResponse } from '@angular/common/http';\n+import { Course } from 'app/entities/course.model';\n+import { Exercise, ExerciseType } from 'app/entities/exercise.model';\n+import { AlertService } from 'app/core/alert/alert.service';\n+import { ModelingSubmissionService } from 'app/exercises/modeling/participate/modeling-submission.service';\n+import { ModelingExercise } from 'app/entities/modeling-exercise.model';\n+import { ModelingSubmission } from 'app/entities/modeling-submission.model';\n+import { ModelingAssessmentService } from 'app/exercises/modeling/assess/modeling-assessment.service';\n+import { TextSubmission } from 'app/entities/text-submission.model';\n+import { TextExercise } from 'app/entities/text-exercise.model';\n+import { TextSubmissionService } from 'app/exercises/text/participate/text-submission.service';\n+import { TextAssessmentsService } from 'app/exercises/text/assess/text-assessments.service';\n+\n+@Component({\n+    selector: 'jhi-assessment-locks',\n+    templateUrl: './assessment-locks.component.html',\n+})\n+export class AssessmentLocksComponent implements OnInit {\n+    course: Course;\n+    courseId: number;\n+    tutorId: number;\n+    exercises: Exercise[] = [];\n+\n+    modelingSubmissions: ModelingSubmission[] = [];\n+    textSubmissions: TextSubmission[] = [];\n+    fileUploadSubmissions: FileUploadSubmission[] = [];\n+\n+    private cancelConfirmationText: string;\n+\n+    constructor(\n+        private route: ActivatedRoute,\n+        private accountService: AccountService,\n+        private jhiAlertService: AlertService,\n+        private modelingSubmissionService: ModelingSubmissionService,\n+        private modelingAssessmentService: ModelingAssessmentService,\n+        private textSubmissionService: TextSubmissionService,\n+        private textAssessmentsService: TextAssessmentsService,\n+        private fileUploadSubmissionService: FileUploadSubmissionService,\n+        private fileUploadAssessmentsService: FileUploadAssessmentsService,\n+        translateService: TranslateService,\n+        private location: Location,\n+        private courseService: CourseManagementService,\n+    ) {\n+        translateService.get('artemisApp.assessment.messages.confirmCancel').subscribe((text) => (this.cancelConfirmationText = text));\n+    }\n+\n+    public async ngOnInit(): Promise<void> {\n+        this.route.params.subscribe((params) => {\n+            this.courseId = Number(params['courseId']);\n+        });\n+        this.route.queryParams.subscribe((queryParams) => {\n+            this.tutorId = Number(queryParams['tutorId']);\n+        });\n+        this.getExercises();\n+    }\n+\n+    /**\n+     * Get exercises for course\n+     */\n+    getExercises() {\n+        this.courseService.getForTutors(this.courseId).subscribe(\n+            (res: HttpResponse<Course>) => {\n+                if (!res.body) {\n+                    return;\n+                }\n+\n+                this.course = res.body;\n+                this.course.isAtLeastTutor = this.accountService.isAtLeastTutorInCourse(this.course);\n+                this.course.isAtLeastInstructor = this.accountService.isAtLeastInstructorInCourse(this.course);\n+\n+                if (this.course.exercises.length > 0) {\n+                    this.exercises = this.course.exercises;\n+                }\n+\n+                this.getAllSubmissions();\n+            },\n+            (response: string) => this.onError(response),\n+        );\n+    }\n+\n+    /**\n+     * Get submissions for exercise types modeling, text and file upload.\n+     * @param reload tells whether to reload all submissions\n+     */\n+    getAllSubmissions(reload?: boolean) {\n+        if (reload) {\n+            this.modelingSubmissions = [];\n+            this.textSubmissions = [];\n+            this.fileUploadSubmissions = [];\n+        }\n+        for (const exercise of this.exercises) {\n+            switch (exercise.type) {\n+                case ExerciseType.MODELING:\n+                    this.getModelingSubmissions(exercise as ModelingExercise);\n+                    break;\n+\n+                case ExerciseType.TEXT:\n+                    this.getTextSubmissions(exercise as TextExercise);\n+                    break;\n+\n+                case ExerciseType.FILE_UPLOAD:\n+                    this.getFileUploadSubmissions(exercise as FileUploadExercise);\n+                    break;\n+\n+                default:\n+                    break;\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Get submissions for modeling exercise\n+     * @param exercise modeling exercise\n+     */\n+    getModelingSubmissions(exercise: ModelingExercise) {\n+        this.modelingSubmissionService.getModelingSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<ModelingSubmission[]>) => {\n+            return response.body?.forEach((submission) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 128}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNjEwNA==", "bodyText": "This needs to change (see comment above), but this code is duplicated a few times and can easily refactored.", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422706104", "createdAt": "2020-05-10T21:58:01Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.ts", "diffHunk": "@@ -0,0 +1,248 @@\n+import { Component, OnInit } from '@angular/core';\n+import { ActivatedRoute } from '@angular/router';\n+import { Location } from '@angular/common';\n+import { FileUploadExercise } from 'app/entities/file-upload-exercise.model';\n+import { FileUploadSubmission } from 'app/entities/file-upload-submission.model';\n+import { AccountService } from 'app/core/auth/account.service';\n+import { FileUploadSubmissionService } from 'app/exercises/file-upload/participate/file-upload-submission.service';\n+import { FileUploadAssessmentsService } from 'app/exercises/file-upload/assess/file-upload-assessment.service';\n+import { TranslateService } from '@ngx-translate/core';\n+import { Submission } from 'app/entities/submission.model';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { HttpResponse } from '@angular/common/http';\n+import { Course } from 'app/entities/course.model';\n+import { Exercise, ExerciseType } from 'app/entities/exercise.model';\n+import { AlertService } from 'app/core/alert/alert.service';\n+import { ModelingSubmissionService } from 'app/exercises/modeling/participate/modeling-submission.service';\n+import { ModelingExercise } from 'app/entities/modeling-exercise.model';\n+import { ModelingSubmission } from 'app/entities/modeling-submission.model';\n+import { ModelingAssessmentService } from 'app/exercises/modeling/assess/modeling-assessment.service';\n+import { TextSubmission } from 'app/entities/text-submission.model';\n+import { TextExercise } from 'app/entities/text-exercise.model';\n+import { TextSubmissionService } from 'app/exercises/text/participate/text-submission.service';\n+import { TextAssessmentsService } from 'app/exercises/text/assess/text-assessments.service';\n+\n+@Component({\n+    selector: 'jhi-assessment-locks',\n+    templateUrl: './assessment-locks.component.html',\n+})\n+export class AssessmentLocksComponent implements OnInit {\n+    course: Course;\n+    courseId: number;\n+    tutorId: number;\n+    exercises: Exercise[] = [];\n+\n+    modelingSubmissions: ModelingSubmission[] = [];\n+    textSubmissions: TextSubmission[] = [];\n+    fileUploadSubmissions: FileUploadSubmission[] = [];\n+\n+    private cancelConfirmationText: string;\n+\n+    constructor(\n+        private route: ActivatedRoute,\n+        private accountService: AccountService,\n+        private jhiAlertService: AlertService,\n+        private modelingSubmissionService: ModelingSubmissionService,\n+        private modelingAssessmentService: ModelingAssessmentService,\n+        private textSubmissionService: TextSubmissionService,\n+        private textAssessmentsService: TextAssessmentsService,\n+        private fileUploadSubmissionService: FileUploadSubmissionService,\n+        private fileUploadAssessmentsService: FileUploadAssessmentsService,\n+        translateService: TranslateService,\n+        private location: Location,\n+        private courseService: CourseManagementService,\n+    ) {\n+        translateService.get('artemisApp.assessment.messages.confirmCancel').subscribe((text) => (this.cancelConfirmationText = text));\n+    }\n+\n+    public async ngOnInit(): Promise<void> {\n+        this.route.params.subscribe((params) => {\n+            this.courseId = Number(params['courseId']);\n+        });\n+        this.route.queryParams.subscribe((queryParams) => {\n+            this.tutorId = Number(queryParams['tutorId']);\n+        });\n+        this.getExercises();\n+    }\n+\n+    /**\n+     * Get exercises for course\n+     */\n+    getExercises() {\n+        this.courseService.getForTutors(this.courseId).subscribe(\n+            (res: HttpResponse<Course>) => {\n+                if (!res.body) {\n+                    return;\n+                }\n+\n+                this.course = res.body;\n+                this.course.isAtLeastTutor = this.accountService.isAtLeastTutorInCourse(this.course);\n+                this.course.isAtLeastInstructor = this.accountService.isAtLeastInstructorInCourse(this.course);\n+\n+                if (this.course.exercises.length > 0) {\n+                    this.exercises = this.course.exercises;\n+                }\n+\n+                this.getAllSubmissions();\n+            },\n+            (response: string) => this.onError(response),\n+        );\n+    }\n+\n+    /**\n+     * Get submissions for exercise types modeling, text and file upload.\n+     * @param reload tells whether to reload all submissions\n+     */\n+    getAllSubmissions(reload?: boolean) {\n+        if (reload) {\n+            this.modelingSubmissions = [];\n+            this.textSubmissions = [];\n+            this.fileUploadSubmissions = [];\n+        }\n+        for (const exercise of this.exercises) {\n+            switch (exercise.type) {\n+                case ExerciseType.MODELING:\n+                    this.getModelingSubmissions(exercise as ModelingExercise);\n+                    break;\n+\n+                case ExerciseType.TEXT:\n+                    this.getTextSubmissions(exercise as TextExercise);\n+                    break;\n+\n+                case ExerciseType.FILE_UPLOAD:\n+                    this.getFileUploadSubmissions(exercise as FileUploadExercise);\n+                    break;\n+\n+                default:\n+                    break;\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Get submissions for modeling exercise\n+     * @param exercise modeling exercise\n+     */\n+    getModelingSubmissions(exercise: ModelingExercise) {\n+        this.modelingSubmissionService.getModelingSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<ModelingSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 136}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNjIzNQ==", "bodyText": "In this case, do we need to perform all 100 network calls again?", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422706235", "createdAt": "2020-05-10T21:59:04Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.ts", "diffHunk": "@@ -0,0 +1,248 @@\n+import { Component, OnInit } from '@angular/core';\n+import { ActivatedRoute } from '@angular/router';\n+import { Location } from '@angular/common';\n+import { FileUploadExercise } from 'app/entities/file-upload-exercise.model';\n+import { FileUploadSubmission } from 'app/entities/file-upload-submission.model';\n+import { AccountService } from 'app/core/auth/account.service';\n+import { FileUploadSubmissionService } from 'app/exercises/file-upload/participate/file-upload-submission.service';\n+import { FileUploadAssessmentsService } from 'app/exercises/file-upload/assess/file-upload-assessment.service';\n+import { TranslateService } from '@ngx-translate/core';\n+import { Submission } from 'app/entities/submission.model';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { HttpResponse } from '@angular/common/http';\n+import { Course } from 'app/entities/course.model';\n+import { Exercise, ExerciseType } from 'app/entities/exercise.model';\n+import { AlertService } from 'app/core/alert/alert.service';\n+import { ModelingSubmissionService } from 'app/exercises/modeling/participate/modeling-submission.service';\n+import { ModelingExercise } from 'app/entities/modeling-exercise.model';\n+import { ModelingSubmission } from 'app/entities/modeling-submission.model';\n+import { ModelingAssessmentService } from 'app/exercises/modeling/assess/modeling-assessment.service';\n+import { TextSubmission } from 'app/entities/text-submission.model';\n+import { TextExercise } from 'app/entities/text-exercise.model';\n+import { TextSubmissionService } from 'app/exercises/text/participate/text-submission.service';\n+import { TextAssessmentsService } from 'app/exercises/text/assess/text-assessments.service';\n+\n+@Component({\n+    selector: 'jhi-assessment-locks',\n+    templateUrl: './assessment-locks.component.html',\n+})\n+export class AssessmentLocksComponent implements OnInit {\n+    course: Course;\n+    courseId: number;\n+    tutorId: number;\n+    exercises: Exercise[] = [];\n+\n+    modelingSubmissions: ModelingSubmission[] = [];\n+    textSubmissions: TextSubmission[] = [];\n+    fileUploadSubmissions: FileUploadSubmission[] = [];\n+\n+    private cancelConfirmationText: string;\n+\n+    constructor(\n+        private route: ActivatedRoute,\n+        private accountService: AccountService,\n+        private jhiAlertService: AlertService,\n+        private modelingSubmissionService: ModelingSubmissionService,\n+        private modelingAssessmentService: ModelingAssessmentService,\n+        private textSubmissionService: TextSubmissionService,\n+        private textAssessmentsService: TextAssessmentsService,\n+        private fileUploadSubmissionService: FileUploadSubmissionService,\n+        private fileUploadAssessmentsService: FileUploadAssessmentsService,\n+        translateService: TranslateService,\n+        private location: Location,\n+        private courseService: CourseManagementService,\n+    ) {\n+        translateService.get('artemisApp.assessment.messages.confirmCancel').subscribe((text) => (this.cancelConfirmationText = text));\n+    }\n+\n+    public async ngOnInit(): Promise<void> {\n+        this.route.params.subscribe((params) => {\n+            this.courseId = Number(params['courseId']);\n+        });\n+        this.route.queryParams.subscribe((queryParams) => {\n+            this.tutorId = Number(queryParams['tutorId']);\n+        });\n+        this.getExercises();\n+    }\n+\n+    /**\n+     * Get exercises for course\n+     */\n+    getExercises() {\n+        this.courseService.getForTutors(this.courseId).subscribe(\n+            (res: HttpResponse<Course>) => {\n+                if (!res.body) {\n+                    return;\n+                }\n+\n+                this.course = res.body;\n+                this.course.isAtLeastTutor = this.accountService.isAtLeastTutorInCourse(this.course);\n+                this.course.isAtLeastInstructor = this.accountService.isAtLeastInstructorInCourse(this.course);\n+\n+                if (this.course.exercises.length > 0) {\n+                    this.exercises = this.course.exercises;\n+                }\n+\n+                this.getAllSubmissions();\n+            },\n+            (response: string) => this.onError(response),\n+        );\n+    }\n+\n+    /**\n+     * Get submissions for exercise types modeling, text and file upload.\n+     * @param reload tells whether to reload all submissions\n+     */\n+    getAllSubmissions(reload?: boolean) {\n+        if (reload) {\n+            this.modelingSubmissions = [];\n+            this.textSubmissions = [];\n+            this.fileUploadSubmissions = [];\n+        }\n+        for (const exercise of this.exercises) {\n+            switch (exercise.type) {\n+                case ExerciseType.MODELING:\n+                    this.getModelingSubmissions(exercise as ModelingExercise);\n+                    break;\n+\n+                case ExerciseType.TEXT:\n+                    this.getTextSubmissions(exercise as TextExercise);\n+                    break;\n+\n+                case ExerciseType.FILE_UPLOAD:\n+                    this.getFileUploadSubmissions(exercise as FileUploadExercise);\n+                    break;\n+\n+                default:\n+                    break;\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Get submissions for modeling exercise\n+     * @param exercise modeling exercise\n+     */\n+    getModelingSubmissions(exercise: ModelingExercise) {\n+        this.modelingSubmissionService.getModelingSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<ModelingSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;\n+\n+                this.modelingSubmissions.push(submission);\n+            });\n+        });\n+    }\n+\n+    /**\n+     * Get submissions for text exercise\n+     * @param exercise text exercise\n+     */\n+    getTextSubmissions(exercise: TextExercise) {\n+        this.textSubmissionService.getTextSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<TextSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;\n+\n+                this.textSubmissions.push(submission);\n+            });\n+        });\n+    }\n+\n+    /**\n+     * Get submissions for file uplaod exercise\n+     * @param exercise file upload exercise\n+     */\n+    getFileUploadSubmissions(exercise: FileUploadExercise) {\n+        this.fileUploadSubmissionService.getFileUploadSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<FileUploadSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;\n+\n+                this.fileUploadSubmissions.push(submission);\n+            });\n+        });\n+    }\n+\n+    /**\n+     * Cancel the current assessment and reload the submissions to reflect the change.\n+     * @param submission submission\n+     */\n+    cancelModelingAssessment(submission: Submission) {\n+        const confirmCancel = window.confirm(this.cancelConfirmationText);\n+        if (confirmCancel) {\n+            this.modelingAssessmentService.cancelAssessment(submission.id).subscribe(() => {\n+                this.getAllSubmissions(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNjMwNg==", "bodyText": "This is duplicated code and could be one function.", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422706306", "createdAt": "2020-05-10T21:59:54Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.ts", "diffHunk": "@@ -0,0 +1,248 @@\n+import { Component, OnInit } from '@angular/core';\n+import { ActivatedRoute } from '@angular/router';\n+import { Location } from '@angular/common';\n+import { FileUploadExercise } from 'app/entities/file-upload-exercise.model';\n+import { FileUploadSubmission } from 'app/entities/file-upload-submission.model';\n+import { AccountService } from 'app/core/auth/account.service';\n+import { FileUploadSubmissionService } from 'app/exercises/file-upload/participate/file-upload-submission.service';\n+import { FileUploadAssessmentsService } from 'app/exercises/file-upload/assess/file-upload-assessment.service';\n+import { TranslateService } from '@ngx-translate/core';\n+import { Submission } from 'app/entities/submission.model';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { HttpResponse } from '@angular/common/http';\n+import { Course } from 'app/entities/course.model';\n+import { Exercise, ExerciseType } from 'app/entities/exercise.model';\n+import { AlertService } from 'app/core/alert/alert.service';\n+import { ModelingSubmissionService } from 'app/exercises/modeling/participate/modeling-submission.service';\n+import { ModelingExercise } from 'app/entities/modeling-exercise.model';\n+import { ModelingSubmission } from 'app/entities/modeling-submission.model';\n+import { ModelingAssessmentService } from 'app/exercises/modeling/assess/modeling-assessment.service';\n+import { TextSubmission } from 'app/entities/text-submission.model';\n+import { TextExercise } from 'app/entities/text-exercise.model';\n+import { TextSubmissionService } from 'app/exercises/text/participate/text-submission.service';\n+import { TextAssessmentsService } from 'app/exercises/text/assess/text-assessments.service';\n+\n+@Component({\n+    selector: 'jhi-assessment-locks',\n+    templateUrl: './assessment-locks.component.html',\n+})\n+export class AssessmentLocksComponent implements OnInit {\n+    course: Course;\n+    courseId: number;\n+    tutorId: number;\n+    exercises: Exercise[] = [];\n+\n+    modelingSubmissions: ModelingSubmission[] = [];\n+    textSubmissions: TextSubmission[] = [];\n+    fileUploadSubmissions: FileUploadSubmission[] = [];\n+\n+    private cancelConfirmationText: string;\n+\n+    constructor(\n+        private route: ActivatedRoute,\n+        private accountService: AccountService,\n+        private jhiAlertService: AlertService,\n+        private modelingSubmissionService: ModelingSubmissionService,\n+        private modelingAssessmentService: ModelingAssessmentService,\n+        private textSubmissionService: TextSubmissionService,\n+        private textAssessmentsService: TextAssessmentsService,\n+        private fileUploadSubmissionService: FileUploadSubmissionService,\n+        private fileUploadAssessmentsService: FileUploadAssessmentsService,\n+        translateService: TranslateService,\n+        private location: Location,\n+        private courseService: CourseManagementService,\n+    ) {\n+        translateService.get('artemisApp.assessment.messages.confirmCancel').subscribe((text) => (this.cancelConfirmationText = text));\n+    }\n+\n+    public async ngOnInit(): Promise<void> {\n+        this.route.params.subscribe((params) => {\n+            this.courseId = Number(params['courseId']);\n+        });\n+        this.route.queryParams.subscribe((queryParams) => {\n+            this.tutorId = Number(queryParams['tutorId']);\n+        });\n+        this.getExercises();\n+    }\n+\n+    /**\n+     * Get exercises for course\n+     */\n+    getExercises() {\n+        this.courseService.getForTutors(this.courseId).subscribe(\n+            (res: HttpResponse<Course>) => {\n+                if (!res.body) {\n+                    return;\n+                }\n+\n+                this.course = res.body;\n+                this.course.isAtLeastTutor = this.accountService.isAtLeastTutorInCourse(this.course);\n+                this.course.isAtLeastInstructor = this.accountService.isAtLeastInstructorInCourse(this.course);\n+\n+                if (this.course.exercises.length > 0) {\n+                    this.exercises = this.course.exercises;\n+                }\n+\n+                this.getAllSubmissions();\n+            },\n+            (response: string) => this.onError(response),\n+        );\n+    }\n+\n+    /**\n+     * Get submissions for exercise types modeling, text and file upload.\n+     * @param reload tells whether to reload all submissions\n+     */\n+    getAllSubmissions(reload?: boolean) {\n+        if (reload) {\n+            this.modelingSubmissions = [];\n+            this.textSubmissions = [];\n+            this.fileUploadSubmissions = [];\n+        }\n+        for (const exercise of this.exercises) {\n+            switch (exercise.type) {\n+                case ExerciseType.MODELING:\n+                    this.getModelingSubmissions(exercise as ModelingExercise);\n+                    break;\n+\n+                case ExerciseType.TEXT:\n+                    this.getTextSubmissions(exercise as TextExercise);\n+                    break;\n+\n+                case ExerciseType.FILE_UPLOAD:\n+                    this.getFileUploadSubmissions(exercise as FileUploadExercise);\n+                    break;\n+\n+                default:\n+                    break;\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Get submissions for modeling exercise\n+     * @param exercise modeling exercise\n+     */\n+    getModelingSubmissions(exercise: ModelingExercise) {\n+        this.modelingSubmissionService.getModelingSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<ModelingSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;\n+\n+                this.modelingSubmissions.push(submission);\n+            });\n+        });\n+    }\n+\n+    /**\n+     * Get submissions for text exercise\n+     * @param exercise text exercise\n+     */\n+    getTextSubmissions(exercise: TextExercise) {\n+        this.textSubmissionService.getTextSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<TextSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;\n+\n+                this.textSubmissions.push(submission);\n+            });\n+        });\n+    }\n+\n+    /**\n+     * Get submissions for file uplaod exercise\n+     * @param exercise file upload exercise\n+     */\n+    getFileUploadSubmissions(exercise: FileUploadExercise) {\n+        this.fileUploadSubmissionService.getFileUploadSubmissionsForExercise(exercise.id, { submittedOnly: true }).subscribe((response: HttpResponse<FileUploadSubmission[]>) => {\n+            return response.body?.forEach((submission) => {\n+                if (!submission.result || !submission.submitted || submission.result.assessor.id !== this.tutorId) {\n+                    return;\n+                }\n+                // reconnect some associations\n+                submission.result.submission = submission;\n+                submission.result.participation = submission.participation;\n+                submission.participation.results = [submission.result];\n+                submission.exerciseId = exercise.id;\n+\n+                this.fileUploadSubmissions.push(submission);\n+            });\n+        });\n+    }\n+\n+    /**\n+     * Cancel the current assessment and reload the submissions to reflect the change.\n+     * @param submission submission\n+     */\n+    cancelModelingAssessment(submission: Submission) {\n+        const confirmCancel = window.confirm(this.cancelConfirmationText);\n+        if (confirmCancel) {\n+            this.modelingAssessmentService.cancelAssessment(submission.id).subscribe(() => {\n+                this.getAllSubmissions(true);\n+            });\n+        }\n+    }\n+\n+    /**\n+     * Cancel the current assessment and reload the submissions to reflect the change.\n+     * @param submission submission\n+     */\n+    cancelTextAssessment(submission: Submission) {\n+        const confirmCancel = window.confirm(this.cancelConfirmationText);\n+        if (confirmCancel && submission.exerciseId) {\n+            this.textAssessmentsService.cancelAssessment(submission.exerciseId, submission.id).subscribe(() => {\n+                this.getAllSubmissions(true);\n+            });\n+        }\n+    }\n+\n+    /**\n+     * Cancel the current assessment and reload the submissions to reflect the change.\n+     * @param submission submission\n+     */\n+    cancelFileUploadAssessment(submission: Submission) {\n+        const confirmCancel = window.confirm(this.cancelConfirmationText);\n+        if (confirmCancel) {\n+            this.fileUploadAssessmentsService.cancelAssessment(submission.id).subscribe(() => {\n+                this.getAllSubmissions(true);\n+            });\n+        }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 222}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNjQyMQ==", "bodyText": "if wired up correctly, this could be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                <td>{{ getExerciseName(fileUploadSubmission.exerciseId) }}</td>\n          \n          \n            \n                                <td>{{ fileUploadSubmission.participation.exercise.title }}</td>", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422706421", "createdAt": "2020-05-10T22:01:03Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.html", "diffHunk": "@@ -0,0 +1,192 @@\n+<div class=\"course-info-bar\">\n+    <div class=\"row justify-content-between\">\n+        <div class=\"col-8\">\n+            <h2>\n+                <fa-icon [icon]=\"'arrow-left'\" (click)=\"back()\" class=\"back-button mr-2\"></fa-icon>\n+                <span>{{ 'artemisApp.assessment.locks.title' | translate }}</span>\n+            </h2>\n+        </div>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"modelingSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.modelingSubmissions' | translate }}\n+    </h4>\n+\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th class=\"th-link\">#</th>\n+                    <th class=\"th-link\">Id</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let modelingSubmission of modelingSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ modelingSubmission.id }}</td>\n+                    <td>{{ getExerciseName(modelingSubmission.exerciseId) }}</td>\n+                    <td>{{ modelingSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ modelingSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"modelingSubmission.result && modelingSubmission.result.score != null\">{{ modelingSubmission.result.score }}%</span>\n+                    </td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"modelingSubmission && modelingSubmission.result\"\n+                                [routerLink]=\"[\n+                                    '/course-management',\n+                                    courseId,\n+                                    'modeling-exercises',\n+                                    modelingSubmission.exerciseId,\n+                                    'submissions',\n+                                    modelingSubmission.id,\n+                                    'assessment'\n+                                ]\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"modelingSubmission && modelingSubmission.result && !modelingSubmission.result.completionDate\"\n+                                (click)=\"cancelModelingAssessment(modelingSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"textSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.textSubmissions' | translate }}\n+    </h4>\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Id</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th jhiTranslate=\"artemisApp.tutorExerciseDashboard.language\">Language</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let textSubmission of textSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ textSubmission.id }}</td>\n+                    <td>{{ getExerciseName(textSubmission.exerciseId) }}</td>\n+                    <td>{{ textSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ textSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"textSubmission.result && textSubmission.result.score != null\">{{ textSubmission.result.score }} %</span>\n+                    </td>\n+                    <td>{{ 'artemisApp.tutorExerciseDashboard.languages.' + (textSubmission.language || 'UNKNOWN') | translate }}</td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"textSubmission && textSubmission.result\"\n+                                [routerLink]=\"['/course-management', courseId, 'text-exercises', textSubmission.exerciseId, 'submissions', textSubmission.id, 'assessment']\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"textSubmission && textSubmission.result && !textSubmission.result.completionDate\"\n+                                (click)=\"cancelTextAssessment(textSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"fileUploadSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.fileUploadSubmissions' | translate }}\n+    </h4>\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Id</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let fileUploadSubmission of fileUploadSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ fileUploadSubmission.id }}</td>\n+                    <td>{{ getExerciseName(fileUploadSubmission.exerciseId) }}</td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNjUwMA==", "bodyText": "Please extract this in a template or component as this is reused above.", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422706500", "createdAt": "2020-05-10T22:01:47Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.html", "diffHunk": "@@ -0,0 +1,192 @@\n+<div class=\"course-info-bar\">\n+    <div class=\"row justify-content-between\">\n+        <div class=\"col-8\">\n+            <h2>\n+                <fa-icon [icon]=\"'arrow-left'\" (click)=\"back()\" class=\"back-button mr-2\"></fa-icon>\n+                <span>{{ 'artemisApp.assessment.locks.title' | translate }}</span>\n+            </h2>\n+        </div>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"modelingSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.modelingSubmissions' | translate }}\n+    </h4>\n+\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th class=\"th-link\">#</th>\n+                    <th class=\"th-link\">Id</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let modelingSubmission of modelingSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ modelingSubmission.id }}</td>\n+                    <td>{{ getExerciseName(modelingSubmission.exerciseId) }}</td>\n+                    <td>{{ modelingSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ modelingSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"modelingSubmission.result && modelingSubmission.result.score != null\">{{ modelingSubmission.result.score }}%</span>\n+                    </td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"modelingSubmission && modelingSubmission.result\"\n+                                [routerLink]=\"[\n+                                    '/course-management',\n+                                    courseId,\n+                                    'modeling-exercises',\n+                                    modelingSubmission.exerciseId,\n+                                    'submissions',\n+                                    modelingSubmission.id,\n+                                    'assessment'\n+                                ]\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"modelingSubmission && modelingSubmission.result && !modelingSubmission.result.completionDate\"\n+                                (click)=\"cancelModelingAssessment(modelingSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"textSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.textSubmissions' | translate }}\n+    </h4>\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Id</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th jhiTranslate=\"artemisApp.tutorExerciseDashboard.language\">Language</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let textSubmission of textSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ textSubmission.id }}</td>\n+                    <td>{{ getExerciseName(textSubmission.exerciseId) }}</td>\n+                    <td>{{ textSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ textSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"textSubmission.result && textSubmission.result.score != null\">{{ textSubmission.result.score }} %</span>\n+                    </td>\n+                    <td>{{ 'artemisApp.tutorExerciseDashboard.languages.' + (textSubmission.language || 'UNKNOWN') | translate }}</td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"textSubmission && textSubmission.result\"\n+                                [routerLink]=\"['/course-management', courseId, 'text-exercises', textSubmission.exerciseId, 'submissions', textSubmission.id, 'assessment']\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"textSubmission && textSubmission.result && !textSubmission.result.completionDate\"\n+                                (click)=\"cancelTextAssessment(textSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"fileUploadSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.fileUploadSubmissions' | translate }}\n+    </h4>\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Id</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let fileUploadSubmission of fileUploadSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ fileUploadSubmission.id }}</td>\n+                    <td>{{ getExerciseName(fileUploadSubmission.exerciseId) }}</td>\n+                    <td>{{ fileUploadSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ fileUploadSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"fileUploadSubmission.result && fileUploadSubmission.result.score != null\">{{ fileUploadSubmission.result.score }} %</span>\n+                    </td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"fileUploadSubmission && fileUploadSubmission.result\"\n+                                [routerLink]=\"[\n+                                    '/course-management',\n+                                    courseId,\n+                                    'file-upload-exercises',\n+                                    fileUploadSubmission.exerciseId,\n+                                    'submissions',\n+                                    fileUploadSubmission.id,\n+                                    'assessment'\n+                                ]\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"fileUploadSubmission && fileUploadSubmission.result && !fileUploadSubmission.result.completionDate\"\n+                                (click)=\"cancelFileUploadAssessment(fileUploadSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjcwNjUyMA==", "bodyText": "See comment below.", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r422706520", "createdAt": "2020-05-10T22:02:05Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.html", "diffHunk": "@@ -0,0 +1,192 @@\n+<div class=\"course-info-bar\">\n+    <div class=\"row justify-content-between\">\n+        <div class=\"col-8\">\n+            <h2>\n+                <fa-icon [icon]=\"'arrow-left'\" (click)=\"back()\" class=\"back-button mr-2\"></fa-icon>\n+                <span>{{ 'artemisApp.assessment.locks.title' | translate }}</span>\n+            </h2>\n+        </div>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"modelingSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.modelingSubmissions' | translate }}\n+    </h4>\n+\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th class=\"th-link\">#</th>\n+                    <th class=\"th-link\">Id</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th class=\"th-link\" jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let modelingSubmission of modelingSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ modelingSubmission.id }}</td>\n+                    <td>{{ getExerciseName(modelingSubmission.exerciseId) }}</td>\n+                    <td>{{ modelingSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ modelingSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"modelingSubmission.result && modelingSubmission.result.score != null\">{{ modelingSubmission.result.score }}%</span>\n+                    </td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"modelingSubmission && modelingSubmission.result\"\n+                                [routerLink]=\"[\n+                                    '/course-management',\n+                                    courseId,\n+                                    'modeling-exercises',\n+                                    modelingSubmission.exerciseId,\n+                                    'submissions',\n+                                    modelingSubmission.id,\n+                                    'assessment'\n+                                ]\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"modelingSubmission && modelingSubmission.result && !modelingSubmission.result.completionDate\"\n+                                (click)=\"cancelModelingAssessment(modelingSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>\n+\n+<div *ngIf=\"textSubmissions.length > 0\">\n+    <h4 style=\"margin-top: 10px;\">\n+        {{ 'artemisApp.assessment.locks.textSubmissions' | translate }}\n+    </h4>\n+    <div class=\"table-responsive\">\n+        <table class=\"table table-striped exercise-table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Id</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.locks.exercise\">Exercise</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionDate\">Submission date</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.submissionCount\">Submission count</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.score\">Score</th>\n+                    <th jhiTranslate=\"artemisApp.tutorExerciseDashboard.language\">Language</th>\n+                    <th jhiTranslate=\"artemisApp.assessment.dashboard.columns.action\">Action</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                <tr *ngFor=\"let textSubmission of textSubmissions; let i = index\">\n+                    <td>{{ i + 1 }}</td>\n+                    <td>{{ textSubmission.id }}</td>\n+                    <td>{{ getExerciseName(textSubmission.exerciseId) }}</td>\n+                    <td>{{ textSubmission.submissionDate | date: 'MMM d, y HH:mm:ss' }}</td>\n+                    <td>{{ textSubmission.participation.submissions.length }}</td>\n+                    <td>\n+                        <span *ngIf=\"textSubmission.result && textSubmission.result.score != null\">{{ textSubmission.result.score }} %</span>\n+                    </td>\n+                    <td>{{ 'artemisApp.tutorExerciseDashboard.languages.' + (textSubmission.language || 'UNKNOWN') | translate }}</td>\n+                    <td>\n+                        <span *jhiHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_INSTRUCTOR', 'ROLE_TA']\">\n+                            <button\n+                                *ngIf=\"textSubmission && textSubmission.result\"\n+                                [routerLink]=\"['/course-management', courseId, 'text-exercises', textSubmission.exerciseId, 'submissions', textSubmission.id, 'assessment']\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'folder-open'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.open' | translate }}\n+                            </button>\n+                        </span>\n+                        <span>\n+                            <button\n+                                *ngIf=\"textSubmission && textSubmission.result && !textSubmission.result.completionDate\"\n+                                (click)=\"cancelTextAssessment(textSubmission)\"\n+                                class=\"btn btn-outline-secondary btn-sm mb-1\"\n+                            >\n+                                <fa-icon [icon]=\"'ban'\" [fixedWidth]=\"true\"></fa-icon>&nbsp;{{ 'artemisApp.assessment.dashboard.actions.cancel' | translate }}\n+                            </button>\n+                        </span>\n+                    </td>\n+                </tr>\n+            </tbody>\n+        </table>\n+    </div>\n+</div>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f5a16d4d693ceb0c92821905e8048ab5e5af3df"}, "originalPosition": 127}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3a3ed42588388577aa3048d28e61458f2fa99f3", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/a3a3ed42588388577aa3048d28e61458f2fa99f3", "committedDate": "2020-05-11T10:38:39Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b91d5381cfd32a153593538743a402af2c237b7f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/b91d5381cfd32a153593538743a402af2c237b7f", "committedDate": "2020-05-11T19:24:17Z", "message": "Introduces requested changes from PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5973b623fda5684ac5476f833cfee952cf9b6e47", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/5973b623fda5684ac5476f833cfee952cf9b6e47", "committedDate": "2020-05-11T19:24:39Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/48d7c021511b8dbe74ee3cb62c9f4039379cc08f", "committedDate": "2020-05-11T19:33:21Z", "message": "Fix Java Code Style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTY2NDk1", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-409966495", "createdAt": "2020-05-12T11:57:25Z", "commit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTo1NzoyNlrOGUDFfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTo1NzoyNlrOGUDFfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NTI2MQ==", "bodyText": "bad performance!", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r423675261", "createdAt": "2020-05-12T11:57:26Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/CourseResource.java", "diffHunk": "@@ -636,6 +654,60 @@ private void validateComplaintsConfig(Course course) {\n         return ResponseUtil.wrapOrNotFound(Optional.of(course));\n     }\n \n+    /**\n+     * GET /courses/:courseId/submissions Get all submissions for course\n+     *\n+     * @param courseId the id of the course\n+     * @return the ResponseEntity with status 200 (OK) and with body the course, or with status 404 (Not Found)\n+     * @throws AccessForbiddenException if the current user doesn't have the permission to access the course\n+     */\n+    @GetMapping(\"/courses/{courseId}/submissions\")\n+    @PreAuthorize(\"hasAnyRole('TA', 'INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<List<Submission>> getSubmissionsForCourse(@PathVariable Long courseId) throws AccessForbiddenException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f"}, "originalPosition": 79}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTY3ODgx", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-409967881", "createdAt": "2020-05-12T11:59:25Z", "commit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTo1OToyNVrOGUDJrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTo1OToyNVrOGUDJrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NjMzMw==", "bodyText": "Make sure to filter (i.e. hide) elements that should not be visible to tutors, e.g. they are not allowed to see the author of the submission", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r423676333", "createdAt": "2020-05-12T11:59:25Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/CourseResource.java", "diffHunk": "@@ -636,6 +654,60 @@ private void validateComplaintsConfig(Course course) {\n         return ResponseUtil.wrapOrNotFound(Optional.of(course));\n     }\n \n+    /**\n+     * GET /courses/:courseId/submissions Get all submissions for course\n+     *\n+     * @param courseId the id of the course\n+     * @return the ResponseEntity with status 200 (OK) and with body the course, or with status 404 (Not Found)\n+     * @throws AccessForbiddenException if the current user doesn't have the permission to access the course\n+     */\n+    @GetMapping(\"/courses/{courseId}/submissions\")\n+    @PreAuthorize(\"hasAnyRole('TA', 'INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<List<Submission>> getSubmissionsForCourse(@PathVariable Long courseId) throws AccessForbiddenException {\n+        log.debug(\"REST request to get all submissions for course : {}\", courseId);\n+        long start = System.currentTimeMillis();\n+        Course course = courseService.findOneWithExercises(courseId);\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        if (!authCheckService.isAtLeastInstructorInCourse(course, user)) {\n+            throw new AccessForbiddenException(\"You are not allowed to access this resource\");\n+        }\n+\n+        List<Exercise> exercises = exerciseService.findAllForCourse(course, user);\n+        List<Submission> submissions = new ArrayList<>();\n+\n+        for (Exercise exercise : exercises) {\n+            if (exercise instanceof ModelingExercise) {\n+                List<ModelingSubmission> modelingSubmissions = modelingSubmissionService.getModelingSubmissions(exercise.getId(), true);\n+                for (ModelingSubmission modelingSubmission : modelingSubmissions) {\n+                    modelingSubmission.getParticipation().setExercise(exercise);\n+                }\n+                submissions.addAll(modelingSubmissions);\n+            }\n+            else if (exercise instanceof TextExercise) {\n+                List<TextSubmission> textSubmissions = textSubmissionService.getTextSubmissionsByExerciseId(exercise.getId(), true);\n+                for (TextSubmission textSubmission : textSubmissions) {\n+                    textSubmission.getParticipation().setExercise(exercise);\n+                }\n+                submissions.addAll(textSubmissions);\n+            }\n+            else if (exercise instanceof FileUploadExercise) {\n+                List<FileUploadSubmission> fileUploadSubmissions = fileUploadSubmissionService.getFileUploadSubmissions(exercise.getId(), true);\n+                for (FileUploadSubmission fileUploadSubmission : fileUploadSubmissions) {\n+                    fileUploadSubmission.getParticipation().setExercise(exercise);\n+                }\n+                submissions.addAll(fileUploadSubmissions);\n+            }\n+\n+            Set<Submission> set = new HashSet<>(submissions);\n+            submissions.clear();\n+            submissions.addAll(set);\n+\n+        }\n+        long end = System.currentTimeMillis();\n+        log.info(\"Finished /courses/\" + courseId + \"/submissions call in \" + (end - start) + \"ms\");\n+        return ResponseEntity.ok(submissions);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f"}, "originalPosition": 121}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTcwNTA1", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-409970505", "createdAt": "2020-05-12T12:03:11Z", "commit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjowMzoxMVrOGUDRaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjowMzoxMVrOGUDRaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3ODMxMg==", "bodyText": "do we need all these services?", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r423678312", "createdAt": "2020-05-12T12:03:11Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/assessment/assessment-locks/assessment-locks.component.ts", "diffHunk": "@@ -0,0 +1,155 @@\n+import { Component, OnInit } from '@angular/core';\n+import { ActivatedRoute } from '@angular/router';\n+import { Location } from '@angular/common';\n+import { AccountService } from 'app/core/auth/account.service';\n+import { FileUploadSubmissionService } from 'app/exercises/file-upload/participate/file-upload-submission.service';\n+import { FileUploadAssessmentsService } from 'app/exercises/file-upload/assess/file-upload-assessment.service';\n+import { TranslateService } from '@ngx-translate/core';\n+import { Submission, SubmissionExerciseType } from 'app/entities/submission.model';\n+import { CourseManagementService } from 'app/course/manage/course-management.service';\n+import { HttpResponse } from '@angular/common/http';\n+import { Course } from 'app/entities/course.model';\n+import { Exercise, getIcon, getIconTooltip } from 'app/entities/exercise.model';\n+import { AlertService } from 'app/core/alert/alert.service';\n+import { ModelingSubmissionService } from 'app/exercises/modeling/participate/modeling-submission.service';\n+import { ModelingAssessmentService } from 'app/exercises/modeling/assess/modeling-assessment.service';\n+import { TextSubmissionService } from 'app/exercises/text/participate/text-submission.service';\n+import { TextAssessmentsService } from 'app/exercises/text/assess/text-assessments.service';\n+\n+@Component({\n+    selector: 'jhi-assessment-locks',\n+    templateUrl: './assessment-locks.component.html',\n+})\n+export class AssessmentLocksComponent implements OnInit {\n+    course: Course;\n+    courseId: number;\n+    tutorId: number;\n+    exercises: Exercise[] = [];\n+\n+    submissions: Submission[] = [];\n+\n+    private cancelConfirmationText: string;\n+\n+    getIcon = getIcon;\n+    getIconTooltip = getIconTooltip;\n+\n+    constructor(\n+        private route: ActivatedRoute,\n+        private accountService: AccountService,\n+        private jhiAlertService: AlertService,\n+        private modelingSubmissionService: ModelingSubmissionService,\n+        private modelingAssessmentService: ModelingAssessmentService,\n+        private textSubmissionService: TextSubmissionService,\n+        private textAssessmentsService: TextAssessmentsService,\n+        private fileUploadSubmissionService: FileUploadSubmissionService,\n+        private fileUploadAssessmentsService: FileUploadAssessmentsService,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48d7c021511b8dbe74ee3cb62c9f4039379cc08f"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5c73443774d4d801a2da343b64cb83efc6f8ce0", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/e5c73443774d4d801a2da343b64cb83efc6f8ce0", "committedDate": "2020-05-18T09:00:34Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2be2909b29208b4665394de2b3bdea57e5e0afc", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/b2be2909b29208b4665394de2b3bdea57e5e0afc", "committedDate": "2020-05-18T09:12:21Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f15e4f5eec6f36acd59f8e95653215a4ba99e13", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/6f15e4f5eec6f36acd59f8e95653215a4ba99e13", "committedDate": "2020-05-18T12:58:23Z", "message": "Optimize performance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d542cffc9151959e8c7794185e6b0fc11202d11", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/2d542cffc9151959e8c7794185e6b0fc11202d11", "committedDate": "2020-05-18T13:10:36Z", "message": "fix java code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05665ec0a8e3158c80609b5ffe2465580be526d3", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/05665ec0a8e3158c80609b5ffe2465580be526d3", "committedDate": "2020-05-18T13:46:07Z", "message": "Remove unused services"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7a9554d55012d39881192764e108d81ced50182", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/c7a9554d55012d39881192764e108d81ced50182", "committedDate": "2020-05-18T13:47:15Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82c5ffec4befd54d33b191c8d8137db3754de35a", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/82c5ffec4befd54d33b191c8d8137db3754de35a", "committedDate": "2020-05-18T14:07:52Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9390017132d725de3c5b8a89a15548ad1f4e20f2", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/9390017132d725de3c5b8a89a15548ad1f4e20f2", "committedDate": "2020-05-21T09:27:29Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/service/SubmissionService.java\n#\tsrc/main/webapp/app/course/dashboards/tutor-course-dashboard/tutor-course-dashboard.component.html\n#\tsrc/main/webapp/app/course/manage/course-management.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1298745f39ec0537489d25d42fecc0eb6bcd3faa", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/1298745f39ec0537489d25d42fecc0eb6bcd3faa", "committedDate": "2020-05-21T09:37:52Z", "message": "Remove double submission link buttons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3ed5696a1e6716469057c4483db55b4e83ae268", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/f3ed5696a1e6716469057c4483db55b4e83ae268", "committedDate": "2020-05-25T10:31:53Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c029322361346bd71c1978b93728008feec6111", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/6c029322361346bd71c1978b93728008feec6111", "committedDate": "2020-05-25T19:25:57Z", "message": "add test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d40ba14708c0a54b839bd4151a3f4e348df67e69", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/d40ba14708c0a54b839bd4151a3f4e348df67e69", "committedDate": "2020-05-26T09:25:02Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "485cbe8bae0adc027c5dd2380f79651e4c701e26", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/485cbe8bae0adc027c5dd2380f79651e4c701e26", "committedDate": "2020-05-26T09:30:43Z", "message": "fix java code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf69e2df36d63065d390940f681d27af5b69c011", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/cf69e2df36d63065d390940f681d27af5b69c011", "committedDate": "2020-05-26T10:14:44Z", "message": "fix wrong id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c85aba61697f5226ec1695a1c256c54ff99b4e6f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/c85aba61697f5226ec1695a1c256c54ff99b4e6f", "committedDate": "2020-05-26T18:58:14Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks\n\n# Conflicts:\n#\tsrc/main/webapp/app/assessment/assessment-shared.module.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55803800c349a5784cb45ad12816b3728a3d0ff1", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/55803800c349a5784cb45ad12816b3728a3d0ff1", "committedDate": "2020-05-27T19:15:46Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1be31c2a43dca54f918c4eb285113231af329d12", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/1be31c2a43dca54f918c4eb285113231af329d12", "committedDate": "2020-05-27T19:50:54Z", "message": "add test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef5bf06658659186f01a2452a2ad6e3dd3c0b44b", "author": {"user": {"login": "sascha11110", "name": "Sascha Beele"}}, "url": "https://github.com/ls1intum/Artemis/commit/ef5bf06658659186f01a2452a2ad6e3dd3c0b44b", "committedDate": "2020-05-27T20:26:33Z", "message": "Basic test suite setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a54f1be8aa9a5fcd242306c84a33d71c7a122bc3", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/a54f1be8aa9a5fcd242306c84a33d71c7a122bc3", "committedDate": "2020-05-27T20:55:06Z", "message": "fix test suite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e34c7fad5f800027e4826191d073906e70cc8a6", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/0e34c7fad5f800027e4826191d073906e70cc8a6", "committedDate": "2020-05-27T21:02:48Z", "message": "Fix test suite name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f31649ca98d732c2ed4c0ae842f3496b1de400f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/1f31649ca98d732c2ed4c0ae842f3496b1de400f", "committedDate": "2020-05-28T13:18:13Z", "message": "Fix translation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f4392f7dc06ff8ccf9198ca93ef88254809c72d", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/5f4392f7dc06ff8ccf9198ca93ef88254809c72d", "committedDate": "2020-05-29T08:29:41Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDQxNzY0", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-421041764", "createdAt": "2020-05-29T15:07:25Z", "commit": {"oid": "5f4392f7dc06ff8ccf9198ca93ef88254809c72d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNjgyODk2", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-421682896", "createdAt": "2020-06-01T08:41:35Z", "commit": {"oid": "5f4392f7dc06ff8ccf9198ca93ef88254809c72d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNjkyNTIx", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-421692521", "createdAt": "2020-06-01T08:58:12Z", "commit": {"oid": "5f4392f7dc06ff8ccf9198ca93ef88254809c72d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d4a18a06e50703359a9e5994fa7d04ab58b9bb9", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/2d4a18a06e50703359a9e5994fa7d04ab58b9bb9", "committedDate": "2020-06-01T09:50:19Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNzcwOTE5", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-421770919", "createdAt": "2020-06-01T11:23:46Z", "commit": {"oid": "2d4a18a06e50703359a9e5994fa7d04ab58b9bb9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDQwNTE4", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422040518", "createdAt": "2020-06-01T17:30:52Z", "commit": {"oid": "2d4a18a06e50703359a9e5994fa7d04ab58b9bb9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "211e2fdc5030b648b75f430db16cd71b6409da6c", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/211e2fdc5030b648b75f430db16cd71b6409da6c", "committedDate": "2020-06-01T17:51:39Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDU1ODUw", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422055850", "createdAt": "2020-06-01T17:52:36Z", "commit": {"oid": "2d4a18a06e50703359a9e5994fa7d04ab58b9bb9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTI2NDk0", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422126494", "createdAt": "2020-06-01T19:39:22Z", "commit": {"oid": "211e2fdc5030b648b75f430db16cd71b6409da6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTozOToyMlrOGdXimA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTozOToyMlrOGdXimA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ0NzU3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    log.info(\"Finished /courses/\" + courseId + \"/submissions call in \" + (end - start) + \"ms\");\n          \n          \n            \n                    log.debug(\"Finished /courses/\" + courseId + \"/submissions call in \" + (end - start) + \"ms\");", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r433447576", "createdAt": "2020-06-01T19:39:22Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/CourseResource.java", "diffHunk": "@@ -659,6 +665,35 @@ public void fetchParticipationsWithSubmissionsAndResultsForCourses(List<Course>\n         return ResponseUtil.wrapOrNotFound(Optional.of(course));\n     }\n \n+    /**\n+     * GET /courses/:courseId/lockedSubmissions Get locked submissions for course for user\n+     *\n+     * @param courseId the id of the course\n+     * @return the ResponseEntity with status 200 (OK) and with body the course, or with status 404 (Not Found)\n+     * @throws AccessForbiddenException if the current user doesn't have the permission to access the course\n+     */\n+    @GetMapping(\"/courses/{courseId}/lockedSubmissions\")\n+    @PreAuthorize(\"hasAnyRole('TA', 'INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<List<Submission>> getLockedSubmissionsForCourse(@PathVariable Long courseId) throws AccessForbiddenException {\n+        log.debug(\"REST request to get all locked submissions for course : {}\", courseId);\n+        long start = System.currentTimeMillis();\n+        Course course = courseService.findOneWithExercises(courseId);\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        if (!authCheckService.isAtLeastTeachingAssistantInCourse(course, user)) {\n+            throw new AccessForbiddenException(\"You are not allowed to access this resource\");\n+        }\n+\n+        List<Submission> submissions = submissionService.getLockedSubmissions(courseId);\n+\n+        for (Submission submission : submissions) {\n+            submissionService.hideDetails(submission, user);\n+        }\n+\n+        long end = System.currentTimeMillis();\n+        log.info(\"Finished /courses/\" + courseId + \"/submissions call in \" + (end - start) + \"ms\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "211e2fdc5030b648b75f430db16cd71b6409da6c"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTI3NzI0", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422127724", "createdAt": "2020-06-01T19:41:12Z", "commit": {"oid": "211e2fdc5030b648b75f430db16cd71b6409da6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTo0MToxM1rOGdXmKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxOTo0MToxM1rOGdXmKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ0ODQ4OQ==", "bodyText": "please delete this line", "url": "https://github.com/ls1intum/Artemis/pull/1433#discussion_r433448489", "createdAt": "2020-06-01T19:41:13Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/course/manage/course-management.service.ts", "diffHunk": "@@ -248,6 +250,29 @@ export class CourseManagementService {\n         return this.http.get<User[]>(`${this.resourceUrl}/${courseId}/${courseGroup}`, { observe: 'response' });\n     }\n \n+    /**\n+     * Find all locked submissions of a given course for user\n+     * @param {number} courseId - The id of the course to be searched for\n+     */\n+    findAllLockedSubmissionsOfCourse(courseId: number): Observable<HttpResponse<Submission[]>> {\n+        return this.http\n+            .get<Submission[]>(`${this.resourceUrl}/${courseId}/lockedSubmissions`, { observe: 'response' })\n+            .pipe(\n+                // map((res) => this.convertDateArrayFromServer(res)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "211e2fdc5030b648b75f430db16cd71b6409da6c"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTI4NDIy", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422128422", "createdAt": "2020-06-01T19:42:21Z", "commit": {"oid": "211e2fdc5030b648b75f430db16cd71b6409da6c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c66b2c7170f7100ebd94ae7d849e65d4ee1859c8", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/c66b2c7170f7100ebd94ae7d849e65d4ee1859c8", "committedDate": "2020-06-01T20:14:53Z", "message": "Requested changes from PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a672b9e0dea35f79794bc6982a278c2bfdd94e5f", "author": {"user": {"login": "balazs-czopf", "name": "Balazs Czopf"}}, "url": "https://github.com/ls1intum/Artemis/commit/a672b9e0dea35f79794bc6982a278c2bfdd94e5f", "committedDate": "2020-06-01T20:27:58Z", "message": "Merge branch 'develop' into feature/tutor-course-dashboard/show-locks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTQ4MTI2", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422548126", "createdAt": "2020-06-02T10:32:08Z", "commit": {"oid": "a672b9e0dea35f79794bc6982a278c2bfdd94e5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTU1ODQy", "url": "https://github.com/ls1intum/Artemis/pull/1433#pullrequestreview-422555842", "createdAt": "2020-06-02T10:44:21Z", "commit": {"oid": "a672b9e0dea35f79794bc6982a278c2bfdd94e5f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3013, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}