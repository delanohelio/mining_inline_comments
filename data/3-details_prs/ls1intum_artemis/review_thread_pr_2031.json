{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MzAwNTg5", "number": 2031, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NjoyM1rOEZCKVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMToxNjoxM1rOEZ7jmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0Njg1MjY5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NjoyNFrOHBnlWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NzozMVrOHBnn_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTE2MQ==", "bodyText": "Is it really necessary to get a reference to the canvas?\nPlease have a look how this is solved for the quiz charts.\nIt is not necessary in this case.", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471459161", "createdAt": "2020-08-17T12:56:24Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -45,6 +48,11 @@ export class ExamScoresComponent implements OnInit, OnDestroy {\n     public filterForSubmittedExams = false;\n     public filterForNonEmptySubmissions = false;\n \n+    @ViewChild('histogram', { static: false })\n+    private canvas: ElementRef<HTMLCanvasElement>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "334cf440cedbde75e4fde623dc6d4c047408ba60"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTgzOQ==", "bodyText": "Example quiz-statistic.component.html\n<canvas baseChart [datasets]=\"datasets\" [labels]=\"labels\" [options]=\"options\" [chartType]=\"chartType\" [colors]=\"colors\"> \nIn the corresponding ts file: options, labels, colors and chartType are defined and automatically injected by angular", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471459839", "createdAt": "2020-08-17T12:57:31Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -45,6 +48,11 @@ export class ExamScoresComponent implements OnInit, OnDestroy {\n     public filterForSubmittedExams = false;\n     public filterForNonEmptySubmissions = false;\n \n+    @ViewChild('histogram', { static: false })\n+    private canvas: ElementRef<HTMLCanvasElement>;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTE2MQ=="}, "originalCommit": {"oid": "334cf440cedbde75e4fde623dc6d4c047408ba60"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0Njg1OTA2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/app.main.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1ODowOVrOHBnpUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMzowNDowNFrOHBn2-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ2MDE3OA==", "bodyText": "this is really ugly :-(\nIs there no other option to display labels?", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471460178", "createdAt": "2020-08-17T12:58:09Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/app.main.ts", "diffHunk": "@@ -3,6 +3,15 @@ import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n import { ProdConfig } from './core/config/prod.config';\n import { ArtemisAppModule } from './app.module';\n \n+import * as Chart from 'chart.js';\n+import ChartDataLabels from 'chartjs-plugin-datalabels';\n+\n+/**\n+ * This plugin registers itself globally,\n+ * meaning that once imported, all charts will display labels.\n+ * In our case we want it enabled only for a few charts, so we first need to unregister it globally\n+ */\n+Chart.plugins.unregister(ChartDataLabels);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "334cf440cedbde75e4fde623dc6d4c047408ba60"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ2MzY3NA==", "bodyText": "I guess we don't need this plugin at all.\nHave a look at the quiz charts. They already include data labels. Example", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471463674", "createdAt": "2020-08-17T13:04:04Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/app.main.ts", "diffHunk": "@@ -3,6 +3,15 @@ import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n import { ProdConfig } from './core/config/prod.config';\n import { ArtemisAppModule } from './app.module';\n \n+import * as Chart from 'chart.js';\n+import ChartDataLabels from 'chartjs-plugin-datalabels';\n+\n+/**\n+ * This plugin registers itself globally,\n+ * meaning that once imported, all charts will display labels.\n+ * In our case we want it enabled only for a few charts, so we first need to unregister it globally\n+ */\n+Chart.plugins.unregister(ChartDataLabels);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ2MDE3OA=="}, "originalCommit": {"oid": "334cf440cedbde75e4fde623dc6d4c047408ba60"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MzY2MTM4OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMjozNDoxMVrOHCo-9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMjozNDoxMVrOHCo-9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzMDY3OA==", "bodyText": "Took me some time to get the difference between the two assignments :-D Maybe the following is easier to parse:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (i === this.histogramData.length - 1) {\n          \n          \n            \n                            labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth}]`;\n          \n          \n            \n                        } else {\n          \n          \n            \n                            labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth})`;\n          \n          \n            \n                        }\n          \n          \n            \n                        labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth}`;\n          \n          \n            \n                        labels[i] += (i === this.histogramData.length - 1) ? ']' : ')';", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r472530678", "createdAt": "2020-08-18T22:34:11Z", "author": {"login": "sascha11110"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -103,14 +117,80 @@ export class ExamScoresComponent implements OnInit, OnDestroy {\n         this.changeDetector.detectChanges();\n     }\n \n+    private createChart() {\n+        const labels = [];\n+        let i;\n+        for (i = 0; i < this.histogramData.length; i++) {\n+            if (i === this.histogramData.length - 1) {\n+                labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth}]`;\n+            } else {\n+                labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth})`;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88e4a3454553d18dbe3b8d33a820622a76e6160c"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NjI1NjI3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMToxNjoxM1rOHDCr0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNTowMzowNlrOHDLqZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk1MTc2Mw==", "bodyText": "This table has a styling issue on mobile:\n\nWrapping the <table> element inside a <div class=\"table-responsive\"> like the student results table should fix this (it makes the table bound to the width and scrollable).", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r472951763", "createdAt": "2020-08-19T11:16:13Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.html", "diffHunk": "@@ -90,17 +94,11 @@ <h4>\n             </tbody>\n         </table>\n \n-        <!-- Histogram Table -->\n-        <table class=\"table table-bordered table-sm table-clear-width mb-3\">\n-            <thead class=\"thead-dark\">\n-                <th *ngFor=\"let _ of histogramData; let i = index; last as isLast\">[{{ i * binWidth }},{{ (i + 1) * binWidth }}{{ isLast ? ']' : ')' }}</th>\n-            </thead>\n-            <tbody>\n-                <td *ngFor=\"let noOfStudents of histogramData\">\n-                    {{ noOfStudents }} ({{ noOfExamsFiltered ? roundAndPerformLocalConversion((noOfStudents * 100) / noOfExamsFiltered, 2, 2) : '-' }}%)\n-                </td>\n-            </tbody>\n-        </table>\n+        <div style=\"display: block;\">\n+            <!-- Histogram -->\n+            <canvas baseChart height=\"400\" [datasets]=\"barChartData\" [labels]=\"barChartLabels\" [options]=\"barChartOptions\" [legend]=\"barChartLegend\" [chartType]=\"barChartType\">\n+            </canvas>\n+        </div>\n \n         <!-- Exercise Statistics Table -->\n         <table class=\"table table-bordered table-sm body-striped\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8994b4f94f189c5f555a780289761b479a7943aa"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA5ODg1NA==", "bodyText": "Fixed it in 2f2f107", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r473098854", "createdAt": "2020-08-19T15:03:06Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.html", "diffHunk": "@@ -90,17 +94,11 @@ <h4>\n             </tbody>\n         </table>\n \n-        <!-- Histogram Table -->\n-        <table class=\"table table-bordered table-sm table-clear-width mb-3\">\n-            <thead class=\"thead-dark\">\n-                <th *ngFor=\"let _ of histogramData; let i = index; last as isLast\">[{{ i * binWidth }},{{ (i + 1) * binWidth }}{{ isLast ? ']' : ')' }}</th>\n-            </thead>\n-            <tbody>\n-                <td *ngFor=\"let noOfStudents of histogramData\">\n-                    {{ noOfStudents }} ({{ noOfExamsFiltered ? roundAndPerformLocalConversion((noOfStudents * 100) / noOfExamsFiltered, 2, 2) : '-' }}%)\n-                </td>\n-            </tbody>\n-        </table>\n+        <div style=\"display: block;\">\n+            <!-- Histogram -->\n+            <canvas baseChart height=\"400\" [datasets]=\"barChartData\" [labels]=\"barChartLabels\" [options]=\"barChartOptions\" [legend]=\"barChartLegend\" [chartType]=\"barChartType\">\n+            </canvas>\n+        </div>\n \n         <!-- Exercise Statistics Table -->\n         <table class=\"table table-bordered table-sm body-striped\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk1MTc2Mw=="}, "originalCommit": {"oid": "8994b4f94f189c5f555a780289761b479a7943aa"}, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4637, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}