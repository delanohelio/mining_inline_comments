{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MDMwODY5", "number": 1827, "title": "Feature/exam mode/updates from apollon", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) locally and on test server 1\n\nMotivation and Context\n\n\nMark a submission immediately as unsynced after model changes\nDescription\n\nsubscribe to apollon model changes, set submission.isSynched = false, when model changes\nSteps for Testing\n\n\nSetup exam with modeling exercises (create exercises, student exams, participations)\nParticipate in exam\nWhen changing modeling exercises -> submission is marked as unsynced\nSubmissions are correctly synchronized with server", "createdAt": "2020-07-06T22:20:54Z", "url": "https://github.com/ls1intum/Artemis/pull/1827", "merged": true, "mergeCommit": {"oid": "7c96e628692995de11d1e12532501775628c55fa"}, "closed": true, "closedAt": "2020-07-09T20:15:27Z", "author": {"login": "TobiasPr"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyYxPWAH2gAyNDQ1MDMwODY5OjU0MmE2ODkwODExOTljNjFkZWFjOGYxMGEyMzg0YWQzNThjZTkzNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczU3pRAFqTQ0NTkzNjU2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "542a689081199c61deac8f10a2384ad358ce936a", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/542a689081199c61deac8f10a2384ad358ce936a", "committedDate": "2020-07-06T22:13:48Z", "message": "modeling-editor.component.ts: output model changes\nmodeling-exam-submission.component.ts: set studentsubmission.isSynched = false on model changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76d079746a717ec868116c9221dfad1baabf463b", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/76d079746a717ec868116c9221dfad1baabf463b", "committedDate": "2020-07-06T22:17:05Z", "message": "remove unused import\nsimplify hasUnsavedChanges as suggested in the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f57c3b5c240df19a1f269ac2ddc1d6e19388b7c2", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/f57c3b5c240df19a1f269ac2ddc1d6e19388b7c2", "committedDate": "2020-07-06T22:21:03Z", "message": "Merge branch 'develop' into feature/exam_mode/updates_from_apollon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3941e863a0cae41a268469655e82b781589936af", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/3941e863a0cae41a268469655e82b781589936af", "committedDate": "2020-07-06T22:51:35Z", "message": "update apollon version with fix for changes on already loaded model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "949c47b35c0c98edcc1ac5058c563de2ba6d969f", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/949c47b35c0c98edcc1ac5058c563de2ba6d969f", "committedDate": "2020-07-06T22:51:47Z", "message": "Merge branch 'develop' into feature/exam_mode/updates_from_apollon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8565f5682dbfdfa0398dee1fe2d59500ea6af80", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/b8565f5682dbfdfa0398dee1fe2d59500ea6af80", "committedDate": "2020-07-07T06:33:41Z", "message": "Merge branch 'develop' into feature/exam_mode/updates_from_apollon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efaf6706501759c25862fa56b6ccfe088ba1580c", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/efaf6706501759c25862fa56b6ccfe088ba1580c", "committedDate": "2020-07-07T15:01:26Z", "message": "Merge branch 'develop' into feature/exam_mode/updates_from_apollon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614", "author": {"user": {"login": "TobiasPr", "name": "Tobias Priesching"}}, "url": "https://github.com/ls1intum/Artemis/commit/a2e3e5eff79dad22d9513d5252f18366472c5614", "committedDate": "2020-07-07T15:05:02Z", "message": "Merge branch 'develop' into feature/exam_mode/updates_from_apollon"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MjAwODM2", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-444200836", "createdAt": "2020-07-07T19:49:56Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NjQzNDYz", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-444643463", "createdAt": "2020-07-08T11:13:23Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NzU1ODc4", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-444755878", "createdAt": "2020-07-08T13:19:54Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDMwMTYy", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-445030162", "createdAt": "2020-07-08T18:34:51Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NDU0ODUy", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-445454852", "createdAt": "2020-07-09T09:42:10Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTk3NDgz", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-445597483", "createdAt": "2020-07-09T13:08:39Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzowODo0MFrOGvQVMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzowODo0MFrOGvQVMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIwMzgyNw==", "bodyText": "Why is the second ! needed here? Makes it look really strange :D", "url": "https://github.com/ls1intum/Artemis/pull/1827#discussion_r452203827", "createdAt": "2020-07-09T13:08:40Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/exam/participate/exercises/modeling/modeling-exam-submission.component.ts", "diffHunk": "@@ -58,20 +57,7 @@ export class ModelingExamSubmissionComponent extends ExamSubmissionComponent imp\n      * Checks whether there are pending changes in the current model. Returns true if there are unsaved changes, false otherwise.\n      */\n     public hasUnsavedChanges(): boolean {\n-        // TODO: we should have a callback by Apollon. Whenever a student changes anything in the model, this will immediately set\n-        // this.studentSubmission.isSynced = false, then we can simply write here: return !this.studentSubmission.isSynced!;\n-        if (!this.modelingEditor || !this.modelingEditor.isApollonEditorMounted) {\n-            return false;\n-        }\n-        const currentApollonModel = this.modelingEditor.getCurrentModel();\n-\n-        if (this.studentSubmission && this.studentSubmission.model) {\n-            const currentSubmissionModel = JSON.parse(this.studentSubmission.model);\n-            const versionMatch = currentSubmissionModel.version === currentApollonModel.version;\n-            const modelMatch = stringifyIgnoringFields(currentSubmissionModel, 'size') === stringifyIgnoringFields(currentApollonModel, 'size');\n-            return versionMatch && !modelMatch;\n-        }\n-        return false;\n+        return !this.studentSubmission.isSynced!;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTk4Njg0", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-445598684", "createdAt": "2020-07-09T13:10:09Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoxMDoxMFrOGvQYzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoxMDoxMFrOGvQYzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIwNDc0OQ==", "bodyText": "Maybe simply name the unused variable _. Its a common convention :) Or maybe remove the parameter if you never use it? I did not immediately see a reason for keeping it", "url": "https://github.com/ls1intum/Artemis/pull/1827#discussion_r452204749", "createdAt": "2020-07-09T13:10:10Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/exam/participate/exercises/modeling/modeling-exam-submission.component.ts", "diffHunk": "@@ -80,4 +66,9 @@ export class ModelingExamSubmissionComponent extends ExamSubmissionComponent imp\n     get isActive(): boolean {\n         return this.exercise && (!this.exercise.dueDate || moment(this.exercise.dueDate).isSameOrAfter(moment()));\n     }\n+\n+    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n+    modelChanged(model: UMLModel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjAxMTc4", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-445601178", "createdAt": "2020-07-09T13:13:19Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1OTM2NTY5", "url": "https://github.com/ls1intum/Artemis/pull/1827#pullrequestreview-445936569", "createdAt": "2020-07-09T20:15:06Z", "commit": {"oid": "a2e3e5eff79dad22d9513d5252f18366472c5614"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4502, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}