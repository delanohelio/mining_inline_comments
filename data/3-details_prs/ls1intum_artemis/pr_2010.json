{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTc5MDYw", "number": 2010, "title": "[Bugfix] ComponentCanDeactivate Trigger ", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\n\nClone dialog should not activate the \"ComponentCanDeactivate\" dialog, see #1966\nThe \"ComponentCanDeactivate\" dialogue was also triggered if the student is not registered to an exam, or if the student was trying to submit early.\n\nDescription\n\nDo not trigger the dialogue, if the student is handing in early or if there is no student exam\nFix #1966 using <iframe>\n\nSteps for Testing\n\nLog in to Artemis\nGo to an exam where you are not registered.\nNavigate away from the exam.\n=> The ComponentCanDeactivate should not trigger\nNow go to an exam where you are registered.\nTry cloning a programing exercise using clone in sourcetree\n=> ComponentCanDeactivate should not trigger\nHand in early\n=> ComponentCanDeactivate should not trigger", "createdAt": "2020-08-10T15:38:56Z", "url": "https://github.com/ls1intum/Artemis/pull/2010", "merged": true, "mergeCommit": {"oid": "55bd6a61c854ccecbfe59aa5275729fa938bab46"}, "closed": true, "closedAt": "2020-08-14T22:46:18Z", "author": {"login": "anditurdiu"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9ir0nAH2gAyNDY1NTc5MDYwOmM3NWU0NDhhZmQyZWUyZTYxNDhiZTAwMjEwMDNkODAyNDcxNjhlNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-8mxBAFqTQ2NzkxMDUzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c75e448afd2ee2e6148be0021003d80247168e51", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c75e448afd2ee2e6148be0021003d80247168e51", "committedDate": "2020-08-10T14:00:06Z", "message": "Fix trigger of canDeactivate component if the exam is over, the student is not registered for an exam or the student is handing in early."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "070eda642a5fbc61299468eb760324583506c1f2", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/070eda642a5fbc61299468eb760324583506c1f2", "committedDate": "2020-08-10T15:28:32Z", "message": "disable beforeunload for cloning repo in sourcetree"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NDIzNDM5", "url": "https://github.com/ls1intum/Artemis/pull/2010#pullrequestreview-464423439", "createdAt": "2020-08-10T17:17:20Z", "commit": {"oid": "070eda642a5fbc61299468eb760324583506c1f2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzoxNzoyMFrOG-X9fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzoxNzoyMFrOG-X9fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA1NzQ2OQ==", "bodyText": "I'm not sure, but can't we just use !canDeactivate() here? That would remove some code duplication.", "url": "https://github.com/ls1intum/Artemis/pull/2010#discussion_r468057469", "createdAt": "2020-08-10T17:17:20Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -159,7 +158,7 @@ export class ExamParticipationComponent implements OnInit, OnDestroy, ComponentC\n     // displays the alert for confirming leaving the page if there are unsaved changes\n     @HostListener('window:beforeunload', ['$event'])\n     unloadNotification($event: any): void {\n-        if (!this.isOver()) {\n+        if (!this.isOver() && this.studentExam != null && !this.handInEarly) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "070eda642a5fbc61299468eb760324583506c1f2"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69d5be07310677ee6d6ce1aa15fe64c0e0691737", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/69d5be07310677ee6d6ce1aa15fe64c0e0691737", "committedDate": "2020-08-10T19:58:16Z", "message": "remove code duplication"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MDc5NDcw", "url": "https://github.com/ls1intum/Artemis/pull/2010#pullrequestreview-465079470", "createdAt": "2020-08-11T13:45:34Z", "commit": {"oid": "69d5be07310677ee6d6ce1aa15fe64c0e0691737"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MzgxMzcy", "url": "https://github.com/ls1intum/Artemis/pull/2010#pullrequestreview-465381372", "createdAt": "2020-08-11T19:53:57Z", "commit": {"oid": "69d5be07310677ee6d6ce1aa15fe64c0e0691737"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a6b4f025d63886615a04a48f66cea2f46e45c87", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7a6b4f025d63886615a04a48f66cea2f46e45c87", "committedDate": "2020-08-12T05:24:18Z", "message": "Do not trigger canDeactivateComponent if the student navigates away from the exam page before the exam has started"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "873bbeb82e40858cd5acbe82960c46d53d89bb46", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/873bbeb82e40858cd5acbe82960c46d53d89bb46", "committedDate": "2020-08-12T07:49:54Z", "message": "Merge branch 'develop' into bugfix/exam/canDeactivateTrigger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1ODI5Nzkx", "url": "https://github.com/ls1intum/Artemis/pull/2010#pullrequestreview-465829791", "createdAt": "2020-08-12T11:40:19Z", "commit": {"oid": "873bbeb82e40858cd5acbe82960c46d53d89bb46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12f3ecdb04a00b03ab4b30ef5d961177f7af2137", "author": {"user": {"login": "anditurdiu", "name": "Andi Turdiu"}}, "url": "https://github.com/ls1intum/Artemis/commit/12f3ecdb04a00b03ab4b30ef5d961177f7af2137", "committedDate": "2020-08-12T16:03:20Z", "message": "Merge branch 'develop' into bugfix/exam/canDeactivateTrigger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MTA1ODE2", "url": "https://github.com/ls1intum/Artemis/pull/2010#pullrequestreview-466105816", "createdAt": "2020-08-12T17:01:16Z", "commit": {"oid": "12f3ecdb04a00b03ab4b30ef5d961177f7af2137"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3OTEwNTMy", "url": "https://github.com/ls1intum/Artemis/pull/2010#pullrequestreview-467910532", "createdAt": "2020-08-14T22:46:02Z", "commit": {"oid": "12f3ecdb04a00b03ab4b30ef5d961177f7af2137"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3986, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}