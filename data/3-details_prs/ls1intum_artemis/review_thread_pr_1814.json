{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MjgzNTEy", "number": 1814, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQyMTo1ODozOVrOELaPyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQyMjowMTozOVrOELaQcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMzk5ODE4OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/LtiService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQyMTo1ODozOVrOGs-IyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQyMTo1ODozOVrOGs-IyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwODU4NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String message = \"verifyRequest for LTI is not supported on this Artemis instance, not artemis.lti.oauth-secret was specified in the yml configuration\";\n          \n          \n            \n                        String message = \"verifyRequest for LTI is not supported on this Artemis instance, artemis.lti.oauth-secret was not specified in the yml configuration\";", "url": "https://github.com/ls1intum/Artemis/pull/1814#discussion_r449808585", "createdAt": "2020-07-04T21:58:39Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/LtiService.java", "diffHunk": "@@ -362,23 +368,66 @@ private void saveLtiUserId(User user, String ltiUserIdString) {\n      * Checks if a LTI request is correctly signed via OAuth with the secret\n      *\n      * @param request The request to check\n-     * @return True if the request is valid, otherwise false\n+     * @return null if the request is valid, otherwise an error message which indicates the reason why the verification failed\n      */\n-    public Boolean verifyRequest(HttpServletRequest request) {\n+    public String verifyRequest(HttpServletRequest request) {\n         LtiVerifier ltiVerifier = new LtiOauthVerifier();\n-        Boolean success = false;\n+        if (this.OAUTH_SECRET.isEmpty()) {\n+            // this means Artemis does not support this\n+            String message = \"verifyRequest for LTI is not supported on this Artemis instance, not artemis.lti.oauth-secret was specified in the yml configuration\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec3a725ae8f932b4322ebc53f0913c7d4f6dd1"}, "originalPosition": 198}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMzk5OTg3OnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/LtiResource.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQyMjowMTozOVrOGs-Jhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQyMjowMTozOVrOGs-Jhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwODc3NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                \"LTI not configure on this Artemis server. Cannot launch exercise \" + exerciseId + \". \" + \"Please contact an admin or try again.\");\n          \n          \n            \n                                \"LTI not configured on this Artemis server. Cannot launch exercise \" + exerciseId + \". \" + \"Please contact an admin or try again.\");", "url": "https://github.com/ls1intum/Artemis/pull/1814#discussion_r449808775", "createdAt": "2020-07-04T22:01:39Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/LtiResource.java", "diffHunk": "@@ -77,11 +84,22 @@ public LtiResource(LtiService ltiService, UserService userService, ExerciseRepos\n     public void launch(@ModelAttribute LtiLaunchRequestDTO launchRequest, @PathVariable(\"exerciseId\") Long exerciseId, HttpServletRequest request, HttpServletResponse response)\n             throws IOException {\n \n-        log.debug(\"Launch request : {}\", launchRequest);\n+        if (this.LTI_OAUTH_SECRET.isEmpty() || this.LTI_ID.isEmpty() || this.LTI_OAUTH_KEY.isEmpty()) {\n+            response.sendError(HttpServletResponse.SC_FORBIDDEN,\n+                    \"LTI not configure on this Artemis server. Cannot launch exercise \" + exerciseId + \". \" + \"Please contact an admin or try again.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ec3a725ae8f932b4322ebc53f0913c7d4f6dd1"}, "originalPosition": 67}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4852, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}