{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MTk0Nzc0", "number": 1325, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowMjoxNlrOD0KLyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNToyMDo1MFrOD0TcDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDE5NDAzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowMjoxNlrOGI9e9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDo1NDo0OFrOGI_fsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0OTE0Mg==", "bodyText": "Can this be simplified to command.displayCommandButton?", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412049142", "createdAt": "2020-04-21T10:02:16Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">\n                             Color\n                         </div>\n                         <jhi-color-selector [tagColors]=\"markdownColors\" (selectedColor)=\"onSelectedColor($event)\"></jhi-color-selector>\n                     </div>\n+\n+                    <!-- domain commands -->\n+                    <div class=\"markdown-editor__commands-domain\" *ngIf=\"domainCommands && domainCommands.length != 0\">\n+                        <ng-container *ngFor=\"let command of domainCommands | typeCheck: DomainTagCommand\">\n+                            <div *ngIf=\"command.displayCommandButton === true\" class=\"btn btn-sm\" (click)=\"command.execute()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA4MjA5Ng==", "bodyText": "Good catch! I didn't notice it, while rearranging the commands. Fixed with cb8b3bb", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412082096", "createdAt": "2020-04-21T10:54:48Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">\n                             Color\n                         </div>\n                         <jhi-color-selector [tagColors]=\"markdownColors\" (selectedColor)=\"onSelectedColor($event)\"></jhi-color-selector>\n                     </div>\n+\n+                    <!-- domain commands -->\n+                    <div class=\"markdown-editor__commands-domain\" *ngIf=\"domainCommands && domainCommands.length != 0\">\n+                        <ng-container *ngFor=\"let command of domainCommands | typeCheck: DomainTagCommand\">\n+                            <div *ngIf=\"command.displayCommandButton === true\" class=\"btn btn-sm\" (click)=\"command.execute()\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0OTE0Mg=="}, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIwMTg5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowNDowOFrOGI9jzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDozMjo1OFrOGI-rNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MDM4Mg==", "bodyText": "Could [] be a default value for the Input that doesn't need to be passed in explicitly?", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412050382", "createdAt": "2020-04-21T10:04:08Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -49,12 +52,19 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- question in edit mode -->\n         <div *ngIf=\"isEditMode\">\n             <div class=\"row mb-1 mt-2\">\n                 <div class=\"col-12\">\n                     <div class=\"form-group\">\n                         <label class=\"form-control-label\">{{ 'artemisApp.courseOverview.exerciseDetails.faq.newQuestionLabel' | translate }}</label>\n-                        <textarea [(ngModel)]=\"studentQuestionText\" class=\"form-control\" name=\"answer\"></textarea>\n+                        <jhi-markdown-editor\n+                            class=\"markdown-editor background-editor-color\"\n+                            [(markdown)]=\"studentQuestionText\"\n+                            [editorMode]=\"EditorMode.LATEX\"\n+                            [enableResize]=\"true\"\n+                            [metaCommands]=\"[]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2ODY2MQ==", "bodyText": "I needed to do it that way for now in order to keep the fullscreen option in every other usage of the markdown editor and disable it here, but I will change this when refactoring the whole editor in a follow-up PR.", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412068661", "createdAt": "2020-04-21T10:32:58Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -49,12 +52,19 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- question in edit mode -->\n         <div *ngIf=\"isEditMode\">\n             <div class=\"row mb-1 mt-2\">\n                 <div class=\"col-12\">\n                     <div class=\"form-group\">\n                         <label class=\"form-control-label\">{{ 'artemisApp.courseOverview.exerciseDetails.faq.newQuestionLabel' | translate }}</label>\n-                        <textarea [(ngModel)]=\"studentQuestionText\" class=\"form-control\" name=\"answer\"></textarea>\n+                        <jhi-markdown-editor\n+                            class=\"markdown-editor background-editor-color\"\n+                            [(markdown)]=\"studentQuestionText\"\n+                            [editorMode]=\"EditorMode.LATEX\"\n+                            [enableResize]=\"true\"\n+                            [metaCommands]=\"[]\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MDM4Mg=="}, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDIwNzg2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowNTo0N1rOGI9nnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDo1Mzo1NFrOGI_dow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MTM1Ng==", "bodyText": "A bootstrap .col should always be a child of a .row.", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412051356", "createdAt": "2020-04-21T10:05:47Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -63,53 +73,102 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- approved answers -->\n         <div class=\"row mb-1 answer-approved\" *ngFor=\"let approvedQuestionAnswer of approvedQuestionAnswers\">\n-            <div class=\"col\" [ngbTooltip]=\"'artemisApp.courseOverview.exerciseDetails.faq.approvedLabel' | translate\">\n+            <div class=\"col\">\n                 <div *ngIf=\"isAnswerMode && selectedQuestionAnswer && approvedQuestionAnswer && selectedQuestionAnswer.id === approvedQuestionAnswer.id\">\n                     <div class=\"col-12\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA4MTU3MQ==", "bodyText": "fixed with cb8b3bb", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412081571", "createdAt": "2020-04-21T10:53:54Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -63,53 +73,102 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- approved answers -->\n         <div class=\"row mb-1 answer-approved\" *ngFor=\"let approvedQuestionAnswer of approvedQuestionAnswers\">\n-            <div class=\"col\" [ngbTooltip]=\"'artemisApp.courseOverview.exerciseDetails.faq.approvedLabel' | translate\">\n+            <div class=\"col\">\n                 <div *ngIf=\"isAnswerMode && selectedQuestionAnswer && approvedQuestionAnswer && selectedQuestionAnswer.id === approvedQuestionAnswer.id\">\n                     <div class=\"col-12\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MTM1Ng=="}, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDI2MTg5OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxODozN1rOGI-IZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMTo1ODoxMlrOGJB2Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA==", "bodyText": "The code below looks very similar to the one for the approved answers. There also seems to be a lot of shared template code between the view and edit state (see screenshot below).\nI think it would make sense to avoid this duplication by creating small new components whenever reusable parts like these manifest themselves.\nCode duplicate:", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412059750", "createdAt": "2020-04-21T10:18:37Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -135,13 +195,52 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                     </div>\n                 </div>\n             </div>\n+            <!-- unapproved answers -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 196}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2NzU5Ng==", "bodyText": "I will address the code duplication (or at least very similar code) in a follow-up PR, in which I change the layout of the questions and answers (and also refactor them into smaller components).\n@HanyaElhashemy", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412067596", "createdAt": "2020-04-21T10:31:14Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -135,13 +195,52 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                     </div>\n                 </div>\n             </div>\n+            <!-- unapproved answers -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA=="}, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 196}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjEyMDY2Ng==", "bodyText": "Great, thanks!", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412120666", "createdAt": "2020-04-21T11:58:12Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -135,13 +195,52 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                     </div>\n                 </div>\n             </div>\n+            <!-- unapproved answers -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA=="}, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 196}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MTcxMDIzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNToyMDo1MFrOGJLlfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxODoyMzo0N1rOGJSRfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ==", "bodyText": "I removed the ngStyle attribute in a previous PR because changing the border color would only make sense to me if I could reapply the selected color by simply clicking on the button without having to choose a color again.\nAnother problem I see here is that the border color doesn\u00b4t update once I continue to edit the text outside of the span I just set to a given color.\nJust wanted to mention this so you could possibly target this in your next PR on the functionality changes for the markdown editor. :)", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412280189", "createdAt": "2020-04-21T15:20:50Z", "author": {"login": "balazs-czopf"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI5NTEyMg==", "bodyText": "@balazs-czopf makes total sense, I'll include this in the next PR. I guess it must have slipped back in when resolving the merge conflicts. Thanks! :)", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412295122", "createdAt": "2020-04-21T15:53:35Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ=="}, "originalCommit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM4OTc1OQ==", "bodyText": "Good catch, I'll remove this directly on develop then.", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412389759", "createdAt": "2020-04-21T18:23:47Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ=="}, "originalCommit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 108, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}