{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNjExMjA1", "number": 1368, "title": "Remove unnecessary restcall which caused problems", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n- [x] Server: I added multiple integration tests (Spring) related to the features\n- [x] Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n- [x] Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n- [x] Client: I added multiple integration tests (Jest) related to the features\n- [x] Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n- [x] Client: I added multiple screenshots/screencasts of my UI changes\n- [x] Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\n\n\nDescription\n\nSteps for Testing\n\nFocus on the student accounts for testing, but please check also the others(tutor, instructor, admin).\nTesting on test server:\n\nLog into Artemis\nNavigate to Course Management\nSelect a course\nCreate a programming exercise\nNavigate to course overview\nSelect the course\nOpen the details page of the programming exercise\n\n-> No error should occur here, check the network tab of the browser developer tools\nLocal testing:\n\nRun artemis in your IDE\nLogin into Artemis\nNavigate to Course Management\nSelect a course\nCreate a programming exercise without a connection to the vcs and ci\n-> normal creation procedure as for a normal programming exercise, but before you click on generate tick the checkbox \"Setup without connection to the VCS and CI\"\n\n\n\nNavigate to course overview\nSelect the course\nOpen the details page of the programming exercise\n\n-> No error should occur here, check the network tab of the browser developer tools\n-> Two buttons (submission and result) should be visible", "createdAt": "2020-04-30T15:08:25Z", "url": "https://github.com/ls1intum/Artemis/pull/1368", "merged": true, "mergeCommit": {"oid": "18543c1267ae25f016f25592c854fb1ffef27706"}, "closed": true, "closedAt": "2020-05-02T10:48:08Z", "author": {"login": "F4lka"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccuf6TgH2gAyNDExNjExMjA1OjA4Y2FjNGQ1NDFiOWM0MWQ5MjQ1N2I4NzFkYzcwYTU1OTcyOTRmYjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdT_39gFqTQwNDUxODQwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "08cac4d541b9c41d92457b871dc70a5597294fb6", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/08cac4d541b9c41d92457b871dc70a5597294fb6", "committedDate": "2020-04-30T15:06:27Z", "message": "removed unnecessary restcall and refactored the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2972fd1d49be26a2c90e8436ba0e37f7ef13ba9a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/2972fd1d49be26a2c90e8436ba0e37f7ef13ba9a", "committedDate": "2020-04-30T15:08:36Z", "message": "Merge branch 'develop' into bugfix/remove-unnecessary-restcall"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5596d6824c85f4c53091b80ba233b49a51b5241a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/5596d6824c85f4c53091b80ba233b49a51b5241a", "committedDate": "2020-04-30T16:12:54Z", "message": "added JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e117fdcee393fd514fae751d1b02f05015aef19b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e117fdcee393fd514fae751d1b02f05015aef19b", "committedDate": "2020-04-30T16:14:03Z", "message": "removed unnecessary check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6782106ec2f7c76133e0da4e99b30c74d392d9b6", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6782106ec2f7c76133e0da4e99b30c74d392d9b6", "committedDate": "2020-04-30T16:14:22Z", "message": "Merge remote-tracking branch 'origin/bugfix/remove-unnecessary-restcall' into bugfix/remove-unnecessary-restcall"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzQ5NTE3", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-403749517", "createdAt": "2020-04-30T17:54:37Z", "commit": {"oid": "6782106ec2f7c76133e0da4e99b30c74d392d9b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzo1NDozN1rOGO0KmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzo1NDozN1rOGO0KmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE4NzkyOA==", "bodyText": "Why do you fetch again? I think you can simply cast the java object here", "url": "https://github.com/ls1intum/Artemis/pull/1368#discussion_r418187928", "createdAt": "2020-04-30T17:54:37Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ExerciseService.java", "diffHunk": "@@ -372,4 +372,15 @@ private void setAssignedTeamIdForExerciseAndUser(Exercise exercise, User user) {\n             });\n         }\n     }\n+\n+    /**\n+     * Sets the transient attribute \"testRepositoryUrl\" if the exercises is a programming exercise\n+     *\n+     * @param exercise the exercise for which to set the url\n+     */\n+    public void setTestRepositoryUrlForProgrammingExercise(Exercise exercise) {\n+        if (exercise instanceof ProgrammingExercise) {\n+            exercise.setTestRepositoryUrlTransient(programmingExerciseService.findByIdWithEagerStudentParticipations(exercise.getId()).getTestRepositoryUrl());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6782106ec2f7c76133e0da4e99b30c74d392d9b6"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzUwNjUx", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-403750651", "createdAt": "2020-04-30T17:56:17Z", "commit": {"oid": "6782106ec2f7c76133e0da4e99b30c74d392d9b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzo1NjoxOFrOGO0OWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzo1NjoxOFrOGO0OWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE4ODg5MQ==", "bodyText": "You misunderstood me. Do not set the string again here. Use a transient Boolean in ProgrammingExercise called isLocalSimulation (or similar) and only set this to true if the url includes artemislocal (Same Check as on the client)", "url": "https://github.com/ls1intum/Artemis/pull/1368#discussion_r418188891", "createdAt": "2020-04-30T17:56:18Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/domain/Exercise.java", "diffHunk": "@@ -172,6 +172,9 @@\n     @Transient\n     private Long studentAssignedTeamIdTransient; // id of the team that the logged-in user is assigned to (only relevant if team mode is enabled)\n \n+    @Transient\n+    private String testRepositoryUrlTransient;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6782106ec2f7c76133e0da4e99b30c74d392d9b6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47ea7aef26c96fec20f6953369aeeb8f91ea887b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/47ea7aef26c96fec20f6953369aeeb8f91ea887b", "committedDate": "2020-04-30T18:39:50Z", "message": "changed transient variable to boolean and renamed the variable to isLocalSimulation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODEyMTk5", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-403812199", "createdAt": "2020-04-30T19:24:21Z", "commit": {"oid": "47ea7aef26c96fec20f6953369aeeb8f91ea887b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOToyNDoyMVrOGO3LDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOToyNDoyMVrOGO3LDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIzNzE5Nw==", "bodyText": "move to ProgrammingExercise", "url": "https://github.com/ls1intum/Artemis/pull/1368#discussion_r418237197", "createdAt": "2020-04-30T19:24:21Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/entities/exercise.model.ts", "diffHunk": "@@ -88,6 +88,7 @@ export abstract class Exercise implements BaseEntity {\n     public numberOfMoreFeedbackRequests?: number;\n     public numberOfOpenMoreFeedbackRequests?: number;\n     public studentAssignedTeamId?: number;\n+    public isLocalSimulation?: boolean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ea7aef26c96fec20f6953369aeeb8f91ea887b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2387024a2532d0d8c29c1066f55937863fddcb9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b2387024a2532d0d8c29c1066f55937863fddcb9", "committedDate": "2020-04-30T19:24:24Z", "message": "added TestrepositoryUrl for the testcase testGetExerciseDetails()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a56d640f0915b12b1066dbaa8ff135a1c3f5782c", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a56d640f0915b12b1066dbaa8ff135a1c3f5782c", "committedDate": "2020-04-30T19:40:47Z", "message": "moved transient property from exercise to programming-exercise"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c02d337089cfa864ab9e32e4f5d8e6e135ab6e", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/70c02d337089cfa864ab9e32e4f5d8e6e135ab6e", "committedDate": "2020-04-30T19:56:08Z", "message": "moved transient property from exercise to programming-exercise (server-side)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDY4MzE4", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-404068318", "createdAt": "2020-05-01T08:31:19Z", "commit": {"oid": "70c02d337089cfa864ab9e32e4f5d8e6e135ab6e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDg0NDM1", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-404084435", "createdAt": "2020-05-01T09:23:53Z", "commit": {"oid": "70c02d337089cfa864ab9e32e4f5d8e6e135ab6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOToyMzo1NFrOGPFt-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOToyMzo1NFrOGPFt-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3NTUxMg==", "bodyText": "please rename the method, it does not reflect what is done here.", "url": "https://github.com/ls1intum/Artemis/pull/1368#discussion_r418475512", "createdAt": "2020-05-01T09:23:54Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseService.java", "diffHunk": "@@ -777,4 +777,16 @@ public long countSubmissionsByCourseIdSubmitted(Long courseId) {\n         log.debug(\"countSubmissionsByCourseIdSubmitted took \" + (System.currentTimeMillis() - start) + \"ms\");\n         return count;\n     }\n+\n+    /**\n+     * Sets the transient attribute \"testRepositoryUrl\" if the exercises is a programming exercise\n+     *\n+     * @param exercise the exercise for which to set the url\n+     */\n+    public void setTestRepositoryUrlForProgrammingExercise(Exercise exercise) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70c02d337089cfa864ab9e32e4f5d8e6e135ab6e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDg0NTAy", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-404084502", "createdAt": "2020-05-01T09:24:09Z", "commit": {"oid": "70c02d337089cfa864ab9e32e4f5d8e6e135ab6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOToyNDowOVrOGPFuRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOToyNDowOVrOGPFuRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3NTU4OQ==", "bodyText": "I would only set this value if it is a local simulation", "url": "https://github.com/ls1intum/Artemis/pull/1368#discussion_r418475589", "createdAt": "2020-05-01T09:24:09Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseService.java", "diffHunk": "@@ -777,4 +777,16 @@ public long countSubmissionsByCourseIdSubmitted(Long courseId) {\n         log.debug(\"countSubmissionsByCourseIdSubmitted took \" + (System.currentTimeMillis() - start) + \"ms\");\n         return count;\n     }\n+\n+    /**\n+     * Sets the transient attribute \"testRepositoryUrl\" if the exercises is a programming exercise\n+     *\n+     * @param exercise the exercise for which to set the url\n+     */\n+    public void setTestRepositoryUrlForProgrammingExercise(Exercise exercise) {\n+        if (exercise instanceof ProgrammingExercise) {\n+            boolean isLocalSimulation = (((ProgrammingExercise) exercise).getTestRepositoryUrl()).contains(\"artemislocalhost\");\n+            ((ProgrammingExercise) exercise).setIsLocalSimulation(isLocalSimulation);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70c02d337089cfa864ab9e32e4f5d8e6e135ab6e"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d22420eaf0d0d66f714b8195575c20d67594d1a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/1d22420eaf0d0d66f714b8195575c20d67594d1a", "committedDate": "2020-05-01T12:25:03Z", "message": "code refactoring and only set the transient property, if the programming exercise is a local simulation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc5825d1a692c495e8e2e3ecb3161ec7ce0d8a6f", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/cc5825d1a692c495e8e2e3ecb3161ec7ce0d8a6f", "committedDate": "2020-05-01T12:26:17Z", "message": "Merge branch 'develop' into bugfix/remove-unnecessary-restcall"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MTUxOTIx", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-404151921", "createdAt": "2020-05-01T13:13:26Z", "commit": {"oid": "cc5825d1a692c495e8e2e3ecb3161ec7ce0d8a6f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzA2Nzg1", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-404306785", "createdAt": "2020-05-01T18:00:22Z", "commit": {"oid": "cc5825d1a692c495e8e2e3ecb3161ec7ce0d8a6f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTE4NDA1", "url": "https://github.com/ls1intum/Artemis/pull/1368#pullrequestreview-404518405", "createdAt": "2020-05-02T10:47:51Z", "commit": {"oid": "cc5825d1a692c495e8e2e3ecb3161ec7ce0d8a6f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2978, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}