{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MTc4Mjg5", "number": 1959, "title": "[Bugfix] [Exam] Refreshing files in the code-editor if offline", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\nIn the testing session today, we found a bug which happened when the user was offline.\nIf the user made changes and then pressed on refresh while being offline all the file representations stored in the local storage would be deleted.\nDescription\nThis behaviour was happening because, after switching away from a refreshing state, we would fetch the files again from the server. This, of course, was not possible when you are offline.\nFix: Only reload the files from the server if the state switches from refreshing to clean.\nSteps for Testing\n\nLog in to Artemis\nNavigate to Course Administration\nCreate an exam with a programming exercise with the code editor\nGo offline and make some changes.\nPress on refresh\nAn error message should be displayed, but the local files should not be changed.\nThe editor state should be unsaved changes.", "createdAt": "2020-07-24T09:19:37Z", "url": "https://github.com/ls1intum/Artemis/pull/1959", "merged": true, "mergeCommit": {"oid": "ffe906c0c8859a3a4ce2a544f20bc94cc93fc6cc"}, "closed": true, "closedAt": "2020-07-25T06:57:36Z", "author": {"login": "anditurdiu"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4AZYjAH2gAyNDU2MTc4Mjg5OjYwNDdkZjBkMjllYjg4NzFiZDE1NzlhYjQ1ZTBhOTViZGFlYTI5YWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4SpI4AFqTQ1NTI2NTczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6047df0d29eb8871bd1579ab45e0a95bdaea29ae", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/6047df0d29eb8871bd1579ab45e0a95bdaea29ae", "committedDate": "2020-07-24T09:13:34Z", "message": "Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d04f1dfa8775c415d2aad793952ae5e3ebacd4b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1d04f1dfa8775c415d2aad793952ae5e3ebacd4b", "committedDate": "2020-07-24T15:47:52Z", "message": "do not set code editor to error commit state if refresh failed. Just revert to uncommited changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1a43093535179d4381faed02068d412e1a5dbf0d", "committedDate": "2020-07-24T17:19:34Z", "message": "Fix error handling propagation, remove unneccesary timeouts\nprovide specific messages for different reasons for failing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTExOTgw", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455111980", "createdAt": "2020-07-24T18:49:17Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTM2NDI4", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455136428", "createdAt": "2020-07-24T19:31:59Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTU4NzU0", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455158754", "createdAt": "2020-07-24T20:13:25Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTYzOTY5", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455163969", "createdAt": "2020-07-24T20:23:26Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjE0Mzkz", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455214393", "createdAt": "2020-07-24T22:20:57Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjE2NDQ4", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455216448", "createdAt": "2020-07-24T22:27:31Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjY1NTQx", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455265541", "createdAt": "2020-07-25T06:25:23Z", "commit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNjoyNToyM1rOG3C4uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNjoyNToyM1rOG3C4uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MjE1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"resetFailed\": \"Deine Repository konnte nicht zur\u00fcckgesetzt werden.\"\n          \n          \n            \n                            \"resetFailed\": \"Dein Repository konnte nicht zur\u00fcckgesetzt werden.\"", "url": "https://github.com/ls1intum/Artemis/pull/1959#discussion_r460372155", "createdAt": "2020-07-25T06:25:23Z", "author": {"login": "krusche"}, "path": "src/main/webapp/i18n/de/editor.json", "diffHunk": "@@ -86,10 +87,10 @@\n                 \"failedToLoadBuildLogs\": \"Die Build Logs konnten nicht geladen werden.\",\n                 \"repositoryInConflict\": \"Dein Repository befindet sich in einem Konfliktzustand.\",\n                 \"notAllowedExam\": \"Du kannst (nicht mehr) abgeben\",\n-                \"connectionTimeoutSave\": \"Speichern ist fehlgeschlagen. Bitte stelle eine gute Internetverbindung sicher und versuche es nochmal.\",\n-                \"undefined\": \"Vorgang ist fehlgeschlagen. Bitte stelle eine gute Internetverbindung sicher und versuche es nochmal.\",\n-                \"connectionTimeoutRefresh\": \"Aktualisieren ist fehlgeschlagen. Bitte stelle eine gute Internetverbindung sicher und versuche es nochmal.\",\n-                \"resetFailed\": \"Dein Repository konnte nicht zur\u00fcckgesetzt werden.\"\n+                \"saveFailedInternetDisconnected\": \"Speichern ist fehlgeschlagen. Bitte stelle eine gute Internetverbindung sicher und versuche es nochmal.\",\n+                \"commitFailedInternetDisconnected\": \"Commit ist fehlgeschlagen. Bitte stelle eine gute Internetverbindung sicher und versuche es nochmal.\",\n+                \"refreshFailedInternetDisconnected\": \"Aktualisieren ist fehlgeschlagen. Bitte stelle eine gute Internetverbindung sicher und versuche es nochmal.\",\n+                \"resetFailed\": \"Deine Repository konnte nicht zur\u00fcckgesetzt werden.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a43093535179d4381faed02068d412e1a5dbf0d"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7aca20aee8b127409dfb4f5c3aff3c2f9040a37", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/b7aca20aee8b127409dfb4f5c3aff3c2f9040a37", "committedDate": "2020-07-25T06:25:34Z", "message": "Update src/main/webapp/i18n/de/editor.json"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjY1NjQ2", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455265646", "createdAt": "2020-07-25T06:27:10Z", "commit": {"oid": "b7aca20aee8b127409dfb4f5c3aff3c2f9040a37"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNjoyNzoxMFrOG3C5Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNjoyNzoxMFrOG3C5Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MjMxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"refreshFailed\": \"Der Stand konnte nicht von der Repository bezogen werden\",\n          \n          \n            \n                            \"refreshFailed\": \"Die Aktualisierung ist fehlgeschlagen\",", "url": "https://github.com/ls1intum/Artemis/pull/1959#discussion_r460372314", "createdAt": "2020-07-25T06:27:10Z", "author": {"login": "krusche"}, "path": "src/main/webapp/i18n/de/editor.json", "diffHunk": "@@ -74,6 +74,7 @@\n                 \"exerciseNotFound\": \"Die \u00dcbung konnte nicht gefunden werden.\",\n                 \"saveFailed\": \"Eine oder mehrere Dateien konnte nicht gespeichert werden.\",\n                 \"commitFailed\": \"Eine oder mehrere Dateien konnte nicht commited werden.\",\n+                \"refreshFailed\": \"Der Stand konnte nicht von der Repository bezogen werden\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7aca20aee8b127409dfb4f5c3aff3c2f9040a37"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjY1NjY0", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455265664", "createdAt": "2020-07-25T06:27:38Z", "commit": {"oid": "b7aca20aee8b127409dfb4f5c3aff3c2f9040a37"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNjoyNzozOFrOG3C5cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNjoyNzozOFrOG3C5cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MjMzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"refreshFailed\": \"Could not pull from repository\",\n          \n          \n            \n                            \"refreshFailed\": \"Refresh has failed\",", "url": "https://github.com/ls1intum/Artemis/pull/1959#discussion_r460372338", "createdAt": "2020-07-25T06:27:38Z", "author": {"login": "krusche"}, "path": "src/main/webapp/i18n/en/editor.json", "diffHunk": "@@ -78,6 +78,7 @@\n                 \"exerciseNotFound\": \"The exercise could not be found.\",\n                 \"saveFailed\": \"One or more files could not be updated.\",\n                 \"commitFailed\": \"One or more files could not be commited.\",\n+                \"refreshFailed\": \"Could not pull from repository\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7aca20aee8b127409dfb4f5c3aff3c2f9040a37"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "534d37d858721d256bf64047595db096b53ff408", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/534d37d858721d256bf64047595db096b53ff408", "committedDate": "2020-07-25T06:28:19Z", "message": "Apply suggestions from code review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjY1NzMy", "url": "https://github.com/ls1intum/Artemis/pull/1959#pullrequestreview-455265732", "createdAt": "2020-07-25T06:29:04Z", "commit": {"oid": "534d37d858721d256bf64047595db096b53ff408"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4424, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}