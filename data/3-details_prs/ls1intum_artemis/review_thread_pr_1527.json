{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzODg1NTAw", "number": 1527, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxOToxODozN1rOEBIgsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMDoxMjoyMlrOEBUAtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjIzNDcyOnYy", "diffSide": "RIGHT", "path": "src/main/java/de/tum/in/www1/artemis/service/ComplaintResponseService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxOToxODozN1rOGc06Ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMDoxMTo1OVrOGdFb3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MDE2Mg==", "bodyText": "I'm not sure if we want to allow instructors to review every complaint, is that something you considered?", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r432880162", "createdAt": "2020-05-30T19:18:37Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ComplaintResponseService.java", "diffHunk": "@@ -96,4 +89,36 @@ else if (!assessor.equals(reviewer) && (originalComplaint.getComplaintType() !=\n         complaintResponse.setComplaint(originalComplaint);\n         return complaintResponseRepository.save(complaintResponse);\n     }\n+\n+    /**\n+     * Checks whether the reviewer is authorized to respond to this complaint\n+     *\n+     * 1. Team Exercises\n+     *    => The team tutor assesses the submissions and responds to complaints and more feedback requests\n+     *\n+     * 2. Individual Exercises\n+     *    => Complaints can only be handled by a tutor who is not the original assessor\n+     *    => More feedback requests are handled by the assessor himself\n+     *\n+     * @param participation Participation to which the complaint belongs to\n+     * @param complaint Complaint for which to check\n+     * @param assessor Assessor of the submission whose assessment was complained about\n+     * @param reviewer Reviewer who is trying to create a response to the complaint\n+     * @return true if the tutor is allowed to respond to the complaint, false otherwise\n+     */\n+    private boolean isUserAuthorizedToRespondToComplaint(StudentParticipation participation, Complaint complaint, User assessor, User reviewer) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDUwOQ==", "bodyText": "Good point. I basically wanted to keep the existing behavior for individual exercises the same and model the behavior for team exercises after it as far as there are parallels.\nThe behavior for individual exercises is that instructors could respond to a complaint but not to a more feedback request. That makes sense in so far as complaints in individual exercises can be handled by any secondary person who is at least a tutor while more feedback requests can only be handled by the originally assessor (since only they know why they assessed something a certain way).\nIn team exercises, both types of student feedback are only handled by the team tutor himself so in that regard they both behave more like \"more feedback\" requests for individual exercises. Thus I think it makes sense if only the original assessor can respond to complaints for team exercises. It would be surprising for the students if suddenly a different person responds when they expect it to be their tutor for team exercises.", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433130509", "createdAt": "2020-06-01T09:23:23Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ComplaintResponseService.java", "diffHunk": "@@ -96,4 +89,36 @@ else if (!assessor.equals(reviewer) && (originalComplaint.getComplaintType() !=\n         complaintResponse.setComplaint(originalComplaint);\n         return complaintResponseRepository.save(complaintResponse);\n     }\n+\n+    /**\n+     * Checks whether the reviewer is authorized to respond to this complaint\n+     *\n+     * 1. Team Exercises\n+     *    => The team tutor assesses the submissions and responds to complaints and more feedback requests\n+     *\n+     * 2. Individual Exercises\n+     *    => Complaints can only be handled by a tutor who is not the original assessor\n+     *    => More feedback requests are handled by the assessor himself\n+     *\n+     * @param participation Participation to which the complaint belongs to\n+     * @param complaint Complaint for which to check\n+     * @param assessor Assessor of the submission whose assessment was complained about\n+     * @param reviewer Reviewer who is trying to create a response to the complaint\n+     * @return true if the tutor is allowed to respond to the complaint, false otherwise\n+     */\n+    private boolean isUserAuthorizedToRespondToComplaint(StudentParticipation participation, Complaint complaint, User assessor, User reviewer) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MDE2Mg=="}, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE1MDk0Mw==", "bodyText": "My idea was that instructors could possibly solve a complaint in case a tutor is unable to do so, either because of lack of knowledge or e.g. personal issues that prevent the tutor from evaluating the complaint/feedback request.\nI agree that it does not make sense to add this right now, as there is also no way to display these requests. I still believe there might be some scenarios, like mentioned above, where it might be valid for an instructor to solve a complaint.\nAs this is out-of-scope for this PR, I will resolve this discussion.", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433150943", "createdAt": "2020-06-01T10:11:59Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ComplaintResponseService.java", "diffHunk": "@@ -96,4 +89,36 @@ else if (!assessor.equals(reviewer) && (originalComplaint.getComplaintType() !=\n         complaintResponse.setComplaint(originalComplaint);\n         return complaintResponseRepository.save(complaintResponse);\n     }\n+\n+    /**\n+     * Checks whether the reviewer is authorized to respond to this complaint\n+     *\n+     * 1. Team Exercises\n+     *    => The team tutor assesses the submissions and responds to complaints and more feedback requests\n+     *\n+     * 2. Individual Exercises\n+     *    => Complaints can only be handled by a tutor who is not the original assessor\n+     *    => More feedback requests are handled by the assessor himself\n+     *\n+     * @param participation Participation to which the complaint belongs to\n+     * @param complaint Complaint for which to check\n+     * @param assessor Assessor of the submission whose assessment was complained about\n+     * @param reviewer Reviewer who is trying to create a response to the complaint\n+     * @return true if the tutor is allowed to respond to the complaint, false otherwise\n+     */\n+    private boolean isUserAuthorizedToRespondToComplaint(StudentParticipation participation, Complaint complaint, User assessor, User reviewer) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MDE2Mg=="}, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjI0NTExOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/course/manage/course-update.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxOTo0MjowOVrOGc0_Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxNDoyNFrOGdD9Hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTUwNg==", "bodyText": "The formatting here looks a bit weird, can you maybe check this again?", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r432881506", "createdAt": "2020-05-30T19:42:09Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/course/manage/course-update.component.html", "diffHunk": "@@ -158,7 +158,9 @@ <h4 *ngIf=\"course.id\" id=\"jhi-course-heading-edit\" jhiTranslate=\"artemisApp.cour\n                     ></fa-icon>\n                 </div>\n                 <div class=\"form-group\" *ngIf=\"complaintsEnabled\">\n-                    <label class=\"form-control-label\" jhiTranslate=\"artemisApp.course.maxComplaints.title\" for=\"field_maxComplaints\">Maximum Number of Complaints</label>\n+                    <label class=\"form-control-label\" jhiTranslate=\"artemisApp.course.maxComplaints.title\" for=\"field_maxComplaints\"\n+                        >Maximum amount of complaints per student</label", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyNjY4Ng==", "bodyText": "I fixed the formatting. I think that happens when prettier auto-wraps lines that are too long.", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433126686", "createdAt": "2020-06-01T09:14:24Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/course/manage/course-update.component.html", "diffHunk": "@@ -158,7 +158,9 @@ <h4 *ngIf=\"course.id\" id=\"jhi-course-heading-edit\" jhiTranslate=\"artemisApp.cour\n                     ></fa-icon>\n                 </div>\n                 <div class=\"form-group\" *ngIf=\"complaintsEnabled\">\n-                    <label class=\"form-control-label\" jhiTranslate=\"artemisApp.course.maxComplaints.title\" for=\"field_maxComplaints\">Maximum Number of Complaints</label>\n+                    <label class=\"form-control-label\" jhiTranslate=\"artemisApp.course.maxComplaints.title\" for=\"field_maxComplaints\"\n+                        >Maximum amount of complaints per student</label", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTUwNg=="}, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjI0NTE4OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/course/manage/course-update.component.html", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxOTo0MjoxN1rOGc0_bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxNDozMFrOGdD9RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTUxNg==", "bodyText": "Same as above.", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r432881516", "createdAt": "2020-05-30T19:42:17Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/course/manage/course-update.component.html", "diffHunk": "@@ -167,6 +169,18 @@ <h4 *ngIf=\"course.id\" id=\"jhi-course-heading-edit\" jhiTranslate=\"artemisApp.cour\n                     ></fa-icon>\n                     <input required type=\"number\" class=\"form-control\" name=\"maxComplaints\" id=\"field_maxComplaints\" formControlName=\"maxComplaints\" />\n                 </div>\n+                <div class=\"form-group\" *ngIf=\"complaintsEnabled\">\n+                    <label class=\"form-control-label\" jhiTranslate=\"artemisApp.course.maxTeamComplaints.title\" for=\"field_maxTeamComplaints\"\n+                        >Maximum amount of complaints per team</label", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyNjcyNA==", "bodyText": "Done", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433126724", "createdAt": "2020-06-01T09:14:30Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/course/manage/course-update.component.html", "diffHunk": "@@ -167,6 +169,18 @@ <h4 *ngIf=\"course.id\" id=\"jhi-course-heading-edit\" jhiTranslate=\"artemisApp.cour\n                     ></fa-icon>\n                     <input required type=\"number\" class=\"form-control\" name=\"maxComplaints\" id=\"field_maxComplaints\" formControlName=\"maxComplaints\" />\n                 </div>\n+                <div class=\"form-group\" *ngIf=\"complaintsEnabled\">\n+                    <label class=\"form-control-label\" jhiTranslate=\"artemisApp.course.maxTeamComplaints.title\" for=\"field_maxTeamComplaints\"\n+                        >Maximum amount of complaints per team</label", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTUxNg=="}, "originalCommit": {"oid": "e4d36f73cc1cf32e20c5541138994e54ebb031e6"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5ODExODk0OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/i18n/de/complaint.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMDoxMjoyMlrOGdFcjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMDoxMjoyMlrOGdFcjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE1MTExNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"descriptionTeam\": \"Ihr k\u00f6nnt ingesamt bis zu {{ maxComplaintNumber }} Beschwerden als Team in diesem Kurs einreichen.\",\n          \n          \n            \n                        \"descriptionTeam\": \"Ihr k\u00f6nnt insgesamt bis zu {{ maxComplaintNumber }} Beschwerden als Team in diesem Kurs einreichen.\",\n          \n      \n    \n    \n  \n\nsmall typo", "url": "https://github.com/ls1intum/Artemis/pull/1527#discussion_r433151117", "createdAt": "2020-06-01T10:12:22Z", "author": {"login": "filip-gregurevic"}, "path": "src/main/webapp/i18n/de/complaint.json", "diffHunk": "@@ -5,7 +5,10 @@\n             \"info\": \"Die Limitierung der Beschwerdenanzahl bezieht sich auf offene und abgelehnte Beschwerden. Wenn deine Beschwerde angenommen wird, wird sie nicht auf deine Gesamtzahl der Beschwerden angerechnet.\",\n             \"description\": \"Du kannst insgesamt bis zu {{ maxComplaintNumber }} Beschwerden in diesem Kurs einreichen.\",\n             \"descriptionExtended\": \"Jeder Student darf insgesamt bis zu {{ maxComplaintNumber }} Beschwerden in diesem Kurs einreichen. Du hast noch <strong style=color:red;>{{ allowedComplaints }}</strong> Beschwerden \u00fcbrig.\",\n+            \"descriptionTeam\": \"Ihr k\u00f6nnt ingesamt bis zu {{ maxComplaintNumber }} Beschwerden als Team in diesem Kurs einreichen.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18cd86d290787606025b5c710cb109ae2c0a3561"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 5, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}