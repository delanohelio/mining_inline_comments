{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMjgyNTcx", "number": 1775, "title": "[Exam] calculate endDate of exam with workingTime", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\n\n\nAll students have the same duration of the exam. Students with disadvantages are not compensated.\nDescription\n\nCalculate the end of the exam using the working time.\nSteps for Testing\n\n\nLog in to Artemis\nCreate an exam with exercises\nAdd at least two users\nSet different working times for the users\nMake sure that the users have the appropriate working time when participating in the exam", "createdAt": "2020-06-30T20:43:31Z", "url": "https://github.com/ls1intum/Artemis/pull/1775", "merged": true, "mergeCommit": {"oid": "764829426266eaf6a424a5a7da954fb0aa472b4e"}, "closed": true, "closedAt": "2020-07-01T19:35:35Z", "author": {"login": "filip-gregurevic"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwb1pkgH2gAyNDQyMjgyNTcxOjRkNDhlNDczMDJjMzU0ZjVhMTFlMmMxNzA5MDEyNmM4Y2Q2M2Y2YTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwvgaHgFqTQ0MTE0NDY1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d48e47302c354f5a11e2c17090126c8cd63f6a7", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/4d48e47302c354f5a11e2c17090126c8cd63f6a7", "committedDate": "2020-06-30T20:40:29Z", "message": "use working time for enddate calculation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1da3e67727f66df7708b18a4c320abea0bc8a430", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/1da3e67727f66df7708b18a4c320abea0bc8a430", "committedDate": "2020-06-30T20:42:47Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam/client/working-time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0", "committedDate": "2020-06-30T21:11:35Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam/client/working-time\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.html\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.ts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDA4OTQw", "url": "https://github.com/ls1intum/Artemis/pull/1775#pullrequestreview-440408940", "createdAt": "2020-06-30T21:45:39Z", "commit": {"oid": "d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTo0NTozOVrOGrPmdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMTo0NTozOVrOGrPmdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NzU1OQ==", "bodyText": "Should you maybe use the server time here instead of moment()?", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r447997559", "createdAt": "2020-06-30T21:45:39Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -93,6 +97,7 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n             this.examId = parseInt(params['examId'], 10);\n             this.examParticipationService.loadExam(this.courseId, this.examId).subscribe((exam) => {\n                 this.exam = exam;\n+                this.endDate = exam.endDate ? exam.endDate : moment();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f26033c6dd8e2b1592235728a6b733d5177d555d", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/f26033c6dd8e2b1592235728a6b733d5177d555d", "committedDate": "2020-06-30T21:51:58Z", "message": "use server date instead of moment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDE1NTQ5", "url": "https://github.com/ls1intum/Artemis/pull/1775#pullrequestreview-440415549", "createdAt": "2020-06-30T21:58:16Z", "commit": {"oid": "f26033c6dd8e2b1592235728a6b733d5177d555d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDE4NzE1", "url": "https://github.com/ls1intum/Artemis/pull/1775#pullrequestreview-440418715", "createdAt": "2020-06-30T22:04:41Z", "commit": {"oid": "f26033c6dd8e2b1592235728a6b733d5177d555d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjowNDo0MlrOGrQF1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjowNDo0MlrOGrQF1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNTU5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                endDate: Moment;\n          \n          \n            \n                individualStudentEndDate: Moment;", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448005590", "createdAt": "2020-06-30T22:04:42Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -44,6 +46,8 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n     exam: Exam;\n     studentExam: StudentExam;\n \n+    endDate: Moment;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f26033c6dd8e2b1592235728a6b733d5177d555d"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1bf5e682a67ed09449c9b28b90e087fea06cdf3", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/e1bf5e682a67ed09449c9b28b90e087fea06cdf3", "committedDate": "2020-06-30T22:31:34Z", "message": "Update src/main/webapp/app/exam/participate/exam-participation.component.ts\n\nCo-authored-by: Stephan Krusche <krusche@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccf060d8dae0f30f7afb4d700ecdab622e992958", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/ccf060d8dae0f30f7afb4d700ecdab622e992958", "committedDate": "2020-06-30T22:32:42Z", "message": "rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aca2b78d7964a102413360aa0a5878acdae9e83", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/2aca2b78d7964a102413360aa0a5878acdae9e83", "committedDate": "2020-06-30T22:33:14Z", "message": "rename pt 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ebf10b5dfeb1a462d2067aa7f1884189649b470", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/0ebf10b5dfeb1a462d2067aa7f1884189649b470", "committedDate": "2020-06-30T22:34:50Z", "message": "rename pt 3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNzA2ODI2", "url": "https://github.com/ls1intum/Artemis/pull/1775#pullrequestreview-440706826", "createdAt": "2020-07-01T09:36:06Z", "commit": {"oid": "0ebf10b5dfeb1a462d2067aa7f1884189649b470"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTozNjowN1rOGree6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTo0MTo0OFrOGrerzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0MTM4NA==", "bodyText": "WOW, does this default value make a lot of sense? Should this rather be null and handled appropriately?", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448241384", "createdAt": "2020-07-01T09:36:07Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -93,6 +97,7 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n             this.examId = parseInt(params['examId'], 10);\n             this.examParticipationService.loadExam(this.courseId, this.examId).subscribe((exam) => {\n                 this.exam = exam;\n+                this.individualStudentEndDate = exam.endDate ? exam.endDate : this.serverDateService.now();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ebf10b5dfeb1a462d2067aa7f1884189649b470"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0NDY4NQ==", "bodyText": "Here again, if start date is not defined, we set the end date to now? Does this make sense?", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448244685", "createdAt": "2020-07-01T09:41:48Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -122,6 +127,8 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n             // init studentExam and activeExercise\n             this.studentExam = studentExam;\n             this.activeExercise = studentExam.exercises[0];\n+            // set endDate with workingTime\n+            this.individualStudentEndDate = this.exam.startDate ? moment(this.exam.startDate).add(studentExam.workingTime, 'seconds') : this.individualStudentEndDate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ebf10b5dfeb1a462d2067aa7f1884189649b470"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTQ0NjU1", "url": "https://github.com/ls1intum/Artemis/pull/1775#pullrequestreview-441144655", "createdAt": "2020-07-01T19:35:23Z", "commit": {"oid": "0ebf10b5dfeb1a462d2067aa7f1884189649b470"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2603, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}