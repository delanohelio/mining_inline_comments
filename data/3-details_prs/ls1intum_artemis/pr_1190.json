{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNjM2NTE4", "number": 1190, "title": "Chore/test coverage/modeling submission resource", "bodyText": "Checklist\n\n Server: I added multiple integration tests (Spring) related to the features\n\nMotivation and Context\nThis PR increases the test coverage for the ModelingSubmissionResource", "createdAt": "2020-01-16T13:08:22Z", "url": "https://github.com/ls1intum/Artemis/pull/1190", "merged": true, "mergeCommit": {"oid": "30fc9b84e2ebba861180aecaceae7e2fe9f0b920"}, "closed": true, "closedAt": "2020-01-21T15:36:50Z", "author": {"login": "lovaiible"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6vBKugH2gAyMzYzNjM2NTE4OjZlYmVhZjFhMmQyZjVmMjc2NmRhOGU1ZDVjNzE5ZmJhNGRiNTM5Zjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8i_XPAFqTM0NTk3MjQwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ebeaf1a2d2f5f2766da8e5d5c719fba4db539f8", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/6ebeaf1a2d2f5f2766da8e5d5c719fba4db539f8", "committedDate": "2020-01-16T00:29:21Z", "message": "Add tests for getSubmissionForModelingEditor()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac9c256384f7be231e64db119f9a42f9c0d171fd", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/ac9c256384f7be231e64db119f9a42f9c0d171fd", "committedDate": "2020-01-16T01:00:37Z", "message": "Add test for getNextOptimalModelSubmission()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46632c59f8aa871294ea0ba2b728079a860a77ab", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/46632c59f8aa871294ea0ba2b728079a860a77ab", "committedDate": "2020-01-16T02:08:44Z", "message": "Extend test for getNextOptimalModelSubmission()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfbbb4e674362f2a9c4a990ded2eabcba8608151", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/dfbbb4e674362f2a9c4a990ded2eabcba8608151", "committedDate": "2020-01-16T02:09:20Z", "message": "Add test for updateModelSubmission()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e729e065999f799f1a10bf28370de6dca2b9796f", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/e729e065999f799f1a10bf28370de6dca2b9796f", "committedDate": "2020-01-16T02:16:32Z", "message": "Add test for deleteNextOptimalModelSubmission()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95ab3b95da6f0796e0eea39138d94a116d46403c", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/95ab3b95da6f0796e0eea39138d94a116d46403c", "committedDate": "2020-01-16T02:27:24Z", "message": "Add test for createModelingSubmission()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016055fbcf45c1883b08997513ad4e6c88baba57", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/016055fbcf45c1883b08997513ad4e6c88baba57", "committedDate": "2020-01-16T02:32:54Z", "message": "Apply spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e9578784a3bb91b9c973217a149a4ee0aa2e612", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/2e9578784a3bb91b9c973217a149a4ee0aa2e612", "committedDate": "2020-01-16T12:23:35Z", "message": "Merge branch 'develop' into chore/test-coverage/ModelingSubmissionResource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/557f0469523d05a4856b3371c06542575a66e0c4", "committedDate": "2020-01-16T12:55:21Z", "message": "Add descriptions to test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzOTU2MDk3", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-343956097", "createdAt": "2020-01-16T14:35:01Z", "commit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNDozNTowMVrOFeba3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxNDozNTowMVrOFeba3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ1MDg0NQ==", "bodyText": "This code is not necessary because findOneWithEagerSubmissionsAndResults throws an exception if there is no entity found.", "url": "https://github.com/ls1intum/Artemis/pull/1190#discussion_r367450845", "createdAt": "2020-01-16T14:35:01Z", "author": {"login": "lovaiible"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ModelingSubmissionResource.java", "diffHunk": "@@ -329,18 +329,16 @@ else if (!authCheckService.isAtLeastInstructorForExercise(exercise)) {\n     @PreAuthorize(\"hasAnyRole('USER', 'TA', 'INSTRUCTOR', 'ADMIN')\")\n     public ResponseEntity<ModelingSubmission> getSubmissionForModelingEditor(@PathVariable Long participationId) {\n         StudentParticipation participation = participationService.findOneWithEagerSubmissionsAndResults(participationId);\n-        if (participation == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0Mzc2NDM2", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-344376436", "createdAt": "2020-01-17T05:57:37Z", "commit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NDE0MzEz", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-344414313", "createdAt": "2020-01-17T08:06:26Z", "commit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODowNjoyNlrOFexWHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODowNjoyNlrOFexWHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxMDA3Ng==", "bodyText": "I think you should invoke @GetMapping(value = \"/exercises/{exerciseId}/modeling-submission-without-assessment\") once before, so that there are optimal submissions calculated on the server.\nThen please also check that the list of optimal models is empty. You might need to add a public getter to obtain this information, it is stored in CompassService (can be injected) -> CompassCalculationEngine -> ModelSelector -> modelsWaitingForAssessment", "url": "https://github.com/ls1intum/Artemis/pull/1190#discussion_r367810076", "createdAt": "2020-01-17T08:06:26Z", "author": {"login": "krusche"}, "path": "src/test/java/de/tum/in/www1/artemis/ModelingSubmissionIntegrationTest.java", "diffHunk": "@@ -387,19 +492,19 @@ public void getNextOptimalModelSubmission_lockLimitReached() throws Exception {\n     }\n \n     @Test\n-    @WithMockUser(value = \"student1\")\n-    public void getModelSubmissionForModelingEditor() throws Exception {\n-        ModelingSubmission submission = ModelFactory.generateModelingSubmission(validModel, true);\n-        submission = database.addModelingSubmissionWithFinishedResultAndAssessor(classExercise, submission, \"student1\", \"tutor1\");\n+    @WithMockUser(value = \"tutor1\", roles = \"TA\")\n+    public void deleteNextOptimalModelSubmission() throws Exception {\n+        request.delete(\"/api/exercises/\" + classExercise.getId() + \"/optimal-model-submissions\", HttpStatus.NO_CONTENT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4"}, "originalPosition": 188}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1Mzg2MTk0", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-345386194", "createdAt": "2020-01-20T15:32:09Z", "commit": {"oid": "557f0469523d05a4856b3371c06542575a66e0c4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44fa30e122b04d9f06ea1095549a2ffb0252f60f", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/44fa30e122b04d9f06ea1095549a2ffb0252f60f", "committedDate": "2020-01-20T23:24:09Z", "message": "Merge branch 'develop' into chore/test-coverage/ModelingSubmissionResource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ca4a76ad721bc7a30253037d67d0edd3b438d96", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/8ca4a76ad721bc7a30253037d67d0edd3b438d96", "committedDate": "2020-01-21T13:06:54Z", "message": "Extend deleteNextOptimalModelSubmission test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1013a869da97295bbe495cb9c9bf5ddf8cbba74", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/d1013a869da97295bbe495cb9c9bf5ddf8cbba74", "committedDate": "2020-01-21T13:21:18Z", "message": "Apply spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffc0954309e24e48c3cedb0f0561a62e8248431d", "author": {"user": {"login": "lovaiible", "name": "Anh Montag"}}, "url": "https://github.com/ls1intum/Artemis/commit/ffc0954309e24e48c3cedb0f0561a62e8248431d", "committedDate": "2020-01-21T13:54:16Z", "message": "Merge branch 'develop' into chore/test-coverage/ModelingSubmissionResource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTQ2MDY0", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-345946064", "createdAt": "2020-01-21T15:04:03Z", "commit": {"oid": "ffc0954309e24e48c3cedb0f0561a62e8248431d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTQ2Mzc4", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-345946378", "createdAt": "2020-01-21T15:04:28Z", "commit": {"oid": "ffc0954309e24e48c3cedb0f0561a62e8248431d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNTowNDoyOFrOFf9RPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNTowNDoyOFrOFf9RPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTA1NDAxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public List<Long> getCalculationEngineModelsWaitingForAssessment(Long exerciseId) {\n          \n          \n            \n                public List<Long> getCalculationEngineModelsWaitingForAssessment(long exerciseId) {", "url": "https://github.com/ls1intum/Artemis/pull/1190#discussion_r369054012", "createdAt": "2020-01-21T15:04:28Z", "author": {"login": "maxr96"}, "path": "src/main/java/de/tum/in/www1/artemis/service/compass/CompassService.java", "diffHunk": "@@ -585,4 +585,13 @@ public void printStatistic(Long exerciseId) {\n         compassCalculationEngines.get(exerciseId).printStatistic(exerciseId,\n                 resultRepository.findAllWithEagerFeedbackByAssessorIsNotNullAndParticipation_ExerciseIdAndCompletionDateIsNotNull(exerciseId));\n     }\n+\n+    /**\n+     * Method to access to the compass calculation engine getModelsWaitingForAssessment() method\n+     * @param exerciseId the id of the exercise the models should belong to\n+     * @return a list of modelIds that should be assessed next\n+     */\n+    public List<Long> getCalculationEngineModelsWaitingForAssessment(Long exerciseId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffc0954309e24e48c3cedb0f0561a62e8248431d"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTcyNDA5", "url": "https://github.com/ls1intum/Artemis/pull/1190#pullrequestreview-345972409", "createdAt": "2020-01-21T15:36:22Z", "commit": {"oid": "ffc0954309e24e48c3cedb0f0561a62e8248431d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3104, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}