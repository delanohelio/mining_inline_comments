{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNTkxNTQ4", "number": 2184, "title": "[Bugfix] Truncate build logs", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features (with a high test coverage)\n Server: I documented the Java code using JavaDoc style.\n\nMotivation and Context\n\n\nBuild logs entries which are larger than 255 characters currently crash the result creation as they don't fit into the database column VARCHAR(255). This happens for example when a build fails with static code analysis enabled, as Checkstyle will output quite a large error message.\nDescription\n\n\nTruncate the logs to 255 characters if they are larger than 255 characters\nLittle restructure of code. Preparation of build logs moved into a private method\nFiltering of useless SCA build logs e.g. \"[INFO] Downloading\", \"[INFO] Downloaded\"\nIntegration tests for various sizes of build logs\n\nSteps for Testing\n\n\nCreate a programming exercise (with and without SCA)\nParticipate in those exercises\nSubmit valid solutions\n--> Should compile and show results\nSubmit solution containing errors\n--> Should not compile and build logs should be shown\n\nTest Coverage\n\n\nBambooService.java: 77->80%\nBambooBuildResultNotificationDTO.BuildLogDTO 0% -> 100%", "createdAt": "2020-10-09T13:30:45Z", "url": "https://github.com/ls1intum/Artemis/pull/2184", "merged": true, "mergeCommit": {"oid": "68e37c4c10d9eb604711e530202b4699239203ac"}, "closed": true, "closedAt": "2020-10-13T15:42:05Z", "author": {"login": "kloessst"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQp1VNgH2gAyNTAwNTkxNTQ4OjM3OTcwMzE5OTQ3ZGViYjQwZDdkMDhjNDBmMjJkYTRmNjNkYTE1Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSKf_gAFqTUwNzU3NzczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "37970319947debb40d7d08c40f22da4f63da1577", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/37970319947debb40d7d08c40f22da4f63da1577", "committedDate": "2020-10-08T23:04:23Z", "message": "Truncate size of build logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f76062c8d42086f576c6102357e907dcfe1e6529", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/f76062c8d42086f576c6102357e907dcfe1e6529", "committedDate": "2020-10-08T23:10:56Z", "message": "Add large build log entry to test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35e14d95516af718f10b26033caa8b8f00645afa", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/35e14d95516af718f10b26033caa8b8f00645afa", "committedDate": "2020-10-08T23:43:42Z", "message": "Restructure build logs processing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd36153226313f542cc761832180f1ed2ef79421", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/bd36153226313f542cc761832180f1ed2ef79421", "committedDate": "2020-10-09T13:21:34Z", "message": "Set submission"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0d91c52ae44ac01823a8c9bde4aed5d32d8f5f9", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d0d91c52ae44ac01823a8c9bde4aed5d32d8f5f9", "committedDate": "2020-10-09T13:22:14Z", "message": "Add integration test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd300e96e503120e0d4280e8ceb2e787a40a95c3", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/dd300e96e503120e0d4280e8ceb2e787a40a95c3", "committedDate": "2020-10-09T13:34:18Z", "message": "Merge branch 'develop' into bugfix/truncate-build-logs-before-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6adfbee4cfe4838d854e743d64001d1ea225355", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/a6adfbee4cfe4838d854e743d64001d1ea225355", "committedDate": "2020-10-09T13:37:57Z", "message": "Add doc to silence codacy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f531d995091784484a0596d86b10a287a26f7b7", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3f531d995091784484a0596d86b10a287a26f7b7", "committedDate": "2020-10-09T14:06:37Z", "message": "Fix test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTc1NTk2", "url": "https://github.com/ls1intum/Artemis/pull/2184#pullrequestreview-506175596", "createdAt": "2020-10-11T12:40:33Z", "commit": {"oid": "3f531d995091784484a0596d86b10a287a26f7b7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3a9d2d3cd15e6cffbec9bcfe96254228becfaee", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/c3a9d2d3cd15e6cffbec9bcfe96254228becfaee", "committedDate": "2020-10-12T13:58:09Z", "message": "Merge branch 'develop' into bugfix/truncate-build-logs-before-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5b416c24cbcdea1952b149f64b7bbda95606c73", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/c5b416c24cbcdea1952b149f64b7bbda95606c73", "committedDate": "2020-10-12T16:24:00Z", "message": "Fix order column null index error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4971ac8aad2810ba2d6e60f006d23530c63f3c0f", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/4971ac8aad2810ba2d6e60f006d23530c63f3c0f", "committedDate": "2020-10-12T18:30:49Z", "message": "Merge branch 'develop' into bugfix/truncate-build-logs-before-save"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2ODgwMjAy", "url": "https://github.com/ls1intum/Artemis/pull/2184#pullrequestreview-506880202", "createdAt": "2020-10-12T19:57:24Z", "commit": {"oid": "4971ac8aad2810ba2d6e60f006d23530c63f3c0f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1df8ae785bdafd031a757a30be6bd2add8419037", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/1df8ae785bdafd031a757a30be6bd2add8419037", "committedDate": "2020-10-12T21:19:34Z", "message": "Filter checkstyle error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e58f69493e684b351d1449fa87ab213da7f2564b", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/e58f69493e684b351d1449fa87ab213da7f2564b", "committedDate": "2020-10-12T21:20:47Z", "message": "Merge branch 'bugfix/truncate-build-logs-before-save' of https://github.com/ls1intum/Artemis into bugfix/truncate-build-logs-before-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25385c8f7245e0f0ffd71832b87ccde232e5c07b", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/25385c8f7245e0f0ffd71832b87ccde232e5c07b", "committedDate": "2020-10-12T21:42:43Z", "message": "Exclude useless logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3a73f4acbbdfb2db153ac3dd58267cae567b5ce", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d3a73f4acbbdfb2db153ac3dd58267cae567b5ce", "committedDate": "2020-10-12T23:23:40Z", "message": "Merge branch 'develop' into bugfix/truncate-build-logs-before-save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7ddf36b66f11a6dbee4584f8a4a9e63f952ecf7", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d7ddf36b66f11a6dbee4584f8a4a9e63f952ecf7", "committedDate": "2020-10-12T23:32:23Z", "message": "Fix test setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65f20c0516ae4ab54bbe70efad69c36f2b1dd445", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/65f20c0516ae4ab54bbe70efad69c36f2b1dd445", "committedDate": "2020-10-12T23:37:07Z", "message": "Fix test setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8a92b6ea811e48dc42a1f57fb45aa7f8959e289", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/a8a92b6ea811e48dc42a1f57fb45aa7f8959e289", "committedDate": "2020-10-12T23:37:36Z", "message": "Merge branch 'bugfix/truncate-build-logs-before-save' of https://github.com/ls1intum/Artemis into bugfix/truncate-build-logs-before-save"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTA2OTc3", "url": "https://github.com/ls1intum/Artemis/pull/2184#pullrequestreview-507106977", "createdAt": "2020-10-13T06:34:10Z", "commit": {"oid": "a8a92b6ea811e48dc42a1f57fb45aa7f8959e289"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MzUwMTU0", "url": "https://github.com/ls1intum/Artemis/pull/2184#pullrequestreview-507350154", "createdAt": "2020-10-13T11:51:45Z", "commit": {"oid": "a8a92b6ea811e48dc42a1f57fb45aa7f8959e289"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTc3MTc0", "url": "https://github.com/ls1intum/Artemis/pull/2184#pullrequestreview-507577174", "createdAt": "2020-10-13T15:41:17Z", "commit": {"oid": "a8a92b6ea811e48dc42a1f57fb45aa7f8959e289"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0MToxN1rOHgtP1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0MToxN1rOHgtP1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1NzgxMw==", "bodyText": "follow up: make sure this is also invoked for Jenkins", "url": "https://github.com/ls1intum/Artemis/pull/2184#discussion_r504057813", "createdAt": "2020-10-13T15:41:17Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -290,6 +290,9 @@ else if (status.get(\"isActive\") && status.get(\"isBuilding\")) {\n \n         var buildLogEntries = filterBuildLogs(retrieveLatestBuildLogsFromBamboo(programmingExerciseParticipation.getBuildPlanId()));\n \n+        // Truncate the logs so that they fit into the database\n+        buildLogEntries.forEach(BuildLogEntry::truncateLogToMaxLength);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a92b6ea811e48dc42a1f57fb45aa7f8959e289"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTc3NzMy", "url": "https://github.com/ls1intum/Artemis/pull/2184#pullrequestreview-507577732", "createdAt": "2020-10-13T15:41:52Z", "commit": {"oid": "a8a92b6ea811e48dc42a1f57fb45aa7f8959e289"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3795, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}