{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0ODAzNjQx", "number": 2135, "title": "Update server and client dependencies (TypeScript 4)", "bodyText": "This PR updates (almost) all client and server dependencies, adds a new way how to authenticate with Bamboo and updates the Java programming exercise template to JDK15\nChecklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\n\nUpgrade to TypeScript 4 and improve code quality\nCreate better client code that does not fail due to undefined values\n\nDescription\n\nAll client entity classes now use ? to emphasize that those values can be undefined when they come from the server or when they are created on the client side. Developers either check for undefined values or use the ! to tell the compiler that they are 100% sure the value is defined.\nIf possible, do not use null values any more\nPrefer undefined over null (except this is not possible due to the used API)\nI deleted the e2e client tests that are not used any more\n\nSteps for Testing\nWe need to test all features of Artemis thoroughly before we release this change, because almost all client files are affected by the changes.\nTest Coverage\nNo tests have been added, so the coverage stays roughly the same", "createdAt": "2020-09-29T12:44:12Z", "url": "https://github.com/ls1intum/Artemis/pull/2135", "merged": true, "mergeCommit": {"oid": "ef1fe176cff9f8808f1a680861ee5a759b1bcbf8"}, "closed": true, "closedAt": "2020-10-01T10:55:17Z", "author": {"login": "krusche"}, "timelineItems": {"totalCount": 67, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLReHcgH2gAyNDk0ODAzNjQxOjJkZjI0NmY3MTU5NGY4MzJkMGFkMTM1OTI0YTgyN2FkYWIzZjEwYjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOO04CAFqTUwMDIxMTc1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2df246f71594f832d0ad135924a827adab3f10b9", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2df246f71594f832d0ad135924a827adab3f10b9", "committedDate": "2020-09-22T05:51:41Z", "message": "update to JDK 15 and TypeScript 4, update server and client dependencies\n\n* client: prefer undefined over null: this simplifies code, because we only need to distinguish one case (only undefined and not null) in most cases. Also Typescript assumes undefined if nothing is specified anyway. Also it allows us to mark elements as not existing (old delete functionality) in case they should removed in the client.\n* client: mark all domain object attributes as optional to reflect the case that those elements might not be available due to the automatic json conversion into anonymous Javascript objects during runtime. This is also important when we upload objects to the server, as non existing elements default to null and null should typically not be used in json payloads.\n* server: add token-based authentication for Bamboo into yml files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dda2b219b148c33ce704dfd9ca7b2fca1ec3783", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2dda2b219b148c33ce704dfd9ca7b2fca1ec3783", "committedDate": "2020-09-24T20:33:56Z", "message": "update dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a850ec80907ddc47dcb3bd5db99f106c4bf693cf", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a850ec80907ddc47dcb3bd5db99f106c4bf693cf", "committedDate": "2020-09-24T20:50:31Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4\n\n# Conflicts:\n#\tbuild.gradle\n#\tsrc/main/webapp/app/entities/student-exam.model.ts\n#\tsrc/main/webapp/app/exam/manage/exam-management.route.ts\n#\tsrc/main/webapp/app/exam/manage/student-exams/student-exam-detail.component.ts\n#\tsrc/main/webapp/app/exam/participate/exam-cover/exam-participation-cover.component.ts\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.ts\n#\tsrc/main/webapp/app/exam/participate/summary/exam-participation-summary.component.html\n#\tsrc/main/webapp/app/exam/participate/summary/exam-participation-summary.component.ts\n#\tsrc/main/webapp/app/exercises/shared/dashboards/tutor/tutor-exercise-dashboard.component.ts\n#\tsrc/main/webapp/app/exercises/shared/navigate-back.util.ts\n#\tsrc/main/webapp/app/exercises/text/assess-new/text-submission-assessment.component.ts\n#\tsrc/main/webapp/app/exercises/text/assess/text-assessments.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e4f7c0a43a6b263f14a021293c998c5e0226ad8", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7e4f7c0a43a6b263f14a021293c998c5e0226ad8", "committedDate": "2020-09-24T21:00:37Z", "message": "fix issues after merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "189f3290e21c8faef50b1923a1af6d676986104f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/189f3290e21c8faef50b1923a1af6d676986104f", "committedDate": "2020-09-24T21:12:38Z", "message": "update jhipster version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e619f2c82a745992271af7147b7b8b06b3ed4c56", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e619f2c82a745992271af7147b7b8b06b3ed4c56", "committedDate": "2020-09-25T13:53:39Z", "message": "update checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2506083414887c423c4c83bf1f2add00dd6c410", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f2506083414887c423c4c83bf1f2add00dd6c410", "committedDate": "2020-09-25T14:06:29Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4\n\n# Conflicts:\n#\tbuild.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8774acbcaaa8efc14d43828622d3b8cf7a4e4601", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8774acbcaaa8efc14d43828622d3b8cf7a4e4601", "committedDate": "2020-09-25T14:07:09Z", "message": "update dompurify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daf4950f2fdbd7cc7aa02bfa44f2b0528aff4bbc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/daf4950f2fdbd7cc7aa02bfa44f2b0528aff4bbc", "committedDate": "2020-09-25T19:07:50Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0519467a3770584fde8aa6bf009664ac6b6322b", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e0519467a3770584fde8aa6bf009664ac6b6322b", "committedDate": "2020-09-26T07:44:04Z", "message": "delete e2e tests, additional improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "365181c72e3ba16b2ad3eba925eda3c857740807", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/365181c72e3ba16b2ad3eba925eda3c857740807", "committedDate": "2020-09-26T21:26:49Z", "message": "further improvements\n\nfix all test ts errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52e78c5173347e5d5a96e792e1ac07300f449680", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/52e78c5173347e5d5a96e792e1ac07300f449680", "committedDate": "2020-09-26T21:46:36Z", "message": "further improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0bd3340eb24d0f7764f8800857c4abe674d84c1", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e0bd3340eb24d0f7764f8800857c4abe674d84c1", "committedDate": "2020-09-27T22:31:27Z", "message": "update client dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "890733ff196c34b0c08bd81afdf697e50e06ee48", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/890733ff196c34b0c08bd81afdf697e50e06ee48", "committedDate": "2020-09-27T22:44:55Z", "message": "remove unused dependency mapstruct\n\nslightly reduce jest branch coverage so that the test passes\n(due to the typescript changes, additional branches in the code might have been introduced)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36a05326a50a1fbd2cfdbf56adc7146923202d13", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/36a05326a50a1fbd2cfdbf56adc7146923202d13", "committedDate": "2020-09-29T11:57:36Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/manage/grading/programming-exercise-configure-grading.component.ts\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/build-output/code-editor-build-output.component.ts\n#\tsrc/test/javascript/spec/component/exam/test-run/create-test-run-modal.component.spec.ts\n#\tsrc/test/javascript/spec/component/programming-exercise/programming-exercise-configure-grading.component.spec.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e61049ff40d3e69bcf9c09a5e87405bd85f699fe", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e61049ff40d3e69bcf9c09a5e87405bd85f699fe", "committedDate": "2020-09-29T11:59:10Z", "message": "update dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a95428f37a7556db7d6c8f048b87b04d6d3263a4", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a95428f37a7556db7d6c8f048b87b04d6d3263a4", "committedDate": "2020-09-29T12:21:17Z", "message": "fix ts issues after merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9c04bbcb7ed0d5f7d00477e7a55189d99b32b07", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a9c04bbcb7ed0d5f7d00477e7a55189d99b32b07", "committedDate": "2020-09-29T13:07:23Z", "message": "add a note for the missing liquibase upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eb4c5ecdd725579f4eb2afca898e0e18d72c21a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7eb4c5ecdd725579f4eb2afca898e0e18d72c21a", "committedDate": "2020-09-29T18:01:11Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/modeling/manage/modeling-exercise-detail.component.ts\n#\tsrc/main/webapp/app/exercises/programming/assess/code-editor-tutor-assessment-container.component.ts\n#\tsrc/main/webapp/app/exercises/programming/assess/manual-result/programming-assessment-manual-result-in-code-editor.component.ts\n#\tsrc/main/webapp/app/exercises/shared/unreferenced-feedback/unreferenced-feedback.component.ts\n#\tyarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e00a8f0713abcdee45d525d4e1fb6e1716d618f", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1e00a8f0713abcdee45d525d4e1fb6e1716d618f", "committedDate": "2020-09-29T18:03:19Z", "message": "rerun yarn install"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7477aae7edb8707294d9a373a37f7060122e2827", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7477aae7edb8707294d9a373a37f7060122e2827", "committedDate": "2020-09-29T18:14:01Z", "message": "fix issues after merge, backend -> server, frontend -> client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6ead3626e8ff05ac4fcb88443bee7b6c97b225a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/c6ead3626e8ff05ac4fcb88443bee7b6c97b225a", "committedDate": "2020-09-29T18:15:31Z", "message": "update client dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95a40b58b00c785872e41b93fd89da40d13b6087", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/95a40b58b00c785872e41b93fd89da40d13b6087", "committedDate": "2020-09-29T18:36:28Z", "message": "fix ts compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf43c9974f3cf7fc7f41ea269ba2344362ca04aa", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/cf43c9974f3cf7fc7f41ea269ba2344362ca04aa", "committedDate": "2020-09-29T18:39:23Z", "message": "fix an issue with Split import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7e67e38ac9327fc5f52e8a760fcb447aeaea1ad", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f7e67e38ac9327fc5f52e8a760fcb447aeaea1ad", "committedDate": "2020-09-29T19:00:06Z", "message": "fix checkstyle issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb0fc3e1e1a80e77985f20820c6ab11de9678374", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/cb0fc3e1e1a80e77985f20820c6ab11de9678374", "committedDate": "2020-09-29T19:06:27Z", "message": "optimize imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dd32fe683cdb802df544c3b5f31701ffd87b6e5", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7dd32fe683cdb802df544c3b5f31701ffd87b6e5", "committedDate": "2020-09-29T19:39:12Z", "message": "fix lint issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c830cadec6b51a384afbdf25eba1899f29587bbf", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/c830cadec6b51a384afbdf25eba1899f29587bbf", "committedDate": "2020-09-29T20:53:23Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d4d512f215bdfcf788a084e93777ee4c79799360", "committedDate": "2020-09-30T06:06:03Z", "message": "Merge branch 'develop' into chore/update-deps-java15-ts4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MzI1NTc1", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-499325575", "createdAt": "2020-09-30T11:18:44Z", "commit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "state": "COMMENTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMToxODo0NFrOHaYyXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMjoyMzo1M1rOHaa6OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQzMTEzMw==", "bodyText": "This can be simplified.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const id = route.params['id'] ? route.params['id'] : undefined;\n          \n          \n            \n                    if (id) {\n          \n          \n            \n                        return this.service.find(parseInt(id, 10));\n          \n          \n            \n                    }\n          \n          \n            \n                    if (route.params['id']) {\n          \n          \n            \n                        return this.service.find(parseInt(route.params['id'], 10));\n          \n          \n            \n                    }", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497431133", "createdAt": "2020-09-30T11:18:44Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/admin/system-notification-management/system-notification-management.route.ts", "diffHunk": "@@ -16,7 +16,7 @@ export class SystemNotificationManagementResolve implements Resolve<any> {\n      * @param route\n      */\n     resolve(route: ActivatedRouteSnapshot) {\n-        const id = route.params['id'] ? route.params['id'] : null;\n+        const id = route.params['id'] ? route.params['id'] : undefined;\n         if (id) {\n             return this.service.find(parseInt(id, 10));\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQzMTQxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Set password to null. ==> If it still is null on save, it won't be changed for existing users. It will be random for new users\n          \n          \n            \n                    // Set password to undefined. ==> If it still is undefined on save, it won't be changed for existing users. It will be random for new users", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497431417", "createdAt": "2020-09-30T11:19:25Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/admin/user-management/user-management-update.component.ts", "diffHunk": "@@ -34,7 +34,7 @@ export class UserManagementUpdateComponent implements OnInit {\n             this.user.groups = [];\n         }\n         // Set password to null. ==> If it still is null on save, it won't be changed for existing users. It will be random for new users", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQzMjY3NA==", "bodyText": "This can be simplified.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const login = route.params['login'] ? route.params['login'] : undefined;\n          \n          \n            \n                    if (login) {\n          \n          \n            \n                        return this.userService.find(login);\n          \n          \n            \n                    }\n          \n          \n            \n                    if (route.params['login']) {\n          \n          \n            \n                        return this.userService.find(route.params['login']);\n          \n          \n            \n                    }", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497432674", "createdAt": "2020-09-30T11:22:00Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/admin/user-management/user-management.route.ts", "diffHunk": "@@ -16,7 +16,7 @@ export class UserMgmtResolve implements Resolve<any> {\n      * @param route  contains the information about a route associated with a component loaded in an outlet at a particular moment in time\n      */\n     resolve(route: ActivatedRouteSnapshot) {\n-        const login = route.params['login'] ? route.params['login'] : null;\n+        const login = route.params['login'] ? route.params['login'] : undefined;\n         if (login) {\n             return this.userService.find(login);\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQzNTgzNQ==", "bodyText": "This could be simplified and also account for the undefined case (Both undefined and empty string would result in true).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                <button class=\"btn btn-primary\" [disabled]=\"complaintText?.length === 0\" (click)=\"createComplaint()\">\n          \n          \n            \n                                <button class=\"btn btn-primary\" [disabled]=\"!complaintText\" (click)=\"createComplaint()\">", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497435835", "createdAt": "2020-09-30T11:28:04Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/complaints/complaints.component.html", "diffHunk": "@@ -72,7 +72,7 @@ <h3>{{ complaintType === ComplaintType.MORE_FEEDBACK ? ('artemisApp.moreFeedback\n \n             <div class=\"row\" *ngIf=\"!alreadySubmitted && isCurrentUserSubmissionAuthor\">\n                 <div class=\"col-6\">\n-                    <button class=\"btn btn-primary\" [disabled]=\"complaintText.length <= 0\" (click)=\"createComplaint()\">\n+                    <button class=\"btn btn-primary\" [disabled]=\"complaintText?.length === 0\" (click)=\"createComplaint()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ0MDY2Mw==", "bodyText": "This can be simplified.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const id = route.params['courseId'] ? route.params['courseId'] : undefined;\n          \n          \n            \n                    if (id) {\n          \n          \n            \n                        return this.service.find(id).pipe(\n          \n          \n            \n                    if (route.params['courseId']) {\n          \n          \n            \n                        return this.service.find(route.params['courseId']).pipe(", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497440663", "createdAt": "2020-09-30T11:37:39Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/course/manage/course-management.route.ts", "diffHunk": "@@ -22,7 +22,7 @@ export class CourseResolve implements Resolve<Course> {\n      * @param route - contains the information about the route to be resolved\n      */\n     resolve(route: ActivatedRouteSnapshot): Observable<Course> {\n-        const id = route.params['courseId'] ? route.params['courseId'] : null;\n+        const id = route.params['courseId'] ? route.params['courseId'] : undefined;\n         if (id) {\n             return this.service.find(id).pipe(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ1MTkyNQ==", "bodyText": "This might lead to unwanted behavior if startIndex is 0, which would result in false", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497451925", "createdAt": "2020-09-30T11:58:57Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/entities/text-block.model.ts", "diffHunk": "@@ -25,7 +25,7 @@ export class TextBlock {\n \n     setTextFromSubmission(submission?: TextSubmission): void {\n         this.submission = submission || this.submission;\n-        if (this.submission) {\n+        if (this.submission && this.startIndex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ1NDEzOA==", "bodyText": "This looks like it can better be string[].\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const labels: any[] = [];\n          \n          \n            \n                    const labels: string[] = [];", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497454138", "createdAt": "2020-09-30T12:02:56Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -123,7 +123,7 @@ export class ExamScoresComponent implements OnInit, OnDestroy {\n     }\n \n     private createChart() {\n-        const labels = [];\n+        const labels: any[] = [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ1NjM0MA==", "bodyText": "This can be simplified.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const courseId = route.params['courseId'] ? route.params['courseId'] : undefined;\n          \n          \n            \n                    const examId = route.params['examId'] ? route.params['examId'] : undefined;\n          \n          \n            \n                    const exerciseGroupId = route.params['exerciseGroupId'] ? route.params['exerciseGroupId'] : undefined;\n          \n          \n            \n                    const courseId = route.params['courseId'] || undefined;\n          \n          \n            \n                    const examId = route.params['examId'] || undefined;\n          \n          \n            \n                    const exerciseGroupId = route.params['exerciseGroupId'] || undefined;", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497456340", "createdAt": "2020-09-30T12:06:51Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exam/manage/exam-management.route.ts", "diffHunk": "@@ -67,9 +67,9 @@ export class ExerciseGroupResolve implements Resolve<ExerciseGroup> {\n      * @param route Contains the information about the route to be resolved\n      */\n     resolve(route: ActivatedRouteSnapshot): Observable<ExerciseGroup> {\n-        const courseId = route.params['courseId'] ? route.params['courseId'] : null;\n-        const examId = route.params['examId'] ? route.params['examId'] : null;\n-        const exerciseGroupId = route.params['exerciseGroupId'] ? route.params['exerciseGroupId'] : null;\n+        const courseId = route.params['courseId'] ? route.params['courseId'] : undefined;\n+        const examId = route.params['examId'] ? route.params['examId'] : undefined;\n+        const exerciseGroupId = route.params['exerciseGroupId'] ? route.params['exerciseGroupId'] : undefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ1NjYyMQ==", "bodyText": "This can be simplified.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const courseId = route.params['courseId'] ? route.params['courseId'] : undefined;\n          \n          \n            \n                    const examId = route.params['examId'] ? route.params['examId'] : undefined;\n          \n          \n            \n                    const courseId = route.params['courseId'] || undefined;\n          \n          \n            \n                    const examId = route.params['examId'] || undefined;", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497456621", "createdAt": "2020-09-30T12:07:22Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exam/manage/exam-management.route.ts", "diffHunk": "@@ -90,8 +90,8 @@ export class StudentExamResolve implements Resolve<StudentExam> {\n      * @param route Contains the information about the route to be resolved\n      */\n     resolve(route: ActivatedRouteSnapshot): Observable<StudentExam> {\n-        const courseId = route.params['courseId'] ? route.params['courseId'] : null;\n-        const examId = route.params['examId'] ? route.params['examId'] : null;\n+        const courseId = route.params['courseId'] ? route.params['courseId'] : undefined;\n+        const examId = route.params['examId'] ? route.params['examId'] : undefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2NDE4Mg==", "bodyText": "Credits is set to 0 already in the constructor.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    feedback.credits = 0;", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497464182", "createdAt": "2020-09-30T12:20:46Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exercises/file-upload/assess/file-upload-assessment.component.ts", "diffHunk": "@@ -257,10 +259,10 @@ export class FileUploadAssessmentComponent implements OnInit, AfterViewInit, OnD\n         this.changeDetectorRef.detach();\n     }\n \n-    public addReferencedFeedback(): void {\n-        const referencedFeedback = new Feedback();\n-        referencedFeedback.credits = 0;\n-        this.referencedFeedback.push(referencedFeedback);\n+    public addFeedback(): void {\n+        const feedback = new Feedback();\n+        feedback.credits = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2NTkxMw==", "bodyText": "This can be simplified.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this.generalFeedback = feedbackWithoutCredits[0] ? feedbackWithoutCredits[0] : undefined;\n          \n          \n            \n                    this.generalFeedback = feedbackWithoutCredits[0] || undefined;", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497465913", "createdAt": "2020-09-30T12:23:53Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exercises/file-upload/participate/file-upload-result.component.ts", "diffHunk": "@@ -18,7 +18,7 @@ export class FileUploadResultComponent {\n         }\n         const [feedbackWithCredits, feedbackWithoutCredits] = partition(result.feedbacks, (feedback) => feedback.credits !== 0);\n         this.feedbacks = feedbackWithCredits;\n-        this.generalFeedback = feedbackWithoutCredits[0] ? feedbackWithoutCredits[0] : null;\n+        this.generalFeedback = feedbackWithoutCredits[0] ? feedbackWithoutCredits[0] : undefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDUzMTg2", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-499453186", "createdAt": "2020-09-30T13:51:44Z", "commit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDU2Nzgw", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-499456780", "createdAt": "2020-09-30T13:55:06Z", "commit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMzo1NTowNlrOHaexog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMzo1NTowNlrOHaexog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUyOTI1MA==", "bodyText": "So participating in a quiz seems to be broken. I'm not 100% sure why but i think it has something to do with this line and similar lines for other exercise types.\nHere the selectedAnswerOption uses its get() function with the questionIndex as key, but in the quiz-participation component the keys are the question ids, not the indexes.", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r497529250", "createdAt": "2020-09-30T13:55:06Z", "author": {"login": "schultek"}, "path": "src/main/webapp/app/exercises/quiz/shared/questions/multiple-choice-question/multiple-choice-question.component.ts", "diffHunk": "@@ -78,9 +79,10 @@ export class MultipleChoiceQuestionComponent {\n             return;\n         }\n         if (this.isAnswerOptionSelected(answerOption)) {\n-            this.selectedAnswerOptions = this.selectedAnswerOptions.filter((selectedAnswerOption) => selectedAnswerOption.id !== answerOption.id);\n+            const options = this.selectedAnswerOptions.get(this.questionIndex)?.filter((selectedAnswerOption) => selectedAnswerOption.id !== answerOption.id) || [];\n+            this.selectedAnswerOptions.set(this.questionIndex, options);\n         } else {\n-            this.selectedAnswerOptions.push(answerOption);\n+            this.selectedAnswerOptions.get(this.questionIndex)!.push(answerOption);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4d512f215bdfcf788a084e93777ee4c79799360"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b0ae0f38c83175e43ba08e53da4b6e76d4bb6d5", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/9b0ae0f38c83175e43ba08e53da4b6e76d4bb6d5", "committedDate": "2020-09-30T15:22:54Z", "message": "fix type error for exercise-groups.component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47c6bb8e2a6c40cf7b5739fb222e02305a3ab4e9", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/47c6bb8e2a6c40cf7b5739fb222e02305a3ab4e9", "committedDate": "2020-09-30T15:27:09Z", "message": "Merge branch 'chore/update-deps-java15-ts4' of github.com:ls1intum/Artemis into chore/update-deps-java15-ts4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9bd0850ef3b7dfa66dd6bfc0d0a04a1930f1d09", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/a9bd0850ef3b7dfa66dd6bfc0d0a04a1930f1d09", "committedDate": "2020-09-30T17:08:36Z", "message": "fix quiz exercises"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "593e2ebe8331b2b7b90a47dec46d6a328ae9d3d9", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/593e2ebe8331b2b7b90a47dec46d6a328ae9d3d9", "committedDate": "2020-09-30T17:08:47Z", "message": "Merge branch 'chore/update-deps-java15-ts4' of https://github.com/ls1intum/Artemis into chore/update-deps-java15-ts4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7a7dc45a0b21e585ff3e1a878c2794aa5895dc4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/b7a7dc45a0b21e585ff3e1a878c2794aa5895dc4", "committedDate": "2020-09-30T17:17:10Z", "message": "fix quiz exam summary"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5Njc1Mzcz", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-499675373", "createdAt": "2020-09-30T17:50:40Z", "commit": {"oid": "b7a7dc45a0b21e585ff3e1a878c2794aa5895dc4"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27eac0c1eb08995fbb7c7f09b15d014b3ea8d06b", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/27eac0c1eb08995fbb7c7f09b15d014b3ea8d06b", "committedDate": "2020-09-30T19:28:37Z", "message": "Apply suggestions from code review. Thanks to Kilian Schulte\n\nCo-authored-by: Kilian Schulte <schultek@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c8a9a3936d6db1a602485f779835ee4494ddd7a", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/1c8a9a3936d6db1a602485f779835ee4494ddd7a", "committedDate": "2020-09-30T19:37:38Z", "message": "Update src/main/webapp/app/exam/exam-scores/exam-scores.component.ts\n\nCo-authored-by: Kilian Schulte <schultek@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87193c9e4cc37f8cf73d2da3fc998f78cac71829", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/87193c9e4cc37f8cf73d2da3fc998f78cac71829", "committedDate": "2020-09-30T19:37:56Z", "message": "Update src/main/webapp/app/exam/manage/exam-management.route.ts\n\nCo-authored-by: Kilian Schulte <schultek@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c9ea25dc531fb820cca7e1c3b5ba90185b4d2cc", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/2c9ea25dc531fb820cca7e1c3b5ba90185b4d2cc", "committedDate": "2020-09-30T19:38:09Z", "message": "Update src/main/webapp/app/exercises/file-upload/assess/file-upload-assessment.component.ts\n\nCo-authored-by: Kilian Schulte <schultek@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c345217f3c26798e0c52a36e38a09106d6cd92fa", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/c345217f3c26798e0c52a36e38a09106d6cd92fa", "committedDate": "2020-09-30T19:38:17Z", "message": "Update src/main/webapp/app/exercises/file-upload/participate/file-upload-result.component.ts\n\nCo-authored-by: Kilian Schulte <schultek@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7ac5826dfd84ba1ae30b97f68aa73f85e652754", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/c7ac5826dfd84ba1ae30b97f68aa73f85e652754", "committedDate": "2020-09-30T19:38:26Z", "message": "Update src/main/webapp/app/exam/manage/exam-management.route.ts\n\nCo-authored-by: Kilian Schulte <schultek@in.tum.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb48bb85890ee5b87e99bccbf066ecd83181afbd", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/fb48bb85890ee5b87e99bccbf066ecd83181afbd", "committedDate": "2020-09-30T20:13:52Z", "message": "update client dependencies\n\nupdate Sentry configuration to 3.0.0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5Nzk4MTEx", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-499798111", "createdAt": "2020-09-30T20:46:05Z", "commit": {"oid": "fb48bb85890ee5b87e99bccbf066ecd83181afbd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5ODA2ODk0", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-499806894", "createdAt": "2020-09-30T20:58:47Z", "commit": {"oid": "fb48bb85890ee5b87e99bccbf066ecd83181afbd"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "624e3400dca8ab1974c8ea0c8fd5c83ad45c13aa", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/624e3400dca8ab1974c8ea0c8fd5c83ad45c13aa", "committedDate": "2020-09-30T21:21:17Z", "message": "Fix for manual assessment via option key being undefined.\nBug happens when this.startIndex is 0, which converts to false in js."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b18a9be00a98e269b58cfb70833d040b786b5882", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/b18a9be00a98e269b58cfb70833d040b786b5882", "committedDate": "2020-09-30T21:40:18Z", "message": "Fixed typedefinition bug of submissions being undefined\nThe bug was that the === null check fails if studentParticipation is\nundefined"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f20ac252f7e5b2e462f4e6f4ab30b8eca5ae3f7", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2f20ac252f7e5b2e462f4e6f4ab30b8eca5ae3f7", "committedDate": "2020-10-01T07:28:54Z", "message": "fix settings for Java tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTY1MTg4", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500165188", "createdAt": "2020-10-01T09:26:48Z", "commit": {"oid": "2f20ac252f7e5b2e462f4e6f4ab30b8eca5ae3f7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceba92c9aa713b2e14694ba252a964a8c2c41a64", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/ceba92c9aa713b2e14694ba252a964a8c2c41a64", "committedDate": "2020-10-01T09:35:25Z", "message": "Fix for error that lectures can not be created"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48070470a352532d8c51cc1342586dd312afdc13", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/48070470a352532d8c51cc1342586dd312afdc13", "committedDate": "2020-10-01T09:55:16Z", "message": "changed delete to explicit setting to undefined"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acd22be57f1d7b2be296bddc485b8e2156565444", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/acd22be57f1d7b2be296bddc485b8e2156565444", "committedDate": "2020-10-01T09:59:45Z", "message": "refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/224403fa510b0a8ab2f49ff89cb3f91c828fcccc", "committedDate": "2020-10-01T10:08:26Z", "message": "update dependencies, fix codacy issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNTcx", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200571", "createdAt": "2020-10-01T10:12:30Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMFrOHbDqRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMFrOHbDqRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzU3Mw==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133573", "createdAt": "2020-10-01T10:12:30Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -608,14 +631,13 @@ private String getCommitHash(BambooBuildResultNotificationDTO buildResult, Submi\n                 result.setHasFeedback(true);\n             }\n             failedTests.forEach(failedTest -> {\n-                final var errorMessageString = failedTest.getErrors().getErrorMessages().stream()\n-                        .map(BambooTestResultDTO.BambooTestErrorDTO::getMessage)\n-                        .map(errorString -> processResultErrorMessage(programmingLanguage, errorString))\n-                        .reduce(\"\", String::concat);\n+                final var errorMessageString = failedTest.getErrors().getErrorMessages().stream().map(BambooTestResultDTO.BambooTestErrorDTO::getMessage)\n+                        .map(errorString -> processResultErrorMessage(programmingLanguage, errorString)).reduce(\"\", String::concat);\n \n                 createAutomaticFeedback(result, failedTest.getMethodName(), false, errorMessageString);\n             });\n-        } catch (Exception failedToParse) {\n+        }\n+        catch (Exception failedToParse) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 509}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNTgy", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200582", "createdAt": "2020-10-01T10:12:31Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMVrOHbDqTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMVrOHbDqTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzU4MA==", "bodyText": "Codacy found an issue: Avoid long parameter lists.", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133580", "createdAt": "2020-10-01T10:12:31Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -59,32 +59,41 @@\n     private final Logger log = LoggerFactory.getLogger(BambooService.class);\n \n     @Value(\"${artemis.continuous-integration.url}\")\n-    private URL BAMBOO_SERVER_URL;\n+    private URL bambooServerUrl;\n \n     @Value(\"${artemis.continuous-integration.empty-commit-necessary}\")\n-    private Boolean BAMBOO_EMPTY_COMMIT_WORKAROUND_NECESSARY;\n+    private Boolean isEmptyCommitNecessary;\n \n     @Value(\"${artemis.continuous-integration.user}\")\n-    private String BAMBOO_USER;\n+    private String bambooUser;\n \n     @Value(\"${artemis.continuous-integration.password}\")\n-    private String BAMBOO_PASSWORD;\n+    private String bambooPassword;\n \n     private final GitService gitService;\n+\n     private final ResultRepository resultRepository;\n+\n     private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n     private final Optional<VersionControlService> versionControlService;\n+\n     private final Optional<ContinuousIntegrationUpdateService> continuousIntegrationUpdateService;\n+\n     private final BambooBuildPlanService bambooBuildPlanService;\n+\n     private final FeedbackService feedbackService;\n+\n     private final RestTemplate restTemplate;\n+\n     private final BambooClient bambooClient;\n+\n     private final ObjectMapper mapper;\n \n-    public BambooService(GitService gitService, ResultRepository resultRepository,\n-                         ProgrammingSubmissionRepository programmingSubmissionRepository, Optional<VersionControlService> versionControlService,\n-                         Optional<ContinuousIntegrationUpdateService> continuousIntegrationUpdateService, BambooBuildPlanService bambooBuildPlanService,\n-                         FeedbackService feedbackService, @Qualifier(\"bambooRestTemplate\") RestTemplate restTemplate, BambooClient bambooClient, ObjectMapper mapper) {\n+    public BambooService(GitService gitService, ResultRepository resultRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 135}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNTk1", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200595", "createdAt": "2020-10-01T10:12:32Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMlrOHbDqUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMlrOHbDqUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzU4Nw==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133587", "createdAt": "2020-10-01T10:12:32Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -939,21 +957,15 @@ private Long calculateScoreForResult(Result result, int skippedTests) {\n                 break;\n             }\n \n-            //filter unnecessary logs\n-            if ((logString.startsWith(\"[INFO]\") && !logString.contains(\"error\")) ||\n-                logString.startsWith(\"[WARNING]\") ||\n-                logString.startsWith(\"[ERROR] [Help 1]\") ||\n-                logString.startsWith(\"[ERROR] For more information about the errors and possible solutions\") ||\n-                logString.startsWith(\"[ERROR] Re-run Maven using\") ||\n-                logString.startsWith(\"[ERROR] To see the full stack trace of the errors\") ||\n-                logString.startsWith(\"[ERROR] -> [Help 1]\") ||\n-                logString.startsWith(\"Unable to publish artifact\") ||\n-                logString.startsWith(\"NOTE: Picked up JDK_JAVA_OPTIONS\")\n-            ) {\n+            // filter unnecessary logs\n+            if ((logString.startsWith(\"[INFO]\") && !logString.contains(\"error\")) || logString.startsWith(\"[WARNING]\") || logString.startsWith(\"[ERROR] [Help 1]\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 711}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNjA1", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200605", "createdAt": "2020-10-01T10:12:32Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMlrOHbDqXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozMlrOHbDqXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzU5OQ==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133599", "createdAt": "2020-10-01T10:12:32Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -421,7 +437,8 @@ public String getPlanKey(Object requestBody) throws BambooException {\n             Map<String, Object> requestBodyMap = (Map<String, Object>) requestBody;\n             Map<String, Object> planMap = (Map<String, Object>) requestBodyMap.get(\"plan\");\n             return (String) planMap.get(\"key\");\n-        } catch (Exception e) {\n+        }\n+        catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 396}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNjE5", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200619", "createdAt": "2020-10-01T10:12:33Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozM1rOHbDqZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozM1rOHbDqZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzYwNw==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133607", "createdAt": "2020-10-01T10:12:33Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -170,21 +173,26 @@ public void performEmptySetupCommit(ProgrammingExerciseParticipation participati\n                 if (exercise == null) {\n                     log.warn(\"Cannot access exercise in 'configureBuildPlan' to determine if deleting the repo after cloning make sense. Will decide to delete the repo\");\n                     gitService.deleteLocalRepository(repo);\n-                } else {\n-                    //only delete the git repository, if the online editor is NOT allowed\n-                    //this saves some performance on the server, when the student opens the online editor, because the repo does not need to be cloned again\n-                    //Note: the null check is necessary, because otherwise we might get a null pointer exception\n+                }\n+                else {\n+                    // only delete the git repository, if the online editor is NOT allowed\n+                    // this saves some performance on the server, when the student opens the online editor, because the repo does not need to be cloned again\n+                    // Note: the null check is necessary, because otherwise we might get a null pointer exception\n                     if (exercise.isAllowOnlineEditor() == null || Boolean.FALSE.equals(exercise.isAllowOnlineEditor())) {\n                         gitService.deleteLocalRepository(repo);\n                     }\n                 }\n-            } catch (GitAPIException ex) {\n+            }\n+            catch (GitAPIException ex) {\n                 log.error(\"Git error while doing empty commit\", ex);\n-            } catch (IOException ex) {\n+            }\n+            catch (IOException ex) {\n                 log.error(\"IOError while doing empty commit\", ex);\n-            } catch (InterruptedException ex) {\n+            }\n+            catch (InterruptedException ex) {\n                 log.error(\"InterruptedException while doing empty commit\", ex);\n-            } catch (NullPointerException ex) {\n+            }\n+            catch (NullPointerException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 217}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNjQy", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200642", "createdAt": "2020-10-01T10:12:34Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozNFrOHbDqeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozNFrOHbDqeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzYyNQ==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133625", "createdAt": "2020-10-01T10:12:34Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -506,16 +528,17 @@ public Result onBuildCompletedNew(ProgrammingExerciseParticipation participation\n     public ConnectorHealth health() {\n         ConnectorHealth health;\n         try {\n-            final var headers = HeaderUtil.createAuthorization(BAMBOO_USER, BAMBOO_PASSWORD);\n+            final var headers = HeaderUtil.createAuthorization(bambooUser, bambooPassword);\n             headers.setAccept(List.of(MediaType.APPLICATION_JSON));\n             final var entity = new HttpEntity<>(headers);\n-            final var status = restTemplate.exchange(BAMBOO_SERVER_URL + \"/rest/api/latest/server\", HttpMethod.GET, entity, JsonNode.class);\n+            final var status = restTemplate.exchange(bambooServerUrl + \"/rest/api/latest/server\", HttpMethod.GET, entity, JsonNode.class);\n             health = status.getBody().get(\"state\").asText().equals(\"RUNNING\") ? new ConnectorHealth(true) : new ConnectorHealth(false);\n-        } catch (Exception emAll) {\n+        }\n+        catch (Exception emAll) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 452}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAwNjU0", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500200654", "createdAt": "2020-10-01T10:12:35Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozNVrOHbDqhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDoxMjozNVrOHbDqhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEzMzYzNg==", "bodyText": "Codacy found an issue: Avoid catching NullPointerException; consider removing the cause of the NPE.", "url": "https://github.com/ls1intum/Artemis/pull/2135#discussion_r498133636", "createdAt": "2020-10-01T10:12:35Z", "author": {"login": "artemis-bot"}, "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bamboo/BambooService.java", "diffHunk": "@@ -170,21 +173,26 @@ public void performEmptySetupCommit(ProgrammingExerciseParticipation participati\n                 if (exercise == null) {\n                     log.warn(\"Cannot access exercise in 'configureBuildPlan' to determine if deleting the repo after cloning make sense. Will decide to delete the repo\");\n                     gitService.deleteLocalRepository(repo);\n-                } else {\n-                    //only delete the git repository, if the online editor is NOT allowed\n-                    //this saves some performance on the server, when the student opens the online editor, because the repo does not need to be cloned again\n-                    //Note: the null check is necessary, because otherwise we might get a null pointer exception\n+                }\n+                else {\n+                    // only delete the git repository, if the online editor is NOT allowed\n+                    // this saves some performance on the server, when the student opens the online editor, because the repo does not need to be cloned again\n+                    // Note: the null check is necessary, because otherwise we might get a null pointer exception\n                     if (exercise.isAllowOnlineEditor() == null || Boolean.FALSE.equals(exercise.isAllowOnlineEditor())) {\n                         gitService.deleteLocalRepository(repo);\n                     }\n                 }\n-            } catch (GitAPIException ex) {\n+            }\n+            catch (GitAPIException ex) {\n                 log.error(\"Git error while doing empty commit\", ex);\n-            } catch (IOException ex) {\n+            }\n+            catch (IOException ex) {\n                 log.error(\"IOError while doing empty commit\", ex);\n-            } catch (InterruptedException ex) {\n+            }\n+            catch (InterruptedException ex) {\n                 log.error(\"InterruptedException while doing empty commit\", ex);\n-            } catch (NullPointerException ex) {\n+            }\n+            catch (NullPointerException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "originalPosition": 217}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAxOTgw", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500201980", "createdAt": "2020-10-01T10:14:25Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAzNjc5", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500203679", "createdAt": "2020-10-01T10:16:46Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjAzOTQz", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500203943", "createdAt": "2020-10-01T10:17:09Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjA3MDc1", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500207075", "createdAt": "2020-10-01T10:21:39Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjExNzU3", "url": "https://github.com/ls1intum/Artemis/pull/2135#pullrequestreview-500211757", "createdAt": "2020-10-01T10:28:36Z", "commit": {"oid": "224403fa510b0a8ab2f49ff89cb3f91c828fcccc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4247, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}