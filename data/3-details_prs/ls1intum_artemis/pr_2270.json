{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NTY4MDgz", "number": 2270, "title": "[Chore / Fix] Lazy load brace module", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n\nMotivation and Context\n\n\nThe brace module for the ace editor is loaded directly into the main Artemis bundle, which increases the bundle size significantly. This PR fixes this so that brace is lazily loaded.\nDescription\n\nThe direct imports causing the problem were:\n\nArtemisAppModule -> TeamModule -> ProgrammingAssessmentModule -> CodeEditorModule -> ... -> brace\nArtemisAppModule -> CoursesModule -> StudentQuestionsModule -> MarkdownEditorModule -> ... -> brace\n\nThe TeamModule did use the ProgrammingAssessmentManualResultButton which was part of the ProgrammingAssessmentModule. Since no other Component from this module was used, i broke the chain by moving the ProgrammingAssessmentManualResultButton into the ResultModule and updating all dependencies accordingly.\nThe new import chains are:\n\nArtemisAppModule -> TeamModule -> ResultModule -> ... (no brace)\n(Lazy Loading) -> ... -> ProgrammingAssessmentModule -> ResultModule / CodeEditorModule -> ... -> brace\n\nThe StudentQuestionsModule was used for the CourseExerciseDetails and LectureExerciseDetails - Components. In order to lazy load this I used the module as a child route to both components with an empty path. Therefore instead of inserting the q&a component directly into the details components, i used  to display the component when loaded.\nSteps for Testing\n\n\nCheck that the manual result button still works in all places (only for programming exercises with manual assessment! ):\n\nin the Exercise Assessment Dashboard (Course-Management -> Assessment Dashboard -> Exercise Dashboard)\nin the Exercise Scores Page (Course-Management -> Exercises -> Scores)\nin the Team Participation Table (Course-Management -> Exercises -> Teams -> Click on a Team Id)\n\n\nCheck that the question and answer component works in all places:\n\nin the Course Exercise Details Page (Courses -> Click on a Course -> Click on an Exercise)\nin the Course Lecture Details Page (Courses -> Click on a Course -> Switch to Lectures Tab -> Click on a Lecture)\n\n\n\nTest Coverage\nNo changes regarding test coverage.\nScreenshots\n\n\nThe Q&A Component\n\nThe Manual Result Button\n\n\nBundle Size\n\nBefore Changes: 2.46MB gzip size\nAfter Changes: 1.56MB gzip size", "createdAt": "2020-10-25T10:14:09Z", "url": "https://github.com/ls1intum/Artemis/pull/2270", "merged": true, "mergeCommit": {"oid": "467cb7bcf4914ea65a611e3383688ac66c441f37"}, "closed": true, "closedAt": "2020-10-28T08:03:51Z", "author": {"login": "schultek"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdV80fcgH2gAyNTA5NTY4MDgzOjNjMzIwMTk3YTMxMjAzM2I0MDM1ZTBhNTlkOTljYzVlNTlhY2Y1NTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW47iYgFqTUxODQwMjAyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3c320197a312033b4035e0a59d99cc5e59acf550", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/3c320197a312033b4035e0a59d99cc5e59acf550", "committedDate": "2020-10-25T10:01:17Z", "message": "move manual-result-button from programming assessment module into result module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b32a4db265748b30ca9a09383ac44bbea061ca3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/8b32a4db265748b30ca9a09383ac44bbea061ca3", "committedDate": "2020-10-25T10:12:42Z", "message": "fix naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b15a8f7d18d7ca3fa5e8192e59c9302d6eaa9e4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/4b15a8f7d18d7ca3fa5e8192e59c9302d6eaa9e4", "committedDate": "2020-10-25T10:17:02Z", "message": "fix formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "530d892a62a98cac9e3861ec15c0bb5537c43c3f", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/530d892a62a98cac9e3861ec15c0bb5537c43c3f", "committedDate": "2020-10-25T13:33:08Z", "message": "try lazy load student questions module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "439f7240db9fe2ef8941611cbc7e0a94f0923c2c", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/439f7240db9fe2ef8941611cbc7e0a94f0923c2c", "committedDate": "2020-10-25T14:44:10Z", "message": "remove student questions module from course module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/592063dbd06fd1687d1fd9c74fbb5a020db6e6b5", "committedDate": "2020-10-25T16:18:40Z", "message": "fix formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2Mzg0MzAz", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-516384303", "createdAt": "2020-10-25T18:15:01Z", "commit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2Mzg3Mzkz", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-516387393", "createdAt": "2020-10-25T18:55:20Z", "commit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1NToyMVrOHn7tGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1NToyMVrOHn7tGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzNDcxMw==", "bodyText": "can you document this? I'm not really sure if I understand the code.\nIf this.studentQuestions is not undefined and not null, which part has injected it?\nAs it is not a ViewChild, I don't see the magic behind this approach", "url": "https://github.com/ls1intum/Artemis/pull/2270#discussion_r511634713", "createdAt": "2020-10-25T18:55:21Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/course-lectures/course-lecture-details.component.ts", "diffHunk": "@@ -51,6 +53,9 @@ export class CourseLectureDetailsComponent implements OnInit, OnDestroy {\n                 this.lecture = null;\n                 this.lectureService.find(params.lectureId).subscribe((lectureResponse: HttpResponse<Lecture>) => {\n                     this.lecture = lectureResponse.body;\n+                    if (this.studentQuestions) {\n+                        this.onChildActivate(this.studentQuestions);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2Mzg3NDI1", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-516387425", "createdAt": "2020-10-25T18:55:53Z", "commit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1NTo1M1rOHn7tQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1NTo1M1rOHn7tQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzNDc1Mg==", "bodyText": "this code is only invoked (see above) if this.studentQuestions is available. Why do we need to re-assign it here?", "url": "https://github.com/ls1intum/Artemis/pull/2270#discussion_r511634752", "createdAt": "2020-10-25T18:55:53Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/course-lectures/course-lecture-details.component.ts", "diffHunk": "@@ -85,4 +90,12 @@ export class CourseLectureDetailsComponent implements OnInit, OnDestroy {\n             this.isDownloadingLink = null;\n         }\n     }\n+\n+    onChildActivate(ref: StudentQuestionsComponent) {\n+        this.studentQuestions = ref;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2Mzg3NTEz", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-516387513", "createdAt": "2020-10-25T18:56:53Z", "commit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1Njo1NFrOHn7tuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxODo1Njo1NFrOHn7tuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYzNDg3Mw==", "bodyText": "please add this code earlier in the file before the section ONLY FOR LOCAL TESTING PURPOSE\nplease also add some documentation here", "url": "https://github.com/ls1intum/Artemis/pull/2270#discussion_r511634873", "createdAt": "2020-10-25T18:56:54Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -407,4 +413,12 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n     }\n \n     // ################## ONLY FOR LOCAL TESTING PURPOSE -- END ##################\n+\n+    onChildActivate(ref: StudentQuestionsComponent) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "592063dbd06fd1687d1fd9c74fbb5a020db6e6b5"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d86d9b09bc474022c731b98769e8b5ec33f5164", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/3d86d9b09bc474022c731b98769e8b5ec33f5164", "committedDate": "2020-10-25T19:11:40Z", "message": "code improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NzkwNzA0", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-516790704", "createdAt": "2020-10-26T13:45:54Z", "commit": {"oid": "3d86d9b09bc474022c731b98769e8b5ec33f5164"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NzQ5MjQ3", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-517749247", "createdAt": "2020-10-27T14:12:51Z", "commit": {"oid": "3d86d9b09bc474022c731b98769e8b5ec33f5164"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c54531653fe15bc842174e6a3a7523404e797765", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/c54531653fe15bc842174e6a3a7523404e797765", "committedDate": "2020-10-27T15:14:23Z", "message": "Merge branch 'develop' into chore/lazy-load-brace-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjM4NzQ2", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-518238746", "createdAt": "2020-10-28T00:11:16Z", "commit": {"oid": "c54531653fe15bc842174e6a3a7523404e797765"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjQyMDc3", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-518242077", "createdAt": "2020-10-28T00:21:56Z", "commit": {"oid": "c54531653fe15bc842174e6a3a7523404e797765"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c7b823a17dc3c74df0a96dd0c5bde749254f622", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2c7b823a17dc3c74df0a96dd0c5bde749254f622", "committedDate": "2020-10-28T00:23:37Z", "message": "Merge branch 'develop' into chore/lazy-load-brace-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NDAyMDIy", "url": "https://github.com/ls1intum/Artemis/pull/2270#pullrequestreview-518402022", "createdAt": "2020-10-28T08:03:17Z", "commit": {"oid": "2c7b823a17dc3c74df0a96dd0c5bde749254f622"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3938, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}