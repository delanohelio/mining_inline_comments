{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyODAzODg1", "number": 1935, "title": "Lock student exam repositories upon early submit", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n\nMotivation and Context\nWhen a student submits the exam before the (individual) exam end, they most not be able to work on the repository anymore.\nDescription\nI added a section to the submitStudentExam Method in StudentExamService that locks the repositories if the exam has not ended.\nI also moved the lock and unlock methods from the ProgrammingExerciseScheduleService to the ProgrammingExerciseParticipationService.\nSteps for Testing\n\nCreate an exam with student exams and at least one programming in Artemis\nTake the exam\nSubmit the exam early\nCheck that you don't have write access to the repository anymore\nTest that this also works with extended working time and early submit after the normal exam end", "createdAt": "2020-07-19T22:09:30Z", "url": "https://github.com/ls1intum/Artemis/pull/1935", "merged": true, "mergeCommit": {"oid": "ee95cd30b2b4bcfc536e87889e1160d88f45a3c8"}, "closed": true, "closedAt": "2020-07-21T15:33:55Z", "author": {"login": "MaisiKoleni"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2j5fgAH2gAyNDUyODAzODg1OjEwYWQ1NDAyZjhlZTM2ZDc4Y2Y1NTYwYWFkZjcwMGNhOTE5Yjg4ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3ICY5AFqTQ1MjU4MDU5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "10ad5402f8ee36d78cf5560aadf700ca919b8889", "author": {"user": {"login": "MaisiKoleni", "name": "Christian Femers"}}, "url": "https://github.com/ls1intum/Artemis/commit/10ad5402f8ee36d78cf5560aadf700ca919b8889", "committedDate": "2020-07-19T21:27:28Z", "message": "Move lock and unlock to ProgrammingExerciseParticipationServiceService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4427a40e2c258dd235d5c7b33844de2a054b55f4", "author": {"user": {"login": "MaisiKoleni", "name": "Christian Femers"}}, "url": "https://github.com/ls1intum/Artemis/commit/4427a40e2c258dd235d5c7b33844de2a054b55f4", "committedDate": "2020-07-19T21:34:37Z", "message": "Lock student repositories upon manual submit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25c2238c4e7ac3975a581d7ffe668cd7549bc52b", "author": {"user": {"login": "MaisiKoleni", "name": "Christian Femers"}}, "url": "https://github.com/ls1intum/Artemis/commit/25c2238c4e7ac3975a581d7ffe668cd7549bc52b", "committedDate": "2020-07-19T21:40:35Z", "message": "Only lock repositories if submitted manually before the end date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b91abd251327cd157becf70f21fa2d1095dce53", "author": {"user": {"login": "MaisiKoleni", "name": "Christian Femers"}}, "url": "https://github.com/ls1intum/Artemis/commit/5b91abd251327cd157becf70f21fa2d1095dce53", "committedDate": "2020-07-20T02:40:25Z", "message": "Remove reference to VersionControlService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c", "author": {"user": {"login": "JonasPetry", "name": "Jonas Petry"}}, "url": "https://github.com/ls1intum/Artemis/commit/e1802500ac2a7d5af3057cb291fe010df778296c", "committedDate": "2020-07-21T09:20:27Z", "message": "Merge branch 'develop' into bugfix/exam/lock-repository-early-submit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMjg1MjYz", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452285263", "createdAt": "2020-07-21T09:30:43Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMjkxMzY4", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452291368", "createdAt": "2020-07-21T09:38:43Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMjkyNjQw", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452292640", "createdAt": "2020-07-21T09:40:26Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMjk3OTAz", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452297903", "createdAt": "2020-07-21T09:47:36Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMzMxOTE1", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452331915", "createdAt": "2020-07-21T10:36:25Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMzMzMTI2", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452333126", "createdAt": "2020-07-21T10:38:23Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTA1OTcy", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452505972", "createdAt": "2020-07-21T14:19:40Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNDoxOTo0MFrOG06ROw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNDoxOTo0MFrOG06ROw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEzMzgxOQ==", "bodyText": "can you please:\n\nextract a method for the whole new code block\nmove the invocation of the new method after the line studentExamRepository.save(studentExam);\nPut another try catch statement around the invocation of the new method? So that really no (even currently unthinkable) exception can lead to problems here?", "url": "https://github.com/ls1intum/Artemis/pull/1935#discussion_r458133819", "createdAt": "2020-07-21T14:19:40Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/StudentExamService.java", "diffHunk": "@@ -202,6 +207,24 @@ else if (exercise instanceof ModelingExercise) {\n             }\n         }\n \n+        // Only lock programming exercises when the student submitted early. Otherwise, the lock operations were already scheduled/executed.\n+        if (ZonedDateTime.now().isBefore(examEndDate)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTA2MzMz", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452506333", "createdAt": "2020-07-21T14:20:01Z", "commit": {"oid": "e1802500ac2a7d5af3057cb291fe010df778296c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d24297049f266cbceda170d23fb313024d1cda35", "author": {"user": {"login": "MaisiKoleni", "name": "Christian Femers"}}, "url": "https://github.com/ls1intum/Artemis/commit/d24297049f266cbceda170d23fb313024d1cda35", "committedDate": "2020-07-21T14:39:57Z", "message": "Make student repository locking more robust"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3744d51d67d4a30f4181e467ac4bec6a73fda4e", "author": {"user": {"login": "MaisiKoleni", "name": "Christian Femers"}}, "url": "https://github.com/ls1intum/Artemis/commit/c3744d51d67d4a30f4181e467ac4bec6a73fda4e", "committedDate": "2020-07-21T14:54:20Z", "message": "Fix formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTgwNTk1", "url": "https://github.com/ls1intum/Artemis/pull/1935#pullrequestreview-452580595", "createdAt": "2020-07-21T15:33:46Z", "commit": {"oid": "c3744d51d67d4a30f4181e467ac4bec6a73fda4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4400, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}