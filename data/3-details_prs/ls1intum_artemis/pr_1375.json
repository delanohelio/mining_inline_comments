{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNDUyNzc4", "number": 1375, "title": "Broadcast team assignment updates via websockets", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I documented the TypeScript code using JSDoc style.\n\nMotivation and Context\nAt the moment the participation status is not being updated right away when students are assigned to teams. Even after a tutor has added them into a team, it will still say \"You have not been assigned to a team yet\" in the exercise card. The new team assignment status will only be reflected after the student refreshes the page. This PR adds broadcasting of team assignment changes via websockets so that students will see right away that they can start working on an exercise as soon as the tutor has created their team.\nDescription\n\nAdd TeamWebsocketService with method sendTeamAssignmentUpdate to broadcast changes in team assignments\nUse this service method when creating, updating, deleting or importing teams in TeamResource\nAdd observable teamAssignmentUpdates to team.service.ts that emits team assignment updates\nSubscribe to this observable in the courses view and the course overview\nOn receiving a team assignment update: update assigned team id, team participation and participation status on affected exercise\n\nSteps for Testing\nPreconditions: A team-based exercise must exist in a course.\n\nLog in as user A to Artemis (needs to be student in course)\nNavigate to Course Overview\nClick on a course that has a team-based exercise\nIn a different browser session, log in as user B (needs to be instructor in course)\nLet user B assign and unassign user A from different teams for the team-based exercise\nUser A should see his participation status changing in the exercise row (from \"You have not been assigned to a team yet\" to \"You have not started this exercise yet\", or alternatively \"No submission\" etc. if a participation already exists, and vice-versa)\n\nScreencast\nBehavior when adding and removing the user from the team:", "createdAt": "2020-05-02T13:37:03Z", "url": "https://github.com/ls1intum/Artemis/pull/1375", "merged": true, "mergeCommit": {"oid": "ab0841fc431b654966aed10b398df30c57314530"}, "closed": true, "closedAt": "2020-05-08T11:21:08Z", "author": {"login": "madwau"}, "timelineItems": {"totalCount": 36, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccgx_yAH2gAyNDEyNDUyNzc4OjhiZDkyN2Y1MmYzNDM2ODUxMDhiZDA0ODFjMzRmNWRiODllYTYzYjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfQEWZAFqTQwODE3MTE0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8bd927f52f343685108bd0481c34f5db89ea63b2", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/8bd927f52f343685108bd0481c34f5db89ea63b2", "committedDate": "2020-04-29T23:07:32Z", "message": "Send out team assignment updates via websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d930aa0956b19aad48180a87e2ab4025b2f7d5f", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/3d930aa0956b19aad48180a87e2ab4025b2f7d5f", "committedDate": "2020-05-02T13:26:58Z", "message": "Send out participation of new team if needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dba10a26e9e2a52bdecf13d67dd3d1f54c42422f", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/dba10a26e9e2a52bdecf13d67dd3d1f54c42422f", "committedDate": "2020-05-02T13:37:18Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fda092d2615faa6a8445b3e8cb09f8ae2b7d411", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/9fda092d2615faa6a8445b3e8cb09f8ae2b7d411", "committedDate": "2020-05-02T14:09:34Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b60a450d43f020302c380576aceecfee48466083", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/b60a450d43f020302c380576aceecfee48466083", "committedDate": "2020-05-02T14:25:03Z", "message": "JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a173cd2e0cb4f868b825e1354e3ee850a1033a9d", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/a173cd2e0cb4f868b825e1354e3ee850a1033a9d", "committedDate": "2020-05-02T14:32:53Z", "message": "JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "449c142fb695e0a0fafc150e6a4736dae3f7c907", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/449c142fb695e0a0fafc150e6a4736dae3f7c907", "committedDate": "2020-05-02T14:36:35Z", "message": "Doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d64b6d2da07eac205894d03accd3751ea8d714a4", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/d64b6d2da07eac205894d03accd3751ea8d714a4", "committedDate": "2020-05-02T15:24:46Z", "message": "Add TeamWebsocketServiceTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d9e2c20a4c356f70a83210010e3e963b3a09df", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/67d9e2c20a4c356f70a83210010e3e963b3a09df", "committedDate": "2020-05-02T16:55:25Z", "message": "Switch to studentParticipations (submission and result needed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c9a2f7d33bffe9eb769b15292ec3c142d01dd19", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/2c9a2f7d33bffe9eb769b15292ec3c142d01dd19", "committedDate": "2020-05-02T17:46:52Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ac2a491ad6767bc2fcb241abcabcae08245bcf6", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/0ac2a491ad6767bc2fcb241abcabcae08245bcf6", "committedDate": "2020-05-02T18:28:45Z", "message": "Also listen on course-exercise-details"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f77c05d7220ce57a72853feee60b1161a286c9b", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/3f77c05d7220ce57a72853feee60b1161a286c9b", "committedDate": "2020-05-03T13:07:55Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODAxNDQ5", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-404801449", "createdAt": "2020-05-04T08:42:16Z", "commit": {"oid": "3f77c05d7220ce57a72853feee60b1161a286c9b"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0MjoxNlrOGP3YJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODo0MjoxNlrOGP3YJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI4OTEyNQ==", "bodyText": "Are the changes in this file intended?", "url": "https://github.com/ls1intum/Artemis/pull/1375#discussion_r419289125", "createdAt": "2020-05-04T08:42:16Z", "author": {"login": "sleiss"}, "path": "yarn.lock", "diffHunk": "@@ -12463,6 +12463,13 @@ tslint-loader@3.6.0:\n     rimraf \"^2.4.4\"\n     semver \"^5.3.0\"\n \n+tslint-no-unused-expression-chai@0.1.4:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f77c05d7220ce57a72853feee60b1161a286c9b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43d80e7753c41633519f08784135f04d885f0280", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/43d80e7753c41633519f08784135f04d885f0280", "committedDate": "2020-05-04T08:46:49Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/team-assignment-updates-via-websockets\n\n# Conflicts:\n#\tyarn.lock"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODQwMDg5", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-404840089", "createdAt": "2020-05-04T09:42:09Z", "commit": {"oid": "43d80e7753c41633519f08784135f04d885f0280"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODU3OTU4", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-404857958", "createdAt": "2020-05-04T10:10:12Z", "commit": {"oid": "43d80e7753c41633519f08784135f04d885f0280"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "922a6f053a7537373197c72730611803270689e5", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/922a6f053a7537373197c72730611803270689e5", "committedDate": "2020-05-04T10:40:51Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40d19c5f4f02377ca4c1b040b88a45ea3a5ca689", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/40d19c5f4f02377ca4c1b040b88a45ea3a5ca689", "committedDate": "2020-05-04T15:50:46Z", "message": "Wrap in promise (to wait for log in)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "654d367a67dcd19b5b3a6f2cea40a09357a13d43", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/654d367a67dcd19b5b3a6f2cea40a09357a13d43", "committedDate": "2020-05-04T17:50:24Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dacf3f390b56408534b0fd15d8ecb62d6b64dcb", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/8dacf3f390b56408534b0fd15d8ecb62d6b64dcb", "committedDate": "2020-05-04T18:38:13Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/team-assignment-updates-via-websockets\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56bd4497529973914cfc9b6360c6d98df5b485e9", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/56bd4497529973914cfc9b6360c6d98df5b485e9", "committedDate": "2020-05-05T13:32:09Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fcbbb8cfae9f000d9b61f82f2a2a814ccaa2173", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6fcbbb8cfae9f000d9b61f82f2a2a814ccaa2173", "committedDate": "2020-05-05T17:23:46Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc9ebcb713fcf3b7af2f9591f061f0e91b9a9c6c", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/cc9ebcb713fcf3b7af2f9591f061f0e91b9a9c6c", "committedDate": "2020-05-05T17:28:32Z", "message": "Fix login / logout issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cffaa1848c7d7a56851d4d9b393ac3c7a3afe637", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/cffaa1848c7d7a56851d4d9b393ac3c7a3afe637", "committedDate": "2020-05-05T17:36:41Z", "message": "Clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "156253351f54baa93099bd2975794dcca015e9c5", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/156253351f54baa93099bd2975794dcca015e9c5", "committedDate": "2020-05-05T18:26:33Z", "message": "Stephan's feedback on jackson"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a21b145b8ec59658729f1a44196d007a446dacb5", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/a21b145b8ec59658729f1a44196d007a446dacb5", "committedDate": "2020-05-05T18:42:06Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514a00e843ca27af90767b6122c6fe175dc0b562", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/514a00e843ca27af90767b6122c6fe175dc0b562", "committedDate": "2020-05-05T18:54:30Z", "message": "Adapt tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37657bc54a12d5bd8655995161697c815c279061", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/37657bc54a12d5bd8655995161697c815c279061", "committedDate": "2020-05-06T09:18:07Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/team-assignment-updates-via-websockets\n\n# Conflicts:\n#\tsrc/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ca448d5852509fe4b81cbc8eed7a0c4b1fdf565", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/1ca448d5852509fe4b81cbc8eed7a0c4b1fdf565", "committedDate": "2020-05-06T09:36:05Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NTU3NTY5", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-406557569", "createdAt": "2020-05-06T12:22:51Z", "commit": {"oid": "1ca448d5852509fe4b81cbc8eed7a0c4b1fdf565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e47387f92bd7d2735c2e71dcd8e327947298cf11", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e47387f92bd7d2735c2e71dcd8e327947298cf11", "committedDate": "2020-05-06T19:56:00Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MTgyMTIy", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-407182122", "createdAt": "2020-05-07T06:31:22Z", "commit": {"oid": "e47387f92bd7d2735c2e71dcd8e327947298cf11"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MzY4MjA0", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-407368204", "createdAt": "2020-05-07T11:05:51Z", "commit": {"oid": "e47387f92bd7d2735c2e71dcd8e327947298cf11"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6db4ea8613fb05d9da1393db957c86779350ed06", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6db4ea8613fb05d9da1393db957c86779350ed06", "committedDate": "2020-05-07T11:09:42Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e711261be2ddaff826e1519edcfefcbc2061a876", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e711261be2ddaff826e1519edcfefcbc2061a876", "committedDate": "2020-05-07T14:16:10Z", "message": "Merge branch 'develop' into feature/team-assignment-updates-via-websockets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MTcxMTQ5", "url": "https://github.com/ls1intum/Artemis/pull/1375#pullrequestreview-408171149", "createdAt": "2020-05-08T11:20:58Z", "commit": {"oid": "e711261be2ddaff826e1519edcfefcbc2061a876"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2986, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}