{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5MDA0OTMx", "number": 2476, "title": "Add importing and exporting teams from JSON", "bodyText": "Resolves #1994\nChecklist\n\n Server: I followed the coding and design guidelines.\n Server: I added multiple integration tests (Spring) related to the features (with a high test coverage)\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I followed the coding and design guidelines.\n Client: I added multiple integration tests (Jest) related to the features (with a high test coverage)\n Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nSteps for Testing\nPrepare a JSON file similar to following:\n[\n    {\n      \"registrationNumber\": \"01234567\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"teamName\": \"Team 1\"\n    },\n    {\n      \"username\": \"alice_doe\",\n      \"firstName\": \"Alice\",\n      \"lastName\": \"Doe\",\n      \"teamName\": \"Team 1\"\n    },\n    {\n      \"username\": \"bob_doe\",\n      \"firstName\": \"Bob\",\n      \"lastName\": \"Doe\",\n      \"teamName\": \"Team 2\"\n    }\n  ]\n\nImport Teams\n\nLog in to Artemis\nNavigate to Course Management\nGo to Exercises of a Course\nCreate a Team Programming Exercise if there is not any\nClick Import teams\nClick From a file\nUpload your file\nSelect import strategy\nClick import\n\nExport Teams\n\nLog in to Artemis\nNavigate to Course Management\nGo to Exercises of a Course\nCreate a Team Programming Exercise if there is not any\nCreate teams\nClick Export teams\nExamine downloaded file\n\nScreenshots\nAdd to empty exercise\n\nThere are conflicts with existing teams\n\nTwo students have same registration number\n\nAdding only conflict-free teams\n\nDeleting existing teams and adding new ones\n\nTrying to add a non-existent registration number\n\nExport teams\n\nTest Coverage\n\n\n\nTeamResource.java 100% 100% 96%\n\n\nTeamService.java 100% 89% 90%\n\n\nCreateOnlyStrategy.java 100% 100% 100%\n\n\nPurgeExistringStrategy.java 100% 100% 100%", "createdAt": "2020-11-28T20:24:55Z", "url": "https://github.com/ls1intum/Artemis/pull/2476", "merged": true, "mergeCommit": {"oid": "4be3b3ee8dbb4c2a55370584225fbcbfc920bf55"}, "closed": true, "closedAt": "2020-12-08T15:28:09Z", "author": {"login": "iozbeyli"}, "timelineItems": {"totalCount": 118, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjcFsqgFqTU0NTY3OTUxNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkL3SNgFqTU0NzM0NDY4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5NTE3", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679517", "createdAt": "2020-12-06T07:48:09Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0ODowOVrOIAGsbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0ODowOVrOIAGsbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4MDU4OA==", "bodyText": "too short documentation", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536980588", "createdAt": "2020-12-06T07:48:09Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java", "diffHunk": "@@ -431,4 +473,17 @@ public TeamResource(TeamRepository teamRepository, TeamService teamService, Team\n         course.setExercises(exercises);\n         return ResponseEntity.ok(course);\n     }\n+\n+    /**\n+     * Sends team assignments updates", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 138}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5NTY2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679566", "createdAt": "2020-12-06T07:48:54Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0ODo1NFrOIAGsww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0ODo1NFrOIAGsww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4MDY3NQ==", "bodyText": "are we sure that we want to send one update per team?\nI would appreciate some inline comments here as well", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536980675", "createdAt": "2020-12-06T07:48:54Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java", "diffHunk": "@@ -431,4 +473,17 @@ public TeamResource(TeamRepository teamRepository, TeamService teamService, Team\n         course.setExercises(exercises);\n         return ResponseEntity.ok(course);\n     }\n+\n+    /**\n+     * Sends team assignments updates\n+     *\n+     * @param exercise Exercise which students will receive team update\n+     * @param teams    Teams of exercise\n+     */\n+    private void sendTeamAssignmentUpdates(Exercise exercise, List<Team> teams) {\n+        // Send out team assignment update via websockets\n+        Map<String, List<StudentParticipation>> participationsMap = participationService.findByExerciseIdWithEagerSubmissionsResult(exercise.getId()).stream()\n+                .collect(Collectors.toMap(StudentParticipation::getParticipantIdentifier, List::of, (a, b) -> Stream.concat(a.stream(), b.stream()).collect(Collectors.toList())));\n+        teams.forEach(team -> teamWebsocketService.sendTeamAssignmentUpdate(exercise, null, team, participationsMap.getOrDefault(team.getParticipantIdentifier(), List.of())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 147}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5NzM5", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679739", "createdAt": "2020-12-06T07:51:35Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/5e629d503679c625bddbe1f16425e79b47e7ffa2", "committedDate": "2020-12-07T18:54:28Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTI4Nzk0", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-546528794", "createdAt": "2020-12-07T20:55:56Z", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTMwNTIz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-546530523", "createdAt": "2020-12-07T20:58:23Z", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTMwNzk1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-546530795", "createdAt": "2020-12-07T20:58:44Z", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTMxMjY4", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-546531268", "createdAt": "2020-12-07T20:59:27Z", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMDo1OToyOFrOIA6cgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMDo1OToyOFrOIA6cgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgyODQ4Mg==", "bodyText": "Formatting seems weird", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r537828482", "createdAt": "2020-12-07T20:59:28Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/java/de/tum/in/www1/artemis/repository/UserRepository.java", "diffHunk": "@@ -67,9 +70,40 @@\n             + \"(user.login like :#{#loginOrName}% or concat_ws(' ', user.firstName, user.lastName) like %:#{#loginOrName}%)\")\n     List<User> searchByLoginOrNameInGroup(@Param(\"groupName\") String groupName, @Param(\"loginOrName\") String loginOrName);\n \n+    /**\n+     * Gets users in a group by their registration number.\n+     *\n+     * @param groupName           Name of group in which to search for users\n+     * @param registrationNumbers Registration numbers of users\n+     * @return found users that match the criteria\n+     */\n+    @EntityGraph(type = LOAD, attributePaths = { \"groups\" })\n+    @Query(\"\"\"\n+            select user\n+                from User user", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTMyMzI0", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-546532324", "createdAt": "2020-12-07T21:00:51Z", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTM0NjE4", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-546534618", "createdAt": "2020-12-07T21:04:14Z", "commit": {"oid": "5e629d503679c625bddbe1f16425e79b47e7ffa2"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "504a9faa52217c77761d5acb3df92af6abb6ffd3", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/504a9faa52217c77761d5acb3df92af6abb6ffd3", "committedDate": "2020-12-07T21:51:33Z", "message": "Add more inline comments and fix team name error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/324929d45a77cda6f008b51a1818acc9cd7d0be6", "committedDate": "2020-12-07T22:11:29Z", "message": "Add check for number given to fields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MjM2NDEx", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-547236411", "createdAt": "2020-12-08T13:33:21Z", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzM2MjUz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-547336253", "createdAt": "2020-12-08T15:19:24Z", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzM4MjMw", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-547338230", "createdAt": "2020-12-08T15:21:21Z", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzM5ODk5", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-547339899", "createdAt": "2020-12-08T15:23:05Z", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzQ0MzIx", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-547344321", "createdAt": "2020-12-08T15:27:32Z", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToyNzozMlrOIBjSdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToyNzozMlrOIBjSdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ5NzY1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * PUT /exercises/:destinationExerciseId/teams/import-from-file : add given teams into exercise\n          \n          \n            \n                 * PUT /exercises/:destinationExerciseId/teams/import-from-file : add given teams into exercise (potentially overriding existing teams)", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r538497653", "createdAt": "2020-12-08T15:27:32Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java", "diffHunk": "@@ -317,12 +320,54 @@ public TeamResource(TeamRepository teamRepository, TeamService teamService, Team\n         return ResponseEntity.ok().body(teamService.searchByLoginOrNameInCourseForExerciseTeam(course, exercise, loginOrName));\n     }\n \n+    /**\n+     * PUT /exercises/:destinationExerciseId/teams/import-from-file : add given teams into exercise", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzQ0Njg2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-547344686", "createdAt": "2020-12-08T15:27:51Z", "commit": {"oid": "324929d45a77cda6f008b51a1818acc9cd7d0be6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "208dd42796667e998271eaa5115b5258eaf167be", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/208dd42796667e998271eaa5115b5258eaf167be", "committedDate": "2020-11-22T23:04:11Z", "message": "Add import dialog and java endpoint for team import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80fec8cdbc2edc925175f085f7fdf698197be8dd", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/80fec8cdbc2edc925175f085f7fdf698197be8dd", "committedDate": "2020-11-23T00:03:28Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba940910f176889a4ab6829715357ac8eed7da2", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/9ba940910f176889a4ab6829715357ac8eed7da2", "committedDate": "2020-11-23T13:47:04Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a744b3451c629512e42b31c8cf399e5da957f0b", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/3a744b3451c629512e42b31c8cf399e5da957f0b", "committedDate": "2020-11-23T22:47:15Z", "message": "Separate import from file and from exercise in team import and search users in course"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "991c692b9d39e3055a8c98e1deb2005624f1708a", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/991c692b9d39e3055a8c98e1deb2005624f1708a", "committedDate": "2020-11-24T00:18:57Z", "message": "Add registration numbers not found exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bd3304ef30c8d782b96f4a38d900408558b9e5c", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/0bd3304ef30c8d782b96f4a38d900408558b9e5c", "committedDate": "2020-11-24T00:47:27Z", "message": "Convert used json to same in issue for team import from file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1306d260112c5c8095f5e11ef1e4fa773494ee9a", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/1306d260112c5c8095f5e11ef1e4fa773494ee9a", "committedDate": "2020-11-24T00:57:56Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca4a185cc956586ed95dacd6198ff1735d4f9277", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/ca4a185cc956586ed95dacd6198ff1735d4f9277", "committedDate": "2020-11-25T11:56:32Z", "message": "Add exporting teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ede615a1f8e2f489d054332b8c8bfad59018de03", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/ede615a1f8e2f489d054332b8c8bfad59018de03", "committedDate": "2020-11-25T11:56:58Z", "message": "Merge branch 'enhancement/team/export-import-teams' of github.com:iozbeyli/Artemis into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19099b45e1313c7e29248dc14faee6df5ad687df", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/19099b45e1313c7e29248dc14faee6df5ad687df", "committedDate": "2020-11-25T12:05:24Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f52b58b5ec3dc2cb70f502db2c6c8dafdafc2c37", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/f52b58b5ec3dc2cb70f502db2c6c8dafdafc2c37", "committedDate": "2020-11-25T14:44:35Z", "message": "Fix server style and remove duplicates for team import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "197a12241a9ec176ec3f713f7ffbfcb8c4e3b02b", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/197a12241a9ec176ec3f713f7ffbfcb8c4e3b02b", "committedDate": "2020-11-25T14:56:39Z", "message": "Fix warnings and check for existing registration numbers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b93184054faded9183aedf11351c73cd885d944", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/8b93184054faded9183aedf11351c73cd885d944", "committedDate": "2020-11-25T14:58:01Z", "message": "Remove comment from teams export button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdebe36897f5419e7e4942a5621f5feb64bd2a8e", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/fdebe36897f5419e7e4942a5621f5feb64bd2a8e", "committedDate": "2020-11-25T15:06:45Z", "message": "Fix server style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7e90355116cc7d9b280c8d4b2a3c78f4d4009e4", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/d7e90355116cc7d9b280c8d4b2a3c78f4d4009e4", "committedDate": "2020-11-25T16:29:29Z", "message": "Add translations for teams import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc7d41d8c1eda1d8a1c7d07b94bb15ef87a5e63", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/8cc7d41d8c1eda1d8a1c7d07b94bb15ef87a5e63", "committedDate": "2020-11-25T22:06:20Z", "message": "Add tests for team import dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f6fe889045deb60dc5c9bb166bd68146fc5b265", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/1f6fe889045deb60dc5c9bb166bd68146fc5b265", "committedDate": "2020-11-26T00:04:05Z", "message": "Add tests for test dialog related components"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b92424e86bdcc6dcb3c785dbb0c62992f0692cc0", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/b92424e86bdcc6dcb3c785dbb0c62992f0692cc0", "committedDate": "2020-11-26T01:20:32Z", "message": "Remove duplicate code from team import test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb64db6a39c41f3220f859ce2b9d425de08b49ba", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/cb64db6a39c41f3220f859ce2b9d425de08b49ba", "committedDate": "2020-11-26T10:37:56Z", "message": "Remove duplicate codes from teams tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c2a18628648eb88c7b551a5796a195874aec379", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/8c2a18628648eb88c7b551a5796a195874aec379", "committedDate": "2020-11-26T11:59:09Z", "message": "Reduce number of database calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "208957d9f87b814fee88ae89f6a73afb98793368", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/208957d9f87b814fee88ae89f6a73afb98793368", "committedDate": "2020-11-26T19:26:27Z", "message": "Add tests for team import on server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c65f9d9f4d9f4f9ac54a915fb3da797f60c0dc25", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/c65f9d9f4d9f4f9ac54a915fb3da797f60c0dc25", "committedDate": "2020-11-26T19:27:49Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a390af9a96f47981b03466eb8b585ea5e56d1dc", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/8a390af9a96f47981b03466eb8b585ea5e56d1dc", "committedDate": "2020-11-26T20:08:40Z", "message": "Fix tests for team import dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a26ec9f42257d8c2b009063811daca67dcb4808", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/1a26ec9f42257d8c2b009063811daca67dcb4808", "committedDate": "2020-11-26T20:25:11Z", "message": "Remove config file from team tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7386ba210e6302c49db588756cccf37ba287d495", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/7386ba210e6302c49db588756cccf37ba287d495", "committedDate": "2020-11-26T20:41:53Z", "message": "Add javadoc and fix test names for server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd4476e2889a27e113ba5156ff9c77c024fb009b", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/dd4476e2889a27e113ba5156ff9c77c024fb009b", "committedDate": "2020-11-26T20:50:00Z", "message": "Add javadoc for server tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04d6989295e09ec3613c6f0ed1688048e844867e", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/04d6989295e09ec3613c6f0ed1688048e844867e", "committedDate": "2020-11-26T20:56:47Z", "message": "Add missing param for javadoc for team import server test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "694e721707e61cdbb62d78724a3405f89e3a4948", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/694e721707e61cdbb62d78724a3405f89e3a4948", "committedDate": "2020-11-26T21:53:39Z", "message": "Change import teams alert message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34624bca8ff6d6a5dd3461d9a590e6a52686ca60", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/34624bca8ff6d6a5dd3461d9a590e6a52686ca60", "committedDate": "2020-11-27T16:09:51Z", "message": "Fix comments and improve tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "825199fb9bc83a2561496c28f36794ff391248e9", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/825199fb9bc83a2561496c28f36794ff391248e9", "committedDate": "2020-11-27T16:20:58Z", "message": "Remove unnecessary event spy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61eff0a784daaa05cf97e2d027d5abb9ffc3c0bd", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/61eff0a784daaa05cf97e2d027d5abb9ffc3c0bd", "committedDate": "2020-11-27T16:32:01Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7642c8629b516dcc95791a0189b21485f164e739", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/7642c8629b516dcc95791a0189b21485f164e739", "committedDate": "2020-11-27T17:03:43Z", "message": "Stop loading when json is invalid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb5e553e4a18751f953cb250fa34a81c76750531", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/fb5e553e4a18751f953cb250fa34a81c76750531", "committedDate": "2020-11-28T16:17:36Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDE4MTEy", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-540418112", "createdAt": "2020-11-28T21:15:03Z", "commit": {"oid": "fb5e553e4a18751f953cb250fa34a81c76750531"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDY0MDg1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-540464085", "createdAt": "2020-11-29T09:59:05Z", "commit": {"oid": "fb5e553e4a18751f953cb250fa34a81c76750531"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "815f5a11aace2199fb9a8dc7dbd57ce5474e52d1", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/815f5a11aace2199fb9a8dc7dbd57ce5474e52d1", "committedDate": "2020-12-01T23:51:04Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6c7ac7f63a855915bcae7457c73847a9c1191be", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/b6c7ac7f63a855915bcae7457c73847a9c1191be", "committedDate": "2020-12-01T23:54:34Z", "message": "Add username as identifier when importing teams from a file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "627d771642ef640f9d343f48a7320a6e17bf7412", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/627d771642ef640f9d343f48a7320a6e17bf7412", "committedDate": "2020-12-01T23:55:34Z", "message": "Merge branch 'enhancement/team/export-import-teams' of github.com:ls1intum/Artemis into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94340cbcc6f0f566cb4af04490bf272e89f19b3c", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/94340cbcc6f0f566cb4af04490bf272e89f19b3c", "committedDate": "2020-12-02T00:00:30Z", "message": "Fix server style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c28f20bbf9dafdd96875d912e672ab6a550358ad", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/c28f20bbf9dafdd96875d912e672ab6a550358ad", "committedDate": "2020-12-02T14:52:59Z", "message": "Fix tests and change function names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "619eee99e6cdba19969f271b0e933d68b36c216b", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/619eee99e6cdba19969f271b0e933d68b36c216b", "committedDate": "2020-12-02T15:21:54Z", "message": "Fix server style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aefc66517190cee023f8f98585244c1912d26df", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/5aefc66517190cee023f8f98585244c1912d26df", "committedDate": "2020-12-02T17:33:02Z", "message": "Add more test and fix style errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9365c5690cf16b87ed6073965c2ffb2bc2a6e05a", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/9365c5690cf16b87ed6073965c2ffb2bc2a6e05a", "committedDate": "2020-12-02T17:33:30Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3259f96becaee6012ef32212b7c55da8eb26e034", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/3259f96becaee6012ef32212b7c55da8eb26e034", "committedDate": "2020-12-02T17:33:36Z", "message": "Merge branch 'enhancement/team/export-import-teams' of github.com:ls1intum/Artemis into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDgzOTgx", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543083981", "createdAt": "2020-12-02T17:41:09Z", "commit": {"oid": "3259f96becaee6012ef32212b7c55da8eb26e034"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzo0MTowOVrOH9mpcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzo0MTowOVrOH9mpcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM1ODM4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * 6. Student's login appears more than once\n          \n          \n            \n                 * 7. Student's login appears more than once", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r534358387", "createdAt": "2020-12-02T17:41:09Z", "author": {"login": "derLalla"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -248,7 +248,8 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n      * 3. Source teams have not been loaded yet\n      * 4. No import strategy has been chosen yet\n      * 5. There are no (conflict-free depending on strategy) source teams to be imported\n-     * 6. Student's registration number appears just once\n+     * 6. Student's registration number appears more than once\n+     * 6. Student's login appears more than once", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3259f96becaee6012ef32212b7c55da8eb26e034"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f4c631965022a54ddb3adea2ee19d880bad1549", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/0f4c631965022a54ddb3adea2ee19d880bad1549", "committedDate": "2020-12-02T17:48:08Z", "message": "Update src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts\n\nCo-authored-by: Ren\u00e9 Lalla <33484318+derLalla@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92f9f9cdef1fac62d0c539e8466618232988ba1a", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/92f9f9cdef1fac62d0c539e8466618232988ba1a", "committedDate": "2020-12-02T18:04:56Z", "message": "Remove code duplication"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/33eab59db9785bef97c4238a5dfe157f6861325b", "committedDate": "2020-12-03T07:19:59Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNjk5MDg1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543699085", "createdAt": "2020-12-03T08:16:35Z", "commit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoxNjozNlrOH-HDFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoxNjozNlrOH-HDFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg4OTIzOA==", "bodyText": "This is a huge method and in my opinion has to be split into multiple smaller functions.\nAs a first the the function converts via login or registration number so I'd break this down into:\npublic List<Team> convertTeamsStudentsWithOnlyLoginToAlreadyRegisteredUsers(Course course, List<Team> teams);\npublic List<Team> convertTeamsStudentsWithRegistrationNumberToAlreadyRegisteredUsers(Course course, List<Team> teams);\nBut the method name is still really long so maybe you can try to split it even more.", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r534889238", "createdAt": "2020-12-03T08:16:36Z", "author": {"login": "ivanchimeno"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TeamService.java", "diffHunk": "@@ -205,6 +224,76 @@ public Team save(Exercise exercise, Team team) {\n         return teamRepository.findAllByExerciseId(destinationExercise.getId());\n     }\n \n+    /**\n+     * Converts teams' students with only login or registration number to students on database\n+     *\n+     * @param course Course in which the users will be searched\n+     * @param teams Teams that students are described only by login or visible registration number\n+     * @return list of all teams that now have registered users\n+     */\n+    public List<Team> convertTeamsStudentsWithOnlyLoginOrRegistrationNumberToAlreadyRegisteredUsers(Course course, List<Team> teams) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNzAzNzM2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543703736", "createdAt": "2020-12-03T08:23:13Z", "commit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyMzoxM1rOH-Hwrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyMzoxM1rOH-Hwrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkwMDkxMQ==", "bodyText": "Not major but maybe renaming this to StudentInTeam since students belong to a team?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r534900911", "createdAt": "2020-12-03T08:23:13Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/entities/student-with-team.model.ts", "diffHunk": "@@ -0,0 +1,7 @@\n+export class StudentWithTeam {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNzAzOTYy", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543703962", "createdAt": "2020-12-03T08:23:30Z", "commit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyMzozMFrOH-HyeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyMzozMFrOH-HyeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkwMTM2OQ==", "bodyText": "Remove this", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r534901369", "createdAt": "2020-12-03T08:23:30Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/entities/team.model.ts", "diffHunk": "@@ -2,7 +2,8 @@ import { Moment } from 'moment';\n import { User } from 'app/core/user/user.model';\n import { BaseEntity } from 'app/shared/model/base-entity';\n import { StudentParticipation } from 'app/entities/participation/student-participation.model';\n-\n+import { StudentWithTeam } from 'app/entities/student-with-team.model';\n+// import { TutorWithTeam } from 'app/entities/tutor-with-team.model';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNzA0NjY4", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543704668", "createdAt": "2020-12-03T08:24:28Z", "commit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyNDoyOFrOH-H5aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyNDoyOFrOH-H5aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkwMzE0NQ==", "bodyText": "TutorInTeam?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r534903145", "createdAt": "2020-12-03T08:24:28Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/entities/tutor-with-team.model.ts", "diffHunk": "@@ -0,0 +1,6 @@\n+export class TutorWithTeam {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNzA1Mzc2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543705376", "createdAt": "2020-12-03T08:25:25Z", "commit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyNToyNVrOH-IAQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwODoyNToyNVrOH-IAQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkwNDg5Nw==", "bodyText": "This is a huge expression. Would it be better to create a variable and save the state there?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r534904897", "createdAt": "2020-12-03T08:25:25Z", "author": {"login": "ivanchimeno"}, "path": "src/main/webapp/app/exercises/shared/team/team-students-list/team-students-list.component.html", "diffHunk": "@@ -1,6 +1,13 @@\n <ul class=\"list-group list-group-horizontal student-group\">\n-    <li class=\"list-group-item student-group-item\" *ngFor=\"let student of students\" [class.has-error]=\"errorStudentLogins.includes(student.login)\">\n-        <a *ngIf=\"renderLinks\" [routerLink]=\"['/admin', 'user-management', student.login]\">{{ student.name }} ({{ student.login }})</a>\n-        <span *ngIf=\"!renderLinks\">{{ student.name }} ({{ student.login }})</span>\n+    <li\n+        class=\"list-group-item student-group-item\"\n+        *ngFor=\"let student of students\"\n+        [class.has-error]=\"errorStudentLogins.includes(student.login) || (withRegistrationNumber && errorStudentRegistrationNumbers.includes(student.visibleRegistrationNumber))\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33eab59db9785bef97c4238a5dfe157f6861325b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2bbc1d3d41af88b40abbf4613fdb632c55a5f93", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/b2bbc1d3d41af88b40abbf4613fdb632c55a5f93", "committedDate": "2020-12-03T11:34:41Z", "message": "Remove unnecessary types and split convert teams function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb7299134086938b6832e80cbfbaf06723ad2178", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/eb7299134086938b6832e80cbfbaf06723ad2178", "committedDate": "2020-12-03T11:34:51Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01ffe4999e161ec0bafb4d5fa52e86238b78b9a7", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/01ffe4999e161ec0bafb4d5fa52e86238b78b9a7", "committedDate": "2020-12-03T11:35:48Z", "message": "Merge branch 'enhancement/team/export-import-teams' of github.com:ls1intum/Artemis into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abb59a3099c0d7635c6e8464878f7792684cf57b", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/abb59a3099c0d7635c6e8464878f7792684cf57b", "committedDate": "2020-12-03T12:32:42Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzOTc3Njkz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-543977693", "createdAt": "2020-12-03T13:58:24Z", "commit": {"oid": "abb59a3099c0d7635c6e8464878f7792684cf57b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d6ab97e5391a892bb7cfc4cd14bc3d7d75cf117", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/8d6ab97e5391a892bb7cfc4cd14bc3d7d75cf117", "committedDate": "2020-12-03T14:41:48Z", "message": "Fix export error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73a3fa9299a09f70c283030b53fb486c3b492463", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/73a3fa9299a09f70c283030b53fb486c3b492463", "committedDate": "2020-12-03T14:42:25Z", "message": "Merge branch 'enhancement/team/export-import-teams' of github.com:ls1intum/Artemis into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49a7c3f988da30752fc8b735c889f980c20ae12f", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/49a7c3f988da30752fc8b735c889f980c20ae12f", "committedDate": "2020-12-03T14:43:04Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cafdb849532b10c59af320932a203b67d6e571d", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/0cafdb849532b10c59af320932a203b67d6e571d", "committedDate": "2020-12-03T14:43:21Z", "message": "Merge branch 'enhancement/team/export-import-teams' of github.com:ls1intum/Artemis into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8df5cb9ec0bbfecd3360ee8a858d380430b7c758", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/8df5cb9ec0bbfecd3360ee8a858d380430b7c758", "committedDate": "2020-12-03T16:25:45Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27643dd67cbccfc7b61b1895d268162c6c06fb3a", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/27643dd67cbccfc7b61b1895d268162c6c06fb3a", "committedDate": "2020-12-03T16:44:41Z", "message": "Return converted teams without additional variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjI5MjY1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544229265", "createdAt": "2020-12-03T17:57:28Z", "commit": {"oid": "27643dd67cbccfc7b61b1895d268162c6c06fb3a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjM3MzQx", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544237341", "createdAt": "2020-12-03T18:07:05Z", "commit": {"oid": "27643dd67cbccfc7b61b1895d268162c6c06fb3a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/28eefeb03df1427a403a8b49e5c1523e164c536c", "committedDate": "2020-12-03T18:10:24Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjQ4MTc5", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544248179", "createdAt": "2020-12-03T18:17:44Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjQ2MTQz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544246143", "createdAt": "2020-12-03T18:15:09Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoxNTowOVrOH-qdcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoxNToyNlrOH-qebw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ2OTQyNg==", "bodyText": "While we're here: {{ teamId } does not look correct, can we fix that if it is an issue?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535469426", "createdAt": "2020-12-03T18:15:09Z", "author": {"login": "FrankeLukas"}, "path": "src/main/webapp/i18n/de/team.json", "diffHunk": "@@ -61,7 +61,11 @@\n                 \"noResults\": \"Keine Studenten im Kurs gefunden f\u00fcr Suche:\"\n             },\n             \"errors\": {\n-                \"studentAlreadyAssignedToTeam\": \"Student mit Login {{ studentLogin }} ist bereits in Team mit Id {{ teamId }.\"\n+                \"studentAlreadyAssignedToTeam\": \"Student mit Login {{ studentLogin }} ist bereits in Team mit Id {{ teamId }.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ2OTY3OQ==", "bodyText": "Same here.", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535469679", "createdAt": "2020-12-03T18:15:26Z", "author": {"login": "FrankeLukas"}, "path": "src/main/webapp/i18n/en/team.json", "diffHunk": "@@ -60,7 +60,11 @@\n                 \"noResults\": \"No students found in course for search:\"\n             },\n             \"errors\": {\n-                \"studentAlreadyAssignedToTeam\": \"Student with login {{ studentLogin }} is already assigned to team with id {{ teamId }.\"\n+                \"studentAlreadyAssignedToTeam\": \"Student with login {{ studentLogin }} is already assigned to team with id {{ teamId }.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU2MDc5", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544256079", "createdAt": "2020-12-03T18:27:54Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyNzo1NVrOH-rGAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyNzo1NVrOH-rGAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ3OTgxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public name: string;\n          \n          \n            \n                public firstName?: string;", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535479811", "createdAt": "2020-12-03T18:27:55Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/entities/student-with-team.model.ts", "diffHunk": "@@ -0,0 +1,7 @@\n+export class StudentWithTeam {\n+    public name: string;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU2MjU1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544256255", "createdAt": "2020-12-03T18:28:06Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyODowNlrOH-rGfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyODowNlrOH-rGfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ3OTkzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public surname: string;\n          \n          \n            \n                public lastName?: string;", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535479934", "createdAt": "2020-12-03T18:28:06Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/entities/student-with-team.model.ts", "diffHunk": "@@ -0,0 +1,7 @@\n+export class StudentWithTeam {\n+    public name: string;\n+    public surname: string;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU3MDQ2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544257046", "createdAt": "2020-12-03T18:29:07Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyOTowN1rOH-rIrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyOTowN1rOH-rIrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MDQ5Mw==", "bodyText": "please add some documentation what this class is used for.\nAlso explain that developers can either use username or registrationNumber as unique identifier and that one of those values must be set", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535480493", "createdAt": "2020-12-03T18:29:07Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/entities/student-with-team.model.ts", "diffHunk": "@@ -0,0 +1,7 @@\n+export class StudentWithTeam {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU3NDU2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544257456", "createdAt": "2020-12-03T18:29:37Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyOTozN1rOH-rKDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODoyOTozN1rOH-rKDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MDg0Ng==", "bodyText": "why do we need this class? can we not just use StudentWithTeam[] instead?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535480846", "createdAt": "2020-12-03T18:29:37Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/entities/team.model.ts", "diffHunk": "@@ -37,3 +37,7 @@ export class Team implements BaseEntity {\n         this.students = []; // default value\n     }\n }\n+\n+export class TeamList {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU4MDc1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544258075", "createdAt": "2020-12-03T18:30:21Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMDoyMVrOH-rMCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMDoyMVrOH-rMCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MTM1NQ==", "bodyText": "we have quite a lot of string array properties here.\nCan we handle this more elegant?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535481355", "createdAt": "2020-12-03T18:30:21Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -40,11 +40,17 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n     readonly defaultImportStrategy: ImportStrategy = ImportStrategy.CREATE_ONLY;\n \n     isImporting = false;\n+    showImportFromExercise = true;\n \n     // computed properties\n     teamShortNamesAlreadyExistingInExercise: string[] = [];\n     studentLoginsAlreadyExistingInExercise: string[] = [];\n     sourceTeamsFreeOfConflicts: Team[] = [];\n+    studentRegistrationNumbersAlreadyExistingInOtherTeams: string[] = [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU4NTk3", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544258597", "createdAt": "2020-12-03T18:31:02Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMTowMlrOH-rNpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMTowMlrOH-rNpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MTc2NQ==", "bodyText": "map is not a good name, it is too generic.\nAlso I don't understand what you mean with loginHistogram", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535481765", "createdAt": "2020-12-03T18:31:02Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -239,11 +287,56 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n         if (this.isSubmitDisabled) {\n             return;\n         }\n-        this.isImporting = true;\n-        this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise, this.importStrategy!).subscribe(\n-            (res) => this.onSaveSuccess(res),\n-            () => this.onSaveError(),\n-        );\n+        if (this.showImportFromExercise) {\n+            this.isImporting = true;\n+            this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise!, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        } else if (this.sourceTeams) {\n+            this.notFoundRegistrationNumbers = [];\n+            this.teamService.importTeams(this.exercise, this.sourceTeams, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        }\n+    }\n+\n+    /**\n+     * Update source teams to given teams\n+     * @param {Team[]} fileTeams - Teams which its students only have visible registration number\n+     */\n+    onTeamsChanged(fileTeams: Team[]) {\n+        this.initImportStrategy();\n+        this.sourceTeams = fileTeams;\n+        this.studentRegistrationNumbersAlreadyExistingInOtherTeams = [];\n+        this.notFoundRegistrationNumbers = [];\n+        const students: User[] = flatMap(fileTeams, (fileTeam) => fileTeam.students ?? []);\n+        const loginHistogram = students.reduce(function (map, student) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 174}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU4Nzg2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544258786", "createdAt": "2020-12-03T18:31:18Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMToxOVrOH-rORQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMToxOVrOH-rORQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MTkyNQ==", "bodyText": "Typescript infers the type automatically for you", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535481925", "createdAt": "2020-12-03T18:31:19Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -239,11 +287,56 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n         if (this.isSubmitDisabled) {\n             return;\n         }\n-        this.isImporting = true;\n-        this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise, this.importStrategy!).subscribe(\n-            (res) => this.onSaveSuccess(res),\n-            () => this.onSaveError(),\n-        );\n+        if (this.showImportFromExercise) {\n+            this.isImporting = true;\n+            this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise!, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        } else if (this.sourceTeams) {\n+            this.notFoundRegistrationNumbers = [];\n+            this.teamService.importTeams(this.exercise, this.sourceTeams, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        }\n+    }\n+\n+    /**\n+     * Update source teams to given teams\n+     * @param {Team[]} fileTeams - Teams which its students only have visible registration number\n+     */\n+    onTeamsChanged(fileTeams: Team[]) {\n+        this.initImportStrategy();\n+        this.sourceTeams = fileTeams;\n+        this.studentRegistrationNumbersAlreadyExistingInOtherTeams = [];\n+        this.notFoundRegistrationNumbers = [];\n+        const students: User[] = flatMap(fileTeams, (fileTeam) => fileTeam.students ?? []);\n+        const loginHistogram = students.reduce(function (map, student) {\n+            const login: string | undefined = student.login;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 175}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU5MTQz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544259143", "createdAt": "2020-12-03T18:31:45Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMTo0NlrOH-rPcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMTo0NlrOH-rPcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MjIyNg==", "bodyText": "map too generic", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535482226", "createdAt": "2020-12-03T18:31:46Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -239,11 +287,56 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n         if (this.isSubmitDisabled) {\n             return;\n         }\n-        this.isImporting = true;\n-        this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise, this.importStrategy!).subscribe(\n-            (res) => this.onSaveSuccess(res),\n-            () => this.onSaveError(),\n-        );\n+        if (this.showImportFromExercise) {\n+            this.isImporting = true;\n+            this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise!, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        } else if (this.sourceTeams) {\n+            this.notFoundRegistrationNumbers = [];\n+            this.teamService.importTeams(this.exercise, this.sourceTeams, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        }\n+    }\n+\n+    /**\n+     * Update source teams to given teams\n+     * @param {Team[]} fileTeams - Teams which its students only have visible registration number\n+     */\n+    onTeamsChanged(fileTeams: Team[]) {\n+        this.initImportStrategy();\n+        this.sourceTeams = fileTeams;\n+        this.studentRegistrationNumbersAlreadyExistingInOtherTeams = [];\n+        this.notFoundRegistrationNumbers = [];\n+        const students: User[] = flatMap(fileTeams, (fileTeam) => fileTeam.students ?? []);\n+        const loginHistogram = students.reduce(function (map, student) {\n+            const login: string | undefined = student.login;\n+            if (login) {\n+                if (map[login]) {\n+                    map[login] += 1;\n+                } else {\n+                    map[login] = 1;\n+                }\n+            }\n+            return map;\n+        }, {});\n+        const registrationNumberHistogram = students.reduce(function (map, student) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 185}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU5NDg3", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544259487", "createdAt": "2020-12-03T18:32:12Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMjoxMlrOH-rQZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMjoxMlrOH-rQZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MjQ3MQ==", "bodyText": "this method is rather complex, please split it into multiple smaller methods and make sure to find good method names and add more documentation", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535482471", "createdAt": "2020-12-03T18:32:12Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -239,11 +287,56 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n         if (this.isSubmitDisabled) {\n             return;\n         }\n-        this.isImporting = true;\n-        this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise, this.importStrategy!).subscribe(\n-            (res) => this.onSaveSuccess(res),\n-            () => this.onSaveError(),\n-        );\n+        if (this.showImportFromExercise) {\n+            this.isImporting = true;\n+            this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise!, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        } else if (this.sourceTeams) {\n+            this.notFoundRegistrationNumbers = [];\n+            this.teamService.importTeams(this.exercise, this.sourceTeams, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        }\n+    }\n+\n+    /**\n+     * Update source teams to given teams\n+     * @param {Team[]} fileTeams - Teams which its students only have visible registration number\n+     */\n+    onTeamsChanged(fileTeams: Team[]) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 168}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjU5OTI4", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544259928", "createdAt": "2020-12-03T18:32:44Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMjo0NFrOH-rRxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMjo0NFrOH-rRxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4MjgyMg==", "bodyText": "we should use actual Maps in Typescript and not JavaScript objects with Object.keys", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535482822", "createdAt": "2020-12-03T18:32:44Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -239,11 +287,56 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n         if (this.isSubmitDisabled) {\n             return;\n         }\n-        this.isImporting = true;\n-        this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise, this.importStrategy!).subscribe(\n-            (res) => this.onSaveSuccess(res),\n-            () => this.onSaveError(),\n-        );\n+        if (this.showImportFromExercise) {\n+            this.isImporting = true;\n+            this.teamService.importTeamsFromSourceExercise(this.exercise, this.sourceExercise!, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        } else if (this.sourceTeams) {\n+            this.notFoundRegistrationNumbers = [];\n+            this.teamService.importTeams(this.exercise, this.sourceTeams, this.importStrategy!).subscribe(\n+                (res) => this.onSaveSuccess(res),\n+                (error) => this.onSaveError(error),\n+            );\n+        }\n+    }\n+\n+    /**\n+     * Update source teams to given teams\n+     * @param {Team[]} fileTeams - Teams which its students only have visible registration number\n+     */\n+    onTeamsChanged(fileTeams: Team[]) {\n+        this.initImportStrategy();\n+        this.sourceTeams = fileTeams;\n+        this.studentRegistrationNumbersAlreadyExistingInOtherTeams = [];\n+        this.notFoundRegistrationNumbers = [];\n+        const students: User[] = flatMap(fileTeams, (fileTeam) => fileTeam.students ?? []);\n+        const loginHistogram = students.reduce(function (map, student) {\n+            const login: string | undefined = student.login;\n+            if (login) {\n+                if (map[login]) {\n+                    map[login] += 1;\n+                } else {\n+                    map[login] = 1;\n+                }\n+            }\n+            return map;\n+        }, {});\n+        const registrationNumberHistogram = students.reduce(function (map, student) {\n+            const registrationNumber: string | undefined = student.visibleRegistrationNumber;\n+            if (registrationNumber) {\n+                if (map[registrationNumber]) {\n+                    map[registrationNumber] += 1;\n+                } else {\n+                    map[registrationNumber] = 1;\n+                }\n+            }\n+            return map;\n+        }, {});\n+        this.studentLoginsAlreadyExistingInOtherTeams = Object.keys(loginHistogram).filter((key) => loginHistogram[key] > 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 196}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjYwMTEy", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544260112", "createdAt": "2020-12-03T18:32:58Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMjo1OVrOH-rSRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODozMjo1OVrOH-rSRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ4Mjk0OA==", "bodyText": "method too long, documentation unclear", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r535482948", "createdAt": "2020-12-03T18:32:59Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/shared/team/teams-import-dialog/teams-import-dialog.component.ts", "diffHunk": "@@ -261,10 +354,62 @@ export class TeamsImportDialogComponent implements OnInit, OnDestroy {\n \n     /**\n      * Hook to indicate an error on save\n+     * @param {HttpErrorResponse} httpErrorResponse - The occurred error\n+     */\n+    onSaveError(httpErrorResponse: HttpErrorResponse) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "originalPosition": 208}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MjYxNDky", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-544261492", "createdAt": "2020-12-03T18:34:48Z", "commit": {"oid": "28eefeb03df1427a403a8b49e5c1523e164c536c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e6a232ee36b1755827f7d5bc62ae5b311db021", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/49e6a232ee36b1755827f7d5bc62ae5b311db021", "committedDate": "2020-12-03T19:02:18Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb6bd891a7a0a740d2ccdcdbf4022fedc64ed9b7", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/bb6bd891a7a0a740d2ccdcdbf4022fedc64ed9b7", "committedDate": "2020-12-03T22:16:49Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07589c4d88c30df57e316d5d0fc302b96457220f", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/07589c4d88c30df57e316d5d0fc302b96457220f", "committedDate": "2020-12-04T11:50:44Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "645cf2ccc791587b565a00b855e8fe8a4bce1e61", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/645cf2ccc791587b565a00b855e8fe8a4bce1e61", "committedDate": "2020-12-04T15:51:59Z", "message": "Add more documentation, split big functions and reduce unnecessary variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67c970f4ad7a94b4ab8cf41f626213048c945f70", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/67c970f4ad7a94b4ab8cf41f626213048c945f70", "committedDate": "2020-12-04T16:07:08Z", "message": "Fix lint errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640", "author": {"user": {"login": "iozbeyli", "name": "\u0130smet Melih \u00d6zbeyli"}}, "url": "https://github.com/ls1intum/Artemis/commit/b056a1e72604682cb7c2ae69b57e2c5146776640", "committedDate": "2020-12-04T18:03:46Z", "message": "Fix find identifiers function name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MjU5OTAx", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545259901", "createdAt": "2020-12-04T20:03:16Z", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NDMyNDI1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545432425", "createdAt": "2020-12-05T07:22:05Z", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NTczNzgz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545573783", "createdAt": "2020-12-05T09:42:13Z", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NTkxNjY1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545591665", "createdAt": "2020-12-05T14:35:32Z", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NTk0ODUw", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545594850", "createdAt": "2020-12-05T15:25:06Z", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NTk3OTI0", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545597924", "createdAt": "2020-12-05T16:09:43Z", "commit": {"oid": "b056a1e72604682cb7c2ae69b57e2c5146776640"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/e9fa643c54ca3b54fa1600cf58a615091e3409a5", "committedDate": "2020-12-06T07:43:01Z", "message": "Merge branch 'develop' into enhancement/team/export-import-teams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5MjUy", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679252", "createdAt": "2020-12-06T07:44:06Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NDowNlrOIAGp3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NDowNlrOIAGp3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk3OTkzMg==", "bodyText": "I would appreciate some inline comments here", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536979932", "createdAt": "2020-12-06T07:44:06Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TeamService.java", "diffHunk": "@@ -205,6 +224,121 @@ public Team save(Exercise exercise, Team team) {\n         return teamRepository.findAllByExerciseId(destinationExercise.getId());\n     }\n \n+    /**\n+     * Converts teams' students with only login or registration number to students on database\n+     *\n+     * @param course Course in which the users will be searched\n+     * @param teams Teams that students are described only by login or visible registration number\n+     * @return list of all teams that now have registered users\n+     * @throws BadRequestAlertException if there is any student without login and registration number\n+     * @throws StudentsNotFoundException if there is any student does not exist in course's students\n+     * @throws StudentsAppearMultipleTimesException if a student appears in multiple teams\n+     */\n+    public List<Team> convertTeamsStudentsToUsersInDatabase(Course course, List<Team> teams) {\n+        List<User> students = teams.stream().flatMap(team -> team.getStudents().stream()).collect(Collectors.toList());\n+        List<String> logins = students.stream().filter(student -> student.getLogin() != null).map(User::getLogin).collect(Collectors.toList());\n+        List<String> registrationNumbers = students.stream().filter(student -> student.getLogin() == null && student.getVisibleRegistrationNumber() != null)\n+                .map(User::getVisibleRegistrationNumber).collect(Collectors.toList());\n+        if (students.stream().count() != logins.stream().count() + registrationNumbers.stream().count()) {\n+            throw new BadRequestAlertException(\"Students do not have an identifier\", TeamResource.ENTITY_NAME, \"studentIdentifierNotFound\", true);\n+        }\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundLoginsPair = getUsersFromLogins(logins, course.getStudentGroupName());\n+        List<User> existingStudentsWithLogin = existingStudentsAndNotFoundLoginsPair.getFirst();\n+        List<String> notFoundLogins = existingStudentsAndNotFoundLoginsPair.getSecond();\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundRegistrationNumbersPair = getUsersFromRegistrationNumbers(registrationNumbers, logins,\n+                course.getStudentGroupName());\n+        List<User> existingStudentsWithRegistrationNumber = existingStudentsAndNotFoundRegistrationNumbersPair.getFirst();\n+        List<String> notFoundRegistrationNumbers = existingStudentsAndNotFoundRegistrationNumbersPair.getSecond();\n+        if (!notFoundLogins.isEmpty() || !notFoundRegistrationNumbers.isEmpty()) {\n+            throw new StudentsNotFoundException(notFoundRegistrationNumbers, notFoundLogins);\n+        }\n+\n+        Map<String, User> studentsWithLogin = existingStudentsWithLogin.stream().collect(Collectors.toMap(User::getLogin, Function.identity()));\n+        Map<String, User> studentsWithRegistrationNumber = existingStudentsWithRegistrationNumber.stream()\n+                .collect(Collectors.toMap(User::getRegistrationNumber, Function.identity()));\n+\n+        return convertTeamsStudentsToUsersInMaps(teams, studentsWithLogin, studentsWithRegistrationNumber);\n+    }\n+\n+    /**\n+     * Returns students in database that has given logins\n+     *\n+     * @param logins Logins to find users with\n+     * @param groupName Group in which users will be searched\n+     * @return list of users with given logins\n+     */\n+    private Pair<List<User>, List<String>> getUsersFromLogins(List<String> logins, String groupName) {\n+        List<User> existingStudentsWithLogin = new ArrayList<>();\n+        List<String> notFoundLogins = new ArrayList<>();\n+        if (groupName != null && logins != null && !logins.isEmpty()) {\n+            existingStudentsWithLogin = userRepository.findAllByLoginsInGroup(groupName, new HashSet<>(logins));\n+            List<String> existingLogins = existingStudentsWithLogin.stream().map(User::getLogin).collect(Collectors.toList());\n+            notFoundLogins = logins.stream().filter(login -> !existingLogins.contains(login)).collect(Collectors.toList());\n+        }\n+        return Pair.of(existingStudentsWithLogin, notFoundLogins);\n+    }\n+\n+    /**\n+     * Returns students in database that has given registration numbers\n+     *\n+     * @param registrationNumbers Registration numbers to find users with\n+     * @param logins Logins to find if there is any users with given login found, throws error if there is any\n+     * @param groupName Group in which users will be searched\n+     * @return list of users with given registration numbers\n+     * @throws StudentsAppearMultipleTimesException if any user has one of the given logins\n+     */\n+    private Pair<List<User>, List<String>> getUsersFromRegistrationNumbers(List<String> registrationNumbers, List<String> logins, String groupName) {\n+        List<User> existingStudentsWithRegistrationNumber = new ArrayList<>();\n+        List<String> notFoundRegistrationNumbers = new ArrayList<>();\n+        if (groupName != null && logins != null && registrationNumbers != null && !registrationNumbers.isEmpty()) {\n+            existingStudentsWithRegistrationNumber = userRepository.findAllByRegistrationNumbersInGroup(groupName, new HashSet<>(registrationNumbers));\n+            List<User> usersWhoAppearsMoreThanOnce = existingStudentsWithRegistrationNumber.stream().filter(student -> logins.contains(student.getLogin()))\n+                    .collect(Collectors.toList());\n+            if (!usersWhoAppearsMoreThanOnce.isEmpty()) {\n+                throw new StudentsAppearMultipleTimesException(usersWhoAppearsMoreThanOnce);\n+            }\n+            List<String> existingRegistrationNumbers = existingStudentsWithRegistrationNumber.stream().map(User::getRegistrationNumber).collect(Collectors.toList());\n+            notFoundRegistrationNumbers = registrationNumbers.stream().filter(registrationNumber -> !existingRegistrationNumbers.contains(registrationNumber))\n+                    .collect(Collectors.toList());\n+        }\n+        return Pair.of(existingStudentsWithRegistrationNumber, notFoundRegistrationNumbers);\n+    }\n+\n+    /**\n+     * Converts teams' students with only login or registration number to students on given maps\n+     *\n+     * @param teams Course in which the users will be searched\n+     * @param studentsWithLogin A map that contains logins as keys and users as values\n+     * @param studentsWithRegistrationNumber A map that contains registration numbers as keys and users as values\n+     * @return list of teams that now contains students in given maps\n+     */\n+    private List<Team> convertTeamsStudentsToUsersInMaps(List<Team> teams, Map<String, User> studentsWithLogin, Map<String, User> studentsWithRegistrationNumber) {\n+        List<Team> convertedTeams = new ArrayList<>();\n+\n+        teams.forEach(team -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 138}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5MjY4", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679268", "createdAt": "2020-12-06T07:44:15Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NDoxNVrOIAGp_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NDoxNVrOIAGp_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk3OTk2Nw==", "bodyText": "I would appreciate some inline comments here", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536979967", "createdAt": "2020-12-06T07:44:15Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TeamService.java", "diffHunk": "@@ -205,6 +224,121 @@ public Team save(Exercise exercise, Team team) {\n         return teamRepository.findAllByExerciseId(destinationExercise.getId());\n     }\n \n+    /**\n+     * Converts teams' students with only login or registration number to students on database\n+     *\n+     * @param course Course in which the users will be searched\n+     * @param teams Teams that students are described only by login or visible registration number\n+     * @return list of all teams that now have registered users\n+     * @throws BadRequestAlertException if there is any student without login and registration number\n+     * @throws StudentsNotFoundException if there is any student does not exist in course's students\n+     * @throws StudentsAppearMultipleTimesException if a student appears in multiple teams\n+     */\n+    public List<Team> convertTeamsStudentsToUsersInDatabase(Course course, List<Team> teams) {\n+        List<User> students = teams.stream().flatMap(team -> team.getStudents().stream()).collect(Collectors.toList());\n+        List<String> logins = students.stream().filter(student -> student.getLogin() != null).map(User::getLogin).collect(Collectors.toList());\n+        List<String> registrationNumbers = students.stream().filter(student -> student.getLogin() == null && student.getVisibleRegistrationNumber() != null)\n+                .map(User::getVisibleRegistrationNumber).collect(Collectors.toList());\n+        if (students.stream().count() != logins.stream().count() + registrationNumbers.stream().count()) {\n+            throw new BadRequestAlertException(\"Students do not have an identifier\", TeamResource.ENTITY_NAME, \"studentIdentifierNotFound\", true);\n+        }\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundLoginsPair = getUsersFromLogins(logins, course.getStudentGroupName());\n+        List<User> existingStudentsWithLogin = existingStudentsAndNotFoundLoginsPair.getFirst();\n+        List<String> notFoundLogins = existingStudentsAndNotFoundLoginsPair.getSecond();\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundRegistrationNumbersPair = getUsersFromRegistrationNumbers(registrationNumbers, logins,\n+                course.getStudentGroupName());\n+        List<User> existingStudentsWithRegistrationNumber = existingStudentsAndNotFoundRegistrationNumbersPair.getFirst();\n+        List<String> notFoundRegistrationNumbers = existingStudentsAndNotFoundRegistrationNumbersPair.getSecond();\n+        if (!notFoundLogins.isEmpty() || !notFoundRegistrationNumbers.isEmpty()) {\n+            throw new StudentsNotFoundException(notFoundRegistrationNumbers, notFoundLogins);\n+        }\n+\n+        Map<String, User> studentsWithLogin = existingStudentsWithLogin.stream().collect(Collectors.toMap(User::getLogin, Function.identity()));\n+        Map<String, User> studentsWithRegistrationNumber = existingStudentsWithRegistrationNumber.stream()\n+                .collect(Collectors.toMap(User::getRegistrationNumber, Function.identity()));\n+\n+        return convertTeamsStudentsToUsersInMaps(teams, studentsWithLogin, studentsWithRegistrationNumber);\n+    }\n+\n+    /**\n+     * Returns students in database that has given logins\n+     *\n+     * @param logins Logins to find users with\n+     * @param groupName Group in which users will be searched\n+     * @return list of users with given logins\n+     */\n+    private Pair<List<User>, List<String>> getUsersFromLogins(List<String> logins, String groupName) {\n+        List<User> existingStudentsWithLogin = new ArrayList<>();\n+        List<String> notFoundLogins = new ArrayList<>();\n+        if (groupName != null && logins != null && !logins.isEmpty()) {\n+            existingStudentsWithLogin = userRepository.findAllByLoginsInGroup(groupName, new HashSet<>(logins));\n+            List<String> existingLogins = existingStudentsWithLogin.stream().map(User::getLogin).collect(Collectors.toList());\n+            notFoundLogins = logins.stream().filter(login -> !existingLogins.contains(login)).collect(Collectors.toList());\n+        }\n+        return Pair.of(existingStudentsWithLogin, notFoundLogins);\n+    }\n+\n+    /**\n+     * Returns students in database that has given registration numbers\n+     *\n+     * @param registrationNumbers Registration numbers to find users with\n+     * @param logins Logins to find if there is any users with given login found, throws error if there is any\n+     * @param groupName Group in which users will be searched\n+     * @return list of users with given registration numbers\n+     * @throws StudentsAppearMultipleTimesException if any user has one of the given logins\n+     */\n+    private Pair<List<User>, List<String>> getUsersFromRegistrationNumbers(List<String> registrationNumbers, List<String> logins, String groupName) {\n+        List<User> existingStudentsWithRegistrationNumber = new ArrayList<>();\n+        List<String> notFoundRegistrationNumbers = new ArrayList<>();\n+        if (groupName != null && logins != null && registrationNumbers != null && !registrationNumbers.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 113}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5MzA3", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679307", "createdAt": "2020-12-06T07:44:53Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NDo1M1rOIAGqdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NDo1M1rOIAGqdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4MDA4Ng==", "bodyText": "this is a bit short, please elaborate more why this is needed", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536980086", "createdAt": "2020-12-06T07:44:53Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TeamService.java", "diffHunk": "@@ -205,6 +224,121 @@ public Team save(Exercise exercise, Team team) {\n         return teamRepository.findAllByExerciseId(destinationExercise.getId());\n     }\n \n+    /**\n+     * Converts teams' students with only login or registration number to students on database\n+     *\n+     * @param course Course in which the users will be searched\n+     * @param teams Teams that students are described only by login or visible registration number\n+     * @return list of all teams that now have registered users\n+     * @throws BadRequestAlertException if there is any student without login and registration number\n+     * @throws StudentsNotFoundException if there is any student does not exist in course's students\n+     * @throws StudentsAppearMultipleTimesException if a student appears in multiple teams\n+     */\n+    public List<Team> convertTeamsStudentsToUsersInDatabase(Course course, List<Team> teams) {\n+        List<User> students = teams.stream().flatMap(team -> team.getStudents().stream()).collect(Collectors.toList());\n+        List<String> logins = students.stream().filter(student -> student.getLogin() != null).map(User::getLogin).collect(Collectors.toList());\n+        List<String> registrationNumbers = students.stream().filter(student -> student.getLogin() == null && student.getVisibleRegistrationNumber() != null)\n+                .map(User::getVisibleRegistrationNumber).collect(Collectors.toList());\n+        if (students.stream().count() != logins.stream().count() + registrationNumbers.stream().count()) {\n+            throw new BadRequestAlertException(\"Students do not have an identifier\", TeamResource.ENTITY_NAME, \"studentIdentifierNotFound\", true);\n+        }\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundLoginsPair = getUsersFromLogins(logins, course.getStudentGroupName());\n+        List<User> existingStudentsWithLogin = existingStudentsAndNotFoundLoginsPair.getFirst();\n+        List<String> notFoundLogins = existingStudentsAndNotFoundLoginsPair.getSecond();\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundRegistrationNumbersPair = getUsersFromRegistrationNumbers(registrationNumbers, logins,\n+                course.getStudentGroupName());\n+        List<User> existingStudentsWithRegistrationNumber = existingStudentsAndNotFoundRegistrationNumbersPair.getFirst();\n+        List<String> notFoundRegistrationNumbers = existingStudentsAndNotFoundRegistrationNumbersPair.getSecond();\n+        if (!notFoundLogins.isEmpty() || !notFoundRegistrationNumbers.isEmpty()) {\n+            throw new StudentsNotFoundException(notFoundRegistrationNumbers, notFoundLogins);\n+        }\n+\n+        Map<String, User> studentsWithLogin = existingStudentsWithLogin.stream().collect(Collectors.toMap(User::getLogin, Function.identity()));\n+        Map<String, User> studentsWithRegistrationNumber = existingStudentsWithRegistrationNumber.stream()\n+                .collect(Collectors.toMap(User::getRegistrationNumber, Function.identity()));\n+\n+        return convertTeamsStudentsToUsersInMaps(teams, studentsWithLogin, studentsWithRegistrationNumber);\n+    }\n+\n+    /**\n+     * Returns students in database that has given logins", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 84}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5MzM2", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679336", "createdAt": "2020-12-06T07:45:25Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NToyNVrOIAGquQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NToyNVrOIAGquQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4MDE1Mw==", "bodyText": "I would appreciate some inline comments here", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536980153", "createdAt": "2020-12-06T07:45:25Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TeamService.java", "diffHunk": "@@ -205,6 +224,121 @@ public Team save(Exercise exercise, Team team) {\n         return teamRepository.findAllByExerciseId(destinationExercise.getId());\n     }\n \n+    /**\n+     * Converts teams' students with only login or registration number to students on database\n+     *\n+     * @param course Course in which the users will be searched\n+     * @param teams Teams that students are described only by login or visible registration number\n+     * @return list of all teams that now have registered users\n+     * @throws BadRequestAlertException if there is any student without login and registration number\n+     * @throws StudentsNotFoundException if there is any student does not exist in course's students\n+     * @throws StudentsAppearMultipleTimesException if a student appears in multiple teams\n+     */\n+    public List<Team> convertTeamsStudentsToUsersInDatabase(Course course, List<Team> teams) {\n+        List<User> students = teams.stream().flatMap(team -> team.getStudents().stream()).collect(Collectors.toList());\n+        List<String> logins = students.stream().filter(student -> student.getLogin() != null).map(User::getLogin).collect(Collectors.toList());\n+        List<String> registrationNumbers = students.stream().filter(student -> student.getLogin() == null && student.getVisibleRegistrationNumber() != null)\n+                .map(User::getVisibleRegistrationNumber).collect(Collectors.toList());\n+        if (students.stream().count() != logins.stream().count() + registrationNumbers.stream().count()) {\n+            throw new BadRequestAlertException(\"Students do not have an identifier\", TeamResource.ENTITY_NAME, \"studentIdentifierNotFound\", true);\n+        }\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundLoginsPair = getUsersFromLogins(logins, course.getStudentGroupName());\n+        List<User> existingStudentsWithLogin = existingStudentsAndNotFoundLoginsPair.getFirst();\n+        List<String> notFoundLogins = existingStudentsAndNotFoundLoginsPair.getSecond();\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundRegistrationNumbersPair = getUsersFromRegistrationNumbers(registrationNumbers, logins,\n+                course.getStudentGroupName());\n+        List<User> existingStudentsWithRegistrationNumber = existingStudentsAndNotFoundRegistrationNumbersPair.getFirst();\n+        List<String> notFoundRegistrationNumbers = existingStudentsAndNotFoundRegistrationNumbersPair.getSecond();\n+        if (!notFoundLogins.isEmpty() || !notFoundRegistrationNumbers.isEmpty()) {\n+            throw new StudentsNotFoundException(notFoundRegistrationNumbers, notFoundLogins);\n+        }\n+\n+        Map<String, User> studentsWithLogin = existingStudentsWithLogin.stream().collect(Collectors.toMap(User::getLogin, Function.identity()));\n+        Map<String, User> studentsWithRegistrationNumber = existingStudentsWithRegistrationNumber.stream()\n+                .collect(Collectors.toMap(User::getRegistrationNumber, Function.identity()));\n+\n+        return convertTeamsStudentsToUsersInMaps(teams, studentsWithLogin, studentsWithRegistrationNumber);\n+    }\n+\n+    /**\n+     * Returns students in database that has given logins\n+     *\n+     * @param logins Logins to find users with\n+     * @param groupName Group in which users will be searched\n+     * @return list of users with given logins\n+     */\n+    private Pair<List<User>, List<String>> getUsersFromLogins(List<String> logins, String groupName) {\n+        List<User> existingStudentsWithLogin = new ArrayList<>();\n+        List<String> notFoundLogins = new ArrayList<>();\n+        if (groupName != null && logins != null && !logins.isEmpty()) {\n+            existingStudentsWithLogin = userRepository.findAllByLoginsInGroup(groupName, new HashSet<>(logins));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5Mzcz", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679373", "createdAt": "2020-12-06T07:45:56Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NTo1NlrOIAGrBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NTo1NlrOIAGrBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4MDIzMQ==", "bodyText": "I would appreciate some inline comments here", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536980231", "createdAt": "2020-12-06T07:45:56Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/TeamService.java", "diffHunk": "@@ -205,6 +224,121 @@ public Team save(Exercise exercise, Team team) {\n         return teamRepository.findAllByExerciseId(destinationExercise.getId());\n     }\n \n+    /**\n+     * Converts teams' students with only login or registration number to students on database\n+     *\n+     * @param course Course in which the users will be searched\n+     * @param teams Teams that students are described only by login or visible registration number\n+     * @return list of all teams that now have registered users\n+     * @throws BadRequestAlertException if there is any student without login and registration number\n+     * @throws StudentsNotFoundException if there is any student does not exist in course's students\n+     * @throws StudentsAppearMultipleTimesException if a student appears in multiple teams\n+     */\n+    public List<Team> convertTeamsStudentsToUsersInDatabase(Course course, List<Team> teams) {\n+        List<User> students = teams.stream().flatMap(team -> team.getStudents().stream()).collect(Collectors.toList());\n+        List<String> logins = students.stream().filter(student -> student.getLogin() != null).map(User::getLogin).collect(Collectors.toList());\n+        List<String> registrationNumbers = students.stream().filter(student -> student.getLogin() == null && student.getVisibleRegistrationNumber() != null)\n+                .map(User::getVisibleRegistrationNumber).collect(Collectors.toList());\n+        if (students.stream().count() != logins.stream().count() + registrationNumbers.stream().count()) {\n+            throw new BadRequestAlertException(\"Students do not have an identifier\", TeamResource.ENTITY_NAME, \"studentIdentifierNotFound\", true);\n+        }\n+\n+        Pair<List<User>, List<String>> existingStudentsAndNotFoundLoginsPair = getUsersFromLogins(logins, course.getStudentGroupName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1Njc5NDY1", "url": "https://github.com/ls1intum/Artemis/pull/2476#pullrequestreview-545679465", "createdAt": "2020-12-06T07:47:26Z", "commit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NzoyNlrOIAGsBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQwNzo0NzoyNlrOIAGsBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjk4MDQ4NA==", "bodyText": "why is this a PUT mapping? If we add new objects into the database, should we not use POST instead?", "url": "https://github.com/ls1intum/Artemis/pull/2476#discussion_r536980484", "createdAt": "2020-12-06T07:47:26Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TeamResource.java", "diffHunk": "@@ -317,12 +320,54 @@ public TeamResource(TeamRepository teamRepository, TeamService teamService, Team\n         return ResponseEntity.ok().body(teamService.searchByLoginOrNameInCourseForExerciseTeam(course, exercise, loginOrName));\n     }\n \n+    /**\n+     * PUT /exercises/:destinationExerciseId/teams/import-from-file : add given teams into exercise\n+     *\n+     * @param exerciseId         the exercise id of the exercise for which to import teams\n+     * @param teams              teams whose students have login or registration number as identifiers\n+     * @param importStrategyType the import strategy to use when importing the teams\n+     * @return the ResponseEntity with status 200 (OK) and the list of created teams in body\n+     */\n+    @PutMapping(\"/exercises/{exerciseId}/teams/import-from-list\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9fa643c54ca3b54fa1600cf58a615091e3409a5"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3342, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}