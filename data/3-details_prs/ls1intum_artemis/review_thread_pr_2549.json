{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwMDQyMzEz", "number": 2549, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzo1MTo0NlrOFFmTKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjoxNzozOFrOFGKcGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNDE0Njk3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMzo1MTo0NlrOIGL48g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMTo1NzowOFrOIHBxWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1NzE3MA==", "bodyText": "Are you sure participationIdList cannot be undefined?", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r543357170", "createdAt": "2020-12-15T13:51:46Z", "author": {"login": "FuchsDominik"}, "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "diffHunk": "@@ -82,7 +82,7 @@ export class ProgrammingAssessmentRepoExportDialogComponent implements OnInit {\n         }\n         this.exportInProgress = true;\n         // The participation ids take priority over the participant identifiers (student login or team names).\n-        if (this.participationIdList) {\n+        if (this.participationIdList.length) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94bd034933595b6387345267eb3c79706a3f059c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIzNjg3NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (this.participationIdList.length) {\n          \n          \n            \n                    if (this.participationIdList?.length) {", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r544236874", "createdAt": "2020-12-16T11:51:59Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "diffHunk": "@@ -82,7 +82,7 @@ export class ProgrammingAssessmentRepoExportDialogComponent implements OnInit {\n         }\n         this.exportInProgress = true;\n         // The participation ids take priority over the participant identifiers (student login or team names).\n-        if (this.participationIdList) {\n+        if (this.participationIdList.length) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1NzE3MA=="}, "originalCommit": {"oid": "94bd034933595b6387345267eb3c79706a3f059c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIzNjk4Ng==", "bodyText": "might be saver to use the question mark operator here", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r544236986", "createdAt": "2020-12-16T11:52:09Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "diffHunk": "@@ -82,7 +82,7 @@ export class ProgrammingAssessmentRepoExportDialogComponent implements OnInit {\n         }\n         this.exportInProgress = true;\n         // The participation ids take priority over the participant identifiers (student login or team names).\n-        if (this.participationIdList) {\n+        if (this.participationIdList.length) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1NzE3MA=="}, "originalCommit": {"oid": "94bd034933595b6387345267eb3c79706a3f059c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIzODAyNA==", "bodyText": "oh no I am not. In the client test I couldn't assign undefined. But I will fix this.", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r544238024", "createdAt": "2020-12-16T11:53:54Z", "author": {"login": "derLalla"}, "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "diffHunk": "@@ -82,7 +82,7 @@ export class ProgrammingAssessmentRepoExportDialogComponent implements OnInit {\n         }\n         this.exportInProgress = true;\n         // The participation ids take priority over the participant identifiers (student login or team names).\n-        if (this.participationIdList) {\n+        if (this.participationIdList.length) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1NzE3MA=="}, "originalCommit": {"oid": "94bd034933595b6387345267eb3c79706a3f059c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIzOTk2MA==", "bodyText": "fixed in 6908cd8", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r544239960", "createdAt": "2020-12-16T11:57:08Z", "author": {"login": "derLalla"}, "path": "src/main/webapp/app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component.ts", "diffHunk": "@@ -82,7 +82,7 @@ export class ProgrammingAssessmentRepoExportDialogComponent implements OnInit {\n         }\n         this.exportInProgress = true;\n         // The participation ids take priority over the participant identifiers (student login or team names).\n-        if (this.participationIdList) {\n+        if (this.participationIdList.length) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM1NzE3MA=="}, "originalCommit": {"oid": "94bd034933595b6387345267eb3c79706a3f059c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMDA2NTQyOnYy", "diffSide": "RIGHT", "path": "src/test/javascript/spec/component/programming-assessment/programming-assessment-repo-export-dialog.component.spec.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjoxNzowN1rOIHCg3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjoxNzowN1rOIHCg3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI1MjEyNA==", "bodyText": "The findExerciseId variable doesn't seem to be used. (If you need the stub statement I'd just remove the variable assignment.)", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r544252124", "createdAt": "2020-12-16T12:17:07Z", "author": {"login": "FrankeLukas"}, "path": "src/test/javascript/spec/component/programming-assessment/programming-assessment-repo-export-dialog.component.spec.ts", "diffHunk": "@@ -0,0 +1,128 @@\n+import { ComponentFixture, TestBed, tick, fakeAsync } from '@angular/core/testing';\n+import { TranslateModule } from '@ngx-translate/core';\n+import * as chai from 'chai';\n+import * as sinonChai from 'sinon-chai';\n+import { SinonStub, stub } from 'sinon';\n+import { of } from 'rxjs';\n+import { HttpResponse, HttpHeaders } from '@angular/common/http';\n+import { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n+import * as moment from 'moment';\n+import { ArtemisTestModule } from '../../test.module';\n+import { ProgrammingAssessmentRepoExportDialogComponent } from 'app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+import { Course } from 'app/entities/course.model';\n+import { ExerciseService } from 'app/exercises/shared/exercise/exercise.service';\n+import { ProgrammingAssessmentRepoExportService } from 'app/exercises/programming/assess/repo-export/programming-assessment-repo-export.service';\n+import { ArtemisProgrammingAssessmentModule } from 'app/exercises/programming/assess/programming-assessment.module';\n+import { Exercise } from 'app/entities/exercise.model';\n+import { MockSyncStorage } from '../../helpers/mocks/service/mock-sync-storage.service';\n+\n+chai.use(sinonChai);\n+const expect = chai.expect;\n+\n+const createBlobHttpResponse = () => {\n+    const blob = new Blob([JSON.stringify({ property: 'blob' })], { type: 'application/json' });\n+    const headers = new HttpHeaders().set('filename', 'blobfile');\n+    return new HttpResponse({ body: blob, headers });\n+};\n+\n+describe('ProgrammingAssessmentRepoExportDialogComponent', () => {\n+    let comp: ProgrammingAssessmentRepoExportDialogComponent;\n+    let fixture: ComponentFixture<ProgrammingAssessmentRepoExportDialogComponent>;\n+    let exerciseService: ExerciseService;\n+    let repoExportService: ProgrammingAssessmentRepoExportService;\n+\n+    // stubs\n+    let findExerciseId: SinonStub;\n+    global.URL.createObjectURL = jest.fn(() => 'http://some.test.com');\n+    global.URL.revokeObjectURL = jest.fn(() => '');\n+\n+    const exerciseId = 42;\n+    const participationIdList = [1];\n+    const singleParticipantMode = false;\n+    const programmingExercise = new ProgrammingExercise(new Course(), undefined);\n+    programmingExercise.id = exerciseId;\n+    programmingExercise.releaseDate = moment();\n+    programmingExercise.dueDate = moment().add(7, 'days');\n+\n+    beforeEach(async () => {\n+        return TestBed.configureTestingModule({\n+            imports: [TranslateModule.forRoot(), ArtemisTestModule, ArtemisProgrammingAssessmentModule],\n+            providers: [\n+                ExerciseService,\n+                ProgrammingAssessmentRepoExportService,\n+                { provide: SessionStorageService, useClass: MockSyncStorage },\n+                { provide: LocalStorageService, useClass: MockSyncStorage },\n+            ],\n+        })\n+            .overrideModule(ArtemisTestModule, { set: { declarations: [], exports: [] } })\n+            .compileComponents()\n+            .then(() => {\n+                // Ignore console errors\n+                console.error = () => false;\n+                fixture = TestBed.createComponent(ProgrammingAssessmentRepoExportDialogComponent);\n+                comp = fixture.componentInstance;\n+                exerciseService = fixture.debugElement.injector.get(ExerciseService);\n+                repoExportService = fixture.debugElement.injector.get(ProgrammingAssessmentRepoExportService);\n+\n+                // stubs\n+                findExerciseId = stub(exerciseService, 'find').returns(of({ body: programmingExercise } as HttpResponse<Exercise>));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6908cd85d14c0b02c33ca323da1fc2f7493e7862"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMDA2ODA5OnYy", "diffSide": "RIGHT", "path": "src/test/javascript/spec/component/programming-assessment/programming-assessment-repo-export-dialog.component.spec.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjoxNzozOFrOIHCiXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjoxNzozOFrOIHCiXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI1MjUwOQ==", "bodyText": "Is it necessary to fakeAsync here (without tick etc.)?", "url": "https://github.com/ls1intum/Artemis/pull/2549#discussion_r544252509", "createdAt": "2020-12-16T12:17:38Z", "author": {"login": "FrankeLukas"}, "path": "src/test/javascript/spec/component/programming-assessment/programming-assessment-repo-export-dialog.component.spec.ts", "diffHunk": "@@ -0,0 +1,128 @@\n+import { ComponentFixture, TestBed, tick, fakeAsync } from '@angular/core/testing';\n+import { TranslateModule } from '@ngx-translate/core';\n+import * as chai from 'chai';\n+import * as sinonChai from 'sinon-chai';\n+import { SinonStub, stub } from 'sinon';\n+import { of } from 'rxjs';\n+import { HttpResponse, HttpHeaders } from '@angular/common/http';\n+import { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n+import * as moment from 'moment';\n+import { ArtemisTestModule } from '../../test.module';\n+import { ProgrammingAssessmentRepoExportDialogComponent } from 'app/exercises/programming/assess/repo-export/programming-assessment-repo-export-dialog.component';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+import { Course } from 'app/entities/course.model';\n+import { ExerciseService } from 'app/exercises/shared/exercise/exercise.service';\n+import { ProgrammingAssessmentRepoExportService } from 'app/exercises/programming/assess/repo-export/programming-assessment-repo-export.service';\n+import { ArtemisProgrammingAssessmentModule } from 'app/exercises/programming/assess/programming-assessment.module';\n+import { Exercise } from 'app/entities/exercise.model';\n+import { MockSyncStorage } from '../../helpers/mocks/service/mock-sync-storage.service';\n+\n+chai.use(sinonChai);\n+const expect = chai.expect;\n+\n+const createBlobHttpResponse = () => {\n+    const blob = new Blob([JSON.stringify({ property: 'blob' })], { type: 'application/json' });\n+    const headers = new HttpHeaders().set('filename', 'blobfile');\n+    return new HttpResponse({ body: blob, headers });\n+};\n+\n+describe('ProgrammingAssessmentRepoExportDialogComponent', () => {\n+    let comp: ProgrammingAssessmentRepoExportDialogComponent;\n+    let fixture: ComponentFixture<ProgrammingAssessmentRepoExportDialogComponent>;\n+    let exerciseService: ExerciseService;\n+    let repoExportService: ProgrammingAssessmentRepoExportService;\n+\n+    // stubs\n+    let findExerciseId: SinonStub;\n+    global.URL.createObjectURL = jest.fn(() => 'http://some.test.com');\n+    global.URL.revokeObjectURL = jest.fn(() => '');\n+\n+    const exerciseId = 42;\n+    const participationIdList = [1];\n+    const singleParticipantMode = false;\n+    const programmingExercise = new ProgrammingExercise(new Course(), undefined);\n+    programmingExercise.id = exerciseId;\n+    programmingExercise.releaseDate = moment();\n+    programmingExercise.dueDate = moment().add(7, 'days');\n+\n+    beforeEach(async () => {\n+        return TestBed.configureTestingModule({\n+            imports: [TranslateModule.forRoot(), ArtemisTestModule, ArtemisProgrammingAssessmentModule],\n+            providers: [\n+                ExerciseService,\n+                ProgrammingAssessmentRepoExportService,\n+                { provide: SessionStorageService, useClass: MockSyncStorage },\n+                { provide: LocalStorageService, useClass: MockSyncStorage },\n+            ],\n+        })\n+            .overrideModule(ArtemisTestModule, { set: { declarations: [], exports: [] } })\n+            .compileComponents()\n+            .then(() => {\n+                // Ignore console errors\n+                console.error = () => false;\n+                fixture = TestBed.createComponent(ProgrammingAssessmentRepoExportDialogComponent);\n+                comp = fixture.componentInstance;\n+                exerciseService = fixture.debugElement.injector.get(ExerciseService);\n+                repoExportService = fixture.debugElement.injector.get(ProgrammingAssessmentRepoExportService);\n+\n+                // stubs\n+                findExerciseId = stub(exerciseService, 'find').returns(of({ body: programmingExercise } as HttpResponse<Exercise>));\n+\n+                comp.exerciseId = exerciseId;\n+                comp.participationIdList = participationIdList;\n+                comp.singleParticipantMode = singleParticipantMode;\n+            });\n+    });\n+\n+    it('test initialization', () => {\n+        fixture.detectChanges();\n+        expect(comp.exerciseId).to.be.equal(42);\n+    });\n+\n+    it('Exerciseservice should find the correct programming exercise', fakeAsync(() => {\n+        fixture.detectChanges();\n+        expect(comp.exercise).to.be.equal(programmingExercise);\n+    }));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6908cd85d14c0b02c33ca323da1fc2f7493e7862"}, "originalPosition": 85}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4346, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}