{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NTc1NzY5", "number": 1552, "title": "Show reachable scores in course statistics and fix tooltips of scores", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\nCourse statistics show (relative) scores even though there are still pending results.\nDescription\nStatistics now show the absolute points, reachable points (where pending results are not included), and total points. Reachable and total include their respective relative scores. The total diagram on the left now also doesn't include exercises that haven't been assessed yet.\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to a Course Overview (prefereably one where the user has results for exercises)\nGo to Statistics\nCheck whether Your points, Reachable points and Total points display the correct numbers.\n-> in reachable included should be every task where there is a finished result, so assessed submissions and exercises not participated in.\n4.1 Check if points are correctly displayed on the tooltip of the bar chart.\nAdd new exercises with fitting due dates and assessment due dates.\nParticipate in those exercises and assess them (or not).\nRepeat step 4.\n\nTooltips of programming exercises were the main source of inconsistencies. Take an extra look if the tooltips are correct for those.\nScreenshots\n\n\nBefore:\n\nAfter:", "createdAt": "2020-06-02T13:13:22Z", "url": "https://github.com/ls1intum/Artemis/pull/1552", "merged": true, "mergeCommit": {"oid": "112417de81b1420817c33a8c87281948761f4b42"}, "closed": true, "closedAt": "2020-08-05T12:33:04Z", "author": {"login": "sjagla27"}, "timelineItems": {"totalCount": 53, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnCxX2AH2gAyNDI2NTc1NzY5OjdiY2IzMjA0NGExNjQyNDljNDQyMmViNTY4NmQ4NmFlMzhmM2UyNWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7pe6OgFqTQ2MDk5MTc2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7bcb32044a164249c4422eb5686d86ae38f3e25b", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/7bcb32044a164249c4422eb5686d86ae38f3e25b", "committedDate": "2020-06-01T16:22:52Z", "message": "show current scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f734b7775800ed67654b7c6aa3333bf665f0acc", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/5f734b7775800ed67654b7c6aa3333bf665f0acc", "committedDate": "2020-06-02T13:10:05Z", "message": "reachable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "357bd8aee3ecca944a089565bb8b47241518c800", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/357bd8aee3ecca944a089565bb8b47241518c800", "committedDate": "2020-06-02T13:23:58Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a187d62767da28e878089a57b485fd8610d7bd20", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/a187d62767da28e878089a57b485fd8610d7bd20", "committedDate": "2020-06-02T13:46:23Z", "message": "test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d000c2f6f8a66d377e9a3d9b3218de24b395fd67", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/d000c2f6f8a66d377e9a3d9b3218de24b395fd67", "committedDate": "2020-06-02T15:24:58Z", "message": "Merge branch 'develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8410ecade4e0ec56042471998264d65be415b4ac", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/8410ecade4e0ec56042471998264d65be415b4ac", "committedDate": "2020-06-06T16:18:32Z", "message": "Merge branch 'develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b595aa5265f00a3a38ddc997f079ec868983d93", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/0b595aa5265f00a3a38ddc997f079ec868983d93", "committedDate": "2020-06-06T23:19:51Z", "message": "include late submissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ceb4757ce053eccbe6a48b1d54fdc94961a7a3", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/d1ceb4757ce053eccbe6a48b1d54fdc94961a7a3", "committedDate": "2020-06-06T23:20:18Z", "message": "Merge remote-tracking branch 'origin/feature/course/current-scores' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae596f7a3996388e74ade23e061f5eaa8b313e0a", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/ae596f7a3996388e74ade23e061f5eaa8b313e0a", "committedDate": "2020-06-06T23:28:30Z", "message": "prettier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODA5NjQw", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-425809640", "createdAt": "2020-06-07T11:10:14Z", "commit": {"oid": "ae596f7a3996388e74ade23e061f5eaa8b313e0a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7524754508e9db8520050d9f37123befc710269b", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/7524754508e9db8520050d9f37123befc710269b", "committedDate": "2020-06-07T16:47:21Z", "message": "bar chart hover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5bb22bb6b54cba167f4616c11127842f0fe632c", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/a5bb22bb6b54cba167f4616c11127842f0fe632c", "committedDate": "2020-06-07T17:04:32Z", "message": "info buttons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "499b3c9024a28bc6974c1224a9dcd5ec92071991", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/499b3c9024a28bc6974c1224a9dcd5ec92071991", "committedDate": "2020-06-07T17:12:26Z", "message": "total score diagram"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "086a79c3652c92ad6c0a4e14b9f3330ae6ed39e0", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/086a79c3652c92ad6c0a4e14b9f3330ae6ed39e0", "committedDate": "2020-06-07T17:49:10Z", "message": "test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd0420fec5851150d182bd305443e009cff8466", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/2cd0420fec5851150d182bd305443e009cff8466", "committedDate": "2020-06-07T17:57:48Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff354ab03f9e31c66f8bbcf95b84a71877d6e7c1", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/ff354ab03f9e31c66f8bbcf95b84a71877d6e7c1", "committedDate": "2020-06-07T20:14:39Z", "message": "bar chart tooltips"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32f3d69abed7cadd9de8305a2630e45de8949b3b", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/32f3d69abed7cadd9de8305a2630e45de8949b3b", "committedDate": "2020-06-08T16:42:05Z", "message": "empty result string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ad81d730a973b5da328fca668c0ab6420c7091", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/71ad81d730a973b5da328fca668c0ab6420c7091", "committedDate": "2020-06-09T09:48:35Z", "message": "tooltip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a71aea24a9c62830be8f9830a00f8e176238954d", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/a71aea24a9c62830be8f9830a00f8e176238954d", "committedDate": "2020-06-09T10:12:04Z", "message": "Merge branch 'develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92c369aecdf6d522c5d022412f33bc6e422f6a56", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/92c369aecdf6d522c5d022412f33bc6e422f6a56", "committedDate": "2020-06-09T10:55:24Z", "message": "always include green and red"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d4f76eb3fbbb4ab0e02cf1f5525696ecd166247", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/3d4f76eb3fbbb4ab0e02cf1f5525696ecd166247", "committedDate": "2020-06-09T10:55:42Z", "message": "Merge remote-tracking branch 'origin/feature/course/current-scores' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ba570abab659fdc3f6b56438ac7ec772840a8f1", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/4ba570abab659fdc3f6b56438ac7ec772840a8f1", "committedDate": "2020-06-09T11:53:11Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af9611ef82b12f8ccda61873d96def6ac0e616d8", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/af9611ef82b12f8ccda61873d96def6ac0e616d8", "committedDate": "2020-06-16T07:58:48Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b11cda5cec5e312e880ca99bc46a25bc390eb867", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/b11cda5cec5e312e880ca99bc46a25bc390eb867", "committedDate": "2020-06-16T08:27:06Z", "message": "Merge branch 'develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "306a06e8e04e41be8e260f8e10e6a0573bfa394b", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/306a06e8e04e41be8e260f8e10e6a0573bfa394b", "committedDate": "2020-06-22T19:15:41Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "923ebaa4031a049aecb78c3f47505e5b659d2401", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/923ebaa4031a049aecb78c3f47505e5b659d2401", "committedDate": "2020-07-28T14:00:33Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4d611f0b69f41472b4d0754695b1eb780558072", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/d4d611f0b69f41472b4d0754695b1eb780558072", "committedDate": "2020-08-01T08:55:24Z", "message": "Merge remote-tracking branch 'origin/develop' into feature/course/current-scores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e13f16036d8df88075f28b7cc70c96601cd1d9ca", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/e13f16036d8df88075f28b7cc70c96601cd1d9ca", "committedDate": "2020-08-01T15:35:18Z", "message": "unused"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f22604da03b080a3dba7dbe794620fa95d44133", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/1f22604da03b080a3dba7dbe794620fa95d44133", "committedDate": "2020-08-01T15:46:37Z", "message": "removed old test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a0be70a130c468cbfe7728007ecc42366c2c98e", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/5a0be70a130c468cbfe7728007ecc42366c2c98e", "committedDate": "2020-08-01T19:49:34Z", "message": "adjust translation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31a5d5046dd3b8914b415a7746d81a4b665e296d", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/31a5d5046dd3b8914b415a7746d81a4b665e296d", "committedDate": "2020-08-03T08:01:57Z", "message": "dont show message twice"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5OTA4MjU0", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-459908254", "createdAt": "2020-08-03T10:09:35Z", "commit": {"oid": "31a5d5046dd3b8914b415a7746d81a4b665e296d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5OTE0Mzc1", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-459914375", "createdAt": "2020-08-03T10:19:52Z", "commit": {"oid": "31a5d5046dd3b8914b415a7746d81a4b665e296d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95ddff8bc8a8f4d80339e439885f3fa4498fe0a8", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/95ddff8bc8a8f4d80339e439885f3fa4498fe0a8", "committedDate": "2020-08-03T11:18:37Z", "message": "programming exercises are special"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49661695c27bf8d10eb936b229ef97c8e1176ae5", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/49661695c27bf8d10eb936b229ef97c8e1176ae5", "committedDate": "2020-08-03T11:19:57Z", "message": "diagram"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjA4MzY4", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460208368", "createdAt": "2020-08-03T17:28:48Z", "commit": {"oid": "49661695c27bf8d10eb936b229ef97c8e1176ae5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/d8a4f63ec5ea89d0d4961b038c58e985030420e0", "committedDate": "2020-08-03T18:01:40Z", "message": "addressed feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjYxMjY1", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460261265", "createdAt": "2020-08-03T18:47:51Z", "commit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjY4MjM1", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460268235", "createdAt": "2020-08-03T18:59:18Z", "commit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxODo1OToxOFrOG7FK0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxODo1OToxOFrOG7FK0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYwMzg1OQ==", "bodyText": "How do you handle programming exercises? I cant find a specific condition that match programming exercises?\nIt seems to work, I just could not figure out why, maybe you could add a comment for that?", "url": "https://github.com/ls1intum/Artemis/pull/1552#discussion_r464603859", "createdAt": "2020-08-03T18:59:18Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/overview/course-score-calculation.service.ts", "diffHunk": "@@ -36,8 +39,15 @@ export class CourseScoreCalculationService {\n                             score = 0;\n                         }\n                         absoluteScore = absoluteScore + score * this.SCORE_NORMALIZATION_VALUE * exercise.maxScore;\n+                        reachableScore += exercise.maxScore;\n                     }\n                     presentationScore += participation.presentationScore !== undefined ? participation.presentationScore : 0;\n+\n+                    if (participation.initializationState === InitializationState.INITIALIZED && exercise.type !== ExerciseType.PROGRAMMING) {\n+                        reachableScore += exercise.maxScore;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjcwMTc2", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460270176", "createdAt": "2020-08-03T19:02:33Z", "commit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOTowMjozM1rOG7FQxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOTowMjozM1rOG7FQxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYwNTM4MQ==", "bodyText": "Could you please document what split.length == 2/4 corresponds to (which exercisetype)?", "url": "https://github.com/ls1intum/Artemis/pull/1552#discussion_r464605381", "createdAt": "2020-08-03T19:02:33Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/overview/course-statistics/course-statistics.component.ts", "diffHunk": "@@ -343,28 +344,82 @@ export class CourseStatisticsComponent implements OnInit, OnDestroy {\n         return chartElement;\n     }\n \n-    // TODO: document the implementation of this method --> it is not really obvious\n-    // TODO: save the return value of this method in the result object (as temp variable) to avoid that this method is invoked all the time\n-    absoluteResult(result: Result): number | null {\n+    generateTooltip(result: Result, groupedExercise: any): void {\n         if (!result.resultString) {\n-            return 0;\n-        }\n-        if (result.resultString && result.resultString.indexOf('failed') !== -1) {\n-            return null;\n+            groupedExercise.scores.tooltips.push(\n+                this.translateService.instant('artemisApp.courseOverview.statistics.exerciseAchievedScore', {\n+                    points: 0,\n+                    percentage: 0,\n+                }),\n+            );\n+            groupedExercise.missedScores.tooltips.push(\n+                this.translateService.instant('artemisApp.courseOverview.statistics.exerciseMissedScore', {\n+                    points: '',\n+                    percentage: 100,\n+                }),\n+            );\n         }\n-        if (result.resultString && result.resultString.indexOf('passed') !== -1) {\n-            return null;\n+\n+        const replaced = result.resultString.replace(',', '.');\n+        const split = replaced.split(' ');\n+\n+        if (!replaced.includes('passed') && !replaced.includes('points')) {\n+            if (result.score >= 50) {\n+                groupedExercise.scores.tooltips.push(`${result.resultString} (${result.score}%)`);\n+                groupedExercise.missedScores.tooltips.push(`(${100 - result.score}%)`);\n+            } else {\n+                groupedExercise.scores.tooltips.push(`(${result.score}%)`);\n+                groupedExercise.missedScores.tooltips.push(`${result.resultString} (${100 - result.score}%)`);\n+            }\n+\n+            return;\n         }\n-        if (result.submission && result.submission.submissionExerciseType === SubmissionExerciseType.PROGRAMMING && (result.submission as ProgrammingSubmission).buildFailed) {\n-            return null;\n+\n+        if (replaced.includes('points')) {\n+            if (split.length === 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "originalPosition": 189}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjcwNDY2", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460270466", "createdAt": "2020-08-03T19:03:02Z", "commit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOTowMzowMlrOG7FRqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOTowMzowMlrOG7FRqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYwNTYxMA==", "bodyText": "Same as above.", "url": "https://github.com/ls1intum/Artemis/pull/1552#discussion_r464605610", "createdAt": "2020-08-03T19:03:02Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/overview/course-statistics/course-statistics.component.ts", "diffHunk": "@@ -343,28 +344,82 @@ export class CourseStatisticsComponent implements OnInit, OnDestroy {\n         return chartElement;\n     }\n \n-    // TODO: document the implementation of this method --> it is not really obvious\n-    // TODO: save the return value of this method in the result object (as temp variable) to avoid that this method is invoked all the time\n-    absoluteResult(result: Result): number | null {\n+    generateTooltip(result: Result, groupedExercise: any): void {\n         if (!result.resultString) {\n-            return 0;\n-        }\n-        if (result.resultString && result.resultString.indexOf('failed') !== -1) {\n-            return null;\n+            groupedExercise.scores.tooltips.push(\n+                this.translateService.instant('artemisApp.courseOverview.statistics.exerciseAchievedScore', {\n+                    points: 0,\n+                    percentage: 0,\n+                }),\n+            );\n+            groupedExercise.missedScores.tooltips.push(\n+                this.translateService.instant('artemisApp.courseOverview.statistics.exerciseMissedScore', {\n+                    points: '',\n+                    percentage: 100,\n+                }),\n+            );\n         }\n-        if (result.resultString && result.resultString.indexOf('passed') !== -1) {\n-            return null;\n+\n+        const replaced = result.resultString.replace(',', '.');\n+        const split = replaced.split(' ');\n+\n+        if (!replaced.includes('passed') && !replaced.includes('points')) {\n+            if (result.score >= 50) {\n+                groupedExercise.scores.tooltips.push(`${result.resultString} (${result.score}%)`);\n+                groupedExercise.missedScores.tooltips.push(`(${100 - result.score}%)`);\n+            } else {\n+                groupedExercise.scores.tooltips.push(`(${result.score}%)`);\n+                groupedExercise.missedScores.tooltips.push(`${result.resultString} (${100 - result.score}%)`);\n+            }\n+\n+            return;\n         }\n-        if (result.submission && result.submission.submissionExerciseType === SubmissionExerciseType.PROGRAMMING && (result.submission as ProgrammingSubmission).buildFailed) {\n-            return null;\n+\n+        if (replaced.includes('points')) {\n+            if (split.length === 2) {\n+                groupedExercise.scores.tooltips.push(\n+                    this.translateService.instant('artemisApp.courseOverview.statistics.exerciseAchievedScore', {\n+                        points: parseFloat(split[0]),\n+                        percentage: result.score,\n+                    }),\n+                );\n+                groupedExercise.missedScores.tooltips.push(\n+                    this.translateService.instant('artemisApp.courseOverview.statistics.exerciseMissedScore', {\n+                        points: '',\n+                        percentage: 100 - result.score,\n+                    }),\n+                );\n+                return;\n+            }\n+            if (split.length === 4) {\n+                groupedExercise.scores.tooltips.push(\n+                    this.translateService.instant('artemisApp.courseOverview.statistics.exerciseAchievedScore', {\n+                        points: parseFloat(split[0]),\n+                        percentage: result.score,\n+                    }),\n+                );\n+                groupedExercise.missedScores.tooltips.push(\n+                    this.translateService.instant('artemisApp.courseOverview.statistics.exerciseMissedScore', {\n+                        points: parseFloat(split[2]) - parseFloat(split[0]),\n+                        percentage: 100 - result.score,\n+                    }),\n+                );\n+                return;\n+            }\n         }\n-        if (result.resultString.indexOf('of') === -1) {\n-            if (result.resultString.indexOf('points') === -1) {\n-                return 0;\n+\n+        if (replaced.includes('passed')) {\n+            if (split.length === 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "originalPosition": 225}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjcxOTcy", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460271972", "createdAt": "2020-08-03T19:05:36Z", "commit": {"oid": "d8a4f63ec5ea89d0d4961b038c58e985030420e0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/250e1621dbaef22930ef32bdda9c1efd126e8d55", "committedDate": "2020-08-03T19:35:48Z", "message": "documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjk1Nzg0", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460295784", "createdAt": "2020-08-03T19:47:49Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzgxMzI2", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460381326", "createdAt": "2020-08-03T22:30:48Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMjozMDo0OFrOG7KyBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMjozNjo0MVrOG7K5gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY5NTgxNA==", "bodyText": "Why do you need all those constants? As far as I can see you you just assign them below to reachable scores?", "url": "https://github.com/ls1intum/Artemis/pull/1552#discussion_r464695814", "createdAt": "2020-08-03T22:30:48Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/course-statistics/course-statistics.component.ts", "diffHunk": "@@ -424,6 +482,38 @@ export class CourseStatisticsComponent implements OnInit, OnDestroy {\n         this.totalRelativeScore = this.calculateTotalScoreForTheCourse(RELATIVE_SCORE);\n     }\n \n+    calculateReachableScores() {\n+        const quizzesTotalCurrentMaxScore = this.calculateScoreTypeForExerciseType(ExerciseType.QUIZ, REACHABLE_SCORE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "originalPosition": 258}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY5NjE3Nw==", "bodyText": "Why do you need all those constants? As far as I can see you you just assign them below?", "url": "https://github.com/ls1intum/Artemis/pull/1552#discussion_r464696177", "createdAt": "2020-08-03T22:31:51Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/course-statistics/course-statistics.component.ts", "diffHunk": "@@ -424,6 +482,38 @@ export class CourseStatisticsComponent implements OnInit, OnDestroy {\n         this.totalRelativeScore = this.calculateTotalScoreForTheCourse(RELATIVE_SCORE);\n     }\n \n+    calculateReachableScores() {\n+        const quizzesTotalCurrentMaxScore = this.calculateScoreTypeForExerciseType(ExerciseType.QUIZ, REACHABLE_SCORE);\n+        const programmingExerciseTotalCurrentMaxScore = this.calculateScoreTypeForExerciseType(ExerciseType.PROGRAMMING, REACHABLE_SCORE);\n+        const modelingExerciseTotalCurrentMaxScore = this.calculateScoreTypeForExerciseType(ExerciseType.MODELING, REACHABLE_SCORE);\n+        const textExerciseTotalCurrentMaxScore = this.calculateScoreTypeForExerciseType(ExerciseType.TEXT, REACHABLE_SCORE);\n+        const fileUploadExerciseTotalCurrentMaxScore = this.calculateScoreTypeForExerciseType(ExerciseType.FILE_UPLOAD, REACHABLE_SCORE);\n+        const reachableScores = {};\n+        reachableScores[ExerciseType.QUIZ] = quizzesTotalCurrentMaxScore;\n+        reachableScores[ExerciseType.PROGRAMMING] = programmingExerciseTotalCurrentMaxScore;\n+        reachableScores[ExerciseType.MODELING] = modelingExerciseTotalCurrentMaxScore;\n+        reachableScores[ExerciseType.TEXT] = textExerciseTotalCurrentMaxScore;\n+        reachableScores[ExerciseType.FILE_UPLOAD] = fileUploadExerciseTotalCurrentMaxScore;\n+        this.reachableScores = reachableScores;\n+        this.reachableScore = this.calculateTotalScoreForTheCourse(REACHABLE_SCORE);\n+    }\n+\n+    calculateCurrentRelativeScores(): void {\n+        const quizzesCurrentRelativeScore = this.calculateScoreTypeForExerciseType(ExerciseType.QUIZ, CURRENT_RELATIVE_SCORE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "originalPosition": 274}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY5NzczMQ==", "bodyText": "I guess this is not in the scope of this ticket but I am unsure why we use a Map<string,number> here and export the keys in this complicated fashion.  Would something like\ninterface CourseScores { absoluteScore: number; relativeScore: number; } \nnot be much cleaner and more in the spirit of typescript?", "url": "https://github.com/ls1intum/Artemis/pull/1552#discussion_r464697731", "createdAt": "2020-08-03T22:36:41Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/course-score-calculation.service.ts", "diffHunk": "@@ -1,16 +1,18 @@\n import { Injectable } from '@angular/core';\n import { Result } from 'app/entities/result.model';\n import { Course } from 'app/entities/course.model';\n-import { Exercise } from 'app/entities/exercise.model';\n+import { Exercise, ExerciseType } from 'app/entities/exercise.model';\n import * as moment from 'moment';\n import { Moment } from 'moment';\n import { StudentParticipation } from 'app/entities/participation/student-participation.model';\n-import { Participation } from 'app/entities/participation/participation.model';\n+import { InitializationState, Participation } from 'app/entities/participation/participation.model';\n \n export const ABSOLUTE_SCORE = 'absoluteScore';\n export const RELATIVE_SCORE = 'relativeScore';\n export const MAX_SCORE = 'maxScore';\n export const PRESENTATION_SCORE = 'presentationScore';\n+export const REACHABLE_SCORE = 'reachableScore';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDAyMzA0", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460402304", "createdAt": "2020-08-03T23:31:01Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTI3NjAy", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460527602", "createdAt": "2020-08-04T06:26:27Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTU0MjU0", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460554254", "createdAt": "2020-08-04T07:16:37Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTU1MzM0", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460555334", "createdAt": "2020-08-04T07:18:25Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNzEwODA1", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460710805", "createdAt": "2020-08-04T11:02:53Z", "commit": {"oid": "250e1621dbaef22930ef32bdda9c1efd126e8d55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42ce0208d378d9e2b751fd105c977d988cde23c5", "author": {"user": {"login": "sjagla27", "name": "Sebastian Jagla"}}, "url": "https://github.com/ls1intum/Artemis/commit/42ce0208d378d9e2b751fd105c977d988cde23c5", "committedDate": "2020-08-04T16:09:23Z", "message": "Merge branch 'develop' into feature/course/current-scores"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTgwMzM5", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460980339", "createdAt": "2020-08-04T16:32:41Z", "commit": {"oid": "42ce0208d378d9e2b751fd105c977d988cde23c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTkxNzYw", "url": "https://github.com/ls1intum/Artemis/pull/1552#pullrequestreview-460991760", "createdAt": "2020-08-04T16:47:29Z", "commit": {"oid": "42ce0208d378d9e2b751fd105c977d988cde23c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2729, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}