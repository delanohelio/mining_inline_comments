{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzOTAzNDY3", "number": 2310, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMzo0NTowMVrOE1qbng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjoyMTozNlrOE3b50g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NzA1MTgyOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/course/manage/course-management.component.ts", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMzo0NTowMVrOHuD6RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjoyNjoxOFrOH0X1aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MDYxMg==", "bodyText": "Any reason for this just being a generic object? Maybe we could write a type here? Not really needed just a suggestion :)", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r518060612", "createdAt": "2020-11-05T13:45:01Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -24,6 +25,8 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n     showExamButton = true;\n \n     courses: Course[];\n+    courseSemesters: string[];\n+    semesterCollapsed: object;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5782f773aa56a64466a13f94bf1fb7414bce91b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA5ODczNw==", "bodyText": "I wasn't sure what to put as type there, so I oriented this on what was done in https://github.com/ls1intum/Artemis/blob/develop/src/main/webapp/app/overview/course-exercises/course-exercises.component.ts#L46", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r518098737", "createdAt": "2020-11-05T14:36:56Z", "author": {"login": "FrankeLukas"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -24,6 +25,8 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n     showExamButton = true;\n \n     courses: Course[];\n+    courseSemesters: string[];\n+    semesterCollapsed: object;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MDYxMg=="}, "originalCommit": {"oid": "f5782f773aa56a64466a13f94bf1fb7414bce91b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY3ODUwNw==", "bodyText": "This should do:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                semesterCollapsed: object;\n          \n          \n            \n                semesterCollapsed: { [key:string]: boolean; };\n          \n      \n    \n    \n  \n\nOR: Consider using the TypeScript Map instead.", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r524678507", "createdAt": "2020-11-16T22:26:18Z", "author": {"login": "jpbernius"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -24,6 +25,8 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n     showExamButton = true;\n \n     courses: Course[];\n+    courseSemesters: string[];\n+    semesterCollapsed: object;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MDYxMg=="}, "originalCommit": {"oid": "f5782f773aa56a64466a13f94bf1fb7414bce91b"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTU1ODY3OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/course/manage/course-management.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMTo1NToyOVrOHwxIfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwOTowNTo0MlrOHymLGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5ODY4NA==", "bodyText": "Would this be a good candidate for a compareBySemester function in Course? This would also make this more compact.", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r520898684", "createdAt": "2020-11-10T21:55:29Z", "author": {"login": "MaisiKoleni"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {\n+                        if (a === '') {\n+                            return 1;\n+                        }\n+                        if (b === '') {\n+                            return -1;\n+                        }\n+                        const yearsCompared = parseInt(b.substr(2, 2), 10) - parseInt(a.substr(2, 2), 10);\n+                        if (yearsCompared !== 0) {\n+                            return yearsCompared;\n+                        }\n+                        // if years are the same, sort WS over SS\n+                        return a.substr(0, 2) === 'WS' ? -1 : 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1bed861880d8a19af27f84ec0540a79e84802e9"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgxNjI4Mw==", "bodyText": "The problem is that we're already sorting over string values, not courses, so I cannot directly use a compare function on Course. Changing this to compare courses would be possible, but imo not ideal. The string values are already filtered, i.e. we're only dealing with a few distinct semester tags, which is better for performance than sorting over the entire courses list.", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r522816283", "createdAt": "2020-11-13T09:05:42Z", "author": {"login": "FrankeLukas"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {\n+                        if (a === '') {\n+                            return 1;\n+                        }\n+                        if (b === '') {\n+                            return -1;\n+                        }\n+                        const yearsCompared = parseInt(b.substr(2, 2), 10) - parseInt(a.substr(2, 2), 10);\n+                        if (yearsCompared !== 0) {\n+                            return yearsCompared;\n+                        }\n+                        // if years are the same, sort WS over SS\n+                        return a.substr(0, 2) === 'WS' ? -1 : 1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5ODY4NA=="}, "originalCommit": {"oid": "a1bed861880d8a19af27f84ec0540a79e84802e9"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTY0MzA2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/course/manage/course-management.component.ts", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjoyMTozNlrOHwx6mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwOTowOTowMlrOHymRxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTUxNQ==", "bodyText": "Maybe you can use here also orderBy from lodash see https://lodash.com/docs/4.17.15#orderBy", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r520911515", "createdAt": "2020-11-10T22:21:36Z", "author": {"login": "fde312"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1bed861880d8a19af27f84ec0540a79e84802e9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTczOQ==", "bodyText": "And a bit more docu which magic you are doing would be good :D", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r520911739", "createdAt": "2020-11-10T22:22:06Z", "author": {"login": "fde312"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTUxNQ=="}, "originalCommit": {"oid": "a1bed861880d8a19af27f84ec0540a79e84802e9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgxNzk5MQ==", "bodyText": "Added comments and renamed a few variables so it is hopefully more clear. Regarding orderBy: I don't know how to get that to work in this case because of our special cases (unset semester after all, and WS > SS when the years are equal).", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r522817991", "createdAt": "2020-11-13T09:09:02Z", "author": {"login": "FrankeLukas"}, "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTUxNQ=="}, "originalCommit": {"oid": "a1bed861880d8a19af27f84ec0540a79e84802e9"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4390, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}