{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNTcwNjQ2", "number": 1718, "title": "[Exam] Enable code editor offline mode", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I documented the Java code using JavaDoc style.\n Client: I documented the TypeScript code using JSDoc style.\n\nMotivation and Context\nFor the exam mode, the online code editor should also remain functional if the user loses his connection temporally.\nDescription\n\nLoad repository files for exam programming exercises with online code editor enabled when the StudentExam is retrieved from the server\nStore the participation with files in the CodeEditorFileService\nIntroduce online/offline state\nCreate wrapper checking the online/offline state. Use the server if online, otherwise use a fallback. Use the wrapper for all file operations.\nStore file operations in the participations\nApply changes on the server, else sync the changes on reconnect\n\nKnown Limitation: After going offline and changing the files, once you switch to another exercise and then return, the code editor falsely indicates that your files were saved on the server. We for this PR this should be ok, but it should be fixed in a follow up PR\nBugfix\n\n Exercise participation not being initialized correctly due to a LazyLoadingException being thrown when first initialising the StudentParticipation.\n\nSteps for Testing\n\nEnsure that the normal code editor works\n\nParticipate in a programming exercise with online code editor enabled\nCreate, rename, delete, edit files. Saved them and commit them.\n--> Everything should work as usual\n\nEnsure that the code editor works in exam mode if offline\nEasier to test this on the test server\n\nCreate a new exam with two programming exercises with code editor enabled. Add students, generate the student exams and participations.\nStart the exam\nDisconnect from the internet (if you test locally, stop the server or check if your browser has an offline mode e.g. chrome -> dev tools -> network tab -> change to offline)\nCreate, rename, delete, edit files. Switch to the other exercise. Do the same there.\n--> Files and their content should be displayed correctly at all times\nOn reconnect, all requests should be sent to the server. Verify this by reloading the page a few seconds after the connection has been established again. All files should be displayed correctly.", "createdAt": "2020-06-26T12:56:38Z", "url": "https://github.com/ls1intum/Artemis/pull/1718", "merged": true, "mergeCommit": {"oid": "b2b21cd5296520c28b00efcf2fdd55da1f715131"}, "closed": true, "closedAt": "2020-06-28T23:08:20Z", "author": {"login": "kloessst"}, "timelineItems": {"totalCount": 69, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvACPNAH2gAyNDQwNTcwNjQ2OjZhOWZkYjhkNzRlZGU4Y2UwZDZhM2VmYzEyYjlkNWVhMjYzMDM3OTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcv0v_IAFqTQzODgyMTIyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a9fdb8d74ede8ce0d6a3efc12b9d5ea26303793", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/6a9fdb8d74ede8ce0d6a3efc12b9d5ea26303793", "committedDate": "2020-06-26T09:42:58Z", "message": "add TODOs for the discussed implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94f80342eae74dfd466220afe24e1ec7c3102a56", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/94f80342eae74dfd466220afe24e1ec7c3102a56", "committedDate": "2020-06-26T12:54:07Z", "message": "Load programming exercise repository files and send them with the student exam."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6313da56b0e6d40f494dc2fd54aad1d01e1f5d9b", "author": {"user": {"login": "anditurdiu", "name": "Andi Turdiu"}}, "url": "https://github.com/ls1intum/Artemis/commit/6313da56b0e6d40f494dc2fd54aad1d01e1f5d9b", "committedDate": "2020-06-26T14:03:12Z", "message": "Merge branch 'develop' into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceaa9b24895a208f4080184e77227ab6a0e56ed6", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/ceaa9b24895a208f4080184e77227ab6a0e56ed6", "committedDate": "2020-06-26T14:05:08Z", "message": "Only try to get file content for real files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c16b0d97410495b25e194e1cc3e94ede69144c", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/70c16b0d97410495b25e194e1cc3e94ede69144c", "committedDate": "2020-06-26T14:05:32Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5a5b9ffb957e88e3262e11d8e342ab5cea0e50f", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d5a5b9ffb957e88e3262e11d8e342ab5cea0e50f", "committedDate": "2020-06-26T14:43:32Z", "message": "Add model for repository files for client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60f784267bb919f153286ec4e8414ecbbe6810fa", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/60f784267bb919f153286ec4e8414ecbbe6810fa", "committedDate": "2020-06-26T15:03:33Z", "message": "Add distinction between the automatic interval save & change exercise / submit save"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d142a46350bbeec72ead701bf0f3678b0aecacca", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d142a46350bbeec72ead701bf0f3678b0aecacca", "committedDate": "2020-06-26T16:27:36Z", "message": "Load participations into fileRepositoryService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a265d0dd0708189e18b1597d4def3ad2e880255", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3a265d0dd0708189e18b1597d4def3ad2e880255", "committedDate": "2020-06-26T16:28:26Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5846e51907ef39ed72ab74ffbafab1c6fe6fc8e5", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/5846e51907ef39ed72ab74ffbafab1c6fe6fc8e5", "committedDate": "2020-06-26T18:37:17Z", "message": "getRepositoryContent for offline code editor support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "200de24f2d68a933cfa032a0122916854d3d3958", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/200de24f2d68a933cfa032a0122916854d3d3958", "committedDate": "2020-06-27T16:34:12Z", "message": "Show files on the file browser in offline mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b907d363856370036240b365eaf5075e1d5e873", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/9b907d363856370036240b365eaf5075e1d5e873", "committedDate": "2020-06-27T18:34:42Z", "message": "add offline fallback handlers to code-editor-repository service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86943f6206ab0790bd7246e6805b8ece21b63082", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/86943f6206ab0790bd7246e6805b8ece21b63082", "committedDate": "2020-06-28T06:53:53Z", "message": "revert method renaming getFile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41de3b02f0c1750f4301ea1de104831e32c3e2f8", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/41de3b02f0c1750f4301ea1de104831e32c3e2f8", "committedDate": "2020-06-28T07:07:57Z", "message": "wiring of disconnected property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fa9e081c677dd22e86c9562bfe9233db94e22c0", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7fa9e081c677dd22e86c9562bfe9233db94e22c0", "committedDate": "2020-06-28T07:38:46Z", "message": "use websocket events for online detection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47439cc564828ff58400c226a45185791a5187d6", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/47439cc564828ff58400c226a45185791a5187d6", "committedDate": "2020-06-28T08:02:52Z", "message": "load file content"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9ecfe9691073b2eb36ce41be169b4931e2c01e0", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/c9ecfe9691073b2eb36ce41be169b4931e2c01e0", "committedDate": "2020-06-28T08:30:01Z", "message": "fix no participation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d13cc2181caf7239f825b3e43d547cd85a8e0401", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d13cc2181caf7239f825b3e43d547cd85a8e0401", "committedDate": "2020-06-28T08:30:55Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "756fdbf4704c6bf5990847cd8900ece2fc4fa686", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/756fdbf4704c6bf5990847cd8900ece2fc4fa686", "committedDate": "2020-06-28T08:45:15Z", "message": "create sync handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07d8e843d1c50c6a0f7230b1269c860b77b3fa24", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/07d8e843d1c50c6a0f7230b1269c860b77b3fa24", "committedDate": "2020-06-28T08:56:30Z", "message": "Fix create file fallback response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f6137d8f0556646f69c87cce662d13f654f6f9b", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/7f6137d8f0556646f69c87cce662d13f654f6f9b", "committedDate": "2020-06-28T09:27:01Z", "message": "fix javadoc comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8ac2437a61c7787587bd894493f466ba9ebfae7", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a8ac2437a61c7787587bd894493f466ba9ebfae7", "committedDate": "2020-06-28T09:31:08Z", "message": "empty fallback fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2859bc2aa1c0d6d669f3145b958256e430365d6b", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2859bc2aa1c0d6d669f3145b958256e430365d6b", "committedDate": "2020-06-28T09:34:59Z", "message": "schedule file requests when offline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a01fccdb5ed7d0daff79e4544304f611a10ba5de", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/a01fccdb5ed7d0daff79e4544304f611a10ba5de", "committedDate": "2020-06-28T09:41:10Z", "message": "revert change fallback signature"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa55b67d5e6eb4bd680af410173ff4986caef46d", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/aa55b67d5e6eb4bd680af410173ff4986caef46d", "committedDate": "2020-06-28T09:42:10Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-domain-dependent-endpoint.service.ts\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-repository.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b69a8f0c5210e0952cfec716eaa6f5960f08b27", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/6b69a8f0c5210e0952cfec716eaa6f5960f08b27", "committedDate": "2020-06-28T09:48:58Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-domain-dependent-endpoint.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb9672972ce53b1217055b81e877dd1681fe0e24", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/bb9672972ce53b1217055b81e877dd1681fe0e24", "committedDate": "2020-06-28T09:50:50Z", "message": "fix method signatures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a27bb0eae86b417299701f3087b528bd9dc1d8ee", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/a27bb0eae86b417299701f3087b528bd9dc1d8ee", "committedDate": "2020-06-28T09:52:56Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-repository.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10db9e0c55b1f15ad8186e86dce8d2ed3f73423c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/10db9e0c55b1f15ad8186e86dce8d2ed3f73423c", "committedDate": "2020-06-28T10:25:57Z", "message": "remove redundant call to load file content"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d696592284ceef9d829ddab04e9fbd6859f1500", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2d696592284ceef9d829ddab04e9fbd6859f1500", "committedDate": "2020-06-28T10:45:36Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of github.com:ls1intum/Artemis into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-cover/exam-participation-cover.component.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "699eda0f5cf776d3a9af231bb462e47edab392ee", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/699eda0f5cf776d3a9af231bb462e47edab392ee", "committedDate": "2020-06-28T11:16:09Z", "message": "Only check for participation id when adding a new one to the service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b04e877be92dd5dc39cde731964912823e6c8624", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/b04e877be92dd5dc39cde731964912823e6c8624", "committedDate": "2020-06-28T13:18:32Z", "message": "Show alerts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d091d161823249cb99f408eea18ce9386f42314", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/6d091d161823249cb99f408eea18ce9386f42314", "committedDate": "2020-06-28T13:35:47Z", "message": "Fix participation creation for programming exercises\nThe templateParticipation was not loaded and threw a lazyException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bec8cab00de5fe2df94c208117597f66028ccbe", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/4bec8cab00de5fe2df94c208117597f66028ccbe", "committedDate": "2020-06-28T14:28:44Z", "message": "Save file content into participations if offline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8602940bbaf3c02a46996b4f9a6657a1105328ab", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8602940bbaf3c02a46996b4f9a6657a1105328ab", "committedDate": "2020-06-28T14:29:58Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of github.com:ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a3789a503bd3cfef9bad261fe1da45690030a00", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2a3789a503bd3cfef9bad261fe1da45690030a00", "committedDate": "2020-06-28T14:46:48Z", "message": "linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2320518c2cb04f13c046e293bfc9a24ebf1e70b4", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2320518c2cb04f13c046e293bfc9a24ebf1e70b4", "committedDate": "2020-06-28T15:18:42Z", "message": "save locally feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42f77e343957b13ad30db9cbc3c6367b57f5d3d9", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/42f77e343957b13ad30db9cbc3c6367b57f5d3d9", "committedDate": "2020-06-28T15:20:28Z", "message": "add Feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34690d1a93f96c4cfaf1ae489a4c2b7487d12e0e", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/34690d1a93f96c4cfaf1ae489a4c2b7487d12e0e", "committedDate": "2020-06-28T15:22:56Z", "message": "fix merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b86a13b10b0a5dd818d778c44a4b446829953a6a", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/b86a13b10b0a5dd818d778c44a4b446829953a6a", "committedDate": "2020-06-28T15:24:45Z", "message": "remove local file submission"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44daef3827cb0cd069e5ec7ed086acc4c9ffb57d", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/44daef3827cb0cd069e5ec7ed086acc4c9ffb57d", "committedDate": "2020-06-28T15:26:34Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-repository.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc63bd686bc24141d6a534778526f6b5e9c9700a", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/cc63bd686bc24141d6a534778526f6b5e9c9700a", "committedDate": "2020-06-28T15:43:43Z", "message": "revert new code editor state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8c85d59ad6bcb72ed1c52cfd5532ed08c547259", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/d8c85d59ad6bcb72ed1c52cfd5532ed08c547259", "committedDate": "2020-06-28T15:46:41Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of github.com:ls1intum/Artemis into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-repository.service.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9ce1e8e4fb26646c05857aa02ee7932942d20bc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/b9ce1e8e4fb26646c05857aa02ee7932942d20bc", "committedDate": "2020-06-28T16:27:29Z", "message": "move the unsynched array into the participation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b9edbb7bea2d9429eb7a8bd772c5c829bb81ff1", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/4b9edbb7bea2d9429eb7a8bd772c5c829bb81ff1", "committedDate": "2020-06-28T16:36:23Z", "message": "Fix delete file for offline mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5e6ecd15423e5cebbc96c60d65e1e3e085d8dad", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/d5e6ecd15423e5cebbc96c60d65e1e3e085d8dad", "committedDate": "2020-06-28T16:37:37Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c225a82987a8878a34ee51d56ba22ed74411a294", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/c225a82987a8878a34ee51d56ba22ed74411a294", "committedDate": "2020-06-28T17:06:33Z", "message": "display correct status of unsynched files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6455f85b302ffcb5a1b13a823f18872cd73e2e5b", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/6455f85b302ffcb5a1b13a823f18872cd73e2e5b", "committedDate": "2020-06-28T17:07:06Z", "message": "Merge branch 'develop' into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3be5425199477339112fd8365273c2eb8e3a0be8", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/3be5425199477339112fd8365273c2eb8e3a0be8", "committedDate": "2020-06-28T17:12:47Z", "message": "Fix rename file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "496402acdac15da41d826a2ca94c3c0c5d3832a1", "author": {"user": {"login": "kloessst", "name": "Stefan Kl\u00f6ss-Schuster"}}, "url": "https://github.com/ls1intum/Artemis/commit/496402acdac15da41d826a2ca94c3c0c5d3832a1", "committedDate": "2020-06-28T17:13:00Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e0a3d62b044af81b010ac3508c77b4db236ec7c", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/3e0a3d62b044af81b010ac3508c77b4db236ec7c", "committedDate": "2020-06-28T17:20:32Z", "message": "move unsynched files check to onInit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aacae2fc8e6f7e04720c666f30c3d9e7481612e3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/aacae2fc8e6f7e04720c666f30c3d9e7481612e3", "committedDate": "2020-06-28T17:21:01Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03fa6cba225591db98f69c370645b914e778f268", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/03fa6cba225591db98f69c370645b914e778f268", "committedDate": "2020-06-28T17:55:02Z", "message": "fix undefined error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79ac220372d839d63f22d0b5d4f02cb21e4a4fb7", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/79ac220372d839d63f22d0b5d4f02cb21e4a4fb7", "committedDate": "2020-06-28T18:17:30Z", "message": "fix undefined unsynchedFiles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8c609c4e074155623399f3c3b383f7e20239396", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/f8c609c4e074155623399f3c3b383f7e20239396", "committedDate": "2020-06-28T19:03:38Z", "message": "fix participation reference in domain service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58c9bcb0efacf356ca2c209852023ab72dd96dd1", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/58c9bcb0efacf356ca2c209852023ab72dd96dd1", "committedDate": "2020-06-28T19:10:29Z", "message": "prettier & linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43f69241a358193b2568a276af835aa1fc382827", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/43f69241a358193b2568a276af835aa1fc382827", "committedDate": "2020-06-28T19:29:33Z", "message": "delete file in-place"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c1c856fa73248460b2538715074588b0009422c", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/7c1c856fa73248460b2538715074588b0009422c", "committedDate": "2020-06-28T19:30:23Z", "message": "reassign participation to domain to keep unsynched files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f18f20d01320f21a5e98e29ded03c245236dcd34", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/f18f20d01320f21a5e98e29ded03c245236dcd34", "committedDate": "2020-06-28T19:31:36Z", "message": "merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2c4df9fe907c8698ab0617f1c3292664d9345a4", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/d2c4df9fe907c8698ab0617f1c3292664d9345a4", "committedDate": "2020-06-28T19:52:56Z", "message": "fix participation assignment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee268409f367063553612efdb78cedfd9c37dc65", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/ee268409f367063553612efdb78cedfd9c37dc65", "committedDate": "2020-06-28T19:53:11Z", "message": "Merge branch 'feature/programming-exercises-offline-mode' of https://github.com/ls1intum/Artemis into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "807bfbf805a68198a9cced2d19cf25b0f8f38791", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/807bfbf805a68198a9cced2d19cf25b0f8f38791", "committedDate": "2020-06-28T20:10:36Z", "message": "make unsynchedFiles changes in-place"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb1c1b1838efce62b777487fcf97537f52a584be", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/cb1c1b1838efce62b777487fcf97537f52a584be", "committedDate": "2020-06-28T20:26:05Z", "message": "fix code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1d5d66437445138d626160e0006f736396c9578", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/b1d5d66437445138d626160e0006f736396c9578", "committedDate": "2020-06-28T21:37:57Z", "message": "Merge branch 'develop' into feature/programming-exercises-offline-mode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODE2MTc0", "url": "https://github.com/ls1intum/Artemis/pull/1718#pullrequestreview-438816174", "createdAt": "2020-06-28T21:50:19Z", "commit": {"oid": "b1d5d66437445138d626160e0006f736396c9578"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMTo1MDoxOVrOGqAjrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMTo1MDoxOVrOGqAjrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwMjUwOQ==", "bodyText": "This makes sense for me, good work! \ud83d\udc4d", "url": "https://github.com/ls1intum/Artemis/pull/1718#discussion_r446702509", "createdAt": "2020-06-28T21:50:19Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "diffHunk": "@@ -29,31 +31,30 @@ export class ProgrammingExamSubmissionComponent extends ExamSubmissionComponent\n     readonly ButtonSize = ButtonSize;\n \n     hasUnsavedChanges(): boolean {\n-        if (this.isNotOfflineIdeMode()) {\n+        if (this.exercise.allowOfflineIde && !this.exercise.allowOnlineEditor) {\n             return false;\n         }\n         return this.codeEditorComponent.editorState === EditorState.UNSAVED_CHANGES;\n     }\n \n     // eslint-disable-next-line @typescript-eslint/no-unused-vars\n     ngOnChanges(changes: SimpleChanges): void {\n-        if (!this.isNotOfflineIdeMode()) {\n+        if (this.exercise.allowOnlineEditor) {\n             // show submission answers in UI\n         }\n     }\n \n     ngOnInit(): void {}\n \n-    isNotOfflineIdeMode(): boolean {\n-        return this.exercise.allowOfflineIde && !this.exercise.allowOnlineEditor;\n-    }\n-\n-    isOnlyCodeEditorMode(): boolean {\n-        return !this.exercise.allowOfflineIde && this.exercise.allowOnlineEditor;\n-    }\n-\n-    updateSubmissionFromView(): void {\n-        // Saves the changed files but does not commit the changes, as this would trigger a CI run\n-        this.codeEditorComponent.actions.commit();\n+    updateSubmissionFromView(intervalSave: boolean): void {\n+        if (this.exercise.allowOnlineEditor) {\n+            if (intervalSave) {\n+                // The 60s auto save should only save and NOT commit the files, as this would trigger a CI run. Just save the files", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1d5d66437445138d626160e0006f736396c9578"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODE2NDU4", "url": "https://github.com/ls1intum/Artemis/pull/1718#pullrequestreview-438816458", "createdAt": "2020-06-28T21:54:20Z", "commit": {"oid": "b1d5d66437445138d626160e0006f736396c9578"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMTo1NDoyMFrOGqAlHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMTo1NDoyMFrOGqAlHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwMjg3Ng==", "bodyText": "How should we handle HTTP Error 502 (Bad Gateway) here? It will be returned if the load balancer/proxy cannot reach Artemis.", "url": "https://github.com/ls1intum/Artemis/pull/1718#discussion_r446702876", "createdAt": "2020-06-28T21:54:20Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-repository.service.ts", "diffHunk": "@@ -58,6 +61,10 @@ const handleErrorResponse = <T>(conflictService: CodeEditorConflictStateService)\n             if (err.status === 409) {\n                 conflictService.notifyConflictState(GitConflictState.CHECKOUT_CONFLICT);\n             }\n+            // If we receive a timeout error, return ok and sync later\n+            if (err.status === 504) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1d5d66437445138d626160e0006f736396c9578"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e93f8fa66d11c0de37bf99b5163a9bd352eb206", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/1e93f8fa66d11c0de37bf99b5163a9bd352eb206", "committedDate": "2020-06-28T22:04:34Z", "message": "Merge branch 'develop' into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cb6fb08c68e49b0330808bf5493a2871d81f1bc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/9cb6fb08c68e49b0330808bf5493a2871d81f1bc", "committedDate": "2020-06-28T22:51:53Z", "message": "Merge branch 'develop' into feature/programming-exercises-offline-mode\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-cover/exam-participation-cover.component.ts\n\nalso fix warnings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODIxMjI4", "url": "https://github.com/ls1intum/Artemis/pull/1718#pullrequestreview-438821228", "createdAt": "2020-06-28T23:08:00Z", "commit": {"oid": "9cb6fb08c68e49b0330808bf5493a2871d81f1bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2532, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}