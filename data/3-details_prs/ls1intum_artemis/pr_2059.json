{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNDkyNzgw", "number": 2059, "title": "Adapted quiz statistics bar labels to the behaviour of exam scores", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nRequested by @krusche\nDescription\n\nThe code for placing the labels on the bar charts of the various quiz statistics was different from the one used in the exam scores modules. It was decided to adopt the exam scores code for the quiz statistics to create a uniform codebase.\nSteps for Testing\n\n\nLog in to Artemis\nNavigate to Course Administration\nCreate Quizzes, Participate in Quizzes\nCheck the various statistics available for quizzes for correct display(reachable under statistics in the exercise submenu)\n\n\nScreenshots", "createdAt": "2020-08-25T21:20:43Z", "url": "https://github.com/ls1intum/Artemis/pull/2059", "merged": true, "mergeCommit": {"oid": "bfbe74f4ab30e094344c891bdcbcc4d3e7a90c89"}, "closed": true, "closedAt": "2020-09-24T08:09:38Z", "author": {"login": "stefanwaldhauser"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCd9AdAH2gAyNDczNDkyNzgwOjhlODE5YjAzZGQzYmM2ODRmZjEwZGFjNDE4NTFiZTJkMmVkODU5OTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdL8pIdAFqTQ5NTMyMDI5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/8e819b03dd3bc684ff10dac41851be2d2ed85995", "committedDate": "2020-08-25T21:18:58Z", "message": "Adapted quiz statistics bar labels to the behaviour of exam scores"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTQ1MTgw", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-476945180", "createdAt": "2020-08-27T17:42:29Z", "commit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzo0MjozMFrOHIaxCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzo0MjozMFrOHIaxCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4OTE5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        dataSetProvider.getDataSets().forEach(function (dataset: DataSet, i: number) {\n          \n          \n            \n                        dataSetProvider.getDataSets().forEach((dataset: DataSet, i: number) =>  {", "url": "https://github.com/ls1intum/Artemis/pull/2059#discussion_r478589195", "createdAt": "2020-08-27T17:42:30Z", "author": {"login": "TobiasPr"}, "path": "src/main/webapp/app/exercises/quiz/manage/statistics/quiz-statistic/quiz-statistic.component.ts", "diffHunk": "@@ -79,52 +80,21 @@ export function createAnimation(dataSetProvider: DataSetProvider): ChartAnimatio\n     return {\n         duration: 500,\n         onComplete: (chartElement: ChartElement) => {\n-            const chart = chartElement.chart;\n-            const ctx = chart.ctx!;\n-            const fontSize = 12;\n-            const fontStyle = 'normal';\n-            const fontFamily = 'Arial';\n-            ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);\n-            ctx.textAlign = 'center';\n-            ctx.textBaseline = 'middle';\n+            const chartInstance = chartElement.chart,\n+                ctx = chartInstance.ctx!;\n \n+            ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\n+            ctx.textAlign = 'center';\n+            ctx.textBaseline = 'bottom';\n             const participants = dataSetProvider.getParticipants();\n-            dataSetProvider.getDataSets().forEach((dataset, i) => {\n-                const meta = chart.getDatasetMeta(i);\n-                meta.data.forEach((bar: any, index) => {\n+\n+            dataSetProvider.getDataSets().forEach(function (dataset: DataSet, i: number) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTQ2Mzg5", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-476946389", "createdAt": "2020-08-27T17:44:02Z", "commit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzo0NDowMlrOHIa0sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzo0NDowMlrOHIa0sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU5MDEzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            meta.data.forEach(function (bar: any, index: number) {\n          \n          \n            \n                            meta.data.forEach((bar: any, index: number) => {", "url": "https://github.com/ls1intum/Artemis/pull/2059#discussion_r478590131", "createdAt": "2020-08-27T17:44:02Z", "author": {"login": "TobiasPr"}, "path": "src/main/webapp/app/exercises/quiz/manage/statistics/quiz-statistic/quiz-statistic.component.ts", "diffHunk": "@@ -79,52 +80,21 @@ export function createAnimation(dataSetProvider: DataSetProvider): ChartAnimatio\n     return {\n         duration: 500,\n         onComplete: (chartElement: ChartElement) => {\n-            const chart = chartElement.chart;\n-            const ctx = chart.ctx!;\n-            const fontSize = 12;\n-            const fontStyle = 'normal';\n-            const fontFamily = 'Arial';\n-            ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);\n-            ctx.textAlign = 'center';\n-            ctx.textBaseline = 'middle';\n+            const chartInstance = chartElement.chart,\n+                ctx = chartInstance.ctx!;\n \n+            ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\n+            ctx.textAlign = 'center';\n+            ctx.textBaseline = 'bottom';\n             const participants = dataSetProvider.getParticipants();\n-            dataSetProvider.getDataSets().forEach((dataset, i) => {\n-                const meta = chart.getDatasetMeta(i);\n-                meta.data.forEach((bar: any, index) => {\n+\n+            dataSetProvider.getDataSets().forEach(function (dataset: DataSet, i: number) {\n+                const meta = chartInstance.getDatasetMeta(i);\n+                meta.data.forEach(function (bar: any, index: number) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTQ5MTg4", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-476949188", "createdAt": "2020-08-27T17:47:57Z", "commit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzo0Nzo1N1rOHIa8_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzo0Nzo1N1rOHIa8_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU5MjI1Mg==", "bodyText": "what are you doing here, can't we jsut do Math.max(...data) (do we need the const merged = [].concat.apply([],data))", "url": "https://github.com/ls1intum/Artemis/pull/2059#discussion_r478592252", "createdAt": "2020-08-27T17:47:57Z", "author": {"login": "TobiasPr"}, "path": "src/main/webapp/app/exercises/quiz/manage/statistics/quiz-statistic/quiz-statistic.component.ts", "diffHunk": "@@ -136,6 +106,15 @@ export interface DataSetProvider {\n     getParticipants(): number;\n }\n \n+export function calculateTickMax(datasetProvider: DataSetProvider) {\n+    const data = datasetProvider.getDataSets().map((dataset) => {\n+        return dataset.data;\n+    });\n+    const merged = [].concat.apply([], data);\n+    const max = Math.max(...merged);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e819b03dd3bc684ff10dac41851be2d2ed85995"}, "originalPosition": 93}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1438606f39cce1a37cd8c2466ec31f6d52206964", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/1438606f39cce1a37cd8c2466ec31f6d52206964", "committedDate": "2020-08-27T20:31:18Z", "message": "Merge branch 'develop' into change-quiz-bar-chart-label"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTUzMjAw", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-477153200", "createdAt": "2020-08-27T23:41:18Z", "commit": {"oid": "1438606f39cce1a37cd8c2466ec31f6d52206964"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d154f39d04c587ec30d977a2b6121f2a6f52acb0", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/d154f39d04c587ec30d977a2b6121f2a6f52acb0", "committedDate": "2020-08-28T08:03:19Z", "message": "Update src/main/webapp/app/exercises/quiz/manage/statistics/quiz-statistic/quiz-statistic.component.ts\n\nCo-authored-by: Tobias Priesching <tobias.priesching@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4784936e208795f827adbcc19a108b2834114997", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/4784936e208795f827adbcc19a108b2834114997", "committedDate": "2020-08-28T08:04:35Z", "message": "Update src/main/webapp/app/exercises/quiz/manage/statistics/quiz-statistic/quiz-statistic.component.ts\n\nCo-authored-by: Tobias Priesching <tobias.priesching@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37c620214a7d8c1e54f4de9e1a9a5881b3472445", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/37c620214a7d8c1e54f4de9e1a9a5881b3472445", "committedDate": "2020-08-28T08:10:54Z", "message": "Renamed Indexes to a more sensible name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e41de71d13e6074c513e52ddd520d86bec7480c5", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/e41de71d13e6074c513e52ddd520d86bec7480c5", "committedDate": "2020-08-28T08:11:11Z", "message": "Made flatten code more clear"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cfdc837a4e91d04b6ffedcf58b8305ecf867450", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/2cfdc837a4e91d04b6ffedcf58b8305ecf867450", "committedDate": "2020-08-28T08:20:05Z", "message": "Merge branch 'develop' into change-quiz-bar-chart-label"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa02d45dc38bdb70c5810a14cdf45f7acfc7ee44", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/fa02d45dc38bdb70c5810a14cdf45f7acfc7ee44", "committedDate": "2020-08-28T11:38:06Z", "message": "Merge branch 'develop' into change-quiz-bar-chart-label"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dda07b80e12e984112f55a18efa6f36a570f6f2c", "author": {"user": {"login": "fde312", "name": "Francisco De las Casas Young"}}, "url": "https://github.com/ls1intum/Artemis/commit/dda07b80e12e984112f55a18efa6f36a570f6f2c", "committedDate": "2020-09-01T12:02:29Z", "message": "Merge branch 'develop' into change-quiz-bar-chart-label"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5Njk5Mjg5", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-479699289", "createdAt": "2020-09-01T12:40:12Z", "commit": {"oid": "dda07b80e12e984112f55a18efa6f36a570f6f2c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87315d3c29e4086ab0e6a0328c2da6b0b5a713fc", "author": {"user": null}, "url": "https://github.com/ls1intum/Artemis/commit/87315d3c29e4086ab0e6a0328c2da6b0b5a713fc", "committedDate": "2020-09-01T13:03:05Z", "message": "Fixed type error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDUxMjY3", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-480051267", "createdAt": "2020-09-01T19:27:04Z", "commit": {"oid": "87315d3c29e4086ab0e6a0328c2da6b0b5a713fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce794bbcc3a4e81c663c77fdbc78889f244eadc7", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/ce794bbcc3a4e81c663c77fdbc78889f244eadc7", "committedDate": "2020-09-05T17:26:24Z", "message": "Merge branch 'develop' into change-quiz-bar-chart-label"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NDQzMzY3", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-488443367", "createdAt": "2020-09-15T08:24:34Z", "commit": {"oid": "ce794bbcc3a4e81c663c77fdbc78889f244eadc7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4310743ed2686ff89aad047902f12ccaeaa9882a", "author": {"user": {"login": "stefanwaldhauser", "name": "Stefan Waldhauser"}}, "url": "https://github.com/ls1intum/Artemis/commit/4310743ed2686ff89aad047902f12ccaeaa9882a", "committedDate": "2020-09-21T16:43:50Z", "message": "Merge branch 'develop' into change-quiz-bar-chart-label"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MzIwMTA4", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-495320108", "createdAt": "2020-09-24T08:09:22Z", "commit": {"oid": "4310743ed2686ff89aad047902f12ccaeaa9882a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MzIwMjkz", "url": "https://github.com/ls1intum/Artemis/pull/2059#pullrequestreview-495320293", "createdAt": "2020-09-24T08:09:38Z", "commit": {"oid": "4310743ed2686ff89aad047902f12ccaeaa9882a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4075, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}