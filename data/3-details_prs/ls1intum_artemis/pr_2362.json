{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDM4ODIx", "number": 2362, "title": "[Bugfix] Trigger failed build", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I followed the coding and design guidelines.\n\nMotivation and Context\n\n\nThe 'Trigger Failed Build' Button did not work properly as described in #2329\nDescription\n\n\nFix the BambooBuildPlanDTO to use the correct property names.\nAdd additional checks the the trigger-failed-build handler to support edge-cases.\n\nSteps for Testing\n\n\nRepeat the following steps:\n\nFor exercises with & without due-dates and for submissions before and after the due-date\nFrom inside the code-editor, from the exercise details page and as an instructor from the participations page.\n\n\n\nLog in to Artemis\nCreate a Programming Exercise\nModify the Build Plan to take at least 3 minutes (use sleep 180 in the script)\n\n\n\n\nParticipate in the exercise, submit and wait for the building indicator to timeout.\nClick the Trigger Build Button while the Build is still running.\n\n\n\n\n\n\nYou should again see the building indicator without any errors.\n\n\n\n\n\n\n\nTest Coverage\n\n\nNothing changed\n\nScreenshots\n\n\nNo UI changes", "createdAt": "2020-11-07T00:20:24Z", "url": "https://github.com/ls1intum/Artemis/pull/2362", "merged": true, "mergeCommit": {"oid": "c5883152ecf4c44aa407654f7b8d8f26cb40ef5a"}, "closed": true, "closedAt": "2020-11-11T21:35:06Z", "author": {"login": "schultek"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZR2fngH2gAyNTE3MDM4ODIxOjFmNDg0OTM4NzBiYWJiMTE0ODI4OWY1YjVkM2I0Y2Y0ODJhNjhhMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbgCPaAFqTUyODI5OTAyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1f48493870babb1148289f5b5d3b4cf482a68a25", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/1f48493870babb1148289f5b5d3b4cf482a68a25", "committedDate": "2020-11-04T18:13:15Z", "message": "only fail the request when exercise is actually over"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b6da23ee1c5b9a2c945a15e5ce8e74c6117a180", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/3b6da23ee1c5b9a2c945a15e5ce8e74c6117a180", "committedDate": "2020-11-07T00:14:10Z", "message": "fix build plan dto"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/a82c73e774b4fc40e151e0764459903548f9c618", "committedDate": "2020-11-07T00:27:40Z", "message": "Merge branch 'develop' into bugfix/trigger-failed-build-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NjQ1NjQw", "url": "https://github.com/ls1intum/Artemis/pull/2362#pullrequestreview-525645640", "createdAt": "2020-11-07T11:07:56Z", "commit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjY3NDU3", "url": "https://github.com/ls1intum/Artemis/pull/2362#pullrequestreview-527667457", "createdAt": "2020-11-10T22:42:54Z", "commit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjo0Mjo1NFrOHwygTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjo0Mjo1NFrOHwygTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkyMTE2Nw==", "bodyText": "Could you add a explanation here? This is not that intuitive to understand", "url": "https://github.com/ls1intum/Artemis/pull/2362#discussion_r520921167", "createdAt": "2020-11-10T22:42:54Z", "author": {"login": "fde312"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResource.java", "diffHunk": "@@ -186,7 +187,9 @@ public ProgrammingSubmissionResource(ProgrammingSubmissionService programmingSub\n             programmingSubmissionService.notifyUserAboutSubmission(submission.get());\n             return ResponseEntity.ok().build();\n         }\n-        if (lastGraded) {\n+        if (lastGraded && submission.get().getType() != SubmissionType.INSTRUCTOR && submission.get().getType() != SubmissionType.TEST\n+                && submission.get().getParticipation().getExercise().getDueDate() != null\n+                && submission.get().getParticipation().getExercise().getDueDate().isBefore(ZonedDateTime.now())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjcwNzk2", "url": "https://github.com/ls1intum/Artemis/pull/2362#pullrequestreview-527670796", "createdAt": "2020-11-10T22:49:06Z", "commit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NzA5NTg0", "url": "https://github.com/ls1intum/Artemis/pull/2362#pullrequestreview-527709584", "createdAt": "2020-11-11T00:15:40Z", "commit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NzEyNjU0", "url": "https://github.com/ls1intum/Artemis/pull/2362#pullrequestreview-527712654", "createdAt": "2020-11-11T00:20:00Z", "commit": {"oid": "a82c73e774b4fc40e151e0764459903548f9c618"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d57c55118383e6e70216998b3029e310eeeb34e0", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/d57c55118383e6e70216998b3029e310eeeb34e0", "committedDate": "2020-11-11T07:20:05Z", "message": "Merge branch 'develop' into bugfix/trigger-failed-build-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2845cf929d10436210638836f543a8b8667e4ad3", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/2845cf929d10436210638836f543a8b8667e4ad3", "committedDate": "2020-11-11T12:36:33Z", "message": "fix failing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b2399256475990d418081a3f0831230e5db26f5", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/8b2399256475990d418081a3f0831230e5db26f5", "committedDate": "2020-11-11T12:36:54Z", "message": "Merge branch 'bugfix/trigger-failed-build-fix' of https://github.com/ls1intum/Artemis into bugfix/trigger-failed-build-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8692275ea13f6af2c4114518d2534010635ca1f1", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/8692275ea13f6af2c4114518d2534010635ca1f1", "committedDate": "2020-11-11T13:23:17Z", "message": "Merge branch 'develop' into bugfix/trigger-failed-build-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb4b0eb97636da2ee597a46d321367ba8542e408", "author": {"user": {"login": "schultek", "name": "Kilian Schulte"}}, "url": "https://github.com/ls1intum/Artemis/commit/cb4b0eb97636da2ee597a46d321367ba8542e408", "committedDate": "2020-11-11T15:20:36Z", "message": "add explanation comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Mjk5MDI5", "url": "https://github.com/ls1intum/Artemis/pull/2362#pullrequestreview-528299029", "createdAt": "2020-11-11T15:52:36Z", "commit": {"oid": "cb4b0eb97636da2ee597a46d321367ba8542e408"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3622, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}