{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5OTQyOTcx", "number": 1292, "title": "Feature/programming exercise/simplify submission and result generation in the local setup", "bodyText": "The following feature is only intended for local usage, in particular when no local version control and continuous integration is setup.\n\n\nChecklist\n\n[x] I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n[x] Client: I added multiple integration tests (Jest) related to the features\n[x] Client: I added authorities to all new routes and check the course groups for displaying navigation elements (links, buttons)\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n Client: I translated all the newly inserted strings into German and English\n\nMotivation and Context\n\n\nThe creation of a programming exercise in the development environment requires a local setup of a VCS and a CI. This setup needs a lot of time and not all developers need the full functionality of the programming exercises. To solve this issue this PR enables the creation of programming exercises and the simulation of participation's, submissions and results without a local setup. The introduced changes can only be used in the dev environment.\nDescription\n\n\nAdded a checkbox \"no local setup\" inside of the creation form of the programming exercises, which is only visible in the test and dev environment. When the user checks this box and clicks on generate the programming exercise is generated without the connection to the VCS and CI.\nAdded a new Resource \"ProgrammingSubmissionResultSimulationResource\" which simulates participations, submissions and results for the current logged in user. The simulation is triggered by the click on the newly introduced buttons \"submission\" and \"result\". These buttons are also only visible in the dev and test environment.\n\nSteps for Testing\n\nThis feature can only be tested in your local dev environment (i.e. the dev profile needs to be active, otherwise the new buttons and REST Calls won't be available)\n\nCheckout the branch and start Artemis in IntelliJ\nNavigate to Course Administration\n(1.1 Create a Course if you don't have one)\nClick on the Exercise button of a course\nClick on Generate new programming exercise button\nInsert the required fields\nCheck the Checkbox \"No Local Setup\"\nClick on the Generate button\n\n-> now the programming exercise is created, check the database tables(exercise, participation, submission and result) if the new exercise as well as the base and solution participation, submission and result are created\n\n\nNavigate to the course overview\nClick on the course for which you created the programming exercise\nClick on the submission button\n\n-> now a new participation and a submission are created, check the tables(participation and submission) if the new participation and submission are created\n\n\nClick on the result button\n\n-> now a new result is created, check the result table if the new result is created\n\nScreenshots\n\n\n\nThe newly introduced checkbox. If you tick this check box and click on the generate button the new exercise will be created without a real VCS and CI connection\n\nThe new submission and result simulation buttons. If you click on submission button, a new participation and submission will be simulated and stored in the database. If you click on the result button, a new result will be generated based on the last stored simulated submission", "createdAt": "2020-04-06T22:43:19Z", "url": "https://github.com/ls1intum/Artemis/pull/1292", "merged": true, "mergeCommit": {"oid": "713e87c4513fa9139f5acc163f035c469f5f4d9c"}, "closed": true, "closedAt": "2020-04-20T19:58:14Z", "author": {"login": "F4lka"}, "timelineItems": {"totalCount": 155, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXaukKAH2gAyMzk5OTQyOTcxOmZjMjFjM2U3NTE3MDdiNzRlMGQwYzllYWIzNWJiYjNmZWQwNzZlODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZkz2GAFqTM5Njc3NDA3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc21c3e751707b74e0d0c9eab35bbb3fed076e81", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/fc21c3e751707b74e0d0c9eab35bbb3fed076e81", "committedDate": "2020-04-14T03:14:44Z", "message": "now the submission button has to be clicked at least once, before it is possible to click the result button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "438bc0018554a0ff5f9fb6e3f666e30a2bbd69a9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/438bc0018554a0ff5f9fb6e3f666e30a2bbd69a9", "committedDate": "2020-04-14T03:18:35Z", "message": "removed the id since it is not used"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90d6cf32eb75700ee9da5398cd7f10259d3ac90a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/90d6cf32eb75700ee9da5398cd7f10259d3ac90a", "committedDate": "2020-04-14T03:24:13Z", "message": "removed the template string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a88bf7c6f44eed539d36e588409504e6af005481", "committedDate": "2020-04-14T04:10:44Z", "message": "Changed the ResponseEntity code 200->201"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTIwNDUz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392920453", "createdAt": "2020-04-14T13:22:32Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyMjozMlrOGFOXQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyMjozMlrOGFOXQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzMTM5NA==", "bodyText": "I would prefer something like https://artemislocal.ase.in.tum.de", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408131394", "createdAt": "2020-04-14T13:22:32Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,162 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public final String domain = \"nolocalsetup:7990/scm/\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTIyNDQx", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392922441", "createdAt": "2020-04-14T13:24:42Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNDo0MlrOGFOdjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNDo0MlrOGFOdjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzMzAwNg==", "bodyText": "please rename, move into section helper attributes and add a js doc comment what this is about", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408133006", "createdAt": "2020-04-14T13:24:42Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/entities/programming-exercise.model.ts", "diffHunk": "@@ -17,6 +17,7 @@ export class ProgrammingExercise extends Exercise {\n     public testRepositoryUrl: string;\n     public publishBuildPlanUrl = false; // default value\n     public allowOnlineEditor = false; // default value\n+    public noLocalSetup = false; // default value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTIzMjUw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392923250", "createdAt": "2020-04-14T13:25:36Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNTozNlrOGFOgEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNTozNlrOGFOgEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzMzY1MQ==", "bodyText": "clearly document that this is only intended for local testing and should never be used in the production environment", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408133651", "createdAt": "2020-04-14T13:25:36Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/services/programming-exercise-simulation.service.ts", "diffHunk": "@@ -0,0 +1,25 @@\n+import { Injectable } from '@angular/core';\n+import { SERVER_API_URL } from 'app/app.constants';\n+import { EntityResponseType, ProgrammingExerciseService } from 'app/exercises/programming/manage/services/programming-exercise.service';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+import { HttpClient } from '@angular/common/http';\n+import { map } from 'rxjs/operators';\n+import { Observable } from 'rxjs/Observable';\n+\n+@Injectable({ providedIn: 'root' })\n+export class ProgrammingExerciseSimulationService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTIzNTcy", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392923572", "createdAt": "2020-04-14T13:25:59Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNTo1OVrOGFOhBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNTo1OVrOGFOhBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzMzg5Mw==", "bodyText": "maybe we should integrate some kind of guard here that fails automatically during production", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408133893", "createdAt": "2020-04-14T13:25:59Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/services/programming-exercise-simulation.service.ts", "diffHunk": "@@ -0,0 +1,25 @@\n+import { Injectable } from '@angular/core';\n+import { SERVER_API_URL } from 'app/app.constants';\n+import { EntityResponseType, ProgrammingExerciseService } from 'app/exercises/programming/manage/services/programming-exercise.service';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+import { HttpClient } from '@angular/common/http';\n+import { map } from 'rxjs/operators';\n+import { Observable } from 'rxjs/Observable';\n+\n+@Injectable({ providedIn: 'root' })\n+export class ProgrammingExerciseSimulationService {\n+    public resourceUrl = SERVER_API_URL + 'api/programming-exercises';\n+\n+    constructor(private http: HttpClient, private programmingExerciseService: ProgrammingExerciseService) {}\n+\n+    /**\n+     * Triggers the creation and setup of a new programming exercise\n+     * @param programmingExercise\n+     */\n+    automaticSetupWithoutLocalSetup(programmingExercise: ProgrammingExercise): Observable<EntityResponseType> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTI0NTM1", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392924535", "createdAt": "2020-04-14T13:27:06Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNzowNlrOGFOj7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNzowNlrOGFOj7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzNDYzNw==", "bodyText": "please add a HTML comment", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408134637", "createdAt": "2020-04-14T13:27:06Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/update/programming-exercise-update.component.html", "diffHunk": "@@ -212,6 +212,14 @@ <h4 *ngIf=\"isImport\" id=\"jhi-programming-exercise-heading-import\" jhiTranslate=\"\n                         </label>\n                     </div>\n                 </div>\n+                <div class=\"form-group-narrow\" *ngIf=\"!isInProduction()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTI1MjAw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392925200", "createdAt": "2020-04-14T13:27:48Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNzo0OFrOGFOl-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyNzo0OFrOGFOl-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzNTE2MA==", "bodyText": "I don't like the term \"no local setup\"!!!\na better term would be \"No version control and continuous integration server available\"", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408135160", "createdAt": "2020-04-14T13:27:48Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/update/programming-exercise-update.component.html", "diffHunk": "@@ -212,6 +212,14 @@ <h4 *ngIf=\"isImport\" id=\"jhi-programming-exercise-heading-import\" jhiTranslate=\"\n                         </label>\n                     </div>\n                 </div>\n+                <div class=\"form-group-narrow\" *ngIf=\"!isInProduction()\">\n+                    <div class=\"form-check\">\n+                        <label class=\"form-check-label\" for=\"field_noLocalSetup\">\n+                            <input class=\"form-check-input\" type=\"checkbox\" name=\"noLocalSetup\" id=\"field_noLocalSetup\" [(ngModel)]=\"programmingExercise.noLocalSetup\" checked />\n+                            <span jhiTranslate=\"artemisApp.programmingExercise.noLocalSetup\">No Local Setup</span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTI2MDky", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392926092", "createdAt": "2020-04-14T13:28:44Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyODo0NFrOGFOo9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzoyODo0NFrOGFOo9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzNTkyNw==", "bodyText": "it would be better to store a boolean \"inProductionEnvironment\"", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408135927", "createdAt": "2020-04-14T13:28:44Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/update/programming-exercise-update.component.ts", "diffHunk": "@@ -51,6 +54,7 @@ export class ProgrammingExerciseUpdateComponent implements OnInit {\n     titleNamePattern = '^[a-zA-Z0-9-_ ]+'; // must only contain alphanumeric characters, or whitespaces, or '_' or '-'\n     exerciseCategories: ExerciseCategory[];\n     existingCategories: ExerciseCategory[];\n+    profileInfo: ProfileInfo;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTI4ODk3", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392928897", "createdAt": "2020-04-14T13:31:55Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzozMTo1NVrOGFOxdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzozMTo1NVrOGFOxdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzODEwMA==", "bodyText": "I don't like the term \"nolocalsetup\"", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408138100", "createdAt": "2020-04-14T13:31:55Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/shared/utils/programming-exercise-simulation-utils.ts", "diffHunk": "@@ -0,0 +1,13 @@\n+import { Injectable } from '@angular/core';\n+\n+@Injectable({ providedIn: 'root' })\n+export class ProgrammingExerciseSimulationUtils {\n+    /**\n+     * Checks if the url includes the string \"nolocalsetup', which is an indication\n+     * that the particular programming exercise has no local setup\n+     * @param urlToCheck the url which will be check if it contains the substring\n+     */\n+    hasNoLocalSetup(urlToCheck: string): boolean {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTI5MzQ5", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392929349", "createdAt": "2020-04-14T13:32:25Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzozMjoyNVrOGFOywQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzozMjoyNVrOGFOywQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEzODQzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * that the particular programming exercise has no local setup\n          \n          \n            \n                 * that the particular programming exercise is not connected to a version control and continuous integration server", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408138433", "createdAt": "2020-04-14T13:32:25Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/shared/utils/programming-exercise-simulation-utils.ts", "diffHunk": "@@ -0,0 +1,13 @@\n+import { Injectable } from '@angular/core';\n+\n+@Injectable({ providedIn: 'root' })\n+export class ProgrammingExerciseSimulationUtils {\n+    /**\n+     * Checks if the url includes the string \"nolocalsetup', which is an indication\n+     * that the particular programming exercise has no local setup", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTM0Njkw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392934690", "createdAt": "2020-04-14T13:38:23Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzozODoyM1rOGFPDEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzozODoyM1rOGFPDEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE0MjYxMA==", "bodyText": "add guard for production misuse\nif (isInProduction) {\nconsole.log(\"error\");\nthis.jhiAlertService.error('This action is NOT supported on production and should NOT be visible. Please contact a developer immediately!')\n}", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408142610", "createdAt": "2020-04-14T13:38:23Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,64 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type === ExerciseType.PROGRAMMING) {\n+            this.getProgrammingExercise();\n+        }\n         this.subscribeForNewResults();\n     }\n \n+    /**\n+     * The button should be only visible in the dev environment\n+     */\n+    get isInProduction(): boolean {\n+        return this.profileService.isInProduction();\n+    }\n+\n+    /**\n+     * checks if exercise has no local setup\n+     */\n+    get hasNoLocalSetup(): boolean {\n+        return this.programmingExerciseSimulationUtils.hasNoLocalSetup(this.programmingExercise.testRepositoryUrl);\n+    }\n+\n+    /**\n+     * asks the server for the programming exercise with the provided exercise ID\n+     */\n+    getProgrammingExercise() {\n+        this.courseExerciseSubmissionResultSimulationService.getProgrammingExercise(this.exerciseId).subscribe((programmingExercise) => {\n+            this.programmingExercise = programmingExercise;\n+        });\n+    }\n+\n+    /**\n+     * triggers the simulation of a participation and submission for the currently logged in user\n+     */\n+    simulateSubmission() {\n+        this.courseExerciseSubmissionResultSimulationService.simulateSubmission(this.exerciseId).subscribe(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTM2ODgz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392936883", "createdAt": "2020-04-14T13:40:53Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0MDo1M1rOGFPJ_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0MDo1M1rOGFPJ_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE0NDM4MA==", "bodyText": "if you cannot prevent to add code into \"production\" files, then please move them into a common section in the source code and mark it with something like\n// ################## ONLY FOR LOCAL TESTING PURPOSE -- START ##################\nhere comes the code\n// ################## ONLY FOR LOCAL TESTING PURPOSE -- END ##################", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408144380", "createdAt": "2020-04-14T13:40:53Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,64 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type === ExerciseType.PROGRAMMING) {\n+            this.getProgrammingExercise();\n+        }\n         this.subscribeForNewResults();\n     }\n \n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTM4MzM4", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392938338", "createdAt": "2020-04-14T13:42:27Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0MjoyN1rOGFPOWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0MjoyN1rOGFPOWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE0NTQ5Ng==", "bodyText": "please rename to templateResult", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408145496", "createdAt": "2020-04-14T13:42:27Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,162 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public final String domain = \"nolocalsetup:7990/scm/\";\n+\n+    public ProgrammingExerciseSimulationService(ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseScheduleService programmingExerciseScheduleService,\n+            GroupNotificationService groupNotificationService, ProgrammingExerciseService programmingExerciseService,\n+            TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository,\n+            SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseScheduleService = programmingExerciseScheduleService;\n+        this.groupNotificationService = groupNotificationService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.templateProgrammingExerciseParticipationRepository = templateProgrammingExerciseParticipationRepository;\n+        this.solutionProgrammingExerciseParticipationRepository = solutionProgrammingExerciseParticipationRepository;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Setups the context of a new programming exercise.\n+     * @param programmingExercise the exercise which should be stored in the database\n+     * @return returns the modified and stored programming exercise\n+     */\n+    @Transactional\n+    public ProgrammingExercise setupProgrammingExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise) {\n+        programmingExercise.generateAndSetProjectKey();\n+        final var projectKey = programmingExercise.getProjectKey();\n+        // TODO: the following code is used quite often and should be done in only one place\n+        final var exerciseRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TEMPLATE.getName();\n+        final var testRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TESTS.getName();\n+        final var solutionRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.SOLUTION.getName();\n+\n+        programmingExerciseService.initParticipations(programmingExercise);\n+        setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(programmingExercise, exerciseRepoName, testRepoName, solutionRepoName);\n+        // Save participations to get the ids required for the webhooks\n+        programmingExerciseService.connectBaseParticipationsToExerciseAndSave(programmingExercise);\n+\n+        // save to get the id required for the webhook\n+        programmingExercise = programmingExerciseRepository.save(programmingExercise);\n+\n+        // The creation of the webhooks must occur after the initial push, because the participation is\n+        // not yet saved in the database, so we cannot save the submission accordingly (see ProgrammingSubmissionService.notifyPush)\n+        programmingExerciseScheduleService.scheduleExerciseIfRequired(programmingExercise);\n+        groupNotificationService.notifyTutorGroupAboutExerciseCreated(programmingExercise);\n+\n+        return programmingExercise;\n+    }\n+\n+    /**\n+     * Sets the url and buildplan ids for the new exercise\n+     * @param programmingExercise the new exercise\n+     * @param exerciseRepoName the repo name of the new exercise\n+     * @param testRepoName the test repo name of the new exercise\n+     * @param solutionRepoName the solution repo name of the new exercise\n+     */\n+    private void setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise, String exerciseRepoName, String testRepoName,\n+            String solutionRepoName) {\n+        final var projectKey = programmingExercise.getProjectKey();\n+        final var templateParticipation = programmingExercise.getTemplateParticipation();\n+        final var solutionParticipation = programmingExercise.getSolutionParticipation();\n+        final var templatePlanName = TEMPLATE.getName();\n+        final var solutionPlanName = SOLUTION.getName();\n+        final var exerciseRepoUrl = \"http://\" + domain + projectKey + \"/\" + exerciseRepoName + \".git\";\n+        final var testsRepoUrl = \"http://\" + domain + projectKey + \"/\" + testRepoName + \".git\";\n+        final var solutionRepoUrl = \"http://\" + domain + projectKey + \"/\" + solutionRepoName + \".git\";\n+        templateParticipation.setBuildPlanId(projectKey + \"-\" + templatePlanName);\n+        templateParticipation.setRepositoryUrl(exerciseRepoUrl);\n+        solutionParticipation.setBuildPlanId(projectKey + \"-\" + solutionPlanName);\n+        solutionParticipation.setRepositoryUrl(solutionRepoUrl);\n+        programmingExercise.setTestRepositoryUrl(testsRepoUrl);\n+    }\n+\n+    /**\n+     * This method creates the template and solution submissions and results for the new exercise\n+     * These submissions and results are SIMULATIONS for the testing of programming exercises without local setup\n+     * @param programmingExercise the new exercise\n+     */\n+    public void setupInitialSubmissionsAndResults(ProgrammingExercise programmingExercise) {\n+        Optional<TemplateProgrammingExerciseParticipation> templateProgrammingExerciseParticipation = this.templateProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        Optional<SolutionProgrammingExerciseParticipation> solutionProgrammingExerciseParticipation = this.solutionProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        String commitHashBase = VCSSimulationUtils.simulateCommitHash();\n+        ProgrammingSubmission programmingSubmissionBase = new ProgrammingSubmission();\n+        programmingSubmissionBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        programmingSubmissionBase.setSubmitted(true);\n+        programmingSubmissionBase.setType(SubmissionType.OTHER);\n+        programmingSubmissionBase.setCommitHash(commitHashBase);\n+        programmingSubmissionBase.setSubmissionDate(templateProgrammingExerciseParticipation.get().getInitializationDate());\n+        programmingSubmissionRepository.save(programmingSubmissionBase);\n+        Result resultBase = new Result();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 133}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTM4NDgw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392938480", "createdAt": "2020-04-14T13:42:36Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0MjozNlrOGFPOvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0MjozNlrOGFPOvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE0NTU5OA==", "bodyText": "solutionResult", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408145598", "createdAt": "2020-04-14T13:42:36Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,162 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public final String domain = \"nolocalsetup:7990/scm/\";\n+\n+    public ProgrammingExerciseSimulationService(ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseScheduleService programmingExerciseScheduleService,\n+            GroupNotificationService groupNotificationService, ProgrammingExerciseService programmingExerciseService,\n+            TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository,\n+            SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseScheduleService = programmingExerciseScheduleService;\n+        this.groupNotificationService = groupNotificationService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.templateProgrammingExerciseParticipationRepository = templateProgrammingExerciseParticipationRepository;\n+        this.solutionProgrammingExerciseParticipationRepository = solutionProgrammingExerciseParticipationRepository;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Setups the context of a new programming exercise.\n+     * @param programmingExercise the exercise which should be stored in the database\n+     * @return returns the modified and stored programming exercise\n+     */\n+    @Transactional\n+    public ProgrammingExercise setupProgrammingExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise) {\n+        programmingExercise.generateAndSetProjectKey();\n+        final var projectKey = programmingExercise.getProjectKey();\n+        // TODO: the following code is used quite often and should be done in only one place\n+        final var exerciseRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TEMPLATE.getName();\n+        final var testRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TESTS.getName();\n+        final var solutionRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.SOLUTION.getName();\n+\n+        programmingExerciseService.initParticipations(programmingExercise);\n+        setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(programmingExercise, exerciseRepoName, testRepoName, solutionRepoName);\n+        // Save participations to get the ids required for the webhooks\n+        programmingExerciseService.connectBaseParticipationsToExerciseAndSave(programmingExercise);\n+\n+        // save to get the id required for the webhook\n+        programmingExercise = programmingExerciseRepository.save(programmingExercise);\n+\n+        // The creation of the webhooks must occur after the initial push, because the participation is\n+        // not yet saved in the database, so we cannot save the submission accordingly (see ProgrammingSubmissionService.notifyPush)\n+        programmingExerciseScheduleService.scheduleExerciseIfRequired(programmingExercise);\n+        groupNotificationService.notifyTutorGroupAboutExerciseCreated(programmingExercise);\n+\n+        return programmingExercise;\n+    }\n+\n+    /**\n+     * Sets the url and buildplan ids for the new exercise\n+     * @param programmingExercise the new exercise\n+     * @param exerciseRepoName the repo name of the new exercise\n+     * @param testRepoName the test repo name of the new exercise\n+     * @param solutionRepoName the solution repo name of the new exercise\n+     */\n+    private void setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise, String exerciseRepoName, String testRepoName,\n+            String solutionRepoName) {\n+        final var projectKey = programmingExercise.getProjectKey();\n+        final var templateParticipation = programmingExercise.getTemplateParticipation();\n+        final var solutionParticipation = programmingExercise.getSolutionParticipation();\n+        final var templatePlanName = TEMPLATE.getName();\n+        final var solutionPlanName = SOLUTION.getName();\n+        final var exerciseRepoUrl = \"http://\" + domain + projectKey + \"/\" + exerciseRepoName + \".git\";\n+        final var testsRepoUrl = \"http://\" + domain + projectKey + \"/\" + testRepoName + \".git\";\n+        final var solutionRepoUrl = \"http://\" + domain + projectKey + \"/\" + solutionRepoName + \".git\";\n+        templateParticipation.setBuildPlanId(projectKey + \"-\" + templatePlanName);\n+        templateParticipation.setRepositoryUrl(exerciseRepoUrl);\n+        solutionParticipation.setBuildPlanId(projectKey + \"-\" + solutionPlanName);\n+        solutionParticipation.setRepositoryUrl(solutionRepoUrl);\n+        programmingExercise.setTestRepositoryUrl(testsRepoUrl);\n+    }\n+\n+    /**\n+     * This method creates the template and solution submissions and results for the new exercise\n+     * These submissions and results are SIMULATIONS for the testing of programming exercises without local setup\n+     * @param programmingExercise the new exercise\n+     */\n+    public void setupInitialSubmissionsAndResults(ProgrammingExercise programmingExercise) {\n+        Optional<TemplateProgrammingExerciseParticipation> templateProgrammingExerciseParticipation = this.templateProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        Optional<SolutionProgrammingExerciseParticipation> solutionProgrammingExerciseParticipation = this.solutionProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        String commitHashBase = VCSSimulationUtils.simulateCommitHash();\n+        ProgrammingSubmission programmingSubmissionBase = new ProgrammingSubmission();\n+        programmingSubmissionBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        programmingSubmissionBase.setSubmitted(true);\n+        programmingSubmissionBase.setType(SubmissionType.OTHER);\n+        programmingSubmissionBase.setCommitHash(commitHashBase);\n+        programmingSubmissionBase.setSubmissionDate(templateProgrammingExerciseParticipation.get().getInitializationDate());\n+        programmingSubmissionRepository.save(programmingSubmissionBase);\n+        Result resultBase = new Result();\n+        resultBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        resultBase.setSubmission(programmingSubmissionBase);\n+        resultBase.setRated(true);\n+        resultBase.resultString(\"0 of 13 passed\");\n+        resultBase.setAssessmentType(AssessmentType.AUTOMATIC);\n+        resultBase.score(0L);\n+        resultBase.setCompletionDate(templateProgrammingExerciseParticipation.get().getInitializationDate());\n+        resultRepository.save(resultBase);\n+\n+        ProgrammingSubmission programmingSubmissionSolution = new ProgrammingSubmission();\n+        String commitHashSolution = VCSSimulationUtils.simulateCommitHash();\n+        programmingSubmissionSolution.setParticipation(solutionProgrammingExerciseParticipation.get());\n+        programmingSubmissionSolution.setSubmitted(true);\n+        programmingSubmissionSolution.setType(SubmissionType.OTHER);\n+        programmingSubmissionSolution.setCommitHash(commitHashSolution);\n+        programmingSubmissionSolution.setSubmissionDate(solutionProgrammingExerciseParticipation.get().getInitializationDate());\n+        programmingSubmissionRepository.save(programmingSubmissionSolution);\n+        Result resultSolution = new Result();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 151}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTM5NDk3", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-392939497", "createdAt": "2020-04-14T13:43:42Z", "commit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0Mzo0MlrOGFPR4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo0Mzo0MlrOGFPR4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE0NjQwMA==", "bodyText": "the feedback objects are missing with the corresponding test case name and the error message, look at one real example", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r408146400", "createdAt": "2020-04-14T13:43:42Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingSubmissionResultSimulationService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.time.ZonedDateTime;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.InitializationState;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.Participant;\n+import de.tum.in.www1.artemis.domain.participation.ProgrammingExerciseStudentParticipation;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.ParticipationRepository;\n+import de.tum.in.www1.artemis.repository.ProgrammingSubmissionRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingSubmissionResultSimulationService {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseService.class);\n+\n+    private final ParticipationRepository participationRepository;\n+\n+    private final UserService userService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    private final ProgrammingExerciseSimulationService programmingExerciseSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationService(ParticipationRepository participationRepository, UserService userService,\n+            ProgrammingExerciseService programmingExerciseService, ParticipationService participationService, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository, ProgrammingExerciseSimulationService programmingExerciseSimulationService) {\n+        this.participationRepository = participationRepository;\n+        this.userService = userService;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.participationService = participationService;\n+        this.programmingExerciseSimulationService = programmingExerciseSimulationService;\n+    }\n+\n+    /**\n+     * This method creates a new participation for the provided user\n+     * @param programmingExercise the used programmingExercise\n+     * @param participant the participant object of the user\n+     * @param user the user who wants to particpate\n+     * @return the newly created and stored participation\n+     */\n+    public ProgrammingExerciseStudentParticipation createParticipation(ProgrammingExercise programmingExercise, Participant participant, User user) {\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = new ProgrammingExerciseStudentParticipation();\n+        programmingExerciseStudentParticipation.setBuildPlanId(programmingExercise.getProjectKey() + \"-\" + user.getLogin().toUpperCase());\n+        programmingExerciseStudentParticipation.setParticipant(participant);\n+        programmingExerciseStudentParticipation.setInitializationState(InitializationState.INITIALIZED);\n+        programmingExerciseStudentParticipation.setRepositoryUrl(\"http://\" + user.getLogin() + \"@\" + programmingExerciseSimulationService.domain\n+                + programmingExercise.getProjectKey() + \"/\" + programmingExercise.getProjectKey().toLowerCase() + \"-\" + user.getLogin() + \".git\");\n+        programmingExerciseStudentParticipation.setInitializationDate(ZonedDateTime.now());\n+        programmingExerciseStudentParticipation.setProgrammingExercise(programmingExercise);\n+        participationRepository.save(programmingExerciseStudentParticipation);\n+        return programmingExerciseStudentParticipation;\n+    }\n+\n+    /**\n+     * This method creates a new submission for the provided user\n+     * @param exerciseId the exerciseId of the exercise for which a submission should be created\n+     * @return the newly created and stored submission\n+     */\n+    public ProgrammingSubmission createSubmission(Long exerciseId) {\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseId);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndStudentLoginWithEagerSubmissionsAnyState(programmingExercise,\n+                user.getLogin());\n+        if (optionalStudentParticipation.isEmpty()) {\n+            programmingExerciseStudentParticipation = createParticipation(programmingExercise, participant, user);\n+        }\n+        else {\n+            programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        }\n+\n+        ProgrammingSubmission programmingSubmission = new ProgrammingSubmission();\n+        programmingSubmission.setCommitHash(VCSSimulationUtils.simulateCommitHash());\n+        programmingSubmission.setSubmitted(true);\n+        programmingSubmission.setSubmissionDate(ZonedDateTime.now());\n+        programmingSubmission.setType(SubmissionType.MANUAL);\n+        programmingExerciseStudentParticipation.addSubmissions(programmingSubmission);\n+\n+        programmingSubmissionRepository.save(programmingSubmission);\n+        return programmingSubmission;\n+    }\n+\n+    /**\n+     *  This method creates a new result for the provided participation\n+     * @param programmingExerciseStudentParticipation the participation for which the new result should be created\n+     * @return the newly created and stored result\n+     */\n+    public Result createResult(ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation) {\n+        Optional<ProgrammingSubmission> programmingSubmission = programmingSubmissionRepository\n+                .findFirstByParticipationIdOrderBySubmissionDateDesc(programmingExerciseStudentParticipation.getId());\n+        Result result = new Result();\n+        result.setSubmission(programmingSubmission.get());\n+        result.setParticipation(programmingExerciseStudentParticipation);\n+        result.setRated(true);\n+        result.resultString(\"7 of 13 passed\");\n+        result.score(54L);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88bf7c6f44eed539d36e588409504e6af005481"}, "originalPosition": 121}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c59c57077c0295a12095f7172519d8d055c65bdd", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/c59c57077c0295a12095f7172519d8d055c65bdd", "committedDate": "2020-04-15T10:01:56Z", "message": "Added html comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8781e57e90b252aa1f0254681546bbd6c2332eb2", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/8781e57e90b252aa1f0254681546bbd6c2332eb2", "committedDate": "2020-04-15T11:09:35Z", "message": "added and use variables in html instead of method calls, start of rearranging the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "049ab666f1d2e7a48ad01101baefda560615d083", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/049ab666f1d2e7a48ad01101baefda560615d083", "committedDate": "2020-04-15T11:24:31Z", "message": "renamed and commented the checkbox name. Also adjusted the translation of the checkbox"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7c3d8c7cae4989607f972a17a28fec11d9bac9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/fc7c3d8c7cae4989607f972a17a28fec11d9bac9", "committedDate": "2020-04-15T11:57:02Z", "message": "added comments to highlight that the particular functionality is only for testing, also added the key word noVersionControlAndContinuousIntegrationAvailable, so that these kind of areas are easier to find"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf1eeecbcf3b23b4f6e22cf755ed8494e689bc6c", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/bf1eeecbcf3b23b4f6e22cf755ed8494e689bc6c", "committedDate": "2020-04-15T12:08:03Z", "message": "adjusted the naming noLocalSetup -> noVersionControlAndContinuousIntegrationAvailable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f192f53266addee0067e9f462b05623b7a4715d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/1f192f53266addee0067e9f462b05623b7a4715d", "committedDate": "2020-04-15T12:15:26Z", "message": "minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "975a5126a7ff6a9a816ec97eabdfaba1343df5e5", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/975a5126a7ff6a9a816ec97eabdfaba1343df5e5", "committedDate": "2020-04-15T12:44:43Z", "message": "adjusted the comments and the method names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "478fc2318a1b57b5329a375b27748b4b277faddb", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/478fc2318a1b57b5329a375b27748b4b277faddb", "committedDate": "2020-04-15T13:36:28Z", "message": "adjusted the naming of the endpoints and added comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "465b9500fa8f82ca834dfc782e3fd84115280e85", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/465b9500fa8f82ca834dfc782e3fd84115280e85", "committedDate": "2020-04-15T13:51:39Z", "message": "adjusted the integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecd109062c32dd6e334cfb3bb76d93606e1fe181", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ecd109062c32dd6e334cfb3bb76d93606e1fe181", "committedDate": "2020-04-15T14:05:37Z", "message": "adjusted the domain name of the simulations and renamed the method hasNoLocalSetup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce1bbef4704d47772ffc3750e1e855a657f2119f", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ce1bbef4704d47772ffc3750e1e855a657f2119f", "committedDate": "2020-04-15T14:09:34Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup\n\n# Conflicts:\n#\tsrc/test/java/de/tum/in/www1/artemis/AbstractSpringIntegrationBambooBitbucketJiraTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4acfdfed6673a3f566ec25061c034a6cb55281c", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a4acfdfed6673a3f566ec25061c034a6cb55281c", "committedDate": "2020-04-15T15:30:25Z", "message": "created new test classes for the tests with the dev profile and moved the particular test cases form the existing classes to the new classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c38ccaf26d6c6d39dfdfed7fd8a0b11fdecf749", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6c38ccaf26d6c6d39dfdfed7fd8a0b11fdecf749", "committedDate": "2020-04-15T16:50:48Z", "message": "prettier:format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6686780b8990f3b3c92ca8a33f480ef485535cb2", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6686780b8990f3b3c92ca8a33f480ef485535cb2", "committedDate": "2020-04-15T18:21:44Z", "message": "added guards for methods which should not used in production"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a5fc1b334fc11827dc0ab2d21bcb28de9ecc2e2", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/7a5fc1b334fc11827dc0ab2d21bcb28de9ecc2e2", "committedDate": "2020-04-15T18:26:29Z", "message": "adjusted the naming scheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e43d260a65b7b83b3b789b47c3472c31a1b6c9f", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/5e43d260a65b7b83b3b789b47c3472c31a1b6c9f", "committedDate": "2020-04-16T14:14:04Z", "message": "added Feedback to the result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9eece320f0c583de0de0e861f2ff26a4c4e7970", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/f9eece320f0c583de0de0e861f2ff26a4c4e7970", "committedDate": "2020-04-16T14:27:33Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/7f9aff848146beedbbaab1d771f169a2dee8a69a", "committedDate": "2020-04-20T11:52:05Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NDE3MjA0", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396417204", "createdAt": "2020-04-20T12:44:10Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NDk5MDYw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396499060", "createdAt": "2020-04-20T14:19:45Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoxOTo0NVrOGIW6Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoxOTo0NVrOGIW6Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxNzEyNg==", "bodyText": "please add something like \"currently only the Java standard template is supported\"", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411417126", "createdAt": "2020-04-20T14:19:45Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingSubmissionResultSimulationService.java", "diffHunk": "@@ -0,0 +1,178 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.time.ZonedDateTime;\n+import java.util.Optional;\n+\n+import javax.annotation.Nullable;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.FeedbackType;\n+import de.tum.in.www1.artemis.domain.enumeration.InitializationState;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.Participant;\n+import de.tum.in.www1.artemis.domain.participation.ProgrammingExerciseStudentParticipation;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.ParticipationRepository;\n+import de.tum.in.www1.artemis.repository.ProgrammingSubmissionRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+/**\n+ * Only for local development\n+ * Simulates the creation of a programming exercise without a connection to the VCS and CI server\n+ * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+ */\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingSubmissionResultSimulationService {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseService.class);\n+\n+    private final ParticipationRepository participationRepository;\n+\n+    private final UserService userService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    private final ProgrammingExerciseSimulationService programmingExerciseSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationService(ParticipationRepository participationRepository, UserService userService,\n+            ProgrammingExerciseService programmingExerciseService, ParticipationService participationService, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository, ProgrammingExerciseSimulationService programmingExerciseSimulationService) {\n+        this.participationRepository = participationRepository;\n+        this.userService = userService;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.participationService = participationService;\n+        this.programmingExerciseSimulationService = programmingExerciseSimulationService;\n+    }\n+\n+    /**\n+     * This method creates a new participation for the provided user\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param programmingExercise the used programmingExercise\n+     * @param participant the participant object of the user\n+     * @param user the user who wants to particpate\n+     * @return the newly created and stored participation\n+     */\n+    public ProgrammingExerciseStudentParticipation createParticipation(ProgrammingExercise programmingExercise, Participant participant, User user) {\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = new ProgrammingExerciseStudentParticipation();\n+        programmingExerciseStudentParticipation.setBuildPlanId(programmingExercise.getProjectKey() + \"-\" + user.getLogin().toUpperCase());\n+        programmingExerciseStudentParticipation.setParticipant(participant);\n+        programmingExerciseStudentParticipation.setInitializationState(InitializationState.INITIALIZED);\n+        programmingExerciseStudentParticipation.setRepositoryUrl(\"http://\" + user.getLogin() + \"@\" + programmingExerciseSimulationService.domain\n+                + programmingExercise.getProjectKey() + \"/\" + programmingExercise.getProjectKey().toLowerCase() + \"-\" + user.getLogin() + \".git\");\n+        programmingExerciseStudentParticipation.setInitializationDate(ZonedDateTime.now());\n+        programmingExerciseStudentParticipation.setProgrammingExercise(programmingExercise);\n+        participationRepository.save(programmingExerciseStudentParticipation);\n+        return programmingExerciseStudentParticipation;\n+    }\n+\n+    /**\n+     * This method creates a new submission for the provided user\n+     * @param exerciseId the exerciseId of the exercise for which a submission should be created\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @return the newly created and stored submission\n+     */\n+    public ProgrammingSubmission createSubmission(Long exerciseId) {\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseId);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndStudentLoginWithEagerSubmissionsAnyState(programmingExercise,\n+                user.getLogin());\n+        if (optionalStudentParticipation.isEmpty()) {\n+            programmingExerciseStudentParticipation = createParticipation(programmingExercise, participant, user);\n+        }\n+        else {\n+            programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        }\n+\n+        ProgrammingSubmission programmingSubmission = new ProgrammingSubmission();\n+        programmingSubmission.setCommitHash(VCSSimulationUtils.simulateCommitHash());\n+        programmingSubmission.setSubmitted(true);\n+        programmingSubmission.setSubmissionDate(ZonedDateTime.now());\n+        programmingSubmission.setType(SubmissionType.MANUAL);\n+        programmingExerciseStudentParticipation.addSubmissions(programmingSubmission);\n+\n+        programmingSubmissionRepository.save(programmingSubmission);\n+        return programmingSubmission;\n+    }\n+\n+    /**\n+     *  This method creates a new result for the provided participation\n+     *  This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param programmingExerciseStudentParticipation the participation for which the new result should be created\n+     * @return the newly created and stored result\n+     */\n+    public Result createResult(ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation) {\n+        Optional<ProgrammingSubmission> programmingSubmission = programmingSubmissionRepository\n+                .findFirstByParticipationIdOrderBySubmissionDateDesc(programmingExerciseStudentParticipation.getId());\n+        Result result = new Result();\n+        result.setSubmission(programmingSubmission.get());\n+        result.setParticipation(programmingExerciseStudentParticipation);\n+        result.setRated(true);\n+        result.resultString(\"7 of 13 passed\");\n+        result.score(54L);\n+        result.setAssessmentType(AssessmentType.AUTOMATIC);\n+        result.setCompletionDate(ZonedDateTime.now());\n+        this.addFeedback(result);\n+        resultRepository.save(result);\n+        return result;\n+    }\n+\n+    /**\n+     * Creates feedback for the provided result\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param result for which the feedback should be created\n+     * @param methodName of the testcase\n+     * @param positive is the testcase positive or not\n+     * @param errorMessageString will only added if the test case fails otherwise use null\n+     */\n+    public void createFeedback(Result result, String methodName, boolean positive, @Nullable String errorMessageString) {\n+        Feedback feedback = new Feedback();\n+        feedback.setText(methodName);\n+        feedback.setDetailText(errorMessageString);\n+        feedback.setType(FeedbackType.AUTOMATIC);\n+        feedback.setPositive(positive);\n+        result.addFeedback(feedback);\n+    }\n+\n+    /**\n+     * adds the feedback to the result", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 156}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTA0Nzcx", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396504771", "createdAt": "2020-04-20T14:25:49Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoyNTo0OVrOGIXNXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoyNTo0OVrOGIXNXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMjA0Nw==", "bodyText": "Either use SecureRandom or UUID.randomUUID().toString()\nYou might need to replace \"-\" with a random number then.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411422047", "createdAt": "2020-04-20T14:25:49Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/util/VCSSimulationUtils.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package de.tum.in.www1.artemis.service.util;\n+\n+import java.util.Random;\n+\n+import org.springframework.context.annotation.Profile;\n+\n+@Profile(\"dev\")\n+public class VCSSimulationUtils {\n+\n+    /**\n+     * Simulates a commit Hash, the returned string consist out of 40 times the same number\n+     * @return the simulated commitHash\n+     */\n+    public static String simulateCommitHash() {\n+        Random random = new Random();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTA1Nzkz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396505793", "createdAt": "2020-04-20T14:26:56Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoyNjo1NlrOGIXQ2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoyNjo1NlrOGIXQ2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMjkzOQ==", "bodyText": "/exercises/{exerciseId}/submissions/no-vcs-and-ci-available", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411422939", "createdAt": "2020-04-20T14:26:56Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,149 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import static de.tum.in.www1.artemis.web.rest.util.ResponseUtil.forbidden;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+/**\n+ * Only for local development\n+ * Simulates submission and results for a programming exercise without a connection to the VCS and CI server\n+ * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+ */\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(ProgrammingSubmissionResultSimulationResource.Endpoints.ROOT)\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    private final ExerciseService exerciseService;\n+\n+    private final AuthorizationCheckService authCheckService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService, ExerciseService exerciseService,\n+            AuthorizationCheckService authCheckService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+        this.exerciseService = exerciseService;\n+        this.authCheckService = authCheckService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without a connection to the VCS and CI server\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param exerciseId the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(Endpoints.SUBMISSIONS_SIMULATION)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseId) {\n+\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Exercise exercise = exerciseService.findOne(exerciseId);\n+        if (!authCheckService.isAtLeastInstructorForExercise(exercise, user)) {\n+            return forbidden();\n+        }\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseId);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        try {\n+            return ResponseEntity.created(new URI(\"/api/submissions\" + programmingSubmission.getId())).body(programmingSubmission);\n+        }\n+        catch (URISyntaxException e) {\n+            log.error(\"Error while simulating a submission\", e);\n+            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n+                    .headers(HeaderUtil.createAlert(applicationName, \"An error occurred while simulating a submission: \" + e.getMessage(), \"errorSubmission\")).body(null);\n+        }\n+    }\n+\n+    /**\n+     * This method is used to notify artemis that there is a new programming exercise build result.\n+     * This result is only a SIMULATION for the testing of programming exercises without a connection\n+     * to the VCS and CI server\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param exerciseId id of the exercise\n+     * @return HTTP OK and Result\n+     */\n+    @PostMapping(Endpoints.RESULTS_SIMULATION)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> createNewProgrammingExerciseResult(@PathVariable Long exerciseId) {\n+        log.debug(\"Received result notify (NEW)\");\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseId);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndParticipantAnyState(programmingExercise, participant);\n+\n+        if (optionalStudentParticipation.isEmpty()) {\n+            return forbidden();\n+        }\n+\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        Result result = programmingSubmissionResultSimulationService.createResult(programmingExerciseStudentParticipation);\n+\n+        messagingService.broadcastNewResult((Participation) optionalStudentParticipation.get(), result);\n+        log.info(\"The new result for {} was saved successfully\", ((ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get()).getBuildPlanId());\n+        try {\n+            return ResponseEntity.created(new URI(\"/api/results\" + result.getId())).body(result);\n+        }\n+        catch (URISyntaxException e) {\n+            log.error(\"Error while simulating a result\", e);\n+            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n+                    .headers(HeaderUtil.createAlert(applicationName, \"An error occurred while simulating a result: \" + e.getMessage(), \"errorResult\")).body(null);\n+        }\n+    }\n+\n+    public static final class Endpoints {\n+\n+        public static final String ROOT = \"/api\";\n+\n+        public static final String SUBMISSIONS_SIMULATION = \"/submissions/no-vcs-and-ci-available/{exerciseId}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 143}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTA1OTYz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396505963", "createdAt": "2020-04-20T14:27:07Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoyNzowN1rOGIXRVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDoyNzowN1rOGIXRVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMzA2Mg==", "bodyText": "/exercises/{exerciseId}/results/no-vcs-and-ci-available", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411423062", "createdAt": "2020-04-20T14:27:07Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,149 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import static de.tum.in.www1.artemis.web.rest.util.ResponseUtil.forbidden;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+/**\n+ * Only for local development\n+ * Simulates submission and results for a programming exercise without a connection to the VCS and CI server\n+ * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+ */\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(ProgrammingSubmissionResultSimulationResource.Endpoints.ROOT)\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    private final ExerciseService exerciseService;\n+\n+    private final AuthorizationCheckService authCheckService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService, ExerciseService exerciseService,\n+            AuthorizationCheckService authCheckService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+        this.exerciseService = exerciseService;\n+        this.authCheckService = authCheckService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without a connection to the VCS and CI server\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param exerciseId the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(Endpoints.SUBMISSIONS_SIMULATION)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseId) {\n+\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Exercise exercise = exerciseService.findOne(exerciseId);\n+        if (!authCheckService.isAtLeastInstructorForExercise(exercise, user)) {\n+            return forbidden();\n+        }\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseId);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        try {\n+            return ResponseEntity.created(new URI(\"/api/submissions\" + programmingSubmission.getId())).body(programmingSubmission);\n+        }\n+        catch (URISyntaxException e) {\n+            log.error(\"Error while simulating a submission\", e);\n+            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n+                    .headers(HeaderUtil.createAlert(applicationName, \"An error occurred while simulating a submission: \" + e.getMessage(), \"errorSubmission\")).body(null);\n+        }\n+    }\n+\n+    /**\n+     * This method is used to notify artemis that there is a new programming exercise build result.\n+     * This result is only a SIMULATION for the testing of programming exercises without a connection\n+     * to the VCS and CI server\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param exerciseId id of the exercise\n+     * @return HTTP OK and Result\n+     */\n+    @PostMapping(Endpoints.RESULTS_SIMULATION)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> createNewProgrammingExerciseResult(@PathVariable Long exerciseId) {\n+        log.debug(\"Received result notify (NEW)\");\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseId);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndParticipantAnyState(programmingExercise, participant);\n+\n+        if (optionalStudentParticipation.isEmpty()) {\n+            return forbidden();\n+        }\n+\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        Result result = programmingSubmissionResultSimulationService.createResult(programmingExerciseStudentParticipation);\n+\n+        messagingService.broadcastNewResult((Participation) optionalStudentParticipation.get(), result);\n+        log.info(\"The new result for {} was saved successfully\", ((ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get()).getBuildPlanId());\n+        try {\n+            return ResponseEntity.created(new URI(\"/api/results\" + result.getId())).body(result);\n+        }\n+        catch (URISyntaxException e) {\n+            log.error(\"Error while simulating a result\", e);\n+            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n+                    .headers(HeaderUtil.createAlert(applicationName, \"An error occurred while simulating a result: \" + e.getMessage(), \"errorResult\")).body(null);\n+        }\n+    }\n+\n+    public static final class Endpoints {\n+\n+        public static final String ROOT = \"/api\";\n+\n+        public static final String SUBMISSIONS_SIMULATION = \"/submissions/no-vcs-and-ci-available/{exerciseId}\";\n+\n+        public static final String RESULTS_SIMULATION = \"/results/no-vcs-and-ci-available/{exerciseId}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 145}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTExMTk3", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396511197", "createdAt": "2020-04-20T14:32:34Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozMjozNFrOGIXiFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozMjozNFrOGIXiFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyNzM1MQ==", "bodyText": "please use a subscription and an async way here, e.g like the following code.\n    this.profileService.getProfileInfo().subscribe((profileInfo) => {\n        if (profileInfo && profileInfo.guidedTourMapping) {\n            this.guidedTourMapping = profileInfo.guidedTourMapping;\n        }\n    });", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411427351", "createdAt": "2020-04-20T14:32:34Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/update/programming-exercise-update.component.ts", "diffHunk": "@@ -139,6 +146,8 @@ export class ProgrammingExerciseUpdateComponent implements OnInit {\n         if (this.programmingExercise.id !== undefined) {\n             this.problemStatementLoaded = true;\n         }\n+        // Checks if the current environment is production\n+        this.inProductionEnvironment = this.profileService.isInProduction();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTE0MTM0", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396514134", "createdAt": "2020-04-20T14:35:44Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozNTo0NFrOGIXr0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozNTo0NFrOGIXr0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyOTg0Mg==", "bodyText": "please make sure that the angular app does not break due to this error", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411429842", "createdAt": "2020-04-20T14:35:44Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/services/programming-exercise-simulation.service.ts", "diffHunk": "@@ -0,0 +1,46 @@\n+import { Injectable } from '@angular/core';\n+import { SERVER_API_URL } from 'app/app.constants';\n+import { EntityResponseType, ProgrammingExerciseService } from 'app/exercises/programming/manage/services/programming-exercise.service';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+import { HttpClient } from '@angular/common/http';\n+import { map } from 'rxjs/operators';\n+import { Observable } from 'rxjs/Observable';\n+import { ProfileService } from 'app/shared/layouts/profiles/profile.service';\n+\n+/**\n+ *\n+ * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+ */\n+@Injectable({ providedIn: 'root' })\n+export class ProgrammingExerciseSimulationService {\n+    public resourceUrl = SERVER_API_URL + 'api/programming-exercises';\n+\n+    constructor(private http: HttpClient, private programmingExerciseService: ProgrammingExerciseService, private profileService: ProfileService) {}\n+\n+    /**\n+     * Triggers the creation and setup of a new programming exercise without connection\n+     * to the VCS and CI\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * @param programmingExercise\n+     */\n+    automaticSetupWithoutConnectionToVCSandCI(programmingExercise: ProgrammingExercise): Observable<EntityResponseType> {\n+        this.failsIfInProduction();\n+        const copy = this.programmingExerciseService.convertDataFromClient(programmingExercise);\n+        return this.http\n+            .post<ProgrammingExercise>(this.resourceUrl + '/no-vcs-and-ci-available', copy, { observe: 'response' })\n+            .pipe(map((res: EntityResponseType) => this.programmingExerciseService.convertDateFromServer(res)));\n+    }\n+\n+    /**\n+     * Checks if the current environment is production, if yes the method throws an error\n+     * This functionality is only for testing purposes (noVersionControlAndContinuousIntegrationAvailable)\n+     * It should prevent developers from misusing methods, which should be only used for testing\n+     */\n+    failsIfInProduction() {\n+        if (this.profileService.isInProduction()) {\n+            alert('This action is NOT supported on production and should NOT be visible. Please contact a developer immediately!');\n+            throw new Error('This action is NOT supported on production and should NOT be visible. Please contact a developer immediately!');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTE2NDIz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396516423", "createdAt": "2020-04-20T14:38:08Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozODowOVrOGIXy7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozODowOVrOGIXy7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzMTY2Mw==", "bodyText": "not needed, please remove", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411431663", "createdAt": "2020-04-20T14:38:09Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -52,8 +55,11 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n     studentParticipation: StudentParticipation | null;\n     isAfterAssessmentDueDate: boolean;\n     public gradingCriteria: GradingCriterion[];\n-\n+    private programmingExercise: ProgrammingExercise;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTE2NzU0", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396516754", "createdAt": "2020-04-20T14:38:32Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozODozMlrOGIX0DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozODozMlrOGIX0DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzMTk0OA==", "bodyText": "please separate this with a section from the real \"production\" code", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411431948", "createdAt": "2020-04-20T14:38:32Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -52,8 +55,11 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n     studentParticipation: StudentParticipation | null;\n     isAfterAssessmentDueDate: boolean;\n     public gradingCriteria: GradingCriterion[];\n-\n+    private programmingExercise: ProgrammingExercise;\n+    public wasSubmissionSimulated = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTE2OTQ5", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396516949", "createdAt": "2020-04-20T14:38:45Z", "commit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozODo0NVrOGIX0ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDozODo0NVrOGIX0ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzMjEzMQ==", "bodyText": "see above, this should be async", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411432131", "createdAt": "2020-04-20T14:38:45Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/shared/layouts/profiles/profile.service.ts", "diffHunk": "@@ -57,6 +57,13 @@ export class ProfileService {\n         return this.profileInfo;\n     }\n \n+    /**\n+     * Checks if the current profile is production\n+     */\n+    public isInProduction(): boolean {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9aff848146beedbbaab1d771f169a2dee8a69a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc9815f7984dbebbce19ea04673669cc98920b65", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/dc9815f7984dbebbce19ea04673669cc98920b65", "committedDate": "2020-04-20T15:39:16Z", "message": "changed random to secureRandom"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82aa64e950689f4aca9fe5b797369d5127c896bb", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/82aa64e950689f4aca9fe5b797369d5127c896bb", "committedDate": "2020-04-20T15:39:53Z", "message": "Merge remote-tracking branch 'origin/feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a10551f7ec15366494dc1ed2f3a64741ff8663ff", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a10551f7ec15366494dc1ed2f3a64741ff8663ff", "committedDate": "2020-04-20T15:41:09Z", "message": "added comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c26158c0e9a9309495eb1e4fcc934beab01842b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/1c26158c0e9a9309495eb1e4fcc934beab01842b", "committedDate": "2020-04-20T16:03:57Z", "message": "added subscription for the profileInfo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e37a2aa839dfb7c280087184bd29fea7c10b0c64", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e37a2aa839dfb7c280087184bd29fea7c10b0c64", "committedDate": "2020-04-20T16:24:51Z", "message": "removed the variable programmingExercise and commented the variables with are only used for the simulations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "236cd83000a1e85f3992126205102a62a9515a88", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/236cd83000a1e85f3992126205102a62a9515a88", "committedDate": "2020-04-20T16:29:31Z", "message": "adapted the result button, now the button will be disabled after a click"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83d71b6120aa34766de44381f772cecd113e5db3", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/83d71b6120aa34766de44381f772cecd113e5db3", "committedDate": "2020-04-20T17:37:22Z", "message": "refactoring of the rest URL paths"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzY3ODc1", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396767875", "createdAt": "2020-04-20T19:58:05Z", "commit": {"oid": "83d71b6120aa34766de44381f772cecd113e5db3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2Nzc0MDcy", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-396774072", "createdAt": "2020-04-20T20:07:23Z", "commit": {"oid": "83d71b6120aa34766de44381f772cecd113e5db3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDowNzoyM1rOGIljkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDowNzoyM1rOGIljkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY1NzEwNg==", "bodyText": "This can be changed in the follow-up PR:\nYou can simplify this code (and make it more readable in my opinion) by using the Strings class from com.google.common.base.Strings.\nThe code then looks like this:\nreturn Strings.repeat(number, 40);", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r411657106", "createdAt": "2020-04-20T20:07:23Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/util/VCSSimulationUtils.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package de.tum.in.www1.artemis.service.util;\n+\n+import java.security.SecureRandom;\n+\n+import org.springframework.context.annotation.Profile;\n+\n+@Profile(\"dev\")\n+public class VCSSimulationUtils {\n+\n+    /**\n+     * Simulates a commit Hash, the returned string consist out of 40 times the same number\n+     * @return the simulated commitHash\n+     */\n+    public static String simulateCommitHash() {\n+        SecureRandom secureRandom = new SecureRandom();\n+        String number = String.valueOf(secureRandom.nextInt(10));\n+        String commitHash = number;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83d71b6120aa34766de44381f772cecd113e5db3"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3a9cb7b2b4c5ed3098bc2681a394124d983b4c4", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e3a9cb7b2b4c5ed3098bc2681a394124d983b4c4", "committedDate": "2020-03-31T05:50:37Z", "message": "Added checkbox for no local Setup, name display of the checkbox doesn't work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce8054886d536fb9cb7f64583e7501a931445882", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ce8054886d536fb9cb7f64583e7501a931445882", "committedDate": "2020-04-01T20:42:52Z", "message": "New Exercises are added to the database, submissions are missing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d22a30091d69d8324b58091a180646cf5ebe3ae9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/d22a30091d69d8324b58091a180646cf5ebe3ae9", "committedDate": "2020-04-02T12:33:22Z", "message": "fixed bug, that the exercise was created twice"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2133c8368d73f4cda9c416107192537fd05eb2b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e2133c8368d73f4cda9c416107192537fd05eb2b", "committedDate": "2020-04-02T12:42:59Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5c6d3f19d4badf949c3699e1d949698ae03b519", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a5c6d3f19d4badf949c3699e1d949698ae03b519", "committedDate": "2020-04-02T21:41:43Z", "message": "refactored the setup, removed the button and now the initial submission and results are created"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "886aad211c30a88bead12b54202ad9c80655c1c5", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/886aad211c30a88bead12b54202ad9c80655c1c5", "committedDate": "2020-04-03T11:46:02Z", "message": "refactored the setup, now both configurations work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fc037a26b2312d4c66b0b8024444b17aff12952", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0fc037a26b2312d4c66b0b8024444b17aff12952", "committedDate": "2020-04-03T14:23:36Z", "message": "fixed small error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72ed7c9a9a53b44e4164b7e80f922f9ffa1ab794", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/72ed7c9a9a53b44e4164b7e80f922f9ffa1ab794", "committedDate": "2020-04-03T22:57:09Z", "message": "simulation of participation and submission works"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41e51c41dba3e245bd39e71bee60deb539794303", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/41e51c41dba3e245bd39e71bee60deb539794303", "committedDate": "2020-04-03T23:37:22Z", "message": "added new Restroute courses/result/no-local-setup/{exerciseID}"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "388204098845578bb15527a3fcaf0bfe3f6580d0", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/388204098845578bb15527a3fcaf0bfe3f6580d0", "committedDate": "2020-04-04T15:27:50Z", "message": "resolved bug of the simulation of the submission and implemented the result simulation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6533916ac2bba89c27ae86cfabb7b94140da5c4d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6533916ac2bba89c27ae86cfabb7b94140da5c4d", "committedDate": "2020-04-05T16:38:51Z", "message": "modified Url, the userid was removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23757431e3dd35e667eb49eeaa554b7040cccbd9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/23757431e3dd35e667eb49eeaa554b7040cccbd9", "committedDate": "2020-04-05T16:40:41Z", "message": "removed the noLocalSetup sorting option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba892027d3e09ac6e45f477c772f7bd91875f6b5", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ba892027d3e09ac6e45f477c772f7bd91875f6b5", "committedDate": "2020-04-05T16:43:29Z", "message": "fixed the bug that the name of the checkbox was not translated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eea247fc5496fdf7bfb1a92c4b0438e4f149ae3", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6eea247fc5496fdf7bfb1a92c4b0438e4f149ae3", "committedDate": "2020-04-05T16:46:18Z", "message": "added comments to functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb0b9f96dc02cf17d54633f565cc6505fd79c631", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/bb0b9f96dc02cf17d54633f565cc6505fd79c631", "committedDate": "2020-04-05T16:50:46Z", "message": "added checks for the buttons, so that they are not visible in production"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da24bdaaf4fd651eaa3fc6d92af704b2faca8f08", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/da24bdaaf4fd651eaa3fc6d92af704b2faca8f08", "committedDate": "2020-04-06T09:10:09Z", "message": "added Testcases for the setup/creation of programming exercises without local setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c657e44e02dcab6c9d30f7c4260b06369a7230ab", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/c657e44e02dcab6c9d30f7c4260b06369a7230ab", "committedDate": "2020-04-06T10:11:13Z", "message": "Fixed bug for the noLocalSetup Checkbox, now it will be rendered as expected"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eabbbb064ee9b649e6125e16cfd7c661d83270e", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6eabbbb064ee9b649e6125e16cfd7c661d83270e", "committedDate": "2020-04-06T10:28:07Z", "message": "replaced resource call with service call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca8bbd6f09e786e4ce7abf846291bc432d40279f", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ca8bbd6f09e786e4ce7abf846291bc432d40279f", "committedDate": "2020-04-06T16:55:06Z", "message": "created serves and moved methods from the resource to the service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9e77dcf458ee0ce33e228988a95645df70c20b8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e9e77dcf458ee0ce33e228988a95645df70c20b8", "committedDate": "2020-04-06T16:56:43Z", "message": "modified the subscriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0ef08da523f5f4949e537d7b1b176b09f2e9bc4", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/f0ef08da523f5f4949e537d7b1b176b09f2e9bc4", "committedDate": "2020-04-06T16:58:59Z", "message": "added two integration test to test if the submissions, participation and the result are created"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cdd888b8ea0a9016ca47d28885faa9ed8fe5e0d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/3cdd888b8ea0a9016ca47d28885faa9ed8fe5e0d", "committedDate": "2020-04-06T17:48:18Z", "message": "added method visibilityCheck, now the buttons should be also visible on the test server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01502ca0080a541d48f3bbc420150172f85c2b89", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/01502ca0080a541d48f3bbc420150172f85c2b89", "committedDate": "2020-04-06T17:49:43Z", "message": "added additional checks to the tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f484c661b7362a39ec05e564817106e8daae2341", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/f484c661b7362a39ec05e564817106e8daae2341", "committedDate": "2020-04-06T17:50:52Z", "message": "added two endpoint descriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cf3d97475a63e1a8529cbdd158617453fec8c9b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/8cf3d97475a63e1a8529cbdd158617453fec8c9b", "committedDate": "2020-04-06T17:52:12Z", "message": "modified http methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e80a585936762938c9ec6f48f425fa45b1a37c83", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e80a585936762938c9ec6f48f425fa45b1a37c83", "committedDate": "2020-04-06T21:36:32Z", "message": "improved integration test and specified more specific ResponseEntities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab3ec2571b78497cc40071106b7cc92fe96f218", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/bab3ec2571b78497cc40071106b7cc92fe96f218", "committedDate": "2020-04-06T21:54:51Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f154c460dc3ce65ba71bb2318a3f662d80790d9d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/f154c460dc3ce65ba71bb2318a3f662d80790d9d", "committedDate": "2020-04-06T22:29:30Z", "message": "modified JEST tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b963f30038285d105baacf4f9ab3d70f8a15e0b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0b963f30038285d105baacf4f9ab3d70f8a15e0b", "committedDate": "2020-04-06T22:29:55Z", "message": "modified naming scheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6658e4f6f21cf74098e7e4cd0aa0f7ccb74db1ca", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6658e4f6f21cf74098e7e4cd0aa0f7ccb74db1ca", "committedDate": "2020-04-07T10:04:04Z", "message": "fixed typo, now the buttons are styled as intended"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f7f76a7cbae54b792f9b575fd5e9e90ac5705b6", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/9f7f76a7cbae54b792f9b575fd5e9e90ac5705b6", "committedDate": "2020-04-07T11:30:28Z", "message": "fixed existing jest test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77c6efba62b6b98c8ecaf0b50ab7f783ed32c392", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/77c6efba62b6b98c8ecaf0b50ab7f783ed32c392", "committedDate": "2020-04-07T11:53:26Z", "message": "updated the javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6b83e37fb5fad59950d048d8543e87c9f8fa31b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/d6b83e37fb5fad59950d048d8543e87c9f8fa31b", "committedDate": "2020-04-07T13:24:18Z", "message": "added and modified comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "449c73eaf2f04093306302b5c140a117226b5771", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/449c73eaf2f04093306302b5c140a117226b5771", "committedDate": "2020-04-07T17:56:11Z", "message": "added comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b09d31cd539f15d12e1266862214aa0ac20ddf11", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b09d31cd539f15d12e1266862214aa0ac20ddf11", "committedDate": "2020-04-07T18:34:59Z", "message": "minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62bcbecf44999075699a5015d1c7c8435fc338b5", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/62bcbecf44999075699a5015d1c7c8435fc338b5", "committedDate": "2020-04-07T18:36:53Z", "message": "moved the new introduced exercise simulation functionality in their own resource and service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5063b9bb3fa4400f10dc829d43961f0c10e34e7", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b5063b9bb3fa4400f10dc829d43961f0c10e34e7", "committedDate": "2020-04-07T18:42:45Z", "message": "added missing comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9aaf84c0f351968bf43a174a845fdd9feb755402", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/9aaf84c0f351968bf43a174a845fdd9feb755402", "committedDate": "2020-04-07T19:05:07Z", "message": "changed folder structure, move to noLocalSetup folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae6f3d58395a8139abf5d1c7366bc95a4a2d92b6", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ae6f3d58395a8139abf5d1c7366bc95a4a2d92b6", "committedDate": "2020-04-07T19:22:02Z", "message": "changed folder structure, in order to pass the tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b48d1ff046f1ee1b19937aed02d373a6b21c288", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/7b48d1ff046f1ee1b19937aed02d373a6b21c288", "committedDate": "2020-04-08T07:41:00Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d23ee84c96212e4253457ccc60c6be03bc5ef42", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/1d23ee84c96212e4253457ccc60c6be03bc5ef42", "committedDate": "2020-04-08T08:42:30Z", "message": "now the buttons are only visible in dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e78e0271fee16aafe7cf2d721be7e92b87d3e9", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/72e78e0271fee16aafe7cf2d721be7e92b87d3e9", "committedDate": "2020-04-08T08:42:51Z", "message": "Merge remote-tracking branch 'origin/feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fe360939192476f2b835976f6127965688f3ab4", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/7fe360939192476f2b835976f6127965688f3ab4", "committedDate": "2020-04-08T08:50:26Z", "message": "Merge branch 'develop' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe8bd66028d519132936437d2cb77912d0aef5e8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/fe8bd66028d519132936437d2cb77912d0aef5e8", "committedDate": "2020-04-08T09:20:51Z", "message": "restore original method ordering, in order to avoid possible unwanted side effects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/2dfd1001010c3b9b429edec634b84892bc62276a", "committedDate": "2020-04-08T09:21:21Z", "message": "Merge remote-tracking branch 'origin/feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzczMzA2", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-390773306", "createdAt": "2020-04-09T13:06:21Z", "commit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMzowNjoyMVrOGDX07g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMzoyNDo1OFrOGDYi2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE4OTI5NA==", "bodyText": "Please remove them from here and use a local setup to prevent staging these files.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406189294", "createdAt": "2020-04-09T13:06:21Z", "author": {"login": "sleiss"}, "path": ".gitignore", "diffHunk": "@@ -6,6 +6,8 @@\n /src/test/javascript/PhantomJS*/\n /uploads\n /test-results.xml\n+/src/main/resources/config/application-artemis.yml\n+/src/main/resources/config/application-dev.yml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE4OTQyMw==", "bodyText": "Please remove them from here and use a local setup to prevent staging these files.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406189423", "createdAt": "2020-04-09T13:06:34Z", "author": {"login": "sleiss"}, "path": ".gitignore", "diffHunk": "@@ -68,7 +70,7 @@ classes/\n .local/share/JetBrains/\n .java/\n out/\n-\n+/src/main/resources/config/application-artemis.yml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5MTc3NQ==", "bodyText": "I would prefer a commitHash that is as long as a normal SHA-1 commitHash (I believe 40 chars) as the commit hash might be displayed somewhere in the future and we should be consistent here.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406191775", "createdAt": "2020-04-09T13:10:27Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,157 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingExerciseSimulationService(ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseScheduleService programmingExerciseScheduleService,\n+            GroupNotificationService groupNotificationService, ProgrammingExerciseService programmingExerciseService,\n+            TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository,\n+            SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseScheduleService = programmingExerciseScheduleService;\n+        this.groupNotificationService = groupNotificationService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.templateProgrammingExerciseParticipationRepository = templateProgrammingExerciseParticipationRepository;\n+        this.solutionProgrammingExerciseParticipationRepository = solutionProgrammingExerciseParticipationRepository;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Setups the context of a new programming exercise.\n+     * @param programmingExercise the exercise which should be stored in the database\n+     * @return returns the modified and stored programming exercise\n+     */\n+    @Transactional\n+    public ProgrammingExercise setupProgrammingExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise) {\n+        programmingExercise.generateAndSetProjectKey();\n+        final var projectKey = programmingExercise.getProjectKey();\n+        // TODO: the following code is used quite often and should be done in only one place\n+        final var exerciseRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TEMPLATE.getName();\n+        final var testRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TESTS.getName();\n+        final var solutionRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.SOLUTION.getName();\n+\n+        programmingExerciseService.initParticipations(programmingExercise);\n+        setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(programmingExercise, exerciseRepoName, testRepoName, solutionRepoName);\n+        // Save participations to get the ids required for the webhooks\n+        programmingExerciseService.connectBaseParticipationsToExerciseAndSave(programmingExercise);\n+\n+        // save to get the id required for the webhook\n+        programmingExercise = programmingExerciseRepository.save(programmingExercise);\n+\n+        // The creation of the webhooks must occur after the initial push, because the participation is\n+        // not yet saved in the database, so we cannot save the submission accordingly (see ProgrammingSubmissionService.notifyPush)\n+        programmingExerciseScheduleService.scheduleExerciseIfRequired(programmingExercise);\n+        groupNotificationService.notifyTutorGroupAboutExerciseCreated(programmingExercise);\n+\n+        return programmingExercise;\n+    }\n+\n+    /**\n+     * Sets the url and buildplan ids for the new exercise\n+     * @param programmingExercise the new exercise\n+     * @param exerciseRepoName the repo name of the new exercise\n+     * @param testRepoName the test repo name of the new exercise\n+     * @param solutionRepoName the solution repo name of the new exercise\n+     */\n+    private void setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise, String exerciseRepoName, String testRepoName,\n+            String solutionRepoName) {\n+        final var projectKey = programmingExercise.getProjectKey();\n+        final var templateParticipation = programmingExercise.getTemplateParticipation();\n+        final var solutionParticipation = programmingExercise.getSolutionParticipation();\n+        final var templatePlanName = TEMPLATE.getName();\n+        final var solutionPlanName = SOLUTION.getName();\n+        final var exerciseRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + exerciseRepoName + \".git\";\n+        final var testsRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + testRepoName + \".git\";\n+        final var solutionRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + solutionRepoName + \".git\";\n+        templateParticipation.setBuildPlanId(projectKey + \"-\" + templatePlanName);\n+        templateParticipation.setRepositoryUrl(exerciseRepoUrl);\n+        solutionParticipation.setBuildPlanId(projectKey + \"-\" + solutionPlanName);\n+        solutionParticipation.setRepositoryUrl(solutionRepoUrl);\n+        programmingExercise.setTestRepositoryUrl(testsRepoUrl);\n+    }\n+\n+    /**\n+     * This method creates the template and solution submissions and results for the new exercise\n+     * These submissions and results are SIMULATIONS for the testing of programming exercises without local setup\n+     * @param programmingExercise the new exercise\n+     */\n+    public void setupInitialSubmissionsAndResults(ProgrammingExercise programmingExercise) {\n+        Optional<TemplateProgrammingExerciseParticipation> templateProgrammingExerciseParticipation = this.templateProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        Optional<SolutionProgrammingExerciseParticipation> solutionProgrammingExerciseParticipation = this.solutionProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        String commitHashBase = \"abcdef01\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 120}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5MjU4Mw==", "bodyText": "I will address this in a different PR for the other occurences, but we should change this to 0 of 13 passed to be consistent with this: \n  \n    \n      Artemis/src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseTestCaseService.java\n    \n    \n         Line 251\n      in\n      044f7aa\n    \n    \n    \n    \n\n        \n          \n           String newResultString = successfulTestCases.size() + \" of \" + allTests.size() + \" passed\"; \n        \n    \n  \n\n\nThis is not a problem introduced by your PR, but we should change it.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406192583", "createdAt": "2020-04-09T13:11:55Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,157 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingExerciseSimulationService(ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseScheduleService programmingExerciseScheduleService,\n+            GroupNotificationService groupNotificationService, ProgrammingExerciseService programmingExerciseService,\n+            TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository,\n+            SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseScheduleService = programmingExerciseScheduleService;\n+        this.groupNotificationService = groupNotificationService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.templateProgrammingExerciseParticipationRepository = templateProgrammingExerciseParticipationRepository;\n+        this.solutionProgrammingExerciseParticipationRepository = solutionProgrammingExerciseParticipationRepository;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Setups the context of a new programming exercise.\n+     * @param programmingExercise the exercise which should be stored in the database\n+     * @return returns the modified and stored programming exercise\n+     */\n+    @Transactional\n+    public ProgrammingExercise setupProgrammingExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise) {\n+        programmingExercise.generateAndSetProjectKey();\n+        final var projectKey = programmingExercise.getProjectKey();\n+        // TODO: the following code is used quite often and should be done in only one place\n+        final var exerciseRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TEMPLATE.getName();\n+        final var testRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TESTS.getName();\n+        final var solutionRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.SOLUTION.getName();\n+\n+        programmingExerciseService.initParticipations(programmingExercise);\n+        setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(programmingExercise, exerciseRepoName, testRepoName, solutionRepoName);\n+        // Save participations to get the ids required for the webhooks\n+        programmingExerciseService.connectBaseParticipationsToExerciseAndSave(programmingExercise);\n+\n+        // save to get the id required for the webhook\n+        programmingExercise = programmingExerciseRepository.save(programmingExercise);\n+\n+        // The creation of the webhooks must occur after the initial push, because the participation is\n+        // not yet saved in the database, so we cannot save the submission accordingly (see ProgrammingSubmissionService.notifyPush)\n+        programmingExerciseScheduleService.scheduleExerciseIfRequired(programmingExercise);\n+        groupNotificationService.notifyTutorGroupAboutExerciseCreated(programmingExercise);\n+\n+        return programmingExercise;\n+    }\n+\n+    /**\n+     * Sets the url and buildplan ids for the new exercise\n+     * @param programmingExercise the new exercise\n+     * @param exerciseRepoName the repo name of the new exercise\n+     * @param testRepoName the test repo name of the new exercise\n+     * @param solutionRepoName the solution repo name of the new exercise\n+     */\n+    private void setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise, String exerciseRepoName, String testRepoName,\n+            String solutionRepoName) {\n+        final var projectKey = programmingExercise.getProjectKey();\n+        final var templateParticipation = programmingExercise.getTemplateParticipation();\n+        final var solutionParticipation = programmingExercise.getSolutionParticipation();\n+        final var templatePlanName = TEMPLATE.getName();\n+        final var solutionPlanName = SOLUTION.getName();\n+        final var exerciseRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + exerciseRepoName + \".git\";\n+        final var testsRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + testRepoName + \".git\";\n+        final var solutionRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + solutionRepoName + \".git\";\n+        templateParticipation.setBuildPlanId(projectKey + \"-\" + templatePlanName);\n+        templateParticipation.setRepositoryUrl(exerciseRepoUrl);\n+        solutionParticipation.setBuildPlanId(projectKey + \"-\" + solutionPlanName);\n+        solutionParticipation.setRepositoryUrl(solutionRepoUrl);\n+        programmingExercise.setTestRepositoryUrl(testsRepoUrl);\n+    }\n+\n+    /**\n+     * This method creates the template and solution submissions and results for the new exercise\n+     * These submissions and results are SIMULATIONS for the testing of programming exercises without local setup\n+     * @param programmingExercise the new exercise\n+     */\n+    public void setupInitialSubmissionsAndResults(ProgrammingExercise programmingExercise) {\n+        Optional<TemplateProgrammingExerciseParticipation> templateProgrammingExerciseParticipation = this.templateProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        Optional<SolutionProgrammingExerciseParticipation> solutionProgrammingExerciseParticipation = this.solutionProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        String commitHashBase = \"abcdef01\";\n+        ProgrammingSubmission programmingSubmissionBase = new ProgrammingSubmission();\n+        programmingSubmissionBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        programmingSubmissionBase.setSubmitted(true);\n+        programmingSubmissionBase.setType(SubmissionType.OTHER);\n+        programmingSubmissionBase.setCommitHash(commitHashBase);\n+        programmingSubmissionBase.setSubmissionDate(templateProgrammingExerciseParticipation.get().getInitializationDate());\n+        programmingSubmissionRepository.save(programmingSubmissionBase);\n+        Result resultBase = new Result();\n+        resultBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        resultBase.setSubmission(programmingSubmissionBase);\n+        resultBase.setRated(true);\n+        resultBase.resultString(\"13 of 13 failed\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 132}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5MjY4Nw==", "bodyText": "Same as above (length of hash).", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406192687", "createdAt": "2020-04-09T13:12:07Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,157 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingExerciseSimulationService(ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseScheduleService programmingExerciseScheduleService,\n+            GroupNotificationService groupNotificationService, ProgrammingExerciseService programmingExerciseService,\n+            TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository,\n+            SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseScheduleService = programmingExerciseScheduleService;\n+        this.groupNotificationService = groupNotificationService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.templateProgrammingExerciseParticipationRepository = templateProgrammingExerciseParticipationRepository;\n+        this.solutionProgrammingExerciseParticipationRepository = solutionProgrammingExerciseParticipationRepository;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Setups the context of a new programming exercise.\n+     * @param programmingExercise the exercise which should be stored in the database\n+     * @return returns the modified and stored programming exercise\n+     */\n+    @Transactional\n+    public ProgrammingExercise setupProgrammingExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise) {\n+        programmingExercise.generateAndSetProjectKey();\n+        final var projectKey = programmingExercise.getProjectKey();\n+        // TODO: the following code is used quite often and should be done in only one place\n+        final var exerciseRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TEMPLATE.getName();\n+        final var testRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TESTS.getName();\n+        final var solutionRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.SOLUTION.getName();\n+\n+        programmingExerciseService.initParticipations(programmingExercise);\n+        setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(programmingExercise, exerciseRepoName, testRepoName, solutionRepoName);\n+        // Save participations to get the ids required for the webhooks\n+        programmingExerciseService.connectBaseParticipationsToExerciseAndSave(programmingExercise);\n+\n+        // save to get the id required for the webhook\n+        programmingExercise = programmingExerciseRepository.save(programmingExercise);\n+\n+        // The creation of the webhooks must occur after the initial push, because the participation is\n+        // not yet saved in the database, so we cannot save the submission accordingly (see ProgrammingSubmissionService.notifyPush)\n+        programmingExerciseScheduleService.scheduleExerciseIfRequired(programmingExercise);\n+        groupNotificationService.notifyTutorGroupAboutExerciseCreated(programmingExercise);\n+\n+        return programmingExercise;\n+    }\n+\n+    /**\n+     * Sets the url and buildplan ids for the new exercise\n+     * @param programmingExercise the new exercise\n+     * @param exerciseRepoName the repo name of the new exercise\n+     * @param testRepoName the test repo name of the new exercise\n+     * @param solutionRepoName the solution repo name of the new exercise\n+     */\n+    private void setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise, String exerciseRepoName, String testRepoName,\n+            String solutionRepoName) {\n+        final var projectKey = programmingExercise.getProjectKey();\n+        final var templateParticipation = programmingExercise.getTemplateParticipation();\n+        final var solutionParticipation = programmingExercise.getSolutionParticipation();\n+        final var templatePlanName = TEMPLATE.getName();\n+        final var solutionPlanName = SOLUTION.getName();\n+        final var exerciseRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + exerciseRepoName + \".git\";\n+        final var testsRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + testRepoName + \".git\";\n+        final var solutionRepoUrl = \"http://localhost:7990/scm/\" + projectKey + \"/\" + solutionRepoName + \".git\";\n+        templateParticipation.setBuildPlanId(projectKey + \"-\" + templatePlanName);\n+        templateParticipation.setRepositoryUrl(exerciseRepoUrl);\n+        solutionParticipation.setBuildPlanId(projectKey + \"-\" + solutionPlanName);\n+        solutionParticipation.setRepositoryUrl(solutionRepoUrl);\n+        programmingExercise.setTestRepositoryUrl(testsRepoUrl);\n+    }\n+\n+    /**\n+     * This method creates the template and solution submissions and results for the new exercise\n+     * These submissions and results are SIMULATIONS for the testing of programming exercises without local setup\n+     * @param programmingExercise the new exercise\n+     */\n+    public void setupInitialSubmissionsAndResults(ProgrammingExercise programmingExercise) {\n+        Optional<TemplateProgrammingExerciseParticipation> templateProgrammingExerciseParticipation = this.templateProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        Optional<SolutionProgrammingExerciseParticipation> solutionProgrammingExerciseParticipation = this.solutionProgrammingExerciseParticipationRepository\n+                .findByProgrammingExerciseId(programmingExercise.getId());\n+        String commitHashBase = \"abcdef01\";\n+        ProgrammingSubmission programmingSubmissionBase = new ProgrammingSubmission();\n+        programmingSubmissionBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        programmingSubmissionBase.setSubmitted(true);\n+        programmingSubmissionBase.setType(SubmissionType.OTHER);\n+        programmingSubmissionBase.setCommitHash(commitHashBase);\n+        programmingSubmissionBase.setSubmissionDate(templateProgrammingExerciseParticipation.get().getInitializationDate());\n+        programmingSubmissionRepository.save(programmingSubmissionBase);\n+        Result resultBase = new Result();\n+        resultBase.setParticipation(templateProgrammingExerciseParticipation.get());\n+        resultBase.setSubmission(programmingSubmissionBase);\n+        resultBase.setRated(true);\n+        resultBase.resultString(\"13 of 13 failed\");\n+        resultBase.setAssessmentType(AssessmentType.AUTOMATIC);\n+        resultBase.score(0L);\n+        resultBase.setCompletionDate(templateProgrammingExerciseParticipation.get().getInitializationDate());\n+        resultRepository.save(resultBase);\n+\n+        ProgrammingSubmission programmingSubmissionSolution = new ProgrammingSubmission();\n+        String commitHashSolution = \"abcdef23\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5MzM1MQ==", "bodyText": "I would also prefer a longer commit hash here.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406193351", "createdAt": "2020-04-09T13:13:12Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingSubmissionResultSimulationService.java", "diffHunk": "@@ -0,0 +1,122 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.time.ZonedDateTime;\n+import java.util.Optional;\n+import java.util.Random;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.InitializationState;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.Participant;\n+import de.tum.in.www1.artemis.domain.participation.ProgrammingExerciseStudentParticipation;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.ParticipationRepository;\n+import de.tum.in.www1.artemis.repository.ProgrammingSubmissionRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+\n+@Service\n+public class ProgrammingSubmissionResultSimulationService {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseService.class);\n+\n+    private final ParticipationRepository participationRepository;\n+\n+    private final UserService userService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingSubmissionResultSimulationService(ParticipationRepository participationRepository, UserService userService,\n+            ProgrammingExerciseService programmingExerciseService, ParticipationService participationService, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.participationRepository = participationRepository;\n+        this.userService = userService;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.participationService = participationService;\n+    }\n+\n+    /**\n+     * This method creates a new participation for the provided user\n+     * @param programmingExercise the used programmingExercise\n+     * @param participant the participant object of the user\n+     * @param user the user who wants to particpate\n+     * @return the newly created and stored participation\n+     */\n+    public ProgrammingExerciseStudentParticipation createParticipation(ProgrammingExercise programmingExercise, Participant participant, User user) {\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = new ProgrammingExerciseStudentParticipation();\n+        programmingExerciseStudentParticipation.setBuildPlanId(programmingExercise.getProjectKey() + \"-\" + user.getLogin());\n+        programmingExerciseStudentParticipation.setParticipant(participant);\n+        programmingExerciseStudentParticipation.setInitializationState(InitializationState.INITIALIZED);\n+        programmingExerciseStudentParticipation.setRepositoryUrl(\"http://\" + user.getLogin() + \"@localhost7990/scm/\" + programmingExercise.getProjectKey() + \"/\"\n+                + programmingExercise.getProjectKey().toLowerCase() + \"-\" + user.getLogin() + \".git\");\n+        programmingExerciseStudentParticipation.setInitializationDate(ZonedDateTime.now());\n+        programmingExerciseStudentParticipation.setProgrammingExercise(programmingExercise);\n+        participationRepository.save(programmingExerciseStudentParticipation);\n+        return programmingExerciseStudentParticipation;\n+    }\n+\n+    /**\n+     * This method creates a new submission for the provided user\n+     * @param exerciseID the exerciseId of the exercise for which a submission should be created\n+     * @return the newly created and stored submission\n+     */\n+    public ProgrammingSubmission createSubmission(Long exerciseID) {\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseID);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndParticipantAnyState(programmingExercise, participant);\n+        if (optionalStudentParticipation.isEmpty()) {\n+            programmingExerciseStudentParticipation = createParticipation(programmingExercise, participant, user);\n+        }\n+        else {\n+            programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        }\n+\n+        ProgrammingSubmission programmingSubmission = new ProgrammingSubmission();\n+        Random random = new Random();\n+        programmingSubmission.setCommitHash(String.valueOf(random.nextInt(100000)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5NDExMA==", "bodyText": "This already exists in the ProgrammingExerciseResource, maybe we create a Constant to avoid duplication.\nSee TITLE_NAME_PATTERN for an example.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406194110", "createdAt": "2020-04-09T13:14:23Z", "author": {"login": "sleiss"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseSimulationResource.java", "diffHunk": "@@ -0,0 +1,190 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import static de.tum.in.www1.artemis.config.Constants.SHORT_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.config.Constants.TITLE_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.web.rest.util.ResponseUtil.forbidden;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.List;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import de.tum.in.www1.artemis.domain.Course;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.ProgrammingLanguage;\n+import de.tum.in.www1.artemis.repository.ProgrammingExerciseRepository;\n+import de.tum.in.www1.artemis.service.AuthorizationCheckService;\n+import de.tum.in.www1.artemis.service.CourseService;\n+import de.tum.in.www1.artemis.service.ProgrammingExerciseSimulationService;\n+import de.tum.in.www1.artemis.service.UserService;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggle;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+@RestController\n+@RequestMapping(ProgrammingExerciseSimulationResource.Endpoints.ROOT)\n+/**\n+ * Only for local development\n+ * Simulates the creation of a programming exercise without a local setup\n+ */\n+public class ProgrammingExerciseSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseResource.class);\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private static final String ENTITY_NAME = \"programmingExercise\";\n+\n+    private final CourseService courseService;\n+\n+    private final UserService userService;\n+\n+    private final AuthorizationCheckService authCheckService;\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final String packageNameRegex = \"^[a-z][a-z0-9_]*(\\\\.[a-z0-9_]+)+[0-9a-z_]$\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5Njc3NA==", "bodyText": "This is duplicated with the ProgrammingExerciseUpdateComponent, maybe you can refactor it to only use it once (maybe create a method isProdProfile or something like that in ProfileService?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406196774", "createdAt": "2020-04-09T13:18:38Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/app/overview/exercise-details/exercise-details-student-actions.component.ts", "diffHunk": "@@ -60,6 +64,22 @@ export class ExerciseDetailsStudentActionsComponent implements OnInit {\n                 this.getRepositoryPassword();\n             }\n         });\n+        // In order to check if the application is currently running on production\n+        this.profileService.getProfileInfo().subscribe(\n+            (profileInfo) => {\n+                if (profileInfo) {\n+                    this.profileInfo = profileInfo;\n+                }\n+            },\n+            (reason) => {},\n+        );\n+    }\n+\n+    /**\n+     * The button should be only visible in the dev environment\n+     */\n+    visibilityCheck(): boolean {\n+        return !this.profileInfo.inProduction;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5NzU0Ng==", "bodyText": "At the other occurrences, we translated submission with Einreichung, so we should be consistent here.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406197546", "createdAt": "2020-04-09T13:19:46Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/i18n/de/exercise.json", "diffHunk": "@@ -93,6 +93,8 @@\n             \"isText\": \"Das ist eine Text\u00fcbung\",\n             \"isFileUpload\": \"Das ist eine Datei-Upload-\u00dcbung\",\n             \"notificiationText\": \"Optional: Mitteilung \u00fcber die \u00c4nderung\",\n+            \"submissionSuccessful\": \"Die submission war erfolgreich\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE5OTkxOQ==", "bodyText": "I like this one more, but I don't care that much ;-)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"noLocalSetup\": \"Kein Lokaler Setup\",\n          \n          \n            \n                        \"noLocalSetup\": \"Kein lokales Setup\",", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406199919", "createdAt": "2020-04-09T13:23:21Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/i18n/de/programmingExercise.json", "diffHunk": "@@ -41,6 +41,7 @@\n             \"buildplans\": \"Build Pl\u00e4ne\",\n             \"publishBuildPlanUrl\": \"Build Plan ver\u00f6ffentlichen\",\n             \"allowOnlineEditor\": \"Online Editor erlauben\",\n+            \"noLocalSetup\": \"Kein Lokaler Setup\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjIwMDE5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"noLocalSetup\": \"No Local Setup\",\n          \n          \n            \n                        \"noLocalSetup\": \"No local Setup\",", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406200194", "createdAt": "2020-04-09T13:23:43Z", "author": {"login": "sleiss"}, "path": "src/main/webapp/i18n/en/programmingExercise.json", "diffHunk": "@@ -41,6 +41,7 @@\n             \"buildplans\": \"Build Plans\",\n             \"publishBuildPlanUrl\": \"Publish Build Plan\",\n             \"allowOnlineEditor\": \"Allow Online Editor\",\n+            \"noLocalSetup\": \"No Local Setup\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjIwMTA0OQ==", "bodyText": "Are all these <p> changes intended?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406201049", "createdAt": "2020-04-09T13:24:58Z", "author": {"login": "sleiss"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingSubmissionAndResultIntegrationTest.java", "diffHunk": "@@ -134,7 +135,7 @@ public void tearDown() {\n     /**\n      * The student commits, the code change is pushed to the VCS.\n      * The VCS notifies Artemis about a new submission.\n-     *\n+     * <p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2dfd1001010c3b9b429edec634b84892bc62276a"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e15845267216b97f7765429d36d50080c51ada2", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0e15845267216b97f7765429d36d50080c51ada2", "committedDate": "2020-04-09T19:23:07Z", "message": "Update src/main/webapp/i18n/en/programmingExercise.json\r\n\r\nchanged printed test\n\nCo-Authored-By: Simon Lei\u00df <5084100+sleiss@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c70d9731e368ba9978ab0d7a12f3e2be7ac9afe8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/c70d9731e368ba9978ab0d7a12f3e2be7ac9afe8", "committedDate": "2020-04-09T19:24:23Z", "message": "Update src/main/webapp/i18n/de/programmingExercise.json\r\n\r\napplied change to the printed name\n\nCo-Authored-By: Simon Lei\u00df <5084100+sleiss@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "589eb3c74afc5bffb70614169f2a2ce5c4ad0bb8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/589eb3c74afc5bffb70614169f2a2ce5c4ad0bb8", "committedDate": "2020-04-09T19:28:36Z", "message": "removed unintended commit characters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45d3337f17d1584f99497c540c9efdb5d6cdc8bf", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/45d3337f17d1584f99497c540c9efdb5d6cdc8bf", "committedDate": "2020-04-09T19:29:29Z", "message": "Merge remote-tracking branch 'origin/feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup' into feature/programming-exercise/simplify-submission-and-result-generation-in-the-local-setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d0caabd0f2c7aa938c8f042045a0bdb30205e70", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0d0caabd0f2c7aa938c8f042045a0bdb30205e70", "committedDate": "2020-04-09T19:32:26Z", "message": "adapted translation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be1da70339f61451ee18c7fd56326428a5bd7a8e", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/be1da70339f61451ee18c7fd56326428a5bd7a8e", "committedDate": "2020-04-09T19:36:48Z", "message": "adapted naming scheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c726d03b8fa3b0ad3ef2f3f99e572d61e15e620c", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/c726d03b8fa3b0ad3ef2f3f99e572d61e15e620c", "committedDate": "2020-04-09T19:44:31Z", "message": "modified gitignore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ab5ce12f90f8d6b3be9636ec4bb7ba4d182a451", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/7ab5ce12f90f8d6b3be9636ec4bb7ba4d182a451", "committedDate": "2020-04-09T20:21:56Z", "message": "added method to simulate the commit hash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/690ac363a5edb4ff9265837913689d57d0a9a9d4", "committedDate": "2020-04-10T10:49:55Z", "message": "added comment to method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDE4Njc2", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391418676", "createdAt": "2020-04-10T12:33:18Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozMzoxOFrOGD5RpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozMzoxOFrOGD5RpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczNzMxNg==", "bodyText": "this should only be available in DEV mode, please use a profile here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406737316", "createdAt": "2020-04-10T12:33:18Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,158 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Service", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDE4NzU2", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391418756", "createdAt": "2020-04-10T12:33:26Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozMzoyN1rOGD5R5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozMzoyN1rOGD5R5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczNzM4MA==", "bodyText": "this should only be available in DEV mode, please use a profile here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406737380", "createdAt": "2020-04-10T12:33:27Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingSubmissionResultSimulationService.java", "diffHunk": "@@ -0,0 +1,121 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.time.ZonedDateTime;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.InitializationState;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.Participant;\n+import de.tum.in.www1.artemis.domain.participation.ProgrammingExerciseStudentParticipation;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.ParticipationRepository;\n+import de.tum.in.www1.artemis.repository.ProgrammingSubmissionRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Service", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDE4Nzk4", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391418798", "createdAt": "2020-04-10T12:33:34Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozMzozNVrOGD5SDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozMzozNVrOGD5SDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczNzQyMQ==", "bodyText": "this should only be available in DEV mode, please use a profile here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406737421", "createdAt": "2020-04-10T12:33:35Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/util/VCSSimulationUtils.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package de.tum.in.www1.artemis.service.util;\n+\n+import java.util.Random;\n+\n+public class VCSSimulationUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDE5MDQz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391419043", "createdAt": "2020-04-10T12:34:11Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNDoxMVrOGD5TBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNDoxMVrOGD5TBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczNzY2OQ==", "bodyText": "please move these constants to another file and do not change ProgrammingExerciseResource at all", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406737669", "createdAt": "2020-04-10T12:34:11Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseResource.java", "diffHunk": "@@ -734,6 +733,12 @@ public ProgrammingExerciseResource(ProgrammingExerciseRepository programmingExer\n \n         public static final String SETUP = PROGRAMMING_EXERCISES + \"/setup\";\n \n+        public static final String NO_LOCAL_SETUP = PROGRAMMING_EXERCISES + \"/no-local-setup\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDE5MDc5", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391419079", "createdAt": "2020-04-10T12:34:18Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNDoxOFrOGD5TJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNDoxOFrOGD5TJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczNzcwMQ==", "bodyText": "this should only be available in DEV mode, please use a profile here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406737701", "createdAt": "2020-04-10T12:34:18Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseSimulationResource.java", "diffHunk": "@@ -0,0 +1,190 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import static de.tum.in.www1.artemis.config.Constants.SHORT_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.config.Constants.TITLE_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.web.rest.util.ResponseUtil.forbidden;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.List;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import de.tum.in.www1.artemis.domain.Course;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.ProgrammingLanguage;\n+import de.tum.in.www1.artemis.repository.ProgrammingExerciseRepository;\n+import de.tum.in.www1.artemis.service.AuthorizationCheckService;\n+import de.tum.in.www1.artemis.service.CourseService;\n+import de.tum.in.www1.artemis.service.ProgrammingExerciseSimulationService;\n+import de.tum.in.www1.artemis.service.UserService;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggle;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+@RestController", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwMDgz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420083", "createdAt": "2020-04-10T12:37:00Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzowMFrOGD5WdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzowMFrOGD5WdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczODU0OQ==", "bodyText": "I think some of the checks below are not necessary for a local setup, which would greatly reduce the code complexity here, e.g. title and short name checks, all programming language and package related checks, even the max score can be left out", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406738549", "createdAt": "2020-04-10T12:37:00Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseSimulationResource.java", "diffHunk": "@@ -0,0 +1,190 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import static de.tum.in.www1.artemis.config.Constants.SHORT_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.config.Constants.TITLE_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.web.rest.util.ResponseUtil.forbidden;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.List;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import de.tum.in.www1.artemis.domain.Course;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.ProgrammingLanguage;\n+import de.tum.in.www1.artemis.repository.ProgrammingExerciseRepository;\n+import de.tum.in.www1.artemis.service.AuthorizationCheckService;\n+import de.tum.in.www1.artemis.service.CourseService;\n+import de.tum.in.www1.artemis.service.ProgrammingExerciseSimulationService;\n+import de.tum.in.www1.artemis.service.UserService;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggle;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+@RestController\n+@RequestMapping(ProgrammingExerciseSimulationResource.Endpoints.ROOT)\n+/**\n+ * Only for local development\n+ * Simulates the creation of a programming exercise without a local setup\n+ */\n+public class ProgrammingExerciseSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseResource.class);\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private static final String ENTITY_NAME = \"programmingExercise\";\n+\n+    private final CourseService courseService;\n+\n+    private final UserService userService;\n+\n+    private final AuthorizationCheckService authCheckService;\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final String packageNameRegex = \"^[a-z][a-z0-9_]*(\\\\.[a-z0-9_]+)+[0-9a-z_]$\";\n+\n+    private final Pattern packageNamePattern = Pattern.compile(packageNameRegex);\n+\n+    private final ProgrammingExerciseSimulationService programmingExerciseSimulationService;\n+\n+    public ProgrammingExerciseSimulationResource(CourseService courseService, UserService userService, AuthorizationCheckService authCheckService,\n+            ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseSimulationService programmingExerciseSimulationService) {\n+        this.courseService = courseService;\n+        this.userService = userService;\n+        this.authCheckService = authCheckService;\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseSimulationService = programmingExerciseSimulationService;\n+    }\n+\n+    /**\n+     * POST /programming-exercises/no-local-setup: Setup a new programmingExercise\n+     * This method creates a new exercise\n+     * This exercise is only a SIMULATION for the testing of programming exercises without local setup\n+     * @param programmingExercise the input to create/setup new exercise\n+     * @return a Response Entity\n+     */\n+    @PostMapping(ProgrammingExerciseSimulationResource.Endpoints.NO_LOCAL_SETUP)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    @FeatureToggle(Feature.PROGRAMMING_EXERCISES)\n+    public ResponseEntity<ProgrammingExercise> setupProgrammingExerciseWithoutLocalSetup(@RequestBody ProgrammingExercise programmingExercise) {\n+        log.debug(\"REST request to setup ProgrammingExercise : {}\", programmingExercise);\n+        if (programmingExercise.getId() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 87}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwMTYw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420160", "createdAt": "2020-04-10T12:37:16Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzoxNlrOGD5WuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzoxNlrOGD5WuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczODYxNw==", "bodyText": "please remove Transactional here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406738617", "createdAt": "2020-04-10T12:37:16Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@RestController\n+@RequestMapping(\"/api\")\n+@Transactional", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwMTk1", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420195", "createdAt": "2020-04-10T12:37:21Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzoyMVrOGD5Wzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzoyMVrOGD5Wzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczODYzOQ==", "bodyText": "this should only be available in DEV mode, please use a profile here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406738639", "createdAt": "2020-04-10T12:37:21Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@RestController\n+@RequestMapping(\"/api\")\n+@Transactional\n+public class ProgrammingSubmissionResultSimulationResource {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwMzM5", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420339", "createdAt": "2020-04-10T12:37:43Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzo0M1rOGD5XNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozNzo0M1rOGD5XNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczODc0MQ==", "bodyText": "please remove the comment, this will never work for LTI", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406738741", "createdAt": "2020-04-10T12:37:43Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@RestController\n+@RequestMapping(\"/api\")\n+@Transactional\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseID) {\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseID);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        return ResponseEntity.ok().body(programmingSubmission);\n+    }\n+\n+    /**\n+     * This method is used to notify artemis that there is a new programming exercise build result.\n+     * This result is only a SIMULATION for the testing of programming exercises without local setup\n+     *\n+     * @param exerciseID id of the exercise\n+     * @return HTTP OK and Result\n+     */\n+    @PostMapping(value = \"results/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> createNewProgrammingExerciseResult(@PathVariable Long exerciseID) {\n+        log.debug(\"Received result notify (NEW)\");\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseID);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndParticipantAnyState(programmingExercise, participant);\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        Result result = programmingSubmissionResultSimulationService.createResult(programmingExerciseStudentParticipation);\n+\n+        messagingService.broadcastNewResult((Participation) optionalStudentParticipation.get(), result);\n+        // TODO: can we avoid to invoke this code for non LTI students? (to improve performance) // if (participation.isLti()) { // }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 86}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwNTU1", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420555", "createdAt": "2020-04-10T12:38:14Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozODoxNFrOGD5X7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozODoxNFrOGD5X7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczODkyNw==", "bodyText": "I don't really like this name. Either call it \"local-setup\" or something with \"simulation\"", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406738927", "createdAt": "2020-04-10T12:38:14Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseSimulationResource.java", "diffHunk": "@@ -0,0 +1,190 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import static de.tum.in.www1.artemis.config.Constants.SHORT_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.config.Constants.TITLE_NAME_PATTERN;\n+import static de.tum.in.www1.artemis.web.rest.util.ResponseUtil.forbidden;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.List;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import de.tum.in.www1.artemis.domain.Course;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.ProgrammingLanguage;\n+import de.tum.in.www1.artemis.repository.ProgrammingExerciseRepository;\n+import de.tum.in.www1.artemis.service.AuthorizationCheckService;\n+import de.tum.in.www1.artemis.service.CourseService;\n+import de.tum.in.www1.artemis.service.ProgrammingExerciseSimulationService;\n+import de.tum.in.www1.artemis.service.UserService;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggle;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+@RestController\n+@RequestMapping(ProgrammingExerciseSimulationResource.Endpoints.ROOT)\n+/**\n+ * Only for local development\n+ * Simulates the creation of a programming exercise without a local setup\n+ */\n+public class ProgrammingExerciseSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseResource.class);\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private static final String ENTITY_NAME = \"programmingExercise\";\n+\n+    private final CourseService courseService;\n+\n+    private final UserService userService;\n+\n+    private final AuthorizationCheckService authCheckService;\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final String packageNameRegex = \"^[a-z][a-z0-9_]*(\\\\.[a-z0-9_]+)+[0-9a-z_]$\";\n+\n+    private final Pattern packageNamePattern = Pattern.compile(packageNameRegex);\n+\n+    private final ProgrammingExerciseSimulationService programmingExerciseSimulationService;\n+\n+    public ProgrammingExerciseSimulationResource(CourseService courseService, UserService userService, AuthorizationCheckService authCheckService,\n+            ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseSimulationService programmingExerciseSimulationService) {\n+        this.courseService = courseService;\n+        this.userService = userService;\n+        this.authCheckService = authCheckService;\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseSimulationService = programmingExerciseSimulationService;\n+    }\n+\n+    /**\n+     * POST /programming-exercises/no-local-setup: Setup a new programmingExercise\n+     * This method creates a new exercise\n+     * This exercise is only a SIMULATION for the testing of programming exercises without local setup\n+     * @param programmingExercise the input to create/setup new exercise\n+     * @return a Response Entity\n+     */\n+    @PostMapping(ProgrammingExerciseSimulationResource.Endpoints.NO_LOCAL_SETUP)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    @FeatureToggle(Feature.PROGRAMMING_EXERCISES)\n+    public ResponseEntity<ProgrammingExercise> setupProgrammingExerciseWithoutLocalSetup(@RequestBody ProgrammingExercise programmingExercise) {\n+        log.debug(\"REST request to setup ProgrammingExercise : {}\", programmingExercise);\n+        if (programmingExercise.getId() != null) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"A new programmingExercise cannot already have an ID\", \"idexists\")).body(null);\n+        }\n+\n+        if (programmingExercise.getCourse() == null) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The course is not set\", \"courseNotSet\")).body(null);\n+        }\n+\n+        // fetch course from database to make sure client didn't change groups\n+        Course course = courseService.findOne(programmingExercise.getCourse().getId());\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        if (!authCheckService.isInstructorInCourse(course, user) && !authCheckService.isAdmin()) {\n+            return forbidden();\n+        }\n+\n+        // security mechanism: make sure that we use the values from the database and not the once which might have been altered in the client\n+        programmingExercise.setCourse(course);\n+\n+        // Check if exercise title is set\n+        if (programmingExercise.getTitle() == null || programmingExercise.getTitle().length() < 3) {\n+            return ResponseEntity.badRequest()\n+                    .headers(HeaderUtil.createAlert(applicationName, \"The title of the programming exercise is too short\", \"programmingExerciseTitleInvalid\")).body(null);\n+        }\n+\n+        // Check if the exercise title matches regex\n+        Matcher titleMatcher = TITLE_NAME_PATTERN.matcher(programmingExercise.getTitle());\n+        if (!titleMatcher.matches()) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The title is invalid\", \"titleInvalid\")).body(null);\n+        }\n+\n+        // Check if exercise shortname is set\n+        if (programmingExercise.getShortName() == null || programmingExercise.getShortName().length() < 3) {\n+            return ResponseEntity.badRequest()\n+                    .headers(HeaderUtil.createAlert(applicationName, \"The shortname of the programming exercise is not set or too short\", \"programmingExerciseShortnameInvalid\"))\n+                    .body(null);\n+        }\n+\n+        // Check if course shortname is set\n+        if (course.getShortName() == null || course.getShortName().length() < 3) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The shortname of the course is not set or too short\", \"courseShortnameInvalid\"))\n+                    .body(null);\n+        }\n+\n+        // Check if exercise shortname matches regex\n+        Matcher shortNameMatcher = SHORT_NAME_PATTERN.matcher(programmingExercise.getShortName());\n+        if (!shortNameMatcher.matches()) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The shortname is invalid\", \"shortnameInvalid\")).body(null);\n+        }\n+\n+        List<ProgrammingExercise> programmingExercisesWithSameShortName = programmingExerciseRepository.findAllByShortNameAndCourse(programmingExercise.getShortName(), course);\n+        if (programmingExercisesWithSameShortName.size() > 0) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName,\n+                    \"A programming exercise with the same short name already exists. Please choose a different short name.\", \"shortnameAlreadyExists\")).body(null);\n+        }\n+\n+        // Check if programming language is set\n+        if (programmingExercise.getProgrammingLanguage() == null) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"No programming language was specified\", \"programmingLanguageNotSet\")).body(null);\n+        }\n+\n+        // Check if package name is set\n+        if (programmingExercise.getProgrammingLanguage() == ProgrammingLanguage.JAVA) {\n+            // only Java needs a valid package name at the moment\n+            if (programmingExercise.getPackageName() == null || programmingExercise.getPackageName().length() < 3) {\n+                return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The package name is invalid\", \"packagenameInvalid\")).body(null);\n+            }\n+\n+            // Check if package name matches regex\n+            Matcher packageNameMatcher = packageNamePattern.matcher(programmingExercise.getPackageName());\n+            if (!packageNameMatcher.matches()) {\n+                return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The package name is invalid\", \"packagenameInvalid\")).body(null);\n+            }\n+        }\n+\n+        // Check if max score is set\n+        if (programmingExercise.getMaxScore() == null) {\n+            return ResponseEntity.badRequest().headers(HeaderUtil.createAlert(applicationName, \"The max score is invalid\", \"maxscoreInvalid\")).body(null);\n+        }\n+\n+        programmingExercise.generateAndSetProjectKey();\n+        try {\n+            ProgrammingExercise newProgrammingExercise = programmingExerciseSimulationService.setupProgrammingExerciseWithoutLocalSetup(programmingExercise); // Setup all\n+                                                                                                                                                              // repositories etc\n+            programmingExerciseSimulationService.setupInitialSubmissionsAndResults(programmingExercise);\n+            return ResponseEntity.created(new URI(\"/api/programming-exercises\" + newProgrammingExercise.getId()))\n+                    .headers(HeaderUtil.createEntityCreationAlert(applicationName, true, ENTITY_NAME, newProgrammingExercise.getTitle())).body(newProgrammingExercise);\n+        }\n+        catch (URISyntaxException e) {\n+            log.error(\"Error while setting up programming exercise\", e);\n+            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n+                    .headers(HeaderUtil.createAlert(applicationName, \"An error occurred while setting up the exercise: \" + e.getMessage(), \"errorProgrammingExercise\")).body(null);\n+        }\n+    }\n+\n+    public static final class Endpoints {\n+\n+        public static final String ROOT = \"/api\";\n+\n+        public static final String PROGRAMMING_EXERCISES = \"/programming-exercises\";\n+\n+        public static final String NO_LOCAL_SETUP = PROGRAMMING_EXERCISES + \"/no-local-setup\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 187}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwODA3", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420807", "createdAt": "2020-04-10T12:38:53Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozODo1M1rOGD5Yzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozODo1M1rOGD5Yzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczOTE1MQ==", "bodyText": "Please do not mix up actual functionality and one for simulation. We should separate this as strictly as possible!", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406739151", "createdAt": "2020-04-10T12:38:53Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/course/manage/course-management.service.ts", "diffHunk": "@@ -223,6 +225,7 @@ export class CourseManagementService {\n @Injectable({ providedIn: 'root' })\n export class CourseExerciseService {\n     private resourceUrl = SERVER_API_URL + `api/courses`;\n+    private resourceUrlWithoutLocalSetup = SERVER_API_URL + `api`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIwOTU3", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391420957", "createdAt": "2020-04-10T12:39:16Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozOToxNlrOGD5Zcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozOToxNlrOGD5Zcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczOTMxNQ==", "bodyText": "This should only be shown in the DEV mode", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406739315", "createdAt": "2020-04-10T12:39:16Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/programming-exercise-detail.component.html", "diffHunk": "@@ -120,6 +120,10 @@ <h2><span jhiTranslate=\"artemisApp.programmingExercise.detail.title\">Programming\n                 <dd>\n                     <span>{{ programmingExercise.allowOnlineEditor }}</span>\n                 </dd>\n+                <dt><span jhiTranslate=\"artemisApp.programmingExercise.noLocalSetup\">No Local Setup</span></dt>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIxMDg0", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391421084", "createdAt": "2020-04-10T12:39:36Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozOTozN1rOGD5Z6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjozOTozN1rOGD5Z6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczOTQzNA==", "bodyText": "again, I would separate this into a different service", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406739434", "createdAt": "2020-04-10T12:39:37Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/services/programming-exercise.service.ts", "diffHunk": "@@ -35,6 +35,17 @@ export class ProgrammingExerciseService {\n             .pipe(map((res: EntityResponseType) => this.convertDateFromServer(res)));\n     }\n \n+    /**\n+     * Triggers the creation and setup of a new programming exercise\n+     * @param programmingExercise\n+     */\n+    automaticSetupWithoutLocalSetup(programmingExercise: ProgrammingExercise): Observable<EntityResponseType> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIxMzMw", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391421330", "createdAt": "2020-04-10T12:40:08Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjo0MDowOFrOGD5aww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjo0MDowOFrOGD5aww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjczOTY1MQ==", "bodyText": "visibilityCheck is not a good method name here", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406739651", "createdAt": "2020-04-10T12:40:08Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/exercises/programming/manage/update/programming-exercise-update.component.html", "diffHunk": "@@ -212,6 +212,14 @@ <h4 *ngIf=\"isImport\" id=\"jhi-programming-exercise-heading-import\" jhiTranslate=\"\n                         </label>\n                     </div>\n                 </div>\n+                <div class=\"form-group-narrow\" *ngIf=\"visibilityCheck()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIxNzg0", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391421784", "createdAt": "2020-04-10T12:41:12Z", "commit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjo0MToxMlrOGD5cOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjo0MToxMlrOGD5cOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc0MDAyNA==", "bodyText": "please only show these buttons in the exercise details page", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r406740024", "createdAt": "2020-04-10T12:41:12Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/exercise-details/exercise-details-student-actions.component.html", "diffHunk": "@@ -229,6 +229,12 @@\n             *ngIf=\"participationStatusWrapper() === ParticipationStatus.INACTIVE && isStartExerciseAvailable()\"\n             (click)=\"resumeProgrammingExercise()\"\n         ></button>\n+        <button class=\"dev-button\" id=\"submission\" *ngIf=\"visibilityCheck()\" (click)=\"simulateSubmission()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "690ac363a5edb4ff9265837913689d57d0a9a9d4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cb93deedb3dece5b35f6c1a42a6ec2ce8a28ab0", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/9cb93deedb3dece5b35f6c1a42a6ec2ce8a28ab0", "committedDate": "2020-04-10T16:40:36Z", "message": "added button feedback, hover and click effect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a25a420453e3f686a45fca291904453e688ab1", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a5a25a420453e3f686a45fca291904453e688ab1", "committedDate": "2020-04-10T19:15:44Z", "message": "adjusted the visualization of the repositories and build plan links, for the no local setup scenario.\nAlso adjusted the urls of the no local setup repos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0942a9229f53a510307d8db1864e80d5f2559e2c", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/0942a9229f53a510307d8db1864e80d5f2559e2c", "committedDate": "2020-04-10T20:02:34Z", "message": "moved the simulation endpoints to the simulation classes and adjusted the naming\nremoved an unnecessary comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98631c3e0c0743de500f5a521c9d16b03a4c4d34", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/98631c3e0c0743de500f5a521c9d16b03a4c4d34", "committedDate": "2020-04-10T20:03:49Z", "message": "adjusted and resolved the dependency problems of the tests caused by to the move of the endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02830866454cce9d491734b1685a96c47ee73509", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/02830866454cce9d491734b1685a96c47ee73509", "committedDate": "2020-04-10T20:22:17Z", "message": "remove input checks and the connected test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf7d016806dae8654f41d24969f60d156144e683", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/cf7d016806dae8654f41d24969f60d156144e683", "committedDate": "2020-04-11T09:34:51Z", "message": "created new simulation service and moved the method declaration of automaticSetupWithoutLocalSetup there"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be78a6611c6a9c440e017a2d3c8d464e2c196920", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/be78a6611c6a9c440e017a2d3c8d464e2c196920", "committedDate": "2020-04-11T13:20:02Z", "message": "created new simulation service and moved the method declaration of simulationSubmission/Result there"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b7c7c31cb46bca79f8a25bf8d2d760f30f440d2", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/6b7c7c31cb46bca79f8a25bf8d2d760f30f440d2", "committedDate": "2020-04-11T18:11:07Z", "message": "added Profile annotation dev and adjusted the testcases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f13253c0205c68be000e257122e124bf1fe9708", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/5f13253c0205c68be000e257122e124bf1fe9708", "committedDate": "2020-04-11T19:46:41Z", "message": "added method to profile service, to check if the current profile is production"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62fae67c3dabc2460deba26535be8d1edbe6d362", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/62fae67c3dabc2460deba26535be8d1edbe6d362", "committedDate": "2020-04-11T20:32:30Z", "message": "now the buttons are only visible in the course exercise detail view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f500b5f74c5a21a33692523a0cf2797798590ae", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/5f500b5f74c5a21a33692523a0cf2797798590ae", "committedDate": "2020-04-11T20:34:12Z", "message": "added the dev profile annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfe3e4b3f1c1bb32fe443042b6a3e2a5f9d9faa8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/bfe3e4b3f1c1bb32fe443042b6a3e2a5f9d9faa8", "committedDate": "2020-04-12T09:20:08Z", "message": "removed unused dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6587fbdf5afed6da34c6999686dd4b7471ca08e", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a6587fbdf5afed6da34c6999686dd4b7471ca08e", "committedDate": "2020-04-12T11:40:40Z", "message": "now the submission and the result buttons are only visible for the programming exercises without a setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0b2b072287a5a73602aa0a28ff8d52aa0e4663a", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/f0b2b072287a5a73602aa0a28ff8d52aa0e4663a", "committedDate": "2020-04-12T11:41:56Z", "message": "additional changes of the previous commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42273b69a13bf5da434b041fa66ab404fde7328e", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/42273b69a13bf5da434b041fa66ab404fde7328e", "committedDate": "2020-04-12T12:00:23Z", "message": "removed this part, because the value of the variable will be never assigned"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/bd386cf6e06e0811899bf5b02af9fbe293ceb66d", "committedDate": "2020-04-12T12:36:46Z", "message": "removed the transactional annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a79be88983b5f13228ed95a18fc294d47976fd9b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/a79be88983b5f13228ed95a18fc294d47976fd9b", "committedDate": "2020-04-12T17:28:11Z", "message": "adjusted the simulated url format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODk1NjMz", "url": "https://github.com/ls1intum/Artemis/pull/1292#pullrequestreview-391895633", "createdAt": "2020-04-12T21:14:43Z", "commit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMToxNDo0NFrOGEYwUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMjo0MjozNlrOGEZREQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1MzA3NQ==", "bodyText": "Can you add a constant for the duplicated string value? Maybe as a static final variable in the class?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407253075", "createdAt": "2020-04-12T21:14:44Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingExerciseSimulationService.java", "diffHunk": "@@ -0,0 +1,160 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.SOLUTION;\n+import static de.tum.in.www1.artemis.domain.enumeration.BuildPlanType.TEMPLATE;\n+\n+import java.util.Optional;\n+\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.RepositoryType;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.SolutionProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.domain.participation.TemplateProgrammingExerciseParticipation;\n+import de.tum.in.www1.artemis.repository.*;\n+import de.tum.in.www1.artemis.service.scheduled.ProgrammingExerciseScheduleService;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingExerciseSimulationService {\n+\n+    private final ProgrammingExerciseRepository programmingExerciseRepository;\n+\n+    private final ProgrammingExerciseScheduleService programmingExerciseScheduleService;\n+\n+    private final GroupNotificationService groupNotificationService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository;\n+\n+    private final SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingExerciseSimulationService(ProgrammingExerciseRepository programmingExerciseRepository, ProgrammingExerciseScheduleService programmingExerciseScheduleService,\n+            GroupNotificationService groupNotificationService, ProgrammingExerciseService programmingExerciseService,\n+            TemplateProgrammingExerciseParticipationRepository templateProgrammingExerciseParticipationRepository,\n+            SolutionProgrammingExerciseParticipationRepository solutionProgrammingExerciseParticipationRepository, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.programmingExerciseRepository = programmingExerciseRepository;\n+        this.programmingExerciseScheduleService = programmingExerciseScheduleService;\n+        this.groupNotificationService = groupNotificationService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.templateProgrammingExerciseParticipationRepository = templateProgrammingExerciseParticipationRepository;\n+        this.solutionProgrammingExerciseParticipationRepository = solutionProgrammingExerciseParticipationRepository;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+    }\n+\n+    /**\n+     * Setups the context of a new programming exercise.\n+     * @param programmingExercise the exercise which should be stored in the database\n+     * @return returns the modified and stored programming exercise\n+     */\n+    @Transactional\n+    public ProgrammingExercise setupProgrammingExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise) {\n+        programmingExercise.generateAndSetProjectKey();\n+        final var projectKey = programmingExercise.getProjectKey();\n+        // TODO: the following code is used quite often and should be done in only one place\n+        final var exerciseRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TEMPLATE.getName();\n+        final var testRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.TESTS.getName();\n+        final var solutionRepoName = projectKey.toLowerCase() + \"-\" + RepositoryType.SOLUTION.getName();\n+\n+        programmingExerciseService.initParticipations(programmingExercise);\n+        setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(programmingExercise, exerciseRepoName, testRepoName, solutionRepoName);\n+        // Save participations to get the ids required for the webhooks\n+        programmingExerciseService.connectBaseParticipationsToExerciseAndSave(programmingExercise);\n+\n+        // save to get the id required for the webhook\n+        programmingExercise = programmingExerciseRepository.save(programmingExercise);\n+\n+        // The creation of the webhooks must occur after the initial push, because the participation is\n+        // not yet saved in the database, so we cannot save the submission accordingly (see ProgrammingSubmissionService.notifyPush)\n+        programmingExerciseScheduleService.scheduleExerciseIfRequired(programmingExercise);\n+        groupNotificationService.notifyTutorGroupAboutExerciseCreated(programmingExercise);\n+\n+        return programmingExercise;\n+    }\n+\n+    /**\n+     * Sets the url and buildplan ids for the new exercise\n+     * @param programmingExercise the new exercise\n+     * @param exerciseRepoName the repo name of the new exercise\n+     * @param testRepoName the test repo name of the new exercise\n+     * @param solutionRepoName the solution repo name of the new exercise\n+     */\n+    private void setURLsAndBuildPlanIDsForNewExerciseWithoutLocalSetup(ProgrammingExercise programmingExercise, String exerciseRepoName, String testRepoName,\n+            String solutionRepoName) {\n+        final var projectKey = programmingExercise.getProjectKey();\n+        final var templateParticipation = programmingExercise.getTemplateParticipation();\n+        final var solutionParticipation = programmingExercise.getSolutionParticipation();\n+        final var templatePlanName = TEMPLATE.getName();\n+        final var solutionPlanName = SOLUTION.getName();\n+        final var exerciseRepoUrl = \"http://nolocalsetup:7990/scm/\" + projectKey + \"/\" + exerciseRepoName + \".git\";\n+        final var testsRepoUrl = \"http://nolocalsetup:7990/scm/\" + projectKey + \"/\" + testRepoName + \".git\";\n+        final var solutionRepoUrl = \"http://nolocalsetup:7990/scm/\" + projectKey + \"/\" + solutionRepoName + \".git\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1MzIwNQ==", "bodyText": "Colon : before port missing.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407253205", "createdAt": "2020-04-12T21:16:23Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingSubmissionResultSimulationService.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.time.ZonedDateTime;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.InitializationState;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.Participant;\n+import de.tum.in.www1.artemis.domain.participation.ProgrammingExerciseStudentParticipation;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.ParticipationRepository;\n+import de.tum.in.www1.artemis.repository.ProgrammingSubmissionRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingSubmissionResultSimulationService {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseService.class);\n+\n+    private final ParticipationRepository participationRepository;\n+\n+    private final UserService userService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingSubmissionResultSimulationService(ParticipationRepository participationRepository, UserService userService,\n+            ProgrammingExerciseService programmingExerciseService, ParticipationService participationService, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.participationRepository = participationRepository;\n+        this.userService = userService;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.participationService = participationService;\n+    }\n+\n+    /**\n+     * This method creates a new participation for the provided user\n+     * @param programmingExercise the used programmingExercise\n+     * @param participant the participant object of the user\n+     * @param user the user who wants to particpate\n+     * @return the newly created and stored participation\n+     */\n+    public ProgrammingExerciseStudentParticipation createParticipation(ProgrammingExercise programmingExercise, Participant participant, User user) {\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = new ProgrammingExerciseStudentParticipation();\n+        programmingExerciseStudentParticipation.setBuildPlanId(programmingExercise.getProjectKey() + \"-\" + user.getLogin());\n+        programmingExerciseStudentParticipation.setParticipant(participant);\n+        programmingExerciseStudentParticipation.setInitializationState(InitializationState.INITIALIZED);\n+        programmingExerciseStudentParticipation.setRepositoryUrl(\"http://\" + user.getLogin() + \"@localhost7990/scm/\" + programmingExercise.getProjectKey() + \"/\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1MzI2NA==", "bodyText": "exerciseId", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407253264", "createdAt": "2020-04-12T21:16:57Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ProgrammingSubmissionResultSimulationService.java", "diffHunk": "@@ -0,0 +1,124 @@\n+package de.tum.in.www1.artemis.service;\n+\n+import java.time.ZonedDateTime;\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Service;\n+\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.domain.ProgrammingSubmission;\n+import de.tum.in.www1.artemis.domain.Result;\n+import de.tum.in.www1.artemis.domain.User;\n+import de.tum.in.www1.artemis.domain.enumeration.AssessmentType;\n+import de.tum.in.www1.artemis.domain.enumeration.InitializationState;\n+import de.tum.in.www1.artemis.domain.enumeration.SubmissionType;\n+import de.tum.in.www1.artemis.domain.participation.Participant;\n+import de.tum.in.www1.artemis.domain.participation.ProgrammingExerciseStudentParticipation;\n+import de.tum.in.www1.artemis.domain.participation.StudentParticipation;\n+import de.tum.in.www1.artemis.repository.ParticipationRepository;\n+import de.tum.in.www1.artemis.repository.ProgrammingSubmissionRepository;\n+import de.tum.in.www1.artemis.repository.ResultRepository;\n+import de.tum.in.www1.artemis.service.util.VCSSimulationUtils;\n+\n+@Profile(\"dev\")\n+@Service\n+public class ProgrammingSubmissionResultSimulationService {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseService.class);\n+\n+    private final ParticipationRepository participationRepository;\n+\n+    private final UserService userService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final ProgrammingSubmissionRepository programmingSubmissionRepository;\n+\n+    private final ResultRepository resultRepository;\n+\n+    public ProgrammingSubmissionResultSimulationService(ParticipationRepository participationRepository, UserService userService,\n+            ProgrammingExerciseService programmingExerciseService, ParticipationService participationService, ProgrammingSubmissionRepository programmingSubmissionRepository,\n+            ResultRepository resultRepository) {\n+        this.participationRepository = participationRepository;\n+        this.userService = userService;\n+        this.programmingSubmissionRepository = programmingSubmissionRepository;\n+        this.resultRepository = resultRepository;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.participationService = participationService;\n+    }\n+\n+    /**\n+     * This method creates a new participation for the provided user\n+     * @param programmingExercise the used programmingExercise\n+     * @param participant the participant object of the user\n+     * @param user the user who wants to particpate\n+     * @return the newly created and stored participation\n+     */\n+    public ProgrammingExerciseStudentParticipation createParticipation(ProgrammingExercise programmingExercise, Participant participant, User user) {\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = new ProgrammingExerciseStudentParticipation();\n+        programmingExerciseStudentParticipation.setBuildPlanId(programmingExercise.getProjectKey() + \"-\" + user.getLogin());\n+        programmingExerciseStudentParticipation.setParticipant(participant);\n+        programmingExerciseStudentParticipation.setInitializationState(InitializationState.INITIALIZED);\n+        programmingExerciseStudentParticipation.setRepositoryUrl(\"http://\" + user.getLogin() + \"@localhost7990/scm/\" + programmingExercise.getProjectKey() + \"/\"\n+                + programmingExercise.getProjectKey().toLowerCase() + \"-\" + user.getLogin() + \".git\");\n+        programmingExerciseStudentParticipation.setInitializationDate(ZonedDateTime.now());\n+        programmingExerciseStudentParticipation.setProgrammingExercise(programmingExercise);\n+        participationRepository.save(programmingExerciseStudentParticipation);\n+        return programmingExerciseStudentParticipation;\n+    }\n+\n+    /**\n+     * This method creates a new submission for the provided user\n+     * @param exerciseID the exerciseId of the exercise for which a submission should be created\n+     * @return the newly created and stored submission\n+     */\n+    public ProgrammingSubmission createSubmission(Long exerciseID) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1NDAzMw==", "bodyText": "It also needs to be checked that the user is not just any kind of instructor but an instructor for this specific course. This can be done via isAtLeastInstructorInCourse or isAtLeastInstructorForExercise.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407254033", "createdAt": "2020-04-12T21:24:58Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseSimulationResource.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import de.tum.in.www1.artemis.domain.Course;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.service.CourseService;\n+import de.tum.in.www1.artemis.service.ProgrammingExerciseSimulationService;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggle;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(ProgrammingExerciseSimulationResource.Endpoints.ROOT)\n+/**\n+ * Only for local development\n+ * Simulates the creation of a programming exercise without a local setup\n+ */\n+public class ProgrammingExerciseSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseResource.class);\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private static final String ENTITY_NAME = \"programmingExercise\";\n+\n+    private final CourseService courseService;\n+\n+    private final ProgrammingExerciseSimulationService programmingExerciseSimulationService;\n+\n+    public ProgrammingExerciseSimulationResource(CourseService courseService, ProgrammingExerciseSimulationService programmingExerciseSimulationService) {\n+        this.courseService = courseService;\n+        this.programmingExerciseSimulationService = programmingExerciseSimulationService;\n+    }\n+\n+    /**\n+     * POST /programming-exercises/no-local-setup: Setup a new programmingExercise\n+     * This method creates a new exercise\n+     * This exercise is only a SIMULATION for the testing of programming exercises without local setup\n+     * @param programmingExercise the input to create/setup new exercise\n+     * @return a Response Entity\n+     */\n+    @PostMapping(ProgrammingExerciseSimulationResource.Endpoints.EXERCISES_SIMULATION)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    @FeatureToggle(Feature.PROGRAMMING_EXERCISES)\n+    public ResponseEntity<ProgrammingExercise> setupProgrammingExerciseWithoutLocalSetup(@RequestBody ProgrammingExercise programmingExercise) {\n+        log.debug(\"REST request to setup ProgrammingExercise : {}\", programmingExercise);\n+\n+        // fetch course from database to make sure client didn't change groups\n+        Course course = courseService.findOne(programmingExercise.getCourse().getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1NDMxNQ==", "bodyText": "This is not actually doing anything in terms of security. You are finding the course based on the course id specified on the programming exercise from the payload. If the client actually manipulated the course id in the payload, you would end up fetching the wrong course and transferring the programming exercise into it from its original course.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407254315", "createdAt": "2020-04-12T21:28:10Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingExerciseSimulationResource.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import de.tum.in.www1.artemis.domain.Course;\n+import de.tum.in.www1.artemis.domain.ProgrammingExercise;\n+import de.tum.in.www1.artemis.service.CourseService;\n+import de.tum.in.www1.artemis.service.ProgrammingExerciseSimulationService;\n+import de.tum.in.www1.artemis.service.feature.Feature;\n+import de.tum.in.www1.artemis.service.feature.FeatureToggle;\n+import de.tum.in.www1.artemis.web.rest.util.HeaderUtil;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(ProgrammingExerciseSimulationResource.Endpoints.ROOT)\n+/**\n+ * Only for local development\n+ * Simulates the creation of a programming exercise without a local setup\n+ */\n+public class ProgrammingExerciseSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingExerciseResource.class);\n+\n+    @Value(\"${jhipster.clientApp.name}\")\n+    private String applicationName;\n+\n+    private static final String ENTITY_NAME = \"programmingExercise\";\n+\n+    private final CourseService courseService;\n+\n+    private final ProgrammingExerciseSimulationService programmingExerciseSimulationService;\n+\n+    public ProgrammingExerciseSimulationResource(CourseService courseService, ProgrammingExerciseSimulationService programmingExerciseSimulationService) {\n+        this.courseService = courseService;\n+        this.programmingExerciseSimulationService = programmingExerciseSimulationService;\n+    }\n+\n+    /**\n+     * POST /programming-exercises/no-local-setup: Setup a new programmingExercise\n+     * This method creates a new exercise\n+     * This exercise is only a SIMULATION for the testing of programming exercises without local setup\n+     * @param programmingExercise the input to create/setup new exercise\n+     * @return a Response Entity\n+     */\n+    @PostMapping(ProgrammingExerciseSimulationResource.Endpoints.EXERCISES_SIMULATION)\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    @FeatureToggle(Feature.PROGRAMMING_EXERCISES)\n+    public ResponseEntity<ProgrammingExercise> setupProgrammingExerciseWithoutLocalSetup(@RequestBody ProgrammingExercise programmingExercise) {\n+        log.debug(\"REST request to setup ProgrammingExercise : {}\", programmingExercise);\n+\n+        // fetch course from database to make sure client didn't change groups\n+        Course course = courseService.findOne(programmingExercise.getCourse().getId());\n+\n+        // security mechanism: make sure that we use the values from the database and not the once which might have been altered in the client\n+        programmingExercise.setCourse(course);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1ODk0MQ==", "bodyText": "exerciseId", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407258941", "createdAt": "2020-04-12T22:15:10Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(\"/api\")\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTAwMg==", "bodyText": "Check missing whether instructor is instructor for this exercise.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407259002", "createdAt": "2020-04-12T22:15:54Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(\"/api\")\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseID) {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTA0OQ==", "bodyText": "exerciseId", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407259049", "createdAt": "2020-04-12T22:16:26Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(\"/api\")\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseID) {\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseID);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        return ResponseEntity.ok().body(programmingSubmission);\n+    }\n+\n+    /**\n+     * This method is used to notify artemis that there is a new programming exercise build result.\n+     * This result is only a SIMULATION for the testing of programming exercises without local setup\n+     *\n+     * @param exerciseID id of the exercise\n+     * @return HTTP OK and Result\n+     */\n+    @PostMapping(value = \"results/no-local-setup/{exerciseID}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTE3Mw==", "bodyText": "Could it be that no participation exists when this endpoint is called? What happens if the user clicks on Result before clicking on Submission?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407259173", "createdAt": "2020-04-12T22:17:42Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(\"/api\")\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseID) {\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseID);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        return ResponseEntity.ok().body(programmingSubmission);\n+    }\n+\n+    /**\n+     * This method is used to notify artemis that there is a new programming exercise build result.\n+     * This result is only a SIMULATION for the testing of programming exercises without local setup\n+     *\n+     * @param exerciseID id of the exercise\n+     * @return HTTP OK and Result\n+     */\n+    @PostMapping(value = \"results/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> createNewProgrammingExerciseResult(@PathVariable Long exerciseID) {\n+        log.debug(\"Received result notify (NEW)\");\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseID);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndParticipantAnyState(programmingExercise, participant);\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTI4NA==", "bodyText": "Template string not needed.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407259284", "createdAt": "2020-04-12T22:18:48Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/course/manage/course-exercise-submission-result-simulation.service.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+import { SERVER_API_URL } from 'app/app.constants';\n+import { Injectable } from '@angular/core';\n+import { ProgrammingSubmission } from 'app/entities/programming-submission.model';\n+import { Result } from 'app/entities/result.model';\n+import { Observable } from 'rxjs/Observable';\n+import { HttpResponse, HttpClient } from '@angular/common/http';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+\n+@Injectable({ providedIn: 'root' })\n+export class CourseExerciseSubmissionResultSimulationService {\n+    private resourceUrlWithoutLocalSetup = SERVER_API_URL + `api`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTMyNQ==", "bodyText": "exerciseId", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407259325", "createdAt": "2020-04-12T22:19:03Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/course/manage/course-exercise-submission-result-simulation.service.ts", "diffHunk": "@@ -0,0 +1,26 @@\n+import { SERVER_API_URL } from 'app/app.constants';\n+import { Injectable } from '@angular/core';\n+import { ProgrammingSubmission } from 'app/entities/programming-submission.model';\n+import { Result } from 'app/entities/result.model';\n+import { Observable } from 'rxjs/Observable';\n+import { HttpResponse, HttpClient } from '@angular/common/http';\n+import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n+\n+@Injectable({ providedIn: 'root' })\n+export class CourseExerciseSubmissionResultSimulationService {\n+    private resourceUrlWithoutLocalSetup = SERVER_API_URL + `api`;\n+\n+    constructor(private http: HttpClient) {}\n+\n+    simulateSubmission(exerciseID: number): Observable<HttpResponse<ProgrammingSubmission>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTk2OA==", "bodyText": "Maybe increase the border radius a little. 1px is barely noticeable and looks almost square. Also if the buttons are placed without space between them, there should only be a border radius towards the two outer sides and not inbetween buttons (maybe you can use Bootstrap's button group since it handles that out of the box).\nGenerally it would probably be preferable to use the regular buttons (they have a nicer focus state as well for example). I think they even offer a setting to make them smaller.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407259968", "createdAt": "2020-04-12T22:24:56Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/course-overview.scss", "diffHunk": "@@ -162,3 +162,17 @@ Course Info Bar\n canvas#complete-chart {\n     z-index: 99;\n }\n+\n+.dev-button {\n+    text-align: left;\n+    color: white;\n+    background-color: #3e8acc;\n+    &:hover {\n+        background-color: #0f6ab4;\n+    }\n+    &:active {\n+        box-shadow: 0 2px 0 $artemis-dark;\n+    }\n+    border: none;\n+    border-radius: 1px;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDA2NA==", "bodyText": "Since ids need to be globally unique in the HTML of a page, this name might be a bit risky. Same for result below.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260064", "createdAt": "2020-04-12T22:26:25Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.html", "diffHunk": "@@ -19,6 +19,12 @@\n             [showResult]=\"showResults && currentResult !== null\"\n         >\n         </jhi-exercise-details-student-actions>\n+        <button class=\"dev-button\" id=\"submission\" *ngIf=\"!isInProduction() && hasNoLocalSetup()\" (click)=\"simulateSubmission()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDE4Mw==", "bodyText": "What is this needed for? Doesn't it basically negate type checking for the whole component by accepting any kind of attribute access?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260183", "createdAt": "2020-04-12T22:27:56Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -34,6 +36,7 @@ const MAX_RESULT_HISTORY_LENGTH = 5;\n     styleUrls: ['../course-overview.scss'],\n })\n export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n+    [x: string]: any;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDI5MQ==", "bodyText": "No need for string comparison. Better do: this.exercise.type === ExerciseType.PROGRAMMING", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260291", "createdAt": "2020-04-12T22:29:01Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,53 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type.toString() === 'programming') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDQyMg==", "bodyText": "This could be a getter if written as get isInProduction(): boolean { which means that () can be omitted when calling it (thus treating it like a computed property).", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260422", "createdAt": "2020-04-12T22:30:25Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,53 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type.toString() === 'programming') {\n+            this.getProgrammingExercise();\n+        }\n         this.subscribeForNewResults();\n     }\n \n+    /**\n+     * The button should be only visible in the dev environment\n+     */\n+    isInProduction(): boolean {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDQzMw==", "bodyText": "Same here.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260433", "createdAt": "2020-04-12T22:30:34Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,53 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type.toString() === 'programming') {\n+            this.getProgrammingExercise();\n+        }\n         this.subscribeForNewResults();\n     }\n \n+    /**\n+     * The button should be only visible in the dev environment\n+     */\n+    isInProduction(): boolean {\n+        return this.profileService.isInProduction();\n+    }\n+\n+    /**\n+     * checks if exercise has no local setup\n+     */\n+    hasNoLocalSetup(): boolean {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDY0MA==", "bodyText": "The alert service needs to be injected into the component, otherwise it will be undefined as can be seen in this console error when clicking on \"Submission\" or \"Result\":", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260640", "createdAt": "2020-04-12T22:32:55Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,53 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type.toString() === 'programming') {\n+            this.getProgrammingExercise();\n+        }\n         this.subscribeForNewResults();\n     }\n \n+    /**\n+     * The button should be only visible in the dev environment\n+     */\n+    isInProduction(): boolean {\n+        return this.profileService.isInProduction();\n+    }\n+\n+    /**\n+     * checks if exercise has no local setup\n+     */\n+    hasNoLocalSetup(): boolean {\n+        return this.programmingExerciseSimulationUtils.hasNoLocalSetup(this.programmingExercise.testRepositoryUrl);\n+    }\n+\n+    /**\n+     * asks the server for the programming exercise with the provided exercise ID\n+     */\n+    getProgrammingExercise() {\n+        this.courseExerciseSubmissionResultSimulationService.getProgrammingExercise(this.exerciseId).subscribe((programmingExercise) => {\n+            this.programmingExercise = programmingExercise;\n+        });\n+    }\n+\n+    /**\n+     * triggers the simulation of a participation and submission for the currently logged in user\n+     */\n+    simulateSubmission() {\n+        this.courseExerciseSubmissionResultSimulationService.simulateSubmission(this.exerciseId).subscribe(() => {\n+            this.jhiAlertService.success('artemisApp.exercise.submissionSuccessful');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDcwMA==", "bodyText": "Only the sucess case is being handled. What happens if the observable emits an error?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260700", "createdAt": "2020-04-12T22:33:41Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/exercise-details/course-exercise-details.component.ts", "diffHunk": "@@ -118,9 +124,53 @@ export class CourseExerciseDetailsComponent implements OnInit, OnDestroy {\n         this.exercise.participationStatus = participationStatus(this.exercise);\n         this.isAfterAssessmentDueDate = !this.exercise.assessmentDueDate || moment().isAfter(this.exercise.assessmentDueDate);\n         this.exerciseCategories = this.exerciseService.convertExerciseCategoriesFromServer(this.exercise);\n+        if (this.exercise.type.toString() === 'programming') {\n+            this.getProgrammingExercise();\n+        }\n         this.subscribeForNewResults();\n     }\n \n+    /**\n+     * The button should be only visible in the dev environment\n+     */\n+    isInProduction(): boolean {\n+        return this.profileService.isInProduction();\n+    }\n+\n+    /**\n+     * checks if exercise has no local setup\n+     */\n+    hasNoLocalSetup(): boolean {\n+        return this.programmingExerciseSimulationUtils.hasNoLocalSetup(this.programmingExercise.testRepositoryUrl);\n+    }\n+\n+    /**\n+     * asks the server for the programming exercise with the provided exercise ID\n+     */\n+    getProgrammingExercise() {\n+        this.courseExerciseSubmissionResultSimulationService.getProgrammingExercise(this.exerciseId).subscribe((programmingExercise) => {\n+            this.programmingExercise = programmingExercise;\n+        });\n+    }\n+\n+    /**\n+     * triggers the simulation of a participation and submission for the currently logged in user\n+     */\n+    simulateSubmission() {\n+        this.courseExerciseSubmissionResultSimulationService.simulateSubmission(this.exerciseId).subscribe(() => {\n+            this.jhiAlertService.success('artemisApp.exercise.submissionSuccessful');\n+        });\n+    }\n+\n+    /**\n+     * triggers the simulation of a result for the currently logged in user\n+     */\n+    simulateResult() {\n+        this.courseExerciseSubmissionResultSimulationService.simulateResult(this.exerciseId).subscribe(() => {\n+            this.jhiAlertService.success('artemisApp.exercise.resultCreationSuccessful');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MDg2Ng==", "bodyText": "Should this be removed if it is commented out?", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407260866", "createdAt": "2020-04-12T22:35:19Z", "author": {"login": "madwau"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseBitbucketBambooIntegrationTest.java", "diffHunk": "@@ -217,6 +218,21 @@ public void setupProgrammingExercise_validExercise_created(ExerciseMode mode) th\n         assertThat(programmingExerciseRepository.count()).isEqualTo(1);\n     }\n \n+    @ParameterizedTest\n+    @EnumSource(ExerciseMode.class)\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void setupProgrammingExerciseWithoutLocalSetup_validExercise_created(ExerciseMode mode) throws Exception {\n+        exercise.setMode(mode);\n+        // mockConnectorRequestsForSetup(exercise);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MTAwMw==", "bodyText": "Together with the previous line, this is trivially true. You are setting the id of exercise to the id of generatedExercise and then you are checking if the ids are equal (isEqualTo used the equals method of Exercise which does nothing more then comparing the ids).", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407261003", "createdAt": "2020-04-12T22:37:10Z", "author": {"login": "madwau"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingExerciseBitbucketBambooIntegrationTest.java", "diffHunk": "@@ -217,6 +218,21 @@ public void setupProgrammingExercise_validExercise_created(ExerciseMode mode) th\n         assertThat(programmingExerciseRepository.count()).isEqualTo(1);\n     }\n \n+    @ParameterizedTest\n+    @EnumSource(ExerciseMode.class)\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void setupProgrammingExerciseWithoutLocalSetup_validExercise_created(ExerciseMode mode) throws Exception {\n+        exercise.setMode(mode);\n+        // mockConnectorRequestsForSetup(exercise);\n+        final var generatedExercise = request.postWithResponseBody(\n+                ProgrammingExerciseSimulationResource.Endpoints.ROOT + ProgrammingExerciseSimulationResource.Endpoints.EXERCISES_SIMULATION, exercise, ProgrammingExercise.class,\n+                HttpStatus.CREATED);\n+\n+        exercise.setId(generatedExercise.getId());\n+        assertThat(exercise).isEqualTo(generatedExercise);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MTM4OA==", "bodyText": "Should return 201 Created instead of 200 OK.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407261388", "createdAt": "2020-04-12T22:41:50Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(\"/api\")\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseID) {\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseID);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        return ResponseEntity.ok().body(programmingSubmission);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MTQwOQ==", "bodyText": "Should return 201 Created instead of 200 OK.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407261409", "createdAt": "2020-04-12T22:41:58Z", "author": {"login": "madwau"}, "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ProgrammingSubmissionResultSimulationResource.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.tum.in.www1.artemis.web.rest;\n+\n+import java.util.Optional;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.security.access.prepost.PreAuthorize;\n+import org.springframework.web.bind.annotation.*;\n+\n+import de.tum.in.www1.artemis.domain.*;\n+import de.tum.in.www1.artemis.domain.participation.*;\n+import de.tum.in.www1.artemis.service.*;\n+import de.tum.in.www1.artemis.service.ProgrammingSubmissionResultSimulationService;\n+\n+@Profile(\"dev\")\n+@RestController\n+@RequestMapping(\"/api\")\n+public class ProgrammingSubmissionResultSimulationResource {\n+\n+    private final Logger log = LoggerFactory.getLogger(ProgrammingSubmissionResource.class);\n+\n+    private final ProgrammingSubmissionService programmingSubmissionService;\n+\n+    private final UserService userService;\n+\n+    private final ParticipationService participationService;\n+\n+    private final WebsocketMessagingService messagingService;\n+\n+    private final ProgrammingExerciseService programmingExerciseService;\n+\n+    private final ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService;\n+\n+    public ProgrammingSubmissionResultSimulationResource(ProgrammingSubmissionService programmingSubmissionService, UserService userService,\n+            ParticipationService participationService, WebsocketMessagingService messagingService, ProgrammingExerciseService programmingExerciseService,\n+            ProgrammingSubmissionResultSimulationService programmingSubmissionResultSimulationService) {\n+        this.programmingSubmissionService = programmingSubmissionService;\n+        this.userService = userService;\n+        this.participationService = participationService;\n+        this.messagingService = messagingService;\n+        this.programmingExerciseService = programmingExerciseService;\n+        this.programmingSubmissionResultSimulationService = programmingSubmissionResultSimulationService;\n+    }\n+\n+    /**\n+     * This method is used to create a participation and a submission\n+     * This participation and submission are only SIMULATIONS for the testing\n+     * of programming exercises without local setup\n+     *\n+     * @param exerciseID the id of the exercise\n+     * @return HTTP OK and ProgrammingSubmission\n+     */\n+\n+    @PostMapping(value = \"submissions/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<ProgrammingSubmission> createParticipationAndSubmissionSimulation(@PathVariable Long exerciseID) {\n+\n+        ProgrammingSubmission programmingSubmission = programmingSubmissionResultSimulationService.createSubmission(exerciseID);\n+\n+        programmingSubmissionService.notifyUserAboutSubmission(programmingSubmission);\n+\n+        return ResponseEntity.ok().body(programmingSubmission);\n+    }\n+\n+    /**\n+     * This method is used to notify artemis that there is a new programming exercise build result.\n+     * This result is only a SIMULATION for the testing of programming exercises without local setup\n+     *\n+     * @param exerciseID id of the exercise\n+     * @return HTTP OK and Result\n+     */\n+    @PostMapping(value = \"results/no-local-setup/{exerciseID}\")\n+    @PreAuthorize(\"hasAnyRole('INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> createNewProgrammingExerciseResult(@PathVariable Long exerciseID) {\n+        log.debug(\"Received result notify (NEW)\");\n+        User user = userService.getUserWithGroupsAndAuthorities();\n+        Participant participant = user;\n+        ProgrammingExercise programmingExercise = programmingExerciseService.findByIdWithEagerStudentParticipationsAndSubmissions(exerciseID);\n+        Optional<StudentParticipation> optionalStudentParticipation = participationService.findOneByExerciseAndParticipantAnyState(programmingExercise, participant);\n+        ProgrammingExerciseStudentParticipation programmingExerciseStudentParticipation = (ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get();\n+        Result result = programmingSubmissionResultSimulationService.createResult(programmingExerciseStudentParticipation);\n+\n+        messagingService.broadcastNewResult((Participation) optionalStudentParticipation.get(), result);\n+        log.info(\"The new result for {} was saved successfully\", ((ProgrammingExerciseStudentParticipation) optionalStudentParticipation.get()).getBuildPlanId());\n+        return ResponseEntity.ok().body(result);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MTQ0OQ==", "bodyText": "Should return 201 Created instead of 200 OK.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407261449", "createdAt": "2020-04-12T22:42:28Z", "author": {"login": "madwau"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingSubmissionAndResultIntegrationTest.java", "diffHunk": "@@ -462,6 +464,42 @@ void shouldCreateSubmissionsForAllParticipationsOfExerciseAfterTestRepositoryCom\n         }\n     }\n \n+    /**\n+     * This tests if the submission is created for programming exercises without local setup\n+     */\n+\n+    @Test\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    void shouldCreateSubmissionWithoutLocalSetup() throws Exception {\n+        assertThat(submissionRepository.findAll()).hasSize(0);\n+        final var returnedSubmission = request.postWithResponseBody(\"/api\" + SUBMISSIONS_SIMULATION + \"/\" + exerciseId, null, ProgrammingSubmission.class, HttpStatus.OK);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MTQ1Nw==", "bodyText": "Should return 201 Created instead of 200 OK.", "url": "https://github.com/ls1intum/Artemis/pull/1292#discussion_r407261457", "createdAt": "2020-04-12T22:42:36Z", "author": {"login": "madwau"}, "path": "src/test/java/de/tum/in/www1/artemis/programmingexercise/ProgrammingSubmissionAndResultIntegrationTest.java", "diffHunk": "@@ -462,6 +464,42 @@ void shouldCreateSubmissionsForAllParticipationsOfExerciseAfterTestRepositoryCom\n         }\n     }\n \n+    /**\n+     * This tests if the submission is created for programming exercises without local setup\n+     */\n+\n+    @Test\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    void shouldCreateSubmissionWithoutLocalSetup() throws Exception {\n+        assertThat(submissionRepository.findAll()).hasSize(0);\n+        final var returnedSubmission = request.postWithResponseBody(\"/api\" + SUBMISSIONS_SIMULATION + \"/\" + exerciseId, null, ProgrammingSubmission.class, HttpStatus.OK);\n+        assertThat(submissionRepository.findAll()).hasSize(1);\n+        ProgrammingSubmission submission = submissionRepository.findAll().get(0);\n+        assertThat(returnedSubmission).isEqualTo(submission);\n+        assertThat(participationRepository.findById(submission.getParticipation().getId()));\n+        assertThat(participationIds.contains(submission.getParticipation().getId()));\n+        assertThat(submission.getType()).isEqualTo(SubmissionType.MANUAL);\n+        assertThat(submission.isSubmitted()).isTrue();\n+    }\n+\n+    /**\n+     * This tests if the result is created for programming exercises without local setup\n+     */\n+\n+    @Test\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    void shouldCreateResultWithoutLocalSetup() throws Exception {\n+        final var returnedSubmission = request.postWithResponseBody(\"/api\" + SUBMISSIONS_SIMULATION + \"/\" + exerciseId, null, ProgrammingSubmission.class, HttpStatus.OK);\n+        assertThat(resultRepository.findAll()).hasSize(0);\n+        Result returnedResult = request.postWithResponseBody(\"/api\" + RESULTS_SIMULATION + \"/\" + exerciseId, null, Result.class, HttpStatus.OK);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd386cf6e06e0811899bf5b02af9fbe293ceb66d"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac2df73e373f557d7c8dcae4593bcd0993f47433", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/ac2df73e373f557d7c8dcae4593bcd0993f47433", "committedDate": "2020-04-13T17:07:06Z", "message": "renaming of the parameters exerciseID -> exerciseId"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c88994698573f3c5f62bcdfb972e387fa290cb71", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/c88994698573f3c5f62bcdfb972e387fa290cb71", "committedDate": "2020-04-13T17:07:33Z", "message": "renaming of the parameters exerciseID -> exerciseId part2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "997be49128b6d46aab701fd93e48d46fd106e8d8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/997be49128b6d46aab701fd93e48d46fd106e8d8", "committedDate": "2020-04-13T17:24:22Z", "message": "added final variable for the domain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e14df10e85a95d386e82f75b997de2f902d841b", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/4e14df10e85a95d386e82f75b997de2f902d841b", "committedDate": "2020-04-13T17:35:01Z", "message": "adjusted the hardcoded urls with the final variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d14a696ddbc2c83e6b391220e8d3fd3bce0f79d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/4d14a696ddbc2c83e6b391220e8d3fd3bce0f79d", "committedDate": "2020-04-13T17:48:09Z", "message": "removed button id's of the submission and result button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "080229addc7bc143537a1a485800b7549b2c9400", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/080229addc7bc143537a1a485800b7549b2c9400", "committedDate": "2020-04-14T01:18:17Z", "message": "modified methods in to computed properties and adjusted a check in an if-clause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07b1a6842410717df55ae42a06b7d122ad0c40af", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/07b1a6842410717df55ae42a06b7d122ad0c40af", "committedDate": "2020-04-14T01:28:44Z", "message": "added security check if the user is an instructor in course or an admin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05e5db45d62f09a055c9cf6430d2e784f6eabfdf", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/05e5db45d62f09a055c9cf6430d2e784f6eabfdf", "committedDate": "2020-04-14T01:43:07Z", "message": "adjusted the check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e641058e2d80c7b38dd86f771b7cfa01dfc1c5cd", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e641058e2d80c7b38dd86f771b7cfa01dfc1c5cd", "committedDate": "2020-04-14T01:43:50Z", "message": "added security check for the method createParticipationAndSubmissionSimulation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8009f80563a22575cd117fd3a1c50626704710e3", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/8009f80563a22575cd117fd3a1c50626704710e3", "committedDate": "2020-04-14T01:46:53Z", "message": "removed unnecessary comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b585fc9d8c6239c734070a55d1b2f9c679fdb108", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/b585fc9d8c6239c734070a55d1b2f9c679fdb108", "committedDate": "2020-04-14T02:20:20Z", "message": "added jhi alerts for the submission and result buttons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "171373cc53beb5191088f80565349e7ebe4af71d", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/171373cc53beb5191088f80565349e7ebe4af71d", "committedDate": "2020-04-14T02:30:55Z", "message": "modified the test case"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2872, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}