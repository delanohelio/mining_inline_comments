{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NjEyODI2", "number": 1491, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODowNzo0MVrOD96fMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozMTozMlrOD98VyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjQ3OTg0OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/overview/courses.component.ts", "isResolved": false, "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODowNzo0MVrOGXsiMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODo0MjowNlrOGXtyfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA==", "bodyText": "This change broke something, no courses are displayed anymore", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427500080", "createdAt": "2020-05-19T18:07:41Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDk0MQ==", "bodyText": "same for me", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427500941", "createdAt": "2020-05-19T18:09:13Z", "author": {"login": "TobiasPr"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNDA4OA==", "bodyText": "This method does not exist on courseService only findAll exists. It does however exist on CourseManagementService", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427504088", "createdAt": "2020-05-19T18:14:13Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNzQ5Ng==", "bodyText": "@stefanwaldhauser courseService is an instance of CourseManagementService.", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427507496", "createdAt": "2020-05-19T18:19:46Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMTQxMg==", "bodyText": "Where do I see this in typescript @madwau ?", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427511412", "createdAt": "2020-05-19T18:26:28Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMjI0Mg==", "bodyText": "You can see it in the constructor where this dependency is injected.", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427512242", "createdAt": "2020-05-19T18:27:53Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxNDE1NA==", "bodyText": "haha oh man i see what you mean know :) I thought you meant something with inheritance. The variable name should probably changed to courseManagementService though", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427514154", "createdAt": "2020-05-19T18:31:01Z", "author": {"login": "stefanwaldhauser"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxOTA1MQ==", "bodyText": "I'm guessing courseManagementService was seen as too verbose, not sure though.", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427519051", "createdAt": "2020-05-19T18:39:26Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUyMDYzOQ==", "bodyText": "I am currently working on a fix. The problem is that a visible quiz has no due date, but this was expected for the sorting of the exercise in the course overview", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427520639", "createdAt": "2020-05-19T18:42:06Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, "originalCommit": {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Mjc4MzQ0OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/app/overview/courses.component.ts", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozMTozMlrOGXviBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDoxMDoyM1rOGXwzrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0OTE4OQ==", "bodyText": "should this not be relevantExercises[0] as the array contains only one item?", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427549189", "createdAt": "2020-05-19T19:31:32Z", "author": {"login": "fde312"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -52,22 +54,34 @@ export class CoursesComponent implements OnInit {\n         this.jhiAlertService.error('error.unexpectedError', { error }, undefined);\n     }\n \n-    get nextRelevantExercise(): Exercise | null {\n+    get nextRelevantExercise(): Exercise | undefined {\n+        const relevantExercises = new Array<Exercise>();\n         let relevantExercise: Exercise | null = null;\n         if (this.courses) {\n             this.courses.forEach((course) => {\n                 const relevantExerciseForCourse = this.exerciseService.getNextExerciseForHours(course.exercises);\n                 if (relevantExerciseForCourse) {\n-                    if (!relevantExercise) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    } else if (relevantExerciseForCourse.dueDate!.isBefore(relevantExercise.dueDate!)) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    }\n+                    relevantExerciseForCourse.course = course;\n+                    relevantExercises.push(relevantExerciseForCourse);\n                 }\n             });\n+            if (relevantExercises.length === 0) {\n+                return undefined;\n+            } else if (relevantExercises.length === 1) {\n+                relevantExercise = relevantExercises[1];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e092ecd494f31ce76995b1bb0b2076bc3af3098e"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU2ODM4Ng==", "bodyText": "good point, thanks", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427568386", "createdAt": "2020-05-19T20:07:05Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -52,22 +54,34 @@ export class CoursesComponent implements OnInit {\n         this.jhiAlertService.error('error.unexpectedError', { error }, undefined);\n     }\n \n-    get nextRelevantExercise(): Exercise | null {\n+    get nextRelevantExercise(): Exercise | undefined {\n+        const relevantExercises = new Array<Exercise>();\n         let relevantExercise: Exercise | null = null;\n         if (this.courses) {\n             this.courses.forEach((course) => {\n                 const relevantExerciseForCourse = this.exerciseService.getNextExerciseForHours(course.exercises);\n                 if (relevantExerciseForCourse) {\n-                    if (!relevantExercise) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    } else if (relevantExerciseForCourse.dueDate!.isBefore(relevantExercise.dueDate!)) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    }\n+                    relevantExerciseForCourse.course = course;\n+                    relevantExercises.push(relevantExerciseForCourse);\n                 }\n             });\n+            if (relevantExercises.length === 0) {\n+                return undefined;\n+            } else if (relevantExercises.length === 1) {\n+                relevantExercise = relevantExercises[1];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0OTE4OQ=="}, "originalCommit": {"oid": "e092ecd494f31ce76995b1bb0b2076bc3af3098e"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU3MDA5Mw==", "bodyText": "is fixed", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427570093", "createdAt": "2020-05-19T20:10:23Z", "author": {"login": "krusche"}, "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -52,22 +54,34 @@ export class CoursesComponent implements OnInit {\n         this.jhiAlertService.error('error.unexpectedError', { error }, undefined);\n     }\n \n-    get nextRelevantExercise(): Exercise | null {\n+    get nextRelevantExercise(): Exercise | undefined {\n+        const relevantExercises = new Array<Exercise>();\n         let relevantExercise: Exercise | null = null;\n         if (this.courses) {\n             this.courses.forEach((course) => {\n                 const relevantExerciseForCourse = this.exerciseService.getNextExerciseForHours(course.exercises);\n                 if (relevantExerciseForCourse) {\n-                    if (!relevantExercise) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    } else if (relevantExerciseForCourse.dueDate!.isBefore(relevantExercise.dueDate!)) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    }\n+                    relevantExerciseForCourse.course = course;\n+                    relevantExercises.push(relevantExerciseForCourse);\n                 }\n             });\n+            if (relevantExercises.length === 0) {\n+                return undefined;\n+            } else if (relevantExercises.length === 1) {\n+                relevantExercise = relevantExercises[1];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0OTE4OQ=="}, "originalCommit": {"oid": "e092ecd494f31ce76995b1bb0b2076bc3af3098e"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4988, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}