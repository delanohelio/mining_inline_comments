{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3ODg5ODk2", "number": 1982, "title": "[Exam] Add submitted flag to scores CSV", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I implemented the changes with a good performance and prevented too many database calls\n\nDescription\n\n Server: I've added the submitted flag from  the studentExam to the ExamScoresDTO\n Client: I've ensured that the submitted flag will be part of the export CSV file\n\nSteps for Testing\n\nLog in to Artemis\nNavigate to Course Administration\nNavigate to Exams -> Scores of an exam that has assessed results\nClick \"Export to CSV\"\nEnsure that the submitted flag is part of the exported CSV and that everything else is still exported correctly\n\nExample CSV export\nName,Login,E-Mail,Matriculation Number,Text exercise 1 Assigned Exercise,Text exercise 1 Achieved Points,Text exercise 1 Achieved Score (%),Text exercise 2 Assigned Exercise,Text exercise 2 Achieved Points,Text exercise 2 Achieved Score (%),Text exercise 3 Assigned Exercise,Text exercise 3 Achieved Points,Text exercise 3 Achieved Score (%),Text exercise 4 Assigned Exercise,Text exercise 4 Achieved Points,Text exercise 4 Achieved Score (%),Text exercise 5 Assigned Exercise,Text exercise 5 Achieved Points,Text exercise 5 Achieved Score (%),Text exercise 6 Assigned Exercise,Text exercise 6 Achieved Points,Text exercise 6 Achieved Score (%),Text exercise 7 Assigned Exercise,Text exercise 7 Achieved Points,Text exercise 7 Achieved Score (%),Overall Points,Overall Score (%),Submitted\n\"Sascha Beele\",\"ga83wuv\",\"sascha.beele@tum.de\",\"\",\"Text exercise 1\",4.4,88,\"Text exercise 2\",1.5,21,\"Text exercise 3\",1,33,\"Text exercise 4\",3,50,\"Text exercise 5\",1.4,28,\"Text exercise 6\",0.3,15,\"Text exercise 7\",4.3,61,15.9,45.43,\"yes\"", "createdAt": "2020-07-28T15:34:47Z", "url": "https://github.com/ls1intum/Artemis/pull/1982", "merged": true, "mergeCommit": {"oid": "0a7f9ee8ed576ad98e8b66562df68b51b81b2aff"}, "closed": true, "closedAt": "2020-07-28T19:26:43Z", "author": {"login": "sascha11110"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5YITCgH2gAyNDU3ODg5ODk2Ojc1NDI5Y2JmNjgzYTY4ODQ0OGEyZTYyZWFlMWRjZWU2MzI1MWVmMDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5bl5qAFqTQ1Njk0MTMzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75429cbf683a688448a2e62eae1dcee63251ef02", "author": {"user": {"login": "sascha11110", "name": "Sascha Beele"}}, "url": "https://github.com/ls1intum/Artemis/commit/75429cbf683a688448a2e62eae1dcee63251ef02", "committedDate": "2020-07-28T15:26:33Z", "message": "Add submitted to ExamScoresDTO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88", "author": {"user": {"login": "sascha11110", "name": "Sascha Beele"}}, "url": "https://github.com/ls1intum/Artemis/commit/9f7d4e69c60b545a36447940e16177a0bfb7cc88", "committedDate": "2020-07-28T15:27:00Z", "message": "Add submitted to CSV export"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Nzk0ODUx", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456794851", "createdAt": "2020-07-28T16:14:27Z", "commit": {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNjoxNDoyN1rOG4UNpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNjoxNDoyN1rOG4UNpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTcwNDYxNA==", "bodyText": "That's okay for me, just as a thought: Do we want to translate it?", "url": "https://github.com/ls1intum/Artemis/pull/1982#discussion_r461704614", "createdAt": "2020-07-28T16:14:27Z", "author": {"login": "TobiasPr"}, "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -112,6 +113,7 @@ export class ExamScoresComponent implements OnInit {\n             typeof studentResult.overallPointsAchieved === 'undefined' || studentResult.overallPointsAchieved === null ? '' : round(studentResult.overallPointsAchieved, 1);\n         csvRow.overAllScore =\n             typeof studentResult.overallScoreAchieved === 'undefined' || studentResult.overallScoreAchieved === null ? '' : round(studentResult.overallScoreAchieved, 2);\n+        csvRow.submitted = studentResult.submitted ? 'yes' : 'no';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Nzk2MzIz", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456796323", "createdAt": "2020-07-28T16:16:08Z", "commit": {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2ODUyOTcz", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456852973", "createdAt": "2020-07-28T17:26:59Z", "commit": {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzoyNzowMFrOG4W9rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzoyNzowMFrOG4W9rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc0OTY3OQ==", "bodyText": "please double check that this call also works without any issues when there are many (i.e. >1000) student exams. We previously had some issues when too many entities in the database were fetched. I assume there is an edge case when it comes to the relationships between student exam and some other entities (we don't know the exact reason yet).\nIt is more safe to fetch 2 times:\n\nExam with exercise groups and exercises\nList of all students exams for one particular exam (without any other entities).\n\nThis should also be faster in terms of performance and memory consumption, because the entity graph will be much simpler!\nCan you please change it accordingly?", "url": "https://github.com/ls1intum/Artemis/pull/1982#discussion_r461749679", "createdAt": "2020-07-28T17:27:00Z", "author": {"login": "krusche"}, "path": "src/main/java/de/tum/in/www1/artemis/service/ExamService.java", "diffHunk": "@@ -201,8 +201,7 @@ public void delete(Long examId) {\n      * @return return ExamScoresDTO with students, scores and exerciseGroups for exam\n      */\n     public ExamScoresDTO getExamScore(Long examId) {\n-        Exam exam = examRepository.findWithRegisteredUsersAndExerciseGroupsAndExercisesById(examId)\n-                .orElseThrow(() -> new EntityNotFoundException(\"Exam with id: \\\"\" + examId + \"\\\" does not exist\"));\n+        Exam exam = examRepository.findOneWithEagerExercisesGroupsAndStudentExams(examId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ba0f668b248510539b168f45d42f27fb077086e", "author": {"user": {"login": "sascha11110", "name": "Sascha Beele"}}, "url": "https://github.com/ls1intum/Artemis/commit/1ba0f668b248510539b168f45d42f27fb077086e", "committedDate": "2020-07-28T18:17:48Z", "message": "Load student exams and exercise groups / exercises separately"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTMxMDM3", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456931037", "createdAt": "2020-07-28T19:14:23Z", "commit": {"oid": "1ba0f668b248510539b168f45d42f27fb077086e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTM2MzA5", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456936309", "createdAt": "2020-07-28T19:21:11Z", "commit": {"oid": "1ba0f668b248510539b168f45d42f27fb077086e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTM5NzM1", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456939735", "createdAt": "2020-07-28T19:26:19Z", "commit": {"oid": "1ba0f668b248510539b168f45d42f27fb077086e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTQwMDUw", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456940050", "createdAt": "2020-07-28T19:26:45Z", "commit": {"oid": "1ba0f668b248510539b168f45d42f27fb077086e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTQxMzM3", "url": "https://github.com/ls1intum/Artemis/pull/1982#pullrequestreview-456941337", "createdAt": "2020-07-28T19:28:36Z", "commit": {"oid": "1ba0f668b248510539b168f45d42f27fb077086e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4433, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}