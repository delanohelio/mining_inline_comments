{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MTk0Nzc0", "number": 1325, "title": "Feature/questions answers/markdown", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nStudents, tutors and instructors can only use plain text to write questions and answers limiting their ability to describe the problem or solution precisely.\nThe buttons of the Markdown editor take too much space and don't look good on smaller screens.\nDescription\n\nI added the Markdown editor to the questions and answers component.\nI changed the design of the buttons in the markdown editor UI to be smaller in order to fit better on smaller screens / spaces.\nNOTE: If you encounter any bugs with the markdown editor please let me know. I will be further working on it in a separate PR, in which I will also address the functionality.\n(Also if you have any wishes or suggestions for the Markdown editor)\nSteps for Testing\n\n\nLog in to Artemis\n(1a. Enable questions and answers on a course if deactivated)\nNavigate to a lecture or exercise\nMarkdown should now be available for questions and answers\nView any other Markdown editor and check if buttons are displayed correctly\n\nScreenshots\n\n\nMarkdown editor for question (with smaller buttons):\n\nEditor after changes:", "createdAt": "2020-04-20T17:19:43Z", "url": "https://github.com/ls1intum/Artemis/pull/1325", "merged": true, "mergeCommit": {"oid": "19d3f9f3fc5977d3cb848bea35b55f023b3ac63c"}, "closed": true, "closedAt": "2020-04-21T14:58:34Z", "author": {"login": "filip-gregurevic"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXiQxfAH2gAyNDA2MTk0Nzc0OjlkNmQ0NmY2M2ZhMjM3YmJkM2FhNzYyNTRhNTJhZmM3Zjc1Yzk5OWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ1iT3AFqTM5NzQzOTE4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d6d46f63fa237bbd3aa76254a52afc7f75c999e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/9d6d46f63fa237bbd3aa76254a52afc7f75c999e", "committedDate": "2020-04-14T12:01:26Z", "message": "add markdown functionality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "370939072f738c1bb82a59060284d2ec618cc34a", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/370939072f738c1bb82a59060284d2ec618cc34a", "committedDate": "2020-04-17T16:25:05Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/markdown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea3cf0fdf65f1b4c94b591540783c446f45a6c84", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/ea3cf0fdf65f1b4c94b591540783c446f45a6c84", "committedDate": "2020-04-17T19:44:46Z", "message": "change layout of edit mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23b305439fe25622221e1cffd300a17e05a18546", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/23b305439fe25622221e1cffd300a17e05a18546", "committedDate": "2020-04-17T20:20:11Z", "message": "enable resize on markdown editor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc759c491f8e0345becb4180016eb710916e6c3f", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/dc759c491f8e0345becb4180016eb710916e6c3f", "committedDate": "2020-04-18T11:24:09Z", "message": "markdown editor styling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd7172c588fd810f03da6cdfb908044ffcae1834", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cd7172c588fd810f03da6cdfb908044ffcae1834", "committedDate": "2020-04-20T15:11:21Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/markdown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "005026ccb924fcd06eeacc03c09c7bf10c3ba46a", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/005026ccb924fcd06eeacc03c09c7bf10c3ba46a", "committedDate": "2020-04-20T15:16:49Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a606e26e89d8716fefd13557bd0c0fad00669509", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/a606e26e89d8716fefd13557bd0c0fad00669509", "committedDate": "2020-04-20T21:01:40Z", "message": "remove formula and fullscreen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fb71cede4acc896b35d5d51ae88c2786a676fa0", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/5fb71cede4acc896b35d5d51ae88c2786a676fa0", "committedDate": "2020-04-21T07:37:55Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/markdown\n\n# Conflicts:\n#\tsrc/main/webapp/app/shared/markdown-editor/markdown-editor.component.html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8a86e5455a5191a3f6c34b6f4d979935df46366", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/e8a86e5455a5191a3f6c34b6f4d979935df46366", "committedDate": "2020-04-21T07:39:23Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea1c3674311ada7c344ce0264d8d1fe400648e61", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/ea1c3674311ada7c344ce0264d8d1fe400648e61", "committedDate": "2020-04-21T08:04:39Z", "message": "remove yarn.lock from pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "committedDate": "2020-04-21T08:09:57Z", "message": "really remove yarn.lock from pr"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTY4MjQ3", "url": "https://github.com/ls1intum/Artemis/pull/1325#pullrequestreview-397168247", "createdAt": "2020-04-21T09:47:52Z", "commit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82861f51026c4ae004f233c7b980ff93f61c42f7", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/82861f51026c4ae004f233c7b980ff93f61c42f7", "committedDate": "2020-04-21T09:57:38Z", "message": "remove fullscreen option for new question"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTc5Nzcx", "url": "https://github.com/ls1intum/Artemis/pull/1325#pullrequestreview-397179771", "createdAt": "2020-04-21T10:02:16Z", "commit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDowMjoxNlrOGI9e9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoxODozN1rOGI-IZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0OTE0Mg==", "bodyText": "Can this be simplified to command.displayCommandButton?", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412049142", "createdAt": "2020-04-21T10:02:16Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">\n                             Color\n                         </div>\n                         <jhi-color-selector [tagColors]=\"markdownColors\" (selectedColor)=\"onSelectedColor($event)\"></jhi-color-selector>\n                     </div>\n+\n+                    <!-- domain commands -->\n+                    <div class=\"markdown-editor__commands-domain\" *ngIf=\"domainCommands && domainCommands.length != 0\">\n+                        <ng-container *ngFor=\"let command of domainCommands | typeCheck: DomainTagCommand\">\n+                            <div *ngIf=\"command.displayCommandButton === true\" class=\"btn btn-sm\" (click)=\"command.execute()\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MDM4Mg==", "bodyText": "Could [] be a default value for the Input that doesn't need to be passed in explicitly?", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412050382", "createdAt": "2020-04-21T10:04:08Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -49,12 +52,19 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- question in edit mode -->\n         <div *ngIf=\"isEditMode\">\n             <div class=\"row mb-1 mt-2\">\n                 <div class=\"col-12\">\n                     <div class=\"form-group\">\n                         <label class=\"form-control-label\">{{ 'artemisApp.courseOverview.exerciseDetails.faq.newQuestionLabel' | translate }}</label>\n-                        <textarea [(ngModel)]=\"studentQuestionText\" class=\"form-control\" name=\"answer\"></textarea>\n+                        <jhi-markdown-editor\n+                            class=\"markdown-editor background-editor-color\"\n+                            [(markdown)]=\"studentQuestionText\"\n+                            [editorMode]=\"EditorMode.LATEX\"\n+                            [enableResize]=\"true\"\n+                            [metaCommands]=\"[]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MTM1Ng==", "bodyText": "A bootstrap .col should always be a child of a .row.", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412051356", "createdAt": "2020-04-21T10:05:47Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -63,53 +73,102 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- approved answers -->\n         <div class=\"row mb-1 answer-approved\" *ngFor=\"let approvedQuestionAnswer of approvedQuestionAnswers\">\n-            <div class=\"col\" [ngbTooltip]=\"'artemisApp.courseOverview.exerciseDetails.faq.approvedLabel' | translate\">\n+            <div class=\"col\">\n                 <div *ngIf=\"isAnswerMode && selectedQuestionAnswer && approvedQuestionAnswer && selectedQuestionAnswer.id === approvedQuestionAnswer.id\">\n                     <div class=\"col-12\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA==", "bodyText": "The code below looks very similar to the one for the approved answers. There also seems to be a lot of shared template code between the view and edit state (see screenshot below).\nI think it would make sense to avoid this duplication by creating small new components whenever reusable parts like these manifest themselves.\nCode duplicate:", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412059750", "createdAt": "2020-04-21T10:18:37Z", "author": {"login": "madwau"}, "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -135,13 +195,52 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                     </div>\n                 </div>\n             </div>\n+            <!-- unapproved answers -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e"}, "originalPosition": 196}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb8b3bbfc0d8d43792ef8f1033ee0fbfcb125008", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cb8b3bbfc0d8d43792ef8f1033ee0fbfcb125008", "committedDate": "2020-04-21T10:52:51Z", "message": "apply feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "143e6061797db69ef0b8b4e2acae6633775c0403", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/143e6061797db69ef0b8b4e2acae6633775c0403", "committedDate": "2020-04-21T12:57:48Z", "message": "set min height for editor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d", "author": {"user": {"login": "krusche", "name": "Stephan Krusche"}}, "url": "https://github.com/ls1intum/Artemis/commit/b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d", "committedDate": "2020-04-21T14:24:12Z", "message": "Merge branch 'develop' into feature/questions-answers/markdown"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDE2MTYw", "url": "https://github.com/ls1intum/Artemis/pull/1325#pullrequestreview-397416160", "createdAt": "2020-04-21T14:57:11Z", "commit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDE2ODc1", "url": "https://github.com/ls1intum/Artemis/pull/1325#pullrequestreview-397416875", "createdAt": "2020-04-21T14:57:51Z", "commit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDM5MTgw", "url": "https://github.com/ls1intum/Artemis/pull/1325#pullrequestreview-397439180", "createdAt": "2020-04-21T15:20:50Z", "commit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNToyMDo1MFrOGJLlfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNToyMDo1MFrOGJLlfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ==", "bodyText": "I removed the ngStyle attribute in a previous PR because changing the border color would only make sense to me if I could reapply the selected color by simply clicking on the button without having to choose a color again.\nAnother problem I see here is that the border color doesn\u00b4t update once I continue to edit the text outside of the span I just set to a given color.\nJust wanted to mention this so you could possibly target this in your next PR on the functionality changes for the markdown editor. :)", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412280189", "createdAt": "2020-04-21T15:20:50Z", "author": {"login": "balazs-czopf"}, "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2928, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}