{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4ODI4OTg3", "number": 1478, "title": "Upvote / Downvote questions", "bodyText": "Checklist\n\n I tested all changes and all related features with different users (student, tutor, instructor, admin) on the test server https://artemistest.ase.in.tum.de.\n Server: I added multiple integration tests (Spring) related to the features\n Server: I added @PreAuthorize and check the course groups for all new REST Calls (security)\n Server: I implemented the changes with a good performance and prevented too many database calls\n Server: I documented the Java code using JavaDoc style.\n Client: I added multiple integration tests (Jest) related to the features\n Client: I documented the TypeScript code using JSDoc style.\n Client: I added multiple screenshots/screencasts of my UI changes\n\nMotivation and Context\n\n\nCurrently students have no possibility to show that they are having the same question or to rate questions in general.\nDescription\n\nStudents can upvote / downvote questions to express (dis-)agreement.\nThere are no negative votes. If the vote is at 0 a student cannot downvote the question.\nQuestions are ordered by their votes.\nSteps for Testing\n\n\nLog in to Artemis\n(1a. Enable questions and answers for your test course if not already enabled)\nNavigate to an exercise or lecture\nCreate multiple questions\nUpvote / Downvote questions in any order\nCheck if sorting and representation works correctly\n\nScreenshots\n\n\ndefault:\n\nupvoted:\n\ndownvoted:", "createdAt": "2020-05-15T21:30:43Z", "url": "https://github.com/ls1intum/Artemis/pull/1478", "merged": true, "mergeCommit": {"oid": "02a08af48364722256bf3831b5de7c01b3674ab0"}, "closed": true, "closedAt": "2020-06-02T10:37:15Z", "author": {"login": "filip-gregurevic"}, "timelineItems": {"totalCount": 40, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg7qjMAH2gAyNDE4ODI4OTg3OjMxMzhkOWM4NjQyYjNjZjBkOWUyOTgzZjA2YjE0MWJjMjg1NTVkZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnSa8bgFqTQyMjU1MTEzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3138d9c8642b3cf0d9e2983f06b141bc28555de2", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/3138d9c8642b3cf0d9e2983f06b141bc28555de2", "committedDate": "2020-05-13T16:42:32Z", "message": "init component and template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40ae729f589529efe3016641ffd7768e3bb31af5", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/40ae729f589529efe3016641ffd7768e3bb31af5", "committedDate": "2020-05-14T14:02:30Z", "message": "add database column, adapt java code, init javascript functionality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b00a833ecf7065e12a533d7df23a1fd651760028", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/b00a833ecf7065e12a533d7df23a1fd651760028", "committedDate": "2020-05-14T17:12:35Z", "message": "add jsdoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdcebfff9cc2dff82189507db95c63cd0159fb48", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cdcebfff9cc2dff82189507db95c63cd0159fb48", "committedDate": "2020-05-15T17:20:09Z", "message": "add api call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0cb9f9f70a99e9868d982900fe154e89d641c7", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/9a0cb9f9f70a99e9868d982900fe154e89d641c7", "committedDate": "2020-05-15T18:12:56Z", "message": "add localstorage logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0148fabb5d4bcf0cadc9024d00a3dcb8bc39c81a", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/0148fabb5d4bcf0cadc9024d00a3dcb8bc39c81a", "committedDate": "2020-05-15T20:07:42Z", "message": "add styling for votes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc99c73bf7deed44e656fc2b858c55671673503c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/cc99c73bf7deed44e656fc2b858c55671673503c", "committedDate": "2020-05-15T20:15:01Z", "message": "remove from localStorage on delete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "232255bdf9c17d1418e81f5854989bd3d8a16558", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/232255bdf9c17d1418e81f5854989bd3d8a16558", "committedDate": "2020-05-15T21:25:41Z", "message": "add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "305eeb52f120e42b32288acac7cf347d0a5779ba", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/305eeb52f120e42b32288acac7cf347d0a5779ba", "committedDate": "2020-05-15T21:27:53Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b241be1f773738791a258f623bba492ae752a17f", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/b241be1f773738791a258f623bba492ae752a17f", "committedDate": "2020-05-15T21:33:00Z", "message": "fix java style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ada320610b969ca03462856aa8b7111a3ec2717a", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/ada320610b969ca03462856aa8b7111a3ec2717a", "committedDate": "2020-05-15T22:01:55Z", "message": "fix java tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "632f7c952e120046314d6a42e98b706d26ed1238", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/632f7c952e120046314d6a42e98b706d26ed1238", "committedDate": "2020-05-16T10:53:48Z", "message": "add default value for old questions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec6f5c2f61dcbfca1565eaadc4d7ee5a9fe05442", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/ec6f5c2f61dcbfca1565eaadc4d7ee5a9fe05442", "committedDate": "2020-05-17T11:26:33Z", "message": "merge changelogs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e6d6b197445983403c2684be7f6b7cb796e1266", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/1e6d6b197445983403c2684be7f6b7cb796e1266", "committedDate": "2020-05-17T17:39:33Z", "message": "liquibase fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9361ca728767e9d5e333bc1a563d0d1f660c01e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/e9361ca728767e9d5e333bc1a563d0d1f660c01e", "committedDate": "2020-05-17T18:15:34Z", "message": "fix up/downvite logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92ead2c630e62210486e7f923020dba5716c320b", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/92ead2c630e62210486e7f923020dba5716c320b", "committedDate": "2020-05-17T18:31:36Z", "message": "adjust tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e3344e4f5a03cba467fca2b7848c8819159897e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/1e3344e4f5a03cba467fca2b7848c8819159897e", "committedDate": "2020-05-18T16:40:16Z", "message": "Merge branch 'develop' into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "737d14cb05aa980c944c9c95d1f667e05d3ffe3f", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/737d14cb05aa980c944c9c95d1f667e05d3ffe3f", "committedDate": "2020-05-22T17:53:06Z", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc5407fb2a7e8528d48d8a571a9287ca431edaba", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/dc5407fb2a7e8528d48d8a571a9287ca431edaba", "committedDate": "2020-05-22T18:21:18Z", "message": "add sort by vote for questions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1f9b1f2ee86d9ac35516eea6a5e28d5d25c42a1", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/d1f9b1f2ee86d9ac35516eea6a5e28d5d25c42a1", "committedDate": "2020-05-23T16:57:04Z", "message": "Merge branch 'develop' into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94fbbf2bdce11e85044b51d6bac6e9d475317d5e", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/94fbbf2bdce11e85044b51d6bac6e9d475317d5e", "committedDate": "2020-05-23T19:42:37Z", "message": "Merge branch 'develop' into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dce0becb4b316baeb766b6fd98b5daf4f220c9a5", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/dce0becb4b316baeb766b6fd98b5daf4f220c9a5", "committedDate": "2020-05-24T19:50:28Z", "message": "only send diff of vote change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6476d1645c3343136afc8f6042c137d7a3b5b39c", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/6476d1645c3343136afc8f6042c137d7a3b5b39c", "committedDate": "2020-05-24T20:03:43Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16279158d910e5a1d86e54e5c199f8e45cf1b0b2", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/16279158d910e5a1d86e54e5c199f8e45cf1b0b2", "committedDate": "2020-05-24T20:16:39Z", "message": "fix test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b935582791ad08784a7672b89702765fc13b694a", "author": {"user": {"login": "madwau", "name": "Martin Wauligmann"}}, "url": "https://github.com/ls1intum/Artemis/commit/b935582791ad08784a7672b89702765fc13b694a", "committedDate": "2020-05-25T09:45:44Z", "message": "Merge branch 'develop' into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjA5NDI3", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-417609427", "createdAt": "2020-05-25T10:12:09Z", "commit": {"oid": "b935582791ad08784a7672b89702765fc13b694a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f20fd66e55f2547dceda5c7cc3e50ef104c112b", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/0f20fd66e55f2547dceda5c7cc3e50ef104c112b", "committedDate": "2020-05-25T11:13:50Z", "message": "add check for max vote change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8377799649851aa8351d65b96fc219e8c48a6259", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/8377799649851aa8351d65b96fc219e8c48a6259", "committedDate": "2020-05-25T11:36:28Z", "message": "cap votes at zero"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b823830b0f2bb8aa6d19e1b80d114b63cfb140d2", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/b823830b0f2bb8aa6d19e1b80d114b63cfb140d2", "committedDate": "2020-05-25T11:53:41Z", "message": "fix server tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e854ee46a49d39993098936848fa1ffa2d98a1e8", "author": {"user": {"login": "F4lka", "name": null}}, "url": "https://github.com/ls1intum/Artemis/commit/e854ee46a49d39993098936848fa1ffa2d98a1e8", "committedDate": "2020-05-25T16:24:29Z", "message": "Merge branch 'develop' into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "082f724ac09bca5514176d2464ae795ca3e5a202", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/082f724ac09bca5514176d2464ae795ca3e5a202", "committedDate": "2020-05-25T16:30:03Z", "message": "remove notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "101c5d9f2d53db31edd141388ba2db4ad6693a4f", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/101c5d9f2d53db31edd141388ba2db4ad6693a4f", "committedDate": "2020-05-25T16:31:29Z", "message": "Merge branch 'feature/questions-answers/question-vote' of https://github.com/ls1intum/Artemis into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODI2NDU3", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-417826457", "createdAt": "2020-05-25T17:45:10Z", "commit": {"oid": "101c5d9f2d53db31edd141388ba2db4ad6693a4f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMjU4OTM4", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-421258938", "createdAt": "2020-05-29T20:13:41Z", "commit": {"oid": "101c5d9f2d53db31edd141388ba2db4ad6693a4f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMDoxMzo0MVrOGcqu0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMDoxMzo0MVrOGcqu0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMzQyNg==", "bodyText": "I believe some test cases where the value actually gets changed would be quite useful.", "url": "https://github.com/ls1intum/Artemis/pull/1478#discussion_r432713426", "createdAt": "2020-05-29T20:13:41Z", "author": {"login": "sleiss"}, "path": "src/test/java/de/tum/in/www1/artemis/StudentQuestionIntegrationTest.java", "diffHunk": "@@ -214,4 +214,41 @@ public void deleteStudentQuestions_asStudent() throws Exception {\n         request.delete(\"/api/student-questions/\" + studentQuestion1_student2.getId(), HttpStatus.FORBIDDEN);\n         assertThat(studentQuestionRepository.count()).isEqualTo(1);\n     }\n+\n+    @Test\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void editStudentQuestionVotes_asInstructor() throws Exception {\n+        StudentQuestion studentQuestion = database.createCourseWithExerciseAndStudentQuestions().get(0);\n+\n+        studentQuestion.setVotes(42);\n+\n+        StudentQuestion updatedStudentQuestion = request.putWithResponseBody(\"/api/student-questions/\" + studentQuestion.getId() + \"/votes\", 0, StudentQuestion.class,\n+                HttpStatus.OK);\n+        assertThat(updatedStudentQuestion.getVotes().equals(42));\n+    }\n+\n+    @Test\n+    @WithMockUser(username = \"tutor1\", roles = \"TA\")\n+    public void editStudentQuestionVotes_asTA() throws Exception {\n+        StudentQuestion studentQuestion = database.createCourseWithExerciseAndStudentQuestions().get(0);\n+\n+        studentQuestion.setVotes(42);\n+\n+        StudentQuestion updatedStudentQuestion = request.putWithResponseBody(\"/api/student-questions/\" + studentQuestion.getId() + \"/votes\", 0, StudentQuestion.class,\n+                HttpStatus.OK);\n+        assertThat(updatedStudentQuestion.getVotes().equals(42));\n+    }\n+\n+    @Test\n+    @WithMockUser(username = \"student1\", roles = \"USER\")\n+    public void editStudentQuestionVotes_asStudent() throws Exception {\n+        List<StudentQuestion> questions = database.createCourseWithExerciseAndStudentQuestions();\n+        StudentQuestion studentQuestion = questions.get(0);\n+\n+        studentQuestion.setVotes(42);\n+\n+        StudentQuestion updatedStudentQuestion = request.putWithResponseBody(\"/api/student-questions/\" + studentQuestion.getId() + \"/votes\", 0, StudentQuestion.class,\n+                HttpStatus.OK);\n+        assertThat(updatedStudentQuestion.getVotes().equals(42));\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "101c5d9f2d53db31edd141388ba2db4ad6693a4f"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45b799f736ae7a4a3ae31813144fb489be783d9b", "author": {"user": {"login": "filip-gregurevic", "name": "Filip Gregurevic"}}, "url": "https://github.com/ls1intum/Artemis/commit/45b799f736ae7a4a3ae31813144fb489be783d9b", "committedDate": "2020-05-30T11:42:51Z", "message": "tests that actually test something"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDIxNDAy", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-422021402", "createdAt": "2020-06-01T17:03:50Z", "commit": {"oid": "45b799f736ae7a4a3ae31813144fb489be783d9b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDUyNDUy", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-422052452", "createdAt": "2020-06-01T17:47:43Z", "commit": {"oid": "45b799f736ae7a4a3ae31813144fb489be783d9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ee90463a715bf57558837c48277a3cd1a9e6147", "author": {"user": {"login": "sascha11110", "name": "Sascha Beele"}}, "url": "https://github.com/ls1intum/Artemis/commit/4ee90463a715bf57558837c48277a3cd1a9e6147", "committedDate": "2020-06-01T18:46:20Z", "message": "Merge branch 'develop' into feature/questions-answers/question-vote"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTE0NDIy", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-422114422", "createdAt": "2020-06-01T19:20:34Z", "commit": {"oid": "4ee90463a715bf57558837c48277a3cd1a9e6147"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTUxMTM2", "url": "https://github.com/ls1intum/Artemis/pull/1478#pullrequestreview-422551136", "createdAt": "2020-06-02T10:36:51Z", "commit": {"oid": "4ee90463a715bf57558837c48277a3cd1a9e6147"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2656, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}