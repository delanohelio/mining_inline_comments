{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MDQwMDM5", "number": 1286, "title": "GG-30055: Ab Initio related fixes to ODBC", "bodyText": "", "createdAt": "2020-07-06T22:50:57Z", "url": "https://github.com/gridgain/gridgain/pull/1286", "merged": true, "mergeCommit": {"oid": "beab286f21f80be322c0cf30f9a45346010f8d15"}, "closed": true, "closedAt": "2020-07-08T08:55:11Z", "author": {"login": "isapego"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcy2OEQAFqTQ0NDUyNjA2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy2imtABqjM1MjQxNzU3MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NTI2MDY1", "url": "https://github.com/gridgain/gridgain/pull/1286#pullrequestreview-444526065", "createdAt": "2020-07-08T08:32:26Z", "commit": {"oid": "8599cb97afce575d28677cecb52d2b178b13538f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwODozMjoyNlrOGudu9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwODozMjoyNlrOGudu9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM3NDgzOA==", "bodyText": "Should we also test values with fractional parts?", "url": "https://github.com/gridgain/gridgain/pull/1286#discussion_r451374838", "createdAt": "2020-07-08T08:32:26Z", "author": {"login": "ptupitsyn"}, "path": "modules/platforms/cpp/odbc-test/src/utility_test.cpp", "diffHunk": "@@ -89,4 +89,58 @@ BOOST_AUTO_TEST_CASE(TestUtilityWriteReadString)\n     BOOST_REQUIRE(outStr4.empty());\n }\n \n+void CheckDecimalWriteRead(const std::string& val)\n+{\n+    using namespace ignite::impl::binary;\n+    using namespace ignite::impl::interop;\n+    using namespace ignite::common;\n+    using namespace ignite::utility;\n+\n+    InteropUnpooledMemory mem(1024);\n+    InteropOutputStream outStream(&mem);\n+    BinaryWriterImpl writer(&outStream, 0);\n+\n+    Decimal decimal(val);\n+\n+    WriteDecimal(writer, decimal);\n+\n+    outStream.Synchronize();\n+\n+    InteropInputStream inStream(&mem);\n+    BinaryReaderImpl reader(&inStream);\n+\n+    Decimal out;\n+    ReadDecimal(reader, out);\n+\n+    std::stringstream converter;\n+    converter << out;\n+\n+    std::string res = converter.str();\n+\n+    BOOST_CHECK_EQUAL(res, val);\n+}\n+\n+/**\n+ * Check that Decimal writing and reading works as expected.\n+ *\n+ * 1. Create Decimal value.\n+ * 2. Write using standard serialization algorithm.\n+ * 3. Read using standard de-serialization algorithm.\n+ * 4. Check that initial and read value are equal.\n+ *\n+ * Repeat with the following values: 0, 1, -1, 42, -42, 160, -160, 34729864879625196, -34729864879625196\n+ */\n+BOOST_AUTO_TEST_CASE(TestUtilityWriteReadDecimal)\n+{\n+    CheckDecimalWriteRead(\"0\");\n+    CheckDecimalWriteRead(\"1\");\n+    CheckDecimalWriteRead(\"-1\");\n+    CheckDecimalWriteRead(\"42\");\n+    CheckDecimalWriteRead(\"-42\");\n+    CheckDecimalWriteRead(\"160\");\n+    CheckDecimalWriteRead(\"-160\");\n+    CheckDecimalWriteRead(\"34729864879625196\");\n+    CheckDecimalWriteRead(\"-34729864879625196\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8599cb97afce575d28677cecb52d2b178b13538f"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37bf235262e77010356127ea4cfd2b38f99f231f", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/37bf235262e77010356127ea4cfd2b38f99f231f", "committedDate": "2020-07-08T08:54:11Z", "message": "GG-30055: Added support for UID and PWD"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673eb581e73715b1b7588e248b9027b558ded9c4", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/673eb581e73715b1b7588e248b9027b558ded9c4", "committedDate": "2020-07-08T08:54:11Z", "message": "GG-30055: Decimal serialization fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb582d4f7e35490ad7b022ef710f033387dc98a7", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/eb582d4f7e35490ad7b022ef710f033387dc98a7", "committedDate": "2020-07-08T08:54:11Z", "message": "GG-30055: Fixed getting of env parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32c31d75739b9fc7e861cf7b9aabc7319624bbcd", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/32c31d75739b9fc7e861cf7b9aabc7319624bbcd", "committedDate": "2020-07-08T08:54:11Z", "message": "GG-30055: Added tests for UID and PWD"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0bc06f236cdb532df8bf3470fa389288c2e70f7", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/d0bc06f236cdb532df8bf3470fa389288c2e70f7", "committedDate": "2020-07-08T08:54:11Z", "message": "GG-30055: Added test for Decimal writing-reading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64233972490dd4d4134155e80a738fc59287e26a", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/64233972490dd4d4134155e80a738fc59287e26a", "committedDate": "2020-07-08T08:54:11Z", "message": "GG-30055: Added test for env ODBC version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "727b2a163f959034b0b5d4763f6cff951b3064ed", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/727b2a163f959034b0b5d4763f6cff951b3064ed", "committedDate": "2020-07-08T08:54:12Z", "message": "GG-30055: Added Decimal tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fcd06435fa36c1e30faf007751a5f47f7447548", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/7fcd06435fa36c1e30faf007751a5f47f7447548", "committedDate": "2020-07-08T08:51:40Z", "message": "GG-30055: Added Decimal tests"}, "afterCommit": {"oid": "727b2a163f959034b0b5d4763f6cff951b3064ed", "author": {"user": {"login": "isapego", "name": "Igor Sapego"}}, "url": "https://github.com/gridgain/gridgain/commit/727b2a163f959034b0b5d4763f6cff951b3064ed", "committedDate": "2020-07-08T08:54:12Z", "message": "GG-30055: Added Decimal tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4128, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}