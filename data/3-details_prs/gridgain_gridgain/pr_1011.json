{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjEzMTU5", "number": 1011, "title": "GG-28214 Renamed default schema field.", "bodyText": "", "createdAt": "2020-03-25T14:15:00Z", "url": "https://github.com/gridgain/gridgain/pull/1011", "merged": true, "mergeCommit": {"oid": "1df345b660faff8b40502b3cf0702a8083d690ec"}, "closed": true, "closedAt": "2020-03-27T10:28:55Z", "author": {"login": "vsisko"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRHtgTAH2gAyMzkzNjEzMTU5OmFhYThhYjdmM2MxMTViNDZhZTBkOWM4NTJmOTQ0NTZjYjNlYTYwNjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRuHAkgFqTM4MjczNjY4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aaa8ab7f3c115b46ae0d9c852f94456cb3ea6065", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/aaa8ab7f3c115b46ae0d9c852f94456cb3ea6065", "committedDate": "2020-03-25T13:41:50Z", "message": "GG-28214 Renamed default schema field."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjg1OTYx", "url": "https://github.com/gridgain/gridgain/pull/1011#pullrequestreview-381685961", "createdAt": "2020-03-26T03:51:57Z", "commit": {"oid": "aaa8ab7f3c115b46ae0d9c852f94456cb3ea6065"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMzo1MTo1N1rOF72fUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMzo1MTo1N1rOF72fUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMwMzA1OA==", "bodyText": "org.apache.ignite.internal.processors.cache.GridCacheProcessor#cache use the cache name as an argument, but you pass schema name. How this will work?", "url": "https://github.com/gridgain/gridgain/pull/1011#discussion_r398303058", "createdAt": "2020-03-26T03:51:57Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/action/controller/QueryActionsController.java", "diffHunk": "@@ -132,9 +133,13 @@ public QueryActionsController(GridKernalContext ctx) {\n \n                 SqlFieldsQuery qry = prepareQuery(arg);\n \n-                GridCacheContext cctx = F.isEmpty(arg.getCacheName())\n+                IgniteInternalCache<Object, Object> cache = F.isEmpty(arg.getDefaultSchema())\n+                    ? null\n+                    : ctx.cache().cache(arg.getDefaultSchema());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aaa8ab7f3c115b46ae0d9c852f94456cb3ea6065"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37172077e8b2108bb3eaa20e70a714ddd37c300e", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/37172077e8b2108bb3eaa20e70a714ddd37c300e", "committedDate": "2020-03-26T10:57:09Z", "message": "GG-28214 Renamed default schema field."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxOTAyMTU1", "url": "https://github.com/gridgain/gridgain/pull/1011#pullrequestreview-381902155", "createdAt": "2020-03-26T11:04:09Z", "commit": {"oid": "aaa8ab7f3c115b46ae0d9c852f94456cb3ea6065"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxOTE1NjIz", "url": "https://github.com/gridgain/gridgain/pull/1011#pullrequestreview-381915623", "createdAt": "2020-03-26T11:23:53Z", "commit": {"oid": "37172077e8b2108bb3eaa20e70a714ddd37c300e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMToyMzo1NFrOF8CWjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMToyMzo1NFrOF8CWjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ5NzQyMg==", "bodyText": "Let's add test where schema is removed from query and set we set default schema", "url": "https://github.com/gridgain/gridgain/pull/1011#discussion_r398497422", "createdAt": "2020-03-26T11:23:54Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/test/java/org/apache/ignite/agent/action/controller/QueryActionsControllerTest.java", "diffHunk": "@@ -365,7 +453,7 @@ public void shouldReturnRunningQueriesFromAllNodes() {\n                         .setQueryId(UUID.randomUUID().toString())\n                         .setQueryText(\"SELECT count(*), sleep() AS \\\"\" + nid + \"\\\" FROM \\\"TestCache\\\".STRING\")\n                         .setPageSize(1)\n-                        .setCacheName(\"TestCache\")\n+                        .setDefaultSchema(\"TestCache\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37172077e8b2108bb3eaa20e70a714ddd37c300e"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNTQxNzMw", "url": "https://github.com/gridgain/gridgain/pull/1011#pullrequestreview-382541730", "createdAt": "2020-03-27T02:23:30Z", "commit": {"oid": "37172077e8b2108bb3eaa20e70a714ddd37c300e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNzM2Njgw", "url": "https://github.com/gridgain/gridgain/pull/1011#pullrequestreview-382736680", "createdAt": "2020-03-27T10:26:05Z", "commit": {"oid": "37172077e8b2108bb3eaa20e70a714ddd37c300e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4551, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}