{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NjgwNzM1", "number": 1370, "title": "GG-30462 Server node fails on remote filter deployment after client reconnect with new node id", "bodyText": "", "createdAt": "2020-08-13T23:25:33Z", "url": "https://github.com/gridgain/gridgain/pull/1370", "merged": true, "mergeCommit": {"oid": "e94617664674bd152a906889a9965cdd0627ba56"}, "closed": true, "closedAt": "2020-09-28T20:03:23Z", "author": {"login": "ibelyakov"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc92wSqgH2gAyNDY3NjgwNzM1OjcwZDljYzdiMTU0ZTg4MjE5ZTdkODE2ZTJjODc2OTI2MDE2ZDExMzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNQ1ElAH2gAyNDY3NjgwNzM1OjM1MTY0NzUzOGI1NDQwMDcyNTVmNjg1MDNhOWZiNWU4OTIxNDU1MGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "70d9cc7b154e88219e7d816e2c876926016d1132", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/70d9cc7b154e88219e7d816e2c876926016d1132", "committedDate": "2020-08-11T13:23:05Z", "message": "GG-30462 local routines registration, after client reconnect, moved to localJoinFuture listener for p2p case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb96e1ee6a0f94f17d0c4f178a1979e3059d5f38", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/fb96e1ee6a0f94f17d0c4f178a1979e3059d5f38", "committedDate": "2020-08-11T14:45:03Z", "message": "GG-30462 routine registration on node start used only for CQ routines with p2p marshalled data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74ea7c3a0d539c67934b3d0713bae36f9202878c", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/74ea7c3a0d539c67934b3d0713bae36f9202878c", "committedDate": "2020-08-11T15:04:47Z", "message": "GG-30462 check for empty locInfos0 added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb556957e8de9c692b229aab6e504876422d946a", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/bb556957e8de9c692b229aab6e504876422d946a", "committedDate": "2020-08-12T09:54:50Z", "message": "Merge branch 'master' into gg-30462"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4f75dbfeb9c1625624a4c05327d2de8020aa39c", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/b4f75dbfeb9c1625624a4c05327d2de8020aa39c", "committedDate": "2020-08-12T15:16:33Z", "message": "GG-30462 validation for CacheContinuousQueryDeployableObject added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b10bd42805f4d7253281fd1859cd6b5c2e577f8c", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/b10bd42805f4d7253281fd1859cd6b5c2e577f8c", "committedDate": "2020-08-12T17:19:06Z", "message": "GG-30462 check for joiningNodeId added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e11d7d186f6c7ab13f0dc4714be6d1f059ed0d2", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/5e11d7d186f6c7ab13f0dc4714be6d1f059ed0d2", "committedDate": "2020-08-13T18:22:06Z", "message": "GG-30462 routines registration moved to onReconnected method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebc07422fae549dcd3af3ace5cc08c0afd359094", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/ebc07422fae549dcd3af3ace5cc08c0afd359094", "committedDate": "2020-08-13T21:24:48Z", "message": "GG-30462 tests fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1473fcd765b687773ae9b55bbbe27e34762bb80e", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/1473fcd765b687773ae9b55bbbe27e34762bb80e", "committedDate": "2020-08-13T23:23:13Z", "message": "GG-30462 failure handler check added to CacheContinuousQueryOperationP2PTest. GridCompoundFuture usage added."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8f0f989034d5e5b4f183e01ea7416222ff6f902", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/d8f0f989034d5e5b4f183e01ea7416222ff6f902", "committedDate": "2020-08-14T15:22:57Z", "message": "GG-30462 isMarshalledObjectValid check added for discoProtoVer2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b03c9b198b160689851cdfd0594dcfd37a69e71", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/9b03c9b198b160689851cdfd0594dcfd37a69e71", "committedDate": "2020-08-16T22:39:04Z", "message": "GG-30462 logging changed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ac65fb787d8b507157175671619b975708cf7b", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/93ac65fb787d8b507157175671619b975708cf7b", "committedDate": "2020-08-17T18:29:22Z", "message": "Merge branch 'master' into gg-30462"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54526f7c1defd9575760f3749412d8d13f7c5acc", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/54526f7c1defd9575760f3749412d8d13f7c5acc", "committedDate": "2020-08-25T12:46:00Z", "message": "GG-30462 p2p deployment context validation added for Messaging and Events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0020b087bce3b2a5405d1d1de528e97a0b61306", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/b0020b087bce3b2a5405d1d1de528e97a0b61306", "committedDate": "2020-08-25T12:53:04Z", "message": "Merge branch 'master' into gg-30462\n\n# Conflicts:\n#\tmodules/core/src/main/java/org/apache/ignite/internal/util/IgniteUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96e3d75af04e0547d566fafda4b91193629544cb", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/96e3d75af04e0547d566fafda4b91193629544cb", "committedDate": "2020-09-01T08:28:50Z", "message": "Merge branch 'master' into gg-30462"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe68b4419a7c2f57c4e526c6e23e1b946e03d05d", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/fe68b4419a7c2f57c4e526c6e23e1b946e03d05d", "committedDate": "2020-09-17T16:50:03Z", "message": "GG-30462 continuous routine registration with the same routineId on reconnect implemented"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db8d29fa1058f02b3cfdafa9a24a0f77fc6b2f81", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/db8d29fa1058f02b3cfdafa9a24a0f77fc6b2f81", "committedDate": "2020-09-17T16:55:32Z", "message": "Merge branch 'master' into gg-30462\n\n# Conflicts:\n#\tmodules/core/src/main/java/org/apache/ignite/internal/util/IgniteUtils.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTY5NTcy", "url": "https://github.com/gridgain/gridgain/pull/1370#pullrequestreview-493169572", "createdAt": "2020-09-22T06:56:03Z", "commit": {"oid": "db8d29fa1058f02b3cfdafa9a24a0f77fc6b2f81"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjo1NjowM1rOHVscqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjo1NjowM1rOHVscqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUxMDM3Ng==", "bodyText": "Should be on new line", "url": "https://github.com/gridgain/gridgain/pull/1370#discussion_r492510376", "createdAt": "2020-09-22T06:56:03Z", "author": {"login": "ascherbakoff"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/continuous/GridContinuousProcessor.java", "diffHunk": "@@ -487,8 +514,22 @@ private Serializable getDiscoveryData(UUID joiningNodeId) {\n     private Map<UUID, LocalRoutineInfo> copyLocalInfos(Map<UUID, LocalRoutineInfo> locInfos) {\n         Map<UUID, LocalRoutineInfo> res = U.newHashMap(locInfos.size());\n \n-        for (Map.Entry<UUID, LocalRoutineInfo> e : locInfos.entrySet())\n+        for (Map.Entry<UUID, LocalRoutineInfo> e : locInfos.entrySet()) {\n+            if (ctx.config().isPeerClassLoadingEnabled()) {\n+                GridContinuousHandler hnd = e.getValue().handler();\n+\n+                try {\n+                    if (!hnd.p2pContextValid(ctx))\n+                        continue;\n+                } catch (IgniteCheckedException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db8d29fa1058f02b3cfdafa9a24a0f77fc6b2f81"}, "originalPosition": 146}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01caf675cd8bd32ca19316e97c8a132ee1e224a2", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/01caf675cd8bd32ca19316e97c8a132ee1e224a2", "committedDate": "2020-09-28T07:47:12Z", "message": "GG-30462 formatting fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "351647538b544007255f68503a9fb5e89214550f", "author": {"user": {"login": "ibelyakov", "name": "Igor Belyakov"}}, "url": "https://github.com/gridgain/gridgain/commit/351647538b544007255f68503a9fb5e89214550f", "committedDate": "2020-09-28T10:14:42Z", "message": "Merge branch 'master' into gg-30462"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 78, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}