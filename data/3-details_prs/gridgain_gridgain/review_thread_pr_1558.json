{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NTMwMTU5", "number": 1558, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDo1MjoyMFrOE3Q0eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDo1MjoyMFrOE3Q0eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MzgyNzEzOnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDo1MjoyMFrOHwgSiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNzoxMDowMVrOHwmuKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYyMjczMQ==", "bodyText": "Using int for nullability is very confusing, especially if you don't know about ResultSetMetaData. Can we make this boolean, since columnNullableUnknown is not used and there are only 2 possible values? Here and below.\nShould we add a property instead of making the field public?", "url": "https://github.com/gridgain/gridgain/pull/1558#discussion_r520622731", "createdAt": "2020-11-10T14:52:20Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "diffHunk": "@@ -45,8 +45,8 @@\n     /** Scale. */\n     public final int scale;\n \n-    /** Client version. */\n-    private final ClientListenerProtocolVersion ver;\n+    /** Nullability. */\n+    public final int nullability;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6bd247ba239fd604cca3d11a069cee01b38ec4c9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY0NTIwOA==", "bodyText": "I'm not sure that columnNullableUnknown is not used and can never be returned. Do you propose to use some kind of enum here? Or should I add a comment?\nYou are right. I'm not sure, why this and other fields are public. Will change.", "url": "https://github.com/gridgain/gridgain/pull/1558#discussion_r520645208", "createdAt": "2020-11-10T15:20:46Z", "author": {"login": "isapego"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "diffHunk": "@@ -45,8 +45,8 @@\n     /** Scale. */\n     public final int scale;\n \n-    /** Client version. */\n-    private final ClientListenerProtocolVersion ver;\n+    /** Nullability. */\n+    public final int nullability;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYyMjczMQ=="}, "originalCommit": {"oid": "6bd247ba239fd604cca3d11a069cee01b38ec4c9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY2MjQ2Mg==", "bodyText": "This field is initialized only in one place in OdbcRequestHandler: prop.notNull() ? columnNoNulls : columnNullable.\ncolumnNullableUnknown is never used if I'm not missing anything.", "url": "https://github.com/gridgain/gridgain/pull/1558#discussion_r520662462", "createdAt": "2020-11-10T15:42:27Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "diffHunk": "@@ -45,8 +45,8 @@\n     /** Scale. */\n     public final int scale;\n \n-    /** Client version. */\n-    private final ClientListenerProtocolVersion ver;\n+    /** Nullability. */\n+    public final int nullability;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYyMjczMQ=="}, "originalCommit": {"oid": "6bd247ba239fd604cca3d11a069cee01b38ec4c9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcwNjI0Nw==", "bodyText": "That's not the only place where nullability is taken from - see second constructor, it takes nullability from H2 result set column information.", "url": "https://github.com/gridgain/gridgain/pull/1558#discussion_r520706247", "createdAt": "2020-11-10T16:39:44Z", "author": {"login": "isapego"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "diffHunk": "@@ -45,8 +45,8 @@\n     /** Scale. */\n     public final int scale;\n \n-    /** Client version. */\n-    private final ClientListenerProtocolVersion ver;\n+    /** Nullability. */\n+    public final int nullability;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYyMjczMQ=="}, "originalCommit": {"oid": "6bd247ba239fd604cca3d11a069cee01b38ec4c9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcyMDQxOA==", "bodyText": "Ok then, let's keep it as is, but add a comment with a reference to ResultSetMetaData to indicate the meaning.", "url": "https://github.com/gridgain/gridgain/pull/1558#discussion_r520720418", "createdAt": "2020-11-10T16:59:09Z", "author": {"login": "ptupitsyn"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "diffHunk": "@@ -45,8 +45,8 @@\n     /** Scale. */\n     public final int scale;\n \n-    /** Client version. */\n-    private final ClientListenerProtocolVersion ver;\n+    /** Nullability. */\n+    public final int nullability;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYyMjczMQ=="}, "originalCommit": {"oid": "6bd247ba239fd604cca3d11a069cee01b38ec4c9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcyODEwNw==", "bodyText": "Added comment that I hope will make it more clear.", "url": "https://github.com/gridgain/gridgain/pull/1558#discussion_r520728107", "createdAt": "2020-11-10T17:10:01Z", "author": {"login": "isapego"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/odbc/OdbcColumnMeta.java", "diffHunk": "@@ -45,8 +45,8 @@\n     /** Scale. */\n     public final int scale;\n \n-    /** Client version. */\n-    private final ClientListenerProtocolVersion ver;\n+    /** Nullability. */\n+    public final int nullability;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYyMjczMQ=="}, "originalCommit": {"oid": "6bd247ba239fd604cca3d11a069cee01b38ec4c9"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3241, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}