{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3OTc5Mjcx", "number": 1371, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMzoyNDozOFrOEYd-RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODo1Nzo1NFrOEa4DTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0MDkyMzU2OnYy", "diffSide": "RIGHT", "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMzoyNDozOFrOHA0b9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMDoyNzoyNVrOHBjJeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDYyMTE3Mw==", "bodyText": "Let's use try-finally for streams.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r470621173", "createdAt": "2020-08-14T13:24:38Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "diffHunk": "@@ -1056,6 +1058,52 @@ public void testDoInParallelBatch() {\n         }\n     }\n \n+    /**\n+     * Test open file:\n+     * 1. by relative path\n+     * 2. by absolute path\n+     * 3. by classpath path\n+     * 4. by non existing path\n+     *\n+     * @throws Throwable\n+     */\n+    @Test\n+    public void testOpenFileInputStream() throws Throwable{\n+        // 1. by relative path\n+        InputStream relative = U.openFileInputStream(\"org.apache.ignite.util/bigUtf.txt\");\n+\n+        assertNotNull(\"Can't open input stream by relative path org.apache.ignite.util/bigUtf.txt\", relative);\n+\n+        relative.close();\n+\n+        // 2. by absolute path\n+        String absolutePath = U.getIgniteHome() + \"/pom.xml\";\n+        InputStream absolute = U.openFileInputStream(absolutePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b50e093d970f1783e624790b07ada956d8d0ffa8"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM4NjQ4OA==", "bodyText": "Switch to try with resources", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r471386488", "createdAt": "2020-08-17T10:27:25Z", "author": {"login": "Berkof"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "diffHunk": "@@ -1056,6 +1058,52 @@ public void testDoInParallelBatch() {\n         }\n     }\n \n+    /**\n+     * Test open file:\n+     * 1. by relative path\n+     * 2. by absolute path\n+     * 3. by classpath path\n+     * 4. by non existing path\n+     *\n+     * @throws Throwable\n+     */\n+    @Test\n+    public void testOpenFileInputStream() throws Throwable{\n+        // 1. by relative path\n+        InputStream relative = U.openFileInputStream(\"org.apache.ignite.util/bigUtf.txt\");\n+\n+        assertNotNull(\"Can't open input stream by relative path org.apache.ignite.util/bigUtf.txt\", relative);\n+\n+        relative.close();\n+\n+        // 2. by absolute path\n+        String absolutePath = U.getIgniteHome() + \"/pom.xml\";\n+        InputStream absolute = U.openFileInputStream(absolutePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDYyMTE3Mw=="}, "originalCommit": {"oid": "b50e093d970f1783e624790b07ada956d8d0ffa8"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MjI3NzEyOnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNzoxMVrOHD-eEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjozMTowM1rOHD-m0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMTI4Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 */\n          \n          \n            \n                 * @deprecated Use {@link U#openFileInputStream(String)} instead.\n          \n          \n            \n                 */", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473931283", "createdAt": "2020-08-20T12:27:11Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "diffHunk": "@@ -476,6 +477,7 @@ private void checkNullParameter(Object param, String name) throws SSLException {\n      * @return Opened input stream.\n      * @throws IOException If stream could not be opened.\n      */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMzUyMA==", "bodyText": "we can't offer to use internal class from public API", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473933520", "createdAt": "2020-08-20T12:31:03Z", "author": {"login": "Berkof"}, "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "diffHunk": "@@ -476,6 +477,7 @@ private void checkNullParameter(Object param, String name) throws SSLException {\n      * @return Opened input stream.\n      * @throws IOException If stream could not be opened.\n      */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMTI4Mw=="}, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MjI3OTMwOnYy", "diffSide": "RIGHT", "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNzo0M1rOHD-fUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjo0MDowNlrOHD-6MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMTYwMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws Throwable\n          \n          \n            \n                 * @throws Throwable If fails.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473931603", "createdAt": "2020-08-20T12:27:43Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "diffHunk": "@@ -1056,6 +1058,41 @@ public void testDoInParallelBatch() {\n         }\n     }\n \n+    /**\n+     * Test open file:\n+     * 1. by relative path\n+     * 2. by absolute path\n+     * 3. by classpath path\n+     * 4. by non existing path\n+     *\n+     * @throws Throwable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzODQ4MQ==", "bodyText": "DONE", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473938481", "createdAt": "2020-08-20T12:40:06Z", "author": {"login": "Berkof"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "diffHunk": "@@ -1056,6 +1058,41 @@ public void testDoInParallelBatch() {\n         }\n     }\n \n+    /**\n+     * Test open file:\n+     * 1. by relative path\n+     * 2. by absolute path\n+     * 3. by classpath path\n+     * 4. by non existing path\n+     *\n+     * @throws Throwable", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMTYwMw=="}, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MjI4MjI1OnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/util/IgniteUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyODozMVrOHD-hFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjozOTowNlrOHD-33g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMjA1NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473932055", "createdAt": "2020-08-20T12:28:31Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/util/IgniteUtils.java", "diffHunk": "@@ -3593,6 +3593,28 @@ public static void onGridStop() throws InterruptedException {\n         }\n     }\n \n+    /**\n+     * Find file (by path or in resources) and open input stream to it.\n+     *\n+     * @param filePath Path to the file.\n+     * @return Opened input stream.\n+     * @throws IOException If stream could not be opened.\n+     */\n+    public static InputStream openFileInputStream(String filePath) throws IOException {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzNzg4Ng==", "bodyText": "DONE", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473937886", "createdAt": "2020-08-20T12:39:06Z", "author": {"login": "Berkof"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/util/IgniteUtils.java", "diffHunk": "@@ -3593,6 +3593,28 @@ public static void onGridStop() throws InterruptedException {\n         }\n     }\n \n+    /**\n+     * Find file (by path or in resources) and open input stream to it.\n+     *\n+     * @param filePath Path to the file.\n+     * @return Opened input stream.\n+     * @throws IOException If stream could not be opened.\n+     */\n+    public static InputStream openFileInputStream(String filePath) throws IOException {\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMjA1NQ=="}, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2NjE2NzgxOnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODo1Nzo1NFrOHEkC1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNDoyODozNFrOHFUMKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDU0NjkwMQ==", "bodyText": "And why did you decided to deprecate this? It's looks useful to me in case when you are needed to provide custom place from which you have to load a keystore.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r474546901", "createdAt": "2020-08-21T08:57:54Z", "author": {"login": "korlov42"}, "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "diffHunk": "@@ -476,6 +477,7 @@ private void checkNullParameter(Object param, String name) throws SSLException {\n      * @return Opened input stream.\n      * @throws IOException If stream could not be opened.\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "327c51b2ab8e1f20cc1fa23b230662ce0618f146"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMzNTcyMg==", "bodyText": "Only because I suppose we should use the same way to load any configuration parts, not only for SslContextFactory. But now we haven't such mehanism.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r475335722", "createdAt": "2020-08-24T04:28:34Z", "author": {"login": "Berkof"}, "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "diffHunk": "@@ -476,6 +477,7 @@ private void checkNullParameter(Object param, String name) throws SSLException {\n      * @return Opened input stream.\n      * @throws IOException If stream could not be opened.\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDU0NjkwMQ=="}, "originalCommit": {"oid": "327c51b2ab8e1f20cc1fa23b230662ce0618f146"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3316, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}