{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MDAzODUy", "number": 1027, "reviewThreads": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzozMzozM1rODvqwmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOTo0MzowN1rOD0qgcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzEwMjMzOnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzozMzozM1rOGCOmKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMjozODozM1rOGJDeUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ==", "bodyText": "Why do we need this method? Can we replace its only usage with a constructor invocation?", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r404989481", "createdAt": "2020-04-07T17:33:33Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAxMTQ4NQ==", "bodyText": "It seems that buildClusterInfo() should be made protected and overloaded in the ancestor, not createClusterInfo.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405011485", "createdAt": "2020-04-07T18:08:41Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUxMjU3NQ==", "bodyText": "In this case we will copy-paste  follow part of code:\n.setId(cluster.id())\n            .setTag(cluster.tag())\n            .setActive(cluster.active())\n            .setPersistenceEnabled(CU.isPersistenceEnabled(ctx.config()))\n            .setBaselineParameters(\n                new BaselineInfo(\n                    cluster.isBaselineAutoAdjustEnabled(),\n                    cluster.baselineAutoAdjustTimeout()\n                )\n            )\n            .setSecure(ctx.authentication().enabled() || ctx.security().enabled())\n            .setFeatures(getClusterFeatures(ctx, ctx.cluster().get().nodes()));", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405512575", "createdAt": "2020-04-08T13:11:31Z", "author": {"login": "somjik-api"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU5NjY0MA==", "bodyText": "Just use super.buildClusterInfo() to construct an instance of ClusterInfo in the ancestor.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405596640", "createdAt": "2020-04-08T15:07:04Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEzNDEyNA==", "bodyText": "We can't do this because if we call super.buildClusterInfo() we construct ClusterInfo which doesn't contains additional fields. In this case we need to copy all it's fields to new GridGainClusterInfo which may leads to unexpected errors if we add some field to ClusterInfo and don't copy it to GridGainClusterInfo", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411134124", "createdAt": "2020-04-20T06:49:41Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI1MjI3Ng==", "bodyText": "Oh, yeah, you are right. Sorry, I missed that.\nBut it's still hard to tell the difference between these two methods. What's the difference between \"create\" and \"build\"?\nOne method creates an empty instance of ClusterInfo, another one creates AND populates it. But GridGainClusterInfoProcessor#createClusterInfo actually does both of those things, while it's supposed to do only creating, judging by the name.\nI like the previous design when you had two separate methods for creating and populating the ClusterInfo instances more. I suggest falling back to it.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411252276", "createdAt": "2020-04-20T10:02:20Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE0NzI4MA==", "bodyText": "Partial revert", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412147280", "createdAt": "2020-04-21T12:38:33Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -129,25 +129,23 @@ void sendClusterInfo(Event evt) {\n         if (log.isDebugEnabled())\n             log.debug(\"Sending cluster info to Control Center\");\n \n-        ClusterInfo clusterInfo = createClusterInfo();\n-\n-        populateClusterInfo(clusterInfo);\n-\n-        mgr.send(buildClusterDest(cluster.id()), clusterInfo);\n+        mgr.send(buildClusterDest(cluster.id()), buildClusterInfo());\n     }\n \n     /**\n      * @return Create cluster info.\n      */\n     protected ClusterInfo createClusterInfo() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk4OTQ4MQ=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzEyNjYxOnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzozOTo0N1rOGCO1cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDoxMTowN1rOGCxIpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5MzM5Mg==", "bodyText": "Unchecked cast warning. Add @SuppressWarnings(\"unchecked\") if you are sure about this.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r404993392", "createdAt": "2020-04-07T17:39:47Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUxNDgwMg==", "bodyText": "IDEA disagree with you :)", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405514802", "createdAt": "2020-04-08T13:14:46Z", "author": {"login": "somjik-api"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5MzM5Mg=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU1NTM2Nw==", "bodyText": "Apparently, our custom inspections ignore such warnings: https://github.com/ggprivate/ggprivate/blob/8.7-master/idea/gridgain_inspections.xml#L256\nThey weren't configured in my environment properly, sorry about that.\nPlease ignore the comment.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405555367", "createdAt": "2020-04-08T14:11:07Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5MzM5Mg=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzE0Njc5OnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzo0NDo1OFrOGCPCLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTowNzo1MlrOGCzsDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5NjY1NA==", "bodyText": "Such exception handling is evil. With such approach you will miss a failure to instantiate a component. Failures to execute commands will follow, but you won't notice the root cause. You should at least log an error message here.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r404996654", "createdAt": "2020-04-07T17:44:58Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ignored) {\n+            // No-op.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU0OTU2NQ==", "bodyText": "Add warn log", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405549565", "createdAt": "2020-04-08T14:02:52Z", "author": {"login": "somjik-api"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ignored) {\n+            // No-op.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5NjY1NA=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU5NzE5Nw==", "bodyText": "It looks more like an error to me", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405597197", "createdAt": "2020-04-08T15:07:52Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ignored) {\n+            // No-op.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5NjY1NA=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzE1MzA2OnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzo0Njo0MVrOGCPGLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNDowMjo1N1rOGCwyLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5NzY3Ng==", "bodyText": "I don't think we should ever start quietly. Issues during processor's initialization are quite important to register.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r404997676", "createdAt": "2020-04-07T17:46:41Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ignored) {\n+            // No-op.\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.\n+     *\n+     * @param proc Processor.\n+     */\n+    public static void quietStart(GridProcessor proc) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTU0OTYxNQ==", "bodyText": "Add warn log", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405549615", "createdAt": "2020-04-08T14:02:57Z", "author": {"login": "somjik-api"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/utils/AgentUtils.java", "diffHunk": "@@ -226,6 +226,45 @@ public static void quiteStop(GridProcessor proc) {\n         }\n     }\n \n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ignored) {\n+            // No-op.\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.\n+     *\n+     * @param proc Processor.\n+     */\n+    public static void quietStart(GridProcessor proc) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5NzY3Ng=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzE3MjYxOnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/ManagementConsoleAgent.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNzo1MTo1MVrOGCPS1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjo0MToxOVrOGIFY5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAwMDkxNg==", "bodyText": "What is the logic behind this rearrangement?", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405000916", "createdAt": "2020-04-07T17:51:51Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/ManagementConsoleAgent.java", "diffHunk": "@@ -87,17 +87,20 @@\n     /** Discovery event on restart agent. */\n     private static final int[] EVTS_DISCOVERY = new int[] {EVT_NODE_FAILED, EVT_NODE_LEFT, EVT_NODE_SEGMENTED};\n \n-    /** Management configuration instance. */\n-    private ManagementConfiguration cfg = new ManagementConfiguration();\n-\n     /** Websocket manager. */\n     protected WebSocketManager mgr;\n \n     /** Cluster processor. */\n-    private ClusterInfoProcessor clusterProc;\n+    protected ClusterInfoProcessor clusterProc;\n \n-    /** Span exporter. */\n-    private SpanExporter spanExporter;\n+    /** Actions dispatcher. */\n+    private ActionDispatcher actDispatcher;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUxNTk1NQ==", "bodyText": "I don't know, let's ask @nva", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r405515955", "createdAt": "2020-04-08T13:16:28Z", "author": {"login": "somjik-api"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/ManagementConsoleAgent.java", "diffHunk": "@@ -87,17 +87,20 @@\n     /** Discovery event on restart agent. */\n     private static final int[] EVTS_DISCOVERY = new int[] {EVT_NODE_FAILED, EVT_NODE_LEFT, EVT_NODE_SEGMENTED};\n \n-    /** Management configuration instance. */\n-    private ManagementConfiguration cfg = new ManagementConfiguration();\n-\n     /** Websocket manager. */\n     protected WebSocketManager mgr;\n \n     /** Cluster processor. */\n-    private ClusterInfoProcessor clusterProc;\n+    protected ClusterInfoProcessor clusterProc;\n \n-    /** Span exporter. */\n-    private SpanExporter spanExporter;\n+    /** Actions dispatcher. */\n+    private ActionDispatcher actDispatcher;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAwMDkxNg=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEzMDA4NA==", "bodyText": "Revert", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411130084", "createdAt": "2020-04-20T06:41:19Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/agent/ManagementConsoleAgent.java", "diffHunk": "@@ -87,17 +87,20 @@\n     /** Discovery event on restart agent. */\n     private static final int[] EVTS_DISCOVERY = new int[] {EVT_NODE_FAILED, EVT_NODE_LEFT, EVT_NODE_SEGMENTED};\n \n-    /** Management configuration instance. */\n-    private ManagementConfiguration cfg = new ManagementConfiguration();\n-\n     /** Websocket manager. */\n     protected WebSocketManager mgr;\n \n     /** Cluster processor. */\n-    private ClusterInfoProcessor clusterProc;\n+    protected ClusterInfoProcessor clusterProc;\n \n-    /** Span exporter. */\n-    private SpanExporter spanExporter;\n+    /** Actions dispatcher. */\n+    private ActionDispatcher actDispatcher;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAwMDkxNg=="}, "originalCommit": {"oid": "84d041c4788f9b65cd3d83c568fbb250976d4cc9"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDg4Mjg2OnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxNDo1NFrOGINUeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNDoyMzoxMVrOGIxzqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDAyNQ==", "bodyText": "It doesn't do it quietly.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411260025", "createdAt": "2020-04-20T10:14:54Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg1NzgzMg==", "bodyText": "Fixed", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411857832", "createdAt": "2020-04-21T04:23:11Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDAyNQ=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDg4NDMzOnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxNToyMVrOGINVbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNDoyMzoyN1rOGIxz-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDI3MA==", "bodyText": "Impossibility to start a processor sounds more like an ERROR to me.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411260270", "createdAt": "2020-04-20T10:15:21Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.\n+     *\n+     * @param proc Processor.\n+     * @param log Logger.\n+     */\n+    public static void startProcessor(GridProcessor proc, IgniteLogger log) {\n+        if (proc != null) {\n+            try {\n+                proc.start();\n+            }\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDQyMQ==", "bodyText": "Also some message would be nice.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411260421", "createdAt": "2020-04-20T10:15:36Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.\n+     *\n+     * @param proc Processor.\n+     * @param log Logger.\n+     */\n+    public static void startProcessor(GridProcessor proc, IgniteLogger log) {\n+        if (proc != null) {\n+            try {\n+                proc.start();\n+            }\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDI3MA=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg1NzkxNQ==", "bodyText": "Fixed", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411857915", "createdAt": "2020-04-21T04:23:27Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);\n+        }\n+\n+        return null;\n+    }\n+\n+    /**\n+     * Quietly start given processor ignoring possible checked exception.\n+     *\n+     * @param proc Processor.\n+     * @param log Logger.\n+     */\n+    public static void startProcessor(GridProcessor proc, IgniteLogger log) {\n+        if (proc != null) {\n+            try {\n+                proc.start();\n+            }\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDI3MA=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDg4NjQ1OnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxNTo1N1rOGINWvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNDoyMzo1NlrOGIx0tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDYwNg==", "bodyText": "Looks more like an ERROR.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411260606", "createdAt": "2020-04-20T10:15:57Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg1ODEwMg==", "bodyText": "Change log level", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411858102", "createdAt": "2020-04-21T04:23:56Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * Creates agent processor.\n+     *\n+     * @param log Logger.\n+     * @param clsName Processor class name.\n+     * @param paramTypes The parameter array.\n+     * @param args array of objects to be passed as arguments to the constructor call.\n+     * @return Agent processor.\n+     */\n+    public static <T extends GridProcessor> T createProcessor(IgniteLogger log, String clsName, Class<?>[] paramTypes, Object... args) {\n+        ClassLoader ldr = U.gridClassLoader();\n+\n+        try {\n+            Class<?> mgrCls = ldr.loadClass(clsName);\n+\n+            return (T)mgrCls.getConstructor(paramTypes).newInstance(args);\n+        }\n+        catch (Exception ex) {\n+            U.warn(log, \"Failed to initialize GridGain Control Center agent processor: \" + clsName, ex);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MDYwNg=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDg5Mjg2OnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoxNzozMVrOGINapQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjowMDo0NVrOGJMnCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MTYwNQ==", "bodyText": "I would say, that errors reported during stopping are not that critical. I would change the logging level to DEBUG. What do you think?", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411261605", "createdAt": "2020-04-20T10:17:31Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg2MTkxOA==", "bodyText": "I disagree with you. IgniteLogger with logging level to DEBUG can't print stacktrace. I think we need stacktrace for debug.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411861918", "createdAt": "2020-04-21T04:35:29Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MTYwNQ=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI5Njk3MA==", "bodyText": "OK, I see. So, the issue is that we don't have such method in IgniteLogger. I created a ticket for this improvement: https://ggsystems.atlassian.net/browse/GG-28856\nSuch error handling will lead to a lot of exceptions printed when a node is stopped. As far as I can see, these errors can only occur when a node is stopped, so the reason behind it is almost always in something else. Let's keep it as warning for now.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412296970", "createdAt": "2020-04-21T16:00:45Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.\n      *\n      * @param proc Process.\n+     * @param log Logger.\n      */\n-    public static void quiteStop(GridProcessor proc) {\n+    public static void stopProcessor(GridProcessor proc, IgniteLogger log) {\n         if (proc != null) {\n             try {\n                 proc.stop(true);\n             }\n-            catch (Exception ignored) {\n-                // No-op.\n+            catch (Exception ex) {\n+                U.warn(log, ex.getMessage(), ex);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2MTYwNQ=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDkwODM2OnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ManagementConsoleSender.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDoyMToxN1rOGINjzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNDo0MjoxNFrOGIyMHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2Mzk0OQ==", "bodyText": "Could you clarify in the javadoc, what this interface is for. Where is it supposed to be used?", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411263949", "createdAt": "2020-04-20T10:21:17Z", "author": {"login": "dmekhanikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ManagementConsoleSender.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.management;\n+\n+/**\n+ * Control Center sender.\n+ */\n+public interface ManagementConsoleSender {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg2NDA5Mw==", "bodyText": "Improve javadoc and reuse this interface in all agent processors", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411864093", "createdAt": "2020-04-21T04:42:14Z", "author": {"login": "nva"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ManagementConsoleSender.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.management;\n+\n+/**\n+ * Control Center sender.\n+ */\n+public interface ManagementConsoleSender {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2Mzk0OQ=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDk0NzQyOnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMDozMDo1NFrOGIN6GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNDo1NzoxNlrOGIyf2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2OTY1Ng==", "bodyText": "It doesn't do it quietly.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411269656", "createdAt": "2020-04-20T10:30:54Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg2OTE0NQ==", "bodyText": "Fixed javadoc", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r411869145", "createdAt": "2020-04-21T04:57:16Z", "author": {"login": "nva"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/utils/AgentUtils.java", "diffHunk": "@@ -214,14 +215,56 @@ public static void authorizeIfNeeded(IgniteSecurity security, String name, Secur\n      * Quietly closes given processor ignoring possible checked exception.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTI2OTY1Ng=="}, "originalCommit": {"oid": "d84a7c05fd577ed3ac9736b345ac02f04605c313"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MTk5NTIxOnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ControlCenterSender.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjo1MjozNFrOGJOQ2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwMjo1OTozOFrOGJhGjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMyNDA1OA==", "bodyText": "As I remember there was a message from Goncharuk, that we start using 2020 instead of 2019 in Copyrights, please investigate and fix if needed.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412324058", "createdAt": "2020-04-21T16:52:34Z", "author": {"login": "akuznetsov-gridgain"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ControlCenterSender.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6d601ec515b0624c3e3f63ee54b94609f436c91"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjYzMjcxNw==", "bodyText": "Fixed", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412632717", "createdAt": "2020-04-22T02:59:38Z", "author": {"login": "nva"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ControlCenterSender.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMyNDA1OA=="}, "originalCommit": {"oid": "b6d601ec515b0624c3e3f63ee54b94609f436c91"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MjA1MjUzOnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/ws/WebSocketManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNzowMzoyMFrOGJOxtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNzowMzoyMFrOGJOxtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMzMjQ3MQ==", "bodyText": "Lets use static import for StandardCharsets.UTF_8 ?", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412332471", "createdAt": "2020-04-21T17:03:20Z", "author": {"login": "akuznetsov-gridgain"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/ws/WebSocketManager.java", "diffHunk": "@@ -336,7 +331,7 @@ private void addAuthentication(ClientManager mgr) {\n             Map<String, String> proxyHeaders = new HashMap<>();\n \n             proxyHeaders.put(\"Proxy-Authorization\", \"Basic \" +\n-                encodeToString((user + ':' + pwd).getBytes(Charset.forName(\"UTF-8\"))));\n+                encodeToString((user + ':' + pwd).getBytes(StandardCharsets.UTF_8)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6d601ec515b0624c3e3f63ee54b94609f436c91"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTQ3ODA5OnYy", "diffSide": "RIGHT", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ManagementConsoleProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOTo0MDoyMlrOGJtOKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOTo0MDoyMlrOGJtOKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgzMTI3NQ==", "bodyText": "Please clarify, that this sender is responsible for communication with the backend.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412831275", "createdAt": "2020-04-22T09:40:22Z", "author": {"login": "dmekhanikov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/management/ManagementConsoleProcessor.java", "diffHunk": "@@ -35,4 +35,9 @@\n      * @return Management configuration instance.\n      */\n     public ManagementConfiguration configuration();\n+\n+    /**\n+     * @return Control Center sender.\n+     */\n+    public ControlCenterSender sender();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bce203325e07ed94b7ff7fc2795461b7788be1e"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NTQ4OTc3OnYy", "diffSide": "RIGHT", "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/processor/ClusterInfoProcessor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOTo0MzowN1rOGJtVfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOTo0MzowN1rOGJtVfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgzMzE0OQ==", "bodyText": "The javadoc is wrong.", "url": "https://github.com/gridgain/gridgain/pull/1027#discussion_r412833149", "createdAt": "2020-04-22T09:43:07Z", "author": {"login": "dmekhanikov"}, "path": "modules/management-console-agent/src/main/java/org/apache/ignite/internal/agent/processor/ClusterInfoProcessor.java", "diffHunk": "@@ -65,18 +65,18 @@\n     protected IgniteClusterEx cluster;\n \n     /** Manager. */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bce203325e07ed94b7ff7fc2795461b7788be1e"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3085, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}