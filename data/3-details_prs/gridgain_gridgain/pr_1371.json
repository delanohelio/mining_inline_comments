{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3OTc5Mjcx", "number": 1371, "title": "GG-30524 unified interface to open files (from configuration, especially)", "bodyText": "Add U.openFileInputStream and use it to find files", "createdAt": "2020-08-14T13:18:00Z", "url": "https://github.com/gridgain/gridgain/pull/1371", "merged": true, "mergeCommit": {"oid": "ced15155599b25cf40a0ecd27d66722613bc2392"}, "closed": true, "closedAt": "2020-08-24T04:30:00Z", "author": {"login": "Berkof"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-0L_kgH2gAyNDY3OTc5MjcxOmI1MGUwOTNkOTcwZjE3ODNlNjI0NzkwYjA3YWRhOTU2ZDhkMGZmYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBBHHNAFqTQ3MjMyMjE0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b50e093d970f1783e624790b07ada956d8d0ffa8", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/b50e093d970f1783e624790b07ada956d8d0ffa8", "committedDate": "2020-08-14T12:57:33Z", "message": "GG-30524 add U.openFileInputStream and use it to find files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NTcxMTA1", "url": "https://github.com/gridgain/gridgain/pull/1371#pullrequestreview-467571105", "createdAt": "2020-08-14T13:24:37Z", "commit": {"oid": "b50e093d970f1783e624790b07ada956d8d0ffa8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMzoyNDozOFrOHA0b9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMzoyNDozOFrOHA0b9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDYyMTE3Mw==", "bodyText": "Let's use try-finally for streams.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r470621173", "createdAt": "2020-08-14T13:24:38Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "diffHunk": "@@ -1056,6 +1058,52 @@ public void testDoInParallelBatch() {\n         }\n     }\n \n+    /**\n+     * Test open file:\n+     * 1. by relative path\n+     * 2. by absolute path\n+     * 3. by classpath path\n+     * 4. by non existing path\n+     *\n+     * @throws Throwable\n+     */\n+    @Test\n+    public void testOpenFileInputStream() throws Throwable{\n+        // 1. by relative path\n+        InputStream relative = U.openFileInputStream(\"org.apache.ignite.util/bigUtf.txt\");\n+\n+        assertNotNull(\"Can't open input stream by relative path org.apache.ignite.util/bigUtf.txt\", relative);\n+\n+        relative.close();\n+\n+        // 2. by absolute path\n+        String absolutePath = U.getIgniteHome() + \"/pom.xml\";\n+        InputStream absolute = U.openFileInputStream(absolutePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b50e093d970f1783e624790b07ada956d8d0ffa8"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f95a232fd33fec7d0eb7166c2376cff2024b141", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/7f95a232fd33fec7d0eb7166c2376cff2024b141", "committedDate": "2020-08-17T10:26:25Z", "message": "GG-30524 use try with resources in U tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ee8977a656bf222e3c1906cb19c7b7a50ddbf2", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/93ee8977a656bf222e3c1906cb19c7b7a50ddbf2", "committedDate": "2020-08-17T10:30:04Z", "message": "GG-30524 formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDIzODk3", "url": "https://github.com/gridgain/gridgain/pull/1371#pullrequestreview-469423897", "createdAt": "2020-08-18T12:52:22Z", "commit": {"oid": "93ee8977a656bf222e3c1906cb19c7b7a50ddbf2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d5e186891dbbdb1237a97fd97232e3a03801142", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/6d5e186891dbbdb1237a97fd97232e3a03801142", "committedDate": "2020-08-20T08:45:34Z", "message": "GG-30524 fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7", "committedDate": "2020-08-20T09:43:38Z", "message": "GG-30524 return public API method and deprecate it"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQzNTAw", "url": "https://github.com/gridgain/gridgain/pull/1371#pullrequestreview-471543500", "createdAt": "2020-08-20T12:27:11Z", "commit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNzoxMVrOHD-eEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNzoxMVrOHD-eEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMTI4Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 */\n          \n          \n            \n                 * @deprecated Use {@link U#openFileInputStream(String)} instead.\n          \n          \n            \n                 */", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473931283", "createdAt": "2020-08-20T12:27:11Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "diffHunk": "@@ -476,6 +477,7 @@ private void checkNullParameter(Object param, String name) throws SSLException {\n      * @return Opened input stream.\n      * @throws IOException If stream could not be opened.\n      */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQzODY1", "url": "https://github.com/gridgain/gridgain/pull/1371#pullrequestreview-471543865", "createdAt": "2020-08-20T12:27:43Z", "commit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNzo0M1rOHD-fUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNzo0M1rOHD-fUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMTYwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws Throwable\n          \n          \n            \n                 * @throws Throwable If fails.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473931603", "createdAt": "2020-08-20T12:27:43Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/test/java/org/apache/ignite/internal/util/IgniteUtilsSelfTest.java", "diffHunk": "@@ -1056,6 +1058,41 @@ public void testDoInParallelBatch() {\n         }\n     }\n \n+    /**\n+     * Test open file:\n+     * 1. by relative path\n+     * 2. by absolute path\n+     * 3. by classpath path\n+     * 4. by non existing path\n+     *\n+     * @throws Throwable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQ0NDQy", "url": "https://github.com/gridgain/gridgain/pull/1371#pullrequestreview-471544442", "createdAt": "2020-08-20T12:28:31Z", "commit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyODozMVrOHD-hFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyODozMVrOHD-hFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMjA1NQ==", "bodyText": "Suggested change", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r473932055", "createdAt": "2020-08-20T12:28:31Z", "author": {"login": "AMashenkov"}, "path": "modules/core/src/main/java/org/apache/ignite/internal/util/IgniteUtils.java", "diffHunk": "@@ -3593,6 +3593,28 @@ public static void onGridStop() throws InterruptedException {\n         }\n     }\n \n+    /**\n+     * Find file (by path or in resources) and open input stream to it.\n+     *\n+     * @param filePath Path to the file.\n+     * @return Opened input stream.\n+     * @throws IOException If stream could not be opened.\n+     */\n+    public static InputStream openFileInputStream(String filePath) throws IOException {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ddfa781654cf4fc4a4ce2e4b7d5f85c7db17cc7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3caa5a04447b5b003a3aa27d932c33d2a8f58c98", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/3caa5a04447b5b003a3aa27d932c33d2a8f58c98", "committedDate": "2020-08-20T12:41:47Z", "message": "GG-30524 code review fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e4fbc83282331ea664f60d424523b9249d43c3e", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/2e4fbc83282331ea664f60d424523b9249d43c3e", "committedDate": "2020-08-20T12:44:02Z", "message": "Merge branch 'master' into gg-30524"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "327c51b2ab8e1f20cc1fa23b230662ce0618f146", "author": {"user": null}, "url": "https://github.com/gridgain/gridgain/commit/327c51b2ab8e1f20cc1fa23b230662ce0618f146", "committedDate": "2020-08-20T13:08:50Z", "message": "Merge remote-tracking branch 'gridgain-ce/master' into gg-30524"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMzIyMTQ4", "url": "https://github.com/gridgain/gridgain/pull/1371#pullrequestreview-472322148", "createdAt": "2020-08-21T08:57:54Z", "commit": {"oid": "327c51b2ab8e1f20cc1fa23b230662ce0618f146"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODo1Nzo1NFrOHEkC1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODo1Nzo1NFrOHEkC1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDU0NjkwMQ==", "bodyText": "And why did you decided to deprecate this? It's looks useful to me in case when you are needed to provide custom place from which you have to load a keystore.", "url": "https://github.com/gridgain/gridgain/pull/1371#discussion_r474546901", "createdAt": "2020-08-21T08:57:54Z", "author": {"login": "korlov42"}, "path": "modules/core/src/main/java/org/apache/ignite/ssl/SslContextFactory.java", "diffHunk": "@@ -476,6 +477,7 @@ private void checkNullParameter(Object param, String name) throws SSLException {\n      * @return Opened input stream.\n      * @throws IOException If stream could not be opened.\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "327c51b2ab8e1f20cc1fa23b230662ce0618f146"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 81, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}