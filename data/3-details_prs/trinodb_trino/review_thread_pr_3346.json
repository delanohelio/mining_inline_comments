{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MTk0MDA5", "number": 3346, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowNjo1NlrODu6asg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowOToyMlrODu6boA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTE4MTk0OnYy", "diffSide": "RIGHT", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowNjo1NlrOGBC-EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowNjo1NlrOGBC-EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDQxNw==", "bodyText": "\"\" + tableName doesn't make sense", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403750417", "createdAt": "2020-04-05T20:06:56Z", "author": {"login": "sopel39"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -195,63 +195,55 @@ public void testCreateTable()\n     @Test\n     public void testCreateTableAsSelect()\n     {\n-        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_ctas AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");\n-        assertTableColumnNames(\"test_ctas\", \"name\", \"regionkey\");\n-        assertUpdate(\"DROP TABLE test_ctas\");\n+        String tableName = \"test_ctas\" + randomTableSuffix();\n+        assertUpdate(\"CREATE TABLE IF NOT EXISTS \" + tableName + \" AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");\n+        assertTableColumnNames(\"\" + tableName, \"name\", \"regionkey\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTE4MjAyOnYy", "diffSide": "RIGHT", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowNzowOVrOGBC-Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODowMToxNFrOGBMAhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDQzMQ==", "bodyText": "consider using String.format instead", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403750431", "createdAt": "2020-04-05T20:07:09Z", "author": {"login": "sopel39"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -195,63 +195,55 @@ public void testCreateTable()\n     @Test\n     public void testCreateTableAsSelect()\n     {\n-        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_ctas AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");\n-        assertTableColumnNames(\"test_ctas\", \"name\", \"regionkey\");\n-        assertUpdate(\"DROP TABLE test_ctas\");\n+        String tableName = \"test_ctas\" + randomTableSuffix();\n+        assertUpdate(\"CREATE TABLE IF NOT EXISTS \" + tableName + \" AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDg4Mw==", "bodyText": "when fmt-ing SQLs in tests, using + is often more readable than %s (especially when you substitude very few things in long text)", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403750883", "createdAt": "2020-04-05T20:10:59Z", "author": {"login": "findepi"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -195,63 +195,55 @@ public void testCreateTable()\n     @Test\n     public void testCreateTableAsSelect()\n     {\n-        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_ctas AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");\n-        assertTableColumnNames(\"test_ctas\", \"name\", \"regionkey\");\n-        assertUpdate(\"DROP TABLE test_ctas\");\n+        String tableName = \"test_ctas\" + randomTableSuffix();\n+        assertUpdate(\"CREATE TABLE IF NOT EXISTS \" + tableName + \" AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDQzMQ=="}, "originalCommit": null, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5ODUwMw==", "bodyText": "Also, I refactored this code with some search-and-replace methods. Using format would be much harder to make it automatically.", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403898503", "createdAt": "2020-04-06T08:01:14Z", "author": {"login": "kokosing"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -195,63 +195,55 @@ public void testCreateTable()\n     @Test\n     public void testCreateTableAsSelect()\n     {\n-        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_ctas AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");\n-        assertTableColumnNames(\"test_ctas\", \"name\", \"regionkey\");\n-        assertUpdate(\"DROP TABLE test_ctas\");\n+        String tableName = \"test_ctas\" + randomTableSuffix();\n+        assertUpdate(\"CREATE TABLE IF NOT EXISTS \" + tableName + \" AS SELECT name, regionkey FROM nation\", \"SELECT count(*) FROM nation\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDQzMQ=="}, "originalCommit": null, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTE4MzAzOnYy", "diffSide": "RIGHT", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowODowOVrOGBC-lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowODowOVrOGBC-lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDU1MA==", "bodyText": "I don't think it's needed anymore", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403750550", "createdAt": "2020-04-05T20:08:09Z", "author": {"login": "sopel39"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -527,171 +519,176 @@ public void testInsertWithCoercion()\n     @Test\n     public void testInsertUnicode()\n     {\n-        assertUpdate(\"DROP TABLE IF EXISTS test_insert_unicode\");\n+        String tableName = \"test_insert_unicode_\" + randomTableSuffix();\n+\n+        assertUpdate(\"DROP TABLE IF EXISTS \" + tableName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 120}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTE4NDE3OnYy", "diffSide": "RIGHT", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowOTowN1rOGBC_IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowOTowN1rOGBC_IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDY4OA==", "bodyText": "\"\" + viewName doesn't make sense", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403750688", "createdAt": "2020-04-05T20:09:07Z", "author": {"login": "sopel39"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -801,7 +814,7 @@ public void testViewMetadata()\n         MaterializedResult expected = resultBuilder(getSession(), actual.getTypes())\n                 .row(\"customer\", \"BASE TABLE\")\n                 .row(\"lineitem\", \"BASE TABLE\")\n-                .row(\"meta_test_view\", \"VIEW\")\n+                .row(\"\" + viewName, \"VIEW\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 516}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTE4NDMyOnYy", "diffSide": "RIGHT", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowOToyMlrOGBC_MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDowOToyMlrOGBC_MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MDcwNQ==", "bodyText": "ditto", "url": "https://github.com/trinodb/trino/pull/3346#discussion_r403750705", "createdAt": "2020-04-05T20:09:22Z", "author": {"login": "sopel39"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -829,13 +842,13 @@ public void testViewMetadata()\n                 getSession().getSchema().get()));\n \n         expected = resultBuilder(getSession(), actual.getTypes())\n-                .row(\"meta_test_view\", formatSqlText(query))\n+                .row(\"\" + viewName, formatSqlText(query))", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 525}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 322, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}