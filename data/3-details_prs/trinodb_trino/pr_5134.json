{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0MzI5NTg5", "number": 5134, "title": "Wait for final QueryInfo before using in test", "bodyText": "Fixes #5120", "createdAt": "2020-09-10T21:06:48Z", "url": "https://github.com/trinodb/trino/pull/5134", "merged": true, "mergeCommit": {"oid": "99647e9580729ecadfae20e0ba435d53e99f6479"}, "closed": true, "closedAt": "2020-09-11T10:02:32Z", "author": {"login": "raunaqmorarka"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHw_gjgBqjM3NTQ5NTkzNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHyFk7gBqjM3NTUyODY0MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NjUyMzQ1", "url": "https://github.com/trinodb/trino/pull/5134#pullrequestreview-486652345", "createdAt": "2020-09-11T09:30:40Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTozMDo0MFrOHQWm-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTozMDo0MFrOHQWm-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwOTY5MA==", "bodyText": "use new Duration(5, SECONDS).", "url": "https://github.com/trinodb/trino/pull/5134#discussion_r486909690", "createdAt": "2020-09-11T09:30:40Z", "author": {"login": "sopel39"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestQueryFramework.java", "diffHunk": "@@ -446,9 +449,13 @@ protected OperatorStats searchScanFilterAndProjectOperatorStats(QueryId queryId,\n                 })\n                 .findOnlyElement()\n                 .getId();\n-        return runner.getCoordinator()\n+\n+        Supplier<QueryInfo> queryInfoSupplier = () -> runner.getCoordinator()\n                 .getQueryManager()\n-                .getFullQueryInfo(queryId)\n+                .getFullQueryInfo(queryId);\n+        assertEventually(Duration.valueOf(\"5s\"), () -> assertThat(queryInfoSupplier.get().isFinalQueryInfo()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "382969d8728096f79abd087ef2416dac2d7eedcc", "author": {"user": {"login": "raunaqmorarka", "name": "Raunaq Morarka"}}, "url": "https://github.com/trinodb/trino/commit/382969d8728096f79abd087ef2416dac2d7eedcc", "committedDate": "2020-09-11T09:35:52Z", "message": "Wait for final QueryInfo before using in test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "382969d8728096f79abd087ef2416dac2d7eedcc", "author": {"user": {"login": "raunaqmorarka", "name": "Raunaq Morarka"}}, "url": "https://github.com/trinodb/trino/commit/382969d8728096f79abd087ef2416dac2d7eedcc", "committedDate": "2020-09-11T09:35:52Z", "message": "Wait for final QueryInfo before using in test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3954, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}