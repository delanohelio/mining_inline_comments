{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNDAyNjI4", "number": 3417, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMTozODo0NlrODxGHGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNToyOTo0OVrODzjQ5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyODA2OTM5OnYy", "diffSide": "RIGHT", "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMTozODo0NlrOGEY46g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMTozODo0NlrOGEY46g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1NTI3NA==", "bodyText": "#3416", "url": "https://github.com/trinodb/trino/pull/3417#discussion_r407255274", "createdAt": "2020-04-12T21:38:46Z", "author": {"login": "findepi"}, "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "diffHunk": "@@ -154,4 +132,22 @@ public void testWrittenStats()\n     {\n         // TODO Kudu connector supports CTAS and inserts, but the test would fail\n     }\n+\n+    @Override\n+    protected Optional<DataMappingTestSetup> filterDataMappingSmokeTestData(DataMappingTestSetup dataMappingTestSetup)\n+    {\n+        String typeName = dataMappingTestSetup.getPrestoTypeName();\n+        if (typeName.equals(\"time\")\n+                || typeName.equals(\"timestamp with time zone\")) {\n+            return Optional.of(dataMappingTestSetup.asUnsupported());\n+        }\n+\n+        if (typeName.equals(\"date\") // date gets stored as varchar\n+                || typeName.equals(\"varbinary\")) { // TODO (https://github.com/prestosql/presto/issues/3416)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyODEwMjA1OnYy", "diffSide": "LEFT", "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMjoxOTowMVrOGEZItg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQyMjoxOTowMVrOGEZItg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI1OTMxOA==", "bodyText": "This is now covered by testDataMappingSmokeTest\nhttps://github.com/prestosql/presto/runs/581310253?check_suite_focus=true", "url": "https://github.com/trinodb/trino/pull/3417#discussion_r407259318", "createdAt": "2020-04-12T22:19:01Z", "author": {"login": "findepi"}, "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "diffHunk": "@@ -72,29 +71,6 @@ public void testInsert()\n         // TODO Support these test once kudu connector can create tables with default partitions\n     }\n \n-    @Override\n-    public void testDataMappingSmokeTest(DataMappingTestSetup dataMappingTestSetup)\n-    {\n-        // TODO Support these test once kudu connector can create tables with default partitions\n-    }\n-\n-    @Test\n-    @Deprecated // TODO remove when testDataMappingSmokeTest is enabled for Kudu\n-    public void testKuduPredicatePushdown()\n-    {\n-        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_is_null (\" +\n-                \"id INT WITH (primary_key=true), \" +\n-                \"col_nullable bigint with (nullable=true)\" +\n-                \") WITH (\" +\n-                \" partition_by_hash_columns = ARRAY['id'], \" +\n-                \" partition_by_hash_buckets = 2\" +\n-                \")\");\n-\n-        assertUpdate(\"INSERT INTO test_is_null VALUES (1, 1)\", 1);\n-        assertUpdate(\"INSERT INTO test_is_null(id) VALUES (2)\", 1);\n-        assertQuery(\"SELECT id FROM test_is_null WHERE col_nullable = 1 OR col_nullable IS NULL\", \"VALUES (1), (2)\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MzgxNzM0OnYy", "diffSide": "RIGHT", "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNToyOTo0OVrOGIDuMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjo0NjowN1rOGIFhog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEwMjc2OA==", "bodyText": "Add this to previous commit (the one that removes @Overwrite)", "url": "https://github.com/trinodb/trino/pull/3417#discussion_r411102768", "createdAt": "2020-04-20T05:29:49Z", "author": {"login": "kokosing"}, "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "diffHunk": "@@ -79,6 +79,7 @@ public void testDataMappingSmokeTest(DataMappingTestSetup dataMappingTestSetup)\n     }\n \n     @Test\n+    @Deprecated // TODO remove when testDataMappingSmokeTest is enabled for Kudu", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7214cf3c2538d9c2d0db990bff2ea2b2510d57fe"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEzMjMyMg==", "bodyText": "I add @Deprecated in Add generic test for pushdown with nullable domain commit because only after this commit the testDataMappingSmokeTest covers the use case being covered here", "url": "https://github.com/trinodb/trino/pull/3417#discussion_r411132322", "createdAt": "2020-04-20T06:46:07Z", "author": {"login": "findepi"}, "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "diffHunk": "@@ -79,6 +79,7 @@ public void testDataMappingSmokeTest(DataMappingTestSetup dataMappingTestSetup)\n     }\n \n     @Test\n+    @Deprecated // TODO remove when testDataMappingSmokeTest is enabled for Kudu", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEwMjc2OA=="}, "originalCommit": {"oid": "7214cf3c2538d9c2d0db990bff2ea2b2510d57fe"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 416, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}