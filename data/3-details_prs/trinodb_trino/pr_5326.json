{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTQ1NjMx", "number": 5326, "title": "Unify and improve TABLE and COLUMN COMMENT tests", "bodyText": "", "createdAt": "2020-09-28T13:32:24Z", "url": "https://github.com/trinodb/trino/pull/5326", "merged": true, "mergeCommit": {"oid": "1dd75741c731c74460afd5cb0372b91e4234940e"}, "closed": true, "closedAt": "2020-09-30T11:18:17Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNTsCigFqTQ5NzUxNjg0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN5MakABqjM4MjM1MDAzNDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NTE2ODQ2", "url": "https://github.com/trinodb/trino/pull/5326#pullrequestreview-497516846", "createdAt": "2020-09-28T13:34:33Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMzozNDozM1rOHY99fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMzozNDozM1rOHY99fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk0MzAzNg==", "bodyText": "I marked this final on purpose, to help implementors of connectors outside of the repository to update the code.\nPrevious test suppression model was via test override. This is no longer the way, and the new test version also verifies the connector is correctly reporting lack of support for comments.\nWDYT?", "url": "https://github.com/trinodb/trino/pull/5326#discussion_r495943036", "createdAt": "2020-09-28T13:34:33Z", "author": {"login": "findepi"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -334,44 +339,54 @@ public void testRenameTable()\n     }\n \n     @Test\n-    public void testCommentTable()\n+    public final void testCommentTable()", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MTkwMzU5", "url": "https://github.com/trinodb/trino/pull/5326#pullrequestreview-498190359", "createdAt": "2020-09-29T07:50:43Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNzo1MDo0NFrOHZfRkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNzo1MDo0NFrOHZfRkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ4ODg0OQ==", "bodyText": "Just thinking.\nMaybe instead of having N supports* methods. We could have\nEnumSet<Feature> supportedFeatures()", "url": "https://github.com/trinodb/trino/pull/5326#discussion_r496488849", "createdAt": "2020-09-29T07:50:44Z", "author": {"login": "losipiuk"}, "path": "presto-mysql/src/test/java/io/prestosql/plugin/mysql/TestMySqlDistributedQueries.java", "diffHunk": "@@ -56,6 +56,12 @@ public final void destroy()\n         mysqlServer = null;\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MTkyMzk3", "url": "https://github.com/trinodb/trino/pull/5326#pullrequestreview-498192397", "createdAt": "2020-09-29T07:51:38Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNzo1MTozOVrOHZfTxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNzo1MTozOVrOHZfTxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ4OTQxNA==", "bodyText": "\"updates or deletes\" interesting. Does it always come together?", "url": "https://github.com/trinodb/trino/pull/5326#discussion_r496489414", "createdAt": "2020-09-29T07:51:39Z", "author": {"login": "losipiuk"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -609,6 +614,13 @@ public void testDelete()\n         // delete half the table, then delete the rest\n         String tableName = \"test_delete_\" + randomTableSuffix();\n \n+        if (!supportsDelete()) {\n+            assertUpdate(\"CREATE TABLE \" + tableName + \" AS SELECT * FROM orders WITH NO DATA\", 0);\n+            assertQueryFails(\"DELETE FROM \" + tableName, \"This connector does not support updates or deletes\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MTkyNzYy", "url": "https://github.com/trinodb/trino/pull/5326#pullrequestreview-498192762", "createdAt": "2020-09-29T07:51:48Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad67fba556bc1cd7620a6755b7c66b2a84773c36", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/ad67fba556bc1cd7620a6755b7c66b2a84773c36", "committedDate": "2020-09-30T09:13:03Z", "message": "Avoid using 'id' as column name\n\nid is reserved in Cassandra."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d78c998f8fc8a806b2cecf1e82d374429525df3a", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/d78c998f8fc8a806b2cecf1e82d374429525df3a", "committedDate": "2020-09-30T09:13:03Z", "message": "Use assertions with better message on failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4620d0606ebb2fcffa98d5905126906136a19c38", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/4620d0606ebb2fcffa98d5905126906136a19c38", "committedDate": "2020-09-30T09:13:37Z", "message": "Unify and improve TABLE and COLUMN COMMENT tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b73ac1a3d8e0b2b639249d15ac1f1a16ab2fc79d", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/b73ac1a3d8e0b2b639249d15ac1f1a16ab2fc79d", "committedDate": "2020-09-30T09:13:37Z", "message": "Suppress testDelete with supportsDelete\n\nThis also adds test coverage when the connector does not support\ndeletes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38b7722cbe0365c23b3ef23e28512068de26c83a", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/38b7722cbe0365c23b3ef23e28512068de26c83a", "committedDate": "2020-09-30T09:14:28Z", "message": "Improve test coverage of column/table COMMENT test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "38b7722cbe0365c23b3ef23e28512068de26c83a", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/38b7722cbe0365c23b3ef23e28512068de26c83a", "committedDate": "2020-09-30T09:14:28Z", "message": "Improve test coverage of column/table COMMENT test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3477, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}