{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MzEyMjM1", "number": 5814, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyNzoxM1rOE1l67A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyNzoxM1rOE1l67A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NjMxMjc2OnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyNzoxM1rOHt806w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMToyNjoyOFrOHt-9SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0NDU1NQ==", "bodyText": "let's have a new dedicated test, instead of making this one more complicate", "url": "https://github.com/trinodb/trino/pull/5814#discussion_r517944555", "createdAt": "2020-11-05T10:27:13Z", "author": {"login": "kokosing"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -349,22 +349,44 @@ public void testJoinPartitionedWithMissingPartitionFilter()\n     @Test\n     public void testNaNPartition()\n     {\n+        // Only NaN partition\n         assertUpdate(\"DROP TABLE IF EXISTS test_nan_partition\");\n         assertUpdate(\"CREATE TABLE test_nan_partition(a varchar, d double) WITH (partitioned_by = ARRAY['d'])\");\n+        assertUpdate(\"INSERT INTO test_nan_partition VALUES ('b', nan())\", 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fc535929ff05c2d31b47925053561a0d87f2fc3"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk3MDYwMw==", "bodyText": "i thought about this, but i couldn't invent the name for the test method.\nAlso, this is the test which was supposed to test the problem (d068a3f) and indeed it did, but not deterministically (order of partitions on the list mattered). So I am improving the existing test to make it more deterministic.", "url": "https://github.com/trinodb/trino/pull/5814#discussion_r517970603", "createdAt": "2020-11-05T11:10:23Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -349,22 +349,44 @@ public void testJoinPartitionedWithMissingPartitionFilter()\n     @Test\n     public void testNaNPartition()\n     {\n+        // Only NaN partition\n         assertUpdate(\"DROP TABLE IF EXISTS test_nan_partition\");\n         assertUpdate(\"CREATE TABLE test_nan_partition(a varchar, d double) WITH (partitioned_by = ARRAY['d'])\");\n+        assertUpdate(\"INSERT INTO test_nan_partition VALUES ('b', nan())\", 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0NDU1NQ=="}, "originalCommit": {"oid": "7fc535929ff05c2d31b47925053561a0d87f2fc3"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk3OTQ2NQ==", "bodyText": "Discussed offline.", "url": "https://github.com/trinodb/trino/pull/5814#discussion_r517979465", "createdAt": "2020-11-05T11:26:28Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -349,22 +349,44 @@ public void testJoinPartitionedWithMissingPartitionFilter()\n     @Test\n     public void testNaNPartition()\n     {\n+        // Only NaN partition\n         assertUpdate(\"DROP TABLE IF EXISTS test_nan_partition\");\n         assertUpdate(\"CREATE TABLE test_nan_partition(a varchar, d double) WITH (partitioned_by = ARRAY['d'])\");\n+        assertUpdate(\"INSERT INTO test_nan_partition VALUES ('b', nan())\", 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0NDU1NQ=="}, "originalCommit": {"oid": "7fc535929ff05c2d31b47925053561a0d87f2fc3"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4933, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}