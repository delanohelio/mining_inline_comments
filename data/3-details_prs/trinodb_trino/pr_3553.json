{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MTYxNDE2", "number": 3553, "title": "DefaultTraversalVisitor improvements", "bodyText": "", "createdAt": "2020-04-26T21:30:00Z", "url": "https://github.com/trinodb/trino/pull/3553", "merged": true, "mergeCommit": {"oid": "1ce21bcb9c8253f7cb766c5fd7817276f982bd20"}, "closed": true, "closedAt": "2020-04-27T19:13:00Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbr3TvAFqTQwMDc3ODcxNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbycHYAFqTQwMTE1NDM4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNzc4NzE3", "url": "https://github.com/trinodb/trino/pull/3553#pullrequestreview-400778717", "createdAt": "2020-04-27T09:27:41Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwOToyNzo0MVrOGMZoDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwOToyNzo0MVrOGMZoDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY1NTk0OQ==", "bodyText": "undo", "url": "https://github.com/trinodb/trino/pull/3553#discussion_r415655949", "createdAt": "2020-04-27T09:27:41Z", "author": {"login": "sopel39"}, "path": "presto-main/src/main/java/io/prestosql/sql/analyzer/ExpressionAnalyzer.java", "diffHunk": "@@ -1228,6 +1228,8 @@ protected Type visitExists(ExistsPredicate node, StackableAstVisitorContext<Cont\n             return setExpressionType(node, BOOLEAN);\n         }\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwODUxNzU0", "url": "https://github.com/trinodb/trino/pull/3553#pullrequestreview-400851754", "createdAt": "2020-04-27T11:12:11Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMToxMjoxMVrOGMds7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMToxMjoxMVrOGMds7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcyMjczMw==", "bodyText": "Then object of this class cannot be reused.", "url": "https://github.com/trinodb/trino/pull/3553#discussion_r415722733", "createdAt": "2020-04-27T11:12:11Z", "author": {"login": "kokosing"}, "path": "presto-main/src/main/java/io/prestosql/sql/planner/SubqueryPlanner.java", "diffHunk": "@@ -527,31 +527,37 @@ private PlanNode replaceExpressionsWithSymbols(PlanNode planNode, Map<NodeRef<Ex\n     }\n \n     private static class ColumnReferencesExtractor\n-            extends DefaultExpressionTraversalVisitor<Void, ImmutableSet.Builder<NodeRef<Expression>>>\n+            extends DefaultExpressionTraversalVisitor<Void, Void>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "293231dc10edbae8875ae037e704ea0fae14ead2", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/293231dc10edbae8875ae037e704ea0fae14ead2", "committedDate": "2020-04-27T12:12:45Z", "message": "Fix visitLateral in DefaultTraversalVisitor\n\nMake it somewhat more consistent with other methods.\n\nActually `DefaultTraversalVisitor` did\n- return null\n- or return result of sub-process (in some cases where only one thing to visit)\n- call to super in this one case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b49178fd8a4d021b407a3c0d3534eca13b3372d", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/6b49178fd8a4d021b407a3c0d3534eca13b3372d", "committedDate": "2020-04-27T12:12:46Z", "message": "Avoid DefaultTraversalVisitor in StatementAnalyzer\n\n`DefaultTraversalVisitor` does not provide useful implementation. Also,\nif we used some behavior inherited from `DefaultTraversalVisitor`,\nit would cause a `NullPointerException` in our `process` method were we\nassume `super.process` does not return `null` scope`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c0cf70c6687f86ad1342c2b4da06c7935184c29", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/9c0cf70c6687f86ad1342c2b4da06c7935184c29", "committedDate": "2020-04-27T12:12:48Z", "message": "Avoid DefaultTraversalVisitor in RelationPlanner\n\n`DefaultTraversalVisitor` does not provide useful implementation. Also,\nif we used some behavior inherited from `DefaultTraversalVisitor`,\nit would result in `null` `RelationPlan`, and subsequent\n`NullPointerException`.\n`NullPointerException` in our `process` method were we\nassume `super.process` does not return `null` scope`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00e9a6fdce0eebb0f79b4ff738d9d1366c2af666", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/00e9a6fdce0eebb0f79b4ff738d9d1366c2af666", "committedDate": "2020-04-27T12:12:49Z", "message": "Move non-contextual state from Context to field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "425557f92206f9af8988378cf4503a46c17541b8", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/425557f92206f9af8988378cf4503a46c17541b8", "committedDate": "2020-04-27T12:12:50Z", "message": "Fix incorrect visitor result type\n\nThe visitor always returned `null` result, and using `Node` as result\ntype was misleading."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d47c537436f7b2996af578bf50af665ead8a2e2", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/1d47c537436f7b2996af578bf50af665ead8a2e2", "committedDate": "2020-04-27T12:12:51Z", "message": "Enforce DefaultTraversalVisitor Void result\n\nDefault implementation provided by `DefaultTraversalVisitor` is suitable\nfor `Void` result. Moreover, `DefaultTraversalVisitor` is useful base\nclass for when traversing a tree (a `Void` result), not when\ntransforming it (non-`Void` result)."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "1d47c537436f7b2996af578bf50af665ead8a2e2", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/1d47c537436f7b2996af578bf50af665ead8a2e2", "committedDate": "2020-04-27T12:12:51Z", "message": "Enforce DefaultTraversalVisitor Void result\n\nDefault implementation provided by `DefaultTraversalVisitor` is suitable\nfor `Void` result. Moreover, `DefaultTraversalVisitor` is useful base\nclass for when traversing a tree (a `Void` result), not when\ntransforming it (non-`Void` result)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMTU0Mzg0", "url": "https://github.com/trinodb/trino/pull/3553#pullrequestreview-401154384", "createdAt": "2020-04-27T17:08:00Z", "commit": {"oid": "1d47c537436f7b2996af578bf50af665ead8a2e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1668, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}