{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MTI3OTAx", "number": 3714, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjoyNzoyM1rOD8QhWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjozMTozMFrOD8QlYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NTExODM1OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/io/prestosql/server/security/SecurityConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjoyNzoyM1rOGVFseA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjoyNzoyM1rOGVFseA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc2NjU4NA==", "bodyText": "Format with trailing comma\n        \"dispatcher.forwarded-header\",\n})", "url": "https://github.com/trinodb/trino/pull/3714#discussion_r424766584", "createdAt": "2020-05-13T22:27:23Z", "author": {"login": "electrum"}, "path": "presto-main/src/main/java/io/prestosql/server/security/SecurityConfig.java", "diffHunk": "@@ -24,13 +24,15 @@\n import java.util.List;\n import java.util.Optional;\n \n-@DefunctConfig(\"http.server.authentication.enabled\")\n+@DefunctConfig({\n+        \"http.server.authentication.enabled\",\n+        \"http-server.authentication.allow-forwarded-https\",\n+        \"dispatcher.forwarded-header\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9178b064a79951468532768c8191943812505ae8"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NTEyODY3OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/server/ui/TestWebUi.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjozMTozMFrOGVFyuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNjowMzoxMFrOGVNK_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc2ODE4NQ==", "bodyText": "Why?", "url": "https://github.com/trinodb/trino/pull/3714#discussion_r424768185", "createdAt": "2020-05-13T22:31:30Z", "author": {"login": "electrum"}, "path": "presto-main/src/test/java/io/prestosql/server/ui/TestWebUi.java", "diffHunk": "@@ -433,11 +434,11 @@ private static void testAlwaysAuthorized(URI baseUri, OkHttpClient authorizedCli\n \n         assertOk(authorizedClient, getValidApiLocation(baseUri));\n \n-        assertRedirect(authorizedClient, getLoginHtmlLocation(baseUri), getUiLocation(baseUri));\n+        assertRedirect(authorizedClient, getLoginHtmlLocation(baseUri), getUiLocation(baseUri), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9178b064a79951468532768c8191943812505ae8"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg4OTA4Ng==", "bodyText": "The proxy test doesn't go over https so the protocol authentication does not work", "url": "https://github.com/trinodb/trino/pull/3714#discussion_r424889086", "createdAt": "2020-05-14T06:03:10Z", "author": {"login": "dain"}, "path": "presto-main/src/test/java/io/prestosql/server/ui/TestWebUi.java", "diffHunk": "@@ -433,11 +434,11 @@ private static void testAlwaysAuthorized(URI baseUri, OkHttpClient authorizedCli\n \n         assertOk(authorizedClient, getValidApiLocation(baseUri));\n \n-        assertRedirect(authorizedClient, getLoginHtmlLocation(baseUri), getUiLocation(baseUri));\n+        assertRedirect(authorizedClient, getLoginHtmlLocation(baseUri), getUiLocation(baseUri), false);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc2ODE4NQ=="}, "originalCommit": {"oid": "9178b064a79951468532768c8191943812505ae8"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 119, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}