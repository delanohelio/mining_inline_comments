{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MjE5Mjk1", "number": 5445, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0NDoyNlrOEriEtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0OToyN1rOEriMhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MDgyNDg0OnYy", "diffSide": "RIGHT", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0NDoyNlrOHeWcuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0NDoyNlrOHeWcuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU4NzEzMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .map(columnName -> new Object[] {columnName})\n          \n          \n            \n                            .toArray(Object[][]::new);\n          \n          \n            \n                            .collect(toDataProvider());", "url": "https://github.com/trinodb/trino/pull/5445#discussion_r501587131", "createdAt": "2020-10-08T09:44:26Z", "author": {"login": "losipiuk"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -1362,28 +1362,43 @@ private static boolean requiresDelimiting(String identifierName)\n     @DataProvider\n     public Object[][] testColumnNameDataProvider()\n     {\n-        return new Object[][] {\n-                {\"lowercase\"},\n-                {\"UPPERCASE\"},\n-                {\"MixedCase\"},\n-                {\"an_underscore\"},\n-                {\"a-hyphen-minus\"}, // ASCII '-' is HYPHEN-MINUS in Unicode\n-                {\"a space\"},\n-                {\"atrailingspace \"},\n-                {\" aleadingspace\"},\n-                {\"a.dot\"},\n-                {\"a,comma\"},\n-                {\"a:colon\"},\n-                {\"a;semicolon\"},\n-                {\"an@at\"},\n-                {\"a\\\"quote\"},\n-                {\"an'apostrophe\"},\n-                {\"a`backtick`\"},\n-                {\"a/slash`\"},\n-                {\"a\\\\backslash`\"},\n-                {\"adigit0\"},\n-                {\"0startwithdigit\"},\n-        };\n+        return testColumnNameTestData().stream()\n+                .map(this::filterColumnNameTestData)\n+                .filter(Optional::isPresent)\n+                .map(Optional::get)\n+                .map(columnName -> new Object[] {columnName})\n+                .toArray(Object[][]::new);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MDg0NDg2OnYy", "diffSide": "RIGHT", "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestOracleDistributedQueries.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0OToyN1rOHeWpBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMDoxMToyMFrOHeXedA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU5MDI3Nw==", "bodyText": "why not\n    protected SqlExecutor createJdbcSqlExecutor()\n    {\n        return oracleServer::execute;\n    }", "url": "https://github.com/trinodb/trino/pull/5445#discussion_r501590277", "createdAt": "2020-10-08T09:49:27Z", "author": {"login": "losipiuk"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestOracleDistributedQueries.java", "diffHunk": "@@ -391,8 +395,17 @@ public void testInsertWithCoercion()\n     }\n \n     @Override\n-    public void testColumnName(String columnName)\n+    protected Optional<String> filterColumnNameTestData(String columnName)\n     {\n         // table names generated has more than 30chars, max size naming on oracle.\n+        return Optional.empty();\n+    }\n+\n+    protected JdbcSqlExecutor createJdbcSqlExecutor()\n+    {\n+        Properties properties = new Properties();\n+        properties.setProperty(\"user\", TEST_USER);\n+        properties.setProperty(\"password\", TEST_PASS);\n+        return new JdbcSqlExecutor(oracleServer.getJdbcUrl(), properties);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYwMzk1Ng==", "bodyText": "Changed as suggested.\nI can follow this up in a cleanup for all JDBC tests since all JDBC TestingServers do implement SqlExecutor's execute(sql) but don't explicitly implement that interface.\nWould be nice to be consistent and encapsulate the behavior where possible.", "url": "https://github.com/trinodb/trino/pull/5445#discussion_r501603956", "createdAt": "2020-10-08T10:11:20Z", "author": {"login": "hashhar"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestOracleDistributedQueries.java", "diffHunk": "@@ -391,8 +395,17 @@ public void testInsertWithCoercion()\n     }\n \n     @Override\n-    public void testColumnName(String columnName)\n+    protected Optional<String> filterColumnNameTestData(String columnName)\n     {\n         // table names generated has more than 30chars, max size naming on oracle.\n+        return Optional.empty();\n+    }\n+\n+    protected JdbcSqlExecutor createJdbcSqlExecutor()\n+    {\n+        Properties properties = new Properties();\n+        properties.setProperty(\"user\", TEST_USER);\n+        properties.setProperty(\"password\", TEST_PASS);\n+        return new JdbcSqlExecutor(oracleServer.getJdbcUrl(), properties);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU5MDI3Nw=="}, "originalCommit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4625, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}