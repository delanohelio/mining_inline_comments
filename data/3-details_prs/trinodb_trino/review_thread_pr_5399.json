{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MjA1OTY2", "number": 5399, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo0MDozNVrOEsgmjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwNzo1NDo1NlrOEvMGBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTA2OTU2OnYy", "diffSide": "RIGHT", "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo0MDozNVrOHfyj8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMToyNTo0OFrOHiDJ8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw==", "bodyText": "So with this approach comments would be supported only if user of the connector adds remarksReporting=true into db URL.\nI would suggest that we add the parameter in io.prestosql.plugin.oracle.OracleClientModule#connectionFactory().", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r503096307", "createdAt": "2020-10-12T07:40:35Z", "author": {"login": "losipiuk"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "diffHunk": "@@ -87,7 +87,7 @@ public TestingOracleServer()\n     @Override\n     public String getJdbcUrl()\n     {\n-        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid();\n+        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid() + \"?remarksReporting=true\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NzI5Mw==", "bodyText": "Oh - I have just read your comment on the PR :) Let's leave it as is. Can you add a note to the documentation?", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r503097293", "createdAt": "2020-10-12T07:42:17Z", "author": {"login": "losipiuk"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "diffHunk": "@@ -87,7 +87,7 @@ public TestingOracleServer()\n     @Override\n     public String getJdbcUrl()\n     {\n-        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid();\n+        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid() + \"?remarksReporting=true\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM3OTIwMw==", "bodyText": "is this needed?\noracle always have a comment, empty (\"\") or with some text..", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r505379203", "createdAt": "2020-10-15T09:07:42Z", "author": {"login": "eskabetxe"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "diffHunk": "@@ -87,7 +87,7 @@ public TestingOracleServer()\n     @Override\n     public String getJdbcUrl()\n     {\n-        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid();\n+        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid() + \"?remarksReporting=true\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM5OTcxNA==", "bodyText": "As far as I tested on the current TestingOracleServer, it is needed.\n# With remarksReporting=true\npresto> create table oracle.presto_test.test (c1 int);\nCREATE TABLE\npresto> comment on column oracle.presto_test.test.c1 is 'foo';\nCOMMENT\npresto> desc oracle.presto_test.test;\n Column |     Type      | Extra | Comment\n--------+---------------+-------+---------\n c1     | decimal(10,0) |       |\n\n# Without remarksReporting\npresto> create table oracle.presto_test.test (c1 int);\nCREATE TABLE\npresto> comment on column oracle.presto_test.test.c1 is 'foo';\nCOMMENT\npresto> desc oracle.presto_test.test;\n Column |     Type      | Extra | Comment\n--------+---------------+-------+---------\n c1     | decimal(10,0) |       | foo", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r505399714", "createdAt": "2020-10-15T09:35:10Z", "author": {"login": "ebyhr"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "diffHunk": "@@ -87,7 +87,7 @@ public TestingOracleServer()\n     @Override\n     public String getJdbcUrl()\n     {\n-        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid();\n+        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid() + \"?remarksReporting=true\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ2NTMyOA==", "bodyText": "@losipiuk Added a note to the documentation.", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r505465328", "createdAt": "2020-10-15T11:25:48Z", "author": {"login": "ebyhr"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "diffHunk": "@@ -87,7 +87,7 @@ public TestingOracleServer()\n     @Override\n     public String getJdbcUrl()\n     {\n-        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid();\n+        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid() + \"?remarksReporting=true\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTE2Njc3OnYy", "diffSide": "RIGHT", "path": "presto-docs/src/main/sphinx/connector/oracle.rst", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwNzo1NDo1NlrOHkB_Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMzo0Mjo1NVrOHlU-1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ==", "bodyText": "Maybe it is worth adding that it may have negative performance implications?\n@electrum, @mosabua WDYT?", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r507543391", "createdAt": "2020-10-19T07:54:56Z", "author": {"login": "losipiuk"}, "path": "presto-docs/src/main/sphinx/connector/oracle.rst", "diffHunk": "@@ -20,6 +20,11 @@ properties in the file:\n     connection-user=root\n     connection-password=secret\n \n+.. note::", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3NjUzMg==", "bodyText": "Probably yes ... seems like a bad idea to implement this way to some degree but its a Oracle issue. So in the warning about the performance this should maybe link to the Oracle docs about the impact.", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r507976532", "createdAt": "2020-10-19T18:33:12Z", "author": {"login": "mosabua"}, "path": "presto-docs/src/main/sphinx/connector/oracle.rst", "diffHunk": "@@ -20,6 +20,11 @@ properties in the file:\n     connection-user=root\n     connection-password=secret\n \n+.. note::", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxOTQzNw==", "bodyText": "Thanks for your feedback. Updated as follows:", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r508319437", "createdAt": "2020-10-20T08:44:33Z", "author": {"login": "ebyhr"}, "path": "presto-docs/src/main/sphinx/connector/oracle.rst", "diffHunk": "@@ -20,6 +20,11 @@ properties in the file:\n     connection-user=root\n     connection-password=secret\n \n+.. note::", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODkwMzEyNw==", "bodyText": "Nice. Thanks", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r508903127", "createdAt": "2020-10-20T23:42:55Z", "author": {"login": "mosabua"}, "path": "presto-docs/src/main/sphinx/connector/oracle.rst", "diffHunk": "@@ -20,6 +20,11 @@ properties in the file:\n     connection-user=root\n     connection-password=secret\n \n+.. note::", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ=="}, "originalCommit": null, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4780, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}