{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzQ5OTc2", "number": 3995, "title": "Document timestamp with precision", "bodyText": "", "createdAt": "2020-06-10T23:19:46Z", "url": "https://github.com/trinodb/trino/pull/3995", "merged": true, "mergeCommit": {"oid": "39d5733c32bf0cfbb058ccf8e291e24d88468afd"}, "closed": true, "closedAt": "2020-06-16T22:27:20Z", "author": {"login": "mosabua"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqCLjkAFqTQyODQ5MzU2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr7fuygFqTQzMTg3NjcyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NDkzNTY3", "url": "https://github.com/trinodb/trino/pull/3995#pullrequestreview-428493567", "createdAt": "2020-06-10T23:23:19Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMzoyMzoyMFrOGiJd1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMzoyMzoyMFrOGiJd1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1OTg2Mw==", "bodyText": "This is not yet supported in master. It's in progress: #3947", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r438459863", "createdAt": "2020-06-10T23:23:20Z", "author": {"login": "martint"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,22 +172,62 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P)``\n+^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    The default ``TIMESTAMP`` is equivalent to ``TIMESTAMP(3)`` and means that\n+    up millisecond values are included. A precision of up to 12, so picoseconds,\n+    is supported.\n+\n+    Casting to lower precision causes rounding, and to higher precision causes\n+    appended zero values.\n+\n+    The following examples illustrate the behavior::\n+\n+        SELECT TIMESTAMP('2020-06-10 15:55:23.383345');\n+        -- 2020-06-10 15:55:23.383345\n+\n+        SELECT typeof(TIMESTAMP '2020-06-10 15:55:23.383345');\n+        -- timestamp(6)\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(1));\n+         -- 2020-06-10 15:55:23.4\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(12));\n+        -- 2020-06-10 15:55:23.383345000000\n+\n ``TIMESTAMP WITH TIME ZONE``\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day with a time zone.\n     Values of this type are rendered using the time zone from the value.\n+    Equivalent to ``TIMESTAMP(3) WITH TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321 America/Los_Angeles'``\n \n+``TIMESTAMP(P) WITH TIME ZONE``", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MzY4NTM4", "url": "https://github.com/trinodb/trino/pull/3995#pullrequestreview-429368538", "createdAt": "2020-06-11T23:54:45Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzo1NDo0NVrOGiydug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzo1NToxMlrOGiyePg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzMTU3OA==", "bodyText": "typo: langugage", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439131578", "createdAt": "2020-06-11T23:54:45Z", "author": {"login": "martint"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the literal TIMESTAMP expression.\n+    Alternatively, langugage constructs such as ``localtimestamp(p)``, or a", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzMTcxMA==", "bodyText": "literal TIMESTAMP -> TIMESTAMP literal", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439131710", "createdAt": "2020-06-11T23:55:12Z", "author": {"login": "martint"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the literal TIMESTAMP expression.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NTcxNjEz", "url": "https://github.com/trinodb/trino/pull/3995#pullrequestreview-429571613", "createdAt": "2020-06-12T08:51:19Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwODo1MToyMFrOGi8Ubw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTowMjo0NlrOGi8rkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5MzAzOQ==", "bodyText": "This is only reformatting change and could be separate commit.\nWhile at it, what is \"zero time\"? I guess this could be \"time default to 00:00:00\"", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439293039", "createdAt": "2020-06-12T08:51:20Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -66,8 +72,8 @@ Date and Time Functions\n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n     Parses the ISO 8601 formatted date ``string``, optionally with\n-    time and time zone, into a ``timestamp with time zone``. The time defaults\n-    to zero, and the time zone defaults to the session time zone::\n+    time and time zone, into a ``timestamp with time zone``. The time\n+    defaults to zero, and the time zone defaults to the session time zone::", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5MzU0Ng==", "bodyText": "Would be good to mention this takes double input. Otherwise, reading the docs, it looks as if getting seond fractions was not possible with this method.\nWhile at it, we could mention this method can be used to process contemporary timestamp values with microseond precision, but no more.\ncc @martint", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439293546", "createdAt": "2020-06-12T08:52:22Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +107,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NDg3MQ==", "bodyText": "Please separate reformatting changes from the content changes.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439294871", "createdAt": "2020-06-12T08:54:56Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +107,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``zone`` for the time zone. ``unixtime`` is the number of seconds\n+    since ``1970-01-01 00:00:00``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NTU4MA==", "bodyText": "This should be explicit that unixtime is number of seconds since 1970-01-01 00:00:00 UTC.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439295580", "createdAt": "2020-06-12T08:56:14Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +107,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``zone`` for the time zone. ``unixtime`` is the number of seconds\n+    since ``1970-01-01 00:00:00``.\n \n .. function:: from_unixtime(unixtime, hours, minutes) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is\n+    the number of seconds since ``1970-01-01 00:00:00``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NjUzNg==", "bodyText": "Is it worth documenting that p > 6 doesn't add more actual precision?\nhttps://twitter.com/findepi/status/1270445791832924160 :)", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439296536", "createdAt": "2020-06-12T08:57:46Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -123,6 +132,14 @@ Date and Time Functions\n \n     Returns the current timestamp as of the start of the query.\n \n+.. data:: localtimestamp(p)\n+\n+    Returns the current :ref:`timestamp <timestamp-data-type>` as of the start\n+    of the query, with ``p`` digits of subsecond precision::\n+\n+        SELECT localtimestamp(6);\n+        -- 2020-06-10 15:55:23.383628", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NzI1NQ==", "bodyText": "in datetime.rst and elsewhere  we lowercase the type names.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439297255", "createdAt": "2020-06-12T08:59:10Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODAyOA==", "bodyText": "\"so picoseconds\" sounds informal", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298028", "createdAt": "2020-06-12T09:00:40Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODMwOQ==", "bodyText": "wrap TIMESTAMP in `` ?", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298309", "createdAt": "2020-06-12T09:01:13Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the TIMESTAMP literal expression.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODQxNA==", "bodyText": "function -> functions", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298414", "createdAt": "2020-06-12T09:01:29Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the TIMESTAMP literal expression.\n+    Alternatively, language constructs such as ``localtimestamp(p)``, or a\n+    number of :doc:`date and time function and operators </functions/datetime>`", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODk2Mw==", "bodyText": "maybe explicit: \"causes rounding (not truncation)\"\nthe other part: values -> digits; but i would rather omit this.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298963", "createdAt": "2020-06-12T09:02:46Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the TIMESTAMP literal expression.\n+    Alternatively, language constructs such as ``localtimestamp(p)``, or a\n+    number of :doc:`date and time function and operators </functions/datetime>`\n+    can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and to higher precision causes\n+    appended zero values.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTc5MDY2", "url": "https://github.com/trinodb/trino/pull/3995#pullrequestreview-430179066", "createdAt": "2020-06-14T00:41:41Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQwMDo0MTo0MVrOGjaFog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQwMDo1MjoxN1rOGjaHXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc3MA==", "bodyText": "We don't normally give directives in the documentation. Instead, phrase this as\nThese functions and operators operate on :ref:`date and time data types <date-time-data-types>`.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780770", "createdAt": "2020-06-14T00:41:41Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -2,6 +2,12 @@\n Date and Time Functions and Operators\n =====================================\n \n+Use the date and time functions and operators, detailed in the following, to", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc5OQ==", "bodyText": "This seems to be just changing the wrapping. Please remove", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780799", "createdAt": "2020-06-14T00:42:17Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -66,8 +72,9 @@ Date and Time Functions\n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n     Parses the ISO 8601 formatted date ``string``, optionally with\n-    time and time zone, into a ``timestamp with time zone``. The time defaults", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg0MQ==", "bodyText": "Leave this part alone. It's fine to say \"as a timestamp\" since the function definition gives the exact type.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780841", "createdAt": "2020-06-14T00:43:11Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2MA==", "bodyText": "This seems unrelated to timestamp with precision. Please remove.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780860", "createdAt": "2020-06-14T00:43:41Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00 UTC``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime``, a double as a timestamp with", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2Nw==", "bodyText": "Same", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780867", "createdAt": "2020-06-14T00:43:50Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00 UTC``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime``, a double as a timestamp with\n+    time zone using ``zone`` for the time zone. ``unixtime`` is the number of\n+    seconds since ``1970-01-01 00:00:00 UTC`` in ``double`` data type.\n \n .. function:: from_unixtime(unixtime, hours, minutes) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg4Nw==", "bodyText": "Add space after comma", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780887", "createdAt": "2020-06-14T00:44:26Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -220,6 +238,12 @@ Unit              Description\n         SELECT date_diff('day', DATE '2020-03-01', DATE '2020-03-02');\n         -- 1\n \n+        SELECT date_diff('second', TIMESTAMP '2020-06-01 12:30:45.000000000',TIMESTAMP '2020-06-02 12:30:45.123456789');", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkwNQ==", "bodyText": "Remove the precision here, since this is a word, not a type.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780905", "createdAt": "2020-06-14T00:44:48Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -307,9 +331,9 @@ Specifier Description\n \n     Formats ``timestamp`` as a string using ``format``.\n \n-.. function:: date_parse(string, format) -> timestamp\n+.. function:: date_parse(string, format) -> timestamp(3)\n \n-    Parses ``string`` into a timestamp using ``format``.\n+    Parses ``string`` into a timestamp(3) using ``format``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkxNQ==", "bodyText": "Remove extra blank line", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780915", "createdAt": "2020-06-14T00:45:01Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -141,6 +141,9 @@ String\n     JSON value type, which can be a JSON object, a JSON array, a JSON number, a JSON string,\n     ``true``, ``false`` or ``null``.\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk2Mg==", "bodyText": "Remove the duplicate description. This section should only mention that this is an alias.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780962", "createdAt": "2020-06-14T00:45:58Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk4NQ==", "bodyText": "We don't need to mention all the various redundant syntaxes.\n``TIMESTAMP`` is an alias for ``TIMESTAMP(3)``.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780985", "createdAt": "2020-06-14T00:46:29Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA3Ng==", "bodyText": "Change this to just TIMESTAMP(P). We can mention in the description that this type can also be written as TIMESTAMP WITHOUT TIME ZONE. However, the canonical name for the type is just TIMESTAMP, when rendered by the SQL engine (e.g., in DESCRIBE) output, so we should call it that here.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781076", "createdAt": "2020-06-14T00:48:36Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA5Nw==", "bodyText": "We are missing this second sentence in the description below.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781097", "createdAt": "2020-06-14T00:49:15Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTEyMA==", "bodyText": "This should be the opposite. WITHOUT TIME ZONE is the equivalent longer name.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781120", "createdAt": "2020-06-14T00:49:49Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE1Mw==", "bodyText": "A precision of up to 12 (picoseconds) is supported.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781153", "createdAt": "2020-06-14T00:50:23Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE3NA==", "bodyText": "It's best not to wrap in the middle of a :doc: reference. Better to put it on it's own line so the entire thing can be read and verified in its entirety.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781174", "createdAt": "2020-06-14T00:50:57Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE4Ng==", "bodyText": "\"truncating\" sounds weird. Let's say\n\ncauses the value to be rounded (not truncated).", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781186", "createdAt": "2020-06-14T00:51:33Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and\n+    operators </functions/datetime>` can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and not truncating. Casting to", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTIwOA==", "bodyText": "Casting to higher precision appends zeros for the additional digits.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781208", "createdAt": "2020-06-14T00:52:03Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and\n+    operators </functions/datetime>` can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and not truncating. Casting to\n+    higher precision causes appended zero digits.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTIxNA==", "bodyText": "Remove, since this is not implemented yet.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781214", "createdAt": "2020-06-14T00:52:17Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and\n+    operators </functions/datetime>` can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and not truncating. Casting to\n+    higher precision causes appended zero digits.\n+\n+    The following examples illustrate the behavior::\n+\n+        SELECT TIMESTAMP('2020-06-10 15:55:23.383345');\n+        -- 2020-06-10 15:55:23.383345\n+\n+        SELECT typeof(TIMESTAMP '2020-06-10 15:55:23.383345');\n+        -- timestamp(6)\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(1));\n+         -- 2020-06-10 15:55:23.4\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(12));\n+        -- 2020-06-10 15:55:23.383345000000\n+\n ``TIMESTAMP WITH TIME ZONE``\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day with a time zone.\n     Values of this type are rendered using the time zone from the value.\n+    Equivalent to ``TIMESTAMP(3) WITH TIME ZONE``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 64}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzIwODI2", "url": "https://github.com/trinodb/trino/pull/3995#pullrequestreview-431720826", "createdAt": "2020-06-16T17:10:51Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNzoxMDo1MVrOGklLIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNzo0Njo1M1rOGkmd9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMDk3Ng==", "bodyText": "Please only add \"UTC\" and don't make any formatting changes. Adding data types is unrelated to timestamp precision and should be done / discussed separately.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441010976", "createdAt": "2020-06-16T17:10:51Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00 UTC``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime``, a double as a timestamp with", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2MA=="}, "originalCommit": null, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTE2MA==", "bodyText": "Please revert this change as it's unrelated to timestamp precision.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441011160", "createdAt": "2020-06-16T17:11:10Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00 UTC``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime``, a double as a timestamp with\n+    time zone using ``zone`` for the time zone. ``unixtime`` is the number of\n+    seconds since ``1970-01-01 00:00:00 UTC`` in ``double`` data type.\n \n .. function:: from_unixtime(unixtime, hours, minutes) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2Nw=="}, "originalCommit": null, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTQ3Mg==", "bodyText": "We could add\n, with ``3`` digits of subsecond precision.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441011472", "createdAt": "2020-06-16T17:11:45Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -123,6 +133,14 @@ Date and Time Functions\n \n     Returns the current timestamp as of the start of the query.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTI2MA==", "bodyText": "See comment. Please remove precision.", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031260", "createdAt": "2020-06-16T17:45:26Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -307,9 +331,9 @@ Specifier Description\n \n     Formats ``timestamp`` as a string using ``format``.\n \n-.. function:: date_parse(string, format) -> timestamp\n+.. function:: date_parse(string, format) -> timestamp(3)\n \n-    Parses ``string`` into a timestamp using ``format``.\n+    Parses ``string`` into a timestamp(3) using ``format``.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkwNQ=="}, "originalCommit": null, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTQ1Nw==", "bodyText": "See comment", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031457", "createdAt": "2020-06-16T17:45:47Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk2Mg=="}, "originalCommit": null, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTYzMA==", "bodyText": "See comment", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031630", "createdAt": "2020-06-16T17:46:04Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA5Nw=="}, "originalCommit": null, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTY5Ng==", "bodyText": "See comment", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031696", "createdAt": "2020-06-16T17:46:08Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk4NQ=="}, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMjE4Mw==", "bodyText": "Yes, we format for readability, not arbitrary wrapping at 80 characters", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441032183", "createdAt": "2020-06-16T17:46:53Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE3NA=="}, "originalCommit": null, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "645da88878ebab285b258be1c2de6fd082e568fe", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/645da88878ebab285b258be1c2de6fd082e568fe", "committedDate": "2020-06-16T20:41:27Z", "message": "Document timestamp with precision"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "645da88878ebab285b258be1c2de6fd082e568fe", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/645da88878ebab285b258be1c2de6fd082e568fe", "committedDate": "2020-06-16T20:41:27Z", "message": "Document timestamp with precision"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODc2NzI5", "url": "https://github.com/trinodb/trino/pull/3995#pullrequestreview-431876729", "createdAt": "2020-06-16T20:43:53Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 640, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}