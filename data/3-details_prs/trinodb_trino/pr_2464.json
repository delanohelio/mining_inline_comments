{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDQyODIx", "number": 2464, "title": "Do not setup hadoop for Kafka product tests", "bodyText": "Do not setup hadoop for Kafka product tests", "createdAt": "2020-01-10T13:08:34Z", "url": "https://github.com/trinodb/trino/pull/2464", "merged": true, "mergeCommit": {"oid": "d6a9c7cb0cc14e641fb6aa85c95ffdd944c5be63"}, "closed": true, "closedAt": "2020-01-13T10:24:34Z", "author": {"login": "kokosing"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4_uEzABqjI5Mzg3NjAwOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb55h44gFqTM0MTczODgwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bfa09d634e33a7005027e7de03c3815c0877581", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/1bfa09d634e33a7005027e7de03c3815c0877581", "committedDate": "2020-01-12T19:09:28Z", "message": "Extract hadoop.yml from standard.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bbf23b114a80528eb9e39ad97682cd8b7ee6e0f", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/6bbf23b114a80528eb9e39ad97682cd8b7ee6e0f", "committedDate": "2020-01-12T19:09:28Z", "message": "Fix formatting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad7d703db22a39b98b2bf413210d7e52dab998a5", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/ad7d703db22a39b98b2bf413210d7e52dab998a5", "committedDate": "2020-01-12T20:07:24Z", "message": "Do not setup hadoop for Kafka product tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "ad7d703db22a39b98b2bf413210d7e52dab998a5", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/ad7d703db22a39b98b2bf413210d7e52dab998a5", "committedDate": "2020-01-12T20:07:24Z", "message": "Do not setup hadoop for Kafka product tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzM4MzQ0", "url": "https://github.com/trinodb/trino/pull/2464#pullrequestreview-341738344", "createdAt": "2020-01-13T10:09:28Z", "commit": {"oid": "ad7d703db22a39b98b2bf413210d7e52dab998a5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMDowOToyOFrOFcx_Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMDowOToyOFrOFcx_Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcyMzQ2Mw==", "bodyText": "This is generally OK, but now in Kafka tests you're not waiting for anything.\nPreviously you waited for hadoop -- hadoop was not needed, but waiting could have been needed.\nThis may cause flakiness.\nHow long does it take Kafka to start, compared to Presto startup?\n(ie % rather than s)", "url": "https://github.com/trinodb/trino/pull/2464#discussion_r365723463", "createdAt": "2020-01-13T10:09:28Z", "author": {"login": "findepi"}, "path": "presto-product-tests/bin/run_on_docker.sh", "diffHunk": "@@ -117,8 +117,10 @@ environment_compose up --no-color --abort-on-container-exit ${SERVICES} &\n # Otherwise docker-compose may created network twice and subsequently fail.\n retry check_any_container_is_up\n \n-# wait until hadoop processes are started\n-retry check_hadoop\n+if [[ $SERVICES == *\"hadoop-master\"* ]]; then\n+    # wait until hadoop processes are started\n+    retry check_hadoop\n+fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad7d703db22a39b98b2bf413210d7e52dab998a5"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzM4ODAw", "url": "https://github.com/trinodb/trino/pull/2464#pullrequestreview-341738800", "createdAt": "2020-01-13T10:10:13Z", "commit": {"oid": "ad7d703db22a39b98b2bf413210d7e52dab998a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1071, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}