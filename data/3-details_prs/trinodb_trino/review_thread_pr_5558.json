{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNjk2OTQ0", "number": 5558, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjo1NDowMlrOEts7nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDowNjo1N1rOEvPZrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MzU3NTMzOnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjo1NDowMlrOHhpVfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QxOTowOTozN1rOHjfQKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA0MjMwMg==", "bodyText": "would it help to add username in the error message for ease of debugging?", "url": "https://github.com/trinodb/trino/pull/5558#discussion_r505042302", "createdAt": "2020-10-14T22:54:02Z", "author": {"login": "phd3"}, "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "diffHunk": "@@ -70,5 +72,9 @@ public boolean isValidCredential(String username, String password, boolean secur\n         catch (AccessDeniedException e) {\n             return false;\n         }\n+        catch (RuntimeException e) {\n+            log.warn(e, \"Error authenticating user for Web UI\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI2MjUzMg==", "bodyText": "If it is the way certain password authenticator works, then logging this on warn could easily pollute all server logs.\nI would prefer to log on debug by default, then we could easily add more info there like @phd3 suggested.\nBTW: do we need debug logging for above AccessDeniedException", "url": "https://github.com/trinodb/trino/pull/5558#discussion_r505262532", "createdAt": "2020-10-15T07:27:37Z", "author": {"login": "kokosing"}, "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "diffHunk": "@@ -70,5 +72,9 @@ public boolean isValidCredential(String username, String password, boolean secur\n         catch (AccessDeniedException e) {\n             return false;\n         }\n+        catch (RuntimeException e) {\n+            log.warn(e, \"Error authenticating user for Web UI\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA0MjMwMg=="}, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3NDI1MA==", "bodyText": "The assumption we have always used for Presto is you either log or throw.  So if we are catching an exception, we can assume it has not already been logged.", "url": "https://github.com/trinodb/trino/pull/5558#discussion_r506974250", "createdAt": "2020-10-17T19:09:37Z", "author": {"login": "dain"}, "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "diffHunk": "@@ -70,5 +72,9 @@ public boolean isValidCredential(String username, String password, boolean secur\n         catch (AccessDeniedException e) {\n             return false;\n         }\n+        catch (RuntimeException e) {\n+            log.warn(e, \"Error authenticating user for Web UI\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA0MjMwMg=="}, "originalCommit": null, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTcwODYyOnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDowNjo1N1rOHkHGmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDowNjo1N1rOHkHGmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzYyNzE2MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        log.warn(e, \"Error authenticating user for Web UI\");\n          \n          \n            \n                        log.debug(e, \"Error authenticating user for Web UI\");", "url": "https://github.com/trinodb/trino/pull/5558#discussion_r507627160", "createdAt": "2020-10-19T10:06:57Z", "author": {"login": "kokosing"}, "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "diffHunk": "@@ -70,5 +72,9 @@ public boolean isValidCredential(String username, String password, boolean secur\n         catch (AccessDeniedException e) {\n             return false;\n         }\n+        catch (RuntimeException e) {\n+            log.warn(e, \"Error authenticating user for Web UI\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4716, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}