{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwMDM1Njcw", "number": 5084, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDowOTo0MVrOEggq0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDo0MTo1MVrOEghG1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTI1MTM2OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDowOTo0MVrOHNaU2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMzozMFrOHNaaYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNDg1Nw==", "bodyText": "Missing space before {", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483824857", "createdAt": "2020-09-04T20:09:41Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "diffHunk": "@@ -155,7 +155,10 @@ protected Extensions getExtensions()\n         @Override\n         protected Object[][] getContents()\n         {\n-            return new Object[][]{{\"project.version\", readProjectVersion()}};\n+            return new Object[][]{", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNTM4MA==", "bodyText": "Sure. It's not checked by checkstyle :(", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483825380", "createdAt": "2020-09-04T20:10:59Z", "author": {"login": "wendigo"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "diffHunk": "@@ -155,7 +155,10 @@ protected Extensions getExtensions()\n         @Override\n         protected Object[][] getContents()\n         {\n-            return new Object[][]{{\"project.version\", readProjectVersion()}};\n+            return new Object[][]{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNDg1Nw=="}, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNjI3NQ==", "bodyText": "Interesting, I assumed it was and this would fail.", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483826275", "createdAt": "2020-09-04T20:13:30Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "diffHunk": "@@ -155,7 +155,10 @@ protected Extensions getExtensions()\n         @Override\n         protected Object[][] getContents()\n         {\n-            return new Object[][]{{\"project.version\", readProjectVersion()}};\n+            return new Object[][]{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNDg1Nw=="}, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTI1NDY4OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMDo1NFrOHNaWwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMDo1NFrOHNaWwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNTM0NA==", "bodyText": "Shouldn't the second presto-server be a variable as well?", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483825344", "createdAt": "2020-09-04T20:10:54Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -24,7 +24,7 @@\n     @Option(names = \"--config\", paramLabel = \"<config>\", description = \"Environment config to use\")\n     public String config = \"config-default\";\n \n-    @Option(names = \"--server-package\", paramLabel = \"<package>\", description = \"Path to Presto server package \" + DEFAULT_VALUE, defaultValue = \"presto-server/target/presto-server-${project.version}.tar.gz\")\n+    @Option(names = \"--server-package\", paramLabel = \"<package>\", description = \"Path to Presto server package \" + DEFAULT_VALUE, defaultValue = \"${server.module}/target/presto-server-${project.version}.tar.gz\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTI1NzA3OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/SuiteDescribe.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMTo0OFrOHNaYHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMTo0OFrOHNaYHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNTY5NQ==", "bodyText": "This seems to be missing /target/", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483825695", "createdAt": "2020-09-04T20:11:48Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/SuiteDescribe.java", "diffHunk": "@@ -84,12 +84,11 @@ public void run()\n     public static class SuiteDescribeOptions\n     {\n         private static final String DEFAULT_VALUE = \"(default: ${DEFAULT-VALUE})\";\n-        private static final String TARGET = \"presto-product-tests/target\";\n \n         @Option(names = \"--suite\", paramLabel = \"<suite>\", description = \"Name of the suite to describe\", required = true)\n         public String suite;\n \n-        @Option(names = \"--test-jar\", paramLabel = \"<jar>\", description = \"Path to test JAR \" + DEFAULT_VALUE, defaultValue = TARGET + \"/presto-product-tests-${project.version}-executable.jar\")\n+        @Option(names = \"--test-jar\", paramLabel = \"<jar>\", description = \"Path to test JAR \" + DEFAULT_VALUE, defaultValue = \"${product.tests.module}/${product.tests.module}-${project.version}-executable.jar\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTI1OTk1OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMzowNFrOHNaZxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoxMzowNFrOHNaZxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyNjExOA==", "bodyText": "Let's call this product-tests.module since we use dots for hierarchy, but \"product tests\" is a single name and not a hierarchy.", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483826118", "createdAt": "2020-09-04T20:13:04Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "diffHunk": "@@ -155,7 +155,10 @@ protected Extensions getExtensions()\n         @Override\n         protected Object[][] getContents()\n         {\n-            return new Object[][]{{\"project.version\", readProjectVersion()}};\n+            return new Object[][]{\n+                    {\"project.version\", readProjectVersion()},\n+                    {\"product.tests.module\", \"presto-product-tests\"},", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTMxNTk4OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDozODoyOFrOHNa7MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDozODoyOFrOHNa7MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgzNDY3Mw==", "bodyText": "Can we format this like\nreturn new Object[][] {\n        {\"server.module\", \"presto-server\"},\n};\nThat will allow easily adding new values. I confirmed that it passes the style checker.", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483834673", "createdAt": "2020-09-04T20:38:28Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/Launcher.java", "diffHunk": "@@ -155,7 +155,10 @@ protected Extensions getExtensions()\n         @Override\n         protected Object[][] getContents()\n         {\n-            return new Object[][]{{\"project.version\", readProjectVersion()}};\n+            return new Object[][] {\n+                    {\"project.version\", readProjectVersion()},\n+                    {\"product-tests.module\", \"presto-product-tests\"},\n+                    {\"server.module\", \"presto-server\"}};", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTMxODk5OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDozOTo1NVrOHNa89w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDozOTo1NVrOHNa89w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgzNTEyNw==", "bodyText": "Move defaultValue = to the end to be consistent with the others", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483835127", "createdAt": "2020-09-04T20:39:55Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "diffHunk": "@@ -110,7 +108,7 @@ public void run()\n         @Option(names = \"--attach\", description = \"attach to an existing environment\")\n         public boolean attach;\n \n-        @Option(names = \"--reports-dir\", paramLabel = \"<dir>\", defaultValue = TARGET + \"/reports\", description = \"Location of the reports directory \" + DEFAULT_VALUE)\n+        @Option(names = \"--reports-dir\", paramLabel = \"<dir>\", defaultValue = \"${product-tests.module}/target/reports\", description = \"Location of the reports directory \" + DEFAULT_VALUE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTMyMzA4OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDo0MTo1MVrOHNa_fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDo0MTo1MVrOHNa_fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgzNTc3Mw==", "bodyText": "I think we need a new server.name variable here in case the server module name is different than the produced tarball name.\n${server.module}/target/${server.name}-${project.version}.tar.gz", "url": "https://github.com/trinodb/trino/pull/5084#discussion_r483835773", "createdAt": "2020-09-04T20:41:51Z", "author": {"login": "electrum"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -24,7 +24,7 @@\n     @Option(names = \"--config\", paramLabel = \"<config>\", description = \"Environment config to use\")\n     public String config = \"config-default\";\n \n-    @Option(names = \"--server-package\", paramLabel = \"<package>\", description = \"Path to Presto server package \" + DEFAULT_VALUE, defaultValue = \"presto-server/target/presto-server-${project.version}.tar.gz\")\n+    @Option(names = \"--server-package\", paramLabel = \"<package>\", description = \"Path to Presto server package \" + DEFAULT_VALUE, defaultValue = \"${server.module}/target/${server.module}-${project.version}.tar.gz\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3148, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}