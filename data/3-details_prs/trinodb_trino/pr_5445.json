{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MjE5Mjk1", "number": 5445, "title": "Add more Oracle tests", "bodyText": "Make TestOracleDistributedQueries extensible", "createdAt": "2020-10-07T12:39:02Z", "url": "https://github.com/trinodb/trino/pull/5445", "merged": true, "mergeCommit": {"oid": "f68a7e0705d211699f67ca73146547aeb55a6f60"}, "closed": true, "closedAt": "2020-10-08T11:18:41Z", "author": {"login": "hashhar"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQbos3gH2gAyNDk5MjE5Mjk1OjFiYWU4NjQyNDQ4OWNlZmRkNGNkMjU1NGUxNDgxOGUyOWYyNWM0NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQfQTIgFqTUwNDY1Mzc2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462", "author": {"user": {"login": "hashhar", "name": "Ashhar Hasan"}}, "url": "https://github.com/trinodb/trino/commit/1bae86424489cefdd4cd2554e14818e29f25c462", "committedDate": "2020-10-08T06:31:55Z", "message": "Make TestOracleDistributedQueries extensible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NjA3NjE2", "url": "https://github.com/trinodb/trino/pull/5445#pullrequestreview-504607616", "createdAt": "2020-10-08T09:44:25Z", "commit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0NDoyNlrOHeWcuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOTo0OToyN1rOHeWpBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU4NzEzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .map(columnName -> new Object[] {columnName})\n          \n          \n            \n                            .toArray(Object[][]::new);\n          \n          \n            \n                            .collect(toDataProvider());", "url": "https://github.com/trinodb/trino/pull/5445#discussion_r501587131", "createdAt": "2020-10-08T09:44:26Z", "author": {"login": "losipiuk"}, "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestDistributedQueries.java", "diffHunk": "@@ -1362,28 +1362,43 @@ private static boolean requiresDelimiting(String identifierName)\n     @DataProvider\n     public Object[][] testColumnNameDataProvider()\n     {\n-        return new Object[][] {\n-                {\"lowercase\"},\n-                {\"UPPERCASE\"},\n-                {\"MixedCase\"},\n-                {\"an_underscore\"},\n-                {\"a-hyphen-minus\"}, // ASCII '-' is HYPHEN-MINUS in Unicode\n-                {\"a space\"},\n-                {\"atrailingspace \"},\n-                {\" aleadingspace\"},\n-                {\"a.dot\"},\n-                {\"a,comma\"},\n-                {\"a:colon\"},\n-                {\"a;semicolon\"},\n-                {\"an@at\"},\n-                {\"a\\\"quote\"},\n-                {\"an'apostrophe\"},\n-                {\"a`backtick`\"},\n-                {\"a/slash`\"},\n-                {\"a\\\\backslash`\"},\n-                {\"adigit0\"},\n-                {\"0startwithdigit\"},\n-        };\n+        return testColumnNameTestData().stream()\n+                .map(this::filterColumnNameTestData)\n+                .filter(Optional::isPresent)\n+                .map(Optional::get)\n+                .map(columnName -> new Object[] {columnName})\n+                .toArray(Object[][]::new);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU5MDI3Nw==", "bodyText": "why not\n    protected SqlExecutor createJdbcSqlExecutor()\n    {\n        return oracleServer::execute;\n    }", "url": "https://github.com/trinodb/trino/pull/5445#discussion_r501590277", "createdAt": "2020-10-08T09:49:27Z", "author": {"login": "losipiuk"}, "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestOracleDistributedQueries.java", "diffHunk": "@@ -391,8 +395,17 @@ public void testInsertWithCoercion()\n     }\n \n     @Override\n-    public void testColumnName(String columnName)\n+    protected Optional<String> filterColumnNameTestData(String columnName)\n     {\n         // table names generated has more than 30chars, max size naming on oracle.\n+        return Optional.empty();\n+    }\n+\n+    protected JdbcSqlExecutor createJdbcSqlExecutor()\n+    {\n+        Properties properties = new Properties();\n+        properties.setProperty(\"user\", TEST_USER);\n+        properties.setProperty(\"password\", TEST_PASS);\n+        return new JdbcSqlExecutor(oracleServer.getJdbcUrl(), properties);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bae86424489cefdd4cd2554e14818e29f25c462"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a82e3c9fe2f7930f89961d2a060dd47343a9fcd", "author": {"user": {"login": "hashhar", "name": "Ashhar Hasan"}}, "url": "https://github.com/trinodb/trino/commit/0a82e3c9fe2f7930f89961d2a060dd47343a9fcd", "committedDate": "2020-10-08T10:15:22Z", "message": "fixup! Make TestOracleDistributedQueries extensible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NjUzNzY5", "url": "https://github.com/trinodb/trino/pull/5445#pullrequestreview-504653769", "createdAt": "2020-10-08T10:44:53Z", "commit": {"oid": "0a82e3c9fe2f7930f89961d2a060dd47343a9fcd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3307, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}