{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNjI2MjUz", "number": 3239, "title": "Add support for Glue endpoint URL", "bodyText": "", "createdAt": "2020-03-25T14:37:34Z", "url": "https://github.com/trinodb/trino/pull/3239", "merged": true, "mergeCommit": {"oid": "728be1ac2446b3d2e6f177e91a63c9eea5a5589a"}, "closed": true, "closedAt": "2020-04-01T15:48:18Z", "author": {"login": "ppalucha"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRvFjgABqjMxNzIwMjk1Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTYjnaAFqTM4NTYzOTM1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyODM5NDE0", "url": "https://github.com/trinodb/trino/pull/3239#pullrequestreview-382839414", "createdAt": "2020-03-27T13:07:54Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzowNzo1NFrOF8wT7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxMzowODo0N1rOF8wWBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI1MDQxNA==", "bodyText": "add versioned dependency to main pom.xml (including exclusions). Therefore you won't need to specify version here", "url": "https://github.com/trinodb/trino/pull/3239#discussion_r399250414", "createdAt": "2020-03-27T13:07:54Z", "author": {"login": "sopel39"}, "path": "presto-hive/pom.xml", "diffHunk": "@@ -328,6 +328,20 @@\n             <artifactId>jmh-generator-annprocess</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>org.apache.httpcomponents</groupId>\n+            <artifactId>httpclient</artifactId>\n+            <version>4.5.10</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI1MDk0OQ==", "bodyText": "move below usage (below createAsyncGlueClient method)", "url": "https://github.com/trinodb/trino/pull/3239#discussion_r399250949", "createdAt": "2020-03-27T13:08:47Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/glue/GlueHiveMetastore.java", "diffHunk": "@@ -177,13 +184,34 @@ public GlueHiveMetastore(\n         this.columnStatisticsProvider = requireNonNull(columnStatisticsProvider, \"columnStatisticsProvider is null\");\n     }\n \n+    private static void disableSSLHostnameVerification(ApacheHttpClientConfig httpClientConfig)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMTUxNDA2", "url": "https://github.com/trinodb/trino/pull/3239#pullrequestreview-383151406", "createdAt": "2020-03-27T19:40:31Z", "commit": null, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxOTo0MDozMVrOF8_hEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxOTo1MTozM1rOF8_05g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ5OTUzNg==", "bodyText": "Why not the latest, 4.5.12?", "url": "https://github.com/trinodb/trino/pull/3239#discussion_r399499536", "createdAt": "2020-03-27T19:40:31Z", "author": {"login": "electrum"}, "path": "presto-hive/pom.xml", "diffHunk": "@@ -328,6 +328,20 @@\n             <artifactId>jmh-generator-annprocess</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>org.apache.httpcomponents</groupId>\n+            <artifactId>httpclient</artifactId>\n+            <version>4.5.10</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ5OTU3Nw==", "bodyText": "Remove extra blank line", "url": "https://github.com/trinodb/trino/pull/3239#discussion_r399499577", "createdAt": "2020-03-27T19:40:37Z", "author": {"login": "electrum"}, "path": "presto-hive/pom.xml", "diffHunk": "@@ -328,6 +328,20 @@\n             <artifactId>jmh-generator-annprocess</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>org.apache.httpcomponents</groupId>\n+            <artifactId>httpclient</artifactId>\n+            <version>4.5.10</version>\n+            <scope>compile</scope>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>commons-logging</groupId>\n+                    <artifactId>commons-logging</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ5OTYzMQ==", "bodyText": "Remove, as this is the default scope", "url": "https://github.com/trinodb/trino/pull/3239#discussion_r399499631", "createdAt": "2020-03-27T19:40:44Z", "author": {"login": "electrum"}, "path": "presto-hive/pom.xml", "diffHunk": "@@ -328,6 +328,20 @@\n             <artifactId>jmh-generator-annprocess</artifactId>\n             <scope>test</scope>\n         </dependency>\n+\n+        <dependency>\n+            <groupId>org.apache.httpcomponents</groupId>\n+            <artifactId>httpclient</artifactId>\n+            <version>4.5.10</version>\n+            <scope>compile</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTUwNDYxNA==", "bodyText": "I don't understand this. The AWS documentation doesn't mention anything about this: https://docs.aws.amazon.com/glue/latest/dg/vpc-endpoint.html\nThe SDK Javadoc for com.amazonaws.sdk.disableCertChecking says\n\nDisable validation of server certificates when using the HTTPS protocol. This should ONLY be used to do quick smoke tests against endpoints which don't yet have valid certificates; it should NEVER be used in production.\n\nAs a general security practice, we don't add code to Presto to allow users to defeat security mechanisms.\nIf this actually is needed, please provide specific AWS documentation about why. And in that case, it needs to be a separate configuration property, not tied to setting the endpoint URL.", "url": "https://github.com/trinodb/trino/pull/3239#discussion_r399504614", "createdAt": "2020-03-27T19:51:33Z", "author": {"login": "electrum"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/glue/GlueHiveMetastore.java", "diffHunk": "@@ -180,10 +187,19 @@ public GlueHiveMetastore(\n     private static AWSGlueAsync createAsyncGlueClient(GlueHiveMetastoreConfig config)\n     {\n         ClientConfiguration clientConfig = new ClientConfiguration().withMaxConnections(config.getMaxGlueConnections());\n+        if (config.getGlueEndpointUrl().isPresent()) {\n+            checkArgument(config.getGlueRegion().isPresent(), \"Glue region must be set when Glue endpoint URL is set\");\n+            // Certificate host name validation fails if we are connecting with VPC endpoint host name", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 47}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "aef53ffae0c5abea34ce4cb28c1959f3257bedef", "author": {"user": {"login": "ppalucha", "name": "Pawe\u0142 Pa\u0142ucha"}}, "url": "https://github.com/trinodb/trino/commit/aef53ffae0c5abea34ce4cb28c1959f3257bedef", "committedDate": "2020-04-01T10:52:00Z", "message": "Add support for Glue endpoint URL"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "aef53ffae0c5abea34ce4cb28c1959f3257bedef", "author": {"user": {"login": "ppalucha", "name": "Pawe\u0142 Pa\u0142ucha"}}, "url": "https://github.com/trinodb/trino/commit/aef53ffae0c5abea34ce4cb28c1959f3257bedef", "committedDate": "2020-04-01T10:52:00Z", "message": "Add support for Glue endpoint URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NDg1MjQy", "url": "https://github.com/trinodb/trino/pull/3239#pullrequestreview-385485242", "createdAt": "2020-04-01T11:11:42Z", "commit": {"oid": "aef53ffae0c5abea34ce4cb28c1959f3257bedef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NjM5MzUz", "url": "https://github.com/trinodb/trino/pull/3239#pullrequestreview-385639353", "createdAt": "2020-04-01T14:27:16Z", "commit": {"oid": "aef53ffae0c5abea34ce4cb28c1959f3257bedef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2036, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}