{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0Mjg3MjQ2", "number": 3249, "title": "Add info about login page", "bodyText": "We might have to document more about the TLS requirement and what to do e.g. if the Presto cluster runs on HTTP but sits behind a loadbalancer or other proxy that deals with TLS", "createdAt": "2020-03-26T16:42:48Z", "url": "https://github.com/trinodb/trino/pull/3249", "merged": true, "mergeCommit": {"oid": "083bd113908d1c478f4d7b4dbd0c273667be6e85"}, "closed": true, "closedAt": "2020-04-07T21:13:55Z", "author": {"login": "mosabua"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRe7tfABqjMxNjkxMjY0MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSz2PDgBqjMxODAxODk5MDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzIzMDcx", "url": "https://github.com/trinodb/trino/pull/3249#pullrequestreview-382323071", "createdAt": "2020-03-26T18:58:05Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODo1ODowNVrOF8V79Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODo1OTo0NFrOF8WAMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODI5Mw==", "bodyText": "Only username+password authentication is supported for the WEB UI.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398818293", "createdAt": "2020-03-26T18:58:05Z", "author": {"login": "dain"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,10 +3,19 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n :ref:`config_properties`.\n \n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+a random username to log in successfully.\n+\n+With password authentication enabled, for example via LDAP, password file or\n+Kerberos you are required to configure the server and the Web UI to use", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODg3Mw==", "bodyText": "Any random username will work, but generally people should login using the same username they use when submitting queries.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398818873", "createdAt": "2020-03-26T18:58:57Z", "author": {"login": "dain"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,10 +3,19 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n :ref:`config_properties`.\n \n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+a random username to log in successfully.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxOTM3OA==", "bodyText": "There is a new property web-ui.enabled that can be used to disable the web UI entirely if desired.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398819378", "createdAt": "2020-03-26T18:59:44Z", "author": {"login": "dain"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,10 +3,19 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzQ0NzQx", "url": "https://github.com/trinodb/trino/pull/3249#pullrequestreview-382344741", "createdAt": "2020-03-26T19:28:05Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOToyODowNVrOF8XB5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOTozMjo0OFrOF8XNsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzNjE5OA==", "bodyText": "I would maybe put that the other way around.... When the server is configured to use HTTPS/TLS, a username/password authenticator, such as LDAP or FILE, must be configured.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398836198", "createdAt": "2020-03-26T19:28:05Z", "author": {"login": "dain"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. If desired, the Web UI can be disabled with\n+``web-ui.enabled=false``.\n+\n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+any username to log in successfully. Best practice is to use the same username,\n+when connecting to other systems in your organization, including running queries\n+on Presto with the CLI or some other application.\n+\n+With username/password authentication enabled, you are required to configure the", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzOTIxNg==", "bodyText": "There are two other properties we may want to document: https://github.com/prestosql/presto/blob/master/presto-main/src/main/java/io/prestosql/server/ui/WebUiConfig.java#L49\nThis is the very technical details (which shouldn't be documented)\nweb-ui.shared-secret is used for signing the authentication cookie.  If this is not set the coordinator generates a random one, which means that when ever the coordinator is restarted, all users are logged out.  If set consistently, the user will stay logged in across coordinator restarts.\nweb-ui.session-timeout is how long a login token is valid.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398839216", "createdAt": "2020-03-26T19:32:48Z", "author": {"login": "dain"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzYyNDc5", "url": "https://github.com/trinodb/trino/pull/3249#pullrequestreview-383362479", "createdAt": "2020-03-29T00:50:52Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMDo1MDo1MlrOF9NehA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMTowNDoyMVrOF9Nicw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODI2MA==", "bodyText": "How about\n\nThis property controls whether or not the Web UI is available.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728260", "createdAt": "2020-03-29T00:50:52Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODMwOQ==", "bodyText": "Let's remove the quotes so it's more obvious this is not the real value\n* **Default value:** (randomly generated unless set)", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728309", "createdAt": "2020-03-29T00:51:43Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.\n+\n+``web-ui.shared-secret``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``string``\n+    * **Default value:** ``randomly generated unless set``", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODQ3MA==", "bodyText": "Singular sounds better\n\nIf not set to a static value, any coordinator restart will generate a new random value, which in turn invalidates the session of any currently logged in Web UI user.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728470", "createdAt": "2020-03-29T00:53:41Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.\n+\n+``web-ui.shared-secret``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``string``\n+    * **Default value:** ``randomly generated unless set``\n+\n+    The shared secret is used to generate authentication cookies for users of\n+    the Web UI. If not set to a static value, any coordinator restarts cause a", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODU3OQ==", "bodyText": "How long a user can be logged into the Web UI before the session times out, which forces an automatic log-out.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728579", "createdAt": "2020-03-29T00:54:55Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.\n+\n+``web-ui.shared-secret``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``string``\n+    * **Default value:** ``randomly generated unless set``\n+\n+    The shared secret is used to generate authentication cookies for users of\n+    the Web UI. If not set to a static value, any coordinator restarts cause a\n+    new random value to be created, which in turn invalidates any current\n+    sessions of Web UI users.\n+\n+web-ui.session-timeout\n+^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``1 day``\n+\n+    The duration how long a user can be logged into the Web UI, before the", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODgyNQ==", "bodyText": "I'd rather not say \"best practice\" here since we would need to substantiate that\n\nThe Web UI requires users to log in. If Presto is not configured to require authentication, then any username can be used, and no password will be required (or allowed). Typically, users should login with the same username that they use for running queries.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728825", "createdAt": "2020-03-29T00:58:44Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. It can be configured with :ref:`specific related\n+properties <web-ui-properties>`.\n+\n+The Web UI requires users to log in on the initial page. A default Presto", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTA4NA==", "bodyText": "Let's just say HTTPS since that's what we use elsewhere in the documentation.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399729084", "createdAt": "2020-03-29T01:02:15Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. It can be configured with :ref:`specific related\n+properties <web-ui-properties>`.\n+\n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+any username to log in successfully. Best practice is to use the same username,\n+when connecting to other systems in your organization, including running queries\n+on Presto with the CLI or some other application.\n+\n+When the server is configured to use HTTPS/TLS, a username/password", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTI2Nw==", "bodyText": "We can simplify this to\nWhen the server is configured to use HTTPS, a :doc:`/develop/password-authenticator`\nsuch as :doc:`LDAP </security/ldap>` must be configured in order to use the Web UI.", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399729267", "createdAt": "2020-03-29T01:04:21Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. It can be configured with :ref:`specific related\n+properties <web-ui-properties>`.\n+\n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+any username to log in successfully. Best practice is to use the same username,\n+when connecting to other systems in your organization, including running queries\n+on Presto with the CLI or some other application.\n+\n+When the server is configured to use HTTPS/TLS, a username/password", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTA4NA=="}, "originalCommit": null, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "committedDate": "2020-03-30T19:40:55Z", "message": "Add WebUi properties and info about login page"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "committedDate": "2020-03-30T19:40:55Z", "message": "Add WebUi properties and info about login page"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2057, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}