{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMTEyODUy", "number": 2783, "title": "Make Kafka connector extendable", "bodyText": "Make Kafka connector extendable", "createdAt": "2020-02-10T12:41:07Z", "url": "https://github.com/trinodb/trino/pull/2783", "merged": true, "mergeCommit": {"oid": "b7719be8825f86ab262cfc9b63f4305f1651ad4c"}, "closed": true, "closedAt": "2020-02-22T21:31:21Z", "author": {"login": "kokosing"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDB2Y3AFqTM1NjE3NjM0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcG5qGWABqjMwNjI5MzY4NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTc2MzQ2", "url": "https://github.com/trinodb/trino/pull/2783#pullrequestreview-356176346", "createdAt": "2020-02-10T18:49:18Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0OToxOVrOFnxcjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo1NjowNVrOFnxrNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0ODkxMA==", "bodyText": "Nit: I wouldn't wrap here, as it looks funny / different compared to the above. Keeping the wrapping the same would make it easy to see that this is simply adding another argument.", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r377248910", "createdAt": "2020-02-10T18:49:19Z", "author": {"login": "electrum"}, "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaConnectorFactory.java", "diffHunk": "@@ -36,10 +37,19 @@\n         implements ConnectorFactory\n {\n     private final Optional<Supplier<Map<SchemaTableName, KafkaTopicDescription>>> tableDescriptionSupplier;\n+    private final Module additionalModule;\n \n     KafkaConnectorFactory(Optional<Supplier<Map<SchemaTableName, KafkaTopicDescription>>> tableDescriptionSupplier)\n+    {\n+        this(tableDescriptionSupplier, new KafkaConsumerModule());\n+    }\n+\n+    KafkaConnectorFactory(", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1MTMwNg==", "bodyText": "I dislike this class. We generally avoid subclassing as a means to share code (part of the \"prefer delegation\" from Effective Java), and here we aren't saving anything, since it's trivial to implement KafkaConsumerFactory directly. The primary purpose seems to be to prevent subclasses from creating KafkaConsumer directly, but I don't see a reason for that.", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r377251306", "createdAt": "2020-02-10T18:53:36Z", "author": {"login": "electrum"}, "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/BaseKafkaConsumerFactory.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.prestosql.plugin.kafka;\n+\n+import org.apache.kafka.clients.consumer.KafkaConsumer;\n+\n+import java.util.Properties;\n+\n+public abstract class BaseKafkaConsumerFactory", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1MjY2MQ==", "bodyText": "Maybe call this consumerModule since it's a required module (compared to other connectors where it's actually an optional, additional module)", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r377252661", "createdAt": "2020-02-10T18:56:05Z", "author": {"login": "electrum"}, "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaConnectorFactory.java", "diffHunk": "@@ -36,10 +37,19 @@\n         implements ConnectorFactory\n {\n     private final Optional<Supplier<Map<SchemaTableName, KafkaTopicDescription>>> tableDescriptionSupplier;\n+    private final Module additionalModule;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NDUyNDEw", "url": "https://github.com/trinodb/trino/pull/2783#pullrequestreview-357452410", "createdAt": "2020-02-12T13:33:20Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMzozMzoyMVrOFoupOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMzo0Njo1NVrOFovGwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1MTU3Nw==", "bodyText": "who closes Kafka exactly?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378251577", "createdAt": "2020-02-12T13:33:21Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -121,7 +121,7 @@ static DistributedQueryRunner createKafkaQueryRunner(\n             return queryRunner;\n         }\n         catch (Throwable e) {\n-            closeAllSuppress(e, queryRunner, testingKafka);\n+            closeAllSuppress(e, queryRunner);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1MjQ0OQ==", "bodyText": "check not null?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378252449", "createdAt": "2020-02-12T13:34:58Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -49,38 +49,67 @@ private KafkaQueryRunner() {}\n     private static final Logger log = Logger.get(KafkaQueryRunner.class);\n     private static final String TPCH_SCHEMA = \"tpch\";\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, TpchTable<?>... tables)\n-            throws Exception\n+    public static Builder builder(TestingKafka testingKafka)\n     {\n-        return createKafkaQueryRunner(testingKafka, ImmutableList.copyOf(tables));\n+        return new Builder(testingKafka);\n     }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables)\n-            throws Exception\n+    public static class Builder\n+            extends DistributedQueryRunner.Builder\n     {\n-        return createKafkaQueryRunner(testingKafka, tables, ImmutableMap.of());\n-    }\n+        private final TestingKafka testingKafka;\n+        private Map<String, String> extraKafkaProperties = ImmutableMap.of();\n+        private Iterable<TpchTable<?>> tables = ImmutableList.of();\n+        private Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription = ImmutableMap.of();\n+\n+        protected Builder(TestingKafka testingKafka)\n+        {\n+            super(testSessionBuilder()\n+                    .setCatalog(\"kafka\")\n+                    .setSchema(TPCH_SCHEMA)\n+                    .build());\n+            this.testingKafka = requireNonNull(testingKafka, \"testingKafka is null\");\n+        }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables, Map<SchemaTableName, KafkaTopicDescription> topicDescription)\n-            throws Exception\n-    {\n-        return createKafkaQueryRunner(testingKafka, ImmutableMap.of(), tables, topicDescription);\n+        public Builder setExtraKafkaProperties(Map<String, String> extraKafkaProperties)\n+        {\n+            this.extraKafkaProperties = extraKafkaProperties;\n+            return this;\n+        }\n+\n+        public Builder setTables(Iterable<TpchTable<?>> tables)\n+        {\n+            this.tables = tables;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1MjU0OA==", "bodyText": "check not null?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378252548", "createdAt": "2020-02-12T13:35:08Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -49,38 +49,67 @@ private KafkaQueryRunner() {}\n     private static final Logger log = Logger.get(KafkaQueryRunner.class);\n     private static final String TPCH_SCHEMA = \"tpch\";\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, TpchTable<?>... tables)\n-            throws Exception\n+    public static Builder builder(TestingKafka testingKafka)\n     {\n-        return createKafkaQueryRunner(testingKafka, ImmutableList.copyOf(tables));\n+        return new Builder(testingKafka);\n     }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables)\n-            throws Exception\n+    public static class Builder\n+            extends DistributedQueryRunner.Builder\n     {\n-        return createKafkaQueryRunner(testingKafka, tables, ImmutableMap.of());\n-    }\n+        private final TestingKafka testingKafka;\n+        private Map<String, String> extraKafkaProperties = ImmutableMap.of();\n+        private Iterable<TpchTable<?>> tables = ImmutableList.of();\n+        private Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription = ImmutableMap.of();\n+\n+        protected Builder(TestingKafka testingKafka)\n+        {\n+            super(testSessionBuilder()\n+                    .setCatalog(\"kafka\")\n+                    .setSchema(TPCH_SCHEMA)\n+                    .build());\n+            this.testingKafka = requireNonNull(testingKafka, \"testingKafka is null\");\n+        }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables, Map<SchemaTableName, KafkaTopicDescription> topicDescription)\n-            throws Exception\n-    {\n-        return createKafkaQueryRunner(testingKafka, ImmutableMap.of(), tables, topicDescription);\n+        public Builder setExtraKafkaProperties(Map<String, String> extraKafkaProperties)\n+        {\n+            this.extraKafkaProperties = extraKafkaProperties;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1MjYwNA==", "bodyText": "check not null?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378252604", "createdAt": "2020-02-12T13:35:15Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -49,38 +49,67 @@ private KafkaQueryRunner() {}\n     private static final Logger log = Logger.get(KafkaQueryRunner.class);\n     private static final String TPCH_SCHEMA = \"tpch\";\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, TpchTable<?>... tables)\n-            throws Exception\n+    public static Builder builder(TestingKafka testingKafka)\n     {\n-        return createKafkaQueryRunner(testingKafka, ImmutableList.copyOf(tables));\n+        return new Builder(testingKafka);\n     }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables)\n-            throws Exception\n+    public static class Builder\n+            extends DistributedQueryRunner.Builder\n     {\n-        return createKafkaQueryRunner(testingKafka, tables, ImmutableMap.of());\n-    }\n+        private final TestingKafka testingKafka;\n+        private Map<String, String> extraKafkaProperties = ImmutableMap.of();\n+        private Iterable<TpchTable<?>> tables = ImmutableList.of();\n+        private Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription = ImmutableMap.of();\n+\n+        protected Builder(TestingKafka testingKafka)\n+        {\n+            super(testSessionBuilder()\n+                    .setCatalog(\"kafka\")\n+                    .setSchema(TPCH_SCHEMA)\n+                    .build());\n+            this.testingKafka = requireNonNull(testingKafka, \"testingKafka is null\");\n+        }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables, Map<SchemaTableName, KafkaTopicDescription> topicDescription)\n-            throws Exception\n-    {\n-        return createKafkaQueryRunner(testingKafka, ImmutableMap.of(), tables, topicDescription);\n+        public Builder setExtraKafkaProperties(Map<String, String> extraKafkaProperties)\n+        {\n+            this.extraKafkaProperties = extraKafkaProperties;\n+            return this;\n+        }\n+\n+        public Builder setTables(Iterable<TpchTable<?>> tables)\n+        {\n+            this.tables = tables;\n+            return this;\n+        }\n+\n+        public Builder setExtraTopicDescription(Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription)\n+        {\n+            this.extraTopicDescription = extraTopicDescription;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1MjgxOA==", "bodyText": "move it back to createKafkaQueryRunner?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378252818", "createdAt": "2020-02-12T13:35:41Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -49,38 +49,67 @@ private KafkaQueryRunner() {}\n     private static final Logger log = Logger.get(KafkaQueryRunner.class);\n     private static final String TPCH_SCHEMA = \"tpch\";\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, TpchTable<?>... tables)\n-            throws Exception\n+    public static Builder builder(TestingKafka testingKafka)\n     {\n-        return createKafkaQueryRunner(testingKafka, ImmutableList.copyOf(tables));\n+        return new Builder(testingKafka);\n     }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables)\n-            throws Exception\n+    public static class Builder\n+            extends DistributedQueryRunner.Builder\n     {\n-        return createKafkaQueryRunner(testingKafka, tables, ImmutableMap.of());\n-    }\n+        private final TestingKafka testingKafka;\n+        private Map<String, String> extraKafkaProperties = ImmutableMap.of();\n+        private Iterable<TpchTable<?>> tables = ImmutableList.of();\n+        private Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription = ImmutableMap.of();\n+\n+        protected Builder(TestingKafka testingKafka)\n+        {\n+            super(testSessionBuilder()\n+                    .setCatalog(\"kafka\")\n+                    .setSchema(TPCH_SCHEMA)\n+                    .build());\n+            this.testingKafka = requireNonNull(testingKafka, \"testingKafka is null\");\n+        }\n \n-    static DistributedQueryRunner createKafkaQueryRunner(TestingKafka testingKafka, Iterable<TpchTable<?>> tables, Map<SchemaTableName, KafkaTopicDescription> topicDescription)\n-            throws Exception\n-    {\n-        return createKafkaQueryRunner(testingKafka, ImmutableMap.of(), tables, topicDescription);\n+        public Builder setExtraKafkaProperties(Map<String, String> extraKafkaProperties)\n+        {\n+            this.extraKafkaProperties = extraKafkaProperties;\n+            return this;\n+        }\n+\n+        public Builder setTables(Iterable<TpchTable<?>> tables)\n+        {\n+            this.tables = tables;\n+            return this;\n+        }\n+\n+        public Builder setExtraTopicDescription(Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription)\n+        {\n+            this.extraTopicDescription = extraTopicDescription;\n+            return this;\n+        }\n+\n+        @Override\n+        public DistributedQueryRunner build()\n+                throws Exception\n+        {\n+            Logging logging = Logging.initialize();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1NjY2NA==", "bodyText": "I wonder if it wouldn't be better to model kafka consumer as optional binding, see how I implemented Glue column stats extension, GlueMetastoreModule.", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378256664", "createdAt": "2020-02-12T13:42:27Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaPlugin.java", "diffHunk": "@@ -30,12 +29,16 @@\n public class KafkaPlugin\n         implements Plugin\n {\n+    public static final Module DEFAULT_EXTENSION = binder -> {\n+        binder.install(new KafkaConsumerModule());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODMyOQ==", "bodyText": "do we really need more than one description supplier at the same time?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378258329", "createdAt": "2020-02-12T13:45:30Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaConnectorModule.java", "diffHunk": "@@ -50,6 +51,7 @@ public void configure(Binder binder)\n         binder.bind(KafkaConnector.class).in(Scopes.SINGLETON);\n \n         configBinder(binder).bindConfig(KafkaConfig.class);\n+        newSetBinder(binder, TableDescriptionSupplier.class).addBinding().toProvider(KafkaTableDescriptionSupplier.class).in(Scopes.SINGLETON);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1OTEzNw==", "bodyText": "why this one is needed? Do we lack some extensions?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r378259137", "createdAt": "2020-02-12T13:46:55Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -99,6 +102,12 @@ public Builder setExtension(Module extension)\n             return this;\n         }\n \n+        public Builder setPluginFactory(Function<Module, Plugin> pluginFactory)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNjgxNTI5", "url": "https://github.com/trinodb/trino/pull/2783#pullrequestreview-362681529", "createdAt": "2020-02-21T14:49:50Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxNDo0OTo1MFrOFs5Ytg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxNDo1MDo0NFrOFs5akQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjYyMTg3OA==", "bodyText": "static import?", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r382621878", "createdAt": "2020-02-21T14:49:50Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/KafkaQueryRunner.java", "diffHunk": "@@ -64,7 +63,7 @@ public static Builder builder(TestingKafka testingKafka)\n         private Map<String, String> extraKafkaProperties = ImmutableMap.of();\n         private List<TpchTable<?>> tables = ImmutableList.of();\n         private Map<SchemaTableName, KafkaTopicDescription> extraTopicDescription = ImmutableMap.of();\n-        private Module extension = EMPTY_MODULE;\n+        private Module extension = KafkaPlugin.DEFAULT_EXTENSION;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjYyMjM1Mw==", "bodyText": "or you could use optional binding", "url": "https://github.com/trinodb/trino/pull/2783#discussion_r382622353", "createdAt": "2020-02-21T14:50:44Z", "author": {"login": "sopel39"}, "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaConsumerModule.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.prestosql.plugin.kafka;\n+\n+import com.google.inject.Binder;\n+import com.google.inject.Module;\n+import com.google.inject.Scopes;\n+\n+public class KafkaConsumerModule\n+        implements Module\n+{\n+    @Override\n+    public void configure(Binder binder)\n+    {\n+        binder.bind(KafkaConsumerFactory.class).to(PlainTextKafkaConsumerFactory.class).in(Scopes.SINGLETON);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81d46a26bb505b26faaa6c1a517d2dee54593dfd", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/81d46a26bb505b26faaa6c1a517d2dee54593dfd", "committedDate": "2020-02-22T19:35:16Z", "message": "Do not close parameter testingKafka\n\ntestingKafka is passed as parameter and it managed and closed else where\n(in tests)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0775cf3c371444250f6a6138a54055a9e41648a8", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/0775cf3c371444250f6a6138a54055a9e41648a8", "committedDate": "2020-02-22T19:35:16Z", "message": "Remove not needed sleep"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e12ae04357a89c6c3b23d278212dc8f8a0e996a7", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/e12ae04357a89c6c3b23d278212dc8f8a0e996a7", "committedDate": "2020-02-22T19:35:16Z", "message": "Do not set kafka.table-names in tests\n\nKafka in tests is using tables that are injected via KafkaPlugin\nconstructor and so kafka.tables-names are not used anyway, because\nKafkaTableDescriptionSupplier is not used in tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42b2815087ab8349abdcd5da48406e909187702e", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/42b2815087ab8349abdcd5da48406e909187702e", "committedDate": "2020-02-22T19:35:17Z", "message": "Introduce Builder for KafkaQueryRunner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "091fc33da889e7cb0627c3e8fbf170dea75d2eb7", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/091fc33da889e7cb0627c3e8fbf170dea75d2eb7", "committedDate": "2020-02-22T19:35:17Z", "message": "Allow to extend Kafka connector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9dd8b72ec83634a091e15999d1756b1b171bd10", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/a9dd8b72ec83634a091e15999d1756b1b171bd10", "committedDate": "2020-02-22T19:39:31Z", "message": "Configure KafkaConsumer as Kafka extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51351f813b8f638cf7968157e2c49a723b47e5be", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/51351f813b8f638cf7968157e2c49a723b47e5be", "committedDate": "2020-02-22T19:39:50Z", "message": "Extract pluggable KafkaTableDescriptionSupplier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f88884510e7fe48c3206d11c6e35a4acadc87a6", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/3f88884510e7fe48c3206d11c6e35a4acadc87a6", "committedDate": "2020-02-22T19:39:52Z", "message": "Make KafkaConnectorFactory constructor public"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e571a7fccd9768bc05c6c9c6ccd3629dc3ce710", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/4e571a7fccd9768bc05c6c9c6ccd3629dc3ce710", "committedDate": "2020-02-22T19:39:52Z", "message": "Do not close not created testing Kafka"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "022ee96c9b44c449ffbbbd2e46986ecbf6b5bd9e", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/022ee96c9b44c449ffbbbd2e46986ecbf6b5bd9e", "committedDate": "2020-02-22T19:39:52Z", "message": "Extract Kafka EnvironmentExtender"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d6438729e5a9f7954215615255d813fbfed5df", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/e2d6438729e5a9f7954215615255d813fbfed5df", "committedDate": "2020-02-22T19:39:52Z", "message": "Extract temporaryDirectory\n\nThis method is extracted so extensions could use it."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "e2d6438729e5a9f7954215615255d813fbfed5df", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/e2d6438729e5a9f7954215615255d813fbfed5df", "committedDate": "2020-02-22T19:39:52Z", "message": "Extract temporaryDirectory\n\nThis method is extracted so extensions could use it."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1661, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}