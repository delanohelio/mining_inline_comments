{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNjk2OTQ0", "number": 5558, "title": "Catch all runtime errors from UI password authenticator", "bodyText": "Some password authenticators throw runtime exceptions to signal login did not work. Instead of showing 500 to the end user, the failure is logged and the login is denied.\nNote there is no facility in the Web UI to propagate errors back to the user, nor is it clear that the error message would be appropriate for an end user, so the best that can be done is to log.", "createdAt": "2020-10-14T22:48:42Z", "url": "https://github.com/trinodb/trino/pull/5558", "merged": true, "mergeCommit": {"oid": "dc353c9616bc91c59d391c31d11db05baf181fb7"}, "closed": true, "closedAt": "2020-10-21T16:06:12Z", "author": {"login": "dain"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSlTrNgFqTUwODgyNjM5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUvoaaABqjM5MDQ3MzkyMTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODI2Mzk1", "url": "https://github.com/trinodb/trino/pull/5558#pullrequestreview-508826395", "createdAt": "2020-10-14T22:54:02Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjo1NDowMlrOHhpVfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjo1NDowMlrOHhpVfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA0MjMwMg==", "bodyText": "would it help to add username in the error message for ease of debugging?", "url": "https://github.com/trinodb/trino/pull/5558#discussion_r505042302", "createdAt": "2020-10-14T22:54:02Z", "author": {"login": "phd3"}, "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "diffHunk": "@@ -70,5 +72,9 @@ public boolean isValidCredential(String username, String password, boolean secur\n         catch (AccessDeniedException e) {\n             return false;\n         }\n+        catch (RuntimeException e) {\n+            log.warn(e, \"Error authenticating user for Web UI\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNjA1ODQ1", "url": "https://github.com/trinodb/trino/pull/5558#pullrequestreview-511605845", "createdAt": "2020-10-19T10:06:17Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNjA2MzQz", "url": "https://github.com/trinodb/trino/pull/5558#pullrequestreview-511606343", "createdAt": "2020-10-19T10:06:57Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDowNjo1N1rOHkHGmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDowNjo1N1rOHkHGmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzYyNzE2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        log.warn(e, \"Error authenticating user for Web UI\");\n          \n          \n            \n                        log.debug(e, \"Error authenticating user for Web UI\");", "url": "https://github.com/trinodb/trino/pull/5558#discussion_r507627160", "createdAt": "2020-10-19T10:06:57Z", "author": {"login": "kokosing"}, "path": "presto-main/src/main/java/io/prestosql/server/ui/PasswordManagerFormAuthenticator.java", "diffHunk": "@@ -70,5 +72,9 @@ public boolean isValidCredential(String username, String password, boolean secur\n         catch (AccessDeniedException e) {\n             return false;\n         }\n+        catch (RuntimeException e) {\n+            log.warn(e, \"Error authenticating user for Web UI\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMjE3MzE1", "url": "https://github.com/trinodb/trino/pull/5558#pullrequestreview-513217315", "createdAt": "2020-10-20T23:59:43Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc353c9616bc91c59d391c31d11db05baf181fb7", "author": {"user": {"login": "dain", "name": "Dain Sundstrom"}}, "url": "https://github.com/trinodb/trino/commit/dc353c9616bc91c59d391c31d11db05baf181fb7", "committedDate": "2020-10-21T16:05:12Z", "message": "Catch all runtime errors from UI password authenticator\n\nSome password authenticators throw runtime exceptions to signal login did not\nwork. Instead of showing 500 to the end user, the failure is logged and the\nlogin is denied."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "dc353c9616bc91c59d391c31d11db05baf181fb7", "author": {"user": {"login": "dain", "name": "Dain Sundstrom"}}, "url": "https://github.com/trinodb/trino/commit/dc353c9616bc91c59d391c31d11db05baf181fb7", "committedDate": "2020-10-21T16:05:12Z", "message": "Catch all runtime errors from UI password authenticator\n\nSome password authenticators throw runtime exceptions to signal login did not\nwork. Instead of showing 500 to the end user, the failure is logged and the\nlogin is denied."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3465, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}