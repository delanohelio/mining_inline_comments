{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNzIxNjcz", "number": 2528, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNDo0MlrODYvnmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMDowMzozOVrODZJ-WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MjcyNjAzOnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLocalDynamicFilter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNDo0MlrOFexsog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNDo0MlrOFexsog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxNTg0Mg==", "bodyText": "JoinReorderingStrategy.NONE.name() would be preferred", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r367815842", "createdAt": "2020-01-17T08:24:42Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLocalDynamicFilter.java", "diffHunk": "@@ -54,6 +55,7 @@ public TestLocalDynamicFilter()\n     {\n         super(ImmutableMap.of(\n                 FORCE_SINGLE_NODE_OUTPUT, \"false\",\n+                JOIN_REORDERING_STRATEGY, \"NONE\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MjcyNjQ2OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNDo1NlrOFexs5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNDo1NlrOFexs5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxNTkxMA==", "bodyText": "JoinReorderingStrategy.NONE.name() would be preferred", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r367815910", "createdAt": "2020-01-17T08:24:56Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "diffHunk": "@@ -47,7 +49,10 @@\n     TestDynamicFilter()\n     {\n         // in order to test testUncorrelatedSubqueries with Dynamic Filtering, enable it\n-        super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n+        super(ImmutableMap.of(\n+                ENABLE_DYNAMIC_FILTERING, \"true\",\n+                JOIN_REORDERING_STRATEGY, \"NONE\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MjcyNzY0OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNTozMlrOFextrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyNTozMlrOFextrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxNjExMA==", "bodyText": "please use the opportunity and make the ctor public", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r367816110", "createdAt": "2020-01-17T08:25:32Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "diffHunk": "@@ -47,7 +49,10 @@\n     TestDynamicFilter()\n     {\n         // in order to test testUncorrelatedSubqueries with Dynamic Filtering, enable it\n-        super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n+        super(ImmutableMap.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MjczMzk1OnYy", "diffSide": "RIGHT", "path": "presto-docs/src/main/sphinx/admin/properties.rst", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyODowNFrOFexxhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwODoyODowNFrOFexxhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxNzA5Mg==", "bodyText": "Also update docs for optimizer.join-reordering-strategy", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r367817092", "createdAt": "2020-01-17T08:28:04Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -18,7 +18,7 @@ General Properties\n \n     * **Type:** ``string``\n     * **Allowed values:** ``AUTOMATIC``, ``PARTITIONED``, ``BROADCAST``\n-    * **Default value:** ``PARTITIONED``\n+    * **Default value:** ``AUTOMATIC``", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Njc4NzA4OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0MDoyN1rOFfWraw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0MDoyN1rOFfWraw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyMTczOQ==", "bodyText": "Please format this this way:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertPlan(\"SELECT o.orderkey FROM orders o, lineitem l WHERE l.orderkey = o.orderkey\", disableCbo(),\n          \n          \n            \n                    assertPlan(\n          \n          \n            \n                    \"SELECT o.orderkey FROM orders o, lineitem l WHERE l.orderkey = o.orderkey\",\n          \n          \n            \n                     disableCbo(),", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368421739", "createdAt": "2020-01-20T08:40:27Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "diffHunk": "@@ -140,13 +143,13 @@ public void testTableScan()\n     @Test\n     public void testJoinMatcher()\n     {\n-        assertPlan(\"SELECT o.orderkey FROM orders o, lineitem l WHERE l.orderkey = o.orderkey\",\n+        assertPlan(\"SELECT o.orderkey FROM orders o, lineitem l WHERE l.orderkey = o.orderkey\", disableCbo(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Njc4NzQ4OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0MDozNlrOFfWroQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0MDozNlrOFfWroQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyMTc5Mw==", "bodyText": "as above", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368421793", "createdAt": "2020-01-20T08:40:36Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "diffHunk": "@@ -240,13 +243,13 @@ public void testStrictProjectExtraSymbols()\n     @Test(expectedExceptions = IllegalStateException.class, expectedExceptionsMessageRegExp = \".*already bound to expression.*\")\n     public void testDuplicateAliases()\n     {\n-        assertPlan(\"SELECT o.orderkey FROM orders o, lineitem l WHERE l.orderkey = o.orderkey\",\n+        assertPlan(\"SELECT o.orderkey FROM orders o, lineitem l WHERE l.orderkey = o.orderkey\", disableCbo(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Njc4OTk2OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0MTozNlrOFfWtDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0MTozNlrOFfWtDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyMjE1OA==", "bodyText": "If this method is supposed to disable CBO, it should also set JOIN_REORDERING_STRATEGY= to eg NONE", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368422158", "createdAt": "2020-01-20T08:41:36Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "diffHunk": "@@ -257,4 +260,11 @@ public void testProjectLimitsScope()\n                         project(ImmutableMap.of(\"EXPRESSION\", expression(\"CAST(1 AS bigint) + ORDERKEY\")),\n                                 tableScan(\"lineitem\", ImmutableMap.of(\"ORDERKEY\", \"orderkey\")))));\n     }\n+\n+    private Session disableCbo()\n+    {\n+        return Session.builder(getQueryRunner().getDefaultSession())\n+                .setSystemProperty(JOIN_DISTRIBUTION_TYPE, JoinNode.DistributionType.PARTITIONED.name())", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Njc5OTYyOnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLogicalPlanner.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo0NToxMlrOFfWylQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo1NTo0MFrOFfYzWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyMzU3Mw==", "bodyText": "This class is a general planner test. It should use default settings.\nSome test methods, however, would fail.\nLet's introduce noJoinReordering method and use it in these tests.", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368423573", "createdAt": "2020-01-20T08:45:12Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLogicalPlanner.java", "diffHunk": "@@ -122,6 +124,13 @@\n public class TestLogicalPlanner\n         extends BasePlanTest\n {\n+    public TestLogicalPlanner()\n+    {\n+        super(ImmutableMap.of(\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1NjUzOA==", "bodyText": "Got it.", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368456538", "createdAt": "2020-01-20T09:55:40Z", "author": {"login": "wendigo"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLogicalPlanner.java", "diffHunk": "@@ -122,6 +124,13 @@\n public class TestLogicalPlanner\n         extends BasePlanTest\n {\n+    public TestLogicalPlanner()\n+    {\n+        super(ImmutableMap.of(\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyMzU3Mw=="}, "originalCommit": null, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjgxODU0OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1MTo1NVrOFfW9qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1MTo1NVrOFfW9qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyNjQwOA==", "bodyText": "rename to noJoinReordering (as in https://github.com/prestosql/presto/blob/90833ad2484a2206ce7f572eb911611be9cacf0d/presto-testing/src/main/java/io/prestosql/testing/AbstractTestJoinQueries.java#L2278-L2284)", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368426408", "createdAt": "2020-01-20T08:51:55Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPlanMatchingFramework.java", "diffHunk": "@@ -257,4 +260,11 @@ public void testProjectLimitsScope()\n                         project(ImmutableMap.of(\"EXPRESSION\", expression(\"CAST(1 AS bigint) + ORDERKEY\")),\n                                 tableScan(\"lineitem\", ImmutableMap.of(\"ORDERKEY\", \"orderkey\")))));\n     }\n+\n+    private Session disableCbo()", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjgyMjM2OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1MzoyMVrOFfW_5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMTowMzoxOVrOFfazHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyNjk4Mw==", "bodyText": "Remove these and try to fix the two failing tests by updating the expected plans.", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368426983", "createdAt": "2020-01-20T08:53:21Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "diffHunk": "@@ -52,9 +56,12 @@\n {\n     private final Metadata metadata = createTestMetadataManager();\n \n-    TestPredicatePushdown()\n+    public TestPredicatePushdown()\n     {\n-        super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n+        super(ImmutableMap.of(\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),\n+                JOIN_DISTRIBUTION_TYPE, JoinDistributionType.PARTITIONED.name(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ4OTI0NQ==", "bodyText": "Done.", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368489245", "createdAt": "2020-01-20T11:03:19Z", "author": {"login": "wendigo"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "diffHunk": "@@ -52,9 +56,12 @@\n {\n     private final Metadata metadata = createTestMetadataManager();\n \n-    TestPredicatePushdown()\n+    public TestPredicatePushdown()\n     {\n-        super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n+        super(ImmutableMap.of(\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),\n+                JOIN_DISTRIBUTION_TYPE, JoinDistributionType.PARTITIONED.name(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyNjk4Mw=="}, "originalCommit": null, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjgyNjYwOnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/optimizations/TestAddExchangesPlans.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1NDo0OFrOFfXCVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1NDo0OFrOFfXCVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyNzYwNQ==", "bodyText": "remove and use disableCbo in the only failing test", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368427605", "createdAt": "2020-01-20T08:54:48Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/optimizations/TestAddExchangesPlans.java", "diffHunk": "@@ -214,6 +224,7 @@ private Session spillEnabledWithJoinDistributionType(JoinDistributionType joinDi\n     {\n         return Session.builder(getQueryRunner().getDefaultSession())\n                 .setSystemProperty(JOIN_DISTRIBUTION_TYPE, joinDistributionType.toString())\n+                .setSystemProperty(JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name())", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NjgyOTY0OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/optimizations/TestWindow.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1NTo1M1rOFfXEIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwODo1NTo1M1rOFfXEIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQyODA2Nw==", "bodyText": "For this test, it seems to make sense to use JOIN_REORDERING_STRATEGY=NONE.\nThen the variable: disableCbo -> noJoinReordering.", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368428067", "createdAt": "2020-01-20T08:55:53Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/optimizations/TestWindow.java", "diffHunk": "@@ -117,8 +119,14 @@ public void testWindow()\n     @Test\n     public void testWindowAfterJoin()\n     {\n+        Session disableCbo = Session.builder(getQueryRunner().getDefaultSession())\n+                .setSystemProperty(JOIN_DISTRIBUTION_TYPE, PARTITIONED.name())\n+                .setSystemProperty(JOIN_REORDERING_STRATEGY, ELIMINATE_CROSS_JOINS.name())", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3Njk4MDYwOnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo0NDo0NVrOFfYd9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo1ODozOFrOFfY6Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1MTA2MQ==", "bodyText": "I don't think:\nJOIN_DISTRIBUTION_TYPE, JoinDistributionType.BROADCAST.name())\n\nis needed. Could you try remove it?", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368451061", "createdAt": "2020-01-20T09:44:45Z", "author": {"login": "sopel39"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "diffHunk": "@@ -44,10 +48,13 @@\n {\n     private final Metadata metadata = createTestMetadataManager();\n \n-    TestDynamicFilter()\n+    public TestDynamicFilter()\n     {\n         // in order to test testUncorrelatedSubqueries with Dynamic Filtering, enable it\n-        super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n+        super(ImmutableMap.of(\n+                ENABLE_DYNAMIC_FILTERING, \"true\",\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),\n+                JOIN_DISTRIBUTION_TYPE, JoinDistributionType.BROADCAST.name()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1ODI1MQ==", "bodyText": "Sure. Removed.I've removed it along with JOIN_REORDERING_STRATEGY moving it to a Session used in test-cases when needed.", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368458251", "createdAt": "2020-01-20T09:58:38Z", "author": {"login": "wendigo"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestDynamicFilter.java", "diffHunk": "@@ -44,10 +48,13 @@\n {\n     private final Metadata metadata = createTestMetadataManager();\n \n-    TestDynamicFilter()\n+    public TestDynamicFilter()\n     {\n         // in order to test testUncorrelatedSubqueries with Dynamic Filtering, enable it\n-        super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n+        super(ImmutableMap.of(\n+                ENABLE_DYNAMIC_FILTERING, \"true\",\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),\n+                JOIN_DISTRIBUTION_TYPE, JoinDistributionType.BROADCAST.name()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1MTA2MQ=="}, "originalCommit": null, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NzA0NDA4OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLocalDynamicFilter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMDowMzozOVrOFfZD7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMDowMzozOVrOFfZD7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ2MDc4Mg==", "bodyText": "Moved it to a noJoinReordering() method (used in test-cases when needed)", "url": "https://github.com/trinodb/trino/pull/2528#discussion_r368460782", "createdAt": "2020-01-20T10:03:39Z", "author": {"login": "wendigo"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestLocalDynamicFilter.java", "diffHunk": "@@ -48,13 +49,12 @@\n public class TestLocalDynamicFilter\n         extends BasePlanTest\n {\n-    private static final Metadata METADATA = createTestMetadataManager();\n-\n     public TestLocalDynamicFilter()\n     {\n         super(ImmutableMap.of(\n                 FORCE_SINGLE_NODE_OUTPUT, \"false\",\n-                JOIN_DISTRIBUTION_TYPE, \"BROADCAST\",\n+                JOIN_REORDERING_STRATEGY, JoinReorderingStrategy.NONE.name(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1031, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}