{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1ODMwMjQ1", "number": 4552, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODowMDozNlrOERjq0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMToyNVrOER3GUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODQ1NjUxOnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/MockAmazonS3.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODowMDozNlrOG2Vnmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODowNDo0MVrOG2VwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTYzMDQ5MA==", "bodyText": "Probably copy/pasta, but can you use a different variable name?", "url": "https://github.com/trinodb/trino/pull/4552#discussion_r459630490", "createdAt": "2020-07-23T18:00:36Z", "author": {"login": "aalbu"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/MockAmazonS3.java", "diffHunk": "@@ -125,6 +131,14 @@ public ListObjectsV2Result listObjectsV2(ListObjectsV2Request listObjectsV2Reque\n             listingV2.getObjectSummaries().add(standardOne);\n             listingV2.setTruncated(true);\n             listingV2.setNextContinuationToken(continuationToken);\n+\n+            if (hasHadoopEmptyFolderObjects) {\n+                S3ObjectSummary glacier = new S3ObjectSummary();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTYzMjY5MA==", "bodyText": "Thanks for catching that", "url": "https://github.com/trinodb/trino/pull/4552#discussion_r459632690", "createdAt": "2020-07-23T18:04:41Z", "author": {"login": "alexjo2144"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/MockAmazonS3.java", "diffHunk": "@@ -125,6 +131,14 @@ public ListObjectsV2Result listObjectsV2(ListObjectsV2Request listObjectsV2Reque\n             listingV2.getObjectSummaries().add(standardOne);\n             listingV2.setTruncated(true);\n             listingV2.setNextContinuationToken(continuationToken);\n+\n+            if (hasHadoopEmptyFolderObjects) {\n+                S3ObjectSummary glacier = new S3ObjectSummary();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTYzMDQ5MA=="}, "originalCommit": null, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MTYzNTgxOnYy", "diffSide": "RIGHT", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/s3/PrestoS3FileSystem.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMDoxOVrOG2zKEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMDoxOVrOG2zKEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDExNDQ0OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static boolean isHadoopEmptyFolderObject(S3ObjectSummary object)\n          \n          \n            \n                private static boolean isHadoopFolderMarker(S3ObjectSummary object)", "url": "https://github.com/trinodb/trino/pull/4552#discussion_r460114448", "createdAt": "2020-07-24T15:10:19Z", "author": {"login": "findepi"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/s3/PrestoS3FileSystem.java", "diffHunk": "@@ -591,6 +592,11 @@ private static boolean isGlacierObject(S3ObjectSummary object)\n         return Glacier.toString().equals(object.getStorageClass());\n     }\n \n+    private static boolean isHadoopEmptyFolderObject(S3ObjectSummary object)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MTYzNzQ0OnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/MockAmazonS3.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMDo0NFrOG2zLBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMDo0NFrOG2zLBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDExNDY5Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private boolean hasHadoopEmptyFolderObjects;\n          \n          \n            \n                private boolean hasHadoopFolderMarkers;", "url": "https://github.com/trinodb/trino/pull/4552#discussion_r460114692", "createdAt": "2020-07-24T15:10:44Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/MockAmazonS3.java", "diffHunk": "@@ -39,6 +39,7 @@\n     private GetObjectMetadataRequest getObjectMetadataRequest;\n     private CannedAccessControlList acl;\n     private boolean hasGlacierObjects;\n+    private boolean hasHadoopEmptyFolderObjects;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MTYzOTg3OnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/TestPrestoS3FileSystem.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMToyNVrOG2zMlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNToxMToyNVrOG2zMlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDExNTA5NA==", "bodyText": "rename appropriately", "url": "https://github.com/trinodb/trino/pull/4552#discussion_r460115094", "createdAt": "2020-07-24T15:11:25Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/TestPrestoS3FileSystem.java", "diffHunk": "@@ -570,6 +570,22 @@ private static void assertSkipGlacierObjects(boolean skipGlacierObjects)\n         }\n     }\n \n+    @Test\n+    public void testSkipHadoopEmptyFolderObjectsEnabled()", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3746, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}