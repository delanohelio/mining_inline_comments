{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NjMzMTcw", "number": 5365, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTo1MjowOFrOEpLlGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOEskx9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjE2Nzk1OnYy", "diffSide": "RIGHT", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTo1MjowOFrOHas-UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDo0MTozMFrOHauiQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc2MTg3Mg==", "bodyText": "this requires benchmarking with unpartitioned data set as discrete values set is extracted in readers (e.g in TupleDomainOrcPredicate). The more values in the set, the more CPU cost per stripe (hence the original simplify)", "url": "https://github.com/trinodb/trino/pull/5365#discussion_r497761872", "createdAt": "2020-09-30T19:52:08Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "diffHunk": "@@ -101,7 +104,7 @@ public ConnectorPageSource createPageSource(ConnectorTransactionHandle transacti\n \n         TupleDomain<HiveColumnHandle> simplifiedDynamicFilter = dynamicFilter\n                 .getCurrentPredicate()\n-                .transform(HiveColumnHandle.class::cast).simplify();\n+                .transform(HiveColumnHandle.class::cast).simplify(domainCompactionThreshold);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc2OTE1Nw==", "bodyText": "I'm willing to benchmark it. Since this is the same limit that is used for static predicates and the same overheads apply in that case too, I assumed that at some point it was established that this threshold is reasonable.", "url": "https://github.com/trinodb/trino/pull/5365#discussion_r497769157", "createdAt": "2020-09-30T20:06:05Z", "author": {"login": "raunaqmorarka"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "diffHunk": "@@ -101,7 +104,7 @@ public ConnectorPageSource createPageSource(ConnectorTransactionHandle transacti\n \n         TupleDomain<HiveColumnHandle> simplifiedDynamicFilter = dynamicFilter\n                 .getCurrentPredicate()\n-                .transform(HiveColumnHandle.class::cast).simplify();\n+                .transform(HiveColumnHandle.class::cast).simplify(domainCompactionThreshold);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc2MTg3Mg=="}, "originalCommit": null, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc4NzQ1OQ==", "bodyText": "I'm willing to benchmark it.\n\nSounds good to me.\n\nSince this is the same limit that is used for static predicates and the same overheads apply in that case too\n\nYes. It's reasonable assumption.", "url": "https://github.com/trinodb/trino/pull/5365#discussion_r497787459", "createdAt": "2020-09-30T20:41:30Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "diffHunk": "@@ -101,7 +104,7 @@ public ConnectorPageSource createPageSource(ConnectorTransactionHandle transacti\n \n         TupleDomain<HiveColumnHandle> simplifiedDynamicFilter = dynamicFilter\n                 .getCurrentPredicate()\n-                .transform(HiveColumnHandle.class::cast).simplify();\n+                .transform(HiveColumnHandle.class::cast).simplify(domainCompactionThreshold);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc2MTg3Mg=="}, "originalCommit": null, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTc1NDEyOnYy", "diffSide": "RIGHT", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOHf5B4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOHf5B4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIwMjI3Mw==", "bodyText": "this should most likely be simplified after intersection (please re-run benchmarks)", "url": "https://github.com/trinodb/trino/pull/5365#discussion_r503202273", "createdAt": "2020-10-12T10:36:08Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "diffHunk": "@@ -101,7 +104,7 @@ public ConnectorPageSource createPageSource(ConnectorTransactionHandle transacti\n \n         TupleDomain<HiveColumnHandle> simplifiedDynamicFilter = dynamicFilter\n                 .getCurrentPredicate()\n-                .transform(HiveColumnHandle.class::cast).simplify();\n+                .transform(HiveColumnHandle.class::cast).simplify(domainCompactionThreshold);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8512c5fb27c5fb05fe6294fdb6ba53041e8be48f"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4755, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}