{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNDA1Mzk3", "number": 6006, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNjozMjo0N1rOE65SEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzowNDoxMlrOE7SCoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMTkxMzc2OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNjozMjo0N1rOH2Okdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxOTozNDozM1rOH3w2Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyMzg2Mg==", "bodyText": "I think some connectors return null when we invoke getInfo", "url": "https://github.com/trinodb/trino/pull/6006#discussion_r526623862", "createdAt": "2020-11-19T06:32:47Z", "author": {"login": "Praveen2112"}, "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "diffHunk": "@@ -62,7 +63,10 @@ public Lifespan getLifespan()\n \n     public Object getInfo()\n     {\n-        return connectorSplit.getInfo();\n+        return ImmutableMap.builder()\n+                .put(\"catalogName\", catalogName)\n+                .put(\"connectorSplit\", connectorSplit.getInfo())", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY0ODUzNg==", "bodyText": "yeah, that failed some tests. wrapping it in an optional now.", "url": "https://github.com/trinodb/trino/pull/6006#discussion_r526648536", "createdAt": "2020-11-19T07:36:24Z", "author": {"login": "phd3"}, "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "diffHunk": "@@ -62,7 +63,10 @@ public Lifespan getLifespan()\n \n     public Object getInfo()\n     {\n-        return connectorSplit.getInfo();\n+        return ImmutableMap.builder()\n+                .put(\"catalogName\", catalogName)\n+                .put(\"connectorSplit\", connectorSplit.getInfo())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyMzg2Mg=="}, "originalCommit": null, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIzNTE5Ng==", "bodyText": "will the optional be rendered the right way  in query JSON?", "url": "https://github.com/trinodb/trino/pull/6006#discussion_r527235196", "createdAt": "2020-11-19T22:08:56Z", "author": {"login": "findepi"}, "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "diffHunk": "@@ -62,7 +63,10 @@ public Lifespan getLifespan()\n \n     public Object getInfo()\n     {\n-        return connectorSplit.getInfo();\n+        return ImmutableMap.builder()\n+                .put(\"catalogName\", catalogName)\n+                .put(\"connectorSplit\", connectorSplit.getInfo())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyMzg2Mg=="}, "originalCommit": null, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIzNDA0Mw==", "bodyText": "this has been removed now based on Martin's suggestion.", "url": "https://github.com/trinodb/trino/pull/6006#discussion_r528234043", "createdAt": "2020-11-21T19:34:33Z", "author": {"login": "phd3"}, "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "diffHunk": "@@ -62,7 +63,10 @@ public Lifespan getLifespan()\n \n     public Object getInfo()\n     {\n-        return connectorSplit.getInfo();\n+        return ImmutableMap.builder()\n+                .put(\"catalogName\", catalogName)\n+                .put(\"connectorSplit\", connectorSplit.getInfo())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyMzg2Mg=="}, "originalCommit": null, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNTk3MDI0OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQyMzowNDoxMlrOH21lqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxOTozMjozMVrOH3w1lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MzE0Ng==", "bodyText": "This should be a field in SplitCompletedEvent, instead.", "url": "https://github.com/trinodb/trino/pull/6006#discussion_r527263146", "createdAt": "2020-11-19T23:04:12Z", "author": {"login": "martint"}, "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "diffHunk": "@@ -62,7 +64,11 @@ public Lifespan getLifespan()\n \n     public Object getInfo()\n     {\n-        return connectorSplit.getInfo();\n+        return ImmutableMap.builder()\n+                .put(\"catalogName\", catalogName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIzMzg3OA==", "bodyText": "Modified. I've added it to SplitOperatorInfo as well, so that it's accessible during SplitCompletedEvent creation. Getting catalog name from a \"stats\" object is a bit indirect, but I felt that this is the simpler, even though there's redundancy. otherwise, we could pass the optional catalog from SqlTaskExecution#enqueueDriverSplitRunner. wdyt?", "url": "https://github.com/trinodb/trino/pull/6006#discussion_r528233878", "createdAt": "2020-11-21T19:32:31Z", "author": {"login": "phd3"}, "path": "presto-main/src/main/java/io/prestosql/metadata/Split.java", "diffHunk": "@@ -62,7 +64,11 @@ public Lifespan getLifespan()\n \n     public Object getInfo()\n     {\n-        return connectorSplit.getInfo();\n+        return ImmutableMap.builder()\n+                .put(\"catalogName\", catalogName)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI2MzE0Ng=="}, "originalCommit": null, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4818, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}