{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1ODQzNDAw", "number": 6061, "title": "Add product test for nested Hive views", "bodyText": "", "createdAt": "2020-11-23T16:18:03Z", "url": "https://github.com/trinodb/trino/pull/6061", "merged": true, "mergeCommit": {"oid": "ba27abbe75837a5645fb6bbb0a87e21ad43c3b9c"}, "closed": true, "closedAt": "2020-11-24T22:06:39Z", "author": {"login": "alexjo2144"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfa904gBqjQwMjk0NTgzNTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfuD7ugBqjQwMzQyNTkxMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2OTQxODc3", "url": "https://github.com/trinodb/trino/pull/6061#pullrequestreview-536941877", "createdAt": "2020-11-24T00:09:43Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDowOTo0M1rOH4kUcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDo0MToyMVrOH4k-4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA3NzM2Mw==", "bodyText": "nit: Specify HIVE_VIEWS group.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Test\n          \n          \n            \n                @Test(groups = HIVE_VIEWS)", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529077363", "createdAt": "2020-11-24T00:09:43Z", "author": {"login": "ebyhr"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA4ODIyNQ==", "bodyText": "Prepend n_ to each column name. This is CI failure cause.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");\n          \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT n_nationkey AS k, n_name AS n, n_regionkey AS r, n_comment AS c FROM nation\");", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529088225", "createdAt": "2020-11-24T00:41:21Z", "author": {"login": "ebyhr"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test\n+    public void testNestedHiveViews()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_base_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_middle_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_top_view\");\n+\n+        onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MzU3NTIx", "url": "https://github.com/trinodb/trino/pull/6061#pullrequestreview-537357521", "createdAt": "2020-11-24T10:36:10Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxMFrOH45v7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxOFrOH45wbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQyODQ2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"SELECT * FROM nested_top_view\",\n          \n          \n            \n                            \"SELECT n_renamed FROM nested_top_view\",", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529428461", "createdAt": "2020-11-24T10:36:10Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test\n+    public void testNestedHiveViews()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_base_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_middle_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_top_view\");\n+\n+        onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");\n+        onHive().executeQuery(\"CREATE VIEW nested_middle_view AS SELECT n, c FROM nested_base_view WHERE k = 14\");\n+        onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n FROM nested_middle_view\");\n+\n+        assertViewQuery(\n+                \"SELECT * FROM nested_top_view\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQyODU5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n FROM nested_middle_view\");\n          \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n AS n_renamed FROM nested_middle_view\");", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529428590", "createdAt": "2020-11-24T10:36:18Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test\n+    public void testNestedHiveViews()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_base_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_middle_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_top_view\");\n+\n+        onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");\n+        onHive().executeQuery(\"CREATE VIEW nested_middle_view AS SELECT n, c FROM nested_base_view WHERE k = 14\");\n+        onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n FROM nested_middle_view\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e0b1c12b23883309147d582848cdded47083881", "author": {"user": {"login": "alexjo2144", "name": "Alexander Jo"}}, "url": "https://github.com/trinodb/trino/commit/3e0b1c12b23883309147d582848cdded47083881", "committedDate": "2020-11-24T18:28:37Z", "message": "Add product test for nested Hive views"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "3e0b1c12b23883309147d582848cdded47083881", "author": {"user": {"login": "alexjo2144", "name": "Alexander Jo"}}, "url": "https://github.com/trinodb/trino/commit/3e0b1c12b23883309147d582848cdded47083881", "committedDate": "2020-11-24T18:28:37Z", "message": "Add product test for nested Hive views"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2262, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}