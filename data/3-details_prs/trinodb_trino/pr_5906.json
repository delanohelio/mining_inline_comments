{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NjQ5NDA0", "number": 5906, "title": "Add Cassandra unit test class against latest 3.11.9", "bodyText": "Relates to #5804\nThis commit refactors the distributed query tests into a base with two implementations, the existing unit tests against the 2.2.x version of Cassandra and a new test class against the latest 3.11.9 version.", "createdAt": "2020-11-10T17:29:25Z", "url": "https://github.com/trinodb/trino/pull/5906", "merged": true, "mergeCommit": {"oid": "75ba0d902026b0d1360519a446efa70d8378e076"}, "closed": true, "closedAt": "2020-11-30T05:39:31Z", "author": {"login": "adamjshook"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcJB-WgBqjM5OTQwMzA1OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhekBZAFqTU0MDYwODUyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTEzMTQ3", "url": "https://github.com/trinodb/trino/pull/5906#pullrequestreview-539913147", "createdAt": "2020-11-27T11:36:51Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTozNjo1MVrOH67Mww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTozOTo0NVrOH67R4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU0OTM3OQ==", "bodyText": "Could you add commit body to the first commit as MongoDB?\nThis removes test coverage but it is restored in the\nnext commit. We want to retain the history on the\nfile changes.", "url": "https://github.com/trinodb/trino/pull/5906#discussion_r531549379", "createdAt": "2020-11-27T11:36:51Z", "author": {"login": "ebyhr"}, "path": "presto-cassandra/src/test/java/io/prestosql/plugin/cassandra/BaseCassandraDistributedQueries.java", "diffHunk": "@@ -13,42 +13,21 @@\n  */\n package io.prestosql.plugin.cassandra;\n \n-import com.google.common.collect.ImmutableMap;\n import io.prestosql.testing.AbstractTestDistributedQueries;\n import io.prestosql.testing.MaterializedResult;\n-import io.prestosql.testing.QueryRunner;\n import io.prestosql.testing.sql.TestTable;\n-import io.prestosql.tpch.TpchTable;\n import org.testng.SkipException;\n-import org.testng.annotations.AfterClass;\n \n import java.util.Optional;\n \n-import static io.prestosql.plugin.cassandra.CassandraQueryRunner.createCassandraQueryRunner;\n import static io.prestosql.spi.type.VarcharType.VARCHAR;\n import static io.prestosql.testing.MaterializedResult.resultBuilder;\n import static io.prestosql.testing.assertions.Assert.assertEquals;\n import static org.assertj.core.api.Assertions.assertThatThrownBy;\n \n-public class TestCassandraDistributedQueries\n+public abstract class BaseCassandraDistributedQueries", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU1MDY5MA==", "bodyText": "Extract cassandra: and pass only version 2.2. Then, rename subsequent dockerImageName to cassandraVersion.", "url": "https://github.com/trinodb/trino/pull/5906#discussion_r531550690", "createdAt": "2020-11-27T11:39:45Z", "author": {"login": "ebyhr"}, "path": "presto-cassandra/src/test/java/io/prestosql/plugin/cassandra/CassandraServer.java", "diffHunk": "@@ -59,10 +59,16 @@\n \n     public CassandraServer()\n             throws Exception\n+    {\n+        this(\"cassandra:2.2\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab70362994dd733b863c77c8e0238f3200a820f0", "author": {"user": {"login": "adamjshook", "name": "Adam J. Shook"}}, "url": "https://github.com/trinodb/trino/commit/ab70362994dd733b863c77c8e0238f3200a820f0", "committedDate": "2020-11-29T15:10:37Z", "message": "Extract BaseCassandraDistributedQueries\n\nThis removes test coverage but it is restored in the\nnext commit. We want to retain the history on the\nfile changes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80aeef246bf72dc5acd56217237f980d98eb3cee", "author": {"user": {"login": "adamjshook", "name": "Adam J. Shook"}}, "url": "https://github.com/trinodb/trino/commit/80aeef246bf72dc5acd56217237f980d98eb3cee", "committedDate": "2020-11-29T15:12:26Z", "message": "Add Cassandra unit test class against latest 3.11.9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09741f1e286abbe8068a9ac8f4a693fe97ddc871", "author": {"user": {"login": "adamjshook", "name": "Adam J. Shook"}}, "url": "https://github.com/trinodb/trino/commit/09741f1e286abbe8068a9ac8f4a693fe97ddc871", "committedDate": "2020-11-29T15:12:27Z", "message": "Update Cassandra docs with tested versions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "09741f1e286abbe8068a9ac8f4a693fe97ddc871", "author": {"user": {"login": "adamjshook", "name": "Adam J. Shook"}}, "url": "https://github.com/trinodb/trino/commit/09741f1e286abbe8068a9ac8f4a693fe97ddc871", "committedDate": "2020-11-29T15:12:27Z", "message": "Update Cassandra docs with tested versions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNjA4NTI3", "url": "https://github.com/trinodb/trino/pull/5906#pullrequestreview-540608527", "createdAt": "2020-11-30T05:33:14Z", "commit": {"oid": "09741f1e286abbe8068a9ac8f4a693fe97ddc871"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2486, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}