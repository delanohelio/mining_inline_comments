{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDA3MDY1", "number": 2900, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNDozOFrODlw64g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNzoyM1rODlw9tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTI1NDEwOnYy", "diffSide": "RIGHT", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/file/FileHiveMetastore.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNDozOFrOFy1lIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNDo1NTozNVrOFy7kHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MDk3OQ==", "bodyText": "Hive metastore allows external location pointing at another managed\ntable's location, so allow the same in file metastore.\n\nBut there is no file metastore in Hive and so there is no system metadata directory there.\nIs it only about creating external tables with \"same\" location as internal table would have? The error message is a bit misleading to me.", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388850979", "createdAt": "2020-03-06T11:24:38Z", "author": {"login": "kokosing"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/file/FileHiveMetastore.java", "diffHunk": "@@ -266,9 +266,6 @@ else if (table.getTableType().equals(EXTERNAL_TABLE.name())) {\n                 if (!externalFileSystem.isDirectory(externalLocation)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e320687ae821668a5ee869a99993e3d6d0d833e8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk0OTAyMA==", "bodyText": "Is it only about creating external tables with \"same\" location as internal table would have?\n\nYes\n\nThe error message is a bit misleading to me.\n\nfortunately it's going away", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388949020", "createdAt": "2020-03-06T14:55:35Z", "author": {"login": "findepi"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/file/FileHiveMetastore.java", "diffHunk": "@@ -266,9 +266,6 @@ else if (table.getTableType().equals(EXTERNAL_TABLE.name())) {\n                 if (!externalFileSystem.isDirectory(externalLocation)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MDk3OQ=="}, "originalCommit": {"oid": "e320687ae821668a5ee869a99993e3d6d0d833e8"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTI1ODA1OnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNjoxMVrOFy1new==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNDo1Njo0MVrOFy7nDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MTU3OQ==", "bodyText": "testNestedColumnPrunning?", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388851579", "createdAt": "2020-03-06T11:26:11Z", "author": {"login": "kokosing"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -5607,6 +5608,84 @@ private void testSelectWithNoColumns(Session session, HiveStorageFormat storageF\n         assertUpdate(\"DROP TABLE \" + tableName);\n     }\n \n+    @Test\n+    public void testColumnPruning()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "329de8f5210b9c99c55a1b436589c6445ced4001"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk0OTc3Mg==", "bodyText": "it's not only about nested columns (rows/structs). eg top-level a column is pruned too", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388949772", "createdAt": "2020-03-06T14:56:41Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -5607,6 +5608,84 @@ private void testSelectWithNoColumns(Session session, HiveStorageFormat storageF\n         assertUpdate(\"DROP TABLE \" + tableName);\n     }\n \n+    @Test\n+    public void testColumnPruning()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MTU3OQ=="}, "originalCommit": {"oid": "329de8f5210b9c99c55a1b436589c6445ced4001"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTI2MTMyOnYy", "diffSide": "RIGHT", "path": "presto-parquet/src/main/java/io/prestosql/parquet/GroupField.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNzoyM1rOFy1pYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNTozNTozM1rOFy9CTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MjA2Nw==", "bodyText": "\"Type %s has %s parameters, but %s children has: %s\",?", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388852067", "createdAt": "2020-03-06T11:27:23Z", "author": {"login": "kokosing"}, "path": "presto-parquet/src/main/java/io/prestosql/parquet/GroupField.java", "diffHunk": "@@ -29,6 +30,13 @@\n     public GroupField(Type type, int repetitionLevel, int definitionLevel, boolean required, List<Optional<Field>> children)\n     {\n         super(type, repetitionLevel, definitionLevel, required);\n+        checkArgument(\n+                type.getTypeParameters().size() == children.size(),\n+                \"Type %s has %s parameters, but %s children: %s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3497b6027bc69260aa0e723dce822f9d972154c"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk1MDUxNg==", "bodyText": "I don't think so. Please reconsider.", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388950516", "createdAt": "2020-03-06T14:57:55Z", "author": {"login": "findepi"}, "path": "presto-parquet/src/main/java/io/prestosql/parquet/GroupField.java", "diffHunk": "@@ -29,6 +30,13 @@\n     public GroupField(Type type, int repetitionLevel, int definitionLevel, boolean required, List<Optional<Field>> children)\n     {\n         super(type, repetitionLevel, definitionLevel, required);\n+        checkArgument(\n+                type.getTypeParameters().size() == children.size(),\n+                \"Type %s has %s parameters, but %s children: %s\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MjA2Nw=="}, "originalCommit": {"oid": "d3497b6027bc69260aa0e723dce822f9d972154c"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk3MzEzMw==", "bodyText": "discussed offline", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388973133", "createdAt": "2020-03-06T15:35:33Z", "author": {"login": "findepi"}, "path": "presto-parquet/src/main/java/io/prestosql/parquet/GroupField.java", "diffHunk": "@@ -29,6 +30,13 @@\n     public GroupField(Type type, int repetitionLevel, int definitionLevel, boolean required, List<Optional<Field>> children)\n     {\n         super(type, repetitionLevel, definitionLevel, required);\n+        checkArgument(\n+                type.getTypeParameters().size() == children.size(),\n+                \"Type %s has %s parameters, but %s children: %s\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MjA2Nw=="}, "originalCommit": {"oid": "d3497b6027bc69260aa0e723dce822f9d972154c"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 804, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}