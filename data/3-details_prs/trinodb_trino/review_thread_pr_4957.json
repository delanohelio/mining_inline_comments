{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNTMxMTI2", "number": 4957, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNTowOFrOEbnpBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OToyNVrOEb_yHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mzk2NDg0OnYy", "diffSide": "RIGHT", "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/InMemoryPrestoResultSet.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNTowOFrOHFp4LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNTowOFrOHFp4LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5MTA1Mg==", "bodyText": "let's make it optional", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r475691052", "createdAt": "2020-08-24T15:15:08Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/InMemoryPrestoResultSet.java", "diffHunk": "@@ -26,11 +27,18 @@\n {\n     public InMemoryPrestoResultSet(ZoneId sessionTimeZone, List<Column> columns, List<List<Object>> results)\n     {\n-        super(sessionTimeZone, columns, requireNonNull(results, \"results is null\").iterator());\n+        super(sessionTimeZone, columns, requireNonNull(results, \"results is null\").iterator(), null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mzk2OTQ2OnYy", "diffSide": "RIGHT", "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNjoxNlrOHFp7Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNjoxNlrOHFp7Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5MTgyMg==", "bodyText": "also, i'd suggest to make this the first arg/field", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r475691822", "createdAt": "2020-08-24T15:16:16Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -127,8 +127,9 @@\n     private final AtomicReference<List<Object>> row = new AtomicReference<>();\n     private final AtomicBoolean wasNull = new AtomicBoolean();\n     protected final AtomicBoolean closed = new AtomicBoolean();\n+    private final Statement statement;\n \n-    AbstractPrestoResultSet(ZoneId resultTimeZone, List<Column> columns, Iterator<List<Object>> results)\n+    AbstractPrestoResultSet(ZoneId resultTimeZone, List<Column> columns, Iterator<List<Object>> results, Statement statement)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3NzkxODcwOnYy", "diffSide": "RIGHT", "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OTowMVrOHGQ2HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OTowMVrOHGQ2HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMyOTUwMQ==", "bodyText": "The method is implemented, but the context doesn't allow us to provide a Statement object\n(eg some DatabaseMetaData method returning a ResultSet).\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new NotImplementedException(\"ResultSet\", \"getStatement\");\n          \n          \n            \n                        throw new SQLException(\"Statement not available\");", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r476329501", "createdAt": "2020-08-25T09:59:01Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -1101,7 +1104,12 @@ public void moveToCurrentRow()\n     public Statement getStatement()\n             throws SQLException\n     {\n-        throw new NotImplementedException(\"ResultSet\", \"getStatement\");\n+        if (statement.isPresent()) {\n+            return statement.get();\n+        }\n+        else {\n+            throw new NotImplementedException(\"ResultSet\", \"getStatement\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3NzkyMDI4OnYy", "diffSide": "RIGHT", "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OToyNVrOHGQ3DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OToyNVrOHGQ3DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMyOTc0MQ==", "bodyText": "else is redundant, since the \"then\" block always returns", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r476329741", "createdAt": "2020-08-25T09:59:25Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -1101,7 +1104,12 @@ public void moveToCurrentRow()\n     public Statement getStatement()\n             throws SQLException\n     {\n-        throw new NotImplementedException(\"ResultSet\", \"getStatement\");\n+        if (statement.isPresent()) {\n+            return statement.get();\n+        }\n+        else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3295, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}