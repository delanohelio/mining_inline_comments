{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxODMxMDMw", "number": 3404, "title": "Add check to ensure server tar.gz and RPM do not go above 1GB", "bodyText": "Fixes #3401", "createdAt": "2020-04-10T09:18:27Z", "url": "https://github.com/trinodb/trino/pull/3404", "merged": true, "mergeCommit": {"oid": "f6dcef4992cb7a447e419a4990e00fcd504960c8"}, "closed": true, "closedAt": "2020-04-23T09:41:45Z", "author": {"login": "Praveen2112"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWNt4nAFqTM5MTM1NTgwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaU5shABqjMyNjMyOTA1NTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMzU1ODAy", "url": "https://github.com/trinodb/trino/pull/3404#pullrequestreview-391355802", "createdAt": "2020-04-10T09:31:18Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTAyMzU4", "url": "https://github.com/trinodb/trino/pull/3404#pullrequestreview-391502358", "createdAt": "2020-04-10T15:26:31Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNToyNjozMVrOGD9mBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNToyNjozMVrOGD9mBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgwODA2OA==", "bodyText": "<!-- see https://github.com/prestosql/presto/issues/3401 for explanation -->\n\n(same below)", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r406808068", "createdAt": "2020-04-10T15:26:31Z", "author": {"login": "findepi"}, "path": "presto-server-rpm/pom.xml", "diffHunk": "@@ -230,6 +230,30 @@\n                     </packages>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>enforce-file-size</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NTU0Nzk4", "url": "https://github.com/trinodb/trino/pull/3404#pullrequestreview-394554798", "createdAt": "2020-04-16T11:50:21Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMTo1MDoyMVrOGGhj3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMTo1MTo0OVrOGGhmvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ5NDQ5Mw==", "bodyText": "nit: whitespace after <exclude>", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r409494493", "createdAt": "2020-04-16T11:50:21Z", "author": {"login": "findepi"}, "path": "presto-server/pom.xml", "diffHunk": "@@ -24,4 +23,48 @@\n         <main-class>io.prestosql.server.PrestoServer</main-class>\n         <process-name>${project.artifactId}</process-name>\n     </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>default</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>\n+                                    <files>\n+                                        <file>${project.build.directory}/${project.artifactId}-${project.version}.tar.gz</file>\n+                                    </files>\n+                                </requireFilesSize>\n+                                <requireUpperBoundDeps>\n+                                    <excludes combine.children=\"append\">\n+                                        <exclude>org.apache.lucene:lucene-core</exclude>\n+                                        <exclude> org.codehaus.mojo:animal-sniffer-annotations</exclude>\n+                                        <exclude> net.sf.jopt-simple:jopt-simple</exclude>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ5NDcyNw==", "bodyText": "will the check fail if this file does not exist?", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r409494727", "createdAt": "2020-04-16T11:50:47Z", "author": {"login": "findepi"}, "path": "presto-server/pom.xml", "diffHunk": "@@ -24,4 +23,48 @@\n         <main-class>io.prestosql.server.PrestoServer</main-class>\n         <process-name>${project.artifactId}</process-name>\n     </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>default</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>\n+                                    <files>\n+                                        <file>${project.build.directory}/${project.artifactId}-${project.version}.tar.gz</file>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ5NTA0Nw==", "bodyText": "per above, please add the issue link in the comment\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                <maxsize>1073741824</maxsize>\n          \n          \n            \n                                                <!-- see https://github.com/prestosql/presto/issues/3401 for explanation -->\n          \n          \n            \n                                                <maxsize>1073741824</maxsize>", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r409495047", "createdAt": "2020-04-16T11:51:28Z", "author": {"login": "findepi"}, "path": "presto-server-rpm/pom.xml", "diffHunk": "@@ -230,6 +230,30 @@\n                     </packages>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>enforce-file-size</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgwODA2OA=="}, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ5NTIyOA==", "bodyText": "This section requires @electrum eyes.", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r409495228", "createdAt": "2020-04-16T11:51:49Z", "author": {"login": "findepi"}, "path": "presto-server/pom.xml", "diffHunk": "@@ -24,4 +23,48 @@\n         <main-class>io.prestosql.server.PrestoServer</main-class>\n         <process-name>${project.artifactId}</process-name>\n     </properties>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>default</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>\n+                                    <files>\n+                                        <file>${project.build.directory}/${project.artifactId}-${project.version}.tar.gz</file>\n+                                    </files>\n+                                </requireFilesSize>\n+                                <requireUpperBoundDeps>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 33}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDY1OTg1", "url": "https://github.com/trinodb/trino/pull/3404#pullrequestreview-396065985", "createdAt": "2020-04-19T21:52:15Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQyMTo1MjoxNlrOGH9bVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQyMTo1Njo1N1rOGH9e1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk5OTYzNg==", "bodyText": "Let's change this to\n<!-- Maven Central has a 1GB limit -->", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r410999636", "createdAt": "2020-04-19T21:52:16Z", "author": {"login": "electrum"}, "path": "presto-server/pom.xml", "diffHunk": "@@ -24,4 +24,41 @@\n         <main-class>io.prestosql.server.PrestoServer</main-class>\n         <process-name>${project.artifactId}</process-name>\n     </properties>\n+\n+    <profiles>\n+        <profile>\n+            <id>ci</id>\n+            <build>\n+                <pluginManagement>\n+                    <plugins>\n+                        <plugin>\n+                            <groupId>org.apache.maven.plugins</groupId>\n+                            <artifactId>maven-enforcer-plugin</artifactId>\n+                            <executions>\n+                                <execution>\n+                                    <id>enforce-file-size</id>\n+                                    <phase>verify</phase>\n+                                    <goals>\n+                                        <goal>enforce</goal>\n+                                    </goals>\n+                                    <configuration>\n+                                        <skip>false</skip>\n+                                        <rules>\n+                                            <requireFilesSize>\n+                                                <!-- see https://github.com/prestosql/presto/issues/3401 for explanation -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk5OTY0MA==", "bodyText": "We should always enabled this, not just for CI builds.", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r410999640", "createdAt": "2020-04-19T21:52:17Z", "author": {"login": "electrum"}, "path": "presto-server/pom.xml", "diffHunk": "@@ -24,4 +24,41 @@\n         <main-class>io.prestosql.server.PrestoServer</main-class>\n         <process-name>${project.artifactId}</process-name>\n     </properties>\n+\n+    <profiles>\n+        <profile>\n+            <id>ci</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAwMDA1Mw==", "bodyText": "Is this needed in case air.check.fail-enforcer is set? In that case, perhaps we should respect it?", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r411000053", "createdAt": "2020-04-19T21:54:23Z", "author": {"login": "electrum"}, "path": "presto-server/pom.xml", "diffHunk": "@@ -24,4 +24,41 @@\n         <main-class>io.prestosql.server.PrestoServer</main-class>\n         <process-name>${project.artifactId}</process-name>\n     </properties>\n+\n+    <profiles>\n+        <profile>\n+            <id>ci</id>\n+            <build>\n+                <pluginManagement>\n+                    <plugins>\n+                        <plugin>\n+                            <groupId>org.apache.maven.plugins</groupId>\n+                            <artifactId>maven-enforcer-plugin</artifactId>\n+                            <executions>\n+                                <execution>\n+                                    <id>enforce-file-size</id>\n+                                    <phase>verify</phase>\n+                                    <goals>\n+                                        <goal>enforce</goal>\n+                                    </goals>\n+                                    <configuration>\n+                                        <skip>false</skip>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAwMDA4NQ==", "bodyText": "<!-- Maven Central has a 1GB limit -->", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r411000085", "createdAt": "2020-04-19T21:54:40Z", "author": {"login": "electrum"}, "path": "presto-server-rpm/pom.xml", "diffHunk": "@@ -230,6 +230,31 @@\n                     </packages>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>enforce-file-size</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <!-- see https://github.com/prestosql/presto/issues/3401 for explanation -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAwMDM1Mg==", "bodyText": "I'd rather have the explanation inline. It's a simple explanation and doesn't require linking to an issue. Having things self contained when possible is best.", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r411000352", "createdAt": "2020-04-19T21:55:55Z", "author": {"login": "electrum"}, "path": "presto-server-rpm/pom.xml", "diffHunk": "@@ -230,6 +230,30 @@\n                     </packages>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>enforce-file-size</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgwODA2OA=="}, "originalCommit": null, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTAwMDUzNQ==", "bodyText": "We should probably use 1073741823 since it's not clear if 1GB is at or above the limit.", "url": "https://github.com/trinodb/trino/pull/3404#discussion_r411000535", "createdAt": "2020-04-19T21:56:57Z", "author": {"login": "electrum"}, "path": "presto-server-rpm/pom.xml", "diffHunk": "@@ -230,6 +230,30 @@\n                     </packages>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-enforcer-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>enforce-file-size</id>\n+                        <phase>verify</phase>\n+                        <goals>\n+                            <goal>enforce</goal>\n+                        </goals>\n+                        <configuration>\n+                            <rules>\n+                                <requireFilesSize>\n+                                    <maxsize>1073741824</maxsize>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgwODA2OA=="}, "originalCommit": null, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NTE4MjA4", "url": "https://github.com/trinodb/trino/pull/3404#pullrequestreview-398518208", "createdAt": "2020-04-22T19:38:59Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e765dc44fb2730aad6b974e9122c912320672be", "author": {"user": {"login": "Praveen2112", "name": "Praveen Krishna"}}, "url": "https://github.com/trinodb/trino/commit/6e765dc44fb2730aad6b974e9122c912320672be", "committedDate": "2020-04-23T04:09:04Z", "message": "Add check to ensure server tar.gz and RPM do not go above 1GB"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "6e765dc44fb2730aad6b974e9122c912320672be", "author": {"user": {"login": "Praveen2112", "name": "Praveen Krishna"}}, "url": "https://github.com/trinodb/trino/commit/6e765dc44fb2730aad6b974e9122c912320672be", "committedDate": "2020-04-23T04:09:04Z", "message": "Add check to ensure server tar.gz and RPM do not go above 1GB"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1881, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}