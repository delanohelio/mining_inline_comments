{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NDQ1NDY3", "number": 5585, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwOToyMzoxOVrOEvOUvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwOToyMzoxOVrOEvOUvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTUzMjE1OnYy", "diffSide": "LEFT", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/MetastoreUtil.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwOToyMzoxOVrOHkFbIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxMDowMTo1N1rOHmaNFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU5OTY0OA==", "bodyText": "would it be possible to add test for it to prevent future regressions? Take a look at io.prestosql.plugin.hive.metastore.cache.TestCachingHiveMetastore", "url": "https://github.com/trinodb/trino/pull/5585#discussion_r507599648", "createdAt": "2020-10-19T09:23:19Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/MetastoreUtil.java", "diffHunk": "@@ -437,7 +437,7 @@ else if (type instanceof TinyintType\n         for (HiveColumnHandle partitionKey : partitionKeys) {\n             String name = partitionKey.getName();\n             Domain domain = effectivePredicate.getDomains().get().get(partitionKey);\n-            if (domain != null && domain.isNullableSingleValue()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY1NTAzNQ==", "bodyText": "All tests in io.prestosql.plugin.hive.metastore.cache.TestCachingHiveMetastore call getPartitionNamesByFilter with   partitionKeysFilter=TupleDomain.all()\nI didn't find a way to create an expected TupleDomain of a desired partition filter.", "url": "https://github.com/trinodb/trino/pull/5585#discussion_r508655035", "createdAt": "2020-10-20T16:07:59Z", "author": {"login": "guyco33"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/MetastoreUtil.java", "diffHunk": "@@ -437,7 +437,7 @@ else if (type instanceof TinyintType\n         for (HiveColumnHandle partitionKey : partitionKeys) {\n             String name = partitionKey.getName();\n             Domain domain = effectivePredicate.getDomains().get().get(partitionKey);\n-            if (domain != null && domain.isNullableSingleValue()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU5OTY0OA=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTExODY2MQ==", "bodyText": "How would a desired partition filter look like?\n(would example here https://github.com/prestosql/presto/blob/8b7ce40f84fb0c38818709800fec537cb398ce52/presto-jmx/src/test/java/io/prestosql/plugin/jmx/TestJmxTableHandle.java#L41 be helpful?)", "url": "https://github.com/trinodb/trino/pull/5585#discussion_r509118661", "createdAt": "2020-10-21T09:12:56Z", "author": {"login": "findepi"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/MetastoreUtil.java", "diffHunk": "@@ -437,7 +437,7 @@ else if (type instanceof TinyintType\n         for (HiveColumnHandle partitionKey : partitionKeys) {\n             String name = partitionKey.getName();\n             Domain domain = effectivePredicate.getDomains().get().get(partitionKey);\n-            if (domain != null && domain.isNullableSingleValue()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU5OTY0OA=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDAzNzI3MQ==", "bodyText": "To test MetastoreUtil#computePartitionKeyFilter I need to construct also effectivePredicate", "url": "https://github.com/trinodb/trino/pull/5585#discussion_r510037271", "createdAt": "2020-10-22T10:01:57Z", "author": {"login": "guyco33"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/MetastoreUtil.java", "diffHunk": "@@ -437,7 +437,7 @@ else if (type instanceof TinyintType\n         for (HiveColumnHandle partitionKey : partitionKeys) {\n             String name = partitionKey.getName();\n             Domain domain = effectivePredicate.getDomains().get().get(partitionKey);\n-            if (domain != null && domain.isNullableSingleValue()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU5OTY0OA=="}, "originalCommit": null, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4455, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}