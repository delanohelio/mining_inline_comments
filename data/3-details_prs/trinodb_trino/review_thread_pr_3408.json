{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxODcyOTkx", "number": 3408, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNToxMTozN1rODwxh1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjoyNDo1NlrODwyypg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNDY5NzE3OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/io/prestosql/sql/planner/ExpressionInterpreter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNToxMTozN1rOGD9LpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNToxMTozN1rOGD9LpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgwMTMxNw==", "bodyText": "static import + comment\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                .collect(Collectors.toList());\n          \n          \n            \n                                .collect(toList()); // values are nullable", "url": "https://github.com/trinodb/trino/pull/3408#discussion_r406801317", "createdAt": "2020-04-10T15:11:37Z", "author": {"login": "findepi"}, "path": "presto-main/src/main/java/io/prestosql/sql/planner/ExpressionInterpreter.java", "diffHunk": "@@ -971,7 +971,7 @@ protected Object visitBindExpression(BindExpression node, Object context)\n         {\n             List<Object> values = node.getValues().stream()\n                     .map(value -> process(value, context))\n-                    .collect(toImmutableList());\n+                    .collect(Collectors.toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNDg2MjQ4OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjowOTo0NVrOGD-u9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjowOTo0NVrOGD-u9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgyNjc0MA==", "bodyText": "@martint\ni think the test should be in the planner,\nis it a good enough place?", "url": "https://github.com/trinodb/trino/pull/3408#discussion_r406826740", "createdAt": "2020-04-10T16:09:45Z", "author": {"login": "alexey-fin"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "diffHunk": "@@ -57,6 +57,17 @@\n         super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n     }\n \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNDkwNDA2OnYy", "diffSide": "RIGHT", "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjoyNDo1NlrOGD_IHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjoyNDo1NlrOGD_IHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgzMzE4Mw==", "bodyText": "This failure is unrelated to predicate pushdown. It's due to the null being inlined in the argument to the internal bind function that's used to model try when the InlineProjections optimizer rule executes. The query can be simplified to the following and still reproduce the issue:\nSELECT try(k)\nFROM (SELECT null) t(k)\n\nLet's add a test using the simplified query in io.prestosql.sql.query.TestExpressions instead. Also add a comment in the test linking to the github issue so that we can trace back the reason for the test in the future.", "url": "https://github.com/trinodb/trino/pull/3408#discussion_r406833183", "createdAt": "2020-04-10T16:24:56Z", "author": {"login": "martint"}, "path": "presto-main/src/test/java/io/prestosql/sql/planner/TestPredicatePushdown.java", "diffHunk": "@@ -57,6 +57,17 @@\n         super(ImmutableMap.of(ENABLE_DYNAMIC_FILTERING, \"true\"));\n     }\n \n+    @Test\n+    public void testPushdownBindToNull() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 405, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}