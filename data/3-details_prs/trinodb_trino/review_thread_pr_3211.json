{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMzY0Nzc1", "number": 3211, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjo1NTo1N1rODqXWAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzowNDoxN1rODqXiQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzQ5MjUwOnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/StandardDebugger.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjo1NTo1N1rOF6EHhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjo1NTo1N1rOF6EHhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyOTE5MA==", "bodyText": "copyright", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396429190", "createdAt": "2020-03-23T12:55:57Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/StandardDebugger.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package io.prestosql.tests.product.launcher.env;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzQ5NzExOnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjo1NzoxNVrOF6EKfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMDowNzozOFrOF6WObQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyOTk1MA==", "bodyText": "Why not to expose all debug ports at once?", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396429950", "createdAt": "2020-03-23T12:57:15Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -32,6 +32,9 @@\n     @Option(name = \"--without-presto\", title = \"without Presto\", description = \"do not start presto-master\")\n     public boolean withoutPrestoMaster;\n \n+    @Option(name = \"--debugger\", description = \"which services a debugger port should be opened for\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ0ODIyMw==", "bodyText": "maybe we want to add presto-worker as an option?\nor maybe we want to add more debug options besides Java debug port?", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396448223", "createdAt": "2020-03-23T13:26:40Z", "author": {"login": "findepi"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -32,6 +32,9 @@\n     @Option(name = \"--without-presto\", title = \"without Presto\", description = \"do not start presto-master\")\n     public boolean withoutPrestoMaster;\n \n+    @Option(name = \"--debugger\", description = \"which services a debugger port should be opened for\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyOTk1MA=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU3OTYyNQ==", "bodyText": "@kokosing this is pending your feedback", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396579625", "createdAt": "2020-03-23T16:22:15Z", "author": {"login": "findepi"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -32,6 +32,9 @@\n     @Option(name = \"--without-presto\", title = \"without Presto\", description = \"do not start presto-master\")\n     public boolean withoutPrestoMaster;\n \n+    @Option(name = \"--debugger\", description = \"which services a debugger port should be opened for\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyOTk1MA=="}, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcyNTg2OQ==", "bodyText": "Then maybe we could add it later? It is hard to predict the future. Other than that we don't need to care about backward compatibility of product tests.", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396725869", "createdAt": "2020-03-23T20:07:38Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -32,6 +32,9 @@\n     @Option(name = \"--without-presto\", title = \"without Presto\", description = \"do not start presto-master\")\n     public boolean withoutPrestoMaster;\n \n+    @Option(name = \"--debugger\", description = \"which services a debugger port should be opened for\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyOTk1MA=="}, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzUwODAxOnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzowMDowM1rOF6ERHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMDoxMDowMlrOF6WTFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzMTY0Ng==", "bodyText": "I don't understand the description", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396431646", "createdAt": "2020-03-23T13:00:03Z", "author": {"login": "wendigo"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -32,6 +32,9 @@\n     @Option(name = \"--without-presto\", title = \"without Presto\", description = \"do not start presto-master\")\n     public boolean withoutPrestoMaster;\n \n+    @Option(name = \"--debugger\", description = \"which services a debugger port should be opened for\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcyNzA2Mw==", "bodyText": "I agree, message is not much user friendly", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396727063", "createdAt": "2020-03-23T20:10:02Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/EnvironmentOptions.java", "diffHunk": "@@ -32,6 +32,9 @@\n     @Option(name = \"--without-presto\", title = \"without Presto\", description = \"do not start presto-master\")\n     public boolean withoutPrestoMaster;\n \n+    @Option(name = \"--debugger\", description = \"which services a debugger port should be opened for\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzMTY0Ng=="}, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzUwODgyOnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/StandardDebugger.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzowMDoxNlrOF6ERmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzoyNTo1NlrOF6FQHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzMTc3MQ==", "bodyText": "export HADOOP_OPTS=\"-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5006\"\ncat /usr/lib/hive/bin/hive | grep 'exit 5' -v > x; mv -f x /usr/lib/hive/bin/hive\nsupervisorctl stop hive-metastore\nchmod +x /usr/lib/hive/bin/hive\nsu hive -c 'hive --service metastore --hiveconf hive.root.logger=DEBUG,console --hiveconf hive.log.threshold=DEBUG' -s /bin/bash", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396431771", "createdAt": "2020-03-23T13:00:16Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/StandardDebugger.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package io.prestosql.tests.product.launcher.env;\n+\n+import com.google.common.base.Splitter;\n+\n+import java.util.Optional;\n+\n+import static java.util.Locale.ENGLISH;\n+\n+public enum StandardDebugger\n+{\n+    PRESTO,\n+    // METASTORE, // TODO", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ0Nzc3Mw==", "bodyText": "the correct way is using hive --debug=.... option.", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396447773", "createdAt": "2020-03-23T13:25:56Z", "author": {"login": "findepi"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/StandardDebugger.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package io.prestosql.tests.product.launcher.env;\n+\n+import com.google.common.base.Splitter;\n+\n+import java.util.Optional;\n+\n+import static java.util.Locale.ENGLISH;\n+\n+public enum StandardDebugger\n+{\n+    PRESTO,\n+    // METASTORE, // TODO", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzMTc3MQ=="}, "originalCommit": null, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzUxNjU2OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/common/Standard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzowMjoyM1rOF6EWmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzowMjoyM1rOF6EWmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzMzA1MA==", "bodyText": "unod indentation", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396433050", "createdAt": "2020-03-23T13:02:23Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/common/Standard.java", "diffHunk": "@@ -72,10 +94,14 @@ private DockerContainer createPrestoMaster()\n     {\n         DockerContainer container =\n                 createPrestoContainer(dockerFiles, pathResolver, serverPackage, \"prestodev/centos7-oj11:\" + imagesVersion)\n-                .withFileSystemBind(dockerFiles.getDockerFilesHostPath(\"common/standard/config.properties\"), CONTAINER_PRESTO_CONFIG_PROPERTIES, READ_ONLY);\n+                        .withFileSystemBind(dockerFiles.getDockerFilesHostPath(\"common/standard/config.properties\"), CONTAINER_PRESTO_CONFIG_PROPERTIES, READ_ONLY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzUyMzg0OnYy", "diffSide": "RIGHT", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/common/Standard.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzowNDoxN1rOF6EbGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMDowOTozMFrOF6WSOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzNDIwMQ==", "bodyText": "Doesn't launcher support to pass JVM properties? It would be much easier that this.", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396434201", "createdAt": "2020-03-23T13:04:17Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/common/Standard.java", "diffHunk": "@@ -99,10 +125,47 @@ public static DockerContainer createPrestoContainer(DockerFiles dockerFiles, Pat\n     {\n         return new DockerContainer(dockerImageName)\n                 .withFileSystemBind(dockerFiles.getDockerFilesHostPath(), \"/docker/presto-product-tests\", READ_ONLY)\n+                .withFileSystemBind(dockerFiles.getDockerFilesHostPath(\"conf/presto/etc/jvm.config\"), CONTAINER_PRESTO_JVM_CONFIG, READ_ONLY)\n                 .withFileSystemBind(pathResolver.resolvePlaceholders(serverPackage).toString(), \"/docker/presto-server.tar.gz\", READ_ONLY)\n                 .withCommand(\"/docker/presto-product-tests/run-presto.sh\")\n                 .withStartupCheckStrategy(new IsRunningStartupCheckStrategy())\n                 .waitingFor(Wait.forLogMessage(\".*======== SERVER STARTED ========.*\", 1))\n                 .withStartupTimeout(Duration.ofMinutes(5));\n     }\n+\n+    private void enableDebugger(CreateContainerCmd createContainerCmd)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ0ODQwNw==", "bodyText": "doesn't, i have already put a PR", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396448407", "createdAt": "2020-03-23T13:27:00Z", "author": {"login": "findepi"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/common/Standard.java", "diffHunk": "@@ -99,10 +125,47 @@ public static DockerContainer createPrestoContainer(DockerFiles dockerFiles, Pat\n     {\n         return new DockerContainer(dockerImageName)\n                 .withFileSystemBind(dockerFiles.getDockerFilesHostPath(), \"/docker/presto-product-tests\", READ_ONLY)\n+                .withFileSystemBind(dockerFiles.getDockerFilesHostPath(\"conf/presto/etc/jvm.config\"), CONTAINER_PRESTO_JVM_CONFIG, READ_ONLY)\n                 .withFileSystemBind(pathResolver.resolvePlaceholders(serverPackage).toString(), \"/docker/presto-server.tar.gz\", READ_ONLY)\n                 .withCommand(\"/docker/presto-product-tests/run-presto.sh\")\n                 .withStartupCheckStrategy(new IsRunningStartupCheckStrategy())\n                 .waitingFor(Wait.forLogMessage(\".*======== SERVER STARTED ========.*\", 1))\n                 .withStartupTimeout(Duration.ofMinutes(5));\n     }\n+\n+    private void enableDebugger(CreateContainerCmd createContainerCmd)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzNDIwMQ=="}, "originalCommit": null, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcyNjg0Mw==", "bodyText": "Please add a comment about this", "url": "https://github.com/trinodb/trino/pull/3211#discussion_r396726843", "createdAt": "2020-03-23T20:09:30Z", "author": {"login": "kokosing"}, "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/common/Standard.java", "diffHunk": "@@ -99,10 +125,47 @@ public static DockerContainer createPrestoContainer(DockerFiles dockerFiles, Pat\n     {\n         return new DockerContainer(dockerImageName)\n                 .withFileSystemBind(dockerFiles.getDockerFilesHostPath(), \"/docker/presto-product-tests\", READ_ONLY)\n+                .withFileSystemBind(dockerFiles.getDockerFilesHostPath(\"conf/presto/etc/jvm.config\"), CONTAINER_PRESTO_JVM_CONFIG, READ_ONLY)\n                 .withFileSystemBind(pathResolver.resolvePlaceholders(serverPackage).toString(), \"/docker/presto-server.tar.gz\", READ_ONLY)\n                 .withCommand(\"/docker/presto-product-tests/run-presto.sh\")\n                 .withStartupCheckStrategy(new IsRunningStartupCheckStrategy())\n                 .waitingFor(Wait.forLogMessage(\".*======== SERVER STARTED ========.*\", 1))\n                 .withStartupTimeout(Duration.ofMinutes(5));\n     }\n+\n+    private void enableDebugger(CreateContainerCmd createContainerCmd)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQzNDIwMQ=="}, "originalCommit": null, "originalPosition": 97}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 464, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}