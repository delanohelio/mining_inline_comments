{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMzgwNzY5", "number": 2966, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTo0NzoyMFrODj7ntg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTo0NzoyNFrODj7nyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MDAzNTc0OnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/ElasticsearchMetadata.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTo0NzoyMFrOFwAyQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMDoyNzoxNlrOFwB43A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4ODgzNA==", "bodyText": "This will make the chosen local sensitive to what the JVM is configured to use. Let's use Locale.ENGLISH like we do everywhere else.\nAlso, storing it in a field is unnecessary, so just inline it where it's used.", "url": "https://github.com/trinodb/trino/pull/2966#discussion_r385888834", "createdAt": "2020-02-28T19:47:20Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/ElasticsearchMetadata.java", "diffHunk": "@@ -69,6 +71,8 @@\n     private final ElasticsearchClient client;\n     private final String schemaName;\n \n+    private final Locale locale = Locale.getDefault();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTkwNjkwOA==", "bodyText": "Makes sense, I missed it, ENGLISH is used even in the same file :)", "url": "https://github.com/trinodb/trino/pull/2966#discussion_r385906908", "createdAt": "2020-02-28T20:27:16Z", "author": {"login": "msosnicki"}, "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/ElasticsearchMetadata.java", "diffHunk": "@@ -69,6 +71,8 @@\n     private final ElasticsearchClient client;\n     private final String schemaName;\n \n+    private final Locale locale = Locale.getDefault();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4ODgzNA=="}, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MDAzNTk1OnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/ElasticsearchMetadata.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTo0NzoyNFrOFwAyYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxOTo0NzoyNFrOFwAyYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg4ODg2NQ==", "bodyText": "Let's format it as follows:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Map<String, Long> counts = metadata.getSchema().getFields().stream()\n          \n          \n            \n                            .collect(Collectors.groupingBy(f -> f.getName().toLowerCase(locale), Collectors.counting()));\n          \n          \n            \n                    Map<String, Long> counts = metadata.getSchema()\n          \n          \n            \n                            .getFields().stream()\n          \n          \n            \n                            .collect(Collectors.groupingBy(field -> field.getName().toLowerCase(locale), Collectors.counting()));", "url": "https://github.com/trinodb/trino/pull/2966#discussion_r385888865", "createdAt": "2020-02-28T19:47:24Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/ElasticsearchMetadata.java", "diffHunk": "@@ -129,9 +133,12 @@ private ConnectorTableMetadata getTableMetadata(String schemaName, String tableN\n         result.add(BuiltinColumns.SOURCE.getMetadata());\n         result.add(BuiltinColumns.SCORE.getMetadata());\n \n+        Map<String, Long> counts = metadata.getSchema().getFields().stream()\n+                .collect(Collectors.groupingBy(f -> f.getName().toLowerCase(locale), Collectors.counting()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 837, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}