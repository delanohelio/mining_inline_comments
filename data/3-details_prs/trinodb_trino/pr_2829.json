{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MTQxMTE4", "number": 2829, "title": "Document query management properties", "bodyText": "Aimed to fix #2506", "createdAt": "2020-02-13T23:36:52Z", "url": "https://github.com/trinodb/trino/pull/2829", "merged": true, "mergeCommit": {"oid": "0ce467ee1f6756924c4f23cebf9e093f88df574e"}, "closed": true, "closedAt": "2020-02-21T17:53:04Z", "author": {"login": "mosabua"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcELc3kAFqTM1ODc4Mjc4Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGjJOhgBqjMwNjEyOTQ3NTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NzgyNzg2", "url": "https://github.com/trinodb/trino/pull/2829#pullrequestreview-358782786", "createdAt": "2020-02-14T08:41:12Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwODo0MToxM1rOFpvEQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwODo0MjoxNFrOFpvF2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMwNzA3Mg==", "bodyText": "The  \"about\" at the end sounds strange to me. Is it correct?", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r379307072", "createdAt": "2020-02-14T08:41:13Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,27 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-history``\n+^^^^^^^^^^^^^^^^^^^^^\n+    * **Type:** ``integer``\n+    * **Default value:** ``100``\n+\n+    The maximum amount of queries to keep in the query history to access\n+    statistics and other information about.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMwNzEyMA==", "bodyText": "amount -> number?", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r379307120", "createdAt": "2020-02-14T08:41:21Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,27 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-history``\n+^^^^^^^^^^^^^^^^^^^^^\n+    * **Type:** ``integer``\n+    * **Default value:** ``100``\n+\n+    The maximum amount of queries to keep in the query history to access", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMwNzMyMg==", "bodyText": "No need to document legacy property name IMO.", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r379307322", "createdAt": "2020-02-14T08:41:51Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,27 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-history``\n+^^^^^^^^^^^^^^^^^^^^^\n+    * **Type:** ``integer``\n+    * **Default value:** ``100``\n+\n+    The maximum amount of queries to keep in the query history to access\n+    statistics and other information about.\n+\n+``query.min-expire-age``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``15 min``\n+\n+    The minimal age of a query before it is expired. The supported, but legacy\n+    property name is ``query.max-age``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMwNzQ4MA==", "bodyText": "Also, would be good to document interaction between max-history and min-expiry-age -- which \"wins\"", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r379307480", "createdAt": "2020-02-14T08:42:14Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,27 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-history``\n+^^^^^^^^^^^^^^^^^^^^^\n+    * **Type:** ``integer``\n+    * **Default value:** ``100``\n+\n+    The maximum amount of queries to keep in the query history to access\n+    statistics and other information about.\n+\n+``query.min-expire-age``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``15 min``\n+\n+    The minimal age of a query before it is expired. The supported, but legacy\n+    property name is ``query.max-age``.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMwNzMyMg=="}, "originalCommit": null, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzY3MDE5", "url": "https://github.com/trinodb/trino/pull/2829#pullrequestreview-359367019", "createdAt": "2020-02-15T21:21:13Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMToyMToxM1rOFqQn7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMToyMToxM1rOFqQn7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1Njg3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                from the query history buffer.\n          \n          \n            \n                from the query history buffer and is no longer displayed in the cluster web UI.\n          \n      \n    \n    \n  \n\n?", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r379856879", "createdAt": "2020-02-15T21:21:13Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,28 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-history``\n+^^^^^^^^^^^^^^^^^^^^^\n+    * **Type:** ``integer``\n+    * **Default value:** ``100``\n+\n+    The maximum number of queries to keep in the query history to provide\n+    statistics and other information. If this amount is reached, queries are\n+    removed based on age.\n+\n+``query.min-expire-age``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``15 min``\n+\n+    The minimal age of a query before it is expired. An expired query is removed\n+    from the query history buffer.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNTk1NjQ0", "url": "https://github.com/trinodb/trino/pull/2829#pullrequestreview-362595644", "createdAt": "2020-02-21T12:27:55Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMjoyNzo1NVrOFs1VCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMjozMDoxNVrOFs1Ycg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1NTQwMA==", "bodyText": "can be overridden with query_max_run_time session\n\"max run time\" is misnomer... this includes analysis, queuing & planning time as well. Of these, queuing is the most important and should be mentioned here. Or you can say this is \"max time since query creation\".", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r382555400", "createdAt": "2020-02-21T12:27:55Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,47 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-execution-time``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``100 days``\n+\n+    The maxiumum allowed time for a query to be actively executing across the\n+    cluster on all nodes, before it is terminated.\n+\n+``query.max-run-time``\n+^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``100 days``\n+\n+    The maxiumum allowed time for a query to be running on the cluster, before\n+    it is terminated.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1NjI3NA==", "bodyText": "can be overridden with query_max_execution_time\n\"on all nodes\" may be misleading, suggesting this is \"concurrent time\" (wall time * number of nodes); This limit is \"normal time\" (just wall time since actual execution start). Queue, analysis, planning time are excluded (of which queuing time should be mentioned here)", "url": "https://github.com/trinodb/trino/pull/2829#discussion_r382556274", "createdAt": "2020-02-21T12:30:15Z", "author": {"login": "findepi"}, "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -116,6 +116,47 @@ Memory Management Properties\n     This is the amount of memory set aside as headroom/buffer in the JVM heap\n     for allocations that are not tracked by Presto.\n \n+\n+Query Management Properties\n+---------------------------\n+\n+``query.max-execution-time``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``100 days``\n+\n+    The maxiumum allowed time for a query to be actively executing across the\n+    cluster on all nodes, before it is terminated.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a9fcfacea0acab9745da2d815aba9d3e54bba06", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/0a9fcfacea0acab9745da2d815aba9d3e54bba06", "committedDate": "2020-02-21T17:26:11Z", "message": "Document query management properties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0a9fcfacea0acab9745da2d815aba9d3e54bba06", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/0a9fcfacea0acab9745da2d815aba9d3e54bba06", "committedDate": "2020-02-21T17:26:11Z", "message": "Document query management properties"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1680, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}