{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMjM5MjMx", "number": 4474, "title": "Add test environment with hive.hdfs.data-transfer-protection=privacy", "bodyText": "", "createdAt": "2020-07-16T14:26:26Z", "url": "https://github.com/trinodb/trino/pull/4474", "merged": true, "mergeCommit": {"oid": "d7ef95858d1373dea65ced6fbd5e6ca0b011d108"}, "closed": true, "closedAt": "2020-07-17T09:34:15Z", "author": {"login": "losipiuk"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1htm0gBqjM1NTQwNjMzMzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1webkgFqTQ1MDUxMzY5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a433b2f233c4bd7228114c126be2f43af6e25e90", "author": {"user": {"login": "losipiuk", "name": "\u0141ukasz Osipiuk"}}, "url": "https://github.com/trinodb/trino/commit/a433b2f233c4bd7228114c126be2f43af6e25e90", "committedDate": "2020-07-16T14:24:44Z", "message": "TMP: limit number of tests run"}, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzk2OTA5", "url": "https://github.com/trinodb/trino/pull/4474#pullrequestreview-450396909", "createdAt": "2020-07-17T06:13:50Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNjoxMzo1MFrOGzGoaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNjoxNzowMlrOGzGsbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzOTIwOQ==", "bodyText": "Why TestGrantRevoke at all?", "url": "https://github.com/trinodb/trino/pull/4474#discussion_r456239209", "createdAt": "2020-07-17T06:13:50Z", "author": {"login": "findepi"}, "path": "presto-product-tests/bin/product-tests-suite-3.sh", "diffHunk": "@@ -22,5 +22,12 @@ presto-product-tests-launcher/bin/run-launcher test run \\\n     -- -g storage_formats,cli,hdfs_impersonation,authorization -x iceberg,\"${DISTRO_SKIP_GROUP}\" -e \"${DISTRO_SKIP_TEST}\" \\\n     || suite_exit_code=1\n \n+# run very selective set of tests on singlenode-kerberos-hdfs-impersonation-with-data-protection so we do not add\n+# a lot to runtime\n+presto-product-tests-launcher/bin/run-launcher test run \\\n+    --environment singlenode-kerberos-hdfs-impersonation-with-data-protection \\\n+    -- -t TestHiveStorageFormats.testOrcTableCreatedInPresto,TestGrantRevoke.testGrantRevoke -x \"${DISTRO_SKIP_GROUP}\" -e \"${DISTRO_SKIP_TEST}\" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzOTUyMQ==", "bodyText": "That's a good thinking, but I do not think it needs to be put in a comment. It's seems obvious why you picked few tests. Unless you want to also explain why these particular tests.", "url": "https://github.com/trinodb/trino/pull/4474#discussion_r456239521", "createdAt": "2020-07-17T06:14:50Z", "author": {"login": "findepi"}, "path": "presto-product-tests/bin/product-tests-suite-3.sh", "diffHunk": "@@ -22,5 +22,12 @@ presto-product-tests-launcher/bin/run-launcher test run \\\n     -- -g storage_formats,cli,hdfs_impersonation,authorization -x iceberg,\"${DISTRO_SKIP_GROUP}\" -e \"${DISTRO_SKIP_TEST}\" \\\n     || suite_exit_code=1\n \n+# run very selective set of tests on singlenode-kerberos-hdfs-impersonation-with-data-protection so we do not add\n+# a lot to runtime", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzOTg3MA==", "bodyText": "I guess iceberg catalog is not used in the test.", "url": "https://github.com/trinodb/trino/pull/4474#discussion_r456239870", "createdAt": "2020-07-17T06:15:51Z", "author": {"login": "findepi"}, "path": "presto-product-tests-launcher/src/main/resources/docker/presto-product-tests/conf/environment/singlenode-kerberos-hdfs-impersonation-with-data-protection/iceberg.properties", "diffHunk": "@@ -0,0 +1,15 @@\n+connector.name=iceberg", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI0MDIzOQ==", "bodyText": "a TODO not to require hive-data-protection.xml?\n(also you may want to follow *-site.xml convention, as in hive-default-fs-site.xml)", "url": "https://github.com/trinodb/trino/pull/4474#discussion_r456240239", "createdAt": "2020-07-17T06:17:02Z", "author": {"login": "findepi"}, "path": "presto-product-tests-launcher/src/main/resources/docker/presto-product-tests/conf/environment/singlenode-kerberos-hdfs-impersonation-with-data-protection/hive.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+connector.name=hive-hadoop2\n+hive.metastore.uri=thrift://hadoop-master:9083\n+hive.config.resources=/docker/presto-product-tests/conf/presto/etc/hive-default-fs-site.xml,/docker/presto-product-tests/conf/presto/etc/hive-data-protection.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f2b17efbf56b2420ff0475e33f18d0c290f4c80", "author": {"user": {"login": "losipiuk", "name": "\u0141ukasz Osipiuk"}}, "url": "https://github.com/trinodb/trino/commit/7f2b17efbf56b2420ff0475e33f18d0c290f4c80", "committedDate": "2020-07-17T08:16:36Z", "message": "Run subset of product tests against env with data protection"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "7f2b17efbf56b2420ff0475e33f18d0c290f4c80", "author": {"user": {"login": "losipiuk", "name": "\u0141ukasz Osipiuk"}}, "url": "https://github.com/trinodb/trino/commit/7f2b17efbf56b2420ff0475e33f18d0c290f4c80", "committedDate": "2020-07-17T08:16:36Z", "message": "Run subset of product tests against env with data protection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTEzNjk0", "url": "https://github.com/trinodb/trino/pull/4474#pullrequestreview-450513694", "createdAt": "2020-07-17T09:32:45Z", "commit": {"oid": "7f2b17efbf56b2420ff0475e33f18d0c290f4c80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTozMjo0NVrOGzMSxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwOTozMjo0NVrOGzMSxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjMzMTk3NQ==", "bodyText": "How does this environment is different to singlenode-kerberos-hdfs-impersonation-with-wire-encryption", "url": "https://github.com/trinodb/trino/pull/4474#discussion_r456331975", "createdAt": "2020-07-17T09:32:45Z", "author": {"login": "kokosing"}, "path": "presto-product-tests/bin/product-tests-suite-3.sh", "diffHunk": "@@ -22,5 +22,11 @@ presto-product-tests-launcher/bin/run-launcher test run \\\n     -- -g storage_formats,cli,hdfs_impersonation,authorization -x iceberg,\"${DISTRO_SKIP_GROUP}\" -e \"${DISTRO_SKIP_TEST}\" \\\n     || suite_exit_code=1\n \n+# Smoke run af a few tests in environment with dfs.data.transfer.protection=true. Arbitrary tests which access HDFS data were chosen.\n+presto-product-tests-launcher/bin/run-launcher test run \\\n+    --environment singlenode-kerberos-hdfs-impersonation-with-data-protection \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f2b17efbf56b2420ff0475e33f18d0c290f4c80"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4736, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}