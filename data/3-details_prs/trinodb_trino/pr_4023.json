{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTA1MDc2", "number": 4023, "title": "Expose types with Parameters for DESCRIBE INPUT", "bodyText": "", "createdAt": "2020-06-14T07:03:13Z", "url": "https://github.com/trinodb/trino/pull/4023", "merged": true, "mergeCommit": {"oid": "3cf2988e988c69ed435cab3e4f436d9cee75c14c"}, "closed": true, "closedAt": "2020-06-21T12:58:26Z", "author": {"login": "Praveen2112"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrG4VHgBqjM0NDE0NjE2MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABctIh5EABqjM0NjQ3NDI5NjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMzk3NDM2", "url": "https://github.com/trinodb/trino/pull/4023#pullrequestreview-430397436", "createdAt": "2020-06-15T07:48:12Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzo0ODoxMlrOGjmzmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzo0ODoxMlrOGjmzmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk4OTE0NA==", "bodyText": "It looks like we are missing dedicated test for this feature. Can you please add it where you could also test other parametric types including timestamp, char and decimal?", "url": "https://github.com/trinodb/trino/pull/4023#discussion_r439989144", "createdAt": "2020-06-15T07:48:12Z", "author": {"login": "kokosing"}, "path": "presto-tests/src/test/java/io/prestosql/tests/AbstractTestEngineOnlyQueries.java", "diffHunk": "@@ -730,7 +730,7 @@ public void testDescribeInput()\n         MaterializedResult expected = resultBuilder(session, BIGINT, VARCHAR)\n                 .row(0, \"unknown\")\n                 .row(1, \"bigint\")\n-                .row(2, \"varchar\")\n+                .row(2, \"varchar(25)\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODc4MTg0", "url": "https://github.com/trinodb/trino/pull/4023#pullrequestreview-430878184", "createdAt": "2020-06-15T18:09:11Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODowOToxMVrOGj9KlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODowOToxMVrOGj9KlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM1NTQ3Nw==", "bodyText": "can you have a test with  timestamp(6) as well as unbound varchar?", "url": "https://github.com/trinodb/trino/pull/4023#discussion_r440355477", "createdAt": "2020-06-15T18:09:11Z", "author": {"login": "kokosing"}, "path": "presto-tests/src/test/java/io/prestosql/tests/AbstractTestEngineOnlyQueries.java", "diffHunk": "@@ -730,7 +730,18 @@ public void testDescribeInput()\n         MaterializedResult expected = resultBuilder(session, BIGINT, VARCHAR)\n                 .row(0, \"unknown\")\n                 .row(1, \"bigint\")\n-                .row(2, \"varchar\")\n+                .row(2, \"varchar(25)\")\n+                .build();\n+        assertEqualsIgnoreOrder(actual, expected);\n+\n+        session = Session.builder(getSession())\n+                .addPreparedStatement(\"my_query\", \"SELECT 1 from (VALUES (CHAR 'Pi', TIMESTAMP '2012-03-14 1:59:26.535', DECIMAL '3.14')) AS t (t_varchar, t_timestamp, t_decimal) WHERE t_varchar = ? AND t_timestamp = ? AND t_decimal = ?\")\n+                .build();\n+        actual = computeActual(session, \"DESCRIBE INPUT my_query\");\n+        expected = resultBuilder(session, BIGINT, VARCHAR)\n+                .row(0, \"char(2)\")\n+                .row(1, \"timestamp(3)\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzc5MDQz", "url": "https://github.com/trinodb/trino/pull/4023#pullrequestreview-431779043", "createdAt": "2020-06-16T18:22:01Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MzM2NzQz", "url": "https://github.com/trinodb/trino/pull/4023#pullrequestreview-434336743", "createdAt": "2020-06-19T20:54:37Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQyMDo1NDozN1rOGmhA-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQyMDo1NDozN1rOGmhA-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAzOTk5NQ==", "bodyText": "This is hard to read due to the length -- try to wrap it somehow", "url": "https://github.com/trinodb/trino/pull/4023#discussion_r443039995", "createdAt": "2020-06-19T20:54:37Z", "author": {"login": "electrum"}, "path": "presto-tests/src/test/java/io/prestosql/tests/AbstractTestEngineOnlyQueries.java", "diffHunk": "@@ -730,7 +730,24 @@ public void testDescribeInput()\n         MaterializedResult expected = resultBuilder(session, BIGINT, VARCHAR)\n                 .row(0, \"unknown\")\n                 .row(1, \"bigint\")\n-                .row(2, \"varchar\")\n+                .row(2, \"varchar(25)\")\n+                .build();\n+        assertEqualsIgnoreOrder(actual, expected);\n+\n+        session = Session.builder(getSession())\n+                .addPreparedStatement(\n+                        \"my_query\",\n+                        \"SELECT 1 from \" +\n+                        \"    (VALUES (CHAR 'Pi', CAST ('PI' AS VARCHAR), TIMESTAMP '2012-03-14 1:59:26.535', TIMESTAMP '2012-03-14 1:59:26.535897', DECIMAL '3.14')) AS t (t_char, t_varchar, t_timestamp, t_timestamp_2, t_decimal) \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6e0331a737f1ce7fcdbf21ff7be3ceaddf487f2", "author": {"user": {"login": "Praveen2112", "name": "Praveen Krishna"}}, "url": "https://github.com/trinodb/trino/commit/a6e0331a737f1ce7fcdbf21ff7be3ceaddf487f2", "committedDate": "2020-06-20T14:28:42Z", "message": "Expose types with Parameters for DESCRIBE INPUT"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "a6e0331a737f1ce7fcdbf21ff7be3ceaddf487f2", "author": {"user": {"login": "Praveen2112", "name": "Praveen Krishna"}}, "url": "https://github.com/trinodb/trino/commit/a6e0331a737f1ce7fcdbf21ff7be3ceaddf487f2", "committedDate": "2020-06-20T14:28:42Z", "message": "Expose types with Parameters for DESCRIBE INPUT"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 363, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}