{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NzEwNjE0", "number": 3341, "title": "Add session token support to PrestoS3FileSystem", "bodyText": "", "createdAt": "2020-04-04T20:00:27Z", "url": "https://github.com/trinodb/trino/pull/3341", "merged": true, "mergeCommit": {"oid": "317eb98f8431fd6f2f9e40b68b30ff7a54ef5296"}, "closed": true, "closedAt": "2020-04-05T21:06:20Z", "author": {"login": "electrum"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUaKUNAH2gAyMzk4NzEwNjE0OmRjNmIxZWYxNzIzM2IyYjQ3MGZmMzNkMDRkNTkyM2E4ZTdmMGM2ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcUv6HZgFqTM4Nzg1NjM0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dc6b1ef17233b2b470ff33d04d5923a8e7f0c6d1", "author": {"user": {"login": "electrum", "name": "David Phillips"}}, "url": "https://github.com/trinodb/trino/commit/dc6b1ef17233b2b470ff33d04d5923a8e7f0c6d1", "committedDate": "2020-04-04T18:53:22Z", "message": "Remove unnecessary test in TestPrestoS3FileSystem"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ecd4814f05f910c022a2c526f36204ab9b6f115", "author": {"user": {"login": "electrum", "name": "David Phillips"}}, "url": "https://github.com/trinodb/trino/commit/7ecd4814f05f910c022a2c526f36204ab9b6f115", "committedDate": "2020-04-04T19:03:28Z", "message": "Add session token support to PrestoS3FileSystem"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODU2MzQw", "url": "https://github.com/trinodb/trino/pull/3341#pullrequestreview-387856340", "createdAt": "2020-04-05T20:12:29Z", "commit": {"oid": "7ecd4814f05f910c022a2c526f36204ab9b6f115"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDoxMjozMFrOGBDAhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQyMDoxMjozMFrOGBDAhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MTA0NQ==", "bodyText": "nit, move AWSSessionCredentials.class, sessionCredentials -> as new lines", "url": "https://github.com/trinodb/trino/pull/3341#discussion_r403751045", "createdAt": "2020-04-05T20:12:30Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/s3/TestPrestoS3FileSystem.java", "diffHunk": "@@ -91,21 +94,31 @@ public void testStaticCredentials()\n         Configuration config = new Configuration(false);\n         config.set(S3_ACCESS_KEY, \"test_access_key\");\n         config.set(S3_SECRET_KEY, \"test_secret_key\");\n-        // the static credentials should be preferred\n \n         try (PrestoS3FileSystem fs = new PrestoS3FileSystem()) {\n-            verifyStaticCredentials(config, fs, \"s3n://test-bucket/\", \"test_access_key\", \"test_secret_key\");\n+            AWSCredentials credentials = getStaticCredentials(config, fs, \"s3n://test-bucket/\");\n+            assertEquals(credentials.getAWSAccessKeyId(), \"test_access_key\");\n+            assertEquals(credentials.getAWSSecretKey(), \"test_secret_key\");\n+            assertThat(credentials).isNotInstanceOf(AWSSessionCredentials.class);\n+        }\n+\n+        config.set(S3_SESSION_TOKEN, \"test_token\");\n+        try (PrestoS3FileSystem fs = new PrestoS3FileSystem()) {\n+            AWSCredentials credentials = getStaticCredentials(config, fs, \"s3n://test-bucket/\");\n+            assertEquals(credentials.getAWSAccessKeyId(), \"test_access_key\");\n+            assertEquals(credentials.getAWSSecretKey(), \"test_secret_key\");\n+            assertThat(credentials).isInstanceOfSatisfying(AWSSessionCredentials.class, sessionCredentials ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ecd4814f05f910c022a2c526f36204ab9b6f115"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1764, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}