{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NDY4MzQy", "number": 5819, "title": "Allow defining system properties before connector properties in hive query builder", "bodyText": "", "createdAt": "2020-11-04T15:40:45Z", "url": "https://github.com/trinodb/trino/pull/5819", "merged": true, "mergeCommit": {"oid": "90388e125f6de1feaa70197cd6cb32d80e57ef9c"}, "closed": true, "closedAt": "2020-11-05T11:25:36Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZPqT8AH2gAyNTE1NDY4MzQyOmE0ZTBkMDMwNzc2YzBlNDA1NDdkZGUyNjNkMjJkMjI0MTU2ZWFmM2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZQ6Y8ABqjM5NTg2MDc4ODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a4e0d030776c0e40547dde263d22d224156eaf3d", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/a4e0d030776c0e40547dde263d22d224156eaf3d", "committedDate": "2020-11-04T15:40:08Z", "message": "Allow defining system properties before connector properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53edd53bbe04067334b43f84b0bd07d090ffbd2a", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/53edd53bbe04067334b43f84b0bd07d090ffbd2a", "committedDate": "2020-11-04T15:40:21Z", "message": "Fix formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNTE0MTY1", "url": "https://github.com/trinodb/trino/pull/5819#pullrequestreview-523514165", "createdAt": "2020-11-04T16:12:36Z", "commit": {"oid": "a4e0d030776c0e40547dde263d22d224156eaf3d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNjoxMjozNlrOHtfQRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNjoxMjozNlrOHtfQRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2MDAzOA==", "bodyText": "slightly tangential to this PR, but this property seems to get overriden, since setSingleExtraProperty replaces the previously set properties?", "url": "https://github.com/trinodb/trino/pull/5819#discussion_r517460038", "createdAt": "2020-11-04T16:12:36Z", "author": {"login": "phd3"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveDynamicPartitionPruning.java", "diffHunk": "@@ -63,11 +63,11 @@ protected QueryRunner createQueryRunner()\n             throws Exception\n     {\n         return HiveQueryRunner.builder()\n-                .setInitialTables(getTables())\n-                .setHiveProperties(ImmutableMap.of(\"hive.dynamic-filtering-probe-blocking-timeout\", \"1h\"))\n                 // Reduced partitioned join limit for large DF to enable DF min/max collection with ENABLE_LARGE_DYNAMIC_FILTERS\n                 .setSingleExtraProperty(\"dynamic-filtering.large-partitioned.max-distinct-values-per-driver\", \"100\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4e0d030776c0e40547dde263d22d224156eaf3d"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNTQ5NTc4", "url": "https://github.com/trinodb/trino/pull/5819#pullrequestreview-523549578", "createdAt": "2020-11-04T16:50:13Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNjo1MDoxM1rOHtg4UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNjo1MDoxM1rOHtg4UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ4NjY3Mw==", "bodyText": "nitL May be Add the given key and value to the extra properties or remove the comment?", "url": "https://github.com/trinodb/trino/pull/5819#discussion_r517486673", "createdAt": "2020-11-04T16:50:13Z", "author": {"login": "phd3"}, "path": "presto-testing/src/main/java/io/prestosql/testing/DistributedQueryRunner.java", "diffHunk": "@@ -554,18 +554,17 @@ public Builder setNodeCount(int nodeCount)\n \n         public Builder setExtraProperties(Map<String, String> extraProperties)\n         {\n-            this.extraProperties = extraProperties;\n+            this.extraProperties = new HashMap<>(extraProperties);\n             return this;\n         }\n \n         /**\n          * Sets extra properties being equal to a map containing given key and value.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "committedDate": "2020-11-04T17:07:27Z", "message": "Replace misleading setSingleExtraProperty method\n\nThe method was documented as overwriting previous settings but there\nstill was at least one incorrect usage. Replace the method with a new\none with more useful semantics."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/ca71fdece6fc5b1a067ccecdb72a0bbc28badec6", "committedDate": "2020-11-04T17:07:27Z", "message": "Replace misleading setSingleExtraProperty method\n\nThe method was documented as overwriting previous settings but there\nstill was at least one incorrect usage. Replace the method with a new\none with more useful semantics."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2828, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}