{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MTAzMzE5", "number": 5840, "title": "Add Hive view syntax smoke test", "bodyText": "", "createdAt": "2020-11-05T14:30:37Z", "url": "https://github.com/trinodb/trino/pull/5840", "merged": true, "mergeCommit": {"oid": "7f45ba365e400d96e366c05c81d0cce0ef1e85c2"}, "closed": true, "closedAt": "2020-11-05T21:37:34Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZjQoTgH2gAyNTE2MTAzMzE5OjZmMGVmOGQ4ZTZkYTBhMGNkYzA2OTIyMjJiZmNlYWQxMTNhNjUyM2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZltpIgFqTUyNDQ5MDk4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6f0ef8d8e6da0a0cdc0692222bfcead113a6523a", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/6f0ef8d8e6da0a0cdc0692222bfcead113a6523a", "committedDate": "2020-11-05T14:30:11Z", "message": "Add Hive view syntax smoke test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MzE3Mzg4", "url": "https://github.com/trinodb/trino/pull/5840#pullrequestreview-524317388", "createdAt": "2020-11-05T14:30:52Z", "commit": {"oid": "6f0ef8d8e6da0a0cdc0692222bfcead113a6523a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNDozMDo1MlrOHuF9EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxNDozMDo1MlrOHuF9EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA5NDA5Ng==", "bodyText": "#5837", "url": "https://github.com/trinodb/trino/pull/5840#discussion_r518094096", "createdAt": "2020-11-05T14:30:52Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -137,6 +137,40 @@ public void testUnsupportedLateralViews()\n         assertThat(query(\"SELECT COUNT(*) FROM hive_lateral_view\")).contains(row(0));\n     }\n \n+    /**\n+     * Test view containing IF, IN, LIKE, BETWEEN, CASE, COALESCE, operators, delimited and non-delimited columns, an inline comment\n+     */\n+    @Test(groups = HIVE_VIEWS)\n+    public void testRichSqlSyntax()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS view_with_rich_syntax\");\n+        onHive().executeQuery(\"CREATE VIEW view_with_rich_syntax AS \" +\n+                \"SELECT \\n\" +\n+                \"   `n_nationkey`, \\n\" + // grave accent\n+                \"   n_name, \\n\" + // no grave accent\n+                \"   `n_regionkey` AS `n_regionkey`, \\n\" + // alias\n+                \"   n_regionkey BETWEEN 1 AND 2 AS region_between_1_2, \\n\" + // BETWEEN, boolean\n+                \"   IF(`n`.`n_name` IN ('ALGERIA', 'ARGENTINA'), 1, 0) AS `starts_with_a`, \\n\" +\n+                \"   IF(`n`.`n_name` != 'PERU', 1, 0) `not_peru`, \\n\" + // no \"AS\" here\n+                \"   IF(`n`.`n_name` LIKE '%N%', 1, 0) `CONTAINS_N`, \\n\" + // LIKE, uppercase column name\n+                // TODO (https://github.com/prestosql/presto/issues/5837) \"   CASE n_regionkey WHEN 0 THEN 'Africa' WHEN 1 THEN 'America' END region_name, \\n\" + // simple CASE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f0ef8d8e6da0a0cdc0692222bfcead113a6523a"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MzkyNDM5", "url": "https://github.com/trinodb/trino/pull/5840#pullrequestreview-524392439", "createdAt": "2020-11-05T15:40:42Z", "commit": {"oid": "6f0ef8d8e6da0a0cdc0692222bfcead113a6523a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NDkwOTg1", "url": "https://github.com/trinodb/trino/pull/5840#pullrequestreview-524490985", "createdAt": "2020-11-05T17:21:41Z", "commit": {"oid": "6f0ef8d8e6da0a0cdc0692222bfcead113a6523a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2853, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}