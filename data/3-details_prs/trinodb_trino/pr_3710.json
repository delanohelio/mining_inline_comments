{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2OTk4ODQ1", "number": 3710, "title": "Add ISO date and time examples", "bodyText": "Fixes #3695", "createdAt": "2020-05-12T22:11:13Z", "url": "https://github.com/trinodb/trino/pull/3710", "merged": true, "mergeCommit": {"oid": "1d9c37f77848dfc7328cae92f296616a5e15399a"}, "closed": true, "closedAt": "2020-05-22T20:26:47Z", "author": {"login": "mosabua"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgr4khAFqTQxMDQ2MzIwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcj2ncHgBqjMzNjU4MDE0NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNDYzMjA5", "url": "https://github.com/trinodb/trino/pull/3710#pullrequestreview-410463209", "createdAt": "2020-05-12T22:19:22Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNDk4ODU1", "url": "https://github.com/trinodb/trino/pull/3710#pullrequestreview-410498855", "createdAt": "2020-05-12T23:48:46Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzo0ODo0NlrOGUc0XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzo0ODo0NlrOGUc0XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5Njg2MQ==", "bodyText": "Let's write these as example queries with the output, like we do for other functions.", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r424096861", "createdAt": "2020-05-12T23:48:46Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -65,11 +65,13 @@ Date and Time Functions\n \n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n-    Parses the ISO 8601 formatted ``string`` into a ``timestamp with time zone``.\n+    Parses the ISO 8601 formatted date and time ``string``, such as\n+    ``2020-05-11T11:15:05.055-08:00``, into a ``timestamp with time zone``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMjcxNDU3", "url": "https://github.com/trinodb/trino/pull/3710#pullrequestreview-411271457", "createdAt": "2020-05-13T20:23:25Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDoyMzoyNVrOGVCMIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDo1NTowMlrOGVDLHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcwOTE1Mg==", "bodyText": "Remove \"time\" from \"date and time\", since it's optional and covered by the second part.", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r424709152", "createdAt": "2020-05-13T20:23:25Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -65,11 +65,32 @@ Date and Time Functions\n \n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n-    Parses the ISO 8601 formatted ``string`` into a ``timestamp with time zone``.\n+    Parses the ISO 8601 formatted date and time ``string``, optionally with", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcyMTYwMg==", "bodyText": "\"time zone\" should be two words (other usages in this document are consistent in this regard)\nLet's clarify missing information:\n\nThe time defaults to zero, and the time zone defaults to the session time zone.\n\nI couldn't incorporate the word \"missing\" without having it twice, but I think the above is fine since we say \"optionally\" in the previous sentence.\nWe should also update the current_timestamp() documentation to say \"session time zone\" instead of \"current time zone\" (since it's not clear what \"current\" means).", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r424721602", "createdAt": "2020-05-13T20:47:48Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -65,11 +65,32 @@ Date and Time Functions\n \n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n-    Parses the ISO 8601 formatted ``string`` into a ``timestamp with time zone``.\n+    Parses the ISO 8601 formatted date and time ``string``, optionally with\n+    time and timezone, into a ``timestamp with time zone``. Missing", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcyMjcxNQ==", "bodyText": "We should format like the other examples:\nSELECT from_iso8601_timestamp('2020-05-11'); -- 2020-05-11 00:00:00.000 America/Vancouver\nSELECT from_iso8601_timestamp('2020-05-11T11:15:05'); -- 2020-05-11 11:15:05.000 America/Vancouver\nSELECT from_iso8601_timestamp('2020-05-11T11:15:05.055+01:00'); -- 2020-05-11 11:15:05.055 +01:00\nThe advantage of this formatting is that it's consistent and fully executable SQL (you can copy/paste into the CLI or another tool).", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r424722715", "createdAt": "2020-05-13T20:50:02Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -65,11 +65,32 @@ Date and Time Functions\n \n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n-    Parses the ISO 8601 formatted ``string`` into a ``timestamp with time zone``.\n+    Parses the ISO 8601 formatted date and time ``string``, optionally with\n+    time and timezone, into a ``timestamp with time zone``. Missing\n+    information is defaulted to zero and local information::\n+\n+        SELECT from_iso8601_timestamp('2020-05-11');", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcyNDk2MA==", "bodyText": "Instead of saying \"various\", which implies these are just some of the supported formats, let's change to enumerate them, using the language from standard (or at least what Wikipedia calls them):\n\nThe date can be a calendar date, a week date using ISO week numbering, or an ordinal date (year and day of year).", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r424724960", "createdAt": "2020-05-13T20:54:29Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -65,11 +65,32 @@ Date and Time Functions\n \n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n-    Parses the ISO 8601 formatted ``string`` into a ``timestamp with time zone``.\n+    Parses the ISO 8601 formatted date and time ``string``, optionally with\n+    time and timezone, into a ``timestamp with time zone``. Missing\n+    information is defaulted to zero and local information::\n+\n+        SELECT from_iso8601_timestamp('2020-05-11');\n+        2020-05-11 00:00:00.000 America/Vancouver\n+\n+        SELECT from_iso8601_timestamp('2020-05-11T11:15:05');\n+        2020-05-11 11:15:05.000 America/Vancouver\n+\n+        SELECT from_iso8601_timestamp('2020-05-11T11:15:05.055+01:00');\n+        2020-05-11 11:15:05.055 +01:00\n \n .. function:: from_iso8601_date(string) -> date\n \n-    Parses the ISO 8601 formatted ``string`` into a ``date``.\n+    Parses the ISO 8601 formatted date ``string`` into a ``date``. Various date", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcyNTI3OQ==", "bodyText": "SELECT from_iso8601_date('2020-05-11'); -- 2020-05-11\nSELECT from_iso8601_date('2020-123'); -- 2020-05-02\nSELECT from_iso8601_date('2020-W10'); -- 2020-03-02", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r424725279", "createdAt": "2020-05-13T20:55:02Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -65,11 +65,32 @@ Date and Time Functions\n \n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n-    Parses the ISO 8601 formatted ``string`` into a ``timestamp with time zone``.\n+    Parses the ISO 8601 formatted date and time ``string``, optionally with\n+    time and timezone, into a ``timestamp with time zone``. Missing\n+    information is defaulted to zero and local information::\n+\n+        SELECT from_iso8601_timestamp('2020-05-11');\n+        2020-05-11 00:00:00.000 America/Vancouver\n+\n+        SELECT from_iso8601_timestamp('2020-05-11T11:15:05');\n+        2020-05-11 11:15:05.000 America/Vancouver\n+\n+        SELECT from_iso8601_timestamp('2020-05-11T11:15:05.055+01:00');\n+        2020-05-11 11:15:05.055 +01:00\n \n .. function:: from_iso8601_date(string) -> date\n \n-    Parses the ISO 8601 formatted ``string`` into a ``date``.\n+    Parses the ISO 8601 formatted date ``string`` into a ``date``. Various date\n+    formats such as yyyy-mm-dd, day of year and week of year are supported::\n+\n+        SELECT from_iso8601_date('2020-05-11');", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDg2NjYz", "url": "https://github.com/trinodb/trino/pull/3710#pullrequestreview-417086663", "createdAt": "2020-05-22T17:48:43Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzo0ODo0M1rOGZfMTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzo1MTozN1rOGZfRkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3ODYzNw==", "bodyText": "Wrapping a single word decreases readability. We don't have a hard limit, so no need.", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r429378637", "createdAt": "2020-05-22T17:48:43Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -44,11 +44,13 @@ Date and Time Functions\n \n .. data:: current_time\n \n-    Returns the current time with time zone as of the start of the query.\n+    Returns the current time with session time zone as of the start of the\n+    query.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3OTk4NQ==", "bodyText": "Actually, let's revert these changes for now. It reads strangely, since \"as of the start\" sounds like it binds/applies to the \"session time zone\" part. I'm actually more concerned about fixing the \"current time zone\" language for the current_timezone() function, but we can follow up on that.", "url": "https://github.com/trinodb/trino/pull/3710#discussion_r429379985", "createdAt": "2020-05-22T17:51:37Z", "author": {"login": "electrum"}, "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -44,11 +44,13 @@ Date and Time Functions\n \n .. data:: current_time\n \n-    Returns the current time with time zone as of the start of the query.\n+    Returns the current time with session time zone as of the start of the\n+    query.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3ODYzNw=="}, "originalCommit": null, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "e11b0dd76aed7270a86670361418ffb2a7eb20d0", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/e11b0dd76aed7270a86670361418ffb2a7eb20d0", "committedDate": "2020-05-22T18:31:11Z", "message": "Add ISO date and time examples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "e11b0dd76aed7270a86670361418ffb2a7eb20d0", "author": {"user": {"login": "mosabua", "name": "Manfred Moser"}}, "url": "https://github.com/trinodb/trino/commit/e11b0dd76aed7270a86670361418ffb2a7eb20d0", "committedDate": "2020-05-22T18:31:11Z", "message": "Add ISO date and time examples"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1483, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}