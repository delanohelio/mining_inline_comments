{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NjMzMTcw", "number": 5365, "title": "Use hive.domain-compaction-threshold for dynamic filters", "bodyText": "", "createdAt": "2020-09-30T16:27:24Z", "url": "https://github.com/trinodb/trino/pull/5365", "merged": true, "mergeCommit": {"oid": "d119041c26a05f02bb23cb1c512216e495c81a29"}, "closed": true, "closedAt": "2020-10-12T10:44:10Z", "author": {"login": "raunaqmorarka"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOCSdigFqTQ5OTc2MTM2OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRxhxXgFqTUwNjUwMDE2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzYxMzY5", "url": "https://github.com/trinodb/trino/pull/5365#pullrequestreview-499761369", "createdAt": "2020-09-30T19:52:08Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTo1MjowOFrOHas-UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTo1MjowOFrOHas-UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc2MTg3Mg==", "bodyText": "this requires benchmarking with unpartitioned data set as discrete values set is extracted in readers (e.g in TupleDomainOrcPredicate). The more values in the set, the more CPU cost per stripe (hence the original simplify)", "url": "https://github.com/trinodb/trino/pull/5365#discussion_r497761872", "createdAt": "2020-09-30T19:52:08Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "diffHunk": "@@ -101,7 +104,7 @@ public ConnectorPageSource createPageSource(ConnectorTransactionHandle transacti\n \n         TupleDomain<HiveColumnHandle> simplifiedDynamicFilter = dynamicFilter\n                 .getCurrentPredicate()\n-                .transform(HiveColumnHandle.class::cast).simplify();\n+                .transform(HiveColumnHandle.class::cast).simplify(domainCompactionThreshold);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "8512c5fb27c5fb05fe6294fdb6ba53041e8be48f", "author": {"user": {"login": "raunaqmorarka", "name": "Raunaq Morarka"}}, "url": "https://github.com/trinodb/trino/commit/8512c5fb27c5fb05fe6294fdb6ba53041e8be48f", "committedDate": "2020-10-10T17:55:33Z", "message": "Use hive.domain-compaction-threshold for dynamic filters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "8512c5fb27c5fb05fe6294fdb6ba53041e8be48f", "author": {"user": {"login": "raunaqmorarka", "name": "Raunaq Morarka"}}, "url": "https://github.com/trinodb/trino/commit/8512c5fb27c5fb05fe6294fdb6ba53041e8be48f", "committedDate": "2020-10-10T17:55:33Z", "message": "Use hive.domain-compaction-threshold for dynamic filters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NTAwMTY1", "url": "https://github.com/trinodb/trino/pull/5365#pullrequestreview-506500165", "createdAt": "2020-10-12T10:36:08Z", "commit": {"oid": "8512c5fb27c5fb05fe6294fdb6ba53041e8be48f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOHf5B4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxMDozNjowOFrOHf5B4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIwMjI3Mw==", "bodyText": "this should most likely be simplified after intersection (please re-run benchmarks)", "url": "https://github.com/trinodb/trino/pull/5365#discussion_r503202273", "createdAt": "2020-10-12T10:36:08Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HivePageSourceProvider.java", "diffHunk": "@@ -101,7 +104,7 @@ public ConnectorPageSource createPageSource(ConnectorTransactionHandle transacti\n \n         TupleDomain<HiveColumnHandle> simplifiedDynamicFilter = dynamicFilter\n                 .getCurrentPredicate()\n-                .transform(HiveColumnHandle.class::cast).simplify();\n+                .transform(HiveColumnHandle.class::cast).simplify(domainCompactionThreshold);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8512c5fb27c5fb05fe6294fdb6ba53041e8be48f"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3542, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}