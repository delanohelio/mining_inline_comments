{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MDE4NDgy", "number": 4332, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjowMDo1NVrOELOmCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjowMDo1NVrOELOmCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjA4OTA2OnYy", "diffSide": "RIGHT", "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjowMDo1NVrOGsuKbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMjo0OToxNFrOGsvXdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA==", "bodyText": "I have doubts if mixing manual test definitions with data provider makes thinks more readable.\nI would go with inlining every thing if we need to inline some.", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449546860", "createdAt": "2020-07-03T12:00:55Z", "author": {"login": "losipiuk"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0NzM3NQ==", "bodyText": "i started with the approach you propose.\nHowever, since test has the timeout definition, it required to create test method\nfor each of the tested combinations. The code was less readable IMO, so i\nswitched back to the test provider.", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449547375", "createdAt": "2020-07-03T12:02:18Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0OTI4OA==", "bodyText": "Would this be helpful?\nhttps://stackoverflow.com/a/30802395", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449549288", "createdAt": "2020-07-03T12:07:12Z", "author": {"login": "losipiuk"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0OTcyOA==", "bodyText": "I'd prefer KISS", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449549728", "createdAt": "2020-07-03T12:08:22Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU1NzY1OQ==", "bodyText": "Yeah - that would mean separate methods for me :)\nAnyway LGTM", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449557659", "createdAt": "2020-07-03T12:28:23Z", "author": {"login": "losipiuk"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU2MTgzNg==", "bodyText": "I pushed a version without DP for testReadFullAcid, let me know if it reads better for you.\nthe DP is retained for the insert-only test still.", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449561836", "createdAt": "2020-07-03T12:38:08Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU2NjU4MA==", "bodyText": "Thanks. I like it more. It may that I am just old :)", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449566580", "createdAt": "2020-07-03T12:49:14Z", "author": {"login": "losipiuk"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, "originalCommit": null, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3797, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}