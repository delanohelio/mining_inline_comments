{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1ODQ2OTM5", "number": 3484, "title": "Cleanup in access control", "bodyText": "", "createdAt": "2020-04-20T06:06:24Z", "url": "https://github.com/trinodb/trino/pull/3484", "merged": true, "mergeCommit": {"oid": "583c1b9d745e90c93ba941f5e7885e3ce6220121"}, "closed": true, "closedAt": "2020-04-20T15:51:21Z", "author": {"login": "kokosing"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZZFCVgFqTM5NjE2OTkwMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZg0gTAFqTM5NjU2MzY1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MTY5OTAx", "url": "https://github.com/trinodb/trino/pull/3484#pullrequestreview-396169901", "createdAt": "2020-04-20T06:27:20Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MTczMzUx", "url": "https://github.com/trinodb/trino/pull/3484#pullrequestreview-396173351", "createdAt": "2020-04-20T06:35:06Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjozNTowNlrOGIFOOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjozODowMVrOGIFTFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEyNzM1NQ==", "bodyText": "Deny show create table by default\n\nYou are not changing default, you are providing one, so maybe\nProvide default implementation for can show create table check\n\n?", "url": "https://github.com/trinodb/trino/pull/3484#discussion_r411127355", "createdAt": "2020-04-20T06:35:06Z", "author": {"login": "findepi"}, "path": "presto-spi/src/main/java/io/prestosql/spi/connector/ConnectorAccessControl.java", "diffHunk": "@@ -127,7 +128,10 @@ default void checkCanShowSchemas(ConnectorSecurityContext context)\n      *\n      * @throws io.prestosql.spi.security.AccessDeniedException if not allowed\n      */\n-    void checkCanShowCreateTable(ConnectorSecurityContext context, SchemaTableName tableName);\n+    default void checkCanShowCreateTable(ConnectorSecurityContext context, SchemaTableName tableName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEyODU5OA==", "bodyText": "Simplify\n\nNot sure why it was doing this, but it was throwing UnsupportedOperationException not DenyException.\nI understand TACM was not supposed to reach this method, and if it reached, a test would fail with UOE.\nDo you know why UOE here?", "url": "https://github.com/trinodb/trino/pull/3484#discussion_r411128598", "createdAt": "2020-04-20T06:38:01Z", "author": {"login": "findepi"}, "path": "presto-main/src/test/java/io/prestosql/security/TestAccessControlManager.java", "diffHunk": "@@ -460,130 +457,5 @@ public void checkCanSelectFromColumns(SystemSecurityContext context, CatalogSche\n     private static class DenyConnectorAccessControl\n             implements ConnectorAccessControl\n     {\n-        @Override\n-        public void checkCanSelectFromColumns(ConnectorSecurityContext context, SchemaTableName tableName, Set<String> columnNames)\n-        {\n-            denySelectColumns(tableName.toString(), columnNames);\n-        }\n-\n-        @Override\n-        public void checkCanCreateSchema(ConnectorSecurityContext context, String schemaName)\n-        {\n-            throw new UnsupportedOperationException();\n-        }\n-\n-        @Override\n-        public void checkCanDropSchema(ConnectorSecurityContext context, String schemaName)\n-        {\n-            throw new UnsupportedOperationException();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726edd7a2682f7e532ecb42a041f0b7660dcb43d", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/726edd7a2682f7e532ecb42a041f0b7660dcb43d", "committedDate": "2020-04-20T08:15:01Z", "message": "Provide default for can show create table check\n\nDeny show create table by default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bed20447ff765cec2742f3f97f29aadc7f1a249d", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/bed20447ff765cec2742f3f97f29aadc7f1a249d", "committedDate": "2020-04-20T08:15:01Z", "message": "Simplify DenyConnectorAccessControl"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "bed20447ff765cec2742f3f97f29aadc7f1a249d", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/bed20447ff765cec2742f3f97f29aadc7f1a249d", "committedDate": "2020-04-20T08:15:01Z", "message": "Simplify DenyConnectorAccessControl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NTYzNjU2", "url": "https://github.com/trinodb/trino/pull/3484#pullrequestreview-396563656", "createdAt": "2020-04-20T15:28:30Z", "commit": {"oid": "bed20447ff765cec2742f3f97f29aadc7f1a249d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1587, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}