{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMzE4ODgy", "number": 4483, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQwNTo0NzoxMlrOEPux-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQwNTo1ODoxMVrOEPu0tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0OTMwNTUyOnYy", "diffSide": "RIGHT", "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientModule.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQwNTo0NzoxMlrOGzmBcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMzoyNjoxMFrOGzoQPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1MzUyMw==", "bodyText": "nit: Let's move to under the maxWaitTime since it's timeout value (thus we can minimize the diff).", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456753523", "createdAt": "2020-07-18T05:47:12Z", "author": {"login": "ebyhr"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientModule.java", "diffHunk": "@@ -56,7 +56,8 @@ public static MongoSession createMongoSession(TypeManager typeManager, MongoClie\n                 .maxWaitTime(config.getMaxWaitTime())\n                 .minConnectionsPerHost(config.getMinConnectionsPerHost())\n                 .readPreference(config.getReadPreference().getReadPreference())\n-                .writeConcern(config.getWriteConcern().getWriteConcern());\n+                .writeConcern(config.getWriteConcern().getWriteConcern())\n+                .maxConnectionIdleTime(config.getMaxConnectionIdleTime());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5MDA3OA==", "bodyText": "Done", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456790078", "createdAt": "2020-07-18T13:26:10Z", "author": {"login": "jerroldlaw"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientModule.java", "diffHunk": "@@ -56,7 +56,8 @@ public static MongoSession createMongoSession(TypeManager typeManager, MongoClie\n                 .maxWaitTime(config.getMaxWaitTime())\n                 .minConnectionsPerHost(config.getMinConnectionsPerHost())\n                 .readPreference(config.getReadPreference().getReadPreference())\n-                .writeConcern(config.getWriteConcern().getWriteConcern());\n+                .writeConcern(config.getWriteConcern().getWriteConcern())\n+                .maxConnectionIdleTime(config.getMaxConnectionIdleTime());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1MzUyMw=="}, "originalCommit": null, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0OTMwNzU3OnYy", "diffSide": "RIGHT", "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQwNTo1MDoyNVrOGzmCZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMzoyNjoxOFrOGzoQSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1Mzc2Nw==", "bodyText": "Please add @Min(0) annotation.", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456753767", "createdAt": "2020-07-18T05:50:25Z", "author": {"login": "ebyhr"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "diffHunk": "@@ -307,4 +308,16 @@ public MongoClientConfig setSslEnabled(boolean sslEnabled)\n         this.sslEnabled = sslEnabled;\n         return this;\n     }\n+\n+    public int getMaxConnectionIdleTime()", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5MDA5MQ==", "bodyText": "Added the annotation", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456790091", "createdAt": "2020-07-18T13:26:18Z", "author": {"login": "jerroldlaw"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "diffHunk": "@@ -307,4 +308,16 @@ public MongoClientConfig setSslEnabled(boolean sslEnabled)\n         this.sslEnabled = sslEnabled;\n         return this;\n     }\n+\n+    public int getMaxConnectionIdleTime()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1Mzc2Nw=="}, "originalCommit": null, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0OTMxMjU1OnYy", "diffSide": "RIGHT", "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQwNTo1ODoxMVrOGzmEow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMzoyODo1MVrOGzoREw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1NDMzOQ==", "bodyText": "Could you update mongodb.rst in presto-docs module?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Config(\"mongodb.max-connection-idle-time-ms\")\n          \n          \n            \n                @Config(\"mongodb.max-connection-idle-time\")\n          \n      \n    \n    \n  \n\n(Basically, we should use Duration type for this property, but understood the existing property in this connector are using int now)", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456754339", "createdAt": "2020-07-18T05:58:11Z", "author": {"login": "ebyhr"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "diffHunk": "@@ -307,4 +308,16 @@ public MongoClientConfig setSslEnabled(boolean sslEnabled)\n         this.sslEnabled = sslEnabled;\n         return this;\n     }\n+\n+    public int getMaxConnectionIdleTime()\n+    {\n+        return maxConnectionIdleTime;\n+    }\n+\n+    @Config(\"mongodb.max-connection-idle-time-ms\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5MDIxMw==", "bodyText": "Yup agreed. Removed the \"-ms\" for more consistency with the rest of the configs. Thanks for taking time to review this @ebyhr \ud83d\ude04", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456790213", "createdAt": "2020-07-18T13:27:36Z", "author": {"login": "jerroldlaw"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "diffHunk": "@@ -307,4 +308,16 @@ public MongoClientConfig setSslEnabled(boolean sslEnabled)\n         this.sslEnabled = sslEnabled;\n         return this;\n     }\n+\n+    public int getMaxConnectionIdleTime()\n+    {\n+        return maxConnectionIdleTime;\n+    }\n+\n+    @Config(\"mongodb.max-connection-idle-time-ms\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1NDMzOQ=="}, "originalCommit": null, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5MDI5MQ==", "bodyText": "Updated mongodb.rst too.", "url": "https://github.com/trinodb/trino/pull/4483#discussion_r456790291", "createdAt": "2020-07-18T13:28:51Z", "author": {"login": "jerroldlaw"}, "path": "presto-mongodb/src/main/java/io/prestosql/plugin/mongodb/MongoClientConfig.java", "diffHunk": "@@ -307,4 +308,16 @@ public MongoClientConfig setSslEnabled(boolean sslEnabled)\n         this.sslEnabled = sslEnabled;\n         return this;\n     }\n+\n+    public int getMaxConnectionIdleTime()\n+    {\n+        return maxConnectionIdleTime;\n+    }\n+\n+    @Config(\"mongodb.max-connection-idle-time-ms\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc1NDMzOQ=="}, "originalCommit": null, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3679, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}