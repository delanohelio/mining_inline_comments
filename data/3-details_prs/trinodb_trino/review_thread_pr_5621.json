{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MjM1NzE4", "number": 5621, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwOToyODowMVrOEwKFfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwOToyODowMVrOEwKFfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4OTMyMzUwOnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwOToyODowMVrOHlix3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwNDozODoxM1rOHmQS5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEyOTE4MQ==", "bodyText": "just curious, how this relates to version update?", "url": "https://github.com/trinodb/trino/pull/5621#discussion_r509129181", "createdAt": "2020-10-21T09:28:01Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -328,7 +328,7 @@ public void testGetBlockLocations()\n         cachingFileSystem = getCachingFileSystem();\n \n         FileStatus file1 = new FileStatus(3, false, 0, 3, 0, new Path(\"aaa\"));\n-        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"bbb\"));\n+        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"zzzz\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fb8c2e645b1a6e3ac0812f514207ab9cf001f62"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEzMjM2OA==", "bodyText": "The hashing function changed with qubole/rubix@7e797a5\nWith the new function, the paths in this test started mapping to the same worker node.\nSo I changed the path to get the test to pass :)", "url": "https://github.com/trinodb/trino/pull/5621#discussion_r509132368", "createdAt": "2020-10-21T09:32:46Z", "author": {"login": "raunaqmorarka"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -328,7 +328,7 @@ public void testGetBlockLocations()\n         cachingFileSystem = getCachingFileSystem();\n \n         FileStatus file1 = new FileStatus(3, false, 0, 3, 0, new Path(\"aaa\"));\n-        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"bbb\"));\n+        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"zzzz\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEyOTE4MQ=="}, "originalCommit": {"oid": "7fb8c2e645b1a6e3ac0812f514207ab9cf001f62"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMzMjcyMg==", "bodyText": "How many \"apparent nodes\" do we have here?\ncan the new hashing function increase collusions % ?", "url": "https://github.com/trinodb/trino/pull/5621#discussion_r509332722", "createdAt": "2020-10-21T14:24:14Z", "author": {"login": "findepi"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -328,7 +328,7 @@ public void testGetBlockLocations()\n         cachingFileSystem = getCachingFileSystem();\n \n         FileStatus file1 = new FileStatus(3, false, 0, 3, 0, new Path(\"aaa\"));\n-        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"bbb\"));\n+        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"zzzz\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEyOTE4MQ=="}, "originalCommit": {"oid": "7fb8c2e645b1a6e3ac0812f514207ab9cf001f62"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM3MDM1MA==", "bodyText": "This test was meant to test that block locations are actually correctly propagated and not about hash function effectiveness.", "url": "https://github.com/trinodb/trino/pull/5621#discussion_r509370350", "createdAt": "2020-10-21T15:08:51Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -328,7 +328,7 @@ public void testGetBlockLocations()\n         cachingFileSystem = getCachingFileSystem();\n \n         FileStatus file1 = new FileStatus(3, false, 0, 3, 0, new Path(\"aaa\"));\n-        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"bbb\"));\n+        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"zzzz\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEyOTE4MQ=="}, "originalCommit": {"oid": "7fb8c2e645b1a6e3ac0812f514207ab9cf001f62"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg3NDkxOA==", "bodyText": "The new hashing function is expected to be better as it switches from guava's MD5+consistent hash to Metro hash + consistent hash from a library which has a better implementation of consistent hashing https://github.com/ishugaliy/allgood-consistent-hash.\nSince there are only 2 nodes here, I don't think we can conclude much about quality of hash function here.", "url": "https://github.com/trinodb/trino/pull/5621#discussion_r509874918", "createdAt": "2020-10-22T04:38:13Z", "author": {"login": "raunaqmorarka"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -328,7 +328,7 @@ public void testGetBlockLocations()\n         cachingFileSystem = getCachingFileSystem();\n \n         FileStatus file1 = new FileStatus(3, false, 0, 3, 0, new Path(\"aaa\"));\n-        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"bbb\"));\n+        FileStatus file2 = new FileStatus(3, false, 0, 3, 0, new Path(\"zzzz\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEyOTE4MQ=="}, "originalCommit": {"oid": "7fb8c2e645b1a6e3ac0812f514207ab9cf001f62"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4482, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}