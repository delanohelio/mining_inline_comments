{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzUyMjAx", "number": 2842, "title": "Ensure QueryCompletedEvent occurs when query fails during planning", "bodyText": "", "createdAt": "2020-02-15T19:58:47Z", "url": "https://github.com/trinodb/trino/pull/2842", "merged": true, "mergeCommit": {"oid": "8a89c29bff8303a23ee6633605cb0e521acaf578"}, "closed": true, "closedAt": "2020-02-20T00:32:41Z", "author": {"login": "dain"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFSZ-bABqjMwNDQ4MDAzMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGACmWABqjMwNTM5MzIwMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTI4ODI3", "url": "https://github.com/trinodb/trino/pull/2842#pullrequestreview-361528827", "createdAt": "2020-02-20T00:08:06Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMDowODowNlrOFr8MsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMDowODowNlrOFr8MsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYxOTM3Ng==", "bodyText": "This shouldn't be needed", "url": "https://github.com/trinodb/trino/pull/2842#discussion_r381619376", "createdAt": "2020-02-20T00:08:06Z", "author": {"login": "electrum"}, "path": "presto-tests/src/test/java/io/prestosql/execution/TestEventListener.java", "diffHunk": "@@ -69,6 +77,22 @@ private void setUp()\n         queryRunner.installPlugin(new TestingEventListenerPlugin(generatedEvents));\n         queryRunner.installPlugin(new ResourceGroupManagerPlugin());\n         queryRunner.createCatalog(\"tpch\", \"tpch\", ImmutableMap.of(\"tpch.splits-per-node\", Integer.toString(SPLITS_PER_NODE)));\n+        queryRunner.installPlugin(new Plugin()\n+        {\n+            @Override\n+            public Iterable<ConnectorFactory> getConnectorFactories()\n+            {\n+                MockConnectorFactory connectorFactory = MockConnectorFactory.builder()\n+                        .withGetViews((session, schemaTablePrefix) -> ImmutableMap.of())", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTI4OTAw", "url": "https://github.com/trinodb/trino/pull/2842#pullrequestreview-361528900", "createdAt": "2020-02-20T00:08:20Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adb744c3aa92a9ea7ce8ef8f7fd734cf107102e2", "author": {"user": {"login": "dain", "name": "Dain Sundstrom"}}, "url": "https://github.com/trinodb/trino/commit/adb744c3aa92a9ea7ce8ef8f7fd734cf107102e2", "committedDate": "2020-02-20T00:29:43Z", "message": "Add StateMachine.trySet()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a801df2664216230b49eab5a56e6c7be0c38c107", "author": {"user": {"login": "JamesRTaylor", "name": "James Taylor"}}, "url": "https://github.com/trinodb/trino/commit/a801df2664216230b49eab5a56e6c7be0c38c107", "committedDate": "2020-02-20T00:32:20Z", "message": "Ensure QueryCompletedEvent occurs when query fails during planning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "a801df2664216230b49eab5a56e6c7be0c38c107", "author": {"user": {"login": "JamesRTaylor", "name": "James Taylor"}}, "url": "https://github.com/trinodb/trino/commit/a801df2664216230b49eab5a56e6c7be0c38c107", "committedDate": "2020-02-20T00:32:20Z", "message": "Ensure QueryCompletedEvent occurs when query fails during planning"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1687, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}