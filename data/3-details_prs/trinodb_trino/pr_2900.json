{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDA3MDY1", "number": 2900, "title": "Minor refactor of ParquetReader II", "bodyText": "Split out from #2840", "createdAt": "2020-02-21T18:10:44Z", "url": "https://github.com/trinodb/trino/pull/2900", "merged": true, "mergeCommit": {"oid": "773f77ea477b2bce6481dfe1ffd2085b2d1321a1"}, "closed": true, "closedAt": "2020-03-06T15:35:51Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJvm2_gH2gAyMzc4NDA3MDY1OmI4YjI3MTUwNDU4MDk0OGIzZWQwOTZjOGQyMTk5OGM3NmE5MjI1ZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcK-Z45gFqTM3MDI1NDUzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b8b271504580948b3ed096c8d21998c76a9225e1", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/b8b271504580948b3ed096c8d21998c76a9225e1", "committedDate": "2020-03-02T15:39:23Z", "message": "Add support for VARBINARY in H2 query runner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e320687ae821668a5ee869a99993e3d6d0d833e8", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/e320687ae821668a5ee869a99993e3d6d0d833e8", "committedDate": "2020-03-02T15:39:23Z", "message": "Remove external location constraint from file metastore\n\nHive metastore allows external location pointing at another managed\ntable's location, so allow the same in file metastore."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "329de8f5210b9c99c55a1b436589c6445ced4001", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/329de8f5210b9c99c55a1b436589c6445ced4001", "committedDate": "2020-03-02T15:39:23Z", "message": "Add column pruning test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5e773e6041cbf8bd7b1b7835f9ec697589c7ed1", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/b5e773e6041cbf8bd7b1b7835f9ec697589c7ed1", "committedDate": "2020-03-02T15:39:23Z", "message": "Declare field as a List"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14d44613817cbf6dd2d1f3352a3f2bf94b1afab8", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/14d44613817cbf6dd2d1f3352a3f2bf94b1afab8", "committedDate": "2020-03-02T15:39:23Z", "message": "Simplify code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3497b6027bc69260aa0e723dce822f9d972154c", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/d3497b6027bc69260aa0e723dce822f9d972154c", "committedDate": "2020-03-02T15:39:23Z", "message": "Verify GroupField integrity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1782bd0ce98472a5268c20b3402f2bb0beea5e4e", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/1782bd0ce98472a5268c20b3402f2bb0beea5e4e", "committedDate": "2020-03-02T15:39:23Z", "message": "Implement Field#toString"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "1782bd0ce98472a5268c20b3402f2bb0beea5e4e", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/1782bd0ce98472a5268c20b3402f2bb0beea5e4e", "committedDate": "2020-03-02T15:39:23Z", "message": "Implement Field#toString"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMjU0NTMy", "url": "https://github.com/trinodb/trino/pull/2900#pullrequestreview-370254532", "createdAt": "2020-03-06T11:24:38Z", "commit": {"oid": "e320687ae821668a5ee869a99993e3d6d0d833e8"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNDozOFrOFy1lIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyNzoyM1rOFy1pYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MDk3OQ==", "bodyText": "Hive metastore allows external location pointing at another managed\ntable's location, so allow the same in file metastore.\n\nBut there is no file metastore in Hive and so there is no system metadata directory there.\nIs it only about creating external tables with \"same\" location as internal table would have? The error message is a bit misleading to me.", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388850979", "createdAt": "2020-03-06T11:24:38Z", "author": {"login": "kokosing"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/file/FileHiveMetastore.java", "diffHunk": "@@ -266,9 +266,6 @@ else if (table.getTableType().equals(EXTERNAL_TABLE.name())) {\n                 if (!externalFileSystem.isDirectory(externalLocation)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e320687ae821668a5ee869a99993e3d6d0d833e8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MTU3OQ==", "bodyText": "testNestedColumnPrunning?", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388851579", "createdAt": "2020-03-06T11:26:11Z", "author": {"login": "kokosing"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -5607,6 +5608,84 @@ private void testSelectWithNoColumns(Session session, HiveStorageFormat storageF\n         assertUpdate(\"DROP TABLE \" + tableName);\n     }\n \n+    @Test\n+    public void testColumnPruning()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "329de8f5210b9c99c55a1b436589c6445ced4001"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg1MjA2Nw==", "bodyText": "\"Type %s has %s parameters, but %s children has: %s\",?", "url": "https://github.com/trinodb/trino/pull/2900#discussion_r388852067", "createdAt": "2020-03-06T11:27:23Z", "author": {"login": "kokosing"}, "path": "presto-parquet/src/main/java/io/prestosql/parquet/GroupField.java", "diffHunk": "@@ -29,6 +30,13 @@\n     public GroupField(Type type, int repetitionLevel, int definitionLevel, boolean required, List<Optional<Field>> children)\n     {\n         super(type, repetitionLevel, definitionLevel, required);\n+        checkArgument(\n+                type.getTypeParameters().size() == children.size(),\n+                \"Type %s has %s parameters, but %s children: %s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3497b6027bc69260aa0e723dce822f9d972154c"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1596, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}