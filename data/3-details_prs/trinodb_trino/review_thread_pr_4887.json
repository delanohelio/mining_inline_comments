{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTI2NTc0", "number": 4887, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTowMDoyMVrOEakxwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODozMjowNFrOEbdciw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MzAwOTkyOnYy", "diffSide": "RIGHT", "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTowMDoyMVrOHEFukw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTowMDoyMVrOHEFukw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA1MDE5NQ==", "bodyText": "use requireNonNull(user, \"user is null\")", "url": "https://github.com/trinodb/trino/pull/4887#discussion_r474050195", "createdAt": "2020-08-20T15:00:21Z", "author": {"login": "sopel39"}, "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "diffHunk": "@@ -95,7 +96,7 @@ public BenchmarkQueryRunner(int warm, int runs, boolean debug, int maxFailures,\n         setupSocksProxy(builder, socksProxy);\n         this.okHttpClient = builder.build();\n \n-        nodes = getAllNodes(requireNonNull(serverUri, \"serverUri is null\"));\n+        nodes = getAllNodes(requireNonNull(serverUri, \"serverUri is null\"), user);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MzAxMTA2OnYy", "diffSide": "RIGHT", "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNTowMDozNlrOHEFvQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODoxMzozOVrOHEhmFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA1MDM3MA==", "bodyText": "can we use dummy user instead of actual user name? I think any username will do in benchmarks", "url": "https://github.com/trinodb/trino/pull/4887#discussion_r474050370", "createdAt": "2020-08-20T15:00:36Z", "author": {"login": "sopel39"}, "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "diffHunk": "@@ -271,9 +272,9 @@ private long getTotalCpuTime()\n         return TimeUnit.NANOSECONDS.toNanos(totalCpuTime);\n     }\n \n-    private List<URI> getAllNodes(URI server)\n+    private List<URI> getAllNodes(URI server, String user)\n     {\n-        Request request = prepareGet().setUri(uriBuilderFrom(server).replacePath(\"/v1/service/presto\").build()).build();\n+        Request request = prepareGet().setHeader(PrestoHeaders.PRESTO_USER, user).setUri(uriBuilderFrom(server).replacePath(\"/v1/service/presto\").build()).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI5MjMzMA==", "bodyText": "@sopel39 Can we ignore the user name specified by the option --user?", "url": "https://github.com/trinodb/trino/pull/4887#discussion_r474292330", "createdAt": "2020-08-20T21:50:18Z", "author": {"login": "Lewuathe"}, "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "diffHunk": "@@ -271,9 +272,9 @@ private long getTotalCpuTime()\n         return TimeUnit.NANOSECONDS.toNanos(totalCpuTime);\n     }\n \n-    private List<URI> getAllNodes(URI server)\n+    private List<URI> getAllNodes(URI server, String user)\n     {\n-        Request request = prepareGet().setUri(uriBuilderFrom(server).replacePath(\"/v1/service/presto\").build()).build();\n+        Request request = prepareGet().setHeader(PrestoHeaders.PRESTO_USER, user).setUri(uriBuilderFrom(server).replacePath(\"/v1/service/presto\").build()).build();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA1MDM3MA=="}, "originalCommit": null, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUwNjc3Mw==", "bodyText": "@Lewuathe I think in benchto for a while some dummy name was used and benchmarks still work. However, I think we can keep it as is", "url": "https://github.com/trinodb/trino/pull/4887#discussion_r474506773", "createdAt": "2020-08-21T08:13:39Z", "author": {"login": "sopel39"}, "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "diffHunk": "@@ -271,9 +272,9 @@ private long getTotalCpuTime()\n         return TimeUnit.NANOSECONDS.toNanos(totalCpuTime);\n     }\n \n-    private List<URI> getAllNodes(URI server)\n+    private List<URI> getAllNodes(URI server, String user)\n     {\n-        Request request = prepareGet().setUri(uriBuilderFrom(server).replacePath(\"/v1/service/presto\").build()).build();\n+        Request request = prepareGet().setHeader(PrestoHeaders.PRESTO_USER, user).setUri(uriBuilderFrom(server).replacePath(\"/v1/service/presto\").build()).build();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA1MDM3MA=="}, "originalCommit": null, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjI5NDUxOnYy", "diffSide": "RIGHT", "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODozMjowNFrOHFZxUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODozMjowNFrOHFZxUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQyNzE1NA==", "bodyText": "make it requireNonNull(user, \"user is null\")", "url": "https://github.com/trinodb/trino/pull/4887#discussion_r475427154", "createdAt": "2020-08-24T08:32:04Z", "author": {"login": "sopel39"}, "path": "presto-benchmark-driver/src/main/java/io/prestosql/benchmark/driver/BenchmarkQueryRunner.java", "diffHunk": "@@ -95,7 +96,7 @@ public BenchmarkQueryRunner(int warm, int runs, boolean debug, int maxFailures,\n         setupSocksProxy(builder, socksProxy);\n         this.okHttpClient = builder.build();\n \n-        nodes = getAllNodes(requireNonNull(serverUri, \"serverUri is null\"));\n+        nodes = getAllNodes(requireNonNull(serverUri, \"serverUri is null\"), requireNonNull(user));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3507, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}