{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MjQwNjUw", "number": 4341, "title": "Coerce string values to numeric types", "bodyText": "", "createdAt": "2020-07-04T05:11:35Z", "url": "https://github.com/trinodb/trino/pull/4341", "merged": true, "mergeCommit": {"oid": "9e684f70b54db1d9c007a804063954efb66d48fd"}, "closed": true, "closedAt": "2020-07-06T19:39:35Z", "author": {"login": "martint"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxhpUPABqjM1MTIzMTExOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyWi77AFqTQ0MzM1NjM4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjE2Nzg0", "url": "https://github.com/trinodb/trino/pull/4341#pullrequestreview-442616784", "createdAt": "2020-07-04T15:46:49Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNTo0Njo0OVrOGs8mGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNTo0NzozNVrOGs8mVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4MzMyMw==", "bodyText": "Maybe catch the parse error and throw a better exception?", "url": "https://github.com/trinodb/trino/pull/4341#discussion_r449783323", "createdAt": "2020-07-04T15:46:49Z", "author": {"login": "dain"}, "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/decoders/BigintDecoder.java", "diffHunk": "@@ -44,6 +44,9 @@ public void decode(SearchHit hit, Supplier<Object> getter, BlockBuilder output)\n         else if (value instanceof Number) {\n             BIGINT.writeLong(output, ((Number) value).longValue());\n         }\n+        else if (value instanceof String) {\n+            BIGINT.writeLong(output, Long.parseLong((String) value));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4MzM4Mg==", "bodyText": "Maybe parse as long and then apply int exact?", "url": "https://github.com/trinodb/trino/pull/4341#discussion_r449783382", "createdAt": "2020-07-04T15:47:35Z", "author": {"login": "dain"}, "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/decoders/IntegerDecoder.java", "diffHunk": "@@ -45,6 +45,9 @@ public void decode(SearchHit hit, Supplier<Object> getter, BlockBuilder output)\n         else if (value instanceof Number) {\n             INTEGER.writeLong(output, toIntExact(((Number) value).longValue()));\n         }\n+        else if (value instanceof String) {\n+            INTEGER.writeLong(output, Integer.parseInt((String) value));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2137bb8ea06745fbc3133179e904670c5066d6be", "author": {"user": {"login": "martint", "name": "Martin Traverso"}}, "url": "https://github.com/trinodb/trino/commit/2137bb8ea06745fbc3133179e904670c5066d6be", "committedDate": "2020-07-05T20:48:14Z", "message": "Fix typo in error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "170bf791bcec648f8adb742d1dee72bf01b1e9b3", "author": {"user": {"login": "martint", "name": "Martin Traverso"}}, "url": "https://github.com/trinodb/trino/commit/170bf791bcec648f8adb742d1dee72bf01b1e9b3", "committedDate": "2020-07-05T20:48:14Z", "message": "Coerce string values to numeric types"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "170bf791bcec648f8adb742d1dee72bf01b1e9b3", "author": {"user": {"login": "martint", "name": "Martin Traverso"}}, "url": "https://github.com/trinodb/trino/commit/170bf791bcec648f8adb742d1dee72bf01b1e9b3", "committedDate": "2020-07-05T20:48:14Z", "message": "Coerce string values to numeric types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMzU2Mzgw", "url": "https://github.com/trinodb/trino/pull/4341#pullrequestreview-443356380", "createdAt": "2020-07-06T19:38:22Z", "commit": {"oid": "170bf791bcec648f8adb742d1dee72bf01b1e9b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4948, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}