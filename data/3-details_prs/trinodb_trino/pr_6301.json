{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2ODczNzI2", "number": 6301, "title": "Accept LocalDate as prepared statement parameter", "bodyText": "Based on #6300.\nImplements #6299 for LocalDate", "createdAt": "2020-12-11T12:52:23Z", "url": "https://github.com/trinodb/trino/pull/6301", "merged": true, "mergeCommit": {"oid": "d3fb5b12b79c4544e76c908a716b66d49e96679d"}, "closed": true, "closedAt": "2020-12-12T20:59:21Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlJghVAFqTU1MDE4ODQzNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlQPaegBqjQxMDI3ODMyNTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTg4NDM2", "url": "https://github.com/trinodb/trino/pull/6301#pullrequestreview-550188436", "createdAt": "2020-12-11T15:17:06Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxNzowNlrOID9OqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxNzowNlrOID9OqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxOTgxNg==", "bodyText": "maybe function should be called setAsLocalDate or setLocalDate to match the parameter type?", "url": "https://github.com/trinodb/trino/pull/6301#discussion_r541019816", "createdAt": "2020-12-11T15:17:06Z", "author": {"login": "losipiuk"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/PrestoPreparedStatement.java", "diffHunk": "@@ -538,6 +538,9 @@ else if (x instanceof byte[]) {\n         else if (x instanceof Date) {\n             setDate(parameterIndex, (Date) x);\n         }\n+        else if (x instanceof LocalDate) {\n+            setAsDate(parameterIndex, x);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTg5MzY4", "url": "https://github.com/trinodb/trino/pull/6301#pullrequestreview-550189368", "createdAt": "2020-12-11T15:18:06Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTg5OTcy", "url": "https://github.com/trinodb/trino/pull/6301#pullrequestreview-550189972", "createdAt": "2020-12-11T15:18:46Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxODo0NlrOID9TTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxODo0NlrOID9TTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAyMTAwNA==", "bodyText": "this does not seem related. Extract?", "url": "https://github.com/trinodb/trino/pull/6301#discussion_r541021004", "createdAt": "2020-12-11T15:18:46Z", "author": {"login": "losipiuk"}, "path": "presto-jdbc/src/test/java/io/prestosql/jdbc/TestJdbcPreparedStatement.java", "diffHunk": "@@ -943,8 +985,9 @@ public BindAssertion resultsIn(String type, String expectedValueLiteral)\n                             .isEqualTo(type);\n                     assertThat(rs.getString(\"bound_as_varchar\")).as(\"bound should cast to VARCHAR the same way as literal \" + expectedValueLiteral)\n                             .isEqualTo(rs.getString(\"literal_as_varchar\"));\n-                    assertThat(rs.getObject(\"bound\")).as(\"bound value should round trip the same way as literal \" + expectedValueLiteral)\n-                            .isEqualTo(rs.getObject(\"literal\"));\n+                    // TODO (https://github.com/prestosql/presto/issues/6242) ResultSet.getObject sometimes fails", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f97680e3306612c5d5a7c3deee29a926e9c00c15", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/f97680e3306612c5d5a7c3deee29a926e9c00c15", "committedDate": "2020-12-11T23:07:16Z", "message": "Accept LocalDate as prepared statement parameter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "f97680e3306612c5d5a7c3deee29a926e9c00c15", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/f97680e3306612c5d5a7c3deee29a926e9c00c15", "committedDate": "2020-12-11T23:07:16Z", "message": "Accept LocalDate as prepared statement parameter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2170, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}