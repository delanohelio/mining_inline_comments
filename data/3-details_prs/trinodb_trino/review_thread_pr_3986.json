{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNDQ3ODMw", "number": 3986, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozNjoxNlrOEEUySg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozODo1MFrOEEU22g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTcwMzE0OnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozNjoxNlrOGh39fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozNjoxNlrOGh39fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3MzA1Mg==", "bodyText": "call this unwrapCachingFileSystem. getCachingFilestystem clashes with method name above.", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438173052", "createdAt": "2020-06-10T14:36:16Z", "author": {"login": "losipiuk"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -243,6 +249,17 @@ public void closeRubix()\n         }\n     }\n \n+    private static CachingFileSystem<?> getCachingFileSystem(FileSystem fileSystem)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 102}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTcwOTczOnYy", "diffSide": "LEFT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozNzozOVrOGh4BuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQyMDowMzowN1rOGiEZnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3NDEzNw==", "bodyText": "what was the purpose of this one?", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438174137", "createdAt": "2020-06-10T14:37:39Z", "author": {"login": "losipiuk"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -191,11 +199,7 @@ private FileSystem getCachingFileSystem(HdfsContext context)\n                 configurationInitializer,\n                 ImmutableSet.of(\n                         rubixConfigInitializer,\n-                        (dynamicConfig, ignoredContext, ignoredUri) -> {\n-                            // make sure that dummy cluster manager is used", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM3Njg2MQ==", "bodyText": "Previously rubix native PrestoClusterManager used HTTP to get nodes. Now it can accept NodeManager, so we can provide a testing one and not use DummyClusterManager anymore", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438376861", "createdAt": "2020-06-10T20:03:07Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -191,11 +199,7 @@ private FileSystem getCachingFileSystem(HdfsContext context)\n                 configurationInitializer,\n                 ImmutableSet.of(\n                         rubixConfigInitializer,\n-                        (dynamicConfig, ignoredContext, ignoredUri) -> {\n-                            // make sure that dummy cluster manager is used", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3NDEzNw=="}, "originalCommit": null, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTcxNDgyOnYy", "diffSide": "RIGHT", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozODo1MFrOGh4FFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozODo1MFrOGh4FFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3NDk5Ng==", "bodyText": "This possibly will be the same as one used for master. Shift workers by 1", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438174996", "createdAt": "2020-06-10T14:38:50Z", "author": {"login": "losipiuk"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -270,6 +287,42 @@ public void testCoordinatorNotJoining()\n                 .hasMessage(\"No coordinator node available\");\n     }\n \n+    @Test\n+    public void testGetBlockLocations()\n+            throws Exception\n+    {\n+        RubixConfig rubixConfig = new RubixConfig();\n+        InternalNode coordinatorNode = new InternalNode(\n+                \"master\",\n+                URI.create(\"http://\" + getLocalHost().getHostAddress() + \":8080\"),\n+                UNKNOWN,\n+                true);\n+        InternalNode workerNode1 = new InternalNode(\n+                \"worker1\",\n+                URI.create(\"http://127.0.0.1:8080\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 132}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4279, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}