{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMTU1NzQ1", "number": 5125, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMTo0NzozOVrOEh3tuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMTo0NzozOVrOEh3tuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzOTUxMjg4OnYy", "diffSide": "RIGHT", "path": "presto-atop/src/main/java/io/prestosql/plugin/atop/AtopSplitManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMTo0NzozOVrOHPbeAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzoxMzowM1rOHPmIbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk0MDczOQ==", "bodyText": "1000 -> MILLISECONDS_PER_SECOND", "url": "https://github.com/trinodb/trino/pull/5125#discussion_r485940739", "createdAt": "2020-09-09T21:47:39Z", "author": {"login": "martint"}, "path": "presto-atop/src/main/java/io/prestosql/plugin/atop/AtopSplitManager.java", "diffHunk": "@@ -63,7 +65,14 @@ public ConnectorSplitSource getSplits(ConnectorTransactionHandle transactionHand\n             ZonedDateTime start = end.minusDays(maxHistoryDays - 1).withHour(0).withMinute(0).withSecond(0).withNano(0);\n             while (start.isBefore(end)) {\n                 ZonedDateTime splitEnd = start.withHour(23).withMinute(59).withSecond(59).withNano(0);\n-                Domain splitDomain = Domain.create(ValueSet.ofRanges(Range.range(TIMESTAMP_WITH_TIME_ZONE, 1000 * start.toEpochSecond(), true, 1000 * splitEnd.toEpochSecond(), true)), false);\n+                Domain splitDomain = Domain.create(\n+                        ValueSet.ofRanges(Range.range(\n+                                TIMESTAMP_TZ_MILLIS,\n+                                packDateTimeWithZone(1000 * start.toEpochSecond(), UTC_KEY),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNTQzOQ==", "bodyText": "changed to .toInstant().toEpochMilli() (relevant for end time, in case splitEnd is not whole seconds (not the case today))", "url": "https://github.com/trinodb/trino/pull/5125#discussion_r486115439", "createdAt": "2020-09-10T07:13:03Z", "author": {"login": "findepi"}, "path": "presto-atop/src/main/java/io/prestosql/plugin/atop/AtopSplitManager.java", "diffHunk": "@@ -63,7 +65,14 @@ public ConnectorSplitSource getSplits(ConnectorTransactionHandle transactionHand\n             ZonedDateTime start = end.minusDays(maxHistoryDays - 1).withHour(0).withMinute(0).withSecond(0).withNano(0);\n             while (start.isBefore(end)) {\n                 ZonedDateTime splitEnd = start.withHour(23).withMinute(59).withSecond(59).withNano(0);\n-                Domain splitDomain = Domain.create(ValueSet.ofRanges(Range.range(TIMESTAMP_WITH_TIME_ZONE, 1000 * start.toEpochSecond(), true, 1000 * splitEnd.toEpochSecond(), true)), false);\n+                Domain splitDomain = Domain.create(\n+                        ValueSet.ofRanges(Range.range(\n+                                TIMESTAMP_TZ_MILLIS,\n+                                packDateTimeWithZone(1000 * start.toEpochSecond(), UTC_KEY),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk0MDczOQ=="}, "originalCommit": null, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3190, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}