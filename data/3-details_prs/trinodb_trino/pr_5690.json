{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5ODgzOTEx", "number": 5690, "title": "Use proper connector session in ConnectorNodePartitioningProvider", "bodyText": "Fix cannot fetch session properties in method ConnectorNodePartitioningProvider#getSplitBucketFunction", "createdAt": "2020-10-26T09:06:57Z", "url": "https://github.com/trinodb/trino/pull/5690", "merged": true, "mergeCommit": {"oid": "f5e54e9a83d781d943a753caa33793b35104cfa3"}, "closed": true, "closedAt": "2020-10-28T08:46:10Z", "author": {"login": "Crossoverrr"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWQz7PAFqTUxNjU4ODQ3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWks66gH2gAyNTA5ODgzOTExOmUyYjJkMTU5YTJkZTQ0OGU5OTJhNDY5MTZkMGYyZmEzNDY4MTE0MjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NTg4NDc0", "url": "https://github.com/trinodb/trino/pull/5690#pullrequestreview-516588474", "createdAt": "2020-10-26T09:18:46Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NTk3NDU0", "url": "https://github.com/trinodb/trino/pull/5690#pullrequestreview-516597454", "createdAt": "2020-10-26T09:29:56Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwOToyOTo1N1rOHoHKdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwOToyOTo1N1rOHoHKdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgyMjQ1Mg==", "bodyText": "There are many places where session.toConnectorSession() is called, and only one is updated.\nWould it make sense to have a test ensuring at least the \"connector partitioning interface\" use-cases is working end to end?", "url": "https://github.com/trinodb/trino/pull/5690#discussion_r511822452", "createdAt": "2020-10-26T09:29:57Z", "author": {"login": "findepi"}, "path": "presto-main/src/main/java/io/prestosql/sql/planner/NodePartitioningManager.java", "diffHunk": "@@ -221,7 +221,7 @@ private ConnectorBucketNodeMap getConnectorBucketNodeMap(Session session, Partit\n \n         ToIntFunction<ConnectorSplit> splitBucketFunction = partitioningProvider.getSplitBucketFunction(\n                 partitioningHandle.getTransactionHandle().orElse(null),\n-                session.toConnectorSession(),\n+                session.toConnectorSession(partitioningHandle.getConnectorId().get()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NDQzMjYz", "url": "https://github.com/trinodb/trino/pull/5690#pullrequestreview-517443263", "createdAt": "2020-10-27T08:21:29Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODoyMToyOVrOHowDIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODoyMToyOVrOHowDIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5MjMyMA==", "bodyText": "change commit title: Use proper connector session in ConnectorNodePartitioningProvider", "url": "https://github.com/trinodb/trino/pull/5690#discussion_r512492320", "createdAt": "2020-10-27T08:21:29Z", "author": {"login": "sopel39"}, "path": "presto-main/src/main/java/io/prestosql/sql/planner/NodePartitioningManager.java", "diffHunk": "@@ -207,7 +207,7 @@ private ConnectorBucketNodeMap getConnectorBucketNodeMap(Session session, Partit\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2b2d159a2de448e992a46916d0f2fa346811421", "author": {"user": {"login": "Crossoverrr", "name": "wupeng"}}, "url": "https://github.com/trinodb/trino/commit/e2b2d159a2de448e992a46916d0f2fa346811421", "committedDate": "2020-10-27T08:29:13Z", "message": "Use proper connector session in ConnectorNodePartitioningProvider"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3134, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}