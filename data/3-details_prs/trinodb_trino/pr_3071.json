{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjkxNzk4", "number": 3071, "title": "Introduce HiveMetastoreDecorator", "bodyText": "Introduce HiveMetastoreDecorator", "createdAt": "2020-03-11T13:32:28Z", "url": "https://github.com/trinodb/trino/pull/3071", "merged": true, "mergeCommit": {"oid": "1dca7e9f55fa3347d3b8fcc803156b585beee12e"}, "closed": true, "closedAt": "2020-03-11T18:55:08Z", "author": {"login": "kokosing"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMnPRSgH2gAyMzg2NjkxNzk4Ojc5ODg0Njk4MmJiYmE4ZTJmNjczNzAyZmRjNWVhNWYyOTIzNTE4NmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMquecgFqTM3Mjk4MzY1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "798846982bbba8e2f673702fdc5ea5f29235186e", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/798846982bbba8e2f673702fdc5ea5f29235186e", "committedDate": "2020-03-11T13:36:09Z", "message": "Introduce HiveMetastoreDecorator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "798846982bbba8e2f673702fdc5ea5f29235186e", "author": {"user": {"login": "kokosing", "name": "Grzegorz Kokosi\u0144ski"}}, "url": "https://github.com/trinodb/trino/commit/798846982bbba8e2f673702fdc5ea5f29235186e", "committedDate": "2020-03-11T13:36:09Z", "message": "Introduce HiveMetastoreDecorator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyOTc5MTkz", "url": "https://github.com/trinodb/trino/pull/3071#pullrequestreview-372979193", "createdAt": "2020-03-11T17:34:16Z", "commit": {"oid": "798846982bbba8e2f673702fdc5ea5f29235186e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyOTgzNjU3", "url": "https://github.com/trinodb/trino/pull/3071#pullrequestreview-372983657", "createdAt": "2020-03-11T17:39:50Z", "commit": {"oid": "798846982bbba8e2f673702fdc5ea5f29235186e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNzozOTo1MVrOF1B01A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNzozOTo1MVrOF1B01A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE0ODc1Ng==", "bodyText": "Why its specific to caching?", "url": "https://github.com/trinodb/trino/pull/3071#discussion_r391148756", "createdAt": "2020-03-11T17:39:51Z", "author": {"login": "sopel39"}, "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/cache/CachingHiveMetastoreModule.java", "diffHunk": "@@ -36,15 +39,22 @@\n     public void configure(Binder binder)\n     {\n         configBinder(binder).bindConfig(CachingHiveMetastoreConfig.class);\n+        newOptionalBinder(binder, HiveMetastoreDecorator.class);\n         newExporter(binder).export(HiveMetastore.class)\n                 .as(generator -> generator.generatedNameOf(CachingHiveMetastore.class));\n     }\n \n     @Provides\n     @Singleton\n-    public HiveMetastore createCachingHiveMetastore(@ForCachingHiveMetastore HiveMetastore delegate, @ForCachingHiveMetastore Executor executor, CachingHiveMetastoreConfig config)\n+    public HiveMetastore createCachingHiveMetastore(\n+            @ForCachingHiveMetastore HiveMetastore delegate,\n+            @ForCachingHiveMetastore Executor executor,\n+            CachingHiveMetastoreConfig config,\n+            Optional<HiveMetastoreDecorator> hiveMetastoreDecorator)\n     {\n-        return cachingHiveMetastore(delegate, executor, config);\n+        HiveMetastore decoratedDelegate = hiveMetastoreDecorator.map(decorator -> decorator.decorate(delegate))\n+                .orElse(delegate);\n+        return cachingHiveMetastore(decoratedDelegate, executor, config);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "798846982bbba8e2f673702fdc5ea5f29235186e"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2160, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}