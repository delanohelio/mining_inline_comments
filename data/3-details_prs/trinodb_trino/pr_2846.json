{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODE0Njcy", "number": 2846, "title": "Ensure no overflow for Date type", "bodyText": "", "createdAt": "2020-02-16T11:25:52Z", "url": "https://github.com/trinodb/trino/pull/2846", "merged": true, "mergeCommit": {"oid": "e0af24edc38c70f6c80cceedef379e0b468863d6"}, "closed": true, "closedAt": "2020-03-03T08:58:28Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcE28osgH2gAyMzc1ODE0NjcyOmM2MjE5NGEzZGU3MjU0OTkzZmViNzczNzRmMjljNzk2YmRiNjliMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJq8RngFqTM2NzA4MTc1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c62194a3de7254993feb77374f29c796bdb69b0e", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/c62194a3de7254993feb77374f29c796bdb69b0e", "committedDate": "2020-02-16T11:22:53Z", "message": "Ensure no overflow for Date type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dd7ff5669d31c63d8aab4108ff000cd290927d1", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/9dd7ff5669d31c63d8aab4108ff000cd290927d1", "committedDate": "2020-02-16T11:23:10Z", "message": "Reuse converted value\n\nThis silences a warning in the code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d14827bba0f6f96f889483257bfcef4bd602a2a6", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/d14827bba0f6f96f889483257bfcef4bd602a2a6", "committedDate": "2020-02-16T11:24:30Z", "message": "Remove ineffective replace invocation\n\n`Long.toBinaryString` does not produce leading (nor any other) spaces,\nso the `replace` call was a no-op."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDExODQ3", "url": "https://github.com/trinodb/trino/pull/2846#pullrequestreview-359411847", "createdAt": "2020-02-16T15:44:21Z", "commit": {"oid": "d14827bba0f6f96f889483257bfcef4bd602a2a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNTo0NDoyMVrOFqUBIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNTo0NDoyMVrOFqUBIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxMjQ4MA==", "bodyText": "toIntExact(value) ?", "url": "https://github.com/trinodb/trino/pull/2846#discussion_r379912480", "createdAt": "2020-02-16T15:44:21Z", "author": {"login": "wendigo"}, "path": "presto-spi/src/main/java/io/prestosql/spi/type/AbstractIntType.java", "diffHunk": "@@ -64,6 +67,13 @@ public final Slice getSlice(Block block, int position)\n     @Override\n     public void writeLong(BlockBuilder blockBuilder, long value)\n     {\n+        if (value > Integer.MAX_VALUE) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Value %d exceeds MAX_INT\", value));\n+        }\n+        if (value < Integer.MIN_VALUE) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Value %d is less than MIN_INT\", value));\n+        }\n+\n         blockBuilder.writeInt((int) value).closeEntry();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14827bba0f6f96f889483257bfcef4bd602a2a6"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MDgxNzU3", "url": "https://github.com/trinodb/trino/pull/2846#pullrequestreview-367081757", "createdAt": "2020-03-02T10:12:39Z", "commit": {"oid": "c62194a3de7254993feb77374f29c796bdb69b0e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMDoxMjo0MFrOFwaA0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMDoxMjo0MFrOFwaA0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMwMjE2Mw==", "bodyText": "I've seen that. Wasn't that on purpose (I guess not)?", "url": "https://github.com/trinodb/trino/pull/2846#discussion_r386302163", "createdAt": "2020-03-02T10:12:40Z", "author": {"login": "sopel39"}, "path": "presto-spi/src/main/java/io/prestosql/spi/type/AbstractIntType.java", "diffHunk": "@@ -64,6 +67,13 @@ public final Slice getSlice(Block block, int position)\n     @Override\n     public void writeLong(BlockBuilder blockBuilder, long value)\n     {\n+        if (value > Integer.MAX_VALUE) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Value %d exceeds MAX_INT\", value));\n+        }\n+        if (value < Integer.MIN_VALUE) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Value %d is less than MIN_INT\", value));\n+        }\n+\n         blockBuilder.writeInt((int) value).closeEntry();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxMjQ4MA=="}, "originalCommit": {"oid": "d14827bba0f6f96f889483257bfcef4bd602a2a6"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1690, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}