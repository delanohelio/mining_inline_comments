{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNTMxMTI2", "number": 4957, "title": "Implement JDBC ResultSet.getStatement", "bodyText": "", "createdAt": "2020-08-24T13:42:42Z", "url": "https://github.com/trinodb/trino/pull/4957", "merged": true, "mergeCommit": {"oid": "6cb480f651c4d322b3984709b9d3ece7a084bcf9"}, "closed": true, "closedAt": "2020-08-25T20:54:40Z", "author": {"login": "adamjshook"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCEJ1pgFqTQ3MzYwMDg3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCWz3ngBqjM2ODk5NzY2MjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNjAwODcy", "url": "https://github.com/trinodb/trino/pull/4957#pullrequestreview-473600872", "createdAt": "2020-08-24T15:15:08Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNTowOFrOHFp4LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNTowOFrOHFp4LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5MTA1Mg==", "bodyText": "let's make it optional", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r475691052", "createdAt": "2020-08-24T15:15:08Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/InMemoryPrestoResultSet.java", "diffHunk": "@@ -26,11 +27,18 @@\n {\n     public InMemoryPrestoResultSet(ZoneId sessionTimeZone, List<Column> columns, List<List<Object>> results)\n     {\n-        super(sessionTimeZone, columns, requireNonNull(results, \"results is null\").iterator());\n+        super(sessionTimeZone, columns, requireNonNull(results, \"results is null\").iterator(), null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNjAxODgy", "url": "https://github.com/trinodb/trino/pull/4957#pullrequestreview-473601882", "createdAt": "2020-08-24T15:16:16Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNjoxNlrOHFp7Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNToxNjoxNlrOHFp7Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5MTgyMg==", "bodyText": "also, i'd suggest to make this the first arg/field", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r475691822", "createdAt": "2020-08-24T15:16:16Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -127,8 +127,9 @@\n     private final AtomicReference<List<Object>> row = new AtomicReference<>();\n     private final AtomicBoolean wasNull = new AtomicBoolean();\n     protected final AtomicBoolean closed = new AtomicBoolean();\n+    private final Statement statement;\n \n-    AbstractPrestoResultSet(ZoneId resultTimeZone, List<Column> columns, Iterator<List<Object>> results)\n+    AbstractPrestoResultSet(ZoneId resultTimeZone, List<Column> columns, Iterator<List<Object>> results, Statement statement)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MzI1NTE1", "url": "https://github.com/trinodb/trino/pull/4957#pullrequestreview-474325515", "createdAt": "2020-08-25T09:59:01Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OTowMVrOHGQ2HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo1OToyNVrOHGQ3DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMyOTUwMQ==", "bodyText": "The method is implemented, but the context doesn't allow us to provide a Statement object\n(eg some DatabaseMetaData method returning a ResultSet).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new NotImplementedException(\"ResultSet\", \"getStatement\");\n          \n          \n            \n                        throw new SQLException(\"Statement not available\");", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r476329501", "createdAt": "2020-08-25T09:59:01Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -1101,7 +1104,12 @@ public void moveToCurrentRow()\n     public Statement getStatement()\n             throws SQLException\n     {\n-        throw new NotImplementedException(\"ResultSet\", \"getStatement\");\n+        if (statement.isPresent()) {\n+            return statement.get();\n+        }\n+        else {\n+            throw new NotImplementedException(\"ResultSet\", \"getStatement\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMyOTc0MQ==", "bodyText": "else is redundant, since the \"then\" block always returns", "url": "https://github.com/trinodb/trino/pull/4957#discussion_r476329741", "createdAt": "2020-08-25T09:59:25Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -1101,7 +1104,12 @@ public void moveToCurrentRow()\n     public Statement getStatement()\n             throws SQLException\n     {\n-        throw new NotImplementedException(\"ResultSet\", \"getStatement\");\n+        if (statement.isPresent()) {\n+            return statement.get();\n+        }\n+        else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8213d0368949b5f1326972070f877d56d804ea45", "author": {"user": {"login": "adamjshook", "name": "Adam J. Shook"}}, "url": "https://github.com/trinodb/trino/commit/8213d0368949b5f1326972070f877d56d804ea45", "committedDate": "2020-08-25T12:59:29Z", "message": "Implement JDBC ResultSet.getStatement"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "8213d0368949b5f1326972070f877d56d804ea45", "author": {"user": {"login": "adamjshook", "name": "Adam J. Shook"}}, "url": "https://github.com/trinodb/trino/commit/8213d0368949b5f1326972070f877d56d804ea45", "committedDate": "2020-08-25T12:59:29Z", "message": "Implement JDBC ResultSet.getStatement"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4143, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}