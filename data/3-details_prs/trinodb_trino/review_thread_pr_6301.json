{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2ODczNzI2", "number": 6301, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxNzowNlrOFECD6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxODo0NlrOFECG5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzcyMzkyOnYy", "diffSide": "RIGHT", "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/PrestoPreparedStatement.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxNzowNlrOID9OqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNjo0Njo0OVrOIEBCRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxOTgxNg==", "bodyText": "maybe function should be called setAsLocalDate or setLocalDate to match the parameter type?", "url": "https://github.com/trinodb/trino/pull/6301#discussion_r541019816", "createdAt": "2020-12-11T15:17:06Z", "author": {"login": "losipiuk"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/PrestoPreparedStatement.java", "diffHunk": "@@ -538,6 +538,9 @@ else if (x instanceof byte[]) {\n         else if (x instanceof Date) {\n             setDate(parameterIndex, (Date) x);\n         }\n+        else if (x instanceof LocalDate) {\n+            setAsDate(parameterIndex, x);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4MjE4MQ==", "bodyText": "setAsDate takes Object and actually works with several different date representations", "url": "https://github.com/trinodb/trino/pull/6301#discussion_r541082181", "createdAt": "2020-12-11T16:46:49Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/PrestoPreparedStatement.java", "diffHunk": "@@ -538,6 +538,9 @@ else if (x instanceof byte[]) {\n         else if (x instanceof Date) {\n             setDate(parameterIndex, (Date) x);\n         }\n+        else if (x instanceof LocalDate) {\n+            setAsDate(parameterIndex, x);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxOTgxNg=="}, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzczMTU3OnYy", "diffSide": "RIGHT", "path": "presto-jdbc/src/test/java/io/prestosql/jdbc/TestJdbcPreparedStatement.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNToxODo0NlrOID9TTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMzowODowNlrOIET7Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAyMTAwNA==", "bodyText": "this does not seem related. Extract?", "url": "https://github.com/trinodb/trino/pull/6301#discussion_r541021004", "createdAt": "2020-12-11T15:18:46Z", "author": {"login": "losipiuk"}, "path": "presto-jdbc/src/test/java/io/prestosql/jdbc/TestJdbcPreparedStatement.java", "diffHunk": "@@ -943,8 +985,9 @@ public BindAssertion resultsIn(String type, String expectedValueLiteral)\n                             .isEqualTo(type);\n                     assertThat(rs.getString(\"bound_as_varchar\")).as(\"bound should cast to VARCHAR the same way as literal \" + expectedValueLiteral)\n                             .isEqualTo(rs.getString(\"literal_as_varchar\"));\n-                    assertThat(rs.getObject(\"bound\")).as(\"bound value should round trip the same way as literal \" + expectedValueLiteral)\n-                            .isEqualTo(rs.getObject(\"literal\"));\n+                    // TODO (https://github.com/prestosql/presto/issues/6242) ResultSet.getObject sometimes fails", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM5MTY3MA==", "bodyText": "It is related -- i am adding test case with DATE 1970-01-01 and it fails here.", "url": "https://github.com/trinodb/trino/pull/6301#discussion_r541391670", "createdAt": "2020-12-11T23:08:06Z", "author": {"login": "findepi"}, "path": "presto-jdbc/src/test/java/io/prestosql/jdbc/TestJdbcPreparedStatement.java", "diffHunk": "@@ -943,8 +985,9 @@ public BindAssertion resultsIn(String type, String expectedValueLiteral)\n                             .isEqualTo(type);\n                     assertThat(rs.getString(\"bound_as_varchar\")).as(\"bound should cast to VARCHAR the same way as literal \" + expectedValueLiteral)\n                             .isEqualTo(rs.getString(\"literal_as_varchar\"));\n-                    assertThat(rs.getObject(\"bound\")).as(\"bound value should round trip the same way as literal \" + expectedValueLiteral)\n-                            .isEqualTo(rs.getObject(\"literal\"));\n+                    // TODO (https://github.com/prestosql/presto/issues/6242) ResultSet.getObject sometimes fails", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAyMTAwNA=="}, "originalCommit": null, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4561, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}