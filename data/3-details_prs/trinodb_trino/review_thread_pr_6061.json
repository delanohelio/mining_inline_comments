{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1ODQzNDAw", "number": 6061, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDowOTo0M1rOE8clXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxOFrOE8ptDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxODE4MzM1OnYy", "diffSide": "RIGHT", "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDowOTo0M1rOH4kUcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDowOTo0M1rOH4kUcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA3NzM2Mw==", "bodyText": "nit: Specify HIVE_VIEWS group.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Test\n          \n          \n            \n                @Test(groups = HIVE_VIEWS)", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529077363", "createdAt": "2020-11-24T00:09:43Z", "author": {"login": "ebyhr"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxODI1MzAwOnYy", "diffSide": "RIGHT", "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDo0MToyMVrOH4k-4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDo0MToyMVrOH4k-4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA4ODIyNQ==", "bodyText": "Prepend n_ to each column name. This is CI failure cause.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");\n          \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT n_nationkey AS k, n_name AS n, n_regionkey AS r, n_comment AS c FROM nation\");", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529088225", "createdAt": "2020-11-24T00:41:21Z", "author": {"login": "ebyhr"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test\n+    public void testNestedHiveViews()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_base_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_middle_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_top_view\");\n+\n+        onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMDMzMjA5OnYy", "diffSide": "RIGHT", "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxMFrOH45v7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxMFrOH45v7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQyODQ2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"SELECT * FROM nested_top_view\",\n          \n          \n            \n                            \"SELECT n_renamed FROM nested_top_view\",", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529428461", "createdAt": "2020-11-24T10:36:10Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test\n+    public void testNestedHiveViews()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_base_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_middle_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_top_view\");\n+\n+        onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");\n+        onHive().executeQuery(\"CREATE VIEW nested_middle_view AS SELECT n, c FROM nested_base_view WHERE k = 14\");\n+        onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n FROM nested_middle_view\");\n+\n+        assertViewQuery(\n+                \"SELECT * FROM nested_top_view\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMDMzMjkyOnYy", "diffSide": "RIGHT", "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxOFrOH45wbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMDozNjoxOFrOH45wbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQyODU5MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n FROM nested_middle_view\");\n          \n          \n            \n                    onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n AS n_renamed FROM nested_middle_view\");", "url": "https://github.com/trinodb/trino/pull/6061#discussion_r529428590", "createdAt": "2020-11-24T10:36:18Z", "author": {"login": "findepi"}, "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveViews.java", "diffHunk": "@@ -264,6 +264,22 @@ public void testSimpleCoral()\n                 queryAssert -> queryAssert.containsOnly(row(\"hive\")));\n     }\n \n+    @Test\n+    public void testNestedHiveViews()\n+    {\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_base_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_middle_view\");\n+        onHive().executeQuery(\"DROP VIEW IF EXISTS nested_top_view\");\n+\n+        onHive().executeQuery(\"CREATE VIEW nested_base_view AS SELECT nationkey as k, name as n, regionkey as r, comment as c FROM nation\");\n+        onHive().executeQuery(\"CREATE VIEW nested_middle_view AS SELECT n, c FROM nested_base_view WHERE k = 14\");\n+        onHive().executeQuery(\"CREATE VIEW nested_top_view AS SELECT n FROM nested_middle_view\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4615, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}