{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NTk3NzYx", "number": 2642, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDowNzozNFrODdK-3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDozNzo0OFrODdLTJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxOTE1MjMxOnYy", "diffSide": "RIGHT", "path": "presto-benchmark/src/main/java/io/prestosql/benchmark/AverageBenchmarkResults.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDowNzozNFrOFln2qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDowNzozNFrOFln2qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk5NDYwMg==", "bodyText": "Let's put the rounding in the caller. I'd prefer to keep this returning double.", "url": "https://github.com/trinodb/trino/pull/2642#discussion_r374994602", "createdAt": "2020-02-05T00:07:34Z", "author": {"login": "electrum"}, "path": "presto-benchmark/src/main/java/io/prestosql/benchmark/AverageBenchmarkResults.java", "diffHunk": "@@ -44,9 +44,9 @@ public BenchmarkResultHook addResults(Map<String, Long> results)\n         return this;\n     }\n \n-    public Map<String, Double> getAverageResultsValues()\n+    public Map<String, Long> getAverageResultsValues()\n     {\n-        return Maps.transformValues(resultsSum, input -> 1.0 * input / resultsCount);\n+        return Maps.transformValues(resultsSum, input -> Math.round(((double) input) / resultsCount));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxOTE1NzQxOnYy", "diffSide": "RIGHT", "path": "presto-cli/src/main/java/io/prestosql/cli/FormatUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDoxMDo1MVrOFln5sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDoxMDo1MVrOFln5sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk5NTM3OQ==", "bodyText": "This needs to stay as a double so that the NaN / infinity check below works (or restructure the code to account for the cases where divisor and possibly dividend is zero).", "url": "https://github.com/trinodb/trino/pull/2642#discussion_r374995379", "createdAt": "2020-02-05T00:10:51Z", "author": {"login": "electrum"}, "path": "presto-cli/src/main/java/io/prestosql/cli/FormatUtils.java", "diffHunk": "@@ -114,7 +114,7 @@ else if (longForm) {\n \n     public static String formatDataRate(DataSize dataSize, Duration duration, boolean longForm)\n     {\n-        double rate = dataSize.toBytes() / duration.getValue(SECONDS);\n+        long rate = Math.round(dataSize.toBytes() / duration.getValue(SECONDS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxOTIwNDIyOnYy", "diffSide": "RIGHT", "path": "src/modernizer/violations.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDozNzo0OFrOFloVpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDozNzo0OFrOFloVpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTAwMjUzMg==", "bodyText": "Add a -- before \"note\" to separate the two sentences", "url": "https://github.com/trinodb/trino/pull/2642#discussion_r375002532", "createdAt": "2020-02-05T00:37:48Z", "author": {"login": "electrum"}, "path": "src/modernizer/violations.xml", "diffHunk": "@@ -59,4 +59,46 @@\n         <version>1.6</version>\n         <comment>Prefer OGCGeometry.Equals(OGCGeometry)</comment>\n     </violation>\n+\n+    <violation>\n+        <name>io/airlift/units/DataSize.\"&lt;init&gt;\":(DLio/airlift/units/DataSize$Unit;)V</name>\n+        <version>1.8</version>\n+        <comment>Use io.airlift.units.DataSize.of(long, DataSize.Unit)</comment>\n+    </violation>\n+\n+    <violation>\n+        <name>io/airlift/units/DataSize.succinctDataSize:(DLio/airlift/units/DataSize$Unit;)Lio/airlift/units/DataSize;</name>\n+        <version>1.8</version>\n+        <comment>Use io.airlift.units.DataSize.of(long, DataSize.Unit).succinct() Note that succinct conversion only affects toString() results</comment>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 959, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}