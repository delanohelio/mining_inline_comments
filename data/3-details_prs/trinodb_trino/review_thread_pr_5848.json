{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MzM0NjAz", "number": 5848, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowNToxNVrOE19OLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNTozNDowMVrOE2IhVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDEzMDM3OnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowNToxNVrOHuhOkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMDoxMDoxOVrOHun4Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MDk0NQ==", "bodyText": "Is this a known issue for testcontainers?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518540945", "createdAt": "2020-11-06T06:05:15Z", "author": {"login": "kokosing"}, "path": "pom.xml", "diffHunk": "@@ -1289,11 +1290,25 @@\n             <dependency>\n                 <groupId>org.testcontainers</groupId>\n                 <artifactId>testcontainers-bom</artifactId>\n-                <version>1.14.3</version>\n+                <!-- TODO update to released version. The update to RC was urgently needed due to https://github.com/testcontainers/testcontainers-java/issues/3166 -->\n+                <version>${dep.testcontainers.version}</version>\n                 <type>pom</type>\n                 <scope>import</scope>\n             </dependency>\n \n+            <dependency>\n+                <groupId>org.testcontainers</groupId>\n+                <artifactId>testcontainers</artifactId>\n+                <version>${dep.testcontainers.version}</version>\n+            </dependency>\n+\n+            <dependency>\n+                <!-- org.testcontainers:testcontainer's dependencies pull two different versions of this artifact and this is to negotiate the version -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU3NTMxMA==", "bodyText": "this i do not know", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518575310", "createdAt": "2020-11-06T07:50:10Z", "author": {"login": "findepi"}, "path": "pom.xml", "diffHunk": "@@ -1289,11 +1290,25 @@\n             <dependency>\n                 <groupId>org.testcontainers</groupId>\n                 <artifactId>testcontainers-bom</artifactId>\n-                <version>1.14.3</version>\n+                <!-- TODO update to released version. The update to RC was urgently needed due to https://github.com/testcontainers/testcontainers-java/issues/3166 -->\n+                <version>${dep.testcontainers.version}</version>\n                 <type>pom</type>\n                 <scope>import</scope>\n             </dependency>\n \n+            <dependency>\n+                <groupId>org.testcontainers</groupId>\n+                <artifactId>testcontainers</artifactId>\n+                <version>${dep.testcontainers.version}</version>\n+            </dependency>\n+\n+            <dependency>\n+                <!-- org.testcontainers:testcontainer's dependencies pull two different versions of this artifact and this is to negotiate the version -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MDk0NQ=="}, "originalCommit": null, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY0NDM4MQ==", "bodyText": "i mentioned this to @bsideup over slack", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518644381", "createdAt": "2020-11-06T10:00:27Z", "author": {"login": "findepi"}, "path": "pom.xml", "diffHunk": "@@ -1289,11 +1290,25 @@\n             <dependency>\n                 <groupId>org.testcontainers</groupId>\n                 <artifactId>testcontainers-bom</artifactId>\n-                <version>1.14.3</version>\n+                <!-- TODO update to released version. The update to RC was urgently needed due to https://github.com/testcontainers/testcontainers-java/issues/3166 -->\n+                <version>${dep.testcontainers.version}</version>\n                 <type>pom</type>\n                 <scope>import</scope>\n             </dependency>\n \n+            <dependency>\n+                <groupId>org.testcontainers</groupId>\n+                <artifactId>testcontainers</artifactId>\n+                <version>${dep.testcontainers.version}</version>\n+            </dependency>\n+\n+            <dependency>\n+                <!-- org.testcontainers:testcontainer's dependencies pull two different versions of this artifact and this is to negotiate the version -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MDk0NQ=="}, "originalCommit": null, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY0OTg5OQ==", "bodyText": "FTR reporting an issue (so that it can be tracked and even picked up by the community) is always preferred over mentioning things on Slack :)", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518649899", "createdAt": "2020-11-06T10:10:19Z", "author": {"login": "bsideup"}, "path": "pom.xml", "diffHunk": "@@ -1289,11 +1290,25 @@\n             <dependency>\n                 <groupId>org.testcontainers</groupId>\n                 <artifactId>testcontainers-bom</artifactId>\n-                <version>1.14.3</version>\n+                <!-- TODO update to released version. The update to RC was urgently needed due to https://github.com/testcontainers/testcontainers-java/issues/3166 -->\n+                <version>${dep.testcontainers.version}</version>\n                 <type>pom</type>\n                 <scope>import</scope>\n             </dependency>\n \n+            <dependency>\n+                <groupId>org.testcontainers</groupId>\n+                <artifactId>testcontainers</artifactId>\n+                <version>${dep.testcontainers.version}</version>\n+            </dependency>\n+\n+            <dependency>\n+                <!-- org.testcontainers:testcontainer's dependencies pull two different versions of this artifact and this is to negotiate the version -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MDk0NQ=="}, "originalCommit": null, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDEzMjQ1OnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowNjozM1rOHuhP4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNzo1MDo0M1rOHujV3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTI4Mw==", "bodyText": "method reference?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518541283", "createdAt": "2020-11-06T06:06:33Z", "author": {"login": "kokosing"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -79,9 +82,14 @@ public TestPasswordAuthentication()\n     public final void destroy()\n             throws IOException\n     {\n-        assertions.close();\n-        elasticsearch.stop();\n-        client.close();\n+        Closeables.closeAll(\n+                () -> assertions.close(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU3NTU4Mg==", "bodyText": "no, because i want the closeAll to be invoked even if one of the references is null", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518575582", "createdAt": "2020-11-06T07:50:43Z", "author": {"login": "findepi"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -79,9 +82,14 @@ public TestPasswordAuthentication()\n     public final void destroy()\n             throws IOException\n     {\n-        assertions.close();\n-        elasticsearch.stop();\n-        client.close();\n+        Closeables.closeAll(\n+                () -> assertions.close(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTI4Mw=="}, "originalCommit": null, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDEzMjY0OnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowNjozOFrOHuhP_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowNjozOFrOHuhP_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTMxMA==", "bodyText": "static import", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518541310", "createdAt": "2020-11-06T06:06:38Z", "author": {"login": "kokosing"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -79,9 +82,14 @@ public TestPasswordAuthentication()\n     public final void destroy()\n             throws IOException\n     {\n-        assertions.close();\n-        elasticsearch.stop();\n-        client.close();\n+        Closeables.closeAll(", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDEzNTE1OnYy", "diffSide": "RIGHT", "path": "presto-atop/src/test/java/io/prestosql/plugin/atop/TestAtopSecurity.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowODowN1rOHuhReQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMDowMzowMlrOHunoYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTY4OQ==", "bodyText": "shouldn't this be squashed with previous commit?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518541689", "createdAt": "2020-11-06T06:08:07Z", "author": {"login": "kokosing"}, "path": "presto-atop/src/test/java/io/prestosql/plugin/atop/TestAtopSecurity.java", "diffHunk": "@@ -36,10 +36,10 @@\n \n     @BeforeClass\n     public void setUp()\n-            throws IOException\n+            throws Exception\n     {\n         Path atopExecutable = Files.createTempFile(null, null);\n-        String path = Resources.getResource(getClass(), \"security.json\").getPath();\n+        String path = new File(Resources.getResource(getClass(), \"security.json\").toURI()).getPath();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU3NTk1Nw==", "bodyText": "Why would it be?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518575957", "createdAt": "2020-11-06T07:51:42Z", "author": {"login": "findepi"}, "path": "presto-atop/src/test/java/io/prestosql/plugin/atop/TestAtopSecurity.java", "diffHunk": "@@ -36,10 +36,10 @@\n \n     @BeforeClass\n     public void setUp()\n-            throws IOException\n+            throws Exception\n     {\n         Path atopExecutable = Files.createTempFile(null, null);\n-        String path = Resources.getResource(getClass(), \"security.json\").getPath();\n+        String path = new File(Resources.getResource(getClass(), \"security.json\").toURI()).getPath();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTY4OQ=="}, "originalCommit": null, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYxNjc2Ng==", "bodyText": "What is the difference? What is returned by Resources.getResource(getClass(), \"security.json\").getPath();? Does it return file://..? And your change here is to cut it off? Am I right?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518616766", "createdAt": "2020-11-06T09:12:58Z", "author": {"login": "kokosing"}, "path": "presto-atop/src/test/java/io/prestosql/plugin/atop/TestAtopSecurity.java", "diffHunk": "@@ -36,10 +36,10 @@\n \n     @BeforeClass\n     public void setUp()\n-            throws IOException\n+            throws Exception\n     {\n         Path atopExecutable = Files.createTempFile(null, null);\n-        String path = Resources.getResource(getClass(), \"security.json\").getPath();\n+        String path = new File(Resources.getResource(getClass(), \"security.json\").toURI()).getPath();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTY4OQ=="}, "originalCommit": null, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY0NTg1OQ==", "bodyText": "Resources.getResource  / getClass().getResouce / ClassLoader.getResouce returns an URL.\nURL.getPath returns ... well, path component of the URL, regardless whether it was file:, jar:, http: or myurl:. Also, getPath can be something slightly different then FS path, since (i think) it can contain URL escape sequences. Going thru new File(URI) addresses those issues.", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518645859", "createdAt": "2020-11-06T10:03:02Z", "author": {"login": "findepi"}, "path": "presto-atop/src/test/java/io/prestosql/plugin/atop/TestAtopSecurity.java", "diffHunk": "@@ -36,10 +36,10 @@\n \n     @BeforeClass\n     public void setUp()\n-            throws IOException\n+            throws Exception\n     {\n         Path atopExecutable = Files.createTempFile(null, null);\n-        String path = Resources.getResource(getClass(), \"security.json\").getPath();\n+        String path = new File(Resources.getResource(getClass(), \"security.json\").toURI()).getPath();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTY4OQ=="}, "originalCommit": null, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDEzNTYwOnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestElasticsearch7IntegrationSmokeTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjowODoyMlrOHuhRwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNzoxMDoyN1rOHuiZeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTc2MQ==", "bodyText": "why it changed?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518541761", "createdAt": "2020-11-06T06:08:22Z", "author": {"login": "kokosing"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestElasticsearch7IntegrationSmokeTest.java", "diffHunk": "@@ -20,7 +20,7 @@\n {\n     public TestElasticsearch7IntegrationSmokeTest()\n     {\n-        super(\"elasticsearch:7.0.0\");\n+        super(\"docker.elastic.co/elasticsearch/elasticsearch:7.0.0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU2MDEyMQ==", "bodyText": "Indeed. If I recall correctly, the images from docker.elastic.co are the commercial images, so the choice to use the official docker images from dockerhub was intentional.", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518560121", "createdAt": "2020-11-06T07:10:27Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestElasticsearch7IntegrationSmokeTest.java", "diffHunk": "@@ -20,7 +20,7 @@\n {\n     public TestElasticsearch7IntegrationSmokeTest()\n     {\n-        super(\"elasticsearch:7.0.0\");\n+        super(\"docker.elastic.co/elasticsearch/elasticsearch:7.0.0\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU0MTc2MQ=="}, "originalCommit": null, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDI1MTM4OnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNzowNjo1OFrOHuiUzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNTowMTowMVrOHuxc_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU1ODkyNg==", "bodyText": "\"Move resource allocation out of test constructor\"\n\nWhy?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518558926", "createdAt": "2020-11-06T07:06:58Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -19,6 +19,7 @@\n import com.google.common.collect.ImmutableMap;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU3Njk1MQ==", "bodyText": "Because\n\nresources allocated in constructor are held during all tests' execution duration, not only when tests from given class are being executed\nfailure to allocate them is nicely swallowed by surefire, so you do not know what happened", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518576951", "createdAt": "2020-11-06T07:54:09Z", "author": {"login": "findepi"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -19,6 +19,7 @@\n import com.google.common.collect.ImmutableMap;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU1ODkyNg=="}, "originalCommit": null, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwMTg2MA==", "bodyText": "Ok, please add that to the commit message", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518801860", "createdAt": "2020-11-06T14:53:31Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -19,6 +19,7 @@\n import com.google.common.collect.ImmutableMap;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU1ODkyNg=="}, "originalCommit": null, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNjc4MQ==", "bodyText": "added", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518806781", "createdAt": "2020-11-06T15:01:01Z", "author": {"login": "findepi"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/TestPasswordAuthentication.java", "diffHunk": "@@ -19,6 +19,7 @@\n import com.google.common.collect.ImmutableMap;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU1ODkyNg=="}, "originalCommit": null, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MTk4MTY3OnYy", "diffSide": "RIGHT", "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/ElasticsearchServer.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNTozNDowMVrOHuyz5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNTo1OTowNFrOHuzyPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyOTAzMQ==", "bodyText": "What\u2019s this?", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518829031", "createdAt": "2020-11-06T15:34:01Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/ElasticsearchServer.java", "diffHunk": "@@ -35,7 +36,8 @@\n     public ElasticsearchServer(String image, Map<String, String> configurationFiles)\n             throws IOException\n     {\n-        container = new ElasticsearchContainer(image);\n+        DockerImageName dockerImageName = DockerImageName.parse(image).asCompatibleSubstituteFor(\"docker.elastic.co/elasticsearch/elasticsearch\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3defb197f8a76ccd5c190b83162544d0e8dcfce2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgzMDAwNQ==", "bodyText": "see \"Add image compatibility checks\" in release notes at https://github.com/testcontainers/testcontainers-java/releases/tag/1.15.0", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518830005", "createdAt": "2020-11-06T15:35:31Z", "author": {"login": "findepi"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/ElasticsearchServer.java", "diffHunk": "@@ -35,7 +36,8 @@\n     public ElasticsearchServer(String image, Map<String, String> configurationFiles)\n             throws IOException\n     {\n-        container = new ElasticsearchContainer(image);\n+        DockerImageName dockerImageName = DockerImageName.parse(image).asCompatibleSubstituteFor(\"docker.elastic.co/elasticsearch/elasticsearch\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyOTAzMQ=="}, "originalCommit": {"oid": "3defb197f8a76ccd5c190b83162544d0e8dcfce2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgzMzI1OQ==", "bodyText": "Not sure I understand why we need it here, though. The official images for the open source version of ES are the ones in docker hub.", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518833259", "createdAt": "2020-11-06T15:40:33Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/ElasticsearchServer.java", "diffHunk": "@@ -35,7 +36,8 @@\n     public ElasticsearchServer(String image, Map<String, String> configurationFiles)\n             throws IOException\n     {\n-        container = new ElasticsearchContainer(image);\n+        DockerImageName dockerImageName = DockerImageName.parse(image).asCompatibleSubstituteFor(\"docker.elastic.co/elasticsearch/elasticsearch\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyOTAzMQ=="}, "originalCommit": {"oid": "3defb197f8a76ccd5c190b83162544d0e8dcfce2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg0MTM5MQ==", "bodyText": "This is called with\n\nelasticsearch:7.8.0 from  TestPasswordAuthentication\nelasticsearch:7.0.0 from TestElasticsearch7IntegrationSmokeTest\ndocker.elastic.co/elasticsearch/elasticsearch-oss:6.0.0 from TestElasticsearch6IntegrationSmokeTest", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518841391", "createdAt": "2020-11-06T15:53:24Z", "author": {"login": "findepi"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/ElasticsearchServer.java", "diffHunk": "@@ -35,7 +36,8 @@\n     public ElasticsearchServer(String image, Map<String, String> configurationFiles)\n             throws IOException\n     {\n-        container = new ElasticsearchContainer(image);\n+        DockerImageName dockerImageName = DockerImageName.parse(image).asCompatibleSubstituteFor(\"docker.elastic.co/elasticsearch/elasticsearch\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyOTAzMQ=="}, "originalCommit": {"oid": "3defb197f8a76ccd5c190b83162544d0e8dcfce2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg0NDk4OQ==", "bodyText": "The last one is because there's no 6.0.0 available in docker hub", "url": "https://github.com/trinodb/trino/pull/5848#discussion_r518844989", "createdAt": "2020-11-06T15:59:04Z", "author": {"login": "martint"}, "path": "presto-elasticsearch/src/test/java/io/prestosql/elasticsearch/ElasticsearchServer.java", "diffHunk": "@@ -35,7 +36,8 @@\n     public ElasticsearchServer(String image, Map<String, String> configurationFiles)\n             throws IOException\n     {\n-        container = new ElasticsearchContainer(image);\n+        DockerImageName dockerImageName = DockerImageName.parse(image).asCompatibleSubstituteFor(\"docker.elastic.co/elasticsearch/elasticsearch\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyOTAzMQ=="}, "originalCommit": {"oid": "3defb197f8a76ccd5c190b83162544d0e8dcfce2"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4964, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}