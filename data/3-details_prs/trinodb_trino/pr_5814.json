{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MzEyMjM1", "number": 5814, "title": "Propagate stat calculation failures in tests", "bodyText": "Motivation: 50e3fcc", "createdAt": "2020-11-04T11:11:12Z", "url": "https://github.com/trinodb/trino/pull/5814", "merged": true, "mergeCommit": {"oid": "28095d9fff8d1df49eb13f3f2d60b6ede35e46a9"}, "closed": true, "closedAt": "2020-11-05T11:27:34Z", "author": {"login": "findepi"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZPlE-gBqjM5NTgxNzE5MTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZf1bAgFqTUyNDEyMTMyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fc535929ff05c2d31b47925053561a0d87f2fc3", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/7fc535929ff05c2d31b47925053561a0d87f2fc3", "committedDate": "2020-11-05T08:11:46Z", "message": "Fix partition key min/max derivation when NaN\n\nPreviously the code was implicitly ignoring NaN values, unless partition\nwith NaN was first on the list."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "843576428bbfb92878ea30ad3e5830e41ed54a58", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/843576428bbfb92878ea30ad3e5830e41ed54a58", "committedDate": "2020-11-05T08:11:46Z", "message": "Install SystemAccessControl in tests\n\nThis allows a session to have a system session property. Without\n`AllowAllSystemAccessControl`, this would fail with:\n\n```\nio.prestosql.spi.PrestoException: Presto server is still initializing\n\tat io.prestosql.security.AccessControlManager$InitializingSystemAccessControl.delegate(AccessControlManager.java:1063)\n\tat io.prestosql.plugin.base.security.ForwardingSystemAccessControl.checkCanSetSystemSessionProperty(ForwardingSystemAccessControl.java:106)\n\tat io.prestosql.security.AccessControlManager.lambda$checkCanSetSystemSessionProperty$63(AccessControlManager.java:735)\n\tat io.prestosql.security.AccessControlManager.systemAuthorizationCheck(AccessControlManager.java:984)\n\tat io.prestosql.security.AccessControlManager.checkCanSetSystemSessionProperty(AccessControlManager.java:735)\n```"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39b04c7e500baffe8de1c03174a0cf82a2933adb", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/39b04c7e500baffe8de1c03174a0cf82a2933adb", "committedDate": "2020-11-05T08:11:46Z", "message": "Propagate stat calculation failures in tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "39b04c7e500baffe8de1c03174a0cf82a2933adb", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/39b04c7e500baffe8de1c03174a0cf82a2933adb", "committedDate": "2020-11-05T08:11:46Z", "message": "Propagate stat calculation failures in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28014dd2934823419450f6f2adaf4bb5ee83abd2", "author": {"user": {"login": "findepi", "name": "Piotr Findeisen"}}, "url": "https://github.com/trinodb/trino/commit/28014dd2934823419450f6f2adaf4bb5ee83abd2", "committedDate": "2020-11-05T10:17:53Z", "message": "empty"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MTIxMzI0", "url": "https://github.com/trinodb/trino/pull/5814#pullrequestreview-524121324", "createdAt": "2020-11-05T10:27:13Z", "commit": {"oid": "7fc535929ff05c2d31b47925053561a0d87f2fc3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyNzoxM1rOHt806w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyNzoxM1rOHt806w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0NDU1NQ==", "bodyText": "let's have a new dedicated test, instead of making this one more complicate", "url": "https://github.com/trinodb/trino/pull/5814#discussion_r517944555", "createdAt": "2020-11-05T10:27:13Z", "author": {"login": "kokosing"}, "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -349,22 +349,44 @@ public void testJoinPartitionedWithMissingPartitionFilter()\n     @Test\n     public void testNaNPartition()\n     {\n+        // Only NaN partition\n         assertUpdate(\"DROP TABLE IF EXISTS test_nan_partition\");\n         assertUpdate(\"CREATE TABLE test_nan_partition(a varchar, d double) WITH (partitioned_by = ARRAY['d'])\");\n+        assertUpdate(\"INSERT INTO test_nan_partition VALUES ('b', nan())\", 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fc535929ff05c2d31b47925053561a0d87f2fc3"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2811, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}