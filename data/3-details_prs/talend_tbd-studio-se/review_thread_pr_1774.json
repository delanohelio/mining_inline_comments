{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MzU0Njky", "number": 1774, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoyNTo0N1rOFE-y1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQwODowMDozOVrOFKPhPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzY3NDQ3OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.hadoop.distribution/src/main/java/org/talend/hadoop/distribution/dynamic/template/modulegroup/cdp/DynamicCDPSparkBatchModuleGroup.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoyNTo0N1rOIFQTHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNzo1Mzo0MVrOIF9ddA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM4MDgzMA==", "bodyText": "Would be better to plug this in node module group for s3 components only to avoid adding those aws libs on all Spark jobs.\nCan be done in https://github.com/Talend/tbd-studio-se/blob/maintenance/7.3/main/plugins/org.talend.hadoop.distribution/src/main/java/org/talend/hadoop/distribution/dynamic/template/DynamicSparkBatchModuleGroupTemplate.java#L67", "url": "https://github.com/Talend/tbd-studio-se/pull/1774#discussion_r542380830", "createdAt": "2020-12-14T13:25:47Z", "author": {"login": "lbourgeois"}, "path": "main/plugins/org.talend.hadoop.distribution/src/main/java/org/talend/hadoop/distribution/dynamic/template/modulegroup/cdp/DynamicCDPSparkBatchModuleGroup.java", "diffHunk": "@@ -89,6 +92,9 @@ protected void initConditions() {\n                     new BasicExpression(SparkBatchConstant.USE_CLOUDERA_NAVIGATOR));\r\n             moduleGroups.add(new DistributionModuleGroup(talendClouderaNaviRuntimeId, true, conditionUseNavigator));\r\n         }\r\n+        if (StringUtils.isNotBlank(sparkS3RuntimeId)) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2ac8ea82f2175da7b2c64a7a310eaedfa04af1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMDc1Ng==", "bodyText": "I'm guessing it should be DynamicCDPSparkBatchModuleGroupTemplate instead of DynamicSparkBatchModuleGroupTemplate ? Too many extends for this part really ... Imho that whole thing should be just one class because it seems pretty common to import S3 libs in case theres a S3 component in a job ... I don't get why we need those module condition for all distribs :(", "url": "https://github.com/Talend/tbd-studio-se/pull/1774#discussion_r543120756", "createdAt": "2020-12-15T07:53:41Z", "author": {"login": "AlixMetivier"}, "path": "main/plugins/org.talend.hadoop.distribution/src/main/java/org/talend/hadoop/distribution/dynamic/template/modulegroup/cdp/DynamicCDPSparkBatchModuleGroup.java", "diffHunk": "@@ -89,6 +92,9 @@ protected void initConditions() {\n                     new BasicExpression(SparkBatchConstant.USE_CLOUDERA_NAVIGATOR));\r\n             moduleGroups.add(new DistributionModuleGroup(talendClouderaNaviRuntimeId, true, conditionUseNavigator));\r\n         }\r\n+        if (StringUtils.isNotBlank(sparkS3RuntimeId)) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM4MDgzMA=="}, "originalCommit": {"oid": "db2ac8ea82f2175da7b2c64a7a310eaedfa04af1"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2Mjg0MzUxOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.hadoop.distribution.cdp/src/main/java/org/talend/hadoop/distribution/cdp/CDP7xDistributionTemplate.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQwODowMDozOVrOIM7JPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQwODowMzoyN1rOIM7K6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQyMjg0Nw==", "bodyText": "Just to my knowledge : we support s3a for CDP, right?", "url": "https://github.com/Talend/tbd-studio-se/pull/1774#discussion_r550422847", "createdAt": "2020-12-31T08:00:39Z", "author": {"login": "sponomarova"}, "path": "main/plugins/org.talend.hadoop.distribution.cdp/src/main/java/org/talend/hadoop/distribution/cdp/CDP7xDistributionTemplate.java", "diffHunk": "@@ -269,6 +269,11 @@ public boolean doImportDynamoDBDependencies() {\n \tpublic boolean doSupportAssumeRole() {\n \t\treturn true;\n \t}\n+\t\n+\t@Override\n+    public boolean useS3AProperties() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "771a15344ae8f4b69f5681629c9063864d284eeb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQyMzI3Mg==", "bodyText": "SInce https://jira.talendforge.org/browse/TBD-9385 is delivered, s3a is the only option available", "url": "https://github.com/Talend/tbd-studio-se/pull/1774#discussion_r550423272", "createdAt": "2020-12-31T08:03:27Z", "author": {"login": "hliashchuk"}, "path": "main/plugins/org.talend.hadoop.distribution.cdp/src/main/java/org/talend/hadoop/distribution/cdp/CDP7xDistributionTemplate.java", "diffHunk": "@@ -269,6 +269,11 @@ public boolean doImportDynamoDBDependencies() {\n \tpublic boolean doSupportAssumeRole() {\n \t\treturn true;\n \t}\n+\t\n+\t@Override\n+    public boolean useS3AProperties() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQyMjg0Nw=="}, "originalCommit": {"oid": "771a15344ae8f4b69f5681629c9063864d284eeb"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4756, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}