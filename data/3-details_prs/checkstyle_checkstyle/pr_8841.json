{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5OTA2MDcx", "number": 8841, "title": "Issue #8805: move misc ci stuff to semaphore", "bodyText": "issue #8805\nThe file .ci/semaphoreci.yaml renamed back to default name .semaphore/semaphore.yaml. Without this change the build is missing from the list of checks.\nChecks moved to semaphore:\n\nall-sevntu-checks\nno-error-pmd\nno-violation-test-josm (disabled)\nno-exception-test-*", "createdAt": "2020-09-20T13:47:04Z", "url": "https://github.com/checkstyle/checkstyle/pull/8841", "merged": true, "mergeCommit": {"oid": "2a66bfafdf7293907b802fa41eb61b731725cdd2"}, "closed": true, "closedAt": "2020-09-22T15:02:01Z", "author": {"login": "pbludov"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKvLlQABqjM3ODYxMTAwNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLXFYnABqjM3OTI5ODUyNTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cccf36fbc85fae5c3f6b4c4ba419597c2b810cb5", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cccf36fbc85fae5c3f6b4c4ba419597c2b810cb5", "committedDate": "2020-09-20T13:44:47Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "b0a0510705a612206ef7554073b58531ecef03b5", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b0a0510705a612206ef7554073b58531ecef03b5", "committedDate": "2020-09-20T13:54:30Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0a0510705a612206ef7554073b58531ecef03b5", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b0a0510705a612206ef7554073b58531ecef03b5", "committedDate": "2020-09-20T13:54:30Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "18cfafce70fe8a0fec798d146232690056b33812", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/18cfafce70fe8a0fec798d146232690056b33812", "committedDate": "2020-09-20T14:16:36Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18cfafce70fe8a0fec798d146232690056b33812", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/18cfafce70fe8a0fec798d146232690056b33812", "committedDate": "2020-09-20T14:16:36Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "9ceee77564758bae25ff898780d4ac0c639f8acb", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/9ceee77564758bae25ff898780d4ac0c639f8acb", "committedDate": "2020-09-20T14:17:44Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ceee77564758bae25ff898780d4ac0c639f8acb", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/9ceee77564758bae25ff898780d4ac0c639f8acb", "committedDate": "2020-09-20T14:17:44Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "10a72a5dac12f90b3e25918118204432e013d668", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/10a72a5dac12f90b3e25918118204432e013d668", "committedDate": "2020-09-20T14:41:24Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10a72a5dac12f90b3e25918118204432e013d668", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/10a72a5dac12f90b3e25918118204432e013d668", "committedDate": "2020-09-20T14:41:24Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "28da7238fa563339d0bf3ee258583eb07a1cb5cb", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/28da7238fa563339d0bf3ee258583eb07a1cb5cb", "committedDate": "2020-09-20T14:57:16Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28da7238fa563339d0bf3ee258583eb07a1cb5cb", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/28da7238fa563339d0bf3ee258583eb07a1cb5cb", "committedDate": "2020-09-20T14:57:16Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "a1833bd8241997c5c9e2b4cf8c66aff27406ee5c", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a1833bd8241997c5c9e2b4cf8c66aff27406ee5c", "committedDate": "2020-09-20T15:09:01Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1833bd8241997c5c9e2b4cf8c66aff27406ee5c", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a1833bd8241997c5c9e2b4cf8c66aff27406ee5c", "committedDate": "2020-09-20T15:09:01Z", "message": "Issue #8805: add spotbugs and pmd to semaphore ci"}, "afterCommit": {"oid": "39cec6857b8633803e5323852a439f6778b996f2", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/39cec6857b8633803e5323852a439f6778b996f2", "committedDate": "2020-09-20T15:45:51Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39cec6857b8633803e5323852a439f6778b996f2", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/39cec6857b8633803e5323852a439f6778b996f2", "committedDate": "2020-09-20T15:45:51Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "5fa9e74b5eefcc55ddf05e6ec01289a5b36346d5", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5fa9e74b5eefcc55ddf05e6ec01289a5b36346d5", "committedDate": "2020-09-20T15:50:14Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fa9e74b5eefcc55ddf05e6ec01289a5b36346d5", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5fa9e74b5eefcc55ddf05e6ec01289a5b36346d5", "committedDate": "2020-09-20T15:50:14Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "bbf7e447e2f53fc1bcad78b409d4855fa72294b7", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/bbf7e447e2f53fc1bcad78b409d4855fa72294b7", "committedDate": "2020-09-20T15:56:36Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbf7e447e2f53fc1bcad78b409d4855fa72294b7", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/bbf7e447e2f53fc1bcad78b409d4855fa72294b7", "committedDate": "2020-09-20T15:56:36Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "aefec7468e1f9da2678c633dcae2b440eb05ffc9", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/aefec7468e1f9da2678c633dcae2b440eb05ffc9", "committedDate": "2020-09-20T16:03:03Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aefec7468e1f9da2678c633dcae2b440eb05ffc9", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/aefec7468e1f9da2678c633dcae2b440eb05ffc9", "committedDate": "2020-09-20T16:03:03Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "436e4a146208a19188c4e598e4530767d24af0cc", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/436e4a146208a19188c4e598e4530767d24af0cc", "committedDate": "2020-09-20T16:03:26Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "436e4a146208a19188c4e598e4530767d24af0cc", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/436e4a146208a19188c4e598e4530767d24af0cc", "committedDate": "2020-09-20T16:03:26Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "6d6f282403e0c6bb5894912035f20dd8350ef36d", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6d6f282403e0c6bb5894912035f20dd8350ef36d", "committedDate": "2020-09-20T16:04:23Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d6f282403e0c6bb5894912035f20dd8350ef36d", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6d6f282403e0c6bb5894912035f20dd8350ef36d", "committedDate": "2020-09-20T16:04:23Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "27941aea9c710521531da3ef5984c2235f3347db", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/27941aea9c710521531da3ef5984c2235f3347db", "committedDate": "2020-09-20T17:19:29Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27941aea9c710521531da3ef5984c2235f3347db", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/27941aea9c710521531da3ef5984c2235f3347db", "committedDate": "2020-09-20T17:19:29Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "b8e966532991e76f55aabe8df5c12d217768d918", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b8e966532991e76f55aabe8df5c12d217768d918", "committedDate": "2020-09-20T17:21:42Z", "message": "Issue #8805: move misc ci stuff to semaphore"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjkwMTc4", "url": "https://github.com/checkstyle/checkstyle/pull/8841#pullrequestreview-492290178", "createdAt": "2020-09-21T05:44:50Z", "commit": {"oid": "b8e966532991e76f55aabe8df5c12d217768d918"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwNTo0NDo1MFrOHVBSTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwNTo0NDo1MFrOHVBSTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTgwMzIxNA==", "bodyText": "As we started moving execution,\nIt makes sense to do\n./no-exception-test.sh alot-of-project1\nAnd any CI can execute such command, even user ecute validation command.\nAnd we can easily move commands between CI without modification of she'll files.", "url": "https://github.com/checkstyle/checkstyle/pull/8841#discussion_r491803214", "createdAt": "2020-09-21T05:44:50Z", "author": {"login": "romani"}, "path": ".semaphore/semaphore.yml", "diffHunk": "@@ -0,0 +1,58 @@\n+version: v1.0\n+name: \"Checkstyle CI pipeline on Semaphore\"\n+agent:\n+  machine:\n+    type: e1-standard-2\n+    os_image: ubuntu1804\n+auto_cancel:\n+  running:\n+    when: \"branch != 'master'\"\n+blocks:\n+  - name: \"Linux openjdk 11 build\"\n+    task:\n+      prologue:\n+        commands:\n+          - checkout\n+          - cache restore m2\n+          - eval \"export M2_CACHE_SIZE=$(du -s $HOME/.m2 | cut -f1)\"\n+          - sudo apt-get update\n+          - sudo apt-get install -y ant groovy xsltproc xmlstarlet\n+          - sem-version java 11\n+      epilogue:\n+        commands:\n+          - |\n+            if [[ ${M2_CACHE_SIZE} -ne $(du -s $HOME/.m2 | cut -f1) ]]\n+            then\n+              cache delete m2\n+              cache store m2 $HOME/.m2\n+            fi\n+      jobs:\n+        - name: Ensure that all Sevntu check are used\n+          commands:\n+            - .ci/semaphore.sh all-sevntu-checks\n+\n+        - name: No error test on pmd\n+          commands:\n+            - .ci/semaphore.sh no-error-pmd\n+\n+        #  Disabled due to instability\n+        #  - name: No violation testing on josm\n+        #    commands:\n+        #      - .ci/semaphore.sh no-violation-test-josm\n+\n+        - name: No exception test\n+          matrix:\n+            - env_var: PROJECT\n+              values:\n+                - checkstyle-sevntu-checkstyle\n+                - guava\n+                - guava-with-google-checks\n+                - guava-with-sun-checks\n+                - hibernate\n+                - spotbugs\n+                - spring-framework\n+                - hbase\n+                - pmd-elasticsearch-lombok-ast\n+                - alot-of-project1\n+          commands:\n+            - .ci/semaphore.sh no-exception-test-$PROJECT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8e966532991e76f55aabe8df5c12d217768d918"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8e966532991e76f55aabe8df5c12d217768d918", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b8e966532991e76f55aabe8df5c12d217768d918", "committedDate": "2020-09-20T17:21:42Z", "message": "Issue #8805: move misc ci stuff to semaphore"}, "afterCommit": {"oid": "5bf3824d2dbdc9c9dc73f4e992ffb73e4683dfdd", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5bf3824d2dbdc9c9dc73f4e992ffb73e4683dfdd", "committedDate": "2020-09-21T06:12:54Z", "message": "Issue #8805: move all-sevntu-checks, no-exception-tests, no-error-pmd, no-violation-test-josm to semaphore ci"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5bf3824d2dbdc9c9dc73f4e992ffb73e4683dfdd", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5bf3824d2dbdc9c9dc73f4e992ffb73e4683dfdd", "committedDate": "2020-09-21T06:12:54Z", "message": "Issue #8805: move all-sevntu-checks, no-exception-tests, no-error-pmd, no-violation-test-josm to semaphore ci"}, "afterCommit": {"oid": "950ec3031711bca8cb721055b02a78e71ff85557", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/950ec3031711bca8cb721055b02a78e71ff85557", "committedDate": "2020-09-21T06:36:05Z", "message": "Issue #8805: move eclipse, nondex to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f4685144babef656efd14dda4356435d5d00ee6", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0f4685144babef656efd14dda4356435d5d00ee6", "committedDate": "2020-09-21T06:59:24Z", "message": "Issue #8805: move eclipse, nondex, pitest to semaphore"}, "afterCommit": {"oid": "f1c61b97d3cdf7a492b0cd80882ebe1732bba28f", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f1c61b97d3cdf7a492b0cd80882ebe1732bba28f", "committedDate": "2020-09-21T07:09:06Z", "message": "Issue #8805: move eclipse, nondex, pitest to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1c61b97d3cdf7a492b0cd80882ebe1732bba28f", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f1c61b97d3cdf7a492b0cd80882ebe1732bba28f", "committedDate": "2020-09-21T07:09:06Z", "message": "Issue #8805: move eclipse, nondex, pitest to semaphore"}, "afterCommit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/545c7931bbe04ed988e7c590a2bd7d6c9f082235", "committedDate": "2020-09-21T07:26:37Z", "message": "Issue #8805: move eclipse, nondex, pitest to semaphore"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNTYwOTU0", "url": "https://github.com/checkstyle/checkstyle/pull/8841#pullrequestreview-492560954", "createdAt": "2020-09-21T12:43:04Z", "commit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo0MzowNFrOHVOHVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo1Nzo1OFrOHVOv9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAxMzM5OA==", "bodyText": "please remove this update from this commit.", "url": "https://github.com/checkstyle/checkstyle/pull/8841#discussion_r492013398", "createdAt": "2020-09-21T12:43:04Z", "author": {"login": "romani"}, "path": ".ci/eclipse-compiler-javac.sh", "diffHunk": "@@ -7,8 +7,8 @@ if [ -z \"$1\" ]; then\n     exit 1\n fi\n \n-ECJ_JAR=\"ecj-4.11.jar\"\n-ECJ_MAVEN_VERSION=\"R-4.11-201903070500\"\n+ECJ_JAR=\"ecj-4.17.jar\"\n+ECJ_MAVEN_VERSION=\"R-4.17-202009021800\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAyMzc5Nw==", "bodyText": "please move this code to new file validation.sh,  lets keep all CI validations in CI agnostic files (as we can execute them in any CI and even on local manually).\nWe are historically placed commands in CI specific files like \"travis.sh, wercker.sh, ....\" it was design mistake. Only after many years of managing of this CI set I came to conclusion that it should be like:\ntravis.yml\n  -> some-cli-command argument1\n  -> some-shell-file.sh command\n  -> some-another-big-validation-task.sh \nsome-ci.yml\n  -> some-cli-command argument2\n  -> some-shell-file.sh command2\n  -> some-another-big-validation-task2.sh \n\nprobably last good example is pitest.sh (attention to name, no CI reference). We grouped all same validations in one file, but it can be executed from any CI. I did not have time to refactor all others to same model.\nEven some CI validations are specific to CI, it is probably a misdesign of validations. All commands should be executed on local, user should be able to reproduce CI failure on local.", "url": "https://github.com/checkstyle/checkstyle/pull/8841#discussion_r492023797", "createdAt": "2020-09-21T12:57:58Z", "author": {"login": "romani"}, "path": ".ci/semaphore.sh", "diffHunk": "@@ -24,6 +24,66 @@ all-sevntu-checks)\n   removeFolderWithProtectedFiles $working_dir\n   ;;\n \n+check-missing-pitests)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNTg2NTEx", "url": "https://github.com/checkstyle/checkstyle/pull/8841#pullrequestreview-492586511", "createdAt": "2020-09-21T13:13:55Z", "commit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzoxMzo1NVrOHVPX9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzoxMzo1NVrOHVPX9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAzNDAzOA==", "bodyText": "checkstyle/wercker.yml\n    \n    \n         Line 289\n      in\n      797642a\n    \n    \n    \n    \n\n        \n          \n           name: NoExceptiontest - pmd elasticsearch lombok-ast \n        \n    \n  \n\n\nit might be absolutely the same.\nWe should not have duplicates in CI. please remove from no-exception-test.sh  what we have in wercker.sh\nWercker was created in same style as you create semaphore now, I did a copy of commands because I was not sure about stability of wercker at that time and wanted ability to quickly restore executions in wercker, and I never came back to this. Lets not repeat my mistake.\nupdate of wercker.yml to reuse no-exception-test.sh is separate task.", "url": "https://github.com/checkstyle/checkstyle/pull/8841#discussion_r492034038", "createdAt": "2020-09-21T13:13:55Z", "author": {"login": "romani"}, "path": ".ci/no-exception-test.sh", "diffHunk": "@@ -0,0 +1,230 @@\n+#!/bin/bash\n+set -e\n+\n+removeFolderWithProtectedFiles() {\n+  find $1 -delete\n+}\n+\n+case $1 in\n+\n+checkstyle-sevntu-checkstyle)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                    --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#checkstyle/checkstyle/' projects-to-test-on.properties\n+  sed -i.'' 's/#sevntu-checkstyle/sevntu-checkstyle/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+    --config checks-nonjavadoc-error.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  ;;\n+\n+guava)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                    --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#guava|/guava|/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+     --config checks-nonjavadoc-error.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  ;;\n+\n+guava-with-google-checks)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                     --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#guava|/guava|/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cp src/main/resources/google_checks.xml .ci-temp/google_checks.xml\n+  sed -i.'' 's/warning/ignore/' .ci-temp/google_checks.xml\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+      --config ../../google_checks.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  rm google_checks.*\n+  ;;\n+\n+guava-with-sun-checks)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                     --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#guava|/guava|/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cp src/main/resources/sun_checks.xml .ci-temp/sun_checks.xml\n+  sed -i.'' 's/value=\\\"error\\\"/value=\\\"ignore\\\"/' .ci-temp/sun_checks.xml\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+      --config ../../sun_checks.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  rm sun_checks.*\n+  ;;\n+\n+hibernate)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                    --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#hibernate-orm/hibernate-orm/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+     --config checks-nonjavadoc-error.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  ;;\n+\n+spotbugs)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                     --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#spotbugs/spotbugs/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+    --config checks-nonjavadoc-error.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  ;;\n+\n+spring-framework)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                     --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#spring-framework/spring-framework/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+    --config checks-nonjavadoc-error.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  ;;\n+\n+hbase)\n+  CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n+                     --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+  echo CS_version: $CS_POM_VERSION\n+  mkdir -p .ci-temp/\n+  cd .ci-temp/\n+  git clone https://github.com/checkstyle/contribution\n+  cd contribution/checkstyle-tester\n+  sed -i.'' 's/^guava/#guava/' projects-to-test-on.properties\n+  sed -i.'' 's/#Hbase/Hbase/' projects-to-test-on.properties\n+  cd ../../../\n+  mvn -e clean install -Pno-validations\n+  cd .ci-temp/contribution/checkstyle-tester\n+  export MAVEN_OPTS=\"-Xmx2048m\"\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\\n+      --config checks-nonjavadoc-error.xml --checkstyleVersion $CS_POM_VERSION\n+  cd ../..\n+  removeFolderWithProtectedFiles contribution\n+  ;;\n+\n+pmd-elasticsearch-lombok-ast)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235"}, "originalPosition": 177}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "545c7931bbe04ed988e7c590a2bd7d6c9f082235", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/545c7931bbe04ed988e7c590a2bd7d6c9f082235", "committedDate": "2020-09-21T07:26:37Z", "message": "Issue #8805: move eclipse, nondex, pitest to semaphore"}, "afterCommit": {"oid": "f47bcea27438a89e8dcff5e93667273be22a2b7c", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f47bcea27438a89e8dcff5e93667273be22a2b7c", "committedDate": "2020-09-21T13:39:44Z", "message": "Issue #8805: move miscellaneous ci to semaphore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70a1c8ed53a682a3f2d41fb5b3597e55cc17a28e", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/70a1c8ed53a682a3f2d41fb5b3597e55cc17a28e", "committedDate": "2020-09-22T12:23:17Z", "message": "Issue #8805: move miscellaneous ci to semaphore"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f47bcea27438a89e8dcff5e93667273be22a2b7c", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f47bcea27438a89e8dcff5e93667273be22a2b7c", "committedDate": "2020-09-21T13:39:44Z", "message": "Issue #8805: move miscellaneous ci to semaphore"}, "afterCommit": {"oid": "70a1c8ed53a682a3f2d41fb5b3597e55cc17a28e", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/70a1c8ed53a682a3f2d41fb5b3597e55cc17a28e", "committedDate": "2020-09-22T12:23:17Z", "message": "Issue #8805: move miscellaneous ci to semaphore"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1113, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}