{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MzcwMTU5", "number": 8453, "title": "minor: improve diff_report.yml file", "bodyText": "Improving diff_report.yml for these directions:\n#8445 (review)", "createdAt": "2020-07-15T09:45:58Z", "url": "https://github.com/checkstyle/checkstyle/pull/8453", "merged": true, "mergeCommit": {"oid": "25f474a9f5bd8be97a827952afbf7eb393e86f76"}, "closed": true, "closedAt": "2020-07-15T14:35:08Z", "author": {"login": "OvchinnikovNV"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1HjTjAFqTQ0ODgwMDA2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1LmajgFqTQ0OTAxNzQxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODAwMDY0", "url": "https://github.com/checkstyle/checkstyle/pull/8453#pullrequestreview-448800064", "createdAt": "2020-07-15T09:50:01Z", "commit": {"oid": "c7fc6bf8d5fa9e7f0d26b76304dc7a14df188e45"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwOTo1MDowMlrOGx2v3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwOTo1MDowMlrOGx2v3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzMDM5Nw==", "bodyText": "this line is too long (should be less than 100 chars)", "url": "https://github.com/checkstyle/checkstyle/pull/8453#discussion_r454930397", "createdAt": "2020-07-15T09:50:02Z", "author": {"login": "strkkk"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -65,62 +65,52 @@ jobs:\n        run: |\n         echo ::set-output name=user::$(cat user)\n         echo ::set-output name=ref::$(cat branch)\n-      \n-     - name: info\n-       run: |\n-        cat user\n-        cat branch\n-        echo ${{steps.branch.outputs.ref}}\n-        echo ${{steps.branch.outputs.user}}:\n+        \n      \n   make_report:\n     runs-on: ubuntu-latest\n     needs: parse_body\n-    if: needs.parse_body.outputs.proj_link != '' && needs.parse_body.outputs.config_link != ''\n+    if: needs.parse_body.outputs.project_link != '' && needs.parse_body.outputs.config_link != ''\n     steps: \n        \n      - name: Download files\n        run: |\n-        wget -q ${{needs.parse_body.outputs.proj_link}} -O proj.properties\n-        wget -q ${{needs.parse_body.outputs.config_link}} -O config.xml\n+        wget -q \"${{needs.parse_body.outputs.project_link}}\" -O project.properties\n+        wget -q \"${{needs.parse_body.outputs.config_link}}\" -O config.xml\n         \n+     # fetch-depth - number of commits to fetch. \n+     # 0 indicates all history for all branches and tags.\n+     # 0, because we need access to all branches to create a report.\n+     # ref - branch to checkout.\n      - name: Download checkstyle\n        uses: actions/checkout@v2\n        with:\n         repository: ${{needs.parse_body.outputs.user}}/checkstyle\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n-        \n-     - name: Check branches\n-       run: |\n-         cd checkstyle\n-         git branch -r\n-         cd ../\n      \n+     # fetch-depth default: 1\n+     # Don't need history for all branches and tags here.\n      - name: Download contribution\n        uses: actions/checkout@v2\n        with:\n         repository: checkstyle/contribution\n+        ref: master\n         path: contribution\n          \n-     - name: Print branch\n-       run: |\n-         echo ${{needs.parse_body.outputs.branch}}\n-         \n      - name: Relocate .xml and .properties \n        run: |\n          mv config.xml ./contribution/checkstyle-tester/\n-         mv proj.properties ./contribution/checkstyle-tester/\n+         mv project.properties ./contribution/checkstyle-tester/\n          \n      - name: Generate report\n        run: |\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          cd contribution/checkstyle-tester\n-         sudo apt-get install mercurial\n          sudo apt install groovy\n-         groovy diff.groovy -r ../../checkstyle -b master -p $REF -c config.xml -l proj.properties\n+         groovy diff.groovy -r ../../checkstyle -b master -p $REF -c config.xml -l project.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7fc6bf8d5fa9e7f0d26b76304dc7a14df188e45"}, "originalPosition": 122}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceb9dddc0237dd406e773afee1d4a557c0cfbe46", "author": {"user": {"login": "OvchinnikovNV", "name": "Ovchinnikov Nikita"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ceb9dddc0237dd406e773afee1d4a557c0cfbe46", "committedDate": "2020-07-15T12:17:07Z", "message": "minor: improve diff_report.yml file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTc1Nzk3", "url": "https://github.com/checkstyle/checkstyle/pull/8453#pullrequestreview-448975797", "createdAt": "2020-07-15T13:53:21Z", "commit": {"oid": "ceb9dddc0237dd406e773afee1d4a557c0cfbe46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDE3NDEx", "url": "https://github.com/checkstyle/checkstyle/pull/8453#pullrequestreview-449017411", "createdAt": "2020-07-15T14:34:59Z", "commit": {"oid": "ceb9dddc0237dd406e773afee1d4a557c0cfbe46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 484, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}