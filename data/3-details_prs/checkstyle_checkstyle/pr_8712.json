{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NjkzMTUy", "number": 8712, "title": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses", "bodyText": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses\nDiff Regression projects: https://gist.githubusercontent.com/nmancus1/e3988f8092d919b5cbe70f5359c4d9e8/raw/a0f6f5860f8025c19868061dee6e0e40960b992f/projects-to-test-on.properties\nDiff Regression config: https://gist.githubusercontent.com/nmancus1/867268e2ebbb122e77e1640bee93b8b2/raw/6316c24398eea59d85f9601a3c35c62f362efb76/UnnecessaryParentheses.xml", "createdAt": "2020-08-18T19:29:10Z", "url": "https://github.com/checkstyle/checkstyle/pull/8712", "merged": true, "mergeCommit": {"oid": "f4e2b8f58dbb536ad9206828bcf70a81007b45d0"}, "closed": true, "closedAt": "2020-08-20T15:00:36Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAMP07gFqTQ2OTc2MjEwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAxh0DgFqTQ3MTcwMjM2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NzYyMTAy", "url": "https://github.com/checkstyle/checkstyle/pull/8712#pullrequestreview-469762102", "createdAt": "2020-08-18T19:33:06Z", "commit": {"oid": "eb9772b099c27b1912dd0b566900806eec9ca632"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxOTozMzowNlrOHCi--w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxOTozMzowNlrOHCi--w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzMjM3OQ==", "bodyText": "@pbludov @esilkensen I'm not sure whether we want to use the new utility introduced at #8705 to modify the string here, but I would still need to replace the newline control characters with the text \"\\n\" to keep the error message to one line (like in our AST).  Let me know if we should do this or not, I can make the changes.", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r472432379", "createdAt": "2020-08-18T19:33:06Z", "author": {"login": "nmancus1"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/UnnecessaryParenthesesCheck.java", "diffHunk": "@@ -332,6 +349,13 @@ else if (surrounded && isInTokenList(type, LITERALS)) {\n                     log(ast, MSG_STRING,\n                         chopString(ast.getText()));\n                 }\n+                else if (type == TokenTypes.TEXT_BLOCK_LITERAL_BEGIN) {\n+                    // Strip newline control characters to keep message as single line.\n+                    final String logString = NEWLINE.matcher(\n+                        ast.getFirstChild().getText()).replaceAll(\"\\\\\\\\n\");\n+                    // Add quotes so that log message is consistent with STRING_LITERAL\n+                    log(ast, MSG_STRING, QUOTE + logString + QUOTE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb9772b099c27b1912dd0b566900806eec9ca632"}, "originalPosition": 70}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMTY3MjIz", "url": "https://github.com/checkstyle/checkstyle/pull/8712#pullrequestreview-470167223", "createdAt": "2020-08-19T06:45:56Z", "commit": {"oid": "eb9772b099c27b1912dd0b566900806eec9ca632"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwNjo0NTo1NlrOHC3iHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwNjo0NTo1NlrOHC3iHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc2OTA1NA==", "bodyText": "In addition, the text should be truncated. Please note the chopString method in this check.", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r472769054", "createdAt": "2020-08-19T06:45:56Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/UnnecessaryParenthesesCheck.java", "diffHunk": "@@ -332,6 +349,13 @@ else if (surrounded && isInTokenList(type, LITERALS)) {\n                     log(ast, MSG_STRING,\n                         chopString(ast.getText()));\n                 }\n+                else if (type == TokenTypes.TEXT_BLOCK_LITERAL_BEGIN) {\n+                    // Strip newline control characters to keep message as single line.\n+                    final String logString = NEWLINE.matcher(\n+                        ast.getFirstChild().getText()).replaceAll(\"\\\\\\\\n\");\n+                    // Add quotes so that log message is consistent with STRING_LITERAL\n+                    log(ast, MSG_STRING, QUOTE + logString + QUOTE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzMjM3OQ=="}, "originalCommit": {"oid": "eb9772b099c27b1912dd0b566900806eec9ca632"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb9772b099c27b1912dd0b566900806eec9ca632", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/eb9772b099c27b1912dd0b566900806eec9ca632", "committedDate": "2020-08-18T19:21:48Z", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses"}, "afterCommit": {"oid": "cbdc1e0204fc606074537c7fa6881c518ecffab9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cbdc1e0204fc606074537c7fa6881c518ecffab9", "committedDate": "2020-08-19T13:30:16Z", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjUxMjU0", "url": "https://github.com/checkstyle/checkstyle/pull/8712#pullrequestreview-471251254", "createdAt": "2020-08-20T05:10:30Z", "commit": {"oid": "cbdc1e0204fc606074537c7fa6881c518ecffab9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDIxNjA4", "url": "https://github.com/checkstyle/checkstyle/pull/8712#pullrequestreview-471421608", "createdAt": "2020-08-20T09:31:21Z", "commit": {"oid": "cbdc1e0204fc606074537c7fa6881c518ecffab9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwOTozMToyMlrOHD3Rgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwOTozMToyMlrOHD3Rgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzgxMzM3OQ==", "bodyText": "Should this use \\R?", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r473813379", "createdAt": "2020-08-20T09:31:22Z", "author": {"login": "esilkensen"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/UnnecessaryParenthesesCheck.java", "diffHunk": "@@ -205,6 +209,16 @@\n      */\n     public static final String MSG_LAMBDA = \"unnecessary.paren.lambda\";\n \n+    /**\n+     * Compiled pattern used to match newline control characters, for replacement.\n+     */\n+    private static final Pattern NEWLINE = Pattern.compile(\"\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbdc1e0204fc606074537c7fa6881c518ecffab9"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "committedDate": "2020-08-20T12:00:49Z", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cbdc1e0204fc606074537c7fa6881c518ecffab9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cbdc1e0204fc606074537c7fa6881c518ecffab9", "committedDate": "2020-08-19T13:30:16Z", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses"}, "afterCommit": {"oid": "2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "committedDate": "2020-08-20T12:00:49Z", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzAyMzY0", "url": "https://github.com/checkstyle/checkstyle/pull/8712#pullrequestreview-471702364", "createdAt": "2020-08-20T14:59:31Z", "commit": {"oid": "2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1035, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}