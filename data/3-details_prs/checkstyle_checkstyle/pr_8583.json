{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMTA0ODky", "number": 8583, "title": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces", "bodyText": "#8569\nFixed ConstantName check to correctly detect constants + MethodName check is extended with test case for private methods in interface\nDiff Regression projects: https://gist.githubusercontent.com/nmancus1/e3988f8092d919b5cbe70f5359c4d9e8/raw/a0f6f5860f8025c19868061dee6e0e40960b992f/projects-to-test-on.properties\nDiff Regression config: https://gist.githubusercontent.com/strkkk/a6e04b73158d1ef6f563dd5aab753361/raw/74f66fa883a25f37a0689fbe4ab293d66c236417/constant_name", "createdAt": "2020-07-31T12:35:08Z", "url": "https://github.com/checkstyle/checkstyle/pull/8583", "merged": true, "mergeCommit": {"oid": "9580ae6e38950790179bd328e3cf8310529d2b99"}, "closed": true, "closedAt": "2020-09-25T19:13:11Z", "author": {"login": "strkkk"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6Tjt_ABqjM2MDgzMzY2Njc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMWtAmABqjM4MDgwMTEyMzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1f7747c7947a9142d870b34bf16dbdb3b99f0d7", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f1f7747c7947a9142d870b34bf16dbdb3b99f0d7", "committedDate": "2020-07-31T12:32:16Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "3a4ae3f7fa4351357adbb12d6d5bdbefc1af53ea", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3a4ae3f7fa4351357adbb12d6d5bdbefc1af53ea", "committedDate": "2020-07-31T12:40:33Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a4ae3f7fa4351357adbb12d6d5bdbefc1af53ea", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3a4ae3f7fa4351357adbb12d6d5bdbefc1af53ea", "committedDate": "2020-07-31T12:40:33Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "d49ca718888abc158a5f6c18972377d8bcca2717", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/d49ca718888abc158a5f6c18972377d8bcca2717", "committedDate": "2020-07-31T15:03:27Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d49ca718888abc158a5f6c18972377d8bcca2717", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/d49ca718888abc158a5f6c18972377d8bcca2717", "committedDate": "2020-07-31T15:03:27Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "14cc2ec51d8fb536d16dbd141e2626d3663dc183", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/14cc2ec51d8fb536d16dbd141e2626d3663dc183", "committedDate": "2020-08-13T15:10:37Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14cc2ec51d8fb536d16dbd141e2626d3663dc183", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/14cc2ec51d8fb536d16dbd141e2626d3663dc183", "committedDate": "2020-08-13T15:10:37Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "e4a0270edc84d4983a914461cc567d081066cd50", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e4a0270edc84d4983a914461cc567d081066cd50", "committedDate": "2020-08-20T08:55:57Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4a0270edc84d4983a914461cc567d081066cd50", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e4a0270edc84d4983a914461cc567d081066cd50", "committedDate": "2020-08-20T08:55:57Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "c6a68fc8a13d7c28c4d2671d8bba13467dbf40d6", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c6a68fc8a13d7c28c4d2671d8bba13467dbf40d6", "committedDate": "2020-09-17T10:22:03Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c6a68fc8a13d7c28c4d2671d8bba13467dbf40d6", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c6a68fc8a13d7c28c4d2671d8bba13467dbf40d6", "committedDate": "2020-09-17T10:22:03Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "41ca7201f92e02362bf799a9bdade24c97621bf5", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/41ca7201f92e02362bf799a9bdade24c97621bf5", "committedDate": "2020-09-17T11:12:35Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNTQyMjY0", "url": "https://github.com/checkstyle/checkstyle/pull/8583#pullrequestreview-490542264", "createdAt": "2020-09-17T12:31:51Z", "commit": {"oid": "41ca7201f92e02362bf799a9bdade24c97621bf5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41ca7201f92e02362bf799a9bdade24c97621bf5", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/41ca7201f92e02362bf799a9bdade24c97621bf5", "committedDate": "2020-09-17T11:12:35Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "583da0963ac2bfd988e5393843bee9ea48072a0e", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/583da0963ac2bfd988e5393843bee9ea48072a0e", "committedDate": "2020-09-20T17:29:25Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "583da0963ac2bfd988e5393843bee9ea48072a0e", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/583da0963ac2bfd988e5393843bee9ea48072a0e", "committedDate": "2020-09-20T17:29:25Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5a2935e697c415fe4040b465ca182a41b67b33fb", "committedDate": "2020-09-24T14:18:54Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjMwMzIw", "url": "https://github.com/checkstyle/checkstyle/pull/8583#pullrequestreview-495630320", "createdAt": "2020-09-24T14:25:13Z", "commit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoyNToxM1rOHXdhiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDozMjozMlrOHXd4Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2MzAxNg==", "bodyText": "methods? this check is only about fields.", "url": "https://github.com/checkstyle/checkstyle/pull/8583#discussion_r494363016", "createdAt": "2020-09-24T14:25:13Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/naming/AbstractAccessControlNameCheck.java", "diffHunk": "@@ -95,6 +96,22 @@ protected boolean shouldCheckInScope(DetailAST modifiers) {\n                 || applyToPrivate && isPrivate;\n     }\n \n+    /**\n+     * Checks if given modifiers has public access.\n+     * There are 2 cases - it is either has explicit modifier, or it is\n+     * in annotation or interface.\n+     *\n+     * @param modifiers - modifiers to check\n+     * @return true if public\n+     */\n+    private static boolean isPublic(DetailAST modifiers) {\n+        return ScopeUtil.isInInterfaceBlock(modifiers)\n+                // interface methods can be private", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2NTMxOA==", "bodyText": "please make it like\n                    modifiers.findFirstToken(TokenTypes.LITERAL_PUBLIC) != null;\n                     || ScopeUtil.isInAnnotationBlock(modifiers)\n                     || ScopeUtil.isInInterfaceBlock(modifiers)\n                       // interface methods can be private\n                     && modifiers.findFirstToken(TokenTypes.LITERAL_PRIVATE) == null\n\nit will be easier to read.", "url": "https://github.com/checkstyle/checkstyle/pull/8583#discussion_r494365318", "createdAt": "2020-09-24T14:28:05Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/naming/AbstractAccessControlNameCheck.java", "diffHunk": "@@ -95,6 +96,22 @@ protected boolean shouldCheckInScope(DetailAST modifiers) {\n                 || applyToPrivate && isPrivate;\n     }\n \n+    /**\n+     * Checks if given modifiers has public access.\n+     * There are 2 cases - it is either has explicit modifier, or it is\n+     * in annotation or interface.\n+     *\n+     * @param modifiers - modifiers to check\n+     * @return true if public\n+     */\n+    private static boolean isPublic(DetailAST modifiers) {\n+        return ScopeUtil.isInInterfaceBlock(modifiers)\n+                // interface methods can be private\n+                && modifiers.findFirstToken(TokenTypes.LITERAL_PRIVATE) == null\n+                    || ScopeUtil.isInAnnotationBlock(modifiers)\n+                    || modifiers.findFirstToken(TokenTypes.LITERAL_PUBLIC) != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2Nzg0MA==", "bodyText": "final boolean isStaticFinal = \n            modifiersAST.findFirstToken(TokenTypes.LITERAL_STATIC) != null\n                && modifiersAST.findFirstToken(TokenTypes.FINAL) != null\n            || ScopeUtil.isInAnnotationBlock(ast)\n            || ScopeUtil.isInInterfaceBlock(ast);\n\nto make it more visual priority of calculation", "url": "https://github.com/checkstyle/checkstyle/pull/8583#discussion_r494367840", "createdAt": "2020-09-24T14:31:16Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/naming/ConstantNameCheck.java", "diffHunk": "@@ -153,12 +153,11 @@ protected final boolean mustCheckName(DetailAST ast) {\n \n         final DetailAST modifiersAST =\n             ast.findFirstToken(TokenTypes.MODIFIERS);\n-        final boolean isStatic = modifiersAST.findFirstToken(TokenTypes.LITERAL_STATIC) != null;\n-        final boolean isFinal = modifiersAST.findFirstToken(TokenTypes.FINAL) != null;\n-\n-        if (isStatic && isFinal && shouldCheckInScope(modifiersAST)\n-                || ScopeUtil.isInAnnotationBlock(ast)\n-                || ScopeUtil.isInInterfaceBlock(ast)\n+        final boolean isStaticFinal = modifiersAST.findFirstToken(TokenTypes.LITERAL_STATIC) != null\n+            && modifiersAST.findFirstToken(TokenTypes.FINAL) != null\n+            || ScopeUtil.isInAnnotationBlock(ast)\n+            || ScopeUtil.isInInterfaceBlock(ast);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2ODg0Nw==", "bodyText": "?\nAm I miss somethig ?\nhttps://checkstyle.sourceforge.io/config_naming.html#ConstantName\nit is about fields only.", "url": "https://github.com/checkstyle/checkstyle/pull/8583#discussion_r494368847", "createdAt": "2020-09-24T14:32:32Z", "author": {"login": "romani"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/naming/methodname/InputMethodNamePrivateMethodsInInterfaces.java", "diffHunk": "@@ -0,0 +1,24 @@\n+//non-compiled with javac: Compilable with Java9\n+package com.puppycrawl.tools.checkstyle.checks.naming.methodname;\n+\n+/*\n+ * Config:\n+ * applyToPrivate = false\n+ */\n+public interface InputMethodNamePrivateMethodsInInterfaces {\n+\n+    private void PrivateMethod() {} // ok\n+\n+    private static void PrivateMethod2() {} // ok\n+\n+    default void DefaultMethod() { // violation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a2935e697c415fe4040b465ca182a41b67b33fb", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5a2935e697c415fe4040b465ca182a41b67b33fb", "committedDate": "2020-09-24T14:18:54Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "a42b77f1087ddd2912411930773d5a9779476389", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a42b77f1087ddd2912411930773d5a9779476389", "committedDate": "2020-09-24T15:37:52Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDI3NTQ4", "url": "https://github.com/checkstyle/checkstyle/pull/8583#pullrequestreview-496427548", "createdAt": "2020-09-25T13:39:16Z", "commit": {"oid": "a42b77f1087ddd2912411930773d5a9779476389"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMzozOToxNlrOHYECNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMzozOToxNlrOHYECNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5Mzk3Mw==", "bodyText": "+2 in indentation, as it is not on same level of execution as ||", "url": "https://github.com/checkstyle/checkstyle/pull/8583#discussion_r494993973", "createdAt": "2020-09-25T13:39:16Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/naming/AbstractAccessControlNameCheck.java", "diffHunk": "@@ -95,6 +96,22 @@ protected boolean shouldCheckInScope(DetailAST modifiers) {\n                 || applyToPrivate && isPrivate;\n     }\n \n+    /**\n+     * Checks if given modifiers has public access.\n+     * There are 2 cases - it is either has explicit modifier, or it is\n+     * in annotation or interface.\n+     *\n+     * @param modifiers - modifiers to check\n+     * @return true if public\n+     */\n+    private static boolean isPublic(DetailAST modifiers) {\n+        return modifiers.findFirstToken(TokenTypes.LITERAL_PUBLIC) != null\n+                || ScopeUtil.isInAnnotationBlock(modifiers)\n+                || ScopeUtil.isInInterfaceBlock(modifiers)\n+                // interface methods can be private\n+                && modifiers.findFirstToken(TokenTypes.LITERAL_PRIVATE) == null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a42b77f1087ddd2912411930773d5a9779476389"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDQwNjYz", "url": "https://github.com/checkstyle/checkstyle/pull/8583#pullrequestreview-496440663", "createdAt": "2020-09-25T13:54:10Z", "commit": {"oid": "a42b77f1087ddd2912411930773d5a9779476389"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c9abb09364bb6c9a4e79a7efc5848ecd1b742ef", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8c9abb09364bb6c9a4e79a7efc5848ecd1b742ef", "committedDate": "2020-09-25T14:30:51Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a42b77f1087ddd2912411930773d5a9779476389", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a42b77f1087ddd2912411930773d5a9779476389", "committedDate": "2020-09-24T15:37:52Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}, "afterCommit": {"oid": "8c9abb09364bb6c9a4e79a7efc5848ecd1b742ef", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8c9abb09364bb6c9a4e79a7efc5848ecd1b742ef", "committedDate": "2020-09-25T14:30:51Z", "message": "Issue #8569: fix ConstantNameCheck and MethodNameCheck for interfaces"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1164, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}