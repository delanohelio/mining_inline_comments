{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NTQzMjgw", "number": 8836, "title": "Issue #8808: false positive with JavadocTypeCheck @param tags for Records", "bodyText": "Issue #8808: false positive with JavadocTypeCheck @param tags for Records\nNote that the changes in commit df1ae95 correspond to the following code:\n/** @param x */\nclass Test {}\n\n/**\n * InputJavadocTypeUnusedParamInJavadocForClass.\n *\n * @param BAD This is bad.\n * @param <BAD> This doesn't exist.\n * @param\n */\npublic class InputJavadocTypeUnusedParamInJavadocForClass {\n}\n\n\nIn both of these cases, the check was adding the angle brackets to the output, assuming that they were for type parameters.  Now that the @param tag is overloaded for use with record components, there is no way to know the intent of an unused @param tag, so it is best to remove these angle brackets.  In any event, the original behavior of the check wasn't optimal anyway, since we really shouldn't be adding characters that don't exist to output.\nDiff Regression projects: https://gist.githubusercontent.com/nmancus1/e3988f8092d919b5cbe70f5359c4d9e8/raw/a0f6f5860f8025c19868061dee6e0e40960b992f/projects-to-test-on.properties\nDiff Regression config: https://gist.githubusercontent.com/nmancus1/6e4314ef4f509d6ed5c7e0f59dfc3662/raw/93862649e0dce3fdced263cf3156f96b01ba6a59/JavadocType.xml", "createdAt": "2020-09-18T21:12:42Z", "url": "https://github.com/checkstyle/checkstyle/pull/8836", "merged": true, "mergeCommit": {"oid": "68d0b86e8d20ed1b053ff1b2d2a6378821cee956"}, "closed": true, "closedAt": "2020-09-25T13:59:07Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKREZaABqjM3ODQ3MDM3MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMCLt0ABqjM4MDM1NzUyMTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef63e3a6bca284dd43e9c702764dbd1ec630d876", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ef63e3a6bca284dd43e9c702764dbd1ec630d876", "committedDate": "2020-09-18T20:58:23Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}, "afterCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8848a63038942f5b8ceb77cfdf4a520c212ef27a", "committedDate": "2020-09-19T02:49:31Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMDIzMDgx", "url": "https://github.com/checkstyle/checkstyle/pull/8836#pullrequestreview-492023081", "createdAt": "2020-09-19T18:07:18Z", "commit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxODowNzoxOFrOHUtfcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxODowOTo1N1rOHUtgRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ3ODg5OA==", "bodyText": "Is the order of this loop important? (just curious)", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r491478898", "createdAt": "2020-09-19T18:07:18Z", "author": {"login": "esilkensen"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTypeCheck.java", "diffHunk": "@@ -459,6 +470,32 @@ private void checkTag(DetailAST ast, List<JavadocTag> tags, String tagName,\n         }\n     }\n \n+    /**\n+     * Verifies that a record definition has the specified param tag for\n+     * the specified record component name.\n+     *\n+     * @param ast           the AST node for the record definition.\n+     * @param tags          tags from the Javadoc comment for the record definition.\n+     * @param recordComponentName the name of the type parameter\n+     */\n+    private void checkComponentParamTag(final DetailAST ast,\n+                                        final List<JavadocTag> tags,\n+                                        final String recordComponentName) {\n+        boolean found = false;\n+        for (int i = tags.size() - 1; i >= 0; i--) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ3OTEwOQ==", "bodyText": "nit: might remove the extra spacing for these two params, assuming that's the convention in the rest of the code", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r491479109", "createdAt": "2020-09-19T18:09:57Z", "author": {"login": "esilkensen"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTypeCheck.java", "diffHunk": "@@ -459,6 +470,32 @@ private void checkTag(DetailAST ast, List<JavadocTag> tags, String tagName,\n         }\n     }\n \n+    /**\n+     * Verifies that a record definition has the specified param tag for\n+     * the specified record component name.\n+     *\n+     * @param ast           the AST node for the record definition.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTgxNjY1", "url": "https://github.com/checkstyle/checkstyle/pull/8836#pullrequestreview-492181665", "createdAt": "2020-09-20T08:50:18Z", "commit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwODo1MDoxOFrOHU5IUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwODo1MDoxOFrOHU5IUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY2OTU4Nw==", "bodyText": "this comes from 9ce0ceb\nIn 2004, this was an optimization. Now for the JIT compiler there is no difference between\nfor (int i = 0; i < tags.size(); i++)\nand\nfor (int i = tags.size() - 1; i >= 0; i--)\nand even\nfor (final JavadocTag tag : tags)", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r491669587", "createdAt": "2020-09-20T08:50:18Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTypeCheck.java", "diffHunk": "@@ -459,6 +470,32 @@ private void checkTag(DetailAST ast, List<JavadocTag> tags, String tagName,\n         }\n     }\n \n+    /**\n+     * Verifies that a record definition has the specified param tag for\n+     * the specified record component name.\n+     *\n+     * @param ast           the AST node for the record definition.\n+     * @param tags          tags from the Javadoc comment for the record definition.\n+     * @param recordComponentName the name of the type parameter\n+     */\n+    private void checkComponentParamTag(final DetailAST ast,\n+                                        final List<JavadocTag> tags,\n+                                        final String recordComponentName) {\n+        boolean found = false;\n+        for (int i = tags.size() - 1; i >= 0; i--) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ3ODg5OA=="}, "originalCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTk2MzUx", "url": "https://github.com/checkstyle/checkstyle/pull/8836#pullrequestreview-492196351", "createdAt": "2020-09-20T13:50:47Z", "commit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxMzo1MDo0N1rOHU6mEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxMzo1NTozOFrOHU6nzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY5MzU4NQ==", "bodyText": "please remove \"final\" modifiers, we use check to control it.\nusage of it make code too verbose, as ALL parameters must be non modifiable, it is too much verbosity for code.\nThis Check lacking our attention for many year as it waiting for complete rewriting to use javadoc ast.", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r491693585", "createdAt": "2020-09-20T13:50:47Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTypeCheck.java", "diffHunk": "@@ -459,6 +470,32 @@ private void checkTag(DetailAST ast, List<JavadocTag> tags, String tagName,\n         }\n     }\n \n+    /**\n+     * Verifies that a record definition has the specified param tag for\n+     * the specified record component name.\n+     *\n+     * @param ast           the AST node for the record definition.\n+     * @param tags          tags from the Javadoc comment for the record definition.\n+     * @param recordComponentName the name of the type parameter\n+     */\n+    private void checkComponentParamTag(final DetailAST ast,\n+                                        final List<JavadocTag> tags,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY5MzgzNg==", "bodyText": "remove \"final\"\nplease dothis in other new code your do.", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r491693836", "createdAt": "2020-09-20T13:53:44Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTypeCheck.java", "diffHunk": "@@ -528,4 +570,24 @@ private static String extractTypeParamNameFromTag(JavadocTag tag) {\n         return typeParamName;\n     }\n \n+    /**\n+     * Collects the record components in a record definition.\n+     *\n+     * @param node the possible record definition ast.\n+     * @return the list of record components in this record definition.\n+     */\n+    private static List<String> getRecordComponentNames(final DetailAST node) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "originalPosition": 164}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY5NDAzMQ==", "bodyText": "please put \"// ok\" comment in this file, it is convenient.", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r491694031", "createdAt": "2020-09-20T13:55:38Z", "author": {"login": "romani"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/javadoc/javadoctype/InputJavadocTypeRecordComponents2.java", "diffHunk": "@@ -0,0 +1,74 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.javadoc.javadoctype;\n+\n+/* Config:\n+ *\n+ * scope = private\n+ * allowMissingParamTags = false\n+ * allowUnknownTags = false\n+ */\n+\n+import java.util.HashMap;\n+import java.util.List;\n+\n+/**\n+ * My new record.\n+ *\n+ * @param value Sponge Bob rules the world!\n+ */\n+public record InputJavadocTypeRecordComponents2(String value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8848a63038942f5b8ceb77cfdf4a520c212ef27a", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8848a63038942f5b8ceb77cfdf4a520c212ef27a", "committedDate": "2020-09-19T02:49:31Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}, "afterCommit": {"oid": "1e6f7d946237990ed94dfa35df726b86c0af5dab", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1e6f7d946237990ed94dfa35df726b86c0af5dab", "committedDate": "2020-09-20T15:52:26Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e6f7d946237990ed94dfa35df726b86c0af5dab", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1e6f7d946237990ed94dfa35df726b86c0af5dab", "committedDate": "2020-09-20T15:52:26Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}, "afterCommit": {"oid": "2df9fe572498190e9c37c01ed95d3105af2abe0b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2df9fe572498190e9c37c01ed95d3105af2abe0b", "committedDate": "2020-09-21T12:37:59Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2df9fe572498190e9c37c01ed95d3105af2abe0b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2df9fe572498190e9c37c01ed95d3105af2abe0b", "committedDate": "2020-09-21T12:37:59Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}, "afterCommit": {"oid": "cab8853851d7ccc9eb261d2a05e885bfc1659f13", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cab8853851d7ccc9eb261d2a05e885bfc1659f13", "committedDate": "2020-09-24T14:06:23Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjIyMjA5", "url": "https://github.com/checkstyle/checkstyle/pull/8836#pullrequestreview-495622209", "createdAt": "2020-09-24T14:17:24Z", "commit": {"oid": "2805ff8ce604999c525161edbbfd5a36fafc1d29"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoxNzoyNFrOHXdJog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDoxNzoyNFrOHXdJog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM1Njg5OA==", "bodyText": "please move this commit to functional\nat build on it result in\nJavadocTypeCheckTest.testAllowMissingTypeParameters:314->AbstractModuleTestSupport.verify:229->AbstractModuleTestSupport.verify:267->AbstractModuleTestSupport.verify:304 error message 1 expected:<...sed @param tag for '[x]'.> but was:<...sed @param tag for '[<x>]'.>\nAll commits are atomic change that are build-able and even can be released. code should be build and function properly on each commit.", "url": "https://github.com/checkstyle/checkstyle/pull/8836#discussion_r494356898", "createdAt": "2020-09-24T14:17:24Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTypeCheckTest.java", "diffHunk": "@@ -309,7 +309,7 @@ public void testAllowMissingTypeParameters() throws Exception {\n         final String[] expected = {\n             \"7:4: \" + getCheckMessage(MSG_UNUSED_TAG, \"@param\", \"<D123>\"),\n             \"44:8: \" + getCheckMessage(MSG_UNUSED_TAG, \"@param\", \"<C>\"),\n-            \"60:5: \" + getCheckMessage(MSG_UNUSED_TAG, \"@param\", \"<x>\"),\n+            \"60:5: \" + getCheckMessage(MSG_UNUSED_TAG, \"@param\", \"x\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2805ff8ce604999c525161edbbfd5a36fafc1d29"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "600697b57935847c286c8d103e216a9340de0c38", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/600697b57935847c286c8d103e216a9340de0c38", "committedDate": "2020-09-24T14:35:42Z", "message": "minor: fix indentation(#8808)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ea9e72bc7851c309db7b823045c9a3bc478c005", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2ea9e72bc7851c309db7b823045c9a3bc478c005", "committedDate": "2020-09-24T14:36:15Z", "message": "minor: remove unnecessary usage of final modifier in parameters(#8808)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52760c4704a4d0c2027d102f27e7933e0005fb93", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/52760c4704a4d0c2027d102f27e7933e0005fb93", "committedDate": "2020-09-24T14:36:15Z", "message": "minor: refactor loops for readability(#8808)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b8a3869baa5109b12eb8212d35ac85482d7a1ae", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7b8a3869baa5109b12eb8212d35ac85482d7a1ae", "committedDate": "2020-09-24T14:36:16Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cab8853851d7ccc9eb261d2a05e885bfc1659f13", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cab8853851d7ccc9eb261d2a05e885bfc1659f13", "committedDate": "2020-09-24T14:06:23Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}, "afterCommit": {"oid": "7b8a3869baa5109b12eb8212d35ac85482d7a1ae", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7b8a3869baa5109b12eb8212d35ac85482d7a1ae", "committedDate": "2020-09-24T14:36:16Z", "message": "Issue #8808: JavadocTypeCheck: false positive with JavaDoc @param tags for Records"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1110, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}