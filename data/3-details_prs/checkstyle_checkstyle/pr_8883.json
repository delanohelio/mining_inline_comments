{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMjc2NzQz", "number": 8883, "title": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)", "bodyText": "Fixes #7983\n1. Pitest Report\n\nLink: https://user-images.githubusercontent.com/54651212/95527351-e14cac00-0989-11eb-9f3d-f851614faa7f.PNG\nSurviving Mutations:\nremoved conditional - replaced equality check with false \u2192 SURVIVED\nremoved conditional - replaced equality check with true \u2192 SURVIVED\n\n2. Mutate Branch\n\nHardcoded Mutated: https://user-images.githubusercontent.com/54651212/95529357-8cac2f80-098f-11eb-8a57-01830d3acfc9.PNG\n\n3. Regression Report\nNot needed due to no main code change\n4. Code logic and analysis\nSimilar to #8001, (ignore || illegalPattern || checkForDuplicates) should be removed from\n  private boolean canContinueValidation(boolean ignore) {\n        return errorCount <= errorLimit - 1\n                && (ignore || illegalPattern || checkForDuplicates);\n    }\n\nThe only way for (ignore || illegalPattern || checkForDuplicates) to be false is if all of them are false. This means the pattern is not illegal, and the user is not checking for duplicates. If this is the case, the program only needs to find 1 valid match and then it can  stop right away. The canContinueValidation() function above correctly check this. However, mutations are still alive because if we substitute (ignore || illegalPattern || checkForDuplicates) with true, the program does not stop but nothing went wrong (Although the program runs slower since it has to keep going through the rest of the file).\nIf we only substitute (ignore || illegalPattern || checkForDuplicates) with true (i.e remove it completely), we kill all mutations BUT now the program will not stop early and instead go through the whole file even if it only needs to find 1 match. I think that is what causes timeout in #8001: Check whole file => Recursion stack is too deep.\nI tried to remove (ignore || illegalPattern || checkForDuplicates) and added logic like this to stop early:\n    final boolean onlyNeedOneMatch = !illegalPattern && !checkForDuplicates;\n    if (foundOneMatch && onlyNeedOneMatch) return;\n\nThat doesn't work either, mutations are still alive since mutating foundOneMatch && onlyNeedOneMatch to false doesn't break the program (only make it slower).\n=> So in this PR, I turn the recursive call to a while loop, hoping to get rid of timeout issue.\nPitest report after fix: kill all mutations\nhttps://user-images.githubusercontent.com/54651212/95529213-33dc9700-098f-11eb-9edd-3acfaab254c8.PNG", "createdAt": "2020-10-09T01:02:28Z", "url": "https://github.com/checkstyle/checkstyle/pull/8883", "merged": true, "mergeCommit": {"oid": "33ca054c86f5d045731ec9a51cd1d4a9672a672e"}, "closed": true, "closedAt": "2020-10-12T20:55:06Z", "author": {"login": "anhminhtran235"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQrmqJABqjM4NTc5NzQ3Nzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdR6XALAFqTUwNjkxMDQ3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b6596bde510716026ee9b5284267ccaa60b3210", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/2b6596bde510716026ee9b5284267ccaa60b3210", "committedDate": "2020-10-08T23:35:48Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "f48f97d4b3834322f8855cff3d21bcfe635b0055", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/f48f97d4b3834322f8855cff3d21bcfe635b0055", "committedDate": "2020-10-09T01:07:28Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f48f97d4b3834322f8855cff3d21bcfe635b0055", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/f48f97d4b3834322f8855cff3d21bcfe635b0055", "committedDate": "2020-10-09T01:07:28Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "e3f84123fcfffa7ddf03c12a31c0787a501308ac", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/e3f84123fcfffa7ddf03c12a31c0787a501308ac", "committedDate": "2020-10-09T04:58:40Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3f84123fcfffa7ddf03c12a31c0787a501308ac", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/e3f84123fcfffa7ddf03c12a31c0787a501308ac", "committedDate": "2020-10-09T04:58:40Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "a5b8c965bfbdcc026aeda08f2decfc120a35aea1", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/a5b8c965bfbdcc026aeda08f2decfc120a35aea1", "committedDate": "2020-10-09T17:08:50Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTAyMjE4", "url": "https://github.com/checkstyle/checkstyle/pull/8883#pullrequestreview-506102218", "createdAt": "2020-10-10T14:39:10Z", "commit": {"oid": "a5b8c965bfbdcc026aeda08f2decfc120a35aea1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQxNDozOToxMFrOHfgUHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQxNDozOToxMFrOHfgUHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc5NzM0MQ==", "bodyText": "cont -> shouldContinue", "url": "https://github.com/checkstyle/checkstyle/pull/8883#discussion_r502797341", "createdAt": "2020-10-10T14:39:10Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/RegexpCheck.java", "diffHunk": "@@ -625,8 +625,8 @@ public void beginTree(DetailAST rootAST) {\n \n     /** Recursive method that finds the matches. */\n     private void findMatch() {\n-        final boolean foundMatch = matcher.find();\n-        if (foundMatch) {\n+        boolean cont = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5b8c965bfbdcc026aeda08f2decfc120a35aea1"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTAyNTI1", "url": "https://github.com/checkstyle/checkstyle/pull/8883#pullrequestreview-506102525", "createdAt": "2020-10-10T14:43:39Z", "commit": {"oid": "a5b8c965bfbdcc026aeda08f2decfc120a35aea1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQxNDo0MzozOVrOHfgVzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQxNDo0MzozOVrOHfgVzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc5Nzc3NA==", "bodyText": "can it be shouldContinue = canContinueValidation() ?", "url": "https://github.com/checkstyle/checkstyle/pull/8883#discussion_r502797774", "createdAt": "2020-10-10T14:43:39Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/RegexpCheck.java", "diffHunk": "@@ -641,24 +641,23 @@ private void findMatch() {\n                     logMessage(startLine);\n                 }\n             }\n-            if (canContinueValidation(ignore)) {\n-                findMatch();\n+            if (!canContinueValidation()) {\n+                cont = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5b8c965bfbdcc026aeda08f2decfc120a35aea1"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5b8c965bfbdcc026aeda08f2decfc120a35aea1", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/a5b8c965bfbdcc026aeda08f2decfc120a35aea1", "committedDate": "2020-10-09T17:08:50Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "c675c030340ac55c5816ea06b05021b4f34e4b62", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/c675c030340ac55c5816ea06b05021b4f34e4b62", "committedDate": "2020-10-11T20:53:06Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c675c030340ac55c5816ea06b05021b4f34e4b62", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/c675c030340ac55c5816ea06b05021b4f34e4b62", "committedDate": "2020-10-11T20:53:06Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "4dbb0c872472c1a48dcae5f25b4e761656123ce4", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/4dbb0c872472c1a48dcae5f25b4e761656123ce4", "committedDate": "2020-10-11T21:01:58Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4dbb0c872472c1a48dcae5f25b4e761656123ce4", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/4dbb0c872472c1a48dcae5f25b4e761656123ce4", "committedDate": "2020-10-11T21:01:58Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "b7282469af8fc6c44b98014aebe944b7aa885863", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/b7282469af8fc6c44b98014aebe944b7aa885863", "committedDate": "2020-10-12T02:11:55Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7282469af8fc6c44b98014aebe944b7aa885863", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/b7282469af8fc6c44b98014aebe944b7aa885863", "committedDate": "2020-10-12T02:11:55Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "418a5784c35995dddec8cac8e61f42a0f700fa8b", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/418a5784c35995dddec8cac8e61f42a0f700fa8b", "committedDate": "2020-10-12T02:25:15Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "418a5784c35995dddec8cac8e61f42a0f700fa8b", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/418a5784c35995dddec8cac8e61f42a0f700fa8b", "committedDate": "2020-10-12T02:25:15Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "a289ec38ab4d11f447052ffc35b9c302010ad0b8", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/a289ec38ab4d11f447052ffc35b9c302010ad0b8", "committedDate": "2020-10-12T02:34:41Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MjYyNTYz", "url": "https://github.com/checkstyle/checkstyle/pull/8883#pullrequestreview-506262563", "createdAt": "2020-10-12T02:52:46Z", "commit": {"oid": "a289ec38ab4d11f447052ffc35b9c302010ad0b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a289ec38ab4d11f447052ffc35b9c302010ad0b8", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/a289ec38ab4d11f447052ffc35b9c302010ad0b8", "committedDate": "2020-10-12T02:34:41Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "b96900cf5de9bf1fe5c1d5bc5000281eadc1ee8e", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/b96900cf5de9bf1fe5c1d5bc5000281eadc1ee8e", "committedDate": "2020-10-12T02:53:31Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b96900cf5de9bf1fe5c1d5bc5000281eadc1ee8e", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/b96900cf5de9bf1fe5c1d5bc5000281eadc1ee8e", "committedDate": "2020-10-12T02:53:31Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "a99c720c596886b835adb1ed532480bb7e42f2af", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/a99c720c596886b835adb1ed532480bb7e42f2af", "committedDate": "2020-10-12T03:13:18Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2Mjg4NDA0", "url": "https://github.com/checkstyle/checkstyle/pull/8883#pullrequestreview-506288404", "createdAt": "2020-10-12T04:43:21Z", "commit": {"oid": "a99c720c596886b835adb1ed532480bb7e42f2af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNDo0MzoyMVrOHfu3JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNDo0MzoyMVrOHfu3JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzAzNTY4NA==", "bodyText": "Name it InputRegexpCheckStopEarly", "url": "https://github.com/checkstyle/checkstyle/pull/8883#discussion_r503035684", "createdAt": "2020-10-12T04:43:21Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/regexp/RegexpCheckTest.java", "diffHunk": "@@ -112,6 +112,17 @@ public void testIllegalPass() throws Exception {\n         verify(checkConfig, getPath(\"InputRegexpSemantic.java\"), expected);\n     }\n \n+    @Test\n+    public void testStopEarly() throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(RegexpCheck.class);\n+        checkConfig.addAttribute(\"format\", \"a\");\n+        checkConfig.addAttribute(\"illegalPattern\", \"false\");\n+        checkConfig.addAttribute(\"duplicateLimit\", \"-1\");\n+        final String[] expected = CommonUtil.EMPTY_STRING_ARRAY;\n+        verify(checkConfig, getPath(\"InputStopEarly.java\"), expected);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a99c720c596886b835adb1ed532480bb7e42f2af"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MzY4ODk1", "url": "https://github.com/checkstyle/checkstyle/pull/8883#pullrequestreview-506368895", "createdAt": "2020-10-12T07:45:40Z", "commit": {"oid": "a99c720c596886b835adb1ed532480bb7e42f2af"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a99c720c596886b835adb1ed532480bb7e42f2af", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/a99c720c596886b835adb1ed532480bb7e42f2af", "committedDate": "2020-10-12T03:13:18Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "e975af383a08a4fef9215458dbf0ea4225304e24", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/e975af383a08a4fef9215458dbf0ea4225304e24", "committedDate": "2020-10-12T17:13:00Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e975af383a08a4fef9215458dbf0ea4225304e24", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/e975af383a08a4fef9215458dbf0ea4225304e24", "committedDate": "2020-10-12T17:13:00Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "c5ded25133dc70fea26bf92bf452ee5bf57adeac", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/c5ded25133dc70fea26bf92bf452ee5bf57adeac", "committedDate": "2020-10-12T17:32:15Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c437433e6358f5fd44743b1631dfc6884061bf85", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/c437433e6358f5fd44743b1631dfc6884061bf85", "committedDate": "2020-10-12T18:08:58Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5ded25133dc70fea26bf92bf452ee5bf57adeac", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/c5ded25133dc70fea26bf92bf452ee5bf57adeac", "committedDate": "2020-10-12T17:32:15Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}, "afterCommit": {"oid": "c437433e6358f5fd44743b1631dfc6884061bf85", "author": {"user": {"login": "anhminhtran235", "name": null}}, "url": "https://github.com/checkstyle/checkstyle/commit/c437433e6358f5fd44743b1631dfc6884061bf85", "committedDate": "2020-10-12T18:08:58Z", "message": "Issue #7983: Resolve Pitest Issues - RegexpCheck (2)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2OTEwNDcy", "url": "https://github.com/checkstyle/checkstyle/pull/8883#pullrequestreview-506910472", "createdAt": "2020-10-12T20:53:34Z", "commit": {"oid": "c437433e6358f5fd44743b1631dfc6884061bf85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1342, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}