{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNTI3MDY0", "number": 8804, "title": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata", "bodyText": "#8801", "createdAt": "2020-09-07T16:24:00Z", "url": "https://github.com/checkstyle/checkstyle/pull/8804", "merged": true, "mergeCommit": {"oid": "39b02e16d55a081ba779c0bdb2318ab30eaea515"}, "closed": true, "closedAt": "2020-09-09T23:00:02Z", "author": {"login": "gaurabdg"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGlnH0AFqTQ4MzY1ODcwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHSRx6gBqjM3NDc3MjMwNjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjU4NzAy", "url": "https://github.com/checkstyle/checkstyle/pull/8804#pullrequestreview-483658702", "createdAt": "2020-09-07T16:29:42Z", "commit": {"oid": "39247ff3af2419ce301d9be161725d05319279f5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNjoyOTo0MlrOHOEdFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNjoyOTo0MlrOHOEdFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUxNTA5Mg==", "bodyText": "please review PR one more time, and remove all unrelated changes.", "url": "https://github.com/checkstyle/checkstyle/pull/8804#discussion_r484515092", "createdAt": "2020-09-07T16:29:42Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/AllTestsTest.java", "diffHunk": "@@ -170,30 +170,32 @@ private static void verifyInputFile(Map<String, List<String>> allTests, File fil\n \n     private static void verifyInputFile(Map<String, List<String>> allTests, boolean skipFileNaming,\n             String path, String fileName) {\n-        List<String> classes;\n-        int slash = path.lastIndexOf(File.separatorChar);\n-        String packge = path.substring(0, slash);\n-        boolean found = false;\n-\n-        for (int depth = 0; depth < 4; depth++) {\n-            // -@cs[MoveVariableInsideIf] assignment value is modified later so it can't be\n-            // moved\n-            final String folderPath = packge;\n-            slash = packge.lastIndexOf(File.separatorChar);\n-            packge = path.substring(0, slash);\n-            classes = allTests.get(packge);\n-\n-            if (classes != null\n-                    && checkInputMatchCorrectFileStructure(classes, folderPath, skipFileNaming,\n-                            fileName)) {\n-                found = true;\n-                break;\n+        if (!skipFileNaming) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39247ff3af2419ce301d9be161725d05319279f5"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39247ff3af2419ce301d9be161725d05319279f5", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/39247ff3af2419ce301d9be161725d05319279f5", "committedDate": "2020-09-07T16:17:27Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "5088be72695c2f03e63dfcb1c7e626a7830f2696", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5088be72695c2f03e63dfcb1c7e626a7830f2696", "committedDate": "2020-09-07T17:22:14Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5088be72695c2f03e63dfcb1c7e626a7830f2696", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5088be72695c2f03e63dfcb1c7e626a7830f2696", "committedDate": "2020-09-07T17:22:14Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "c0d0500f68f0471d048dbaf7072c9f2e77858d74", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c0d0500f68f0471d048dbaf7072c9f2e77858d74", "committedDate": "2020-09-07T17:40:35Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0d0500f68f0471d048dbaf7072c9f2e77858d74", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c0d0500f68f0471d048dbaf7072c9f2e77858d74", "committedDate": "2020-09-07T17:40:35Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "1670f41b91c6e55f389a88e97e9119370710de46", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1670f41b91c6e55f389a88e97e9119370710de46", "committedDate": "2020-09-07T17:43:18Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1670f41b91c6e55f389a88e97e9119370710de46", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1670f41b91c6e55f389a88e97e9119370710de46", "committedDate": "2020-09-07T17:43:18Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "e1efd045028f1c13106df1969d4ed3656a561c37", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e1efd045028f1c13106df1969d4ed3656a561c37", "committedDate": "2020-09-07T17:58:29Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1efd045028f1c13106df1969d4ed3656a561c37", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e1efd045028f1c13106df1969d4ed3656a561c37", "committedDate": "2020-09-07T17:58:29Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "651a905bbcbbfc5da47c6aed4d2be0dbe6327bcd", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/651a905bbcbbfc5da47c6aed4d2be0dbe6327bcd", "committedDate": "2020-09-07T18:01:06Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "651a905bbcbbfc5da47c6aed4d2be0dbe6327bcd", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/651a905bbcbbfc5da47c6aed4d2be0dbe6327bcd", "committedDate": "2020-09-07T18:01:06Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/73fec1002de45fb85cb33f7ef597ce4cdf1ec0de", "committedDate": "2020-09-07T18:04:49Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNzI5MjAz", "url": "https://github.com/checkstyle/checkstyle/pull/8804#pullrequestreview-483729203", "createdAt": "2020-09-07T23:56:49Z", "commit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMzo1Njo0OVrOHOI9vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwMDoxMTowNlrOHOJFIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU4ODk4OQ==", "bodyText": "set of any supported <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html\">tokens</a>", "url": "https://github.com/checkstyle/checkstyle/pull/8804#discussion_r484588989", "createdAt": "2020-09-07T23:56:49Z", "author": {"login": "romani"}, "path": "src/xdocs/config_misc.xml", "diffHunk": "@@ -673,6 +673,16 @@ String unitAbbrev = \"\\u03bc\\u03bc\\u03bc\";\n               <td><code>null</code></td>\n               <td>3.2</td>\n             </tr>\n+            <tr>\n+              <td>tokens</td>\n+              <td>tokens to check</td>\n+              <td>all tokens\n+                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html\">\n+                    allTokenTypes</a>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU5MDA1Ng==", "bodyText": "tokens  = CheckUtil.getTokenText(check.getAcceptableTokens(),\n                check.getRequiredTokens())\nif (tokens.size() == TOKEN_TYPE_TOTAL_COUNT) {\n expectedAcceptableTokenText = \"all tokens allTokenTypes\";\n} else {\n expectedAcceptableTokenText = \"subset of tokens \"\n                + tokens;\n}", "url": "https://github.com/checkstyle/checkstyle/pull/8804#discussion_r484590056", "createdAt": "2020-09-08T00:04:58Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -877,10 +878,13 @@ private static void validatePropertySectionPropertyTokens(String fileName, Strin\n                         + \"' should have the basic token description\");\n \n         final String acceptableTokenText = columns.get(2).getTextContent().trim();\n-        assertEquals(\"subset of tokens \"\n-                        + CheckUtil.getTokenText(check.getAcceptableTokens(),\n-                check.getRequiredTokens()),\n-                acceptableTokenText\n+        String expectedAcceptableTokenText = \"subset of tokens \"\n+                + CheckUtil.getTokenText(check.getAcceptableTokens(),\n+                check.getRequiredTokens());\n+        if (\"DescendantToken\".equals(sectionName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU5MDQ5Nw==", "bodyText": "|| acceptableTokens.size() == TOKEN_TYPE_TOTAL_COUNT)\nbut why we need this condition, Arrays.equals will never be true.\nPlease remove.", "url": "https://github.com/checkstyle/checkstyle/pull/8804#discussion_r484590497", "createdAt": "2020-09-08T00:08:10Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -745,7 +745,8 @@ else if (AbstractCheck.class.isAssignableFrom(clss)) {\n             Arrays.sort(requiredTokens);\n \n             if (!Arrays.equals(acceptableTokens, defaultTokens)\n-                    || !Arrays.equals(acceptableTokens, requiredTokens)) {\n+                    || !Arrays.equals(acceptableTokens, requiredTokens)\n+                    || \"DescendantToken\".equals(sectionName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU5MDYwMg==", "bodyText": "set of any tokens is more logical, sorry for confusion from the beginning.", "url": "https://github.com/checkstyle/checkstyle/pull/8804#discussion_r484590602", "createdAt": "2020-09-08T00:09:12Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsJavaDocsTest.java", "diffHunk": "@@ -317,32 +317,28 @@ private static String createPropertiesText() {\n \n             String typeText = \"java.lang.String[]\";\n             final String propertyType = property.get(2).getTextContent();\n-            final boolean isPropertyTokenType = propertyType.contains(\"subset of tokens\")\n+            final boolean isSpecialAllTokensType = propertyType.contains(\"all tokens\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU5MDg4Mg==", "bodyText": "anyTokenTypesSet", "url": "https://github.com/checkstyle/checkstyle/pull/8804#discussion_r484590882", "createdAt": "2020-09-08T00:11:06Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsJavaDocsTest.java", "diffHunk": "@@ -317,32 +317,28 @@ private static String createPropertiesText() {\n \n             String typeText = \"java.lang.String[]\";\n             final String propertyType = property.get(2).getTextContent();\n-            final boolean isPropertyTokenType = propertyType.contains(\"subset of tokens\")\n+            final boolean isSpecialAllTokensType = propertyType.contains(\"all tokens\");\n+            final boolean isPropertyTokenType = isSpecialAllTokensType\n+                    || propertyType.contains(\"subset of tokens\")\n                     || propertyType.contains(\"subset of javadoc tokens\");\n             if (!isPropertyTokenType) {\n-                final Node typeNode;\n-                if (property.get(2).getFirstChild().getFirstChild() == null) {\n-                    typeNode = property.get(2).getFirstChild().getNextSibling();\n-                }\n-                else {\n-                    typeNode = property.get(2).getFirstChild().getFirstChild();\n-                }\n-                final String typeName = typeNode.getTextContent().trim();\n+                final String typeName =\n+                        getCorrectNodeBasedOnPropertyType(property).getTextContent().trim();\n                 typeText = FULLY_QUALIFIED_CLASS_NAMES.get(typeName).getTypeName();\n             }\n+            if (isSpecialAllTokensType) {\n+                typeText = \"allTokenTypes\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73fec1002de45fb85cb33f7ef597ce4cdf1ec0de", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/73fec1002de45fb85cb33f7ef597ce4cdf1ec0de", "committedDate": "2020-09-07T18:04:49Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "659efe2b62ee72988ba1203e9b0c25cedd6c6e12", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/659efe2b62ee72988ba1203e9b0c25cedd6c6e12", "committedDate": "2020-09-08T20:22:36Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "659efe2b62ee72988ba1203e9b0c25cedd6c6e12", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/659efe2b62ee72988ba1203e9b0c25cedd6c6e12", "committedDate": "2020-09-08T20:22:36Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "02499152d1f51f99a26b262d89de0a0733705daa", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/02499152d1f51f99a26b262d89de0a0733705daa", "committedDate": "2020-09-09T14:38:02Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02499152d1f51f99a26b262d89de0a0733705daa", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/02499152d1f51f99a26b262d89de0a0733705daa", "committedDate": "2020-09-09T14:38:02Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "778173ece277c1b657c28628ebf6274b46960b83", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/778173ece277c1b657c28628ebf6274b46960b83", "committedDate": "2020-09-09T14:41:09Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "778173ece277c1b657c28628ebf6274b46960b83", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/778173ece277c1b657c28628ebf6274b46960b83", "committedDate": "2020-09-09T14:41:09Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "41d977719a239f580b5519b5c5aca7cf5dab7fe6", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/41d977719a239f580b5519b5c5aca7cf5dab7fe6", "committedDate": "2020-09-09T14:43:53Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDg4OTk3", "url": "https://github.com/checkstyle/checkstyle/pull/8804#pullrequestreview-485088997", "createdAt": "2020-09-09T14:47:36Z", "commit": {"oid": "41d977719a239f580b5519b5c5aca7cf5dab7fe6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddb547a9c3e5e251459d63f85469fd09a4af627d", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ddb547a9c3e5e251459d63f85469fd09a4af627d", "committedDate": "2020-09-09T20:32:12Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41d977719a239f580b5519b5c5aca7cf5dab7fe6", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/41d977719a239f580b5519b5c5aca7cf5dab7fe6", "committedDate": "2020-09-09T14:43:53Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}, "afterCommit": {"oid": "ddb547a9c3e5e251459d63f85469fd09a4af627d", "author": {"user": {"login": "gaurabdg", "name": "Gaurab Dasgupta"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ddb547a9c3e5e251459d63f85469fd09a4af627d", "committedDate": "2020-09-09T20:32:12Z", "message": "Issue #8801: Support for all Token Types as a Property Type for Module Metadata"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1093, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}