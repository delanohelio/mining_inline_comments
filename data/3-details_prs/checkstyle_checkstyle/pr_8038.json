{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MTY1NjQ3", "number": 8038, "title": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation", "bodyText": "Resolves Issue #7734\nDiff Report:", "createdAt": "2020-04-05T16:52:00Z", "url": "https://github.com/checkstyle/checkstyle/pull/8038", "merged": true, "mergeCommit": {"oid": "a67d0599b531a2912ecf1206b4ea06df127145de"}, "closed": true, "closedAt": "2020-06-23T15:23:00Z", "author": {"login": "Abhishek-kumar09"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYOkmpgBqjMyNDA1MzkzMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct3VY-gFqTQzNTI3MDQzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9be34f1cfd45e77995b268a1d5f1ae47c381afc2", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/9be34f1cfd45e77995b268a1d5f1ae47c381afc2", "committedDate": "2020-04-05T16:47:44Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "ae2d7235851cef20638eff1e5191dd396006c072", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ae2d7235851cef20638eff1e5191dd396006c072", "committedDate": "2020-04-16T15:38:15Z", "message": "minor: changed suppressionxpath generator for pr #8038"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae2d7235851cef20638eff1e5191dd396006c072", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ae2d7235851cef20638eff1e5191dd396006c072", "committedDate": "2020-04-16T15:38:15Z", "message": "minor: changed suppressionxpath generator for pr #8038"}, "afterCommit": {"oid": "955b3106b6addaaa28cbd93ae609f3ff54473c35", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/955b3106b6addaaa28cbd93ae609f3ff54473c35", "committedDate": "2020-04-16T16:03:08Z", "message": "minor: changed suppressionxpath generator for pr #8038"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "955b3106b6addaaa28cbd93ae609f3ff54473c35", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/955b3106b6addaaa28cbd93ae609f3ff54473c35", "committedDate": "2020-04-16T16:03:08Z", "message": "minor: changed suppressionxpath generator for pr #8038"}, "afterCommit": {"oid": "93ad72a98dba1fd266434b7c69924f213ed3eabf", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/93ad72a98dba1fd266434b7c69924f213ed3eabf", "committedDate": "2020-04-17T18:11:37Z", "message": "minor: changed suppressionxpath generator for pr #8038"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93ad72a98dba1fd266434b7c69924f213ed3eabf", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/93ad72a98dba1fd266434b7c69924f213ed3eabf", "committedDate": "2020-04-17T18:11:37Z", "message": "minor: changed suppressionxpath generator for pr #8038"}, "afterCommit": {"oid": "e357902219c62cf640c1d6452f1de11f59e48d84", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e357902219c62cf640c1d6452f1de11f59e48d84", "committedDate": "2020-04-19T14:49:12Z", "message": "minor: changed suppressionxpath generator for pr #8038"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDA0NDQy", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-400404442", "createdAt": "2020-04-25T15:34:59Z", "commit": {"oid": "e0d6e9da646fee3947c469a165629aa245a8a577"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxNTozNDo1OVrOGL21XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxNTo0MTo0NVrOGL26OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NTkxNw==", "bodyText": "we do not allow new problems with coverage to appear.\nThis list of ignored problems can only be reduced.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415085917", "createdAt": "2020-04-25T15:34:59Z", "author": {"login": "romani"}, "path": ".ci/pitest.sh", "diffHunk": "@@ -135,8 +135,8 @@ pitest-ant)\n pitest-indentation)\n   mvn -e -P$1 clean test org.pitest:pitest-maven:mutationCoverage;\n   declare -a ignoredItems=(\n+  \"AbstractExpressionHandler.java.html:<td class='covered'><pre><span  class='survived'>                &#38;&#38; tree.getColumnNo() &#60; realStart.getColumnNo()) {</span></pre></td></tr>\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d6e9da646fee3947c469a165629aa245a8a577"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NjE3Mg==", "bodyText": "extra space ? please restore.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415086172", "createdAt": "2020-04-25T15:36:21Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/AbstractExpressionHandler.java", "diffHunk": "@@ -390,37 +389,51 @@ protected final void checkExpressionSubtree(\n         boolean firstLineMatches,\n         boolean allowNesting\n     ) {\n-        final LineSet subtreeLines = new LineSet();\n-        final int firstLine = getFirstLine(Integer.MAX_VALUE, tree);\n+        final DetailAstSet subtreeAst = new DetailAstSet();\n+        final int firstLine = getFirstLine(tree);\n         if (firstLineMatches && !allowNesting) {\n-            subtreeLines.addLineAndCol(firstLine,\n-                getLineStart(indentCheck.getLine(firstLine - 1)));\n+            final DetailAST firstAst = getFirstAst(tree, tree);\n+            subtreeAst.addAst(firstAst);\n         }\n-        findSubtreeLines(subtreeLines, tree, allowNesting);\n+        findSubtreeAst(subtreeAst, tree, allowNesting);\n \n-        checkLinesIndent(subtreeLines, indentLevel, firstLineMatches, firstLine);\n+        checkLinesIndent(subtreeAst, indentLevel, firstLineMatches, firstLine);\n     }\n \n     /**\n-     * Get the first line for a given expression.\n+     * Get the first line number for given expression.\n      *\n-     * @param startLine   the line we are starting from\n+     * @param tree      the expression to find the first line for\n+     * @return          the first line of expression\n+     */\n+    protected static int getFirstLine(DetailAST tree) {\n+        return getFirstAst(tree, tree).getLineNo();\n+    }\n+\n+    /**\n+     * Get the first ast for given expression.\n+     *\n+     * @param ast         the current ast that may have minimum line number\n      * @param tree        the expression to find the first line for\n      *\n-     * @return the first line of the expression\n+     * @return the first ast of the expression\n      */\n-    protected static int getFirstLine(int startLine, DetailAST tree) {\n-        int realStart = startLine;\n-        final int currLine = tree.getLineNo();\n-        if (currLine < realStart) {\n-            realStart = currLine;\n+    protected static DetailAST getFirstAst(DetailAST ast, DetailAST tree) {\n+        DetailAST realStart = ast;\n+\n+        if (tree.getLineNo() < realStart.getLineNo()) {\n+            realStart = tree;\n+        }\n+        if (tree.getLineNo() == realStart.getLineNo()\n+                && tree.getColumnNo() < realStart.getColumnNo()) {\n+            realStart = tree;\n         }\n \n         // check children\n         for (DetailAST node = tree.getFirstChild();\n-            node != null;\n-            node = node.getNextSibling()) {\n-            realStart = getFirstLine(realStart, node);\n+             node != null;\n+             node = node.getNextSibling()) {\n+            realStart = getFirstAst(realStart, node);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d6e9da646fee3947c469a165629aa245a8a577"}, "originalPosition": 176}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NjQ0MA==", "bodyText": "please explain this change, we do not expect Input files to be changed.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415086440", "createdAt": "2020-04-25T15:37:59Z", "author": {"login": "romani"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationInvalidSwitchIndent.java", "diffHunk": "@@ -98,9 +98,9 @@ private void method1() { //indent:4 exp:4\n         switch (s) { //indent:8 exp:8\n \t    case 1: //indent:8 exp:12 warn\n \t    \tif (true) //indent:12 exp:16 warn\n-\t    \t\tbreak; //indent:16 exp:20 warn\n+                break; //indent:16 exp:20 warn\n \t    \telse //indent:12 exp:16 warn\n-\t    \t\tbreak; //indent:16 exp:20 warn\n+                break; //indent:16 exp:20 warn", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d6e9da646fee3947c469a165629aa245a8a577"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NjUxNg==", "bodyText": "please restore indentation.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415086516", "createdAt": "2020-04-25T15:38:18Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/xpath/XpathMapperTest.java", "diffHunk": "@@ -805,7 +805,7 @@ public void testQueryElementFollowingSibling() throws Exception {\n                 .findFirstToken(TokenTypes.METHOD_DEF)\n                 .getNextSibling();\n         final DetailAST[] expected = {expectedMethodDefNode,\n-                expectedMethodDefNode.getNextSibling()};\n+            expectedMethodDefNode.getNextSibling()};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d6e9da646fee3947c469a165629aa245a8a577"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NzE2MQ==", "bodyText": "How this is related to update ? it is not ok, please provide detailed explanation.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415087161", "createdAt": "2020-04-25T15:41:45Z", "author": {"login": "romani"}, "path": "config/suppressions.xml", "diffHunk": "@@ -14,6 +14,10 @@\n               files=\"TokenTypes.java|IndentationCheckTest.java\"\n               lines=\"1\"/>\n \n+    <!--MainTest.java contains generated x-path which is very long-->\n+    <suppress checks=\"FileLength|MethodLength\"\n+              files=\"MainTest.java\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d6e9da646fee3947c469a165629aa245a8a577"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDA1MTM1", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-400405135", "createdAt": "2020-04-25T15:43:38Z", "commit": {"oid": "e357902219c62cf640c1d6452f1de11f59e48d84"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxNTo0MzozOVrOGL27PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxNTo0MzozOVrOGL27PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NzQyMQ==", "bodyText": "too much changes .... we need to select different Input file with low level of violations.\nWe just need to see that few xpath are generated.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415087421", "createdAt": "2020-04-25T15:43:39Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/MainTest.java", "diffHunk": "@@ -1036,64 +1036,195 @@ public void testPrintSuppressionOnMoreThanOneFile(@SysErr Capturable systemErr,\n     public void testGenerateXpathSuppressionOptionOne(@SysErr Capturable systemErr,\n             @SysOut Capturable systemOut) throws IOException {\n         final String expected = addEndOfLine(\n-            \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\",\n+                \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\",\n                 \"<!DOCTYPE suppressions PUBLIC\",\n                 \"    \\\"-//Checkstyle//DTD SuppressionXpathFilter Experimental Configuration 1.2\"\n                     + \"//EN\\\"\",\n                 \"    \\\"https://checkstyle.org/dtds/suppressions_1_2_xpath_experimental.dtd\\\">\",\n                 \"<suppressions>\",\n                 \"<suppress-xpath\",\n                 \"       files=\\\"InputMainComplexityOverflow.java\\\"\",\n+                \"       checks=\\\"IndentationCheck\\\"\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e357902219c62cf640c1d6452f1de11f59e48d84"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDI1NjAw", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-400425600", "createdAt": "2020-04-25T19:45:39Z", "commit": {"oid": "e357902219c62cf640c1d6452f1de11f59e48d84"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxOTo0NTozOVrOGL5jww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxOTo0NTozOVrOGL5jww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEzMDU2Mw==", "bodyText": "Changes discussed here - #8038 (comment)\nOn removing this method I get correct indentation results and no errors with #8038 (comment) is encountered.\nThis method has somehow no results on nesting of arrayInit children and no changes are encountered on removing or keeping this method for any arrayInit test cases inside IndentationcheckTest.java. Infact generated snapshot checks also don't have any effect on nested array init in any possible way.\nAlso on the file mentioned at comment link above the generated snapshot is not producing such errors.\nkeeping this method generate pitest failures, so I had to remove that.\nSince it now violating with many online ci test cases, I think I have to restore this method and test further to remove pitest failures.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r415130563", "createdAt": "2020-04-25T19:45:39Z", "author": {"login": "Abhishek-kumar09"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/ArrayInitHandler.java", "diffHunk": "@@ -79,11 +79,6 @@ protected DetailAST getRightCurly() {\n         return getMainAst().findFirstToken(TokenTypes.RCURLY);\n     }\n \n-    @Override\n-    protected boolean canChildrenBeNested() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e357902219c62cf640c1d6452f1de11f59e48d84"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e357902219c62cf640c1d6452f1de11f59e48d84", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e357902219c62cf640c1d6452f1de11f59e48d84", "committedDate": "2020-04-19T14:49:12Z", "message": "minor: changed suppressionxpath generator for pr #8038"}, "afterCommit": {"oid": "5fc78c690c51ef080ee0ce5145b57dd654ec44d5", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5fc78c690c51ef080ee0ce5145b57dd654ec44d5", "committedDate": "2020-04-26T17:58:07Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fc78c690c51ef080ee0ce5145b57dd654ec44d5", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5fc78c690c51ef080ee0ce5145b57dd654ec44d5", "committedDate": "2020-04-26T17:58:07Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "05e76800fef18add8adc5d8a59c60f254e51f69e", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05e76800fef18add8adc5d8a59c60f254e51f69e", "committedDate": "2020-04-26T18:14:20Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05e76800fef18add8adc5d8a59c60f254e51f69e", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05e76800fef18add8adc5d8a59c60f254e51f69e", "committedDate": "2020-04-26T18:14:20Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "791613c0755ed4dcc45a53d0900b4808003c9e87", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/791613c0755ed4dcc45a53d0900b4808003c9e87", "committedDate": "2020-06-04T20:28:26Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "791613c0755ed4dcc45a53d0900b4808003c9e87", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/791613c0755ed4dcc45a53d0900b4808003c9e87", "committedDate": "2020-06-04T20:28:26Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "345d7b2f0e970b8b8aca171a3d7efa394d4381ef", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/345d7b2f0e970b8b8aca171a3d7efa394d4381ef", "committedDate": "2020-06-04T20:40:19Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "345d7b2f0e970b8b8aca171a3d7efa394d4381ef", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/345d7b2f0e970b8b8aca171a3d7efa394d4381ef", "committedDate": "2020-06-04T20:40:19Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "337e058666344618b469b39fb7878f598ca0cac4", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/337e058666344618b469b39fb7878f598ca0cac4", "committedDate": "2020-06-04T21:35:02Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzMzMjU0", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-425333254", "createdAt": "2020-06-05T14:06:17Z", "commit": {"oid": "337e058666344618b469b39fb7878f598ca0cac4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDowNjoxN1rOGfwBXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDowNjoxN1rOGfwBXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk0NTgyMA==", "bodyText": "please expain this mutation", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r435945820", "createdAt": "2020-06-05T14:06:17Z", "author": {"login": "romani"}, "path": ".ci/pitest.sh", "diffHunk": "@@ -131,10 +131,11 @@ pitest-ant)\n pitest-indentation)\n   mvn -e -P$1 clean test org.pitest:pitest-maven:mutationCoverage;\n   declare -a ignoredItems=(\n+  \"AbstractExpressionHandler.java.html:<td class='covered'><pre><span  class='survived'>                &#38;&#38; tree.getColumnNo() &#60; realStart.getColumnNo()) {</span></pre></td></tr>\"\n   \"AbstractExpressionHandler.java.html:<td class='covered'><pre><span  class='survived'>            if (colNum == null || thisLineColumn &#60; colNum) {</span></pre></td></tr>\"\n-  \"AbstractExpressionHandler.java.html:<td class='covered'><pre><span  class='survived'>        if (currLine &#60; realStart) {</span></pre></td></tr>\"\n   \"AbstractExpressionHandler.java.html:<td class='covered'><pre><span  class='survived'>            if (toTest.getColumnNo() &#60; first.getColumnNo()) {</span></pre></td></tr>\"\n   \"ArrayInitHandler.java.html:<td class='covered'><pre><span  class='survived'>        if (firstChildPos &#62;= 0) {</span></pre></td></tr>\"\n+  \"ArrayInitHandler.java.html:<td class='covered'><pre><span  class='survived'>        return true;</span></pre></td></tr>\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "337e058666344618b469b39fb7878f598ca0cac4"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "337e058666344618b469b39fb7878f598ca0cac4", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/337e058666344618b469b39fb7878f598ca0cac4", "committedDate": "2020-06-04T21:35:02Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "dcb8cfcd211325c0a637ad52e7bf3c52586106fa", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/dcb8cfcd211325c0a637ad52e7bf3c52586106fa", "committedDate": "2020-06-05T20:49:12Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjIxMzUx", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-425621351", "createdAt": "2020-06-05T20:57:49Z", "commit": {"oid": "dcb8cfcd211325c0a637ad52e7bf3c52586106fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQyMDo1Nzo1MFrOGf9KOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQyMDo1Nzo1MFrOGf9KOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjE2MTA4Mg==", "bodyText": "I had to modify this input file for better test and mutation coverage due to changes in abstractExpressionHandler.java", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r436161082", "createdAt": "2020-06-05T20:57:50Z", "author": {"login": "Abhishek-kumar09"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationInvalidSwitchIndent.java", "diffHunk": "@@ -101,6 +101,10 @@ private void method1() { //indent:4 exp:4\n \t    \t\tbreak; //indent:16 exp:20 warn\n \t    \telse //indent:12 exp:16 warn\n \t    \t\tbreak; //indent:16 exp:20 warn\n+            case 4: //indent:12 exp:12", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcb8cfcd211325c0a637ad52e7bf3c52586106fa"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dcb8cfcd211325c0a637ad52e7bf3c52586106fa", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/dcb8cfcd211325c0a637ad52e7bf3c52586106fa", "committedDate": "2020-06-05T20:49:12Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}, "afterCommit": {"oid": "3a3db75bd00d1ed1278d4d8107531637f6532023", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3a3db75bd00d1ed1278d4d8107531637f6532023", "committedDate": "2020-06-05T21:27:22Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTY4OTA3", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-430168907", "createdAt": "2020-06-13T21:19:03Z", "commit": {"oid": "3a3db75bd00d1ed1278d4d8107531637f6532023"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMToxOTowM1rOGjZccg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMToxOTowM1rOGjZccg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3MDIyNg==", "bodyText": "please explain a reason of this test and this extra commit. Why we need this test in MainTest ?\nif it is to resolve pitest mutation, please clearly state this in commit message.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r439770226", "createdAt": "2020-06-13T21:19:03Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/MainTest.java", "diffHunk": "@@ -1211,6 +1211,75 @@ public void testGenerateXpathSuppressionOptionTwo(@SysErr Capturable systemErr,\n         assertEquals(\"\", systemErr.getCapturedData(), \"Unexpected system error log\");\n     }\n \n+    @Test\n+    public void testGenerateXpathSuppressionOptionIndentation(@SysErr Capturable systemErr,\n+            @SysOut Capturable systemOut) throws IOException {\n+        final String expected = addEndOfLine(\n+            \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\",\n+            \"<!DOCTYPE suppressions PUBLIC\",\n+            \"    \\\"-//Checkstyle//DTD SuppressionXpathFilter Experimental Configuration 1.2//EN\\\"\",\n+            \"    \\\"https://checkstyle.org/dtds/suppressions_1_2_xpath_experimental.dtd\\\">\",\n+            \"<suppressions>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/\"\n+                + \"OBJBLOCK/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/MODIFIERS\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/\"\n+                + \"OBJBLOCK/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/\"\n+                + \"VARIABLE_DEF[./IDENT[@text='a']]\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/\"\n+                + \"OBJBLOCK/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/\"\n+                + \"LITERAL_FOR\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/\"\n+                + \"OBJBLOCK/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/\"\n+                + \"LITERAL_FOR/SLIST/EXPR/PLUS_ASSIGN/IDENT[@text='i']\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/\"\n+                + \"OBJBLOCK/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/\"\n+                + \"LITERAL_FOR/SLIST/RCURLY\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/OBJBLOCK\"\n+                + \"/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/LITERAL_IF\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/OBJBLOCK\"\n+                + \"/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/LITERAL_IF/SLIST/\"\n+                + \"LITERAL_RETURN\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/OBJBLOCK\"\n+                + \"/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/LITERAL_IF/SLIST/\"\n+                + \"RCURLY\\\"/>\",\n+            \"<suppress-xpath\",\n+            \"       files=\\\"InputMainGenerateXpathIndentation.java\\\"\",\n+            \"       checks=\\\"IndentationCheck\\\"\",\n+            \"       query=\\\"/CLASS_DEF[./IDENT[@text='InputMainGenerateXpathIndentation']]/OBJBLOCK\"\n+                + \"/METHOD_DEF[./IDENT[@text='generateIndentationXpath']]/SLIST/RCURLY\\\"/>\",\n+            \"</suppressions>\"\n+        );\n+\n+        Main.main(\"-c\", \"/google_checks.xml\", \"--generate-xpath-suppression\",\n+                getPath(\"InputMainGenerateXpathIndentation.java\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a3db75bd00d1ed1278d4d8107531637f6532023"}, "originalPosition": 68}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a3db75bd00d1ed1278d4d8107531637f6532023", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3a3db75bd00d1ed1278d4d8107531637f6532023", "committedDate": "2020-06-05T21:27:22Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}, "afterCommit": {"oid": "3bc00e64d8c71296b7c1e86592168ebe21a8f53f", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3bc00e64d8c71296b7c1e86592168ebe21a8f53f", "committedDate": "2020-06-14T10:58:37Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3bc00e64d8c71296b7c1e86592168ebe21a8f53f", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3bc00e64d8c71296b7c1e86592168ebe21a8f53f", "committedDate": "2020-06-14T10:58:37Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}, "afterCommit": {"oid": "833352349390e1d1c1a0b254514dfb2774aa901a", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/833352349390e1d1c1a0b254514dfb2774aa901a", "committedDate": "2020-06-14T15:33:48Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "833352349390e1d1c1a0b254514dfb2774aa901a", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/833352349390e1d1c1a0b254514dfb2774aa901a", "committedDate": "2020-06-14T15:33:48Z", "message": "Pull #8038: Add mainTest cases for Xpath generation and modify inputfiles to support PR #8038"}, "afterCommit": {"oid": "63379da5ed1b0eb92596ff06fd841f47d1963a8f", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/63379da5ed1b0eb92596ff06fd841f47d1963a8f", "committedDate": "2020-06-15T07:15:00Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63379da5ed1b0eb92596ff06fd841f47d1963a8f", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/63379da5ed1b0eb92596ff06fd841f47d1963a8f", "committedDate": "2020-06-15T07:15:00Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "04743caea0c2e927abb644376d6aeea605206a9b", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/04743caea0c2e927abb644376d6aeea605206a9b", "committedDate": "2020-06-15T07:20:30Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzM5NzAx", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-430739701", "createdAt": "2020-06-15T15:11:36Z", "commit": {"oid": "04743caea0c2e927abb644376d6aeea605206a9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTgyNDcy", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-431582472", "createdAt": "2020-06-16T14:46:03Z", "commit": {"oid": "04743caea0c2e927abb644376d6aeea605206a9b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo0NjowM1rOGke7GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo0NzoyNFrOGke_Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwODU2OA==", "bodyText": "How is this related to the issue of logging violations by AST?", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r440908568", "createdAt": "2020-06-16T14:46:03Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/AbstractExpressionHandler.java", "diffHunk": "@@ -251,26 +251,32 @@ protected boolean shouldIncreaseIndent() {\n     /**\n      * Check the indentation for a set of lines.\n      *\n-     * @param lines              the set of lines to check\n+     * @param astSet             the set of abstract syntax tree to check\n      * @param indentLevel        the indentation level\n      * @param firstLineMatches   whether or not the first line has to match\n      * @param firstLine          first line of whole expression\n+     * @param allowNesting       whether or not subtree nesting is allowed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04743caea0c2e927abb644376d6aeea605206a9b"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwOTU3OQ==", "bodyText": "Naming is confusing. They are both called \"Line\" but one is an int and the other is an AST.\nstartLine => startLineAst.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r440909579", "createdAt": "2020-06-16T14:47:24Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/AbstractExpressionHandler.java", "diffHunk": "@@ -251,26 +251,32 @@ protected boolean shouldIncreaseIndent() {\n     /**\n      * Check the indentation for a set of lines.\n      *\n-     * @param lines              the set of lines to check\n+     * @param astSet             the set of abstract syntax tree to check\n      * @param indentLevel        the indentation level\n      * @param firstLineMatches   whether or not the first line has to match\n      * @param firstLine          first line of whole expression\n+     * @param allowNesting       whether or not subtree nesting is allowed\n      */\n-    private void checkLinesIndent(LineSet lines,\n+    private void checkLinesIndent(DetailAstSet astSet,\n                                   IndentLevel indentLevel,\n                                   boolean firstLineMatches,\n-                                  int firstLine) {\n-        if (!lines.isEmpty()) {\n+                                  int firstLine,\n+                                  boolean allowNesting) {\n+        if (!astSet.isEmpty()) {\n             // check first line\n-            final int startLine = lines.firstLine();\n-            final int endLine = lines.lastLine();\n-            final int startCol = lines.firstLineCol();\n+            final DetailAST startLine = astSet.firstLine();\n+            final int endLine = astSet.lastLine();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04743caea0c2e927abb644376d6aeea605206a9b"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cf2d0f0f6689c02cc2f75c248521ba666093960", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8cf2d0f0f6689c02cc2f75c248521ba666093960", "committedDate": "2020-06-16T18:11:56Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04743caea0c2e927abb644376d6aeea605206a9b", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/04743caea0c2e927abb644376d6aeea605206a9b", "committedDate": "2020-06-15T07:20:30Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}, "afterCommit": {"oid": "8cf2d0f0f6689c02cc2f75c248521ba666093960", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8cf2d0f0f6689c02cc2f75c248521ba666093960", "committedDate": "2020-06-16T18:11:56Z", "message": "Issue #7734: Update AbstractChecks to log DetailAST - Indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDQyNzM5", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-435042739", "createdAt": "2020-06-22T15:34:48Z", "commit": {"oid": "8cf2d0f0f6689c02cc2f75c248521ba666093960"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTozNDo0OFrOGnGHkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNTozNDo0OFrOGnGHkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY0Nzg5MA==", "bodyText": "When are these 2 values not equal? It seems to me when they are not equal there is an issue of some kind.\n\nHere getLineStart() gives 4 and expandedTabscolumnNumber() gives 16.\nIs it an Issue of some kind.", "url": "https://github.com/checkstyle/checkstyle/pull/8038#discussion_r443647890", "createdAt": "2020-06-22T15:34:48Z", "author": {"login": "Abhishek-kumar09"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationInvalidSwitchIndent.java", "diffHunk": "@@ -101,6 +101,10 @@ private void method1() { //indent:4 exp:4\n \t    \t\tbreak; //indent:16 exp:20 warn\n \t    \telse //indent:12 exp:16 warn\n \t    \t\tbreak; //indent:16 exp:20 warn\n+            case 4: //indent:12 exp:12\n+                s++; //indent:16 exp:16\n+    /* hello */ case 5: //indent:4 exp:12 warn", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cf2d0f0f6689c02cc2f75c248521ba666093960"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MjcwNDMz", "url": "https://github.com/checkstyle/checkstyle/pull/8038#pullrequestreview-435270433", "createdAt": "2020-06-22T21:00:49Z", "commit": {"oid": "8cf2d0f0f6689c02cc2f75c248521ba666093960"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 667, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}