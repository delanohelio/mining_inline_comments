{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxOTI4MjA0", "number": 7707, "title": "Issue #7534: fix NPE in MissingDeprecatedCheck", "bodyText": "Issue #7534: fix NPE in MissingDeprecatedCheck\ndiff report here: https://www.nickmancuso.dev/hosting/diff/index.html", "createdAt": "2020-02-29T18:58:18Z", "url": "https://github.com/checkstyle/checkstyle/pull/7707", "merged": true, "mergeCommit": {"oid": "af03c9d71880076de86164c0868c7a7222023e9c"}, "closed": true, "closedAt": "2020-03-09T12:59:35Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJY502gFqTM2Njg1ODI2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKjbqYgH2gAyMzgxOTI4MjA0OjA0NDZiOWNhZDIyYTIxNWI2OWVhY2MzNzM5YWJjYzBlZGQzMjVhZDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODU4MjYx", "url": "https://github.com/checkstyle/checkstyle/pull/7707#pullrequestreview-366858261", "createdAt": "2020-03-01T13:11:29Z", "commit": {"oid": "15dd939a0299657989f3d75168a3e62adeb5a1f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMzoxMToyOVrOFwOGwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMzoxMToyOVrOFwOGwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNzA3NA==", "bodyText": "If this is now a hardcoded list that never changes, then please move it to a static final field.", "url": "https://github.com/checkstyle/checkstyle/pull/7707#discussion_r386107074", "createdAt": "2020-03-01T13:11:29Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/annotation/MissingDeprecatedCheck.java", "diffHunk": "@@ -176,14 +180,19 @@ private static DetailAST getParent(DetailAST commentBlock) {\n             result = commentBlock.getNextSibling();\n         }\n \n+        final List<Integer> typesArrayList = new ArrayList<>(Arrays.asList(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dd939a0299657989f3d75168a3e62adeb5a1f2"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODU4NDc0", "url": "https://github.com/checkstyle/checkstyle/pull/7707#pullrequestreview-366858474", "createdAt": "2020-03-01T13:15:02Z", "commit": {"oid": "15dd939a0299657989f3d75168a3e62adeb5a1f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMzoxNTowM1rOFwOHvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMzoxNTowM1rOFwOHvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEwNzMyNA==", "bodyText": "Please also add a UT with issue but where it will produce a violation to show check functionality still works in this situation, if there is not one already.", "url": "https://github.com/checkstyle/checkstyle/pull/7707#discussion_r386107324", "createdAt": "2020-03-01T13:15:03Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/annotation/MissingDeprecatedCheckTest.java", "diffHunk": "@@ -168,4 +168,13 @@ public void testPackageInfo() throws Exception {\n         verify(checkConfig, getPath(\"package-info.java\"), expected);\n     }\n \n+    @Test\n+    public void testPackageInfoBelowComment() throws Exception {\n+        final DefaultConfiguration checkConfig = createModuleConfig(MissingDeprecatedCheck.class);\n+\n+        final String[] expected = CommonUtil.EMPTY_STRING_ARRAY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dd939a0299657989f3d75168a3e62adeb5a1f2"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fbd66009e110c74f9e64527d2333cc1fa18106d8", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/fbd66009e110c74f9e64527d2333cc1fa18106d8", "committedDate": "2020-03-02T20:37:31Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}, "afterCommit": {"oid": "50e1c374f520f2044e30d2d2a3cf8c6f33104a66", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/50e1c374f520f2044e30d2d2a3cf8c6f33104a66", "committedDate": "2020-03-02T20:48:50Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a08f98a281c7d45f6cb0f16c2eceec11c18e69f0", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a08f98a281c7d45f6cb0f16c2eceec11c18e69f0", "committedDate": "2020-03-02T22:31:55Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}, "afterCommit": {"oid": "905ce32bffdc74a25f00e98f1bd1c2fe1b95e0d0", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/905ce32bffdc74a25f00e98f1bd1c2fe1b95e0d0", "committedDate": "2020-03-02T22:32:41Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3ODczODA4", "url": "https://github.com/checkstyle/checkstyle/pull/7707#pullrequestreview-367873808", "createdAt": "2020-03-03T10:45:07Z", "commit": {"oid": "905ce32bffdc74a25f00e98f1bd1c2fe1b95e0d0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MzYxNDQz", "url": "https://github.com/checkstyle/checkstyle/pull/7707#pullrequestreview-368361443", "createdAt": "2020-03-03T22:07:16Z", "commit": {"oid": "905ce32bffdc74a25f00e98f1bd1c2fe1b95e0d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMjowNzoxNlrOFxYWhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMjowODo1MlrOFxYZeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMyMzUyNg==", "bodyText": "please use Set collection for quicker search.", "url": "https://github.com/checkstyle/checkstyle/pull/7707#discussion_r387323526", "createdAt": "2020-03-03T22:07:16Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/annotation/MissingDeprecatedCheck.java", "diffHunk": "@@ -116,6 +120,12 @@\n     /** Fully-qualified {@link Deprecated Deprecated} annotation name. */\n     private static final String FQ_DEPRECATED = \"java.lang.\" + DEPRECATED;\n \n+    /** List of token types to find parent of. */\n+    private static final List<Integer> TYPES_ARRAY_LIST = new ArrayList<>(Arrays.asList(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "905ce32bffdc74a25f00e98f1bd1c2fe1b95e0d0"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMyNDI4Mg==", "bodyText": "I might miss something, this update is just code refactoring, and not related to functional fix. If so , please move to searate comit of the same PR, commit with prefix \"minor\".", "url": "https://github.com/checkstyle/checkstyle/pull/7707#discussion_r387324282", "createdAt": "2020-03-03T22:08:52Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/annotation/MissingDeprecatedCheck.java", "diffHunk": "@@ -178,12 +188,12 @@ private static DetailAST getParent(DetailAST commentBlock) {\n \n         while (true) {\n             final int type = result.getType();\n-            if (type == TokenTypes.TYPE || type == TokenTypes.MODIFIERS\n-                    || type == TokenTypes.ANNOTATION || type == TokenTypes.ANNOTATIONS\n-                    || type == TokenTypes.ARRAY_DECLARATOR || type == TokenTypes.TYPE_PARAMETERS\n-                    || type == TokenTypes.DOT) {\n+            if (TYPES_ARRAY_LIST.contains(type)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "905ce32bffdc74a25f00e98f1bd1c2fe1b95e0d0"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3db4c462d589c079aabb2aced5b825f49d3a109b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3db4c462d589c079aabb2aced5b825f49d3a109b", "committedDate": "2020-03-04T15:39:50Z", "message": "minor: reduce cyclomatic complexity before next update"}, "afterCommit": {"oid": "5251980ec5a8aca914380cbd84438e64c7e12139", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5251980ec5a8aca914380cbd84438e64c7e12139", "committedDate": "2020-03-04T18:11:00Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5251980ec5a8aca914380cbd84438e64c7e12139", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5251980ec5a8aca914380cbd84438e64c7e12139", "committedDate": "2020-03-04T18:11:00Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}, "afterCommit": {"oid": "0446b9cad22a215b69eacc3739abcc0edd325ad1", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0446b9cad22a215b69eacc3739abcc0edd325ad1", "committedDate": "2020-03-05T04:02:13Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7c23e15205ae5eaedd99eff4565a99c4f662ad9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e7c23e15205ae5eaedd99eff4565a99c4f662ad9", "committedDate": "2020-03-05T04:02:13Z", "message": "minor: reduce cyclomatic complexity before next update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0446b9cad22a215b69eacc3739abcc0edd325ad1", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0446b9cad22a215b69eacc3739abcc0edd325ad1", "committedDate": "2020-03-05T04:02:13Z", "message": "Issue #7534: fix NPE in MissingDeprecatedCheck"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1057, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}