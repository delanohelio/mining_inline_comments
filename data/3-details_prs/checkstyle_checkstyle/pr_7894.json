{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNDgzNzU0", "number": 7894, "title": "Issue #7128: customImportOrderRules does not support the default value", "bodyText": "Fix #7128\nThe documentation mistakenly shows the default value to be an empty set {} when it should be the empty string \"\". This led to some confusion in #7128 when the user thought that they could use {} as the default value.\nThis PR aims to fix the two points brought up in #7128 (comment):\n\nDocumentation is now updated to show \"\" instead of {}\nsetCustomImportOrderRules now checks if inputCustomImportOrder is empty, and will not modify customImportOrderRules at all if it is the case.\n\nDiff report: https://wltan.github.io/checkstyle-reports/2020-03-18/customimport-defaultrule-regression/diff/", "createdAt": "2020-03-18T14:53:09Z", "url": "https://github.com/checkstyle/checkstyle/pull/7894", "merged": true, "mergeCommit": {"oid": "9835f7fc36f4e9589704d982762e547c60036562"}, "closed": true, "closedAt": "2020-04-13T14:50:15Z", "author": {"login": "wltan"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPBrXUgFqTM3NzM2MTA5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXQEc4gFqTM5MjE5Mjc0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzYxMDk4", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-377361098", "createdAt": "2020-03-19T01:32:06Z", "commit": {"oid": "69a5502276541fe908e2867631023aab18084a77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMTozMjowN1rOF4c99w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMTozMjowN1rOF4c99w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczOTE5MQ==", "bodyText": "I don't believe we are expected to create a special override for just this property.\n@romani Please confirm.", "url": "https://github.com/checkstyle/checkstyle/pull/7894#discussion_r394739191", "createdAt": "2020-03-19T01:32:07Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -1185,6 +1185,9 @@ else if (fieldClass == String[].class) {\n                     if (\"fileExtensions\".equals(propertyName)) {\n                         result = \"all files\";\n                     }\n+                    else if (\"customImportOrderRules\".equals(propertyName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a5502276541fe908e2867631023aab18084a77"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Njg5NzM0", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-377689734", "createdAt": "2020-03-19T12:54:06Z", "commit": {"oid": "69a5502276541fe908e2867631023aab18084a77"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMjo1NDowNlrOF4tEgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMjo1NjoxNFrOF4tI5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAwMzAwOA==", "bodyText": "we try to force us to create Input file for each test and place config in Input file.\nexample: https://github.com/checkstyle/checkstyle/blob/master/src/test/resources/com/puppycrawl/tools/checkstyle/checks/javadoc/javadoccontentlocation/InputJavadocContentLocationFirstLine.java#L3", "url": "https://github.com/checkstyle/checkstyle/pull/7894#discussion_r395003008", "createdAt": "2020-03-19T12:54:06Z", "author": {"login": "romani"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/imports/CustomImportOrderCheckTest.java", "diffHunk": "@@ -157,6 +157,20 @@ public void testNonSpecifiedImports() throws Exception {\n         verify(checkConfig, getPath(\"InputCustomImportOrderDefault.java\"), expected);\n     }\n \n+    @Test\n+    public void testOrderRuleEmpty() throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(CustomImportOrderCheck.class);\n+        checkConfig.addAttribute(\"customImportOrderRules\", \"\");\n+        final String[] expected = {\n+            \"7: \" + getCheckMessage(MSG_SEPARATED_IN_GROUP, \"java.util.List\"),\n+            \"13: \" + getCheckMessage(MSG_SEPARATED_IN_GROUP, \"com.puppycrawl.tools.*\"),\n+            \"16: \" + getCheckMessage(MSG_SEPARATED_IN_GROUP, \"com.google.common.base.*\"),\n+        };\n+\n+        verify(checkConfig, getPath(\"InputCustomImportOrderDefault2.java\"), expected);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a5502276541fe908e2867631023aab18084a77"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAwNDEzMw==", "bodyText": "do we need this condition ?\nwhat is side effect if we do not have it.", "url": "https://github.com/checkstyle/checkstyle/pull/7894#discussion_r395004133", "createdAt": "2020-03-19T12:56:14Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/imports/CustomImportOrderCheck.java", "diffHunk": "@@ -492,10 +492,12 @@ public final void setSortImportsInGroupAlphabetically(boolean value) {\n      *        user value.\n      */\n     public final void setCustomImportOrderRules(final String inputCustomImportOrder) {\n-        for (String currentState : GROUP_SEPARATOR_PATTERN.split(inputCustomImportOrder)) {\n-            addRulesToList(currentState);\n+        if (!inputCustomImportOrder.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a5502276541fe908e2867631023aab18084a77"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69a5502276541fe908e2867631023aab18084a77", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/69a5502276541fe908e2867631023aab18084a77", "committedDate": "2020-03-18T11:19:17Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}, "afterCommit": {"oid": "1474e067437378f18291b3233072a95a87546f60", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1474e067437378f18291b3233072a95a87546f60", "committedDate": "2020-03-22T15:44:40Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1474e067437378f18291b3233072a95a87546f60", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1474e067437378f18291b3233072a95a87546f60", "committedDate": "2020-03-22T15:44:40Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}, "afterCommit": {"oid": "ebaf3ae05717becf908dace52d14ae9506abe71b", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ebaf3ae05717becf908dace52d14ae9506abe71b", "committedDate": "2020-03-29T07:26:24Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NTAyNjIy", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-386502622", "createdAt": "2020-04-02T14:48:38Z", "commit": {"oid": "ebaf3ae05717becf908dace52d14ae9506abe71b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NzA4NDky", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-387708492", "createdAt": "2020-04-04T15:23:22Z", "commit": {"oid": "ebaf3ae05717becf908dace52d14ae9506abe71b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebaf3ae05717becf908dace52d14ae9506abe71b", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ebaf3ae05717becf908dace52d14ae9506abe71b", "committedDate": "2020-03-29T07:26:24Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}, "afterCommit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6da5296a69de9a4ac256a6b8ed944d52169e165e", "committedDate": "2020-04-10T13:58:31Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzcxMTU1", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-391771155", "createdAt": "2020-04-11T14:32:27Z", "commit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDozMjoyN1rOGENoEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDozMjoyN1rOGENoEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MDczNg==", "bodyText": "list => format", "url": "https://github.com/checkstyle/checkstyle/pull/7894#discussion_r407070736", "createdAt": "2020-04-11T14:32:27Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_imports.xml", "diffHunk": "@@ -427,7 +427,7 @@ import com.puppycrawl.tools.checkstyle.checks.imports.AvoidStarImportCheck;\n               <td>customImportOrderRules</td>\n               <td>Specify list of order declaration customizing by user.</td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzcxNzgz", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-391771783", "createdAt": "2020-04-11T14:40:37Z", "commit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDo0MDozN1rOGENrTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDo0MDozN1rOGENrTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MTU2NA==", "bodyText": "after very long conversation with @rnveach , we agreed to keep \"\" as value, but we need to remove list from description to avoid confusion\nplease update to\nSpecify format of order declaration customizing by user.", "url": "https://github.com/checkstyle/checkstyle/pull/7894#discussion_r407071564", "createdAt": "2020-04-11T14:40:37Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/imports/CustomImportOrderCheck.java", "diffHunk": "@@ -136,7 +136,7 @@\n  * <ul>\n  * <li>\n  * Property {@code customImportOrderRules} - Specify list of order declaration customizing by user.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzcyMjMw", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-391772230", "createdAt": "2020-04-11T14:45:52Z", "commit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6da5296a69de9a4ac256a6b8ed944d52169e165e", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6da5296a69de9a4ac256a6b8ed944d52169e165e", "committedDate": "2020-04-10T13:58:31Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}, "afterCommit": {"oid": "524460b00dc2b4dfc8b12faa71386b9fa6f0b402", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/524460b00dc2b4dfc8b12faa71386b9fa6f0b402", "committedDate": "2020-04-11T14:51:32Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "915585bd080fe438a81cbcfdd87045b9c52d89a0", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/915585bd080fe438a81cbcfdd87045b9c52d89a0", "committedDate": "2020-04-12T10:27:10Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "524460b00dc2b4dfc8b12faa71386b9fa6f0b402", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/524460b00dc2b4dfc8b12faa71386b9fa6f0b402", "committedDate": "2020-04-11T14:51:32Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}, "afterCommit": {"oid": "915585bd080fe438a81cbcfdd87045b9c52d89a0", "author": {"user": {"login": "wltan", "name": "Tan Wei Liang"}}, "url": "https://github.com/checkstyle/checkstyle/commit/915585bd080fe438a81cbcfdd87045b9c52d89a0", "committedDate": "2020-04-12T10:27:10Z", "message": "Issue #7128: CustomImportOrderCheck.customImportOrderRules does not support the default value"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMTkyNzQ0", "url": "https://github.com/checkstyle/checkstyle/pull/7894#pullrequestreview-392192744", "createdAt": "2020-04-13T14:49:41Z", "commit": {"oid": "915585bd080fe438a81cbcfdd87045b9c52d89a0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 887, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}