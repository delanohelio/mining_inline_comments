{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NTI3MDc3", "number": 8902, "reviewThreads": {"totalCount": 54, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMToxMjo0M1rOE0CaFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDo0MzoyOFrOFASBzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMDAwODU0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMToxMjo0M1rOHrmxLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxNDowODo1MVrOHrnrDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NTk5Ng==", "bodyText": "xPath -> XPath", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515485996", "createdAt": "2020-10-31T11:12:43Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"xpath.finding\";\n+\n+    /** XPath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluatexPathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluatexPathQuery(DetailAST rootAST) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTUwMDgxMw==", "bodyText": "rewrote to evaluateXpathQuery", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515500813", "createdAt": "2020-10-31T14:08:51Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"xpath.finding\";\n+\n+    /** XPath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluatexPathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluatexPathQuery(DetailAST rootAST) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NTk5Ng=="}, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 106}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMDAxMjQwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMToxNzoxNFrOHrmy3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzoxNjoyMFrOHsOCng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NjQyOQ==", "bodyText": "Xpath -> XPath", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515486429", "createdAt": "2020-10-31T11:17:14Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTUwMDQ1NA==", "bodyText": "In our source base we use Xpath, for example SuppressionXpathFilter or XpathRegressionAnnotationUseStyleTest, do you think we need to use another way here?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515500454", "createdAt": "2020-10-31T14:04:25Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NjQyOQ=="}, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTYwMjg2NQ==", "bodyText": "I just want consistency in the names. If we already use Xpath prefix, well, we should always use Xpath.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515602865", "createdAt": "2020-11-01T10:16:52Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NjQyOQ=="}, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjEyOTQzOA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r516129438", "createdAt": "2020-11-02T17:16:20Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NjQyOQ=="}, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 89}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMDAxNTU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxMToyMToyN1rOHrm0Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQxNDowODo1NlrOHrnrEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NjgyMw==", "bodyText": "To make Pitest happy, call getRequiredTokens here. Like in this Check:\nhttps://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/checks/NoCodeInFileCheck.java#L93", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515486823", "createdAt": "2020-10-31T11:21:27Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"xpath.finding\";\n+\n+    /** XPath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluatexPathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluatexPathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);\n+            });\n+        }\n+        catch (XPathException ex) {\n+            throw new IllegalArgumentException(ex);\n+        }\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return CommonUtil.EMPTY_INT_ARRAY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTUwMDgxOA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r515500818", "createdAt": "2020-10-31T14:08:56Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates XPath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by XPath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using XPath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - XPath query. Type is {@code java.lang.String}. Default value\n+ * is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"xpath.finding\";\n+\n+    /** XPath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluatexPathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluatexPathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);\n+            });\n+        }\n+        catch (XPathException ex) {\n+            throw new IllegalArgumentException(ex);\n+        }\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return CommonUtil.EMPTY_INT_ARRAY;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ4NjgyMw=="}, "originalCommit": {"oid": "7db89665c4256bb3286b248b721129c66f649046"}, "originalPosition": 127}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzM3MjkwOnYy", "diffSide": "RIGHT", "path": "config/checkstyle_checks.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDozNzowNVrOHzcgpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzozNDozN1rOH3wFNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjUzMw==", "bodyText": "We need to find better use for us.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523706533", "createdAt": "2020-11-15T04:37:05Z", "author": {"login": "romani"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -444,6 +444,7 @@\n     <module name=\"UnnecessarySemicolonInEnumeration\"/>\n     <module name=\"UnnecessarySemicolonInTryWithResources\"/>\n     <module name=\"VariableDeclarationUsageDistance\"/>\n+    <module name=\"GenericXpath\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTM2OQ==", "bodyText": "not done,\nwe need Check to work on our code base.\ndefault now do nothing.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523775369", "createdAt": "2020-11-15T15:44:04Z", "author": {"login": "romani"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -444,6 +444,7 @@\n     <module name=\"UnnecessarySemicolonInEnumeration\"/>\n     <module name=\"UnnecessarySemicolonInTryWithResources\"/>\n     <module name=\"VariableDeclarationUsageDistance\"/>\n+    <module name=\"GenericXpath\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjUzMw=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxNDEyNA==", "bodyText": "maybe remove it at all?\nOr we can create custom checks, do we have list of checks we want to implement, but they haven't been implemented yet? so that we can mimic them", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528214124", "createdAt": "2020-11-21T16:21:56Z", "author": {"login": "timurt"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -444,6 +444,7 @@\n     <module name=\"UnnecessarySemicolonInEnumeration\"/>\n     <module name=\"UnnecessarySemicolonInTryWithResources\"/>\n     <module name=\"VariableDeclarationUsageDistance\"/>\n+    <module name=\"GenericXpath\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjUzMw=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMTQ5Mg==", "bodyText": "done, added check for printStackTrace", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528221492", "createdAt": "2020-11-21T17:34:37Z", "author": {"login": "timurt"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -444,6 +444,7 @@\n     <module name=\"UnnecessarySemicolonInEnumeration\"/>\n     <module name=\"UnnecessarySemicolonInTryWithResources\"/>\n     <module name=\"VariableDeclarationUsageDistance\"/>\n+    <module name=\"GenericXpath\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjUzMw=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzM3MzQ1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDozODoyMVrOHzcg7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNzo1NDo0NFrOHzdfFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjYwNQ==", "bodyText": "Evaluates Xpath query and report violation on matching AST nodes.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523706605", "createdAt": "2020-11-15T04:38:21Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcyMjUxNg==", "bodyText": "Done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523722516", "createdAt": "2020-11-15T07:54:44Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjYwNQ=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzM3NDk3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDo0MDoyNlrOHzchnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNjo1NDo0OFrOHzdJRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjc4MA==", "bodyText": "Name is too generic.\nWhat about MatchXpathCheck ?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523706780", "createdAt": "2020-11-15T04:40:26Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcxNjkzMg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523716932", "createdAt": "2020-11-15T06:54:48Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjc4MA=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzM3NjE3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDo0MjoxN1rOHzciNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxODo1NzowMlrOH3wnvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjkzMg==", "bodyText": "All config should have example of behavior.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523706932", "createdAt": "2020-11-15T04:42:17Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNzk4NQ==", "bodyText": "We need some advanced xpath query example, for example like https://github.com/checkstyle/checkstyle/pull/7676/files#diff-1fbb96c1b95e79400bf472812ee8646c92e4566b73ffc5edc83ecf146008bc23R101", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523707985", "createdAt": "2020-11-15T04:56:27Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjkzMg=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTQwMQ==", "bodyText": "not done.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523775401", "createdAt": "2020-11-15T15:44:24Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjkzMg=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIzMDMzNQ==", "bodyText": "done, added more complex queries", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528230335", "createdAt": "2020-11-21T18:57:02Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwNjkzMg=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzM4NjUwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNDo1OToxOVrOHzcm7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxMzoxNToxNFrOHzfm4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwODE0MQ==", "bodyText": "Why violation ?\nPlease share CLI output for each example.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523708141", "createdAt": "2020-11-15T04:59:19Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc1NzI4MQ==", "bodyText": "Sorry my mistake, copy pasted a wrong sample\nFixed", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523757281", "createdAt": "2020-11-15T13:15:14Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwODE0MQ=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzM4OTMyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNTowMzo0NlrOHzcoJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwOTowNjozOVrOHzd8_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwODQ1Mg==", "bodyText": "matchxpath.match\nI think it is good practice to name message resources  by name of check.\nCan you write xpath query to validate this rule over Check fields that are named MSG_ ?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523708452", "createdAt": "2020-11-15T05:03:46Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"xpath.finding\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzczMDE3Mg==", "bodyText": "I think it is good practice to name message resources by name of check.\n\ndone\n\nCan you write xpath query to validate this rule over Check fields that are named MSG_ ?\n\nI hope yes :) i will try", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523730172", "createdAt": "2020-11-15T09:06:39Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/GenericXpathCheck.java", "diffHunk": "@@ -0,0 +1,149 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and verifies absence of the corresponding nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"GenericXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void func1() throws RuntimeException {} // violation\n+ *  public void func2() throws Exception {} // ok\n+ *  public void func3() throws Error {} // violation\n+ *  public void func4() throws Throwable {} // violation\n+ *  public void func5() throws NullPointerException {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code xpath.finding}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class GenericXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"xpath.finding\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwODQ1Mg=="}, "originalCommit": {"oid": "1618a4618ff4b9b6ac566b5517a5aa12b436a0bf"}, "originalPosition": 95}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkyMzU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTozMDo1MlrOHzgnvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjoxNzowN1rOH3vl7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3Mzg4Ng==", "bodyText": "move this setter on top of methods.\nthen should be all getXXXxxxToken\nthen should be beginTree", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523773886", "createdAt": "2020-11-15T15:30:52Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluateXpathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluateXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);\n+            });\n+        }\n+        catch (XPathException ex) {\n+            throw new IllegalStateException(ex);\n+        }\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return CommonUtil.EMPTY_INT_ARRAY;\n+    }\n+\n+    /**\n+     * Setter to xpath query.\n+     *\n+     * @param query xpath query.\n+     */\n+    public void setQuery(String query) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 145}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQ4Ng==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213486", "createdAt": "2020-11-21T16:17:07Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluateXpathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluateXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);\n+            });\n+        }\n+        catch (XPathException ex) {\n+            throw new IllegalStateException(ex);\n+        }\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return CommonUtil.EMPTY_INT_ARRAY;\n+    }\n+\n+    /**\n+     * Setter to xpath query.\n+     *\n+     * @param query xpath query.\n+     */\n+    public void setQuery(String query) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3Mzg4Ng=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 145}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkyNDY5OnYy", "diffSide": "RIGHT", "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages_de.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTozMjowN1rOHzgoTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjoxNzowMVrOH3vl4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDAyOQ==", "bodyText": "please use google translator", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523774029", "createdAt": "2020-11-15T15:32:07Z", "author": {"login": "romani"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages_de.properties", "diffHunk": "@@ -28,6 +28,7 @@ illegal.type=Die Verwendung des Typs ''{0}'' ist nicht erlaubt.\n inline.conditional.avoid=Der Inline-Conditional-Operator sollte vermieden werden.\n instantiation.avoid=Die Klasse {0} sollte nicht direkt instanziiert werden.\n magic.number=Die magische Zahl ''{0}'' sollte als Konstante definiert werden.\n+matchxpath.match=Node is not allowed by Xpath query", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQ3Mg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213472", "createdAt": "2020-11-21T16:17:01Z", "author": {"login": "timurt"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages_de.properties", "diffHunk": "@@ -28,6 +28,7 @@ illegal.type=Die Verwendung des Typs ''{0}'' ist nicht erlaubt.\n inline.conditional.avoid=Der Inline-Conditional-Operator sollte vermieden werden.\n instantiation.avoid=Die Klasse {0} sollte nicht direkt instanziiert werden.\n magic.number=Die magische Zahl ''{0}'' sollte als Konstante definiert werden.\n+matchxpath.match=Node is not allowed by Xpath query", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDAyOQ=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkyOTUxOnYy", "diffSide": "RIGHT", "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTozNzozM1rOHzgqwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjoxNjo1NFrOH3vl1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDY1Ng==", "bodyText": "this message is not good.\nWe should find some wording to hide such AST and Xpath details of inner implementation.\nSo we should ADVICE users to always write custom message in config.\nPlease add example of it in xdoc.\nbut we still need to have default message. What about Illegal code structure detected ?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523774656", "createdAt": "2020-11-15T15:37:33Z", "author": {"login": "romani"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages.properties", "diffHunk": "@@ -28,6 +28,7 @@ illegal.type=Usage of type ''{0}'' is not allowed.\n inline.conditional.avoid=Avoid inline conditionals.\n instantiation.avoid=Instantiation of {0} should be avoided.\n magic.number=''{0}'' is a magic number.\n+matchxpath.match=Node is not allowed by Xpath query", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQ2MA==", "bodyText": "makes sense, done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213460", "createdAt": "2020-11-21T16:16:54Z", "author": {"login": "timurt"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages.properties", "diffHunk": "@@ -28,6 +28,7 @@ illegal.type=Usage of type ''{0}'' is not allowed.\n inline.conditional.avoid=Avoid inline conditionals.\n instantiation.avoid=Instantiation of {0} should be avoided.\n magic.number=''{0}'' is a magic number.\n+matchxpath.match=Node is not allowed by Xpath query", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDY1Ng=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkyOTc1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTozODowOFrOHzgq4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjoxNjo0M1rOH3vltw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDY5MA==", "bodyText": "please try to move log to beginTree", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523774690", "createdAt": "2020-11-15T15:38:08Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluateXpathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluateXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQzMQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213431", "createdAt": "2020-11-21T16:16:43Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluateXpathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluateXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDY5MA=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkzMTIzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTozOTozNlrOHzgrkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjoxNjozOVrOH3vlsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDg2NQ==", "bodyText": "wrapping of exception should always take come context of execution\nplease put query in exception message at least.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523774865", "createdAt": "2020-11-15T15:39:36Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluateXpathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluateXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);\n+            });\n+        }\n+        catch (XPathException ex) {\n+            throw new IllegalStateException(ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQyNw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213427", "createdAt": "2020-11-21T16:16:39Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            evaluateXpathQuery(rootAST);\n+        }\n+    }\n+\n+    private void evaluateXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n+            final XPathDynamicContext xpathDynamicContext =\n+                    xpathExpression.createDynamicContext(rootNode);\n+            final List<Item> matchingItems = xpathExpression.evaluate(xpathDynamicContext);\n+\n+            matchingItems.forEach(node -> {\n+                final AbstractNode xpathNode = (AbstractNode) node;\n+                log(xpathNode.getUnderlyingNode(), MSG_KEY);\n+            });\n+        }\n+        catch (XPathException ex) {\n+            throw new IllegalStateException(ex);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NDg2NQ=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 121}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkzMjcxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTo0MTowMVrOHzgsPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjoxNjozNVrOH3vlrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTAzOA==", "bodyText": "Evaluates Xpath query and report violation on all matching AST nodes.\nsecond sentence might be removed, as it duplicates first.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523775038", "createdAt": "2020-11-15T15:41:01Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQyMg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213422", "createdAt": "2020-11-21T16:16:35Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTAzOA=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MzkzNDA4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxNTo0Mjo0MlrOHzgs-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMTo0NDo0OVrOH4J53Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTIyNQ==", "bodyText": "we need to put here some links of what is Xpath and how to get checkstyle's AST .", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r523775225", "createdAt": "2020-11-15T15:42:42Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxMzQxMg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528213412", "createdAt": "2020-11-21T16:16:29Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTIyNQ=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1OTgwOQ==", "bodyText": "not done.\nPlease explain use how to get checkstyl's AST. By GUI or by CLI.\nCheckstyle AST is very specific to checkstyle, nobody knows it, not that much user even know our AST.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528259809", "createdAt": "2020-11-22T00:10:30Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTIyNQ=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0NDU3Mw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528644573", "createdAt": "2020-11-23T11:44:49Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,148 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on matching AST nodes. All nodes\n+ * retrieved by Xpath evaluator will be logged as violations. Current check allows\n+ * user to implement custom checks using Xpath.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc3NTIyNQ=="}, "originalCommit": {"oid": "2267648a1fc389a8cd06473075da142bf677523d"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjE4MTc4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNjo1OTowNlrOH3v3NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0ODozOVrOH3wLAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxNzkwOA==", "bodyText": "Please bump the version.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528217908", "createdAt": "2020-11-21T16:59:06Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,150 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check with default configuration:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjk3OA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222978", "createdAt": "2020-11-21T17:48:39Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,150 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check with default configuration:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.37", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxNzkwOA=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 88}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjE4ODU4OnYy", "diffSide": "RIGHT", "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzowNjozN1rOH3v6Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0ODozM1rOH3wK-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxODcyNw==", "bodyText": "All other messages end with a period. This one (and all translations) should end with period too.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528218727", "createdAt": "2020-11-21T17:06:37Z", "author": {"login": "pbludov"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages.properties", "diffHunk": "@@ -28,6 +28,7 @@ illegal.type=Usage of type ''{0}'' is not allowed.\n inline.conditional.avoid=Avoid inline conditionals.\n instantiation.avoid=Instantiation of {0} should be avoided.\n magic.number=''{0}'' is a magic number.\n+matchxpath.match=Illegal code structure detected", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjk2OQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222969", "createdAt": "2020-11-21T17:48:33Z", "author": {"login": "timurt"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/coding/messages.properties", "diffHunk": "@@ -28,6 +28,7 @@ illegal.type=Usage of type ''{0}'' is not allowed.\n inline.conditional.avoid=Avoid inline conditionals.\n instantiation.avoid=Instantiation of {0} should be avoided.\n magic.number=''{0}'' is a magic number.\n+matchxpath.match=Illegal code structure detected", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxODcyNw=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjE4OTkxOnYy", "diffSide": "RIGHT", "path": "src/main/resources/com/puppycrawl/tools/checkstyle/meta/checks/metrics/ClassDataAbstractionCouplingCheck.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzowODozN1rOH3v7GQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0ODoyN1rOH3wK9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxODkwNQ==", "bodyText": "This change is irrelevant, please undone.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528218905", "createdAt": "2020-11-21T17:08:37Z", "author": {"login": "pbludov"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/meta/checks/metrics/ClassDataAbstractionCouplingCheck.xml", "diffHunk": "@@ -64,7 +64,7 @@\n             <property default-value=\"7\" name=\"max\" type=\"int\">\n                <description>Specify the maximum threshold allowed.</description>\n             </property>\n-            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Deprecated, Deque, Double, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, Integer, LinkedList, List, Long, Map, NullPointerException, Object, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"\n+            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Collection, Deprecated, Deque, Double, DoubleStream, EnumSet, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, IntStream, Integer, LinkedHashMap, LinkedHashSet, LinkedList, List, Long, LongStream, Map, NullPointerException, Object, Optional, OptionalDouble, OptionalInt, OptionalLong, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, Stream, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjk2NQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222965", "createdAt": "2020-11-21T17:48:27Z", "author": {"login": "timurt"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/meta/checks/metrics/ClassDataAbstractionCouplingCheck.xml", "diffHunk": "@@ -64,7 +64,7 @@\n             <property default-value=\"7\" name=\"max\" type=\"int\">\n                <description>Specify the maximum threshold allowed.</description>\n             </property>\n-            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Deprecated, Deque, Double, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, Integer, LinkedList, List, Long, Map, NullPointerException, Object, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"\n+            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Collection, Deprecated, Deque, Double, DoubleStream, EnumSet, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, IntStream, Integer, LinkedHashMap, LinkedHashSet, LinkedList, List, Long, LongStream, Map, NullPointerException, Object, Optional, OptionalDouble, OptionalInt, OptionalLong, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, Stream, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxODkwNQ=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjE5MDM2OnYy", "diffSide": "RIGHT", "path": "src/main/resources/com/puppycrawl/tools/checkstyle/meta/checks/metrics/ClassFanOutComplexityCheck.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzowOTowMlrOH3v7Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0ODoxNFrOH3wK3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxODk2Mg==", "bodyText": "Same again.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528218962", "createdAt": "2020-11-21T17:09:02Z", "author": {"login": "pbludov"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/meta/checks/metrics/ClassFanOutComplexityCheck.xml", "diffHunk": "@@ -31,7 +31,7 @@\n             <property default-value=\"20\" name=\"max\" type=\"int\">\n                <description>Specify the maximum threshold allowed.</description>\n             </property>\n-            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Deprecated, Deque, Double, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, Integer, LinkedList, List, Long, Map, NullPointerException, Object, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"\n+            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Collection, Deprecated, Deque, Double, DoubleStream, EnumSet, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, IntStream, Integer, LinkedHashMap, LinkedHashSet, LinkedList, List, Long, LongStream, Map, NullPointerException, Object, Optional, OptionalDouble, OptionalInt, OptionalLong, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, Stream, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjk0MQ==", "bodyText": "I do not remember that I edited this file :)\nCouldn't it be autogenerated? anyway done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222941", "createdAt": "2020-11-21T17:48:14Z", "author": {"login": "timurt"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/meta/checks/metrics/ClassFanOutComplexityCheck.xml", "diffHunk": "@@ -31,7 +31,7 @@\n             <property default-value=\"20\" name=\"max\" type=\"int\">\n                <description>Specify the maximum threshold allowed.</description>\n             </property>\n-            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Deprecated, Deque, Double, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, Integer, LinkedList, List, Long, Map, NullPointerException, Object, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"\n+            <property default-value=\"ArrayIndexOutOfBoundsException, ArrayList, Boolean, Byte, Character, Class, Collection, Deprecated, Deque, Double, DoubleStream, EnumSet, Exception, Float, FunctionalInterface, HashMap, HashSet, IllegalArgumentException, IllegalStateException, IndexOutOfBoundsException, IntStream, Integer, LinkedHashMap, LinkedHashSet, LinkedList, List, Long, LongStream, Map, NullPointerException, Object, Optional, OptionalDouble, OptionalInt, OptionalLong, Override, Queue, RuntimeException, SafeVarargs, SecurityException, Set, Short, SortedMap, SortedSet, Stream, String, StringBuffer, StringBuilder, SuppressWarnings, Throwable, TreeMap, TreeSet, UnsupportedOperationException, Void, boolean, byte, char, double, float, int, long, short, var, void\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxODk2Mg=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjE5ODEwOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzoxODoxMlrOH3v-6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0NzozMVrOH3wKqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxOTg4MA==", "bodyText": "ex -> ignored. This is common naming convention for such cases.\nAnother (preferred) option is to assert the exception message.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528219880", "createdAt": "2020-11-21T17:18:12Z", "author": {"login": "pbludov"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,165 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithDoubleBraceInitialization()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+\n+        checkConfig.addAttribute(\"query\", \"//INSTANCE_INIT[not(../*[not(\\n\"\n+                + \"                    self::LCURLY or\\n\"\n+                + \"                    self::INSTANCE_INIT or\\n\"\n+                + \"                    self::RCURLY or\\n\"\n+                + \"                    self::SINGLE_LINE_COMMENT or\\n\"\n+                + \"                    self::BLOCK_COMMENT_BEGIN\\n\"\n+                + \"                )])]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Do not use double-brace initialization\");\n+        final String[] expected = {\n+            \"11:35: Do not use double-brace initialization\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathDoubleBrace.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateIllegalThrowsCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//LITERAL_THROWS[./IDENT[@text='Throwable' or \"\n+                + \"@text='RuntimeException' or ends-with(@text, 'Error')]]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Illegal throws statement\");\n+        final String[] expected = {\n+            \"8:25: Illegal throws statement\",\n+            \"10:25: Illegal throws statement\",\n+            \"11:25: Illegal throws statement\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathIllegalThrows.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateExecutableStatementCountCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[count(./SLIST/*) > 2]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Executable number of statements \"\n+                + \"exceed threshold\");\n+        final String[] expected = {\n+            \"21:5: Executable number of statements exceed threshold\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathExecutableStatementCount.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testInvalidQuery() {\n+        final MatchXpathCheck matchXpathCheck = new MatchXpathCheck();\n+        matchXpathCheck.setQuery(\"!@#%^\");\n+\n+        final DetailAstImpl detailAST = new DetailAstImpl();\n+        detailAST.setType(TokenTypes.CLASS_DEF);\n+        detailAST.setText(\"Class Def\");\n+        detailAST.setLineNo(0);\n+        detailAST.setColumnNo(0);\n+\n+        try {\n+            matchXpathCheck.beginTree(detailAST);\n+            fail(\"Exception was expected\");\n+        }\n+        catch (IllegalStateException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 140}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjg4OA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222888", "createdAt": "2020-11-21T17:47:31Z", "author": {"login": "timurt"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,165 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithDoubleBraceInitialization()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+\n+        checkConfig.addAttribute(\"query\", \"//INSTANCE_INIT[not(../*[not(\\n\"\n+                + \"                    self::LCURLY or\\n\"\n+                + \"                    self::INSTANCE_INIT or\\n\"\n+                + \"                    self::RCURLY or\\n\"\n+                + \"                    self::SINGLE_LINE_COMMENT or\\n\"\n+                + \"                    self::BLOCK_COMMENT_BEGIN\\n\"\n+                + \"                )])]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Do not use double-brace initialization\");\n+        final String[] expected = {\n+            \"11:35: Do not use double-brace initialization\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathDoubleBrace.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateIllegalThrowsCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//LITERAL_THROWS[./IDENT[@text='Throwable' or \"\n+                + \"@text='RuntimeException' or ends-with(@text, 'Error')]]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Illegal throws statement\");\n+        final String[] expected = {\n+            \"8:25: Illegal throws statement\",\n+            \"10:25: Illegal throws statement\",\n+            \"11:25: Illegal throws statement\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathIllegalThrows.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateExecutableStatementCountCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[count(./SLIST/*) > 2]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Executable number of statements \"\n+                + \"exceed threshold\");\n+        final String[] expected = {\n+            \"21:5: Executable number of statements exceed threshold\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathExecutableStatementCount.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testInvalidQuery() {\n+        final MatchXpathCheck matchXpathCheck = new MatchXpathCheck();\n+        matchXpathCheck.setQuery(\"!@#%^\");\n+\n+        final DetailAstImpl detailAST = new DetailAstImpl();\n+        detailAST.setType(TokenTypes.CLASS_DEF);\n+        detailAST.setText(\"Class Def\");\n+        detailAST.setLineNo(0);\n+        detailAST.setColumnNo(0);\n+\n+        try {\n+            matchXpathCheck.beginTree(detailAST);\n+            fail(\"Exception was expected\");\n+        }\n+        catch (IllegalStateException ex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIxOTg4MA=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 140}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjIwMDUxOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzoyMTowMFrOH3v__g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0NzoyNVrOH3wKkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMDE1OA==", "bodyText": "Please use Truth assertions here and below:\n        assertWithMessage(\"Expected empty array\")\n                .that(matchXpathCheck.getDefaultTokens())\n                .isEmpty();", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528220158", "createdAt": "2020-11-21T17:21:00Z", "author": {"login": "pbludov"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,165 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithDoubleBraceInitialization()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+\n+        checkConfig.addAttribute(\"query\", \"//INSTANCE_INIT[not(../*[not(\\n\"\n+                + \"                    self::LCURLY or\\n\"\n+                + \"                    self::INSTANCE_INIT or\\n\"\n+                + \"                    self::RCURLY or\\n\"\n+                + \"                    self::SINGLE_LINE_COMMENT or\\n\"\n+                + \"                    self::BLOCK_COMMENT_BEGIN\\n\"\n+                + \"                )])]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Do not use double-brace initialization\");\n+        final String[] expected = {\n+            \"11:35: Do not use double-brace initialization\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathDoubleBrace.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateIllegalThrowsCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//LITERAL_THROWS[./IDENT[@text='Throwable' or \"\n+                + \"@text='RuntimeException' or ends-with(@text, 'Error')]]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Illegal throws statement\");\n+        final String[] expected = {\n+            \"8:25: Illegal throws statement\",\n+            \"10:25: Illegal throws statement\",\n+            \"11:25: Illegal throws statement\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathIllegalThrows.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateExecutableStatementCountCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[count(./SLIST/*) > 2]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Executable number of statements \"\n+                + \"exceed threshold\");\n+        final String[] expected = {\n+            \"21:5: Executable number of statements exceed threshold\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathExecutableStatementCount.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testInvalidQuery() {\n+        final MatchXpathCheck matchXpathCheck = new MatchXpathCheck();\n+        matchXpathCheck.setQuery(\"!@#%^\");\n+\n+        final DetailAstImpl detailAST = new DetailAstImpl();\n+        detailAST.setType(TokenTypes.CLASS_DEF);\n+        detailAST.setText(\"Class Def\");\n+        detailAST.setLineNo(0);\n+        detailAST.setColumnNo(0);\n+\n+        try {\n+            matchXpathCheck.beginTree(detailAST);\n+            fail(\"Exception was expected\");\n+        }\n+        catch (IllegalStateException ex) {\n+            // it is OK\n+        }\n+    }\n+\n+    @Test\n+    public void testGetDefaultTokens() {\n+        final MatchXpathCheck matchXpathCheck = new MatchXpathCheck();\n+        assertThat(\"Expected empty array\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjg2Ng==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222866", "createdAt": "2020-11-21T17:47:25Z", "author": {"login": "timurt"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,165 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithDoubleBraceInitialization()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+\n+        checkConfig.addAttribute(\"query\", \"//INSTANCE_INIT[not(../*[not(\\n\"\n+                + \"                    self::LCURLY or\\n\"\n+                + \"                    self::INSTANCE_INIT or\\n\"\n+                + \"                    self::RCURLY or\\n\"\n+                + \"                    self::SINGLE_LINE_COMMENT or\\n\"\n+                + \"                    self::BLOCK_COMMENT_BEGIN\\n\"\n+                + \"                )])]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Do not use double-brace initialization\");\n+        final String[] expected = {\n+            \"11:35: Do not use double-brace initialization\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathDoubleBrace.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateIllegalThrowsCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//LITERAL_THROWS[./IDENT[@text='Throwable' or \"\n+                + \"@text='RuntimeException' or ends-with(@text, 'Error')]]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Illegal throws statement\");\n+        final String[] expected = {\n+            \"8:25: Illegal throws statement\",\n+            \"10:25: Illegal throws statement\",\n+            \"11:25: Illegal throws statement\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathIllegalThrows.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testImitateExecutableStatementCountCheck()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[count(./SLIST/*) > 2]\");\n+        checkConfig.addMessage(\"matchxpath.match\", \"Executable number of statements \"\n+                + \"exceed threshold\");\n+        final String[] expected = {\n+            \"21:5: Executable number of statements exceed threshold\",\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpathExecutableStatementCount.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testInvalidQuery() {\n+        final MatchXpathCheck matchXpathCheck = new MatchXpathCheck();\n+        matchXpathCheck.setQuery(\"!@#%^\");\n+\n+        final DetailAstImpl detailAST = new DetailAstImpl();\n+        detailAST.setType(TokenTypes.CLASS_DEF);\n+        detailAST.setText(\"Class Def\");\n+        detailAST.setLineNo(0);\n+        detailAST.setColumnNo(0);\n+\n+        try {\n+            matchXpathCheck.beginTree(detailAST);\n+            fail(\"Exception was expected\");\n+        }\n+        catch (IllegalStateException ex) {\n+            // it is OK\n+        }\n+    }\n+\n+    @Test\n+    public void testGetDefaultTokens() {\n+        final MatchXpathCheck matchXpathCheck = new MatchXpathCheck();\n+        assertThat(\"Expected empty array\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMDE1OA=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 148}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjIwNDMxOnYy", "diffSide": "RIGHT", "path": "src/xdocs/checks.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzoyNToyN1rOH3wBwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0NjozNFrOH3wKNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMDYwOQ==", "bodyText": "I may be wrong, but it seems that the checks in this file should be sorted alphabetically (by check name). Please move it to right after MagicNumber.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528220609", "createdAt": "2020-11-21T17:25:27Z", "author": {"login": "pbludov"}, "path": "src/xdocs/checks.xml", "diffHunk": "@@ -966,6 +966,10 @@\n               VariableDeclarationUsageDistance</a></td>\n             <td>Checks the distance between declaration of variable and its first usage.</td>\n           </tr>\n+          <tr>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjc3NA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222774", "createdAt": "2020-11-21T17:46:34Z", "author": {"login": "timurt"}, "path": "src/xdocs/checks.xml", "diffHunk": "@@ -966,6 +966,10 @@\n               VariableDeclarationUsageDistance</a></td>\n             <td>Checks the distance between declaration of variable and its first usage.</td>\n           </tr>\n+          <tr>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMDYwOQ=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjIwOTM3OnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzozMTowNVrOH3wECQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0NjoyOVrOH3wKIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMTE5Mw==", "bodyText": "Do we need default configuration here? It does nothing. Similar checks has no default configuration", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528221193", "createdAt": "2020-11-21T17:31:05Z", "author": {"login": "pbludov"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3614,6 +3614,99 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.37</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath.\n+          Please read more about xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+        </p>\n+      </subsection>\n+\n+      <subsection name=\"Properties\" id=\"MatchXpath_Properties\">\n+        <div class=\"wrapper\">\n+          <table>\n+            <tr>\n+              <th>name</th>\n+              <th>description</th>\n+              <th>type</th>\n+              <th>default value</th>\n+              <th>since</th>\n+            </tr>\n+            <tr>\n+              <td>query</td>\n+              <td>Xpath query.</td>\n+              <td><a href=\"property_types.html#String\">String</a></td>\n+              <td><code>&quot;&quot;</code></td>\n+              <td>8.37</td>\n+            </tr>\n+          </table>\n+        </div>\n+      </subsection>\n+\n+      <subsection name=\"Examples\" id=\"MatchXpath_Examples\">\n+        <p>\n+          To configure the check with default configuration:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjc1NA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222754", "createdAt": "2020-11-21T17:46:29Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3614,6 +3614,99 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.37</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath.\n+          Please read more about xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+        </p>\n+      </subsection>\n+\n+      <subsection name=\"Properties\" id=\"MatchXpath_Properties\">\n+        <div class=\"wrapper\">\n+          <table>\n+            <tr>\n+              <th>name</th>\n+              <th>description</th>\n+              <th>type</th>\n+              <th>default value</th>\n+              <th>since</th>\n+            </tr>\n+            <tr>\n+              <td>query</td>\n+              <td>Xpath query.</td>\n+              <td><a href=\"property_types.html#String\">String</a></td>\n+              <td><code>&quot;&quot;</code></td>\n+              <td>8.37</td>\n+            </tr>\n+          </table>\n+        </div>\n+      </subsection>\n+\n+      <subsection name=\"Examples\" id=\"MatchXpath_Examples\">\n+        <p>\n+          To configure the check with default configuration:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMTE5Mw=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjIxMDU3OnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzozMjo0NFrOH3wEmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxNzo0NjoxN1rOH3wKFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMTMzNw==", "bodyText": "Please specify explicitly that the check does nothing by default.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528221337", "createdAt": "2020-11-21T17:32:44Z", "author": {"login": "pbludov"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3614,6 +3614,99 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.37</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath.\n+          Please read more about xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+        </p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMjc0Mw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528222743", "createdAt": "2020-11-21T17:46:17Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3614,6 +3614,99 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.37</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath.\n+          Please read more about xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+        </p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODIyMTMzNw=="}, "originalCommit": {"oid": "b160d69b10d01276e2ee3a04439677d58db6d6d6"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjU0NTE4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQwMDoyMToxOFrOH3yelg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxODo0NToyM1rOH36OCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI2MDc1OA==", "bodyText": "final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\nfinal XPathExpression xpathExpression = xpathEvaluator.createExpression(query);\n\ncan we make this execution to be done ones for whole Checkstyle execution ?\nfor example in \"setQuery\".", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528260758", "createdAt": "2020-11-22T00:21:18Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,184 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.38\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    /**\n+     * Setter to xpath query.\n+     *\n+     * @param query xpath query.\n+     */\n+    public void setQuery(String query) {\n+        this.query = query;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return CommonUtil.EMPTY_INT_ARRAY;\n+    }\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            final List<DetailAST> matchingNodes = findMatchingNodesByXpathQuery(rootAST);\n+            matchingNodes.forEach(node -> log(node, MSG_KEY));\n+        }\n+    }\n+\n+    private List<DetailAST> findMatchingNodesByXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f995a66d5b9ef4668f0db1f64a85754146de039"}, "originalPosition": 171}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODM4NzU5Mw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528387593", "createdAt": "2020-11-22T18:45:23Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,184 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.38\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    /**\n+     * Setter to xpath query.\n+     *\n+     * @param query xpath query.\n+     */\n+    public void setQuery(String query) {\n+        this.query = query;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return getRequiredTokens();\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return CommonUtil.EMPTY_INT_ARRAY;\n+    }\n+\n+    @Override\n+    public void beginTree(DetailAST rootAST) {\n+        if (!query.isEmpty()) {\n+            final List<DetailAST> matchingNodes = findMatchingNodesByXpathQuery(rootAST);\n+            matchingNodes.forEach(node -> log(node, MSG_KEY));\n+        }\n+    }\n+\n+    private List<DetailAST> findMatchingNodesByXpathQuery(DetailAST rootAST) {\n+        final XPathEvaluator xpathEvaluator = new XPathEvaluator(Configuration.newConfiguration());\n+        try {\n+            final RootNode rootNode = new RootNode(rootAST);\n+            final XPathExpression xpathExpression = xpathEvaluator.createExpression(query);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI2MDc1OA=="}, "originalCommit": {"oid": "9f995a66d5b9ef4668f0db1f64a85754146de039"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMjU0Nzc4OnYy", "diffSide": "RIGHT", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathIllegalThrows.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQwMDoyNTowN1rOH3yfuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxODo0NToxOVrOH36OBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI2MTA0OA==", "bodyText": "please update all Inputs to place there query that you used.\nYou used default only over one Input.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528261048", "createdAt": "2020-11-22T00:25:07Z", "author": {"login": "romani"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathIllegalThrows.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package com.puppycrawl.tools.checkstyle.checks.coding.matchxpath;\n+\n+/* Config:\n+ *\n+ * default", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f995a66d5b9ef4668f0db1f64a85754146de039"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODM4NzU4OA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528387588", "createdAt": "2020-11-22T18:45:19Z", "author": {"login": "timurt"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathIllegalThrows.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package com.puppycrawl.tools.checkstyle.checks.coding.matchxpath;\n+\n+/* Config:\n+ *\n+ * default", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI2MTA0OA=="}, "originalCommit": {"oid": "9f995a66d5b9ef4668f0db1f64a85754146de039"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzgzOTI5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQyMzoyNTowM1rOH38T0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMTo0MjoxNlrOH4J0pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQyMTg0MQ==", "bodyText": "To violate ...", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528421841", "createdAt": "2020-11-22T23:25:03Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,215 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "219aabea1932961c2922b4380cfbd45e06b76e97"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MzIzNw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528643237", "createdAt": "2020-11-23T11:42:16Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,215 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQyMTg0MQ=="}, "originalCommit": {"oid": "219aabea1932961c2922b4380cfbd45e06b76e97"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzgzOTgzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQyMzoyNToyMlrOH38UDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMTo0MjowMlrOH4J0Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQyMTkwMw==", "bodyText": "put property on new line.\nPlease keep pretty print of XML in javadoc in this and other examples.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528421903", "createdAt": "2020-11-22T23:25:22Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,215 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "219aabea1932961c2922b4380cfbd45e06b76e97"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MzExOQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528643119", "createdAt": "2020-11-23T11:42:02Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,215 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQyMTkwMw=="}, "originalCommit": {"oid": "219aabea1932961c2922b4380cfbd45e06b76e97"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzg0MTcyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQyMzoyNzoxM1rOH38U-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxMTo0MTo1NFrOH4JzyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQyMjEzNg==", "bodyText": "To violate ...\nwe do not fail anything, we just put some severity of events and plugin configuration usually do decision to fail or .... .", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528422136", "createdAt": "2020-11-22T23:27:13Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,215 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "219aabea1932961c2922b4380cfbd45e06b76e97"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODY0MzAxNg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528643016", "createdAt": "2020-11-23T11:41:54Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,215 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath.\n+ * Please read more about xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * If xpath query is not specified explicitly, then check does nothing.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ * following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt; &lt;property name=\"query\"\n+ * value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt; &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method name is 'test' or 'foo'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQyMjEzNg=="}, "originalCommit": {"oid": "219aabea1932961c2922b4380cfbd45e06b76e97"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI1MDQxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToxNzowMVrOH4SB9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo1NTo1MlrOH5IxIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NzcxNw==", "bodyText": "it works, but better to suggest\n..... -b \".....\"", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528777717", "createdAt": "2020-11-23T15:17:01Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1Nzg2OA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557868", "createdAt": "2020-11-24T13:49:03Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NzcxNw=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU4OTEyOQ==", "bodyText": "not done.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529589129", "createdAt": "2020-11-24T14:32:08Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NzcxNw=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU5NDk1Nw==", "bodyText": "it is done, maybe page needs to be refreshed", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529594957", "createdAt": "2020-11-24T14:40:04Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NzcxNw=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3NDUyOQ==", "bodyText": "see item below", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529674529", "createdAt": "2020-11-24T15:55:52Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc3NzcxNw=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI2NDUwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyMDoxOVrOH4SLGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0ODo1OFrOH5BpPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MDA1OQ==", "bodyText": "* Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a> and \n * <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\"\n *   GUI application</a> with options to\n * shown AST to ease usage of Xpath queries.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528780059", "createdAt": "2020-11-23T15:20:19Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1NzgyMQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557821", "createdAt": "2020-11-24T13:48:58Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MDA1OQ=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI3MjM2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyMjowNVrOH4SQKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0ODo1M1rOH5BpAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MTM1Mw==", "bodyText": "-T, as we are about to make it comments also.\nif you want to keep -t, please add one more acceptance criteria to #9009", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528781353", "createdAt": "2020-11-23T15:22:05Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1Nzc2Mg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557762", "createdAt": "2020-11-24T13:48:53Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MTM1Mw=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI3NjY2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyMjo1N1rOH4SS0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0ODo0NFrOH5Bokw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MjAzNQ==", "bodyText": "to violate", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528782035", "createdAt": "2020-11-23T15:22:57Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method has more than two statements inside", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1NzY1MQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557651", "createdAt": "2020-11-24T13:48:44Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method has more than two statements inside", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4MjAzNQ=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 167}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI5NzMzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyNzoyMFrOH4Sf3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0ODozM1rOH5BoCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTM3NA==", "bodyText": "please add example with var to xdoc", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528785374", "createdAt": "2020-11-23T15:27:20Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method has more than two statements inside\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[count(./SLIST/*) &gt; 2]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() { // violation\n+ *   int a = 1;\n+ *   int b = 2;\n+ *   int c = 3;\n+ *  }\n+ *  public void test() { // ok\n+ *   int a = 1;\n+ *   int b = 2;\n+ *  }\n+ * }\n+ * </pre>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 189}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1NzUxNQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557515", "createdAt": "2020-11-24T13:48:33Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To fail with violation if method has more than two statements inside\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[count(./SLIST/*) &gt; 2]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() { // violation\n+ *   int a = 1;\n+ *   int b = 2;\n+ *   int c = 3;\n+ *  }\n+ *  public void test() { // ok\n+ *   int a = 1;\n+ *   int b = 2;\n+ *  }\n+ * }\n+ * </pre>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTM3NA=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 189}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjMwMDI1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyODowMFrOH4Shrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0ODoyMlrOH5Bnnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTgzOA==", "bodyText": "why node is required here and not required in counts of statements examples ?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528785838", "createdAt": "2020-11-23T15:28:00Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1NzMzNw==", "bodyText": "my mistake * is more suitable here", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557337", "createdAt": "2020-11-24T13:48:15Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTgzOA=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1NzQwNw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529557407", "createdAt": "2020-11-24T13:48:22Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,274 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides own cmd tool and here the basic options will be\n+ * shown to ease usage of Xpath queries. More options and detailed information can be found\n+ * at <a href=\"https://checkstyle.org/cmdline.html\">Command Line</a>.\n+ * </p>\n+ * <p><b>-t</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -t Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b //METHOD_DEF[./IDENT[@text='sayHello']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/node()) &gt; 0]\"/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTgzOA=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 134}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjMxNTYyOnYy", "diffSide": "RIGHT", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathDoubleBrace.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNTozMDo1OVrOH4SrQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0Nzo0MVrOH5Bl5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4ODI5MA==", "bodyText": "please add leading asterisk, we almost merged Checks for this - #9006.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r528788290", "createdAt": "2020-11-23T15:30:59Z", "author": {"login": "romani"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathDoubleBrace.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package com.puppycrawl.tools.checkstyle.checks.coding.matchxpath;\n+\n+import java.util.ArrayList;\n+\n+/* Config:\n+ *\n+ * query: //INSTANCE_INIT[not(../*[not(self::LCURLY or self::INSTANCE_INIT or self::RCURLY or\n+ self::SINGLE_LINE_COMMENT or self::BLOCK_COMMENT_BEGIN)])]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1Njk2Nw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529556967", "createdAt": "2020-11-24T13:47:41Z", "author": {"login": "timurt"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathDoubleBrace.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package com.puppycrawl.tools.checkstyle.checks.coding.matchxpath;\n+\n+import java.util.ArrayList;\n+\n+/* Config:\n+ *\n+ * query: //INSTANCE_INIT[not(../*[not(self::LCURLY or self::INSTANCE_INIT or self::RCURLY or\n+ self::SINGLE_LINE_COMMENT or self::BLOCK_COMMENT_BEGIN)])]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4ODI5MA=="}, "originalCommit": {"oid": "0efacee151891f9d47fca5171aea33a1a08f9b81"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTM2NDM4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNDozNDo1N1rOH5DrfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNDo0MzoxOVrOH5ED6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU5MTE2NQ==", "bodyText": "please remove this example as it become same as\n//CTOR_DEF[count(./PARAMETERS/*", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529591165", "createdAt": "2020-11-24T14:34:57Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,294 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method has more than two statements inside\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[count(./SLIST/*) &gt; 2]\"/&gt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02ceed6aa52d5d566794028bd7d353ad46b5031c"}, "originalPosition": 171}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU5NzQxOA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529597418", "createdAt": "2020-11-24T14:43:19Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,294 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method has more than two statements inside\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[count(./SLIST/*) &gt; 2]\"/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU5MTE2NQ=="}, "originalCommit": {"oid": "02ceed6aa52d5d566794028bd7d353ad46b5031c"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMTg2NzcyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo1NToxM1rOH5ItKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwMzo0NDoxN1rOH7rAzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ==", "bodyText": "java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='\"sayHello\"']]\"", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r529673515", "createdAt": "2020-11-24T15:55:13Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc5MTIzNg==", "bodyText": "sorry, my bad\ndone", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r530791236", "createdAt": "2020-11-26T06:05:25Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ=="}, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4Mjk2MA==", "bodyText": "Please do it like:\njava -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r531182960", "createdAt": "2020-11-26T18:30:33Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ=="}, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTY1NjcxOA==", "bodyText": "-_- sorry, done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r531656718", "createdAt": "2020-11-27T15:16:59Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ=="}, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI5NzA3MA==", "bodyText": "Still not done, before reply please make sure you see it in github your self", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532297070", "createdAt": "2020-11-30T00:49:46Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ=="}, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjMyNjkxNg==", "bodyText": "Misunderstanding, I was thinking that you are referring the order of options, but only today noticed quotes", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532326916", "createdAt": "2020-11-30T03:16:55Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ=="}, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjMzMjc0OA==", "bodyText": "I hope now it is fixed", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532332748", "createdAt": "2020-11-30T03:44:17Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -> + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -> } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -b Main.java //METHOD_DEF[./IDENT[@text='\"sayHello\"']]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY3MzUxNQ=="}, "originalCommit": {"oid": "44ad38619d804a2b93b0aa6f9f460da02b3c9d2b"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzOTcxOTA1OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwNToyNToxM1rOH7sVPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwNTo0ODo1MlrOH7ssZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM1NDM2NQ==", "bodyText": "Just a suggestion for consistency, most Checkstyle UT's use final String[] expected = CommonUtil.EMPTY_STRING_ARRAY;", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532354365", "createdAt": "2020-11-30T05:25:13Z", "author": {"login": "nmancus1"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,233 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithImplicitEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1d8789735778a2041038d060d06469f49781324"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM1NDY0Nw==", "bodyText": "Same for line 45, 55", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532354647", "createdAt": "2020-11-30T05:26:17Z", "author": {"login": "nmancus1"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,233 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithImplicitEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM1NDM2NQ=="}, "originalCommit": {"oid": "b1d8789735778a2041038d060d06469f49781324"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM2MDI5NA==", "bodyText": "Thank you very much :)\nFixed mentioned lines", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532360294", "createdAt": "2020-11-30T05:48:52Z", "author": {"login": "timurt"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheckTest.java", "diffHunk": "@@ -0,0 +1,233 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import static com.google.common.truth.Truth.assertWithMessage;\n+import static org.junit.Assert.fail;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.AbstractModuleTestSupport;\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.DetailAstImpl;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+\n+public class MatchXpathCheckTest\n+    extends AbstractModuleTestSupport {\n+\n+    @Override\n+    protected String getPackageLocation() {\n+        return \"com/puppycrawl/tools/checkstyle/checks/coding/matchxpath\";\n+    }\n+\n+    @Test\n+    public void testCheckWithEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithImplicitEmptyQuery()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"\");\n+        final String[] expected = {};\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithMatchingMethodNames()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+            createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\");\n+        final String[] expected = {\n+            \"8:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+            \"10:5: \" + getCheckMessage(MatchXpathCheck.MSG_KEY),\n+        };\n+        verify(checkConfig, getPath(\"InputMatchXpath.java\"), expected);\n+    }\n+\n+    @Test\n+    public void testCheckWithNoMatchingMethodName()\n+            throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(MatchXpathCheck.class);\n+        checkConfig.addAttribute(\"query\", \"//METHOD_DEF[./IDENT[@text='wrongName' or \"\n+                + \"@text='nonExistingMethod']]\");\n+        final String[] expected = {};", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM1NDM2NQ=="}, "originalCommit": {"oid": "b1d8789735778a2041038d060d06469f49781324"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MDAyODAxOnYy", "diffSide": "RIGHT", "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathAvoidInstanceCreationWithoutVar.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwNzo0NzozMVrOH7vCaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNTowNDo0MVrOH7_NQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM5ODY5Ng==", "bodyText": "Why Java14? I see only type inference here. It is available since Java10", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532398696", "createdAt": "2020-11-30T07:47:31Z", "author": {"login": "pbludov"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathAvoidInstanceCreationWithoutVar.java", "diffHunk": "@@ -0,0 +1,15 @@\n+//non-compiled with javac: Compilable with Java14", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e24a9c86f4963cfb7ac3a1ff1799ed45bb695acf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ2MjUxNQ==", "bodyText": "I took as an example some other test files,\nmodified to Java10", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532462515", "createdAt": "2020-11-30T09:43:16Z", "author": {"login": "timurt"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathAvoidInstanceCreationWithoutVar.java", "diffHunk": "@@ -0,0 +1,15 @@\n+//non-compiled with javac: Compilable with Java14", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM5ODY5Ng=="}, "originalCommit": {"oid": "e24a9c86f4963cfb7ac3a1ff1799ed45bb695acf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwODAyOQ==", "bodyText": "Why Java14? I see only type inference here. It is available since Java10\n\n@pbludov What is the policy on this? I am wondering because I faced the same decision in #9060. There is two different ways to approach this:\n\nUse highest version number that code compiles on at the time of writing the test case.\nLowest possible version that code compiles on (basically targeting the release version that the specific feature that makes it non-compilable first appeared in).\n\nFor #9060 , I went with 1, thinking that we are guaranteed that the code is compilable up to at least Java 15. Is it better to do 2?\nI guess one day, when Checkstyle itself is compilable by newer versions of Java, we can move those test case files with versions <= new Checkstyle version to compilable?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532508029", "createdAt": "2020-11-30T10:53:45Z", "author": {"login": "nmancus1"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathAvoidInstanceCreationWithoutVar.java", "diffHunk": "@@ -0,0 +1,15 @@\n+//non-compiled with javac: Compilable with Java14", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM5ODY5Ng=="}, "originalCommit": {"oid": "e24a9c86f4963cfb7ac3a1ff1799ed45bb695acf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY2MzYxNw==", "bodyText": "Reason of this comment is to define what CI job should try to compile it.\nExact minimum version was good approach when java was less frequent in releases and we just used next version. Right now situation is different. We will upgrade to jdk11, so we will skip 9 and 10. So on upgrade to use jdk11 as minimum required version for project compilation we will move all jdk9, jdk10, jdk11 to compilable folder.\nSo, it is always ok to use minimum version in this comment, as we have bunch of CIs to execute compilation on each version. We can use our next target jdk - 11.\nAs we have no limits in CI execution, I would keep minimum version required for Input.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r532663617", "createdAt": "2020-11-30T15:04:41Z", "author": {"login": "romani"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/coding/matchxpath/InputMatchXpathAvoidInstanceCreationWithoutVar.java", "diffHunk": "@@ -0,0 +1,15 @@\n+//non-compiled with javac: Compilable with Java14", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM5ODY5Ng=="}, "originalCommit": {"oid": "e24a9c86f4963cfb7ac3a1ff1799ed45bb695acf"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI0MjE0OnYy", "diffSide": "RIGHT", "path": "config/checkstyle_checks.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjozNzo1MVrOH9Y-3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNDo0Njo0NFrOH9eZ5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNDQ5Mw==", "bodyText": "Illegal code structure detected.\n\nCan we add a message and explain what is illegal and our advice to resolve the issue. It is fine if it is just \"Avoid using 'printStackTrace'.`", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534134493", "createdAt": "2020-12-02T12:37:51Z", "author": {"login": "rnveach"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -394,6 +394,10 @@\n     </module>\n     <module name=\"InnerAssignment\"/>\n     <module name=\"MagicNumber\"/>\n+    <module name=\"MatchXpath\">\n+      <property name=\"query\" value=\"//CLASS_DEF[@text!='Checker' and @text!='Main']\n+      //LITERAL_CATCH//METHOD_CALL[.//IDENT[@text = 'printStackTrace']]/..\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE5MDkwMg==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534190902", "createdAt": "2020-12-02T14:05:06Z", "author": {"login": "timurt"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -394,6 +394,10 @@\n     </module>\n     <module name=\"InnerAssignment\"/>\n     <module name=\"MagicNumber\"/>\n+    <module name=\"MatchXpath\">\n+      <property name=\"query\" value=\"//CLASS_DEF[@text!='Checker' and @text!='Main']\n+      //LITERAL_CATCH//METHOD_CALL[.//IDENT[@text = 'printStackTrace']]/..\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNDQ5Mw=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIyMzMzMw==", "bodyText": "@rnveach , very good catch.\nI moving discussion to #8902 (review) to update more, as it is very critical item for Check usability.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534223333", "createdAt": "2020-12-02T14:46:44Z", "author": {"login": "romani"}, "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -394,6 +394,10 @@\n     </module>\n     <module name=\"InnerAssignment\"/>\n     <module name=\"MagicNumber\"/>\n+    <module name=\"MatchXpath\">\n+      <property name=\"query\" value=\"//CLASS_DEF[@text!='Checker' and @text!='Main']\n+      //LITERAL_CATCH//METHOD_CALL[.//IDENT[@text = 'printStackTrace']]/..\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNDQ5Mw=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI1NzQ4OnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo0MTo1MVrOH9ZICA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNDowNToxMVrOH9cbiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNjg0MA==", "bodyText": "Current check\n\nThis sounds funny, like you are saying this wasn't supported by the check before but it is a brand new check. I recommend changing Current check => This check.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534136840", "createdAt": "2020-12-02T12:41:51Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE5MDk4Nw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534190987", "createdAt": "2020-12-02T14:05:11Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNjg0MA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI1ODkwOnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo0MjoxNlrOH9ZI5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNDowNToyN1rOH9ccMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNzA2MA==", "bodyText": "then check => then the check", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534137060", "createdAt": "2020-12-02T12:42:16Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE5MTE1NA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534191154", "createdAt": "2020-12-02T14:05:27Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzNzA2MA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI2NjYzOnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo0NDoyNVrOH9ZNog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzowNzo1OVrOH93d7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODI3NA==", "bodyText": "I noticed all these xpath links do not point to the website of the xpath utility we are using. Their website documentation doesn't have anything similar? Since we are using their utility, I figured their documentation would match more what we need.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534138274", "createdAt": "2020-12-02T12:44:25Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE5ODUzMA==", "bodyText": "found similar Saxon docs, please check", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534198530", "createdAt": "2020-12-02T14:15:42Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODI3NA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDYzMzk2NQ==", "bodyText": "Thanks.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534633965", "createdAt": "2020-12-03T03:07:59Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODI3NA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI3MDU0OnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo0NToyNlrOH9ZQFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMzo1MTo1NlrOH-cqSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODkwMA==", "bodyText": "I highly recommend not pointing to master in documentation. We can't guarantee this line position will stay the same as new changes are made. Do we even need to point to code in what should be user friendly documentation?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534138900", "createdAt": "2020-12-02T12:45:26Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE4ODkzMg==", "bodyText": "Another approach is to list all supported token types inside documentation. @romani what do you think?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534188932", "createdAt": "2020-12-02T14:02:18Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODkwMA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIxMDY5OA==", "bodyText": "lets move all this to special doc page in scope of #9074\nto not block this Check acceptance.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534210698", "createdAt": "2020-12-02T14:31:00Z", "author": {"login": "romani"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODkwMA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIxNjIzMw==", "bodyText": "meanwhile we can change it to https://github.com/checkstyle/checkstyle/search?q=%22TOKEN_TYPES_WITH_TEXT_ATTRIBUTE+%3D+Arrays.asList%22", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534216233", "createdAt": "2020-12-02T14:37:59Z", "author": {"login": "romani"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODkwMA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI0MzMzOA==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535243338", "createdAt": "2020-12-03T13:51:56Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDEzODkwMA=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI4Mjc1OnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo0ODozOFrOH9ZXQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMzowMDowNFrOH93TbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0MDczOQ==", "bodyText": "Some of this seems to be examples of other checkstyle functions than the check's functions. Not saying it has to be removed, but it seems like this documentation should be somewhere else and we could point to it from here.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534140739", "createdAt": "2020-12-02T12:48:38Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+            XpathUtil</a>.\n+        </p>\n+\n+      </subsection>\n+\n+      <subsection name=\"Properties\" id=\"MatchXpath_Properties\">\n+        <div class=\"wrapper\">\n+          <table>\n+            <tr>\n+              <th>name</th>\n+              <th>description</th>\n+              <th>type</th>\n+              <th>default value</th>\n+              <th>since</th>\n+            </tr>\n+            <tr>\n+              <td>query</td>\n+              <td>Xpath query.</td>\n+              <td><a href=\"property_types.html#String\">String</a></td>\n+              <td><code>&quot;&quot;</code></td>\n+              <td>8.39</td>\n+            </tr>\n+          </table>\n+        </div>\n+      </subsection>\n+\n+      <subsection name=\"Examples\" id=\"MatchXpath_Examples\">\n+        <p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE5OTQ4Mw==", "bodyText": "didn't understand your point,\ndo you want to add links to real checks we try to mimic?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534199483", "createdAt": "2020-12-02T14:16:59Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+            XpathUtil</a>.\n+        </p>\n+\n+      </subsection>\n+\n+      <subsection name=\"Properties\" id=\"MatchXpath_Properties\">\n+        <div class=\"wrapper\">\n+          <table>\n+            <tr>\n+              <th>name</th>\n+              <th>description</th>\n+              <th>type</th>\n+              <th>default value</th>\n+              <th>since</th>\n+            </tr>\n+            <tr>\n+              <td>query</td>\n+              <td>Xpath query.</td>\n+              <td><a href=\"property_types.html#String\">String</a></td>\n+              <td><code>&quot;&quot;</code></td>\n+              <td>8.39</td>\n+            </tr>\n+          </table>\n+        </div>\n+      </subsection>\n+\n+      <subsection name=\"Examples\" id=\"MatchXpath_Examples\">\n+        <p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0MDczOQ=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIxNzQ4OA==", "bodyText": "lets move this to #9074 , it is long awaited page as Xpath is far from easy concept.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534217488", "createdAt": "2020-12-02T14:39:23Z", "author": {"login": "romani"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+            XpathUtil</a>.\n+        </p>\n+\n+      </subsection>\n+\n+      <subsection name=\"Properties\" id=\"MatchXpath_Properties\">\n+        <div class=\"wrapper\">\n+          <table>\n+            <tr>\n+              <th>name</th>\n+              <th>description</th>\n+              <th>type</th>\n+              <th>default value</th>\n+              <th>since</th>\n+            </tr>\n+            <tr>\n+              <td>query</td>\n+              <td>Xpath query.</td>\n+              <td><a href=\"property_types.html#String\">String</a></td>\n+              <td><code>&quot;&quot;</code></td>\n+              <td>8.39</td>\n+            </tr>\n+          </table>\n+        </div>\n+      </subsection>\n+\n+      <subsection name=\"Examples\" id=\"MatchXpath_Examples\">\n+        <p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0MDczOQ=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDYzMTI3Nw==", "bodyText": "I was trying to get at was the examples for the check don't show check examples but instead other Checkstyle CLI examples. It is like I give you a manual to operate a boat, and the manual first talks about where you can get a car. (Closest analogy I could come up with)\nThis is resolved by new issue.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534631277", "createdAt": "2020-12-03T03:00:04Z", "author": {"login": "rnveach"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,200 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then check does nothing.\n+        </p>\n+        <p>\n+          Please read more about Xpath syntax at\n+          <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\"> W3Schools Xpath Syntax</a>.\n+          Information regarding Xpath functions can be found at\n+          <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath\n+            Reference</a>. Note, that <b>@text</b> attribute can used only with token types that\n+          are listed in\n+          <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+            XpathUtil</a>.\n+        </p>\n+\n+      </subsection>\n+\n+      <subsection name=\"Properties\" id=\"MatchXpath_Properties\">\n+        <div class=\"wrapper\">\n+          <table>\n+            <tr>\n+              <th>name</th>\n+              <th>description</th>\n+              <th>type</th>\n+              <th>default value</th>\n+              <th>since</th>\n+            </tr>\n+            <tr>\n+              <td>query</td>\n+              <td>Xpath query.</td>\n+              <td><a href=\"property_types.html#String\">String</a></td>\n+              <td><code>&quot;&quot;</code></td>\n+              <td>8.39</td>\n+            </tr>\n+          </table>\n+        </div>\n+      </subsection>\n+\n+      <subsection name=\"Examples\" id=\"MatchXpath_Examples\">\n+        <p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0MDczOQ=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTI5MTM4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMjo1MDo1M1rOH9Zciw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNDowNDo1NFrOH9caug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0MjA5MQ==", "bodyText": "This is why property descriptions must start with a verb in the singular tense.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534142091", "createdAt": "2020-12-02T12:50:53Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,270 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -&gt; + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -&gt; } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if new instance creation was done without <b>var</b> type\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;MatchXpath&quot;&gt;\n+ *  &lt;property name=&quot;query&quot; value=&quot;//VARIABLE_DEF[./ASSIGN/EXPR/LITERAL_NEW\n+ *  and not(./TYPE/IDENT[@text='var'])]&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *   public void foo() {\n+ *     SomeObject a = new SomeObject(); // violation\n+ *     var b = new SomeObject(); // OK\n+ *   }\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.39\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    /** Xpath expression. */\n+    private XPathExpression xpathExpression;\n+\n+    /**\n+     * Setter to xpath query.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 215}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE5MDc3OA==", "bodyText": "changed to Setter to specify xpath query.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534190778", "createdAt": "2020-12-02T14:04:54Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,270 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. Current check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\">\n+ * W3Schools Xpath Syntax</a>. Information regarding Xpath functions can be found at\n+ * <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/utils/XpathUtil.java#L101\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -&gt; + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -&gt; } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if new instance creation was done without <b>var</b> type\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;MatchXpath&quot;&gt;\n+ *  &lt;property name=&quot;query&quot; value=&quot;//VARIABLE_DEF[./ASSIGN/EXPR/LITERAL_NEW\n+ *  and not(./TYPE/IDENT[@text='var'])]&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *   public void foo() {\n+ *     SomeObject a = new SomeObject(); // violation\n+ *     var b = new SomeObject(); // OK\n+ *   }\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code matchxpath.match}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.39\n+ */\n+@StatelessCheck\n+public class MatchXpathCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text provided by user.\n+     */\n+    public static final String MSG_KEY = \"matchxpath.match\";\n+\n+    /** Xpath query. */\n+    private String query = \"\";\n+\n+    /** Xpath expression. */\n+    private XPathExpression xpathExpression;\n+\n+    /**\n+     * Setter to xpath query.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE0MjA5MQ=="}, "originalCommit": {"oid": "812a3b74497d1fadffd1dc6b9b8bb2964511c2a0"}, "originalPosition": 215}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTgwNTMwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNDo0NTozNlrOH9eWlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMzo0NjozN1rOH-cbcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIyMjQ4NA==", "bodyText": "please add new paragraph to encourage use to define custom message matchxpath.match for each instance of Check to explain what Check try to find and why it is not good. Default message might be too abstract and not informative.\nPlease add such property in each example.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534222484", "createdAt": "2020-12-02T14:45:36Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c0f0a1fdcb42485ee100fd356ac840d6746df6a"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIzOTUzNw==", "bodyText": "done, please check\n@rnveach could you also check my English writings :)", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535239537", "createdAt": "2020-12-03T13:46:37Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIyMjQ4NA=="}, "originalCommit": {"oid": "8c0f0a1fdcb42485ee100fd356ac840d6746df6a"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MTg0NjI1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNDo1NDowNVrOH9ewtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMzo1ODo1MVrOH-c-Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIyOTE3Mg==", "bodyText": "@timurt , please recheck  rendering of  <b>@text</b> you might need to escape @", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r534229172", "createdAt": "2020-12-02T14:54:05Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c0f0a1fdcb42485ee100fd356ac840d6746df6a"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI0MDY4MA==", "bodyText": "yeah, I have generated sites and it looks fine as javadoc and as checkstyle site as well, do you want me to upload this htmls to pages?", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535240680", "createdAt": "2020-12-03T13:48:19Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIyOTE3Mg=="}, "originalCommit": {"oid": "8c0f0a1fdcb42485ee100fd356ac840d6746df6a"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI0ODQyNw==", "bodyText": "looks good", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535248427", "createdAt": "2020-12-03T13:58:51Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,271 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIyOTE3Mg=="}, "originalCommit": {"oid": "8c0f0a1fdcb42485ee100fd356ac840d6746df6a"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODE1NTExOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDowNjoxNFrOH-dSvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDozNzoxOVrOH-e_hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1MzY5NA==", "bodyText": "please remove \"If there are more than one check of this type,\" it should recommended to do always.\nIt is better to define custom messages for violations to explain what is not allowed and what to use instead, default message might be too abstract", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535253694", "createdAt": "2020-12-03T14:06:14Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,285 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * If there are more than one check of this type, it is better to define custom messages for", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1e5fd9fbd7f67d598507771e191d9083ffd8567"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI4MTU0MQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535281541", "createdAt": "2020-12-03T14:37:19Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,285 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * If there are more than one check of this type, it is better to define custom messages for", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1MzY5NA=="}, "originalCommit": {"oid": "c1e5fd9fbd7f67d598507771e191d9083ffd8567"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODE2NTM2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDowODoxNVrOH-dYrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDozNzoxM1rOH-e_Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1NTIxMg==", "bodyText": "Parameterized constructors are not allowed, there should be only default ctor\nthis is the only imaginary reason I can think of.", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535255212", "createdAt": "2020-12-03T14:08:15Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,285 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * If there are more than one check of this type, it is better to define custom messages for\n+ * violations since default message might be too abstract. To customize a message you need to\n+ * add <code>message</code> element with <b>matchxpath.match</b> as <code>key</code> attribute and\n+ * desired message as <code>value</code> attribute.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/search?q=%22TOKEN_TYPES_WITH_TEXT_ATTRIBUTE+%3D+Arrays.asList%22\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Specify Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -&gt; + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -&gt; } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Private methods must appear after public methods&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Parameterized constructors are not allowed&quot;/&gt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1e5fd9fbd7f67d598507771e191d9083ffd8567"}, "originalPosition": 145}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI4MTQyMw==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535281423", "createdAt": "2020-12-03T14:37:13Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,285 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * If there are more than one check of this type, it is better to define custom messages for\n+ * violations since default message might be too abstract. To customize a message you need to\n+ * add <code>message</code> element with <b>matchxpath.match</b> as <code>key</code> attribute and\n+ * desired message as <code>value</code> attribute.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/search?q=%22TOKEN_TYPES_WITH_TEXT_ATTRIBUTE+%3D+Arrays.asList%22\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Specify Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -&gt; + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -&gt; } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Private methods must appear after public methods&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Parameterized constructors are not allowed&quot;/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1NTIxMg=="}, "originalCommit": {"oid": "c1e5fd9fbd7f67d598507771e191d9083ffd8567"}, "originalPosition": 145}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODE3MzkwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDowOTo1M1rOH-ddlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDozNzowNVrOH-e-XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1NjQ2OQ==", "bodyText": "New instances should be created via 'var' keyword to avoid duplication of type reference in statement", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535256469", "createdAt": "2020-12-03T14:09:53Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,285 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * If there are more than one check of this type, it is better to define custom messages for\n+ * violations since default message might be too abstract. To customize a message you need to\n+ * add <code>message</code> element with <b>matchxpath.match</b> as <code>key</code> attribute and\n+ * desired message as <code>value</code> attribute.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/search?q=%22TOKEN_TYPES_WITH_TEXT_ATTRIBUTE+%3D+Arrays.asList%22\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Specify Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -&gt; + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -&gt; } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Private methods must appear after public methods&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Parameterized constructors are not allowed&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Method name should not be 'test' or 'foo'&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if new instance creation was done without <b>var</b> type\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;MatchXpath&quot;&gt;\n+ *  &lt;property name=&quot;query&quot; value=&quot;//VARIABLE_DEF[./ASSIGN/EXPR/LITERAL_NEW\n+ *  and not(./TYPE/IDENT[@text='var'])]&quot;/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;New instances should be created via 'var' keyword&quot;/&gt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1e5fd9fbd7f67d598507771e191d9083ffd8567"}, "originalPosition": 187}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI4MTI0NQ==", "bodyText": "done", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535281245", "createdAt": "2020-12-03T14:37:05Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/MatchXpathCheck.java", "diffHunk": "@@ -0,0 +1,285 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.coding;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.utils.CommonUtil;\n+import com.puppycrawl.tools.checkstyle.xpath.AbstractNode;\n+import com.puppycrawl.tools.checkstyle.xpath.RootNode;\n+import net.sf.saxon.Configuration;\n+import net.sf.saxon.om.Item;\n+import net.sf.saxon.sxpath.XPathDynamicContext;\n+import net.sf.saxon.sxpath.XPathEvaluator;\n+import net.sf.saxon.sxpath.XPathExpression;\n+import net.sf.saxon.trans.XPathException;\n+\n+/**\n+ * <p>\n+ * Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+ * user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+ * then the check does nothing.\n+ * </p>\n+ * <p>\n+ * If there are more than one check of this type, it is better to define custom messages for\n+ * violations since default message might be too abstract. To customize a message you need to\n+ * add <code>message</code> element with <b>matchxpath.match</b> as <code>key</code> attribute and\n+ * desired message as <code>value</code> attribute.\n+ * </p>\n+ * <p>\n+ * Please read more about Xpath syntax at\n+ * <a href=\"https://www.saxonica.com/html/documentation/expressions/\">Xpath Syntax</a>.\n+ * Information regarding Xpath functions can be found at\n+ * <a href=\"https://www.saxonica.com/html/documentation/functions/fn/\">XSLT/XPath Reference</a>.\n+ * Note, that <b>@text</b> attribute can used only with token types that are listed in\n+ * <a href=\"https://github.com/checkstyle/checkstyle/search?q=%22TOKEN_TYPES_WITH_TEXT_ATTRIBUTE+%3D+Arrays.asList%22\">\n+ *     XpathUtil</a>.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code query} - Specify Xpath query.\n+ * Type is {@code java.lang.String}.\n+ * Default value is {@code \"\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * Checkstyle provides <a href=\"https://checkstyle.org/cmdline.html\">command line tool</a>\n+ * and <a href=\"https://checkstyle.org/writingchecks.html#The_Checkstyle_SDK_Gui\">GUI\n+ * application</a> with options to show AST and to ease usage of Xpath queries.\n+ * </p>\n+ * <p><b>-T</b> option prints AST tree of the checked file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar -T Main.java\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * |--MODIFIERS -&gt; MODIFIERS [1:0]\n+ * |   `--LITERAL_PUBLIC -&gt; public [1:0]\n+ * |--LITERAL_CLASS -&gt; class [1:7]\n+ * |--IDENT -&gt; Main [1:13]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--LCURLY -&gt; { [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * |   |--MODIFIERS -&gt; MODIFIERS [2:4]\n+ * |   |   `--LITERAL_PUBLIC -&gt; public [2:4]\n+ * |   |--TYPE -&gt; TYPE [2:11]\n+ * |   |   `--IDENT -&gt; String [2:11]\n+ * |   |--IDENT -&gt; sayHello [2:18]\n+ * |   |--LPAREN -&gt; ( [2:26]\n+ * |   |--PARAMETERS -&gt; PARAMETERS [2:27]\n+ * |   |   `--PARAMETER_DEF -&gt; PARAMETER_DEF [2:27]\n+ * |   |       |--MODIFIERS -&gt; MODIFIERS [2:27]\n+ * |   |       |--TYPE -&gt; TYPE [2:27]\n+ * |   |       |   `--IDENT -&gt; String [2:27]\n+ * |   |       `--IDENT -&gt; name [2:34]\n+ * |   |--RPAREN -&gt; ) [2:38]\n+ * |   `--SLIST -&gt; { [2:40]\n+ * |       |--LITERAL_RETURN -&gt; return [3:8]\n+ * |       |   |--EXPR -&gt; EXPR [3:25]\n+ * |       |   |   `--PLUS -&gt; + [3:25]\n+ * |       |   |       |--STRING_LITERAL -&gt; \"Hello, \" [3:15]\n+ * |       |   |       `--IDENT -&gt; name [3:27]\n+ * |       |   `--SEMI -&gt; ; [3:31]\n+ * |       `--RCURLY -&gt; } [4:4]\n+ * `--RCURLY -&gt; } [5:0]\n+ * </pre>\n+ * <p><b>-b</b> option shows AST nodes that match given Xpath query. This command can be used to\n+ * validate accuracy of Xpath query against given file.</p>\n+ * <pre>\n+ * $ java -jar checkstyle-X.XX-all.jar Main.java -b \"//METHOD_DEF[./IDENT[@text='sayHello']]\"\n+ * CLASS_DEF -&gt; CLASS_DEF [1:0]\n+ * `--OBJBLOCK -&gt; OBJBLOCK [1:18]\n+ * |--METHOD_DEF -&gt; METHOD_DEF [2:4]\n+ * </pre>\n+ * <p>\n+ * The following example demonstrates validation of methods order, so that public methods should\n+ * come before the private ones:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[.//LITERAL_PRIVATE and\n+ *  following-sibling::METHOD_DEF[.//LITERAL_PUBLIC]]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Private methods must appear after public methods&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void method1() { }\n+ *  private void method2() { } // violation\n+ *  public void method3() { }\n+ *  private void method4() { } // violation\n+ *  public void method5() { }\n+ *  private void method6() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if there are any parametrized constructors\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//CTOR_DEF[count(./PARAMETERS/*) &gt; 0]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Parameterized constructors are not allowed&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public Test(Object c) { } // violation\n+ *  public Test(int a, HashMap&lt;String, Integer&gt; b) { } // violation\n+ *  public Test() { } // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if method name is 'test' or 'foo'\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"MatchXpath\"&gt;\n+ *  &lt;property name=\"query\" value=\"//METHOD_DEF[./IDENT[@text='test' or @text='foo']]\"/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;Method name should not be 'test' or 'foo'&quot;/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Example:\n+ * </p>\n+ * <pre>\n+ * public class Test {\n+ *  public void test() {} // violation\n+ *  public void getName() {} // ok\n+ *  public void foo() {} // violation\n+ *  public void sayHello() {} // ok\n+ * }\n+ * </pre>\n+ * <p>\n+ * To violate if new instance creation was done without <b>var</b> type\n+ * </p>\n+ * <pre>\n+ * &lt;module name=&quot;MatchXpath&quot;&gt;\n+ *  &lt;property name=&quot;query&quot; value=&quot;//VARIABLE_DEF[./ASSIGN/EXPR/LITERAL_NEW\n+ *  and not(./TYPE/IDENT[@text='var'])]&quot;/&gt;\n+ *  &lt;message key=&quot;matchxpath.match&quot;\n+ *  value=&quot;New instances should be created via 'var' keyword&quot;/&gt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1NjQ2OQ=="}, "originalCommit": {"oid": "c1e5fd9fbd7f67d598507771e191d9083ffd8567"}, "originalPosition": 187}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODM5Njk0OnYy", "diffSide": "RIGHT", "path": "src/xdocs/config_coding.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDo0MzoyOFrOH-fbMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDo0Nzo1MVrOH-fvUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI4ODYyNA==", "bodyText": "It is recommended to define custom message for violation ....", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535288624", "createdAt": "2020-12-03T14:43:28Z", "author": {"login": "romani"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,216 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then the check does nothing.\n+        </p>\n+        <p>\n+          It is better to define custom messages for violations to explain what is not allowed and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6684c1c9a56157a552d3b9a378c24a40dafb9a4"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI5Mzc3OQ==", "bodyText": "done \ud83d\udc4d", "url": "https://github.com/checkstyle/checkstyle/pull/8902#discussion_r535293779", "createdAt": "2020-12-03T14:47:51Z", "author": {"login": "timurt"}, "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -3623,6 +3623,216 @@ class TestHashCode {\n       </subsection>\n     </section>\n \n+    <section name=\"MatchXpath\">\n+      <p>Since Checkstyle 8.39</p>\n+      <subsection name=\"Description\" id=\"MatchXpath_Description\">\n+        <p>\n+          Evaluates Xpath query and report violation on all matching AST nodes. This check allows\n+          user to implement custom checks using Xpath. If Xpath query is not specified explicitly,\n+          then the check does nothing.\n+        </p>\n+        <p>\n+          It is better to define custom messages for violations to explain what is not allowed and", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI4ODYyNA=="}, "originalCommit": {"oid": "d6684c1c9a56157a552d3b9a378c24a40dafb9a4"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1632, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}