{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MzA5MDU1", "number": 8420, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzozNTo1MlrOEMxvFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxNTozNjoxNVrOEP3YEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxODMzMjM5OnYy", "diffSide": "RIGHT", "path": "src/xdocs/checks.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzozNTo1MlrOGvFOUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDozMzowNlrOG2NYxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAyMTg0MA==", "bodyText": "I wonder why enums/annotations are not handled by this check? Perhaps this check should be reviewed one more time once records will be done.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r452021840", "createdAt": "2020-07-09T07:35:52Z", "author": {"login": "pbludov"}, "path": "src/xdocs/checks.xml", "diffHunk": "@@ -360,7 +360,8 @@\n             <td><a href=\"config_design.html#InnerTypeLast\">InnerTypeLast</a></td>\n             <td>\n               Checks nested (internal) classes/interfaces are declared at the bottom of the\n-              primary (top-level) class after all method and field declarations.\n+              primary (top-level) class after all init and static init blocks,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ5NTYyMg==", "bodyText": "agree, but this cane be done later.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r459495622", "createdAt": "2020-07-23T14:33:06Z", "author": {"login": "romani"}, "path": "src/xdocs/checks.xml", "diffHunk": "@@ -360,7 +360,8 @@\n             <td><a href=\"config_design.html#InnerTypeLast\">InnerTypeLast</a></td>\n             <td>\n               Checks nested (internal) classes/interfaces are declared at the bottom of the\n-              primary (top-level) class after all method and field declarations.\n+              primary (top-level) class after all init and static init blocks,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAyMTg0MA=="}, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxODM0OTIwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzo0MDo0N1rOGvFYjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzo0MDo0N1rOGvFYjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAyNDQ2Mg==", "bodyText": "Once #8048 will be done, this tokens are good candidates for a helper method like TokenUtil.isClassMember or something like this.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r452024462", "createdAt": "2020-07-09T07:40:47Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "diffHunk": "@@ -62,6 +72,15 @@\n      */\n     public static final String MSG_KEY = \"arrangement.members.before.inner\";\n \n+    /** List of class member tokens. */\n+    private static final List<Integer> CLASS_MEMBER_TOKENS = Arrays.asList(\n+            TokenTypes.VARIABLE_DEF,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDg5Njk5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDoxNDo1MVrOGwEbhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMlQxNjozMjo0MVrOGwVgSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA1NzQxNQ==", "bodyText": "@strkkk this can be !TokenUtil.isTypeDeclaration(nextSibling.getType()) after #8345\nAlso, if (!ScopeUtil.isInCodeBlock(ast) should be moved out of the loop.\nMoreover, the loop itself is redundant. Only the next sibling should be checked. If the next sibling is a type, it will be processed soon.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r453057415", "createdAt": "2020-07-10T20:14:51Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "diffHunk": "@@ -95,8 +114,7 @@ public void visitToken(DetailAST ast) {\n             DetailAST nextSibling = ast.getNextSibling();\n             while (nextSibling != null) {\n                 if (!ScopeUtil.isInCodeBlock(ast)\n-                    && (nextSibling.getType() == TokenTypes.VARIABLE_DEF\n-                        || nextSibling.getType() == TokenTypes.METHOD_DEF)) {\n+                    && CLASS_MEMBER_TOKENS.contains(nextSibling.getType())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE3MDM4Ng==", "bodyText": "Do you think this PR should wait until #8345?\nIf loop is removed, it will cause changes in amount of violation generated by check.\nI think violation should be raised on type declaration ast, but if it is raised on class members token, it should be all of them and loop is correct here.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r453170386", "createdAt": "2020-07-11T08:08:06Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "diffHunk": "@@ -95,8 +114,7 @@ public void visitToken(DetailAST ast) {\n             DetailAST nextSibling = ast.getNextSibling();\n             while (nextSibling != null) {\n                 if (!ScopeUtil.isInCodeBlock(ast)\n-                    && (nextSibling.getType() == TokenTypes.VARIABLE_DEF\n-                        || nextSibling.getType() == TokenTypes.METHOD_DEF)) {\n+                    && CLASS_MEMBER_TOKENS.contains(nextSibling.getType())) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA1NzQxNQ=="}, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzMzNzE2MA==", "bodyText": "I'm ok to merge this PR as is.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r453337160", "createdAt": "2020-07-12T16:32:41Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "diffHunk": "@@ -95,8 +114,7 @@ public void visitToken(DetailAST ast) {\n             DetailAST nextSibling = ast.getNextSibling();\n             while (nextSibling != null) {\n                 if (!ScopeUtil.isInCodeBlock(ast)\n-                    && (nextSibling.getType() == TokenTypes.VARIABLE_DEF\n-                        || nextSibling.getType() == TokenTypes.METHOD_DEF)) {\n+                    && CLASS_MEMBER_TOKENS.contains(nextSibling.getType())) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA1NzQxNQ=="}, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1MDcxMzc3OnYy", "diffSide": "RIGHT", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/design/innertypelast/InputInnerTypeLastClassCtorsInitBlocks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxNTozNjoxNVrOGzwW_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjowMDo1MVrOG0Ihhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkyMjg3OQ==", "bodyText": "please rebase, there should be violation that * Config: is missed.\nIf no violation, please share details on why, we have Check on this now.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r456922879", "createdAt": "2020-07-19T15:36:15Z", "author": {"login": "romani"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/design/innertypelast/InputInnerTypeLastClassCtorsInitBlocks.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package com.puppycrawl.tools.checkstyle.checks.design.innertypelast;\n+\n+public class InputInnerTypeLastClassCtorsInitBlocks {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMxODc5MQ==", "bodyText": "rebased and config comment added\n\nplease share details on why, we have Check on this now.\n\nNot sure what you mean", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r457318791", "createdAt": "2020-07-20T12:00:51Z", "author": {"login": "strkkk"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/design/innertypelast/InputInnerTypeLastClassCtorsInitBlocks.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package com.puppycrawl.tools.checkstyle.checks.design.innertypelast;\n+\n+public class InputInnerTypeLastClassCtorsInitBlocks {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkyMjg3OQ=="}, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 879, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}