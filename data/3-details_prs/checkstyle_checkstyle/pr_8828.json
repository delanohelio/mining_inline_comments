{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2MTY3MjY5", "number": 8828, "title": "Issue #8827: Diff Report should be generated against main checkstyle's branch", "bodyText": "Closes #8827\nPreview: https://abhishek-kumar09.github.io/github-actions-report-fetch/\n\nCommit in my repo: Abhishek-kumar09@0b14959\nMy repo's diff.yaml file: https://github.com/Abhishek-kumar09/checkstyle/blob/0b14959611d0fb1f89fe7ae3308b9efeafa87f72/.github/workflows/diff_report.yml\ngithub-actions Run: https://github.com/Abhishek-kumar09/checkstyle/actions/runs/252306649", "createdAt": "2020-09-13T11:20:31Z", "url": "https://github.com/checkstyle/checkstyle/pull/8828", "merged": true, "mergeCommit": {"oid": "11ce9d3b20c951741c5518ec6a967c407ee54e14"}, "closed": true, "closedAt": "2020-09-19T14:51:06Z", "author": {"login": "Abhishek-kumar09"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIexjBAFqTQ4NzMwNzg0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKLwehgBqjM3ODQxNjI3MjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzA3ODQ2", "url": "https://github.com/checkstyle/checkstyle/pull/8828#pullrequestreview-487307846", "createdAt": "2020-09-13T13:36:38Z", "commit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMzozNjozOFrOHQ8gOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMzozODo1OVrOHQ8hCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDU1Mw==", "bodyText": "this line is longer than 100 symbols, CI does not like it. Please wrap it", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530553", "createdAt": "2020-09-13T13:36:38Z", "author": {"login": "strkkk"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -133,14 +144,15 @@ jobs:\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n+         REF_BRANCH=\"upstream/master\"\n          if [ -f new_module_config.xml ]; then\n            groovy diff.groovy -r $REPO -p $REF -pc new_module_config.xml -m single\\\n              -l project.properties\n          elif [ -f patch_config.xml ]; then\n-           groovy diff.groovy -r $REPO -b master -p $REF -bc diff_config.xml -pc patch_config.xml\\\n+           groovy diff.groovy -r $REPO -b $REF_BRANCH -p $REF -bc diff_config.xml -pc patch_config.xml\\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDU3Nw==", "bodyText": "same here", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530577", "createdAt": "2020-09-13T13:36:46Z", "author": {"login": "strkkk"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -133,14 +144,15 @@ jobs:\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n+         REF_BRANCH=\"upstream/master\"\n          if [ -f new_module_config.xml ]; then\n            groovy diff.groovy -r $REPO -p $REF -pc new_module_config.xml -m single\\\n              -l project.properties\n          elif [ -f patch_config.xml ]; then\n-           groovy diff.groovy -r $REPO -b master -p $REF -bc diff_config.xml -pc patch_config.xml\\\n+           groovy diff.groovy -r $REPO -b $REF_BRANCH -p $REF -bc diff_config.xml -pc patch_config.xml\\\n              -l project.properties\n          else\n-           groovy diff.groovy -r $REPO -b master -p $REF -c diff_config.xml -l project.properties\n+           groovy diff.groovy -r $REPO -b $REF_BRANCH -p $REF -c diff_config.xml -l project.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDY0Mg==", "bodyText": "BASE_BRANCH sounds better", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530642", "createdAt": "2020-09-13T13:37:27Z", "author": {"login": "strkkk"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -133,14 +144,15 @@ jobs:\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n+         REF_BRANCH=\"upstream/master\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDcwNA==", "bodyText": "upstream's branch as a reference branch -> upstream's master branch as a base branch", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530704", "createdAt": "2020-09-13T13:38:08Z", "author": {"login": "strkkk"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's branch as a reference branch", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDc2MQ==", "bodyText": "naming is a bit weird, please change it to something like MAIN_REPO_GIT_URL", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530761", "createdAt": "2020-09-13T13:38:59Z", "author": {"login": "strkkk"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's branch as a reference branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_CHECKSTYLE_HTTPS=\"https://github.com/checkstyle/checkstyle.git\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "committedDate": "2020-09-13T11:13:43Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}, "afterCommit": {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/85c1629220798dfee9d26538565cb6fc9890fcf8", "committedDate": "2020-09-13T14:02:07Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzIxMjQ1", "url": "https://github.com/checkstyle/checkstyle/pull/8828#pullrequestreview-487321245", "createdAt": "2020-09-13T16:27:21Z", "commit": {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODMzODM4", "url": "https://github.com/checkstyle/checkstyle/pull/8828#pullrequestreview-487833838", "createdAt": "2020-09-14T14:33:30Z", "commit": {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDozMzozMFrOHRX8YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDozNToyOVrOHRYCXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA==", "bodyText": "original_checkstyle ==> upstream-master", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487980128", "createdAt": "2020-09-14T14:33:30Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's master branch as a base branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_REPO_GIT_URL=\"https://github.com/checkstyle/checkstyle.git\"\n+         git remote add original_checkstyle $MAIN_REPO_GIT_URL\\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MTY2MA==", "bodyText": "please do git fetch original_checkstyle as separate command, not need for long lines,\nWe use model - fail fast. If something is failing to execute, all commands below unlikely to execute too.", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487981660", "createdAt": "2020-09-14T14:35:29Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's master branch as a base branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_REPO_GIT_URL=\"https://github.com/checkstyle/checkstyle.git\"\n+         git remote add original_checkstyle $MAIN_REPO_GIT_URL\\\n+           && git fetch original_checkstyle;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/85c1629220798dfee9d26538565cb6fc9890fcf8", "committedDate": "2020-09-13T14:02:07Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}, "afterCommit": {"oid": "bf1a407f69dc0a501cf64ee08fbd6fb711e55bdb", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/bf1a407f69dc0a501cf64ee08fbd6fb711e55bdb", "committedDate": "2020-09-14T17:22:34Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf1a407f69dc0a501cf64ee08fbd6fb711e55bdb", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/bf1a407f69dc0a501cf64ee08fbd6fb711e55bdb", "committedDate": "2020-09-14T17:22:34Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}, "afterCommit": {"oid": "f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "committedDate": "2020-09-17T14:16:16Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNzU4Mjc0", "url": "https://github.com/checkstyle/checkstyle/pull/8828#pullrequestreview-491758274", "createdAt": "2020-09-18T20:22:17Z", "commit": {"oid": "f045b7271ea868ba77ea96d3f3f43945cc9a5ac1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQyMDoyMjoxOFrOHUayJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQyMDoyMjoxOFrOHUayJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE3MjM4OQ==", "bodyText": "Make it\ngit remote add upstream $MAIN_REPO_GIT_URL\nAs you add whole repository, not a just one branch of it.\nSorry that I requested bad name in previous review session", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r491172389", "createdAt": "2020-09-18T20:22:18Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's master branch as a base branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_REPO_GIT_URL=\"https://github.com/checkstyle/checkstyle.git\"\n+         git remote add upstream-master $MAIN_REPO_GIT_URL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f045b7271ea868ba77ea96d3f3f43945cc9a5ac1"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "229a6634c00f5032e3f6110ef14624befb0995fa", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/229a6634c00f5032e3f6110ef14624befb0995fa", "committedDate": "2020-09-18T20:37:55Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "committedDate": "2020-09-17T14:16:16Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}, "afterCommit": {"oid": "229a6634c00f5032e3f6110ef14624befb0995fa", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/229a6634c00f5032e3f6110ef14624befb0995fa", "committedDate": "2020-09-18T20:37:55Z", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1099, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}