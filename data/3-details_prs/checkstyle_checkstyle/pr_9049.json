{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4OTU2MzMy", "number": 9049, "title": "Issue #9021: fix josm validation", "bodyText": "Issue #9021\nvalidation.sh installs SNAPSHOT version of the Checkstyle to the maven cache. But JOSM uses ANT, so it can't find the right jar file. To solve this problem, the ivysettings.xml file is patched to use the Checkstyle bundle from the target directory.\nBefore patching:\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- License: GPL. For details, see LICENSE file. -->\n<ivysettings>\n  <settings defaultResolver=\"josm-nexus\"/>\n  <resolvers>\n    <ibiblio name=\"josm-nexus\" m2compatible=\"true\" root=\"https://josm.openstreetmap.de/nexus/content/repositories/public/\"/>\n    <ibiblio name=\"jcenter\" m2compatible=\"true\" root=\"https://jcenter.bintray.com/\"/>\n  </resolvers>\n  <modules>\n    <module organisation=\"ch.poole\" name=\"OpeningHoursParser\" resolver=\"jcenter\"/>\n  </modules>\n</ivysettings>\nafter patching\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- License: GPL. For details, see LICENSE file. -->\n<ivysettings>\n  <settings defaultResolver=\"josm-nexus\"/>\n  <resolvers>\n    <ibiblio name=\"josm-nexus\" m2compatible=\"true\" root=\"https://josm.openstreetmap.de/nexus/content/repositories/public/\"/>\n    <ibiblio name=\"jcenter\" m2compatible=\"true\" root=\"https://jcenter.bintray.com/\"/>\n    <filesystem name=\"local-checkstyle\">\n      <artifact pattern=\"${base.dir}/../../target/[artifact]-[revision]-all.[ext]\"/>\n    </filesystem>\n  </resolvers>\n  <modules>\n    <module organisation=\"ch.poole\" name=\"OpeningHoursParser\" resolver=\"jcenter\"/>\n    <module organisation=\"com.puppycrawl.tools\" name=\"checkstyle\" resolver=\"local-checkstyle\"/>\n  </modules>\n</ivysettings>\nHere we add a new file system resolver, as well as telling ANT to resolve com.puppycrawl.tools/checkstyle artifact with this resolver.", "createdAt": "2020-11-28T14:39:18Z", "url": "https://github.com/checkstyle/checkstyle/pull/9049", "merged": true, "mergeCommit": {"oid": "5085ae20ea86aabd8db7540724bfa6f742704092"}, "closed": true, "closedAt": "2020-12-03T13:27:51Z", "author": {"login": "pbludov"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdg-g90ABqjQwNDgyMDE2NTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdidxqSgBqjQwNjU4OTc2Mjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfc4770f9788a46a3d0ca54d71fedf76eca905aa", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/bfc4770f9788a46a3d0ca54d71fedf76eca905aa", "committedDate": "2020-11-28T14:30:03Z", "message": "Issue #9021: fix josm validation"}, "afterCommit": {"oid": "d34d82dcce8076bb3c8268e4a1db8298feb9bf6b", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/d34d82dcce8076bb3c8268e4a1db8298feb9bf6b", "committedDate": "2020-11-28T16:12:06Z", "message": "Issue #9021: fix josm validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d34d82dcce8076bb3c8268e4a1db8298feb9bf6b", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/d34d82dcce8076bb3c8268e4a1db8298feb9bf6b", "committedDate": "2020-11-28T16:12:06Z", "message": "Issue #9021: fix josm validation"}, "afterCommit": {"oid": "e4dda249fef2a38db1e4d086abccfc336042225a", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e4dda249fef2a38db1e4d086abccfc336042225a", "committedDate": "2020-11-28T21:06:35Z", "message": "Issue #9021: fix josm validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4dda249fef2a38db1e4d086abccfc336042225a", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e4dda249fef2a38db1e4d086abccfc336042225a", "committedDate": "2020-11-28T21:06:35Z", "message": "Issue #9021: fix josm validation"}, "afterCommit": {"oid": "447e690982bd88b69074ab97a7af35a538dc3774", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/447e690982bd88b69074ab97a7af35a538dc3774", "committedDate": "2020-11-28T21:12:01Z", "message": "Issue #9021: fix josm validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "447e690982bd88b69074ab97a7af35a538dc3774", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/447e690982bd88b69074ab97a7af35a538dc3774", "committedDate": "2020-11-28T21:12:01Z", "message": "Issue #9021: fix josm validation"}, "afterCommit": {"oid": "3251e4faeaa4a05544ca461ea4679325828d1f6e", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3251e4faeaa4a05544ca461ea4679325828d1f6e", "committedDate": "2020-11-30T07:55:03Z", "message": "Issue #9021: fix josm validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3251e4faeaa4a05544ca461ea4679325828d1f6e", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3251e4faeaa4a05544ca461ea4679325828d1f6e", "committedDate": "2020-11-30T07:55:03Z", "message": "Issue #9021: fix josm validation"}, "afterCommit": {"oid": "5325e9d1159d1b3251af1326ba55bd1adf654d6e", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5325e9d1159d1b3251af1326ba55bd1adf654d6e", "committedDate": "2020-11-30T07:59:05Z", "message": "Issue #9021: fix josm validation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyOTM5MDEz", "url": "https://github.com/checkstyle/checkstyle/pull/9049#pullrequestreview-542939013", "createdAt": "2020-12-02T15:15:35Z", "commit": {"oid": "5325e9d1159d1b3251af1326ba55bd1adf654d6e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNToxNTozNVrOH9f0SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNToxNzoyNlrOH9f57w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDI0NjQ3Mg==", "bodyText": "please move ALL unrelated formatting to separate commit.\nwhat tool do you use for this ?", "url": "https://github.com/checkstyle/checkstyle/pull/9049#discussion_r534246472", "createdAt": "2020-12-02T15:15:35Z", "author": {"login": "romani"}, "path": ".ci/validation.sh", "diffHunk": "@@ -61,7 +74,7 @@ check-missing-pitests)\n \n   echo \"List of missing files in pitest profiles: $results\"\n \n-  if [[ -n $results ]] ; then\n+  if [[ -n $results ]]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5325e9d1159d1b3251af1326ba55bd1adf654d6e"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDI0NzA4Mw==", "bodyText": "I surprised that | at the end imply \\", "url": "https://github.com/checkstyle/checkstyle/pull/9049#discussion_r534247083", "createdAt": "2020-12-02T15:16:24Z", "author": {"login": "romani"}, "path": ".ci/validation.sh", "diffHunk": "@@ -28,23 +42,22 @@ check-missing-pitests)\n   fail=0\n   mkdir -p target\n \n-  list=($(cat pom.xml | \\\n+  list=($(cat pom.xml |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5325e9d1159d1b3251af1326ba55bd1adf654d6e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDI0NzkxOQ==", "bodyText": "it looks better in previous version.", "url": "https://github.com/checkstyle/checkstyle/pull/9049#discussion_r534247919", "createdAt": "2020-12-02T15:17:26Z", "author": {"login": "romani"}, "path": ".ci/validation.sh", "diffHunk": "@@ -76,17 +89,20 @@ eclipse-static-analysis)\n nondex)\n   mvn -e --fail-never clean nondex:nondex -DargLine='-Xms1024m -Xmx2048m'\n   mkdir -p .ci-temp\n-  cat `grep -RlE 'td class=.x' .nondex/ | cat` < /dev/null > .ci-temp/output.txt\n+  cat $(grep -RlE 'td class=.x' .nondex/ | cat) </dev/null >.ci-temp/output.txt\n   RESULT=$(cat .ci-temp/output.txt | wc -c)\n   cat .ci-temp/output.txt\n   echo 'Size of output:'$RESULT\n-  if [[ $RESULT != 0 ]]; then sleep 5s; false; fi\n+  if [[ $RESULT != 0 ]]; then\n+    sleep 5s\n+    false\n+  fi\n   rm .ci-temp/output.txt\n   ;;\n \n no-error-pmd)\n   CS_POM_VERSION=$(mvn -e -q -Dexec.executable='echo' -Dexec.args='${project.version}' \\\n-                     --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)\n+    --non-recursive org.codehaus.mojo:exec-maven-plugin:1.3.1:exec)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5325e9d1159d1b3251af1326ba55bd1adf654d6e"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c33b63e481acb60df331aec2cc69ba239eff3264", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c33b63e481acb60df331aec2cc69ba239eff3264", "committedDate": "2020-12-03T07:11:50Z", "message": "Issue #9021: fix josm validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5325e9d1159d1b3251af1326ba55bd1adf654d6e", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5325e9d1159d1b3251af1326ba55bd1adf654d6e", "committedDate": "2020-11-30T07:59:05Z", "message": "Issue #9021: fix josm validation"}, "afterCommit": {"oid": "c33b63e481acb60df331aec2cc69ba239eff3264", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c33b63e481acb60df331aec2cc69ba239eff3264", "committedDate": "2020-12-03T07:11:50Z", "message": "Issue #9021: fix josm validation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1269, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}