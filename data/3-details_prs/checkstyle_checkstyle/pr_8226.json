{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMzEwNjc1", "number": 8226, "title": "Issue #7892: add empty .ci-temp validation for travis", "bodyText": "Update for #7892: Add validation for empty .ci-temp folder after CI runs\nTravis cut logs if scripts finish execution abnormally:\nhttps://travis-ci.community/t/log-are-truncated-when-my-script-exits-abnormally/5878/4 Note that the OP is stating that this happens when script exits normally or with error.", "createdAt": "2020-05-05T05:14:42Z", "url": "https://github.com/checkstyle/checkstyle/pull/8226", "merged": true, "mergeCommit": {"oid": "5f9501c1af35c009affa233c57c9e96ffdef98f9"}, "closed": true, "closedAt": "2020-05-28T14:06:56Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciDmM-gFqTQxMzEyNjE2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABckwM_HgFqTQxNzcxNjAyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTI2MTYx", "url": "https://github.com/checkstyle/checkstyle/pull/8226#pullrequestreview-413126161", "createdAt": "2020-05-17T04:30:41Z", "commit": {"oid": "e0523c2d7fe42629eea87f3aa92a79dc741e0c6d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwNDozMDo0MVrOGWeKgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwNDozMDo0MVrOGWeKgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIxNjA2Nw==", "bodyText": "For some reason I feel that this should be done ones, at post script actions, the same as we do for git status", "url": "https://github.com/checkstyle/checkstyle/pull/8226#discussion_r426216067", "createdAt": "2020-05-17T04:30:41Z", "author": {"login": "romani"}, "path": ".ci/travis/travis.sh", "diffHunk": "@@ -253,6 +266,10 @@ no-error-test-sbe)\n     \"s/'com.puppycrawl.tools:checkstyle:.*'/'com.puppycrawl.tools:checkstyle:$CS_POM_VERSION'/\" \\\n     build.gradle\n   ./gradlew build --stacktrace\n+  cd ..\n+  removeFolderWithProtectedFiles simple-binary-encoding\n+  cd ..\n+  validateTempDirectoryEmpty", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0523c2d7fe42629eea87f3aa92a79dc741e0c6d"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0523c2d7fe42629eea87f3aa92a79dc741e0c6d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e0523c2d7fe42629eea87f3aa92a79dc741e0c6d", "committedDate": "2020-05-05T05:14:05Z", "message": "Issue #7892: Add validation for empty .ci-temp folder after CI runs# Please enter the commit message for your changes. Lines starting"}, "afterCommit": {"oid": "b2a197dbc7fcc002a9b574f880e07121833d97f9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b2a197dbc7fcc002a9b574f880e07121833d97f9", "committedDate": "2020-05-18T01:06:01Z", "message": "Issue #7892: Add validation for empty .ci-temp folder after CI runs# Please enter the commit message for your changes. Lines starting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDM4MjQ0", "url": "https://github.com/checkstyle/checkstyle/pull/8226#pullrequestreview-414438244", "createdAt": "2020-05-19T13:21:50Z", "commit": {"oid": "b2a197dbc7fcc002a9b574f880e07121833d97f9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMzoyMTo1MVrOGXgIhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMzoyMTo1MVrOGXgIhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5NjkwMA==", "bodyText": "fix indentation, it should be same as fail", "url": "https://github.com/checkstyle/checkstyle/pull/8226#discussion_r427296900", "createdAt": "2020-05-19T13:21:51Z", "author": {"login": "romani"}, "path": ".travis.yml", "diffHunk": "@@ -396,3 +396,15 @@ after_success:\n         echo \"deploy to maven snapshot repository is finished\";\n     fi\n     sleep 5s\n+  - |\n+    fail=0\n+      if [ -z \"$(ls -A .ci-temp)\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2a197dbc7fcc002a9b574f880e07121833d97f9"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDQwMzEx", "url": "https://github.com/checkstyle/checkstyle/pull/8226#pullrequestreview-414440311", "createdAt": "2020-05-19T13:24:01Z", "commit": {"oid": "b2a197dbc7fcc002a9b574f880e07121833d97f9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMzoyNDowMVrOGXgOzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMzoyNDowMVrOGXgOzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5ODUxMQ==", "bodyText": "please move this to separate commit, as it is not related to .ci-temp commit.", "url": "https://github.com/checkstyle/checkstyle/pull/8226#discussion_r427298511", "createdAt": "2020-05-19T13:24:01Z", "author": {"login": "romani"}, "path": ".ci/travis/travis.sh", "diffHunk": "@@ -288,8 +292,10 @@ no-exception-test-guava)\n   mvn -e clean install -Pno-validations\n   cd .ci-temp/contribution/checkstyle-tester\n   export MAVEN_OPTS=\"-Xmx2048m\"\n-  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties\n+  groovy ./launch.groovy --listOfProjects projects-to-test-on.properties \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2a197dbc7fcc002a9b574f880e07121833d97f9"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2a197dbc7fcc002a9b574f880e07121833d97f9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b2a197dbc7fcc002a9b574f880e07121833d97f9", "committedDate": "2020-05-18T01:06:01Z", "message": "Issue #7892: Add validation for empty .ci-temp folder after CI runs# Please enter the commit message for your changes. Lines starting"}, "afterCommit": {"oid": "40c6b9c4ac11565f01609e7893faec2fed56549c", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/40c6b9c4ac11565f01609e7893faec2fed56549c", "committedDate": "2020-05-19T13:40:19Z", "message": "minor: fix bad line break"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDk3MTEx", "url": "https://github.com/checkstyle/checkstyle/pull/8226#pullrequestreview-414497111", "createdAt": "2020-05-19T14:22:40Z", "commit": {"oid": "40c6b9c4ac11565f01609e7893faec2fed56549c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNDoyMjo0MFrOGXi2sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNDoyMjo0MFrOGXi2sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM0MTQ4OA==", "bodyText": "we need to sleep before exit.\nTo let output successfully flushed in log file before container closure (base on experience, command before exit usually excluded from logs). I always wanted to find time to report this to Travis or find existing issue on this, as it might have already more elegant solution. If you have time please investigate this.", "url": "https://github.com/checkstyle/checkstyle/pull/8226#discussion_r427341488", "createdAt": "2020-05-19T14:22:40Z", "author": {"login": "romani"}, "path": ".travis.yml", "diffHunk": "@@ -396,3 +396,15 @@ after_success:\n         echo \"deploy to maven snapshot repository is finished\";\n     fi\n     sleep 5s\n+  - |\n+    fail=0\n+    if [ -z \"$(ls -A .ci-temp)\" ]; then\n+        echo \"Empty .ci-temp/ validation did not find any warnings.\"\n+    else\n+        echo \"Directory .ci-temp/ is not empty. Verification failed.\"\n+        echo \"Contents of .ci-temp/:\"\n+        fail=1\n+    fi\n+    ls -A .ci-temp --color=auto\n+    exit $fail\n+    sleep 5s", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40c6b9c4ac11565f01609e7893faec2fed56549c"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40c6b9c4ac11565f01609e7893faec2fed56549c", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/40c6b9c4ac11565f01609e7893faec2fed56549c", "committedDate": "2020-05-19T13:40:19Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "05250ead75a2dc4e507f17292c294645ecfd0084", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05250ead75a2dc4e507f17292c294645ecfd0084", "committedDate": "2020-05-19T14:52:35Z", "message": "minor: fix bad line break"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05250ead75a2dc4e507f17292c294645ecfd0084", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05250ead75a2dc4e507f17292c294645ecfd0084", "committedDate": "2020-05-19T14:52:35Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "7fc5fc42499b8a6872ceed78e21e8615f7ed6b61", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7fc5fc42499b8a6872ceed78e21e8615f7ed6b61", "committedDate": "2020-05-19T15:09:51Z", "message": "minor: fix bad line break"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fc5fc42499b8a6872ceed78e21e8615f7ed6b61", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7fc5fc42499b8a6872ceed78e21e8615f7ed6b61", "committedDate": "2020-05-19T15:09:51Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "71b6dd3d8ed1ecfa51ecdfc1334b6c4f7dd9fa6b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/71b6dd3d8ed1ecfa51ecdfc1334b6c4f7dd9fa6b", "committedDate": "2020-05-19T17:32:16Z", "message": "minor: fix bad line break"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71b6dd3d8ed1ecfa51ecdfc1334b6c4f7dd9fa6b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/71b6dd3d8ed1ecfa51ecdfc1334b6c4f7dd9fa6b", "committedDate": "2020-05-19T17:32:16Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "4e212543eb03f7404a27eab33696b6bb684a2d4e", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/4e212543eb03f7404a27eab33696b6bb684a2d4e", "committedDate": "2020-05-19T18:06:27Z", "message": "minor: fix bad line break"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e212543eb03f7404a27eab33696b6bb684a2d4e", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/4e212543eb03f7404a27eab33696b6bb684a2d4e", "committedDate": "2020-05-19T18:06:27Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "aebd8e880ab80806a73e25b19732af65db24c1a5", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/aebd8e880ab80806a73e25b19732af65db24c1a5", "committedDate": "2020-05-24T15:34:53Z", "message": "minor: fix bad line break"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aebd8e880ab80806a73e25b19732af65db24c1a5", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/aebd8e880ab80806a73e25b19732af65db24c1a5", "committedDate": "2020-05-24T15:34:53Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "0f06ef16b86583aec3d1294b68d1860c04b1257f", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0f06ef16b86583aec3d1294b68d1860c04b1257f", "committedDate": "2020-05-24T22:52:43Z", "message": "minor: fix bad line break"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e54ef7cf91b1a3e4e02b7eeb382a629fcd8e255d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e54ef7cf91b1a3e4e02b7eeb382a629fcd8e255d", "committedDate": "2020-05-25T00:33:32Z", "message": "Issue #7892: Add validation for empty .ci-temp folder after CI runs# Please enter the commit message for your changes. Lines starting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5783c1a5d3b7c7a7b4a35d496a56162fce4dc63a", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5783c1a5d3b7c7a7b4a35d496a56162fce4dc63a", "committedDate": "2020-05-25T00:33:32Z", "message": "minor: fix bad line break"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f06ef16b86583aec3d1294b68d1860c04b1257f", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0f06ef16b86583aec3d1294b68d1860c04b1257f", "committedDate": "2020-05-24T22:52:43Z", "message": "minor: fix bad line break"}, "afterCommit": {"oid": "5783c1a5d3b7c7a7b4a35d496a56162fce4dc63a", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5783c1a5d3b7c7a7b4a35d496a56162fce4dc63a", "committedDate": "2020-05-25T00:33:32Z", "message": "minor: fix bad line break"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NzE2MDIy", "url": "https://github.com/checkstyle/checkstyle/pull/8226#pullrequestreview-417716022", "createdAt": "2020-05-25T13:36:59Z", "commit": {"oid": "5783c1a5d3b7c7a7b4a35d496a56162fce4dc63a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 596, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}