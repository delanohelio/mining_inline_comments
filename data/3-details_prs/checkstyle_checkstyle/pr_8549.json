{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NzY2NDE1", "number": 8549, "title": "Issue #8539: change diff trigger", "bodyText": "Closes #8539\nExample of usages (fake config and 1 project is used, only for demo)\n\nNew module report strkkk#5\nDiff report strkkk#4\nDiff report with different patch config strkkk#6\n\nPR for doc update\ncheckstyle/contribution#497", "createdAt": "2020-07-23T14:49:29Z", "url": "https://github.com/checkstyle/checkstyle/pull/8549", "merged": true, "mergeCommit": {"oid": "ec3259fc4265ab0b38387ec75c80d4c02e75726f"}, "closed": true, "closedAt": "2020-07-25T13:34:07Z", "author": {"login": "strkkk"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3wy7LgFqTQ1NDIyNDMzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4CZxWABqjM1ODM1OTMzNzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MjI0MzMx", "url": "https://github.com/checkstyle/checkstyle/pull/8549#pullrequestreview-454224331", "createdAt": "2020-07-23T14:59:59Z", "commit": {"oid": "40f52093fba8e1702cf9c1e86c40e0c7e0598550"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNDo1OTo1OVrOG2OoRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNTowMjoyMlrOG2OvDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNTk3NA==", "bodyText": "it would be awesome is you move renaming/refacotring to separate commit.", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459515974", "createdAt": "2020-07-23T14:59:59Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -45,14 +45,20 @@ jobs:\n        id: parse\n        run: |\n         grep \"^Diff Regression projects:\" text > temp || echo \"\" > temp\n-        sed 's/Diff Regression projects: //' temp > project\n-        echo ::set-output name=project_link::$(cat project)\n+        sed 's/Diff Regression projects: //' temp > projects_link\n+        echo ::set-output name=projects_link::$(cat projects_link)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40f52093fba8e1702cf9c1e86c40e0c7e0598550"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNjU1OQ==", "bodyText": "grep \"^New module config:\" text | cat > temp might be better form", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459516559", "createdAt": "2020-07-23T15:00:47Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -45,14 +45,20 @@ jobs:\n        id: parse\n        run: |\n         grep \"^Diff Regression projects:\" text > temp || echo \"\" > temp\n-        sed 's/Diff Regression projects: //' temp > project\n-        echo ::set-output name=project_link::$(cat project)\n+        sed 's/Diff Regression projects: //' temp > projects_link\n+        echo ::set-output name=projects_link::$(cat projects_link)\n+\n         grep \"^Diff Regression config:\" text > temp || echo \"\" > temp\n-        sed 's/Diff Regression config: //' temp > config\n-        echo ::set-output name=config_link::$(cat config)\n+        sed 's/Diff Regression config: //' temp > config_link\n+        echo ::set-output name=config_link::$(cat config_link)\n+\n+        grep \"^New module config:\" text > temp || echo \"\" > temp", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40f52093fba8e1702cf9c1e86c40e0c7e0598550"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNjkzOQ==", "bodyText": "please move && and || to the begining", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459516939", "createdAt": "2020-07-23T15:01:18Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -64,17 +70,27 @@ jobs:\n   make_report:\n     runs-on: ubuntu-latest\n     needs: parse_body\n-    if: needs.parse_body.outputs.project_link != '' && needs.parse_body.outputs.config_link != ''\n+    if: needs.parse_body.outputs.projects_link != '' &&\n+        (needs.parse_body.outputs.config_link != '' ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40f52093fba8e1702cf9c1e86c40e0c7e0598550"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNzcwOA==", "bodyText": "+2 spaces for indentation. The same for other linewraps.", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459517708", "createdAt": "2020-07-23T15:02:22Z", "author": {"login": "romani"}, "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -114,29 +127,22 @@ jobs:\n         aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n         aws-region: ${{ env.AWS_REGION }}    \n          \n-     - name: Generate basic difference report\n-       if: github.event.comment.body == 'diff report'\n+     - name: Generate report\n        run: |\n          cd contribution/checkstyle-tester\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n-         if [ -f patch_config.xml ]; then\n-          groovy diff.groovy -r $REPO -b master -p $REF -bc config.xml -pc patch_config.xml\\\n+         if [ -f new_module_config.xml ]; then\n+          groovy diff.groovy -r $REPO -p $REF -pc new_module_config.xml -m single\\\n+          -l project.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40f52093fba8e1702cf9c1e86c40e0c7e0598550"}, "originalPosition": 107}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3752a62c9ad260e640d064922d5e66218ebcabe", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b3752a62c9ad260e640d064922d5e66218ebcabe", "committedDate": "2020-07-24T11:25:06Z", "message": "Issue #8539: change diff trigger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d3c9b2de300067013c64c026a02f6d9ad2d264f", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7d3c9b2de300067013c64c026a02f6d9ad2d264f", "committedDate": "2020-07-24T11:29:41Z", "message": "minor: indentation and renaming in diff_report.yml"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40f52093fba8e1702cf9c1e86c40e0c7e0598550", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/40f52093fba8e1702cf9c1e86c40e0c7e0598550", "committedDate": "2020-07-23T14:45:42Z", "message": "Issue #8539: change diff trigger"}, "afterCommit": {"oid": "7d3c9b2de300067013c64c026a02f6d9ad2d264f", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7d3c9b2de300067013c64c026a02f6d9ad2d264f", "committedDate": "2020-07-24T11:29:41Z", "message": "minor: indentation and renaming in diff_report.yml"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1130, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}