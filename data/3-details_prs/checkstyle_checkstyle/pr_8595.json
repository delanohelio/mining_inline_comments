{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMTU0NTI4", "number": 8595, "title": "Issue #8748: Create new check RecordComponentNumberCheck", "bodyText": "Issue #8748 : Create new check RecordComponentNumberCheck\nDiff Regression projects: https://gist.githubusercontent.com/nmancus1/e3988f8092d919b5cbe70f5359c4d9e8/raw/a0f6f5860f8025c19868061dee6e0e40960b992f/projects-to-test-on.properties\nDiff Regression config: https://gist.githubusercontent.com/nmancus1/497dbdc31fe7a09cd960fc255972fb65/raw/c68be9ca06b61e1f279705c8b915386e701803c0/RecordComponentNumberCheckBase.xml\nDiff Regression patch config: https://gist.githubusercontent.com/nmancus1/e40c93aa8c632af54f63a8c3347821da/raw/2734393e077ea5f2deb69f3570e0200452ab31fe/RecordComponentNumberCheckPatch.xml\nContribution PR: checkstyle/contribution#500\nLink to site: https://nmancus1.github.io/site_recordcomponentnumber/\nFirst check regression report, before modifying ScopeUtil.java: https://checkstyle-diff-reports.s3.us-east-2.amazonaws.com/full-records-RecordComponentNumberCheck_2020133606/reports/diff/index.html\nSecond check regression report, after merging #8598: https://checkstyle-diff-reports.s3.us-east-2.amazonaws.com/full-records-RecordComponentNumberCheck_2020114210/reports/diff/index.html", "createdAt": "2020-08-03T12:40:52Z", "url": "https://github.com/checkstyle/checkstyle/pull/8595", "merged": true, "mergeCommit": {"oid": "cfb80c20692f3571e3f14d018d2018a1c6fdfbf1"}, "closed": true, "closedAt": "2020-08-26T05:48:40Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7RlwBABqjM2MTU3OTk5MjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdClPRRgFqTQ3NTE2NzUzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b867ce1f923ad7ca4facecd0ac62bdff99c3558", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3b867ce1f923ad7ca4facecd0ac62bdff99c3558", "committedDate": "2020-08-03T12:30:53Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "ebb61996ce6276e304d01b1cfc9ee0e652a861b1", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ebb61996ce6276e304d01b1cfc9ee0e652a861b1", "committedDate": "2020-08-03T12:57:03Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebb61996ce6276e304d01b1cfc9ee0e652a861b1", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ebb61996ce6276e304d01b1cfc9ee0e652a861b1", "committedDate": "2020-08-03T12:57:03Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "75507e697143cb274bf11df71de6657b40bab073", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/75507e697143cb274bf11df71de6657b40bab073", "committedDate": "2020-08-03T16:26:59Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75507e697143cb274bf11df71de6657b40bab073", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/75507e697143cb274bf11df71de6657b40bab073", "committedDate": "2020-08-03T16:26:59Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "f887b4c37f895a0c1513ede49e92df0d6859ab2c", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f887b4c37f895a0c1513ede49e92df0d6859ab2c", "committedDate": "2020-08-07T13:28:17Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f887b4c37f895a0c1513ede49e92df0d6859ab2c", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f887b4c37f895a0c1513ede49e92df0d6859ab2c", "committedDate": "2020-08-07T13:28:17Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/30418fdfc7295981ad166a7282ecfc5c1969eee4", "committedDate": "2020-08-07T15:21:01Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODE2NzQx", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-463816741", "createdAt": "2020-08-08T17:33:48Z", "commit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNzozMzo0OFrOG91IYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNzo0NzowNVrOG91Mpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NjgxNw==", "bodyText": "This can be done using TokenUtils::forEachChild", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467486817", "createdAt": "2020-08-08T17:33:48Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 253}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzE3Mw==", "bodyText": "Extra space after <td>", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487173", "createdAt": "2020-08-08T17:38:42Z", "author": {"login": "pbludov"}, "path": "src/xdocs/checks.xml", "diffHunk": "@@ -729,6 +729,10 @@\n               Checks that pattern variable names conform to a specified pattern.\n             </td>\n           </tr>\n+          <tr>\n+            <td><a href=\"config_sizes.html#RecordComponentNumber\">RecordComponentNumber</a></td>\n+            <td> Checks the number of record components in the header of a record definition.</td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzc1NA==", "bodyText": "Now the indent is a single space. Please revert or reformat this expression completely, may be\nfor (DetailAST token = aMods.getFirstChild();\n        token != null && returnValue == Scope.PACKAGE;\n        token = token.getNextSibling()) {\n    if (\"public\".equals(token.getText())) {\n?", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487754", "createdAt": "2020-08-08T17:45:15Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/ScopeUtil.java", "diffHunk": "@@ -44,7 +44,7 @@ public static Scope getScopeFromMods(DetailAST aMods) {\n         Scope returnValue = Scope.PACKAGE;\n         for (DetailAST token = aMods.getFirstChild(); token != null\n                 && returnValue == Scope.PACKAGE;\n-                token = token.getNextSibling()) {\n+             token = token.getNextSibling()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzg0MQ==", "bodyText": "Extra blank line in the end of the comment", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487841", "createdAt": "2020-08-08T17:46:30Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =\n+                recordComponents.findFirstToken(TokenTypes.RECORD_COMPONENT_DEF);\n+\n+        while (componentToCount != null) {\n+\n+            if (componentToCount.getType() == TokenTypes.RECORD_COMPONENT_DEF) {\n+                counter.increment();\n+            }\n+            componentToCount = componentToCount.getNextSibling();\n+\n+        }\n+\n+    }\n+\n+    /**\n+     * Check the counter and report violations.\n+     *\n+     * @param counter the component counter to check\n+     * @param ast to report violations against.\n+     */\n+    private void checkCounter(ComponentCounter counter, DetailAST ast) {\n+        final Scope scope = counter.getScope();\n+        if (scope == Scope.PRIVATE) {\n+            checkMax(maxPrivate, counter.getTotal(),\n+                    MSG_PRIVATE_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PUBLIC) {\n+            checkMax(maxPublic, counter.getTotal(),\n+                    MSG_PUBLIC_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PROTECTED) {\n+            checkMax(maxProtected, counter.getTotal(),\n+                    MSG_PROTECTED_COMPONENTS, ast);\n+        }\n+        else {\n+            checkMax(maxPackage, counter.getTotal(),\n+                    MSG_PACKAGE_COMPONENTS, ast);\n+        }\n+    }\n+\n+    /**\n+     * Method for reporting if a maximum has been exceeded.\n+     *\n+     * @param max the maximum allowed value\n+     * @param value the actual value\n+     * @param msg the message to log. Takes two arguments of value and maximum.\n+     * @param ast the AST to associate with the message.\n+     */\n+    private void checkMax(int max, int value, String msg, DetailAST ast) {\n+        if (max < value) {\n+            log(ast, msg, value, max);\n+        }\n+    }\n+\n+    /**\n+     * Counter class used to track the scope of the record definition and the number of\n+     * components in the record component list.\n+     *\n+     */\n+    private static class ComponentCounter {\n+\n+        /** The scope of the record definition. */\n+        private Scope scope;\n+\n+        /** Tracks the total. */\n+        private int total;\n+\n+        /**\n+         * Increments to counter by one.\n+         *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 322}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4Nzg4OQ==", "bodyText": "Extra blank line in the end of the comment", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487889", "createdAt": "2020-08-08T17:46:52Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =\n+                recordComponents.findFirstToken(TokenTypes.RECORD_COMPONENT_DEF);\n+\n+        while (componentToCount != null) {\n+\n+            if (componentToCount.getType() == TokenTypes.RECORD_COMPONENT_DEF) {\n+                counter.increment();\n+            }\n+            componentToCount = componentToCount.getNextSibling();\n+\n+        }\n+\n+    }\n+\n+    /**\n+     * Check the counter and report violations.\n+     *\n+     * @param counter the component counter to check\n+     * @param ast to report violations against.\n+     */\n+    private void checkCounter(ComponentCounter counter, DetailAST ast) {\n+        final Scope scope = counter.getScope();\n+        if (scope == Scope.PRIVATE) {\n+            checkMax(maxPrivate, counter.getTotal(),\n+                    MSG_PRIVATE_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PUBLIC) {\n+            checkMax(maxPublic, counter.getTotal(),\n+                    MSG_PUBLIC_COMPONENTS, ast);\n+        }\n+        else if (scope == Scope.PROTECTED) {\n+            checkMax(maxProtected, counter.getTotal(),\n+                    MSG_PROTECTED_COMPONENTS, ast);\n+        }\n+        else {\n+            checkMax(maxPackage, counter.getTotal(),\n+                    MSG_PACKAGE_COMPONENTS, ast);\n+        }\n+    }\n+\n+    /**\n+     * Method for reporting if a maximum has been exceeded.\n+     *\n+     * @param max the maximum allowed value\n+     * @param value the actual value\n+     * @param msg the message to log. Takes two arguments of value and maximum.\n+     * @param ast the AST to associate with the message.\n+     */\n+    private void checkMax(int max, int value, String msg, DetailAST ast) {\n+        if (max < value) {\n+            log(ast, msg, value, max);\n+        }\n+    }\n+\n+    /**\n+     * Counter class used to track the scope of the record definition and the number of\n+     * components in the record component list.\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 310}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NzkxMA==", "bodyText": "Extra blank line in the end of the comment", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r467487910", "createdAt": "2020-08-08T17:47:05Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 243}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/30418fdfc7295981ad166a7282ecfc5c1969eee4", "committedDate": "2020-08-07T15:21:01Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9", "committedDate": "2020-08-11T17:37:33Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NjI1OTEx", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-465625911", "createdAt": "2020-08-12T06:34:09Z", "commit": {"oid": "cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozNDowOVrOG_TnCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozNDowOVrOG_TnCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNDc2MQ==", "bodyText": "TokenUtil.forEachChild(recordComponents,\n                TokenTypes.RECORD_COMPONENT_DEF, node -> counter.increment());\nWhat your code actually does:\n\nFor each child from the first child find one with type==TokenTypes.RECORD_COMPONENT_DEF.\nDouble check the type. Then increment the counter.\nloop over the rest of children\nIt can be simplified to\n\n        DetailAST componentToCount = recordComponents.getFirstChild();\n        while (componentToCount != null) {\n            if (componentToCount.getType() == TokenTypes.RECORD_COMPONENT_DEF) {\n                counter.increment();\n            }\n            componentToCount = componentToCount.getNextSibling();\n        }\n... and this is exactly what TokenUtils::forEachChild does:\n\nloop for each child\ncompare type\nif match, invoke callback", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r469034761", "createdAt": "2020-08-12T06:34:09Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,356 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPackage} - Specify the maximum number of {@code package} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxProtected} - Specify the maximum number of {@code protected} components\n+ * allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code maxPublic} - Specify the maximum number of {@code public} components allowed.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all scope levels for a record definition:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxPackage\" value=\"5\"/&gt;\n+ *   &lt;property name=\"maxProtected\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxPrivate\" value=\"3\"/&gt;\n+ *   &lt;property name=\"maxPublic\" value=\"10\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.packageComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.privateComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.protectedComponents}\n+ * </li>\n+ * <li>\n+ * {@code too.many.publicComponents}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PRIVATE_COMPONENTS = \"too.many.privateComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PACKAGE_COMPONENTS = \"too.many.packageComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PROTECTED_COMPONENTS = \"too.many.protectedComponents\";\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_PUBLIC_COMPONENTS = \"too.many.publicComponents\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of {@code private} components allowed. */\n+    private int maxPrivate = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code package} components allowed. */\n+    private int maxPackage = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code protected} components allowed. */\n+    private int maxProtected = DEFAULT_MAX_COMPONENTS;\n+    /** Specify the maximum number of {@code public} components allowed. */\n+    private int maxPublic = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Setter to specify the maximum number of {@code private} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPrivate(int value) {\n+        maxPrivate = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code package} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPackage(int value) {\n+        maxPackage = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code protected} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxProtected(int value) {\n+        maxProtected = value;\n+    }\n+\n+    /**\n+     * Setter to specify the maximum number of {@code public} components allowed.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxPublic(int value) {\n+        maxPublic = value;\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     *\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+        final DetailAST modifiers =\n+                ast.findFirstToken(TokenTypes.MODIFIERS);\n+\n+        counter.setScope(ScopeUtil.getScopeFromMods(modifiers));\n+\n+        DetailAST componentToCount =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4NjgxNw=="}, "originalCommit": {"oid": "30418fdfc7295981ad166a7282ecfc5c1969eee4"}, "originalPosition": 253}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/cea445cd512b85d7dba44e7dfadbaeb0e1f5ddb9", "committedDate": "2020-08-11T17:37:33Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "275d0e1ab44387ee6adf312d3d661b308472005d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/275d0e1ab44387ee6adf312d3d661b308472005d", "committedDate": "2020-08-12T11:48:33Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "275d0e1ab44387ee6adf312d3d661b308472005d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/275d0e1ab44387ee6adf312d3d661b308472005d", "committedDate": "2020-08-12T11:48:33Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "049d3a74687da4cae8fb0b78468692fb660480e7", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/049d3a74687da4cae8fb0b78468692fb660480e7", "committedDate": "2020-08-12T11:56:53Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1ODg0ODYz", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-465884863", "createdAt": "2020-08-12T12:52:20Z", "commit": {"oid": "049d3a74687da4cae8fb0b78468692fb660480e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "049d3a74687da4cae8fb0b78468692fb660480e7", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/049d3a74687da4cae8fb0b78468692fb660480e7", "committedDate": "2020-08-12T11:56:53Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "27230bbf7fe9219c941c082b6dacd08c2a2d1f3c", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/27230bbf7fe9219c941c082b6dacd08c2a2d1f3c", "committedDate": "2020-08-12T19:37:33Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3Mjg5MDYw", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-467289060", "createdAt": "2020-08-14T03:46:41Z", "commit": {"oid": "27230bbf7fe9219c941c082b6dacd08c2a2d1f3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27230bbf7fe9219c941c082b6dacd08c2a2d1f3c", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/27230bbf7fe9219c941c082b6dacd08c2a2d1f3c", "committedDate": "2020-08-12T19:37:33Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "4e49ca3e9b23884f19c95994a04142d4040c6f28", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/4e49ca3e9b23884f19c95994a04142d4040c6f28", "committedDate": "2020-08-14T22:16:30Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNTc4NjQz", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-472578643", "createdAt": "2020-08-21T15:17:05Z", "commit": {"oid": "4e49ca3e9b23884f19c95994a04142d4040c6f28"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNToxNzowNVrOHExRGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNToxNzowNVrOHExRGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDc2MzU0Ng==", "bodyText": "it confuse me. I read it as max value of private components in record.\ndid you mean ?\n Property {@code maxInPrivateRecord} - Specify the maximum number of components allowed in {@code private} records.", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r474763546", "createdAt": "2020-08-21T15:17:05Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,345 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.Scope;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.utils.ScopeUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxPrivate} - Specify the maximum number of {@code private} components allowed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e49ca3e9b23884f19c95994a04142d4040c6f28"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e49ca3e9b23884f19c95994a04142d4040c6f28", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/4e49ca3e9b23884f19c95994a04142d4040c6f28", "committedDate": "2020-08-14T22:16:30Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "082fa3c5dd2ebf5bb772ec38daa878675ae5b804", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/082fa3c5dd2ebf5bb772ec38daa878675ae5b804", "committedDate": "2020-08-21T17:12:46Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "082fa3c5dd2ebf5bb772ec38daa878675ae5b804", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/082fa3c5dd2ebf5bb772ec38daa878675ae5b804", "committedDate": "2020-08-21T17:12:46Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "a81f196e0fc1affd5da98d74ec5e4a5f89d1391d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a81f196e0fc1affd5da98d74ec5e4a5f89d1391d", "committedDate": "2020-08-24T14:54:27Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a81f196e0fc1affd5da98d74ec5e4a5f89d1391d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a81f196e0fc1affd5da98d74ec5e4a5f89d1391d", "committedDate": "2020-08-24T14:54:27Z", "message": "Issue #8521: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "9c24ade027030ea81d947fd5edbd9cdecd6b49b1", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/9c24ade027030ea81d947fd5edbd9cdecd6b49b1", "committedDate": "2020-08-24T15:14:06Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c24ade027030ea81d947fd5edbd9cdecd6b49b1", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/9c24ade027030ea81d947fd5edbd9cdecd6b49b1", "committedDate": "2020-08-24T15:14:06Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "3ed6a15e8e2b8d2ad0b22286d12df4608872602f", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3ed6a15e8e2b8d2ad0b22286d12df4608872602f", "committedDate": "2020-08-24T15:55:58Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ed6a15e8e2b8d2ad0b22286d12df4608872602f", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3ed6a15e8e2b8d2ad0b22286d12df4608872602f", "committedDate": "2020-08-24T15:55:58Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/33f125bf6434ee48d083d995f2f800da619a55a3", "committedDate": "2020-08-25T00:59:29Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTExMzk1", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474111395", "createdAt": "2020-08-25T03:35:08Z", "commit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMzozNTowOFrOHGECqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMzo0MDoyMVrOHGEQsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExOTcyMg==", "bodyText": "maxComponents", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476119722", "createdAt": "2020-08-25T03:35:08Z", "author": {"login": "romani"}, "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/recordcomponentnumber/SuppressionXpathRecordComponentNumber2.java", "diffHunk": "@@ -0,0 +1,13 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+/* Config:\n+ * maxPublic = 10", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMTE0MA==", "bodyText": "Other properties like this just named max", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476121140", "createdAt": "2020-08-25T03:37:22Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,298 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxComponents} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int maxComponents = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxComponents(int value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3"}, "originalPosition": 149}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMjU3MA==", "bodyText": "Please move this to visitToken method, we should see logic in that method", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476122570", "createdAt": "2020-08-25T03:39:20Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,298 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxComponents} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int maxComponents = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxComponents(int value) {\n+        maxComponents = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);\n+\n+        // Check counter and report violations\n+        checkCounter(counter, ast);\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param counter the ComponentCounter instance for this check\n+     * @param ast the ast to check\n+     */\n+    private static void countComponents(ComponentCounter counter, DetailAST ast) {\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+\n+        counter.setAccessModifierOption(getAccessModifier(ast));\n+\n+        TokenUtil.forEachChild(recordComponents,\n+                TokenTypes.RECORD_COMPONENT_DEF, node -> counter.increment());\n+\n+    }\n+\n+    /**\n+     * Check the counter and report violations.\n+     *\n+     * @param counter the component counter to check\n+     * @param ast to report violations against.\n+     */\n+    private void checkCounter(ComponentCounter counter, DetailAST ast) {\n+        if (matchAccessModifiers(counter.getAccessModifierOption())\n+                && counter.getTotal() > maxComponents) {\n+            log(ast, MSG_KEY, counter.getTotal(), maxComponents);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3"}, "originalPosition": 222}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjEyMzMxNQ==", "bodyText": "Return a value from this method", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476123315", "createdAt": "2020-08-25T03:40:21Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,298 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code maxComponents} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"maxComponents\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int maxComponents = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMaxComponents(int value) {\n+        maxComponents = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Instantiate new component counter\n+        final ComponentCounter counter = new ComponentCounter();\n+\n+        // Count record components in this record definition\n+        countComponents(counter, ast);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3"}, "originalPosition": 189}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/33f125bf6434ee48d083d995f2f800da619a55a3", "committedDate": "2020-08-25T00:59:29Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "019eb82b788086963d9ea34017e58db8feb72766", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/019eb82b788086963d9ea34017e58db8feb72766", "committedDate": "2020-08-25T04:28:37Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTM2MzM2", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474136336", "createdAt": "2020-08-25T05:02:49Z", "commit": {"oid": "019eb82b788086963d9ea34017e58db8feb72766"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNTowMjo0OVrOHGHqZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNTowNTo0NlrOHGHtgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTA0Nw==", "bodyText": "?", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179047", "createdAt": "2020-08-25T05:02:49Z", "author": {"login": "romani"}, "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/recordcomponentnumber/SuppressionXpathRecordComponentNumber1.java", "diffHunk": "@@ -0,0 +1,18 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+/* Config:\n+ * maxPublic = 8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "019eb82b788086963d9ea34017e58db8feb72766"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTIyNw==", "bodyText": "Not done", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179227", "createdAt": "2020-08-25T05:03:34Z", "author": {"login": "romani"}, "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/recordcomponentnumber/SuppressionXpathRecordComponentNumber2.java", "diffHunk": "@@ -0,0 +1,13 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+/* Config:\n+ * maxPublic = 10", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjExOTcyMg=="}, "originalCommit": {"oid": "33f125bf6434ee48d083d995f2f800da619a55a3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTUzNg==", "bodyText": "Do not even count if modifier is not matching", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179536", "createdAt": "2020-08-25T05:04:45Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,288 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Count record components in this record definition\n+        final ComponentCounter counter = countComponents(ast);\n+\n+        // Check counter and report violations\n+        if (matchAccessModifiers(counter.getAccessModifierOption())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "019eb82b788086963d9ea34017e58db8feb72766"}, "originalPosition": 189}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3OTg0Mw==", "bodyText": "Please remove this class, to just count you need single variable.", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476179843", "createdAt": "2020-08-25T05:05:46Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,288 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Count record components in this record definition\n+        final ComponentCounter counter = countComponents(ast);\n+\n+        // Check counter and report violations\n+        if (matchAccessModifiers(counter.getAccessModifierOption())\n+            && counter.getTotal() > max) {\n+            log(ast, MSG_KEY, counter.getTotal(), max);\n+        }\n+    }\n+\n+    /**\n+     * Determine the visibility modifier, then iterate through the record component list\n+     * and increment the counter.\n+     *\n+     * @param ast the ast to check\n+     * @return instance of component counter with count of components and\n+     *     access modifier of record definition.\n+     */\n+    private static ComponentCounter countComponents(DetailAST ast) {\n+        final ComponentCounter counter = new ComponentCounter();\n+        final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+\n+        counter.setAccessModifierOption(getAccessModifier(ast));\n+\n+        TokenUtil.forEachChild(recordComponents,\n+                TokenTypes.RECORD_COMPONENT_DEF, node -> counter.increment());\n+\n+        return counter;\n+    }\n+\n+    /**\n+     * Returns the access modifier of the record definition at the specified AST. If\n+     * the record definition is in an interface or annotation block,\n+     * the access modifier is assumed to be public.\n+     *\n+     * @param ast the token of the method/constructor.\n+     * @return the access modifier of the method/constructor.\n+     */\n+    private static AccessModifierOption getAccessModifier(final DetailAST ast) {\n+        final DetailAST modsToken = ast.findFirstToken(TokenTypes.MODIFIERS);\n+        return CheckUtil.getAccessModifierFromModifiersToken(modsToken);\n+    }\n+\n+    /**\n+     * Checks whether a record definition has the correct access modifier to be checked.\n+     *\n+     * @param accessModifier the access modifier of the record definition.\n+     * @return whether the record definition matches the expected access modifier.\n+     */\n+    private boolean matchAccessModifiers(final AccessModifierOption accessModifier) {\n+        return Arrays.stream(accessModifiers)\n+                .anyMatch(modifier -> modifier == accessModifier);\n+    }\n+\n+    /**\n+     * Counter class used to track the access modifier of the record definition and the number of\n+     * components in the record component list.\n+     */\n+    private static class ComponentCounter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "019eb82b788086963d9ea34017e58db8feb72766"}, "originalPosition": 244}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "019eb82b788086963d9ea34017e58db8feb72766", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/019eb82b788086963d9ea34017e58db8feb72766", "committedDate": "2020-08-25T04:28:37Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/19cac768b89ed40f44678281a48deb477bba6b39", "committedDate": "2020-08-25T13:05:11Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTA4OTM5", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474508939", "createdAt": "2020-08-25T13:58:44Z", "commit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMzo1ODo0NFrOHGZbfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDowNToxMFrOHGZueA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MDE0MA==", "bodyText": "headers why in plural ?\nplease do singular.", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476470140", "createdAt": "2020-08-25T13:58:44Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MTc1Nw==", "bodyText": "it would be awesome to find some link in jdk that explain what is \"header\"", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476471757", "createdAt": "2020-08-25T14:00:48Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MjIyMg==", "bodyText": "please add example of code for default config to should behavior on default config", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476472222", "createdAt": "2020-08-25T14:01:32Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3Mjc0Mw==", "bodyText": "reuse getAcceptableTokens()", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476472743", "createdAt": "2020-08-25T14:02:16Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 180}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzUxNw==", "bodyText": "remove comment, code is self descriptive", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476473517", "createdAt": "2020-08-25T14:03:16Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Check access modifier of record definition\n+        final DetailAST modifiers =\n+            ast.findFirstToken(TokenTypes.MODIFIERS);\n+        final AccessModifierOption accessModifier =\n+            CheckUtil.getAccessModifierFromModifiersToken(modifiers);\n+\n+        // If access modifier of record definition matches access modifier options,\n+        // count components", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 193}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3MzU5OQ==", "bodyText": "removoe comment", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476473599", "createdAt": "2020-08-25T14:03:23Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Check access modifier of record definition\n+        final DetailAST modifiers =\n+            ast.findFirstToken(TokenTypes.MODIFIERS);\n+        final AccessModifierOption accessModifier =\n+            CheckUtil.getAccessModifierFromModifiersToken(modifiers);\n+\n+        // If access modifier of record definition matches access modifier options,\n+        // count components\n+        if (matchAccessModifiers(accessModifier)) {\n+            final DetailAST recordComponents =\n+                ast.findFirstToken(TokenTypes.RECORD_COMPONENTS);\n+            final int componentCount = countComponents(recordComponents);\n+\n+            // Check counter and report violations", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 199}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3Mzc5Nw==", "bodyText": "remvoe coment", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476473797", "createdAt": "2020-08-25T14:03:38Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,230 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the header of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed\n+ * in record definition headers.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck\n+public class RecordComponentNumberCheck extends AbstractCheck {\n+\n+    /**\n+     * A key is pointing to the warning message text in \"messages.properties\"\n+     * file.\n+     */\n+    public static final String MSG_KEY = \"too.many.components\";\n+\n+    /** Default maximum number of allowed components. */\n+    private static final int DEFAULT_MAX_COMPONENTS = 8;\n+\n+    /** Specify the maximum number of components allowed in record definition headers. */\n+    private int max = DEFAULT_MAX_COMPONENTS;\n+\n+    /**\n+     * Access modifiers of record definitions where the number\n+     * of record components should be checked.\n+     */\n+    private AccessModifierOption[] accessModifiers = {\n+        AccessModifierOption.PUBLIC,\n+        AccessModifierOption.PROTECTED,\n+        AccessModifierOption.PACKAGE,\n+        AccessModifierOption.PRIVATE,\n+    };\n+\n+    /**\n+     * Setter to specify the maximum number of components allowed in record definition headers.\n+     *\n+     * @param value the maximum allowed.\n+     */\n+    public void setMax(int value) {\n+        max = value;\n+    }\n+\n+    /**\n+     * Setter to access modifiers of record definitions where the number of record\n+     * components should be checked.\n+     *\n+     * @param accessModifiers access modifiers of record definitions which should be checked.\n+     */\n+    public void setAccessModifiers(AccessModifierOption... accessModifiers) {\n+        this.accessModifiers =\n+                Arrays.copyOf(accessModifiers, accessModifiers.length);\n+    }\n+\n+    @Override\n+    public int[] getDefaultTokens() {\n+        return getAcceptableTokens();\n+    }\n+\n+    @Override\n+    public int[] getAcceptableTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public int[] getRequiredTokens() {\n+        return new int[] {\n+            TokenTypes.RECORD_DEF,\n+        };\n+    }\n+\n+    @Override\n+    public void visitToken(DetailAST ast) {\n+        // Check access modifier of record definition", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 186}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3NDQxMw==", "bodyText": "if this is formattign refactoring , please move to  separate commit.", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476474413", "createdAt": "2020-08-25T14:04:26Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/ScopeUtil.java", "diffHunk": "@@ -42,9 +42,9 @@ private ScopeUtil() {\n     public static Scope getScopeFromMods(DetailAST aMods) {\n         // default scope\n         Scope returnValue = Scope.PACKAGE;\n-        for (DetailAST token = aMods.getFirstChild(); token != null\n-                && returnValue == Scope.PACKAGE;\n-                token = token.getNextSibling()) {\n+        for (DetailAST token = aMods.getFirstChild();\n+                 token != null && returnValue == Scope.PACKAGE;\n+                 token = token.getNextSibling()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3NTAwMA==", "bodyText": "re- formatting should be done in separate commit.", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476475000", "createdAt": "2020-08-25T14:05:10Z", "author": {"login": "romani"}, "path": "src/main/resources/com/puppycrawl/tools/checkstyle/checks/sizes/messages_tr.properties", "diffHunk": "@@ -1,19 +1,14 @@\n #Generated by ResourceBundle Editor (http://eclipse-rbe.sourceforge.net)\n-\n-executableStatementCount = Y\u00fcr\u00fct\u00fclebilir ifade say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n-\n-maxLen.anonInner = \u0130simsiz i\u00e7 s\u0131n\u0131f uzunlu\u011fu  {0,number,integer} sat\u0131r (maksimum izin verilen de\u011fer {1,number,integer}).\n-maxLen.file      = Dosya uzunlu\u011fu {0,number,integer} sat\u0131r (maksimum izin verilen de\u011fer {1,number,integer}).\n-maxLen.method    = Metot uzunlu\u011fu {0,number,integer} sat\u0131r (maksimum izin verilen de\u011fer {1,number,integer}).\n-\n-maxLineLen = Sat\u0131r {0,number,integer} de\u011ferinden daha uzun ({1,number,integer} de\u011fer bulundu).\n-\n-maxOuterTypes = Tan\u0131mlanan d\u0131\u015f t\u00fcr say\u0131s\u0131  {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n-\n-maxParam = {0,number,integer} de\u011ferinden daha fazla parametre mevcut {1,number,integer} de\u011fer bulundu).\n-\n-too.many.methods          = Toplam metot say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n-too.many.packageMethods   = Toplam ''package'' eri\u015fimli metot say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n-too.many.privateMethods   = Toplam ''private'' metot say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n-too.many.protectedMethods = Toplam ''protected'' metot say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n-too.many.publicMethods    = Toplam ''public'' metot say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n+executableStatementCount=Y\u00fcr\u00fct\u00fclebilir ifade say\u0131s\u0131 {0,number,integer} (maksimum izin verilen de\u011fer {1,number,integer}).\n+maxLen.anonInner=\u0130simsiz i\u00e7 s\u0131n\u0131f uzunlu\u011fu  {0,number,integer} sat\u0131r (maksimum izin verilen de\u011fer {1,number,integer}).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTIxNDQ4", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474521448", "createdAt": "2020-08-25T14:11:00Z", "commit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDoxMTowMFrOHGaBRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDoxMTowMFrOHGaBRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ3OTgxNA==", "bodyText": "lets avoid this.\nin future we will load config from this comment, this approach will complicate everything.\nsingle instance of Check should be used for file.", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476479814", "createdAt": "2020-08-25T14:11:00Z", "author": {"login": "romani"}, "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/sizes/recordcomponentnumber/InputRecordComponentNumberDifferentMaxForScope.java", "diffHunk": "@@ -0,0 +1,140 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.sizes.recordcomponentnumber;\n+\n+import java.awt.Point;\n+import java.awt.Shape;\n+import java.util.ArrayDeque;\n+import java.util.LinkedHashMap;\n+import java.util.List;\n+\n+import org.w3c.dom.Node;\n+\n+/* Config:\n+ *\n+ * public \"max\" = 5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19cac768b89ed40f44678281a48deb477bba6b39", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/19cac768b89ed40f44678281a48deb477bba6b39", "committedDate": "2020-08-25T13:05:11Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "e6b235fcb64f8cf1cbbba2db685b28fe15212a28", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e6b235fcb64f8cf1cbbba2db685b28fe15212a28", "committedDate": "2020-08-25T15:23:38Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6b235fcb64f8cf1cbbba2db685b28fe15212a28", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e6b235fcb64f8cf1cbbba2db685b28fe15212a28", "committedDate": "2020-08-25T15:23:38Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "ac987d85d26984918ce27be4d25f678e1c8cae56", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ac987d85d26984918ce27be4d25f678e1c8cae56", "committedDate": "2020-08-25T17:04:12Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NzE3NTg3", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474717587", "createdAt": "2020-08-25T17:49:14Z", "commit": {"oid": "ac987d85d26984918ce27be4d25f678e1c8cae56"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNzo0OToxNFrOHGjRDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNzo0OToxNFrOHGjRDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTMxMA==", "bodyText": "it is stateless.\nstateless means ready for  Multithread mode (our future)", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476631310", "createdAt": "2020-08-25T17:49:14Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,241 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.FileStatefulCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the\n+ * <a href=\"http://cr.openjdk.java.net/~gbierman/jep359/jep359-20191031/specs/records-jls.html\">\n+ * header</a> of a record definition.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code max} - Specify the maximum number of components allowed in the header of a\n+ * record definition.\n+ * Type is {@code int}.\n+ * Default value is {@code 8}.\n+ * </li>\n+ * <li>\n+ * Property {@code accessModifiers} - Access modifiers of record definitions where\n+ * the number of record components should be checked.\n+ * Type is {@code com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption[]}.\n+ * Default value is {@code public, protected, package, private}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * To configure the check:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"/&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y) { // ok, 2 components\n+ *     ...\n+ * }\n+ *\n+ * record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data\n+ *                           String location, Date date, Image image) { // violation, 9 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 5 record components at all access modifier levels\n+ * for record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"5\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, 3 components\n+ *     ...\n+ * }\n+ *\n+ * public record MyRecord2(int x, int y, String str,\n+ *                           Node node, Order order, Data data) { // violation, 6 components\n+ *     ...\n+ * }\n+ * </pre>\n+ * <p>\n+ * To configure the check to allow 10 record components for a public record definition,\n+ * but 3 for private record definitions:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"3\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"private\"/&gt;\n+ * &lt;/module&gt;\n+ * &lt;module name=\"RecordComponentNumber\"&gt;\n+ *   &lt;property name=\"max\" value=\"10\"/&gt;\n+ *   &lt;property name=\"accessModifiers\" value=\"public\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>\n+ * Java code example:\n+ * </p>\n+ * <pre>\n+ * public record MyRecord1(int x, int y, String str) { // ok, public record definition allowed 10\n+ *     ...\n+ * }\n+ *\n+ * private record MyRecord2(int x, int y, String str, Node node) { // violation\n+ *     ...                                // private record definition allowed 3 components\n+ * }\n+ * </pre>\n+ * <p>\n+ * Parent is {@code com.puppycrawl.tools.checkstyle.TreeWalker}\n+ * </p>\n+ * <p>\n+ * Violation Message Keys:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * {@code too.many.components}\n+ * </li>\n+ * </ul>\n+ *\n+ * @since 8.36\n+ */\n+@FileStatefulCheck", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac987d85d26984918ce27be4d25f678e1c8cae56"}, "originalPosition": 135}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac987d85d26984918ce27be4d25f678e1c8cae56", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ac987d85d26984918ce27be4d25f678e1c8cae56", "committedDate": "2020-08-25T17:04:12Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "40815f338b209478b7bf031fdec14b99c564052f", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/40815f338b209478b7bf031fdec14b99c564052f", "committedDate": "2020-08-25T19:03:05Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0Nzc2OTky", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474776992", "createdAt": "2020-08-25T19:13:42Z", "commit": {"oid": "40815f338b209478b7bf031fdec14b99c564052f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0ODEwMzc5", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-474810379", "createdAt": "2020-08-25T20:02:00Z", "commit": {"oid": "40815f338b209478b7bf031fdec14b99c564052f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMDowMjowMFrOHGnuXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMDowMjowMFrOHGnuXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcwNDM0OA==", "bodyText": "https://docs.oracle.com/javase/specs/jls/se14/preview/specs/records-jls.html#jls-8.10.1\n?", "url": "https://github.com/checkstyle/checkstyle/pull/8595#discussion_r476704348", "createdAt": "2020-08-25T20:02:00Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/sizes/RecordComponentNumberCheck.java", "diffHunk": "@@ -0,0 +1,241 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.sizes;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import com.puppycrawl.tools.checkstyle.StatelessCheck;\n+import com.puppycrawl.tools.checkstyle.api.AbstractCheck;\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+import com.puppycrawl.tools.checkstyle.checks.naming.AccessModifierOption;\n+import com.puppycrawl.tools.checkstyle.utils.CheckUtil;\n+import com.puppycrawl.tools.checkstyle.utils.TokenUtil;\n+\n+/**\n+ * <p>\n+ * Checks the number of record components in the\n+ * <a href=\"http://cr.openjdk.java.net/~gbierman/jep359/jep359-20191031/specs/records-jls.html#jls-8.10.1\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40815f338b209478b7bf031fdec14b99c564052f"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20386c785d2c79d34d0a876de2a0077c247caf67", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/20386c785d2c79d34d0a876de2a0077c247caf67", "committedDate": "2020-08-25T20:20:57Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40815f338b209478b7bf031fdec14b99c564052f", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/40815f338b209478b7bf031fdec14b99c564052f", "committedDate": "2020-08-25T19:03:05Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}, "afterCommit": {"oid": "20386c785d2c79d34d0a876de2a0077c247caf67", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/20386c785d2c79d34d0a876de2a0077c247caf67", "committedDate": "2020-08-25T20:20:57Z", "message": "Issue #8748: Create new check RecordComponentNumberCheck"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MTU3MDA5", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-475157009", "createdAt": "2020-08-26T05:18:31Z", "commit": {"oid": "20386c785d2c79d34d0a876de2a0077c247caf67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MTY3NTMw", "url": "https://github.com/checkstyle/checkstyle/pull/8595#pullrequestreview-475167530", "createdAt": "2020-08-26T05:48:15Z", "commit": {"oid": "20386c785d2c79d34d0a876de2a0077c247caf67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1174, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}