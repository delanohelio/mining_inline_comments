{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDc3ODgx", "number": 9083, "title": "Issue #9003: nondex tool found issue in token ordering at Indentation", "bodyText": "Issue #9003: nondex tool found issue in token ordering at Indentation\nThis PR hopefully resolves #9003.  I have included the nondex update to verify that using an ordered data structure (LinkedHashSet) vs. a non-ordered structure (HashSet) resolves the issue.\nFirst CI run:\nfailure at https://checkstyle.semaphoreci.com/jobs/d793aa43-1d5e-4058-991f-432f75525a99\n\nAllChecksTest.testAllCheckTokensAreReferencedInGoogleConfigFile:394->validateAllCheckTokensAreReferencedInConfigFile:451->validateDefaultTokens:479 All default tokens should be used in config for Indentation\n JavadocPropertiesGeneratorTest.testNonExistentArgument:111 Unexpected error log ==> expected: <Missing required options and parameters: '--destfile=<outputFile>', '<inputFile>'", "createdAt": "2020-12-05T19:03:47Z", "url": "https://github.com/checkstyle/checkstyle/pull/9083", "merged": true, "mergeCommit": {"oid": "8bacab1adcae21ac4e2e7c131eace8995fad782f"}, "closed": true, "closedAt": "2021-01-18T00:39:25Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjv55tABqjQwNzc5OTg1NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxLuhvAFqTU3MDExNDY5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31f7daa18822d4943bc83f555d550307542fb618", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/31f7daa18822d4943bc83f555d550307542fb618", "committedDate": "2020-12-05T18:45:42Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}, "afterCommit": {"oid": "e5fd4174b782b1679584cef534a5c1123d07c049", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e5fd4174b782b1679584cef534a5c1123d07c049", "committedDate": "2020-12-07T06:43:44Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5fd4174b782b1679584cef534a5c1123d07c049", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/e5fd4174b782b1679584cef534a5c1123d07c049", "committedDate": "2020-12-07T06:43:44Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}, "afterCommit": {"oid": "da6c5f0c3034f9d44b2542d4020a570deb36dae8", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/da6c5f0c3034f9d44b2542d4020a570deb36dae8", "committedDate": "2020-12-15T05:33:54Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da6c5f0c3034f9d44b2542d4020a570deb36dae8", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/da6c5f0c3034f9d44b2542d4020a570deb36dae8", "committedDate": "2020-12-15T05:33:54Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}, "afterCommit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2e7cafb505e5c8e8737dad18bd0a3772412afa14", "committedDate": "2021-01-07T23:45:56Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzOTEzODM1", "url": "https://github.com/checkstyle/checkstyle/pull/9083#pullrequestreview-563913835", "createdAt": "2021-01-07T23:59:03Z", "commit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QyMzo1OTowM1rOIQA37A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QyMzo1OTowM1rOIQA37A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzY2MjQ0NA==", "bodyText": "resolves\nJavadocPropertiesGeneratorTest.testNonExistentArgument:111 Unexpected error log ==> expected: <Missing required options and parameters: '--destfile=<outputFile>', '<inputFile>'08:59\nUsage: java com.puppycrawl.tools.checkstyle.JavadocPropertiesGenerator [-hV]08:59\n      --destfile=<outputFile> <inputFile>08:59\n     <inputFile>   The input file.08:59\n     --destfile=<outputFile>08:59\n                   The output file.08:59\n -h, --help        Show this help message and exit.08:59\n -V, --version     Print version information and exit.08:59\n> but was: <Missing required parameter: '<inputFile>'08:59\nUsage: java com.puppycrawl.tools.checkstyle.JavadocPropertiesGenerator [-hV]08:59\n      --destfile=<outputFile> <inputFile>08:59\n     <inputFile>   The input file.08:59\n     --destfile=<outputFile>08:59\n                   The output file.08:59\n -h, --help        Show this help message and exit.08:59\n -V, --version     Print version information and exit.08:59\n>", "url": "https://github.com/checkstyle/checkstyle/pull/9083#discussion_r553662444", "createdAt": "2021-01-07T23:59:03Z", "author": {"login": "nmancus1"}, "path": ".ci/validation.sh", "diffHunk": "@@ -88,7 +88,8 @@ eclipse-static-analysis)\n   ;;\n \n nondex)\n-  mvn -e --fail-never clean nondex:nondex -DargLine='-Xms1024m -Xmx2048m'\n+  mvn -e --fail-never clean nondex:nondex -DargLine='-Xms1024m -Xmx2048m' \\\n+    -Dtest=!JavadocPropertiesGeneratorTest#testNonExistentArgument", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzOTE0MzE5", "url": "https://github.com/checkstyle/checkstyle/pull/9083#pullrequestreview-563914319", "createdAt": "2021-01-08T00:00:29Z", "commit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMDowMDoyOVrOIQA5qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMDowMDoyOVrOIQA5qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzY2Mjg5MA==", "bodyText": "resolves FileContentsTest.testHasIntersectionEarlyOut:285 \u00bb NullPointer", "url": "https://github.com/checkstyle/checkstyle/pull/9083#discussion_r553662890", "createdAt": "2021-01-08T00:00:29Z", "author": {"login": "nmancus1"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/api/FileContentsTest.java", "diffHunk": "@@ -280,7 +280,7 @@ public void testHasIntersectionEarlyOut() throws Exception {\n                 \"clangComments\");\n         final TextBlock textBlock = new Comment(new String[] {\"\"}, 1, 1, 1);\n         clangComments.put(1, Collections.singletonList(textBlock));\n-        clangComments.put(2, null);\n+        clangComments.put(2, Collections.emptyList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzOTE0NjEx", "url": "https://github.com/checkstyle/checkstyle/pull/9083#pullrequestreview-563914611", "createdAt": "2021-01-08T00:01:20Z", "commit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMDowMToyMFrOIQA6lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMDowMToyMFrOIQA6lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzY2MzEyNA==", "bodyText": "all changes in this file resolve AllChecksTest.testAllCheckTokensAreReferencedInGoogleConfigFile:394->validateAllCheckTokensAreReferencedInConfigFile:451->validateDefaultTokens:479 All default tokens should be used in config for Indentation", "url": "https://github.com/checkstyle/checkstyle/pull/9083#discussion_r553663124", "createdAt": "2021-01-08T00:01:20Z", "author": {"login": "nmancus1"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/AllChecksTest.java", "diffHunk": "@@ -471,7 +473,16 @@ private static boolean isAllTokensAcceptable(AbstractCheck check) {\n \n     private static void validateDefaultTokens(Configuration checkConfig, AbstractCheck check,\n                                               Set<String> configTokens) {\n-        if (Arrays.equals(check.getDefaultTokens(), check.getRequiredTokens())) {\n+\n+        final Set<Integer> defaultTokensSet = IntStream.of(check.getDefaultTokens())\n+            .boxed()\n+            .collect(Collectors.toSet());\n+\n+        final Set<Integer> requiredTokensSet = IntStream.of(check.getRequiredTokens())\n+            .boxed()\n+            .collect(Collectors.toSet());\n+\n+        if (defaultTokensSet.equals(requiredTokensSet)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzOTU1MzY5", "url": "https://github.com/checkstyle/checkstyle/pull/9083#pullrequestreview-563955369", "createdAt": "2021-01-08T02:03:14Z", "commit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMjowMzoxNFrOIQDFkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQwMjowMzoxNFrOIQDFkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzY5ODcwNQ==", "bodyText": "If the other changes resolve #9083 (comment) , then why are these changes needed?", "url": "https://github.com/checkstyle/checkstyle/pull/9083#discussion_r553698705", "createdAt": "2021-01-08T02:03:14Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/AllChecksTest.java", "diffHunk": "@@ -78,9 +80,9 @@\n     };\n \n     private static final Map<String, Set<String>> CHECKSTYLE_TOKENS_IN_CONFIG_TO_IGNORE =\n-            new HashMap<>();\n+            new LinkedHashMap<>();\n     private static final Map<String, Set<String>> GOOGLE_TOKENS_IN_CONFIG_TO_IGNORE =\n-            new HashMap<>();\n+            new LinkedHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e7cafb505e5c8e8737dad18bd0a3772412afa14", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2e7cafb505e5c8e8737dad18bd0a3772412afa14", "committedDate": "2021-01-07T23:45:56Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}, "afterCommit": {"oid": "38c6942b1351bef6a52b931e22e9e8eb60538b00", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/38c6942b1351bef6a52b931e22e9e8eb60538b00", "committedDate": "2021-01-08T03:27:01Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6312787f3282ee5607560d97dfe914f6cfcdf31", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/d6312787f3282ee5607560d97dfe914f6cfcdf31", "committedDate": "2021-01-08T03:36:31Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38c6942b1351bef6a52b931e22e9e8eb60538b00", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/38c6942b1351bef6a52b931e22e9e8eb60538b00", "committedDate": "2021-01-08T03:27:01Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}, "afterCommit": {"oid": "d6312787f3282ee5607560d97dfe914f6cfcdf31", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/d6312787f3282ee5607560d97dfe914f6cfcdf31", "committedDate": "2021-01-08T03:36:31Z", "message": "Issue #9003: nondex tool found issue in token ordering at Indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0MDAxMDQz", "url": "https://github.com/checkstyle/checkstyle/pull/9083#pullrequestreview-564001043", "createdAt": "2021-01-08T04:50:25Z", "commit": {"oid": "d6312787f3282ee5607560d97dfe914f6cfcdf31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMTE0Njkx", "url": "https://github.com/checkstyle/checkstyle/pull/9083#pullrequestreview-570114691", "createdAt": "2021-01-18T00:39:18Z", "commit": {"oid": "d6312787f3282ee5607560d97dfe914f6cfcdf31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1291, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}