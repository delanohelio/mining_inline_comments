{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MzA5MDU1", "number": 8420, "title": "Issue #8394: extend InnerTypeLast to work with ctors and init blocks", "bodyText": "Resolves #8394\nReg report (generated manually) - https://strkkk.github.io/checkstyle/8394/index.html\nReg report (generated by github action) - https://checkstyle-diff-reports.s3.us-east-2.amazonaws.com/8394_InnerTypeLast_2020215146/reports/diff/index.html\nReg report 2 (after message change) - https://checkstyle-diff-reports.s3.us-east-2.amazonaws.com/8394_InnerTypeLast_2020094050/reports/diff/index.html\nDiff Regression config: https://raw.githubusercontent.com/strkkk/strkkk.github.io/master/checkstyle/check.xml\nDiff Regression projects: https://raw.githubusercontent.com/strkkk/strkkk.github.io/master/checkstyle/full_list.properties", "createdAt": "2020-07-08T15:11:33Z", "url": "https://github.com/checkstyle/checkstyle/pull/8420", "merged": true, "mergeCommit": {"oid": "89a4cda50ea2c8cb52677dbee74c9ccd21d1a6b4"}, "closed": true, "closedAt": "2020-07-23T14:35:23Z", "author": {"login": "strkkk"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczKFOvgFqTQ0NTM2MDE2MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3wYfxgFqTQ1NDE5NDE5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MzYwMTYw", "url": "https://github.com/checkstyle/checkstyle/pull/8420#pullrequestreview-445360160", "createdAt": "2020-07-09T07:35:52Z", "commit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzozNTo1MlrOGvFOUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNzo0MDo0N1rOGvFYjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAyMTg0MA==", "bodyText": "I wonder why enums/annotations are not handled by this check? Perhaps this check should be reviewed one more time once records will be done.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r452021840", "createdAt": "2020-07-09T07:35:52Z", "author": {"login": "pbludov"}, "path": "src/xdocs/checks.xml", "diffHunk": "@@ -360,7 +360,8 @@\n             <td><a href=\"config_design.html#InnerTypeLast\">InnerTypeLast</a></td>\n             <td>\n               Checks nested (internal) classes/interfaces are declared at the bottom of the\n-              primary (top-level) class after all method and field declarations.\n+              primary (top-level) class after all init and static init blocks,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAyNDQ2Mg==", "bodyText": "Once #8048 will be done, this tokens are good candidates for a helper method like TokenUtil.isClassMember or something like this.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r452024462", "createdAt": "2020-07-09T07:40:47Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "diffHunk": "@@ -62,6 +72,15 @@\n      */\n     public static final String MSG_KEY = \"arrangement.members.before.inner\";\n \n+    /** List of class member tokens. */\n+    private static final List<Integer> CLASS_MEMBER_TOKENS = Arrays.asList(\n+            TokenTypes.VARIABLE_DEF,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Njc1OTI2", "url": "https://github.com/checkstyle/checkstyle/pull/8420#pullrequestreview-446675926", "createdAt": "2020-07-10T20:14:51Z", "commit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDoxNDo1MVrOGwEbhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDoxNDo1MVrOGwEbhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA1NzQxNQ==", "bodyText": "@strkkk this can be !TokenUtil.isTypeDeclaration(nextSibling.getType()) after #8345\nAlso, if (!ScopeUtil.isInCodeBlock(ast) should be moved out of the loop.\nMoreover, the loop itself is redundant. Only the next sibling should be checked. If the next sibling is a type, it will be processed soon.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r453057415", "createdAt": "2020-07-10T20:14:51Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/design/InnerTypeLastCheck.java", "diffHunk": "@@ -95,8 +114,7 @@ public void visitToken(DetailAST ast) {\n             DetailAST nextSibling = ast.getNextSibling();\n             while (nextSibling != null) {\n                 if (!ScopeUtil.isInCodeBlock(ast)\n-                    && (nextSibling.getType() == TokenTypes.VARIABLE_DEF\n-                        || nextSibling.getType() == TokenTypes.METHOD_DEF)) {\n+                    && CLASS_MEMBER_TOKENS.contains(nextSibling.getType())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTQxOTg5", "url": "https://github.com/checkstyle/checkstyle/pull/8420#pullrequestreview-451141989", "createdAt": "2020-07-19T15:36:15Z", "commit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxNTozNjoxNVrOGzwW_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxNTozNjoxNVrOGzwW_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkyMjg3OQ==", "bodyText": "please rebase, there should be violation that * Config: is missed.\nIf no violation, please share details on why, we have Check on this now.", "url": "https://github.com/checkstyle/checkstyle/pull/8420#discussion_r456922879", "createdAt": "2020-07-19T15:36:15Z", "author": {"login": "romani"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/design/innertypelast/InputInnerTypeLastClassCtorsInitBlocks.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package com.puppycrawl.tools.checkstyle.checks.design.innertypelast;\n+\n+public class InputInnerTypeLastClassCtorsInitBlocks {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4680e3368a1a332e7cbb9eb96e9b0d65ae7c2e47", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/4680e3368a1a332e7cbb9eb96e9b0d65ae7c2e47", "committedDate": "2020-07-20T08:50:22Z", "message": "Issue #8394: extend InnerTypeLast to work with ctors and init blocks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a55055823025a7264857f0a8e56be137d5eeacad", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a55055823025a7264857f0a8e56be137d5eeacad", "committedDate": "2020-07-08T15:08:54Z", "message": "Issue #8394: extend InnerTypeLast to work with ctors and init blocks"}, "afterCommit": {"oid": "4680e3368a1a332e7cbb9eb96e9b0d65ae7c2e47", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/4680e3368a1a332e7cbb9eb96e9b0d65ae7c2e47", "committedDate": "2020-07-20T08:50:22Z", "message": "Issue #8394: extend InnerTypeLast to work with ctors and init blocks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTk0MTk1", "url": "https://github.com/checkstyle/checkstyle/pull/8420#pullrequestreview-454194195", "createdAt": "2020-07-23T14:34:07Z", "commit": {"oid": "4680e3368a1a332e7cbb9eb96e9b0d65ae7c2e47"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 452, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}