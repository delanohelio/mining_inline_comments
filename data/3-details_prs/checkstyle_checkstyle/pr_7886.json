{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMDYyNDUx", "number": 7886, "title": "Issue #6204: Exception when Char literals contain unicode characters", "bodyText": "Issue #6204: Exception when Char literals contain unicode characters. This PR alters the CHAR_LITERAL rule to accommodate surrogate pair representations of unicode characters, on operating systems that use charsets other than UTF-8.", "createdAt": "2020-03-17T20:32:08Z", "url": "https://github.com/checkstyle/checkstyle/pull/7886", "merged": true, "mergeCommit": {"oid": "9cbfc6878522c4284263fb3afc715f932d218507"}, "closed": true, "closedAt": "2020-04-08T13:50:40Z", "author": {"login": "nmancus1"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOqLhOgFqTM3NjQ0MDIwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVfr-hgFqTM4OTYzNTcxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDQwMjA5", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-376440209", "createdAt": "2020-03-17T22:09:37Z", "commit": {"oid": "fab691f60dbe743ecbaf8a395f1128d336ba408d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fab691f60dbe743ecbaf8a395f1128d336ba408d", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/fab691f60dbe743ecbaf8a395f1128d336ba408d", "committedDate": "2020-03-17T20:01:04Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "87344e2d6d9546ed4c82ae4c98da1e12004c91b0", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/87344e2d6d9546ed4c82ae4c98da1e12004c91b0", "committedDate": "2020-03-19T03:09:23Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87344e2d6d9546ed4c82ae4c98da1e12004c91b0", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/87344e2d6d9546ed4c82ae4c98da1e12004c91b0", "committedDate": "2020-03-19T03:09:23Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "53c500c2570c0c305692b4a474b3a3d6e25097ff", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/53c500c2570c0c305692b4a474b3a3d6e25097ff", "committedDate": "2020-03-19T03:52:59Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53c500c2570c0c305692b4a474b3a3d6e25097ff", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/53c500c2570c0c305692b4a474b3a3d6e25097ff", "committedDate": "2020-03-19T03:52:59Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "34f85cabc50401a927932c30cb18ec4088adda53", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/34f85cabc50401a927932c30cb18ec4088adda53", "committedDate": "2020-03-19T03:54:43Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34f85cabc50401a927932c30cb18ec4088adda53", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/34f85cabc50401a927932c30cb18ec4088adda53", "committedDate": "2020-03-19T03:54:43Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "0e8a66c9782391621f0bfd7738e707c9ffc62cc8", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0e8a66c9782391621f0bfd7738e707c9ffc62cc8", "committedDate": "2020-03-19T05:04:30Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e8a66c9782391621f0bfd7738e707c9ffc62cc8", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/0e8a66c9782391621f0bfd7738e707c9ffc62cc8", "committedDate": "2020-03-19T05:04:30Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "5db8a5b92328f9f82b6fab711aeca7af5c2d10fe", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5db8a5b92328f9f82b6fab711aeca7af5c2d10fe", "committedDate": "2020-03-19T13:41:17Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5db8a5b92328f9f82b6fab711aeca7af5c2d10fe", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/5db8a5b92328f9f82b6fab711aeca7af5c2d10fe", "committedDate": "2020-03-19T13:41:17Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a8d388d7782bca25f8a18182a78410a4721e1e48", "committedDate": "2020-03-19T13:43:49Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MTM5NTEz", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-378139513", "createdAt": "2020-03-19T22:34:13Z", "commit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMjozNDoxM1rOF5Cq2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMjozNDoxM1rOF5Cq2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1Njg4OQ==", "bodyText": "Please look at AbstractPathTestSupport.readFile and ascertain why the file isn't being read in UTF8.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r395356889", "createdAt": "2020-03-19T22:34:13Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +123,18 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        if (Charset.isSupported(\"windows-1252\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a8d388d7782bca25f8a18182a78410a4721e1e48", "committedDate": "2020-03-19T13:43:49Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "7d9545b2e83e8294476e095d146e51a19804e9bf", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7d9545b2e83e8294476e095d146e51a19804e9bf", "committedDate": "2020-03-22T21:27:57Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d9545b2e83e8294476e095d146e51a19804e9bf", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7d9545b2e83e8294476e095d146e51a19804e9bf", "committedDate": "2020-03-22T21:27:57Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3405187e66555e9ab4e859a2975bde04439e6b4b", "committedDate": "2020-03-22T21:51:46Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwODIzOTAy", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-380823902", "createdAt": "2020-03-25T02:37:38Z", "commit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwMjozNzozOFrOF7KKSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwMjo0MjozNVrOF7KPHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU3Njc3OA==", "bodyText": "We still need charset verification, this is probably why pitest is complaining.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r397576778", "createdAt": "2020-03-25T02:37:38Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/CheckerTest.java", "diffHunk": "@@ -415,8 +415,6 @@ public void testFinishLocalSetupFullyInitialized() throws Exception {\n         checker.finishLocalSetup();\n \n         final Context context = Whitebox.getInternalState(checker, \"childContext\");\n-        final String encoding = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n-        assertEquals(encoding, context.get(\"charset\"), \"Charset was different than expected\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU3ODAxMw==", "bodyText": "antlr.TokenStreamRecognitionException: expecting ''', found '\u00bd'\n\nIt is the same error as Checker problem but in a different area of code.\nReason for error is explained at #7886 (comment) and is completely separate from changing Checker. We have UT specific code that is loading the file and not loading it as UTF8. It must be changed to ensure, just like Checker, we always load the files in UTF8 by default.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r397578013", "createdAt": "2020-03-25T02:42:35Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +122,12 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        verifyAst(getPath(\"InputCharLiteralSurrogatePair.txt\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/3405187e66555e9ab4e859a2975bde04439e6b4b", "committedDate": "2020-03-22T21:51:46Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7c6b3a23a63632b447ea12c40209596ed2758e46", "committedDate": "2020-03-25T05:19:53Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMjI1Mjc2", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-381225276", "createdAt": "2020-03-25T14:52:08Z", "commit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDcwMTIw", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-383470120", "createdAt": "2020-03-29T23:40:54Z", "commit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMzo0MDo1NFrOF9WN0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMzo0MDo1NFrOF9WN0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg3MTQ0Mw==", "bodyText": "this is interesting .... why JavaParser does not use charset defined by user in Checker ?", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r399871443", "createdAt": "2020-03-29T23:40:54Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/JavaParser.java", "diffHunk": "@@ -136,7 +136,7 @@ public static DetailAST parseFileText(FileText text, Options options)\n     public static DetailAST parseFile(File file, Options options)\n             throws IOException, CheckstyleException {\n         final FileText text = new FileText(file.getAbsoluteFile(),\n-            System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name()));\n+            StandardCharsets.UTF_8.name());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDUyMjY5", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-386452269", "createdAt": "2020-04-02T13:57:40Z", "commit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1Nzo0MVrOF_sgzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1Nzo0MVrOF_sgzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzMzkwMA==", "bodyText": "we need to update xdoc.\nhttps://checkstyle.org/config.html#Checker_Properties\nThis update is breaking compatibility change .... we need to be clear with users on this.\nfrom documentation:\n\nTo configure a Checker so that it handles files with the UTF-8 charset:\n\nwe need to change it as it is default now.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r402333900", "createdAt": "2020-04-02T13:57:41Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/Checker.java", "diffHunk": "@@ -119,7 +119,7 @@\n     private SeverityLevel severity = SeverityLevel.ERROR;\n \n     /** Name of a charset. */\n-    private String charset = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n+    private String charset = StandardCharsets.UTF_8.name();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/7c6b3a23a63632b447ea12c40209596ed2758e46", "committedDate": "2020-03-25T05:19:53Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "08fc109d5cdf07fd5d3c2414a337f04695ac76f6", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/08fc109d5cdf07fd5d3c2414a337f04695ac76f6", "committedDate": "2020-04-03T13:29:35Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9fd893593bd7a64a014309fea2dd6215206ce35", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c9fd893593bd7a64a014309fea2dd6215206ce35", "committedDate": "2020-04-04T12:10:17Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "08fc109d5cdf07fd5d3c2414a337f04695ac76f6", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/08fc109d5cdf07fd5d3c2414a337f04695ac76f6", "committedDate": "2020-04-03T13:29:35Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}, "afterCommit": {"oid": "c9fd893593bd7a64a014309fea2dd6215206ce35", "author": {"user": {"login": "nmancus1", "name": "Nick Mancuso"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c9fd893593bd7a64a014309fea2dd6215206ce35", "committedDate": "2020-04-04T12:10:17Z", "message": "Issue #6204: Exception when Char literals contain unicode characters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NjM1NzEz", "url": "https://github.com/checkstyle/checkstyle/pull/7886#pullrequestreview-389635713", "createdAt": "2020-04-08T03:53:35Z", "commit": {"oid": "c9fd893593bd7a64a014309fea2dd6215206ce35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 875, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}