{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMDYyNDUx", "number": 7886, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMjozNDoxM1rODpsx0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1Nzo0MVrODt90Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDUxODU2OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMjozNDoxM1rOF5Cq2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMzo1MjoyNVrOF5EKug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1Njg4OQ==", "bodyText": "Please look at AbstractPathTestSupport.readFile and ascertain why the file isn't being read in UTF8.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r395356889", "createdAt": "2020-03-19T22:34:13Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +123,18 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        if (Charset.isSupported(\"windows-1252\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3OTA3OA==", "bodyText": "So, should we default to UTF-8, then?", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r395379078", "createdAt": "2020-03-19T23:43:34Z", "author": {"login": "nmancus1"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +123,18 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        if (Charset.isSupported(\"windows-1252\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1Njg4OQ=="}, "originalCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4MDYyOA==", "bodyText": "We are already trying to read the files as UTF8 at \n  \n    \n      checkstyle/src/test/java/com/puppycrawl/tools/checkstyle/AbstractPathTestSupport.java\n    \n    \n         Line 80\n      in\n      ae9edbd\n    \n    \n    \n    \n\n        \n          \n           Paths.get(filename)), StandardCharsets.UTF_8)); \n        \n    \n  \n\n . Unless you need a different file format, I think we should force UTF8.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r395380628", "createdAt": "2020-03-19T23:49:20Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +123,18 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        if (Charset.isSupported(\"windows-1252\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1Njg4OQ=="}, "originalCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4MTQzNA==", "bodyText": "#7886 (comment)", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r395381434", "createdAt": "2020-03-19T23:52:25Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +123,18 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        if (Charset.isSupported(\"windows-1252\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1Njg4OQ=="}, "originalCommit": {"oid": "a8d388d7782bca25f8a18182a78410a4721e1e48"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NDYwNDcwOnYy", "diffSide": "LEFT", "path": "src/test/java/com/puppycrawl/tools/checkstyle/CheckerTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwMjozNzozOFrOF7KKSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwMjozNzozOFrOF7KKSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU3Njc3OA==", "bodyText": "We still need charset verification, this is probably why pitest is complaining.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r397576778", "createdAt": "2020-03-25T02:37:38Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/CheckerTest.java", "diffHunk": "@@ -415,8 +415,6 @@ public void testFinishLocalSetupFullyInitialized() throws Exception {\n         checker.finishLocalSetup();\n \n         final Context context = Whitebox.getInternalState(checker, \"childContext\");\n-        final String encoding = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n-        assertEquals(encoding, context.get(\"charset\"), \"Charset was different than expected\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NDYxMzAyOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwMjo0MjozNVrOF7KPHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNDo0Mzo0MVrOF7egEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU3ODAxMw==", "bodyText": "antlr.TokenStreamRecognitionException: expecting ''', found '\u00bd'\n\nIt is the same error as Checker problem but in a different area of code.\nReason for error is explained at #7886 (comment) and is completely separate from changing Checker. We have UT specific code that is loading the file and not loading it as UTF8. It must be changed to ensure, just like Checker, we always load the files in UTF8 by default.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r397578013", "createdAt": "2020-03-25T02:42:35Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +122,12 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        verifyAst(getPath(\"InputCharLiteralSurrogatePair.txt\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxMDAzMw==", "bodyText": "Done.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r397910033", "createdAt": "2020-03-25T14:43:41Z", "author": {"login": "nmancus1"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/grammar/AstRegressionTest.java", "diffHunk": "@@ -122,6 +122,12 @@ public void testTypecast() throws Exception {\n                 getPath(\"InputRegressionJavaTypecast.java\"));\n     }\n \n+    @Test\n+    public void testCharLiteralSurrogatePair() throws Exception {\n+        verifyAst(getPath(\"InputCharLiteralSurrogatePair.txt\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU3ODAxMw=="}, "originalCommit": {"oid": "3405187e66555e9ab4e859a2975bde04439e6b4b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTYwNzM1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/JavaParser.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMzo0MDo1NFrOF9WN0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1NToxOFrOF_sZ0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg3MTQ0Mw==", "bodyText": "this is interesting .... why JavaParser does not use charset defined by user in Checker ?", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r399871443", "createdAt": "2020-03-29T23:40:54Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/JavaParser.java", "diffHunk": "@@ -136,7 +136,7 @@ public static DetailAST parseFileText(FileText text, Options options)\n     public static DetailAST parseFile(File file, Options options)\n             throws IOException, CheckstyleException {\n         final FileText text = new FileText(file.getAbsoluteFile(),\n-            System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name()));\n+            StandardCharsets.UTF_8.name());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE5NzA5Mw==", "bodyText": "Unless I'm mistaken, parseFile() is only called when printing the AST, right?  It's never taking in the config file anyway.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r400197093", "createdAt": "2020-03-30T13:37:43Z", "author": {"login": "nmancus1"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/JavaParser.java", "diffHunk": "@@ -136,7 +136,7 @@ public static DetailAST parseFileText(FileText text, Options options)\n     public static DetailAST parseFile(File file, Options options)\n             throws IOException, CheckstyleException {\n         final FileText text = new FileText(file.getAbsoluteFile(),\n-            System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name()));\n+            StandardCharsets.UTF_8.name());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg3MTQ0Mw=="}, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzMjExMw==", "bodyText": "you are right, I was confused by code and location of it.\nit might be good sign that methods location is not very good.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r402332113", "createdAt": "2020-04-02T13:55:18Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/JavaParser.java", "diffHunk": "@@ -136,7 +136,7 @@ public static DetailAST parseFileText(FileText text, Options options)\n     public static DetailAST parseFile(File file, Options options)\n             throws IOException, CheckstyleException {\n         final FileText text = new FileText(file.getAbsoluteFile(),\n-            System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name()));\n+            StandardCharsets.UTF_8.name());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg3MTQ0Mw=="}, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NTI1Mjc1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/Checker.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1Nzo0MVrOF_sgzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzozMzozMlrOGAVqYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzMzkwMA==", "bodyText": "we need to update xdoc.\nhttps://checkstyle.org/config.html#Checker_Properties\nThis update is breaking compatibility change .... we need to be clear with users on this.\nfrom documentation:\n\nTo configure a Checker so that it handles files with the UTF-8 charset:\n\nwe need to change it as it is default now.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r402333900", "createdAt": "2020-04-02T13:57:41Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/Checker.java", "diffHunk": "@@ -119,7 +119,7 @@\n     private SeverityLevel severity = SeverityLevel.ERROR;\n \n     /** Name of a charset. */\n-    private String charset = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n+    private String charset = StandardCharsets.UTF_8.name();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQxNzI1MQ==", "bodyText": "So, should I change the example to another charset?  I will also correct the table here: \n  \n    \n      checkstyle/src/xdocs/config.xml\n    \n    \n        Lines 340 to 341\n      in\n      834b505\n    \n    \n    \n    \n\n        \n          \n           <td>System property &quot;file.encoding&quot;</td> \n        \n\n        \n          \n           <td>5.0</td> \n        \n    \n  \n\n\nto:\n              <td><code>UTF-8</code></td>\n              <td>8.32</td>", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r402417251", "createdAt": "2020-04-02T15:46:12Z", "author": {"login": "nmancus1"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/Checker.java", "diffHunk": "@@ -119,7 +119,7 @@\n     private SeverityLevel severity = SeverityLevel.ERROR;\n \n     /** Name of a charset. */\n-    private String charset = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n+    private String charset = StandardCharsets.UTF_8.name();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzMzkwMA=="}, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk5NTg3NA==", "bodyText": "So, should I change the example to another charset?\n\nyes, you can use bulgarian charset as it is in issue.\n\nwill also correct the table here\n\nno, it is version for when property appear.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r402995874", "createdAt": "2020-04-03T13:14:29Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/Checker.java", "diffHunk": "@@ -119,7 +119,7 @@\n     private SeverityLevel severity = SeverityLevel.ERROR;\n \n     /** Name of a charset. */\n-    private String charset = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n+    private String charset = StandardCharsets.UTF_8.name();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzMzkwMA=="}, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwODA5Nw==", "bodyText": "Fixed.", "url": "https://github.com/checkstyle/checkstyle/pull/7886#discussion_r403008097", "createdAt": "2020-04-03T13:33:32Z", "author": {"login": "nmancus1"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/Checker.java", "diffHunk": "@@ -119,7 +119,7 @@\n     private SeverityLevel severity = SeverityLevel.ERROR;\n \n     /** Name of a charset. */\n-    private String charset = System.getProperty(\"file.encoding\", StandardCharsets.UTF_8.name());\n+    private String charset = StandardCharsets.UTF_8.name();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzMzkwMA=="}, "originalCommit": {"oid": "7c6b3a23a63632b447ea12c40209596ed2758e46"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1210, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}