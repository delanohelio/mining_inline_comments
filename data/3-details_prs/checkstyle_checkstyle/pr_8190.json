{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4OTkzNzgw", "number": 8190, "title": "Issue #6915: InnerAssignment: false positives on for and do-while loops", "bodyText": "fixes: #6915\nDiff Regression config: https://gist.github.com/romani/7deac41fe5c1e70af01438d32aabc7eb/raw/57a44c0470584de669575484b20677641ae50bfd/my_check-pr8190.xml\nDiff Regression projects: https://gist.githubusercontent.com/romani/7deac41fe5c1e70af01438d32aabc7eb/raw/7c7cfa59aef6edc05c91b7f1848881d9afc9cbc9/projects-to-test-on-pr-8190.properties", "createdAt": "2020-04-26T00:47:23Z", "url": "https://github.com/checkstyle/checkstyle/pull/8190", "merged": true, "mergeCommit": {"oid": "41769cee1881c8c92cc59762b90b83529406208a"}, "closed": true, "closedAt": "2020-11-22T14:56:59Z", "author": {"login": "DXTkastb"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcce7OOABqjMyODY0NjY2ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdexQ9RAFqTUzNjAwMzgwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39d83ab5c3f46e2cb73234fb235e5ae9fa69219e", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/39d83ab5c3f46e2cb73234fb235e5ae9fa69219e", "committedDate": "2020-04-26T00:24:06Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/56be00a55499b3ca195a479ed43a4acec367909a", "committedDate": "2020-04-29T20:57:09Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDQ1MTg5", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-404045189", "createdAt": "2020-05-01T06:59:53Z", "commit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwNjo1OTo1M1rOGPDk9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwNzoxMDo0NFrOGPDtQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MDQzNg==", "bodyText": "assignment -> assignmentS", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418440436", "createdAt": "2020-05-01T06:59:53Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -32,19 +32,28 @@\n  * {@code String s = Integer.toString(i = 2);}.\n  * </p>\n  * <p>\n- * Rationale: With the exception of {@code for} iterators and assignment in {@code while} idiom,\n+ * Rationale: With the exception of loop idioms,\n  * all assignments should occur in their own top-level statement to increase readability.\n  * With inner assignments like the one given above, it is difficult to see all places\n  * where a variable is set.\n  * </p>\n  * <p>\n- * Note: Check allows usage of the popular assignment in {@code while} idiom:\n+ * Note: Check allows usage of the popular assignment in loops:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MDgzNA==", "bodyText": "please keep indentation for code = 2 and add enclosing class for this example", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418440834", "createdAt": "2020-05-01T07:02:02Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -32,19 +32,28 @@\n  * {@code String s = Integer.toString(i = 2);}.\n  * </p>\n  * <p>\n- * Rationale: With the exception of {@code for} iterators and assignment in {@code while} idiom,\n+ * Rationale: With the exception of loop idioms,\n  * all assignments should occur in their own top-level statement to increase readability.\n  * With inner assignments like the one given above, it is difficult to see all places\n  * where a variable is set.\n  * </p>\n  * <p>\n- * Note: Check allows usage of the popular assignment in {@code while} idiom:\n+ * Note: Check allows usage of the popular assignment in loops:\n  * </p>\n  * <pre>\n  * String line;\n- * while ((line = bufferedReader.readLine()) != null) {\n- *   // process the line\n+ * while ((line = bufferedReader.readLine()) != null) { // OK\n+ *     // process the line", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MTA5OA==", "bodyText": "!((line = file.read()) != null)\nNo need for additional example complications, make simple like in while example", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418441098", "createdAt": "2020-05-01T07:03:16Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -32,19 +32,28 @@\n  * {@code String s = Integer.toString(i = 2);}.\n  * </p>\n  * <p>\n- * Rationale: With the exception of {@code for} iterators and assignment in {@code while} idiom,\n+ * Rationale: With the exception of loop idioms,\n  * all assignments should occur in their own top-level statement to increase readability.\n  * With inner assignments like the one given above, it is difficult to see all places\n  * where a variable is set.\n  * </p>\n  * <p>\n- * Note: Check allows usage of the popular assignment in {@code while} idiom:\n+ * Note: Check allows usage of the popular assignment in loops:\n  * </p>\n  * <pre>\n  * String line;\n- * while ((line = bufferedReader.readLine()) != null) {\n- *   // process the line\n+ * while ((line = bufferedReader.readLine()) != null) { // OK\n+ *     // process the line\n  * }\n+ *\n+ * for (;!((line = file.read()) != null);) { // OK", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MTEyNw==", "bodyText": "same here", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418441127", "createdAt": "2020-05-01T07:03:24Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -32,19 +32,28 @@\n  * {@code String s = Integer.toString(i = 2);}.\n  * </p>\n  * <p>\n- * Rationale: With the exception of {@code for} iterators and assignment in {@code while} idiom,\n+ * Rationale: With the exception of loop idioms,\n  * all assignments should occur in their own top-level statement to increase readability.\n  * With inner assignments like the one given above, it is difficult to see all places\n  * where a variable is set.\n  * </p>\n  * <p>\n- * Note: Check allows usage of the popular assignment in {@code while} idiom:\n+ * Note: Check allows usage of the popular assignment in loops:\n  * </p>\n  * <pre>\n  * String line;\n- * while ((line = bufferedReader.readLine()) != null) {\n- *   // process the line\n+ * while ((line = bufferedReader.readLine()) != null) { // OK\n+ *     // process the line\n  * }\n+ *\n+ * for (;!((line = file.read()) != null);) { // OK\n+ *     // process the line\n+ * }\n+ *\n+ * do {\n+ *     // process the line\n+ * }\n+ * while (!((line = file.read()) != null)); // OK", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MTQxNA==", "bodyText": "please remove whitespaces before right curly for 2 lines above to make it look consistent", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418441414", "createdAt": "2020-05-01T07:04:49Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -147,7 +156,9 @@\n      * towards the root.\n      */\n     private static final int[][] ALLOWED_ASSIGNMENT_IN_COMPARISON_CONTEXT = {\n-        {TokenTypes.EXPR, TokenTypes.LITERAL_WHILE, },\n+            {TokenTypes.EXPR, TokenTypes.LITERAL_WHILE, },\n+            {TokenTypes.EXPR, TokenTypes.FOR_CONDITION, },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MTcyMg==", "bodyText": "please make indentation here 2 as well, like in javadoc for class", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418441722", "createdAt": "2020-05-01T07:06:34Z", "author": {"login": "strkkk"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -255,11 +266,14 @@ private static boolean isInNoBraceControlStatement(DetailAST ast) {\n     }\n \n     /**\n-     * Tests whether the given AST is used in the \"assignment in while\" idiom.\n+     * Tests whether the given AST is used in the \"assignment in loop\" idiom.\n      * <pre>\n      * String line;\n      * while ((line = bufferedReader.readLine()) != null) {\n-     *    // process the line\n+     *     // process the line\n+     * }\n+     * for (;(value = reader.read()) != 0;) {\n+     *     // process", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0MjU2MA==", "bodyText": "will it report violation for weird case like\nString a = \"\";\nfor (;;(a = \"das\").concat()) {}\n\n?\nIt can be added to test inputs", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r418442560", "createdAt": "2020-05-01T07:10:44Z", "author": {"login": "strkkk"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/innerassignment/InputInnerAssignment.java", "diffHunk": "@@ -128,5 +128,47 @@ void method() throws IOException {\n         while (line < 3 || (line = file.read()) != null) {}\n         while (line < 3 & (line = file.read()) != null) {}\n         while (line < 3 | (line = file.read()) != null) {}\n+\n+        do{}\n+        while (!((line = file.read()) != null));\n+        do{}\n+        while ((line = file.read()) != null && line < 3);\n+        do{}\n+        while ((line = file.read()) != null && line < 3 && line > 5);\n+        do{}\n+        while ((line = file.read()) != null || line < 3);\n+        do{}\n+        while ((line = file.read()) != null || line < 3 || line > 5);\n+        do{}\n+        while ((line = file.read()) != null & line < 3);\n+        do{}\n+        while ((line = file.read()) != null & line < 3 & line > 5);\n+        do{}\n+        while ((line = file.read()) != null | line < 3);\n+        do{}\n+        while ((line = file.read()) != null | line < 3 | line > 5);\n+        do{}\n+        while (line < 3 && (line = file.read()) != null);\n+        do{}\n+        while (line < 3 || (line = file.read()) != null);\n+        do{}\n+        while (line < 3 & (line = file.read()) != null);\n+        do{}\n+        while (line < 3 | (line = file.read()) != null);\n+\n+        for (;!((line = file.read()) != null);) {}\n+        for (;(line = file.read()) != null && line < 3;) {}\n+        for (;(line = file.read()) != null && line < 3 && line > 5;) {}\n+        for (;(line = file.read()) != null || line < 3;) {}\n+        for (;(line = file.read()) != null || line < 3 || line > 5;) {}\n+        for (;(line = file.read()) != null & line < 3;) {}\n+        for (;(line = file.read()) != null & line < 3 & line > 5;) {}\n+        for (;(line = file.read()) != null | line < 3;) {}\n+        for (;(line = file.read()) != null | line < 3 | line > 5;) {}\n+        for (;line < 3 && (line = file.read()) != null;) {}\n+        for (;line < 3 || (line = file.read()) != null;) {}\n+        for (;line < 3 & (line = file.read()) != null;) {}\n+        for (;line < 3 | (line = file.read()) != null;) {}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56be00a55499b3ca195a479ed43a4acec367909a", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/56be00a55499b3ca195a479ed43a4acec367909a", "committedDate": "2020-04-29T20:57:09Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "768b0b1a62ee7277e4f2866dd5f374a73430768b", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/768b0b1a62ee7277e4f2866dd5f374a73430768b", "committedDate": "2020-05-02T16:03:50Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "768b0b1a62ee7277e4f2866dd5f374a73430768b", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/768b0b1a62ee7277e4f2866dd5f374a73430768b", "committedDate": "2020-05-02T16:03:50Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "c5b9cbed450e72ecbf9044babc419c1df58fe599", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c5b9cbed450e72ecbf9044babc419c1df58fe599", "committedDate": "2020-05-02T16:10:27Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5b9cbed450e72ecbf9044babc419c1df58fe599", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/c5b9cbed450e72ecbf9044babc419c1df58fe599", "committedDate": "2020-05-02T16:10:27Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "446c13dae057fdd97d2eafda28e6d47685238a78", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/446c13dae057fdd97d2eafda28e6d47685238a78", "committedDate": "2020-05-02T17:06:57Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTUwMTc4", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-404550178", "createdAt": "2020-05-02T18:28:06Z", "commit": {"oid": "446c13dae057fdd97d2eafda28e6d47685238a78"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "446c13dae057fdd97d2eafda28e6d47685238a78", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/446c13dae057fdd97d2eafda28e6d47685238a78", "committedDate": "2020-05-02T17:06:57Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "af8902cf2a08aea9da3d9e4024a4dcb5cf74e008", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/af8902cf2a08aea9da3d9e4024a4dcb5cf74e008", "committedDate": "2020-05-02T21:23:20Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTkyMjM3", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-404592237", "createdAt": "2020-05-03T08:04:12Z", "commit": {"oid": "af8902cf2a08aea9da3d9e4024a4dcb5cf74e008"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwODowNDoxMlrOGPpvfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwODowNDoxMlrOGPpvfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA2NTcyNg==", "bodyText": "please add // violation comment", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r419065726", "createdAt": "2020-05-03T08:04:12Z", "author": {"login": "strkkk"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/innerassignment/InputInnerAssignment.java", "diffHunk": "@@ -128,5 +128,50 @@ void method() throws IOException {\n         while (line < 3 || (line = file.read()) != null) {}\n         while (line < 3 & (line = file.read()) != null) {}\n         while (line < 3 | (line = file.read()) != null) {}\n+\n+        do{}\n+        while (!((line = file.read()) != null));\n+        do{}\n+        while ((line = file.read()) != null && line < 3);\n+        do{}\n+        while ((line = file.read()) != null && line < 3 && line > 5);\n+        do{}\n+        while ((line = file.read()) != null || line < 3);\n+        do{}\n+        while ((line = file.read()) != null || line < 3 || line > 5);\n+        do{}\n+        while ((line = file.read()) != null & line < 3);\n+        do{}\n+        while ((line = file.read()) != null & line < 3 & line > 5);\n+        do{}\n+        while ((line = file.read()) != null | line < 3);\n+        do{}\n+        while ((line = file.read()) != null | line < 3 | line > 5);\n+        do{}\n+        while (line < 3 && (line = file.read()) != null);\n+        do{}\n+        while (line < 3 || (line = file.read()) != null);\n+        do{}\n+        while (line < 3 & (line = file.read()) != null);\n+        do{}\n+        while (line < 3 | (line = file.read()) != null);\n+\n+        for (;!((line = file.read()) != null);) {}\n+        for (;(line = file.read()) != null && line < 3;) {}\n+        for (;(line = file.read()) != null && line < 3 && line > 5;) {}\n+        for (;(line = file.read()) != null || line < 3;) {}\n+        for (;(line = file.read()) != null || line < 3 || line > 5;) {}\n+        for (;(line = file.read()) != null & line < 3;) {}\n+        for (;(line = file.read()) != null & line < 3 & line > 5;) {}\n+        for (;(line = file.read()) != null | line < 3;) {}\n+        for (;(line = file.read()) != null | line < 3 | line > 5;) {}\n+        for (;line < 3 && (line = file.read()) != null;) {}\n+        for (;line < 3 || (line = file.read()) != null;) {}\n+        for (;line < 3 & (line = file.read()) != null;) {}\n+        for (;line < 3 | (line = file.read()) != null;) {}\n+\n+        String str1 = \"\";\n+        String str2 = \"cd\";\n+        for (;;(str1 = \"ab\").concat(str2)) {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af8902cf2a08aea9da3d9e4024a4dcb5cf74e008"}, "originalPosition": 48}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af8902cf2a08aea9da3d9e4024a4dcb5cf74e008", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/af8902cf2a08aea9da3d9e4024a4dcb5cf74e008", "committedDate": "2020-05-02T21:23:20Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/367e1e7d68065333a9dedd17ed9dca4b96bd2c98", "committedDate": "2020-05-03T12:08:17Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjE4NTg1", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-404618585", "createdAt": "2020-05-03T13:26:06Z", "commit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODY0NDk2", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-404864496", "createdAt": "2020-05-04T10:21:08Z", "commit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDIwODY5", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-414020869", "createdAt": "2020-05-19T00:23:14Z", "commit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwMDoyMzoxNVrOGXLqnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwMDoyNjozNFrOGXLt8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTU2NA==", "bodyText": "I find it odd that the while and do while use bufferedReader for their examples but the for loop does something else which I question if it really is a \"popular\" assignment. You assign flag a constant right before the condition check, while the others receive the result from a method that can be variable.", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r426961564", "createdAt": "2020-05-19T00:23:15Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -32,19 +32,29 @@\n  * {@code String s = Integer.toString(i = 2);}.\n  * </p>\n  * <p>\n- * Rationale: With the exception of {@code for} iterators and assignment in {@code while} idiom,\n+ * Rationale: With the exception of loop idioms,\n  * all assignments should occur in their own top-level statement to increase readability.\n  * With inner assignments like the one given above, it is difficult to see all places\n  * where a variable is set.\n  * </p>\n  * <p>\n- * Note: Check allows usage of the popular assignment in {@code while} idiom:\n+ * Note: Check allows usage of the popular assignments in loops:\n  * </p>\n  * <pre>\n  * String line;\n- * while ((line = bufferedReader.readLine()) != null) {\n+ * while ((line = bufferedReader.readLine()) != null) { // OK\n  *   // process the line\n  * }\n+ *\n+ * int flag;\n+ * for (;(flag = 1) &lt;= 0;) { // OK", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTk1OA==", "bodyText": "The opposite of above. Why not make both examples the same?\nAlso why did we add the for loop example but not the do-while?", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r426961958", "createdAt": "2020-05-19T00:24:50Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -255,11 +267,14 @@ private static boolean isInNoBraceControlStatement(DetailAST ast) {\n     }\n \n     /**\n-     * Tests whether the given AST is used in the \"assignment in while\" idiom.\n+     * Tests whether the given AST is used in the \"assignment in loop\" idiom.\n      * <pre>\n      * String line;\n      * while ((line = bufferedReader.readLine()) != null) {\n-     *    // process the line\n+     *   // process the line\n+     * }\n+     * for (;(line = bufferedReader.readLine()) != null;) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MjQxOA==", "bodyText": "Just a question, this should be another issue if it is identified as one.\nWill I atleast get a violation if I change line < 3 to line = 3 (assignment and not equals)?", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r426962418", "createdAt": "2020-05-19T00:26:34Z", "author": {"login": "rnveach"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/coding/innerassignment/InputInnerAssignment.java", "diffHunk": "@@ -128,5 +128,50 @@ void method() throws IOException {\n         while (line < 3 || (line = file.read()) != null) {}\n         while (line < 3 & (line = file.read()) != null) {}\n         while (line < 3 | (line = file.read()) != null) {}\n+\n+        do{}\n+        while (!((line = file.read()) != null));\n+        do{}\n+        while ((line = file.read()) != null && line < 3);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "367e1e7d68065333a9dedd17ed9dca4b96bd2c98", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/367e1e7d68065333a9dedd17ed9dca4b96bd2c98", "committedDate": "2020-05-03T12:08:17Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "8743c65b7b4f3664b21fda94de0a19715c73d3cd", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8743c65b7b4f3664b21fda94de0a19715c73d3cd", "committedDate": "2020-06-29T20:32:29Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8743c65b7b4f3664b21fda94de0a19715c73d3cd", "author": {"user": {"login": "DXTkastb", "name": "Kaustubh Dixit"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8743c65b7b4f3664b21fda94de0a19715c73d3cd", "committedDate": "2020-06-29T20:32:29Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "05e8423cb0c0ab68282f6a24ed109e67d04f8901", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05e8423cb0c0ab68282f6a24ed109e67d04f8901", "committedDate": "2020-11-17T15:01:55Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05e8423cb0c0ab68282f6a24ed109e67d04f8901", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05e8423cb0c0ab68282f6a24ed109e67d04f8901", "committedDate": "2020-11-17T15:01:55Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26", "committedDate": "2020-11-18T15:43:47Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MDI5OTAx", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-534029901", "createdAt": "2020-11-19T02:18:09Z", "commit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMjoxODowOVrOH2J9Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMjoyMToxNlrOH2KA4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU0ODI2Ng==", "bodyText": "Can we put the indentation back since there was no real change here?", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r526548266", "createdAt": "2020-11-19T02:18:09Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -158,7 +167,9 @@\n      * towards the root.\n      */\n     private static final int[][] ALLOWED_ASSIGNMENT_IN_COMPARISON_CONTEXT = {\n-        {TokenTypes.EXPR, TokenTypes.LITERAL_WHILE, },\n+            {TokenTypes.EXPR, TokenTypes.LITERAL_WHILE},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU0ODc3MA==", "bodyText": "while checking\n\nThis original wording is the correct usage. It is using the word as a \u00bfconjunction? instead of talking about the Java while keyword.", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r526548770", "createdAt": "2020-11-19T02:19:47Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -174,9 +185,9 @@\n     };\n \n     /**\n-     * The token types that are ignored while checking \"while-idiom\".\n+     * The token types that are ignored loop checking \"loop-idiom\".", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU0OTE0Mg==", "bodyText": "Please add space after do.", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r526549142", "createdAt": "2020-11-19T02:20:56Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -266,12 +277,19 @@ private static boolean isInNoBraceControlStatement(DetailAST ast) {\n     }\n \n     /**\n-     * Tests whether the given AST is used in the \"assignment in while\" idiom.\n+     * Tests whether the given AST is used in the \"assignment in loop\" idiom.\n      * <pre>\n      * String line;\n      * while ((line = bufferedReader.readLine()) != null) {\n-     *    // process the line\n+     *   // process the line\n+     * }\n+     * for (;(line = bufferedReader.readLine()) != null;) {\n+     *   // process the line\n+     * }\n+     * do{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU0OTIxOQ==", "bodyText": "Same here after while.", "url": "https://github.com/checkstyle/checkstyle/pull/8190#discussion_r526549219", "createdAt": "2020-11-19T02:21:16Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/InnerAssignmentCheck.java", "diffHunk": "@@ -266,12 +277,19 @@ private static boolean isInNoBraceControlStatement(DetailAST ast) {\n     }\n \n     /**\n-     * Tests whether the given AST is used in the \"assignment in while\" idiom.\n+     * Tests whether the given AST is used in the \"assignment in loop\" idiom.\n      * <pre>\n      * String line;\n      * while ((line = bufferedReader.readLine()) != null) {\n-     *    // process the line\n+     *   // process the line\n+     * }\n+     * for (;(line = bufferedReader.readLine()) != null;) {\n+     *   // process the line\n+     * }\n+     * do{\n+     *   // process the line\n      * }\n+     * while((line = bufferedReader.readLine()) != null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26"}, "originalPosition": 91}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/088f9c9c14f30ccdb1ebc6295ac48b497f8f2e26", "committedDate": "2020-11-18T15:43:47Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "296c4365ee885e24377ac5ad67e693be5d8feda1", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/296c4365ee885e24377ac5ad67e693be5d8feda1", "committedDate": "2020-11-19T14:49:12Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98f5361aa45d991724146f1aa85aba7bcff3390f", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/98f5361aa45d991724146f1aa85aba7bcff3390f", "committedDate": "2020-11-21T16:20:20Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "296c4365ee885e24377ac5ad67e693be5d8feda1", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/296c4365ee885e24377ac5ad67e693be5d8feda1", "committedDate": "2020-11-19T14:49:12Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}, "afterCommit": {"oid": "98f5361aa45d991724146f1aa85aba7bcff3390f", "author": {"user": {"login": "romani", "name": "Roman Ivanov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/98f5361aa45d991724146f1aa85aba7bcff3390f", "committedDate": "2020-11-21T16:20:20Z", "message": "Issue #6915: InnerAssignment: false positives on for and do-while loops"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDAzODA3", "url": "https://github.com/checkstyle/checkstyle/pull/8190#pullrequestreview-536003807", "createdAt": "2020-11-21T19:38:50Z", "commit": {"oid": "98f5361aa45d991724146f1aa85aba7bcff3390f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 557, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}