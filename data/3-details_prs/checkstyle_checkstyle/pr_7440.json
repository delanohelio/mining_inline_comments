{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4OTMyOTQ2", "number": 7440, "title": "Issue #7436: avoid using Locale.setDefault in tests", "bodyText": "Issue #7436\nSmall step to run tests in parallel. We need to get rid of the global state change in the tests.", "createdAt": "2020-01-03T10:00:37Z", "url": "https://github.com/checkstyle/checkstyle/pull/7440", "merged": true, "mergeCommit": {"oid": "9033d8e188abdb0343e7a777c6d551fed9ea5fbd"}, "closed": true, "closedAt": "2020-01-05T14:39:31Z", "author": {"login": "pbludov"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2tnXfAFqTMzODA2MTUxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3VFH7AFqTMzODM5MjUyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MDYxNTE1", "url": "https://github.com/checkstyle/checkstyle/pull/7440#pullrequestreview-338061515", "createdAt": "2020-01-03T12:35:34Z", "commit": {"oid": "2b1d969b3502d9265168ed5899e9279f019ad402"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b1d969b3502d9265168ed5899e9279f019ad402", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/2b1d969b3502d9265168ed5899e9279f019ad402", "committedDate": "2020-01-03T09:58:10Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}, "afterCommit": {"oid": "f3cb7b9cddb32c17f945589928ffa88d1d9b2667", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f3cb7b9cddb32c17f945589928ffa88d1d9b2667", "committedDate": "2020-01-03T14:13:00Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MjI1Nzgy", "url": "https://github.com/checkstyle/checkstyle/pull/7440#pullrequestreview-338225782", "createdAt": "2020-01-03T19:01:25Z", "commit": {"oid": "f3cb7b9cddb32c17f945589928ffa88d1d9b2667"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTowMToyNVrOFaHD1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTowMjoxNFrOFaHE7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkyMjk2Nw==", "bodyText": "TR and tr was replaced with tr_TR. Will this test both locales like before?", "url": "https://github.com/checkstyle/checkstyle/pull/7440#discussion_r362922967", "createdAt": "2020-01-03T19:01:25Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/api/ScopeTest.java", "diffHunk": "@@ -72,24 +71,15 @@ public void testMixedCaseSpaces() {\n         assertEquals(Scope.ANONINNER, Scope.getInstance(\"AnonInner\"), \"Invalid scope\");\n     }\n \n+    @DefaultLocale(\"tr_TR\")\n     @Test\n-    public void testMixedCaseSpacesWithDifferentLocales() {\n-        final Locale[] differentLocales = {new Locale(\"TR\", \"tr\") };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3cb7b9cddb32c17f945589928ffa88d1d9b2667"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkyMzI0NA==", "bodyText": "@romani Are you ok with this?\nWhen I originally suggested this I was under the impression we could specify the class, but this check only signifies the method name which can lead to false positives.", "url": "https://github.com/checkstyle/checkstyle/pull/7440#discussion_r362923244", "createdAt": "2020-01-03T19:02:14Z", "author": {"login": "rnveach"}, "path": "config/checkstyle_sevntu_checks.xml", "diffHunk": "@@ -216,5 +216,12 @@\n           <property name=\"methodName\" value=\"assert(True|False)\"/>\n           <property name=\"argumentCount\" value=\"1\"/>\n         </module>\n+        <module name=\"com.github.sevntu.checkstyle.checks.coding.ForbidCertainMethodCheck\">\n+          <!-- Disallow Locale.setDefault in tests.\n+            Use org.junitpioneer.jupiter.DefaultLocale annotation instead.\n+            See https://github.com/checkstyle/checkstyle/issues/7436 -->\n+          <property name=\"methodName\" value=\"setDefault\"/>\n+          <property name=\"argumentCount\" value=\"1-2\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3cb7b9cddb32c17f945589928ffa88d1d9b2667"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3cb7b9cddb32c17f945589928ffa88d1d9b2667", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f3cb7b9cddb32c17f945589928ffa88d1d9b2667", "committedDate": "2020-01-03T14:13:00Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}, "afterCommit": {"oid": "8de7a437e9a6da782c7a0261dacf61c6876d1126", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8de7a437e9a6da782c7a0261dacf61c6876d1126", "committedDate": "2020-01-04T11:26:22Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzUwNjk2", "url": "https://github.com/checkstyle/checkstyle/pull/7440#pullrequestreview-338350696", "createdAt": "2020-01-04T12:09:20Z", "commit": {"oid": "8de7a437e9a6da782c7a0261dacf61c6876d1126"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzcxNjcw", "url": "https://github.com/checkstyle/checkstyle/pull/7440#pullrequestreview-338371670", "createdAt": "2020-01-04T21:53:57Z", "commit": {"oid": "8de7a437e9a6da782c7a0261dacf61c6876d1126"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36cb2bd2e27ca52d22b4833c185c5004e015c122", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/36cb2bd2e27ca52d22b4833c185c5004e015c122", "committedDate": "2020-01-04T23:18:33Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8de7a437e9a6da782c7a0261dacf61c6876d1126", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8de7a437e9a6da782c7a0261dacf61c6876d1126", "committedDate": "2020-01-04T11:26:22Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}, "afterCommit": {"oid": "36cb2bd2e27ca52d22b4833c185c5004e015c122", "author": {"user": {"login": "pbludov", "name": "Pavel Bludov"}}, "url": "https://github.com/checkstyle/checkstyle/commit/36cb2bd2e27ca52d22b4833c185c5004e015c122", "committedDate": "2020-01-04T23:18:33Z", "message": "Issue #7436: avoid using Locale.setDefault in tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzkyNTIy", "url": "https://github.com/checkstyle/checkstyle/pull/7440#pullrequestreview-338392522", "createdAt": "2020-01-05T10:34:23Z", "commit": {"oid": "36cb2bd2e27ca52d22b4833c185c5004e015c122"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1193, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}