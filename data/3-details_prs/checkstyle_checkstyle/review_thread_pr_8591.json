{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxNjg2MDg4", "number": 8591, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNToxNjowN1rOEWlhsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMDowNVrOEXe1mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTE4OTYzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNToxNjowN1rOG97xgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNDo1ODo1NVrOG-Ba7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTY0OQ==", "bodyText": "something like:\n    private boolean search(DetailAST root, String xpath, Stack<DetailAST> nodes) {\n       boolean result = false;\n        if(xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n                nodes.push(root);\n                result = false;\n        } else {\n        if(root.hasChildren()) {\n            DetailAST child = root.getFirstChild();    \n            while(child!=null)\n            {\n                if(search(child, xpath, nodes)) {\n                    nodes.push(root);\n                    result = true;\n                    break;\n                }\n                child = child.getNextSibling();\n            }\n        }\n\n        }\n\n        return result;\n    }", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r467595649", "createdAt": "2020-08-09T15:16:07Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "diffHunk": "@@ -190,6 +191,63 @@ private void setColumnsInitialWidth() {\n         getColumn(\"Type\").setPreferredWidth(preferredTypeColumnWidth);\n     }\n \n+    /**\n+     * Search node by Xpath.\n+     * \n+     * @param root {@code DetailAST} root ast element\n+     * @param xpath {@code String} xpath query\n+     * @param nodes {@code Stack<DetailAST>} stack of nodes in selection path\n+     * @return {@code boolean} node found or not\n+     */\n+    private boolean search(DetailAST root, String xpath, Stack<DetailAST> nodes) {\n+        if(xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n+                nodes.push(root);\n+                return true;\n+        }\n+        \n+        if(root.hasChildren()) {\n+            DetailAST child = root.getFirstChild();    \n+            while(child!=null)\n+            {\n+                if(search(child, xpath, nodes)) {\n+                    nodes.push(root);\n+                    return true;\n+                }\n+                child = child.getNextSibling();\n+            }\n+        }\n+        return false;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY4ODE3Mw==", "bodyText": "Done", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r467688173", "createdAt": "2020-08-10T04:58:55Z", "author": {"login": "developerhb"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "diffHunk": "@@ -190,6 +191,63 @@ private void setColumnsInitialWidth() {\n         getColumn(\"Type\").setPreferredWidth(preferredTypeColumnWidth);\n     }\n \n+    /**\n+     * Search node by Xpath.\n+     * \n+     * @param root {@code DetailAST} root ast element\n+     * @param xpath {@code String} xpath query\n+     * @param nodes {@code Stack<DetailAST>} stack of nodes in selection path\n+     * @return {@code boolean} node found or not\n+     */\n+    private boolean search(DetailAST root, String xpath, Stack<DetailAST> nodes) {\n+        if(xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n+                nodes.push(root);\n+                return true;\n+        }\n+        \n+        if(root.hasChildren()) {\n+            DetailAST child = root.getFirstChild();    \n+            while(child!=null)\n+            {\n+                if(search(child, xpath, nodes)) {\n+                    nodes.push(root);\n+                    return true;\n+                }\n+                child = child.getNextSibling();\n+            }\n+        }\n+        return false;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTY0OQ=="}, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTE5MDgxOnYy", "diffSide": "LEFT", "path": "config/import-control.xml", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNToxNzoxMVrOG97yCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOToyNjozMlrOG-vwBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTc4Nw==", "bodyText": "expalin this update.\nif it is unrelated to your changes but non-required config - please send removal in separarte PR.", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r467595787", "createdAt": "2020-08-09T15:17:11Z", "author": {"login": "romani"}, "path": "config/import-control.xml", "diffHunk": "@@ -159,8 +159,8 @@\n     <!-- until https://github.com/checkstyle/checkstyle/issues/3095 -->\n     <allow pkg=\"antlr\"/>\n     <allow class=\"com.puppycrawl.tools.checkstyle.DetailAstImpl\"/>\n-    <allow class=\"java.nio.charset.StandardCharsets\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY1NDc3MQ==", "bodyText": "@romani I added <allow class=\"java.nio.charset.StandardCharsets\" /> in my previous PR #8317. Later on I removed the code which required this import, but forgot to remove from import-control.xml.\nShould I keep it in this PR or create a seperate PR for this?", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r467654771", "createdAt": "2020-08-10T01:23:53Z", "author": {"login": "developerhb"}, "path": "config/import-control.xml", "diffHunk": "@@ -159,8 +159,8 @@\n     <!-- until https://github.com/checkstyle/checkstyle/issues/3095 -->\n     <allow pkg=\"antlr\"/>\n     <allow class=\"com.puppycrawl.tools.checkstyle.DetailAstImpl\"/>\n-    <allow class=\"java.nio.charset.StandardCharsets\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTc4Nw=="}, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3MjI2NQ==", "bodyText": "Keep in this PR but please move this change to separate commit, commit should have \"minor:\" prefix. This PR Will have 2 commits", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r467672265", "createdAt": "2020-08-10T03:22:25Z", "author": {"login": "romani"}, "path": "config/import-control.xml", "diffHunk": "@@ -159,8 +159,8 @@\n     <!-- until https://github.com/checkstyle/checkstyle/issues/3095 -->\n     <allow pkg=\"antlr\"/>\n     <allow class=\"com.puppycrawl.tools.checkstyle.DetailAstImpl\"/>\n-    <allow class=\"java.nio.charset.StandardCharsets\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTc4Nw=="}, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY4NjUwNg==", "bodyText": "Okay @romani", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r467686506", "createdAt": "2020-08-10T04:49:29Z", "author": {"login": "developerhb"}, "path": "config/import-control.xml", "diffHunk": "@@ -159,8 +159,8 @@\n     <!-- until https://github.com/checkstyle/checkstyle/issues/3095 -->\n     <allow pkg=\"antlr\"/>\n     <allow class=\"com.puppycrawl.tools.checkstyle.DetailAstImpl\"/>\n-    <allow class=\"java.nio.charset.StandardCharsets\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTc4Nw=="}, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM0NTg5Mg==", "bodyText": "Please swap commits in order, functional fix should be last commit in your branch", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r468345892", "createdAt": "2020-08-11T06:05:10Z", "author": {"login": "romani"}, "path": "config/import-control.xml", "diffHunk": "@@ -159,8 +159,8 @@\n     <!-- until https://github.com/checkstyle/checkstyle/issues/3095 -->\n     <allow pkg=\"antlr\"/>\n     <allow class=\"com.puppycrawl.tools.checkstyle.DetailAstImpl\"/>\n-    <allow class=\"java.nio.charset.StandardCharsets\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTc4Nw=="}, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ0NzIzNg==", "bodyText": "done @romani", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r468447236", "createdAt": "2020-08-11T09:26:32Z", "author": {"login": "developerhb"}, "path": "config/import-control.xml", "diffHunk": "@@ -159,8 +159,8 @@\n     <!-- until https://github.com/checkstyle/checkstyle/issues/3095 -->\n     <allow pkg=\"antlr\"/>\n     <allow class=\"com.puppycrawl.tools.checkstyle.DetailAstImpl\"/>\n-    <allow class=\"java.nio.charset.StandardCharsets\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NTc4Nw=="}, "originalCommit": {"oid": "25d59aeab775a52b955bfcc2e7b714b67b87b7cc"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNjIzOTMxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwNjoxMjo1NlrOG-puMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOToyNjoyMVrOG-vvlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM0ODQ2Ng==", "bodyText": "\\n^ wrong xpath query", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r468348466", "createdAt": "2020-08-11T06:12:56Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "diffHunk": "@@ -190,6 +192,64 @@ private void setColumnsInitialWidth() {\n         getColumn(\"Type\").setPreferredWidth(preferredTypeColumnWidth);\n     }\n \n+    /**\n+     * Search node by Xpath.\n+     *\n+     * @param root {@code DetailAST} root ast element\n+     * @param xpath {@code String} xpath query\n+     * @param nodes {@code Deque<DetailAST>} stack of nodes in selection path\n+     * @return {@code boolean} node found or not\n+     */\n+    private static boolean search(DetailAST root, String xpath, Deque<DetailAST> nodes) {\n+        boolean result = false;\n+        if (xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n+            nodes.push(root);\n+            result = true;\n+        }\n+        else {\n+            if (root.hasChildren()) {\n+                DetailAST child = root.getFirstChild();\n+                while (child != null) {\n+                    if (search(child, xpath, nodes)) {\n+                        nodes.push(root);\n+                        result = true;\n+                        break;\n+                    }\n+                    child = child.getNextSibling();\n+                }\n+            }\n+        }\n+        return result;\n+    }\n+\n+    /**\n+     * Select Node by Xpath.\n+     */\n+    public void selectNodeByXpath() {\n+        final DetailAST rootAST = (DetailAST) tree.getModel().getRoot();\n+        if (rootAST.hasChildren()) {\n+            final String xpath = \"/EOF\" + xpathEditor.getText();\n+            final Deque<DetailAST> nodes = new ArrayDeque<>();\n+            if (search(rootAST, xpath, nodes)) {\n+                TreePath path = new TreePath(nodes.pop());\n+                while (!nodes.isEmpty()) {\n+                    path = path.pathByAddingChild(nodes.pop());\n+                    if (!tree.isExpanded(path)) {\n+                        tree.expandPath(path);\n+                    }\n+                    tree.setSelectionPath(path);\n+                    makeCodeSelection();\n+                }\n+            }\n+            else {\n+                xpathEditor.setText(xpathEditor.getText() + \"- wrong xpath query\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ddc5f8aaf7a5b6334979cc4f98fa748a8f011f"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ0NzEyNg==", "bodyText": "@romani done", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r468447126", "createdAt": "2020-08-11T09:26:21Z", "author": {"login": "developerhb"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "diffHunk": "@@ -190,6 +192,64 @@ private void setColumnsInitialWidth() {\n         getColumn(\"Type\").setPreferredWidth(preferredTypeColumnWidth);\n     }\n \n+    /**\n+     * Search node by Xpath.\n+     *\n+     * @param root {@code DetailAST} root ast element\n+     * @param xpath {@code String} xpath query\n+     * @param nodes {@code Deque<DetailAST>} stack of nodes in selection path\n+     * @return {@code boolean} node found or not\n+     */\n+    private static boolean search(DetailAST root, String xpath, Deque<DetailAST> nodes) {\n+        boolean result = false;\n+        if (xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n+            nodes.push(root);\n+            result = true;\n+        }\n+        else {\n+            if (root.hasChildren()) {\n+                DetailAST child = root.getFirstChild();\n+                while (child != null) {\n+                    if (search(child, xpath, nodes)) {\n+                        nodes.push(root);\n+                        result = true;\n+                        break;\n+                    }\n+                    child = child.getNextSibling();\n+                }\n+            }\n+        }\n+        return result;\n+    }\n+\n+    /**\n+     * Select Node by Xpath.\n+     */\n+    public void selectNodeByXpath() {\n+        final DetailAST rootAST = (DetailAST) tree.getModel().getRoot();\n+        if (rootAST.hasChildren()) {\n+            final String xpath = \"/EOF\" + xpathEditor.getText();\n+            final Deque<DetailAST> nodes = new ArrayDeque<>();\n+            if (search(rootAST, xpath, nodes)) {\n+                TreePath path = new TreePath(nodes.pop());\n+                while (!nodes.isEmpty()) {\n+                    path = path.pathByAddingChild(nodes.pop());\n+                    if (!tree.isExpanded(path)) {\n+                        tree.expandPath(path);\n+                    }\n+                    tree.setSelectionPath(path);\n+                    makeCodeSelection();\n+                }\n+            }\n+            else {\n+                xpathEditor.setText(xpathEditor.getText() + \"- wrong xpath query\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM0ODQ2Ng=="}, "originalCommit": {"oid": "c4ddc5f8aaf7a5b6334979cc4f98fa748a8f011f"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDU3OTQ2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMDowNVrOG_S3RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzowNToxMlrOG_gXQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMjUzMg==", "bodyText": "This if is redundant. When the root has no children, root.getFirstChild() will return null and the entire loop will be skipped.", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r469022532", "createdAt": "2020-08-12T06:00:05Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "diffHunk": "@@ -190,6 +192,64 @@ private void setColumnsInitialWidth() {\n         getColumn(\"Type\").setPreferredWidth(preferredTypeColumnWidth);\n     }\n \n+    /**\n+     * Search node by Xpath.\n+     *\n+     * @param root {@code DetailAST} root ast element\n+     * @param xpath {@code String} xpath query\n+     * @param nodes {@code Deque<DetailAST>} stack of nodes in selection path\n+     * @return {@code boolean} node found or not\n+     */\n+    private static boolean search(DetailAST root, String xpath, Deque<DetailAST> nodes) {\n+        boolean result = false;\n+        if (xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n+            nodes.push(root);\n+            result = true;\n+        }\n+        else {\n+            if (root.hasChildren()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c1db5c368a3a95a36f5a0f7166b00d672b813ad"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI0MzcxNA==", "bodyText": "@pbludov Done", "url": "https://github.com/checkstyle/checkstyle/pull/8591#discussion_r469243714", "createdAt": "2020-08-12T13:05:12Z", "author": {"login": "developerhb"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/gui/TreeTable.java", "diffHunk": "@@ -190,6 +192,64 @@ private void setColumnsInitialWidth() {\n         getColumn(\"Type\").setPreferredWidth(preferredTypeColumnWidth);\n     }\n \n+    /**\n+     * Search node by Xpath.\n+     *\n+     * @param root {@code DetailAST} root ast element\n+     * @param xpath {@code String} xpath query\n+     * @param nodes {@code Deque<DetailAST>} stack of nodes in selection path\n+     * @return {@code boolean} node found or not\n+     */\n+    private static boolean search(DetailAST root, String xpath, Deque<DetailAST> nodes) {\n+        boolean result = false;\n+        if (xpath.equals(XpathQueryGenerator.generateXpathQuery(root))) {\n+            nodes.push(root);\n+            result = true;\n+        }\n+        else {\n+            if (root.hasChildren()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMjUzMg=="}, "originalCommit": {"oid": "2c1db5c368a3a95a36f5a0f7166b00d672b813ad"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 754, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}