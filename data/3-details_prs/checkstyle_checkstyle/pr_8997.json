{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0MTQzOTA4", "number": 8997, "title": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation", "bodyText": "Fixes Issue #8979\nDiff Regression projects: https://gist.githubusercontent.com/Abhishek-kumar09/0745ecf11934e0214b9187f9d4896e4a/raw/7994fb09f0b5d073f1937e62faecdd5cb3908e64/project-to-test-on.properties\nDiff Regression config: https://gist.githubusercontent.com/Abhishek-kumar09/0745ecf11934e0214b9187f9d4896e4a/raw/7e9f169832e45c826fb99e72b3ff08f32765243a/my_check.xml", "createdAt": "2020-11-19T18:18:19Z", "url": "https://github.com/checkstyle/checkstyle/pull/8997", "merged": true, "mergeCommit": {"oid": "86c337c183fc8d7fecd7291beca5751fd66d33e2"}, "closed": true, "closedAt": "2021-01-22T14:14:53Z", "author": {"login": "Abhishek-kumar09"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfN2twgBqjQwMjU3OTYyMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdypycJgFqTU3NDI5NTIzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40d0803fee2f0df3a07bfb74d392f0ad2d543efd", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/40d0803fee2f0df3a07bfb74d392f0ad2d543efd", "committedDate": "2020-11-19T18:14:48Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "6a9e35c50dc651cab1a5e0d621b455a6d1ab1264", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6a9e35c50dc651cab1a5e0d621b455a6d1ab1264", "committedDate": "2020-11-23T04:57:19Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a9e35c50dc651cab1a5e0d621b455a6d1ab1264", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6a9e35c50dc651cab1a5e0d621b455a6d1ab1264", "committedDate": "2020-11-23T04:57:19Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "762e792b96b9188b8a5eeed27a5a6ebfdbb8ae64", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/762e792b96b9188b8a5eeed27a5a6ebfdbb8ae64", "committedDate": "2020-11-25T04:54:26Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTkwMDg4", "url": "https://github.com/checkstyle/checkstyle/pull/8997#pullrequestreview-538590088", "createdAt": "2020-11-25T15:04:36Z", "commit": {"oid": "762e792b96b9188b8a5eeed27a5a6ebfdbb8ae64"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowNDozNlrOH53hdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowNDozNlrOH53hdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ0MDU2Ng==", "bodyText": "please add file with invalid Array indentation, you can quickly get different types of arrays in your regression report.", "url": "https://github.com/checkstyle/checkstyle/pull/8997#discussion_r530440566", "createdAt": "2020-11-25T15:04:36Z", "author": {"login": "romani"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationValidArrayInitIndentTwo.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/* Config:                                                                  //indent:0 exp:0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "762e792b96b9188b8a5eeed27a5a6ebfdbb8ae64"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "762e792b96b9188b8a5eeed27a5a6ebfdbb8ae64", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/762e792b96b9188b8a5eeed27a5a6ebfdbb8ae64", "committedDate": "2020-11-25T04:54:26Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "30b8a1c53d80b34efb531137725af45ec695ecac", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/30b8a1c53d80b34efb531137725af45ec695ecac", "committedDate": "2020-11-27T18:30:39Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30b8a1c53d80b34efb531137725af45ec695ecac", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/30b8a1c53d80b34efb531137725af45ec695ecac", "committedDate": "2020-11-27T18:30:39Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "b4ab0ff6a853e1498e61e26f50fc402736e905a2", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b4ab0ff6a853e1498e61e26f50fc402736e905a2", "committedDate": "2020-11-30T07:07:04Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4ab0ff6a853e1498e61e26f50fc402736e905a2", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/b4ab0ff6a853e1498e61e26f50fc402736e905a2", "committedDate": "2020-11-30T07:07:04Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "a9c96c11cd6d2e28e7d8bd47eee4d824ef3388a1", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a9c96c11cd6d2e28e7d8bd47eee4d824ef3388a1", "committedDate": "2020-12-02T19:18:24Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9c96c11cd6d2e28e7d8bd47eee4d824ef3388a1", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a9c96c11cd6d2e28e7d8bd47eee4d824ef3388a1", "committedDate": "2020-12-02T19:18:24Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "39516bb0df6d7c9ea71b0662615d67b43637b05a", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/39516bb0df6d7c9ea71b0662615d67b43637b05a", "committedDate": "2020-12-21T18:24:57Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NTgxMDgx", "url": "https://github.com/checkstyle/checkstyle/pull/8997#pullrequestreview-556581081", "createdAt": "2020-12-21T18:29:50Z", "commit": {"oid": "39516bb0df6d7c9ea71b0662615d67b43637b05a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NjEyNTY0", "url": "https://github.com/checkstyle/checkstyle/pull/8997#pullrequestreview-556612564", "createdAt": "2020-12-21T19:27:20Z", "commit": {"oid": "39516bb0df6d7c9ea71b0662615d67b43637b05a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxOToyNzoyMVrOIJjbBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxOToyODo0OFrOIJjdVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg4ODQ1Mw==", "bodyText": "curlyIndent is returning the expected indentation for the left and right curlies.\nIf the parent of ARRAY_INIT isn't an ARRAY_INIT (which is almost a non-brace), then how can we use brace adjustment here which is only to be used for braces. Shouldn't basicOffset or lineWrappingIndentation be used here instead?", "url": "https://github.com/checkstyle/checkstyle/pull/8997#discussion_r546888453", "createdAt": "2020-12-21T19:27:21Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/ArrayInitHandler.java", "diffHunk": "@@ -74,7 +75,16 @@ protected DetailAST getLeftCurly() {\n \n     @Override\n     protected IndentLevel curlyIndent() {\n-        final IndentLevel level = new IndentLevel(getIndent(), getBraceAdjustment());\n+        int offset = 0;\n+\n+        final DetailAST lcurly = getLeftCurly();\n+\n+        if (isOnStartOfLine(lcurly)\n+            && !TokenUtil.isOfType(lcurly.getParent(), TokenTypes.ARRAY_INIT)) {\n+            offset = getBraceAdjustment();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39516bb0df6d7c9ea71b0662615d67b43637b05a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg4OTA0Nw==", "bodyText": "If you are just comparing one type, then why don't you just use an equal sign? I am not seeing a need to use the util method here.", "url": "https://github.com/checkstyle/checkstyle/pull/8997#discussion_r546889047", "createdAt": "2020-12-21T19:28:48Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/indentation/ArrayInitHandler.java", "diffHunk": "@@ -74,7 +75,16 @@ protected DetailAST getLeftCurly() {\n \n     @Override\n     protected IndentLevel curlyIndent() {\n-        final IndentLevel level = new IndentLevel(getIndent(), getBraceAdjustment());\n+        int offset = 0;\n+\n+        final DetailAST lcurly = getLeftCurly();\n+\n+        if (isOnStartOfLine(lcurly)\n+            && !TokenUtil.isOfType(lcurly.getParent(), TokenTypes.ARRAY_INIT)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39516bb0df6d7c9ea71b0662615d67b43637b05a"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39516bb0df6d7c9ea71b0662615d67b43637b05a", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/39516bb0df6d7c9ea71b0662615d67b43637b05a", "committedDate": "2020-12-21T18:24:57Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "1f4dff3bc54e6b6d315c85cd69ede7b4e6c9942e", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1f4dff3bc54e6b6d315c85cd69ede7b4e6c9942e", "committedDate": "2020-12-21T20:02:47Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f3605601223413ab6983e249451ffd026944bf2", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6f3605601223413ab6983e249451ffd026944bf2", "committedDate": "2021-01-18T23:52:10Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f4dff3bc54e6b6d315c85cd69ede7b4e6c9942e", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/1f4dff3bc54e6b6d315c85cd69ede7b4e6c9942e", "committedDate": "2020-12-21T20:02:47Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}, "afterCommit": {"oid": "6f3605601223413ab6983e249451ffd026944bf2", "author": {"user": {"login": "Abhishek-kumar09", "name": "Abhishek Kumar"}}, "url": "https://github.com/checkstyle/checkstyle/commit/6f3605601223413ab6983e249451ffd026944bf2", "committedDate": "2021-01-18T23:52:10Z", "message": "Issue #8979: fix for 'array initialization rcurly' has incorrect indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc0Mjk1MjMy", "url": "https://github.com/checkstyle/checkstyle/pull/8997#pullrequestreview-574295232", "createdAt": "2021-01-22T14:14:39Z", "commit": {"oid": "6f3605601223413ab6983e249451ffd026944bf2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1421, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}