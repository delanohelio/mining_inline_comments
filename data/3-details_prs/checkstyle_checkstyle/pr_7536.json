{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjgxMDg3", "number": 7536, "title": "Issue #6104: fix GenericWhitespaceCheck for ctor calls", "bodyText": "#6104\nReport https://strkkk.github.io/checkstyle/6104/index.html\nReport after update https://strkkk.github.io/checkstyle/6104_2/index.html", "createdAt": "2020-02-06T02:46:51Z", "url": "https://github.com/checkstyle/checkstyle/pull/7536", "merged": true, "mergeCommit": {"oid": "1a2d4c2bfbd0e9b86e51d5215f20fbecc4c20778"}, "closed": true, "closedAt": "2020-02-11T18:14:16Z", "author": {"login": "strkkk"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC5LHwAFqTM1NTc2NTU5Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDV0IQAFqTM1Njg4MDgzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NzY1NTk2", "url": "https://github.com/checkstyle/checkstyle/pull/7536#pullrequestreview-355765596", "createdAt": "2020-02-10T08:50:25Z", "commit": {"oid": "888dc6dae13b1b764af48c516792bd650f6d5411"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwODo1MDoyNVrOFnd3-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwODo1MDoyNVrOFnd3-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyODI0OA==", "bodyText": "Please mark these lines with the // violation comment.", "url": "https://github.com/checkstyle/checkstyle/pull/7536#discussion_r376928248", "createdAt": "2020-02-10T08:50:25Z", "author": {"login": "pbludov"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/whitespace/genericwhitespace/InputGenericWhitespaceDefault.java", "diffHunk": "@@ -77,5 +77,9 @@ public void beforeAndAfter() {\n         Map<Class<?>, Integer> a = new HashMap<Class<?>, Integer>();\n         Map<Class<?>, Integer> b = (Map<Class<?>, Integer>) a;\n     }\n+    Object ok = new <String>Object();\n+    Object notOkStart = new<String>Object();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "888dc6dae13b1b764af48c516792bd650f6d5411"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "888dc6dae13b1b764af48c516792bd650f6d5411", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/888dc6dae13b1b764af48c516792bd650f6d5411", "committedDate": "2020-02-06T02:44:11Z", "message": "Issue #6104: fix GenericWhitespaceCheck for ctor calls"}, "afterCommit": {"oid": "588c8d535cca2ae30da6dbf067675a95544208cd", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/588c8d535cca2ae30da6dbf067675a95544208cd", "committedDate": "2020-02-10T09:03:07Z", "message": "Issue #6104: fix GenericWhitespaceCheck for ctor calls"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1Nzc1NjE2", "url": "https://github.com/checkstyle/checkstyle/pull/7536#pullrequestreview-355775616", "createdAt": "2020-02-10T09:08:06Z", "commit": {"oid": "588c8d535cca2ae30da6dbf067675a95544208cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MDc4Nzcw", "url": "https://github.com/checkstyle/checkstyle/pull/7536#pullrequestreview-356078770", "createdAt": "2020-02-10T16:27:58Z", "commit": {"oid": "588c8d535cca2ae30da6dbf067675a95544208cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNjoyNzo1OFrOFnsvIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNjoyNzo1OFrOFnsvIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE3MTc0NA==", "bodyText": "When is it not identifier?\nAnd does this cover things like new OuterClass.InnerClass() or new package.Class().", "url": "https://github.com/checkstyle/checkstyle/pull/7536#discussion_r377171744", "createdAt": "2020-02-10T16:27:58Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/whitespace/GenericWhitespaceCheck.java", "diffHunk": "@@ -229,6 +229,16 @@ else if (!isCharacterValidAfterGenericEnd(charAfter)) {\n         }\n     }\n \n+    /**\n+     * Checks if generic is before constructor invocation.\n+     * @param ast ast\n+     * @return true if generic before a constructor invocation\n+     */\n+    private static boolean isGenericBeforeCtor(DetailAST ast) {\n+        return ast.getParent().getParent().getType() == TokenTypes.LITERAL_NEW\n+                && ast.getParent().getNextSibling().getType() == TokenTypes.IDENT;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "588c8d535cca2ae30da6dbf067675a95544208cd"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MTA1MjEz", "url": "https://github.com/checkstyle/checkstyle/pull/7536#pullrequestreview-356105213", "createdAt": "2020-02-10T17:00:51Z", "commit": {"oid": "588c8d535cca2ae30da6dbf067675a95544208cd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzowMDo1MVrOFnt_VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNzowMDo1MVrOFnt_VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE5MjI3Nw==", "bodyText": "Please remove upper comment completely.\nIt now becomes a bit misleading.\nPlease update doc https://checkstyle.org/config_whitespace.html#GenericWhitespace at description to make it\n- should not be preceded with whitespace when it is precede method name or constructor\n- should not be preceded with whitespace when following type name.\n\nAnd\nshould be followed with whitespace in almost all cases, except diamond operators and when preceding method name or contructor.\n\nPlease add example of correct ctor to Examples with correct spacing: under example for method", "url": "https://github.com/checkstyle/checkstyle/pull/7536#discussion_r377192277", "createdAt": "2020-02-10T17:00:51Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/whitespace/GenericWhitespaceCheck.java", "diffHunk": "@@ -219,7 +219,7 @@ private void processSingleGeneric(DetailAST ast, String line, int after) {\n         //    Collections.<Object>emptySet();\n         //                        ^\n         //                        +--- whitespace not allowed\n-        if (isGenericBeforeMethod(ast)) {\n+        if (isGenericBeforeMethod(ast) || isGenericBeforeCtor(ast)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "588c8d535cca2ae30da6dbf067675a95544208cd"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ad3b7be1908dc7fe0ab295d478a868ed7606ac1", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8ad3b7be1908dc7fe0ab295d478a868ed7606ac1", "committedDate": "2020-02-10T18:57:35Z", "message": "Issue #6104: corrections"}, "afterCommit": {"oid": "189849ba6dda1ccbe1e37656d461c0c90d139e6a", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/189849ba6dda1ccbe1e37656d461c0c90d139e6a", "committedDate": "2020-02-11T08:31:15Z", "message": "Issue #6104: fix GenericWhitespaceCheck for ctor calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59c4186c60b6886bdfdbc65e7f7c781676b9537f", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/59c4186c60b6886bdfdbc65e7f7c781676b9537f", "committedDate": "2020-02-11T09:00:42Z", "message": "Issue #6104: fix GenericWhitespaceCheck for ctor calls"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "189849ba6dda1ccbe1e37656d461c0c90d139e6a", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/189849ba6dda1ccbe1e37656d461c0c90d139e6a", "committedDate": "2020-02-11T08:31:15Z", "message": "Issue #6104: fix GenericWhitespaceCheck for ctor calls"}, "afterCommit": {"oid": "59c4186c60b6886bdfdbc65e7f7c781676b9537f", "author": {"user": {"login": "strkkk", "name": "Andrei Paikin"}}, "url": "https://github.com/checkstyle/checkstyle/commit/59c4186c60b6886bdfdbc65e7f7c781676b9537f", "committedDate": "2020-02-11T09:00:42Z", "message": "Issue #6104: fix GenericWhitespaceCheck for ctor calls"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODAyOTMz", "url": "https://github.com/checkstyle/checkstyle/pull/7536#pullrequestreview-356802933", "createdAt": "2020-02-11T16:27:29Z", "commit": {"oid": "59c4186c60b6886bdfdbc65e7f7c781676b9537f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODgwODM0", "url": "https://github.com/checkstyle/checkstyle/pull/7536#pullrequestreview-356880834", "createdAt": "2020-02-11T18:12:48Z", "commit": {"oid": "59c4186c60b6886bdfdbc65e7f7c781676b9537f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1250, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}