{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MTE1ODg4", "number": 8175, "title": "Issue #8048: Extract logic for token type checking to separate method", "bodyText": "Resolves #8048", "createdAt": "2020-04-23T18:49:38Z", "url": "https://github.com/checkstyle/checkstyle/pull/8175", "merged": true, "mergeCommit": {"oid": "69ebc814c00d6b6764c5462b546f3d2a214ec35d"}, "closed": true, "closedAt": "2020-08-10T19:50:33Z", "author": {"login": "shashwatj07"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca0UsngBqjMyNzAyMTk3NzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9nsZNgFqTQ2NDUzMDc2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "32f5064b487ac449feb5ad4c499d33c841ccea6b", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/32f5064b487ac449feb5ad4c499d33c841ccea6b", "committedDate": "2020-04-23T14:36:09Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/377f97973d95e7c7cd92fafa7facfc4b8807fee5", "committedDate": "2020-04-24T16:45:08Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzU2MDEx", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-400356011", "createdAt": "2020-04-25T04:26:14Z", "commit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoyNjoxNFrOGLwE_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoyNjoxNFrOGLwE_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NTIzMQ==", "bodyText": "From #8048 (comment): I still think that a declarative programming approach with streams is a much more elegant implementation than this.", "url": "https://github.com/checkstyle/checkstyle/pull/8175#discussion_r414975231", "createdAt": "2020-04-25T04:26:14Z", "author": {"login": "wltan"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/TokenUtil.java", "diffHunk": "@@ -269,4 +269,23 @@ public static boolean areOnSameLine(DetailAST ast1, DetailAST ast2) {\n         return ast1.getLineNo() == ast2.getLineNo();\n     }\n \n+    /**\n+     * Determines if the AST belongs to the given types.\n+     *\n+     * @param type the Token Type to check\n+     * @param types the acceptable types\n+     *\n+     * @return true if type matches one of the given types.\n+     */\n+    public static boolean isOfType(int type, int... types) {\n+        boolean result = false;\n+        for (int t : types) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MTMzODQ1", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-404133845", "createdAt": "2020-05-01T12:20:32Z", "commit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxMjoyMDozMlrOGPIY1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxMjoyMjo0NVrOGPIbHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUxOTI1Mw==", "bodyText": "it is better to create two separate tests with corresponding names", "url": "https://github.com/checkstyle/checkstyle/pull/8175#discussion_r418519253", "createdAt": "2020-05-01T12:20:32Z", "author": {"login": "timurt"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/utils/TokenUtilTest.java", "diffHunk": "@@ -277,4 +278,18 @@ public void testForEachChild() {\n         assertEquals(secondSibling, firstChild, \"Mismatched child node\");\n     }\n \n+    @Test\n+    public void testIsOfTypeTrue() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUxOTgzOA==", "bodyText": "totally agree with @wltan", "url": "https://github.com/checkstyle/checkstyle/pull/8175#discussion_r418519838", "createdAt": "2020-05-01T12:22:45Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/TokenUtil.java", "diffHunk": "@@ -269,4 +269,23 @@ public static boolean areOnSameLine(DetailAST ast1, DetailAST ast2) {\n         return ast1.getLineNo() == ast2.getLineNo();\n     }\n \n+    /**\n+     * Determines if the AST belongs to the given types.\n+     *\n+     * @param type the Token Type to check\n+     * @param types the acceptable types\n+     *\n+     * @return true if type matches one of the given types.\n+     */\n+    public static boolean isOfType(int type, int... types) {\n+        boolean result = false;\n+        for (int t : types) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NTIzMQ=="}, "originalCommit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "377f97973d95e7c7cd92fafa7facfc4b8807fee5", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/377f97973d95e7c7cd92fafa7facfc4b8807fee5", "committedDate": "2020-04-24T16:45:08Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "05a194aeea1dbada28409ac41329f5d66aa2be03", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05a194aeea1dbada28409ac41329f5d66aa2be03", "committedDate": "2020-05-01T14:28:28Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MjY0Nzg2", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-404264786", "createdAt": "2020-05-01T16:43:32Z", "commit": {"oid": "05a194aeea1dbada28409ac41329f5d66aa2be03"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNjo0MzozMlrOGPO5KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNjo0MzozMlrOGPO5KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYyNTgzMw==", "bodyText": "please reuse function you wrote above", "url": "https://github.com/checkstyle/checkstyle/pull/8175#discussion_r418625833", "createdAt": "2020-05-01T16:43:32Z", "author": {"login": "timurt"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/TokenUtil.java", "diffHunk": "@@ -269,4 +269,29 @@ public static boolean areOnSameLine(DetailAST ast1, DetailAST ast2) {\n         return ast1.getLineNo() == ast2.getLineNo();\n     }\n \n+    /**\n+     * Determines if the token type belongs to the given types.\n+     *\n+     * @param type the Token Type to check\n+     * @param types the acceptable types\n+     *\n+     * @return true if type matches one of the given types.\n+     */\n+    public static boolean isOfType(int type, int... types) {\n+        return Arrays.stream(types).anyMatch(tokenType -> tokenType == type);\n+    }\n+\n+    /**\n+     * Determines if the AST belongs to the given types.\n+     *\n+     * @param ast the AST node to check\n+     * @param types the acceptable types\n+     *\n+     * @return true if type matches one of the given types.\n+     */\n+    public static boolean isOfType(DetailAST ast, int... types) {\n+        return ast != null\n+                && Arrays.stream(types).anyMatch(tokenType -> tokenType == ast.getType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a194aeea1dbada28409ac41329f5d66aa2be03"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05a194aeea1dbada28409ac41329f5d66aa2be03", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/05a194aeea1dbada28409ac41329f5d66aa2be03", "committedDate": "2020-05-01T14:28:28Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "201c32df85248139b21b38b7d6e53e994cf853d9", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/201c32df85248139b21b38b7d6e53e994cf853d9", "committedDate": "2020-05-01T16:52:49Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MjkxNjY0", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-404291664", "createdAt": "2020-05-01T17:33:23Z", "commit": {"oid": "201c32df85248139b21b38b7d6e53e994cf853d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NjYzODcx", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-404663871", "createdAt": "2020-05-03T22:33:39Z", "commit": {"oid": "201c32df85248139b21b38b7d6e53e994cf853d9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "201c32df85248139b21b38b7d6e53e994cf853d9", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/201c32df85248139b21b38b7d6e53e994cf853d9", "committedDate": "2020-05-01T16:52:49Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "f3a3f43a225e8498b58c7f732090766f959833bd", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f3a3f43a225e8498b58c7f732090766f959833bd", "committedDate": "2020-05-11T09:51:14Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NzQxNTUw", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-417741550", "createdAt": "2020-05-25T14:19:17Z", "commit": {"oid": "f3a3f43a225e8498b58c7f732090766f959833bd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNDoxOToxOFrOGaCpmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNDoxOToxOFrOGaCpmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk1OTU3Ng==", "bodyText": "please restore single node verification to use ==, it is more concise and shorter and performance is better.", "url": "https://github.com/checkstyle/checkstyle/pull/8175#discussion_r429959576", "createdAt": "2020-05-25T14:19:18Z", "author": {"login": "romani"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/ScopeUtil.java", "diffHunk": "@@ -253,20 +243,18 @@ public static boolean isOuterMostType(DetailAST node) {\n     public static boolean isLocalVariableDef(DetailAST node) {\n         boolean localVariableDef = false;\n         // variable declaration?\n-        if (node.getType() == TokenTypes.VARIABLE_DEF) {\n+        if (TokenUtil.isOfType(node, TokenTypes.VARIABLE_DEF)) {\n             final DetailAST parent = node.getParent();\n-            final int type = parent.getType();\n-            localVariableDef = type == TokenTypes.SLIST\n-                    || type == TokenTypes.FOR_INIT\n-                    || type == TokenTypes.FOR_EACH_CLAUSE;\n+            localVariableDef = TokenUtil.isOfType(parent, TokenTypes.SLIST,\n+                                TokenTypes.FOR_INIT, TokenTypes.FOR_EACH_CLAUSE);\n         }\n         // catch parameter?\n-        if (node.getType() == TokenTypes.PARAMETER_DEF) {\n+        if (TokenUtil.isOfType(node, TokenTypes.PARAMETER_DEF)) {\n             final DetailAST parent = node.getParent();\n-            localVariableDef = parent.getType() == TokenTypes.LITERAL_CATCH;\n+            localVariableDef = TokenUtil.isOfType(parent.getType(), TokenTypes.LITERAL_CATCH);\n         }\n \n-        if (node.getType() == TokenTypes.RESOURCE) {\n+        if (TokenUtil.isOfType(node, TokenTypes.RESOURCE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3a3f43a225e8498b58c7f732090766f959833bd"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNjA0OTEx", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-421604911", "createdAt": "2020-06-01T05:44:10Z", "commit": {"oid": "f3a3f43a225e8498b58c7f732090766f959833bd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTo0NDoxMVrOGc_V8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTo0NDoxMVrOGc_V8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA1MTEyMw==", "bodyText": "I'd like to have a dedicated method for Class/Interface/Enum/Annotation checking.\nSomething like TokenUtil.isTypeDeclaration(tokenType)", "url": "https://github.com/checkstyle/checkstyle/pull/8175#discussion_r433051123", "createdAt": "2020-06-01T05:44:11Z", "author": {"login": "pbludov"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/utils/ScopeUtil.java", "diffHunk": "@@ -70,18 +70,17 @@ public static Scope getSurroundingScope(DetailAST node) {\n              token != null;\n              token = token.getParent()) {\n             final int type = token.getType();\n-            if (type == TokenTypes.CLASS_DEF\n-                || type == TokenTypes.INTERFACE_DEF\n-                || type == TokenTypes.ANNOTATION_DEF\n-                || type == TokenTypes.ENUM_DEF) {\n+            if (TokenUtil.isOfType(type, TokenTypes.CLASS_DEF,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3a3f43a225e8498b58c7f732090766f959833bd"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3a3f43a225e8498b58c7f732090766f959833bd", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f3a3f43a225e8498b58c7f732090766f959833bd", "committedDate": "2020-05-11T09:51:14Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "a41d1fac8355cdba55a3e705a5536aeec572e63a", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a41d1fac8355cdba55a3e705a5536aeec572e63a", "committedDate": "2020-06-27T15:39:20Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a41d1fac8355cdba55a3e705a5536aeec572e63a", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/a41d1fac8355cdba55a3e705a5536aeec572e63a", "committedDate": "2020-06-27T15:39:20Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "72a0a6bb1ea6597faa396ba17b144dc49bf339c9", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/72a0a6bb1ea6597faa396ba17b144dc49bf339c9", "committedDate": "2020-08-10T12:46:32Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "689d886b0dc4d5379c188033f593e5795a485e1b", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/689d886b0dc4d5379c188033f593e5795a485e1b", "committedDate": "2020-08-10T13:31:04Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72a0a6bb1ea6597faa396ba17b144dc49bf339c9", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/72a0a6bb1ea6597faa396ba17b144dc49bf339c9", "committedDate": "2020-08-10T12:46:32Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}, "afterCommit": {"oid": "689d886b0dc4d5379c188033f593e5795a485e1b", "author": {"user": {"login": "shashwatj07", "name": "Shashwat Jaiswal"}}, "url": "https://github.com/checkstyle/checkstyle/commit/689d886b0dc4d5379c188033f593e5795a485e1b", "committedDate": "2020-08-10T13:31:04Z", "message": "Issue #8048: Extract logic for token type checking to separate method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MzQzMTIw", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-464343120", "createdAt": "2020-08-10T15:32:40Z", "commit": {"oid": "689d886b0dc4d5379c188033f593e5795a485e1b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTMwNzY1", "url": "https://github.com/checkstyle/checkstyle/pull/8175#pullrequestreview-464530765", "createdAt": "2020-08-10T19:50:15Z", "commit": {"oid": "689d886b0dc4d5379c188033f593e5795a485e1b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 535, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}