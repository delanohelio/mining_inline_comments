{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1OTU2MTkz", "number": 8002, "title": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines", "bodyText": "Fixes issue #2813\nCause of the issue\nOriginally in this, we retrieved all the new line nodes (\\n) in the Javadoc and considered their 2nd next sibling as our description. The problem with this technique was that it was failing to consider the first description in the example below .i.e Description 1 because according to the AST Description 1 is not 2nd next sibling of \\n, hence it was not being violated as specified in the issue.\n    /**\n     * @param s\n     * Description 1.\n     * Description 2.\n     */\n     public void test(String s) {}\n\nSolution\nTo solve this problem, I changed the traversing technique. Now we are retrieving all the LEADING_ASTRISK nodes, as from my observation each description is followed by a LEADIN_ASTERISK. The important change in this technique is that a LEADING_ASTRISK is always followed by either a NEWLINE or TEXT node. Hence I had to remove the condition textNode != null in method visitJavadocToken to achieve 100% branch coverage as I couldn't find any case where LEADING_ASTRISK was not followed by NEWLINE\nNote\n/**\n * @param s\n *                  Some description here // not a violation\n */\npublic void test() {}\n\nI didn't consider the above case as a violation because it has minimum indentation of 4 char and many of the projects have indentations greater than min length. So we cannot provide this check by default. Either we'll need to add a new property for this or we'll need to change the violated Javadoc in the all the projects.\nRegression Report\nhttps://gaurav-punjabi.github.io/checkstyle/issue-2813/index.html", "createdAt": "2020-03-30T23:07:03Z", "url": "https://github.com/checkstyle/checkstyle/pull/8002", "merged": true, "mergeCommit": {"oid": "a781a6608e270210c9ed07cc3d7fa465eb3c319e"}, "closed": true, "closedAt": "2020-05-03T02:26:31Z", "author": {"login": "Gaurav-Punjabi"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcS3K8VgBqjMxODA4OTc2NDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdhbHLAFqTQwNDU3NTkzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00a6090d68a44313a3fe63347462889d262e3db6", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/00a6090d68a44313a3fe63347462889d262e3db6", "committedDate": "2020-03-30T22:40:38Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "59a12a790eb4c258e36caf989fb719becb88c833", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/59a12a790eb4c258e36caf989fb719becb88c833", "committedDate": "2020-03-30T23:33:06Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59a12a790eb4c258e36caf989fb719becb88c833", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/59a12a790eb4c258e36caf989fb719becb88c833", "committedDate": "2020-03-30T23:33:06Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "f18bfec5111401598042bdf4ea253955fda5fb80", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f18bfec5111401598042bdf4ea253955fda5fb80", "committedDate": "2020-04-03T20:10:24Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTA3MDk4", "url": "https://github.com/checkstyle/checkstyle/pull/8002#pullrequestreview-399907098", "createdAt": "2020-04-24T12:37:28Z", "commit": {"oid": "f18bfec5111401598042bdf4ea253955fda5fb80"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjozNzo1NFrOGLVsPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjo0MDo1MFrOGLVy-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU0MjkxMA==", "bodyText": "Please order lines.", "url": "https://github.com/checkstyle/checkstyle/pull/8002#discussion_r414542910", "createdAt": "2020-04-24T12:37:54Z", "author": {"login": "rnveach"}, "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTagContinuationIndentationCheckTest.java", "diffHunk": "@@ -93,4 +93,17 @@ public void testCheckWithOffset3() throws Exception {\n                 expected);\n     }\n \n+    @Test\n+    public void testCheckWithDescription() throws Exception {\n+        final DefaultConfiguration checkConfig =\n+                createModuleConfig(JavadocTagContinuationIndentationCheck.class);\n+        final String[] expected = {\n+            \"8: \" + getCheckMessage(MSG_KEY, 4),\n+            \"10: \" + getCheckMessage(MSG_KEY, 4),\n+            \"9: \" + getCheckMessage(MSG_KEY, 4),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18bfec5111401598042bdf4ea253955fda5fb80"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU0NDYzNQ==", "bodyText": "Does it matter if line is started with non-text like <b> tag or something similar? Can you ensure the tests have an example.", "url": "https://github.com/checkstyle/checkstyle/pull/8002#discussion_r414544635", "createdAt": "2020-04-24T12:40:50Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTagContinuationIndentationCheck.java", "diffHunk": "@@ -103,9 +103,8 @@ public void visitJavadocToken(DetailNode ast) {\n         if (!isInlineDescription(ast)) {\n             final List<DetailNode> textNodes = getAllNewlineNodes(ast);\n             for (DetailNode newlineNode : textNodes) {\n-                final DetailNode textNode = JavadocUtil.getNextSibling(JavadocUtil\n-                        .getNextSibling(newlineNode));\n-                if (textNode != null && textNode.getType() == JavadocTokenTypes.TEXT) {\n+                final DetailNode textNode = JavadocUtil.getNextSibling(newlineNode);\n+                if (textNode.getType() == JavadocTokenTypes.TEXT) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f18bfec5111401598042bdf4ea253955fda5fb80"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f18bfec5111401598042bdf4ea253955fda5fb80", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/f18bfec5111401598042bdf4ea253955fda5fb80", "committedDate": "2020-04-03T20:10:24Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "217a7c06a0da2a1ed182020aef69fe45f5c8b802", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/217a7c06a0da2a1ed182020aef69fe45f5c8b802", "committedDate": "2020-04-24T13:15:16Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "217a7c06a0da2a1ed182020aef69fe45f5c8b802", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/217a7c06a0da2a1ed182020aef69fe45f5c8b802", "committedDate": "2020-04-24T13:15:16Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "8d199396c4c8da567f98be62914d9b5e1034ffb6", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8d199396c4c8da567f98be62914d9b5e1034ffb6", "committedDate": "2020-04-24T18:07:52Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d199396c4c8da567f98be62914d9b5e1034ffb6", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/8d199396c4c8da567f98be62914d9b5e1034ffb6", "committedDate": "2020-04-24T18:07:52Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "ce8876bfc15096544fa4928aabd8d94309c102c6", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ce8876bfc15096544fa4928aabd8d94309c102c6", "committedDate": "2020-04-24T18:39:24Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTYyMTY3", "url": "https://github.com/checkstyle/checkstyle/pull/8002#pullrequestreview-401962167", "createdAt": "2020-04-28T15:36:39Z", "commit": {"oid": "ce8876bfc15096544fa4928aabd8d94309c102c6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTozNjozOVrOGNaP7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTozODoxNVrOGNaWMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxNDczNQ==", "bodyText": "intended => indented\nHappens twice on this line.", "url": "https://github.com/checkstyle/checkstyle/pull/8002#discussion_r416714735", "createdAt": "2020-04-28T15:36:39Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTagContinuationIndentationCheck.java", "diffHunk": "@@ -30,7 +30,10 @@\n \n /**\n  * <p>\n- * Checks the indentation of the continuation lines in at-clauses.\n+ * Checks the indentation of the continuation lines in at-clauses. That is whether the continued\n+ * description of at clauses should be intended or not. If the text is not properly intended it", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce8876bfc15096544fa4928aabd8d94309c102c6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxNjMzNw==", "bodyText": "Please add a sentence describing what a continued description is, which is when the description spans/starts past the line with the tag.", "url": "https://github.com/checkstyle/checkstyle/pull/8002#discussion_r416716337", "createdAt": "2020-04-28T15:38:15Z", "author": {"login": "rnveach"}, "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/javadoc/JavadocTagContinuationIndentationCheck.java", "diffHunk": "@@ -30,7 +30,10 @@\n \n /**\n  * <p>\n- * Checks the indentation of the continuation lines in at-clauses.\n+ * Checks the indentation of the continuation lines in at-clauses. That is whether the continued\n+ * description of at clauses should be intended or not. If the text is not properly intended it", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce8876bfc15096544fa4928aabd8d94309c102c6"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce8876bfc15096544fa4928aabd8d94309c102c6", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/ce8876bfc15096544fa4928aabd8d94309c102c6", "committedDate": "2020-04-24T18:39:24Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "478a292e501673a8dae9b93ab2eeab866b1e11ee", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/478a292e501673a8dae9b93ab2eeab866b1e11ee", "committedDate": "2020-04-28T15:45:13Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "478a292e501673a8dae9b93ab2eeab866b1e11ee", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/478a292e501673a8dae9b93ab2eeab866b1e11ee", "committedDate": "2020-04-28T15:45:13Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "956fce650952548d62ad750e6a69749b76edac58", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/956fce650952548d62ad750e6a69749b76edac58", "committedDate": "2020-04-28T15:45:46Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMTM3NDEy", "url": "https://github.com/checkstyle/checkstyle/pull/8002#pullrequestreview-402137412", "createdAt": "2020-04-28T19:16:57Z", "commit": {"oid": "956fce650952548d62ad750e6a69749b76edac58"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOToxNjo1N1rOGNjKLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOToxNjo1N1rOGNjKLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg2MDcxOQ==", "bodyText": "Please a test cases:\n\nwith missing asterisks\n\n  * @param s\n    Description 1.\n\nwith missing space after asterisk(s)\n\n  * @param s\n   *Description 1.\n   ******Description 2.\n\nwith multiple asterisks\n\n  * @param s\n  **** Description 1.\nIt is OK to ignore some weird cases (there should be other checks to validate asterisks), but there should be no false positives and no crashes.", "url": "https://github.com/checkstyle/checkstyle/pull/8002#discussion_r416860719", "createdAt": "2020-04-28T19:16:57Z", "author": {"login": "pbludov"}, "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/javadoc/javadoctagcontinuationindentation/InputJavadocTagContinuationIndentationDescription.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package com.puppycrawl.tools.checkstyle.checks.javadoc.javadoctagcontinuationindentation;\n+\n+/** Config: default */\n+public class InputJavadocTagContinuationIndentationDescription {\n+    /**\n+     * General Description here.\n+     *\n+     * @param s\n+     * Description 1. // violation\n+     * Description 2. // violation\n+     * Description 3. // violation\n+     *                         Description 4 with extra indentation.\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "956fce650952548d62ad750e6a69749b76edac58"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "612e420cdbf3087af6db20da5349bbd3be923f43", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/612e420cdbf3087af6db20da5349bbd3be923f43", "committedDate": "2020-04-28T19:33:17Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "956fce650952548d62ad750e6a69749b76edac58", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/956fce650952548d62ad750e6a69749b76edac58", "committedDate": "2020-04-28T15:45:46Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}, "afterCommit": {"oid": "612e420cdbf3087af6db20da5349bbd3be923f43", "author": {"user": {"login": "Gaurav-Punjabi", "name": "Gaurav Punjabi"}}, "url": "https://github.com/checkstyle/checkstyle/commit/612e420cdbf3087af6db20da5349bbd3be923f43", "committedDate": "2020-04-28T19:33:17Z", "message": "Issue #2813: JavadocTagContinuationIndentation doesn't report some lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMzY3ODQy", "url": "https://github.com/checkstyle/checkstyle/pull/8002#pullrequestreview-402367842", "createdAt": "2020-04-29T05:11:43Z", "commit": {"oid": "612e420cdbf3087af6db20da5349bbd3be923f43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTc1OTM2", "url": "https://github.com/checkstyle/checkstyle/pull/8002#pullrequestreview-404575936", "createdAt": "2020-05-03T02:26:23Z", "commit": {"oid": "612e420cdbf3087af6db20da5349bbd3be923f43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 621, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}