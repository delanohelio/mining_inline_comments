{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMDE1MjYx", "number": 649, "title": "Restore map position and zoom level on configuration change.", "bodyText": "Fixes #605.\nThe map position and zoom level are now stored in the MapContainerViewModel and are used to restore the map state after configuration changes.\n@gino-m thanks very much for your help with this. LMK what you think. I'm not entirely convinced by the class name GroundCameraPosition but couldn't think of anything better.", "createdAt": "2020-12-17T17:28:13Z", "url": "https://github.com/google/ground-android/pull/649", "merged": true, "mergeCommit": {"oid": "43912497e6f8a7b4468e149cee7b52d9eb51f302"}, "closed": true, "closedAt": "2020-12-21T12:44:07Z", "author": {"login": "dturner"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnYr2dAFqTU1NTUwODYwMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoVT6rAFqTU1NjM1MjMyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTA4NjAw", "url": "https://github.com/google/ground-android/pull/649#pullrequestreview-555508600", "createdAt": "2020-12-18T14:03:37Z", "commit": {"oid": "65a27d88824e1e89e69b8908f8da7bbc61556ef6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDowMzozOFrOIIkCew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDowNTozM1rOIIkG7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg0OTk3OQ==", "bodyText": "Please add copyright header.", "url": "https://github.com/google/ground-android/pull/649#discussion_r545849979", "createdAt": "2020-12-18T14:03:38Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/GroundCameraPosition.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.google.android.gnd.ui.map;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65a27d88824e1e89e69b8908f8da7bbc61556ef6"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MDUyNA==", "bodyText": "We haven't been prefixing classes with Ground since the package name sufficiently disambiguates. Could we use CameraPosition instead?", "url": "https://github.com/google/ground-android/pull/649#discussion_r545850524", "createdAt": "2020-12-18T14:04:37Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/GroundCameraPosition.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.google.android.gnd.ui.map;\n+\n+import com.google.android.gnd.model.feature.Point;\n+\n+public class GroundCameraPosition {\n+\n+  private final Point target;\n+  private final Float zoomLevel;\n+\n+  public GroundCameraPosition(Point target, Float zoomLevel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65a27d88824e1e89e69b8908f8da7bbc61556ef6"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MTAwOA==", "bodyText": "Strike \"viewport\", since it implies the bounds are returned; better just \"camera position\".", "url": "https://github.com/google/ground-android/pull/649#discussion_r545851008", "createdAt": "2020-12-18T14:05:23Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/MapAdapter.java", "diffHunk": "@@ -37,15 +37,21 @@\n    */\n   Observable<Point> getDragInteractions();\n \n-  /** Returns a stream that emits the viewport center on each camera movement. */\n-  Observable<Point> getCameraMoves();\n+  /** Returns a stream that emits the viewport camera position on each camera movement. */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65a27d88824e1e89e69b8908f8da7bbc61556ef6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1MTExOA==", "bodyText": "Repositions the camera.", "url": "https://github.com/google/ground-android/pull/649#discussion_r545851118", "createdAt": "2020-12-18T14:05:33Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/MapAdapter.java", "diffHunk": "@@ -37,15 +37,21 @@\n    */\n   Observable<Point> getDragInteractions();\n \n-  /** Returns a stream that emits the viewport center on each camera movement. */\n-  Observable<Point> getCameraMoves();\n+  /** Returns a stream that emits the viewport camera position on each camera movement. */\n+  Observable<GroundCameraPosition> getCameraMoves();\n \n   /** Enables map gestures like pan and zoom. */\n   void enable();\n \n   /** Disables all map gestures like pan and zoom. */\n   void disable();\n \n+  /**\n+   * Repositions the viewport camera position.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65a27d88824e1e89e69b8908f8da7bbc61556ef6"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f2c7af36cbc67fd2a38d119a178e5dd8bd1bc42", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/3f2c7af36cbc67fd2a38d119a178e5dd8bd1bc42", "committedDate": "2020-12-21T11:08:15Z", "message": "WIP Map Fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8255c8ac1d9314a36ca2ea5ba04cb9e436d5e949", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/8255c8ac1d9314a36ca2ea5ba04cb9e436d5e949", "committedDate": "2020-12-21T11:08:31Z", "message": "Restore map position and zoom level on configuration change. Fixes #605"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e46608143a6d9f7c8e05673190bc742b1d0e5818", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/e46608143a6d9f7c8e05673190bc742b1d0e5818", "committedDate": "2020-12-21T11:08:31Z", "message": "Address feedback. Fix checkstyle issues."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b179bf3de45ddcec61ec4ebcddba100ab8f6c232", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/b179bf3de45ddcec61ec4ebcddba100ab8f6c232", "committedDate": "2020-12-21T11:03:18Z", "message": "Address feedback. Fix checkstyle issues."}, "afterCommit": {"oid": "e46608143a6d9f7c8e05673190bc742b1d0e5818", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/e46608143a6d9f7c8e05673190bc742b1d0e5818", "committedDate": "2020-12-21T11:08:31Z", "message": "Address feedback. Fix checkstyle issues."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzUyMzIx", "url": "https://github.com/google/ground-android/pull/649#pullrequestreview-556352321", "createdAt": "2020-12-21T12:43:58Z", "commit": {"oid": "e46608143a6d9f7c8e05673190bc742b1d0e5818"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1530, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}