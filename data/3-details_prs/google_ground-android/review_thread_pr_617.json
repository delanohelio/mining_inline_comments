{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MDQ3Nzky", "number": 617, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMjowOVrOE1Kh3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNTozNToyOVrOE4fzVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0MTgyNDk1OnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMjowOVrOHtSLlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMTozNzowMFrOHuqtIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NTg0NQ==", "bodyText": "Can we use Guava's checkNotNull instead? It can be statically imported from Preconditions.", "url": "https://github.com/google/ground-android/pull/617#discussion_r517245845", "createdAt": "2020-11-04T10:32:09Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationFragment.java", "diffHunk": "@@ -211,7 +209,13 @@ private void observeMultipleChoiceClicks(MultipleChoiceFieldViewModel viewModel)\n \n   private void onShowDialog(\n       Field field, Optional<Response> currentResponse, Consumer<Optional<Response>> consumer) {\n-    Cardinality cardinality = field.getMultipleChoice().getCardinality();\n+\n+    MultipleChoice multipleChoice = field.getMultipleChoice();\n+    if (multipleChoice == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY5NjIyNg==", "bodyText": "Great suggestion. Replaced if (x == null){ throw NPE(message); } with Preconditions.checkNotNull(x, message) here and throughout.", "url": "https://github.com/google/ground-android/pull/617#discussion_r518696226", "createdAt": "2020-11-06T11:37:00Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationFragment.java", "diffHunk": "@@ -211,7 +209,13 @@ private void observeMultipleChoiceClicks(MultipleChoiceFieldViewModel viewModel)\n \n   private void onShowDialog(\n       Field field, Optional<Response> currentResponse, Consumer<Optional<Response>> consumer) {\n-    Cardinality cardinality = field.getMultipleChoice().getCardinality();\n+\n+    MultipleChoice multipleChoice = field.getMultipleChoice();\n+    if (multipleChoice == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NTg0NQ=="}, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0MTgyOTE2OnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMzoxN1rOHtSOOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNDowMzo0M1rOHuvQWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NjUyMg==", "bodyText": "Alternatively:\nreturn Optional.fromNullable(originalObservation).map(o -> o.getResponses().getResponse(fieldId));", "url": "https://github.com/google/ground-android/pull/617#discussion_r517246522", "createdAt": "2020-11-04T10:33:17Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "diffHunk": "@@ -149,7 +150,11 @@ void initialize(EditObservationFragmentArgs args) {\n \n   Optional<Response> getSavedOrOriginalResponse(String fieldId) {\n     if (responses.isEmpty()) {\n-      return originalObservation.getResponses().getResponse(fieldId);\n+      if (originalObservation == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcwNjkyOA==", "bodyText": "I don't think this works because when originalObservation is null an Optional<Observation> would be returned rather than the required Optional<Response>.", "url": "https://github.com/google/ground-android/pull/617#discussion_r518706928", "createdAt": "2020-11-06T11:59:40Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "diffHunk": "@@ -149,7 +150,11 @@ void initialize(EditObservationFragmentArgs args) {\n \n   Optional<Response> getSavedOrOriginalResponse(String fieldId) {\n     if (responses.isEmpty()) {\n-      return originalObservation.getResponses().getResponse(fieldId);\n+      if (originalObservation == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NjUyMg=="}, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyMzQzNw==", "bodyText": "Out of curiosity, have you tried and it doesn't compile? When originalObservation is null, Optional.fromNullable(originalObservation) will be Optional.empty(). I think the generic closure is inferred from the type returned by the lambda in map().", "url": "https://github.com/google/ground-android/pull/617#discussion_r518723437", "createdAt": "2020-11-06T12:35:00Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "diffHunk": "@@ -149,7 +150,11 @@ void initialize(EditObservationFragmentArgs args) {\n \n   Optional<Response> getSavedOrOriginalResponse(String fieldId) {\n     if (responses.isEmpty()) {\n-      return originalObservation.getResponses().getResponse(fieldId);\n+      if (originalObservation == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NjUyMg=="}, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2MzIwNA==", "bodyText": "I tried it and it doesn't compile.", "url": "https://github.com/google/ground-android/pull/617#discussion_r518763204", "createdAt": "2020-11-06T13:50:57Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "diffHunk": "@@ -149,7 +150,11 @@ void initialize(EditObservationFragmentArgs args) {\n \n   Optional<Response> getSavedOrOriginalResponse(String fieldId) {\n     if (responses.isEmpty()) {\n-      return originalObservation.getResponses().getResponse(fieldId);\n+      if (originalObservation == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NjUyMg=="}, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc3MDc3Ng==", "bodyText": "Ok, thanks for checking!", "url": "https://github.com/google/ground-android/pull/617#discussion_r518770776", "createdAt": "2020-11-06T14:03:43Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "diffHunk": "@@ -149,7 +150,11 @@ void initialize(EditObservationFragmentArgs args) {\n \n   Optional<Response> getSavedOrOriginalResponse(String fieldId) {\n     if (responses.isEmpty()) {\n-      return originalObservation.getResponses().getResponse(fieldId);\n+      if (originalObservation == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NjUyMg=="}, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0MTgzMTMxOnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/MultipleChoiceFieldLayout.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMzo1M1rOHtSPiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMzo1M1rOHtSPiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0Njg1OQ==", "bodyText": "Please run formatter to harmonize formatting.", "url": "https://github.com/google/ground-android/pull/617#discussion_r517246859", "createdAt": "2020-11-04T10:33:53Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/MultipleChoiceFieldLayout.java", "diffHunk": "@@ -53,6 +58,9 @@ protected void onFinishInflate() {\n         .setOnClickListener(\n             v -> {\n               if (editText.isFocused()) {\n+                if (showDialogListener == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MTE4Mzk3OnYy", "diffSide": "RIGHT", "path": "gnd/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMTo1MjozNFrOHurJ2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjowOTo1MlrOHurpXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcwMzU3Nw==", "bodyText": "Is it possible to exclude patterns instead of full class/package name?", "url": "https://github.com/google/ground-android/pull/617#discussion_r518703577", "createdAt": "2020-11-06T11:52:34Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/build.gradle", "diffHunk": "@@ -103,6 +107,42 @@ android {\n     hilt {\n         enableTransformForLocalTests = true\n     }\n+    DomainObjectSet<BaseVariant> variants = getApplicationVariants()\n+    variants.addAll(getTestVariants())\n+    variants.addAll(getUnitTestVariants())\n+    variants.configureEach { variant ->\n+        variant.getJavaCompileProvider().configure {\n+            options.errorprone {\n+                check(\"NullAway\", CheckSeverity.ERROR)\n+                option(\"NullAway:AnnotatedPackages\", \"com.google.android.gnd\")\n+\n+                // Treat generated classes from Hilt and SafeArgs as unannotated.\n+                option(\"NullAway:TreatGeneratedAsUnannotated\", true)\n+\n+                // Ignore generated classes from databinding, as well as Room and Firebase classes.\n+                option(\"NullAway:UnannotatedSubPackages\",\n+                        \"com.google.android.gnd.databinding,\" +\n+                        \"com.google.android.gnd.persistence.local.room,\" +\n+                        \"com.google.android.gnd.persistence.remote.firestore,\" +\n+                        \"com.google.android.gnd.persistence.remote.firestore.schema\")\n+\n+                // TODO: Figure out a better way of excluding classes generated by the SafeArgs\n+                //  plugin. Suggestions: patch NullAway to ignore methods annotated with\n+                //  @SuppressWarnings(\"unchecked\") or patch SafeArgs to annotate the generated\n+                //  classes with @Generated\n+                option(\"NullAway:ExcludedClasses\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bdfe9d2afb31bd16cd9af49bb6677c5e872fb6"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcxMTY0NQ==", "bodyText": "Annoyingly no. It is possible to use regex to exclude package names but not for class names.\nConfig options are here: https://github.com/uber/NullAway/wiki/Configuration", "url": "https://github.com/google/ground-android/pull/617#discussion_r518711645", "createdAt": "2020-11-06T12:09:52Z", "author": {"login": "dturner"}, "path": "gnd/build.gradle", "diffHunk": "@@ -103,6 +107,42 @@ android {\n     hilt {\n         enableTransformForLocalTests = true\n     }\n+    DomainObjectSet<BaseVariant> variants = getApplicationVariants()\n+    variants.addAll(getTestVariants())\n+    variants.addAll(getUnitTestVariants())\n+    variants.configureEach { variant ->\n+        variant.getJavaCompileProvider().configure {\n+            options.errorprone {\n+                check(\"NullAway\", CheckSeverity.ERROR)\n+                option(\"NullAway:AnnotatedPackages\", \"com.google.android.gnd\")\n+\n+                // Treat generated classes from Hilt and SafeArgs as unannotated.\n+                option(\"NullAway:TreatGeneratedAsUnannotated\", true)\n+\n+                // Ignore generated classes from databinding, as well as Room and Firebase classes.\n+                option(\"NullAway:UnannotatedSubPackages\",\n+                        \"com.google.android.gnd.databinding,\" +\n+                        \"com.google.android.gnd.persistence.local.room,\" +\n+                        \"com.google.android.gnd.persistence.remote.firestore,\" +\n+                        \"com.google.android.gnd.persistence.remote.firestore.schema\")\n+\n+                // TODO: Figure out a better way of excluding classes generated by the SafeArgs\n+                //  plugin. Suggestions: patch NullAway to ignore methods annotated with\n+                //  @SuppressWarnings(\"unchecked\") or patch SafeArgs to annotate the generated\n+                //  classes with @Generated\n+                option(\"NullAway:ExcludedClasses\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcwMzU3Nw=="}, "originalCommit": {"oid": "07bdfe9d2afb31bd16cd9af49bb6677c5e872fb6"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MTMxODg0OnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozNzoxMFrOHusbhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozOToyOFrOHusf3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyNDQ4Nw==", "bodyText": "Can we static import Preconditions throughout to make these more inline friendly and reduce line-wrapping?", "url": "https://github.com/google/ground-android/pull/617#discussion_r518724487", "createdAt": "2020-11-06T12:37:10Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "diffHunk": "@@ -141,7 +143,8 @@ private Completable insertOrUpdateField(String formId, Element.Type elementType,\n             Observable.just(field)\n                 .filter(__ -> field.getMultipleChoice() != null)\n                 .flatMapCompletable(\n-                    __ -> insertOrUpdateMultipleChoice(field.getId(), field.getMultipleChoice())))\n+                    __ -> insertOrUpdateMultipleChoice(field.getId(),\n+                        Preconditions.checkNotNull(field.getMultipleChoice()))))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18ecd64317e2ba9cc6a8a41cef05416ebf88c120"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyNTU5Ng==", "bodyText": "Ah right, sorry I get what you mean now. I'll update throughout.", "url": "https://github.com/google/ground-android/pull/617#discussion_r518725596", "createdAt": "2020-11-06T12:39:28Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "diffHunk": "@@ -141,7 +143,8 @@ private Completable insertOrUpdateField(String formId, Element.Type elementType,\n             Observable.just(field)\n                 .filter(__ -> field.getMultipleChoice() != null)\n                 .flatMapCompletable(\n-                    __ -> insertOrUpdateMultipleChoice(field.getId(), field.getMultipleChoice())))\n+                    __ -> insertOrUpdateMultipleChoice(field.getId(),\n+                        Preconditions.checkNotNull(field.getMultipleChoice()))))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyNDQ4Nw=="}, "originalCommit": {"oid": "18ecd64317e2ba9cc6a8a41cef05416ebf88c120"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MTU0MTc4OnYy", "diffSide": "RIGHT", "path": "cloudbuild.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzo0NDoxNFrOHuui3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzo0NDoxNFrOHuui3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc1OTEzMw==", "bodyText": "This should not be indented.", "url": "https://github.com/google/ground-android/pull/617#discussion_r518759133", "createdAt": "2020-11-06T13:44:14Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloudbuild.yaml", "diffHunk": "@@ -33,6 +33,13 @@\n \n steps:\n \n+  - name: 'gcr.io/$PROJECT_ID/android:28'\n+      id: 'Check javac version'\n+      args:\n+        - '-c'\n+        - |\n+          javac -version", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c335483accdaff1fc938668e25b4b6102b5c227f"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3Njc1ODI1OnYy", "diffSide": "RIGHT", "path": "cloud-builder/Dockerfile-base", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNToyOTo1NlrOHyc56w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDo0MDoyNVrOHyw4xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDQyNw==", "bodyText": "Please revert", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664427", "createdAt": "2020-11-13T05:29:56Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloud-builder/Dockerfile-base", "diffHunk": "@@ -69,6 +69,6 @@ RUN yes | sdkmanager \\\n     \"extras;android;m2repository\" \\\n     \"extras;google;m2repository\" \\\n     \"extras;google;google_play_services\" \\\n-    \"build-tools;28.0.3\"\n+    \"build-tools;30.0.2\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5MTgxMw==", "bodyText": "Done", "url": "https://github.com/google/ground-android/pull/617#discussion_r522991813", "createdAt": "2020-11-13T14:40:25Z", "author": {"login": "dturner"}, "path": "cloud-builder/Dockerfile-base", "diffHunk": "@@ -69,6 +69,6 @@ RUN yes | sdkmanager \\\n     \"extras;android;m2repository\" \\\n     \"extras;google;m2repository\" \\\n     \"extras;google;google_play_services\" \\\n-    \"build-tools;28.0.3\"\n+    \"build-tools;30.0.2\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDQyNw=="}, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3Njc1ODU4OnYy", "diffSide": "RIGHT", "path": "cloud-builder/Dockerfile-sdk", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNTozMDowNlrOHyc6GQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDo0MDoxNVrOHyw4Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDQ3Mw==", "bodyText": "Please revert", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664473", "createdAt": "2020-11-13T05:30:06Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloud-builder/Dockerfile-sdk", "diffHunk": "@@ -19,7 +19,7 @@\n # base Docker image.\n \n ARG project_id\n-FROM gcr.io/$project_id/android:base\n+FROM gcr.io/$project_id/android:newjavac_base", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5MTcxMQ==", "bodyText": "Done", "url": "https://github.com/google/ground-android/pull/617#discussion_r522991711", "createdAt": "2020-11-13T14:40:15Z", "author": {"login": "dturner"}, "path": "cloud-builder/Dockerfile-sdk", "diffHunk": "@@ -19,7 +19,7 @@\n # base Docker image.\n \n ARG project_id\n-FROM gcr.io/$project_id/android:base\n+FROM gcr.io/$project_id/android:newjavac_base", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDQ3Mw=="}, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3Njc1OTk1OnYy", "diffSide": "RIGHT", "path": "gnd/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNTozMDo1NFrOHyc62g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDo0MDowOFrOHyw4Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDY2Ng==", "bodyText": "Is this change required for the plugin? If not, then lets revert this.", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664666", "createdAt": "2020-11-13T05:30:54Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/build.gradle", "diffHunk": "@@ -43,7 +47,7 @@ if (secretsFile.exists()) {\n def googleMapsApiKey = secrets.getProperty('GOOGLE_MAPS_API_KEY', '')\n \n android {\n-    compileSdkVersion 28\n+    compileSdkVersion 30", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5MTYzMA==", "bodyText": "Reverted", "url": "https://github.com/google/ground-android/pull/617#discussion_r522991630", "createdAt": "2020-11-13T14:40:08Z", "author": {"login": "dturner"}, "path": "gnd/build.gradle", "diffHunk": "@@ -43,7 +47,7 @@ if (secretsFile.exists()) {\n def googleMapsApiKey = secrets.getProperty('GOOGLE_MAPS_API_KEY', '')\n \n android {\n-    compileSdkVersion 28\n+    compileSdkVersion 30", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDY2Ng=="}, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3Njc2MTYyOnYy", "diffSide": "RIGHT", "path": "gnd/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNTozMTo1N1rOHyc72A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDozOTo1OVrOHyw3tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDkyMA==", "bodyText": "Can you please add a link to the wiki/github repo of this plugin?", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664920", "createdAt": "2020-11-13T05:31:57Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/build.gradle", "diffHunk": "@@ -103,6 +107,49 @@ android {\n     hilt {\n         enableTransformForLocalTests = true\n     }\n+\n+    // ErrorProne and NullAway configuration.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5MTU0Mg==", "bodyText": "Done", "url": "https://github.com/google/ground-android/pull/617#discussion_r522991542", "createdAt": "2020-11-13T14:39:59Z", "author": {"login": "dturner"}, "path": "gnd/build.gradle", "diffHunk": "@@ -103,6 +107,49 @@ android {\n     hilt {\n         enableTransformForLocalTests = true\n     }\n+\n+    // ErrorProne and NullAway configuration.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDkyMA=="}, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3Njc2NzU2OnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNTozNToyOVrOHyc_QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNDozOTo1MFrOHyw3TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NTc5Mg==", "bodyText": "We can always use an empty immutable list ImmutableList.of() instead of null. Why @Nullable?", "url": "https://github.com/google/ground-android/pull/617#discussion_r522665792", "createdAt": "2020-11-13T05:35:29Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "diffHunk": "@@ -337,11 +340,12 @@ public Completable updateMutations(ImmutableList<Mutation> mutations) {\n   }\n \n   @Override\n-  public Completable finalizePendingMutations(ImmutableList<Mutation> mutations) {\n+  public Completable finalizePendingMutations(@Nullable ImmutableList<Mutation> mutations) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5MTQzNg==", "bodyText": "Good idea. I've added a null check inside LocalMutationSyncWorker::processMutations and removed the @Nullable annotation.", "url": "https://github.com/google/ground-android/pull/617#discussion_r522991436", "createdAt": "2020-11-13T14:39:50Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "diffHunk": "@@ -337,11 +340,12 @@ public Completable updateMutations(ImmutableList<Mutation> mutations) {\n   }\n \n   @Override\n-  public Completable finalizePendingMutations(ImmutableList<Mutation> mutations) {\n+  public Completable finalizePendingMutations(@Nullable ImmutableList<Mutation> mutations) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NTc5Mg=="}, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2560, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}