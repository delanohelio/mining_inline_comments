{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MDQ3Nzky", "number": 617, "title": "Adding NullAway plugin for checking null handling", "bodyText": "This change adds the NullAway plugin. From their docs:\n\nNullAway is a tool to help eliminate NullPointerExceptions (NPEs) in your Java code. To use NullAway, first add @Nullable annotations in your code wherever a field, method parameter, or return value may be null. Given these annotations, NullAway performs a series of type-based, local checks to ensure that any pointer that gets dereferenced in your code cannot be null.\n\nI have configured NullAway to run during the build process and to issue errors whenever it finds a possible null object dereference. Generated classes from Hilt, SafeArgs and DataBindings are excluded, as well as classes relating to Room and Firebase.\nI have fixed the remaining errors (around 100) by:\n\nAdding @Nullable and adding null checks: if (thing==null) throw new NPE(\"error message\");\nRemoving @Nullable on fields which should always be there, such as Project.id\nConverting @Nullable to an Optional<Thing> and adding empty/present checks: if (thing.isPresent()) doSomething(thing);\nSuppress the field initialization errors using @SupressWarnings(\"NullAway.Init\") where there was an obvious initialization method which NullAway wasn't aware of. For example:\n\npublic class AbstractFieldViewModel extends AbstractViewModel {\n...\n    @SuppressWarnings(\"NullAway.Init\")\n    private Field field;\n    \n    void init(Field field, Optional<Response> response) {\n        this.field = field;\n    }\n\ninit could be added to the list of methods which NullAway considers to be intialization methods if we want.\n\nThere were a few points where I needed to suppress the NullAway errors entirely using @SuppressWarnings(\"NullAway\"). Here's an example:\n\nprivate Completable insertOrUpdateField(String formId, Element.Type elementType, Field field) {\n    return fieldDao\n        .insertOrUpdate(FieldEntity.fromField(formId, elementType, field))\n        .andThen(\n            Observable.just(field)\n                .filter(__ -> field.getMultipleChoice() != null)\n                .flatMapCompletable(\n                    __ -> insertOrUpdateMultipleChoice(field.getId(), field.getMultipleChoice())))\n        .subscribeOn(schedulers.io());\n  }\n\nThis causes an error because field.getMultipleChoice() has a nullable return type, however, we're already filtering on field.getMultipleChoice != null, but NullAway isn't clever enough to figure that out.\n\nWhere an overridden method has different annotations to the superclass method I've fixed that. A common example was Fragment.onCreateView which must be changed from:\n\npublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState)\n\nto\npublic View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container,\n            @Nullable Bundle savedInstanceState)\n\nOther changes:\n\nI've removed many instances of @NonNull since this is no longer required (all objects are non-null by default)\n\nConcerns/questions:\n\nThis is adding another plugin dependency and extra time to the build process. In my experience it wasn't that much, maybe a few seconds. Is this something we're happy with?\n\nTODO:\n\nConvert this into a wiki page when PR approved.", "createdAt": "2020-11-03T23:33:15Z", "url": "https://github.com/google/ground-android/pull/617", "merged": true, "mergeCommit": {"oid": "6f1ca3e0c9e388640ae38c05f31099859ea07027"}, "closed": true, "closedAt": "2020-11-17T09:04:01Z", "author": {"login": "dturner"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZLZOZgFqTUyMzIzMjE1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddVyOJAFqTUzMjE1MDM5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMjMyMTU3", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-523232157", "createdAt": "2020-11-04T10:32:09Z", "commit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMjowOVrOHtSLlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMDozMzo1M1rOHtSPiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NTg0NQ==", "bodyText": "Can we use Guava's checkNotNull instead? It can be statically imported from Preconditions.", "url": "https://github.com/google/ground-android/pull/617#discussion_r517245845", "createdAt": "2020-11-04T10:32:09Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationFragment.java", "diffHunk": "@@ -211,7 +209,13 @@ private void observeMultipleChoiceClicks(MultipleChoiceFieldViewModel viewModel)\n \n   private void onShowDialog(\n       Field field, Optional<Response> currentResponse, Consumer<Optional<Response>> consumer) {\n-    Cardinality cardinality = field.getMultipleChoice().getCardinality();\n+\n+    MultipleChoice multipleChoice = field.getMultipleChoice();\n+    if (multipleChoice == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0NjUyMg==", "bodyText": "Alternatively:\nreturn Optional.fromNullable(originalObservation).map(o -> o.getResponses().getResponse(fieldId));", "url": "https://github.com/google/ground-android/pull/617#discussion_r517246522", "createdAt": "2020-11-04T10:33:17Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/EditObservationViewModel.java", "diffHunk": "@@ -149,7 +150,11 @@ void initialize(EditObservationFragmentArgs args) {\n \n   Optional<Response> getSavedOrOriginalResponse(String fieldId) {\n     if (responses.isEmpty()) {\n-      return originalObservation.getResponses().getResponse(fieldId);\n+      if (originalObservation == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI0Njg1OQ==", "bodyText": "Please run formatter to harmonize formatting.", "url": "https://github.com/google/ground-android/pull/617#discussion_r517246859", "createdAt": "2020-11-04T10:33:53Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/editobservation/MultipleChoiceFieldLayout.java", "diffHunk": "@@ -53,6 +58,9 @@ protected void onFinishInflate() {\n         .setOnClickListener(\n             v -> {\n               if (editText.isFocused()) {\n+                if (showDialogListener == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5826b57ba4169a7c6ac5a6365f9f05072ef7240e"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37372d519cf8b425070ad5bb881730b4dd6ba504", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/37372d519cf8b425070ad5bb881730b4dd6ba504", "committedDate": "2020-11-06T10:46:08Z", "message": "Replace null checks with checkNotNull"}, "afterCommit": {"oid": "07bdfe9d2afb31bd16cd9af49bb6677c5e872fb6", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/07bdfe9d2afb31bd16cd9af49bb6677c5e872fb6", "committedDate": "2020-11-06T11:39:15Z", "message": "Replace null checks with Preconditions.checkNotNull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MDg1Mzgx", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-525085381", "createdAt": "2020-11-06T11:52:34Z", "commit": {"oid": "07bdfe9d2afb31bd16cd9af49bb6677c5e872fb6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMTo1MjozNFrOHurJ2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMTo1MjozNFrOHurJ2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcwMzU3Nw==", "bodyText": "Is it possible to exclude patterns instead of full class/package name?", "url": "https://github.com/google/ground-android/pull/617#discussion_r518703577", "createdAt": "2020-11-06T11:52:34Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/build.gradle", "diffHunk": "@@ -103,6 +107,42 @@ android {\n     hilt {\n         enableTransformForLocalTests = true\n     }\n+    DomainObjectSet<BaseVariant> variants = getApplicationVariants()\n+    variants.addAll(getTestVariants())\n+    variants.addAll(getUnitTestVariants())\n+    variants.configureEach { variant ->\n+        variant.getJavaCompileProvider().configure {\n+            options.errorprone {\n+                check(\"NullAway\", CheckSeverity.ERROR)\n+                option(\"NullAway:AnnotatedPackages\", \"com.google.android.gnd\")\n+\n+                // Treat generated classes from Hilt and SafeArgs as unannotated.\n+                option(\"NullAway:TreatGeneratedAsUnannotated\", true)\n+\n+                // Ignore generated classes from databinding, as well as Room and Firebase classes.\n+                option(\"NullAway:UnannotatedSubPackages\",\n+                        \"com.google.android.gnd.databinding,\" +\n+                        \"com.google.android.gnd.persistence.local.room,\" +\n+                        \"com.google.android.gnd.persistence.remote.firestore,\" +\n+                        \"com.google.android.gnd.persistence.remote.firestore.schema\")\n+\n+                // TODO: Figure out a better way of excluding classes generated by the SafeArgs\n+                //  plugin. Suggestions: patch NullAway to ignore methods annotated with\n+                //  @SuppressWarnings(\"unchecked\") or patch SafeArgs to annotate the generated\n+                //  classes with @Generated\n+                option(\"NullAway:ExcludedClasses\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07bdfe9d2afb31bd16cd9af49bb6677c5e872fb6"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fe4410f58068fac9912b9afe6dd042aa5b3af2e", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/7fe4410f58068fac9912b9afe6dd042aa5b3af2e", "committedDate": "2020-11-06T12:32:43Z", "message": "Merge branch 'master' into nullaway"}, "afterCommit": {"oid": "18ecd64317e2ba9cc6a8a41cef05416ebf88c120", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/18ecd64317e2ba9cc6a8a41cef05416ebf88c120", "committedDate": "2020-11-06T12:34:32Z", "message": "Disable all ErrorProne checks except NullAway. Add comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTEyODkz", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-525112893", "createdAt": "2020-11-06T12:37:10Z", "commit": {"oid": "18ecd64317e2ba9cc6a8a41cef05416ebf88c120"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozNzoxMFrOHusbhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozNzoxMFrOHusbhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyNDQ4Nw==", "bodyText": "Can we static import Preconditions throughout to make these more inline friendly and reduce line-wrapping?", "url": "https://github.com/google/ground-android/pull/617#discussion_r518724487", "createdAt": "2020-11-06T12:37:10Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "diffHunk": "@@ -141,7 +143,8 @@ private Completable insertOrUpdateField(String formId, Element.Type elementType,\n             Observable.just(field)\n                 .filter(__ -> field.getMultipleChoice() != null)\n                 .flatMapCompletable(\n-                    __ -> insertOrUpdateMultipleChoice(field.getId(), field.getMultipleChoice())))\n+                    __ -> insertOrUpdateMultipleChoice(field.getId(),\n+                        Preconditions.checkNotNull(field.getMultipleChoice()))))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18ecd64317e2ba9cc6a8a41cef05416ebf88c120"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTEzMDI5", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-525113029", "createdAt": "2020-11-06T12:37:24Z", "commit": {"oid": "18ecd64317e2ba9cc6a8a41cef05416ebf88c120"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTU5NjIy", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-525159622", "createdAt": "2020-11-06T13:44:14Z", "commit": {"oid": "c335483accdaff1fc938668e25b4b6102b5c227f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzo0NDoxNFrOHuui3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzo0NDoxNFrOHuui3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc1OTEzMw==", "bodyText": "This should not be indented.", "url": "https://github.com/google/ground-android/pull/617#discussion_r518759133", "createdAt": "2020-11-06T13:44:14Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloudbuild.yaml", "diffHunk": "@@ -33,6 +33,13 @@\n \n steps:\n \n+  - name: 'gcr.io/$PROJECT_ID/android:28'\n+      id: 'Check javac version'\n+      args:\n+        - '-c'\n+        - |\n+          javac -version", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c335483accdaff1fc938668e25b4b6102b5c227f"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTc1OTY1", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-525175965", "createdAt": "2020-11-06T14:04:38Z", "commit": {"oid": "982ba6c84583194ed86a1bb200ebe4c63907cdda"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b744cbe0445cee44d8b64cdd3ce9536e38652d30", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/b744cbe0445cee44d8b64cdd3ce9536e38652d30", "committedDate": "2020-11-12T19:57:30Z", "message": "Adding NullAway plugin for checking null handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecf6cebf406fec87ae82ccd1631c62363c8b3140", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/ecf6cebf406fec87ae82ccd1631c62363c8b3140", "committedDate": "2020-11-12T19:59:11Z", "message": "Replace null checks with Preconditions.checkNotNull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7b92b0411b4e9d3d8ea0b76b37fe51ec26c2d83", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/e7b92b0411b4e9d3d8ea0b76b37fe51ec26c2d83", "committedDate": "2020-11-12T19:59:13Z", "message": "Fix formatting and add checkNotNull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "643c14815ca20ea64690be14910d83c314b0c865", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/643c14815ca20ea64690be14910d83c314b0c865", "committedDate": "2020-11-12T19:59:13Z", "message": "Disable all ErrorProne checks except NullAway. Add comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb9dbbf17cfc1483ce14e8a964a90cba0823f46", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/5cb9dbbf17cfc1483ce14e8a964a90cba0823f46", "committedDate": "2020-11-12T19:59:13Z", "message": "Attempting to fix javac NPE during cloud build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53bfbd29bccd5bcdf8f8ebc87271019b9be4982f", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/53bfbd29bccd5bcdf8f8ebc87271019b9be4982f", "committedDate": "2020-11-12T19:59:54Z", "message": "Statically import Preconditions.checkNotNull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c84bfc4f754d6cbcbba18a910ce7547f39a1f46b", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/c84bfc4f754d6cbcbba18a910ce7547f39a1f46b", "committedDate": "2020-11-12T19:59:55Z", "message": "Add java version step to cloud config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016b408c7b50ed7c3fdfa9f9658eee4c2eacc38e", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/016b408c7b50ed7c3fdfa9f9658eee4c2eacc38e", "committedDate": "2020-11-12T19:59:55Z", "message": "Moving config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4ebee8e26ba78d8857f232babebad183faae346", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/e4ebee8e26ba78d8857f232babebad183faae346", "committedDate": "2020-11-12T19:59:55Z", "message": "Fix indentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04181c919e0163b2b3216f2b1327b432555e3914", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/04181c919e0163b2b3216f2b1327b432555e3914", "committedDate": "2020-11-12T20:01:24Z", "message": "Switch to openjdk in cloud build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3548a4e39c9825af4ca025ccdcb6d16b6d0b9880", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/3548a4e39c9825af4ca025ccdcb6d16b6d0b9880", "committedDate": "2020-11-12T20:02:09Z", "message": "Trying openjdk:8u272-slim"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4de554e1b3c33caae5907ce45305299131901b4", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/d4de554e1b3c33caae5907ce45305299131901b4", "committedDate": "2020-11-12T20:02:10Z", "message": "Use Shobhit's image in cloud build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4266bc0de17bbeb526fb088d47942fd61fecf4cb", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/4266bc0de17bbeb526fb088d47942fd61fecf4cb", "committedDate": "2020-11-12T20:02:10Z", "message": "Fix checkstyle issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e506d66cd7a0337bfba6a4fffad43e43b9ee5ef", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/3e506d66cd7a0337bfba6a4fffad43e43b9ee5ef", "committedDate": "2020-11-11T18:41:14Z", "message": "Fix checkstyle issues"}, "afterCommit": {"oid": "4266bc0de17bbeb526fb088d47942fd61fecf4cb", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/4266bc0de17bbeb526fb088d47942fd61fecf4cb", "committedDate": "2020-11-12T20:02:10Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6bb6965043413230c5238baf1b96ef0418ba995", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/c6bb6965043413230c5238baf1b96ef0418ba995", "committedDate": "2020-11-12T20:06:45Z", "message": "Revert changes to cloud build config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdb1f01e20cf48a8cd9dbc8f79580436bcbac1ab", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/cdb1f01e20cf48a8cd9dbc8f79580436bcbac1ab", "committedDate": "2020-11-12T20:32:56Z", "message": "Fix NullAway error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7f05185b00b4120ca057dce1a41bbcde7b7b691", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/d7f05185b00b4120ca057dce1a41bbcde7b7b691", "committedDate": "2020-11-12T21:15:19Z", "message": "Fix broken unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9998dccff6f4d86da86a0ee2d071e5e375eaa3c3", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/9998dccff6f4d86da86a0ee2d071e5e375eaa3c3", "committedDate": "2020-11-12T21:36:44Z", "message": "Fix PMD errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/3a4cbecdca72a9c7cd74f6c5b78138f390df632b", "committedDate": "2020-11-12T21:56:50Z", "message": "Fix (another) failing unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NzQ2OTM4", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-529746938", "createdAt": "2020-11-13T05:29:56Z", "commit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNToyOTo1NlrOHyc56w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNTozNToyOVrOHyc_QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDQyNw==", "bodyText": "Please revert", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664427", "createdAt": "2020-11-13T05:29:56Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloud-builder/Dockerfile-base", "diffHunk": "@@ -69,6 +69,6 @@ RUN yes | sdkmanager \\\n     \"extras;android;m2repository\" \\\n     \"extras;google;m2repository\" \\\n     \"extras;google;google_play_services\" \\\n-    \"build-tools;28.0.3\"\n+    \"build-tools;30.0.2\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDQ3Mw==", "bodyText": "Please revert", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664473", "createdAt": "2020-11-13T05:30:06Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloud-builder/Dockerfile-sdk", "diffHunk": "@@ -19,7 +19,7 @@\n # base Docker image.\n \n ARG project_id\n-FROM gcr.io/$project_id/android:base\n+FROM gcr.io/$project_id/android:newjavac_base", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDY2Ng==", "bodyText": "Is this change required for the plugin? If not, then lets revert this.", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664666", "createdAt": "2020-11-13T05:30:54Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/build.gradle", "diffHunk": "@@ -43,7 +47,7 @@ if (secretsFile.exists()) {\n def googleMapsApiKey = secrets.getProperty('GOOGLE_MAPS_API_KEY', '')\n \n android {\n-    compileSdkVersion 28\n+    compileSdkVersion 30", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NDkyMA==", "bodyText": "Can you please add a link to the wiki/github repo of this plugin?", "url": "https://github.com/google/ground-android/pull/617#discussion_r522664920", "createdAt": "2020-11-13T05:31:57Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/build.gradle", "diffHunk": "@@ -103,6 +107,49 @@ android {\n     hilt {\n         enableTransformForLocalTests = true\n     }\n+\n+    // ErrorProne and NullAway configuration.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NTc5Mg==", "bodyText": "We can always use an empty immutable list ImmutableList.of() instead of null. Why @Nullable?", "url": "https://github.com/google/ground-android/pull/617#discussion_r522665792", "createdAt": "2020-11-13T05:35:29Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/RoomLocalDataStore.java", "diffHunk": "@@ -337,11 +340,12 @@ public Completable updateMutations(ImmutableList<Mutation> mutations) {\n   }\n \n   @Override\n-  public Completable finalizePendingMutations(ImmutableList<Mutation> mutations) {\n+  public Completable finalizePendingMutations(@Nullable ImmutableList<Mutation> mutations) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a4cbecdca72a9c7cd74f6c5b78138f390df632b"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "631c6d61b484b243cb7e6bbe8ced4c51e7f8ed5b", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/631c6d61b484b243cb7e6bbe8ced4c51e7f8ed5b", "committedDate": "2020-11-13T14:37:49Z", "message": "Revert cloud image changes. Address Shobhit's feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b156628706407d50d63ee3b04d95cc0aa1ee2237", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/b156628706407d50d63ee3b04d95cc0aa1ee2237", "committedDate": "2020-11-16T15:32:08Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a14c2b28c352bd19c8aa58aeb6d0aaf384331fd", "author": {"user": {"login": "dturner", "name": "Don Turner"}}, "url": "https://github.com/google/ground-android/commit/0a14c2b28c352bd19c8aa58aeb6d0aaf384331fd", "committedDate": "2020-11-16T16:37:40Z", "message": "Remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMDA3NjAy", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-532007602", "createdAt": "2020-11-17T04:07:54Z", "commit": {"oid": "0a14c2b28c352bd19c8aa58aeb6d0aaf384331fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMTUwMzk3", "url": "https://github.com/google/ground-android/pull/617#pullrequestreview-532150397", "createdAt": "2020-11-17T09:03:54Z", "commit": {"oid": "0a14c2b28c352bd19c8aa58aeb6d0aaf384331fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1647, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}