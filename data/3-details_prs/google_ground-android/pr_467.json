{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NDAzMzA2", "number": 467, "title": "[Feature details] Big cleanup of feature details / bottom sheet impl", "bodyText": "This includes several changes organized by commits, including a large rename commit, and a refactor and simplification of bottom sheet metrics. Sorry it's a big one, please feel free to review commits separately if it's useful; I've tried to make each commit clear and meaningful.\nFixes #463, #464.", "createdAt": "2020-05-08T19:49:28Z", "url": "https://github.com/google/ground-android/pull/467", "merged": true, "mergeCommit": {"oid": "3340f40d84df0cfbfde32eb42e23b38a7d6c6a3a"}, "closed": true, "closedAt": "2020-05-18T16:22:17Z", "author": {"login": "gino-m"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfGzykAH2gAyNDE1NDAzMzA2OjVjZTFmNTAwMzViNGIzNmQ3NWNmOTg5YjU1MDY1M2Q4YmE5YjU5MTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciiKtxgH2gAyNDE1NDAzMzA2OjdhNDkwOWRmMmM3NjI0OTIzYjFhMWQ4ZWEyZTZkY2Y0ZjU4MjQ3MWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5ce1f50035b4b36d75cf989b550653d8ba9b5911", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/5ce1f50035b4b36d75cf989b550653d8ba9b5911", "committedDate": "2020-05-08T00:33:44Z", "message": "Rename HomeSheetMetrics to more specific name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e64bd8d293382f7955c421c8b8c59b28d7bda19f", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/e64bd8d293382f7955c421c8b8c59b28d7bda19f", "committedDate": "2020-05-08T00:42:48Z", "message": "Rename arg"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edf23cfe31ebba5bf4eef46c5f423337f6dc2627", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/edf23cfe31ebba5bf4eef46c5f423337f6dc2627", "committedDate": "2020-05-08T00:45:09Z", "message": "Rename onSheetScrolled for consistency with onDependentViewChanged"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3244418d5d148a2709a2fb1220b83cd6ec8e9b94", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/3244418d5d148a2709a2fb1220b83cd6ec8e9b94", "committedDate": "2020-05-08T00:47:40Z", "message": "Rename OnBottomSheetSlideBehavior to BottomSheetDependentBehavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0992a97a75f1b5b7a08a9bce4ba731a902c5a669", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/0992a97a75f1b5b7a08a9bce4ba731a902c5a669", "committedDate": "2020-05-08T00:50:45Z", "message": "Add JavaDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9eee7850e2316ee116ee971e4f2e19f260dd388", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/f9eee7850e2316ee116ee971e4f2e19f260dd388", "committedDate": "2020-05-08T18:59:11Z", "message": "Refactor and simplify bottom sheet transitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "373d5a81ce641b192f2bf8ca574e08398597bea0", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/373d5a81ce641b192f2bf8ca574e08398597bea0", "committedDate": "2020-05-08T19:04:05Z", "message": "Refactor and simplify bottom sheet transitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b481bcac34be1c4685e1a0776266a22a52b27bf", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/9b481bcac34be1c4685e1a0776266a22a52b27bf", "committedDate": "2020-05-08T19:19:22Z", "message": "Move BottomSheetChromeBehavior into featuresheet package for consistency with MapContainerLayoutBehavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "292e0959ae83be5e1e7bd248626d6667ae4a6227", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/292e0959ae83be5e1e7bd248626d6667ae4a6227", "committedDate": "2020-05-08T19:19:56Z", "message": "Refactor map translation calc into metrics class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fc10ceebb5b0a40745868f6c43b04564558f480", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/7fc10ceebb5b0a40745868f6c43b04564558f480", "committedDate": "2020-05-08T19:46:54Z", "message": "Disambiguate feature sheet from bottom sheet by renaming \"feature details\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "committedDate": "2020-05-08T19:59:00Z", "message": "Simplify feature details icon implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzkyNDA0", "url": "https://github.com/google/ground-android/pull/467#pullrequestreview-411792404", "createdAt": "2020-05-14T13:16:44Z", "commit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzoxNjo0NFrOGVbvJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzoxNjo0NFrOGVbvJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyNzcxOA==", "bodyText": "Add high-level summary of what this class does", "url": "https://github.com/google/ground-android/pull/467#discussion_r425127718", "createdAt": "2020-05-14T13:16:44Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.android.gnd.ui.home.featuredetails;\n+\n+import android.content.Context;\n+import android.util.AttributeSet;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import androidx.coordinatorlayout.widget.CoordinatorLayout;\n+import com.google.android.gnd.R;\n+import com.google.android.gnd.ui.home.BottomSheetDependentBehavior;\n+import com.google.android.gnd.ui.home.BottomSheetMetrics;\n+\n+public class FeatureDetailsChromeBehavior extends BottomSheetDependentBehavior<ViewGroup> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzkzMDQ2", "url": "https://github.com/google/ground-android/pull/467#pullrequestreview-411793046", "createdAt": "2020-05-14T13:17:28Z", "commit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzoxNzoyOVrOGVbxBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzoxNzoyOVrOGVbxBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyODE5OQ==", "bodyText": "Consider adding comment here to make it clear when this method will be called.", "url": "https://github.com/google/ground-android/pull/467#discussion_r425128199", "createdAt": "2020-05-14T13:17:29Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.android.gnd.ui.home.featuredetails;\n+\n+import android.content.Context;\n+import android.util.AttributeSet;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import androidx.coordinatorlayout.widget.CoordinatorLayout;\n+import com.google.android.gnd.R;\n+import com.google.android.gnd.ui.home.BottomSheetDependentBehavior;\n+import com.google.android.gnd.ui.home.BottomSheetMetrics;\n+\n+public class FeatureDetailsChromeBehavior extends BottomSheetDependentBehavior<ViewGroup> {\n+  public FeatureDetailsChromeBehavior(Context context, AttributeSet attrs) {\n+    super(context, attrs);\n+  }\n+\n+  @Override\n+  protected void onBottomSheetChanged(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzk1MjI3", "url": "https://github.com/google/ground-android/pull/467#pullrequestreview-411795227", "createdAt": "2020-05-14T13:19:56Z", "commit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzoxOTo1NlrOGVb3kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzoxOTo1NlrOGVb3kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyOTg3Mw==", "bodyText": "Add comment explaining what FeatureDetails or reference another class so it's easy to find out what object this Fragment is representing", "url": "https://github.com/google/ground-android/pull/467#discussion_r425129873", "createdAt": "2020-05-14T13:19:56Z", "author": {"login": "dturner"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsFragment.java", "diffHunk": "@@ -14,52 +14,49 @@\n  * limitations under the License.\n  */\n \n-package com.google.android.gnd.ui.home.featuresheet;\n+package com.google.android.gnd.ui.home.featuredetails;\n \n import android.os.Bundle;\n import android.view.LayoutInflater;\n import android.view.View;\n import android.view.ViewGroup;\n-import android.widget.ImageView;\n import androidx.annotation.NonNull;\n import androidx.annotation.Nullable;\n import androidx.core.view.WindowInsetsCompat;\n import butterknife.BindView;\n import com.google.android.gnd.MainViewModel;\n import com.google.android.gnd.R;\n-import com.google.android.gnd.databinding.FeatureSheetFragBinding;\n+import com.google.android.gnd.databinding.FeatureDetailsFragBinding;\n import com.google.android.gnd.ui.common.AbstractFragment;\n-import com.google.android.gnd.ui.home.FeatureSheetState;\n+import com.google.android.gnd.ui.home.BottomSheetState;\n import com.google.android.gnd.ui.home.HomeScreenViewModel;\n import javax.inject.Inject;\n \n-public class FeatureSheetFragment extends AbstractFragment {\n-\n-  @BindView(R.id.feature_header_icon)\n-  ImageView featureHeaderIcon;\n+public class FeatureDetailsFragment extends AbstractFragment {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNzk2MzQ5", "url": "https://github.com/google/ground-android/pull/467#pullrequestreview-411796349", "createdAt": "2020-05-14T13:21:08Z", "commit": {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "committedDate": "2020-05-15T21:28:29Z", "message": "Add missing JavaDoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNjQ5MzYx", "url": "https://github.com/google/ground-android/pull/467#pullrequestreview-413649361", "createdAt": "2020-05-18T14:29:09Z", "commit": {"oid": "57b0f79df9d412ee3e859c78b0bdf1933bcc44ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a4909df2c7624923b1a1d8ea2e6dcf4f582471f", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/7a4909df2c7624923b1a1d8ea2e6dcf4f582471f", "committedDate": "2020-05-18T16:07:59Z", "message": "Merge branch 'master' into feature-sheet-cleanup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1550, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}