{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNDI4MTY1", "number": 477, "title": "[Code refactor] Simplify handling of window insets", "bodyText": "Towards #476\n\nFlatten hierarchy using constraint layout\nReplace java code for handling top and bottom insets with fitsSystemWindows in xml layouts\nMove status bar scrim to MainActivity for applying it to all screens at once\n\nNote:\nHandle HomeScreenFragment and FeatureDetailsFragment separately as they are more complex and need extra care when simplifying.", "createdAt": "2020-05-24T15:20:09Z", "url": "https://github.com/google/ground-android/pull/477", "merged": true, "mergeCommit": {"oid": "35ca088571837fd1c6c62e4521f3f7ad2e71ae63"}, "closed": true, "closedAt": "2020-05-28T19:39:53Z", "author": {"login": "shobhitagarwal1612"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckWn1xgH2gAyNDIyNDI4MTY1OmJlYTFlZTdhNDkzZTE2YjQ2ZmJkZGQxOWNmY2JjMzlmYTRhOTRiMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclzMN7gFqTQyMDQzMTQwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bea1ee7a493e16b46fbddd19cfcbc39fa4a94b0e", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/bea1ee7a493e16b46fbddd19cfcbc39fa4a94b0e", "committedDate": "2020-05-24T07:48:47Z", "message": "Remove manual inset addition in map container views\n\n - Cleanup fragment\n - Separate MapView from remaining and add fitsSystemWindows to keep them within the limits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "264137dbbf14a77cce7181c44c56168ae4e90760", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/264137dbbf14a77cce7181c44c56168ae4e90760", "committedDate": "2020-05-24T08:20:53Z", "message": "Flatten view hierarchy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fd35a6528f4f36ebe3ee183183a4f1c19a1e79c", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/6fd35a6528f4f36ebe3ee183183a4f1c19a1e79c", "committedDate": "2020-05-24T13:21:59Z", "message": "Move StatusBarScrim to MainActivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d87d30e941b62b447a63d4d102035930691e7317", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/d87d30e941b62b447a63d4d102035930691e7317", "committedDate": "2020-05-24T14:13:38Z", "message": "Fix OfflineAreas fragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e463b91fb11a8eaf785f4deabeaabbe175b86e9a", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/e463b91fb11a8eaf785f4deabeaabbe175b86e9a", "committedDate": "2020-05-24T14:58:03Z", "message": "Fix offline area selector fragment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Mzc0Njk4", "url": "https://github.com/google/ground-android/pull/477#pullrequestreview-417374698", "createdAt": "2020-05-24T16:57:36Z", "commit": {"oid": "bea1ee7a493e16b46fbddd19cfcbc39fa4a94b0e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNjo1NzozNlrOGZwFMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNzowNzo0OVrOGZwIdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NTM0Nw==", "bodyText": "\"Feature\" has a special meaning in Ground - perhaps better to say \"Placeholder\" here?", "url": "https://github.com/google/ground-android/pull/477#discussion_r429655347", "createdAt": "2020-05-24T16:57:36Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/res/layout/map_container_frag.xml", "diffHunk": "@@ -32,90 +32,96 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\">\n \n+    <!-- Feature holder for map implementation -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bea1ee7a493e16b46fbddd19cfcbc39fa4a94b0e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NTY2OA==", "bodyText": "I could never get this to work; nicely done!", "url": "https://github.com/google/ground-android/pull/477#discussion_r429655668", "createdAt": "2020-05-24T17:01:52Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/res/layout/map_container_frag.xml", "diffHunk": "@@ -32,90 +32,96 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\">\n \n+    <!-- Feature holder for map implementation -->\n+    <FrameLayout\n+      android:id=\"@+id/map\"\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"match_parent\" />\n \n-    <RelativeLayout\n-      android:id=\"@+id/map_layout\"\n+    <FrameLayout\n       android:layout_width=\"match_parent\"\n       android:layout_height=\"match_parent\"\n-      android:layout_gravity=\"center\"\n-      android:gravity=\"center\"\n-      app:layout_behavior=\"com.google.android.gnd.ui.home.mapcontainer.MapLayoutBehavior\">\n+      android:fitsSystemWindows=\"true\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bea1ee7a493e16b46fbddd19cfcbc39fa4a94b0e"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NjE4Mw==", "bodyText": "Not a major issue, esp. if it saves us code complexity, but the system inset areas shows as grey instead of blue in Offline areas now:\n\nBefore:\n\nIdeal would be as in the expanded feature sheet:\n\nIf it's not easy to fix, this is really a P3 UI tweak that can be punted.", "url": "https://github.com/google/ground-android/pull/477#discussion_r429656183", "createdAt": "2020-05-24T17:07:49Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/res/layout/offline_areas_frag.xml", "diffHunk": "@@ -20,56 +20,51 @@\n   xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n \n   <data>\n-\n     <variable\n       name=\"viewModel\"\n       type=\"com.google.android.gnd.ui.offlinearea.OfflineAreasViewModel\" />\n   </data>\n \n-  <LinearLayout\n+  <androidx.constraintlayout.widget.ConstraintLayout\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n-    android:orientation=\"vertical\">\n+    android:fitsSystemWindows=\"true\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d87d30e941b62b447a63d4d102035930691e7317"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e91cd7896c996f3dbeeaa675c2d13a455512a83", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/7e91cd7896c996f3dbeeaa675c2d13a455512a83", "committedDate": "2020-05-24T19:50:50Z", "message": "Merge branch 'master' into issue-476"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db1dad1f6fd2945aeff2d6ee5fcce3d484fa5c69", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/db1dad1f6fd2945aeff2d6ee5fcce3d484fa5c69", "committedDate": "2020-05-24T20:06:35Z", "message": "Update comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3040999c52daea85d89a0eeb8ad10c4ac9359726", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/3040999c52daea85d89a0eeb8ad10c4ac9359726", "committedDate": "2020-05-26T20:15:02Z", "message": "Merge branch 'master' into issue-476\n\n# Conflicts:\n#\tgnd/src/main/res/layout/home_screen_frag.xml\n#\tgnd/src/main/res/layout/offline_areas_frag.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjM3OTAy", "url": "https://github.com/google/ground-android/pull/477#pullrequestreview-419637902", "createdAt": "2020-05-27T21:56:34Z", "commit": {"oid": "3040999c52daea85d89a0eeb8ad10c4ac9359726"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTo1NjozNFrOGbelhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTo1NjozNFrOGbelhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ2NTg2Mg==", "bodyText": "Great, I think that's sufficient. Thanks for the fix!", "url": "https://github.com/google/ground-android/pull/477#discussion_r431465862", "createdAt": "2020-05-27T21:56:34Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/res/layout/offline_areas_frag.xml", "diffHunk": "@@ -20,56 +20,51 @@\n   xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n \n   <data>\n-\n     <variable\n       name=\"viewModel\"\n       type=\"com.google.android.gnd.ui.offlinearea.OfflineAreasViewModel\" />\n   </data>\n \n-  <LinearLayout\n+  <androidx.constraintlayout.widget.ConstraintLayout\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n-    android:orientation=\"vertical\">\n+    android:fitsSystemWindows=\"true\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY1NjE4Mw=="}, "originalCommit": {"oid": "d87d30e941b62b447a63d4d102035930691e7317"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b99decc9379e05e0ab611dbdd133d13d5bfca91d", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/b99decc9379e05e0ab611dbdd133d13d5bfca91d", "committedDate": "2020-05-28T06:20:21Z", "message": "Merge branch 'master' into issue-476\n\n# Conflicts:\n#\tgnd/src/main/java/com/google/android/gnd/MainActivity.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef0b936ce425fb0f8b9ff946f5300c11ed46f9d9", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/ef0b936ce425fb0f8b9ff946f5300c11ed46f9d9", "committedDate": "2020-05-28T06:49:21Z", "message": "Fix settings activity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e337d54e9c7bfbc87c5878cf348438bd395bc045", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/e337d54e9c7bfbc87c5878cf348438bd395bc045", "committedDate": "2020-05-28T07:22:31Z", "message": "Add status bar scrim to settings activity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41601854defd437a5634f6dbb23d3c82c714ecfa", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/41601854defd437a5634f6dbb23d3c82c714ecfa", "committedDate": "2020-05-28T08:42:35Z", "message": "Convert to local variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNDMxNDA3", "url": "https://github.com/google/ground-android/pull/477#pullrequestreview-420431407", "createdAt": "2020-05-28T19:39:47Z", "commit": {"oid": "41601854defd437a5634f6dbb23d3c82c714ecfa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1560, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}