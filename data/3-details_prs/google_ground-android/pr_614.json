{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNDg2OTE1", "number": 614, "title": "[Points] Use marker manager for handling click events", "bodyText": "Fixes #603\n\n\nThe reason it didn't get caught by the instrumentation tests is because this error only happens once a GeoJSON layer is added to the map. Our test data doesn't contain any GeoJSON in the feature\n\n\nVerified by clicking on any pin in \"example\" project\n@gino-m  PTAL?", "createdAt": "2020-10-31T19:33:03Z", "url": "https://github.com/google/ground-android/pull/614", "merged": true, "mergeCommit": {"oid": "6de69ad48d795eb2be77e7e031e863901f7858d6"}, "closed": true, "closedAt": "2020-11-01T20:02:41Z", "author": {"login": "shobhitagarwal1612"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYAkuiAH2gAyNTEzNDg2OTE1OjBiYmM0YWM5MjE5MWUyNmI2NGVmYWQzMjNmZDBkOTE5NWJmYmMyNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYT1tqgFqTUyMTI0NjQ0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0bbc4ac92191e26b64efad323fd0d9195bfbc261", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/0bbc4ac92191e26b64efad323fd0d9195bfbc261", "committedDate": "2020-10-31T19:31:32Z", "message": "Use marker manager for handling click events"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMjQzNjU0", "url": "https://github.com/google/ground-android/pull/614#pullrequestreview-521243654", "createdAt": "2020-11-01T17:21:41Z", "commit": {"oid": "0bbc4ac92191e26b64efad323fd0d9195bfbc261"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQxNzoyMTo0MVrOHrwqdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQxNzoyMTo0MVrOHrwqdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY0ODExOQ==", "bodyText": "Could we qualify Collection with its outer class name (MapObjectManager.Collection)? I automatically assumed this was a java.util.Collection at first :)", "url": "https://github.com/google/ground-android/pull/614#discussion_r515648119", "createdAt": "2020-11-01T17:21:41Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/gms/GoogleMapsMapAdapter.java", "diffHunk": "@@ -80,11 +82,20 @@\n   // instead we must retain explicit reference to the concrete type.\n   private final PublishSubject<MapBoxOfflineTileProvider> tileProviders = PublishSubject.create();\n \n+  /**\n+   * Manager for handling click events for markers.\n+   *\n+   * <p>This isn't needed if the map only has a single layer. But in our case, multiple GeoJSON\n+   * layers might be added and we wish to have independent clickable features for each layer.\n+   */\n+  private final MarkerManager markerManager;\n+  // TODO: Add managers for polyline and polygon layers\n+\n   /**\n    * References to Google Maps SDK Markers present on the map. Used to sync and update markers with\n    * current view and data state.\n    */\n-  private Set<Marker> markers = new HashSet<>();\n+  private final Collection markers;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0bbc4ac92191e26b64efad323fd0d9195bfbc261"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMjQzNzIz", "url": "https://github.com/google/ground-android/pull/614#pullrequestreview-521243723", "createdAt": "2020-11-01T17:22:34Z", "commit": {"oid": "0bbc4ac92191e26b64efad323fd0d9195bfbc261"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "012a35e0ec7b6c373fcd3422801ff27481f20493", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/012a35e0ec7b6c373fcd3422801ff27481f20493", "committedDate": "2020-11-01T17:27:34Z", "message": "Qualify variable with MarkerManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMjQ2NDQ4", "url": "https://github.com/google/ground-android/pull/614#pullrequestreview-521246448", "createdAt": "2020-11-01T17:58:17Z", "commit": {"oid": "012a35e0ec7b6c373fcd3422801ff27481f20493"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1644, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}