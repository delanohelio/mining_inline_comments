{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNTAyNTIw", "number": 406, "title": "[Feature] Add button to switch map type", "bodyText": "Demo:", "createdAt": "2020-03-20T12:19:47Z", "url": "https://github.com/google/ground-android/pull/406", "merged": true, "mergeCommit": {"oid": "325491c877dc667cb60a19206b81ffd817b59b3b"}, "closed": true, "closedAt": "2020-03-30T18:15:23Z", "author": {"login": "shobhitagarwal1612"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPd-xAgH2gAyMzkxNTAyNTIwOmM0NTJhN2RhOTBmZWZlNjE3YWU0ZjFmMmNiYjMxN2QzM2E1OTQ2NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSynpwgFqTM4NDExMTA3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c452a7da90fefe617ae4f1f2cbb317d33a594660", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/c452a7da90fefe617ae4f1f2cbb317d33a594660", "committedDate": "2020-03-20T10:30:45Z", "message": "Move static methods and final variables to the top"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e970f971e5f5c59bee34bded71d14636aaa434b2", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/e970f971e5f5c59bee34bded71d14636aaa434b2", "committedDate": "2020-03-20T10:32:25Z", "message": "Log -> Timber"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d49d91191d8d821eb3ff103dba703ebcea621070", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/d49d91191d8d821eb3ff103dba703ebcea621070", "committedDate": "2020-03-20T10:39:52Z", "message": "Add map type button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f4419826934c5156ef99c33aeab5a80d19c177a", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/7f4419826934c5156ef99c33aeab5a80d19c177a", "committedDate": "2020-03-20T11:07:51Z", "message": "Add getter/setter for map type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce8db1df1d0223ef2c5e2c2e4b00c62e7fc62895", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/ce8db1df1d0223ef2c5e2c2e4b00c62e7fc62895", "committedDate": "2020-03-20T11:08:20Z", "message": "Create alert dialog on button click and display map types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a184c310659d38d4a45964228f88c229884461cf", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/a184c310659d38d4a45964228f88c229884461cf", "committedDate": "2020-03-20T11:38:00Z", "message": "Store list of map types in GoogleMapsMapProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45bc8d505c7c35720738aeff4a312091ec58a260", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/45bc8d505c7c35720738aeff4a312091ec58a260", "committedDate": "2020-03-20T11:43:42Z", "message": "Cleanup and null checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14442defbacb41a95562ce869c5f184554426e71", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/14442defbacb41a95562ce869c5f184554426e71", "committedDate": "2020-03-20T12:07:12Z", "message": "Add map layer icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcb09e68422f21c8c4d549545e04fe892d36717b", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/dcb09e68422f21c8c4d549545e04fe892d36717b", "committedDate": "2020-03-20T12:37:55Z", "message": "Replace HashMap with interface Map\nInvert if conditions for simplification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3a7bb62e4917238a41f3085c9093508e6929bea", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/b3a7bb62e4917238a41f3085c9093508e6929bea", "committedDate": "2020-03-20T17:52:02Z", "message": "Merge branch 'master' into map-type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Njk3NDk4", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-378697498", "createdAt": "2020-03-20T17:54:28Z", "commit": {"oid": "dcb09e68422f21c8c4d549545e04fe892d36717b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzo1NDoyOFrOF5dz0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzo1NDoyOFrOF5dz0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgwMTU1Mw==", "bodyText": "Please use an ImmutableMap<> defined in a constant instead. The constant can then be returned from this method.", "url": "https://github.com/google/ground-android/pull/406#discussion_r395801553", "createdAt": "2020-03-20T17:54:28Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/gms/GoogleMapsMapProvider.java", "diffHunk": "@@ -73,29 +74,28 @@ public Fragment getFragment() {\n \n   @Override\n   public int getMapType() {\n-    if (map != null) {\n-      return map.getValue().getMapType();\n+    if (map == null) {\n+      throw new IllegalStateException(\"MapAdapter is null\");\n     }\n-    throw new IllegalStateException(\"MapAdapter is null\");\n+    return map.getValue().getMapType();\n   }\n \n   @Override\n   public void setMapType(int mapType) {\n-    if (map != null) {\n-      map.getValue().setMapType(mapType);\n-    } else {\n+    if (map == null) {\n       throw new IllegalStateException(\"MapAdapter is null\");\n     }\n+    map.getValue().setMapType(mapType);\n   }\n \n   @Override\n-  public HashMap<Integer, String> getMapTypes() {\n-    HashMap<Integer, String> hashMap = new HashMap<>();\n-    hashMap.put(GoogleMap.MAP_TYPE_NONE, \"None\");\n-    hashMap.put(GoogleMap.MAP_TYPE_NORMAL, \"Normal\");\n-    hashMap.put(GoogleMap.MAP_TYPE_SATELLITE, \"Satellite\");\n-    hashMap.put(GoogleMap.MAP_TYPE_TERRAIN, \"Terrain\");\n-    hashMap.put(GoogleMap.MAP_TYPE_HYBRID, \"Hybrid\");\n-    return hashMap;\n+  public Map<Integer, String> getMapTypes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcb09e68422f21c8c4d549545e04fe892d36717b"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "076d3d0be28277f77a3fac2c2c58f9b9ac794cc6", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/076d3d0be28277f77a3fac2c2c58f9b9ac794cc6", "committedDate": "2020-03-20T18:20:53Z", "message": "Replace Map with ImmutableMap"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NzA1Mjk3", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-379705297", "createdAt": "2020-03-23T18:24:44Z", "commit": {"oid": "076d3d0be28277f77a3fac2c2c58f9b9ac794cc6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODoyNDo0NFrOF6Sh8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODoyNDo0NFrOF6Sh8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY2NTMzMQ==", "bodyText": "Nit: \"Select map type\"", "url": "https://github.com/google/ground-android/pull/406#discussion_r396665331", "createdAt": "2020-03-23T18:24:44Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/res/values/strings.xml", "diffHunk": "@@ -140,5 +140,6 @@\n   <string name=\"cancel\">Cancel</string>\n   <string name=\"join_project\">Join project</string>\n   <string name=\"photo_preview\">Photo preview</string>\n+  <string name=\"select_map_type\">Select Map Type</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "076d3d0be28277f77a3fac2c2c58f9b9ac794cc6"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NzA2NDQ3", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-379706447", "createdAt": "2020-03-23T18:26:09Z", "commit": {"oid": "076d3d0be28277f77a3fac2c2c58f9b9ac794cc6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODoyNjowOVrOF6Smgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODoyNjowOVrOF6Smgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY2NjQ5OA==", "bodyText": "We're trying to move away from Butterknife in favor of Data Binding to ViewModels - could we do that here instead?", "url": "https://github.com/google/ground-android/pull/406#discussion_r396666498", "createdAt": "2020-03-23T18:26:09Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerFragment.java", "diffHunk": "@@ -72,6 +74,26 @@\n   private HomeScreenViewModel homeScreenViewModel;\n   private MainViewModel mainViewModel;\n \n+  @OnClick(R.id.map_type_btn)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "076d3d0be28277f77a3fac2c2c58f9b9ac794cc6"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NzA2NjM3", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-379706637", "createdAt": "2020-03-23T18:26:23Z", "commit": {"oid": "076d3d0be28277f77a3fac2c2c58f9b9ac794cc6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f531eb72201fcaa61c22c49fd7dd3a166e40f6e5", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/f531eb72201fcaa61c22c49fd7dd3a166e40f6e5", "committedDate": "2020-03-23T18:30:53Z", "message": "Don't use Title casing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a1323dd8d46da5bcdafa132cc9cd4dd09380f2e", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/4a1323dd8d46da5bcdafa132cc9cd4dd09380f2e", "committedDate": "2020-03-23T19:23:39Z", "message": "Replace ButterKnife with DataBinding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bdd8d4bb39ef7700943a300bdce5c31b3281a0f", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/8bdd8d4bb39ef7700943a300bdce5c31b3281a0f", "committedDate": "2020-03-23T20:36:12Z", "message": "Fix pmd issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b88b0a07edc50463fb53ef887442efa7c11bf66d", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/b88b0a07edc50463fb53ef887442efa7c11bf66d", "committedDate": "2020-03-24T06:24:20Z", "message": "Merge branch 'master' into map-type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMTk4MTA1", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-382198105", "createdAt": "2020-03-26T16:41:25Z", "commit": {"oid": "b88b0a07edc50463fb53ef887442efa7c11bf66d"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNjo0MToyNVrOF8QEHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNjo0Njo1OVrOF8QUzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyMjA3Ng==", "bodyText": "Missing newline", "url": "https://github.com/google/ground-android/pull/406#discussion_r398722076", "createdAt": "2020-03-26T16:41:25Z", "author": {"login": "scolsen"}, "path": "gnd/src/main/res/drawable/map_layers.xml", "diffHunk": "@@ -0,0 +1,29 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+\n+<!--\n+  ~ Copyright 2020 Google LLC\n+  ~\n+  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~ you may not use this file except in compliance with the License.\n+  ~ You may obtain a copy of the License at\n+  ~\n+  ~     https://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+  android:width=\"24dp\"\n+  android:height=\"24dp\"\n+  android:viewportWidth=\"24\"\n+  android:viewportHeight=\"24\">\n+\n+  <path android:pathData=\"M0 0h24v24H0V0z\" />\n+  <path\n+    android:fillColor=\"#000000\"\n+    android:pathData=\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16zm0-11.47L17.74 9 12 13.47 6.26 9 12 4.53z\" />\n+</vector>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b88b0a07edc50463fb53ef887442efa7c11bf66d"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyMjE5Mg==", "bodyText": "Missing newline", "url": "https://github.com/google/ground-android/pull/406#discussion_r398722192", "createdAt": "2020-03-26T16:41:34Z", "author": {"login": "scolsen"}, "path": "gnd/src/main/res/layout/map_container_frag.xml", "diffHunk": "@@ -86,20 +102,24 @@\n         android:tint=\"@color/colorBackground\"\n         app:backgroundTint=\"@color/colorGrey500\"\n         app:fabSize=\"normal\"\n-        app:useCompatPadding=\"true\"/>\n-    </LinearLayout>\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\"\n+        app:useCompatPadding=\"true\" />\n+    </androidx.constraintlayout.widget.ConstraintLayout>\n \n     <ImageButton\n       android:id=\"@+id/hamburger_btn\"\n       android:layout_width=\"wrap_content\"\n       android:layout_height=\"wrap_content\"\n-      android:layout_gravity=\"top|start|left\"\n-      android:padding=\"16dp\"\n+      android:layout_gravity=\"top|start\"\n       android:background=\"?android:attr/selectableItemBackground\"\n       android:clickable=\"true\"\n+      android:focusable=\"true\"\n       android:onClick=\"@{() -> homeScreenViewModel.openNavDrawer()}\"\n+      android:padding=\"16dp\"\n       android:src=\"@drawable/ic_menu_black_24dp\"\n-      android:tint=\"@color/colorBackground\"/>\n+      android:tint=\"@color/colorBackground\" />\n \n   </FrameLayout>\n </layout>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b88b0a07edc50463fb53ef887442efa7c11bf66d"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyNjM1MQ==", "bodyText": "Instead of using int here directly should we abstract away the particular map types of a given Map impl and introduce an enum and some conversion functions to allow us to set the types regardless of the underlying adapter?\n@gino-m wdyt?\ne.g. on the adapter we'd have some FN setMapType(TypeENUM) instead of int.\nNo need to do this now.", "url": "https://github.com/google/ground-android/pull/406#discussion_r398726351", "createdAt": "2020-03-26T16:46:59Z", "author": {"login": "scolsen"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/map/MapAdapter.java", "diffHunk": "@@ -70,6 +70,12 @@\n   /** Update map pins shown on map. */\n   void setMapPins(ImmutableSet<MapPin> pins);\n \n+  /** Get current map type. */\n+  int getMapType();\n+\n+  /** Update map type. */\n+  void setMapType(int mapType);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b88b0a07edc50463fb53ef887442efa7c11bf66d"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a2902391bdcd8591579caaaf6367e922dc2f7c4", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/5a2902391bdcd8591579caaaf6367e922dc2f7c4", "committedDate": "2020-03-26T16:58:02Z", "message": "Merge branch 'master' into map-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55c175284dee5381a6d73d7fd86cd47cdf7ad476", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/55c175284dee5381a6d73d7fd86cd47cdf7ad476", "committedDate": "2020-03-26T16:58:46Z", "message": "Add newline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9817ec4577f0f3c6cbddb98b2f5c77c6ebe3206b", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/9817ec4577f0f3c6cbddb98b2f5c77c6ebe3206b", "committedDate": "2020-03-28T09:10:23Z", "message": "Merge branch 'master' into map-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "372a3604c7ff3112380ff08a20b74ded333f16b7", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/372a3604c7ff3112380ff08a20b74ded333f16b7", "committedDate": "2020-03-28T09:21:35Z", "message": "Add comments and TODO"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDUyNDgz", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-383452483", "createdAt": "2020-03-29T20:33:47Z", "commit": {"oid": "372a3604c7ff3112380ff08a20b74ded333f16b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMDozMzo0OFrOF9U6Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMDozMzo0OFrOF9U6Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0OTk5MQ==", "bodyText": "Can we simplify this by eliminating mapLayerTypeClicks and just making mapLayerUpdateRequests a MutableLiveData that gets a new Event on each click (.setValue(Event.create(..)))?", "url": "https://github.com/google/ground-android/pull/406#discussion_r399849991", "createdAt": "2020-03-29T20:33:48Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerViewModel.java", "diffHunk": "@@ -88,6 +94,9 @@\n                 .map(Loadable::value)\n                 .switchMap(this::getFeaturesStream)\n                 .map(MapContainerViewModel::toMapPins));\n+    this.mapLayerUpdateRequests =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "372a3604c7ff3112380ff08a20b74ded333f16b7"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDUyNTgw", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-383452580", "createdAt": "2020-03-29T20:34:46Z", "commit": {"oid": "372a3604c7ff3112380ff08a20b74ded333f16b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMDozNDo0NlrOF9U6lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMDozNDo0NlrOF9U6lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1MDEzMw==", "bodyText": "Would showMapTypeSelectorRequests be more correct here?", "url": "https://github.com/google/ground-android/pull/406#discussion_r399850133", "createdAt": "2020-03-29T20:34:46Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerViewModel.java", "diffHunk": "@@ -29,34 +28,40 @@\n import com.google.android.gnd.repository.FeatureRepository;\n import com.google.android.gnd.repository.ProjectRepository;\n import com.google.android.gnd.rx.BooleanOrError;\n+import com.google.android.gnd.rx.Event;\n import com.google.android.gnd.rx.Loadable;\n+import com.google.android.gnd.rx.Nil;\n import com.google.android.gnd.system.LocationManager;\n import com.google.android.gnd.ui.common.AbstractViewModel;\n import com.google.android.gnd.ui.common.SharedViewModel;\n import com.google.android.gnd.ui.map.MapPin;\n import com.google.common.collect.ImmutableSet;\n import io.reactivex.BackpressureStrategy;\n import io.reactivex.Flowable;\n+import io.reactivex.Single;\n+import io.reactivex.processors.PublishProcessor;\n import io.reactivex.subjects.PublishSubject;\n import io.reactivex.subjects.Subject;\n import java.util.concurrent.TimeUnit;\n import java8.util.Optional;\n import javax.inject.Inject;\n+import timber.log.Timber;\n \n @SharedViewModel\n public class MapContainerViewModel extends AbstractViewModel {\n \n-  private static final String TAG = MapContainerViewModel.class.getSimpleName();\n   private static final float DEFAULT_ZOOM_LEVEL = 20.0f;\n   private final LiveData<Loadable<Project>> activeProject;\n   private final LiveData<ImmutableSet<MapPin>> mapPins;\n   private final LiveData<BooleanOrError> locationLockState;\n   private final LiveData<CameraUpdate> cameraUpdateRequests;\n   private final MutableLiveData<Point> cameraPosition;\n+  private final LiveData<Event<Nil>> mapLayerUpdateRequests;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "372a3604c7ff3112380ff08a20b74ded333f16b7"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDUyNjM4", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-383452638", "createdAt": "2020-03-29T20:35:08Z", "commit": {"oid": "372a3604c7ff3112380ff08a20b74ded333f16b7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50a8adc5b50475d8fd728e9262ea2fc12f383f0b", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/50a8adc5b50475d8fd728e9262ea2fc12f383f0b", "committedDate": "2020-03-30T05:37:49Z", "message": "Merge branch 'master' into map-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1b26df99db02f9e719f0bffa27bf0c761f329c6", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/a1b26df99db02f9e719f0bffa27bf0c761f329c6", "committedDate": "2020-03-30T05:45:53Z", "message": "Convert LiveData into MutableLiveData and cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "edd946da8cb4a08632b4cde7668d9b0d6b03db16", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/edd946da8cb4a08632b4cde7668d9b0d6b03db16", "committedDate": "2020-03-30T05:44:10Z", "message": "Convert LiveData into MutableLiveData and cleanup"}, "afterCommit": {"oid": "a1b26df99db02f9e719f0bffa27bf0c761f329c6", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/a1b26df99db02f9e719f0bffa27bf0c761f329c6", "committedDate": "2020-03-30T05:45:53Z", "message": "Convert LiveData into MutableLiveData and cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTExMDc3", "url": "https://github.com/google/ground-android/pull/406#pullrequestreview-384111077", "createdAt": "2020-03-30T18:15:18Z", "commit": {"oid": "a1b26df99db02f9e719f0bffa27bf0c761f329c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1754, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}