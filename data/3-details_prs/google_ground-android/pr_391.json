{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3Mjg1Nzg2", "number": 391, "title": "Use Apache Commons in GeoJsonParser; Fix GeoJsonExtent", "bodyText": "N.B.: Includes changes from pr #390 (wait until that's submitted)\n\nFix an error in handling of coordinate values in GeoJsonExtent (coordinates were nested more deeply in an array in the source than I anticipated)\nUse Apache Commons to read in Json data.\ufeff", "createdAt": "2020-03-12T14:45:00Z", "url": "https://github.com/google/ground-android/pull/391", "merged": true, "mergeCommit": {"oid": "c97383421f464c3c9bc9d430b29075534d79046e"}, "closed": true, "closedAt": "2020-03-12T16:20:48Z", "author": {"login": "scolsen"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM8v7vAH2gAyMzg3Mjg1Nzg2OjExMzMwYzkwYzc3NmQ0ZjY3OGM5MmI4MDhkNDBjMTI3ZDI1ZDYwODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM9-XRAFqTM3MzY5MjY0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "11330c90c776d4f678c92b808d40c127d25d6081", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/11330c90c776d4f678c92b808d40c127d25d6081", "committedDate": "2020-03-12T14:39:50Z", "message": "Update GeoJsonParser\n\nThis change includes minor improvements to the GeoJsonParser and Json\nExtent model object:\n\n- Use Apache Commons for reading in the JSON source\n- Fix an error in the Json Extent's handling of coordinates--coordinates\n  are nested one more array deep in the GeoJson source than I originally\n  accounted for, leading to errors."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNjMwNjI3", "url": "https://github.com/google/ground-android/pull/391#pullrequestreview-373630627", "createdAt": "2020-03-12T14:56:34Z", "commit": {"oid": "11330c90c776d4f678c92b808d40c127d25d6081"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNDo1NjozNFrOF1iMRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNDo1NzoxM1rOF1iOEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3OTA0NA==", "bodyText": "Nit: Commons -> proper noun", "url": "https://github.com/google/ground-android/pull/391#discussion_r391679044", "createdAt": "2020-03-12T14:56:34Z", "author": {"login": "gino-m"}, "path": "gnd/build.gradle", "diffHunk": "@@ -207,6 +208,10 @@ dependencies {\n \n     implementation \"com.uber.autodispose:autodispose-android:$project.autoDisposeVersion\"\n     implementation \"com.uber.autodispose:autodispose-android-archcomponents:$project.autoDisposeVersion\"\n+\n+    // Apache commons IO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11330c90c776d4f678c92b808d40c127d25d6081"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3OTUwNQ==", "bodyText": "Nit: Please extract Charset to constant.", "url": "https://github.com/google/ground-android/pull/391#discussion_r391679505", "createdAt": "2020-03-12T14:57:13Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/geojson/GeoJsonParser.java", "diffHunk": "@@ -42,34 +40,24 @@\n \n   private static final String TAG = GeoJsonParser.class.getSimpleName();\n   private final OfflineUuidGenerator uuidGenerator;\n+  private static final String FEATURES_KEY = \"features\";\n \n   @Inject\n   GeoJsonParser(OfflineUuidGenerator uuidGenerator) {\n     this.uuidGenerator = uuidGenerator;\n   }\n \n-  private String readJsonFile(File file) throws IOException {\n-    InputStream is = new FileInputStream(file);\n-    BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n-    StringBuilder sb = new StringBuilder();\n-\n-    int res = buf.read();\n-    while (res != -1) {\n-      sb.append(res);\n-      res = buf.read();\n-    }\n-    return sb.toString();\n-  }\n-\n   /**\n    * Returns the immutable list of tiles specified in {@param geojson} that intersect {@param\n    * bounds}.\n    */\n   public ImmutableList<Tile> intersectingTiles(LatLngBounds bounds, File file) {\n     try {\n-      String fileContents = readJsonFile(file);\n+      String fileContents = FileUtils.readFileToString(file, Charset.forName(\"UTF-8\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11330c90c776d4f678c92b808d40c127d25d6081"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28645ba339cce720b7cb59b0575813063fd75b4d", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/28645ba339cce720b7cb59b0575813063fd75b4d", "committedDate": "2020-03-12T15:35:27Z", "message": "Merge branch 'offline-area-support' of https://github.com/google/ground-android into json-p"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad50a09614299d4f39ba9f85d184606cd53a43fc", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/ad50a09614299d4f39ba9f85d184606cd53a43fc", "committedDate": "2020-03-12T15:37:50Z", "message": "Commons is a proper noun!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b587085137ac7e93bf0fc7bdece24f7005674c0", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/2b587085137ac7e93bf0fc7bdece24f7005674c0", "committedDate": "2020-03-12T15:38:15Z", "message": "Make JSON source charset a constant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a72958985d260b73355638e95b0d9c95c92f6fb6", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/a72958985d260b73355638e95b0d9c95c92f6fb6", "committedDate": "2020-03-12T16:04:57Z", "message": "Merge branch 'master' into json-p"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNjkyNjQ2", "url": "https://github.com/google/ground-android/pull/391#pullrequestreview-373692646", "createdAt": "2020-03-12T16:05:30Z", "commit": {"oid": "2b587085137ac7e93bf0fc7bdece24f7005674c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1733, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}