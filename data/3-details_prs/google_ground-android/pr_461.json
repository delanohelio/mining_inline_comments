{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5OTkyNjkw", "number": 461, "title": "Disable firebase performance plugin to speed up build time", "bodyText": "Fixes #460\nhttps://firebase.google.com/docs/perf-mon/disable-sdk?platform=android#disable-gradle-plugin\nDisables the plugin by setting instrumentationEnabled to false only for debug build type.\nThis prevents gnd:transformClassesWithFirebasePerformancePluginForDebug task from getting executed.\nTo verify the changes, I ran 3 tests and performed the following steps for each.\n\nDisabled gradle cache from gradle.properties so that it does not affect test results\nClean project\nBuild project\n\nTests summary:\n\nNo changes(master branch): 57s\nCommented out apply plugin: 'com.google.firebase.firebase-perf': 23s\nSet instrumentationEnabled as false: 22s\n\n(with caching enabled, it only takes 5-7s with the new changes)\nFull output:\nTest 1\n\nClean project\nBuild project\n\nExecuting tasks: [:gnd:assembleDebug] in project /Users/ashobhit/Code/ground-android\n\nConfiguration on demand is an incubating feature.\n\n> Configure project :gnd\nWARNING: The following project options are deprecated and have been removed: \nandroid.enableUnitTestBinaryResources\nThe raw resource for unit test functionality is removed.\n\n\nWARNING: The option setting 'android.enableSeparateAnnotationProcessing=true' is experimental and unsupported.\nThe current default is 'false'.\n\n\n> Configure project :android-gmaps-addons\nWARNING: The following project options are deprecated and have been removed: \nandroid.enableUnitTestBinaryResources\nThe raw resource for unit test functionality is removed.\n\n\n\n> Task :android-gmaps-addons:preBuild UP-TO-DATE\n> Task :android-gmaps-addons:preDebugBuild UP-TO-DATE\n> Task :android-gmaps-addons:generateDebugBuildConfig\n> Task :android-gmaps-addons:generateDebugResValues\n> Task :gnd:preBuild UP-TO-DATE\n> Task :gnd:preDebugBuild UP-TO-DATE\n> Task :android-gmaps-addons:compileDebugAidl NO-SOURCE\n> Task :android-gmaps-addons:compileDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:generateDebugResources\n> Task :gnd:mergeDebugShaders\n> Task :gnd:compileDebugAidl NO-SOURCE\n> Task :android-gmaps-addons:packageDebugResources\n> Task :gnd:compileDebugShaders\n> Task :gnd:generateDebugAssets\n\n> Task :gnd:processDebugGoogleServices\nParsing json file: /Users/ashobhit/Code/ground-android/gnd/src/debug/google-services.json\n\n> Task :gnd:mainApkListPersistenceDebug\n> Task :gnd:createDebugCompatibleScreenManifests\n> Task :gnd:extractDeepLinksDebug\n> Task :android-gmaps-addons:packageDebugRenderscript NO-SOURCE\n> Task :gnd:generateDebugBuildConfig\n> Task :android-gmaps-addons:mergeDebugShaders\n> Task :gnd:compileDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:compileDebugShaders\n> Task :android-gmaps-addons:generateDebugAssets\n> Task :gnd:writeDebugApplicationId\n> Task :android-gmaps-addons:packageDebugAssets\n> Task :android-gmaps-addons:extractDeepLinksDebug\n> Task :android-gmaps-addons:javaPreCompileDebug\n> Task :android-gmaps-addons:parseDebugLocalResources\n> Task :android-gmaps-addons:processDebugManifest\n> Task :gnd:generateSafeArgsDebug\n> Task :gnd:mergeDebugAssets\n> Task :android-gmaps-addons:generateDebugRFile\n> Task :android-gmaps-addons:processDebugAnnotationsWithJavac SKIPPED\n> Task :android-gmaps-addons:compileDebugJavaWithJavac\n> Task :android-gmaps-addons:bundleLibCompileDebug\n> Task :android-gmaps-addons:compileDebugLibraryResources\n> Task :android-gmaps-addons:processDebugJavaRes NO-SOURCE\n> Task :android-gmaps-addons:bundleLibResDebug\n\n> Task :gnd:processDebugManifest\n/Users/ashobhit/Code/ground-android/gnd/src/main/AndroidManifest.xml:24:9-31:50 Warning:\n\tactivity#com.google.firebase.auth.internal.FederatedSignInActivity@android:launchMode was tagged at AndroidManifest.xml:24 to replace other declarations but no other declaration present\n\n> Task :gnd:fabricGenerateResourcesDebug\n> Task :gnd:prepareLintJar UP-TO-DATE\n> Task :gnd:prepareLintJarForPublish UP-TO-DATE\n> Task :gnd:generateDebugSources\n> Task :android-gmaps-addons:bundleLibRuntimeDebug\n> Task :gnd:dataBindingExportBuildInfoDebug\n> Task :android-gmaps-addons:mergeDebugJniLibFolders\n> Task :gnd:generateDebugResValues\n> Task :gnd:generateDebugResources\n> Task :android-gmaps-addons:mergeDebugNativeLibs\n> Task :android-gmaps-addons:stripDebugDebugSymbols\n> Task :android-gmaps-addons:copyDebugJniLibsProjectOnly\n> Task :gnd:mergeDebugResources\n> Task :gnd:processDebugResources\n> Task :gnd:processDebugJavaRes NO-SOURCE\n> Task :gnd:checkDebugDuplicateClasses\n> Task :gnd:mergeDebugJniLibFolders\n> Task :gnd:dataBindingMergeGenClassesDebug\n> Task :gnd:validateSigningDebug\n> Task :gnd:dataBindingExportFeaturePackageIdsDebug\n> Task :gnd:javaPreCompileDebug\n> Task :gnd:dataBindingMergeDependencyArtifactsDebug\n> Task :gnd:dataBindingGenBaseClassesDebug\n\n> Task :gnd:processDebugAnnotationsWithJavac\n\n> Task :gnd:compileDebugJavaWithJavac\nANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1ANTLR Runtime version 4.5.3 used for parser compilation does not match the current runtime version 4.7.1ANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1ANTLR Runtime version 4.5.3 used for parser compilation does not match the current runtime version 4.7.1Note: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\n> Task :gnd:compileDebugSources\n\n> Task :gnd:transformClassesWithFirebasePerformancePluginForDebug\njava.lang.ClassNotFoundException: java.util.concurrent.Flow$Publisher\njava.lang.ClassNotFoundException: java.util.concurrent.Flow$Publisher\njava.lang.ClassNotFoundException: java.util.concurrent.Flow$Processor\njava.lang.ClassNotFoundException: java.util.concurrent.Flow$Processor\njava.lang.ClassNotFoundException: java.util.concurrent.Flow$Subscriber\njava.lang.ClassNotFoundException: java.util.concurrent.Flow$Subscriber\n\n> Task :gnd:mergeDebugNativeLibs\n> Task :gnd:mergeDebugJavaResource\n> Task :gnd:dexBuilderDebug\n> Task :gnd:stripDebugDebugSymbols\n> Task :gnd:multiDexListDebug\n> Task :gnd:mergeDexDebug\n> Task :gnd:packageDebug\n> Task :gnd:assembleDebug\n\nBUILD SUCCESSFUL in 57s\n56 actionable tasks: 54 executed, 2 up-to-date\n\nTest 2\n\nComment out apply plugin: 'com.google.firebase.firebase-perf'\nClean project\nBuild project\n\nExecuting tasks: [:gnd:assembleDebug] in project /Users/ashobhit/Code/ground-android\n\nConfiguration on demand is an incubating feature.\n\n> Configure project :gnd\nWARNING: The following project options are deprecated and have been removed: \nandroid.enableUnitTestBinaryResources\nThe raw resource for unit test functionality is removed.\n\n\nWARNING: The option setting 'android.enableSeparateAnnotationProcessing=true' is experimental and unsupported.\nThe current default is 'false'.\n\n\n> Configure project :android-gmaps-addons\nWARNING: The following project options are deprecated and have been removed: \nandroid.enableUnitTestBinaryResources\nThe raw resource for unit test functionality is removed.\n\n\n\n> Task :android-gmaps-addons:preBuild UP-TO-DATE\n> Task :android-gmaps-addons:preDebugBuild UP-TO-DATE\n> Task :android-gmaps-addons:generateDebugBuildConfig\n> Task :android-gmaps-addons:generateDebugResValues\n> Task :gnd:preBuild UP-TO-DATE\n> Task :gnd:preDebugBuild UP-TO-DATE\n> Task :android-gmaps-addons:compileDebugAidl NO-SOURCE\n> Task :android-gmaps-addons:compileDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:generateDebugResources\n> Task :android-gmaps-addons:packageDebugResources\n> Task :android-gmaps-addons:processDebugManifest\n> Task :gnd:mergeDebugShaders\n> Task :android-gmaps-addons:packageDebugRenderscript NO-SOURCE\n> Task :gnd:compileDebugShaders\n> Task :gnd:generateDebugAssets\n> Task :android-gmaps-addons:mergeDebugShaders\n\n> Task :gnd:processDebugGoogleServices\nParsing json file: /Users/ashobhit/Code/ground-android/gnd/src/debug/google-services.json\n\n> Task :android-gmaps-addons:compileDebugShaders\n> Task :android-gmaps-addons:javaPreCompileDebug\n> Task :gnd:compileDebugAidl NO-SOURCE\n> Task :android-gmaps-addons:generateDebugAssets\n> Task :gnd:compileDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:packageDebugAssets\n> Task :android-gmaps-addons:parseDebugLocalResources\n> Task :gnd:mergeDebugAssets\n> Task :android-gmaps-addons:extractDeepLinksDebug\n> Task :gnd:mainApkListPersistenceDebug\n> Task :gnd:createDebugCompatibleScreenManifests\n> Task :gnd:extractDeepLinksDebug\n> Task :android-gmaps-addons:generateDebugRFile\n> Task :android-gmaps-addons:processDebugAnnotationsWithJavac SKIPPED\n> Task :android-gmaps-addons:compileDebugJavaWithJavac\n> Task :android-gmaps-addons:bundleLibCompileDebug\n> Task :android-gmaps-addons:compileDebugLibraryResources\n> Task :android-gmaps-addons:processDebugJavaRes NO-SOURCE\n> Task :android-gmaps-addons:bundleLibResDebug\n> Task :android-gmaps-addons:bundleLibRuntimeDebug\n> Task :android-gmaps-addons:mergeDebugJniLibFolders\n\n> Task :gnd:processDebugManifest\n/Users/ashobhit/Code/ground-android/gnd/src/main/AndroidManifest.xml:24:9-31:50 Warning:\n\tactivity#com.google.firebase.auth.internal.FederatedSignInActivity@android:launchMode was tagged at AndroidManifest.xml:24 to replace other declarations but no other declaration present\n\n> Task :android-gmaps-addons:mergeDebugNativeLibs\n> Task :android-gmaps-addons:stripDebugDebugSymbols\n> Task :android-gmaps-addons:copyDebugJniLibsProjectOnly\n> Task :gnd:fabricGenerateResourcesDebug\n> Task :gnd:generateDebugBuildConfig\n> Task :gnd:writeDebugApplicationId\n> Task :gnd:generateSafeArgsDebug\n> Task :gnd:prepareLintJar UP-TO-DATE\n> Task :gnd:prepareLintJarForPublish UP-TO-DATE\n> Task :gnd:generateDebugSources\n> Task :gnd:dataBindingExportBuildInfoDebug\n> Task :gnd:generateDebugResValues\n> Task :gnd:generateDebugResources\n> Task :gnd:mergeDebugResources\n> Task :gnd:processDebugResources\n> Task :gnd:processDebugJavaRes NO-SOURCE\n> Task :gnd:dataBindingExportFeaturePackageIdsDebug\n> Task :gnd:dataBindingMergeGenClassesDebug\n> Task :gnd:javaPreCompileDebug\n> Task :gnd:dataBindingMergeDependencyArtifactsDebug\n> Task :gnd:dataBindingGenBaseClassesDebug\n\n> Task :gnd:processDebugAnnotationsWithJavac\n\n> Task :gnd:compileDebugJavaWithJavac\nANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1ANTLR Runtime version 4.5.3 used for parser compilation does not match the current runtime version 4.7.1ANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1ANTLR Runtime version 4.5.3 used for parser compilation does not match the current runtime version 4.7.1Note: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\n> Task :gnd:compileDebugSources\n> Task :gnd:checkDebugDuplicateClasses\n> Task :gnd:desugarDebugFileDependencies\n> Task :gnd:dexBuilderDebug\n> Task :gnd:mergeDebugJniLibFolders\n> Task :gnd:validateSigningDebug\n> Task :gnd:mergeDebugJavaResource\n> Task :gnd:mergeDebugNativeLibs\n> Task :gnd:stripDebugDebugSymbols\n> Task :gnd:multiDexListDebug\n> Task :gnd:mergeDexDebug\n> Task :gnd:packageDebug\n> Task :gnd:assembleDebug\n\nBUILD SUCCESSFUL in 23s\n56 actionable tasks: 54 executed, 2 up-to-date\n\nTest 3\n\nSet instrumentationEnabled as false in build.gradle\nClean project\nBuild project\n\nExecuting tasks: [:gnd:assembleDebug] in project /Users/ashobhit/Code/ground-android\n\nConfiguration on demand is an incubating feature.\n\n> Configure project :gnd\nWARNING: The following project options are deprecated and have been removed: \nandroid.enableUnitTestBinaryResources\nThe raw resource for unit test functionality is removed.\n\n\nWARNING: The option setting 'android.enableSeparateAnnotationProcessing=true' is experimental and unsupported.\nThe current default is 'false'.\n\n\n> Configure project :android-gmaps-addons\nWARNING: The following project options are deprecated and have been removed: \nandroid.enableUnitTestBinaryResources\nThe raw resource for unit test functionality is removed.\n\n\n\n> Task :android-gmaps-addons:preBuild UP-TO-DATE\n> Task :android-gmaps-addons:preDebugBuild UP-TO-DATE\n> Task :android-gmaps-addons:generateDebugBuildConfig\n> Task :android-gmaps-addons:generateDebugResValues\n> Task :android-gmaps-addons:processDebugManifest\n> Task :android-gmaps-addons:compileDebugAidl NO-SOURCE\n> Task :android-gmaps-addons:compileDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:generateDebugResources\n> Task :android-gmaps-addons:packageDebugResources\n> Task :gnd:preBuild UP-TO-DATE\n> Task :gnd:preDebugBuild UP-TO-DATE\n> Task :android-gmaps-addons:javaPreCompileDebug\n> Task :android-gmaps-addons:packageDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:parseDebugLocalResources\n> Task :gnd:mergeDebugShaders\n> Task :gnd:compileDebugShaders\n> Task :gnd:generateDebugAssets\n\n> Task :gnd:processDebugGoogleServices\nParsing json file: /Users/ashobhit/Code/ground-android/gnd/src/debug/google-services.json\n\n> Task :gnd:compileDebugAidl NO-SOURCE\n> Task :gnd:compileDebugRenderscript NO-SOURCE\n> Task :android-gmaps-addons:mergeDebugShaders\n> Task :android-gmaps-addons:compileDebugShaders\n> Task :android-gmaps-addons:generateDebugAssets\n> Task :gnd:mainApkListPersistenceDebug\n> Task :android-gmaps-addons:packageDebugAssets\n> Task :android-gmaps-addons:extractDeepLinksDebug\n> Task :gnd:createDebugCompatibleScreenManifests\n> Task :gnd:mergeDebugAssets\n> Task :gnd:extractDeepLinksDebug\n> Task :android-gmaps-addons:generateDebugRFile\n> Task :android-gmaps-addons:processDebugAnnotationsWithJavac SKIPPED\n> Task :android-gmaps-addons:compileDebugJavaWithJavac\n> Task :android-gmaps-addons:bundleLibCompileDebug\n> Task :android-gmaps-addons:compileDebugLibraryResources\n> Task :android-gmaps-addons:processDebugJavaRes NO-SOURCE\n> Task :android-gmaps-addons:bundleLibResDebug\n> Task :android-gmaps-addons:bundleLibRuntimeDebug\n> Task :android-gmaps-addons:mergeDebugJniLibFolders\n> Task :android-gmaps-addons:mergeDebugNativeLibs\n> Task :android-gmaps-addons:stripDebugDebugSymbols\n> Task :android-gmaps-addons:copyDebugJniLibsProjectOnly\n\n> Task :gnd:processDebugManifest\n/Users/ashobhit/Code/ground-android/gnd/src/main/AndroidManifest.xml:24:9-31:50 Warning:\n\tactivity#com.google.firebase.auth.internal.FederatedSignInActivity@android:launchMode was tagged at AndroidManifest.xml:24 to replace other declarations but no other declaration present\n\n> Task :gnd:fabricGenerateResourcesDebug\n> Task :gnd:generateDebugBuildConfig\n> Task :gnd:writeDebugApplicationId\n> Task :gnd:generateSafeArgsDebug\n> Task :gnd:prepareLintJar UP-TO-DATE\n> Task :gnd:prepareLintJarForPublish UP-TO-DATE\n> Task :gnd:generateDebugSources\n> Task :gnd:dataBindingExportBuildInfoDebug\n> Task :gnd:generateDebugResValues\n> Task :gnd:generateDebugResources\n> Task :gnd:dataBindingMergeDependencyArtifactsDebug\n> Task :gnd:mergeDebugResources\n> Task :gnd:processDebugResources\n> Task :gnd:processDebugJavaRes NO-SOURCE\n> Task :gnd:checkDebugDuplicateClasses\n> Task :gnd:mergeDebugJniLibFolders\n> Task :gnd:validateSigningDebug\n> Task :gnd:javaPreCompileDebug\n> Task :gnd:dataBindingMergeGenClassesDebug\n> Task :gnd:dataBindingGenBaseClassesDebug\n> Task :gnd:dataBindingExportFeaturePackageIdsDebug\n\n> Task :gnd:processDebugAnnotationsWithJavac\n\n> Task :gnd:compileDebugJavaWithJavac\nANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1ANTLR Runtime version 4.5.3 used for parser compilation does not match the current runtime version 4.7.1ANTLR Tool version 4.5.3 used for code generation does not match the current runtime version 4.7.1ANTLR Runtime version 4.5.3 used for parser compilation does not match the current runtime version 4.7.1Note: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\n> Task :gnd:compileDebugSources\n> Task :gnd:dexBuilderDebug\n> Task :gnd:mergeDebugNativeLibs\n> Task :gnd:stripDebugDebugSymbols\n> Task :gnd:mergeDebugJavaResource\n> Task :gnd:multiDexListDebug\n> Task :gnd:mergeDexDebug\n> Task :gnd:packageDebug\n> Task :gnd:assembleDebug\n\nBUILD SUCCESSFUL in 22s\n55 actionable tasks: 53 executed, 2 up-to-date", "createdAt": "2020-04-28T09:22:42Z", "url": "https://github.com/google/ground-android/pull/461", "merged": true, "mergeCommit": {"oid": "f2112f1cbfcac88db6e59d3b4a00d118cac79116"}, "closed": true, "closedAt": "2020-04-28T16:10:26Z", "author": {"login": "shobhitagarwal1612"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccAJniAH2gAyNDA5OTkyNjkwOmVhMmMyMjMyZjM4N2IxOWFkYmM3OTg0YjRhZTI1MTBkMjdhNjg4NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccGNqfgFqTQwMTk5MzU0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ea2c2232f387b19adbc7984b4ae2510d27a68863", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/ea2c2232f387b19adbc7984b4ae2510d27a68863", "committedDate": "2020-04-28T09:06:28Z", "message": "Disable firebase plugin for debug builds"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTMzMzAw", "url": "https://github.com/google/ground-android/pull/461#pullrequestreview-401933300", "createdAt": "2020-04-28T15:07:58Z", "commit": {"oid": "ea2c2232f387b19adbc7984b4ae2510d27a68863"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTowNzo1OFrOGNY0zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTowNzo1OFrOGNY0zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY5MTQwNw==", "bodyText": "I didn't realize you could disable it this way, thanks!\nOne question - for debugging the app, wouldn't we also want this enabled? If so, should we instead have a different [default] variant, e.g. dev, for use during development?", "url": "https://github.com/google/ground-android/pull/461#discussion_r416691407", "createdAt": "2020-04-28T15:07:58Z", "author": {"login": "gino-m"}, "path": "gnd/build.gradle", "diffHunk": "@@ -68,6 +68,9 @@ android {\n         }\n         debug {\n             resValue(\"string\", \"GOOGLE_MAPS_API_KEY\", googleMapsApiKey)\n+            FirebasePerformance {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea2c2232f387b19adbc7984b4ae2510d27a68863"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTkzNTQ1", "url": "https://github.com/google/ground-android/pull/461#pullrequestreview-401993545", "createdAt": "2020-04-28T16:10:19Z", "commit": {"oid": "ea2c2232f387b19adbc7984b4ae2510d27a68863"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1544, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}