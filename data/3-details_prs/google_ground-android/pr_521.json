{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMzk0MzQw", "number": 521, "title": "[Offline support] Remove old layers when inserting new ones", "bodyText": "Fixes #512\nVerified by adding a unit test", "createdAt": "2020-07-02T09:28:51Z", "url": "https://github.com/google/ground-android/pull/521", "merged": true, "mergeCommit": {"oid": "a10045990666e403b6cc75ea444c22d57cb1fec2"}, "closed": true, "closedAt": "2020-07-13T17:18:47Z", "author": {"login": "shobhitagarwal1612"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcw7Y5BAH2gAyNDQzMzk0MzQwOmE5MTA3NDE4OTBmNjRjNjYxMjJmYTgyODRlNzViNGI1N2RkNmNmNGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0kEXtAH2gAyNDQzMzk0MzQwOjljYTcxNmQ0MzkzY2FjZTUwNmVjYjA5Zjg1ZjFjODFiMDI5NmE5YTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a910741890f64c66122fa8284e75b4b57dd6cf4c", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/a910741890f64c66122fa8284e75b4b57dd6cf4c", "committedDate": "2020-07-02T09:26:02Z", "message": "Delete saved layers before inserting new layers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8abeb05c7fc55932b88edb4610c06466ed726d57", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/8abeb05c7fc55932b88edb4610c06466ed726d57", "committedDate": "2020-07-02T09:26:15Z", "message": "Add unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "107e60b985c0379ca56dc18518a901599e32c5bf", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/107e60b985c0379ca56dc18518a901599e32c5bf", "committedDate": "2020-07-02T17:15:25Z", "message": "Merge branch 'master' into issue-512"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01e65bbc3a76f44a692fea474535c95fe44848e4", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/01e65bbc3a76f44a692fea474535c95fe44848e4", "committedDate": "2020-07-03T03:26:04Z", "message": "Merge branch 'master' into issue-512"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6592ba149957c4ef94675a241a0e1dee042e0c2f", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/6592ba149957c4ef94675a241a0e1dee042e0c2f", "committedDate": "2020-07-03T12:16:52Z", "message": "Merge branch 'master' into issue-512"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1cd239d2d908f120cda09a3a7d23413ea74807f", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/c1cd239d2d908f120cda09a3a7d23413ea74807f", "committedDate": "2020-07-06T11:46:18Z", "message": "Merge branch 'master' into issue-512"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c882bad3634924e5f57b8cd35c76b6dfdece5ca7", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/c882bad3634924e5f57b8cd35c76b6dfdece5ca7", "committedDate": "2020-07-06T15:47:48Z", "message": "Merge branch 'master' into issue-512"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfb14db74d47696c08171d70102ef5dbf5aa1aff", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/dfb14db74d47696c08171d70102ef5dbf5aa1aff", "committedDate": "2020-07-06T18:37:31Z", "message": "Merge branch 'master' into issue-512"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMzIwMjY5", "url": "https://github.com/google/ground-android/pull/521#pullrequestreview-443320269", "createdAt": "2020-07-06T18:38:40Z", "commit": {"oid": "dfb14db74d47696c08171d70102ef5dbf5aa1aff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxODozODo0MVrOGti2qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxODozODo0MVrOGti2qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQxMDE1NA==", "bodyText": "Nit: Please qualify Builder with Project instead - we'll often have more than one class called Builder imported at a time; by always qualifying by the outer class usage will be more consistent. Thanks!", "url": "https://github.com/google/ground-android/pull/521#discussion_r450410154", "createdAt": "2020-07-06T18:38:41Z", "author": {"login": "gino-m"}, "path": "gnd/src/test/java/com/google/android/gnd/persistence/local/LocalDataStoreTest.java", "diffHunk": "@@ -231,6 +232,39 @@ public void testDeleteProject() {\n     localDataStore.getProjects().test().assertValue(AbstractCollection::isEmpty);\n   }\n \n+  @Test\n+  public void testRemovedLayerFromProject() {\n+    Layer layer1 =\n+        Layer.newBuilder()\n+            .setId(\"layer 1\")\n+            .setDefaultStyle(Style.builder().setColor(\"000\").build())\n+            .build();\n+    Layer layer2 =\n+        Layer.newBuilder()\n+            .setId(\"layer 2\")\n+            .setDefaultStyle(Style.builder().setColor(\"000\").build())\n+            .build();\n+\n+    Builder project =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfb14db74d47696c08171d70102ef5dbf5aa1aff"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2eebe49aa0453e48c24ab9aad6ddcdd68c9a49c", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/f2eebe49aa0453e48c24ab9aad6ddcdd68c9a49c", "committedDate": "2020-07-07T03:44:06Z", "message": "fix variable type\n\nthe variable was named project but was actually of type Builder. So, change variable type to Project"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NDEyNjU4", "url": "https://github.com/google/ground-android/pull/521#pullrequestreview-447412658", "createdAt": "2020-07-13T16:31:25Z", "commit": {"oid": "f2eebe49aa0453e48c24ab9aad6ddcdd68c9a49c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca716d4393cace506ecb09f85f1c81b0296a9a2", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/9ca716d4393cace506ecb09f85f1c81b0296a9a2", "committedDate": "2020-07-13T16:31:30Z", "message": "Merge branch 'master' into issue-512"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1588, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}