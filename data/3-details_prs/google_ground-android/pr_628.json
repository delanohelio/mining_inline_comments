{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNzA3MTg1", "number": 628, "title": "Basemap selector", "bodyText": "This PR contains tweaks for offline basemap list and selector UIs:\n\n\n\nfixes #609, #608, #607, #606", "createdAt": "2020-11-17T21:07:36Z", "url": "https://github.com/google/ground-android/pull/628", "merged": true, "mergeCommit": {"oid": "f6916b58b2ea4e2c72f1f4bde510ac71fa337539"}, "closed": true, "closedAt": "2020-12-10T20:35:20Z", "author": {"login": "scolsen"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddRv39gH2gAyNTIyNzA3MTg1OmRmNTI2MzNmYWNiOTQxMWY1NDBjY2FmMTA4NDgwOWQ3OTY0M2RiOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk5dIZgFqTU0OTU3OTc5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df52633facb9411f540ccaf1084809d79643db97", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/df52633facb9411f540ccaf1084809d79643db97", "committedDate": "2020-11-17T04:21:43Z", "message": "Basemap Selector: Tweak select button UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1d13cc14cc3881a0225cd60f08b4c214d2a043e", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/d1d13cc14cc3881a0225cd60f08b4c214d2a043e", "committedDate": "2020-11-17T04:36:47Z", "message": "Basemap Selector: Move download button to header, tweak color"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f99d7411401d4fc4599fa046c084c94b589a12a0", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/f99d7411401d4fc4599fa046c084c94b589a12a0", "committedDate": "2020-11-17T05:04:23Z", "message": "Merge branch 'master' of https://github.com/google/ground-android into basemap-selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6821f6a2ae6b934b6f774dc0829e8ba093a6609", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/e6821f6a2ae6b934b6f774dc0829e8ba093a6609", "committedDate": "2020-11-17T05:12:35Z", "message": "Basemap Selector: Display message when no basemaps are downloaded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fb66e1250696f7850edd270d65990623d532693", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/6fb66e1250696f7850edd270d65990623d532693", "committedDate": "2020-11-17T21:00:33Z", "message": "Basemap list: Tweak formatting of list items\n\n- Add icon\n- Add margins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ceadee50118738df4e91541e881d55c3691a88c", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/0ceadee50118738df4e91541e881d55c3691a88c", "committedDate": "2020-11-17T21:01:18Z", "message": "Basemap Selector: Reduce size of map container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8017e7a08d27810765ea32e06d9661c77ded8bbc", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/8017e7a08d27810765ea32e06d9661c77ded8bbc", "committedDate": "2020-11-17T21:03:49Z", "message": "Merge branch 'master' of https://github.com/google/ground-android into basemap-selector"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNDUyNzU4", "url": "https://github.com/google/ground-android/pull/628#pullrequestreview-533452758", "createdAt": "2020-11-18T13:38:20Z", "commit": {"oid": "8017e7a08d27810765ea32e06d9661c77ded8bbc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da14e4d9a7ea21839d21db345a7dc572bf819abd", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/da14e4d9a7ea21839d21db345a7dc572bf819abd", "committedDate": "2020-12-01T01:57:57Z", "message": "Ui tweaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43c672073368e609d34507962eaf307d2bdeac87", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/43c672073368e609d34507962eaf307d2bdeac87", "committedDate": "2020-12-01T02:01:08Z", "message": "Merge branch 'master' of https://github.com/google/ground-android into basemap-selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ef999e2a76f4f611518c91b9a1d861f459233c", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/65ef999e2a76f4f611518c91b9a1d861f459233c", "committedDate": "2020-12-01T15:15:38Z", "message": "Merge branch 'master' into basemap-selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd3c9f06b091703beb904190c4cde6994510ce5a", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/dd3c9f06b091703beb904190c4cde6994510ce5a", "committedDate": "2020-12-01T16:51:43Z", "message": "Merge branch 'basemap-selector' of https://github.com/scolsen/ground-android into basemap-selector"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3Mjk2Njgz", "url": "https://github.com/google/ground-android/pull/628#pullrequestreview-547296683", "createdAt": "2020-12-08T14:39:45Z", "commit": {"oid": "dd3c9f06b091703beb904190c4cde6994510ce5a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDozOTo0NlrOIBgFGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNDo0MDoyOFrOIBgHuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0NTA4MA==", "bodyText": "Rather than subscribing and imperatively updating the visibility, can we instead expose an LiveData that is derived from the getOfflineAreas() stream? We've started doing this elsewhere and I think we got the best of both worlds - readable code, and purely functional impl. Wdyt?", "url": "https://github.com/google/ground-android/pull/628#discussion_r538445080", "createdAt": "2020-12-08T14:39:46Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/offlinebasemap/OfflineBaseMapsFragment.java", "diffHunk": "@@ -66,6 +66,17 @@ public View onCreateView(\n     recyclerView.setAdapter(offlineBaseMapListAdapter);\n \n     viewModel.getOfflineAreas().observe(getViewLifecycleOwner(), offlineBaseMapListAdapter::update);\n+    viewModel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd3c9f06b091703beb904190c4cde6994510ce5a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0NTc1Mw==", "bodyText": "Nit: Add blank link above to make the separation of these two elements more visible.", "url": "https://github.com/google/ground-android/pull/628#discussion_r538445753", "createdAt": "2020-12-08T14:40:28Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/res/layout/offline_base_map_selector_frag.xml", "diffHunk": "@@ -51,24 +56,25 @@\n         app:layout_constraintStart_toStartOf=\"parent\"\n         app:layout_constraintTop_toTopOf=\"parent\"\n         app:title=\"@string/offline_base_map_selector\"\n-        app:titleTextColor=\"@color/colorBackground\" />\n-\n-      <com.google.android.material.chip.Chip\n-        android:id=\"@+id/download_button\"\n-        style=\"@style/ChipButton\"\n-        android:layout_width=\"wrap_content\"\n-        android:layout_height=\"wrap_content\"\n-        android:layout_gravity=\"bottom|end\"\n-        android:layout_marginEnd=\"@dimen/chip_button_margin_right\"\n-        android:layout_marginRight=\"@dimen/chip_button_margin_right\"\n-        android:layout_marginBottom=\"@dimen/map_btn_margin_bottom\"\n-        android:elevation=\"6dp\"\n-        android:text=\"@string/offline_base_map_selector_download\"\n-        app:chipIcon=\"@drawable/ic_area_download\"\n-        app:layout_constraintBottom_toBottomOf=\"parent\"\n-        app:layout_constraintEnd_toEndOf=\"parent\"\n-        app:useCompatPadding=\"true\" />\n-\n+        app:titleTextColor=\"@color/colorBackground\">\n+        <com.google.android.material.button.MaterialButton", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd3c9f06b091703beb904190c4cde6994510ce5a"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d480ff4b2ad4894209d86c815269db0b56fe003", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/0d480ff4b2ad4894209d86c815269db0b56fe003", "committedDate": "2020-12-08T15:37:27Z", "message": "Base map selector: Set no area message visibility using stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b90666edd59f19c4963e86dc21a6a26612b01a9d", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/b90666edd59f19c4963e86dc21a6a26612b01a9d", "committedDate": "2020-12-08T17:07:55Z", "message": "Add blank link between methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NDQ1NTI1", "url": "https://github.com/google/ground-android/pull/628#pullrequestreview-547445525", "createdAt": "2020-12-08T17:09:08Z", "commit": {"oid": "0d480ff4b2ad4894209d86c815269db0b56fe003"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzowOTowOFrOIBqXaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzowOTowOFrOIBqXaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODYxMzYxMQ==", "bodyText": "This can now be set by binding the noAreasDownloadedMessage in the fragment layout. Example:\n\n  \n    \n      ground-android/gnd/src/main/res/layout/edit_observation_frag.xml\n    \n    \n         Line 92\n      in\n      f1d82b9\n    \n    \n    \n    \n\n        \n          \n           android:visibility=\"@{viewModel.isLoading ? View.VISIBLE : View.GONE }\"/>", "url": "https://github.com/google/ground-android/pull/628#discussion_r538613611", "createdAt": "2020-12-08T17:09:08Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/offlinebasemap/OfflineBaseMapsFragment.java", "diffHunk": "@@ -66,6 +66,9 @@ public View onCreateView(\n     recyclerView.setAdapter(offlineBaseMapListAdapter);\n \n     viewModel.getOfflineAreas().observe(getViewLifecycleOwner(), offlineBaseMapListAdapter::update);\n+    viewModel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d480ff4b2ad4894209d86c815269db0b56fe003"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae01c2a686ce6adff1f3aedba875d5752d1667d8", "author": {"user": {"login": "gino-m", "name": "Gino Miceli"}}, "url": "https://github.com/google/ground-android/commit/ae01c2a686ce6adff1f3aedba875d5752d1667d8", "committedDate": "2020-12-10T16:17:29Z", "message": "Merge branch 'master' into basemap-selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6b1a839b80859529bc89defc46eb5fc0425c06e", "author": {"user": {"login": "scolsen", "name": "Scott Olsen"}}, "url": "https://github.com/google/ground-android/commit/c6b1a839b80859529bc89defc46eb5fc0425c06e", "committedDate": "2020-12-10T17:06:07Z", "message": "Use databinding directly in offline basemap layout"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTc5Nzkw", "url": "https://github.com/google/ground-android/pull/628#pullrequestreview-549579790", "createdAt": "2020-12-10T20:34:55Z", "commit": {"oid": "c6b1a839b80859529bc89defc46eb5fc0425c06e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1657, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}