{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMzczNTY4", "number": 399, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjoyNjozNFrODpFo5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTo0MDozMFrODpKoPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDEwNTk3OnYy", "diffSide": "RIGHT", "path": "cloud-builder/generate_dependency_health_svg.py", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMjoyNjozNFrOF4Cpuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTo0MDowNFrOF4K6UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMwODAyNw==", "bodyText": "@gino-m @scolsen @dturner\nThoughts on the thresholds of current chosen range?\nCurrent states: Poor[red], Fair[orange], Good[green]\nOther considered states:\n\nPoor[red], Fair[orange], Good[light green], Excellent[green]\nBad[red], Poor[orange], Fair[yellow], Good[light green], Excellent[green]", "url": "https://github.com/google/ground-android/pull/399#discussion_r394308027", "createdAt": "2020-03-18T12:26:34Z", "author": {"login": "shobhitagarwal1612"}, "path": "cloud-builder/generate_dependency_health_svg.py", "diffHunk": "@@ -0,0 +1,87 @@\n+\"\"\"Generates a SVG by parsing json report.\n+\n+Task dependencyUpdates generates a json report. This script parses that file and\n+generates a SVG showing percentage of up-to-date dependencies.\n+\n+Usage:\n+> python cloud-builder/generate_dependency_health_svg.py <path_to_json_report> <output_svg_path>\n+\"\"\"\n+\n+import json\n+from sys import argv\n+\n+SVG_TEMPLATE = 'cloud-builder/dependency.svg'\n+COLOR_RED = '#E05D44'\n+COLOR_ORANGE = '#FFA100'\n+COLOR_GREEN = '#43CC11'\n+\n+\n+def get_status_color(health):\n+    if health >= 67:\n+        return COLOR_GREEN\n+    elif 33 < health < 67:\n+        return COLOR_ORANGE\n+    else:\n+        return COLOR_RED", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dd03b10c1328df4c7db7a96f4a6225cf23c17de"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ0MzM0NA==", "bodyText": "I like the last one (5 ranges), since I think the impact of having older dependencies shouldn't be weighted so harshly - this way we'll have more yellow and green, only slipping into orange if we're really out of date.", "url": "https://github.com/google/ground-android/pull/399#discussion_r394443344", "createdAt": "2020-03-18T15:40:04Z", "author": {"login": "gino-m"}, "path": "cloud-builder/generate_dependency_health_svg.py", "diffHunk": "@@ -0,0 +1,87 @@\n+\"\"\"Generates a SVG by parsing json report.\n+\n+Task dependencyUpdates generates a json report. This script parses that file and\n+generates a SVG showing percentage of up-to-date dependencies.\n+\n+Usage:\n+> python cloud-builder/generate_dependency_health_svg.py <path_to_json_report> <output_svg_path>\n+\"\"\"\n+\n+import json\n+from sys import argv\n+\n+SVG_TEMPLATE = 'cloud-builder/dependency.svg'\n+COLOR_RED = '#E05D44'\n+COLOR_ORANGE = '#FFA100'\n+COLOR_GREEN = '#43CC11'\n+\n+\n+def get_status_color(health):\n+    if health >= 67:\n+        return COLOR_GREEN\n+    elif 33 < health < 67:\n+        return COLOR_ORANGE\n+    else:\n+        return COLOR_RED", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMwODAyNw=="}, "originalCommit": {"oid": "4dd03b10c1328df4c7db7a96f4a6225cf23c17de"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDkxMjE2OnYy", "diffSide": "RIGHT", "path": "cloud-builder/generate_dependency_health_svg.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTozODowNlrOF4K0bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTozODowNlrOF4K0bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ0MTgzOA==", "bodyText": "This should have Copyright header as well.", "url": "https://github.com/google/ground-android/pull/399#discussion_r394441838", "createdAt": "2020-03-18T15:38:06Z", "author": {"login": "gino-m"}, "path": "cloud-builder/generate_dependency_health_svg.py", "diffHunk": "@@ -0,0 +1,87 @@\n+\"\"\"Generates a SVG by parsing json report.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40ef7ed54eb021c7596dad277746bd4e42b03d9e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDkyMzUwOnYy", "diffSide": "RIGHT", "path": "cloudbuild.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTo0MDozMFrOF4K7sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNTo0MDozMFrOF4K7sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQ0MzY5OA==", "bodyText": "Nit: public -> publicly", "url": "https://github.com/google/ground-android/pull/399#discussion_r394443698", "createdAt": "2020-03-18T15:40:30Z", "author": {"login": "gino-m"}, "path": "cloudbuild.yaml", "diffHunk": "@@ -105,14 +105,27 @@ steps:\n \n         # Update build status if running on master branch\n         if [[ \"${_PUSH_TO_MASTER}\" ]]; then\n+\n+          # Gradle Dependencies Status\n+          if [[ -f \"gnd/build/reports/dependencyUpdates/report.json\" ]]; then\n+            python cloud-builder/generate_dependency_health_svg.py gnd/build/reports/dependencyUpdates/report.json dependency.svg\n+\n+            # Copy artifacts for Github badge\n+            gsutil cp dependency.svg gs://${_CACHE_BUCKET}/dependency.svg\n+            gsutil cp gnd/build/reports/dependencyUpdates/report.txt gs://${_CACHE_BUCKET}/dependency.txt\n+          fi\n+\n+          # Build Status\n           if [[ $(< build-status.txt) == \"fail\" ]]; then\n             gsutil cp cloud-builder/failure.svg gs://${_CACHE_BUCKET}/status.svg\n           else\n             gsutil cp cloud-builder/success.svg gs://${_CACHE_BUCKET}/status.svg\n           fi\n \n-          # Make file public readable\n+          # Make files public readable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40ef7ed54eb021c7596dad277746bd4e42b03d9e"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2640, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}