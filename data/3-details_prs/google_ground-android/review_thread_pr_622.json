{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NDQ3NTM1", "number": 622, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxMjoxNzo0NFrOE3MyMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxMjoyMDowOFrOE3M1Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MzE2NTkzOnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerFragment.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxMjoxNzo0NFrOHwZ6qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxMDowODowMVrOHxzhgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxODMxMw==", "bodyText": "I also considered using a flowable processor which converts events to LiveData. But the problem with that is, it always emits the last value on resubscription. So, the dialog would pop-up again and again after every rotation (or any config change).", "url": "https://github.com/google/ground-android/pull/622#discussion_r520518313", "createdAt": "2020-11-10T12:17:44Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerFragment.java", "diffHunk": "@@ -163,6 +146,24 @@ private void onMapReady(MapAdapter map) {\n     binding.moveFeature.cancelButton.setOnClickListener(__ -> setDefaultMode());\n     enableLocationLockBtn();\n     mapContainerViewModel.getMbtilesFilePaths().observe(this, map::addTileOverlays);\n+    mapContainerViewModel.getSelectMapTypeClicks()\n+        .as(autoDisposable(getViewLifecycleOwner()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efca49d11db4b2a0a0302c635c8129d44aa1d72"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMDM2Mg==", "bodyText": "That shouldn't be the case; Flowables would only emit the last item if you use buffer strategy \"latest\". I think this is the most likely cause, since selectMapTypeClicks is a PublishSubject, which doesn't cache the last value.\nIf you're still having trouble with duplicate requests, consider using com.google.android.gnd.rx.Event to wrap the value, and only processing it using its ifUnhandled() method.", "url": "https://github.com/google/ground-android/pull/622#discussion_r521330362", "createdAt": "2020-11-11T12:40:34Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerFragment.java", "diffHunk": "@@ -163,6 +146,24 @@ private void onMapReady(MapAdapter map) {\n     binding.moveFeature.cancelButton.setOnClickListener(__ -> setDefaultMode());\n     enableLocationLockBtn();\n     mapContainerViewModel.getMbtilesFilePaths().observe(this, map::addTileOverlays);\n+    mapContainerViewModel.getSelectMapTypeClicks()\n+        .as(autoDisposable(getViewLifecycleOwner()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxODMxMw=="}, "originalCommit": {"oid": "0efca49d11db4b2a0a0302c635c8129d44aa1d72"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTk4NjQzNA==", "bodyText": "Done", "url": "https://github.com/google/ground-android/pull/622#discussion_r521986434", "createdAt": "2020-11-12T10:08:01Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerFragment.java", "diffHunk": "@@ -163,6 +146,24 @@ private void onMapReady(MapAdapter map) {\n     binding.moveFeature.cancelButton.setOnClickListener(__ -> setDefaultMode());\n     enableLocationLockBtn();\n     mapContainerViewModel.getMbtilesFilePaths().observe(this, map::addTileOverlays);\n+    mapContainerViewModel.getSelectMapTypeClicks()\n+        .as(autoDisposable(getViewLifecycleOwner()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxODMxMw=="}, "originalCommit": {"oid": "0efca49d11db4b2a0a0302c635c8129d44aa1d72"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MzE3Mzk4OnYy", "diffSide": "RIGHT", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerViewModel.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxMjoyMDowOFrOHwZ_vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMjo0MTowNlrOHxLfuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxOTYxMg==", "bodyText": "These changes were unintentional. IDE added these after running \"reformat file\".", "url": "https://github.com/google/ground-android/pull/622#discussion_r520519612", "createdAt": "2020-11-10T12:20:08Z", "author": {"login": "shobhitagarwal1612"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerViewModel.java", "diffHunk": "@@ -300,8 +305,8 @@ public void setSelectedFeature(Optional<Feature> selectedFeature) {\n \n   static class CameraUpdate {\n \n-    private Point center;\n-    private Optional<Float> minZoomLevel;\n+    private final Point center;\n+    private final Optional<Float> minZoomLevel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efca49d11db4b2a0a0302c635c8129d44aa1d72"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzMDYxNw==", "bodyText": "Ok", "url": "https://github.com/google/ground-android/pull/622#discussion_r521330617", "createdAt": "2020-11-11T12:41:06Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/ui/home/mapcontainer/MapContainerViewModel.java", "diffHunk": "@@ -300,8 +305,8 @@ public void setSelectedFeature(Optional<Feature> selectedFeature) {\n \n   static class CameraUpdate {\n \n-    private Point center;\n-    private Optional<Float> minZoomLevel;\n+    private final Point center;\n+    private final Optional<Float> minZoomLevel;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDUxOTYxMg=="}, "originalCommit": {"oid": "0efca49d11db4b2a0a0302c635c8129d44aa1d72"}, "originalPosition": 91}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2563, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}