{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MjQ4NjMw", "number": 492, "title": "[Bug] Prevent duplicate entries of multiple choice fields", "bodyText": "Fixes #491.\nUpdate primary keys for OptionEntity and MultipleChoiceEntity.\nVerified by following the steps in issue and confirmed that duplicate entries were not saved.\n@gino-m  PTAL?", "createdAt": "2020-05-29T18:07:04Z", "url": "https://github.com/google/ground-android/pull/492", "merged": true, "mergeCommit": {"oid": "4995365fc3ffae8f11acedb4a31411b491c3c59c"}, "closed": true, "closedAt": "2020-05-29T22:33:12Z", "author": {"login": "shobhitagarwal1612"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmGaUfgH2gAyNDI1MjQ4NjMwOjU5Zjk0N2JjYWFmZTY5YTQwOTUzNGRkZjFkMjQ5ZjcxZjcxMThhNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmJ49hAFqTQyMTMyMzQ0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "59f947bcaafe69a409534ddf1d249f71f7118a56", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/59f947bcaafe69a409534ddf1d249f71f7118a56", "committedDate": "2020-05-29T18:03:23Z", "message": "Set field id as the primary key since it is 1:1 mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54a5f5607145d4515599af5270841a4a9212fb32", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/54a5f5607145d4515599af5270841a4a9212fb32", "committedDate": "2020-05-29T18:03:48Z", "message": "Use a composite primary key (code + field_id)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f5e6799810f4f83caa3b81bd4468d3120e75aad", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/3f5e6799810f4f83caa3b81bd4468d3120e75aad", "committedDate": "2020-05-29T18:03:56Z", "message": "Update db version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "059ef94b79b306bf2954a0358c0a802c8b42ca8c", "author": {"user": {"login": "shobhitagarwal1612", "name": "Shobhit Agarwal"}}, "url": "https://github.com/google/ground-android/commit/059ef94b79b306bf2954a0358c0a802c8b42ca8c", "committedDate": "2020-05-29T18:25:04Z", "message": "Suppress PMD warning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzIzMzUz", "url": "https://github.com/google/ground-android/pull/492#pullrequestreview-421323353", "createdAt": "2020-05-29T22:06:26Z", "commit": {"oid": "059ef94b79b306bf2954a0358c0a802c8b42ca8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMjowNjoyNlrOGctmRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMjowNjoyNlrOGctmRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc2MDM5MQ==", "bodyText": "Why no PMD?", "url": "https://github.com/google/ground-android/pull/492#discussion_r432760391", "createdAt": "2020-05-29T22:06:26Z", "author": {"login": "gino-m"}, "path": "gnd/src/main/java/com/google/android/gnd/persistence/local/room/entity/OptionEntity.java", "diffHunk": "@@ -33,14 +32,12 @@\n         @ForeignKey(\n             entity = FieldEntity.class,\n             parentColumns = \"id\",\n-            childColumns = \"field_id\",\n-            onDelete = ForeignKey.CASCADE),\n-    indices = {@Index(\"field_id\")})\n+            childColumns = \"field_id\", // NOPMD", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "059ef94b79b306bf2954a0358c0a802c8b42ca8c"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzIzNDQ4", "url": "https://github.com/google/ground-android/pull/492#pullrequestreview-421323448", "createdAt": "2020-05-29T22:06:34Z", "commit": {"oid": "059ef94b79b306bf2954a0358c0a802c8b42ca8c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1564, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}