{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwODY4OTA4", "number": 1725, "title": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible ", "bodyText": "https://issues.redhat.com/browse/JBTM-3393\nLRA\n!MAIN !CORE !QA_JTA !QA_JTS_JDKORB !QA_JTS_OPENJDKORB !QA_JTS_JACORB !BLACKTIE !XTS !PERF NO_WIN !RTS !AS_TESTS !TOMCAT !JACOCO\n(note the other commits are added here to get test running but will be removed when the other PRs will be committed)", "createdAt": "2020-11-13T21:51:05Z", "url": "https://github.com/jbosstm/narayana/pull/1725", "merged": true, "mergeCommit": {"oid": "7190d04501cfedaa2b157db032ce74768dc2b1f5"}, "closed": true, "closedAt": "2020-11-18T15:42:47Z", "author": {"login": "ochaloup"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddH_6XgBqjQwMDEzNTAyNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddwFlfgFqTUzMzU3ODExMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "238a377d13fb8eff6ae0ea99a9cf53220ee3cf4a", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/238a377d13fb8eff6ae0ea99a9cf53220ee3cf4a", "committedDate": "2020-11-13T21:45:51Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}, "afterCommit": {"oid": "7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3", "committedDate": "2020-11-16T16:31:39Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMjkyMzQ5", "url": "https://github.com/jbosstm/narayana/pull/1725#pullrequestreview-533292349", "createdAt": "2020-11-18T10:15:05Z", "commit": {"oid": "7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3", "committedDate": "2020-11-16T16:31:39Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}, "afterCommit": {"oid": "85800d19396611d3053e59ac5e813932c3735d1d", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/85800d19396611d3053e59ac5e813932c3735d1d", "committedDate": "2020-11-18T10:17:43Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85800d19396611d3053e59ac5e813932c3735d1d", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/85800d19396611d3053e59ac5e813932c3735d1d", "committedDate": "2020-11-18T10:17:43Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}, "afterCommit": {"oid": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "committedDate": "2020-11-18T13:16:33Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMzgwMzky", "url": "https://github.com/jbosstm/narayana/pull/1725#pullrequestreview-533380392", "createdAt": "2020-11-18T12:07:59Z", "commit": {"oid": "7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMzo0Nzo0NFrOH1ujkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQxMzo1MDoyNVrOH1urAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjA5OTM0Nw==", "bodyText": "this will be ...obtained, , response content:...", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526099347", "createdAt": "2020-11-18T13:47:44Z", "author": {"login": "xstefank"}, "path": "rts/lra/client/src/main/java/io/narayana/lra/client/NarayanaLRAClient.java", "diffHunk": "@@ -530,15 +539,15 @@ public LRAStatus getStatus(URI uri) throws WebApplicationException {\n \n         try {\n             client = getClient();\n-            response = client.target(base)\n+            response = client.target(coordinatorUrl)\n                 .path(String.format(STATUS_PATH, LRAConstants.getLRAUid(uri)))\n                 .request()\n                 .get();\n \n             if (response.getStatus() == NOT_FOUND.getStatusCode()) {\n-                String responseContent = response.readEntity(String.class);\n-                String errorMsg = \"The requested LRA it '\" + lraId + \"' was not found and the status can't be obtained\"\n-                    + (responseContent != null ? \": \" + responseContent : \"\");\n+                String responseEntity = response.hasEntity() ? response.readEntity(String.class) : \"\";\n+                String errorMsg = \"The requested LRA it '\" + lraId + \"' was not found and the status can't be obtained, \"\n+                        + \", response content: \" + responseEntity;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab"}, "originalPosition": 338}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEwMTA5MQ==", "bodyText": "is this still used since you've switched to URL?", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526101091", "createdAt": "2020-11-18T13:50:10Z", "author": {"login": "xstefank"}, "path": "rts/lra/coordinator/pom.xml", "diffHunk": "@@ -18,13 +18,9 @@\n             -Djboss.bind.address=[::1] -Djboss.bind.address.management=[::1] -Djboss.bind.address.unsecure=[::1]\n             -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true\n         </ipv6.server.jvm.args>\n-        <modular.jdk.args/>\n-        <modular.jdk.props/>\n-        <!-- the resource path of the coordinator - must match the deployment URL (see arquillian.xml) -->\n+        <lra.coordinator.host>localhost</lra.coordinator.host>\n+        <lra.coordinator.port>8080</lra.coordinator.port>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEwMTI0OQ==", "bodyText": "is this needed when there is url?", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526101249", "createdAt": "2020-11-18T13:50:25Z", "author": {"login": "xstefank"}, "path": "rts/lra/coordinator/pom.xml", "diffHunk": "@@ -142,6 +138,10 @@\n             <activation>\n                 <activeByDefault>false</activeByDefault>\n             </activation>\n+            <properties>\n+                <lra.coordinator.host>localhost</lra.coordinator.host>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de043b066204257f7811056dc505d56baa7b8431", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/de043b066204257f7811056dc505d56baa7b8431", "committedDate": "2020-11-18T14:21:11Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "committedDate": "2020-11-18T13:16:33Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}, "afterCommit": {"oid": "de043b066204257f7811056dc505d56baa7b8431", "author": {"user": {"login": "ochaloup", "name": "chalda"}}, "url": "https://github.com/jbosstm/narayana/commit/de043b066204257f7811056dc505d56baa7b8431", "committedDate": "2020-11-18T14:21:11Z", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNTc4MTEy", "url": "https://github.com/jbosstm/narayana/pull/1725#pullrequestreview-533578112", "createdAt": "2020-11-18T15:42:35Z", "commit": {"oid": "de043b066204257f7811056dc505d56baa7b8431"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4392, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}