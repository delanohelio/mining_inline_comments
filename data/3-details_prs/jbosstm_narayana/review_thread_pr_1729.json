{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NjYwOTkz", "number": 1729, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODozODoyNlrOE9h6SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODozODoyNlrOE9h6SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyOTU0MTg0OnYy", "diffSide": "RIGHT", "path": "rts/lra/coordinator/src/test/java/io/narayana/lra/coordinator/TestBase.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODozODoyNlrOH6Q4Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxNDoxNjowNlrOH6_5mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA==", "bodyText": "just guessing but this was written separately to not include delimiters ('/') in the path I guess so this won't work on windows.", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r530855994", "createdAt": "2020-11-26T08:38:26Z", "author": {"login": "xstefank"}, "path": "rts/lra/coordinator/src/test/java/io/narayana/lra/coordinator/TestBase.java", "diffHunk": "@@ -168,7 +169,7 @@ private void clearRecoveryLog() {\n     }\n \n     String getFirstLRA() {\n-        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", \"StateManager\", \"BasicAction\", \"TwoPhaseCoordinator\", \"LRA\");\n+        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", LongRunningAction.getType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9655d7b2f019091137df613abff9c9ae82494d9a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg5NTYyOQ==", "bodyText": "That is a very good point. In fact the whole method is assuming the ObjectStore is on a file system (so the test would fail, for example, on JDBC and in-memory stores) . I will raise a separate issue to rewrite the test to use the ObjectStore API to get the log (and to also check we aren't doing something similar elsewhere).", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r530895629", "createdAt": "2020-11-26T09:40:53Z", "author": {"login": "mmusgrov"}, "path": "rts/lra/coordinator/src/test/java/io/narayana/lra/coordinator/TestBase.java", "diffHunk": "@@ -168,7 +169,7 @@ private void clearRecoveryLog() {\n     }\n \n     String getFirstLRA() {\n-        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", \"StateManager\", \"BasicAction\", \"TwoPhaseCoordinator\", \"LRA\");\n+        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", LongRunningAction.getType());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA=="}, "originalCommit": {"oid": "9655d7b2f019091137df613abff9c9ae82494d9a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg5NjYwNA==", "bodyText": "I will make sure the JIRA says that we need the ability to run the tests on at least one other store type.", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r530896604", "createdAt": "2020-11-26T09:42:24Z", "author": {"login": "mmusgrov"}, "path": "rts/lra/coordinator/src/test/java/io/narayana/lra/coordinator/TestBase.java", "diffHunk": "@@ -168,7 +169,7 @@ private void clearRecoveryLog() {\n     }\n \n     String getFirstLRA() {\n-        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", \"StateManager\", \"BasicAction\", \"TwoPhaseCoordinator\", \"LRA\");\n+        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", LongRunningAction.getType());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA=="}, "originalCommit": {"oid": "9655d7b2f019091137df613abff9c9ae82494d9a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTYyNjM5Mg==", "bodyText": "The tracking issue is https://issues.redhat.com/browse/JBTM-3398", "url": "https://github.com/jbosstm/narayana/pull/1729#discussion_r531626392", "createdAt": "2020-11-27T14:16:06Z", "author": {"login": "mmusgrov"}, "path": "rts/lra/coordinator/src/test/java/io/narayana/lra/coordinator/TestBase.java", "diffHunk": "@@ -168,7 +169,7 @@ private void clearRecoveryLog() {\n     }\n \n     String getFirstLRA() {\n-        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", \"StateManager\", \"BasicAction\", \"TwoPhaseCoordinator\", \"LRA\");\n+        Path lraDir = Paths.get(storeDir.toString(), \"ShadowNoFileLockStore\", \"defaultStore\", LongRunningAction.getType());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg1NTk5NA=="}, "originalCommit": {"oid": "9655d7b2f019091137df613abff9c9ae82494d9a"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1149, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}