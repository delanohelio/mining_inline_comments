{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNjcxMTc1", "number": 1590, "title": "JBTM-3273 -> Avoid implementing InvocationHandler in jtaLogger", "bodyText": "https://issues.redhat.com/browse/JBTM-3273\n!MAIN\n!QA_JTS_JACORB\n!QA_JTS_JDKORB\n!QA_JTS_OPENJDKORB\nAS_TESTS JDK11\n!PERF\n!XTS\n!CORE\n!BLACKTIE\n!RTS\n!mysql\n!postgres\n!db2\n!oracle\n!TOMCAT\n!JACOCO\n!LRA", "createdAt": "2020-04-08T07:15:01Z", "url": "https://github.com/jbosstm/narayana/pull/1590", "merged": true, "mergeCommit": {"oid": "46366bdc2ab4306249ae51b2bc631dcda44bcc6b"}, "closed": true, "closedAt": "2020-04-15T11:20:05Z", "author": {"login": "mayankkunwar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVoPbogBqjMyMTQyMDkwNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX7E-_gFqTM5Mzk0MTA5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a539280563a4817bdfcc181bfd4cf21de23565ae", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/a539280563a4817bdfcc181bfd4cf21de23565ae", "committedDate": "2020-04-08T13:49:37Z", "message": "Solution"}, "afterCommit": {"oid": "9bf6bae00c8224933cd7139cfa222b29e5a5b3e1", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/9bf6bae00c8224933cd7139cfa222b29e5a5b3e1", "committedDate": "2020-04-08T13:50:53Z", "message": "JBTM-3273 -> Avoid implementing InvocationHandler in jtaLogger"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b911eb8bde6d19da4a91426ab7c1295e869e01d", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/7b911eb8bde6d19da4a91426ab7c1295e869e01d", "committedDate": "2020-04-08T15:52:53Z", "message": "Solution2"}, "afterCommit": {"oid": "7fc53a60a33a23199f803aa70ac8c00604d14d42", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/7fc53a60a33a23199f803aa70ac8c00604d14d42", "committedDate": "2020-04-08T15:53:42Z", "message": "JBTM-3273 -> Avoid implementing InvocationHandler in jtaLogger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/e1a7c8d74123a20030463978d367215b955ffa0e", "committedDate": "2020-04-09T07:32:39Z", "message": "JBTM-3273 -> Avoid implementing InvocationHandler in jtaLogger"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0639e9a30d7b95cb031f614a3c3d7058ed46bcc0", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/0639e9a30d7b95cb031f614a3c3d7058ed46bcc0", "committedDate": "2020-04-09T07:31:33Z", "message": "implemented code review comments"}, "afterCommit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/e1a7c8d74123a20030463978d367215b955ffa0e", "committedDate": "2020-04-09T07:32:39Z", "message": "JBTM-3273 -> Avoid implementing InvocationHandler in jtaLogger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjM0ODY3", "url": "https://github.com/jbosstm/narayana/pull/1590#pullrequestreview-393634867", "createdAt": "2020-04-15T10:07:25Z", "commit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTQxMDky", "url": "https://github.com/jbosstm/narayana/pull/1590#pullrequestreview-393941092", "createdAt": "2020-04-15T16:30:33Z", "commit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNjozMDozNFrOGGB7Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNjozODozNFrOGGCOvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk3NjE4Ng==", "bodyText": "I'm not sure about the placing the class under the logging package. As it informs about recovery processing it makes more sense to me to put it under recovery package. What was your reasoning about placing it here?", "url": "https://github.com/jbosstm/narayana/pull/1590#discussion_r408976186", "createdAt": "2020-04-15T16:30:34Z", "author": {"login": "ochaloup"}, "path": "ArjunaJTA/jta/classes/com/arjuna/ats/jta/logging/RecoveryRequired.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.arjuna.ats.jta.logging;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk3NjM2NA==", "bodyText": "What is your reasoning for naming the class as RecoveryRequired?", "url": "https://github.com/jbosstm/narayana/pull/1590#discussion_r408976364", "createdAt": "2020-04-15T16:30:53Z", "author": {"login": "ochaloup"}, "path": "ArjunaJTA/jta/classes/com/arjuna/ats/jta/logging/RecoveryRequired.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.arjuna.ats.jta.logging;\n+\n+public class RecoveryRequired {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk3OTkzNA==", "bodyText": "As this is a flag which is used to mark if a recovery problem occurs and this flag could be accessed from different threads and value could be set from the different threads then the code has to(!) consider that. The property should be of type atomic.", "url": "https://github.com/jbosstm/narayana/pull/1590#discussion_r408979934", "createdAt": "2020-04-15T16:36:44Z", "author": {"login": "ochaloup"}, "path": "ArjunaJTA/jta/classes/com/arjuna/ats/jta/logging/RecoveryRequired.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.arjuna.ats.jta.logging;\n+\n+public class RecoveryRequired {\n+\n+    private static boolean recoveryProblems;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk4MTE4MQ==", "bodyText": "I think this is a good comment but I consider it should be put into the class jtaI18Logger as it's the place where new methods for logging are added (and where the methods are named). I think when it's here it's better chance to be missed.", "url": "https://github.com/jbosstm/narayana/pull/1590#discussion_r408981181", "createdAt": "2020-04-15T16:38:34Z", "author": {"login": "ochaloup"}, "path": "ArjunaJTA/jta/classes/com/arjuna/ats/jta/logging/jtaLogger.java", "diffHunk": "@@ -33,47 +33,22 @@\n \n import org.jboss.logging.Logger;\n \n-import java.lang.reflect.InvocationHandler;\n-import java.lang.reflect.InvocationTargetException;\n-import java.lang.reflect.Method;\n-import java.lang.reflect.Proxy;\n-\n-public class jtaLogger implements InvocationHandler\n+public class jtaLogger\n {\n     public static final Logger logger = Logger.getLogger(\"com.arjuna.ats.jta\");\n-    public static final jtaI18NLogger i18NLogger = (jtaI18NLogger) Proxy.newProxyInstance(\n-            jtaI18NLogger.class.getClassLoader(),\n-            new Class[] { jtaI18NLogger.class },\n-            new jtaLogger(Logger.getMessageLogger(jtaI18NLogger.class, \"com.arjuna.ats.jta\")));\n+\n+    /**\n+     * For jtaI18NLogger, if any method, prefixed with <b>\"warn_recovery\"</b> is called then,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1a7c8d74123a20030463978d367215b955ffa0e"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4562, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}