{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NjY2MjI2", "number": 1588, "title": "JBTM-3278 Require that LRA method must be combined with Compensate or\u2026", "bodyText": "\u2026 AfterLRA\nhttps://issues.redhat.com/browse/JBTM-3278\nIt also possibly includes fix for https://issues.redhat.com/browse/JBTM-3279 which I am no longer seeing on my machine so I want to try CI.\nMAIN !TOMCAT !AS_TESTS !RTS !JACOCO !XTS !QA_JTA !QA_JTS_JACORB !QA_JTS_JDKORB !QA_JTS_OPENJDKORB !BLACKTIE !PERF LRA !NO_WIN !DB_TESTS !mysql !db2 !postgres !oracle", "createdAt": "2020-04-06T13:57:32Z", "url": "https://github.com/jbosstm/narayana/pull/1588", "merged": true, "mergeCommit": {"oid": "6bc5d2a6b7e869db6a7c9ea4ab2adb17868e0364"}, "closed": true, "closedAt": "2020-04-08T08:17:24Z", "author": {"login": "xstefank"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVSSOCgFqTM4OTAwNzM0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVaQbXAFqTM4OTUwNjk4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MDA3MzQ5", "url": "https://github.com/jbosstm/narayana/pull/1588#pullrequestreview-389007349", "createdAt": "2020-04-07T11:00:28Z", "commit": {"oid": "6528c2708c8a1f8573c8c68c4102d3a623ce484f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMTowMDoyOFrOGB-PSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMjoxNDowNVrOGCAnGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDcyMTQ4MA==", "bodyText": "Do you think it could be possible to summarize the functionality (the reason for existence of this class) as a comment?", "url": "https://github.com/jbosstm/narayana/pull/1588#discussion_r404721480", "createdAt": "2020-04-07T11:00:28Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-proxy/api/src/main/java/io/narayana/lra/client/internal/proxy/nonjaxrs/AnnotationResolver.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags. See the copyright.txt file in the\n+ * distribution for a full listing of individual contributors.\n+ *\n+ * This is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU Lesser General Public License as\n+ * published by the Free Software Foundation; either version 2.1 of\n+ * the License, or (at your option) any later version.\n+ *\n+ * This software is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this software; if not, write to the Free\n+ * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+ * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+ */\n+package io.narayana.lra.client.internal.proxy.nonjaxrs;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Method;\n+\n+public class AnnotationResolver {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6528c2708c8a1f8573c8c68c4102d3a623ce484f"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc2MDM0Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Returns whether the classinfo represents an LRA participant --\n          \n          \n            \n                 * Returns whether the classinfo represents a LRA participant", "url": "https://github.com/jbosstm/narayana/pull/1588#discussion_r404760347", "createdAt": "2020-04-07T12:14:05Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-proxy/api/src/main/java/io/narayana/lra/client/internal/proxy/nonjaxrs/LRACDIExtension.java", "diffHunk": "@@ -109,10 +111,25 @@ private LRAParticipant getAsParticipant(ClassInfo classInfo) throws ClassNotFoun\n         return participant.hasNonJaxRsMethods() ? participant : null;\n     }\n \n-    private boolean isNotLRAParticipant(ClassInfo classInfo) {\n-        Map<DotName, List<AnnotationInstance>> annotations = classInfo.annotations();\n-        return !annotations.containsKey(DotNames.LRA) ||\n-            (!annotations.containsKey(DotNames.COMPENSATE) &&\n-                !annotations.containsKey(DotNames.AFTER_LRA));\n+    /**\n+     * Returns whether the classinfo represents an LRA participant --", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6528c2708c8a1f8573c8c68c4102d3a623ce484f"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTM4NjUw", "url": "https://github.com/jbosstm/narayana/pull/1588#pullrequestreview-389138650", "createdAt": "2020-04-07T13:53:44Z", "commit": {"oid": "6528c2708c8a1f8573c8c68c4102d3a623ce484f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36db4f59bdd7e69f81330cc871d7229e167481fa", "author": {"user": {"login": "xstefank", "name": "Martin Stefanko"}}, "url": "https://github.com/jbosstm/narayana/commit/36db4f59bdd7e69f81330cc871d7229e167481fa", "committedDate": "2020-04-07T14:40:42Z", "message": "JBTM-3278 Require that LRA method must be combined with Compensate or AfterLRA"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6528c2708c8a1f8573c8c68c4102d3a623ce484f", "author": {"user": {"login": "xstefank", "name": "Martin Stefanko"}}, "url": "https://github.com/jbosstm/narayana/commit/6528c2708c8a1f8573c8c68c4102d3a623ce484f", "committedDate": "2020-04-06T13:56:03Z", "message": "JBTM-3278 Require that LRA method must be combined with Compensate or AfterLRA"}, "afterCommit": {"oid": "36db4f59bdd7e69f81330cc871d7229e167481fa", "author": {"user": {"login": "xstefank", "name": "Martin Stefanko"}}, "url": "https://github.com/jbosstm/narayana/commit/36db4f59bdd7e69f81330cc871d7229e167481fa", "committedDate": "2020-04-07T14:40:42Z", "message": "JBTM-3278 Require that LRA method must be combined with Compensate or AfterLRA"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTA2OTgz", "url": "https://github.com/jbosstm/narayana/pull/1588#pullrequestreview-389506983", "createdAt": "2020-04-07T21:33:58Z", "commit": {"oid": "36db4f59bdd7e69f81330cc871d7229e167481fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4559, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}