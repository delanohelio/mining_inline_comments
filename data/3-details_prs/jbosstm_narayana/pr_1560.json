{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MDcyMDY2", "number": 1560, "title": "JBTM-3231 LRA testrecovery2 fails", "bodyText": "Here is the link for the issue : https://issues.redhat.com/browse/JBTM-3231\nLRA !MAIN !AS_TESTS !QA_JTA !QA_JTS_JDKORB !QA_JTS_OPENJDKORB !QA_JTS_JACORB !BLACKTIE !XTS !PERF NO_WIN !RTS !TOMCAT !JACOCO", "createdAt": "2020-02-19T10:01:36Z", "url": "https://github.com/jbosstm/narayana/pull/1560", "merged": true, "mergeCommit": {"oid": "6449d39d12272d6586ed994468d606b5fbf02c8d"}, "closed": true, "closedAt": "2020-03-09T13:53:43Z", "author": {"login": "mayankkunwar"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGOgWZAFqTM2MjA5MDExMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL7nXpgFqTM3MTA2NTE1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMDkwMTEw", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-362090110", "createdAt": "2020-02-20T17:23:38Z", "commit": {"oid": "a7b9d24150d6ed2ab235fd048bdb36130a6636d2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNDQ1NTA1", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-362445505", "createdAt": "2020-02-21T07:43:28Z", "commit": {"oid": "a7b9d24150d6ed2ab235fd048bdb36130a6636d2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNzo0MzoyOVrOFsuEjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNzo0NTo0NVrOFsuHAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQzNjQ5NQ==", "bodyText": "Could you please remove this line here? I think it's not necessary here anymore when the coordinator runs as a quarkus application.", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r382436495", "createdAt": "2020-02-21T07:43:29Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-test/pom.xml", "diffHunk": "@@ -75,7 +75,8 @@\n                 </property>\n             </activation>\n             <properties>\n-                <lra.coordinator.trace.params>-Dthorntail.logging=TRACE</lra.coordinator.trace.params>\n+<!--                <lra.coordinator.trace.params>-Dthorntail.logging=TRACE</lra.coordinator.trace.params>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7b9d24150d6ed2ab235fd048bdb36130a6636d2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQzNzEyMA==", "bodyText": "Maybe this variable should be named more precisely? What I mean is that this ENABLE_TRACE_LOGS is meant to work really only for the rts/lra maven module. It's not beneficial for any other Narayana maven module. Could be rather something like ENABLE_LRA_TRACE_LOGS?", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r382437120", "createdAt": "2020-02-21T07:45:45Z", "author": {"login": "ochaloup"}, "path": "scripts/hudson/narayana.sh", "diffHunk": "@@ -56,6 +56,7 @@ function init_test_options {\n     [ x\"$CODE_COVERAGE_ARGS\" != \"x\" ] || CODE_COVERAGE_ARGS=\"\"\n     [ $ARQ_PROF ] || ARQ_PROF=arq\t# IPv4 arquillian profile\n     [ $IBM_ORB ] || IBM_ORB=0\n+    [ $ENABLE_TRACE_LOGS ] || ENABLE_TRACE_LOGS=\" -Ptrace.thorntail.test -Ptrace.lra.coordinator\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7b9d24150d6ed2ab235fd048bdb36130a6636d2"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12705a04e29959d29b38096f5166d4ad6775bdab", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/12705a04e29959d29b38096f5166d4ad6775bdab", "committedDate": "2020-02-25T15:11:19Z", "message": "changes to push logs to file."}, "afterCommit": {"oid": "4722630e50c9018057791a8ebf73180d8f26a47d", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/4722630e50c9018057791a8ebf73180d8f26a47d", "committedDate": "2020-02-26T05:35:54Z", "message": "JBTM-3231 LRA testrecovery2 fails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzQ3OTAw", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-364747900", "createdAt": "2020-02-26T09:38:54Z", "commit": {"oid": "4722630e50c9018057791a8ebf73180d8f26a47d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NTU2MDk5", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-365556099", "createdAt": "2020-02-27T10:09:49Z", "commit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMDowOTo0OVrOFvMRhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMDoyNzowNFrOFvM12g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAyODQ4NA==", "bodyText": "please, remove this line. The lra-coordinator has no tests included under the directory structure and this is not needed.", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385028484", "createdAt": "2020-02-27T10:09:49Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-coordinator/pom.xml", "diffHunk": "@@ -51,6 +51,7 @@\n                 <artifactId>maven-surefire-plugin</artifactId>\n                 <version>${surefire-plugin.version}</version>\n                 <configuration>\n+                    <redirectTestOutputToFile>${test.logs.to.file}</redirectTestOutputToFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMDYzOQ==", "bodyText": "I would vote for removing this comment completely as for anybody who understands the maven it's superfluous.\nIf you want to comment then don't say things like \"this plugin is used for file logging\" which is just not true.\nMaybe you can define some property definitions like test.logs.to.file but it's still a bit dangerous (by my perspective) to say about default value etc. as those are things which change.", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385030639", "createdAt": "2020-02-27T10:13:53Z", "author": {"login": "ochaloup"}, "path": "rts/lra/pom.xml", "diffHunk": "@@ -101,6 +104,12 @@\n               <groupId>org.sonatype.plugins</groupId>\n               <artifactId>nexus-staging-maven-plugin</artifactId>\n             </plugin>\n+\n+<!--            This plugin is used for file logging, when the logging is enabled. But logging is only enabled when CI job is executed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMTg2Mw==", "bodyText": "please, remove this property completely. From what I know (if I'm not badly mistaken somehow) the value of ConsoleHandler has first no impact to be passed as -D command line property. Second has for sure no impact to thorntail logging setup.", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385031863", "createdAt": "2020-02-27T10:16:12Z", "author": {"login": "ochaloup"}, "path": "rts/lra/pom.xml", "diffHunk": "@@ -36,6 +36,9 @@\n \n         <test.logs.to.file>false</test.logs.to.file>\n         <skipITs>true</skipITs> <!-- integration tests are disabled by default, use profile to run 'arq' -->\n+\n+        <thorntail.test.logging></thorntail.test.logging>\n+        <java.util.file.logging.level></java.util.file.logging.level>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMjYzOQ==", "bodyText": "please rename the trace.log to lra-coordinator-trace.log or similar", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385032639", "createdAt": "2020-02-27T10:17:40Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-test/pom.xml", "diffHunk": "@@ -75,7 +80,17 @@\n                 </property>\n             </activation>\n             <properties>\n-                <lra.coordinator.trace.params>-Dthorntail.logging=TRACE</lra.coordinator.trace.params>\n+<!--                # Disabling console logging-->\n+                <lra.coordinator.log.console.disable>-Dquarkus.log.console.enable=false</lra.coordinator.log.console.disable>\n+<!--                # Enabling file logging-->\n+                <lra.coordinator.log.file.enable>-Dquarkus.log.file.enable=true</lra.coordinator.log.file.enable>\n+                <lra.coordinator.log.file.level>-Dquarkus.log.file.level=TRACE</lra.coordinator.log.file.level>\n+<!--                # Send output to a trace.log file under the target/failsafe-reports/ directory-->\n+                <lra.coordinator.log.file.path>-Dquarkus.log.file.path=target/failsafe-reports/trace.log</lra.coordinator.log.file.path>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMzQ3OA==", "bodyText": "please, use the same indentation for the <!-- as for the rest of the upper and lower lines", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385033478", "createdAt": "2020-02-27T10:19:17Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-test/pom.xml", "diffHunk": "@@ -75,7 +80,17 @@\n                 </property>\n             </activation>\n             <properties>\n-                <lra.coordinator.trace.params>-Dthorntail.logging=TRACE</lra.coordinator.trace.params>\n+<!--                # Disabling console logging-->\n+                <lra.coordinator.log.console.disable>-Dquarkus.log.console.enable=false</lra.coordinator.log.console.disable>\n+<!--                # Enabling file logging-->\n+                <lra.coordinator.log.file.enable>-Dquarkus.log.file.enable=true</lra.coordinator.log.file.enable>\n+                <lra.coordinator.log.file.level>-Dquarkus.log.file.level=TRACE</lra.coordinator.log.file.level>\n+<!--                # Send output to a trace.log file under the target/failsafe-reports/ directory-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzNDE5Nw==", "bodyText": "I would recommend to use to use property ${project.build.directory}/ rather than the target/ constant", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385034197", "createdAt": "2020-02-27T10:20:38Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-test/pom.xml", "diffHunk": "@@ -75,7 +80,17 @@\n                 </property>\n             </activation>\n             <properties>\n-                <lra.coordinator.trace.params>-Dthorntail.logging=TRACE</lra.coordinator.trace.params>\n+<!--                # Disabling console logging-->\n+                <lra.coordinator.log.console.disable>-Dquarkus.log.console.enable=false</lra.coordinator.log.console.disable>\n+<!--                # Enabling file logging-->\n+                <lra.coordinator.log.file.enable>-Dquarkus.log.file.enable=true</lra.coordinator.log.file.enable>\n+                <lra.coordinator.log.file.level>-Dquarkus.log.file.level=TRACE</lra.coordinator.log.file.level>\n+<!--                # Send output to a trace.log file under the target/failsafe-reports/ directory-->\n+                <lra.coordinator.log.file.path>-Dquarkus.log.file.path=target/failsafe-reports/trace.log</lra.coordinator.log.file.path>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzNzc4Ng==", "bodyText": "I'm a bit concerned about so many log properties. Would you mind to merge it under just one? E.g. lra.coordinator.log.params or similar? And then put all the configuration on one line rather than splitting it over multiple.\nBut this could be only my personal feeling on having the properties too bloated.", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r385037786", "createdAt": "2020-02-27T10:27:04Z", "author": {"login": "ochaloup"}, "path": "rts/lra/lra-test/pom.xml", "diffHunk": "@@ -23,7 +23,12 @@\n     <properties>\n         <lra.coordinator.exec.plugin.phase>none</lra.coordinator.exec.plugin.phase> <!-- not starting coordinator by default, need -Parq -->\n         <lra.coordinator.port>8080</lra.coordinator.port>\n-        <lra.coordinator.trace.params></lra.coordinator.trace.params>\n+        <lra.coordinator.log.console.disable></lra.coordinator.log.console.disable>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12efb9eecb70331718fca3c20335fb19b782b7ec"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzAzNjA1", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-366303605", "createdAt": "2020-02-28T10:38:25Z", "commit": {"oid": "06062f39951a4971f80255183274843cf8e9a36b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06062f39951a4971f80255183274843cf8e9a36b", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/06062f39951a4971f80255183274843cf8e9a36b", "committedDate": "2020-02-27T12:47:42Z", "message": "Implemented code review comments."}, "afterCommit": {"oid": "4699cd3dca9848894d4a030455748debb7d26056", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/4699cd3dca9848894d4a030455748debb7d26056", "committedDate": "2020-02-28T11:03:50Z", "message": "JBTM-3231 LRA testrecovery2 fails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MDA0MDk5", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-368004099", "createdAt": "2020-03-03T14:05:55Z", "commit": {"oid": "4699cd3dca9848894d4a030455748debb7d26056"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNDowNTo1NlrOFxHDMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNDowNTo1NlrOFxHDMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA0MDA1MQ==", "bodyText": "We should only log narayana specific messages which can be done by appending the log category to the property name. So this line should be\n<thorntail.test.logging>-Dthorntail.logging.com.arjuna=TRACE -Dthorntail.logging.io.narayana.lra=TRACE</thorntail.test.logging>\n\nThere is a similar line in TCK pom:\n<lra.tck.suite.thorntail.trace.params>-Dthorntail.logging.com.arjuna=TRACE -Dthorntail.logging.io.narayana.lra=TRACE</lra.tck.suite.thorntail.trace.params>\n\nBTW why do we need to repeat this property with a different name. Can they be combined.", "url": "https://github.com/jbosstm/narayana/pull/1560#discussion_r387040051", "createdAt": "2020-03-03T14:05:56Z", "author": {"login": "mmusgrov"}, "path": "rts/lra/pom.xml", "diffHunk": "@@ -170,6 +177,18 @@\n           </properties>\n       </profile>\n \n+        <profile>\n+            <id>trace.thorntail.test</id>\n+            <activation>\n+                <property>\n+                    <name>trace.thorntail.test</name>\n+                </property>\n+            </activation>\n+            <properties>\n+                <thorntail.test.logging>-Dthorntail.logging=TRACE</thorntail.test.logging>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4699cd3dca9848894d4a030455748debb7d26056"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MDA1MDEz", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-368005013", "createdAt": "2020-03-03T14:07:06Z", "commit": {"oid": "4699cd3dca9848894d4a030455748debb7d26056"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2954b9ab50cf9f36a59d0435f70ef6f6f2e4e7a9", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/2954b9ab50cf9f36a59d0435f70ef6f6f2e4e7a9", "committedDate": "2020-03-04T10:09:15Z", "message": "Edited property value"}, "afterCommit": {"oid": "4919ff9b08b91536ef71792dbe51c83aaa6524e2", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/4919ff9b08b91536ef71792dbe51c83aaa6524e2", "committedDate": "2020-03-04T10:10:54Z", "message": "JBTM-3231 LRA testrecovery2 fails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d91870bdc1bbeaa9eac4e43e50d720eaa04e95c", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/7d91870bdc1bbeaa9eac4e43e50d720eaa04e95c", "committedDate": "2020-03-04T17:09:27Z", "message": "JBTM-3231 LRA testrecovery2 fails"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0286ebb0bb15a7970fc9f47f87466b1dba2a787b", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/0286ebb0bb15a7970fc9f47f87466b1dba2a787b", "committedDate": "2020-03-04T15:28:35Z", "message": "Added arjuna and narayana log categories."}, "afterCommit": {"oid": "7d91870bdc1bbeaa9eac4e43e50d720eaa04e95c", "author": {"user": {"login": "mayankkunwar", "name": "Mayank Kunwar"}}, "url": "https://github.com/jbosstm/narayana/commit/7d91870bdc1bbeaa9eac4e43e50d720eaa04e95c", "committedDate": "2020-03-04T17:09:27Z", "message": "JBTM-3231 LRA testrecovery2 fails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDY1MTUy", "url": "https://github.com/jbosstm/narayana/pull/1560#pullrequestreview-371065152", "createdAt": "2020-03-09T10:46:39Z", "commit": {"oid": "7d91870bdc1bbeaa9eac4e43e50d720eaa04e95c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4519, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}