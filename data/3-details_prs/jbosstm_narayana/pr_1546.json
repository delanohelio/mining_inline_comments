{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMTE5NTk0", "number": 1546, "title": "JBTM-3242 Set Location header to newly created LRA's", "bodyText": "https://issues.redhat.com/browse/JBTM-3242\n!MAIN !TOMCAT !AS_TESTS !RTS !JACOCO !XTS !QA_JTA !QA_JTS_JACORB !QA_JTS_JDKORB !QA_JTS_OPENJDKORB !BLACKTIE !PERF LRA !NO_WIN !DB_TESTS !mysql !db2 !postgres !oracle", "createdAt": "2020-01-09T19:27:15Z", "url": "https://github.com/jbosstm/narayana/pull/1546", "merged": true, "mergeCommit": {"oid": "f23b44887ee645dd911e777c5518575239466aca"}, "closed": true, "closedAt": "2020-01-10T14:22:12Z", "author": {"login": "mmusgrov"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb48LonABqjI5MzgwNzk2NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4-IjugFqTM0MTE0NTUyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24383dd7ed253e12a632f6f140b9b1e0c78343d8", "author": {"user": {"login": "mmusgrov", "name": "Michael Musgrove"}}, "url": "https://github.com/jbosstm/narayana/commit/24383dd7ed253e12a632f6f140b9b1e0c78343d8", "committedDate": "2020-01-09T18:41:11Z", "message": "JBTM-3242 Set Location header to newly created LRA's"}, "afterCommit": {"oid": "17f537b8ce8504ebd7490329d8d9267e03563641", "author": {"user": {"login": "mmusgrov", "name": "Michael Musgrove"}}, "url": "https://github.com/jbosstm/narayana/commit/17f537b8ce8504ebd7490329d8d9267e03563641", "committedDate": "2020-01-10T10:33:06Z", "message": "JBTM-3242 Set Location header to newly created LRA's"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMDg1ODYw", "url": "https://github.com/jbosstm/narayana/pull/1546#pullrequestreview-341085860", "createdAt": "2020-01-10T10:47:59Z", "commit": {"oid": "17f537b8ce8504ebd7490329d8d9267e03563641"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMTE3ODM1", "url": "https://github.com/jbosstm/narayana/pull/1546#pullrequestreview-341117835", "createdAt": "2020-01-10T11:56:18Z", "commit": {"oid": "17f537b8ce8504ebd7490329d8d9267e03563641"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxMTo1NjoxOFrOFcSGlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxMTo1NjoxOFrOFcSGlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTIwMTA0Nw==", "bodyText": "FYI I think the comment about LRAInfo might be slightly out of date", "url": "https://github.com/jbosstm/narayana/pull/1546#discussion_r365201047", "createdAt": "2020-01-10T11:56:18Z", "author": {"login": "tomjenkinson"}, "path": "rts/lra/lra-client/src/main/java/io/narayana/lra/client/NarayanaLRAClient.java", "diffHunk": "@@ -295,7 +295,7 @@ public URI startLRA(URI parentLRA, String clientID, Long timeout, ChronoUnit uni\n             }\n \n             // validate that there is an LRAInfo response header holding the LRAInfo id\n-            Object lraObject = response.getLastHeader(LRA_HTTP_CONTEXT_HEADER);\n+            Object lraObject = response.getLocationHeaderAsURI();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f537b8ce8504ebd7490329d8d9267e03563641"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMTE4MDQ0", "url": "https://github.com/jbosstm/narayana/pull/1546#pullrequestreview-341118044", "createdAt": "2020-01-10T11:56:49Z", "commit": {"oid": "17f537b8ce8504ebd7490329d8d9267e03563641"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2eabd9a0474d12a27512583b73072c5e0e23810a", "author": {"user": {"login": "mmusgrov", "name": "Michael Musgrove"}}, "url": "https://github.com/jbosstm/narayana/commit/2eabd9a0474d12a27512583b73072c5e0e23810a", "committedDate": "2020-01-10T12:29:36Z", "message": "JBTM-3242 Set Location header to newly created LRA's"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17f537b8ce8504ebd7490329d8d9267e03563641", "author": {"user": {"login": "mmusgrov", "name": "Michael Musgrove"}}, "url": "https://github.com/jbosstm/narayana/commit/17f537b8ce8504ebd7490329d8d9267e03563641", "committedDate": "2020-01-10T10:33:06Z", "message": "JBTM-3242 Set Location header to newly created LRA's"}, "afterCommit": {"oid": "2eabd9a0474d12a27512583b73072c5e0e23810a", "author": {"user": {"login": "mmusgrov", "name": "Michael Musgrove"}}, "url": "https://github.com/jbosstm/narayana/commit/2eabd9a0474d12a27512583b73072c5e0e23810a", "committedDate": "2020-01-10T12:29:36Z", "message": "JBTM-3242 Set Location header to newly created LRA's"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMTQ1NTI5", "url": "https://github.com/jbosstm/narayana/pull/1546#pullrequestreview-341145529", "createdAt": "2020-01-10T12:58:08Z", "commit": {"oid": "2eabd9a0474d12a27512583b73072c5e0e23810a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxMjo1ODowOVrOFcTXUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxMjo1ODowOVrOFcTXUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTIyMTcxNA==", "bodyText": "I should have mentioned, this LRAInfo comment is stale too. If you change LRAInfo to LRA, and push a commit up agai,  then merge this PR then my approval would still stand. Otherwise, please let me know if you want me to look again.", "url": "https://github.com/jbosstm/narayana/pull/1546#discussion_r365221714", "createdAt": "2020-01-10T12:58:09Z", "author": {"login": "tomjenkinson"}, "path": "rts/lra/lra-client/src/main/java/io/narayana/lra/client/NarayanaLRAClient.java", "diffHunk": "@@ -286,25 +286,22 @@ public URI startLRA(URI parentLRA, String clientID, Long timeout, ChronoUnit uni\n                     .request()\n                     .post();\n \n-            // validate the HTTP status code says an LRAInfo resource was created\n+            // validate the HTTP status code says an LRA resource was created\n             if (isUnexpectedResponseStatus(response, Response.Status.CREATED)) {\n                 LRALogger.i18NLogger.error_lraCreationUnexpectedStatus(response.getStatus(), response.toString());\n                 throwGenericLRAException(null, INTERNAL_SERVER_ERROR.getStatusCode(),\n                         \"LRA start returned an unexpected status code: \" + response.getStatus());\n                 return null;\n             }\n \n-            // validate that there is an LRAInfo response header holding the LRAInfo id\n-            Object lraObject = response.getLastHeader(LRA_HTTP_CONTEXT_HEADER);\n+            lra = response.getLocationHeaderAsURI();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2eabd9a0474d12a27512583b73072c5e0e23810a"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4501, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}