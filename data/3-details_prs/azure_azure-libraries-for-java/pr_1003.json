{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNzI0NzQ2", "number": 1003, "title": "GraphRbac/MSI: V2 update", "bodyText": "", "createdAt": "2020-02-04T09:16:36Z", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003", "merged": true, "mergeCommit": {"oid": "e51f4dab84840b0606c914769aa9d2e505aa7804"}, "closed": true, "closedAt": "2020-02-11T10:25:50Z", "author": {"login": "xseeseesee"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcA92ChgH2gAyMzcwNzI0NzQ2OmYwMmFlYmFmYzhkYTBlMTc3YzkzZTUxZGE0MmM5OWNhNWY1M2JlMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDPFLMgH2gAyMzcwNzI0NzQ2OmUzNWZkMGUxNGY1M2RlOGMzMTBkOGI2ZTU4NWY5NDc0MWFlYWY1MTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f02aebafc8da0e177c93e51da42c99ca5f53be08", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/f02aebafc8da0e177c93e51da42c99ca5f53be08", "committedDate": "2020-02-04T09:09:19Z", "message": "GraphRbac: fix GroupsTests and avoid using toIterable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/6a06c1aef1ee60d2b46b554ae85c22f3225caac0", "committedDate": "2020-02-04T09:15:08Z", "message": "GraphRbac: fix code import style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyODM0MDc0", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#pullrequestreview-352834074", "createdAt": "2020-02-04T09:36:41Z", "commit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwOTozNjo0MlrOFlNd2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwOTo0NDozMlrOFlNtSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDU2MjI2Ng==", "bodyText": "Better to use directoryObjectInner instanceof UserInner?", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#discussion_r374562266", "createdAt": "2020-02-04T09:36:42Z", "author": {"login": "weidongxu-microsoft"}, "path": "azure-mgmt-graph-rbac/src/main/java/com/azure/management/graphrbac/implementation/ActiveDirectoryGroupImpl.java", "diffHunk": "@@ -74,22 +72,17 @@ public String mail() {\n     public PagedFlux<ActiveDirectoryObject> listMembersAsync() {\n         return getManager().getInner().groups().getGroupMembersAsync(getId())\n                 .mapPage(directoryObjectInner -> {\n-                    SerializerAdapter adapter = getManager().getInner().getSerializerAdapter();\n-                    try {\n-                        String serialized = adapter.serialize(directoryObjectInner, SerializerEncoding.JSON);\n-                        if (serialized.contains(\"User\")) {\n-                            return new ActiveDirectoryUserImpl(adapter.deserialize(serialized, UserInner.class, SerializerEncoding.JSON), getManager());\n-                        } else if (serialized.contains(\"Group\")) {\n-                            return new ActiveDirectoryGroupImpl(adapter.deserialize(serialized, ADGroupInner.class, SerializerEncoding.JSON), getManager());\n-                        } else if (serialized.contains(\"ServicePrincipal\")) {\n-                            return new ServicePrincipalImpl(adapter.deserialize(serialized, ServicePrincipalInner.class, SerializerEncoding.JSON), getManager());\n-                        } else if (serialized.contains(\"Application\")) {\n-                            return new ActiveDirectoryApplicationImpl(adapter.deserialize(serialized, ApplicationInner.class, SerializerEncoding.JSON), getManager());\n-                        } else {\n-                            return null;\n-                        }\n-                    } catch (IOException e) {\n-                        throw new RuntimeException(e);\n+                    String objectType = directoryObjectInner.getClass().getName();\n+                    if (UserInner.class.getName().equals(objectType)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDU2MzU1MQ==", "bodyText": "I think this line will have Error when not found. So it need to be followed by onErrorResume?", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#discussion_r374563551", "createdAt": "2020-02-04T09:39:23Z", "author": {"login": "weidongxu-microsoft"}, "path": "azure-mgmt-graph-rbac/src/main/java/com/azure/management/graphrbac/implementation/ActiveDirectoryUsersImpl.java", "diffHunk": "@@ -69,22 +70,18 @@ public ActiveDirectoryUserImpl getByName(String upn) {\n     @Override\n     public Mono<ActiveDirectoryUser> getByNameAsync(final String name) {\n         return getManager().getInner().users().getAsync(name)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDU2MzY5MA==", "bodyText": "This line is meanless?", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#discussion_r374563690", "createdAt": "2020-02-04T09:39:40Z", "author": {"login": "weidongxu-microsoft"}, "path": "azure-mgmt-graph-rbac/src/main/java/com/azure/management/graphrbac/implementation/ActiveDirectoryUsersImpl.java", "diffHunk": "@@ -69,22 +70,18 @@ public ActiveDirectoryUserImpl getByName(String upn) {\n     @Override\n     public Mono<ActiveDirectoryUser> getByNameAsync(final String name) {\n         return getManager().getInner().users().getAsync(name)\n-                .flatMap((Function<UserInner, Mono<UserInner>>) userInner -> {\n-                    // Exact match\n-                    if (userInner != null) {\n-                        return Mono.just(userInner);\n-                    }\n-                    // Search mail & mail nickname\n+                .flatMap((Function<UserInner, Mono<UserInner>>) userInner -> Mono.just(userInner))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDU2NjIxNg==", "bodyText": "Again, I think reactor does not allow null at all. You need to use map and switchIfEmpty.", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#discussion_r374566216", "createdAt": "2020-02-04T09:44:32Z", "author": {"login": "weidongxu-microsoft"}, "path": "azure-mgmt-graph-rbac/src/main/java/com/azure/management/graphrbac/implementation/ServicePrincipalsImpl.java", "diffHunk": "@@ -98,10 +98,14 @@ public ServicePrincipal getByName(String spn) {\n                     ));\n                 })\n                 .map(result -> {\n-                    if (result == null || result.toIterable() == null || !result.toIterable().iterator().hasNext()) {\n+                    if (result == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyODQ0Mzgy", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#pullrequestreview-352844382", "createdAt": "2020-02-04T09:51:58Z", "commit": {"oid": "6a06c1aef1ee60d2b46b554ae85c22f3225caac0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf7ebecca9e83a61c4a8d4f6e8cf660507d471d4", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/cf7ebecca9e83a61c4a8d4f6e8cf660507d471d4", "committedDate": "2020-02-10T10:04:17Z", "message": "Merge branch 'vnext' into vnext-graph-msi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cca524971de14a37a7aa4c8750ebd28e6fc81799", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/cca524971de14a37a7aa4c8750ebd28e6fc81799", "committedDate": "2020-02-10T11:03:42Z", "message": "GraphRbac/MSI: fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3937ab98aa98a2ea6123f7806ccb874bf3acde37", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/3937ab98aa98a2ea6123f7806ccb874bf3acde37", "committedDate": "2020-02-10T11:18:14Z", "message": "GraphRbac: avoid using toIterable()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fdb98fac69d74f5d92249011e63b24e5e6e7a07", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/3fdb98fac69d74f5d92249011e63b24e5e6e7a07", "committedDate": "2020-02-10T12:11:05Z", "message": "GraphRbac: update with switchIfEmpty()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDE1NTA1", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1003#pullrequestreview-356415505", "createdAt": "2020-02-11T04:44:36Z", "commit": {"oid": "3fdb98fac69d74f5d92249011e63b24e5e6e7a07"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b625edd36bdb5a40d11c125f5349681a979d5465", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/b625edd36bdb5a40d11c125f5349681a979d5465", "committedDate": "2020-02-11T10:19:45Z", "message": "Graph: add exception handling and reformat coding style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e35fd0e14f53de8c310d8b6e585f94741aeaf516", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/e35fd0e14f53de8c310d8b6e585f94741aeaf516", "committedDate": "2020-02-11T10:22:05Z", "message": "Graph: remove redundant"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1474, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}