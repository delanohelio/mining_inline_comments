{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NzMxMDk2", "number": 1075, "title": "Compute: fix playback tests", "bodyText": "all playback tests of compute/graph/msi pass.", "createdAt": "2020-03-06T09:57:04Z", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1075", "merged": true, "mergeCommit": {"oid": "fd2102a9d5bd45dd9ef198887ec2d86b0d3cd46a"}, "closed": true, "closedAt": "2020-03-09T06:09:38Z", "author": {"login": "xseeseesee"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcK9D77AH2gAyMzg0NzMxMDk2OmMxMTRlMzNkMjQ1ZTc2M2YxN2MxOWVhZGQwZDY1Y2NkMWYzMDhjNTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL2a1bAH2gAyMzg0NzMxMDk2OjZkYjBiMTE0NTY3YWM3NzQ4Y2I5NWJmNWNjNjFjZWNlZWM1NWYwODE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c114e33d245e763f17c19eadd0d65ccd1f308c58", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/c114e33d245e763f17c19eadd0d65ccd1f308c58", "committedDate": "2020-03-06T09:53:50Z", "message": "Compute: fix playback tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMjI5MzM2", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1075#pullrequestreview-370229336", "createdAt": "2020-03-06T10:39:15Z", "commit": {"oid": "c114e33d245e763f17c19eadd0d65ccd1f308c58"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMDozOToxNlrOFy0YQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMDo0Nzo0MlrOFy0nCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgzMTI5OQ==", "bodyText": "Maybe you can name it as loadCurrentPrimaryLoadBalancersIfAvailableAsync to make it clearer that it is async method.", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1075#discussion_r388831299", "createdAt": "2020-03-06T10:39:16Z", "author": {"login": "weidongxu-microsoft"}, "path": "azure-mgmt-compute/src/main/java/com/azure/management/compute/implementation/VirtualMachineScaleSetImpl.java", "diffHunk": "@@ -334,7 +334,7 @@ public Network getPrimaryNetwork() throws IOException {\n     @Override\n     public LoadBalancer getPrimaryInternetFacingLoadBalancer() throws IOException {\n         if (this.primaryInternetFacingLoadBalancer == null) {\n-            loadCurrentPrimaryLoadBalancersIfAvailable();\n+            loadCurrentPrimaryLoadBalancersIfAvailable().block();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c114e33d245e763f17c19eadd0d65ccd1f308c58"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgzNTA4MQ==", "bodyText": "self.map(ignored -> firstLoadBalancerId).flatMap(id -> ... might be better, since it keeps Mono (if I did not misunderstand, self is Mono.just(this), and you have no use on the Flux in middle)", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1075#discussion_r388835081", "createdAt": "2020-03-06T10:47:42Z", "author": {"login": "weidongxu-microsoft"}, "path": "azure-mgmt-compute/src/main/java/com/azure/management/compute/implementation/VirtualMachineScaleSetImpl.java", "diffHunk": "@@ -1902,17 +1906,18 @@ private void loadCurrentPrimaryLoadBalancersIfAvailable() throws IOException {\n         }\n \n         if (firstLoadBalancerId == null) {\n-            return;\n+            return self;\n         }\n \n-        LoadBalancer loadBalancer1 = this.networkManager\n-                .loadBalancers()\n-                .getById(firstLoadBalancerId);\n-        if (loadBalancer1.publicIPAddressIds() != null && loadBalancer1.publicIPAddressIds().size() > 0) {\n-            this.primaryInternetFacingLoadBalancer = loadBalancer1;\n-        } else {\n-            this.primaryInternalLoadBalancer = loadBalancer1;\n-        }\n+        self = self.concatWith(Mono.just(firstLoadBalancerId).flatMap(id -> this.networkManager.loadBalancers().getByIdAsync(id)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c114e33d245e763f17c19eadd0d65ccd1f308c58"}, "originalPosition": 367}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwODg3Mjc0", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1075#pullrequestreview-370887274", "createdAt": "2020-03-09T02:15:50Z", "commit": {"oid": "c114e33d245e763f17c19eadd0d65ccd1f308c58"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6db0b114567ac7748cb95bf5cc61ceceec55f081", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-libraries-for-java/commit/6db0b114567ac7748cb95bf5cc61ceceec55f081", "committedDate": "2020-03-09T04:43:26Z", "message": "Compute: rename async methods"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1409, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}