{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NjgwODE4", "number": 1682, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzozMTowOFrOEq2R2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzo0Njo0MlrOEq2oCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMzY0OTUyOnYy", "diffSide": "RIGHT", "path": "src/main/java/apoc/custom/CypherProcedures.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzozMTowOFrOHdSjVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzozMTowOFrOHdSjVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ3NDcwOQ==", "bodyText": "should probably return null as well", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1682#discussion_r500474709", "createdAt": "2020-10-06T17:31:08Z", "author": {"login": "jexp"}, "path": "src/main/java/apoc/custom/CypherProcedures.java", "diffHunk": "@@ -565,6 +566,18 @@ private void restoreProcedures() {\n             clearQueryCaches(api);\n         }\n \n+        private String parseStoredDescription(Object rawDescription) {\n+            // Description was changed to be an Optional in the Neo4j internal API. Optional.None serialized to\n+            // JSON objects in various stores around the world; hence, deal with this value not being a string\n+            if(rawDescription instanceof String) {\n+                if(\"null\".equals(rawDescription)) {\n+                    return null;\n+                }\n+                return (String)rawDescription;\n+            }\n+            return \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b7582073a2cea0b206510781f8fb00143f62cbc"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMzcwNjMzOnYy", "diffSide": "RIGHT", "path": "src/main/java/apoc/custom/CypherProcedures.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzo0Njo0MlrOHdTG6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzo1NToxOVrOHdTbzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ4MzgxOA==", "bodyText": "sorry I overlooked this b/c it was too far on the right :) can you use .orElse(null) so that we're consistent? in the 2 places?", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1682#discussion_r500483818", "createdAt": "2020-10-06T17:46:42Z", "author": {"login": "jexp"}, "path": "src/main/java/apoc/custom/CypherProcedures.java", "diffHunk": "@@ -589,7 +602,7 @@ public void unavailable() {\n         }\n \n         public static Map<String, Object> storeFunction(GraphDatabaseAPI api, UserFunctionSignature signature, String statement, boolean forceSingle) {\n-            Map<String, Object> data = map(\"statement\", statement, \"forceSingle\", forceSingle, \"signature\", signature.toString(), \"description\", signature.description());\n+            Map<String, Object> data = map(\"statement\", statement, \"forceSingle\", forceSingle, \"signature\", signature.toString(), \"description\", signature.description().orElse(\"\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8aa81ec278410dcb8d0f66b98bc6ed32c7ffce79"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ4OTE2NQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1682#discussion_r500489165", "createdAt": "2020-10-06T17:55:19Z", "author": {"login": "jakewins"}, "path": "src/main/java/apoc/custom/CypherProcedures.java", "diffHunk": "@@ -589,7 +602,7 @@ public void unavailable() {\n         }\n \n         public static Map<String, Object> storeFunction(GraphDatabaseAPI api, UserFunctionSignature signature, String statement, boolean forceSingle) {\n-            Map<String, Object> data = map(\"statement\", statement, \"forceSingle\", forceSingle, \"signature\", signature.toString(), \"description\", signature.description());\n+            Map<String, Object> data = map(\"statement\", statement, \"forceSingle\", forceSingle, \"signature\", signature.toString(), \"description\", signature.description().orElse(\"\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ4MzgxOA=="}, "originalCommit": {"oid": "8aa81ec278410dcb8d0f66b98bc6ed32c7ffce79"}, "originalPosition": 69}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4282, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}