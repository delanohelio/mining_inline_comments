{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMzcwOTUw", "number": 1573, "title": "fixes #1547: Add a new after-async or async phase to triggers", "bodyText": "Fixes #1547\nAdded the afterAsync phase\nProposed Changes (Mandatory)\nA brief list of proposed changes in order to fix the issue:\n\nAdded the afterAsync phase\nAdded test\nUpdated documentation", "createdAt": "2020-06-29T12:17:47Z", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573", "merged": true, "mergeCommit": {"oid": "ff645200dc49db64970d030f567576a66d5bf9e5"}, "closed": true, "closedAt": "2020-07-20T13:50:34Z", "author": {"login": "conker84"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcv_9-TAH2gAyNDQxMzcwOTUwOjJhN2MxNDY1OGRhZmE5ZjdmOTczNmJkZGVlMmE3NjZiNDYyNTcyNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2x9aOgH2gAyNDQxMzcwOTUwOmI3OWNlNzc5Y2EwOGUyOTkxMjljZGU5MmJhN2VjMWFkNTZiZjBjOTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a7c14658dafa9f7f9736bddee2a766b46257271", "author": {"user": {"login": "conker84", "name": "Andrea Santurbano"}}, "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/2a7c14658dafa9f7f9736bddee2a766b46257271", "committedDate": "2020-06-29T12:12:14Z", "message": "fixes #1547: Add a new after-async or async phase to triggers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3OTE5NDEx", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#pullrequestreview-447919411", "createdAt": "2020-07-14T08:58:27Z", "commit": {"oid": "2a7c14658dafa9f7f9736bddee2a766b46257271"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1ODoyOFrOGxKsmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1ODoyOFrOGxKsmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODY2Ng==", "bodyText": "also in a new thread!?", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#discussion_r454208666", "createdAt": "2020-07-14T08:58:28Z", "author": {"login": "jexp"}, "path": "docs/asciidoc/job-management/trigger.adoc", "diffHunk": "@@ -202,3 +204,16 @@ CALL apoc.trigger.add('lowercase-by-label','UNWIND apoc.trigger.nodesByLabel({as\n ----\n \n // end::trigger[]\n+\n+.Trigger Phase Table\n+.Helper Functions\n+[cols=\"1m,5\"]\n+|===\n+| Phase | Description\n+| before | The trigger will be activate right `before` the commit. If no phase is specified, it's the default.\n+| rollback | The trigger will be activate right after the  `rollback`\n+| after | The trigger will be activate right `after` the commit\n+| afterAsync | The trigger will be activate right `after` the commit and inside a new transaction that will not", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a7c14658dafa9f7f9736bddee2a766b46257271"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3OTE5NTgx", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#pullrequestreview-447919581", "createdAt": "2020-07-14T08:58:40Z", "commit": {"oid": "2a7c14658dafa9f7f9736bddee2a766b46257271"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1ODo0MFrOGxKtFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1ODo0MFrOGxKtFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODc5MA==", "bodyText": "change syntax to $createdNodes etc.", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#discussion_r454208790", "createdAt": "2020-07-14T08:58:40Z", "author": {"login": "jexp"}, "path": "docs/asciidoc/job-management/trigger.adoc", "diffHunk": "@@ -15,7 +15,9 @@ Enable `apoc.trigger.enabled=true` in `$NEO4J_HOME/conf/apoc.conf` first.\n \n [cols=\"1m,5\"]\n |===\n-| CALL apoc.trigger.add(name, statement, selector) yield name, statement, installed | add a trigger statement under a name, in the statement you can use {createdNodes}, {deletedNodes} etc., the selector is {phase:'before/after/rollback'} returns previous and new trigger information\n+| CALL apoc.trigger.add(name, statement, selector) yield name, statement, installed | add a trigger statement under a name,\n+in the statement you can use {createdNodes}, {deletedNodes} etc., the selector is {phase:'before/after/rollback/afterAsync'}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a7c14658dafa9f7f9736bddee2a766b46257271"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd99c724ec5432edf5e40210fff6155c4fad1cb", "author": {"user": {"login": "jexp", "name": "Michael Hunger"}}, "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/2cd99c724ec5432edf5e40210fff6155c4fad1cb", "committedDate": "2020-07-14T09:05:46Z", "message": "Changed parameters to new syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40e96c230cbe8be31441a6796032322451f07996", "author": {"user": {"login": "jexp", "name": "Michael Hunger"}}, "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/40e96c230cbe8be31441a6796032322451f07996", "committedDate": "2020-07-14T09:07:05Z", "message": "Added \"and thread\" in afterAsync description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3OTI2MTAz", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#pullrequestreview-447926103", "createdAt": "2020-07-14T09:07:19Z", "commit": {"oid": "40e96c230cbe8be31441a6796032322451f07996"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b79ce779ca08e299129cde92ba7ec1ad56bf0c91", "author": {"user": {"login": "mneedham", "name": "Mark Needham"}}, "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/b79ce779ca08e299129cde92ba7ec1ad56bf0c91", "committedDate": "2020-07-20T13:50:25Z", "message": "Merge branch '4.0' into issue_1547"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 932, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}