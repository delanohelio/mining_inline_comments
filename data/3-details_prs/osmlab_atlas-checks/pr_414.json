{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NjUyNjUw", "number": 414, "title": "ConsumerBasedExpectedCheckVerifier: FIXUP issue where verifyNotNull always passed.", "bodyText": "Also, fix some sonar lint issues.\nDescription:\nThe verifier added in verifyNotNull is only ever run against generatedFlags, which is a final field which is instantiated in the constructor for ConsumerBasedExpectedCheckVerifier, which means that verifyNotNull is essentially a no-op.\nPrimary change:\n\nKeep the current assertNotNull of the list, but afterwards do a forEach loop on the list checking for null CheckFlag objects.\n\nSecondary changes:\n\nflags.size() == 0 -> flags.isEmpty()\nassertTrue(flags.size() > 0) -> assertFalse(flags.isEmpty())\nthrow new Exception -> Assert.fail\n\nPotential Impact:\nAny downstream user of ConsumerBasedExpectedCheckVerifier may see new failing tests, since verifyNotNull is no longer a no-op.\nUnit Test Approach:\nN/A\nTest Results:\nNo current tests fail.", "createdAt": "2020-11-10T17:35:15Z", "url": "https://github.com/osmlab/atlas-checks/pull/414", "merged": true, "mergeCommit": {"oid": "db960257e92a6a1b51a5ca68a9ef7239caf55fa2"}, "closed": true, "closedAt": "2020-11-17T19:05:12Z", "author": {"login": "tsmock"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbMy_mgH2gAyNTE4NjUyNjUwOmIxMjc3ZWY5OTRlZGQwNzZlM2YxMzMzY2Q0YmJhZDBlNWE2ODFmMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddeS9bAFqTUzMjY4OTkxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b1277ef994edd076e3f1333cd4bbad0e5a681f26", "author": {"user": {"login": "tsmock", "name": "Taylor Smock"}}, "url": "https://github.com/osmlab/atlas-checks/commit/b1277ef994edd076e3f1333cd4bbad0e5a681f26", "committedDate": "2020-11-10T17:27:45Z", "message": "ConsumerBasedExpectedCheckVerifier: FIXUP issue where verifyNotNull always passed.\n\nAlso, fix some sonar lint issues.\n\nSigned-off-by: Taylor Smock <tsmock@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a52f77b68e547f3616006ac6e900cb532667cca", "author": {"user": {"login": "tsmock", "name": "Taylor Smock"}}, "url": "https://github.com/osmlab/atlas-checks/commit/2a52f77b68e547f3616006ac6e900cb532667cca", "committedDate": "2020-11-16T15:09:48Z", "message": "Move Verifiers into test package\n\nBoth verifiers are not used in production code, and so do not belong\nthere.\n\nSigned-off-by: Taylor Smock <tsmock@fb.com>"}, "afterCommit": {"oid": "f7c201409558dc7352d8c96891cbe04df8167eb2", "author": {"user": {"login": "tsmock", "name": "Taylor Smock"}}, "url": "https://github.com/osmlab/atlas-checks/commit/f7c201409558dc7352d8c96891cbe04df8167eb2", "committedDate": "2020-11-16T17:27:36Z", "message": "Verifiers: Suppress warnings for test code in production code, add javadoc for why.\n\nSigned-off-by: Taylor Smock <tsmock@fb.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c4e3f97a05940b878d3d950f3bac4600dbb3eed", "author": {"user": {"login": "tsmock", "name": "Taylor Smock"}}, "url": "https://github.com/osmlab/atlas-checks/commit/8c4e3f97a05940b878d3d950f3bac4600dbb3eed", "committedDate": "2020-11-16T19:17:00Z", "message": "Verifiers: Suppress warnings for test code in production code, add javadoc for why.\n\nSigned-off-by: Taylor Smock <tsmock@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7c201409558dc7352d8c96891cbe04df8167eb2", "author": {"user": {"login": "tsmock", "name": "Taylor Smock"}}, "url": "https://github.com/osmlab/atlas-checks/commit/f7c201409558dc7352d8c96891cbe04df8167eb2", "committedDate": "2020-11-16T17:27:36Z", "message": "Verifiers: Suppress warnings for test code in production code, add javadoc for why.\n\nSigned-off-by: Taylor Smock <tsmock@fb.com>"}, "afterCommit": {"oid": "8c4e3f97a05940b878d3d950f3bac4600dbb3eed", "author": {"user": {"login": "tsmock", "name": "Taylor Smock"}}, "url": "https://github.com/osmlab/atlas-checks/commit/8c4e3f97a05940b878d3d950f3bac4600dbb3eed", "committedDate": "2020-11-16T19:17:00Z", "message": "Verifiers: Suppress warnings for test code in production code, add javadoc for why.\n\nSigned-off-by: Taylor Smock <tsmock@fb.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTI1NDk0", "url": "https://github.com/osmlab/atlas-checks/pull/414#pullrequestreview-532525494", "createdAt": "2020-11-17T16:01:35Z", "commit": {"oid": "8c4e3f97a05940b878d3d950f3bac4600dbb3eed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNjg5OTEz", "url": "https://github.com/osmlab/atlas-checks/pull/414#pullrequestreview-532689913", "createdAt": "2020-11-17T18:55:15Z", "commit": {"oid": "8c4e3f97a05940b878d3d950f3bac4600dbb3eed"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODo1NToxNVrOH1EWbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODo1NToxNVrOH1EWbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQwNzg1NQ==", "bodyText": "Would be an issue if we even had a null CheckFlag!", "url": "https://github.com/osmlab/atlas-checks/pull/414#discussion_r525407855", "createdAt": "2020-11-17T18:55:15Z", "author": {"login": "seancoulter"}, "path": "src/main/java/org/openstreetmap/atlas/checks/validation/verifier/ConsumerBasedExpectedCheckVerifier.java", "diffHunk": "@@ -125,7 +124,11 @@ public ConsumerBasedExpectedCheckVerifier verifyNotEmpty()\n      */\n     public ConsumerBasedExpectedCheckVerifier verifyNotNull()\n     {\n-        this.globalVerifiers.add((final List<CheckFlag> flags) -> Assert.assertNotNull(flags));\n+        this.globalVerifiers.add((final List<CheckFlag> flags) ->\n+        {\n+            Assert.assertNotNull(flags);\n+            flags.forEach(Assert::assertNotNull);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c4e3f97a05940b878d3d950f3bac4600dbb3eed"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3217, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}