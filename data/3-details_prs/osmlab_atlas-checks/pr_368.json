{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MjUxNTIz", "number": 368, "title": "Extend InvalidTagsCheck with regex filtering for illegal sources", "bodyText": "Description:\nThe InvalidTagsCheck has been extended to also accept RegexTaggableFilters, allowing for certain tags to be checked against specific regex patterns.\nThe main reason for this extension is to verify the source tag for illegal sources like \"Google\" or \"Here\".\nThe check can be extended with other filters containing different tag names and regex patterns to be checked against.\n#334\nPotential Impact:\nNo impacts.\nUnit Test Approach:\nAdded unit tests that check the sources for nodes and edges with illegal tags such as maps link or Here maps.\nTest Results:\nThe check was run on shards from AIA, AUS, CYM, DMA, NZL, TUR, with results only for AUS, TUR and NZL for the illegal source filter.\n\n\n\nISO\nTotal Flags\nSampled\nSampling %\nTP\nFP\nFalse Positive Rate\n\n\n\n\nAUS,TUR,NZL\n47\n38\n80%\n35\n3\n8%\n\n\n\nThere are still some open cases if certain values should be allowed or not, for example google drive links", "createdAt": "2020-09-18T11:19:40Z", "url": "https://github.com/osmlab/atlas-checks/pull/368", "merged": true, "mergeCommit": {"oid": "a35a9a0fc124fd0be1ec24494bbeb995b3344be2"}, "closed": true, "closedAt": "2020-10-07T20:29:28Z", "author": {"login": "mm-ciub"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6U_EqgH2gAyNDg5MjUxNTIzOmYxZGE2ZmZiOTFjMDU1MjlhYTdmNzc2YTc5OWQxMTRiODQ1NWM5Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQRduwgFqTUwNDE2NTU3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f1da6ffb91c05529aa7f776a799d114b8455c938", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/f1da6ffb91c05529aa7f776a799d114b8455c938", "committedDate": "2020-07-31T14:20:41Z", "message": "Raw implementation of BadValueTagCheck\n\n- added check structure and config files\n- added rudimentary tests\n- code not in final shape"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14fcd4191094bcfeb6eb8ca305917f856402a2fe", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/14fcd4191094bcfeb6eb8ca305917f856402a2fe", "committedDate": "2020-08-13T12:05:58Z", "message": "Merge pull request #1 from osmlab/dev\n\nMerge upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "420fcb2088c432ab915e9cba2f1e2321dbeac645", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/420fcb2088c432ab915e9cba2f1e2321dbeac645", "committedDate": "2020-08-13T12:39:42Z", "message": "Merge pull request #2 from mm-ciub/dev\n\nMerge upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7db77d7d3e487136b5f77cef84105774deb7a0d3", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/7db77d7d3e487136b5f77cef84105774deb7a0d3", "committedDate": "2020-08-13T13:39:25Z", "message": "Minor style fixes\n\n- code cleanup to pass build\n- improved test data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6797e0c7b5374ac0987c13e212e6a600c460ed70", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/6797e0c7b5374ac0987c13e212e6a600c460ed70", "committedDate": "2020-09-07T14:06:14Z", "message": "Documentation and minor fixes\n\n- added check readme and documentation\n- changed regex string for here maps to check for maps\nor url to avoid false cases of the word here"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69a76833ef5d2c09986c90cc2da44051c46fb431", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/69a76833ef5d2c09986c90cc2da44051c46fb431", "committedDate": "2020-09-15T15:37:50Z", "message": "Extended InvalidTagsCheck with regex filters\n\n- the InvalidTagsCheck also accepts RegexTaggableFilter\nthat can be configured from resource or inline configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae2673876f5f62c3359993713e5fbd3153330a19", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/ae2673876f5f62c3359993713e5fbd3153330a19", "committedDate": "2020-09-18T10:28:26Z", "message": "Final touches on InvalidTagsCheck extension\n\n- code improvements - reduced duplicate code\n- documentation updated\n- configured InvalidTagsCheck to look for illegal sources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94674ea147d2bb9300c122ea484b07cd7440495e", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/94674ea147d2bb9300c122ea484b07cd7440495e", "committedDate": "2020-09-18T11:18:15Z", "message": "Added missing test\n\n- added a missing test for illegal source on edge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bd1cd912680ba4c9cab273490e76c31506ebc8c", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/9bd1cd912680ba4c9cab273490e76c31506ebc8c", "committedDate": "2020-10-01T16:19:42Z", "message": "Merge pull request #3 from osmlab/dev\n\nUpdate fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d2410f42bcefa7f1e16cd04b82f62445009c77f", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/1d2410f42bcefa7f1e16cd04b82f62445009c77f", "committedDate": "2020-10-01T16:20:42Z", "message": "Merge branch 'dev' into extend_invalidTags_regex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1246f22ec28825f6a74db8ea0a77814119a575d4", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/1246f22ec28825f6a74db8ea0a77814119a575d4", "committedDate": "2020-10-02T05:57:28Z", "message": "Checkstyle fixes\n\n- added missing 'this.' before local method reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "339b05575d778db170bed409dc35a89ff6652d2c", "author": {"user": {"login": "mm-ciub", "name": null}}, "url": "https://github.com/osmlab/atlas-checks/commit/339b05575d778db170bed409dc35a89ff6652d2c", "committedDate": "2020-10-07T13:07:55Z", "message": "Code smell fixes\n\n- used constant for common String 'regex'\n- used format specifier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDk0NzY2", "url": "https://github.com/osmlab/atlas-checks/pull/368#pullrequestreview-504094766", "createdAt": "2020-10-07T17:09:43Z", "commit": {"oid": "339b05575d778db170bed409dc35a89ff6652d2c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MTY1NTc4", "url": "https://github.com/osmlab/atlas-checks/pull/368#pullrequestreview-504165578", "createdAt": "2020-10-07T18:39:38Z", "commit": {"oid": "339b05575d778db170bed409dc35a89ff6652d2c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxODozOTozOFrOHeAudA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxODozOTozOFrOHeAudA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTIzMTIyMA==", "bodyText": "Looks like the java docs were not updated when these params were modified in a previous PR. The current config just has \"filters.resource.override\". Since this check is going to be updated for #377, we can update these in the upcoming PR. @mm-ciub", "url": "https://github.com/osmlab/atlas-checks/pull/368#discussion_r501231220", "createdAt": "2020-10-07T18:39:38Z", "author": {"login": "sayas01"}, "path": "src/main/java/org/openstreetmap/atlas/checks/validation/tag/InvalidTagsCheck.java", "diffHunk": "@@ -34,50 +39,57 @@\n \n /**\n  * This flags features based on configurable filters. Each filter passed contains the\n- * {@link AtlasEntity} classes to check and a {@link TaggableFilter} to test objects against. If a\n- * feature is of one of the given classes and passes the associated {@link TaggableFilter} then it\n- * is flagged. In addition to the taggable filters, there are two configurable boolean values,\n- * \"filters.resource.append.override\" and \"filters.resource.append\". If the\n- * \"filters.resource.append.override\" key is set to true, only the filters passed through config are\n- * used to flag the atlas features. If the \"filters.resource.append\" is set to true, the filters\n- * passed through the config are appended to the default filters that are in the \"invalidTags.txt\"\n- * resource file.\n+ * {@link AtlasEntity} classes to check and a {@link TaggableFilter} or a\n+ * {@link RegexTaggableFilter} to test objects against. If a feature is of one of the given classes\n+ * and passes the associated filter then it is flagged. In addition to the taggable filters, there\n+ * are two configurable boolean values, \"filters.resource.append.override\" and\n+ * \"filters.resource.append\". If the \"filters.resource.append.override\" key is set to true, only the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "339b05575d778db170bed409dc35a89ff6652d2c"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3185, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}