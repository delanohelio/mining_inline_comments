{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMzk0OTM3", "number": 402, "title": "Missing roundabout 2run", "bodyText": "Description:\nSecond version of RoundaboutMissingTag. Please refer to #399 for fixed cases\nPotential Impact:\nN/A\nUnit Test Approach:\nadded unit test to handle:\n\nturning loops & turning circles\ntag filter\n\nTest Results:\npassed", "createdAt": "2020-10-27T01:00:26Z", "url": "https://github.com/osmlab/atlas-checks/pull/402", "merged": true, "mergeCommit": {"oid": "2524c6334907f13e31ff443cbc0271f37e4f8d7a"}, "closed": true, "closedAt": "2020-11-03T23:49:11Z", "author": {"login": "vladlemberg"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUIOEuAH2gAyNTEwMzk0OTM3OmVkMzNiZWYxMDcyZDYyYjE4MTNiNjcyMjI5M2MwNmI1NjgyZGYzODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYpZUlgFqTUyMTkxNjQ4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed33bef1072d62b1813b6722293c06b5682df380", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/ed33bef1072d62b1813b6722293c06b5682df380", "committedDate": "2020-10-19T18:10:20Z", "message": "add taggable filter for pedestrian and private access ways"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eed336a877d0c009c08b0948872a560ba1dd550", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/8eed336a877d0c009c08b0948872a560ba1dd550", "committedDate": "2020-10-26T17:53:08Z", "message": "missing roundabout 2nd version draft"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "476dbe9d115446308c05c5d991d9aa6624a02377", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/476dbe9d115446308c05c5d991d9aa6624a02377", "committedDate": "2020-10-27T00:31:50Z", "message": "missing roundabout 2nd version final version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf9976a3d45626fa5f2ff1b8b1c353a6e5d9be86", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/bf9976a3d45626fa5f2ff1b8b1c353a6e5d9be86", "committedDate": "2020-10-27T00:42:38Z", "message": "missing roundabout 2nd version final version (checkStyle)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1cefb62a07fda93cb589a58ebb95def5dc20c03", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/f1cefb62a07fda93cb589a58ebb95def5dc20c03", "committedDate": "2020-10-27T00:50:42Z", "message": "missing roundabout 2nd version final version (arrangement)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673e6fcc905c32df9c0c4606fdff52e5195afa93", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/673e6fcc905c32df9c0c4606fdff52e5195afa93", "committedDate": "2020-10-27T00:53:52Z", "message": "missing roundabout 2nd version final version (arrangement)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NzU0NjEz", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-517754613", "createdAt": "2020-10-27T14:17:41Z", "commit": {"oid": "673e6fcc905c32df9c0c4606fdff52e5195afa93"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNDoxNzo0MlrOHo-lJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNDoxNzo0MlrOHo-lJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjczMDQwNg==", "bodyText": "I would reverse the conditional here and make the connectedEdges.add inside the conditional and remove the \"return\".\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        if (wayId.getOsmIdentifier() == edge.getOsmIdentifier())\n          \n          \n            \n                                        {\n          \n          \n            \n                                            return;\n          \n          \n            \n                                        }\n          \n          \n            \n                                        connectedEdges.add(wayId.getOsmIdentifier());\n          \n          \n            \n                                        if (wayId.getOsmIdentifier() != edge.getOsmIdentifier())\n          \n          \n            \n                                        {\n          \n          \n            \n                                            connectedEdges.add(wayId.getOsmIdentifier());\n          \n          \n            \n                                        }", "url": "https://github.com/osmlab/atlas-checks/pull/402#discussion_r512730406", "createdAt": "2020-10-27T14:17:42Z", "author": {"login": "atiannicelli"}, "path": "src/main/java/org/openstreetmap/atlas/checks/validation/linear/edges/RoundaboutMissingTagCheck.java", "diffHunk": "@@ -151,8 +165,16 @@ private boolean intersectingWithMoreThan(final Edge edge)\n                         .filter(HighwayTag::isCarNavigableHighway)\n                         .filter(obj -> obj.getTag(ServiceTag.KEY).isEmpty())\n                         // de-duplication sectioned edges\n-                        .forEach(wayId -> connectedEdges.add(wayId.getOsmIdentifier())));\n-        return connectedEdges.size() > MINIMUM_INTERSECTION;\n+                        .forEach(wayId ->\n+                        {\n+                            if (wayId.getOsmIdentifier() == edge.getOsmIdentifier())\n+                            {\n+                                return;\n+                            }\n+                            connectedEdges.add(wayId.getOsmIdentifier());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "673e6fcc905c32df9c0c4606fdff52e5195afa93"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5298edfaba3f6a9e118dddc1dae1758d94a155d1", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/5298edfaba3f6a9e118dddc1dae1758d94a155d1", "committedDate": "2020-10-27T15:53:12Z", "message": "Update src/main/java/org/openstreetmap/atlas/checks/validation/linear/edges/RoundaboutMissingTagCheck.java\n\nCo-authored-by: atiannicelli <atiannicelli@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3ODcwOTg4", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-517870988", "createdAt": "2020-10-27T15:57:34Z", "commit": {"oid": "5298edfaba3f6a9e118dddc1dae1758d94a155d1"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e50c2a7ecb2fda091b75b4d623dc19f6e2873d1", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/9e50c2a7ecb2fda091b75b4d623dc19f6e2873d1", "committedDate": "2020-10-27T23:28:58Z", "message": "resolving merging conflicts and minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21aeb6df3b97d046ec769263f6c09cbb5def092d", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/21aeb6df3b97d046ec769263f6c09cbb5def092d", "committedDate": "2020-10-27T23:32:24Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32fcda83fcac950b9fe7805de5546cefdfb5c322", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/32fcda83fcac950b9fe7805de5546cefdfb5c322", "committedDate": "2020-10-28T00:07:02Z", "message": "merging issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0cd88057ff58ef01e996e6ff9f3842de610b542", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/d0cd88057ff58ef01e996e6ff9f3842de610b542", "committedDate": "2020-10-28T15:46:55Z", "message": "merging issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4963dff576d7594dbede8c46785e2fb871317a5b", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/4963dff576d7594dbede8c46785e2fb871317a5b", "committedDate": "2020-10-28T16:05:05Z", "message": "merging issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a00b27fb86eedc9259fb89286fd09b00225e138", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/9a00b27fb86eedc9259fb89286fd09b00225e138", "committedDate": "2020-10-28T16:18:11Z", "message": "merging issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74367a9e036d33574cdaf9f4afc9a8d894b62a26", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/74367a9e036d33574cdaf9f4afc9a8d894b62a26", "committedDate": "2020-10-28T19:25:56Z", "message": "Merge branch 'dev' into missingRoundabout_2run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95bcb87f071ee30878b35c75b21bd67337628fa7", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/95bcb87f071ee30878b35c75b21bd67337628fa7", "committedDate": "2020-10-29T01:49:14Z", "message": "minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49fa241cbd2380b1e38c92a220cb2c3cf52056b6", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/49fa241cbd2380b1e38c92a220cb2c3cf52056b6", "committedDate": "2020-10-29T15:37:01Z", "message": "minor changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwOTQ0NTEx", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-520944511", "createdAt": "2020-10-30T18:45:57Z", "commit": {"oid": "49fa241cbd2380b1e38c92a220cb2c3cf52056b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxODo0NTo1OFrOHrb8ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxODo0NTo1OFrOHrb8ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwODY0NA==", "bodyText": "This configuration key is already defined in BaseCheck. While there is no loss of effect because BaseCheck is using it effectively the same way, it would be better to use a different key.", "url": "https://github.com/osmlab/atlas-checks/pull/402#discussion_r515308644", "createdAt": "2020-10-30T18:45:58Z", "author": {"login": "Bentleysb"}, "path": "src/main/java/org/openstreetmap/atlas/checks/validation/linear/edges/RoundaboutMissingTagCheck.java", "diffHunk": "@@ -60,6 +67,10 @@ public RoundaboutMissingTagCheck(final Configuration configuration)\n                 \"angle.threshold.maximum_degree\", MAX_THRESHOLD_DEGREES_DEFAULT, Angle::degrees);\n         this.minAngleThreshold = this.configurationValue(configuration,\n                 \"angle.threshold.minimum_degree\", MIN_THRESHOLD_DEGREES_DEFAULT, Angle::degrees);\n+        this.tagFilterIgnore = this.configurationValue(configuration, \"tags.filter\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49fa241cbd2380b1e38c92a220cb2c3cf52056b6"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f63bb740b1906033265ed7640b5e34c534f6505", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/6f63bb740b1906033265ed7640b5e34c534f6505", "committedDate": "2020-10-30T19:26:48Z", "message": "tags filter minor changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODY5ODUy", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-521869852", "createdAt": "2020-11-02T17:57:31Z", "commit": {"oid": "6f63bb740b1906033265ed7640b5e34c534f6505"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzo1NzozMVrOHsPuwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzo1NzozMVrOHsPuwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE1NzEyMQ==", "bodyText": "Can you change the configurable here too?", "url": "https://github.com/osmlab/atlas-checks/pull/402#discussion_r516157121", "createdAt": "2020-11-02T17:57:31Z", "author": {"login": "Bentleysb"}, "path": "src/test/java/org/openstreetmap/atlas/checks/validation/linear/edges/RoundaboutMissingTagCheckTest.java", "diffHunk": "@@ -19,6 +20,9 @@\n     @Rule\n     public ConsumerBasedExpectedCheckVerifier verifier = new ConsumerBasedExpectedCheckVerifier();\n \n+    private final Configuration inlineConfiguration = ConfigurationResolver.inlineConfiguration(\n+            \"{\\\"RoundaboutMissingTagCheck\\\":{\\\"tags.filter\\\":\\\"motor_vehicle->!no&foot->!yes&footway->!&access->!private&construction->!\\\"}}\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f63bb740b1906033265ed7640b5e34c534f6505"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODg2NDM4", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-521886438", "createdAt": "2020-11-02T18:20:57Z", "commit": {"oid": "6f63bb740b1906033265ed7640b5e34c534f6505"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODoyMDo1N1rOHsQhvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODoyMDo1N1rOHsQhvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE3MDE3NQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/osmlab/atlas-checks/pull/402#discussion_r516170175", "createdAt": "2020-11-02T18:20:57Z", "author": {"login": "sayas01"}, "path": "src/main/java/org/openstreetmap/atlas/checks/validation/linear/edges/RoundaboutMissingTagCheck.java", "diffHunk": "@@ -168,4 +187,33 @@ private boolean isPartOfClosedWay(final Edge edge)\n                 .filter(inEdge -> inEdge.getOsmIdentifier() == edge.getOsmIdentifier())\n                 .count() == 1;\n     }\n+\n+    /**\n+     * Check if original OSM Way is a Turning Circle. See\n+     * https://wiki.openstreetmap.org/wiki/Tag:highway%3Dturning_circle\n+     *\n+     * @param edge\n+     *            entity with valence equal to\n+     *            {@link RoundaboutMissingTagCheck#MINIMUM_INTERSECTION}\n+     * @return true if way is a turning circle. OSM Examples:\n+     *         https://www.openstreetmap.org/way/220432725", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f63bb740b1906033265ed7640b5e34c534f6505"}, "originalPosition": 88}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50de73eebdcdd71ef190220bcd8d4364a459c885", "author": {"user": {"login": "vladlemberg", "name": "Vladimir Lemberg"}}, "url": "https://github.com/osmlab/atlas-checks/commit/50de73eebdcdd71ef190220bcd8d4364a459c885", "committedDate": "2020-11-02T18:42:18Z", "message": "ignore tags filter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTExMDY3", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-521911067", "createdAt": "2020-11-02T18:57:02Z", "commit": {"oid": "50de73eebdcdd71ef190220bcd8d4364a459c885"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTE2NDgw", "url": "https://github.com/osmlab/atlas-checks/pull/402#pullrequestreview-521916480", "createdAt": "2020-11-02T19:05:11Z", "commit": {"oid": "50de73eebdcdd71ef190220bcd8d4364a459c885"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3212, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}