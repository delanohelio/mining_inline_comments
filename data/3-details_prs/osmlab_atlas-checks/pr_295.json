{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MzY2MzU3", "number": 295, "title": "Update Gradle Run to Use Sharded Checks By Default", "bodyText": "Description:\nThis changes the default behavior of the gradle run command to use the ShardedIntegrityChecksSparkJob instead of the IntegrityCheckSparkJob.\nThe mainclass property has been replaced with a sharded. This new property acts as a switch to designate which spark job to use. If it is true (default) the sharded job is used, else the regular checks job is used.\nAs part of this change the example run had to be altered to use Atlas files instead of a PBF. By default gradle run will now download example BLZ atlases and a sharding tree, and run sharded checks on that data.\nThe documentation has been updated to reflect these changes.\nPotential Impact:\nIf any downstream projects rely on the gradle run command they will see a change in the spark job used.\nUnit Test Approach:\nNone\nTest Results:\nTested the gradle run command on the example data, local atlases, and remote PBFs. Both spark jobs were tested when applicable. Data was correctly acquired, and results were as expected in all cases.", "createdAt": "2020-05-11T21:47:18Z", "url": "https://github.com/osmlab/atlas-checks/pull/295", "merged": true, "mergeCommit": {"oid": "a8fe5e8671ed8da9ac6a2fc8c4d511f5985dfb6c"}, "closed": true, "closedAt": "2020-05-13T23:45:47Z", "author": {"login": "Bentleysb"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgVvUagH2gAyNDE2MzY2MzU3OmRmYWQyZTVjNTcyZjk4MDg5MGI2ZTRlNDY0NTVhOThlYjkzYjlhMzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchAtLoAFqTQxMTM0NjE3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dfad2e5c572f980890b6e4e46455a98eb93b9a35", "author": {"user": {"login": "Bentleysb", "name": "Bentley Breithaupt"}}, "url": "https://github.com/osmlab/atlas-checks/commit/dfad2e5c572f980890b6e4e46455a98eb93b9a35", "committedDate": "2020-05-11T20:31:21Z", "message": "gradle run sharded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc4ea5b9fcb620262528e4e2137c121951c4f01d", "author": {"user": {"login": "Bentleysb", "name": "Bentley Breithaupt"}}, "url": "https://github.com/osmlab/atlas-checks/commit/bc4ea5b9fcb620262528e4e2137c121951c4f01d", "committedDate": "2020-05-11T21:29:10Z", "message": "job switch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edcd948a93e61879e04628c4632f3e0b09252c97", "author": {"user": {"login": "Bentleysb", "name": "Bentley Breithaupt"}}, "url": "https://github.com/osmlab/atlas-checks/commit/edcd948a93e61879e04628c4632f3e0b09252c97", "committedDate": "2020-05-11T21:29:26Z", "message": "docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d36feccc4425eb8b6ad006a2315f0f5a8100324c", "author": {"user": {"login": "Bentleysb", "name": "Bentley Breithaupt"}}, "url": "https://github.com/osmlab/atlas-checks/commit/d36feccc4425eb8b6ad006a2315f0f5a8100324c", "committedDate": "2020-05-11T21:31:43Z", "message": "fix link"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjY2MjYw", "url": "https://github.com/osmlab/atlas-checks/pull/295#pullrequestreview-409666260", "createdAt": "2020-05-12T03:02:05Z", "commit": {"oid": "d36feccc4425eb8b6ad006a2315f0f5a8100324c"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzowMjowNVrOGT0Xdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzowNDo1M1rOGT0aPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNDEwMw==", "bodyText": "Thanks for updating this! Please use: https://adoptopenjdk.net/?variant=openjdk11&jvmVariant=hotspot", "url": "https://github.com/osmlab/atlas-checks/pull/295#discussion_r423434103", "createdAt": "2020-05-12T03:02:05Z", "author": {"login": "danielduhh"}, "path": "docs/dev.md", "diffHunk": "@@ -9,7 +9,7 @@ about the basemap data.\n \n ### Prerequisites\n There are a couple of requirements for building and running a new Atlas Check. The following are required:\n-- [Java 8](http://www.oracle.com/technetwork/java/javase/downloads/index.html) \n+- [Java 11](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d36feccc4425eb8b6ad006a2315f0f5a8100324c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNDIzOA==", "bodyText": "nit: atlases -> /atlas", "url": "https://github.com/osmlab/atlas-checks/pull/295#discussion_r423434238", "createdAt": "2020-05-12T03:02:33Z", "author": {"login": "danielduhh"}, "path": "gradle.properties", "diffHunk": "@@ -15,15 +15,16 @@ project_scm=scm:git:https://github.com/osmlab/atlas-checks.git\n profile=local\n \n ## Local (default)\n-checks.local.mainClass=org.openstreetmap.atlas.checks.distributed.IntegrityCheckSparkJob\n+checks.local.sharded=true\n checks.local.configFiles=file://@ROOTDIR@/config/configuration.json\n-checks.local.input=file://@BUILDDIR@/example/data/pbfs/\n+checks.local.input=file://@BUILDDIR@/example/data/atlases/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d36feccc4425eb8b6ad006a2315f0f5a8100324c"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNDQ4Mw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/osmlab/atlas-checks/pull/295#discussion_r423434483", "createdAt": "2020-05-12T03:03:23Z", "author": {"login": "danielduhh"}, "path": "gradle.properties", "diffHunk": "@@ -15,15 +15,16 @@ project_scm=scm:git:https://github.com/osmlab/atlas-checks.git\n profile=local\n \n ## Local (default)\n-checks.local.mainClass=org.openstreetmap.atlas.checks.distributed.IntegrityCheckSparkJob\n+checks.local.sharded=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d36feccc4425eb8b6ad006a2315f0f5a8100324c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNDgxMg==", "bodyText": "Why multiAtlas?", "url": "https://github.com/osmlab/atlas-checks/pull/295#discussion_r423434812", "createdAt": "2020-05-12T03:04:53Z", "author": {"login": "danielduhh"}, "path": "gradle.properties", "diffHunk": "@@ -15,15 +15,16 @@ project_scm=scm:git:https://github.com/osmlab/atlas-checks.git\n profile=local\n \n ## Local (default)\n-checks.local.mainClass=org.openstreetmap.atlas.checks.distributed.IntegrityCheckSparkJob\n+checks.local.sharded=true\n checks.local.configFiles=file://@ROOTDIR@/config/configuration.json\n-checks.local.input=file://@BUILDDIR@/example/data/pbfs/\n+checks.local.input=file://@BUILDDIR@/example/data/atlases/\n checks.local.output=file://@BUILDDIR@/example/data/output/\n checks.local.outputFormats=flags,geojson,metrics\n-checks.local.countries=UNK\n+checks.local.countries=BLZ\n #checks.local.pbfBoundingBox=\n checks.local.savePbfAtlas=true\n checks.local.compressOutput=false\n checks.local.startedFolder=file://@BUILDDIR@/example/tmp/\n checks.local.master=local\n+checks.local.multiAtlas=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d36feccc4425eb8b6ad006a2315f0f5a8100324c"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16272a6bbd8eba7c394f8c8687c760904be4fdaa", "author": {"user": {"login": "Bentleysb", "name": "Bentley Breithaupt"}}, "url": "https://github.com/osmlab/atlas-checks/commit/16272a6bbd8eba7c394f8c8687c760904be4fdaa", "committedDate": "2020-05-12T18:01:52Z", "message": "update links; clean up"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMDI1ODEz", "url": "https://github.com/osmlab/atlas-checks/pull/295#pullrequestreview-411025813", "createdAt": "2020-05-13T15:10:47Z", "commit": {"oid": "16272a6bbd8eba7c394f8c8687c760904be4fdaa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzQ2MTc4", "url": "https://github.com/osmlab/atlas-checks/pull/295#pullrequestreview-411346178", "createdAt": "2020-05-13T22:34:48Z", "commit": {"oid": "16272a6bbd8eba7c394f8c8687c760904be4fdaa"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjozNDo0OFrOGVF3HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjozNDo0OFrOGVF3HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc2OTMwOQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/osmlab/atlas-checks/pull/295#discussion_r424769309", "createdAt": "2020-05-13T22:34:48Z", "author": {"login": "sayas01"}, "path": "README.md", "diffHunk": "@@ -25,7 +25,7 @@ To start working with Atlas Checks follow the steps below:\n 2. Switch to newly created directory: `cd atlas-checks`\n 3. Execute `./gradlew run`\n \n-This command will build and run Atlas Checks with all the default options against a sample OSM PBF of Belize downloaded from [here](https://apple.box.com/s/3k3wcc0lq1fhqgozxr4mdi0llf95byo3). GeoJSON output will be produced that contains all the results found from the run. Those outputs will be found in `atlas-checks/build/examples/data/output`. For more information on running Atlas Checks as a standalone application click [here](docs/standalone.md).\n+This command will build and run Atlas Checks with all the default options against a sample Atlases of Belize downloaded from [here](https://www.dropbox.com/sh/54aqfbs12suqd9t/AAC8bpVWCgGLY-SZ30XKIY92a/atlas/BLZ). GeoJSON output will be produced that contains all the results found from the run. Those outputs will be found in `atlas-checks/build/examples/data/output`. For more information on running Atlas Checks as a standalone application click [here](docs/standalone.md).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16272a6bbd8eba7c394f8c8687c760904be4fdaa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3329, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}