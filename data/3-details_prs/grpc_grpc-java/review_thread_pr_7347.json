{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNzQ2OTUy", "number": 7347, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNzoxNDoxNVrOEbC1iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNzoxNDoxNVrOEbC1iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2NzkzNDgzOnYy", "diffSide": "RIGHT", "path": "xds/src/test/java/io/grpc/xds/internal/certprovider/CommonCertProviderTestUtils.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNzoxNDoxNVrOHE0_vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxNzoyNTowMFrOHE1Ugg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyNDYzNw==", "bodyText": "My suggestion was to only remove the \"DSA\" case if that was the offending line. So something like:\n    try {\n      return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);\n    } catch (InvalidKeySpecException ignore) {\n      try {\n        return KeyFactory.getInstance(\"EC\").generatePrivate(spec);\n      } catch (InvalidKeySpecException ignore2) {\n       throw new InvalidKeySpecException(\"Neither RSA, nor EC worked\", e);\n      }\n    }\n\nBut if \"EC\" is also going to cause problems I am okay with this change. Could you confirm?", "url": "https://github.com/grpc/grpc-java/pull/7347#discussion_r474824637", "createdAt": "2020-08-21T17:14:15Z", "author": {"login": "sanjaypujare"}, "path": "xds/src/test/java/io/grpc/xds/internal/certprovider/CommonCertProviderTestUtils.java", "diffHunk": "@@ -103,19 +103,7 @@ static PrivateKey getPrivateKey(String resourceName)\n     byte[] encodedKey = new byte[encodedKeyBuf.readableBytes()];\n     encodedKeyBuf.readBytes(encodedKey).release();\n     PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(encodedKey);\n-    try {\n-      return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);\n-    } catch (InvalidKeySpecException ignore) {\n-      try {\n-        return KeyFactory.getInstance(\"DSA\").generatePrivate(spec);\n-      } catch (InvalidKeySpecException ignore2) {\n-        try {\n-          return KeyFactory.getInstance(\"EC\").generatePrivate(spec);\n-        } catch (InvalidKeySpecException e) {\n-          throw new InvalidKeySpecException(\"Neither RSA, DSA nor EC worked\", e);\n-        }\n-      }\n-    }\n+    return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8da86deba4e295f8aa5778878c89bf4272df292"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyNzQ2MQ==", "bodyText": "EC is not disallowed. I also removed EC because you said \"it might be okay to remove both DSA and EC since none of the tests is using those AFAIK\" So we can delete unused code, if we do have EC case later we can add it back.", "url": "https://github.com/grpc/grpc-java/pull/7347#discussion_r474827461", "createdAt": "2020-08-21T17:20:01Z", "author": {"login": "dapengzhang0"}, "path": "xds/src/test/java/io/grpc/xds/internal/certprovider/CommonCertProviderTestUtils.java", "diffHunk": "@@ -103,19 +103,7 @@ static PrivateKey getPrivateKey(String resourceName)\n     byte[] encodedKey = new byte[encodedKeyBuf.readableBytes()];\n     encodedKeyBuf.readBytes(encodedKey).release();\n     PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(encodedKey);\n-    try {\n-      return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);\n-    } catch (InvalidKeySpecException ignore) {\n-      try {\n-        return KeyFactory.getInstance(\"DSA\").generatePrivate(spec);\n-      } catch (InvalidKeySpecException ignore2) {\n-        try {\n-          return KeyFactory.getInstance(\"EC\").generatePrivate(spec);\n-        } catch (InvalidKeySpecException e) {\n-          throw new InvalidKeySpecException(\"Neither RSA, DSA nor EC worked\", e);\n-        }\n-      }\n-    }\n+    return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyNDYzNw=="}, "originalCommit": {"oid": "f8da86deba4e295f8aa5778878c89bf4272df292"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyOTk1NA==", "bodyText": "Yes, I remember saying that but I was thinking we just make the minimal change necessary to unblock the import. Anyway we can add \"EC\" back if we ever need it (doubtful).", "url": "https://github.com/grpc/grpc-java/pull/7347#discussion_r474829954", "createdAt": "2020-08-21T17:25:00Z", "author": {"login": "sanjaypujare"}, "path": "xds/src/test/java/io/grpc/xds/internal/certprovider/CommonCertProviderTestUtils.java", "diffHunk": "@@ -103,19 +103,7 @@ static PrivateKey getPrivateKey(String resourceName)\n     byte[] encodedKey = new byte[encodedKeyBuf.readableBytes()];\n     encodedKeyBuf.readBytes(encodedKey).release();\n     PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(encodedKey);\n-    try {\n-      return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);\n-    } catch (InvalidKeySpecException ignore) {\n-      try {\n-        return KeyFactory.getInstance(\"DSA\").generatePrivate(spec);\n-      } catch (InvalidKeySpecException ignore2) {\n-        try {\n-          return KeyFactory.getInstance(\"EC\").generatePrivate(spec);\n-        } catch (InvalidKeySpecException e) {\n-          throw new InvalidKeySpecException(\"Neither RSA, DSA nor EC worked\", e);\n-        }\n-      }\n-    }\n+    return KeyFactory.getInstance(\"RSA\").generatePrivate(spec);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyNDYzNw=="}, "originalCommit": {"oid": "f8da86deba4e295f8aa5778878c89bf4272df292"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2481, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}