{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMTkwMjQ4", "number": 7562, "title": "xds: add a V2 test for CDS response with UpstreamTlsContext and fix the broken CDS response processing", "bodyText": "V2 tests were deleted in  #7461. This adds one test each for ClientXdsClient and XdsClientImpl2 to partially address lack of test coverage", "createdAt": "2020-10-28T00:10:02Z", "url": "https://github.com/grpc/grpc-java/pull/7562", "merged": true, "mergeCommit": {"oid": "5fe83c3b23095ff575f3308c2cef4d594d79ce2e"}, "closed": true, "closedAt": "2020-10-28T01:22:56Z", "author": {"login": "sanjaypujare"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWyGKMgH2gAyNTExMTkwMjQ4Ojk0YmRiOWMzZjk4ZmVjMGUyYTM5YTJmY2I0ZmQ5OTc4OTRiOGFhMzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWzIiPgFqTUxODI1OTQ0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94bdb9c3f98fec0e2a39a2fcb4fd997894b8aa30", "author": {"user": {"login": "sanjaypujare", "name": null}}, "url": "https://github.com/grpc/grpc-java/commit/94bdb9c3f98fec0e2a39a2fcb4fd997894b8aa30", "committedDate": "2020-10-28T00:05:33Z", "message": "xds: add a V2 test for CDS response with UpstreamTlsContext"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjQyNjIw", "url": "https://github.com/grpc/grpc-java/pull/7562#pullrequestreview-518242620", "createdAt": "2020-10-28T00:23:38Z", "commit": {"oid": "94bdb9c3f98fec0e2a39a2fcb4fd997894b8aa30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMDoyMzozOFrOHpVo0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMDoyMzozOFrOHpVo0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzEwODE3Ng==", "bodyText": "These two typeUrl should be defined in ClientXdsClient as they are used for client's specific business logic.\nThe abstract layer only decode xDS resource blobs to List<Any>, the remaining processing should be done in the  business logic layer.", "url": "https://github.com/grpc/grpc-java/pull/7562#discussion_r513108176", "createdAt": "2020-10-28T00:23:38Z", "author": {"login": "voidzcy"}, "path": "xds/src/main/java/io/grpc/xds/AbstractXdsClient.java", "diffHunk": "@@ -64,13 +64,20 @@\n       \"type.googleapis.com/envoy.api.v2.RouteConfiguration\";\n   private static final String ADS_TYPE_URL_RDS =\n       \"type.googleapis.com/envoy.config.route.v3.RouteConfiguration\";\n-  private static final String ADS_TYPE_URL_CDS_V2 = \"type.googleapis.com/envoy.api.v2.Cluster\";\n+  @VisibleForTesting\n+  static final String ADS_TYPE_URL_CDS_V2 = \"type.googleapis.com/envoy.api.v2.Cluster\";\n   private static final String ADS_TYPE_URL_CDS =\n       \"type.googleapis.com/envoy.config.cluster.v3.Cluster\";\n   private static final String ADS_TYPE_URL_EDS_V2 =\n       \"type.googleapis.com/envoy.api.v2.ClusterLoadAssignment\";\n   private static final String ADS_TYPE_URL_EDS =\n       \"type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment\";\n+  @VisibleForTesting\n+  static final String TYPE_URL_UPSTREAM_TLS_CONTEXT =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94bdb9c3f98fec0e2a39a2fcb4fd997894b8aa30"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23c7d91c995dad5d9a616c341da73f2d73b7e4a8", "author": {"user": {"login": "sanjaypujare", "name": null}}, "url": "https://github.com/grpc/grpc-java/commit/23c7d91c995dad5d9a616c341da73f2d73b7e4a8", "committedDate": "2020-10-28T00:45:37Z", "message": "address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjU5NDQy", "url": "https://github.com/grpc/grpc-java/pull/7562#pullrequestreview-518259442", "createdAt": "2020-10-28T01:18:03Z", "commit": {"oid": "23c7d91c995dad5d9a616c341da73f2d73b7e4a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3950, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}