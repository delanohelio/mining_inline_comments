{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MTU4NjA5", "number": 7071, "title": "stub: Have disableAutoRequest() on server-side", "bodyText": "This splits server-side flow control from client-side, but tailors the API for\neach case. Client-side continues having disableAutoRequestWithInitial(). While\nclient-side could have disableAutoRequest(), it seems like it will only rarely\nbe used and disableAutoRequestWithInitial(0) isn't that bad. So we leave it off\nfor now; we can always add it in the future.\n\nWhen this is merged I will sync it internally by itself, so that I can fix up the one\nuser of the current API (being replaced).\nThis API change was discussed at #1788 (comment)\nThis is intended to be backported into 1.30.", "createdAt": "2020-05-27T23:08:53Z", "url": "https://github.com/grpc/grpc-java/pull/7071", "merged": true, "mergeCommit": {"oid": "0201c5a9a7551c736d6f63476b145eca4f17c3b6"}, "closed": true, "closedAt": "2020-05-29T22:05:47Z", "author": {"login": "ejona86"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclhhyRgH2gAyNDI0MTU4NjA5OjU2ZWYwZGU0MTI4OGI5YjY5MjY3NDYwNjNkMzQ4NWM2NTMyZWI4Njc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmHU4igFqTQyMTIxNDgxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56ef0de41288b9b6926746063d3485c6532eb867", "author": {"user": {"login": "ejona86", "name": "Eric Anderson"}}, "url": "https://github.com/grpc/grpc-java/commit/56ef0de41288b9b6926746063d3485c6532eb867", "committedDate": "2020-05-27T23:05:03Z", "message": "stub: Have disableAutoRequest() on server-side\n\nThis splits server-side flow control from client-side, but tailors the API for\neach case. Client-side continues having disableAutoRequestWithInitial(). While\nclient-side could have disableAutoRequest(), it seems like it will only rarely\nbe used and disableAutoRequestWithInitial(0) isn't that bad. So we leave it off\nfor now; we can always add it in the future."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe48b56960f0f52d38e782ffd0666e8527121612", "author": {"user": {"login": "ejona86", "name": "Eric Anderson"}}, "url": "https://github.com/grpc/grpc-java/commit/fe48b56960f0f52d38e782ffd0666e8527121612", "committedDate": "2020-05-28T13:35:01Z", "message": "Fix example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMzIzNjQ3", "url": "https://github.com/grpc/grpc-java/pull/7071#pullrequestreview-420323647", "createdAt": "2020-05-28T17:11:19Z", "commit": {"oid": "fe48b56960f0f52d38e782ffd0666e8527121612"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNzoxMToxOVrOGb-1SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNzoxMToxOVrOGb-1SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTk5NDE4NA==", "bodyText": "If you disable auto request before setting the onReadyHandler, then you don't need the explicit first request (next line). I mean, why you move the disable auto request to after setting onReadHandler?", "url": "https://github.com/grpc/grpc-java/pull/7071#discussion_r431994184", "createdAt": "2020-05-28T17:11:19Z", "author": {"login": "voidzcy"}, "path": "examples/src/main/java/io/grpc/examples/manualflowcontrol/ManualFlowControlServer.java", "diffHunk": "@@ -69,6 +66,11 @@ public void run() {\n         }\n         final OnReadyHandler onReadyHandler = new OnReadyHandler();\n         serverCallStreamObserver.setOnReadyHandler(onReadyHandler);\n+        // Set up manual flow control for the request stream. It feels backwards to configure the request\n+        // stream's flow control using the response stream's observer, but this is the way it is.\n+        serverCallStreamObserver.disableAutoRequest();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe48b56960f0f52d38e782ffd0666e8527121612"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c724934508bbdeb0cb6b22da619e09f10885547", "author": {"user": {"login": "ejona86", "name": "Eric Anderson"}}, "url": "https://github.com/grpc/grpc-java/commit/7c724934508bbdeb0cb6b22da619e09f10885547", "committedDate": "2020-05-29T18:43:18Z", "message": "Fix mistake thinking previous API did request(1)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMjE0ODE2", "url": "https://github.com/grpc/grpc-java/pull/7071#pullrequestreview-421214816", "createdAt": "2020-05-29T19:07:21Z", "commit": {"oid": "7c724934508bbdeb0cb6b22da619e09f10885547"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4448, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}