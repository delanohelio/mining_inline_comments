{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NTg0OTI5", "number": 7335, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1Mzo1OFrOEZl3vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1Mzo1OFrOEZl3vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1MjcwMzMyOnYy", "diffSide": "RIGHT", "path": "xds/src/main/java/io/grpc/xds/EnvoyProtoData.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1Mzo1OFrOHCfsRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxODoxNzo0OFrOHCghSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM3ODQzOQ==", "bodyText": "What about clusterServiceName? I remember there was a TODO in LoadStatsStoreImpl#generateLoadReport for setting clusterServiceName as well. You may want to complete that TODO as well.", "url": "https://github.com/grpc/grpc-java/pull/7335#discussion_r472378439", "createdAt": "2020-08-18T17:53:58Z", "author": {"login": "voidzcy"}, "path": "xds/src/main/java/io/grpc/xds/EnvoyProtoData.java", "diffHunk": "@@ -1226,4 +1230,511 @@ static ClusterWeight fromEnvoyProtoClusterWeight(\n       return new ClusterWeight(proto.getName(), proto.getWeight().getValue());\n     }\n   }\n+\n+  /**\n+   * See corresponding Envoy proto message {@link\n+   * io.envoyproxy.envoy.config.endpoint.v3.ClusterStats}.\n+   */\n+  static final class ClusterStats {\n+    private final String clusterName;\n+    @Nullable\n+    private final String clusterServiceName;\n+    private final List<UpstreamLocalityStats> upstreamLocalityStatsList;\n+    private final List<DroppedRequests> droppedRequestsList;\n+    private final long totalDroppedRequests;\n+    private final long loadReportIntervalNanos;\n+\n+    private ClusterStats(\n+        String clusterName,\n+        @Nullable String clusterServiceName,\n+        List<UpstreamLocalityStats> upstreamLocalityStatsList,\n+        List<DroppedRequests> droppedRequestsList,\n+        long totalDroppedRequests,\n+        long loadReportIntervalNanos) {\n+      this.clusterName = checkNotNull(clusterName, \"clusterName\");\n+      this.clusterServiceName = clusterServiceName;\n+      this.upstreamLocalityStatsList = Collections.unmodifiableList(\n+              checkNotNull(upstreamLocalityStatsList, \"upstreamLocalityStatsList\"));\n+      this.droppedRequestsList = Collections.unmodifiableList(\n+          checkNotNull(droppedRequestsList, \"dropRequestsList\"));\n+      this.totalDroppedRequests = totalDroppedRequests;\n+      this.loadReportIntervalNanos = loadReportIntervalNanos;\n+    }\n+\n+    String getClusterName() {\n+      return clusterName;\n+    }\n+\n+    @Nullable\n+    String getClusterServiceName() {\n+      return clusterServiceName;\n+    }\n+\n+    List<UpstreamLocalityStats> getUpstreamLocalityStatsList() {\n+      return upstreamLocalityStatsList;\n+    }\n+\n+    List<DroppedRequests> getDroppedRequestsList() {\n+      return droppedRequestsList;\n+    }\n+\n+    long getTotalDroppedRequests() {\n+      return totalDroppedRequests;\n+    }\n+\n+    long getLoadReportIntervalNanos() {\n+      return loadReportIntervalNanos;\n+    }\n+\n+    io.envoyproxy.envoy.config.endpoint.v3.ClusterStats toEnvoyProtoClusterStats() {\n+      io.envoyproxy.envoy.config.endpoint.v3.ClusterStats.Builder builder =\n+          io.envoyproxy.envoy.config.endpoint.v3.ClusterStats.newBuilder();\n+      builder.setClusterName(clusterName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "030696cd265ce8ea5c77458ac61c4d7ba80cfe44"}, "originalPosition": 128}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM5MjAxMA==", "bodyText": "Oops, I missed that. Done.", "url": "https://github.com/grpc/grpc-java/pull/7335#discussion_r472392010", "createdAt": "2020-08-18T18:17:48Z", "author": {"login": "dapengzhang0"}, "path": "xds/src/main/java/io/grpc/xds/EnvoyProtoData.java", "diffHunk": "@@ -1226,4 +1230,511 @@ static ClusterWeight fromEnvoyProtoClusterWeight(\n       return new ClusterWeight(proto.getName(), proto.getWeight().getValue());\n     }\n   }\n+\n+  /**\n+   * See corresponding Envoy proto message {@link\n+   * io.envoyproxy.envoy.config.endpoint.v3.ClusterStats}.\n+   */\n+  static final class ClusterStats {\n+    private final String clusterName;\n+    @Nullable\n+    private final String clusterServiceName;\n+    private final List<UpstreamLocalityStats> upstreamLocalityStatsList;\n+    private final List<DroppedRequests> droppedRequestsList;\n+    private final long totalDroppedRequests;\n+    private final long loadReportIntervalNanos;\n+\n+    private ClusterStats(\n+        String clusterName,\n+        @Nullable String clusterServiceName,\n+        List<UpstreamLocalityStats> upstreamLocalityStatsList,\n+        List<DroppedRequests> droppedRequestsList,\n+        long totalDroppedRequests,\n+        long loadReportIntervalNanos) {\n+      this.clusterName = checkNotNull(clusterName, \"clusterName\");\n+      this.clusterServiceName = clusterServiceName;\n+      this.upstreamLocalityStatsList = Collections.unmodifiableList(\n+              checkNotNull(upstreamLocalityStatsList, \"upstreamLocalityStatsList\"));\n+      this.droppedRequestsList = Collections.unmodifiableList(\n+          checkNotNull(droppedRequestsList, \"dropRequestsList\"));\n+      this.totalDroppedRequests = totalDroppedRequests;\n+      this.loadReportIntervalNanos = loadReportIntervalNanos;\n+    }\n+\n+    String getClusterName() {\n+      return clusterName;\n+    }\n+\n+    @Nullable\n+    String getClusterServiceName() {\n+      return clusterServiceName;\n+    }\n+\n+    List<UpstreamLocalityStats> getUpstreamLocalityStatsList() {\n+      return upstreamLocalityStatsList;\n+    }\n+\n+    List<DroppedRequests> getDroppedRequestsList() {\n+      return droppedRequestsList;\n+    }\n+\n+    long getTotalDroppedRequests() {\n+      return totalDroppedRequests;\n+    }\n+\n+    long getLoadReportIntervalNanos() {\n+      return loadReportIntervalNanos;\n+    }\n+\n+    io.envoyproxy.envoy.config.endpoint.v3.ClusterStats toEnvoyProtoClusterStats() {\n+      io.envoyproxy.envoy.config.endpoint.v3.ClusterStats.Builder builder =\n+          io.envoyproxy.envoy.config.endpoint.v3.ClusterStats.newBuilder();\n+      builder.setClusterName(clusterName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM3ODQzOQ=="}, "originalCommit": {"oid": "030696cd265ce8ea5c77458ac61c4d7ba80cfe44"}, "originalPosition": 128}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2467, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}