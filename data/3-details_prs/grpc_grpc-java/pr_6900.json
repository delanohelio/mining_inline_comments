{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MzkyNjA5", "number": 6900, "title": "stub: add Blocking StubType to blocking ClientCalls methods.", "bodyText": "b/34358463", "createdAt": "2020-04-03T21:22:26Z", "url": "https://github.com/grpc/grpc-java/pull/6900", "merged": true, "mergeCommit": {"oid": "37913fd3b1dd0b20c2bba24cf68eafae83d1acbe"}, "closed": true, "closedAt": "2020-04-06T17:55:25Z", "author": {"login": "ran-su"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUHqKEgH2gAyMzk4MzkyNjA5OjU2ZmZlYTg0ZThlNzg4ODc1ODg2NzNjYTk3ZjVlNjU2NGUzNWEwNTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVCgk2gFqTM4ODQ4NTIxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56ffea84e8e78887588673ca97f5e6564e35a057", "author": {"user": {"login": "ran-su", "name": "Ran"}}, "url": "https://github.com/grpc/grpc-java/commit/56ffea84e8e78887588673ca97f5e6564e35a057", "committedDate": "2020-04-03T21:19:57Z", "message": "stub: add Blocking StubType to blocking ClientCalls methods."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NjQwNjA4", "url": "https://github.com/grpc/grpc-java/pull/6900#pullrequestreview-387640608", "createdAt": "2020-04-04T00:04:07Z", "commit": {"oid": "56ffea84e8e78887588673ca97f5e6564e35a057"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMDowNDowN1rOGAtAew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMDowNDowN1rOGAtAew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM5MDU4Nw==", "bodyText": "unaryBlockingCallFailed() uses a NoopClientCall that calls listener.onClose() in its start(). That is closer to the reality. We should also keep the same style throughout a file.", "url": "https://github.com/grpc/grpc-java/pull/6900#discussion_r403390587", "createdAt": "2020-04-04T00:04:07Z", "author": {"login": "zhangkun83"}, "path": "stub/src/test/java/io/grpc/stub/ClientCallsTest.java", "diffHunk": "@@ -203,6 +220,48 @@ public void blockingUnaryCall2_interruptedWaitsForOnClose() throws Exception {\n     assertTrue(\"context not cancelled\", methodImpl.observer.isCancelled());\n   }\n \n+  @Test\n+  public void blockingUnaryCall_HasBlockingStubType() {\n+    when(mockChannel.newCall(\n+        ArgumentMatchers.<MethodDescriptor<Integer, Integer>>any(), any(CallOptions.class)))\n+        .thenReturn(mockClientCall);\n+    // we only interested in the call options, stop the call by thrown.\n+    doThrow(new RuntimeException(\"intended\")).when(mockClientCall).sendMessage(any(Integer.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56ffea84e8e78887588673ca97f5e6564e35a057"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6f2976f469950d0f45b3a611a614d1879da22a3", "author": {"user": {"login": "ran-su", "name": "Ran"}}, "url": "https://github.com/grpc/grpc-java/commit/c6f2976f469950d0f45b3a611a614d1879da22a3", "committedDate": "2020-04-04T01:45:28Z", "message": "use noop clientCall instead of mock."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NDg1MjEy", "url": "https://github.com/grpc/grpc-java/pull/6900#pullrequestreview-388485212", "createdAt": "2020-04-06T17:53:53Z", "commit": {"oid": "c6f2976f469950d0f45b3a611a614d1879da22a3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4510, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}