{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MjYyMjQw", "number": 7766, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMTowMzowNFrOFJp0tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMTowNDowM1rOFJp1Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NjY2NzQzOnYy", "diffSide": "RIGHT", "path": "xds/src/test/java/io/grpc/xds/XdsSdsClientServerTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMTowMzowNFrOIMEzpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNzoyODozMVrOIMUWCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTUzMjU4Mg==", "bodyText": "If it enters here because of the if clause what's the point of this assertion?", "url": "https://github.com/grpc/grpc-java/pull/7766#discussion_r549532582", "createdAt": "2020-12-29T01:03:04Z", "author": {"login": "sanjaypujare"}, "path": "xds/src/test/java/io/grpc/xds/XdsSdsClientServerTest.java", "diffHunk": "@@ -175,8 +176,14 @@ public void requireClientAuth_noClientCert_expectException()\n       unaryRpc(/* requestMessage= */ \"buddy\", blockingStub);\n       fail(\"exception expected\");\n     } catch (StatusRuntimeException sre) {\n-      assertThat(sre).hasCauseThat().isInstanceOf(SSLHandshakeException.class);\n-      assertThat(sre).hasCauseThat().hasMessageThat().contains(\"HANDSHAKE_FAILURE\");\n+      if (sre.getCause() instanceof SSLHandshakeException) {\n+        assertThat(sre).hasCauseThat().isInstanceOf(SSLHandshakeException.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6260d71d072b9d5be6b11e74e0e6f923e6bf0e83"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc4NzE0NA==", "bodyText": "To clearly show the assertion being made. So a readability thing. I agree it will never fail, but if the condition is removed/changed in the future, the assertion could easily be forgotten.", "url": "https://github.com/grpc/grpc-java/pull/7766#discussion_r549787144", "createdAt": "2020-12-29T17:28:31Z", "author": {"login": "ejona86"}, "path": "xds/src/test/java/io/grpc/xds/XdsSdsClientServerTest.java", "diffHunk": "@@ -175,8 +176,14 @@ public void requireClientAuth_noClientCert_expectException()\n       unaryRpc(/* requestMessage= */ \"buddy\", blockingStub);\n       fail(\"exception expected\");\n     } catch (StatusRuntimeException sre) {\n-      assertThat(sre).hasCauseThat().isInstanceOf(SSLHandshakeException.class);\n-      assertThat(sre).hasCauseThat().hasMessageThat().contains(\"HANDSHAKE_FAILURE\");\n+      if (sre.getCause() instanceof SSLHandshakeException) {\n+        assertThat(sre).hasCauseThat().isInstanceOf(SSLHandshakeException.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTUzMjU4Mg=="}, "originalCommit": {"oid": "6260d71d072b9d5be6b11e74e0e6f923e6bf0e83"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NjY2ODgyOnYy", "diffSide": "RIGHT", "path": "xds/src/test/java/io/grpc/xds/XdsSdsClientServerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMTowNDowM1rOIME0Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMTowNDowM1rOIME0Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTUzMjc2Mg==", "bodyText": "Same as above. If sre.getCause() instanceof SSLHandshakeException is true, wouldn't this assertion will always be true?", "url": "https://github.com/grpc/grpc-java/pull/7766#discussion_r549532762", "createdAt": "2020-12-29T01:04:03Z", "author": {"login": "sanjaypujare"}, "path": "xds/src/test/java/io/grpc/xds/XdsSdsClientServerTest.java", "diffHunk": "@@ -206,8 +213,14 @@ public void mtls_badClientCert_expectException() throws IOException, URISyntaxEx\n           false);\n       fail(\"exception expected\");\n     } catch (StatusRuntimeException sre) {\n-      assertThat(sre).hasCauseThat().isInstanceOf(SSLHandshakeException.class);\n-      assertThat(sre).hasCauseThat().hasMessageThat().contains(\"HANDSHAKE_FAILURE\");\n+      if (sre.getCause() instanceof SSLHandshakeException) {\n+        assertThat(sre).hasCauseThat().isInstanceOf(SSLHandshakeException.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6260d71d072b9d5be6b11e74e0e6f923e6bf0e83"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2958, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}