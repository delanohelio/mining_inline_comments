{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExODM4ODcy", "number": 7564, "title": "Fix builders ABI backward compatibility broken in v1.33.0", "bodyText": "What's this PR do?\nBrings back io.grpc.internal.AbstractManagedChannelImplBuilder and io.grpc.internal.AbstractServerImplBuilder to the class hierarchy to fix broken ABI backward compatibility.\nAny background context you want to provide?\nAbstractManagedChannelImplBuilder\nAbstractManagedChannelImplBuilder brought back as a copy of ForwardingChannelBuilder support pre-v1.33 binary interface, e.g. io.grpc.netty.NettyChannelBuilder.maxInboundMessageSize(I)Lio/grpc/internal/AbstractManagedChannelImplBuilder;\nAbstractServerImplBuilder\n\nBrings back io.grpc.internal.AbstractManagedChannelImplBuilder and io.grpc.internal.AbstractServerImplBuilder to the class hierarchy to fix broken ABI backward compatibility.\nSince ForwardingServerBuilder was introduced in v1.33.0, I changed it to ForwardingServerBuilder<T extends ServerBuilder<T>>. and made it package-private.\n\nWhat are the relevant tickets?\n\nFixes #7552\nPartially undoes #7211", "createdAt": "2020-10-28T21:08:11Z", "url": "https://github.com/grpc/grpc-java/pull/7564", "merged": true, "mergeCommit": {"oid": "d314c6812643bd094539fd7c0c3c243984671e64"}, "closed": true, "closedAt": "2020-10-29T16:06:38Z", "author": {"login": "sergiitk"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXEG3ogH2gAyNTExODM4ODcyOjk3MmVhMWQ0MWZlMWZlZTYyMmNkOTI5MzExNjZjNjJkYmMzM2NlNGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXUPTzgFqTUxOTgxNjQ3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "972ea1d41fe1fee622cd92931166c62dbc33ce4f", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/972ea1d41fe1fee622cd92931166c62dbc33ce4f", "committedDate": "2020-10-28T21:04:37Z", "message": "fix channel builders ABI backward compatibility broken in v1.33.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be7a6281c898fad1917bd5932ae9d6bebf13cbec", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/be7a6281c898fad1917bd5932ae9d6bebf13cbec", "committedDate": "2020-10-28T22:03:53Z", "message": "fix server builders ABI backward compatibility broken in v1.33.0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MTU1NzE2", "url": "https://github.com/grpc/grpc-java/pull/7564#pullrequestreview-519155716", "createdAt": "2020-10-28T23:24:36Z", "commit": {"oid": "be7a6281c898fad1917bd5932ae9d6bebf13cbec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMzoyNDozNlrOHqBEwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMzoyNDozNlrOHqBEwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgxOTg0MQ==", "bodyText": "This would need to re-define the methods of ForwardingServerBuilder. At that point extending ForwardingServerBuilder provides nothing. It is good to change ForwardingServerBuilder to <T extends ServerBuilder>, though. Although I also wonder if we should remove the class from v1.33.x since it is now unused. (We can just make it package-private to reduce code churn.)", "url": "https://github.com/grpc/grpc-java/pull/7564#discussion_r513819841", "createdAt": "2020-10-28T23:24:36Z", "author": {"login": "ejona86"}, "path": "core/src/main/java/io/grpc/internal/AbstractServerImplBuilder.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020 The gRPC Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.grpc.internal;\n+\n+import io.grpc.ForwardingServerBuilder;\n+import io.grpc.ServerBuilder;\n+\n+/**\n+ * Temporary shim for {@link io.grpc.ForwardingServerBuilder} to fix ABI backward compatibility.\n+ *\n+ * @param <T> The concrete type of this builder.\n+ * @see <a href=\"https://github.com/grpc/grpc-java/issues/7211\">grpc/grpc-java#7211</a>\n+ */\n+public abstract class AbstractServerImplBuilder", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be7a6281c898fad1917bd5932ae9d6bebf13cbec"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eac3b0f9437ac5894bbcc1b134d05fd87b84b68", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/7eac3b0f9437ac5894bbcc1b134d05fd87b84b68", "committedDate": "2020-10-29T15:35:44Z", "message": "AbstractServerImplBuilder duplicates ForwardingServerBuilder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5ODE2NDcy", "url": "https://github.com/grpc/grpc-java/pull/7564#pullrequestreview-519816472", "createdAt": "2020-10-29T15:52:19Z", "commit": {"oid": "7eac3b0f9437ac5894bbcc1b134d05fd87b84b68"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3952, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}