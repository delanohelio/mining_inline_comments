{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjIzMzY1", "number": 7353, "title": "core: refactor to delete RetryPolicy.DEFAULT", "bodyText": "We used null and RetryPolicy.DEFAULT for the value of retryPolicy in RetriableStream to distinguish the state between name resolution not being completed and name resolution being completed but no retry policy. After the change #7259 , name resolution is always completed when creating a RetriableStream, so the distinction will be gone. It will be cleaner to get rid of RetryPolicy.DEFAULT and simply use null for absence of RetryPolicy. RetryPolicy.Provider will be deleted in upcoming PR.", "createdAt": "2020-08-24T16:13:25Z", "url": "https://github.com/grpc/grpc-java/pull/7353", "merged": true, "mergeCommit": {"oid": "24a1095fd8f9f4e438e6d1554e86aeff53415849"}, "closed": true, "closedAt": "2020-08-27T05:22:25Z", "author": {"login": "dapengzhang0"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBjxzTAH2gAyNDcyNjIzMzY1OmJiMmYzMjE3NzUyZDE0ODI5MWZmMzY0YTA2ODU1YzM2Mzg5NDRhMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC5MANgH2gAyNDcyNjIzMzY1OmEyZjQwN2UyMzQwZjg3NmUwYWI4OGMwM2MxYzg5MDc1OWMxOGVjNmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/bb2f3217752d148291ff364a06855c3638944a2e", "committedDate": "2020-08-23T01:32:14Z", "message": "core: refactor to delete RetryPolicy.DEFAULT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NzUwMzMz", "url": "https://github.com/grpc/grpc-java/pull/7353#pullrequestreview-475750333", "createdAt": "2020-08-26T18:29:37Z", "commit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxODoyOTozN1rOHHYeeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxODoyOTozN1rOHHYeeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUwMzA5Ng==", "bodyText": "Is there anything blocking this to be deleted? Otherwise, we can just get rid of this now.", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477503096", "createdAt": "2020-08-26T18:29:37Z", "author": {"login": "voidzcy"}, "path": "core/src/main/java/io/grpc/internal/HedgingPolicy.java", "diffHunk": "@@ -75,6 +71,8 @@ public String toString() {\n         .toString();\n   }\n \n+  // TODO(zdapeng): delete this because HedgingPolicy will be always available prior to starting\n+  //  RetriableStream.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODAzNTA0", "url": "https://github.com/grpc/grpc-java/pull/7353#pullrequestreview-475803504", "createdAt": "2020-08-26T19:41:30Z", "commit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTo0MTozMFrOHHbDgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTo1MToyMVrOHHbX7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0NTM0NQ==", "bodyText": "Optional since I guess this whole block is marked for deletion, but \"Never returns null\" contradicts the new annotation.", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477545345", "createdAt": "2020-08-26T19:41:30Z", "author": {"login": "ericgribkoff"}, "path": "core/src/main/java/io/grpc/internal/HedgingPolicy.java", "diffHunk": "@@ -83,6 +81,7 @@ public String toString() {\n     /**\n      * This method is used no more than once for each call. Never returns null.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU0ODM4Mw==", "bodyText": "Same comment here about never returns null", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477548383", "createdAt": "2020-08-26T19:47:14Z", "author": {"login": "ericgribkoff"}, "path": "core/src/main/java/io/grpc/internal/RetryPolicy.java", "diffHunk": "@@ -100,6 +97,7 @@ public String toString() {\n     /**\n      * This method is used no more than once for each call. Never returns null.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU1MDU3Mw==", "bodyText": "It's not immediately clear to me why this block is no longer necessary.  retryPolicy was not accessed in this function after this conditional even before this PR - was it previously unnecessary, and this is just cleaning up? Or was the assignment of retryPolicy required before this change and not required now?", "url": "https://github.com/grpc/grpc-java/pull/7353#discussion_r477550573", "createdAt": "2020-08-26T19:51:21Z", "author": {"login": "ericgribkoff"}, "path": "core/src/main/java/io/grpc/internal/RetriableStream.java", "diffHunk": "@@ -831,11 +830,6 @@ public void run() {\n         } else {\n           noMoreTransparentRetry.set(true);\n \n-          if (retryPolicy == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODQxNTc1", "url": "https://github.com/grpc/grpc-java/pull/7353#pullrequestreview-475841575", "createdAt": "2020-08-26T20:39:10Z", "commit": {"oid": "bb2f3217752d148291ff364a06855c3638944a2e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2f407e2340f876e0ab88c03c1c890759c18ec6a", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/a2f407e2340f876e0ab88c03c1c890759c18ec6a", "committedDate": "2020-08-27T05:02:47Z", "message": "fix javadoc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4192, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}