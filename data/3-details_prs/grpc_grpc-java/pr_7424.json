{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2OTI4OTIx", "number": 7424, "title": "core: Inline AbstractManagedChannelImplBuilder", "bodyText": "Closes #7211.\nNote to reviewers\nCommit 75cccde preserves the order and style of AbstractManagedChannelImplBuilder in ManagedChannelImplBuilder, to highlight the changes necessary to inline the superclass:\ngit diff c1d6a09~:core/src/main/java/io/grpc/internal/AbstractManagedChannelImplBuilder.java c1d6a09:core/src/main/java/io/grpc/internal/ManagedChannelImplBuilder.java\nAnd the changes made to tests (mostly unchanged):\ngit diff c1d6a09~:core/src/test/java/io/grpc/internal/AbstractManagedChannelImplBuilderTest.java c1d6a09:core/src/test/java/io/grpc/internal/ManagedChannelImplBuilderTest.java\n\n\nThe following commit `cc0185c` organizes the methods and properties in `ManagedChannelImplBuilder` after inlining the superclass:\n1. Package-private mutable state used for building`ManagedChannelImpl` is separated from private states and constants\n2. Methods implementing `ManagedChannelBuilder` preserve the order they're defined in `ManagedChannelBuilder`\n3. Private and `@VisibleForTesting` methods moved next to where they are executed or fit logically.", "createdAt": "2020-09-14T22:41:46Z", "url": "https://github.com/grpc/grpc-java/pull/7424", "merged": true, "mergeCommit": {"oid": "ef7846496c71c6baa2a1f42ef73ca0b8ad26066e"}, "closed": true, "closedAt": "2020-09-22T14:48:32Z", "author": {"login": "sergiitk"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJMdjvABqjM3Njk4NDEyMTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLEPFfAFqTQ5MjY1OTk0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d465b154fa9effca34018e41176ecbe9a019033", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/8d465b154fa9effca34018e41176ecbe9a019033", "committedDate": "2020-09-14T22:40:49Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}, "afterCommit": {"oid": "ae19c86c7ac6d6280ab876c9f73d6bbc63e4e57f", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/ae19c86c7ac6d6280ab876c9f73d6bbc63e4e57f", "committedDate": "2020-09-15T18:52:39Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae19c86c7ac6d6280ab876c9f73d6bbc63e4e57f", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/ae19c86c7ac6d6280ab876c9f73d6bbc63e4e57f", "committedDate": "2020-09-15T18:52:39Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}, "afterCommit": {"oid": "1802defb9b22e420f9bb935e54e4d2518311a5a2", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/1802defb9b22e420f9bb935e54e4d2518311a5a2", "committedDate": "2020-09-15T18:54:51Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1802defb9b22e420f9bb935e54e4d2518311a5a2", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/1802defb9b22e420f9bb935e54e4d2518311a5a2", "committedDate": "2020-09-15T18:54:51Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}, "afterCommit": {"oid": "04d0ec3c8d52877e4e1e894799f992152d0ab711", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/04d0ec3c8d52877e4e1e894799f992152d0ab711", "committedDate": "2020-09-15T20:25:39Z", "message": "temporary: return the old order to make the review easier"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04d0ec3c8d52877e4e1e894799f992152d0ab711", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/04d0ec3c8d52877e4e1e894799f992152d0ab711", "committedDate": "2020-09-15T20:25:39Z", "message": "temporary: return the old order to make the review easier"}, "afterCommit": {"oid": "3024e3c8b5726cf2ebfba645e9abad48fb8ac4f0", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/3024e3c8b5726cf2ebfba645e9abad48fb8ac4f0", "committedDate": "2020-09-15T20:29:28Z", "message": "temporary: return the old order to make the review easier"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3024e3c8b5726cf2ebfba645e9abad48fb8ac4f0", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/3024e3c8b5726cf2ebfba645e9abad48fb8ac4f0", "committedDate": "2020-09-15T20:29:28Z", "message": "temporary: return the old order to make the review easier"}, "afterCommit": {"oid": "75cccde21fd8f45fd52c62a5bb014a44a725e58b", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/75cccde21fd8f45fd52c62a5bb014a44a725e58b", "committedDate": "2020-09-15T21:56:27Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzMwMTE2", "url": "https://github.com/grpc/grpc-java/pull/7424#pullrequestreview-489730116", "createdAt": "2020-09-16T15:12:10Z", "commit": {"oid": "a944c59c8f76f260ab9cb2163de4960dec96c1b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxMjoxMFrOHS1sCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxMjoxMFrOHS1sCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxNjA0MQ==", "bodyText": "Use UnsupportedClientTransportFactoryBuilder directly?", "url": "https://github.com/grpc/grpc-java/pull/7424#discussion_r489516041", "createdAt": "2020-09-16T15:12:10Z", "author": {"login": "ejona86"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1446,28 +1449,30 @@ public void run() {\n     @Override\n     public ManagedChannelBuilder<?> createResolvingOobChannelBuilder(String target) {\n       final class ResolvingOobChannelBuilder\n-          extends AbstractManagedChannelImplBuilder<ResolvingOobChannelBuilder> {\n-        int defaultPort = -1;\n+          extends ForwardingChannelBuilder<ResolvingOobChannelBuilder> {\n+        private final ManagedChannelImplBuilder managedChannelImplBuilder;\n \n         ResolvingOobChannelBuilder(String target) {\n-          super(target);\n+          final class ResolvingOobUnsupportedClientTransportFactoryBuilder extends\n+              UnsupportedClientTransportFactoryBuilder {}\n+\n+          managedChannelImplBuilder = new ManagedChannelImplBuilder(target,\n+              new ResolvingOobUnsupportedClientTransportFactoryBuilder(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a944c59c8f76f260ab9cb2163de4960dec96c1b6"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1d6a09261805bb568fbe076fdb04bcbeeb60cb4", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/c1d6a09261805bb568fbe076fdb04bcbeeb60cb4", "committedDate": "2020-09-18T19:18:18Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "622d35fc243f02fb77d8c5e80fbda703fc35ac50", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/622d35fc243f02fb77d8c5e80fbda703fc35ac50", "committedDate": "2020-09-16T15:10:47Z", "message": "fixup! Use GrpcCleanupRule instead"}, "afterCommit": {"oid": "c1d6a09261805bb568fbe076fdb04bcbeeb60cb4", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/c1d6a09261805bb568fbe076fdb04bcbeeb60cb4", "committedDate": "2020-09-18T19:18:18Z", "message": "core: Inline AbstractManagedChannelImplBuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51359b8b52025c9d722dfafb7e6469b753d93078", "author": {"user": {"login": "sergiitk", "name": "Sergii Tkachenko"}}, "url": "https://github.com/grpc/grpc-java/commit/51359b8b52025c9d722dfafb7e6469b753d93078", "committedDate": "2020-09-18T22:03:40Z", "message": "fixup! Fix Python habits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNjU5OTQ5", "url": "https://github.com/grpc/grpc-java/pull/7424#pullrequestreview-492659949", "createdAt": "2020-09-21T14:26:30Z", "commit": {"oid": "51359b8b52025c9d722dfafb7e6469b753d93078"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4040, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}