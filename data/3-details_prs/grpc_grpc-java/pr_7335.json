{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NTg0OTI5", "number": 7335, "title": "xds: add data type for ClusterStats", "bodyText": "", "createdAt": "2020-08-18T15:47:50Z", "url": "https://github.com/grpc/grpc-java/pull/7335", "merged": true, "mergeCommit": {"oid": "cb07b0fb451e37100094f5c5ea7cf01e786af7fe"}, "closed": true, "closedAt": "2020-08-18T19:30:06Z", "author": {"login": "dapengzhang0"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAI80DAH2gAyNDY5NTg0OTI5OjAzMDY5NmNkMjY1Y2U4ZWE1Yzc3NDU4YWM2MWM0ZDdiYTgwY2ZlNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdALdfQAFqTQ2OTcyNDcwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "030696cd265ce8ea5c77458ac61c4d7ba80cfe44", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/030696cd265ce8ea5c77458ac61c4d7ba80cfe44", "committedDate": "2020-08-18T15:42:54Z", "message": "xds: add data type for ClusterStats"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NjkzMjI3", "url": "https://github.com/grpc/grpc-java/pull/7335#pullrequestreview-469693227", "createdAt": "2020-08-18T17:53:58Z", "commit": {"oid": "030696cd265ce8ea5c77458ac61c4d7ba80cfe44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1Mzo1OFrOHCfsRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo1Mzo1OFrOHCfsRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM3ODQzOQ==", "bodyText": "What about clusterServiceName? I remember there was a TODO in LoadStatsStoreImpl#generateLoadReport for setting clusterServiceName as well. You may want to complete that TODO as well.", "url": "https://github.com/grpc/grpc-java/pull/7335#discussion_r472378439", "createdAt": "2020-08-18T17:53:58Z", "author": {"login": "voidzcy"}, "path": "xds/src/main/java/io/grpc/xds/EnvoyProtoData.java", "diffHunk": "@@ -1226,4 +1230,511 @@ static ClusterWeight fromEnvoyProtoClusterWeight(\n       return new ClusterWeight(proto.getName(), proto.getWeight().getValue());\n     }\n   }\n+\n+  /**\n+   * See corresponding Envoy proto message {@link\n+   * io.envoyproxy.envoy.config.endpoint.v3.ClusterStats}.\n+   */\n+  static final class ClusterStats {\n+    private final String clusterName;\n+    @Nullable\n+    private final String clusterServiceName;\n+    private final List<UpstreamLocalityStats> upstreamLocalityStatsList;\n+    private final List<DroppedRequests> droppedRequestsList;\n+    private final long totalDroppedRequests;\n+    private final long loadReportIntervalNanos;\n+\n+    private ClusterStats(\n+        String clusterName,\n+        @Nullable String clusterServiceName,\n+        List<UpstreamLocalityStats> upstreamLocalityStatsList,\n+        List<DroppedRequests> droppedRequestsList,\n+        long totalDroppedRequests,\n+        long loadReportIntervalNanos) {\n+      this.clusterName = checkNotNull(clusterName, \"clusterName\");\n+      this.clusterServiceName = clusterServiceName;\n+      this.upstreamLocalityStatsList = Collections.unmodifiableList(\n+              checkNotNull(upstreamLocalityStatsList, \"upstreamLocalityStatsList\"));\n+      this.droppedRequestsList = Collections.unmodifiableList(\n+          checkNotNull(droppedRequestsList, \"dropRequestsList\"));\n+      this.totalDroppedRequests = totalDroppedRequests;\n+      this.loadReportIntervalNanos = loadReportIntervalNanos;\n+    }\n+\n+    String getClusterName() {\n+      return clusterName;\n+    }\n+\n+    @Nullable\n+    String getClusterServiceName() {\n+      return clusterServiceName;\n+    }\n+\n+    List<UpstreamLocalityStats> getUpstreamLocalityStatsList() {\n+      return upstreamLocalityStatsList;\n+    }\n+\n+    List<DroppedRequests> getDroppedRequestsList() {\n+      return droppedRequestsList;\n+    }\n+\n+    long getTotalDroppedRequests() {\n+      return totalDroppedRequests;\n+    }\n+\n+    long getLoadReportIntervalNanos() {\n+      return loadReportIntervalNanos;\n+    }\n+\n+    io.envoyproxy.envoy.config.endpoint.v3.ClusterStats toEnvoyProtoClusterStats() {\n+      io.envoyproxy.envoy.config.endpoint.v3.ClusterStats.Builder builder =\n+          io.envoyproxy.envoy.config.endpoint.v3.ClusterStats.newBuilder();\n+      builder.setClusterName(clusterName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "030696cd265ce8ea5c77458ac61c4d7ba80cfe44"}, "originalPosition": 128}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe84f4ecfebdbfbf80e094788819a2c2c8e8e723", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/fe84f4ecfebdbfbf80e094788819a2c2c8e8e723", "committedDate": "2020-08-18T18:14:47Z", "message": "fix missing builer.setClusterServiceName"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "867a1045d58031a5ad8c0c0fb340fca253066ab7", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/867a1045d58031a5ad8c0c0fb340fca253066ab7", "committedDate": "2020-08-18T18:16:38Z", "message": "set clusterServiceName if provided when generateLoadReport"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NzI0NzA4", "url": "https://github.com/grpc/grpc-java/pull/7335#pullrequestreview-469724708", "createdAt": "2020-08-18T18:38:24Z", "commit": {"oid": "867a1045d58031a5ad8c0c0fb340fca253066ab7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4169, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}