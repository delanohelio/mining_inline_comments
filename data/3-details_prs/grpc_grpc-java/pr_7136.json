{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDI3MjI3", "number": 7136, "title": "api,core: add LoadBalancer.Helper#createResolvingOobChannelBuilder api", "bodyText": "this allows RLS or any LB to configure OobChannel such as service config.", "createdAt": "2020-06-17T18:38:11Z", "url": "https://github.com/grpc/grpc-java/pull/7136", "merged": true, "mergeCommit": {"oid": "f5258dca17ac44946423a2155ae479d74a793d3c"}, "closed": true, "closedAt": "2020-06-17T19:36:15Z", "author": {"login": "creamsoup"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsOJQiAH2gAyNDM2MDI3MjI3OmViYmI0OGZmMmUwNzZiNDNhNWQ1ZGI0NzUxOGZjNDkyNDk1NDg4ZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsPA7CAFqTQzMjcwOTQ2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2", "author": {"user": {"login": "creamsoup", "name": "Jihun Cho"}}, "url": "https://github.com/grpc/grpc-java/commit/ebbb48ff2e076b43a5d5db47518fc492495488e2", "committedDate": "2020-06-17T18:27:32Z", "message": "api,core: add LoadBalancer.Helper#createResolvingOobChannelBuilder api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNjc0NjU0", "url": "https://github.com/grpc/grpc-java/pull/7136#pullrequestreview-432674654", "createdAt": "2020-06-17T18:41:19Z", "commit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo0MToxOVrOGlSZlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo0NTo0M1rOGlSjOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1MTk1OA==", "bodyText": "s/prevents/prevent/ ?", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441751958", "createdAt": "2020-06-17T18:41:19Z", "author": {"login": "dapengzhang0"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1278,6 +1279,19 @@ public int getDefaultPort() {\n         protected ClientTransportFactory buildTransportFactory() {\n           throw new UnsupportedOperationException();\n         }\n+\n+        @Override\n+        public ManagedChannel build() {\n+          // TODO(creamsoup) prevents main channel to shutdown if oob channel is not terminated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1NDQyNQ==", "bodyText": "I think the last sentence is not needed as well. Basically it will use the balancer determined by the service config from the NameResolver or the default config.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441754425", "createdAt": "2020-06-17T18:45:43Z", "author": {"login": "dapengzhang0"}, "path": "api/src/main/java/io/grpc/LoadBalancer.java", "diffHunk": "@@ -1044,15 +1044,33 @@ public void updateOobChannelAddresses(ManagedChannel channel, EquivalentAddressG\n      * {@link ManagedChannelBuilder#forTarget} for the format of a target string.\n      *\n      * <p>The target string will be resolved by a {@link NameResolver} created according to the\n-     * target string.  The out-of-band channel doesn't have load-balancing.  If multiple addresses\n-     * are resolved for the target, the first working address will be used.\n+     * target string.  If multiple addresses are resolved for the target, the first working address\n+     * will be used.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNjg0MTkx", "url": "https://github.com/grpc/grpc-java/pull/7136#pullrequestreview-432684191", "createdAt": "2020-06-17T18:51:23Z", "commit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo1MToyNFrOGlS3Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo1MToyNFrOGlS3Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1OTUxNA==", "bodyText": "Do you still need this overriding? Same for below.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441759514", "createdAt": "2020-06-17T18:51:24Z", "author": {"login": "voidzcy"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1291,15 +1305,12 @@ protected ClientTransportFactory buildTransportFactory() {\n       builder.proxyDetector = nameResolverArgs.getProxyDetector();\n       builder.defaultPort = nameResolverArgs.getDefaultPort();\n       builder.userAgent = userAgent;\n-      return\n-          new ManagedChannelImpl(\n-              builder,\n-              transportFactory,\n-              backoffPolicyProvider,\n-              balancerRpcExecutorPool,\n-              stopwatchSupplier,\n-              Collections.<ClientInterceptor>emptyList(),\n-              timeProvider);\n+      return builder;\n+    }\n+\n+    @Override\n+    public ManagedChannel createResolvingOobChannel(String target) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "228d0bf8709a5fd1c98e50a26b5cf47857b16c3d", "author": {"user": {"login": "creamsoup", "name": "Jihun Cho"}}, "url": "https://github.com/grpc/grpc-java/commit/228d0bf8709a5fd1c98e50a26b5cf47857b16c3d", "committedDate": "2020-06-17T19:04:15Z", "message": "address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNjk3MDU1", "url": "https://github.com/grpc/grpc-java/pull/7136#pullrequestreview-432697055", "createdAt": "2020-06-17T19:10:08Z", "commit": {"oid": "228d0bf8709a5fd1c98e50a26b5cf47857b16c3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNzA5NDY0", "url": "https://github.com/grpc/grpc-java/pull/7136#pullrequestreview-432709464", "createdAt": "2020-06-17T19:28:20Z", "commit": {"oid": "228d0bf8709a5fd1c98e50a26b5cf47857b16c3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4254, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}