{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTYzNDg4", "number": 7713, "title": "core: On unexpected EOS, mention whether the frame was empty", "bodyText": "Empty DATA frames with EOS tell a stronger tale as to where the server\nmay have its bug.\n\nThis is an alternative to #7277\nCC @kmjung, @birenroy", "createdAt": "2020-12-10T00:58:03Z", "url": "https://github.com/grpc/grpc-java/pull/7713", "merged": true, "mergeCommit": {"oid": "60d3e7c5362a739f6795a2a87fc86a62059de501"}, "closed": true, "closedAt": "2020-12-10T22:54:34Z", "author": {"login": "ejona86"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdknCgwgH2gAyNTM1NTYzNDg4OjJmNGJiYjEyZjUxOGQyYWMxMWM0MzQzZDU5MmJhNGU4ZWEyYWYyMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk6MPDAFqTU0OTYxNTQyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f4bbb12f518d2ac11c4343d592ba4e8ea2af221", "author": {"user": {"login": "ejona86", "name": "Eric Anderson"}}, "url": "https://github.com/grpc/grpc-java/commit/2f4bbb12f518d2ac11c4343d592ba4e8ea2af221", "committedDate": "2020-12-09T23:07:33Z", "message": "core: On unexpected EOS, mention whether the frame was empty\n\nEmpty DATA frames with EOS tell a stronger tale as to where the server\nmay have its bug."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NjA2Mzg4", "url": "https://github.com/grpc/grpc-java/pull/7713#pullrequestreview-549606388", "createdAt": "2020-12-10T21:13:21Z", "commit": {"oid": "2f4bbb12f518d2ac11c4343d592ba4e8ea2af221"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMToxMzoyMVrOIDdi_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMToxMzoyMVrOIDdi_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUwMDczMw==", "bodyText": "The return value of readableBytes() may depend on the current read index, and inboundDataReceived(frame) may have changed the read index?", "url": "https://github.com/grpc/grpc-java/pull/7713#discussion_r540500733", "createdAt": "2020-12-10T21:13:21Z", "author": {"login": "dapengzhang0"}, "path": "core/src/main/java/io/grpc/internal/Http2ClientStreamTransportState.java", "diffHunk": "@@ -147,8 +147,13 @@ protected void transportDataReceived(ReadableBuffer frame, boolean endOfStream)\n       inboundDataReceived(frame);\n       if (endOfStream) {\n         // This is a protocol violation as we expect to receive trailers.\n-        transportError =\n-            Status.INTERNAL.withDescription(\"Received unexpected EOS on DATA frame from server.\");\n+        if (frame.readableBytes() > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f4bbb12f518d2ac11c4343d592ba4e8ea2af221"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "031a7a14ba4645e1854b3a9a44a24a2ffa6a0253", "author": {"user": {"login": "ejona86", "name": "Eric Anderson"}}, "url": "https://github.com/grpc/grpc-java/commit/031a7a14ba4645e1854b3a9a44a24a2ffa6a0253", "committedDate": "2020-12-10T21:17:31Z", "message": "Save frame size before inboundDataReceived"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NjE1NDIz", "url": "https://github.com/grpc/grpc-java/pull/7713#pullrequestreview-549615423", "createdAt": "2020-12-10T21:26:22Z", "commit": {"oid": "031a7a14ba4645e1854b3a9a44a24a2ffa6a0253"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4754, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}