{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTc4NzUx", "number": 6829, "title": "android-interop-testing: include android interop testing in main build", "bodyText": "For #6775.\nTODO: temporarily disabled code shrinking for release buildType, need to fix proguard rules to before being able to do code shrinking.\nThe problem was caused by pulling in org.apache.httpcomponents.htttpcore by google auth2 lib. According to Proguard:\n\nIn Android development, sloppy libraries may contain duplicates of classes that are already present in the Android run-time (notably org.w3c.dom, org.xml.sax, org.xmlpull.v1, org.apache.commons.logging.Log, org.apache.http, and org.json). You must remove these classes from your libraries, since they are possibly inconsistent, and the run-time libraries would get precedence anyway.\n\nTODO: there are tons of errorprone warnings and Proguard notes. Although they do not cause build fail, it would be better to fix/suppress them.\nProguard notes seem to be fine. There are some compiler warnings coming from javalite generated code, nothing can be done to fix that. A couple of errorprone warnings left, but unclear if it is necessary to fix them.\nAfter the change, generated code will be checked in. So this PR contains generated code. Reviewers should only need to review .gradle, .md files, proguard-rules.pro, InteropTask.java and TesterActivity.java.", "createdAt": "2020-03-13T20:55:39Z", "url": "https://github.com/grpc/grpc-java/pull/6829", "merged": true, "mergeCommit": {"oid": "d537adedb3f80ae7f0dc5c4a4e5b6567e7d71415"}, "closed": true, "closedAt": "2020-03-19T19:37:49Z", "author": {"login": "voidzcy"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNWB-bAH2gAyMzg3OTc4NzUxOmZjNjU2YjEwZWJjNzNiMGQ0NWRiNjUyZWJmOTQ0YmZiMzhlMzczYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO_yQWAH2gAyMzg3OTc4NzUxOmFmZWIxNTM3NWRjMWU0NzczNTg3YWYyMzU2MGM3NTAzMmRjMTJhYzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc656b10ebc73b0d45db652ebf944bfb38e373a8", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/fc656b10ebc73b0d45db652ebf944bfb38e373a8", "committedDate": "2020-03-13T20:07:10Z", "message": "Include android-interop-testing in main buildscript."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c94de965a18331e3943ead22799e64d1b95c9247", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/c94de965a18331e3943ead22799e64d1b95c9247", "committedDate": "2020-03-13T20:09:55Z", "message": "Flatten android-interop-testing project structure."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "613e6f07276ec0793297bb0e61f02de5ae631042", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/613e6f07276ec0793297bb0e61f02de5ae631042", "committedDate": "2020-03-13T20:47:36Z", "message": "Add android application plugin in the main build's configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3497fa7eca0fd72199c4fc653e49834de332cd7a", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/3497fa7eca0fd72199c4fc653e49834de332cd7a", "committedDate": "2020-03-13T20:49:08Z", "message": "Clean up android-interop-testing's buildscript. Temporarily disable code minification due to proguard issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2116297faf3d170bdfbd7e25a6991ffc7bc5fcba", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/2116297faf3d170bdfbd7e25a6991ffc7bc5fcba", "committedDate": "2020-03-13T20:49:38Z", "message": "Clean up TODO in README."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61a3d75c740197d7896df70cf911e6a70dd72070", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/61a3d75c740197d7896df70cf911e6a70dd72070", "committedDate": "2020-03-16T09:13:24Z", "message": "Completely exclude apache.http dependencies."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5e5855afb043f73ed30ccfae39755467493ab51", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/d5e5855afb043f73ed30ccfae39755467493ab51", "committedDate": "2020-03-16T17:47:53Z", "message": "Remove android/cronet/android-interop-testing from RELEASING.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9956a2de57ba080ae50ead5d6b084c3a23f10e6", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/c9956a2de57ba080ae50ead5d6b084c3a23f10e6", "committedDate": "2020-03-16T18:49:11Z", "message": "Fix small errorprone issues."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6b273963d6b803366c58987437700e9daeb503d", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/a6b273963d6b803366c58987437700e9daeb503d", "committedDate": "2020-03-16T18:47:27Z", "message": "Fix small errorprone issues."}, "afterCommit": {"oid": "c9956a2de57ba080ae50ead5d6b084c3a23f10e6", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/c9956a2de57ba080ae50ead5d6b084c3a23f10e6", "committedDate": "2020-03-16T18:49:11Z", "message": "Fix small errorprone issues."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTIyMDkx", "url": "https://github.com/grpc/grpc-java/pull/6829#pullrequestreview-375522091", "createdAt": "2020-03-16T19:27:46Z", "commit": {"oid": "c9956a2de57ba080ae50ead5d6b084c3a23f10e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOToyNzo0NlrOF3C1yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOToyNzo0NlrOF3C1yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI2MjUzOA==", "bodyText": "CURRENT_GRPC_VERSION should be removed from android/build.gradle?", "url": "https://github.com/grpc/grpc-java/pull/6829#discussion_r393262538", "createdAt": "2020-03-16T19:27:46Z", "author": {"login": "creamsoup"}, "path": "RELEASING.md", "diffHunk": "@@ -32,10 +32,7 @@ them before continuing, and set them again when resuming.\n $ MAJOR=1 MINOR=7 PATCH=0 # Set appropriately for new release\n $ VERSION_FILES=(\n   build.gradle\n-  android/build.gradle", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9956a2de57ba080ae50ead5d6b084c3a23f10e6"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7c160c84c9ce911b045212c9c04c68e530013b2", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/f7c160c84c9ce911b045212c9c04c68e530013b2", "committedDate": "2020-03-16T21:32:23Z", "message": "Add checkStyle tasks."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2Mjg5OTgz", "url": "https://github.com/grpc/grpc-java/pull/6829#pullrequestreview-376289983", "createdAt": "2020-03-17T18:16:03Z", "commit": {"oid": "f7c160c84c9ce911b045212c9c04c68e530013b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODoxNjowM1rOF3ocSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODoxNjowM1rOF3ocSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3ODYwMw==", "bodyText": "change seems okay. i am wondering if it is a good idea to split this into two sections; android and java.", "url": "https://github.com/grpc/grpc-java/pull/6829#discussion_r393878603", "createdAt": "2020-03-17T18:16:03Z", "author": {"login": "creamsoup"}, "path": "build.gradle", "diffHunk": "@@ -53,6 +54,7 @@ subprojects {\n         opencensusVersion = '0.24.0'\n \n         configureProtoCompilation = {\n+            boolean isAndroid = project.getName().contains('android')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7c160c84c9ce911b045212c9c04c68e530013b2"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MzA5NjMy", "url": "https://github.com/grpc/grpc-java/pull/6829#pullrequestreview-376309632", "createdAt": "2020-03-17T18:42:46Z", "commit": {"oid": "f7c160c84c9ce911b045212c9c04c68e530013b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46b407fab5d7566a0a9a47c0f6aaf8c055c0b415", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/46b407fab5d7566a0a9a47c0f6aaf8c055c0b415", "committedDate": "2020-03-18T19:20:42Z", "message": "Supress ProGuard warning for java.nio.ByteBuffer limit(int) when compile against JDK 9+."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjE4NjI4", "url": "https://github.com/grpc/grpc-java/pull/6829#pullrequestreview-377218628", "createdAt": "2020-03-18T20:40:36Z", "commit": {"oid": "46b407fab5d7566a0a9a47c0f6aaf8c055c0b415"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MTIxODQz", "url": "https://github.com/grpc/grpc-java/pull/6829#pullrequestreview-377121843", "createdAt": "2020-03-18T18:16:24Z", "commit": {"oid": "f7c160c84c9ce911b045212c9c04c68e530013b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxODoxNjoyNFrOF4RX4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxODoxNjoyNFrOF4RX4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU0OTIxNg==", "bodyText": "Why move the comment after a different plugin?", "url": "https://github.com/grpc/grpc-java/pull/6829#discussion_r394549216", "createdAt": "2020-03-18T18:16:24Z", "author": {"login": "dapengzhang0"}, "path": "build.gradle", "diffHunk": "@@ -1,5 +1,6 @@\n plugins {\n-    id \"com.android.library\" apply false // Necessary for Android plugin to find its classes\n+    id \"com.android.application\" apply false // Necessary for Android plugin to find its classes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7c160c84c9ce911b045212c9c04c68e530013b2"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjkzOTc5", "url": "https://github.com/grpc/grpc-java/pull/6829#pullrequestreview-377293979", "createdAt": "2020-03-18T22:58:18Z", "commit": {"oid": "46b407fab5d7566a0a9a47c0f6aaf8c055c0b415"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjo1ODoxOVrOF4ZvtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjo1ODoxOVrOF4ZvtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY4NjM4OA==", "bodyText": "This will not be needed once #6839 is in.", "url": "https://github.com/grpc/grpc-java/pull/6829#discussion_r394686388", "createdAt": "2020-03-18T22:58:19Z", "author": {"login": "dapengzhang0"}, "path": "android-interop-testing/proguard-rules.pro", "diffHunk": "@@ -21,3 +21,7 @@\n \n # Ignores: can't find referenced method from grpc-testing's compileOnly dependency on Truth\n -dontwarn io.grpc.testing.DeadlineSubject\n+\n+# Ignores: can't find referenced method for java.nio.ByteBuffer limit(int) due to JDK ABI\n+# incompatibility.\n+-dontwarn java.nio.ByteBuffer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46b407fab5d7566a0a9a47c0f6aaf8c055c0b415"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddcbf2bab8353f411445da6f7202683f56d7818b", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/ddcbf2bab8353f411445da6f7202683f56d7818b", "committedDate": "2020-03-18T23:19:43Z", "message": "Revert \"Supress ProGuard warning for java.nio.ByteBuffer limit(int) when compile against JDK 9+.\"\n\nThis reverts commit 46b407fab5d7566a0a9a47c0f6aaf8c055c0b415."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afeb15375dc1e4773587af23560c75032dc12ac5", "author": {"user": {"login": "voidzcy", "name": "Chengyuan Zhang"}}, "url": "https://github.com/grpc/grpc-java/commit/afeb15375dc1e4773587af23560c75032dc12ac5", "committedDate": "2020-03-18T23:19:56Z", "message": "Merge branch 'master' of github.com:grpc/grpc-java into build/add_android_interop_testing_into_main_build"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4462, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}