{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMDgzMTY1", "number": 7495, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0Mjo0N1rOEruJMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0Mjo0N1rOEruJMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MjgwMjQwOnYy", "diffSide": "RIGHT", "path": "interop-testing/src/main/java/io/grpc/testing/integration/TestServiceClient.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0Mjo0N1rOHepgrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzo0NjowMlrOHepoww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg5OTQzOQ==", "bodyText": "Just checking - is the comment still relevant with this change?", "url": "https://github.com/grpc/grpc-java/pull/7495#discussion_r501899439", "createdAt": "2020-10-08T17:42:47Z", "author": {"login": "sergiitk"}, "path": "interop-testing/src/main/java/io/grpc/testing/integration/TestServiceClient.java", "diffHunk": "@@ -396,9 +396,10 @@ private void runTest(TestCases testCase) throws Exception {\n   private class Tester extends AbstractInteropTest {\n     @Override\n     protected ManagedChannelBuilder<?> createChannelBuilder() {\n+      boolean useGeneric = false;\n       ChannelCredentials channelCredentials;\n       if (customCredentialsType != null) {\n-        useOkHttp = false; // Retain old behavior; avoids erroring if incompatible\n+        useGeneric = true; // Retain old behavior; avoids erroring if incompatible", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d184afdf4e70c86536aff4975236923b3fcb007"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMDQwOQ==", "bodyText": "Yes. The useOkHttp = false was to enable Netty, to work with these credentials. But it enabled the wrong Netty and so failed at runtime. With this change we now enable the other (shaded) Netty to guarantee the credentials and channel type are compatible.", "url": "https://github.com/grpc/grpc-java/pull/7495#discussion_r501900409", "createdAt": "2020-10-08T17:44:19Z", "author": {"login": "ejona86"}, "path": "interop-testing/src/main/java/io/grpc/testing/integration/TestServiceClient.java", "diffHunk": "@@ -396,9 +396,10 @@ private void runTest(TestCases testCase) throws Exception {\n   private class Tester extends AbstractInteropTest {\n     @Override\n     protected ManagedChannelBuilder<?> createChannelBuilder() {\n+      boolean useGeneric = false;\n       ChannelCredentials channelCredentials;\n       if (customCredentialsType != null) {\n-        useOkHttp = false; // Retain old behavior; avoids erroring if incompatible\n+        useGeneric = true; // Retain old behavior; avoids erroring if incompatible", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg5OTQzOQ=="}, "originalCommit": {"oid": "3d184afdf4e70c86536aff4975236923b3fcb007"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkwMTUwNw==", "bodyText": "Thanks for the explanation.", "url": "https://github.com/grpc/grpc-java/pull/7495#discussion_r501901507", "createdAt": "2020-10-08T17:46:02Z", "author": {"login": "sergiitk"}, "path": "interop-testing/src/main/java/io/grpc/testing/integration/TestServiceClient.java", "diffHunk": "@@ -396,9 +396,10 @@ private void runTest(TestCases testCase) throws Exception {\n   private class Tester extends AbstractInteropTest {\n     @Override\n     protected ManagedChannelBuilder<?> createChannelBuilder() {\n+      boolean useGeneric = false;\n       ChannelCredentials channelCredentials;\n       if (customCredentialsType != null) {\n-        useOkHttp = false; // Retain old behavior; avoids erroring if incompatible\n+        useGeneric = true; // Retain old behavior; avoids erroring if incompatible", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg5OTQzOQ=="}, "originalCommit": {"oid": "3d184afdf4e70c86536aff4975236923b3fcb007"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2382, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}