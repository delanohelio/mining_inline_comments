{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMTQxOTIx", "number": 7630, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDoyMjo0OFrOE6N3yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDoyNDoyM1rOE6N8IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDgwMTM4OnYy", "diffSide": "RIGHT", "path": "alts/src/main/java/io/grpc/alts/internal/AltsHandshakerStub.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDoyMjo0OFrOH1Jg8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDoyMjo0OFrOH1Jg8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ5MjQ2NA==", "bodyText": "Delete this line. It does nothing. Initialization is only required for final fields. Other fields default to 0/null. Ditto below.", "url": "https://github.com/grpc/grpc-java/pull/7630#discussion_r525492464", "createdAt": "2020-11-17T20:22:48Z", "author": {"login": "ejona86"}, "path": "alts/src/main/java/io/grpc/alts/internal/AltsHandshakerStub.java", "diffHunk": "@@ -29,28 +29,29 @@\n /** An interface to the ALTS handshaker service. */\n class AltsHandshakerStub {\n   private final StreamObserver<HandshakerResp> reader = new Reader();\n-  private final StreamObserver<HandshakerReq> writer;\n+  private StreamObserver<HandshakerReq> writer;\n+  private final HandshakerServiceStub serviceStub;\n   private final ArrayBlockingQueue<Optional<HandshakerResp>> responseQueue =\n       new ArrayBlockingQueue<>(1);\n   private final AtomicReference<String> exceptionMessage = new AtomicReference<>();\n \n   private static final long HANDSHAKE_RPC_DEADLINE_SECS = 20;\n \n   AltsHandshakerStub(HandshakerServiceStub serviceStub) {\n-    this.writer =\n-        serviceStub\n-            .withDeadlineAfter(HANDSHAKE_RPC_DEADLINE_SECS, SECONDS)\n-            .doHandshake(this.reader);\n+    writer = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d20c4be2288a30cc18460a6b11c04c665d23c60e"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDgxMjQ4OnYy", "diffSide": "RIGHT", "path": "alts/src/main/java/io/grpc/alts/internal/AltsHandshakerStub.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDoyNDoyM1rOH1Joqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzo0MzowNlrOH1QBSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ5NDQ0Mw==", "bodyText": "Why is this synchronized? I don't think this class can be used from multiple callers/threads.", "url": "https://github.com/grpc/grpc-java/pull/7630#discussion_r525494443", "createdAt": "2020-11-17T20:24:23Z", "author": {"login": "ejona86"}, "path": "alts/src/main/java/io/grpc/alts/internal/AltsHandshakerStub.java", "diffHunk": "@@ -72,6 +74,14 @@ public HandshakerResp send(HandshakerReq req) throws InterruptedException, IOExc\n     return result.get();\n   }\n \n+  /** Create a new writer if the writer is null. */\n+  private synchronized void createWriterIfNull() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d20c4be2288a30cc18460a6b11c04c665d23c60e"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU5OTA1MQ==", "bodyText": "You are right. I was just being cautious :)  synchronized removed.", "url": "https://github.com/grpc/grpc-java/pull/7630#discussion_r525599051", "createdAt": "2020-11-17T23:43:06Z", "author": {"login": "jiangtaoli2016"}, "path": "alts/src/main/java/io/grpc/alts/internal/AltsHandshakerStub.java", "diffHunk": "@@ -72,6 +74,14 @@ public HandshakerResp send(HandshakerReq req) throws InterruptedException, IOExc\n     return result.get();\n   }\n \n+  /** Create a new writer if the writer is null. */\n+  private synchronized void createWriterIfNull() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ5NDQ0Mw=="}, "originalCommit": {"oid": "d20c4be2288a30cc18460a6b11c04c665d23c60e"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2300, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}