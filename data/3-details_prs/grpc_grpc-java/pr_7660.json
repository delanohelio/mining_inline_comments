{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MzE0MDc0", "number": 7660, "title": "xds: provide more debug info for priority lb error-picker", "bodyText": "When all priorities fail, update the overall picker with the picker from the last priority. This still does not provide the full detail why all priorities fail but is better than nothing being provided currently.", "createdAt": "2020-11-24T08:48:44Z", "url": "https://github.com/grpc/grpc-java/pull/7660", "merged": true, "mergeCommit": {"oid": "90e3dcf1aea17eecf472f341363304bee252a7c0"}, "closed": true, "closedAt": "2020-12-03T22:07:24Z", "author": {"login": "dapengzhang0"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfv-XqgBqjQwMzQ3MzIwNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdipM8DAFqTU0NDM5OTM2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2713e6de526725d52eef9ce38643f6d37285322", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/a2713e6de526725d52eef9ce38643f6d37285322", "committedDate": "2020-11-24T08:43:27Z", "message": "xds: provide more debug info for priority lb error-picker"}, "afterCommit": {"oid": "a9be986ad65bb10b8bbf137583c18cfe77b0e451", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/a9be986ad65bb10b8bbf137583c18cfe77b0e451", "committedDate": "2020-11-24T20:41:58Z", "message": "xds: provide more debug info for priority lb error-picker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/b6ac91cd336033f22272e118829eda91401a8281", "committedDate": "2020-11-30T17:21:06Z", "message": "xds: provide more debug info for priority lb error-picker"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9be986ad65bb10b8bbf137583c18cfe77b0e451", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/a9be986ad65bb10b8bbf137583c18cfe77b0e451", "committedDate": "2020-11-24T20:41:58Z", "message": "xds: provide more debug info for priority lb error-picker"}, "afterCommit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281", "author": {"user": {"login": "dapengzhang0", "name": "ZHANG Dapeng"}}, "url": "https://github.com/grpc/grpc-java/commit/b6ac91cd336033f22272e118829eda91401a8281", "committedDate": "2020-11-30T17:21:06Z", "message": "xds: provide more debug info for priority lb error-picker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNDIwOTM1", "url": "https://github.com/grpc/grpc-java/pull/7660#pullrequestreview-542420935", "createdAt": "2020-12-02T01:04:41Z", "commit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMTowNDo0MVrOH9GKdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMTowNDo0MVrOH9GKdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzgyNjE2NQ==", "bodyText": "I don't think using the last priority's error message is better than just saying cannot establish connection to any priority.", "url": "https://github.com/grpc/grpc-java/pull/7660#discussion_r533826165", "createdAt": "2020-12-02T01:04:41Z", "author": {"login": "voidzcy"}, "path": "xds/src/main/java/io/grpc/xds/PriorityLoadBalancer.java", "diffHunk": "@@ -153,7 +153,9 @@ private void tryNextPriority(boolean reportConnecting) {\n     }\n     // TODO(zdapeng): Include error details of each priority.\n     logger.log(XdsLogLevel.DEBUG, \"All priority failed\");\n-    updateOverallState(TRANSIENT_FAILURE, new ErrorPicker(Status.UNAVAILABLE));\n+    String lastPriority = priorityNames.get(priorityNames.size() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMjUyNzgx", "url": "https://github.com/grpc/grpc-java/pull/7660#pullrequestreview-543252781", "createdAt": "2020-12-02T21:30:20Z", "commit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMTozMDoyMFrOH9u7NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMTozMDoyMFrOH9u7NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDQ5NDAwNQ==", "bodyText": "We could delete this TODO. It's a bit undefined for how to aggregate multiple error statuses.", "url": "https://github.com/grpc/grpc-java/pull/7660#discussion_r534494005", "createdAt": "2020-12-02T21:30:20Z", "author": {"login": "voidzcy"}, "path": "xds/src/main/java/io/grpc/xds/PriorityLoadBalancer.java", "diffHunk": "@@ -153,7 +153,9 @@ private void tryNextPriority(boolean reportConnecting) {\n     }\n     // TODO(zdapeng): Include error details of each priority.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0Mzk5MzYx", "url": "https://github.com/grpc/grpc-java/pull/7660#pullrequestreview-544399361", "createdAt": "2020-12-03T20:30:54Z", "commit": {"oid": "b6ac91cd336033f22272e118829eda91401a8281"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4013, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}