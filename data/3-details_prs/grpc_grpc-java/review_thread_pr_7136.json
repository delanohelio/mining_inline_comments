{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDI3MjI3", "number": 7136, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo0MToxOVrOEGeFbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo1MToyNFrOEGeWqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE5ODIzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo0MToxOVrOGlSZlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo0MToxOVrOGlSZlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1MTk1OA==", "bodyText": "s/prevents/prevent/ ?", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441751958", "createdAt": "2020-06-17T18:41:19Z", "author": {"login": "dapengzhang0"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1278,6 +1279,19 @@ public int getDefaultPort() {\n         protected ClientTransportFactory buildTransportFactory() {\n           throw new UnsupportedOperationException();\n         }\n+\n+        @Override\n+        public ManagedChannel build() {\n+          // TODO(creamsoup) prevents main channel to shutdown if oob channel is not terminated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjIxMjk3OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/grpc/LoadBalancer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo0NTo0M1rOGlSjOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxOTowMzowMlrOGlTfhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1NDQyNQ==", "bodyText": "I think the last sentence is not needed as well. Basically it will use the balancer determined by the service config from the NameResolver or the default config.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441754425", "createdAt": "2020-06-17T18:45:43Z", "author": {"login": "dapengzhang0"}, "path": "api/src/main/java/io/grpc/LoadBalancer.java", "diffHunk": "@@ -1044,15 +1044,33 @@ public void updateOobChannelAddresses(ManagedChannel channel, EquivalentAddressG\n      * {@link ManagedChannelBuilder#forTarget} for the format of a target string.\n      *\n      * <p>The target string will be resolved by a {@link NameResolver} created according to the\n-     * target string.  The out-of-band channel doesn't have load-balancing.  If multiple addresses\n-     * are resolved for the target, the first working address will be used.\n+     * target string.  If multiple addresses are resolved for the target, the first working address\n+     * will be used.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc2OTg2MA==", "bodyText": "yes, removed.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441769860", "createdAt": "2020-06-17T19:03:02Z", "author": {"login": "creamsoup"}, "path": "api/src/main/java/io/grpc/LoadBalancer.java", "diffHunk": "@@ -1044,15 +1044,33 @@ public void updateOobChannelAddresses(ManagedChannel channel, EquivalentAddressG\n      * {@link ManagedChannelBuilder#forTarget} for the format of a target string.\n      *\n      * <p>The target string will be resolved by a {@link NameResolver} created according to the\n-     * target string.  The out-of-band channel doesn't have load-balancing.  If multiple addresses\n-     * are resolved for the target, the first working address will be used.\n+     * target string.  If multiple addresses are resolved for the target, the first working address\n+     * will be used.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1NDQyNQ=="}, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjI0MjM0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODo1MToyNFrOGlS3Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxOTowMjo0MFrOGlTevQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1OTUxNA==", "bodyText": "Do you still need this overriding? Same for below.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441759514", "createdAt": "2020-06-17T18:51:24Z", "author": {"login": "voidzcy"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1291,15 +1305,12 @@ protected ClientTransportFactory buildTransportFactory() {\n       builder.proxyDetector = nameResolverArgs.getProxyDetector();\n       builder.defaultPort = nameResolverArgs.getDefaultPort();\n       builder.userAgent = userAgent;\n-      return\n-          new ManagedChannelImpl(\n-              builder,\n-              transportFactory,\n-              backoffPolicyProvider,\n-              balancerRpcExecutorPool,\n-              stopwatchSupplier,\n-              Collections.<ClientInterceptor>emptyList(),\n-              timeProvider);\n+      return builder;\n+    }\n+\n+    @Override\n+    public ManagedChannel createResolvingOobChannel(String target) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc2NDYxNQ==", "bodyText": "For below we definitely need.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441764615", "createdAt": "2020-06-17T18:56:17Z", "author": {"login": "dapengzhang0"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1291,15 +1305,12 @@ protected ClientTransportFactory buildTransportFactory() {\n       builder.proxyDetector = nameResolverArgs.getProxyDetector();\n       builder.defaultPort = nameResolverArgs.getDefaultPort();\n       builder.userAgent = userAgent;\n-      return\n-          new ManagedChannelImpl(\n-              builder,\n-              transportFactory,\n-              backoffPolicyProvider,\n-              balancerRpcExecutorPool,\n-              stopwatchSupplier,\n-              Collections.<ClientInterceptor>emptyList(),\n-              timeProvider);\n+      return builder;\n+    }\n+\n+    @Override\n+    public ManagedChannel createResolvingOobChannel(String target) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1OTUxNA=="}, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc2OTY2MQ==", "bodyText": "done. for the Forwarding one, i didn't change because the method is not final.", "url": "https://github.com/grpc/grpc-java/pull/7136#discussion_r441769661", "createdAt": "2020-06-17T19:02:40Z", "author": {"login": "creamsoup"}, "path": "core/src/main/java/io/grpc/internal/ManagedChannelImpl.java", "diffHunk": "@@ -1291,15 +1305,12 @@ protected ClientTransportFactory buildTransportFactory() {\n       builder.proxyDetector = nameResolverArgs.getProxyDetector();\n       builder.defaultPort = nameResolverArgs.getDefaultPort();\n       builder.userAgent = userAgent;\n-      return\n-          new ManagedChannelImpl(\n-              builder,\n-              transportFactory,\n-              backoffPolicyProvider,\n-              balancerRpcExecutorPool,\n-              stopwatchSupplier,\n-              Collections.<ClientInterceptor>emptyList(),\n-              timeProvider);\n+      return builder;\n+    }\n+\n+    @Override\n+    public ManagedChannel createResolvingOobChannel(String target) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1OTUxNA=="}, "originalCommit": {"oid": "ebbb48ff2e076b43a5d5db47518fc492495488e2"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2547, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}