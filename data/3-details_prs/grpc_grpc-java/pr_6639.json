{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2OTY3MTQ5", "number": 6639, "title": "interop-testing: use server hostname instead of id for xds test", "bodyText": "Hostname is more informative for tests running on GCP, and unlike server ID, doesn't require the client to have knowledge about the server's command-line arguments", "createdAt": "2020-01-24T18:47:08Z", "url": "https://github.com/grpc/grpc-java/pull/6639", "merged": true, "mergeCommit": {"oid": "e5745a514f25bad726176885d80388ee163a6b87"}, "closed": true, "closedAt": "2020-01-24T22:03:50Z", "author": {"login": "ericgribkoff"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9jgorAH2gAyMzY2OTY3MTQ5OjA5NDJmZTYxMmQxZTVkN2U5NjM1NDM2YTQ0NjI2NzliYTkyNjVjMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9mALnAH2gAyMzY2OTY3MTQ5OjdjYjAyYjZkM2E1ZWJkYTkwYTYxYmU2MjA3YmI2MGRkOTUxMDhhOWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0942fe612d1e5d7e9635436a4462679ba9265c1c", "author": {"user": {"login": "ericgribkoff", "name": "Eric Gribkoff"}}, "url": "https://github.com/grpc/grpc-java/commit/0942fe612d1e5d7e9635436a4462679ba9265c1c", "committedDate": "2020-01-24T18:46:38Z", "message": "interop-testing: use server hostname instead of id for xds test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MTYwNzYw", "url": "https://github.com/grpc/grpc-java/pull/6639#pullrequestreview-348160760", "createdAt": "2020-01-24T19:03:01Z", "commit": {"oid": "0942fe612d1e5d7e9635436a4462679ba9265c1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxOTowMzowMVrOFhnZ7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxOTowMzowMVrOFhnZ7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc5Mjk0MQ==", "bodyText": "You might need use a generated random hostname as a fallback hostname in XdsTestServer.  As in e7d7c5b#diff-2140bcb433e6510183658de7492bfb57R58", "url": "https://github.com/grpc/grpc-java/pull/6639#discussion_r370792941", "createdAt": "2020-01-24T19:03:01Z", "author": {"login": "dapengzhang0"}, "path": "interop-testing/src/main/java/io/grpc/testing/integration/XdsTestClient.java", "diffHunk": "@@ -295,14 +295,14 @@ private XdsStatsWatcher(long startId, long endId) {\n       this.endId = endId;\n     }\n \n-    void rpcCompleted(long requestId, @Nullable String serverId) {\n+    void rpcCompleted(long requestId, @Nullable String hostname) {\n       synchronized (lock) {\n         if (startId <= requestId && requestId < endId) {\n-          if (serverId != null) {\n-            if (rpcsByPeer.containsKey(serverId)) {\n-              rpcsByPeer.put(serverId, rpcsByPeer.get(serverId) + 1);\n+          if (hostname != null) {\n+            if (rpcsByPeer.containsKey(hostname)) {\n+              rpcsByPeer.put(hostname, rpcsByPeer.get(hostname) + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0942fe612d1e5d7e9635436a4462679ba9265c1c"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6734ad6ea680f61be98ee80f4668b802b5b80847", "author": {"user": {"login": "ericgribkoff", "name": "Eric Gribkoff"}}, "url": "https://github.com/grpc/grpc-java/commit/6734ad6ea680f61be98ee80f4668b802b5b80847", "committedDate": "2020-01-24T21:29:49Z", "message": "throw if server cannot get host"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjM4MjYw", "url": "https://github.com/grpc/grpc-java/pull/6639#pullrequestreview-348238260", "createdAt": "2020-01-24T21:35:35Z", "commit": {"oid": "6734ad6ea680f61be98ee80f4668b802b5b80847"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTozNTozNlrOFhrEfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTozNTozNlrOFhrEfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1Mjk4OQ==", "bodyText": "host can be final now.  But not a big deal.", "url": "https://github.com/grpc/grpc-java/pull/6639#discussion_r370852989", "createdAt": "2020-01-24T21:35:36Z", "author": {"login": "dapengzhang0"}, "path": "interop-testing/src/main/java/io/grpc/testing/integration/XdsTestServer.java", "diffHunk": "@@ -130,7 +130,8 @@ private TestServiceImpl() {\n       try {\n         host = InetAddress.getLocalHost().getHostName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6734ad6ea680f61be98ee80f4668b802b5b80847"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cb02b6d3a5ebda90a61be6207bb60dd95108a9d", "author": {"user": {"login": "ericgribkoff", "name": "Eric Gribkoff"}}, "url": "https://github.com/grpc/grpc-java/commit/7cb02b6d3a5ebda90a61be6207bb60dd95108a9d", "committedDate": "2020-01-24T21:40:54Z", "message": "final host"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4672, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}