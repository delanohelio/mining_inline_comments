{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NTY0MDkw", "number": 2430, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODo1NzowNVrOEC378g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowMjo1N1rOEC4EkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDQ5MDc0OnYy", "diffSide": "RIGHT", "path": "resteasy-client-api/src/main/java/org/jboss/resteasy/client/jaxrs/ResteasyClientBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODo1NzowNVrOGfmLLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxMDowNlrOGjxchg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4NDQ5NQ==", "bodyText": "This should really be:\npublic abstract ResteasyClientBuilder automaticRetriesDisabled(boolean automaticRetriesDisabled);\nBasically, as this class is a builder, you should return the current instance. Moreover, a boolean parameter should be used so that the feature can be enabled and disabled.", "url": "https://github.com/resteasy/resteasy/pull/2430#discussion_r435784495", "createdAt": "2020-06-05T08:57:05Z", "author": {"login": "asoldano"}, "path": "resteasy-client-api/src/main/java/org/jboss/resteasy/client/jaxrs/ResteasyClientBuilder.java", "diffHunk": "@@ -223,6 +223,12 @@\n \r\n    public abstract long getConnectionTimeout(TimeUnit unit);\r\n \r\n+   /**\r\n+    * boolean, notify apache to disable its automatic retries.\r\n+    */\r\n+   public abstract void disableAutomaticRetries();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b5c1c216deec94010bd3d197f770339b42253f4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE2MzQ2Mg==", "bodyText": "Apache's HttpClientBuilder does not offer on/off value switching.\nIn Apache there is a default value for automaticRetriesDisabled\nand one can call its class, HttpClientBuilder.disableAutomaticRetries()\nbut there is no parameter for switching on/off. Resteasy should reflect that.\nI do not believe boolean parameter should be added to this method.", "url": "https://github.com/resteasy/resteasy/pull/2430#discussion_r440163462", "createdAt": "2020-06-15T13:10:06Z", "author": {"login": "rsearls"}, "path": "resteasy-client-api/src/main/java/org/jboss/resteasy/client/jaxrs/ResteasyClientBuilder.java", "diffHunk": "@@ -223,6 +223,12 @@\n \r\n    public abstract long getConnectionTimeout(TimeUnit unit);\r\n \r\n+   /**\r\n+    * boolean, notify apache to disable its automatic retries.\r\n+    */\r\n+   public abstract void disableAutomaticRetries();\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4NDQ5NQ=="}, "originalCommit": {"oid": "9b5c1c216deec94010bd3d197f770339b42253f4"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDQ5NzI4OnYy", "diffSide": "RIGHT", "path": "resteasy-client-api/src/main/java/org/jboss/resteasy/client/jaxrs/ResteasyClientBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODo1OTowMFrOGfmPjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwODo1OTowMFrOGfmPjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4NTYxMg==", "bodyText": "Should you name the method above the way I suggested (basically appending \"disabled\"), this would have to be changed accordingly.", "url": "https://github.com/resteasy/resteasy/pull/2430#discussion_r435785612", "createdAt": "2020-06-05T08:59:00Z", "author": {"login": "asoldano"}, "path": "resteasy-client-api/src/main/java/org/jboss/resteasy/client/jaxrs/ResteasyClientBuilder.java", "diffHunk": "@@ -223,6 +223,12 @@\n \r\n    public abstract long getConnectionTimeout(TimeUnit unit);\r\n \r\n+   /**\r\n+    * boolean, notify apache to disable its automatic retries.\r\n+    */\r\n+   public abstract void disableAutomaticRetries();\r\n+   public abstract boolean isDisableAutomaticRetries();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b5c1c216deec94010bd3d197f770339b42253f4"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNDUxMjgxOnYy", "diffSide": "RIGHT", "path": "testsuite/integration-tests/src/test/java/org/jboss/resteasy/test/client/other/DisableAutomaticRetriesTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTowMjo1N1rOGfmYwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDozMzoyNFrOGkeU4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4Nzk3MA==", "bodyText": "This looks like a unit test more than an integration test. If that's what you really meant to do, please move this to the resteasy-client module test directory. If a real integration test is not too hard to write, it should live here, instead.", "url": "https://github.com/resteasy/resteasy/pull/2430#discussion_r435787970", "createdAt": "2020-06-05T09:02:57Z", "author": {"login": "asoldano"}, "path": "testsuite/integration-tests/src/test/java/org/jboss/resteasy/test/client/other/DisableAutomaticRetriesTest.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package org.jboss.resteasy.test.client.other;\n+\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;\n+import org.jboss.resteasy.utils.TestUtil;\n+import org.jboss.shrinkwrap.api.Archive;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import javax.ws.rs.GET;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.client.Client;\n+import javax.ws.rs.client.ClientBuilder;\n+\n+/**\n+ * Notify apache to disable its automatic retries.\n+ * @tpSince RESTEasy 4.6.0\n+ */\n+\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+public class DisableAutomaticRetriesTest {\n+\n+    @Path(\"/test\")\n+    public static class  SimpleResource {\n+        @GET\n+        public String Hello() {\n+            return \"Hello\";\n+        }\n+    }\n+\n+    @Deployment\n+    public static Archive<?> deploy() {\n+        WebArchive war = TestUtil.prepareArchive(\n+                DisableAutomaticRetriesTest.class.getSimpleName());\n+        return TestUtil.finishContainerPrepare(war, null, SimpleResource.class);\n+    }\n+\n+    @Test\n+    public void testFlag() throws Exception {\n+        ResteasyClientBuilder builder = (ResteasyClientBuilder) ClientBuilder.newBuilder();\n+        Assert.assertFalse(builder.isDisableAutomaticRetries());\n+        builder.disableAutomaticRetries();\n+        Client client = builder.build();\n+        Assert.assertTrue(builder.isDisableAutomaticRetries());\n+        client.close();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b5c1c216deec94010bd3d197f770339b42253f4"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg5ODc4Nw==", "bodyText": "done", "url": "https://github.com/resteasy/resteasy/pull/2430#discussion_r440898787", "createdAt": "2020-06-16T14:33:24Z", "author": {"login": "rsearls"}, "path": "testsuite/integration-tests/src/test/java/org/jboss/resteasy/test/client/other/DisableAutomaticRetriesTest.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package org.jboss.resteasy.test.client.other;\n+\n+import org.jboss.arquillian.container.test.api.Deployment;\n+import org.jboss.arquillian.container.test.api.RunAsClient;\n+import org.jboss.arquillian.junit.Arquillian;\n+import org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;\n+import org.jboss.resteasy.utils.TestUtil;\n+import org.jboss.shrinkwrap.api.Archive;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import javax.ws.rs.GET;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.client.Client;\n+import javax.ws.rs.client.ClientBuilder;\n+\n+/**\n+ * Notify apache to disable its automatic retries.\n+ * @tpSince RESTEasy 4.6.0\n+ */\n+\n+@RunWith(Arquillian.class)\n+@RunAsClient\n+public class DisableAutomaticRetriesTest {\n+\n+    @Path(\"/test\")\n+    public static class  SimpleResource {\n+        @GET\n+        public String Hello() {\n+            return \"Hello\";\n+        }\n+    }\n+\n+    @Deployment\n+    public static Archive<?> deploy() {\n+        WebArchive war = TestUtil.prepareArchive(\n+                DisableAutomaticRetriesTest.class.getSimpleName());\n+        return TestUtil.finishContainerPrepare(war, null, SimpleResource.class);\n+    }\n+\n+    @Test\n+    public void testFlag() throws Exception {\n+        ResteasyClientBuilder builder = (ResteasyClientBuilder) ClientBuilder.newBuilder();\n+        Assert.assertFalse(builder.isDisableAutomaticRetries());\n+        builder.disableAutomaticRetries();\n+        Client client = builder.build();\n+        Assert.assertTrue(builder.isDisableAutomaticRetries());\n+        client.close();\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc4Nzk3MA=="}, "originalCommit": {"oid": "9b5c1c216deec94010bd3d197f770339b42253f4"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4898, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}