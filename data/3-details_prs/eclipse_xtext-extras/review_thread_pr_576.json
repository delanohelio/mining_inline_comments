{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MzIxMTUz", "number": 576, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozMzoyMFrODnGfPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozNjozMVrODnGk-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMzI3MzU3OnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.builder.standalone.tests/src/org/eclipse/xtext/builder/tests/MyGenerator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozMzoyMFrOF05o_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozMzoyMFrOF05o_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNDY1NQ==", "bodyText": "Unneeded finals", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391014655", "createdAt": "2020-03-11T14:33:20Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.builder.standalone.tests/src/org/eclipse/xtext/builder/tests/MyGenerator.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/**\n+ * Copyright (c) 2009, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ * \n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.builder.tests;\n+\n+import org.eclipse.emf.ecore.resource.Resource;\n+import org.eclipse.xtext.builder.tests.builderTestLanguage.Element;\n+import org.eclipse.xtext.generator.IFileSystemAccess;\n+import org.eclipse.xtext.generator.IFileSystemAccess2;\n+import org.eclipse.xtext.generator.IGenerator;\n+import org.eclipse.xtext.xbase.lib.IteratorExtensions;\n+\n+import com.google.common.collect.Iterables;\n+\n+public class MyGenerator implements IGenerator {\n+\t@Override\n+\tpublic void doGenerate(final Resource input, final IFileSystemAccess fsa) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMzI3OTUyOnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.builder.standalone.tests/src/org/eclipse/xtext/builder/tests/MyGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozNDozOFrOF05swA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODoxOToxM1rOF1DTlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNTYxNg==", "bodyText": "Don't we prefer Streams.stream(...).filter(...)?", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391015616", "createdAt": "2020-03-11T14:34:38Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.builder.standalone.tests/src/org/eclipse/xtext/builder/tests/MyGenerator.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/**\n+ * Copyright (c) 2009, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ * \n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.builder.tests;\n+\n+import org.eclipse.emf.ecore.resource.Resource;\n+import org.eclipse.xtext.builder.tests.builderTestLanguage.Element;\n+import org.eclipse.xtext.generator.IFileSystemAccess;\n+import org.eclipse.xtext.generator.IFileSystemAccess2;\n+import org.eclipse.xtext.generator.IGenerator;\n+import org.eclipse.xtext.xbase.lib.IteratorExtensions;\n+\n+import com.google.common.collect.Iterables;\n+\n+public class MyGenerator implements IGenerator {\n+\t@Override\n+\tpublic void doGenerate(final Resource input, final IFileSystemAccess fsa) {\n+\t\tfor (final Element ele : Iterables.filter(IteratorExtensions.toIterable(input.getAllContents()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE3MzAxNA==", "bodyText": "have no idea what we prefer", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391173014", "createdAt": "2020-03-11T18:19:13Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.builder.standalone.tests/src/org/eclipse/xtext/builder/tests/MyGenerator.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/**\n+ * Copyright (c) 2009, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ * \n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.builder.tests;\n+\n+import org.eclipse.emf.ecore.resource.Resource;\n+import org.eclipse.xtext.builder.tests.builderTestLanguage.Element;\n+import org.eclipse.xtext.generator.IFileSystemAccess;\n+import org.eclipse.xtext.generator.IFileSystemAccess2;\n+import org.eclipse.xtext.generator.IGenerator;\n+import org.eclipse.xtext.xbase.lib.IteratorExtensions;\n+\n+import com.google.common.collect.Iterables;\n+\n+public class MyGenerator implements IGenerator {\n+\t@Override\n+\tpublic void doGenerate(final Resource input, final IFileSystemAccess fsa) {\n+\t\tfor (final Element ele : Iterables.filter(IteratorExtensions.toIterable(input.getAllContents()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNTYxNg=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMzI4NDgzOnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozNTo0NlrOF05wGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNDoyMToxMlrOF1grMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjQ3NA==", "bodyText": "We don't like sneakies", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391016474", "createdAt": "2020-03-11T14:35:46Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn super.findResource(path);\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE3NTI4OQ==", "bodyText": "i want to keep it here as i dont want to break. see above", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391175289", "createdAt": "2020-03-11T18:23:08Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn super.findResource(path);\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjQ3NA=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE3NjIzMQ==", "bodyText": "what is your alternative in this case.\nswallow the exception and do nothing?", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391176231", "createdAt": "2020-03-11T18:24:40Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn super.findResource(path);\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjQ3NA=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMzNzc5MQ==", "bodyText": "Either return null (and log) or rethrow the error.", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391337791", "createdAt": "2020-03-12T00:07:26Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn super.findResource(path);\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjQ3NA=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQwODk3Mg==", "bodyText": "Retro\u2019s is what sneaky does. The api of classloaddr is bs. I don\u2019t want to do some fancy different exception handler right now", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391408972", "createdAt": "2020-03-12T05:31:48Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn super.findResource(path);\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjQ3NA=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY1NDE5Mg==", "bodyText": "Okay", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391654192", "createdAt": "2020-03-12T14:21:12Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\treturn super.findResource(path);\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjQ3NA=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMzI4NjM5OnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozNjowNFrOF05xHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNDoyMToyNVrOF1gr5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjczMg==", "bodyText": "Sneaky", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391016732", "createdAt": "2020-03-11T14:36:04Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE3MzI3OA==", "bodyText": "is lefft there by intention as it was there before", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391173278", "createdAt": "2020-03-11T18:19:40Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjczMg=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTMzNzUzMQ==", "bodyText": "It was there in the Java code you mean? I don't see it in the xtend code", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391337531", "createdAt": "2020-03-12T00:06:28Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjczMg=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQwODcwNg==", "bodyText": "Well this code is as tend generated it before", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391408706", "createdAt": "2020-03-12T05:30:42Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjczMg=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY1NDM3Mw==", "bodyText": "Okay", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391654373", "createdAt": "2020-03-12T14:21:25Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNjczMg=="}, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMzI4ODI1OnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozNjozMVrOF05ySA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDozNjozMVrOF05ySA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAxNzAzMg==", "bodyText": "You can extract this code, it's being used in the method above as well", "url": "https://github.com/eclipse/xtext-extras/pull/576#discussion_r391017032", "createdAt": "2020-03-11T14:36:31Z", "author": {"login": "tivervac"}, "path": "org.eclipse.xtext.java/src/org/eclipse/xtext/java/resource/InMemoryClassLoader.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2018, 2020 itemis AG (http://www.itemis.eu) and others.\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.xtext.java.resource;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.net.URLStreamHandler;\n+import java.util.Map;\n+import org.eclipse.xtext.xbase.lib.Exceptions;\n+\n+public class InMemoryClassLoader extends ClassLoader {\n+\tprivate Map<String, byte[]> classMap;\n+\n+\tpublic InMemoryClassLoader(Map<String, byte[]> classMap, ClassLoader parent) {\n+\t\tsuper(parent);\n+\t\tthis.classMap = classMap;\n+\t}\n+\n+\t@Override\n+\tprotected Class<?> findClass(String name) throws ClassNotFoundException {\n+\t\tbyte[] bytes = classMap.get(name);\n+\t\tif (bytes == null) {\n+\t\t\treturn super.findClass(name);\n+\t\t} else {\n+\t\t\treturn defineClass(name, bytes, 0, bytes.length);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic URL getResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {\n+\t\t\t\t\t\t@Override\n+\t\t\t\t\t\tprotected URLConnection openConnection(URL it) throws IOException {\n+\t\t\t\t\t\t\treturn new URLConnection(it) {\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic void connect() {\n+\t\t\t\t\t\t\t\t}\n+\n+\t\t\t\t\t\t\t\t@Override\n+\t\t\t\t\t\t\t\tpublic InputStream getInputStream() {\n+\t\t\t\t\t\t\t\t\treturn new ByteArrayInputStream(bytes);\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t};\n+\t\t\t\t\t\t}\n+\t\t\t\t\t});\n+\t\t\t\t}\n+\t\t\t\treturn super.getResource(path);\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t} catch (MalformedURLException e) {\n+\t\t\tthrow Exceptions.sneakyThrow(e);\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tprotected URL findResource(String path) {\n+\t\ttry {\n+\t\t\tif (path.endsWith(\".class\")) {\n+\t\t\t\tString className = pathToClassName(path);\n+\t\t\t\tbyte[] bytes = classMap.get(className);\n+\t\t\t\tif (bytes != null) {\n+\t\t\t\t\treturn new URL(\"in-memory\", null, -1, path, new URLStreamHandler() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec0d114c1b05d94a3dc18564221631ef472a8e1c"}, "originalPosition": 77}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 690, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}