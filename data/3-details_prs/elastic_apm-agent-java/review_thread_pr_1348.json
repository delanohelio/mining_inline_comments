{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTc3NTMx", "number": 1348, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxNjo0NlrOEaE6Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjoyOToyM1rOEaVqXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1Nzc4ODM4OnYy", "diffSide": "RIGHT", "path": "docs/setup-ssl.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxNjo0NlrOHDRpsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxNjo0NlrOHDRpsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5Njk3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n          \n          \n            \n            If the certificate used by the APM Server is self-signed, you need to add the same certificate", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473196976", "createdAt": "2020-08-19T17:16:46Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1Nzc5MTA4OnYy", "diffSide": "RIGHT", "path": "docs/setup-ssl.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxNzozOFrOHDRreQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxNzozOFrOHDRreQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5NzQzMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Following is an example of using `keytool` to import a certificate into the truststore:\n          \n          \n            \n            The following is an example of using `keytool` to import a certificate into the truststore:", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473197433", "createdAt": "2020-08-19T17:17:38Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n+to the JVM's truststore. You can find which truststore is used by setting `-Djavax.net.debug=all`\n+in the command line. Typically, it would be `$JAVA_HOME/jre/lib/security/cacerts`.\n+Following is an example of using `keytool` to import a certificate into the truststore:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NzgwMDYwOnYy", "diffSide": "RIGHT", "path": "docs/setup-ssl.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxOTo0N1rOHDRxfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxOTo0N1rOHDRxfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5ODk3Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ----\n          \n          \n            \n            [source,ini]\n          \n          \n            \n            ----", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473198972", "createdAt": "2020-08-19T17:19:47Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n+to the JVM's truststore. You can find which truststore is used by setting `-Djavax.net.debug=all`\n+in the command line. Typically, it would be `$JAVA_HOME/jre/lib/security/cacerts`.\n+Following is an example of using `keytool` to import a certificate into the truststore:\n+`keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore`\n+\n+[float]\n+[[ssl-client-authentication]]\n+=== Agent certificate authentication\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-client-authentication[SSL client authentication]\n+is enabled on the APM server, the agent will be required to send a proper certificate as part of the\n+HTTPS handshake. There is currently no configuration on the Java agent that supports that and\n+no one straightforward option to do that that is suitable for all cases.\n+Generally speaking, the agent will send a certificate from the JVM keystore. So, if your JVM does not\n+use a keystore already, add the certificate file and the corresponding private key into a keystore and\n+configure your JVM to use it:\n+\n+----", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NzgwNDAzOnYy", "diffSide": "RIGHT", "path": "docs/setup-ssl.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoyMDo0MlrOHDRzrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoyMDo0MlrOHDRzrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5OTUzNQ==", "bodyText": "This is a long command. It probably makes more sense to format this in a code block so that it doesn't get split onto multiple lines\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore`\n          \n          \n            \n            [source,bash]\n          \n          \n            \n            ----\n          \n          \n            \n            keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore\n          \n          \n            \n            ----", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473199535", "createdAt": "2020-08-19T17:20:42Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n+to the JVM's truststore. You can find which truststore is used by setting `-Djavax.net.debug=all`\n+in the command line. Typically, it would be `$JAVA_HOME/jre/lib/security/cacerts`.\n+Following is an example of using `keytool` to import a certificate into the truststore:\n+`keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NzgwNjkzOnYy", "diffSide": "RIGHT", "path": "docs/troubleshooting.asciidoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoyMToyOVrOHDR1hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoyMToyOVrOHDR1hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzIwMDAwNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ==== Communication with APM Server ====\n          \n          \n            \n            ==== Communication with APM Server", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473200007", "createdAt": "2020-08-19T17:21:29Z", "author": {"login": "bmorelli25"}, "path": "docs/troubleshooting.asciidoc", "diffHunk": "@@ -211,6 +211,21 @@ at the incorrect jar file.\n The correct jar file to be pointing at should be in the form of `elastic-apm-agent-<version>.jar` and\n further information about how to download this file can be found <<setup-javaagent, in the manual setup instructions.>>\n \n+[float]\n+[[trouble-shooting-communication]]\n+==== Communication with APM Server ====", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDUzMzQyOnYy", "diffSide": "RIGHT", "path": "docs/troubleshooting.asciidoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjoyOToyNFrOHDtGNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjo0NTozMFrOHDt0CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY0NjY0Nw==", "bodyText": "It currently fails on this one. How does it work on internal links? Does it depend on order of the pages being built? How do we deal with that?", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473646647", "createdAt": "2020-08-20T06:29:24Z", "author": {"login": "eyalkoren"}, "path": "docs/troubleshooting.asciidoc", "diffHunk": "@@ -211,6 +211,21 @@ at the incorrect jar file.\n The correct jar file to be pointing at should be in the form of `elastic-apm-agent-<version>.jar` and\n further information about how to download this file can be found <<setup-javaagent, in the manual setup instructions.>>\n \n+[float]\n+[[trouble-shooting-communication]]\n+==== Communication with APM Server ====\n+\n+`unable to find valid certification path to requested target` - server authentication fails. Check out\n+<<ssl-server-authentication>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "845979ec6715884864b6bd8f5ae6d7ff07e71a45"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY1ODM3Nw==", "bodyText": "OK, @felixbarny answered - the page needs to be included (directly or indirectly) from the index.asciidoc", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473658377", "createdAt": "2020-08-20T06:45:30Z", "author": {"login": "eyalkoren"}, "path": "docs/troubleshooting.asciidoc", "diffHunk": "@@ -211,6 +211,21 @@ at the incorrect jar file.\n The correct jar file to be pointing at should be in the form of `elastic-apm-agent-<version>.jar` and\n further information about how to download this file can be found <<setup-javaagent, in the manual setup instructions.>>\n \n+[float]\n+[[trouble-shooting-communication]]\n+==== Communication with APM Server ====\n+\n+`unable to find valid certification path to requested target` - server authentication fails. Check out\n+<<ssl-server-authentication>>.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY0NjY0Nw=="}, "originalCommit": {"oid": "845979ec6715884864b6bd8f5ae6d7ff07e71a45"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 209, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}