{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTc3NTMx", "number": 1348, "title": "[Docs] Enhancing SSL-related documentation", "bodyText": "In combination with elastic/apm-server#4086", "createdAt": "2020-08-19T13:48:42Z", "url": "https://github.com/elastic/apm-agent-java/pull/1348", "merged": true, "mergeCommit": {"oid": "919eb307b1eab9a0d7b8e7fe6c780cb6b24f43f2"}, "closed": true, "closedAt": "2020-08-23T06:39:49Z", "author": {"login": "eyalkoren"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAbo35gH2gAyNDcwMTc3NTMxOmQ0NGE1NjZiOGU2ZWU5OTNkZjUyZWIwNjQxZGQ2NGI0MjNlNGZjOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBndVhAH2gAyNDcwMTc3NTMxOjQzNTYwYjllZWE0Y2Q2OTZiZTEwZWQzMDkwM2FjZmY5Y2JjZmYyYzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/d44a566b8e6ee993df52eb0641dd64b423e4fc9b", "committedDate": "2020-08-19T13:29:19Z", "message": "[Docs] Enhancing SSL-related documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNjgwMDc2", "url": "https://github.com/elastic/apm-agent-java/pull/1348#pullrequestreview-470680076", "createdAt": "2020-08-19T17:16:46Z", "commit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoxNjo0NlrOHDRpsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNzoyMToyOVrOHDR1hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5Njk3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n          \n          \n            \n            If the certificate used by the APM Server is self-signed, you need to add the same certificate", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473196976", "createdAt": "2020-08-19T17:16:46Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5NzQzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Following is an example of using `keytool` to import a certificate into the truststore:\n          \n          \n            \n            The following is an example of using `keytool` to import a certificate into the truststore:", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473197433", "createdAt": "2020-08-19T17:17:38Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n+to the JVM's truststore. You can find which truststore is used by setting `-Djavax.net.debug=all`\n+in the command line. Typically, it would be `$JAVA_HOME/jre/lib/security/cacerts`.\n+Following is an example of using `keytool` to import a certificate into the truststore:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5ODk3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ----\n          \n          \n            \n            [source,ini]\n          \n          \n            \n            ----", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473198972", "createdAt": "2020-08-19T17:19:47Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n+to the JVM's truststore. You can find which truststore is used by setting `-Djavax.net.debug=all`\n+in the command line. Typically, it would be `$JAVA_HOME/jre/lib/security/cacerts`.\n+Following is an example of using `keytool` to import a certificate into the truststore:\n+`keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore`\n+\n+[float]\n+[[ssl-client-authentication]]\n+=== Agent certificate authentication\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-client-authentication[SSL client authentication]\n+is enabled on the APM server, the agent will be required to send a proper certificate as part of the\n+HTTPS handshake. There is currently no configuration on the Java agent that supports that and\n+no one straightforward option to do that that is suitable for all cases.\n+Generally speaking, the agent will send a certificate from the JVM keystore. So, if your JVM does not\n+use a keystore already, add the certificate file and the corresponding private key into a keystore and\n+configure your JVM to use it:\n+\n+----", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5OTUzNQ==", "bodyText": "This is a long command. It probably makes more sense to format this in a code block so that it doesn't get split onto multiple lines\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore`\n          \n          \n            \n            [source,bash]\n          \n          \n            \n            ----\n          \n          \n            \n            keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore\n          \n          \n            \n            ----", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473199535", "createdAt": "2020-08-19T17:20:42Z", "author": {"login": "bmorelli25"}, "path": "docs/setup-ssl.asciidoc", "diffHunk": "@@ -0,0 +1,37 @@\n+[[ssl-configuration]]\n+== SSL/TLS communication with APM Server\n+\n+If {apm-server-ref-v}/secure-communication-agents.html#ssl-setup[SSL/TLS communication] is enabled on\n+the APM Server, use the `https` protocol when configuring <<config-server-urls,`server_urls`>>.\n+\n+[float]\n+[[ssl-server-authentication]]\n+=== APM Server certificate authentication\n+\n+By default, when using HTTPS to communicate with APM Server, the agents will verify the identity\n+of the APM Server by authenticating its certificate. It is not recommended to change this default,\n+however it is possible through the <<config-verify-server-cert>> configuration.\n+\n+If the certificate used by the APM Server is self-signed, you would need to add the same certificate\n+to the JVM's truststore. You can find which truststore is used by setting `-Djavax.net.debug=all`\n+in the command line. Typically, it would be `$JAVA_HOME/jre/lib/security/cacerts`.\n+Following is an example of using `keytool` to import a certificate into the truststore:\n+`keytool -import -alias apm-server-cert -file /path/to/certificate.crt -keystore /path/to/truststore`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzIwMDAwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ==== Communication with APM Server ====\n          \n          \n            \n            ==== Communication with APM Server", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473200007", "createdAt": "2020-08-19T17:21:29Z", "author": {"login": "bmorelli25"}, "path": "docs/troubleshooting.asciidoc", "diffHunk": "@@ -211,6 +211,21 @@ at the incorrect jar file.\n The correct jar file to be pointing at should be in the form of `elastic-apm-agent-<version>.jar` and\n further information about how to download this file can be found <<setup-javaagent, in the manual setup instructions.>>\n \n+[float]\n+[[trouble-shooting-communication]]\n+==== Communication with APM Server ====", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d44a566b8e6ee993df52eb0641dd64b423e4fc9b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "845979ec6715884864b6bd8f5ae6d7ff07e71a45", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/845979ec6715884864b6bd8f5ae6d7ff07e71a45", "committedDate": "2020-08-20T05:45:31Z", "message": "Removing anchor references from server links"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49ab4d18ac0b84f4136724dde8c2ea138e53b078", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/49ab4d18ac0b84f4136724dde8c2ea138e53b078", "committedDate": "2020-08-20T05:31:09Z", "message": "Update docs/troubleshooting.asciidoc\n\nCo-authored-by: Brandon Morelli <bmorelli25@gmail.com>"}, "afterCommit": {"oid": "845979ec6715884864b6bd8f5ae6d7ff07e71a45", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/845979ec6715884864b6bd8f5ae6d7ff07e71a45", "committedDate": "2020-08-20T05:45:31Z", "message": "Removing anchor references from server links"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjgxNjE0", "url": "https://github.com/elastic/apm-agent-java/pull/1348#pullrequestreview-471281614", "createdAt": "2020-08-20T06:29:23Z", "commit": {"oid": "845979ec6715884864b6bd8f5ae6d7ff07e71a45"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjoyOToyNFrOHDtGNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjoyOToyNFrOHDtGNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY0NjY0Nw==", "bodyText": "It currently fails on this one. How does it work on internal links? Does it depend on order of the pages being built? How do we deal with that?", "url": "https://github.com/elastic/apm-agent-java/pull/1348#discussion_r473646647", "createdAt": "2020-08-20T06:29:24Z", "author": {"login": "eyalkoren"}, "path": "docs/troubleshooting.asciidoc", "diffHunk": "@@ -211,6 +211,21 @@ at the incorrect jar file.\n The correct jar file to be pointing at should be in the form of `elastic-apm-agent-<version>.jar` and\n further information about how to download this file can be found <<setup-javaagent, in the manual setup instructions.>>\n \n+[float]\n+[[trouble-shooting-communication]]\n+==== Communication with APM Server ====\n+\n+`unable to find valid certification path to requested target` - server authentication fails. Check out\n+<<ssl-server-authentication>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "845979ec6715884864b6bd8f5ae6d7ff07e71a45"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78bce0a6f8e78d69055cdfb485cbba6f20fa1408", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/78bce0a6f8e78d69055cdfb485cbba6f20fa1408", "committedDate": "2020-08-20T06:48:39Z", "message": "Including new SSL asciidoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33f415e97b223ffa3562b1caf2d84ce30f299957", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/33f415e97b223ffa3562b1caf2d84ce30f299957", "committedDate": "2020-08-20T08:11:04Z", "message": "change duplicated ID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4c0455e35b7213e6ee10dc21c7a83ea2a85fa39", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/c4c0455e35b7213e6ee10dc21c7a83ea2a85fa39", "committedDate": "2020-08-20T08:30:14Z", "message": "Moving SSL docs under agent setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f3320003cb67f4dcc0a137730feea02754f4df6", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/9f3320003cb67f4dcc0a137730feea02754f4df6", "committedDate": "2020-08-20T08:32:37Z", "message": "Small fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03a49397ef64153aa34d58bb2b5e06b0538f232d", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/03a49397ef64153aa34d58bb2b5e06b0538f232d", "committedDate": "2020-08-20T11:02:55Z", "message": "Fix nesting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebb9d90e66af7a6319d81b6c6b2997b737ad7f2b", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/ebb9d90e66af7a6319d81b6c6b2997b737ad7f2b", "committedDate": "2020-08-20T11:27:47Z", "message": "A small clarification"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTg5MDE2", "url": "https://github.com/elastic/apm-agent-java/pull/1348#pullrequestreview-471589016", "createdAt": "2020-08-20T13:11:43Z", "commit": {"oid": "ebb9d90e66af7a6319d81b6c6b2997b737ad7f2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDE0NTY0", "url": "https://github.com/elastic/apm-agent-java/pull/1348#pullrequestreview-472014564", "createdAt": "2020-08-20T21:58:46Z", "commit": {"oid": "ebb9d90e66af7a6319d81b6c6b2997b737ad7f2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43560b9eea4cd696be10ed30903acff9cbcff2c7", "author": {"user": {"login": "eyalkoren", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/43560b9eea4cd696be10ed30903acff9cbcff2c7", "committedDate": "2020-08-23T05:49:30Z", "message": "Merge remote-tracking branch 'upstream/master' into ssl-documentation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3853, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}