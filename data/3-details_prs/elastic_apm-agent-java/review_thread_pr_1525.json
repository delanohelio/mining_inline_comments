{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0ODMyNTAz", "number": 1525, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxODo1NjoyM1rOE7rKrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxODo1NjoyM1rOE7rKrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMDA4Njg0OnYy", "diffSide": "RIGHT", "path": ".ci/load/Jenkinsfile", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxODo1NjoyM1rOH3dBPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxODo1NjoyM1rOH3dBPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkwOTE4MQ==", "bodyText": "[minor style] maybe would be slightly easier to read with a variable to hold the target binary as the only difference is\n./target/petclinic.war\n./target/spring-petclinic-*.jar", "url": "https://github.com/elastic/apm-agent-java/pull/1525#discussion_r527909181", "createdAt": "2020-11-20T18:56:23Z", "author": {"login": "SylvainJuge"}, "path": ".ci/load/Jenkinsfile", "diffHunk": "@@ -163,7 +163,15 @@ pipeline {\n                                         // Start with packaging things up\n                                         sh(script: \"./mvnw package\")\n                                         echo \"start application with JVM options '${params.jvm_options}'\"\n-                                        sh(script: \"java -jar -javaagent:${WORKSPACE}/${AGENT_BASE_DIR}/apm-agent-java/elastic-apm-agent/target/elastic-apm-agent-${params.apm_version}.jar -Delastic.apm.server_urls=${env.APM_SERVER_URL} -Delastic.apm.secret_token=${env.ELASTIC_APM_API_KEY} ${params.jvm_options} -XX:+FlightRecorder -XX:StartFlightRecording=filename=flight.jfr ./target/spring-petclinic-*.jar &\")\n+                                        script {\n+                                            def ver = sh(script: \".ci/load/scripts/java_major.sh ${params.jvm_version}\", returnStdout: true).trim()\n+                                            if(ver == '7'){\n+                                                echo \"Detected 7.x Java version. Switching to 7.x compat mode and calling .war\"\n+                                                sh(script: \"java -jar -javaagent:${WORKSPACE}/${AGENT_BASE_DIR}/apm-agent-java/elastic-apm-agent/target/elastic-apm-agent-${params.apm_version}.jar -Delastic.apm.server_urls=${env.APM_SERVER_URL} -Delastic.apm.secret_token=${env.ELASTIC_APM_API_KEY} ${params.jvm_options} -XX:+FlightRecorder -XX:StartFlightRecording=filename=flight.jfr ./target/petclinic.war &\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27975321d8ef199cbe556cf4a977bd474ee0f8fd"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4981, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}