{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MTA0MjUw", "number": 1320, "title": "Fix log4j2 indy plugin context issues", "bodyText": "By calling classLoader.getParent() log4j tries to determine the logging context of a class loader\nThe IndyPluginClassLoader, having a MultipleParentClassLoader as it's parent, always returned null,\nmaking it impossible to reuse context from the agent classloader", "createdAt": "2020-07-30T11:47:15Z", "url": "https://github.com/elastic/apm-agent-java/pull/1320", "merged": true, "mergeCommit": {"oid": "e8505a25339e861926d0eabbea4291fef8917967"}, "closed": true, "closedAt": "2020-07-30T13:26:21Z", "author": {"login": "felixbarny"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5-Kr0gH2gAyNDU5MTA0MjUwOjA5NzY3NmU4ZTAxNjVhNDcxODkzMzk2NGU4MDY5N2JkZjk3MDVkMmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5_jkTAFqTQ1ODM5MTczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "097676e8e0165a4718933964e80697bdf9705d2b", "author": {"user": {"login": "felixbarny", "name": "Felix Barnsteiner"}}, "url": "https://github.com/elastic/apm-agent-java/commit/097676e8e0165a4718933964e80697bdf9705d2b", "committedDate": "2020-07-30T11:45:33Z", "message": "Fix log4j2 indy plugin context issues\n\nBy calling classLoader.getParent() log4j tries to determine the logging context of a class loader\nThe IndyPluginClassLoader, having a MultipleParentClassLoader as it's parent, always retured null,\nmaking it impossible to reuse context from the agent classloader"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MzkxNzMy", "url": "https://github.com/elastic/apm-agent-java/pull/1320#pullrequestreview-458391732", "createdAt": "2020-07-30T13:19:20Z", "commit": {"oid": "097676e8e0165a4718933964e80697bdf9705d2b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMzoxOToyMFrOG5ipWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMzoxOToyMFrOG5ipWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk4OTY1OA==", "bodyText": "The javadoc for this constructor says about the single-parent argument: \"This explicit parent should only be set if the current platform does not allow creating a class loader that extends the bootstrap loader\". Do you know why?", "url": "https://github.com/elastic/apm-agent-java/pull/1320#discussion_r462989658", "createdAt": "2020-07-30T13:19:20Z", "author": {"login": "eyalkoren"}, "path": "apm-agent-core/src/main/java/co/elastic/apm/agent/bci/classloading/IndyPluginClassLoader.java", "diffHunk": "@@ -40,7 +40,7 @@\n  */\n public class IndyPluginClassLoader extends ByteArrayClassLoader.ChildFirst {\n     public IndyPluginClassLoader(@Nullable ClassLoader targetClassLoader, ClassLoader agentClassLoader, Map<String, byte[]> typeDefinitions) {\n-        super(new MultipleParentClassLoader(Arrays.asList(agentClassLoader, targetClassLoader)), true, typeDefinitions, PersistenceHandler.MANIFEST);\n+        super(new MultipleParentClassLoader(agentClassLoader, Arrays.asList(agentClassLoader, targetClassLoader)), true, typeDefinitions, PersistenceHandler.MANIFEST);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "097676e8e0165a4718933964e80697bdf9705d2b"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3830, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}