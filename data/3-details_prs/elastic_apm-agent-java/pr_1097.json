{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNzExMzg5", "number": 1097, "title": "Hanlde corner cases for empty or null service name", "bodyText": "What does this PR do?\nThis PR tests and improve heuristics to get service name from JVM system properties.\nCurrent implementation might allow to have empty values and did not handled properly values with spaces.\nChecklist\n\n My code follows the style guidelines of this project\n I have rebased my changes on top of the latest master branch\nI have made corresponding changes to the documentation\n I have added tests that prove my fix is effective or that my feature works\n New and existing unit tests pass locally with my changes\n I have updated CHANGELOG.asciidoc\nI have updated supported-technologies.asciidoc\nAdded an API method or config option? Document in which version this will be introduced\nAdded an instrumentation plugin? How did you make sure that old, non-supported versions are not instrumented by accident?\n\nAuthor's Checklist\n\n manual testing with Weblogic server", "createdAt": "2020-03-25T17:03:06Z", "url": "https://github.com/elastic/apm-agent-java/pull/1097", "merged": true, "mergeCommit": {"oid": "4319f9989c3537062b438fcaac58a303558ddb20"}, "closed": true, "closedAt": "2020-03-26T15:43:40Z", "author": {"login": "SylvainJuge"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRJSWZgH2gAyMzkzNzExMzg5OjcwYzRkNmI1YzM5MDE4NDY4ODkwMDE3ZTkxOGQwZDE5NGEzNjEzODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRK4pRgFqTM4MTM3MTcyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "70c4d6b5c39018468890017e918d0d194a361387", "author": {"user": {"login": "SylvainJuge", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/70c4d6b5c39018468890017e918d0d194a361387", "committedDate": "2020-03-25T15:31:59Z", "message": "add a few corner cases for default service_name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e733d5ada665db96194a64d751ab6b6061e4625e", "author": {"user": {"login": "SylvainJuge", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/e733d5ada665db96194a64d751ab6b6061e4625e", "committedDate": "2020-03-25T16:59:01Z", "message": "add test case for weblogic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4445d2bdbfba5dbd5d6581ca2cbc788d091e39", "author": {"user": {"login": "SylvainJuge", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/5e4445d2bdbfba5dbd5d6581ca2cbc788d091e39", "committedDate": "2020-03-25T17:13:11Z", "message": "update changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzY0NDI1", "url": "https://github.com/elastic/apm-agent-java/pull/1097#pullrequestreview-381364425", "createdAt": "2020-03-25T17:15:27Z", "commit": {"oid": "e733d5ada665db96194a64d751ab6b6061e4625e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzoxNToyN1rOF7lwBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzoxNToyN1rOF7lwBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAyODgwNg==", "bodyText": "using a break here allows to maximize coverage, otherwise the return null; statement was dead code", "url": "https://github.com/elastic/apm-agent-java/pull/1097#discussion_r398028806", "createdAt": "2020-03-25T17:15:27Z", "author": {"login": "SylvainJuge"}, "path": "apm-agent-core/src/main/java/co/elastic/apm/agent/configuration/ServiceNameUtil.java", "diffHunk": "@@ -84,12 +89,14 @@ public static String replaceDisallowedChars(String serviceName) {\n     @Nullable\n     private static String parseJarCommand(String command) {\n         final String[] commandParts = command.split(\" \");\n+        String result = null;\n         for (String commandPart : commandParts) {\n             if (commandPart.endsWith(\".jar\")) {\n-                return removeVersionFromJar(removePath(removeJarExtension(commandPart)));\n+                result = removeVersionFromJar(removePath(removeJarExtension(commandPart)));\n+                break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e733d5ada665db96194a64d751ab6b6061e4625e"}, "originalPosition": 74}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzcxNzI5", "url": "https://github.com/elastic/apm-agent-java/pull/1097#pullrequestreview-381371729", "createdAt": "2020-03-25T17:23:43Z", "commit": {"oid": "5e4445d2bdbfba5dbd5d6581ca2cbc788d091e39"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3905, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}