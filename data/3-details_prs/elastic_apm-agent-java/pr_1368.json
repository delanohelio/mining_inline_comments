{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1OTY1NjQw", "number": 1368, "title": "migrate to indy okhttp plugin", "bodyText": "refer #1337", "createdAt": "2020-08-30T21:26:16Z", "url": "https://github.com/elastic/apm-agent-java/pull/1368", "merged": true, "mergeCommit": {"oid": "1f6d80d81d03ffa7ed37735cc8dbdcbb16ed926a"}, "closed": true, "closedAt": "2020-09-14T14:16:24Z", "author": {"login": "kananindzya"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEFC_8AH2gAyNDc1OTY1NjQwOmI1OGMxN2U5ZTY1OTI0ODRmMDgyY2E3MGFhYTZkNDQzMTVkMjI4MWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEjwdAAFqTQ3OTU0Njg5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b58c17e9e6592484f082ca70aaa6d44315d2281e", "author": {"user": null}, "url": "https://github.com/elastic/apm-agent-java/commit/b58c17e9e6592484f082ca70aaa6d44315d2281e", "committedDate": "2020-08-30T21:25:44Z", "message": "migrate to indy okhttp plugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NTU1MDY1", "url": "https://github.com/elastic/apm-agent-java/pull/1368#pullrequestreview-478555065", "createdAt": "2020-08-31T12:02:32Z", "commit": {"oid": "b58c17e9e6592484f082ca70aaa6d44315d2281e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMjowMjozMlrOHJ1-pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMjowMjozMlrOHJ1-pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MzYyMA==", "bodyText": "It's probably fine either way, so just out of curiosity, why did you change from GlobalThreadLocal<Span> to returning the span in the Object[] return value?", "url": "https://github.com/elastic/apm-agent-java/pull/1368#discussion_r480083620", "createdAt": "2020-08-31T12:02:32Z", "author": {"login": "felixbarny"}, "path": "apm-agent-plugins/apm-okhttp-plugin/src/main/java/co/elastic/apm/agent/okhttp/OkHttp3ClientInstrumentation.java", "diffHunk": "@@ -40,62 +36,52 @@\n import okhttp3.HttpUrl;\n import okhttp3.Request;\n \n+import javax.annotation.Nonnull;\n import javax.annotation.Nullable;\n \n import static net.bytebuddy.matcher.ElementMatchers.named;\n import static net.bytebuddy.matcher.ElementMatchers.returns;\n \n public class OkHttp3ClientInstrumentation extends AbstractOkHttp3ClientInstrumentation {\n \n-    public OkHttp3ClientInstrumentation(ElasticApmTracer tracer) {\n-        super(tracer);\n-    }\n-\n     @Override\n     public Class<?> getAdviceClass() {\n         return OkHttpClient3ExecuteAdvice.class;\n     }\n \n-    @VisibleForAdvice\n     public static class OkHttpClient3ExecuteAdvice {\n \n-        @VisibleForAdvice\n-        public final static GlobalThreadLocal<Span> spanTls = GlobalThreadLocal.get(OkHttpClient3ExecuteAdvice.class, \"spanTls\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b58c17e9e6592484f082ca70aaa6d44315d2281e"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbb2832a23430949be5971f8650de50861c979ee", "author": {"user": {"login": "SylvainJuge", "name": null}}, "url": "https://github.com/elastic/apm-agent-java/commit/dbb2832a23430949be5971f8650de50861c979ee", "committedDate": "2020-09-01T09:08:26Z", "message": "fix whitespace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NTQ2ODkz", "url": "https://github.com/elastic/apm-agent-java/pull/1368#pullrequestreview-479546893", "createdAt": "2020-09-01T09:12:32Z", "commit": {"oid": "dbb2832a23430949be5971f8650de50861c979ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3652, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}