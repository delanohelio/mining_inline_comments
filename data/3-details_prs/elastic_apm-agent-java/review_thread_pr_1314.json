{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3ODY0Njg4", "number": 1314, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoyODoxNVrOETJnmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoyODoxNVrOETJnmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTE1OTkyOnYy", "diffSide": "RIGHT", "path": ".ci/release/Jenkinsfile", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoyODoxNVrOG4uGUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwOTowNzowMlrOG5ao0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyODcyMQ==", "bodyText": "I am not sure why this command will not work\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          def spid = sh(script: \"./scripts/jenkins/fetch_nexus_id.sh\", returnStdout: true).trim()\n          \n          \n            \n                          def spid = getVaultSecret('secret/apm-team/ci/nexus')[\"staging-profile-id\"]\n          \n      \n    \n    \n  \n\nor this one\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          def spid = sh(script: \"./scripts/jenkins/fetch_nexus_id.sh\", returnStdout: true).trim()\n          \n          \n            \n                          def spid = getVaultSecret('secret/apm-team/ci/nexus').\"staging-profile-id\"", "url": "https://github.com/elastic/apm-agent-java/pull/1314#discussion_r462128721", "createdAt": "2020-07-29T08:28:15Z", "author": {"login": "kuisathaverat"}, "path": ".ci/release/Jenkinsfile", "diffHunk": "@@ -140,7 +140,7 @@ pipeline {\n         stage('Nexus release') {\n           steps {\n             script {\n-              def spid = getVaultSecret('nexus')[\"staging-profile-id\"]\n+              def spid = sh(script: \"./scripts/jenkins/fetch_nexus_id.sh\", returnStdout: true).trim()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82d62510b302237bc38e1eb2ae703b2d9b6eee13"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgzMjkyMQ==", "bodyText": "It will  not work because we are not running on apm-ci. The implementation of getVaultSecret depends specifically on credentials for Vault which are not deployed on the internal CI. This implementation more closely mirrors approaches which are typically employed on the internal CI.", "url": "https://github.com/elastic/apm-agent-java/pull/1314#discussion_r462832921", "createdAt": "2020-07-30T08:24:27Z", "author": {"login": "cachedout"}, "path": ".ci/release/Jenkinsfile", "diffHunk": "@@ -140,7 +140,7 @@ pipeline {\n         stage('Nexus release') {\n           steps {\n             script {\n-              def spid = getVaultSecret('nexus')[\"staging-profile-id\"]\n+              def spid = sh(script: \"./scripts/jenkins/fetch_nexus_id.sh\", returnStdout: true).trim()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyODcyMQ=="}, "originalCommit": {"oid": "82d62510b302237bc38e1eb2ae703b2d9b6eee13"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg1ODQ0OA==", "bodyText": "Btw, I'm not objecting having the post-release job on apm-ci as long as the job that pushes to maven central remains in the internal ci. This is especially true if there's already a precedent of using secrets from vault in a public CI and if you consider that safe.", "url": "https://github.com/elastic/apm-agent-java/pull/1314#discussion_r462858448", "createdAt": "2020-07-30T09:07:02Z", "author": {"login": "felixbarny"}, "path": ".ci/release/Jenkinsfile", "diffHunk": "@@ -140,7 +140,7 @@ pipeline {\n         stage('Nexus release') {\n           steps {\n             script {\n-              def spid = getVaultSecret('nexus')[\"staging-profile-id\"]\n+              def spid = sh(script: \"./scripts/jenkins/fetch_nexus_id.sh\", returnStdout: true).trim()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyODcyMQ=="}, "originalCommit": {"oid": "82d62510b302237bc38e1eb2ae703b2d9b6eee13"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 185, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}