{"pr_number": 891, "pr_title": "Merge the provided authority/clientid with the config object. Add redirectUri as part of PCA factory overload.", "pr_createdAt": "2020-01-10T22:12:36Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891", "timeline": [{"oid": "e365b0a647f1d5793fca0609cf8775af3def75e9", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/e365b0a647f1d5793fca0609cf8775af3def75e9", "message": "Merge the provided authority/clientid with the config object. Add redirectUri as part of PCA factory overload.", "committedDate": "2020-01-10T22:06:09Z", "type": "commit"}, {"oid": "ff80ab0abd9dbfbce3d46ea2f24d89906eb2fb46", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ff80ab0abd9dbfbce3d46ea2f24d89906eb2fb46", "message": "Add comment", "committedDate": "2020-01-10T22:11:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MTcxOQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365451719", "bodyText": "nit: add // redirectUri as a comment for readability like above", "author": "kreedula", "createdAt": "2020-01-10T22:14:45Z", "path": "msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java", "diffHunk": "@@ -247,6 +247,7 @@ public static void create(@NonNull final Context context,\n                 initializeConfiguration(context, configFileResourceId),\n                 null, // client id\n                 null, // authority\n+                null,", "originalCommit": "e365b0a647f1d5793fca0609cf8775af3def75e9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f3c149967f2efd760ec632885a190e9c6f4bd105", "chunk": "diff --git a/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java b/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\nindex de85a337..79777113 100644\n--- a/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\n+++ b/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\n\n@@ -247,7 +247,7 @@ public class PublicClientApplication implements IPublicClientApplication, IToken\n                 initializeConfiguration(context, configFileResourceId),\n                 null, // client id\n                 null, // authority\n-                null,\n+                null, // redirect uri\n                 listener\n         );\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MTc1Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365451753", "bodyText": "same", "author": "kreedula", "createdAt": "2020-01-10T22:14:54Z", "path": "msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java", "diffHunk": "@@ -285,44 +285,8 @@ public static void create(@NonNull final Context context,\n         create(\n                 initializeConfiguration(context, configFile),\n                 null, // client id\n-                null, // authority\n-                listener\n-        );\n-    }\n-\n-    /**\n-     * {@link PublicClientApplication#create(Context, String, ApplicationCreatedListener)} allows\n-     * the client id to be passed instead of providing through the AndroidManifest metadata.\n-     * If this constructor is called, the default authority https://login.microsoftonline.com/common\n-     * will be used.\n-     *\n-     * @param context  Application's {@link Context}. The sdk requires the application context to\n-     *                 be passed in {@link PublicClientApplication}. Cannot be null.\n-     *                 <p>\n-     *                 Note: The {@link Context} should be the application context instead of the\n-     *                 running activity's context, which could potentially make the sdk hold a\n-     *                 strong reference to the activity, thus preventing correct garbage collection\n-     *                 and causing bugs.\n-     *                 </p>\n-     * @param clientId The application's client id. Cannot be null.\n-     * @param listener a callback to be invoked when the object is successfully created.\n-     *                 Cannot be null.\n-     * @see PublicClientApplication#create(Context, int, ApplicationCreatedListener)\n-     * @see PublicClientApplication#create(Context, File, ApplicationCreatedListener)\n-     * @see PublicClientApplication#create(Context, String, String, ApplicationCreatedListener)\n-     * @see PublicClientApplication#create(Context, int)\n-     */\n-    public static void create(@NonNull final Context context,\n-                              @NonNull final String clientId,\n-                              @NonNull final ApplicationCreatedListener listener) {\n-        validateNonNullArgument(context, NONNULL_CONSTANTS.CONTEXT);\n-        validateNonNullArgument(clientId, NONNULL_CONSTANTS.CLIENT_ID);\n-        validateNonNullArgument(listener, NONNULL_CONSTANTS.LISTENER);\n-\n-        create(\n-                initializeConfiguration(context),\n-                clientId,\n-                null, // authority\n+                null, // authority,\n+                null,", "originalCommit": "e365b0a647f1d5793fca0609cf8775af3def75e9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f3c149967f2efd760ec632885a190e9c6f4bd105", "chunk": "diff --git a/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java b/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\nindex de85a337..79777113 100644\n--- a/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\n+++ b/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\n\n@@ -285,8 +285,8 @@ public class PublicClientApplication implements IPublicClientApplication, IToken\n         create(\n                 initializeConfiguration(context, configFile),\n                 null, // client id\n-                null, // authority,\n-                null,\n+                null, // authority\n+                null, // redirect uri\n                 listener\n         );\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365453416", "bodyText": "why null checks here, since we are already validating in public api's above.", "author": "kreedula", "createdAt": "2020-01-10T22:20:13Z", "path": "msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java", "diffHunk": "@@ -849,8 +815,23 @@ private static ISingleAccountPublicClientApplication createSingleAccountPublicCl\n     private static void create(@NonNull final PublicClientApplicationConfiguration config,\n                                @Nullable final String clientId,\n                                @Nullable final String authority,\n+                               @Nullable final String redirectUri,\n                                @NonNull final ApplicationCreatedListener listener) {\n+        if (clientId != null) {", "originalCommit": "e365b0a647f1d5793fca0609cf8775af3def75e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NjUzMQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365456531", "bodyText": "Some API are not passing this value (i.e. the one that only takes config file).", "author": "rpdome", "createdAt": "2020-01-10T22:31:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NjcxMA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365456710", "bodyText": "Basically, this function is an 'end point' of all PCA factory APIs.", "author": "rpdome", "createdAt": "2020-01-10T22:31:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1ODAzOA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365458038", "bodyText": "shouldn't we throw here if it's null then?", "author": "kreedula", "createdAt": "2020-01-10T22:36:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1ODIwNQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365458205", "bodyText": "you mean we will get from config if it's null here ?", "author": "kreedula", "createdAt": "2020-01-10T22:37:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ2MTQ3Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365461473", "bodyText": "yes", "author": "rpdome", "createdAt": "2020-01-10T22:50:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ2MTc1MQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365461751", "bodyText": "for this function, config is @nonnull. The caller is responsible for generating the default config file if it's not passed by the app.", "author": "rpdome", "createdAt": "2020-01-10T22:51:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzQxNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MzgwNA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/891#discussion_r365453804", "bodyText": "same", "author": "kreedula", "createdAt": "2020-01-10T22:21:44Z", "path": "msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java", "diffHunk": "@@ -768,6 +733,7 @@ private static IPublicClientApplication create(\n         final ResultFuture<AsyncResult<IPublicClientApplication>> future = new ResultFuture<>();\n         create(configuration,\n                 null, // client id\n+                null,", "originalCommit": "e365b0a647f1d5793fca0609cf8775af3def75e9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f3c149967f2efd760ec632885a190e9c6f4bd105", "chunk": "diff --git a/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java b/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\nindex de85a337..79777113 100644\n--- a/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\n+++ b/msal/src/main/java/com/microsoft/identity/client/PublicClientApplication.java\n\n@@ -733,8 +733,8 @@ public class PublicClientApplication implements IPublicClientApplication, IToken\n         final ResultFuture<AsyncResult<IPublicClientApplication>> future = new ResultFuture<>();\n         create(configuration,\n                 null, // client id\n-                null,\n                 null, // authority\n+                null, // redirectUri\n                 new ApplicationCreatedListener() {\n                     @Override\n                     public void onCreated(final IPublicClientApplication application) {\n"}}, {"oid": "f3c149967f2efd760ec632885a190e9c6f4bd105", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/f3c149967f2efd760ec632885a190e9c6f4bd105", "message": "Update test cases to work with the updated API", "committedDate": "2020-01-10T22:30:35Z", "type": "commit"}]}