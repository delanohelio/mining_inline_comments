{"pr_number": 2160, "pr_title": "[CALCITE-4269] Improvement on enumerable implementation for HOP and SESSION", "pr_createdAt": "2020-09-20T23:06:40Z", "pr_url": "https://github.com/apache/calcite/pull/2160", "timeline": [{"oid": "458cdae4268f3072b08cbdd0d7d3594e1160484f", "url": "https://github.com/apache/calcite/commit/458cdae4268f3072b08cbdd0d7d3594e1160484f", "message": "[CALCITE-3780] Improve SESSION Table-valued Function.\n\n1. Use ArrayDeque to replace LinkedList for the sake of efficiency.\n2. Mark the list as \"final\".", "committedDate": "2020-09-20T23:09:25Z", "type": "forcePushed"}, {"oid": "a24768db405caf4ea71e65baa53b6c2ab4f25d64", "url": "https://github.com/apache/calcite/commit/a24768db405caf4ea71e65baa53b6c2ab4f25d64", "message": "[CALCITE-4269] Improvements on enumerable implementation for HOP and SESSION. (Rui Wang)\n\n1. Use ArrayDeque to replace LinkedList for the sake of efficiency.\n2. Mark the list as \"final\".", "committedDate": "2020-09-20T23:12:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAyMTUwMw==", "url": "https://github.com/apache/calcite/pull/2160#discussion_r492021503", "bodyText": "Deque might be slightly better here", "author": "vlsi", "createdAt": "2020-09-21T12:55:25Z", "path": "core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java", "diffHunk": "@@ -856,7 +856,7 @@ static Expression tumblingWindowSelector(\n     private final int indexOfWatermarkedColumn;\n     private final int indexOfKeyColumn;\n     private final long gap;\n-    private LinkedList<Object[]> list;\n+    private final ArrayDeque<Object[]> list;", "originalCommit": "a24768db405caf4ea71e65baa53b6c2ab4f25d64", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cdf5fdd2c1ab8d23364d12b05b835a4015be8651", "chunk": "diff --git a/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java b/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java\nindex d508fb528..d5e9a4112 100644\n--- a/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java\n+++ b/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java\n\n@@ -856,7 +857,7 @@ static Expression tumblingWindowSelector(\n     private final int indexOfWatermarkedColumn;\n     private final int indexOfKeyColumn;\n     private final long gap;\n-    private final ArrayDeque<Object[]> list;\n+    private final Deque<Object[]> list;\n     private boolean initialized;\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAyMTgzMQ==", "url": "https://github.com/apache/calcite/pull/2160#discussion_r492021831", "bodyText": "Deque?", "author": "vlsi", "createdAt": "2020-09-21T12:55:58Z", "path": "core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java", "diffHunk": "@@ -998,7 +998,7 @@ private boolean isOverlapped(Pair<Long, Long> a, Pair<Long, Long> b) {\n     private final long emitFrequency;\n     private final long windowSize;\n     private final long offset;\n-    private LinkedList<Object[]> list;\n+    private final ArrayDeque<Object[]> list;", "originalCommit": "a24768db405caf4ea71e65baa53b6c2ab4f25d64", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cdf5fdd2c1ab8d23364d12b05b835a4015be8651", "chunk": "diff --git a/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java b/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java\nindex d508fb528..d5e9a4112 100644\n--- a/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java\n+++ b/core/src/main/java/org/apache/calcite/adapter/enumerable/EnumUtils.java\n\n@@ -998,7 +999,7 @@ private boolean isOverlapped(Pair<Long, Long> a, Pair<Long, Long> b) {\n     private final long emitFrequency;\n     private final long windowSize;\n     private final long offset;\n-    private final ArrayDeque<Object[]> list;\n+    private final Deque<Object[]> list;\n \n     /**\n      * Note that it only works for batch scenario. E.g. all data is known and there is no late data.\n"}}, {"oid": "cdf5fdd2c1ab8d23364d12b05b835a4015be8651", "url": "https://github.com/apache/calcite/commit/cdf5fdd2c1ab8d23364d12b05b835a4015be8651", "message": "[CALCITE-4269] Improvements on enumerable implementation for HOP and SESSION. (Rui Wang)\n\n1. Use ArrayDeque to replace LinkedList for the sake of efficiency.\n2. Mark the list as \"final\".", "committedDate": "2020-09-23T22:02:13Z", "type": "commit"}, {"oid": "cdf5fdd2c1ab8d23364d12b05b835a4015be8651", "url": "https://github.com/apache/calcite/commit/cdf5fdd2c1ab8d23364d12b05b835a4015be8651", "message": "[CALCITE-4269] Improvements on enumerable implementation for HOP and SESSION. (Rui Wang)\n\n1. Use ArrayDeque to replace LinkedList for the sake of efficiency.\n2. Mark the list as \"final\".", "committedDate": "2020-09-23T22:02:13Z", "type": "forcePushed"}]}