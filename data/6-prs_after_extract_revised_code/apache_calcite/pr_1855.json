{"pr_number": 1855, "pr_title": "[CALCITE-3855] Supports snapshot on table with virtual columns during\u2026", "pr_createdAt": "2020-03-12T08:04:51Z", "pr_url": "https://github.com/apache/calcite/pull/1855", "timeline": [{"oid": "dbff053f38f159aed96c898590cc45144398b597", "url": "https://github.com/apache/calcite/commit/dbff053f38f159aed96c898590cc45144398b597", "message": "[CALCITE-3855] Supports snapshot on table with virtual columns during sql-to-rel conversion\n\nIn SqlToRelConverter#convertTemporalTable, we actually should not assume\nthat the rel to snapshot is always a TableScan.", "committedDate": "2020-03-12T08:14:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ2NjM0Mg==", "url": "https://github.com/apache/calcite/pull/1855#discussion_r391466342", "bodyText": "Checkstyle fails on \"if (...)\"", "author": "DonnyZone", "createdAt": "2020-03-12T08:33:54Z", "path": "core/src/test/java/org/apache/calcite/test/catalog/VirtualColumnsExpressionFactory.java", "diffHunk": "@@ -32,4 +36,17 @@\n       return super.generationStrategy(table, iColumn);\n     }\n   }\n+\n+  @Override public RexNode newColumnDefaultValue(\n+      RelOptTable table, int iColumn, InitializerContext context) {\n+    if(iColumn == 4) {", "originalCommit": "dbff053f38f159aed96c898590cc45144398b597", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ3NjI5OQ==", "url": "https://github.com/apache/calcite/pull/1855#discussion_r391476299", "bodyText": "Yep, thanks for the reminder ~", "author": "danny0405", "createdAt": "2020-03-12T08:54:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ2NjM0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "a690cba560ee84e39368a9be5114714a7d311d6a", "chunk": "diff --git a/core/src/test/java/org/apache/calcite/test/catalog/VirtualColumnsExpressionFactory.java b/core/src/test/java/org/apache/calcite/test/catalog/VirtualColumnsExpressionFactory.java\nindex ee642c18c..4342c18f9 100644\n--- a/core/src/test/java/org/apache/calcite/test/catalog/VirtualColumnsExpressionFactory.java\n+++ b/core/src/test/java/org/apache/calcite/test/catalog/VirtualColumnsExpressionFactory.java\n\n@@ -39,7 +39,7 @@\n \n   @Override public RexNode newColumnDefaultValue(\n       RelOptTable table, int iColumn, InitializerContext context) {\n-    if(iColumn == 4) {\n+    if (iColumn == 4) {\n       final SqlNode node = context.parseExpression(SqlParser.Config.DEFAULT, \"A + 1\");\n       // Validates the node with full table schema(includes the virtual columns),\n       // because the expression does not reference another virtual column.\n"}}, {"oid": "a690cba560ee84e39368a9be5114714a7d311d6a", "url": "https://github.com/apache/calcite/commit/a690cba560ee84e39368a9be5114714a7d311d6a", "message": "[CALCITE-3855] Supports snapshot on table with virtual columns during sql-to-rel conversion\n\nIn SqlToRelConverter#convertTemporalTable, we actually should not assume\nthat the rel to snapshot is always a TableScan.", "committedDate": "2020-03-12T08:55:41Z", "type": "forcePushed"}, {"oid": "8d6a96ebc88a9bbd608ca3aad6d03c87cde64c43", "url": "https://github.com/apache/calcite/commit/8d6a96ebc88a9bbd608ca3aad6d03c87cde64c43", "message": "[CALCITE-3855] Supports snapshot on table with virtual columns during sql-to-rel conversion\n\nIn SqlToRelConverter#convertTemporalTable, we actually should not assume\nthat the rel to snapshot is always a TableScan.", "committedDate": "2020-03-12T09:20:40Z", "type": "commit"}, {"oid": "8d6a96ebc88a9bbd608ca3aad6d03c87cde64c43", "url": "https://github.com/apache/calcite/commit/8d6a96ebc88a9bbd608ca3aad6d03c87cde64c43", "message": "[CALCITE-3855] Supports snapshot on table with virtual columns during sql-to-rel conversion\n\nIn SqlToRelConverter#convertTemporalTable, we actually should not assume\nthat the rel to snapshot is always a TableScan.", "committedDate": "2020-03-12T09:20:40Z", "type": "forcePushed"}]}