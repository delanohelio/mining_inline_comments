{"pr_number": 1794, "pr_title": "[CALCITE-3781] HintStrategy can specify excluded rules for planner", "pr_createdAt": "2020-02-10T14:26:13Z", "pr_url": "https://github.com/apache/calcite/pull/1794", "timeline": [{"oid": "3f5475fae37ad577264aa566f63fd3d02b9da156", "url": "https://github.com/apache/calcite/commit/3f5475fae37ad577264aa566f63fd3d02b9da156", "message": "[CALCITE-3781] HintStrategy can specify excluded rules for planner\n\nIt is efficient to support exclude rules explicitly for some hints, i.e.\nUSE_MERGE, NO_USE_HASH.", "committedDate": "2020-02-11T04:52:29Z", "type": "forcePushed"}, {"oid": "fd4a3f178e10c463f36ca737570965430f2cb690", "url": "https://github.com/apache/calcite/commit/fd4a3f178e10c463f36ca737570965430f2cb690", "message": "[CALCITE-3781] HintStrategy can specify excluded rules for planner\n\nIt is efficient to support exclude rules explicitly for some hints, i.e.\nUSE_MERGE, NO_USE_HASH.", "committedDate": "2020-02-11T05:47:49Z", "type": "commit"}, {"oid": "fd4a3f178e10c463f36ca737570965430f2cb690", "url": "https://github.com/apache/calcite/commit/fd4a3f178e10c463f36ca737570965430f2cb690", "message": "[CALCITE-3781] HintStrategy can specify excluded rules for planner\n\nIt is efficient to support exclude rules explicitly for some hints, i.e.\nUSE_MERGE, NO_USE_HASH.", "committedDate": "2020-02-11T05:47:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA4MTg3MA==", "url": "https://github.com/apache/calcite/pull/1794#discussion_r378081870", "bodyText": "Should this be evaluated before the rule is added to the match queue?", "author": "vlsi", "createdAt": "2020-02-12T07:40:44Z", "path": "core/src/main/java/org/apache/calcite/plan/volcano/VolcanoRuleCall.java", "diffHunk": "@@ -160,6 +160,11 @@ protected void onMatch() {\n         return;\n       }\n \n+      if (isRuleExcluded()) {\n+        LOGGER.debug(\"Rule [{}] not fired due to exclusion hint\", getRule());", "originalCommit": "fd4a3f178e10c463f36ca737570965430f2cb690", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYyMDAwMQ==", "url": "https://github.com/apache/calcite/pull/1794#discussion_r378620001", "bodyText": "It's hard to do that, because the operands can be matched from children to parent (ASENDING), for current implementation, i only want to match the root operand of the final match.", "author": "danny0405", "createdAt": "2020-02-13T02:24:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA4MTg3MA=="}], "type": "inlineReview", "revised_code": null}]}