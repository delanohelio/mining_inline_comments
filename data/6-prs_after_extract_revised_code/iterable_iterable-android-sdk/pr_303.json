{"pr_number": 303, "pr_title": "[MOB-2285] - Add OS version to getMessagesAPI", "pr_createdAt": "2020-12-22T19:31:19Z", "pr_url": "https://github.com/Iterable/iterable-android-sdk/pull/303", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ5NjkwNg==", "url": "https://github.com/Iterable/iterable-android-sdk/pull/303#discussion_r547496906", "bodyText": "Even though DEVICE_SYSTEM_VERSION has the same value, systemVersion, it is prefixed with DEVICE_, which means it is a property of a device record sent to registerDeviceToken. I think in this case it may be better to add another constant.", "author": "vbabenkoru", "createdAt": "2020-12-22T20:39:39Z", "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApiClient.java", "diffHunk": "@@ -164,6 +164,7 @@ public void getInAppMessages(int count, @NonNull IterableHelper.IterableActionHa\n             requestJSON.put(IterableConstants.ITERABLE_IN_APP_COUNT, count);\n             requestJSON.put(IterableConstants.KEY_PLATFORM, IterableConstants.ITBL_PLATFORM_ANDROID);\n             requestJSON.put(IterableConstants.ITBL_KEY_SDK_VERSION, IterableConstants.ITBL_KEY_SDK_VERSION_NUMBER);\n+            requestJSON.put(IterableConstants.DEVICE_SYSTEM_VERSION, Build.VERSION.RELEASE);", "originalCommit": "0cfc6ef685b8623d89ba65215ea7c43e81ec5e20", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "29e515a03708728d72f5560cc1492074fa344a08", "chunk": "diff --git a/iterableapi/src/main/java/com/iterable/iterableapi/IterableApiClient.java b/iterableapi/src/main/java/com/iterable/iterableapi/IterableApiClient.java\nindex 1c1990d..1e8ca21 100644\n--- a/iterableapi/src/main/java/com/iterable/iterableapi/IterableApiClient.java\n+++ b/iterableapi/src/main/java/com/iterable/iterableapi/IterableApiClient.java\n\n@@ -164,7 +164,7 @@ class IterableApiClient {\n             requestJSON.put(IterableConstants.ITERABLE_IN_APP_COUNT, count);\n             requestJSON.put(IterableConstants.KEY_PLATFORM, IterableConstants.ITBL_PLATFORM_ANDROID);\n             requestJSON.put(IterableConstants.ITBL_KEY_SDK_VERSION, IterableConstants.ITBL_KEY_SDK_VERSION_NUMBER);\n-            requestJSON.put(IterableConstants.DEVICE_SYSTEM_VERSION, Build.VERSION.RELEASE);\n+            requestJSON.put(IterableConstants.ITBL_SYSTEM_VERSION, Build.VERSION.RELEASE);\n             requestJSON.put(IterableConstants.KEY_PACKAGE_NAME, authProvider.getContext().getPackageName());\n \n             sendGetRequest(IterableConstants.ENDPOINT_GET_INAPP_MESSAGES, requestJSON, onCallback);\n"}}, {"oid": "29e515a03708728d72f5560cc1492074fa344a08", "url": "https://github.com/Iterable/iterable-android-sdk/commit/29e515a03708728d72f5560cc1492074fa344a08", "message": "[MOB-2285] - Add OS version to getMessagesAPI\n\n1. Added systemVersion to getMessageApi json\n2. Added test assertion to check if systemVersion is passed", "committedDate": "2020-12-22T21:13:32Z", "type": "commit"}, {"oid": "29e515a03708728d72f5560cc1492074fa344a08", "url": "https://github.com/Iterable/iterable-android-sdk/commit/29e515a03708728d72f5560cc1492074fa344a08", "message": "[MOB-2285] - Add OS version to getMessagesAPI\n\n1. Added systemVersion to getMessageApi json\n2. Added test assertion to check if systemVersion is passed", "committedDate": "2020-12-22T21:13:32Z", "type": "forcePushed"}]}