{"pr_number": 5920, "pr_title": "6037 populate tsk metadata artifacts for extracted text", "pr_createdAt": "2020-05-28T19:46:59Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5920", "timeline": [{"oid": "de21dd88c95ffe195a7682702b7beec9a56ca418", "url": "https://github.com/sleuthkit/autopsy/commit/de21dd88c95ffe195a7682702b7beec9a56ca418", "message": "Update KeywordSearchIngestModule.java\n\nAdd creation of TSK_METADATA artifact to ingest module.", "committedDate": "2020-05-20T18:42:19Z", "type": "commit"}, {"oid": "06e8890417160bd313e34daf48ead1dfb096b824", "url": "https://github.com/sleuthkit/autopsy/commit/06e8890417160bd313e34daf48ead1dfb096b824", "message": "Added Metadata Artifact to Keyword Search and TImeline\n\nAdded the Metadata for Documents to TSK_METADATA artifact as well as event types in time line for Metadata.", "committedDate": "2020-05-28T19:44:09Z", "type": "commit"}, {"oid": "c48eb1a387584c37e3e4557aa11bb722918d5947", "url": "https://github.com/sleuthkit/autopsy/commit/c48eb1a387584c37e3e4557aa11bb722918d5947", "message": "Update KeywordSearchIngestModule.java\n\nCodacy Changes", "committedDate": "2020-05-29T19:10:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkwNjE5NA==", "url": "https://github.com/sleuthkit/autopsy/pull/5920#discussion_r433906194", "bodyText": "typo", "author": "APriestman", "createdAt": "2020-06-02T14:08:48Z", "path": "KeywordSearch/src/org/sleuthkit/autopsy/keywordsearch/KeywordSearchIngestModule.java", "diffHunk": "@@ -515,7 +549,70 @@ public Reader openStream() throws IOException {\n                 return false;\n             }\n         }\n+        \n+        private void createMetadataArtifact(AbstractFile aFile, Map<String, String> metadata) {\n+    \n+            String moduleName = KeywordSearchIngestModule.class.getName();\n+            \n+            Collection<BlackboardAttribute> attributes = new ArrayList<>(); \n+            Collection<BlackboardArtifact> bbartifacts = new ArrayList<>();\n+            for (Map.Entry<String, String> entry : metadata.entrySet()) {\n+                if (METADATA_TYPES_MAP.containsKey(entry.getKey())) {\n+                    BlackboardAttribute bba = checkAttribute(entry.getKey(), entry.getValue());\n+                    if (bba != null) {\n+                        attributes.add(bba);\n+                    }\n+                }\n+            }\n+            if (!attributes.isEmpty()) {\n+                try {\n+                    BlackboardArtifact bbart = aFile.newArtifact(BlackboardArtifact.ARTIFACT_TYPE.TSK_METADATA);\n+                    bbart.addAttributes(attributes);\n+                    bbartifacts.add(bbart);\n+                } catch (TskCoreException ex) {\n+                    // Log error and return to continue processing\n+                   logger.log(Level.WARNING, String.format(\"Error creatinkg or adding artifact.\"), ex); //NON-NLS", "originalCommit": "c48eb1a387584c37e3e4557aa11bb722918d5947", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkxMzU2Nw==", "url": "https://github.com/sleuthkit/autopsy/pull/5920#discussion_r433913567", "bodyText": "FIxed typo", "author": "markmckinnon", "createdAt": "2020-06-02T14:18:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkwNjE5NA=="}], "type": "inlineReview", "revised_code": {"commit": "9e7f12eb8b91d5adc35cc4da828eb055af849abd", "chunk": "diff --git a/KeywordSearch/src/org/sleuthkit/autopsy/keywordsearch/KeywordSearchIngestModule.java b/KeywordSearch/src/org/sleuthkit/autopsy/keywordsearch/KeywordSearchIngestModule.java\nindex a7f29083f7..ff93478d8e 100644\n--- a/KeywordSearch/src/org/sleuthkit/autopsy/keywordsearch/KeywordSearchIngestModule.java\n+++ b/KeywordSearch/src/org/sleuthkit/autopsy/keywordsearch/KeywordSearchIngestModule.java\n\n@@ -571,7 +571,7 @@ private void createMetadataArtifact(AbstractFile aFile, Map<String, String> meta\n                     bbartifacts.add(bbart);\n                 } catch (TskCoreException ex) {\n                     // Log error and return to continue processing\n-                   logger.log(Level.WARNING, String.format(\"Error creatinkg or adding artifact.\"), ex); //NON-NLS\n+                   logger.log(Level.WARNING, String.format(\"Error creating or adding artifact.\"), ex); //NON-NLS\n                    return;\n                 }\n                 if (!bbartifacts.isEmpty()) {\n"}}, {"oid": "9e7f12eb8b91d5adc35cc4da828eb055af849abd", "url": "https://github.com/sleuthkit/autopsy/commit/9e7f12eb8b91d5adc35cc4da828eb055af849abd", "message": "Update KeywordSearchIngestModule.java\n\nFix typo", "committedDate": "2020-06-02T14:16:55Z", "type": "commit"}, {"oid": "95451cbb5f8f6c277dbe52a6ded1b7a8e77df360", "url": "https://github.com/sleuthkit/autopsy/commit/95451cbb5f8f6c277dbe52a6ded1b7a8e77df360", "message": "Update KeywordSearchIngestModule.java\n\nAdded better warning message to include the file name when there is an error for debugging if needed.", "committedDate": "2020-06-04T13:29:22Z", "type": "commit"}]}