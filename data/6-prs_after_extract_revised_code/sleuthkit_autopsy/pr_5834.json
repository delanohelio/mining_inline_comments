{"pr_number": 5834, "pr_title": "6265 cvt visualization message count changes", "pr_createdAt": "2020-04-20T14:54:25Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5834", "timeline": [{"oid": "a45de89e374f59748ecc90964d5f48018eab398c", "url": "https://github.com/sleuthkit/autopsy/commit/a45de89e374f59748ecc90964d5f48018eab398c", "message": "refactoring of PinnedAccountModel", "committedDate": "2020-04-20T13:56:32Z", "type": "commit"}, {"oid": "1f3acd3647928983aa48bfb50d042746dd74f380", "url": "https://github.com/sleuthkit/autopsy/commit/1f3acd3647928983aa48bfb50d042746dd74f380", "message": "some bug fixes", "committedDate": "2020-04-20T14:22:49Z", "type": "commit"}, {"oid": "09f46d2b1c5638fea1235f53efd01652cbe76c5f", "url": "https://github.com/sleuthkit/autopsy/commit/09f46d2b1c5638fea1235f53efd01652cbe76c5f", "message": "remove unused import", "committedDate": "2020-04-20T15:01:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgzODA0NA==", "url": "https://github.com/sleuthkit/autopsy/pull/5834#discussion_r413838044", "bodyText": "Please make error more informative", "author": "APriestman", "createdAt": "2020-04-23T14:21:24Z", "path": "Core/src/org/sleuthkit/autopsy/communications/CommunicationsGraph.java", "diffHunk": "@@ -199,16 +200,24 @@ void resetGraph() {\n         lockedVertexModel.clear();\n     }\n \n-    private mxCell getOrCreateVertex(AccountDeviceInstanceKey accountDeviceInstanceKey) {\n-        final AccountDeviceInstance accountDeviceInstance = accountDeviceInstanceKey.getAccountDeviceInstance();\n+    private mxCell getOrCreateVertex(AccountDeviceInstance adi, CommunicationsManager commsManager, CommunicationsFilter currentFilter) {\n+        final AccountDeviceInstance accountDeviceInstance = adi;\n         final String name = accountDeviceInstance.getAccount().getTypeSpecificID();\n \n         final mxCell vertex = nodeMap.computeIfAbsent(name + accountDeviceInstance.getDeviceId(), vertexName -> {\n-            double size = Math.sqrt(accountDeviceInstanceKey.getMessageCount()) + 10;\n-\n+            long adiRelationshipsCount = 1;\n+            try {\n+                adiRelationshipsCount = commsManager.getRelationshipSourcesCount(accountDeviceInstance, currentFilter);\n+            } catch (TskCoreException tskCoreException) {\n+                logger.log(Level.SEVERE, \"Error\", tskCoreException);", "originalCommit": "09f46d2b1c5638fea1235f53efd01652cbe76c5f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "36ced0b39113c1295607823a1d07a4e688c81d15", "chunk": "diff --git a/Core/src/org/sleuthkit/autopsy/communications/CommunicationsGraph.java b/Core/src/org/sleuthkit/autopsy/communications/CommunicationsGraph.java\nindex 38a20d07e5..f07d4d52ab 100644\n--- a/Core/src/org/sleuthkit/autopsy/communications/CommunicationsGraph.java\n+++ b/Core/src/org/sleuthkit/autopsy/communications/CommunicationsGraph.java\n\n@@ -209,7 +209,7 @@ private mxCell getOrCreateVertex(AccountDeviceInstance adi, CommunicationsManage\n             try {\n                 adiRelationshipsCount = commsManager.getRelationshipSourcesCount(accountDeviceInstance, currentFilter);\n             } catch (TskCoreException tskCoreException) {\n-                logger.log(Level.SEVERE, \"Error\", tskCoreException);\n+                logger.log(Level.SEVERE, \"There was an error fetching relationships for the node: \" + accountDeviceInstance, tskCoreException);\n             }\n                         \n             double size = Math.sqrt(adiRelationshipsCount) + 10;\n"}}, {"oid": "36ced0b39113c1295607823a1d07a4e688c81d15", "url": "https://github.com/sleuthkit/autopsy/commit/36ced0b39113c1295607823a1d07a4e688c81d15", "message": "improved logging", "committedDate": "2020-04-23T14:37:38Z", "type": "commit"}]}