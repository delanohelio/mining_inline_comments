{"pr_number": 5957, "pr_title": "6428 persona additional fields", "pr_createdAt": "2020-06-09T17:58:17Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5957", "timeline": [{"oid": "1e3e62304cadd16c60c9950481fc7cf0845abe4b", "url": "https://github.com/sleuthkit/autopsy/commit/1e3e62304cadd16c60c9950481fc7cf0845abe4b", "message": "Additional fields in the Persona Details Panel", "committedDate": "2020-06-09T17:57:43Z", "type": "commit"}, {"oid": "8fc21c7ea3912a4fdeb45217e7600552f1116216", "url": "https://github.com/sleuthkit/autopsy/commit/8fc21c7ea3912a4fdeb45217e7600552f1116216", "message": "Merge branch 'develop' into 6428_persona_additional_fields", "committedDate": "2020-06-09T17:59:17Z", "type": "commit"}, {"oid": "15dbc32736c2b2f8ed1441b18a471e922fa9450e", "url": "https://github.com/sleuthkit/autopsy/commit/15dbc32736c2b2f8ed1441b18a471e922fa9450e", "message": "6428 Fixing merge", "committedDate": "2020-06-09T19:15:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzY4Mg==", "url": "https://github.com/sleuthkit/autopsy/pull/5957#discussion_r438117682", "bodyText": "Per our coding guidelines, put a period at the end of that sentence - and check other places.", "author": "raman-bt", "createdAt": "2020-06-10T13:23:25Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java", "diffHunk": "@@ -254,6 +254,18 @@ private static Persona createPersona(String name, String comment, PersonaStatus\n         return getPersonaByUUID(uuidStr);\n     }\n     \n+    /**\n+     * Sets the comment of this persona", "originalCommit": "15dbc32736c2b2f8ed1441b18a471e922fa9450e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f565cf8344704ceccaeb0406b176ba535d138e98", "chunk": "diff --git a/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java b/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\nindex 654dfc5562..5b0226dea9 100644\n--- a/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\n+++ b/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\n\n@@ -255,7 +255,7 @@ private static Persona createPersona(String name, String comment, PersonaStatus\n     }\n     \n     /**\n-     * Sets the comment of this persona\n+     * Sets the comment of this persona.\n      *\n      * @param name The new comment.\n      * \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExOTM5Ng==", "url": "https://github.com/sleuthkit/autopsy/pull/5957#discussion_r438119396", "bodyText": "We started adding a null check for CentralRepository.getInstance().\nShould add that here and in all other new apis.", "author": "raman-bt", "createdAt": "2020-06-10T13:25:46Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java", "diffHunk": "@@ -254,6 +254,18 @@ private static Persona createPersona(String name, String comment, PersonaStatus\n         return getPersonaByUUID(uuidStr);\n     }\n     \n+    /**\n+     * Sets the comment of this persona\n+     *\n+     * @param name The new comment.\n+     * \n+     * @throws CentralRepoException If there is an error.\n+     */\n+    public void setComment(String comment) throws CentralRepoException {\n+        String updateClause = \"UPDATE personas SET comment = \\\"\" + comment + \"\\\" WHERE id = \" + id;\n+        CentralRepository.getInstance().executeUpdateSQL(updateClause);\n+    }", "originalCommit": "15dbc32736c2b2f8ed1441b18a471e922fa9450e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f565cf8344704ceccaeb0406b176ba535d138e98", "chunk": "diff --git a/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java b/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\nindex 654dfc5562..5b0226dea9 100644\n--- a/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\n+++ b/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\n\n@@ -255,7 +255,7 @@ private static Persona createPersona(String name, String comment, PersonaStatus\n     }\n     \n     /**\n-     * Sets the comment of this persona\n+     * Sets the comment of this persona.\n      *\n      * @param name The new comment.\n      * \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExOTU4OQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5957#discussion_r438119589", "bodyText": "Add null check for CentralRepository.getInstance()", "author": "raman-bt", "createdAt": "2020-06-10T13:26:04Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java", "diffHunk": "@@ -293,6 +305,14 @@ public PersonaAccount addAccount(CentralRepoAccount account, String justificatio\n     public void removeAccount(PersonaAccount account) throws CentralRepoException {\n         PersonaAccount.removePersonaAccount(account.getId());\n     }\n+    \n+    /**\n+     * Marks this persona as deleted\n+     */\n+    public void delete() throws CentralRepoException {\n+        String deleteSQL = \"UPDATE personas SET status_id = \" + PersonaStatus.DELETED.status_id + \" WHERE id = \" + this.id;\n+        CentralRepository.getInstance().executeUpdateSQL(deleteSQL);", "originalCommit": "15dbc32736c2b2f8ed1441b18a471e922fa9450e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f565cf8344704ceccaeb0406b176ba535d138e98", "chunk": "diff --git a/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java b/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\nindex 654dfc5562..5b0226dea9 100644\n--- a/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\n+++ b/Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/Persona.java\n\n@@ -311,7 +317,10 @@ public void removeAccount(PersonaAccount account) throws CentralRepoException {\n      */\n     public void delete() throws CentralRepoException {\n         String deleteSQL = \"UPDATE personas SET status_id = \" + PersonaStatus.DELETED.status_id + \" WHERE id = \" + this.id;\n-        CentralRepository.getInstance().executeUpdateSQL(deleteSQL);\n+        CentralRepository cr = CentralRepository.getInstance();\n+        if (cr != null) {\n+            cr.executeDeleteSQL(deleteSQL);\n+        }\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyMzA0Nw==", "url": "https://github.com/sleuthkit/autopsy/pull/5957#discussion_r438123047", "bodyText": "Put a period at the end of this since its a message displayed to user.", "author": "raman-bt", "createdAt": "2020-06-10T13:30:49Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaManagerTopComponent.java", "diffHunk": "@@ -54,7 +54,9 @@\n     private Persona selectedPersona = null;\n \n     @Messages({\n-        \"PMTopComponent_Name=Persona Manager\"\n+        \"PMTopComponent_Name=Persona Manager\",\n+        \"PMTopComponent_delete_exception_Title=Delete failure\",\n+        \"PMTopComponent_delete_exception_msg=Failed to delete persona\",", "originalCommit": "15dbc32736c2b2f8ed1441b18a471e922fa9450e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f565cf8344704ceccaeb0406b176ba535d138e98", "chunk": "diff --git a/Core/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaManagerTopComponent.java b/Core/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaManagerTopComponent.java\nindex be40c8d33c..ab20967822 100644\n--- a/Core/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaManagerTopComponent.java\n+++ b/Core/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaManagerTopComponent.java\n\n@@ -56,7 +56,7 @@\n     @Messages({\n         \"PMTopComponent_Name=Persona Manager\",\n         \"PMTopComponent_delete_exception_Title=Delete failure\",\n-        \"PMTopComponent_delete_exception_msg=Failed to delete persona\",\n+        \"PMTopComponent_delete_exception_msg=Failed to delete persona.\",\n     })\n     public PersonaManagerTopComponent() {\n         initComponents();\n"}}, {"oid": "f565cf8344704ceccaeb0406b176ba535d138e98", "url": "https://github.com/sleuthkit/autopsy/commit/f565cf8344704ceccaeb0406b176ba535d138e98", "message": "6428 PR comments", "committedDate": "2020-06-11T15:36:52Z", "type": "commit"}, {"oid": "66d5ff29e1d3f8d73ce2450d67f3f71aace30f6e", "url": "https://github.com/sleuthkit/autopsy/commit/66d5ff29e1d3f8d73ce2450d67f3f71aace30f6e", "message": "Merge remote-tracking branch 'sleuthkit/develop' into 6428_persona_additional_fields", "committedDate": "2020-06-11T16:02:21Z", "type": "commit"}, {"oid": "8ea50abed5e3be178215a357407888b859f4339b", "url": "https://github.com/sleuthkit/autopsy/commit/8ea50abed5e3be178215a357407888b859f4339b", "message": "Merge remote-tracking branch 'sleuthkit/develop' into 6428_persona_additional_fields", "committedDate": "2020-06-11T17:44:48Z", "type": "commit"}, {"oid": "294366c56d45516087e380574f412a7c97e81278", "url": "https://github.com/sleuthkit/autopsy/commit/294366c56d45516087e380574f412a7c97e81278", "message": "Merge remote-tracking branch 'sleuthkit/develop' into 6428_persona_additional_fields", "committedDate": "2020-06-11T18:30:26Z", "type": "commit"}, {"oid": "ba38f92882e5c4988bc68b52b11d2b59c942493f", "url": "https://github.com/sleuthkit/autopsy/commit/ba38f92882e5c4988bc68b52b11d2b59c942493f", "message": "Merge branch 'develop' into 6428_persona_additional_fields", "committedDate": "2020-06-11T18:59:07Z", "type": "commit"}]}