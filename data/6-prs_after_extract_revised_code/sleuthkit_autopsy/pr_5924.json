{"pr_number": 5924, "pr_title": "6392 Change ingest stream error handling", "pr_createdAt": "2020-05-29T19:10:55Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5924", "timeline": [{"oid": "f0db432594dde7289bc303a757b84e8c6a666874", "url": "https://github.com/sleuthkit/autopsy/commit/f0db432594dde7289bc303a757b84e8c6a666874", "message": "Changing some error handling", "committedDate": "2020-05-29T19:06:02Z", "type": "commit"}, {"oid": "c72a388ff2ac17e65210ce53519f4b74c51978a2", "url": "https://github.com/sleuthkit/autopsy/commit/c72a388ff2ac17e65210ce53519f4b74c51978a2", "message": "Spacing", "committedDate": "2020-05-29T19:10:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwMjI3Nw==", "url": "https://github.com/sleuthkit/autopsy/pull/5924#discussion_r432702277", "bodyText": "I'm thinking this should be a TskDataException instead of a TskCoreException. Or an IllegalStreamStateException. I like the latter.", "author": "rcordovano", "createdAt": "2020-05-29T19:48:31Z", "path": "Core/src/org/sleuthkit/autopsy/ingest/IngestJobInputStream.java", "diffHunk": "@@ -82,8 +85,14 @@ public DataSource getDataSource() throws TskCoreException {\n     }\n \n     @Override\n-    public void addFiles(List<Long> fileObjectIds) throws IngestStreamClosedException {\n+    public void addFiles(List<Long> fileObjectIds) throws IngestStreamClosedException, TskCoreException {\n         synchronized(this) {\n+            if (isClosed) {\n+                throw new IngestStreamClosedException(\"Can not add files - ingest stream is closed\");\n+            }\n+            if (dataSource == null) {\n+                throw new TskCoreException(\"Files can not be added without a data source\");", "originalCommit": "c72a388ff2ac17e65210ce53519f4b74c51978a2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "863e209dd57284e40ffdc36f917f97376626b988", "chunk": "diff --git a/Core/src/org/sleuthkit/autopsy/ingest/IngestJobInputStream.java b/Core/src/org/sleuthkit/autopsy/ingest/IngestJobInputStream.java\nindex 369885fa3b..ee83640a12 100644\n--- a/Core/src/org/sleuthkit/autopsy/ingest/IngestJobInputStream.java\n+++ b/Core/src/org/sleuthkit/autopsy/ingest/IngestJobInputStream.java\n\n@@ -85,13 +85,13 @@ public DataSource getDataSource() throws TskCoreException {\n     }\n \n     @Override\n-    public void addFiles(List<Long> fileObjectIds) throws IngestStreamClosedException, TskCoreException {\n+    public void addFiles(List<Long> fileObjectIds) throws IngestStreamClosedException {\n         synchronized(this) {\n             if (isClosed) {\n                 throw new IngestStreamClosedException(\"Can not add files - ingest stream is closed\");\n             }\n             if (dataSource == null) {\n-                throw new TskCoreException(\"Files can not be added without a data source\");\n+                throw new IllegalStateException(\"Files can not be added before a data source\");\n             }\n             fileIdQueue.addAll(fileObjectIds);\n         }\n"}}, {"oid": "863e209dd57284e40ffdc36f917f97376626b988", "url": "https://github.com/sleuthkit/autopsy/commit/863e209dd57284e40ffdc36f917f97376626b988", "message": "Change to IllegalStateException", "committedDate": "2020-06-02T17:21:00Z", "type": "commit"}]}