{"pr_number": 5686, "pr_title": "6107 prompt user to use CR only in release mode", "pr_createdAt": "2020-03-06T21:27:56Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5686", "timeline": [{"oid": "77a8bb89535e1ffd00163ea3509c864768907b89", "url": "https://github.com/sleuthkit/autopsy/commit/77a8bb89535e1ffd00163ea3509c864768907b89", "message": "6107 prompt user to use CR only in release mode", "committedDate": "2020-03-06T21:27:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE2MTE0Ng==", "url": "https://github.com/sleuthkit/autopsy/pull/5686#discussion_r389161146", "bodyText": "I  notice that this call to reportUpgradeError is conditional on RuntimeProperties.runningWithGUI, which it should be. However, the call to reportUpgradeError on line 143 is not conditional in this way. Maybe it would be better to put a  RuntimeProperties.runningWithGUI conditional in reportUpgradeError.", "author": "rcordovano", "createdAt": "2020-03-06T21:49:39Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/eventlisteners/Installer.java", "diffHunk": "@@ -59,21 +60,38 @@ private Installer() {\n     @NbBundle.Messages({\n         \"Installer.initialCreateSqlite.title=Enable Central Repository?\",\n         \"Installer.initialCreateSqlite.messageHeader=The Central Repository is not enabled. Would you like to enable it?\",\n-        \"Installer.initialCreateSqlite.messageDesc=It will store information about all hashes and identifiers that you process. \" +\n-            \"You can use this to ignore previously seen files and make connections between cases.\"\n+        \"Installer.initialCreateSqlite.messageDesc=It will store information about all hashes and identifiers that you process. \"\n+        + \"You can use this to ignore previously seen files and make connections between cases.\"\n     })\n     @Override\n     public void restored() {\n         Case.addPropertyChangeListener(pcl);\n         ieListener.installListeners();\n+        if (Version.getBuildType() == Version.Type.RELEASE) {\n+            centralRepoCheckAndSetup();\n+        }\n+        // now run regular module startup code\n+        try {\n+            CentralRepoDbManager.upgradeDatabase();\n+        } catch (CentralRepoException ex) {\n+            LOGGER.log(Level.SEVERE, \"There was an error while upgrading the central repository database\", ex);\n+            if (RuntimeProperties.runningWithGUI()) {", "originalCommit": "77a8bb89535e1ffd00163ea3509c864768907b89", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE5MTc1OA==", "url": "https://github.com/sleuthkit/autopsy/pull/5686#discussion_r389191758", "bodyText": "I'm going to accept this PR and put in the requested change (fix) in a separate PR for the sake of this weekend's automated testing.", "author": "rcordovano", "createdAt": "2020-03-06T23:27:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE2MTE0Ng=="}], "type": "inlineReview", "revised_code": null}]}