{"pr_number": 9367, "pr_title": "BAEL-3830: Test a mock JNDI datasource with Spring", "pr_createdAt": "2020-05-26T14:42:18Z", "pr_url": "https://github.com/eugenp/tutorials/pull/9367", "timeline": [{"oid": "ab86c28f75b6a7578fc3419ef4d46f3364d4a340", "url": "https://github.com/eugenp/tutorials/commit/ab86c28f75b6a7578fc3419ef4d46f3364d4a340", "message": "Add simple-jndi to pom.xml", "committedDate": "2020-05-26T14:32:56Z", "type": "commit"}, {"oid": "a3c6d32998616e550833a0484ec828f85920b5cb", "url": "https://github.com/eugenp/tutorials/commit/a3c6d32998616e550833a0484ec828f85920b5cb", "message": "Create datasource.properties file", "committedDate": "2020-05-26T14:34:02Z", "type": "commit"}, {"oid": "a98a3ad2601945c3b51827bf4c1f9804f8705501", "url": "https://github.com/eugenp/tutorials/commit/a98a3ad2601945c3b51827bf4c1f9804f8705501", "message": "Add unit tests", "committedDate": "2020-05-26T14:34:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ3NTY3MQ==", "url": "https://github.com/eugenp/tutorials/pull/9367#discussion_r433475671", "bodyText": "If we are going to use System properties shouldn't we reset them when the test tears down? We don't want any unexpected side effects when other tests run.", "author": "JonCook", "createdAt": "2020-06-01T20:37:34Z", "path": "persistence-modules/spring-persistence-simple-2/src/test/java/com/baeldung/jndi/datasource/SimpleJNDIUnitTest.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package com.baeldung.jndi.datasource;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+import javax.naming.Context;\n+import javax.naming.InitialContext;\n+import javax.sql.DataSource;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+public class SimpleJNDIUnitTest {\n+\n+    private InitialContext initContext;\n+\n+    @BeforeEach\n+    public void setup() throws Exception {\n+        System.setProperty(\"java.naming.factory.initial\", \"org.osjava.sj.SimpleContextFactory\");", "originalCommit": "a98a3ad2601945c3b51827bf4c1f9804f8705501", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzg1Mzk1Mg==", "url": "https://github.com/eugenp/tutorials/pull/9367#discussion_r433853952", "bodyText": "Done!", "author": "azhwani", "createdAt": "2020-06-02T12:57:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ3NTY3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "28316f347d4e9695456d1ae19df7f8c67cd77756", "chunk": "diff --git a/persistence-modules/spring-persistence-simple-2/src/test/java/com/baeldung/jndi/datasource/SimpleJNDIUnitTest.java b/persistence-modules/spring-persistence-simple-2/src/test/java/com/baeldung/jndi/datasource/SimpleJNDIUnitTest.java\nindex cf44de8618..f4122246fb 100644\n--- a/persistence-modules/spring-persistence-simple-2/src/test/java/com/baeldung/jndi/datasource/SimpleJNDIUnitTest.java\n+++ b/persistence-modules/spring-persistence-simple-2/src/test/java/com/baeldung/jndi/datasource/SimpleJNDIUnitTest.java\n\n@@ -6,6 +6,7 @@ import javax.naming.Context;\n import javax.naming.InitialContext;\n import javax.sql.DataSource;\n \n+import org.junit.jupiter.api.AfterEach;\n import org.junit.jupiter.api.BeforeEach;\n import org.junit.jupiter.api.Test;\n \n"}}, {"oid": "579bb8311511e107d164e3de2994663c08cd089f", "url": "https://github.com/eugenp/tutorials/commit/579bb8311511e107d164e3de2994663c08cd089f", "message": "remove tabs and extra spaces from pom.xml", "committedDate": "2020-06-02T12:28:02Z", "type": "commit"}, {"oid": "28316f347d4e9695456d1ae19df7f8c67cd77756", "url": "https://github.com/eugenp/tutorials/commit/28316f347d4e9695456d1ae19df7f8c67cd77756", "message": "clear System properties when the test tears down", "committedDate": "2020-06-02T12:37:36Z", "type": "commit"}, {"oid": "23a3ef44cddfadaa6619503a7da23cf289b6a441", "url": "https://github.com/eugenp/tutorials/commit/23a3ef44cddfadaa6619503a7da23cf289b6a441", "message": "remove tabs and extra spaces from pom.xml", "committedDate": "2020-06-02T12:48:46Z", "type": "commit"}, {"oid": "7e0bb5fc6a74ab470810d7fecd4ae6691bdd7527", "url": "https://github.com/eugenp/tutorials/commit/7e0bb5fc6a74ab470810d7fecd4ae6691bdd7527", "message": "remove tabs from pom.xml", "committedDate": "2020-06-02T12:54:10Z", "type": "commit"}, {"oid": "05aa9d10d57debbeb06d862ec1aca4707676a784", "url": "https://github.com/eugenp/tutorials/commit/05aa9d10d57debbeb06d862ec1aca4707676a784", "message": "add jndi.properties", "committedDate": "2020-06-09T22:31:44Z", "type": "commit"}, {"oid": "e2ffbddd5fec8681f0603580972298889844b8a9", "url": "https://github.com/eugenp/tutorials/commit/e2ffbddd5fec8681f0603580972298889844b8a9", "message": "remove System properties from unit tests", "committedDate": "2020-06-09T23:01:44Z", "type": "commit"}, {"oid": "9d0b6102c10e46e471823c370830e6196fe15e20", "url": "https://github.com/eugenp/tutorials/commit/9d0b6102c10e46e471823c370830e6196fe15e20", "message": "Add jndi.properties", "committedDate": "2020-06-09T23:20:45Z", "type": "commit"}, {"oid": "4c765cc34df2c69928ce1e1d65545038fedd14e1", "url": "https://github.com/eugenp/tutorials/commit/4c765cc34df2c69928ce1e1d65545038fedd14e1", "message": "quick update", "committedDate": "2020-06-09T23:33:21Z", "type": "commit"}, {"oid": "5d370c576d0b1c740a9402ebf64098e2ac032dbc", "url": "https://github.com/eugenp/tutorials/commit/5d370c576d0b1c740a9402ebf64098e2ac032dbc", "message": "update SimpleJNDIUnitTest", "committedDate": "2020-06-10T09:18:21Z", "type": "commit"}, {"oid": "bcb8e3e727bc5ddf8f149bdcf9829ac757f37e12", "url": "https://github.com/eugenp/tutorials/commit/bcb8e3e727bc5ddf8f149bdcf9829ac757f37e12", "message": "update SimpleJNDIUnitTest", "committedDate": "2020-06-10T09:34:38Z", "type": "commit"}, {"oid": "b3de6b90b789be1369f42ee2972d77fdaad24128", "url": "https://github.com/eugenp/tutorials/commit/b3de6b90b789be1369f42ee2972d77fdaad24128", "message": "update SimpleJNDIUnitTest", "committedDate": "2020-06-10T10:14:34Z", "type": "commit"}, {"oid": "5d460b654700069a81118a565b863053347f93d3", "url": "https://github.com/eugenp/tutorials/commit/5d460b654700069a81118a565b863053347f93d3", "message": "update jndi.properties", "committedDate": "2020-06-10T17:41:33Z", "type": "commit"}, {"oid": "da6b2a76a104114e180996cb4e95af26a653480a", "url": "https://github.com/eugenp/tutorials/commit/da6b2a76a104114e180996cb4e95af26a653480a", "message": "updating jndi.properties", "committedDate": "2020-06-10T17:46:08Z", "type": "commit"}, {"oid": "600553106805df1a129157211216132dab0b95b3", "url": "https://github.com/eugenp/tutorials/commit/600553106805df1a129157211216132dab0b95b3", "message": "update datasource.properties", "committedDate": "2020-06-10T17:54:37Z", "type": "commit"}, {"oid": "dbc58e61a740e24846ad8335bfdbc6a3dae2a25d", "url": "https://github.com/eugenp/tutorials/commit/dbc58e61a740e24846ad8335bfdbc6a3dae2a25d", "message": "updating jndi.properties", "committedDate": "2020-06-10T17:58:21Z", "type": "commit"}]}