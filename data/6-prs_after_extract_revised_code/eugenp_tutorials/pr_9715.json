{"pr_number": 9715, "pr_title": "BAEL-4077 JPA Entity Equality", "pr_createdAt": "2020-07-16T01:20:16Z", "pr_url": "https://github.com/eugenp/tutorials/pull/9715", "timeline": [{"oid": "cea985c818fd2195b149a3fb790206d822a8728f", "url": "https://github.com/eugenp/tutorials/commit/cea985c818fd2195b149a3fb790206d822a8728f", "message": "Add architecture module with Hexagonal example", "committedDate": "2020-05-27T22:20:42Z", "type": "commit"}, {"oid": "4ea7c19b9cf2cca0aec689f7b81dd27a26afdf16", "url": "https://github.com/eugenp/tutorials/commit/4ea7c19b9cf2cca0aec689f7b81dd27a26afdf16", "message": "Fixup styling", "committedDate": "2020-05-27T22:20:42Z", "type": "commit"}, {"oid": "486ac5b02d5bd30681b86b006a026f4c7247bc4d", "url": "https://github.com/eugenp/tutorials/commit/486ac5b02d5bd30681b86b006a026f4c7247bc4d", "message": "Fixup styling", "committedDate": "2020-05-27T22:20:42Z", "type": "commit"}, {"oid": "4300d98607e155714c5cb3cd28cf0275edef1ff1", "url": "https://github.com/eugenp/tutorials/commit/4300d98607e155714c5cb3cd28cf0275edef1ff1", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-13T17:55:41Z", "type": "commit"}, {"oid": "9e58105aa35ecbe5419bd75e7b2dd955f659f2ea", "url": "https://github.com/eugenp/tutorials/commit/9e58105aa35ecbe5419bd75e7b2dd955f659f2ea", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-05T04:11:27Z", "type": "commit"}, {"oid": "62eb29e6686b0a8b4411fbdd4ca3807daac0b56f", "url": "https://github.com/eugenp/tutorials/commit/62eb29e6686b0a8b4411fbdd4ca3807daac0b56f", "message": "BAEL-4007 Add jpa data equality unit test specs", "committedDate": "2020-07-16T00:53:23Z", "type": "commit"}, {"oid": "38d1750ee0898cc658465a0e04772287db0ab07b", "url": "https://github.com/eugenp/tutorials/commit/38d1750ee0898cc658465a0e04772287db0ab07b", "message": "Remove heagonal architecture", "committedDate": "2020-07-16T01:16:31Z", "type": "commit"}, {"oid": "bbb376649ae092c9f733248b4db9ae3abab4fbbd", "url": "https://github.com/eugenp/tutorials/commit/bbb376649ae092c9f733248b4db9ae3abab4fbbd", "message": "Merge pull request #3 from andrebrowne/BAEL-4077\n\nBAEL-4007 Add jpa data equality unit test specs", "committedDate": "2020-07-16T01:19:01Z", "type": "commit"}, {"oid": "c3390df9748c9a071ec0528ebe8ded9830564d69", "url": "https://github.com/eugenp/tutorials/commit/c3390df9748c9a071ec0528ebe8ded9830564d69", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-16T01:23:10Z", "type": "commit"}, {"oid": "9bdc52fe263914047e12c215e9ae3c3e37c32789", "url": "https://github.com/eugenp/tutorials/commit/9bdc52fe263914047e12c215e9ae3c3e37c32789", "message": "Merge branch 'master' of https://github.com/andrebrowne/tutorials", "committedDate": "2020-07-16T01:29:18Z", "type": "commit"}, {"oid": "a00ae301a990901716d3ffd0a49e757f6fb1b840", "url": "https://github.com/eugenp/tutorials/commit/a00ae301a990901716d3ffd0a49e757f6fb1b840", "message": "Simplify hashcode example", "committedDate": "2020-07-28T22:03:57Z", "type": "commit"}, {"oid": "bd0a7032fe6569f1c89778ed5cd192848988d4ca", "url": "https://github.com/eugenp/tutorials/commit/bd0a7032fe6569f1c89778ed5cd192848988d4ca", "message": "Remove metamodel plugin", "committedDate": "2020-07-28T22:40:29Z", "type": "commit"}, {"oid": "eafa45319d1c64434e154375f94a04e03642d351", "url": "https://github.com/eugenp/tutorials/commit/eafa45319d1c64434e154375f94a04e03642d351", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-28T22:43:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNDc1NQ==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r464024755", "bodyText": "Please use braces in all if/else blocks, even on one-liners, as this is considered a best practice.", "author": "KevinGilmore", "createdAt": "2020-08-02T03:10:16Z", "path": "persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByBusinessKey.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.baeldung.jpa.equality;\n+\n+import javax.persistence.*;\n+\n+@Entity\n+public class EqualByBusinessKey {\n+\n+    @Id\n+    @GeneratedValue(strategy = GenerationType.AUTO)\n+    private Long id;\n+\n+    private String email;\n+\n+    public EqualByBusinessKey() {\n+    }\n+\n+    public Long getId() {\n+        return id;\n+    }\n+\n+    public void setId(Long id) {\n+        this.id = id;\n+    }\n+\n+    public String getEmail() {\n+        return email;\n+    }\n+\n+    public void setEmail(String email) {\n+        this.email = email;\n+    }\n+\n+    @Override\n+    public int hashCode() {\n+        return java.util.Objects.hashCode(email);\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (this == obj)\n+            return true;\n+        if (obj == null)\n+            return false;\n+        if (obj instanceof EqualByBusinessKey)\n+            if (((EqualByBusinessKey) obj).getEmail() == getEmail())\n+                return true;", "originalCommit": "eafa45319d1c64434e154375f94a04e03642d351", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzUyMDUwOQ==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r467520509", "bodyText": "Fixed", "author": "andrebrowne", "createdAt": "2020-08-09T00:58:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNDc1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "9848d89bef15f719bcb785bde2048b3a096e2424", "chunk": "diff --git a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByBusinessKey.java b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByBusinessKey.java\nindex 78ba1ad1e9..655db4e575 100644\n--- a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByBusinessKey.java\n+++ b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByBusinessKey.java\n\n@@ -32,20 +32,25 @@ public class EqualByBusinessKey {\n \n     @Override\n     public int hashCode() {\n-        return java.util.Objects.hashCode(email);\n+        final int prime = 31;\n+        int result = 1;\n+        result = prime * result + ((email == null) ? 0 : email.hashCode());\n+        return result;\n     }\n \n     @Override\n     public boolean equals(Object obj) {\n-        if (this == obj)\n+        if (this == obj) {\n             return true;\n-        if (obj == null)\n+        }\n+        if (obj == null) {\n             return false;\n-        if (obj instanceof EqualByBusinessKey)\n-            if (((EqualByBusinessKey) obj).getEmail() == getEmail())\n+        }\n+        if (obj instanceof EqualByBusinessKey) {\n+            if (((EqualByBusinessKey) obj).getEmail() == getEmail()) {\n                 return true;\n-\n+            }\n+        }\n         return false;\n     }\n-\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNDc3Nw==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r464024777", "bodyText": "braces", "author": "KevinGilmore", "createdAt": "2020-08-02T03:10:32Z", "path": "persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.baeldung.jpa.equality;\n+\n+import javax.persistence.*;\n+\n+@Entity\n+public class EqualById {\n+\n+    @Id\n+    @GeneratedValue(strategy = GenerationType.AUTO)\n+    private Long id;\n+\n+    private String email;\n+\n+    public EqualById() {\n+    }\n+\n+    public Long getId() {\n+        return id;\n+    }\n+\n+    public void setId(Long id) {\n+        this.id = id;\n+    }\n+\n+    public String getEmail() {\n+        return email;\n+    }\n+\n+    public void setEmail(String email) {\n+        this.email = email;\n+    }\n+\n+\n+    @Override\n+    public int hashCode() {\n+        final int prime = 31;\n+        int result = 1;\n+        result = prime * result + ((id == null) ? 0 : id.hashCode());\n+        return result;\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (this == obj)\n+            return true;\n+        if (obj == null)\n+            return false;\n+        if (obj instanceof EqualById)\n+            return ((EqualById) obj).getId() == getId();", "originalCommit": "eafa45319d1c64434e154375f94a04e03642d351", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzUyMDUyNQ==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r467520525", "bodyText": "Fixed", "author": "andrebrowne", "createdAt": "2020-08-09T00:58:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNDc3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "9848d89bef15f719bcb785bde2048b3a096e2424", "chunk": "diff --git a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java\nindex f29a152f3e..cebfb5fcec 100644\n--- a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java\n+++ b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java\n\n@@ -41,14 +41,15 @@ public class EqualById {\n \n     @Override\n     public boolean equals(Object obj) {\n-        if (this == obj)\n+        if (this == obj) {\n             return true;\n-        if (obj == null)\n+        }\n+        if (obj == null) {\n             return false;\n-        if (obj instanceof EqualById)\n-            return ((EqualById) obj).getId() == getId();\n-\n+        }\n+        if (obj instanceof EqualById) {\n+            return ((EqualById) obj).getId().equals(getId());\n+        }\n         return false;\n     }\n-\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNDgyMA==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r464024820", "bodyText": "opening brace should be at end of a line but not on a line by itself", "author": "KevinGilmore", "createdAt": "2020-08-02T03:11:16Z", "path": "persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByJavaDefault.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.baeldung.jpa.equality;\n+\n+import javax.persistence.*;\n+\n+@Entity\n+public class EqualByJavaDefault implements Cloneable{\n+\n+    @Id\n+    @GeneratedValue(strategy = GenerationType.AUTO)\n+    private Long id;\n+\n+    private String email;\n+\n+    public EqualByJavaDefault() {\n+    }\n+\n+    public Long getId() {\n+        return id;\n+    }\n+\n+    public void setId(Long id) {\n+        this.id = id;\n+    }\n+\n+    public String getEmail() {\n+        return email;\n+    }\n+\n+    public void setEmail(String email) {\n+        this.email = email;\n+    }\n+\n+    public Object clone() throws\n+            CloneNotSupportedException\n+    {", "originalCommit": "eafa45319d1c64434e154375f94a04e03642d351", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzUyMDU0Nw==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r467520547", "bodyText": "Fixed", "author": "andrebrowne", "createdAt": "2020-08-09T00:58:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNDgyMA=="}], "type": "inlineReview", "revised_code": {"commit": "9848d89bef15f719bcb785bde2048b3a096e2424", "chunk": "diff --git a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByJavaDefault.java b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByJavaDefault.java\nindex 04a81865c6..b312845b61 100644\n--- a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByJavaDefault.java\n+++ b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualByJavaDefault.java\n\n@@ -30,9 +30,7 @@ public class EqualByJavaDefault implements Cloneable{\n         this.email = email;\n     }\n \n-    public Object clone() throws\n-            CloneNotSupportedException\n-    {\n+    public Object clone() throws CloneNotSupportedException {\n         return super.clone();\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNjQ5OA==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r464026498", "bodyText": "For wrapper classes, the == operator would only return true for values in the range -127 to 127. Should use the equals method to compare the ids.", "author": "KevinGilmore", "createdAt": "2020-08-02T03:36:35Z", "path": "persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.baeldung.jpa.equality;\n+\n+import javax.persistence.*;\n+\n+@Entity\n+public class EqualById {\n+\n+    @Id\n+    @GeneratedValue(strategy = GenerationType.AUTO)\n+    private Long id;\n+\n+    private String email;\n+\n+    public EqualById() {\n+    }\n+\n+    public Long getId() {\n+        return id;\n+    }\n+\n+    public void setId(Long id) {\n+        this.id = id;\n+    }\n+\n+    public String getEmail() {\n+        return email;\n+    }\n+\n+    public void setEmail(String email) {\n+        this.email = email;\n+    }\n+\n+\n+    @Override\n+    public int hashCode() {\n+        final int prime = 31;\n+        int result = 1;\n+        result = prime * result + ((id == null) ? 0 : id.hashCode());\n+        return result;\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (this == obj)\n+            return true;\n+        if (obj == null)\n+            return false;\n+        if (obj instanceof EqualById)\n+            return ((EqualById) obj).getId() == getId();", "originalCommit": "eafa45319d1c64434e154375f94a04e03642d351", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzUyMDg2Mg==", "url": "https://github.com/eugenp/tutorials/pull/9715#discussion_r467520862", "bodyText": "Fixed", "author": "andrebrowne", "createdAt": "2020-08-09T01:03:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDAyNjQ5OA=="}], "type": "inlineReview", "revised_code": {"commit": "9848d89bef15f719bcb785bde2048b3a096e2424", "chunk": "diff --git a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java\nindex f29a152f3e..cebfb5fcec 100644\n--- a/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java\n+++ b/persistence-modules/java-jpa-3/src/main/java/com/baeldung/jpa/equality/EqualById.java\n\n@@ -41,14 +41,15 @@ public class EqualById {\n \n     @Override\n     public boolean equals(Object obj) {\n-        if (this == obj)\n+        if (this == obj) {\n             return true;\n-        if (obj == null)\n+        }\n+        if (obj == null) {\n             return false;\n-        if (obj instanceof EqualById)\n-            return ((EqualById) obj).getId() == getId();\n-\n+        }\n+        if (obj instanceof EqualById) {\n+            return ((EqualById) obj).getId().equals(getId());\n+        }\n         return false;\n     }\n-\n }\n"}}, {"oid": "1a6f893831e043fccdcb7a13ca1e0f2b32d55b03", "url": "https://github.com/eugenp/tutorials/commit/1a6f893831e043fccdcb7a13ca1e0f2b32d55b03", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-08T23:49:42Z", "type": "commit"}, {"oid": "9848d89bef15f719bcb785bde2048b3a096e2424", "url": "https://github.com/eugenp/tutorials/commit/9848d89bef15f719bcb785bde2048b3a096e2424", "message": "BAEL-4077 Fixup styling", "committedDate": "2020-08-09T01:05:32Z", "type": "commit"}, {"oid": "9bb40073b6dd83b1753b7c90fa2eabce4cc30414", "url": "https://github.com/eugenp/tutorials/commit/9bb40073b6dd83b1753b7c90fa2eabce4cc30414", "message": "Merge branch 'BAEL-4077'", "committedDate": "2020-08-09T01:06:36Z", "type": "commit"}, {"oid": "dae8e088ac80cd9b6160cc73a53ce65a99860a83", "url": "https://github.com/eugenp/tutorials/commit/dae8e088ac80cd9b6160cc73a53ce65a99860a83", "message": "BAEL-4077 Fixup styling", "committedDate": "2020-08-09T01:14:25Z", "type": "commit"}, {"oid": "b226283b38d4766bfcce52b6f3605f7fbe9dd350", "url": "https://github.com/eugenp/tutorials/commit/b226283b38d4766bfcce52b6f3605f7fbe9dd350", "message": "Merge branch 'BAEL-4077'", "committedDate": "2020-08-09T01:16:30Z", "type": "commit"}]}