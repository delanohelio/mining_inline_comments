{"pr_number": 9795, "pr_title": "BAEL-4250: boolean[] vs. BitSet: Which is more efficient?", "pr_createdAt": "2020-07-30T17:23:56Z", "pr_url": "https://github.com/eugenp/tutorials/pull/9795", "timeline": [{"oid": "d902eeb7428fc66ebf491cce1ca935d585be69ce", "url": "https://github.com/eugenp/tutorials/commit/d902eeb7428fc66ebf491cce1ca935d585be69ce", "message": "boolean[] vs. BitSet: Which is more efficient?", "committedDate": "2020-07-30T17:22:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkxNDk4OQ==", "url": "https://github.com/eugenp/tutorials/pull/9795#discussion_r463914989", "bodyText": "if () {\n//\n}", "author": "eric-martin", "createdAt": "2020-08-01T03:18:00Z", "path": "jmh/src/main/java/com/baeldung/bitset/Plotter.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package com.baeldung.bitset;\n+\n+import org.openjdk.jol.info.ClassLayout;\n+import org.openjdk.jol.info.GraphLayout;\n+\n+import java.io.BufferedWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.nio.file.StandardOpenOption;\n+import java.util.BitSet;\n+\n+public class Plotter {\n+\n+    public static void main(String[] args) throws IOException {\n+        Path path = Paths.get(\"footprint.csv\");\n+        try (BufferedWriter stream = Files.newBufferedWriter(path, StandardOpenOption.CREATE)) {\n+            stream.write(\"bits,bool,bitset\\n\");\n+\n+            for (int i = 0; i <= 10_000_000; i += 500) {\n+                System.out.println(\"Number of bits => \" + i);\n+\n+                boolean[] ba = new boolean[i];\n+                BitSet bitSet = new BitSet(i);\n+\n+                long baSize = ClassLayout.parseInstance(ba).instanceSize();\n+                long bitSetSize = GraphLayout.parseInstance(bitSet).totalSize();\n+\n+                stream.write((i + \",\" + baSize + \",\" + bitSetSize + \"\\n\"));\n+\n+                if (i % 10_000 == 0) stream.flush();", "originalCommit": "d902eeb7428fc66ebf491cce1ca935d585be69ce", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2a958614ee7d8c4d87101bf7aa36c5cc5012c5a9", "chunk": "diff --git a/jmh/src/main/java/com/baeldung/bitset/Plotter.java b/jmh/src/main/java/com/baeldung/bitset/Plotter.java\nindex beb136f515..0d065ea185 100644\n--- a/jmh/src/main/java/com/baeldung/bitset/Plotter.java\n+++ b/jmh/src/main/java/com/baeldung/bitset/Plotter.java\n\n@@ -29,7 +29,9 @@ public class Plotter {\n \n                 stream.write((i + \",\" + baSize + \",\" + bitSetSize + \"\\n\"));\n \n-                if (i % 10_000 == 0) stream.flush();\n+                if (i % 10_000 == 0) {\n+                    stream.flush();\n+                }\n             }\n         }\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkxNTAyMQ==", "url": "https://github.com/eugenp/tutorials/pull/9795#discussion_r463915021", "bodyText": "two space indent on the continuation", "author": "eric-martin", "createdAt": "2020-08-01T03:18:33Z", "path": "jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package com.baeldung.bitset;\n+\n+import org.openjdk.jmh.annotations.Benchmark;\n+import org.openjdk.jmh.annotations.BenchmarkMode;\n+import org.openjdk.jmh.annotations.Level;\n+import org.openjdk.jmh.annotations.Mode;\n+import org.openjdk.jmh.annotations.Param;\n+import org.openjdk.jmh.annotations.Scope;\n+import org.openjdk.jmh.annotations.Setup;\n+import org.openjdk.jmh.annotations.State;\n+\n+import java.util.BitSet;\n+import java.util.concurrent.ThreadLocalRandom;\n+\n+@State(Scope.Benchmark)\n+@BenchmarkMode(Mode.Throughput)\n+public class VectorOfBitsBenchmark {\n+\n+    private boolean[] array;\n+    private BitSet bitSet;\n+\n+    @Param({\"100\", \"1000\", \"5000\", \"50000\", \"100000\", \"1000000\", \"2000000\", \"3000000\",\n+             \"5000000\", \"7000000\", \"10000000\", \"20000000\", \"30000000\", \"50000000\", \"70000000\", \"1000000000\"})", "originalCommit": "d902eeb7428fc66ebf491cce1ca935d585be69ce", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2a958614ee7d8c4d87101bf7aa36c5cc5012c5a9", "chunk": "diff --git a/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java b/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java\nindex 8949d4e117..7bbf00f36c 100644\n--- a/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java\n+++ b/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java\n\n@@ -19,8 +19,8 @@ public class VectorOfBitsBenchmark {\n     private boolean[] array;\n     private BitSet bitSet;\n \n-    @Param({\"100\", \"1000\", \"5000\", \"50000\", \"100000\", \"1000000\", \"2000000\", \"3000000\",\n-             \"5000000\", \"7000000\", \"10000000\", \"20000000\", \"30000000\", \"50000000\", \"70000000\", \"1000000000\"})\n+    @Param({\"100\", \"1000\", \"5000\", \"50000\", \"100000\", \"1000000\", \"2000000\", \"3000000\", \"5000000\",\n+      \"7000000\", \"10000000\", \"20000000\", \"30000000\", \"50000000\", \"70000000\", \"1000000000\"})\n     public int size;\n \n     @Setup(Level.Trial)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkxNTA0Ng==", "url": "https://github.com/eugenp/tutorials/pull/9795#discussion_r463915046", "bodyText": "if () {\n//\n}", "author": "eric-martin", "createdAt": "2020-08-01T03:18:53Z", "path": "jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package com.baeldung.bitset;\n+\n+import org.openjdk.jmh.annotations.Benchmark;\n+import org.openjdk.jmh.annotations.BenchmarkMode;\n+import org.openjdk.jmh.annotations.Level;\n+import org.openjdk.jmh.annotations.Mode;\n+import org.openjdk.jmh.annotations.Param;\n+import org.openjdk.jmh.annotations.Scope;\n+import org.openjdk.jmh.annotations.Setup;\n+import org.openjdk.jmh.annotations.State;\n+\n+import java.util.BitSet;\n+import java.util.concurrent.ThreadLocalRandom;\n+\n+@State(Scope.Benchmark)\n+@BenchmarkMode(Mode.Throughput)\n+public class VectorOfBitsBenchmark {\n+\n+    private boolean[] array;\n+    private BitSet bitSet;\n+\n+    @Param({\"100\", \"1000\", \"5000\", \"50000\", \"100000\", \"1000000\", \"2000000\", \"3000000\",\n+             \"5000000\", \"7000000\", \"10000000\", \"20000000\", \"30000000\", \"50000000\", \"70000000\", \"1000000000\"})\n+    public int size;\n+\n+    @Setup(Level.Trial)\n+    public void setUp() {\n+        array = new boolean[size];\n+        for (int i = 0; i < array.length; i++) {\n+            array[i] = ThreadLocalRandom.current().nextBoolean();\n+        }\n+\n+        bitSet = new BitSet(size);\n+        for (int i = 0; i < size; i++) {\n+            bitSet.set(i, ThreadLocalRandom.current().nextBoolean());\n+        }\n+    }\n+\n+    @Benchmark\n+    public boolean getBoolArray() {\n+        return array[ThreadLocalRandom.current().nextInt(size)];\n+    }\n+\n+    @Benchmark\n+    public boolean getBitSet() {\n+        return bitSet.get(ThreadLocalRandom.current().nextInt(size));\n+    }\n+\n+    @Benchmark\n+    public void setBoolArray() {\n+        int index = ThreadLocalRandom.current().nextInt(size);\n+        array[index] = true;\n+    }\n+\n+    @Benchmark\n+    public void setBitSet() {\n+        int index = ThreadLocalRandom.current().nextInt(size);\n+        bitSet.set(index);\n+    }\n+\n+    @Benchmark\n+    public int cardinalityBoolArray() {\n+        int sum = 0;\n+        for (boolean b : array) {\n+            if (b) sum++;", "originalCommit": "d902eeb7428fc66ebf491cce1ca935d585be69ce", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2a958614ee7d8c4d87101bf7aa36c5cc5012c5a9", "chunk": "diff --git a/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java b/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java\nindex 8949d4e117..7bbf00f36c 100644\n--- a/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java\n+++ b/jmh/src/main/java/com/baeldung/bitset/VectorOfBitsBenchmark.java\n\n@@ -19,8 +19,8 @@ public class VectorOfBitsBenchmark {\n     private boolean[] array;\n     private BitSet bitSet;\n \n-    @Param({\"100\", \"1000\", \"5000\", \"50000\", \"100000\", \"1000000\", \"2000000\", \"3000000\",\n-             \"5000000\", \"7000000\", \"10000000\", \"20000000\", \"30000000\", \"50000000\", \"70000000\", \"1000000000\"})\n+    @Param({\"100\", \"1000\", \"5000\", \"50000\", \"100000\", \"1000000\", \"2000000\", \"3000000\", \"5000000\",\n+      \"7000000\", \"10000000\", \"20000000\", \"30000000\", \"50000000\", \"70000000\", \"1000000000\"})\n     public int size;\n \n     @Setup(Level.Trial)\n"}}, {"oid": "2a958614ee7d8c4d87101bf7aa36c5cc5012c5a9", "url": "https://github.com/eugenp/tutorials/commit/2a958614ee7d8c4d87101bf7aa36c5cc5012c5a9", "message": "Resolved the Comments", "committedDate": "2020-08-01T16:10:45Z", "type": "commit"}]}