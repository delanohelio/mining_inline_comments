{"pr_number": 812, "pr_title": "[Autorest.Android]: Test error response", "pr_createdAt": "2020-11-25T01:45:08Z", "pr_url": "https://github.com/Azure/autorest.java/pull/812", "timeline": [{"oid": "644ac6844c0fe7be74bffcebcd954c077e79c90d", "url": "https://github.com/Azure/autorest.java/commit/644ac6844c0fe7be74bffcebcd954c077e79c90d", "message": "Create a baseline for host mapping hack", "committedDate": "2020-11-25T01:16:23Z", "type": "commit"}, {"oid": "ee3b8eace80762bb39a0e727fc2684ada55c24e3", "url": "https://github.com/Azure/autorest.java/commit/ee3b8eace80762bb39a0e727fc2684ada55c24e3", "message": "Move all hacks to HostMapping", "committedDate": "2020-11-25T01:18:27Z", "type": "commit"}, {"oid": "9b65eb47237e1e1493608a164d6d7e48a7e5f919", "url": "https://github.com/Azure/autorest.java/commit/9b65eb47237e1e1493608a164d6d7e48a7e5f919", "message": "Remove redundant const definition from AndroidEmbeddedBuilderTemplate", "committedDate": "2020-11-25T01:19:27Z", "type": "commit"}, {"oid": "a50d26a7763713f34d2f9456b979ebe4ed628b58", "url": "https://github.com/Azure/autorest.java/commit/a50d26a7763713f34d2f9456b979ebe4ed628b58", "message": "Delete AndroidServiceClientBuilderTemplate", "committedDate": "2020-11-25T01:19:34Z", "type": "commit"}, {"oid": "2491c6480482d7fb4fc4cf41bb8f98f1a1b60293", "url": "https://github.com/Azure/autorest.java/commit/2491c6480482d7fb4fc4cf41bb8f98f1a1b60293", "message": "Remove host parameter from client methods", "committedDate": "2020-11-25T01:23:10Z", "type": "commit"}, {"oid": "0c91a1433f6b3b3834cc042db1221ae278a99cbc", "url": "https://github.com/Azure/autorest.java/commit/0c91a1433f6b3b3834cc042db1221ae278a99cbc", "message": "Fix import *", "committedDate": "2020-11-25T01:25:39Z", "type": "commit"}, {"oid": "3534bff9c9049af6c85bacacfa958ff36c0df212", "url": "https://github.com/Azure/autorest.java/commit/3534bff9c9049af6c85bacacfa958ff36c0df212", "message": "Generated compilable code", "committedDate": "2020-11-25T01:25:44Z", "type": "commit"}, {"oid": "6e90937f82ff905173c2bc1df7cd1f31c8638da8", "url": "https://github.com/Azure/autorest.java/commit/6e90937f82ff905173c2bc1df7cd1f31c8638da8", "message": "Add sync client tests", "committedDate": "2020-11-25T01:25:44Z", "type": "commit"}, {"oid": "4602044de3155d17e46ca18f99afa4a7384255eb", "url": "https://github.com/Azure/autorest.java/commit/4602044de3155d17e46ca18f99afa4a7384255eb", "message": "Rebase from android-v4", "committedDate": "2020-11-25T01:40:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDA3NjgzMQ==", "url": "https://github.com/Azure/autorest.java/pull/812#discussion_r530076831", "bodyText": "Why do we need to filter for ObjectSchema? Does this have an -ve impact on the way core java-gen produces code?", "author": "anuchandy", "createdAt": "2020-11-25T02:59:31Z", "path": "javagen/src/main/java/com/azure/autorest/mapper/ClientMapper.java", "diffHunk": "@@ -71,6 +71,7 @@ public Client map(CodeModel codeModel) {\n                 .flatMap(og -> og.getOperations().stream())\n                 .flatMap(o -> o.getExceptions().stream())\n                 .map(Response::getSchema)\n+                .filter(s -> s instanceof ObjectSchema)", "originalCommit": "4602044de3155d17e46ca18f99afa4a7384255eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU0MTQxNw==", "url": "https://github.com/Azure/autorest.java/pull/812#discussion_r530541417", "bodyText": "Because there is a down case two lines after\n\n.map(s -> Mappers.getExceptionMapper().map((ObjectSchema) s))\n\nwhich will fail when Response:getSchema returns String.", "author": "JianpingChen", "createdAt": "2020-11-25T17:32:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDA3NjgzMQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDA3OTM0OA==", "url": "https://github.com/Azure/autorest.java/pull/812#discussion_r530079348", "bodyText": "What makes android different from Java which requires special handling for string type?", "author": "anuchandy", "createdAt": "2020-11-25T03:09:09Z", "path": "javagen/src/main/java/com/azure/autorest/mapper/ProxyMethodMapper.java", "diffHunk": "@@ -193,6 +193,10 @@ protected void buildUnexpectedResponseExceptionTypes(ProxyMethod.Builder builder\n         }\n \n         if (errorType != null) {\n+            if (errorType.equals(ClassType.String)){\n+                builder.unexpectedResponseExceptionType(getExceptionTypeForString(errorType));\n+                return;\n+            }", "originalCommit": "4602044de3155d17e46ca18f99afa4a7384255eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU0NDQ0Mw==", "url": "https://github.com/Azure/autorest.java/pull/812#discussion_r530544443", "bodyText": "On Android we'd throw this exception.\n\ncom.azure.android.core.http.exception.HttpResponseException\n\nFor normal Java, it'll throw\n\ncom.azure.core.exception.HttpResponseException", "author": "JianpingChen", "createdAt": "2020-11-25T17:38:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDA3OTM0OA=="}], "type": "inlineReview", "revised_code": null}]}