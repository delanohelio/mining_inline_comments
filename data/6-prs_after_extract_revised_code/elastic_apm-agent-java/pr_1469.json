{"pr_number": 1469, "pr_title": "Fix attach external config", "pr_createdAt": "2020-11-02T16:34:20Z", "pr_url": "https://github.com/elastic/apm-agent-java/pull/1469", "timeline": [{"oid": "71914edae487da862f5a0f07651e746515e89f95", "url": "https://github.com/elastic/apm-agent-java/commit/71914edae487da862f5a0f07651e746515e89f95", "message": "load external config on runtime attach", "committedDate": "2020-11-02T15:53:39Z", "type": "commit"}, {"oid": "0c045844432fb2a30cfd589fcb5d4c5edbc43a26", "url": "https://github.com/elastic/apm-agent-java/commit/0c045844432fb2a30cfd589fcb5d4c5edbc43a26", "message": "add proper tests", "committedDate": "2020-11-02T16:25:21Z", "type": "commit"}, {"oid": "d6892de54e5d70153fbea2e620efea4765256200", "url": "https://github.com/elastic/apm-agent-java/commit/d6892de54e5d70153fbea2e620efea4765256200", "message": "code cleanup", "committedDate": "2020-11-02T16:26:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjEwMTQwMQ==", "url": "https://github.com/elastic/apm-agent-java/pull/1469#discussion_r516101401", "bodyText": "use try-with-resources", "author": "felixbarny", "createdAt": "2020-11-02T16:37:42Z", "path": "apm-agent-attach/src/main/java/co/elastic/apm/attach/ElasticApmAttacher.java", "diffHunk": "@@ -130,6 +137,24 @@ static File createTempProperties(Map<String, String> configuration) {\n         return tempFile;\n     }\n \n+    private static void loadExternalProperties(Properties properties, String externalProperties) {\n+        FileInputStream stream = null;\n+        try {", "originalCommit": "d6892de54e5d70153fbea2e620efea4765256200", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjExMTUzMw==", "url": "https://github.com/elastic/apm-agent-java/pull/1469#discussion_r516111533", "bodyText": "Thanks, I always forget that one !", "author": "SylvainJuge", "createdAt": "2020-11-02T16:51:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjEwMTQwMQ=="}], "type": "inlineReview", "revised_code": {"commit": "d9354b58e4b4eeb1bf59cb04c5bd83c4685664c1", "chunk": "diff --git a/apm-agent-attach/src/main/java/co/elastic/apm/attach/ElasticApmAttacher.java b/apm-agent-attach/src/main/java/co/elastic/apm/attach/ElasticApmAttacher.java\nindex c4b5f76c9..3805405f2 100644\n--- a/apm-agent-attach/src/main/java/co/elastic/apm/attach/ElasticApmAttacher.java\n+++ b/apm-agent-attach/src/main/java/co/elastic/apm/attach/ElasticApmAttacher.java\n\n@@ -137,24 +141,6 @@ public class ElasticApmAttacher {\n         return tempFile;\n     }\n \n-    private static void loadExternalProperties(Properties properties, String externalProperties) {\n-        FileInputStream stream = null;\n-        try {\n-            stream = new FileInputStream(externalProperties);\n-            properties.load(stream);\n-        } catch (IOException e) {\n-            e.printStackTrace();\n-        } finally {\n-            if (stream != null) {\n-                try {\n-                    stream.close();\n-                } catch (IOException e) {\n-                    // silenty ignored\n-                }\n-            }\n-        }\n-    }\n-\n     static String toAgentArgs(Map<String, String> configuration) {\n         StringBuilder args = new StringBuilder();\n         for (Iterator<Map.Entry<String, String>> iterator = configuration.entrySet().iterator(); iterator.hasNext(); ) {\n"}}, {"oid": "2887814c91a5c84b745ababd299a0419f89165b0", "url": "https://github.com/elastic/apm-agent-java/commit/2887814c91a5c84b745ababd299a0419f89165b0", "message": "add test for overriding", "committedDate": "2020-11-02T16:41:10Z", "type": "commit"}, {"oid": "8225cf7132d1e72d11bd605988e5706f800c1a7a", "url": "https://github.com/elastic/apm-agent-java/commit/8225cf7132d1e72d11bd605988e5706f800c1a7a", "message": "update documentation for config order", "committedDate": "2020-11-02T16:41:30Z", "type": "commit"}, {"oid": "d9354b58e4b4eeb1bf59cb04c5bd83c4685664c1", "url": "https://github.com/elastic/apm-agent-java/commit/d9354b58e4b4eeb1bf59cb04c5bd83c4685664c1", "message": "use try-with-resources", "committedDate": "2020-11-02T16:51:05Z", "type": "commit"}, {"oid": "2afadfd9637bd8b48655c26729b6057289e563b8", "url": "https://github.com/elastic/apm-agent-java/commit/2afadfd9637bd8b48655c26729b6057289e563b8", "message": "update changelog", "committedDate": "2020-11-02T17:09:59Z", "type": "commit"}, {"oid": "f44efcfe81a505ffe953b85786f6a5adb15683b7", "url": "https://github.com/elastic/apm-agent-java/commit/f44efcfe81a505ffe953b85786f6a5adb15683b7", "message": "fix generated doc", "committedDate": "2020-11-02T20:42:17Z", "type": "commit"}, {"oid": "c7b1997e805f7d65a543c09bf469dda3a93c9e9f", "url": "https://github.com/elastic/apm-agent-java/commit/c7b1997e805f7d65a543c09bf469dda3a93c9e9f", "message": "fix proper ordering for parameters", "committedDate": "2020-11-03T08:44:20Z", "type": "commit"}]}