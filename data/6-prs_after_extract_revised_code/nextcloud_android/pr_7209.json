{"pr_number": 7209, "pr_title": "Drop NC13-NC15", "pr_createdAt": "2020-11-02T09:41:48Z", "pr_url": "https://github.com/nextcloud/android/pull/7209", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyNzIyNQ==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516027225", "bodyText": "we can probably just have this set to visible in the layout file itself?", "author": "AndyScherzinger", "createdAt": "2020-11-02T14:55:13Z", "path": "src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java", "diffHunk": "@@ -351,7 +351,7 @@ public void prepareUserOptionsMenu(Menu menu, OCShare share) {\n                                                       share.getExpirationDate(),\n                                                       getResources());\n \n-        sendNoteItem.setVisible(capabilities.getVersion().isNoteOnShareSupported());\n+        sendNoteItem.setVisible(true);", "originalCommit": "b5dae09be32cd708db4afb4efaaa63aceeb20765", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU1NTM4MQ==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516555381", "bodyText": "I have to verify if this is not set to visible somewhere else, e.g. when group shares, etc.", "author": "tobiasKaminsky", "createdAt": "2020-11-03T10:14:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyNzIyNQ=="}], "type": "inlineReview", "revised_code": {"commit": "77751da6b8cc59dec2bf59941c407adc62aa862c", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java b/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java\nindex 5e4d21754..5ccd74586 100644\n--- a/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java\n\n@@ -350,8 +349,6 @@ public class FileDetailSharingFragment extends Fragment implements ShareeListAda\n         SharingMenuHelper.setupExpirationDateMenuItem(menu.findItem(R.id.action_expiration_date),\n                                                       share.getExpirationDate(),\n                                                       getResources());\n-\n-        sendNoteItem.setVisible(true);\n     }\n \n     public void showLinkOverflowMenu(OCShare publicShare, ImageView overflowMenuShareLink) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyNzQ5Ng==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516027496", "bodyText": "if always visible we don't need the call at all", "author": "AndyScherzinger", "createdAt": "2020-11-02T14:55:36Z", "path": "src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java", "diffHunk": "@@ -409,7 +408,7 @@ public void prepareLinkOptionsMenu(Menu menu, OCShare publicShare) {\n                                                       publicShare.getExpirationDate(),\n                                                       res);\n \n-        menu.findItem(R.id.action_share_send_note).setVisible(capabilities.getVersion().isNoteOnShareSupported());\n+        menu.findItem(R.id.action_share_send_note).setVisible(true);", "originalCommit": "b5dae09be32cd708db4afb4efaaa63aceeb20765", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "77751da6b8cc59dec2bf59941c407adc62aa862c", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java b/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java\nindex 5e4d21754..5ccd74586 100644\n--- a/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/fragment/FileDetailSharingFragment.java\n\n@@ -407,8 +404,6 @@ public class FileDetailSharingFragment extends Fragment implements ShareeListAda\n         SharingMenuHelper.setupExpirationDateMenuItem(menu.findItem(R.id.action_share_expiration_date),\n                                                       publicShare.getExpirationDate(),\n                                                       res);\n-\n-        menu.findItem(R.id.action_share_send_note).setVisible(true);\n     }\n \n     @VisibleForTesting\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyNzg3Nw==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516027877", "bodyText": "in case it is always supported now: drop the parameter completely", "author": "AndyScherzinger", "createdAt": "2020-11-02T14:56:09Z", "path": "src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java", "diffHunk": "@@ -694,10 +693,7 @@ public boolean onPrepareActionMode(ActionMode mode, Menu menu) {\n                 accountManager.getUser()\n             );\n \n-            final boolean isMediaStreamingSupported = currentUser.getServer().getVersion().isMediaStreamingSupported();\n-            mf.filter(menu,\n-                      false,\n-                      isMediaStreamingSupported);\n+            mf.filter(menu, false, true);", "originalCommit": "b5dae09be32cd708db4afb4efaaa63aceeb20765", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "77751da6b8cc59dec2bf59941c407adc62aa862c", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java b/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java\nindex 26b0deb83..c05a69279 100644\n--- a/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java\n\n@@ -693,7 +689,7 @@ public class OCFileListFragment extends ExtendedListFragment implements\n                 accountManager.getUser()\n             );\n \n-            mf.filter(menu, false, true);\n+            mf.filter(menu, false);\n \n             // Determine if we need to finish the action mode because there are no items selected\n             if (checkedCount == 0 && !mIsActionModeNew) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyODE0MQ==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516028141", "bodyText": "same here", "author": "AndyScherzinger", "createdAt": "2020-11-02T14:56:28Z", "path": "src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java", "diffHunk": "@@ -385,7 +385,7 @@ public void onPrepareOptionsMenu(@NonNull Menu menu) {\n \n             mf.filter(menu,\n                       true,\n-                      currentUser.getServer().getVersion().isMediaStreamingSupported());\n+                      true);", "originalCommit": "b5dae09be32cd708db4afb4efaaa63aceeb20765", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "77751da6b8cc59dec2bf59941c407adc62aa862c", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java b/src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java\nindex 73c74e9f6..b91bf45d2 100644\n--- a/src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java\n\n@@ -383,9 +383,7 @@ public class PreviewImageFragment extends FileFragment implements Injectable {\n                 currentUser\n             );\n \n-            mf.filter(menu,\n-                      true,\n-                      true);\n+            mf.filter(menu, true);\n         }\n \n         // additional restriction for this fragment\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyODIyMg==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516028222", "bodyText": "and here", "author": "AndyScherzinger", "createdAt": "2020-11-02T14:56:35Z", "path": "src/main/java/com/owncloud/android/ui/preview/PreviewMediaFragment.java", "diffHunk": "@@ -356,9 +356,7 @@ public void onPrepareOptionsMenu(Menu menu) {\n                 currentUser\n             );\n \n-            mf.filter(menu,\n-                      true,\n-                      currentUser.getServer().getVersion().isMediaStreamingSupported());\n+            mf.filter(menu, true, true);", "originalCommit": "b5dae09be32cd708db4afb4efaaa63aceeb20765", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "77751da6b8cc59dec2bf59941c407adc62aa862c", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/preview/PreviewMediaFragment.java b/src/main/java/com/owncloud/android/ui/preview/PreviewMediaFragment.java\nindex 97fa6829b..bd57c3728 100644\n--- a/src/main/java/com/owncloud/android/ui/preview/PreviewMediaFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/preview/PreviewMediaFragment.java\n\n@@ -356,7 +356,7 @@ public class PreviewMediaFragment extends FileFragment implements OnTouchListene\n                 currentUser\n             );\n \n-            mf.filter(menu, true, true);\n+            mf.filter(menu, true);\n         }\n \n         // additional restriction for this fragment\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAyODI5MA==", "url": "https://github.com/nextcloud/android/pull/7209#discussion_r516028290", "bodyText": "and here", "author": "AndyScherzinger", "createdAt": "2020-11-02T14:56:42Z", "path": "src/main/java/com/owncloud/android/ui/preview/PreviewTextFileFragment.java", "diffHunk": "@@ -270,9 +270,7 @@ public void onPrepareOptionsMenu(@NonNull Menu menu) {\n                 deviceInfo,\n                 user\n             );\n-            mf.filter(menu,\n-                      true,\n-                      user.getServer().getVersion().isMediaStreamingSupported());\n+            mf.filter(menu, true, true);", "originalCommit": "b5dae09be32cd708db4afb4efaaa63aceeb20765", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "77751da6b8cc59dec2bf59941c407adc62aa862c", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/preview/PreviewTextFileFragment.java b/src/main/java/com/owncloud/android/ui/preview/PreviewTextFileFragment.java\nindex 4c674986d..8823333db 100644\n--- a/src/main/java/com/owncloud/android/ui/preview/PreviewTextFileFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/preview/PreviewTextFileFragment.java\n\n@@ -270,7 +270,7 @@ public class PreviewTextFileFragment extends PreviewTextFragment {\n                 deviceInfo,\n                 user\n             );\n-            mf.filter(menu, true, true);\n+            mf.filter(menu, true);\n         }\n \n         // additional restriction for this fragment\n"}}, {"oid": "482e7469b9d0c3381005ca85307fe8ca27d37e4a", "url": "https://github.com/nextcloud/android/commit/482e7469b9d0c3381005ca85307fe8ca27d37e4a", "message": "in 204 endpoint there is no maintenance:false\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-11-03T09:44:53Z", "type": "forcePushed"}, {"oid": "16997601fcb84de844f17bb44a58e421f13ac24e", "url": "https://github.com/nextcloud/android/commit/16997601fcb84de844f17bb44a58e421f13ac24e", "message": "Drop NC13-NC15\nin 204 endpoint there is no maintenance:false\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-11-03T09:46:50Z", "type": "commit"}, {"oid": "16997601fcb84de844f17bb44a58e421f13ac24e", "url": "https://github.com/nextcloud/android/commit/16997601fcb84de844f17bb44a58e421f13ac24e", "message": "Drop NC13-NC15\nin 204 endpoint there is no maintenance:false\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-11-03T09:46:50Z", "type": "forcePushed"}, {"oid": "77751da6b8cc59dec2bf59941c407adc62aa862c", "url": "https://github.com/nextcloud/android/commit/77751da6b8cc59dec2bf59941c407adc62aa862c", "message": "Changes due to CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-11-03T10:24:08Z", "type": "commit"}]}