{"pr_number": 7246, "pr_title": "Reset eTag so that capability get parsed again, so status is set", "pr_createdAt": "2020-11-06T14:36:08Z", "pr_url": "https://github.com/nextcloud/android/pull/7246", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyMjQxNw==", "url": "https://github.com/nextcloud/android/pull/7246#discussion_r518822417", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            Log_OC.i(SQL, \"Entering in the #60 reset eTag to force capability refresh\");\n          \n          \n            \n                            Log_OC.i(SQL, \"Entering in the #61 reset eTag to force capability refresh\");", "author": "AndyScherzinger", "createdAt": "2020-11-06T15:23:49Z", "path": "src/main/java/com/owncloud/android/providers/FileContentProvider.java", "diffHunk": "@@ -2288,6 +2288,23 @@ public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n             if (!upgraded) {\n                 Log_OC.i(SQL, String.format(Locale.ENGLISH, UPGRADE_VERSION_MSG, oldVersion, newVersion));\n             }\n+\n+            if (oldVersion < 61 && newVersion >= 61) {\n+                Log_OC.i(SQL, \"Entering in the #60 reset eTag to force capability refresh\");", "originalCommit": "c340598da5cac34fa2a8283099caa28f2d0cd1c0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "baa0de428f17e7aacc6db05cea775baceb5c5168", "chunk": "diff --git a/src/main/java/com/owncloud/android/providers/FileContentProvider.java b/src/main/java/com/owncloud/android/providers/FileContentProvider.java\nindex e4398da11..c11c73c55 100644\n--- a/src/main/java/com/owncloud/android/providers/FileContentProvider.java\n+++ b/src/main/java/com/owncloud/android/providers/FileContentProvider.java\n\n@@ -2290,7 +2290,7 @@ public class FileContentProvider extends ContentProvider {\n             }\n \n             if (oldVersion < 61 && newVersion >= 61) {\n-                Log_OC.i(SQL, \"Entering in the #60 reset eTag to force capability refresh\");\n+                Log_OC.i(SQL, \"Entering in the #61 reset eTag to force capability refresh\");\n                 db.beginTransaction();\n                 try {\n                     db.execSQL(\"UPDATE capabilities SET etag = '' WHERE 1=1\");\n"}}, {"oid": "baa0de428f17e7aacc6db05cea775baceb5c5168", "url": "https://github.com/nextcloud/android/commit/baa0de428f17e7aacc6db05cea775baceb5c5168", "message": "Reset eTag so that capability get parsed again, so status is set\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-11-09T07:50:45Z", "type": "commit"}, {"oid": "baa0de428f17e7aacc6db05cea775baceb5c5168", "url": "https://github.com/nextcloud/android/commit/baa0de428f17e7aacc6db05cea775baceb5c5168", "message": "Reset eTag so that capability get parsed again, so status is set\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-11-09T07:50:45Z", "type": "forcePushed"}]}