{"pr_number": 5992, "pr_title": "New design (UI) - Sort and Gridview switch Bar", "pr_createdAt": "2020-05-01T13:56:56Z", "pr_url": "https://github.com/nextcloud/android/pull/5992", "timeline": [{"oid": "0aae89ddb50e03fac36b6b610eb36c3e4571b2c2", "url": "https://github.com/nextcloud/android/commit/0aae89ddb50e03fac36b6b610eb36c3e4571b2c2", "message": "Add new sort and gridview switch button. Remove duplication\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-01T13:42:48Z", "type": "commit"}, {"oid": "a143fdfd2798f054d11664f6d9d5d2a12278a973", "url": "https://github.com/nextcloud/android/commit/a143fdfd2798f054d11664f6d9d5d2a12278a973", "message": "Hide when scroll\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-01T13:42:49Z", "type": "commit"}, {"oid": "207846ebeab22648728326041b0170ad900e9ada", "url": "https://github.com/nextcloud/android/commit/207846ebeab22648728326041b0170ad900e9ada", "message": "Reduce spotbugs\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-01T13:42:49Z", "type": "commit"}, {"oid": "d209c239e83aafb7428487f7131c4735b8466d4a", "url": "https://github.com/nextcloud/android/commit/d209c239e83aafb7428487f7131c4735b8466d4a", "message": "Hide FAB in scroll\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-01T13:42:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3MjMyOA==", "url": "https://github.com/nextcloud/android/pull/5992#discussion_r418672328", "bodyText": "Can we move those into consts?", "author": "ezaquarii", "createdAt": "2020-05-01T18:25:17Z", "path": "src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java", "diffHunk": "@@ -1293,9 +1307,45 @@ private void invalidateActionMode() {\n \n \n     public void sortFiles(FileSortOrder sortOrder) {\n+        setSortButton(sortOrder);\n         mAdapter.setSortOrder(mFile, sortOrder);\n     }\n \n+    private void setSortButton(FileSortOrder sortOrder) {\n+        int nameId;\n+        switch (sortOrder.name) {\n+            case \"sort_new_to_old\":", "originalCommit": "d209c239e83aafb7428487f7131c4735b8466d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM2MjUwMw==", "url": "https://github.com/nextcloud/android/pull/5992#discussion_r419362503", "bodyText": "It's fix :)", "author": "JorisBodin", "createdAt": "2020-05-04T11:12:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3MjMyOA=="}], "type": "inlineReview", "revised_code": {"commit": "4accfe4efab46953401509360f338332c4e0428f", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java b/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java\nindex 09bc5e122..98ee8c5b9 100644\n--- a/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java\n+++ b/src/main/java/com/owncloud/android/ui/fragment/OCFileListFragment.java\n\n@@ -1314,12 +1317,12 @@ public class OCFileListFragment extends ExtendedListFragment implements\n     private void setSortButton(FileSortOrder sortOrder) {\n         int nameId;\n         switch (sortOrder.name) {\n-            case \"sort_new_to_old\":\n-            case \"sort_old_to_new\":\n+            case sort_new_to_old_id:\n+            case sort_old_to_new_id:\n                 nameId = R.string.sort_by_date;\n                 break;\n-            case \"sort_big_to_small\":\n-            case \"sort_small_to_big\":\n+            case sort_big_to_small_id:\n+            case sort_small_to_big_id:\n                 nameId = R.string.sort_by_size;\n                 break;\n             default:\n"}}, {"oid": "4accfe4efab46953401509360f338332c4e0428f", "url": "https://github.com/nextcloud/android/commit/4accfe4efab46953401509360f338332c4e0428f", "message": "Improve margin and lower case button\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-04T09:50:02Z", "type": "commit"}, {"oid": "29f60460bb78a3bc6d076953daa93234320235a3", "url": "https://github.com/nextcloud/android/commit/29f60460bb78a3bc6d076953daa93234320235a3", "message": "Improve ripple\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-04T14:39:30Z", "type": "commit"}, {"oid": "3bc3a86354811e1e35922644c995f6f4367ecbdb", "url": "https://github.com/nextcloud/android/commit/3bc3a86354811e1e35922644c995f6f4367ecbdb", "message": "Improve sort button and hide if necessary\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-05T13:50:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwMTE4OA==", "url": "https://github.com/nextcloud/android/pull/5992#discussion_r420801188", "bodyText": "Why is this removed?\nIf it is a valid point, please still have it in a separate PR, otherwise revert please.", "author": "tobiasKaminsky", "createdAt": "2020-05-06T13:43:59Z", "path": "src/main/java/com/owncloud/android/ui/activity/SyncedFoldersActivity.java", "diffHunk": "@@ -233,7 +232,6 @@ private boolean onDisablePowerSaveCheckClicked(MenuItem powerCheck) {\n \n     private void showPowerCheckDialog() {\n         AlertDialog alertDialog = new AlertDialog.Builder(this)\n-            .setView(findViewById(R.id.root_layout))", "originalCommit": "3bc3a86354811e1e35922644c995f6f4367ecbdb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg0NDY2Ng==", "url": "https://github.com/nextcloud/android/pull/5992#discussion_r420844666", "bodyText": "Because it's useless.\nBut okay, we can go back with warnings...", "author": "JorisBodin", "createdAt": "2020-05-06T14:39:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwMTE4OA=="}], "type": "inlineReview", "revised_code": {"commit": "8c1c803b9dd26a24424a995f28fe28f64bc80ac7", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/activity/SyncedFoldersActivity.java b/src/main/java/com/owncloud/android/ui/activity/SyncedFoldersActivity.java\nindex 0d97d73f1..34a470b14 100644\n--- a/src/main/java/com/owncloud/android/ui/activity/SyncedFoldersActivity.java\n+++ b/src/main/java/com/owncloud/android/ui/activity/SyncedFoldersActivity.java\n\n@@ -232,6 +232,7 @@ public class SyncedFoldersActivity extends FileActivity implements SyncedFolderA\n \n     private void showPowerCheckDialog() {\n         AlertDialog alertDialog = new AlertDialog.Builder(this)\n+            .setView(findViewById(R.id.root_layout))\n             .setPositiveButton(R.string.common_ok, (dialog, which) -> dialog.dismiss())\n             .setTitle(ThemeUtils.getColoredTitle(getResources().getString(R.string.autoupload_disable_power_save_check),\n                                                  ThemeUtils.primaryAccentColor(this)))\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwNDQ5OA==", "url": "https://github.com/nextcloud/android/pull/5992#discussion_r420804498", "bodyText": "Just a minor nitpick:\n\nm is a legacy way of showing a member variable of a class (which is accessible in whole class)\nwe try to get rid of the m prefix, as it is shown by AndroidStudio\n\nYou can also combine it to SortingOredDialogFragment.newInstance(\u2026).show(\u2026).\n(with a wrap after .newInstance(\u2026) for readability", "author": "tobiasKaminsky", "createdAt": "2020-05-06T13:48:07Z", "path": "src/main/java/com/owncloud/android/utils/DisplayUtils.java", "diffHunk": "@@ -740,4 +745,12 @@ static public void showErrorAndFinishActivity(Activity activity, String errorMes\n         Toast.makeText(activity, errorMessage, Toast.LENGTH_LONG).show();\n         activity.finish();\n     }\n+\n+    static public void openSortingOrderDialogFragment(FragmentManager supportFragmentManager, FileSortOrder sortOrder) {\n+        FragmentTransaction fragmentTransaction = supportFragmentManager.beginTransaction();\n+        fragmentTransaction.addToBackStack(null);\n+\n+        SortingOrderDialogFragment mSortingOrderDialogFragment = SortingOrderDialogFragment.newInstance(sortOrder);", "originalCommit": "3bc3a86354811e1e35922644c995f6f4367ecbdb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8c1c803b9dd26a24424a995f28fe28f64bc80ac7", "chunk": "diff --git a/src/main/java/com/owncloud/android/utils/DisplayUtils.java b/src/main/java/com/owncloud/android/utils/DisplayUtils.java\nindex 19af52807..695ca6316 100644\n--- a/src/main/java/com/owncloud/android/utils/DisplayUtils.java\n+++ b/src/main/java/com/owncloud/android/utils/DisplayUtils.java\n\n@@ -750,7 +750,6 @@ public final class DisplayUtils {\n         FragmentTransaction fragmentTransaction = supportFragmentManager.beginTransaction();\n         fragmentTransaction.addToBackStack(null);\n \n-        SortingOrderDialogFragment mSortingOrderDialogFragment = SortingOrderDialogFragment.newInstance(sortOrder);\n-        mSortingOrderDialogFragment.show(fragmentTransaction, SORTING_ORDER_FRAGMENT);\n+        SortingOrderDialogFragment.newInstance(sortOrder).show(fragmentTransaction, SORTING_ORDER_FRAGMENT);\n     }\n }\n"}}, {"oid": "8c1c803b9dd26a24424a995f28fe28f64bc80ac7", "url": "https://github.com/nextcloud/android/commit/8c1c803b9dd26a24424a995f28fe28f64bc80ac7", "message": "Refactor and readd unnecessary id\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-06T14:47:30Z", "type": "commit"}]}