{"pr_number": 5231, "pr_title": "images: slightly rounded corners", "pr_createdAt": "2020-01-18T15:24:28Z", "pr_url": "https://github.com/nextcloud/android/pull/5231", "timeline": [{"oid": "ef0b0fe9eecb9ebd2d2644e326bacbed366bb8ac", "url": "https://github.com/nextcloud/android/commit/ef0b0fe9eecb9ebd2d2644e326bacbed366bb8ac", "message": "images: slightly rounded corners\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-18T15:22:54Z", "type": "commit"}, {"oid": "4fb140d275061e028d70b3a24fa3af36713daba0", "url": "https://github.com/nextcloud/android/commit/4fb140d275061e028d70b3a24fa3af36713daba0", "message": "round corners only in list view\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-22T12:45:31Z", "type": "commit"}, {"oid": "82dd14f6bcf68b2d6d5dd6e698213e460ce476a7", "url": "https://github.com/nextcloud/android/commit/82dd14f6bcf68b2d6d5dd6e698213e460ce476a7", "message": "extract doubled code\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-30T19:31:45Z", "type": "commit"}, {"oid": "763ee606d1aa3574686f337cff30ac0f62e312b7", "url": "https://github.com/nextcloud/android/commit/763ee606d1aa3574686f337cff30ac0f62e312b7", "message": "use radius, and do not only test for it\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-30T20:39:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NjM0MA==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369786340", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        Resources resources = MainApp.getAppContext().getResources();\n          \n          \n            \n                                        Resources resources = activity.getResources();", "author": "AndyScherzinger", "createdAt": "2020-01-22T20:29:22Z", "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "diffHunk": "@@ -602,7 +603,17 @@ private void setThumbnail(OCFile file, ImageView thumbnailView) {\n                         Bitmap withOverlay = ThumbnailsCacheManager.addVideoOverlay(thumbnail);\n                         thumbnailView.setImageBitmap(withOverlay);\n                     } else {\n-                        thumbnailView.setImageBitmap(thumbnail);\n+                        if (gridView) {\n+                            thumbnailView.setImageBitmap(thumbnail);\n+                        } else {\n+                            Resources resources = MainApp.getAppContext().getResources();", "originalCommit": "4fb140d275061e028d70b3a24fa3af36713daba0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "82dd14f6bcf68b2d6d5dd6e698213e460ce476a7", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java b/src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java\nindex b201e088c..e4ccc8c0d 100644\n--- a/src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java\n+++ b/src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java\n\n@@ -606,14 +605,8 @@ public class OCFileListAdapter extends RecyclerView.Adapter<RecyclerView.ViewHol\n                         if (gridView) {\n                             thumbnailView.setImageBitmap(thumbnail);\n                         } else {\n-                            Resources resources = MainApp.getAppContext().getResources();\n-\n-                            BitmapUtils.setRoundedBitmap(resources,\n-                                                         thumbnail,\n-                                                         resources.getDimension(R.dimen.file_icon_rounded_corner_radius),\n-                                                         thumbnailView);\n+                            BitmapUtils.setRoundedBitmap(thumbnail, thumbnailView);\n                         }\n-\n                     }\n                 } else {\n                     // generate new thumbnail\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4ODM2OA==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369788368", "bodyText": "shouldn't this rather be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        roundedBitmap.setCornerRadius(20);\n          \n          \n            \n                        roundedBitmap.setCornerRadius(radius);", "author": "AndyScherzinger", "createdAt": "2020-01-22T20:34:27Z", "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "diffHunk": "@@ -376,16 +377,34 @@ public static String md5(String string) throws NoSuchAlgorithmException {\n      * @param bitmap the original bitmap\n      * @return the circular bitmap\n      */\n-    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources, Bitmap bitmap) {\n+    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources,\n+                                                                       Bitmap bitmap,\n+                                                                       float radius) {\n         if (bitmap == null) {\n             return null;\n         }\n \n         RoundedBitmapDrawable roundedBitmap = RoundedBitmapDrawableFactory.create(resources, bitmap);\n         roundedBitmap.setCircular(true);\n+\n+        if (radius != -1) {\n+            roundedBitmap.setCornerRadius(20);", "originalCommit": "4fb140d275061e028d70b3a24fa3af36713daba0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4OTA1Ng==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369789056", "bodyText": "due to the dp value coming in the corner radius probably rather 2 or 4 dp. The 20 is a fixed number and not a density pixel so it doesn't care about display density, while the original dp value so sent in does!", "author": "AndyScherzinger", "createdAt": "2020-01-22T20:36:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4ODM2OA=="}], "type": "inlineReview", "revised_code": {"commit": "763ee606d1aa3574686f337cff30ac0f62e312b7", "chunk": "diff --git a/src/main/java/com/owncloud/android/utils/BitmapUtils.java b/src/main/java/com/owncloud/android/utils/BitmapUtils.java\nindex d7d834cd1..086fd63b1 100644\n--- a/src/main/java/com/owncloud/android/utils/BitmapUtils.java\n+++ b/src/main/java/com/owncloud/android/utils/BitmapUtils.java\n\n@@ -388,7 +390,7 @@ public final class BitmapUtils {\n         roundedBitmap.setCircular(true);\n \n         if (radius != -1) {\n-            roundedBitmap.setCornerRadius(20);\n+            roundedBitmap.setCornerRadius(radius);\n         }\n \n         return roundedBitmap;\n"}}, {"oid": "d6275c48332afac1d6f1370855c6f4a3e62d86a4", "url": "https://github.com/nextcloud/android/commit/d6275c48332afac1d6f1370855c6f4a3e62d86a4", "message": "use 10dp\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-31T06:20:14Z", "type": "commit"}, {"oid": "66b78e0eb75881304527f49b248d2e307892faa9", "url": "https://github.com/nextcloud/android/commit/66b78e0eb75881304527f49b248d2e307892faa9", "message": "changed to 8dp\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-02-03T05:58:39Z", "type": "commit"}, {"oid": "b787284ab6c0a389d0d57e71877d1d4cd301ed8c", "url": "https://github.com/nextcloud/android/commit/b787284ab6c0a389d0d57e71877d1d4cd301ed8c", "message": "bump spotbugs\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-02-03T10:53:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAzODQ1Mg==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r374038452", "bodyText": "Issue found: Avoid using redundant field initializer for 'roundedCorners'", "author": "nextcloud-android-bot", "createdAt": "2020-02-03T10:56:46Z", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -410,12 +410,23 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n+        private boolean roundedCorners = false;", "originalCommit": "b787284ab6c0a389d0d57e71877d1d4cd301ed8c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}