{"pr_number": 5803, "pr_title": "Rich workspaces: can be null (if disabled), or string (empty or with content)", "pr_createdAt": "2020-04-04T08:53:09Z", "pr_url": "https://github.com/nextcloud/android/pull/5803", "timeline": [{"oid": "74714f3b1692ea2a0cc3d04470fa2975af7deb23", "url": "https://github.com/nextcloud/android/commit/74714f3b1692ea2a0cc3d04470fa2975af7deb23", "message": "Rich workspaces: can be null (if disabled), or string (empty or with content)\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-07T08:33:01Z", "type": "forcePushed"}, {"oid": "2886b07ba4d15945d414b72ebd85c523170fa570", "url": "https://github.com/nextcloud/android/commit/2886b07ba4d15945d414b72ebd85c523170fa570", "message": "Rich workspaces: can be null (if disabled), or string (empty or with content)\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-07T10:04:47Z", "type": "forcePushed"}, {"oid": "f27f0fdde501ee3b4fb08150f0cd71128197103e", "url": "https://github.com/nextcloud/android/commit/f27f0fdde501ee3b4fb08150f0cd71128197103e", "message": "Rich workspaces: can be null (if disabled), or string (empty or with content)\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-07T13:29:17Z", "type": "forcePushed"}, {"oid": "dfdf6546c4ef3a74174094b940ee42e50d87a3fe", "url": "https://github.com/nextcloud/android/commit/dfdf6546c4ef3a74174094b940ee42e50d87a3fe", "message": "Rich workspaces: can be null (if disabled), or string (empty or with content)\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-07T13:34:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg0NjM5NQ==", "url": "https://github.com/nextcloud/android/pull/5803#discussion_r404846395", "bodyText": "TextUtils.isEmpty() does both.", "author": "ezaquarii", "createdAt": "2020-04-07T14:19:33Z", "path": "src/main/java/com/owncloud/android/ui/fragment/OCFileListBottomSheetDialog.java", "diffHunk": "@@ -176,10 +175,10 @@ protected void onCreate(Bundle savedInstanceState) {\n                                              user,\n                                              MimeTypeUtil.MIMETYPE_TEXT_MARKDOWN) &&\n             file != null) {\n-            if (TextUtils.isEmpty(file.getRichWorkspace())) {\n-                createRichWorkspace.setVisibility(View.VISIBLE);\n-            } else {\n+            if (file.getRichWorkspace() == null || !\"\".equals(file.getRichWorkspace())) {", "originalCommit": "dfdf6546c4ef3a74174094b940ee42e50d87a3fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg3MTU3OA==", "url": "https://github.com/nextcloud/android/pull/5803#discussion_r404871578", "bodyText": "it is an or.\nIndeed this is very hard to understand.\nLet me rewrite it.", "author": "tobiasKaminsky", "createdAt": "2020-04-07T14:51:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg0NjM5NQ=="}], "type": "inlineReview", "revised_code": {"commit": "c43b234ae4c1557f1fd9f5e41ff0b21e68026aef", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/fragment/OCFileListBottomSheetDialog.java b/src/main/java/com/owncloud/android/ui/fragment/OCFileListBottomSheetDialog.java\nindex fd032b268..fcbe82f37 100644\n--- a/src/main/java/com/owncloud/android/ui/fragment/OCFileListBottomSheetDialog.java\n+++ b/src/main/java/com/owncloud/android/ui/fragment/OCFileListBottomSheetDialog.java\n\n@@ -175,6 +175,10 @@ public class OCFileListBottomSheetDialog extends BottomSheetDialog {\n                                              user,\n                                              MimeTypeUtil.MIMETYPE_TEXT_MARKDOWN) &&\n             file != null) {\n+            // richWorkspace\n+            // == \"\": no info set -> show button\n+            // == null: disabled on server side -> hide button\n+            // != \"\": info set -> hide button\n             if (file.getRichWorkspace() == null || !\"\".equals(file.getRichWorkspace())) {\n                 createRichWorkspace.setVisibility(View.GONE);\n             } else {\n"}}, {"oid": "c43b234ae4c1557f1fd9f5e41ff0b21e68026aef", "url": "https://github.com/nextcloud/android/commit/c43b234ae4c1557f1fd9f5e41ff0b21e68026aef", "message": "Rich workspaces: can be null (if disabled), or string (empty or with content)\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-07T14:57:40Z", "type": "commit"}, {"oid": "c43b234ae4c1557f1fd9f5e41ff0b21e68026aef", "url": "https://github.com/nextcloud/android/commit/c43b234ae4c1557f1fd9f5e41ff0b21e68026aef", "message": "Rich workspaces: can be null (if disabled), or string (empty or with content)\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-07T14:57:40Z", "type": "forcePushed"}]}