{"pr_number": 6262, "pr_title": "Hide on scrolling", "pr_createdAt": "2020-06-10T11:10:25Z", "pr_url": "https://github.com/nextcloud/android/pull/6262", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI2OTUzOQ==", "url": "https://github.com/nextcloud/android/pull/6262#discussion_r438269539", "bodyText": "without having tested this, having the same method call with the same arguments/values seems wrong ;)", "author": "AndyScherzinger", "createdAt": "2020-06-10T16:50:06Z", "path": "src/main/java/com/owncloud/android/ui/activity/FileActivity.java", "diffHunk": "@@ -159,9 +159,9 @@ public void showFiles(boolean onDeviceOnly) {\n         // must be specialized in subclasses\n         MainApp.showOnlyFilesOnDevice(onDeviceOnly);\n         if (onDeviceOnly) {\n-            setupToolbar();\n+            setupHomeSearchToolbar(true);\n         } else {\n-            setupHomeSearchToolbar();\n+            setupHomeSearchToolbar(true);", "originalCommit": "a80cd560ce973865afd322a876dadafd8a703f5c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9f6532fa61d2a78606244ad2df20e226ae3f0731", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/activity/FileActivity.java b/src/main/java/com/owncloud/android/ui/activity/FileActivity.java\nindex 74a16d8b4..939c7c91c 100644\n--- a/src/main/java/com/owncloud/android/ui/activity/FileActivity.java\n+++ b/src/main/java/com/owncloud/android/ui/activity/FileActivity.java\n\n@@ -159,9 +159,9 @@ public abstract class FileActivity extends DrawerActivity\n         // must be specialized in subclasses\n         MainApp.showOnlyFilesOnDevice(onDeviceOnly);\n         if (onDeviceOnly) {\n-            setupHomeSearchToolbar(true);\n+            setupToolbar();\n         } else {\n-            setupHomeSearchToolbar(true);\n+            setupHomeSearchToolbarWithSortAndListButtons();\n         }\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI3MDAyNg==", "url": "https://github.com/nextcloud/android/pull/6262#discussion_r438270026", "bodyText": "same here, it's always true so the checks seem unnecessary", "author": "AndyScherzinger", "createdAt": "2020-06-10T16:50:52Z", "path": "src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java", "diffHunk": "@@ -1190,16 +1191,16 @@ protected void onResume() {\n         if (menuItemId == -1) {\n             if (MainApp.isOnlyOnDevice()) {\n                 setDrawerMenuItemChecked(R.id.nav_on_device);\n-                setupToolbar();\n+                setupHomeSearchToolbar(true);\n             } else {\n                 setDrawerMenuItemChecked(R.id.nav_all_files);\n-                setupHomeSearchToolbar();\n+                setupHomeSearchToolbar(true);\n             }\n         } else {\n             if (menuItemId == R.id.nav_all_files) {\n-                setupHomeSearchToolbar();\n+                setupHomeSearchToolbar(true);\n             } else {\n-                setupToolbar();\n+                setupHomeSearchToolbar(true);", "originalCommit": "a80cd560ce973865afd322a876dadafd8a703f5c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9f6532fa61d2a78606244ad2df20e226ae3f0731", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java b/src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java\nindex 8bcc6b688..d2c7cb200 100644\n--- a/src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java\n+++ b/src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java\n\n@@ -1186,25 +1178,29 @@ public class FileDisplayActivity extends FileActivity\n         registerReceiver(mDownloadFinishReceiver, downloadIntentFilter);\n \n         // setup drawer\n-        int menuItemId = getIntent().getIntExtra(FileDisplayActivity.DRAWER_MENU_ID, -1);\n+        menuItemId = getIntent().getIntExtra(FileDisplayActivity.DRAWER_MENU_ID, menuItemId);\n \n         if (menuItemId == -1) {\n             if (MainApp.isOnlyOnDevice()) {\n                 setDrawerMenuItemChecked(R.id.nav_on_device);\n-                setupHomeSearchToolbar(true);\n+                setupToolbar();\n             } else {\n                 setDrawerMenuItemChecked(R.id.nav_all_files);\n-                setupHomeSearchToolbar(true);\n+                setupHomeSearchToolbarWithSortAndListButtons();\n             }\n         } else {\n             if (menuItemId == R.id.nav_all_files) {\n-                setupHomeSearchToolbar(true);\n+                setupHomeSearchToolbarWithSortAndListButtons();\n             } else {\n-                setupHomeSearchToolbar(true);\n+                setupToolbar();\n             }\n             setDrawerMenuItemChecked(menuItemId);\n         }\n \n+        if (getListOfFilesFragment() instanceof PhotoFragment) {\n+            updateActionBarTitleAndHomeButtonByString(getString(R.string.drawer_item_photos));\n+        }\n+\n         Log_OC.v(TAG, \"onResume() end\");\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc2MTAyNA==", "url": "https://github.com/nextcloud/android/pull/6262#discussion_r438761024", "bodyText": "Rename setupHomeSearchToolbar by setupHomeSearchToolbarWithShortListGroup\nRemove showShortListGroup\nAnd add\nif (showSortListButtonGroup) {\n    findViewById(R.id.sort_list_button_group).setVisibility(View.VISIBLE);\n }\n\nAfter setupToolbar(true)\nI think it's more understandable that way.", "author": "JorisBodin", "createdAt": "2020-06-11T12:56:29Z", "path": "src/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java", "diffHunk": "@@ -115,11 +119,15 @@ private void setupToolbar(boolean isHomeSearchToolbarShow) {\n     }\n \n     public void setupToolbar() {\n-        setupToolbar(false);\n+        setupToolbar(false, false);\n     }\n \n     public void setupHomeSearchToolbar() {\n-        setupToolbar(true);\n+        setupToolbar(true, false);\n+    }\n+\n+    public void setupHomeSearchToolbar(boolean showShortListGroup) {", "originalCommit": "a80cd560ce973865afd322a876dadafd8a703f5c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9f6532fa61d2a78606244ad2df20e226ae3f0731", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java b/src/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java\nindex 10fe6a391..4db330769 100644\n--- a/src/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java\n+++ b/src/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java\n\n@@ -122,12 +122,8 @@ public abstract class ToolbarActivity extends BaseActivity {\n         setupToolbar(false, false);\n     }\n \n-    public void setupHomeSearchToolbar() {\n-        setupToolbar(true, false);\n-    }\n-\n-    public void setupHomeSearchToolbar(boolean showShortListGroup) {\n-        setupToolbar(true, showShortListGroup);\n+    public void setupHomeSearchToolbarWithSortAndListButtons() {\n+        setupToolbar(true, true);\n     }\n \n     /**\n"}}, {"oid": "9f6532fa61d2a78606244ad2df20e226ae3f0731", "url": "https://github.com/nextcloud/android/commit/9f6532fa61d2a78606244ad2df20e226ae3f0731", "message": "Changes due to CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-23T09:23:10Z", "type": "forcePushed"}, {"oid": "1ecd64f128f78b82a260f3b48e0b17cc69742a82", "url": "https://github.com/nextcloud/android/commit/1ecd64f128f78b82a260f3b48e0b17cc69742a82", "message": "Hide on scrolling, fix https://github.com/nextcloud/android/issues/6238\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-25T10:59:54Z", "type": "commit"}, {"oid": "e5ec91b5a79828adb0b8d9851c8101422390f116", "url": "https://github.com/nextcloud/android/commit/e5ec91b5a79828adb0b8d9851c8101422390f116", "message": "Changes due to CR\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-25T10:59:54Z", "type": "commit"}, {"oid": "a9dc3f578743f3484b6a2d0ee6e848a51e1fb40a", "url": "https://github.com/nextcloud/android/commit/a9dc3f578743f3484b6a2d0ee6e848a51e1fb40a", "message": "removed duplicated sort/switch grid buttons\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-25T10:59:54Z", "type": "commit"}, {"oid": "22657040bd676168b3f9af4b02c0c116fcbb8034", "url": "https://github.com/nextcloud/android/commit/22657040bd676168b3f9af4b02c0c116fcbb8034", "message": "Removed possible NPE\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-25T10:59:54Z", "type": "commit"}, {"oid": "961e6c179aa5a6dd4ae37895e63d89c41affcd7a", "url": "https://github.com/nextcloud/android/commit/961e6c179aa5a6dd4ae37895e63d89c41affcd7a", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>", "committedDate": "2020-06-25T11:00:04Z", "type": "commit"}, {"oid": "961e6c179aa5a6dd4ae37895e63d89c41affcd7a", "url": "https://github.com/nextcloud/android/commit/961e6c179aa5a6dd4ae37895e63d89c41affcd7a", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>", "committedDate": "2020-06-25T11:00:04Z", "type": "forcePushed"}, {"oid": "741fb410f113fbd726770fe712243121ed245a7c", "url": "https://github.com/nextcloud/android/commit/741fb410f113fbd726770fe712243121ed245a7c", "message": "Drone: update FindBugs results to reflect reduced error/warning count [skip ci]\n\nSigned-off-by: nextcloud-android-bot <android@nextcloud.com>", "committedDate": "2020-06-25T11:13:55Z", "type": "commit"}, {"oid": "bd5c9dfa1eef02001b1f4fcd9bb193d2e9a6f240", "url": "https://github.com/nextcloud/android/commit/bd5c9dfa1eef02001b1f4fcd9bb193d2e9a6f240", "message": "make function puplic for testing\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-25T13:22:58Z", "type": "commit"}, {"oid": "38c28332e266fa3f4324868b36963fc0d3176700", "url": "https://github.com/nextcloud/android/commit/38c28332e266fa3f4324868b36963fc0d3176700", "message": "fix tests\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-06-25T13:57:46Z", "type": "commit"}]}