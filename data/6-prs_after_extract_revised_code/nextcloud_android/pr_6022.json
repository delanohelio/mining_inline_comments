{"pr_number": 6022, "pr_title": "New design (UI) - Accounts manage", "pr_createdAt": "2020-05-07T11:30:05Z", "pr_url": "https://github.com/nextcloud/android/pull/6022", "timeline": [{"oid": "886c0c6394d540da45b7238ab0e3210a6cf0d9c6", "url": "https://github.com/nextcloud/android/commit/886c0c6394d540da45b7238ab0e3210a6cf0d9c6", "message": "Pre-added a menu to manage accounts\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-04-30T16:46:37Z", "type": "commit"}, {"oid": "d12d20fc1d2f65c03347a694efd01048c9774a01", "url": "https://github.com/nextcloud/android/commit/d12d20fc1d2f65c03347a694efd01048c9774a01", "message": "Applied a listener on account menu button\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-04T04:11:15Z", "type": "commit"}, {"oid": "ae3398694312d5311b17b38116b01c2f79844762", "url": "https://github.com/nextcloud/android/commit/ae3398694312d5311b17b38116b01c2f79844762", "message": "Implemented view in listener + Pre-implemented menu inflating\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-05T13:15:41Z", "type": "commit"}, {"oid": "c27637497824f9c6c24487c136e2b7843fa91e05", "url": "https://github.com/nextcloud/android/commit/c27637497824f9c6c24487c136e2b7843fa91e05", "message": "Enabled the actions and the inflating for Accounts Management\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-06T12:22:07Z", "type": "commit"}, {"oid": "ac35fb0b56b49aa62d6cd4df633578b2f8c7cc8f", "url": "https://github.com/nextcloud/android/commit/ac35fb0b56b49aa62d6cd4df633578b2f8c7cc8f", "message": "Merge branch 'master' into feature/ui-revamp/manage-accounts-activity", "committedDate": "2020-05-07T10:41:55Z", "type": "commit"}, {"oid": "e84cc8eca39c5196665a9f1eb69e4e2c4479eb3e", "url": "https://github.com/nextcloud/android/commit/e84cc8eca39c5196665a9f1eb69e4e2c4479eb3e", "message": "Added account deletion feature\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-07T11:08:38Z", "type": "commit"}, {"oid": "2dd3d7505c668960a95f5bbbf1cf13516b88f19d", "url": "https://github.com/nextcloud/android/commit/2dd3d7505c668960a95f5bbbf1cf13516b88f19d", "message": "Replaced \"Open\" by \"View Profile\" and removed french translation for transifex\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-11T08:58:35Z", "type": "commit"}, {"oid": "c6c38e87eb622a76c3f335d7373beee45bef21a4", "url": "https://github.com/nextcloud/android/commit/c6c38e87eb622a76c3f335d7373beee45bef21a4", "message": "spotbugs: FCBL_FIELD_COULD_BE_LOCAL\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>", "committedDate": "2020-05-11T11:57:03Z", "type": "commit"}, {"oid": "c6c38e87eb622a76c3f335d7373beee45bef21a4", "url": "https://github.com/nextcloud/android/commit/c6c38e87eb622a76c3f335d7373beee45bef21a4", "message": "spotbugs: FCBL_FIELD_COULD_BE_LOCAL\n\nSigned-off-by: Andy Scherzinger <info@andy-scherzinger.de>", "committedDate": "2020-05-11T11:57:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyMzM5MQ==", "url": "https://github.com/nextcloud/android/pull/6022#discussion_r423023391", "bodyText": "Please split this up in \"onAccountClicked()\" and \"onOptionItemClicked(View v)\".\nonAccountClicked() -> can then directly open account, as it is now.\nonOptionItemClicked(View v) -> can use v to either open up account or removal\nThis is then a bit more clean instead of having this all relied on the view type.", "author": "tobiasKaminsky", "createdAt": "2020-05-11T13:04:31Z", "path": "src/main/java/com/owncloud/android/ui/activity/ManageAccountsActivity.java", "diffHunk": "@@ -463,7 +471,34 @@ private void performAccountRemoval(User user) {\n     }\n \n     @Override\n-    public void onClick(User user) {\n+    public void onClick(User user, View view) {", "originalCommit": "c6c38e87eb622a76c3f335d7373beee45bef21a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA4MjYxNA==", "url": "https://github.com/nextcloud/android/pull/6022#discussion_r423082614", "bodyText": "Done :D the interface methods have been splitted.", "author": "Kilian-Perisset", "createdAt": "2020-05-11T14:31:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyMzM5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "5464453901f055b346f26f976b11d2bee63d2834", "chunk": "diff --git a/src/main/java/com/owncloud/android/ui/activity/ManageAccountsActivity.java b/src/main/java/com/owncloud/android/ui/activity/ManageAccountsActivity.java\nindex ce27e8d9a..3abfe4d87 100644\n--- a/src/main/java/com/owncloud/android/ui/activity/ManageAccountsActivity.java\n+++ b/src/main/java/com/owncloud/android/ui/activity/ManageAccountsActivity.java\n\n@@ -470,9 +470,22 @@ public class ManageAccountsActivity extends FileActivity implements UserListAdap\n         }\n     }\n \n-    @Override\n-    public void onClick(User user, View view) {\n+    public static void openAccountRemovalConfirmationDialog(User user, FragmentManager fragmentManager) {\n+        AccountRemovalConfirmationDialog dialog =\n+            AccountRemovalConfirmationDialog.newInstance(user);\n+        dialog.show(fragmentManager, \"dialog\");\n+    }\n+\n+    private void openAccount(User user) {\n+        final Intent intent = new Intent(this, UserInfoActivity.class);\n+        intent.putExtra(UserInfoActivity.KEY_ACCOUNT, user);\n+        OwnCloudAccount oca = user.toOwnCloudAccount();\n+        intent.putExtra(KEY_DISPLAY_NAME, oca.getDisplayName());\n+        startActivityForResult(intent, KEY_USER_INFO_REQUEST_CODE);\n+    }\n \n+    @Override\n+    public void onOptionItemClicked(User user, View view) {\n         if (view.getId() == R.id.account_menu) {\n             ImageView menuButton = findViewById(R.id.account_menu);\n \n"}}, {"oid": "5464453901f055b346f26f976b11d2bee63d2834", "url": "https://github.com/nextcloud/android/commit/5464453901f055b346f26f976b11d2bee63d2834", "message": "Splitted User ClickListener interface in two methods\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-11T14:25:31Z", "type": "commit"}, {"oid": "db104952d569f884e85d410a1d977bdca0fdc460", "url": "https://github.com/nextcloud/android/commit/db104952d569f884e85d410a1d977bdca0fdc460", "message": "Fixed a bug relative to account switch\n\nSigned-off-by: Kilian Pe\u0301risset <kilian.perisset@infomaniak.com>", "committedDate": "2020-05-12T08:02:19Z", "type": "commit"}, {"oid": "77c104d2feb5d23c9e9ca51c235be2c95967f0a0", "url": "https://github.com/nextcloud/android/commit/77c104d2feb5d23c9e9ca51c235be2c95967f0a0", "message": "move field to local variable\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-05-12T09:28:37Z", "type": "commit"}]}