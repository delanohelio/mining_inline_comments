{"pr_number": 2818, "pr_title": "Improve UserMgtAuditLogger", "pr_createdAt": "2020-03-10T17:16:59Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2818", "timeline": [{"oid": "70fe66fa7e7de1811f9263642989ffda3d41a376", "url": "https://github.com/wso2/carbon-identity-framework/commit/70fe66fa7e7de1811f9263642989ffda3d41a376", "message": "Improve UserMgtAuditLogger", "committedDate": "2020-03-10T17:15:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc3MjQ4OA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2818#discussion_r390772488", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"UsersAddedToRole : \" + Arrays.toString(newUsers) + \", UsersDeletedFromRole : \" +\n          \n          \n            \n                            \"UsersAdded : \" + Arrays.toString(newUsers) + \", UsersRemoved : \" +", "author": "madurangasiriwardena", "createdAt": "2020-03-11T06:48:03Z", "path": "components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java", "diffHunk": "@@ -149,7 +161,8 @@ public boolean doPostUpdateUserListOfRole(String roleName, String[] deletedUsers\n         }\n \n         audit.info(String.format(AUDIT_MESSAGE, getUser(), \"Update Users of Role\", roleName,\n-                \"Users : \" + Arrays.toString(newUsers), SUCCESS));\n+                \"UsersAddedToRole : \" + Arrays.toString(newUsers) + \", UsersDeletedFromRole : \" +", "originalCommit": "70fe66fa7e7de1811f9263642989ffda3d41a376", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cceb14de08b43fcdc2bf3e533ee9b12479e345bc", "chunk": "diff --git a/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java b/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java\nindex 7cb028efd93..a8a848e7b81 100644\n--- a/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java\n+++ b/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java\n\n@@ -161,7 +161,7 @@ public class UserMgtAuditLogger extends AbstractIdentityUserOperationEventListen\n         }\n \n         audit.info(String.format(AUDIT_MESSAGE, getUser(), \"Update Users of Role\", roleName,\n-                \"UsersAddedToRole : \" + Arrays.toString(newUsers) + \", UsersDeletedFromRole : \" +\n+                \"UsersAdded : \" + Arrays.toString(newUsers) + \", UsersRemoved : \" +\n                         Arrays.toString(deletedUsers), SUCCESS));\n         return true;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc3MjY0Mg==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2818#discussion_r390772642", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"RolesAddedToUser : \" + Arrays.toString(newRoles) + \", RolesDeletedFromUser : \"\n          \n          \n            \n                            \"RolesAdded : \" + Arrays.toString(newRoles) + \", RolesRemoved : \"", "author": "madurangasiriwardena", "createdAt": "2020-03-11T06:48:29Z", "path": "components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java", "diffHunk": "@@ -161,7 +174,8 @@ public boolean doPostUpdateRoleListOfUser(String userName, String[] deletedRoles\n         }\n \n         audit.info(String.format(AUDIT_MESSAGE, getUser(), \"Update Roles of User\", userName,\n-                \"Roles : \" + Arrays.toString(newRoles), SUCCESS));\n+                \"RolesAddedToUser : \" + Arrays.toString(newRoles) + \", RolesDeletedFromUser : \"", "originalCommit": "70fe66fa7e7de1811f9263642989ffda3d41a376", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0665e726698909ce591fc5117d3e7cead97a2f6c", "chunk": "diff --git a/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java b/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java\nindex 7cb028efd93..f144922b3e2 100644\n--- a/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java\n+++ b/components/user-mgt/org.wso2.carbon.user.mgt/src/main/java/org/wso2/carbon/user/mgt/listeners/UserMgtAuditLogger.java\n\n@@ -174,7 +174,7 @@ public class UserMgtAuditLogger extends AbstractIdentityUserOperationEventListen\n         }\n \n         audit.info(String.format(AUDIT_MESSAGE, getUser(), \"Update Roles of User\", userName,\n-                \"RolesAddedToUser : \" + Arrays.toString(newRoles) + \", RolesDeletedFromUser : \"\n+                \"RolesAdded : \" + Arrays.toString(newRoles) + \", RolesRemoved : \"\n                         + Arrays.toString(deletedRoles), SUCCESS));\n         return true;\n     }\n"}}, {"oid": "cceb14de08b43fcdc2bf3e533ee9b12479e345bc", "url": "https://github.com/wso2/carbon-identity-framework/commit/cceb14de08b43fcdc2bf3e533ee9b12479e345bc", "message": "Improve users added to role audit log\n\nCo-Authored-By: Maduranga Siriwardena <maduranga.siriwardena@gmail.com>", "committedDate": "2020-03-11T06:55:41Z", "type": "commit"}, {"oid": "0665e726698909ce591fc5117d3e7cead97a2f6c", "url": "https://github.com/wso2/carbon-identity-framework/commit/0665e726698909ce591fc5117d3e7cead97a2f6c", "message": "Improve roles added to user audit log\n\nCo-Authored-By: Maduranga Siriwardena <maduranga.siriwardena@gmail.com>", "committedDate": "2020-03-11T06:56:07Z", "type": "commit"}]}