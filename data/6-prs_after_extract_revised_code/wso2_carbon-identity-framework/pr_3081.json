{"pr_number": 3081, "pr_title": " Improve userfunctionality-mgt service component", "pr_createdAt": "2020-08-24T03:45:14Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/3081", "timeline": [{"oid": "38f6e54cc634c9147473e0d42f55a42dc4daece4", "url": "https://github.com/wso2/carbon-identity-framework/commit/38f6e54cc634c9147473e0d42f55a42dc4daece4", "message": "Improve userfunctionality-mgt service component", "committedDate": "2020-08-24T03:37:16Z", "type": "commit"}, {"oid": "1a9c7fc813f078189c88997d667950279f18af16", "url": "https://github.com/wso2/carbon-identity-framework/commit/1a9c7fc813f078189c88997d667950279f18af16", "message": "Merge branch 'master' of https://github.com/wso2/carbon-identity-framework into issue-9028", "committedDate": "2020-09-03T11:09:55Z", "type": "commit"}, {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "url": "https://github.com/wso2/carbon-identity-framework/commit/b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "message": "Remove locktypes", "committedDate": "2020-09-04T17:42:28Z", "type": "commit"}, {"oid": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "url": "https://github.com/wso2/carbon-identity-framework/commit/b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "message": "Remove locktypes", "committedDate": "2020-09-04T17:42:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzODU5OA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#discussion_r484238598", "bodyText": "Remove redundant line", "author": "sachiniWettasinghe", "createdAt": "2020-09-07T07:39:07Z", "path": "components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/UserFunctionalityManagerImplTest.java", "diffHunk": "@@ -136,11 +153,13 @@ public void testIsFunctionalityLockedForUser(String functionalityIdentifier, Str\n                 Connection spyConnection = TestUtils.spyConnection(connection);\n                 when(dataSource.getConnection()).thenReturn(spyConnection);\n                 try {\n+                    mockIsUserStoreManager(userId);\n                     assertEquals(userFunctionalityManager\n                                     .getLockStatus(userId, tenantId, functionalityIdentifier).getLockStatus(),\n                             expected);\n-                } catch (UserFunctionalityManagementException e) {\n+                } catch (UserFunctionalityManagementException | UserStoreException e) {\n                     log.error(String.format(\"Error while selecting functionality: %s\", functionalityIdentifier), e);\n+", "originalCommit": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0eb01a9ad294679b5f9af31b0c4896a577f52da2", "chunk": "diff --git a/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/UserFunctionalityManagerImplTest.java b/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/UserFunctionalityManagerImplTest.java\nindex fa25b533ffb..3341bce9c19 100644\n--- a/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/UserFunctionalityManagerImplTest.java\n+++ b/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/UserFunctionalityManagerImplTest.java\n\n@@ -159,7 +159,6 @@ public class UserFunctionalityManagerImplTest extends PowerMockTestCase {\n                             expected);\n                 } catch (UserFunctionalityManagementException | UserStoreException e) {\n                     log.error(String.format(\"Error while selecting functionality: %s\", functionalityIdentifier), e);\n-\n                 }\n             }\n         } catch (SQLException e) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzODg5NA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/3081#discussion_r484238894", "bodyText": "Remove redundant line", "author": "sachiniWettasinghe", "createdAt": "2020-09-07T07:39:45Z", "path": "components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/dao/impl/UserFunctionalityPropertyDAOImplTest.java", "diffHunk": "@@ -59,9 +69,20 @@\n import static org.wso2.carbon.identity.user.functionality.mgt.util.TestUtils.mockDataSource;\n import static org.wso2.carbon.identity.user.functionality.mgt.util.TestUtils.spyConnection;\n \n-@PrepareForTest({IdentityDatabaseUtil.class, IdentityUtil.class})\n+@PrepareForTest({IdentityDatabaseUtil.class, IdentityUtil.class, UserFunctionalityManagerComponentDataHolder.class,\n+        IdentityTenantUtil.class})\n public class UserFunctionalityPropertyDAOImplTest extends PowerMockTestCase {\n \n+    @Mock\n+    private RealmService realmService;\n+    @Mock\n+    private UserRealm userRealm;\n+    @Mock\n+    private UniqueIDUserStoreManager userStoreManager;\n+    @Mock\n+    private UserFunctionalityManagerComponentDataHolder userFunctionalityManagerComponentDataHolder;\n+\n+", "originalCommit": "b25b96901a5b4b6e4de5e252054aef3bc2b3ff16", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0eb01a9ad294679b5f9af31b0c4896a577f52da2", "chunk": "diff --git a/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/dao/impl/UserFunctionalityPropertyDAOImplTest.java b/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/dao/impl/UserFunctionalityPropertyDAOImplTest.java\nindex 36cb0dda0ae..cfa2a9d0b6c 100644\n--- a/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/dao/impl/UserFunctionalityPropertyDAOImplTest.java\n+++ b/components/user-functionality-mgt/org.wso2.carbon.identity.user.functionality.mgt/src/test/java/org/wso2/carbon/identity/user/functionality/mgt/dao/impl/UserFunctionalityPropertyDAOImplTest.java\n\n@@ -82,7 +82,6 @@ public class UserFunctionalityPropertyDAOImplTest extends PowerMockTestCase {\n     @Mock\n     private UserFunctionalityManagerComponentDataHolder userFunctionalityManagerComponentDataHolder;\n \n-\n     private static final Log log = LogFactory.getLog(UserFunctionalityPropertyDAOImplTest.class);\n     private UserFunctionalityPropertyDAO userFunctionalityPropertyDAO = new UserFunctionalityPropertyDAOImpl();\n     private UserFunctionalityManager userFunctionalityManager = new UserFunctionalityManagerImpl();\n"}}, {"oid": "0eb01a9ad294679b5f9af31b0c4896a577f52da2", "url": "https://github.com/wso2/carbon-identity-framework/commit/0eb01a9ad294679b5f9af31b0c4896a577f52da2", "message": "Fix comments", "committedDate": "2020-09-07T07:45:54Z", "type": "commit"}]}