{"pr_number": 2781, "pr_title": "Introduce onUserStorePreDisable() handler in UserStoreConfigListener", "pr_createdAt": "2020-02-24T06:26:35Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2781", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzEwMTA2MA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2781#discussion_r383101060", "bodyText": "Shall we pass the modified status? Then we can use this for enabling as well", "author": "IsuraD", "createdAt": "2020-02-24T06:33:09Z", "path": "components/user-store/org.wso2.carbon.identity.user.store.configuration/src/main/java/org/wso2/carbon/identity/user/store/configuration/UserStoreConfigAdminService.java", "diffHunk": "@@ -324,6 +325,15 @@ public void changeUserStoreState(String domain, Boolean isDisable) throws Identi\n             TransformerConfigurationException {\n \n         validateDomain(domain, isDisable);\n+\n+        try {\n+            if (isDisable) {\n+                triggerListenersOnUserStorePreDisable(domain);", "originalCommit": "7b323da9d10e5a9f415f259bdc87e3d308e8a637", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9d4491c5787f600e2f2272c5609db8cf173af7a4", "chunk": "diff --git a/components/user-store/org.wso2.carbon.identity.user.store.configuration/src/main/java/org/wso2/carbon/identity/user/store/configuration/UserStoreConfigAdminService.java b/components/user-store/org.wso2.carbon.identity.user.store.configuration/src/main/java/org/wso2/carbon/identity/user/store/configuration/UserStoreConfigAdminService.java\nindex f701b9869a1..021d3455348 100644\n--- a/components/user-store/org.wso2.carbon.identity.user.store.configuration/src/main/java/org/wso2/carbon/identity/user/store/configuration/UserStoreConfigAdminService.java\n+++ b/components/user-store/org.wso2.carbon.identity.user.store.configuration/src/main/java/org/wso2/carbon/identity/user/store/configuration/UserStoreConfigAdminService.java\n\n@@ -327,9 +327,7 @@ public class UserStoreConfigAdminService extends AbstractAdmin {\n         validateDomain(domain, isDisable);\n \n         try {\n-            if (isDisable) {\n-                triggerListenersOnUserStorePreDisable(domain);\n-            }\n+            triggerListenersOnUserStoreStateChange(domain, isDisable);\n         } catch (UserStoreException e) {\n             throw new IdentityUserStoreMgtException(\"Error while triggering the user store pre disable listeners.\");\n         }\n"}}, {"oid": "9d4491c5787f600e2f2272c5609db8cf173af7a4", "url": "https://github.com/wso2/carbon-identity-framework/commit/9d4491c5787f600e2f2272c5609db8cf173af7a4", "message": "Inttroduce onUserStorePreDisable() handler in UserStoreConfigListener", "committedDate": "2020-02-24T06:48:51Z", "type": "forcePushed"}, {"oid": "0e5a967e8bcf0a30926da725ef081a5a2881e4a9", "url": "https://github.com/wso2/carbon-identity-framework/commit/0e5a967e8bcf0a30926da725ef081a5a2881e4a9", "message": "Inttroduce onUserStorePreDisable() handler in UserStoreConfigListener", "committedDate": "2020-02-24T08:23:39Z", "type": "forcePushed"}, {"oid": "5a284b7137afba3772be6df781545e172f1ca46a", "url": "https://github.com/wso2/carbon-identity-framework/commit/5a284b7137afba3772be6df781545e172f1ca46a", "message": "Inttroduce onUserStorePreDisable() handler in UserStoreConfigListener", "committedDate": "2020-02-24T09:09:01Z", "type": "forcePushed"}, {"oid": "7c15bdd45108b78efcfef06f386f9208bb2f72be", "url": "https://github.com/wso2/carbon-identity-framework/commit/7c15bdd45108b78efcfef06f386f9208bb2f72be", "message": "Inttroduce onUserStorePreDisable() handler in UserStoreConfigListener", "committedDate": "2020-02-24T09:36:03Z", "type": "commit"}, {"oid": "7c15bdd45108b78efcfef06f386f9208bb2f72be", "url": "https://github.com/wso2/carbon-identity-framework/commit/7c15bdd45108b78efcfef06f386f9208bb2f72be", "message": "Inttroduce onUserStorePreDisable() handler in UserStoreConfigListener", "committedDate": "2020-02-24T09:36:03Z", "type": "forcePushed"}]}