{"pr_number": 2850, "pr_title": "Enabling AuthenticationEndpoint webapp to capture and apply filters to dispatcher forwards made internally", "pr_createdAt": "2020-04-01T12:31:21Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2850", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYwMjQ3MQ==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2850#discussion_r401602471", "bodyText": "This segment should not be in this PR", "author": "malithie", "createdAt": "2020-04-01T13:11:11Z", "path": "components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/request/impl/DefaultAuthenticationRequestHandler.java", "diffHunk": "@@ -777,7 +777,8 @@ protected void sendResponse(HttpServletRequest request, HttpServletResponse resp\n             if (StringUtils.isNotEmpty(rememberMeParam)) {\n                 queryParamsString += \"&\" + rememberMeParam;\n             }\n-            redirectURL = FrameworkUtils.appendQueryParamsStringToUrl(commonauthCallerPath, queryParamsString);\n+            String absoluteCallerPath = IdentityUtil.getServerURL(commonauthCallerPath, true, true);\n+            redirectURL = FrameworkUtils.appendQueryParamsStringToUrl(absoluteCallerPath, queryParamsString);", "originalCommit": "d68a84ca0a28ea790d70606e2159196d11ad16c9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2595a4ae49c7d3630af60c4128de89cf55f9cb0b", "chunk": "diff --git a/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/request/impl/DefaultAuthenticationRequestHandler.java b/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/request/impl/DefaultAuthenticationRequestHandler.java\nindex b23be656974..e9c0d626d9b 100644\n--- a/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/request/impl/DefaultAuthenticationRequestHandler.java\n+++ b/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/handler/request/impl/DefaultAuthenticationRequestHandler.java\n\n@@ -777,8 +777,7 @@ public class DefaultAuthenticationRequestHandler implements AuthenticationReques\n             if (StringUtils.isNotEmpty(rememberMeParam)) {\n                 queryParamsString += \"&\" + rememberMeParam;\n             }\n-            String absoluteCallerPath = IdentityUtil.getServerURL(commonauthCallerPath, true, true);\n-            redirectURL = FrameworkUtils.appendQueryParamsStringToUrl(absoluteCallerPath, queryParamsString);\n+            redirectURL = FrameworkUtils.appendQueryParamsStringToUrl(commonauthCallerPath, queryParamsString);\n \n             response.sendRedirect(redirectURL);\n         } catch (IOException e) {\n"}}, {"oid": "2595a4ae49c7d3630af60c4128de89cf55f9cb0b", "url": "https://github.com/wso2/carbon-identity-framework/commit/2595a4ae49c7d3630af60c4128de89cf55f9cb0b", "message": "Support for tenant qualified URLs - recursive dispatch fix", "committedDate": "2020-04-01T13:33:34Z", "type": "forcePushed"}, {"oid": "2595a4ae49c7d3630af60c4128de89cf55f9cb0b", "url": "https://github.com/wso2/carbon-identity-framework/commit/2595a4ae49c7d3630af60c4128de89cf55f9cb0b", "message": "Support for tenant qualified URLs - recursive dispatch fix", "committedDate": "2020-04-01T13:33:34Z", "type": "commit"}]}