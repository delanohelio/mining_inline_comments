{"pr_number": 4997, "pr_title": "Cleanup trade wallet code", "pr_createdAt": "2020-12-23T20:54:15Z", "pr_url": "https://github.com/bisq-network/bisq/pull/4997", "timeline": [{"oid": "aa06253b1683782865a474703fc9ee634a39e736", "url": "https://github.com/bisq-network/bisq/commit/aa06253b1683782865a474703fc9ee634a39e736", "message": "Remove unused code", "committedDate": "2020-12-23T20:49:16Z", "type": "commit"}, {"oid": "0c792a2916c2186b48502cc008956300ef2b9727", "url": "https://github.com/bisq-network/bisq/commit/0c792a2916c2186b48502cc008956300ef2b9727", "message": "Add comments to make context of parentTx more clear", "committedDate": "2020-12-23T21:15:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU1Mzc4NQ==", "url": "https://github.com/bisq-network/bisq/pull/4997#discussion_r548553785", "bodyText": "I would reformat the method javadoc with some minor grammar changes:\n    /**\n     * Holds the relevant data for the connected output for a tx input.\n     * @param index  the index of the parentTransaction\n     * @param parentTransaction  the spending output tx, not the parent tx of the input\n     * @param value  the number of satoshis being spent\n     */", "author": "ghubstan", "createdAt": "2020-12-24T15:05:43Z", "path": "core/src/main/java/bisq/core/btc/model/RawTransactionInput.java", "diffHunk": "@@ -27,12 +27,16 @@\n \n import javax.annotation.concurrent.Immutable;\n \n+/**\n+ * Holds the relevant data for the connected output for a tx input.\n+ * ParentTransaction means here the spending tx, the tx of the output not the parentTransaction of the input itself.\n+ * Also index refers to the index of the spending output\n+ */", "originalCommit": "0c792a2916c2186b48502cc008956300ef2b9727", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYwMDQ0NA==", "url": "https://github.com/bisq-network/bisq/pull/4997#discussion_r548600444", "bodyText": "Thanks, will do a commit a bit later (in the middle of some other works atm...)", "author": "chimp1984", "createdAt": "2020-12-24T16:30:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU1Mzc4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "62ca82621729ce942e64610fe52d4abc50335ef7", "chunk": "diff --git a/core/src/main/java/bisq/core/btc/model/RawTransactionInput.java b/core/src/main/java/bisq/core/btc/model/RawTransactionInput.java\nindex a7ba9b61a6..3a59ab07f9 100644\n--- a/core/src/main/java/bisq/core/btc/model/RawTransactionInput.java\n+++ b/core/src/main/java/bisq/core/btc/model/RawTransactionInput.java\n\n@@ -27,11 +27,6 @@ import lombok.EqualsAndHashCode;\n \n import javax.annotation.concurrent.Immutable;\n \n-/**\n- * Holds the relevant data for the connected output for a tx input.\n- * ParentTransaction means here the spending tx, the tx of the output not the parentTransaction of the input itself.\n- * Also index refers to the index of the spending output\n- */\n @EqualsAndHashCode\n @Immutable\n public final class RawTransactionInput implements NetworkPayload, PersistablePayload {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0NDQ0OA==", "url": "https://github.com/bisq-network/bisq/pull/4997#discussion_r549044448", "bodyText": "\ud83d\udc4d @chimp1984 thanks for finding this!  \ud83d\ude05", "author": "jmacxx", "createdAt": "2020-12-26T23:59:36Z", "path": "core/src/main/java/bisq/core/btc/wallet/TradeWalletService.java", "diffHunk": "@@ -1111,15 +1111,7 @@ public Transaction traderSignAndFinalizeDisputedPayoutTx(byte[] depositTxSeriali\n         byte[] buyerPubKey = ECKey.fromPublicOnly(Utils.HEX.decode(buyerPubKeyAsHex)).getPubKey();\n         byte[] sellerPubKey = ECKey.fromPublicOnly(Utils.HEX.decode(sellerPubKeyAsHex)).getPubKey();\n         Script redeemScript = get2of2MultiSigRedeemScript(buyerPubKey, sellerPubKey);\n-\n-        Script hashedMultiSigOutputScript = get2of2MultiSigOutputScript(buyerPubKey, sellerPubKey,\n-                hashedMultiSigOutputIsLegacy);\n-\n         Coin msOutputValue = buyerPayoutAmount.add(sellerPayoutAmount).add(txFee);\n-        TransactionOutput hashedMultiSigOutput = new TransactionOutput(params, null, msOutputValue, hashedMultiSigOutputScript.getProgram());\n-        Transaction depositTx = new Transaction(params);\n-        depositTx.addOutput(hashedMultiSigOutput);\n-", "originalCommit": "0c792a2916c2186b48502cc008956300ef2b9727", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "62ca82621729ce942e64610fe52d4abc50335ef7", "url": "https://github.com/bisq-network/bisq/commit/62ca82621729ce942e64610fe52d4abc50335ef7", "message": "Use java doc at constructor", "committedDate": "2020-12-27T00:47:57Z", "type": "commit"}]}