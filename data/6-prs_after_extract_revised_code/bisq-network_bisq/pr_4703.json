{"pr_number": 4703, "pr_title": "Refactor CLI output formatting code & add trade formatter", "pr_createdAt": "2020-10-25T19:55:22Z", "pr_url": "https://github.com/bisq-network/bisq/pull/4703", "timeline": [{"oid": "cb65de6d2e1497eb8eaf86404fc3285729aba87c", "url": "https://github.com/bisq-network/bisq/commit/cb65de6d2e1497eb8eaf86404fc3285729aba87c", "message": "Block on tx-fee-request in core TakeOfferModel init\n\nAdded license comment too.", "committedDate": "2020-10-23T15:47:06Z", "type": "commit"}, {"oid": "ab20225cd2d50003a8f7f45feca6227a2370a9fb", "url": "https://github.com/bisq-network/bisq/commit/ab20225cd2d50003a8f7f45feca6227a2370a9fb", "message": "Add compiler warning suppression, remove comment", "committedDate": "2020-10-24T19:25:20Z", "type": "commit"}, {"oid": "63cf4369904855013ac5b8e37de43462c02e1551", "url": "https://github.com/bisq-network/bisq/commit/63cf4369904855013ac5b8e37de43462c02e1551", "message": "Add fields to grpc TradeInfo proto & wrapper", "committedDate": "2020-10-24T19:27:03Z", "type": "commit"}, {"oid": "296e4f98cb6231ed2226e72d95c1317981a9d008", "url": "https://github.com/bisq-network/bisq/commit/296e4f98cb6231ed2226e72d95c1317981a9d008", "message": "Replace static TradeUtil with singleton TradeUtil\n\nThe API is going to need some desktop trade utilities, which should be\nshared between :desktop and :core.api.", "committedDate": "2020-10-24T20:26:10Z", "type": "commit"}, {"oid": "ccd3c99f2e5b9cf276e6b70bceb34e73fb0a6858", "url": "https://github.com/bisq-network/bisq/commit/ccd3c99f2e5b9cf276e6b70bceb34e73fb0a6858", "message": "Fix comment typos", "committedDate": "2020-10-24T20:45:01Z", "type": "commit"}, {"oid": "24ba9215cd12f65605b23c2f5d53037258afd019", "url": "https://github.com/bisq-network/bisq/commit/24ba9215cd12f65605b23c2f5d53037258afd019", "message": "Refactor PendingTradesViewModel methods -> TradeUtil & OfferUtil", "committedDate": "2020-10-25T13:41:19Z", "type": "commit"}, {"oid": "36ad1379496d29bf26d6d3c90c4cc50b8c74b928", "url": "https://github.com/bisq-network/bisq/commit/36ad1379496d29bf26d6d3c90c4cc50b8c74b928", "message": "Remove trailing spaces for codacy", "committedDate": "2020-10-25T13:54:40Z", "type": "commit"}, {"oid": "95bcb1ef9c74c6fa48f946ebc29b9af55bd1ed70", "url": "https://github.com/bisq-network/bisq/commit/95bcb1ef9c74c6fa48f946ebc29b9af55bd1ed70", "message": "Refactor PendingTradesDataModel methods -> TradeUtil\n\nScope of this refactoring is small;  more can be done, but the short\nterm goal is to share trade util logic with core api.\n\n- Removed unused method getCurrencyCode()\n- Made minor style changes\n- Removed duplicated code block", "committedDate": "2020-10-25T14:27:30Z", "type": "commit"}, {"oid": "bbd7a31c88907e7c29ce473e5a71603f976ace21", "url": "https://github.com/bisq-network/bisq/commit/bbd7a31c88907e7c29ce473e5a71603f976ace21", "message": "Remove unused import", "committedDate": "2020-10-25T14:38:03Z", "type": "commit"}, {"oid": "161dbade0d04dcd7439e3ed94929a4c4ce3fdab0", "url": "https://github.com/bisq-network/bisq/commit/161dbade0d04dcd7439e3ed94929a4c4ce3fdab0", "message": "Add getRole(tradeId) to core api\n\nAPI users will need to see their role as maker/taker when looking at trade details.\n\n- Add getRole(trade) to TradeUtil.\n- Add getTradeRole(tradeId) to CoreApi, CoreTradesService.\n- Add role field to TradeInfo proto and its wrapper class.", "committedDate": "2020-10-25T19:22:20Z", "type": "commit"}, {"oid": "3379376babab645af1f65cf595aca06768fd40c1", "url": "https://github.com/bisq-network/bisq/commit/3379376babab645af1f65cf595aca06768fd40c1", "message": "Refactor CLI output formatting code & add trade formatter\n\n- Move output column header specs to its own shared constants class.\n\n- Add new TradeFormat class for printing trade details in the console.\n\n- Print formatted trade in api trade tests -- to see output before\n  using formatter in CLI (in next PR).", "committedDate": "2020-10-25T19:50:22Z", "type": "commit"}, {"oid": "d8bc26588c90d35436380143988e485b62a19e83", "url": "https://github.com/bisq-network/bisq/commit/d8bc26588c90d35436380143988e485b62a19e83", "message": "Add license comment", "committedDate": "2020-10-25T19:52:45Z", "type": "commit"}, {"oid": "31435bba51162f2ba352a7c055f5af9106010e5f", "url": "https://github.com/bisq-network/bisq/commit/31435bba51162f2ba352a7c055f5af9106010e5f", "message": "Move semicolon up from blank line", "committedDate": "2020-10-25T20:02:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA3Njg3Mg==", "url": "https://github.com/bisq-network/bisq/pull/4703#discussion_r515076872", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Some column values might be longer than header, so we need to calculated them.\n          \n          \n            \n                    // Some column values might be longer than header, so we need to calculate them.", "author": "sqrrm", "createdAt": "2020-10-30T12:56:02Z", "path": "cli/src/main/java/bisq/cli/TradeFormat.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ * This file is part of Bisq.\n+ *\n+ * Bisq is free software: you can redistribute it and/or modify it\n+ * under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or (at\n+ * your option) any later version.\n+ *\n+ * Bisq is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public\n+ * License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with Bisq. If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package bisq.cli;\n+\n+import bisq.proto.grpc.TradeInfo;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+\n+import java.util.function.Supplier;\n+\n+import static bisq.cli.ColumnHeaderConstants.*;\n+import static bisq.cli.CurrencyFormat.formatOfferPrice;\n+import static bisq.cli.CurrencyFormat.formatSatoshis;\n+import static com.google.common.base.Strings.padEnd;\n+\n+@VisibleForTesting\n+public class TradeFormat {\n+\n+    @VisibleForTesting\n+    public static String format(TradeInfo tradeInfo) {\n+        // Some column values might be longer than header, so we need to calculated them.", "originalCommit": "31435bba51162f2ba352a7c055f5af9106010e5f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE1OTMyMQ==", "url": "https://github.com/bisq-network/bisq/pull/4703#discussion_r515159321", "bodyText": "Resolved in PR #4731, commit 3cd3bf0.", "author": "ghubstan", "createdAt": "2020-10-30T14:55:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA3Njg3Mg=="}], "type": "inlineReview", "revised_code": null}]}