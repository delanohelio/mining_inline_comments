{"pr_number": 2440, "pr_title": "Fixed #2439", "pr_createdAt": "2020-10-10T21:21:38Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/2440", "timeline": [{"oid": "05d7ab5643ca71ebbb33509ed7c6d4c21ab135ee", "url": "https://github.com/Slimefun/Slimefun4/commit/05d7ab5643ca71ebbb33509ed7c6d4c21ab135ee", "message": "Update ExplosiveTool.java", "committedDate": "2020-10-10T21:12:42Z", "type": "commit"}, {"oid": "bf3e6754cc0539a4f1a5553befe83e58997580e9", "url": "https://github.com/Slimefun/Slimefun4/commit/bf3e6754cc0539a4f1a5553befe83e58997580e9", "message": "Changed event priorities.", "committedDate": "2020-10-10T21:19:15Z", "type": "commit"}, {"oid": "fdd33f91828ed6214dcf3b1cf08b0c8070d7c6e3", "url": "https://github.com/Slimefun/Slimefun4/commit/fdd33f91828ed6214dcf3b1cf08b0c8070d7c6e3", "message": "Update CHANGELOG.md", "committedDate": "2020-10-10T21:20:02Z", "type": "commit"}, {"oid": "6082abb9b6431893b38f5282a455a2d8804fb579", "url": "https://github.com/Slimefun/Slimefun4/commit/6082abb9b6431893b38f5282a455a2d8804fb579", "message": "Merge branch 'master' into ExplosivePickFix", "committedDate": "2020-10-10T21:23:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502840895", "bodyText": "This is completely redundant as the Listener which calls this method already checks if it is cancelled.\nAlso missing brackets.", "author": "TheBusyBiscuit", "createdAt": "2020-10-10T22:52:03Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveTool.java", "diffHunk": "@@ -52,6 +52,8 @@ public ExplosiveTool(Category category, SlimefunItemStack item, RecipeType recip\n     @Override\n     public ToolUseHandler getItemHandler() {\n         return (e, tool, fortune, drops) -> {\n+            if (e.isCancelled()) return;", "originalCommit": "6082abb9b6431893b38f5282a455a2d8804fb579", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MTg5NQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502841895", "bodyText": "This is completely redundant as the Listener which calls this method already checks if it is cancelled.\nAlso missing brackets.\n\nNo it doesn't", "author": "LinoxGH", "createdAt": "2020-10-10T23:04:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MTkyNA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502841924", "bodyText": "It only does a material check.", "author": "LinoxGH", "createdAt": "2020-10-10T23:05:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MzgwOA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502843808", "bodyText": "ignoreCancelled = true\n@EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n    public void onBlockBreak(BlockBreakEvent e) {", "author": "TheBusyBiscuit", "createdAt": "2020-10-10T23:30:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg2NjA5Mw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502866093", "bodyText": "ignoreCancelled = true\n@EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n    public void onBlockBreak(BlockBreakEvent e) {\n\nYes. So listener is fired no matter if the even is cancelled. If that worked like it ignored cancelled events, then why is there a cancelled check below?", "author": "LinoxGH", "createdAt": "2020-10-11T05:02:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg2OTEyMw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502869123", "bodyText": "Ok just looked up, I was wrong.", "author": "LinoxGH", "createdAt": "2020-10-11T05:47:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg5NjIzNg==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502896236", "bodyText": "ignoreCancelled is very ambiguous", "author": "svr333", "createdAt": "2020-10-11T10:26:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDg5NQ=="}], "type": "inlineReview", "revised_code": {"commit": "7af1e8144d62380def5769b14e81915a8611f40c", "chunk": "diff --git a/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveTool.java b/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveTool.java\nindex 056eb62d0..ada035c21 100644\n--- a/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveTool.java\n+++ b/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveTool.java\n\n@@ -52,8 +52,6 @@ class ExplosiveTool extends SimpleSlimefunItem<ToolUseHandler> implements NotPla\n     @Override\n     public ToolUseHandler getItemHandler() {\n         return (e, tool, fortune, drops) -> {\n-            if (e.isCancelled()) return;\n-            \n             Player p = e.getPlayer();\n             Block b = e.getBlock();\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDk3Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502840977", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @EventHandler(priority = EventPriority.HIGHEST, ignoreCancelled = true)\n          \n          \n            \n                @EventHandler(priority = EventPriority.HIGH, ignoreCancelled = true)", "author": "TheBusyBiscuit", "createdAt": "2020-10-10T22:52:55Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockListener.java", "diffHunk": "@@ -75,7 +75,7 @@ public void onBlockPlace(BlockPlaceEvent e) {\n         }\n     }\n \n-    @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n+    @EventHandler(priority = EventPriority.HIGHEST, ignoreCancelled = true)", "originalCommit": "6082abb9b6431893b38f5282a455a2d8804fb579", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MTMxNw==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502841317", "bodyText": "Can I ask why were even changing this?", "author": "svr333", "createdAt": "2020-10-10T22:57:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MTQxNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502841415", "bodyText": "The bug was about this running AFTER HIGHEST, which should not be done anyway. By moving it TO HIGHEST we basically didn't fix the issue but rather let randomness decide.", "author": "TheBusyBiscuit", "createdAt": "2020-10-10T22:58:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MTQ4MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/2440#discussion_r502841480", "bodyText": "In theory events should try to run on NORMAL unless there is a valid reason not to, due to this being dependent on some things to process first, there is a point to be made to move it to HIGH but HIGHEST is definitely too late.", "author": "TheBusyBiscuit", "createdAt": "2020-10-10T22:59:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg0MDk3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "957bcd9a3a03561cbb1b592e80f824809f5f89c0", "chunk": "diff --git a/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockListener.java b/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockListener.java\nindex 57f0d8b38..0ef709cd9 100644\n--- a/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockListener.java\n+++ b/src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockListener.java\n\n@@ -75,7 +75,7 @@ public class BlockListener implements Listener {\n         }\n     }\n \n-    @EventHandler(priority = EventPriority.HIGHEST, ignoreCancelled = true)\n+    @EventHandler(priority = EventPriority.HIGH, ignoreCancelled = true)\n     public void onBlockBreak(BlockBreakEvent e) {\n         checkForSensitiveBlockAbove(e.getPlayer(), e.getBlock());\n \n"}}, {"oid": "957bcd9a3a03561cbb1b592e80f824809f5f89c0", "url": "https://github.com/Slimefun/Slimefun4/commit/957bcd9a3a03561cbb1b592e80f824809f5f89c0", "message": "Update src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/BlockListener.java\n\nCo-authored-by: TheBusyBiscuit <TheBusyBiscuit@users.noreply.github.com>", "committedDate": "2020-10-10T23:01:54Z", "type": "commit"}, {"oid": "7af1e8144d62380def5769b14e81915a8611f40c", "url": "https://github.com/Slimefun/Slimefun4/commit/7af1e8144d62380def5769b14e81915a8611f40c", "message": "Update ExplosiveTool.java", "committedDate": "2020-10-11T05:48:27Z", "type": "commit"}, {"oid": "4980b078a10d91cec8e7fd266f53740b0a974f29", "url": "https://github.com/Slimefun/Slimefun4/commit/4980b078a10d91cec8e7fd266f53740b0a974f29", "message": "Update BlockListener.java", "committedDate": "2020-10-11T05:50:04Z", "type": "commit"}]}