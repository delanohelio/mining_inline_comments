{"pr_number": 2137, "pr_title": "Fix #2108: Split Kubernetes Model into smaller Jars", "pr_createdAt": "2020-04-15T17:51:43Z", "pr_url": "https://github.com/fabric8io/kubernetes-client/pull/2137", "timeline": [{"oid": "76441c93c9a609c116b537028cd8a1aefec100c2", "url": "https://github.com/fabric8io/kubernetes-client/commit/76441c93c9a609c116b537028cd8a1aefec100c2", "message": "Fix #2108: Split Kubernetes Model into smaller Jars", "committedDate": "2020-04-16T11:33:36Z", "type": "forcePushed"}, {"oid": "dcb94cb2b2a81162d5e548871af0796736b3021c", "url": "https://github.com/fabric8io/kubernetes-client/commit/dcb94cb2b2a81162d5e548871af0796736b3021c", "message": "Fix #2108: Split Kubernetes Model into smaller Jars", "committedDate": "2020-04-16T12:25:27Z", "type": "forcePushed"}, {"oid": "e98a7939a320bb247715e9a42f2beea422e30b26", "url": "https://github.com/fabric8io/kubernetes-client/commit/e98a7939a320bb247715e9a42f2beea422e30b26", "message": "Fix #2108: Split Kubernetes Model into smaller Jars", "committedDate": "2020-04-16T12:39:42Z", "type": "forcePushed"}, {"oid": "9ca264760f2b3a3d37ef97e76e77117cf32a4507", "url": "https://github.com/fabric8io/kubernetes-client/commit/9ca264760f2b3a3d37ef97e76e77117cf32a4507", "message": "Fix #2108: Split Kubernetes Model into smaller Jars", "committedDate": "2020-04-16T14:33:10Z", "type": "forcePushed"}, {"oid": "c134d947f0aacd6b1358052ed70e401871872f05", "url": "https://github.com/fabric8io/kubernetes-client/commit/c134d947f0aacd6b1358052ed70e401871872f05", "message": "Fix #2108: Split Kubernetes Model into smaller Jars", "committedDate": "2020-04-16T14:57:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxMjE5NQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410012195", "bodyText": "Why was this changed?", "author": "manusa", "createdAt": "2020-04-17T06:13:58Z", "path": "kubernetes-model/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/KubernetesList.java", "diffHunk": "@@ -43,7 +44,7 @@\n })\n @JsonDeserialize(using = JsonDeserializer.None.class)\n @Buildable(editableEnabled = false, validationEnabled = false, generateBuilderPackage=true, builderPackage = \"io.fabric8.kubernetes.api.builder\", inline = @Inline(type = Doneable.class, prefix = \"Doneable\", value = \"done\"))\n-public class KubernetesList extends BaseKubernetesList implements KubernetesResource {\n+public class KubernetesList extends BaseKubernetesList implements Serializable {", "originalCommit": "4d67558374f0fd3a92ee514c26168a5f369e699f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxMzAwMA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410013000", "bodyText": "looks like a mistake. I would revert it to it's previous state", "author": "rohanKanojia", "createdAt": "2020-04-17T06:16:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxMjE5NQ=="}], "type": "inlineReview", "revised_code": {"commit": "a85600a55422afb665bedca5a623afe127882c2b", "chunk": "diff --git a/kubernetes-model/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/KubernetesList.java b/kubernetes-model/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/KubernetesList.java\nindex 477f342cf..4501ad5ab 100644\n--- a/kubernetes-model/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/KubernetesList.java\n+++ b/kubernetes-model/kubernetes-model-core/src/main/java/io/fabric8/kubernetes/api/model/KubernetesList.java\n\n@@ -44,7 +44,7 @@ import java.util.List;\n })\n @JsonDeserialize(using = JsonDeserializer.None.class)\n @Buildable(editableEnabled = false, validationEnabled = false, generateBuilderPackage=true, builderPackage = \"io.fabric8.kubernetes.api.builder\", inline = @Inline(type = Doneable.class, prefix = \"Doneable\", value = \"done\"))\n-public class KubernetesList extends BaseKubernetesList implements Serializable {\n+public class KubernetesList extends BaseKubernetesList implements KubernetesResource {\n \n     /**\n      * No args constructor for use in serialization\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxMjc5MA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410012790", "bodyText": "Either remove the class or add some tests to it", "author": "manusa", "createdAt": "2020-04-17T06:15:55Z", "path": "kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/ListOptionsTest.java", "diffHunk": "@@ -0,0 +1,19 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.fabric8.kubernetes.api.model;\n+\n+public class ListOptionsTest {", "originalCommit": "4d67558374f0fd3a92ee514c26168a5f369e699f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a85600a55422afb665bedca5a623afe127882c2b", "chunk": "diff --git a/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/ListOptionsTest.java b/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/ListOptionsTest.java\nindex cb7b65c95..969a2773e 100644\n--- a/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/ListOptionsTest.java\n+++ b/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/ListOptionsTest.java\n\n@@ -15,5 +15,21 @@\n  */\n package io.fabric8.kubernetes.api.model;\n \n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n public class ListOptionsTest {\n+  @Test\n+  public void testBuilder() {\n+    ListOptions listOptions = new io.fabric8.kubernetes.api.model.ListOptionsBuilder()\n+      .withLimit(100L)\n+      .withContinue(\"23243434\")\n+      .withFieldSelector(\"metadata.name=my-service\")\n+      .build();\n+\n+    assertEquals(100L, listOptions.getLimit());\n+    assertEquals(\"23243434\", listOptions.getContinue());\n+    assertEquals(\"metadata.name=my-service\", listOptions.getFieldSelector());\n+  }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxMzAyNQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410013025", "bodyText": "Either remove the class or add some tests to it", "author": "manusa", "createdAt": "2020-04-17T06:16:44Z", "path": "kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/StatusTest.java", "diffHunk": "@@ -0,0 +1,19 @@\n+/**\n+ * Copyright (C) 2015 Red Hat, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.fabric8.kubernetes.api.model;\n+\n+public class StatusTest {", "originalCommit": "4d67558374f0fd3a92ee514c26168a5f369e699f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a85600a55422afb665bedca5a623afe127882c2b", "chunk": "diff --git a/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/StatusTest.java b/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/StatusTest.java\nindex d7877d0c1..9fc3fad17 100644\n--- a/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/StatusTest.java\n+++ b/kubernetes-model/kubernetes-model-core/src/test/java/io/fabric8/kubernetes/api/model/StatusTest.java\n\n@@ -15,5 +15,33 @@\n  */\n package io.fabric8.kubernetes.api.model;\n \n+import org.junit.jupiter.api.Test;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n public class StatusTest {\n+  @Test\n+  public void testBuilder() {\n+    Status status = new io.fabric8.kubernetes.api.model.StatusBuilder()\n+      .withNewMetadata().withContinue(\"2343212\").endMetadata()\n+      .withStatus(\"Some status\")\n+      .withMessage(\"Some message\")\n+      .withCode(200)\n+      .withNewDetails()\n+      .withGroup(\"apps\")\n+      .withKind(\"Deployment\")\n+      .withName(\"nginx-deploy\")\n+      .addNewCause()\n+      .withField(\"spec.replicas\")\n+      .withMessage(\"Detailed message\")\n+      .endCause()\n+      .endDetails()\n+      .build();\n+\n+    assertEquals(\"2343212\", status.getMetadata().getContinue());\n+    assertEquals(\"Some status\", status.getStatus());\n+    assertEquals(\"Some message\", status.getMessage());\n+    assertEquals(200, status.getCode());\n+    assertEquals(1, status.getDetails().getCauses().size());\n+  }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzM2NQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410017365", "bodyText": "Why is this changed to false? Class generated with Annotator has it true", "author": "manusa", "createdAt": "2020-04-17T06:30:22Z", "path": "kubernetes-model/kubernetes-model-coordination/src/main/java/io/fabric8/kubernetes/api/model/coordination/v1/LeaseSpec.java", "diffHunk": "@@ -49,7 +49,7 @@\n @JsonDeserialize(using = com.fasterxml.jackson.databind.JsonDeserializer.None.class)\n @ToString\n @EqualsAndHashCode\n-@Buildable(editableEnabled = false, validationEnabled = false, generateBuilderPackage = true, lazyCollectionInitEnabled = false, builderPackage = \"io.fabric8.kubernetes.api.builder\", inline = @Inline(type = Doneable.class, prefix = \"Doneable\", value = \"done\"))\n+@Buildable(editableEnabled = false, validationEnabled = false, generateBuilderPackage = false, lazyCollectionInitEnabled = false, builderPackage = \"io.fabric8.kubernetes.api.builder\", inline = @Inline(type = Doneable.class, prefix = \"Doneable\", value = \"done\"))", "originalCommit": "4d67558374f0fd3a92ee514c26168a5f369e699f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxODQ5Mw==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410018493", "bodyText": "Actually, I think this flag is for generating sundrio helper classes again. In kubernetes-model-core, we use KubernetesCoreTypeAnnotator which sets generateBuilderPackage=true, rest of the models are simply depending on kubernetes-model-core so we don't need to do it in this case.\nEarlier everything was under one module that's why earlier it's generateBuilderPackage was set to true", "author": "rohanKanojia", "createdAt": "2020-04-17T06:33:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyMjI5Ng==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410022296", "bodyText": "These builders may actually be used by client users. If builders were being generated before, they should be still be generated. So KubernetesTypeAnnotator should set generateBuilderPackage=true too in order not to break compatibility.\nOr is there any reason why this flag was set to false in KubernetesTypeAnnotator?", "author": "manusa", "createdAt": "2020-04-17T06:44:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyNDM3MA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410024370", "bodyText": "By builder helper classes, I didn't mean builder itself. I meant these\n\nIf you look at extensions' model they are using kubernetes-model-core and they have generateBuilderPackage=false. That way these classes won't be generated again and would be consumed from kubernetes-model-core", "author": "rohanKanojia", "createdAt": "2020-04-17T06:49:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyNTQxMg==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410025412", "bodyText": "\ud83d\udc4d  nice explanation.\nThis may also help when dealing with the java 9 modularization.", "author": "manusa", "createdAt": "2020-04-17T06:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzM2NQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzU5Mw==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410017593", "bodyText": "Why is this changed to false? Class generated with Annotator has it true", "author": "manusa", "createdAt": "2020-04-17T06:31:05Z", "path": "kubernetes-model/openshift-model/src/main/java/io/fabric8/openshift/api/model/Template.java", "diffHunk": "@@ -61,7 +61,7 @@\n @JsonDeserialize(using = JsonDeserializer.None.class)\n @EqualsAndHashCode\n @ToString\n-@Buildable(editableEnabled = false, validationEnabled = false, generateBuilderPackage=true, builderPackage = \"io.fabric8.kubernetes.api.builder\", inline = @Inline(type = Doneable.class, prefix = \"Doneable\", value = \"done\"))\n+@Buildable(editableEnabled = false, validationEnabled = false, generateBuilderPackage=false, builderPackage = \"io.fabric8.kubernetes.api.builder\", inline = @Inline(type = Doneable.class, prefix = \"Doneable\", value = \"done\"))", "originalCommit": "4d67558374f0fd3a92ee514c26168a5f369e699f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyNTgxMA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2137#discussion_r410025810", "bodyText": "See #2137 (comment)", "author": "manusa", "createdAt": "2020-04-17T06:53:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAxNzU5Mw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "a85600a55422afb665bedca5a623afe127882c2b", "url": "https://github.com/fabric8io/kubernetes-client/commit/a85600a55422afb665bedca5a623afe127882c2b", "message": "Fix #2108: Refactor poms to remove boilerplate configuration", "committedDate": "2020-04-17T08:11:29Z", "type": "forcePushed"}, {"oid": "44ddf97af865240c30219175b20ce1368eaafa9c", "url": "https://github.com/fabric8io/kubernetes-client/commit/44ddf97af865240c30219175b20ce1368eaafa9c", "message": "Fix #2108: Refactor poms to remove boilerplate configuration", "committedDate": "2020-04-17T10:26:00Z", "type": "forcePushed"}, {"oid": "5322fa9e8cf549e46430bbcbd6177ffc043eaeb1", "url": "https://github.com/fabric8io/kubernetes-client/commit/5322fa9e8cf549e46430bbcbd6177ffc043eaeb1", "message": "Fix #2108: Split Kubernetes Model into smaller Jars", "committedDate": "2020-04-22T12:21:03Z", "type": "commit"}, {"oid": "861b4515b3e52fc343f3174464698d7d562bbcc3", "url": "https://github.com/fabric8io/kubernetes-client/commit/861b4515b3e52fc343f3174464698d7d562bbcc3", "message": "Fix #2108: Refactor poms to remove boilerplate configuration", "committedDate": "2020-04-23T06:45:16Z", "type": "forcePushed"}, {"oid": "e248725573ac5860b4374dc6bd1c42fcba4ebb4c", "url": "https://github.com/fabric8io/kubernetes-client/commit/e248725573ac5860b4374dc6bd1c42fcba4ebb4c", "message": "Fix #2108: Refactor poms to remove boilerplate configuration", "committedDate": "2020-04-23T09:57:21Z", "type": "commit"}, {"oid": "e248725573ac5860b4374dc6bd1c42fcba4ebb4c", "url": "https://github.com/fabric8io/kubernetes-client/commit/e248725573ac5860b4374dc6bd1c42fcba4ebb4c", "message": "Fix #2108: Refactor poms to remove boilerplate configuration", "committedDate": "2020-04-23T09:57:21Z", "type": "forcePushed"}]}