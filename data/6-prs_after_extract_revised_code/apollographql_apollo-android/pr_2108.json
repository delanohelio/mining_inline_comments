{"pr_number": 2108, "pr_title": "Fix IdlingResources issue with Watcher", "pr_createdAt": "2020-03-27T22:23:35Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2108", "timeline": [{"oid": "5e4c7bf6a15d60a6b36abcc182824f75d9c345e1", "url": "https://github.com/apollographql/apollo-android/commit/5e4c7bf6a15d60a6b36abcc182824f75d9c345e1", "message": "Also fix IdlingResources issue", "committedDate": "2020-03-27T22:21:35Z", "type": "commit"}, {"oid": "f880ba89b1cce2642b588d2caeba5f8913e5e90c", "url": "https://github.com/apollographql/apollo-android/commit/f880ba89b1cce2642b588d2caeba5f8913e5e90c", "message": "Test that shows watcher idling issue", "committedDate": "2020-03-27T22:21:35Z", "type": "commit"}, {"oid": "bc778ff290f738bf7547b4a55b366e9fccf758d7", "url": "https://github.com/apollographql/apollo-android/commit/bc778ff290f738bf7547b4a55b366e9fccf758d7", "message": "Proper fix for IdlingResource issue\n\nAdding a Watcher adds a call internally so that already contributes to the callCount. Watcher itself should not contribute to the call count.", "committedDate": "2020-03-27T22:21:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2NTU3OA==", "url": "https://github.com/apollographql/apollo-android/pull/2108#discussion_r399565578", "bodyText": "I can revert these if wanted. IntelliJ automatically put them", "author": "tasomaniac", "createdAt": "2020-03-27T22:25:44Z", "path": "apollo-runtime/src/main/java/com/apollographql/apollo/internal/ApolloCallTracker.java", "diffHunk": "@@ -160,12 +164,13 @@ void registerMutationCall(@NotNull ApolloMutationCall apolloMutationCall) {\n     checkNotNull(apolloMutationCall, \"apolloMutationCall == null\");\n     OperationName operationName = apolloMutationCall.operation().name();\n     registerCall(activeMutationCalls, operationName, apolloMutationCall);\n+    activeCallCount.incrementAndGet();\n   }\n \n   /**\n    * <p>Removes provided {@link ApolloMutationCall} that finished his execution, if it is found, else throws an\n    * {@link AssertionError}.</p>\n-   *\n+   * <p>", "originalCommit": "bc778ff290f738bf7547b4a55b366e9fccf758d7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}