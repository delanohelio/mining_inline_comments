{"pr_number": 2037, "pr_title": "Fix issue when JSON object map to raw String it loses quotes", "pr_createdAt": "2020-03-05T23:23:42Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2037", "timeline": [{"oid": "54bc6f987408a1d2d59c412a78a3b5f00361eda0", "url": "https://github.com/apollographql/apollo-android/commit/54bc6f987408a1d2d59c412a78a3b5f00361eda0", "message": "Fix issue when JSON object map to raw String it loses quotes\n\nIn case when JSON object / array is mapped to plain `String` call proper JSON serialization instead of `value.toString()`.\n\nAlso it appears that `UnmodifiableMapBuilder` doesn't preserve order that seem really odd.\n\nBump version to `1.3.3`\n\nCloses https://github.com/apollographql/apollo-android/issues/2012", "committedDate": "2020-03-05T23:23:05Z", "type": "commit"}, {"oid": "12750cbd75b0a0c95c971ddf4ca725cffcbdae4b", "url": "https://github.com/apollographql/apollo-android/commit/12750cbd75b0a0c95c971ddf4ca725cffcbdae4b", "message": "Revert version back", "committedDate": "2020-03-06T00:12:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4MjAxMA==", "url": "https://github.com/apollographql/apollo-android/pull/2037#discussion_r388982010", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (value instanceof CustomTypeValue.GraphQLJsonList ||\n          \n          \n            \n                        value instanceof CustomTypeValue.GraphQLJsonObject) {\n          \n          \n            \n                    if (value instanceof CustomTypeValue.GraphQLJsonList\n          \n          \n            \n                        || value instanceof CustomTypeValue.GraphQLJsonObject) {", "author": "tasomaniac", "createdAt": "2020-03-06T15:51:04Z", "path": "apollo-api/src/main/java/com/apollographql/apollo/response/ScalarTypeAdapters.java", "diffHunk": "@@ -45,7 +49,25 @@ public ScalarTypeAdapters(@NotNull Map<ScalarType, CustomTypeAdapter> customAdap\n     Map<Class, CustomTypeAdapter> adapters = new LinkedHashMap<>();\n     adapters.put(String.class, new DefaultCustomTypeAdapter<String>() {\n       @NotNull @Override public String decode(@NotNull CustomTypeValue value) {\n-        return value.value.toString();\n+        if (value instanceof CustomTypeValue.GraphQLJsonList ||\n+            value instanceof CustomTypeValue.GraphQLJsonObject) {", "originalCommit": "12750cbd75b0a0c95c971ddf4ca725cffcbdae4b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4ab4eb8d7f2b4a6d3addeb06ac2df2af107b63ab", "chunk": "diff --git a/apollo-api/src/main/java/com/apollographql/apollo/response/ScalarTypeAdapters.java b/apollo-api/src/main/java/com/apollographql/apollo/response/ScalarTypeAdapters.java\nindex 22ed178a7..b0a65a0be 100644\n--- a/apollo-api/src/main/java/com/apollographql/apollo/response/ScalarTypeAdapters.java\n+++ b/apollo-api/src/main/java/com/apollographql/apollo/response/ScalarTypeAdapters.java\n\n@@ -49,8 +49,8 @@ public final class ScalarTypeAdapters {\n     Map<Class, CustomTypeAdapter> adapters = new LinkedHashMap<>();\n     adapters.put(String.class, new DefaultCustomTypeAdapter<String>() {\n       @NotNull @Override public String decode(@NotNull CustomTypeValue value) {\n-        if (value instanceof CustomTypeValue.GraphQLJsonList ||\n-            value instanceof CustomTypeValue.GraphQLJsonObject) {\n+        if (value instanceof CustomTypeValue.GraphQLJsonList\n+            || value instanceof CustomTypeValue.GraphQLJsonObject) {\n           final Buffer buffer = new Buffer();\n           final JsonWriter writer = JsonWriter.of(buffer);\n           try {\n"}}, {"oid": "4ab4eb8d7f2b4a6d3addeb06ac2df2af107b63ab", "url": "https://github.com/apollographql/apollo-android/commit/4ab4eb8d7f2b4a6d3addeb06ac2df2af107b63ab", "message": "Update apollo-api/src/main/java/com/apollographql/apollo/response/ScalarTypeAdapters.java", "committedDate": "2020-03-06T15:51:11Z", "type": "commit"}, {"oid": "05521b5764bd1c99ff33dd5bd4e1d76939fcfe05", "url": "https://github.com/apollographql/apollo-android/commit/05521b5764bd1c99ff33dd5bd4e1d76939fcfe05", "message": "Fix tests", "committedDate": "2020-03-06T19:31:51Z", "type": "commit"}]}