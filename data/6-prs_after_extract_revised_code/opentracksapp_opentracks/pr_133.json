{"pr_number": 133, "pr_title": "Forward multiple tracks to dashboard", "pr_createdAt": "2020-01-27T19:22:42Z", "pr_url": "https://github.com/OpenTracksApp/OpenTracks/pull/133", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MDk2MQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374370961", "bodyText": "Can  you applying autoformatting?\n(I guess, at the moment the defaults of AndroidStudio are used).", "author": "dennisguse", "createdAt": "2020-02-03T22:12:19Z", "path": "src/androidTest/java/de/dennisguse/opentracks/content/provider/CustomContentProviderUtilsTest.java", "diffHunk": "@@ -766,4 +766,12 @@ private void insertTrackWithLocations(Track track) {\n         contentProviderUtils.insertTrack(track);\n         contentProviderUtils.bulkInsertTrackPoint(track.getLocations().toArray(new Location[0]), track.getLocations().size(), track.getId());\n     }\n+\n+    @Test\n+    public void testFormatIdListForUri() {\n+        Assert.assertEquals(\"\", ContentProviderUtils.formatIdListForUri(new long[]{}));\n+        Assert.assertEquals(\"12\", ContentProviderUtils.formatIdListForUri(new long[]{12}));\n+        Assert.assertEquals(\"42,43,44\", ContentProviderUtils.formatIdListForUri(new long[]{42,43,44}));", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d821d0fef42f598a5044377fbee34d7f24a66559", "chunk": "diff --git a/src/androidTest/java/de/dennisguse/opentracks/content/provider/CustomContentProviderUtilsTest.java b/src/androidTest/java/de/dennisguse/opentracks/content/provider/CustomContentProviderUtilsTest.java\nindex 4f4905905..d0ca34d98 100644\n--- a/src/androidTest/java/de/dennisguse/opentracks/content/provider/CustomContentProviderUtilsTest.java\n+++ b/src/androidTest/java/de/dennisguse/opentracks/content/provider/CustomContentProviderUtilsTest.java\n\n@@ -771,7 +771,7 @@ public class CustomContentProviderUtilsTest {\n     public void testFormatIdListForUri() {\n         Assert.assertEquals(\"\", ContentProviderUtils.formatIdListForUri(new long[]{}));\n         Assert.assertEquals(\"12\", ContentProviderUtils.formatIdListForUri(new long[]{12}));\n-        Assert.assertEquals(\"42,43,44\", ContentProviderUtils.formatIdListForUri(new long[]{42,43,44}));\n+        Assert.assertEquals(\"42,43,44\", ContentProviderUtils.formatIdListForUri(new long[]{42, 43, 44}));\n     }\n \n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MTA3NQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374371075", "bodyText": "Remove", "author": "dennisguse", "createdAt": "2020-02-03T22:12:35Z", "path": "src/androidTest/java/de/dennisguse/opentracks/util/StringUtilsTest.java", "diffHunk": "@@ -208,4 +208,5 @@ public void testFormatDecimal() {\n \n         Assert.assertEquals(\"1\", StringUtils.formatDecimal(0.99, 1));\n     }\n+", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d821d0fef42f598a5044377fbee34d7f24a66559", "chunk": "diff --git a/src/androidTest/java/de/dennisguse/opentracks/util/StringUtilsTest.java b/src/androidTest/java/de/dennisguse/opentracks/util/StringUtilsTest.java\nindex 509bfd570..2836f8131 100644\n--- a/src/androidTest/java/de/dennisguse/opentracks/util/StringUtilsTest.java\n+++ b/src/androidTest/java/de/dennisguse/opentracks/util/StringUtilsTest.java\n\n@@ -208,5 +208,4 @@ public class StringUtilsTest {\n \n         Assert.assertEquals(\"1\", StringUtils.formatDecimal(0.99, 1));\n     }\n-\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MTgyMQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374371821", "bodyText": "url.getLastPathSegment()", "author": "dennisguse", "createdAt": "2020-02-03T22:14:26Z", "path": "src/main/java/de/dennisguse/opentracks/content/provider/ContentProviderUtils.java", "diffHunk": "@@ -942,4 +944,30 @@ int getDefaultCursorBatchSize() {\n     void setDefaultCursorBatchSize(int defaultCursorBatchSize) {\n         this.defaultCursorBatchSize = defaultCursorBatchSize;\n     }\n+\n+    /**\n+     * Formats an array of IDs as comma separated string value\n+     *\n+     * @param ids   array with IDs\n+     * @return comma separated list of ids\n+     */\n+    public static String formatIdListForUri(long[] ids) {\n+        StringBuilder idsPathSegment = new StringBuilder();\n+        for (long id : ids) {\n+            if (idsPathSegment.length() > 0) {\n+                idsPathSegment.append(ID_SEPARATOR);\n+            }\n+            idsPathSegment.append(id);\n+        }\n+        return idsPathSegment.toString();\n+    }\n+\n+    public static String[] parseTrackIdsFromTrackPointsUri(Uri url) {\n+        return TextUtils.split(url.getPathSegments().get(2), ID_SEPARATOR);", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d821d0fef42f598a5044377fbee34d7f24a66559", "chunk": "diff --git a/src/main/java/de/dennisguse/opentracks/content/provider/ContentProviderUtils.java b/src/main/java/de/dennisguse/opentracks/content/provider/ContentProviderUtils.java\nindex f25ad5bbc..870f63514 100644\n--- a/src/main/java/de/dennisguse/opentracks/content/provider/ContentProviderUtils.java\n+++ b/src/main/java/de/dennisguse/opentracks/content/provider/ContentProviderUtils.java\n\n@@ -962,12 +962,8 @@ public class ContentProviderUtils {\n         return idsPathSegment.toString();\n     }\n \n-    public static String[] parseTrackIdsFromTrackPointsUri(Uri url) {\n-        return TextUtils.split(url.getPathSegments().get(2), ID_SEPARATOR);\n-    }\n-\n-    public static String[] parseTrackIdsFromTracksByIdUri(Uri url) {\n-        return TextUtils.split(url.getPathSegments().get(1), ID_SEPARATOR);\n+    public static String[] parseTrackIdsFromUri(Uri url) {\n+        return TextUtils.split(url.getLastPathSegment(), ID_SEPARATOR);\n     }\n \n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MjEyOA==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374372128", "bodyText": "Remove", "author": "dennisguse", "createdAt": "2020-02-03T22:15:11Z", "path": "src/main/java/de/dennisguse/opentracks/util/StringUtils.java", "diffHunk": "@@ -415,4 +415,5 @@ public static long parseTime(String xmlDateTime) {\n         }\n         return new Pair<>(value, unit);\n     }\n+", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d821d0fef42f598a5044377fbee34d7f24a66559", "chunk": "diff --git a/src/main/java/de/dennisguse/opentracks/util/StringUtils.java b/src/main/java/de/dennisguse/opentracks/util/StringUtils.java\nindex 21807d584..8091a8c9c 100644\n--- a/src/main/java/de/dennisguse/opentracks/util/StringUtils.java\n+++ b/src/main/java/de/dennisguse/opentracks/util/StringUtils.java\n\n@@ -415,5 +415,4 @@ public class StringUtils {\n         }\n         return new Pair<>(value, unit);\n     }\n-\n }\n"}}, {"oid": "d821d0fef42f598a5044377fbee34d7f24a66559", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/d821d0fef42f598a5044377fbee34d7f24a66559", "message": "Forward multiple tracks to dashboard", "committedDate": "2020-02-03T22:30:15Z", "type": "commit"}]}