{"pr_number": 8226, "pr_title": "Add speed step dropdown to throttles", "pr_createdAt": "2020-03-10T06:43:54Z", "pr_url": "https://github.com/JMRI/JMRI/pull/8226", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjA5MQ==", "url": "https://github.com/JMRI/JMRI/pull/8226#discussion_r390206091", "bodyText": "Please change references to peopleKey or peopleName to description, since that is a common term for this kind of key elsewhere in our code.", "author": "rhwood", "createdAt": "2020-03-10T10:03:13Z", "path": "java/src/jmri/SpeedStepMode.java", "diffHunk": "@@ -20,30 +20,38 @@\n  */\n @javax.annotation.concurrent.Immutable\n public enum SpeedStepMode {\n-    UNKNOWN(\"unknown\", 1, 0.0f),\n+    // NOTE: keep these up to date with xml/schema/locomotive-config.xsd\n+    UNKNOWN(\"unknown\", 1, 0.0f, \"SpeedStepUnknown\"),\n     // NMRA DCC standard speed step modes.\n-    NMRA_DCC_128(\"128\", 126), // Remember there are only 126 non-stop values in 128 speed.\n-    NMRA_DCC_28(\"28\", 28),\n-    NMRA_DCC_27(\"27\", 27),\n-    NMRA_DCC_14(\"14\", 14),\n+    NMRA_DCC_128(\"128\", 126, \"SpeedStep128\"), // Remember there are only 126 non-stop values in 128 speed.\n+    NMRA_DCC_28(\"28\", 28, \"SpeedStep28\"),\n+    NMRA_DCC_27(\"27\", 27, \"SpeedStep27\"),\n+    NMRA_DCC_14(\"14\", 14, \"SpeedStep14\"),\n     // Non-DCC speed step modes.\n-    MOTOROLA_28(\"motorola_28\", 28), // Motorola 28 speed step mode.\n-    TMCC_32(\"tmcc_32\", 32), // Lionel TMCC 32 speed step mode.\n-    INCREMENTAL(\"incremental\", 1, 1.0f);\n+    MOTOROLA_28(\"motorola_28\", 28, \"SpeedStep28Motorola\"), // Motorola 28 speed step mode.\n+    TMCC_32(\"tmcc_32\", 32, \"SpeedStep32TMCC\"), // Lionel TMCC 32 speed step mode.\n+    INCREMENTAL(\"incremental\", 1, 1.0f, \"SpeedStepIncremental\");\n \n-    SpeedStepMode(String name, int numSteps) {\n-        this(name, numSteps, 1.0f / numSteps);\n+    SpeedStepMode(String name, int numSteps, String peopleKey) {", "originalCommit": "cacfce7ff151ba455874f84de86f17456ce8fa18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc2NzIxNA==", "url": "https://github.com/JMRI/JMRI/pull/8226#discussion_r390767214", "bodyText": "Done.", "author": "trainman419", "createdAt": "2020-03-11T06:29:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNDgzNQ==", "url": "https://github.com/JMRI/JMRI/pull/8226#discussion_r392604835", "bodyText": "@trainman419\nThe code still has peopleKey instead of description. Please change this.", "author": "danielb987", "createdAt": "2020-03-14T17:28:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYyMjExMA==", "url": "https://github.com/JMRI/JMRI/pull/8226#discussion_r392622110", "bodyText": "Ooops. Fixed.", "author": "trainman419", "createdAt": "2020-03-14T21:50:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYyNTQ4NQ==", "url": "https://github.com/JMRI/JMRI/pull/8226#discussion_r392625485", "bodyText": "Thanks.", "author": "danielb987", "createdAt": "2020-03-14T22:49:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjA5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "cbbb22bc852939425e385f72a0103b7fd73d305d", "chunk": "diff --git a/java/src/jmri/SpeedStepMode.java b/java/src/jmri/SpeedStepMode.java\nindex a1c95c8d65..c22c5ed4df 100644\n--- a/java/src/jmri/SpeedStepMode.java\n+++ b/java/src/jmri/SpeedStepMode.java\n\n@@ -32,25 +32,25 @@ public enum SpeedStepMode {\n     TMCC_32(\"tmcc_32\", 32, \"SpeedStep32TMCC\"), // Lionel TMCC 32 speed step mode.\n     INCREMENTAL(\"incremental\", 1, 1.0f, \"SpeedStepIncremental\");\n \n-    SpeedStepMode(String name, int numSteps, String peopleKey) {\n-        this(name, numSteps, 1.0f / numSteps, peopleKey);\n+    SpeedStepMode(String name, int numSteps, String description) {\n+        this(name, numSteps, 1.0f / numSteps, description);\n     }\n \n-    SpeedStepMode(String name, int numSteps, float increment, String peopleKey) {\n+    SpeedStepMode(String name, int numSteps, float increment, String description) {\n         this.name = name;\n         this.numSteps = numSteps;\n         this.increment = increment;\n-        this.peopleName = Bundle.getMessage(peopleKey);\n+        this.description = Bundle.getMessage(description);\n     }\n \n     public final String name;\n     public final int numSteps;\n     public final float increment;\n-    public final String peopleName;\n+    public final String description;\n \n     @Override\n     public String toString() {\n-        return peopleName;\n+        return description;\n     }\n \n     /**\n"}}, {"oid": "cbbb22bc852939425e385f72a0103b7fd73d305d", "url": "https://github.com/JMRI/JMRI/commit/cbbb22bc852939425e385f72a0103b7fd73d305d", "message": "Switch throttle to speed step dropdown", "committedDate": "2020-03-14T21:49:22Z", "type": "commit"}, {"oid": "cbbb22bc852939425e385f72a0103b7fd73d305d", "url": "https://github.com/JMRI/JMRI/commit/cbbb22bc852939425e385f72a0103b7fd73d305d", "message": "Switch throttle to speed step dropdown", "committedDate": "2020-03-14T21:49:22Z", "type": "forcePushed"}]}