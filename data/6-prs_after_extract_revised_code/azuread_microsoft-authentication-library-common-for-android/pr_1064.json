{"pr_number": 1064, "pr_title": "Expose expiresIn in MSAL Device Code flow callback", "pr_createdAt": "2020-09-30T17:32:48Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1064", "timeline": [{"oid": "f7b43bea10592eebe37d5e9fe60e593c8856c492", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/f7b43bea10592eebe37d5e9fe60e593c8856c492", "message": "Address comment", "committedDate": "2020-09-30T21:56:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2Mzg0Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1064#discussion_r498463847", "bodyText": "Could use TimeUnit.SECONDS.toMillis() here instead of multiplying by 1000", "author": "shahzaibj", "createdAt": "2020-10-01T19:19:51Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java", "diffHunk": "@@ -73,13 +75,23 @@ public AcquireTokenResult execute() throws Exception {\n         final MicrosoftStsAuthorizationResponse authorizationResponse =\n                 (MicrosoftStsAuthorizationResponse) authorizationResult.getAuthorizationResponse();\n \n+        final Date expiredDate = new Date();\n+        try {\n+            long expiredInInMilliseconds = 1000 * Long.parseLong(authorizationResponse.getExpiresIn());", "originalCommit": "f7b43bea10592eebe37d5e9fe60e593c8856c492", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9319f2f5f09ce70d8fa27a30aa1029ada6074b0e", "chunk": "diff --git a/common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java b/common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java\nindex 184f1c14c..cc7ef180b 100644\n--- a/common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java\n+++ b/common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommand.java\n\n@@ -77,7 +78,7 @@ public class DeviceCodeFlowCommand extends TokenCommand {\n \n         final Date expiredDate = new Date();\n         try {\n-            long expiredInInMilliseconds = 1000 * Long.parseLong(authorizationResponse.getExpiresIn());\n+            long expiredInInMilliseconds = TimeUnit.SECONDS.toMillis(Long.parseLong(authorizationResponse.getExpiresIn()));\n             expiredDate.setTime(expiredDate.getTime() + expiredInInMilliseconds);\n         } catch (final NumberFormatException e){\n             // Shouldn't happen, but if it does, we don't want to fail the request because of this.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2NDMwMQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1064#discussion_r498464301", "bodyText": "javadoc does not seem to capture parameters....can we update that?", "author": "shahzaibj", "createdAt": "2020-10-01T19:20:45Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/commands/DeviceCodeFlowCommandCallback.java", "diffHunk": "@@ -24,11 +24,16 @@\n \n import androidx.annotation.NonNull;\n \n+import java.util.Date;\n+\n /**\n  * Extension of the CommandCallback class to allow Device Code Flow to display the user_code,\n  * verification_uri, and message midway through the protocol. This is done through the\n  * getUserCode() method shown below\n  */\n public interface DeviceCodeFlowCommandCallback<T, U> extends CommandCallback<T, U> {", "originalCommit": "f7b43bea10592eebe37d5e9fe60e593c8856c492", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2NTM2Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1064#discussion_r498465367", "bodyText": "nvm...that javadoc is for the class not the method", "author": "shahzaibj", "createdAt": "2020-10-01T19:22:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2NDMwMQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "9319f2f5f09ce70d8fa27a30aa1029ada6074b0e", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9319f2f5f09ce70d8fa27a30aa1029ada6074b0e", "message": "Expose expiresIn in MSAL DCF callback", "committedDate": "2020-10-09T18:48:53Z", "type": "forcePushed"}, {"oid": "ff4eb1b75ed4d35c2b705e7853085edd7d7dac37", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ff4eb1b75ed4d35c2b705e7853085edd7d7dac37", "message": "Expose expiresIn in MSAL DCF callback", "committedDate": "2020-10-09T19:23:28Z", "type": "commit"}, {"oid": "ff4eb1b75ed4d35c2b705e7853085edd7d7dac37", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ff4eb1b75ed4d35c2b705e7853085edd7d7dac37", "message": "Expose expiresIn in MSAL DCF callback", "committedDate": "2020-10-09T19:23:28Z", "type": "forcePushed"}]}