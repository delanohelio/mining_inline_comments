{"pr_number": 995, "pr_title": "Improving error messaging around SSL issues, pointing to docs", "pr_createdAt": "2020-08-10T20:48:41Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/995", "timeline": [{"oid": "4538a857aa9ed6e37f67b1052a8ac42d6f6ee58c", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4538a857aa9ed6e37f67b1052a8ac42d6f6ee58c", "message": "Improving error messaging around SSL issues, pointing to docs", "committedDate": "2020-08-10T20:45:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE3NzY1Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/995#discussion_r468177657", "bodyText": "@hamiltonha Do we have guidance on including pointers to docs URLs in error messages? Do we need to create a go.microsoft or aka.ms URL for it?", "author": "iambmelt", "createdAt": "2020-08-10T20:49:42Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java", "diffHunk": "@@ -136,18 +135,21 @@ public void onReceivedSslError(final WebView view,\n         super.onReceivedSslError(view, handler, error);\n         handler.cancel();\n \n+        final String sslHelpUrl = \"https://docs.microsoft.com/en-us/troubleshoot/azure/active-directory/adal-authenticate-android-devices-fail\";", "originalCommit": "4538a857aa9ed6e37f67b1052a8ac42d6f6ee58c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIwNjM0NA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/995#discussion_r468206344", "bodyText": "@iambmelt we need to create FWLinks, for future reference: https://review.docs.microsoft.com/en-us/help/contribute/contribute-link-to-articles-from-the-user-interface?branch=master", "author": "hamiltonha", "createdAt": "2020-08-10T21:51:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE3NzY1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIxMzA3Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/995#discussion_r468213077", "bodyText": "Thank you!", "author": "iambmelt", "createdAt": "2020-08-10T22:07:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE3NzY1Nw=="}], "type": "inlineReview", "revised_code": {"commit": "ac845e6658d7f25acf174ff83eef4b243c83e5a1", "chunk": "diff --git a/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java b/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java\nindex 77f88f26f..bc6dc8d70 100644\n--- a/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java\n+++ b/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java\n\n@@ -135,7 +135,7 @@ public abstract class OAuth2WebViewClient extends WebViewClient {\n         super.onReceivedSslError(view, handler, error);\n         handler.cancel();\n \n-        final String sslHelpUrl = \"https://docs.microsoft.com/en-us/troubleshoot/azure/active-directory/adal-authenticate-android-devices-fail\";\n+        final String sslHelpUrl = \"https://go.microsoft.com/fwlink/?linkid=2138180\";\n         final String errMsg = String.format(\n                 \"Received SSL Error during request. Please see %s for more info.\",\n                 sslHelpUrl\n"}}, {"oid": "ac845e6658d7f25acf174ff83eef4b243c83e5a1", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ac845e6658d7f25acf174ff83eef4b243c83e5a1", "message": "Using 'go' link", "committedDate": "2020-08-10T22:06:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIyNTMzMQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/995#discussion_r468225331", "bodyText": "Can this whole thing just be a static constant?", "author": "AdamBJohnsonx", "createdAt": "2020-08-10T22:41:26Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java", "diffHunk": "@@ -136,18 +135,21 @@ public void onReceivedSslError(final WebView view,\n         super.onReceivedSslError(view, handler, error);\n         handler.cancel();\n \n+        final String sslHelpUrl = \"https://go.microsoft.com/fwlink/?linkid=2138180\";\n+        final String errMsg = String.format(\n+                \"Received SSL Error during request. Please see %s for more info.\",\n+                sslHelpUrl\n+        );", "originalCommit": "ac845e6658d7f25acf174ff83eef4b243c83e5a1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIyNjA4Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/995#discussion_r468226083", "bodyText": "Also, using concatenation is far more efficient than String.format, which we should probably avoid whenever feasible.", "author": "AdamBJohnsonx", "createdAt": "2020-08-10T22:43:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIyNTMzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "3c4e454784c9d9f8b6acc6270f1c9e0c3977df1f", "chunk": "diff --git a/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java b/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java\nindex bc6dc8d70..130cb4b28 100644\n--- a/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java\n+++ b/common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java\n\n@@ -135,11 +136,7 @@ public abstract class OAuth2WebViewClient extends WebViewClient {\n         super.onReceivedSslError(view, handler, error);\n         handler.cancel();\n \n-        final String sslHelpUrl = \"https://go.microsoft.com/fwlink/?linkid=2138180\";\n-        final String errMsg = String.format(\n-                \"Received SSL Error during request. Please see %s for more info.\",\n-                sslHelpUrl\n-        );\n+        final String errMsg = \"Received SSL Error during request. For more info see: \" + SSL_HELP_URL;\n \n         Logger.error(TAG + \":onReceivedSslError\", errMsg, null);\n \n"}}, {"oid": "3c4e454784c9d9f8b6acc6270f1c9e0c3977df1f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/3c4e454784c9d9f8b6acc6270f1c9e0c3977df1f", "message": "Use a constant, use string concat", "committedDate": "2020-08-10T22:53:51Z", "type": "commit"}, {"oid": "5aa01c6e815f0356e93576dea6688581caecc88f", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/5aa01c6e815f0356e93576dea6688581caecc88f", "message": "Move constant to constants file. Runs code formatter", "committedDate": "2020-08-10T23:03:24Z", "type": "commit"}]}