{"pr_number": 1149, "pr_title": "Remove about:blank initial page load from WebViewAuthorizationFragment", "pr_createdAt": "2020-12-05T02:00:28Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149", "timeline": [{"oid": "86c9906e743588a493235a392f5a00d652165598", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/86c9906e743588a493235a392f5a00d652165598", "message": "Remove about:blank initial page load -- why was this here?", "committedDate": "2020-12-05T01:45:31Z", "type": "commit"}, {"oid": "75788c812f7c3b658dd57ad823051a2d34fa52c9", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/75788c812f7c3b658dd57ad823051a2d34fa52c9", "message": "Update changelog", "committedDate": "2020-12-05T02:14:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1MzM2Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#discussion_r538753362", "bodyText": "We lost a null check here.  Did we need it?", "author": "AdamBJohnsonx", "createdAt": "2020-12-08T19:39:44Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/WebViewAuthorizationFragment.java", "diffHunk": "@@ -171,18 +169,14 @@ public void run() {\n     @Override\n     public boolean onBackPressed() {\n         Logger.info(TAG, \"Back button is pressed\");\n-        if (null != mWebView && mWebView.canGoBack()) {\n-            // User should be able to click back button to cancel. Counting blank page as well.\n-            final int BACK_PRESSED_STEPS = -2;\n-            if (!mWebView.canGoBackOrForward(BACK_PRESSED_STEPS)) {\n-                cancelAuthorization(true);\n-            } else {\n-                mWebView.goBack();\n-            }\n-            return true;\n+\n+        if (mWebView.canGoBack()) {", "originalCommit": "75788c812f7c3b658dd57ad823051a2d34fa52c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1NzQ2Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#discussion_r538757466", "bodyText": "Nope, not sure why this was here to begin with. The view will be created as part of the Fragment's start-up lifecycle", "author": "iambmelt", "createdAt": "2020-12-08T19:46:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1MzM2Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1NTA5Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#discussion_r538755093", "bodyText": "This used to return true iff we had a WebView and it could go back, false otherwise.  Do we need to?", "author": "AdamBJohnsonx", "createdAt": "2020-12-08T19:42:27Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/providers/oauth2/WebViewAuthorizationFragment.java", "diffHunk": "@@ -171,18 +169,14 @@ public void run() {\n     @Override\n     public boolean onBackPressed() {\n         Logger.info(TAG, \"Back button is pressed\");\n-        if (null != mWebView && mWebView.canGoBack()) {\n-            // User should be able to click back button to cancel. Counting blank page as well.\n-            final int BACK_PRESSED_STEPS = -2;\n-            if (!mWebView.canGoBackOrForward(BACK_PRESSED_STEPS)) {\n-                cancelAuthorization(true);\n-            } else {\n-                mWebView.goBack();\n-            }\n-            return true;\n+\n+        if (mWebView.canGoBack()) {\n+            mWebView.goBack();\n+        } else {\n+            cancelAuthorization(true);\n         }\n \n-        return false;\n+        return true;", "originalCommit": "75788c812f7c3b658dd57ad823051a2d34fa52c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2Mjg4Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/1149#discussion_r538762883", "bodyText": "Nope, unclear to me why this was ever written this way -- false should be used by this Fragment to signal \"I did not handle this event\" but, if it's on-screen, there is always something for this Fragment to do: either goBack() or self-cancel. Irrespective of which happens we should return true, signaling we handled the onBackPressed() event ourselves", "author": "iambmelt", "createdAt": "2020-12-08T19:55:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc1NTA5Mw=="}], "type": "inlineReview", "revised_code": null}]}