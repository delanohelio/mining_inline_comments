{"pr_number": 902, "pr_title": "ADAL adapter fix", "pr_createdAt": "2020-05-04T22:41:16Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902", "timeline": [{"oid": "215d36652af8157eea066c765a7188c8ff26658a", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/215d36652af8157eea066c765a7188c8ff26658a", "message": "ADAL adapter fix", "committedDate": "2020-05-04T22:31:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3MzU0OQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419773549", "bodyText": "Is this related to an issue, or should there be more in the commit message stating why this alteration needs to be made?", "author": "AdamBJohnsonx", "createdAt": "2020-05-04T22:48:37Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "originalCommit": "215d36652af8157eea066c765a7188c8ff26658a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3ODA4Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419778086", "bodyText": "Yes, we accidentally passed a hardcoded key into the clientId field, instead of the actual value.", "author": "rpdome", "createdAt": "2020-05-04T23:01:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3MzU0OQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419774337", "bodyText": "How are the requests working without a client id or how did they work \ud83d\ude44  ?\nCan you add a desc of the issue?", "author": "kreedula", "createdAt": "2020-05-04T22:50:32Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/request/AdalBrokerRequestAdapter.java", "diffHunk": "@@ -165,7 +165,7 @@ public BrokerInteractiveTokenCommandParameters brokerInteractiveParametersFromAc\n                 .extraQueryStringParameters(extraQP)\n                 .authority(authority)\n                 .scopes(scopes)\n-                .clientId(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY)\n+                .clientId(intent.getStringExtra(AuthenticationConstants.Broker.ACCOUNT_CLIENTID_KEY))", "originalCommit": "215d36652af8157eea066c765a7188c8ff26658a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NjA3MA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419776070", "bodyText": "Oh okay this is a regression due to lombok related changes, so looks like we haven't tested ADAL with broker for these changes.", "author": "kreedula", "createdAt": "2020-05-04T22:55:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NzA4OA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419777088", "bodyText": "Yeah we haven't tested ADAL with Broker since my Lombok changes. I believe we don't have a version of ADAL with the latest common so it should be working. I guess, Teams will run into issues as they dual stack", "author": "shahzaibj", "createdAt": "2020-05-04T22:58:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3ODQ4Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419778487", "bodyText": "@kreedula  added.", "author": "rpdome", "createdAt": "2020-05-04T23:02:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3OTg5Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419779893", "bodyText": "@kreedula On top of what @shahzaibj said, prod ADAL uses 2.0.5, so they won't run into this issue.", "author": "rpdome", "createdAt": "2020-05-04T23:06:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc4NDk1Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419784952", "bodyText": "@rpdome I believe Teams can still run into the issue, right? I believe they use the common pulled by MSAL and they could run into this with the latest MSAL I believe. Have they reported anything?", "author": "shahzaibj", "createdAt": "2020-05-04T23:22:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc4NTc2MA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419785760", "bodyText": "Oh, by 'they' I meant prod ADAL. Yes, Teams would still run into the issue (which is why I said \"on top of what you said\". Grammar mistake :D", "author": "rpdome", "createdAt": "2020-05-04T23:24:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc4NjE0Mw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/902#discussion_r419786143", "bodyText": "It's actually super easy to repro. My guess is that they haven't tried ADAL flow :D", "author": "rpdome", "createdAt": "2020-05-04T23:25:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NDMzNw=="}], "type": "inlineReview", "revised_code": null}]}