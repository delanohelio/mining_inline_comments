{"pr_number": 372, "pr_title": "Modified the wording of exception messages and created the troubleshooting page", "pr_createdAt": "2020-02-26T17:52:22Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372", "timeline": [{"oid": "f9a64f9138d084ceb55667657a0d52338da595f8", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/f9a64f9138d084ceb55667657a0d52338da595f8", "message": "Edit the wording of exception messages", "committedDate": "2020-02-26T01:02:08Z", "type": "commit"}, {"oid": "add28207dd90d326a8acaf6d25fc5343ce5af8cb", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/add28207dd90d326a8acaf6d25fc5343ce5af8cb", "message": "Merge branch 'master' into existed-exceptions", "committedDate": "2020-02-26T01:09:30Z", "type": "commit"}, {"oid": "d6e8f6dc4f446b1fb14baa4ecce54bbfea24bdd5", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d6e8f6dc4f446b1fb14baa4ecce54bbfea24bdd5", "message": "Created troubleshooting page", "committedDate": "2020-02-26T01:41:45Z", "type": "commit"}, {"oid": "14cccfc82cde036f5de4572c128af0d69341e5db", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/14cccfc82cde036f5de4572c128af0d69341e5db", "message": "Revised troubleshooting page", "committedDate": "2020-02-26T01:44:19Z", "type": "commit"}, {"oid": "f98df42a0e74df5d4ee5969a4c026076798a665f", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/f98df42a0e74df5d4ee5969a4c026076798a665f", "message": "update", "committedDate": "2020-02-26T01:45:22Z", "type": "commit"}, {"oid": "ca13dd4deb8f6387a01c0fa82b0a5cb76d586d6f", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ca13dd4deb8f6387a01c0fa82b0a5cb76d586d6f", "message": "update", "committedDate": "2020-02-26T01:53:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQzODc1Mg==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r385438752", "bodyText": "well-known-text?", "author": "davidcui1225", "createdAt": "2020-02-27T23:57:42Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/sql/spatial/WktToGeoJsonConverter.java", "diffHunk": "@@ -29,7 +30,8 @@ public static String toGeoJson(String wkt) {\n         wkt = wkt.toLowerCase();\n         int startOfCoordinates = wkt.indexOf(\"(\");\n         if (startOfCoordinates == -1) {\n-            throw new IllegalArgumentException(\"not valid wkt\");\n+            throw new IllegalArgumentException(\n+                    StringUtils.format(\"Failed to convert well-know-text [%s] to geometry type\", wkt));", "originalCommit": "ca13dd4deb8f6387a01c0fa82b0a5cb76d586d6f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU1Mzk0MA==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r386553940", "bodyText": "Done now, thanks!", "author": "chloe-zh", "createdAt": "2020-03-02T17:58:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQzODc1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "8b98cf1a696e6fb63c93854064dfa0e0cd9a0d9c", "chunk": "diff --git a/src/main/java/com/amazon/opendistroforelasticsearch/sql/spatial/WktToGeoJsonConverter.java b/src/main/java/com/amazon/opendistroforelasticsearch/sql/spatial/WktToGeoJsonConverter.java\nindex 7f435a0a..3741af00 100644\n--- a/src/main/java/com/amazon/opendistroforelasticsearch/sql/spatial/WktToGeoJsonConverter.java\n+++ b/src/main/java/com/amazon/opendistroforelasticsearch/sql/spatial/WktToGeoJsonConverter.java\n\n@@ -31,7 +31,7 @@ public class WktToGeoJsonConverter {\n         int startOfCoordinates = wkt.indexOf(\"(\");\n         if (startOfCoordinates == -1) {\n             throw new IllegalArgumentException(\n-                    StringUtils.format(\"Failed to convert well-know-text [%s] to geometry type\", wkt));\n+                    StringUtils.format(\"Failed to convert well-known-text [%s] to geometry type\", wkt));\n         }\n \n         String wktType = wkt.substring(0, startOfCoordinates).trim();\n"}}, {"oid": "8b98cf1a696e6fb63c93854064dfa0e0cd9a0d9c", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/8b98cf1a696e6fb63c93854064dfa0e0cd9a0d9c", "message": "addressed comments", "committedDate": "2020-03-02T17:55:38Z", "type": "commit"}, {"oid": "1651d56b58c1b415aea586700321d19fb00038b8", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/1651d56b58c1b415aea586700321d19fb00038b8", "message": "Merge branch 'master' into existed-exceptions", "committedDate": "2020-03-02T18:59:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1ODQwNA==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r386658404", "bodyText": "Maybe better to use SemanticAnalysisException for consistency here and elsewhere.", "author": "dai-chen", "createdAt": "2020-03-02T21:23:25Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/Condition.java", "diffHunk": "@@ -242,7 +243,7 @@ public Condition(CONN conn, String name, SQLExpr nameExpr, String oper,\n         if (OPEAR.operStringToOpear.containsKey(oper)) {\n             this.opear = OPEAR.operStringToOpear.get(oper);\n         } else {\n-            throw new SqlParseException(oper + \" is not a supported operation\");\n+            throw new SqlParseException(\"Unsupported operation: \" + oper);", "originalCommit": "1651d56b58c1b415aea586700321d19fb00038b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc2ODc4NQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r392768785", "bodyText": "Done now, thanks!", "author": "chloe-zh", "createdAt": "2020-03-16T03:38:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1ODQwNA=="}], "type": "inlineReview", "revised_code": {"commit": "6024b679c618f156b6611e7cddf0c98949206dca", "chunk": "diff --git a/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/Condition.java b/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/Condition.java\nindex 90e9fb92..2e7e34ea 100644\n--- a/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/Condition.java\n+++ b/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/Condition.java\n\n@@ -240,10 +242,10 @@ public class Condition extends Where {\n             this.childType = \"\";\n         }\n \n-        if (OPEAR.operStringToOpear.containsKey(oper)) {\n-            this.opear = OPEAR.operStringToOpear.get(oper);\n+        if (OPERATOR.operStringToOpear.containsKey(oper)) {\n+            this.OPERATOR = OPERATOR.operStringToOpear.get(oper);\n         } else {\n-            throw new SqlParseException(\"Unsupported operation: \" + oper);\n+            throw new SemanticAnalysisException(\"Unsupported operation: \" + oper);\n         }\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2MjAwNw==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r386662007", "bodyText": "value.getClass() may need to be replaced by value.getClass().getSimpleName() for example.", "author": "dai-chen", "createdAt": "2020-03-02T21:30:49Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/SearchResult.java", "diffHunk": "@@ -135,7 +135,7 @@ private Object covenValue(Aggregation value) throws SqlParseException {\n         } else if (value instanceof LongTerms) {\n             return value;\n         } else {\n-            throw new SqlParseException(\"unknow this agg type \" + value.getClass());\n+            throw new SqlParseException(\"Unknown aggregation value type: \" + value.getClass());", "originalCommit": "1651d56b58c1b415aea586700321d19fb00038b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc2ODgxMQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r392768811", "bodyText": "Done, thanks!", "author": "chloe-zh", "createdAt": "2020-03-16T03:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2MjAwNw=="}], "type": "inlineReview", "revised_code": {"commit": "6024b679c618f156b6611e7cddf0c98949206dca", "chunk": "diff --git a/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/SearchResult.java b/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/SearchResult.java\nindex 94aae134..2222fac5 100644\n--- a/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/SearchResult.java\n+++ b/src/main/java/com/amazon/opendistroforelasticsearch/sql/domain/SearchResult.java\n\n@@ -135,7 +135,7 @@ public class SearchResult {\n         } else if (value instanceof LongTerms) {\n             return value;\n         } else {\n-            throw new SqlParseException(\"Unknown aggregation value type: \" + value.getClass());\n+            throw new SqlParseException(\"Unknown aggregation value type: \" + value.getClass().getSimpleName());\n         }\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2MzQzMw==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r386663433", "bodyText": "Same here to throw SyntaxAnalysisException for consistency.", "author": "dai-chen", "createdAt": "2020-03-02T21:33:35Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/sql/parser/ElasticSqlExprParser.java", "diffHunk": "@@ -120,7 +120,7 @@ protected SQLExpr methodRest(SQLExpr expr, boolean acceptLPAREN) {\n             return primaryRest(methodInvokeExpr);\n         }\n \n-        throw new ParserException(\"not support token:\" + lexer.token());\n+        throw new ParserException(\"Syntax error:\" + lexer.token());", "originalCommit": "1651d56b58c1b415aea586700321d19fb00038b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc2ODgzMQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/372#discussion_r392768831", "bodyText": "Done, thanks!", "author": "chloe-zh", "createdAt": "2020-03-16T03:38:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2MzQzMw=="}], "type": "inlineReview", "revised_code": {"commit": "6024b679c618f156b6611e7cddf0c98949206dca", "chunk": "diff --git a/src/main/java/com/amazon/opendistroforelasticsearch/sql/parser/ElasticSqlExprParser.java b/src/main/java/com/amazon/opendistroforelasticsearch/sql/parser/ElasticSqlExprParser.java\nindex b2be7347..6cb43022 100644\n--- a/src/main/java/com/amazon/opendistroforelasticsearch/sql/parser/ElasticSqlExprParser.java\n+++ b/src/main/java/com/amazon/opendistroforelasticsearch/sql/parser/ElasticSqlExprParser.java\n\n@@ -120,7 +121,7 @@ public class ElasticSqlExprParser extends SQLExprParser {\n             return primaryRest(methodInvokeExpr);\n         }\n \n-        throw new ParserException(\"Syntax error:\" + lexer.token());\n+        throw new SyntaxAnalysisException(\"Syntax error: \" + lexer.token());\n     }\n \n \n"}}, {"oid": "95b99a8b830bf6d9921897cadbb69e8fb7eb20fb", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/95b99a8b830bf6d9921897cadbb69e8fb7eb20fb", "message": "Merge branch 'master' into existed-exceptions", "committedDate": "2020-03-06T03:56:09Z", "type": "commit"}, {"oid": "6024b679c618f156b6611e7cddf0c98949206dca", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/6024b679c618f156b6611e7cddf0c98949206dca", "message": "addressed comments", "committedDate": "2020-03-16T03:37:31Z", "type": "commit"}, {"oid": "e9ce9f88d04e782730485cd8a9df1087efb6f68a", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e9ce9f88d04e782730485cd8a9df1087efb6f68a", "message": "Merge branch 'master' into existed-exceptions", "committedDate": "2020-03-16T03:41:29Z", "type": "commit"}, {"oid": "fa229dc88e33455002648449090a9b631c5de338", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fa229dc88e33455002648449090a9b631c5de338", "message": "update", "committedDate": "2020-03-16T03:43:39Z", "type": "commit"}, {"oid": "77a685095116cf3d5becefb1551c2df6584e507d", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/77a685095116cf3d5becefb1551c2df6584e507d", "message": "update", "committedDate": "2020-03-16T23:09:54Z", "type": "commit"}, {"oid": "c32511705e71a0e1c51765b0cc34482deec0bc70", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c32511705e71a0e1c51765b0cc34482deec0bc70", "message": "update", "committedDate": "2020-03-17T20:23:07Z", "type": "commit"}, {"oid": "2b37ab253fb0a152ab40277fba65ce89f6497adf", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2b37ab253fb0a152ab40277fba65ce89f6497adf", "message": "update", "committedDate": "2020-03-17T20:30:44Z", "type": "commit"}, {"oid": "165ebb5d3598b196094a54c6a348a7b6b92d1b38", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/165ebb5d3598b196094a54c6a348a7b6b92d1b38", "message": "Merge remote-tracking branch 'origin' into existed-exceptions", "committedDate": "2020-03-17T21:04:13Z", "type": "commit"}]}