{"pr_number": 1571, "pr_title": "Adjust MBA read overhang clipping to be consistent with past behavior", "pr_createdAt": "2020-09-01T15:49:04Z", "pr_url": "https://github.com/broadinstitute/picard/pull/1571", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNDg0NQ==", "url": "https://github.com/broadinstitute/picard/pull/1571#discussion_r481434845", "bodyText": "huh?", "author": "yfarjoun", "createdAt": "2020-09-01T21:13:07Z", "path": "src/test/java/picard/sam/AbstractAlignmentMergerTest.java", "diffHunk": "@@ -104,6 +138,67 @@\n                         default110LongR1Bases, default110LongR2Bases, sharedBases, sharedBases, default110LongR1ClippedBases, default110LongR2ClippedBases,\n                         default110LongR1BaseQualities, default110LongR2BaseQualities, sharedQualities, sharedQualities, r1ClippedQualities10, r2ClippedQualities10},\n \n+                /*\n+                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM->\n+                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n+\n+                                soft clipping becomes:\n+                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSS->\n+                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n+\n+                                hard clipping leaves as from soft clipping", "originalCommit": "7000bee6c3ab478b2925e9b262ecb222bafe6b88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNjA0Nw==", "url": "https://github.com/broadinstitute/picard/pull/1571#discussion_r481436047", "bodyText": "Oh\u2026I had a hard time parsing that sentance...I'd say, hard-clipping results in the same as with soft-clipping in this case.", "author": "yfarjoun", "createdAt": "2020-09-01T21:15:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNDg0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNjIyNA==", "url": "https://github.com/broadinstitute/picard/pull/1571#discussion_r481436224", "bodyText": "the point is that when running with hard clipping turned on the result is the same as when running with only soft clipping.  Maybe \"running with hard clipping gives same result as running with soft clipping\" would be clearer?", "author": "kachulis", "createdAt": "2020-09-01T21:15:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNDg0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "fe16c719a570b797f61f5c830e5b5f79074524f0", "chunk": "diff --git a/src/test/java/picard/sam/AbstractAlignmentMergerTest.java b/src/test/java/picard/sam/AbstractAlignmentMergerTest.java\nindex 4be176398..a01e7f850 100644\n--- a/src/test/java/picard/sam/AbstractAlignmentMergerTest.java\n+++ b/src/test/java/picard/sam/AbstractAlignmentMergerTest.java\n\n@@ -138,67 +100,6 @@ public class AbstractAlignmentMergerTest extends CommandLineProgramTest {\n                         default110LongR1Bases, default110LongR2Bases, sharedBases, sharedBases, default110LongR1ClippedBases, default110LongR2ClippedBases,\n                         default110LongR1BaseQualities, default110LongR2BaseQualities, sharedQualities, sharedQualities, r1ClippedQualities10, r2ClippedQualities10},\n \n-                /*\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM->\n-                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n-\n-                                soft clipping becomes:\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSS->\n-                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n-\n-                                hard clipping leaves as from soft clipping\n-\n-                 */\n-\n-                {110, 105, 100, \"10S100M\", \"103M7S\", false, true, 105, 105, \"10S98M2S\", \"5S98M7S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                {110, 105, 100, \"10S100M\", \"103M7S\", false, true, 105, 105, \"10S98M2S\", \"5S98M7S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                /*\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSS->\n-                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSSSSSSSSSS\n-\n-                                soft clipping becomes:\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSS->\n-                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSSSSSSSSSS\n-\n-                                hard clipping leaves as from soft clipping\n-\n-                 */\n-                {110, 105, 100, \"10S97M3S\", \"99M11S\", false, true, 105, 105, \"10S94M6S\", \"5S94M11S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                {110, 105, 100, \"10S97M3S\", \"99M11S\", false, true, 105, 105, \"10S94M6S\", \"5S94M11S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                /*\n-                                          SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSS->\n-                                     <-SSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\n-\n-                                soft clipping becomes:\n-                                          SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSS->\n-                                     <-SSSSSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\n-\n-\n-                                hard clipping becomes:\n-                                          SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSHHH->\n-                                     <-HHHSSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\n-\n-                 */\n-\n-                {110, 105, 96, \"12S80M18S\", \"13S97M\", false, true, 105, 105, \"12S80M18S\", \"22S88M\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                {110, 105, 96, \"12S80M18S\", \"13S97M\", false, true, 105, 105, \"12S80M8S10H\", \"10H12S88M\", true,\n-                        default110LongR1Bases, default110LongR2Bases, sharedBases, sharedBases, default110LongR1ClippedBases, default110LongR2ClippedBases,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, sharedQualities, sharedQualities, r1ClippedQualities10, r2ClippedQualities10},\n         };\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQzNjExMg==", "url": "https://github.com/broadinstitute/picard/pull/1571#discussion_r481436112", "bodyText": "same", "author": "yfarjoun", "createdAt": "2020-09-01T21:15:30Z", "path": "src/test/java/picard/sam/AbstractAlignmentMergerTest.java", "diffHunk": "@@ -104,6 +138,67 @@\n                         default110LongR1Bases, default110LongR2Bases, sharedBases, sharedBases, default110LongR1ClippedBases, default110LongR2ClippedBases,\n                         default110LongR1BaseQualities, default110LongR2BaseQualities, sharedQualities, sharedQualities, r1ClippedQualities10, r2ClippedQualities10},\n \n+                /*\n+                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM->\n+                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n+\n+                                soft clipping becomes:\n+                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSS->\n+                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n+\n+                                hard clipping leaves as from soft clipping\n+\n+                 */\n+\n+                {110, 105, 100, \"10S100M\", \"103M7S\", false, true, 105, 105, \"10S98M2S\", \"5S98M7S\", false,\n+                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n+                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n+\n+                {110, 105, 100, \"10S100M\", \"103M7S\", false, true, 105, 105, \"10S98M2S\", \"5S98M7S\", false,\n+                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n+                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n+\n+                /*\n+                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSS->\n+                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSSSSSSSSSS\n+\n+                                soft clipping becomes:\n+                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSS->\n+                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSSSSSSSSSS\n+\n+                                hard clipping leaves as from soft clipping", "originalCommit": "7000bee6c3ab478b2925e9b262ecb222bafe6b88", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fe16c719a570b797f61f5c830e5b5f79074524f0", "chunk": "diff --git a/src/test/java/picard/sam/AbstractAlignmentMergerTest.java b/src/test/java/picard/sam/AbstractAlignmentMergerTest.java\nindex 4be176398..a01e7f850 100644\n--- a/src/test/java/picard/sam/AbstractAlignmentMergerTest.java\n+++ b/src/test/java/picard/sam/AbstractAlignmentMergerTest.java\n\n@@ -138,67 +100,6 @@ public class AbstractAlignmentMergerTest extends CommandLineProgramTest {\n                         default110LongR1Bases, default110LongR2Bases, sharedBases, sharedBases, default110LongR1ClippedBases, default110LongR2ClippedBases,\n                         default110LongR1BaseQualities, default110LongR2BaseQualities, sharedQualities, sharedQualities, r1ClippedQualities10, r2ClippedQualities10},\n \n-                /*\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM->\n-                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n-\n-                                soft clipping becomes:\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSS->\n-                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSS\n-\n-                                hard clipping leaves as from soft clipping\n-\n-                 */\n-\n-                {110, 105, 100, \"10S100M\", \"103M7S\", false, true, 105, 105, \"10S98M2S\", \"5S98M7S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                {110, 105, 100, \"10S100M\", \"103M7S\", false, true, 105, 105, \"10S98M2S\", \"5S98M7S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                /*\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSS->\n-                                     <-MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSSSSSSSSSS\n-\n-                                soft clipping becomes:\n-                                SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSS->\n-                                     <-SSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSSSSSSSSSSSSSSSSSS\n-\n-                                hard clipping leaves as from soft clipping\n-\n-                 */\n-                {110, 105, 100, \"10S97M3S\", \"99M11S\", false, true, 105, 105, \"10S94M6S\", \"5S94M11S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                {110, 105, 100, \"10S97M3S\", \"99M11S\", false, true, 105, 105, \"10S94M6S\", \"5S94M11S\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                /*\n-                                          SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSS->\n-                                     <-SSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\n-\n-                                soft clipping becomes:\n-                                          SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSSSS->\n-                                     <-SSSSSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\n-\n-\n-                                hard clipping becomes:\n-                                          SSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMSSSHHH->\n-                                     <-HHHSSSSSSSSSSSMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\n-\n-                 */\n-\n-                {110, 105, 96, \"12S80M18S\", \"13S97M\", false, true, 105, 105, \"12S80M18S\", \"22S88M\", false,\n-                        default110LongR1Bases, default110LongR2Bases, default110LongR1Bases, default110LongR2Bases, null, null,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, default110LongR1BaseQualities, default110LongR2BaseQualities, null, null},\n-\n-                {110, 105, 96, \"12S80M18S\", \"13S97M\", false, true, 105, 105, \"12S80M8S10H\", \"10H12S88M\", true,\n-                        default110LongR1Bases, default110LongR2Bases, sharedBases, sharedBases, default110LongR1ClippedBases, default110LongR2ClippedBases,\n-                        default110LongR1BaseQualities, default110LongR2BaseQualities, sharedQualities, sharedQualities, r1ClippedQualities10, r2ClippedQualities10},\n         };\n     }\n \n"}}, {"oid": "fe16c719a570b797f61f5c830e5b5f79074524f0", "url": "https://github.com/broadinstitute/picard/commit/fe16c719a570b797f61f5c830e5b5f79074524f0", "message": "revert behavior when soft clipping, adjust hardclipping behavior to softclip to aligned position", "committedDate": "2020-09-02T00:59:31Z", "type": "commit"}, {"oid": "fed4bd41b61865e1a3048ebb6e80f9df87da8283", "url": "https://github.com/broadinstitute/picard/commit/fed4bd41b61865e1a3048ebb6e80f9df87da8283", "message": "documentation", "committedDate": "2020-09-02T00:59:31Z", "type": "commit"}, {"oid": "74bf9f959b9b65335d4368d2921562d5c65cf3c4", "url": "https://github.com/broadinstitute/picard/commit/74bf9f959b9b65335d4368d2921562d5c65cf3c4", "message": "refactor", "committedDate": "2020-09-02T00:59:31Z", "type": "commit"}, {"oid": "dd7d485784feebf3f3f5cee0950c67f340a9db98", "url": "https://github.com/broadinstitute/picard/commit/dd7d485784feebf3f3f5cee0950c67f340a9db98", "message": "outie test", "committedDate": "2020-09-02T00:59:31Z", "type": "commit"}, {"oid": "c2812e25fbb909ffed320d1612ed83614e9304a3", "url": "https://github.com/broadinstitute/picard/commit/c2812e25fbb909ffed320d1612ed83614e9304a3", "message": "more tests", "committedDate": "2020-09-02T00:59:31Z", "type": "commit"}, {"oid": "0787a6e18d7a2f59a8a81333e5e1e07db9443509", "url": "https://github.com/broadinstitute/picard/commit/0787a6e18d7a2f59a8a81333e5e1e07db9443509", "message": "comment rewording", "committedDate": "2020-09-02T00:59:31Z", "type": "commit"}, {"oid": "0787a6e18d7a2f59a8a81333e5e1e07db9443509", "url": "https://github.com/broadinstitute/picard/commit/0787a6e18d7a2f59a8a81333e5e1e07db9443509", "message": "comment rewording", "committedDate": "2020-09-02T00:59:31Z", "type": "forcePushed"}]}