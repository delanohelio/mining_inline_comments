{"pr_number": 6697, "pr_title": "Database: Replace \"queryColumn\" with \"list\" methods", "pr_createdAt": "2020-07-19T04:05:16Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6697", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r456899492", "bodyText": "I'm not sure about the name - my Java convention knowledge isn't great here\nPossible ideas: listLong or listAsLong.\n@mikehardy Any suggestions?", "author": "david-allison-1", "createdAt": "2020-07-19T11:54:53Z", "path": "AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/libanki/ImportTest.java", "diffHunk": "@@ -105,7 +105,7 @@ public void testAnki2Mediadupes() throws IOException, JSONException, ImportExpor\n         actual.retainAll(expected);\n         assertEquals(expected.size(), actual.size());\n         // and importing again will not duplicate, as the file content matches\n-        empty.remCards(Utils.arrayList2array(empty.getDb().queryColumn(Long.class, \"select id from cards\", 0)));\n+        empty.remCards(Utils.arrayList2array(empty.getDb().longList(\"select id from cards\")));", "originalCommit": "a0cf731bf781b0821f430c701ea4396ea5691d04", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjkxMTA2Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r456911063", "bodyText": "I'll wait until you give the name. I'll comment simultaneously.", "author": "Arthur-Milchior", "createdAt": "2020-07-19T13:48:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc3MTg4NA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r457771884", "bodyText": "as is as much convention as I'm aware of (for example Arrays.asList https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...)), are they always longs? if so just 'asList' and have it return ArrayList<Long> otherwise asLongList returning same. ?", "author": "mikehardy", "createdAt": "2020-07-21T00:51:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc4MTk5OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r457781999", "bodyText": "I added two methods, for long and for String, the only returned types", "author": "Arthur-Milchior", "createdAt": "2020-07-21T01:27:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc4MjIxMg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r457782212", "bodyText": "\"As\" is strange, for the result of a query", "author": "Arthur-Milchior", "createdAt": "2020-07-21T01:28:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMyNTgzMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r458325831", "bodyText": "I renamed them to queryLongList and queryStringList, so that it is consistent with the remaining methods, in particular queryLongScalar", "author": "Arthur-Milchior", "createdAt": "2020-07-21T19:08:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM3OTY4MA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6697#discussion_r458379680", "bodyText": "That works for me", "author": "mikehardy", "createdAt": "2020-07-21T20:50:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5OTQ5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "2b1f1423adb73d3aa1eabab65fc39de67311546e", "chunk": "diff --git a/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/libanki/ImportTest.java b/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/libanki/ImportTest.java\nindex b9c39701b..100f93dd7 100644\n--- a/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/libanki/ImportTest.java\n+++ b/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/libanki/ImportTest.java\n\n@@ -105,7 +105,7 @@ public class ImportTest {\n         actual.retainAll(expected);\n         assertEquals(expected.size(), actual.size());\n         // and importing again will not duplicate, as the file content matches\n-        empty.remCards(Utils.arrayList2array(empty.getDb().longList(\"select id from cards\")));\n+        empty.remCards(Utils.arrayList2array(empty.getDb().queryLongList(\"select id from cards\")));\n         imp = new Anki2Importer(empty, testCol.getPath());\n         imp.run();\n         expected = Collections.singletonList(\"foo.mp3\");\n"}}, {"oid": "2b1f1423adb73d3aa1eabab65fc39de67311546e", "url": "https://github.com/ankidroid/Anki-Android/commit/2b1f1423adb73d3aa1eabab65fc39de67311546e", "message": "NF: longList and stringList\n\nIn order to make code simpler to read", "committedDate": "2020-07-21T18:41:17Z", "type": "forcePushed"}, {"oid": "062e28b653661fc789457ee14b8df90c44cba595", "url": "https://github.com/ankidroid/Anki-Android/commit/062e28b653661fc789457ee14b8df90c44cba595", "message": "NF: longList and stringList\n\nIn order to make code simpler to read", "committedDate": "2020-07-21T19:17:05Z", "type": "forcePushed"}, {"oid": "a6824aa448b20c8426196ef34a688d2722a89abd", "url": "https://github.com/ankidroid/Anki-Android/commit/a6824aa448b20c8426196ef34a688d2722a89abd", "message": "NF: longList and stringList\n\nIn order to make code simpler to read", "committedDate": "2020-07-21T23:35:39Z", "type": "forcePushed"}, {"oid": "84c2436adbf6ef3664bbe066b6b7824d2ff73c5c", "url": "https://github.com/ankidroid/Anki-Android/commit/84c2436adbf6ef3664bbe066b6b7824d2ff73c5c", "message": "NF: queryColumns does not ask for column number\n\nIt is always 0. So it becomes simpler to just not ask it.", "committedDate": "2020-07-23T07:49:26Z", "type": "commit"}, {"oid": "03edfba5bed62c07e63b4d97493c612bc8e72e12", "url": "https://github.com/ankidroid/Anki-Android/commit/03edfba5bed62c07e63b4d97493c612bc8e72e12", "message": "NF. queryColumn->list\n\nThis follow upstream name", "committedDate": "2020-07-23T07:49:26Z", "type": "commit"}, {"oid": "fdece158feed6c3806efef693ca4926314c7d818", "url": "https://github.com/ankidroid/Anki-Android/commit/fdece158feed6c3806efef693ca4926314c7d818", "message": "NF: longList and stringList\n\nIn order to make code simpler to read", "committedDate": "2020-07-23T07:49:26Z", "type": "commit"}, {"oid": "fdece158feed6c3806efef693ca4926314c7d818", "url": "https://github.com/ankidroid/Anki-Android/commit/fdece158feed6c3806efef693ca4926314c7d818", "message": "NF: longList and stringList\n\nIn order to make code simpler to read", "committedDate": "2020-07-23T07:49:26Z", "type": "forcePushed"}]}