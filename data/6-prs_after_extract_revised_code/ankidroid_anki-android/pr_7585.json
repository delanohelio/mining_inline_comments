{"pr_number": 7585, "pr_title": "Direct icon to deck", "pr_createdAt": "2020-10-31T03:27:51Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/7585", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ1MDk0NA==", "url": "https://github.com/ankidroid/Anki-Android/pull/7585#discussion_r515450944", "bodyText": "Could you use @RequiresApi instead?", "author": "david-allison-1", "createdAt": "2020-10-31T03:44:41Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java", "diffHunk": "@@ -2549,6 +2554,22 @@ public void exportDeck(long did) {\n         showDialogFragment(ExportDialog.newInstance(msg, did));\n     }\n \n+    public void createIcon(Context context) {\n+        // This code should not be reachable with lower versions\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {", "originalCommit": "a5575069be9d36ea7cbbeacc6463f1f4133daa93", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fef3f0a358b794b13836689628c915594184919a", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java b/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java\nindex bbc3d9eb9..ceb3c9f0c 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java\n\n@@ -2554,23 +2555,22 @@ public class DeckPicker extends NavigationDrawerActivity implements\n         showDialogFragment(ExportDialog.newInstance(msg, did));\n     }\n \n+    @RequiresApi(Build.VERSION_CODES.O)\n     public void createIcon(Context context) {\n         // This code should not be reachable with lower versions\n-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\n-            ShortcutManager shortcutManager = context.getSystemService(ShortcutManager.class);\n-            ShortcutInfo info = new ShortcutInfo.Builder(context, Long.toString(mContextMenuDid))\n-                    .setIntent(new Intent(context, Reviewer.class)\n-                            .setAction(Intent.ACTION_VIEW)\n-                            .putExtra(\"deckId\", mContextMenuDid)\n-                    )\n-                    .setShortLabel(Decks.basename(getCol().getDecks().name(mContextMenuDid)))\n-                    .setLongLabel(getCol().getDecks().name(mContextMenuDid))\n-                    .setIcon(Icon.createWithResource(context, R.mipmap.ic_launcher))\n-                    .build();\n-            shortcutManager.requestPinShortcut(info, null);\n-        }\n-    }\n-\n+        ShortcutManager shortcutManager = context.getSystemService(ShortcutManager.class);\n+        ShortcutInfo info = new ShortcutInfo.Builder(context, Long.toString(mContextMenuDid))\n+                .setIntent(new Intent(context, Reviewer.class)\n+                        .setAction(Intent.ACTION_VIEW)\n+                        .putExtra(\"deckId\", mContextMenuDid)\n+                )\n+                .setShortLabel(Decks.basename(getCol().getDecks().name(mContextMenuDid)))\n+                .setLongLabel(getCol().getDecks().name(mContextMenuDid))\n+                .setIcon(Icon.createWithResource(context, R.mipmap.ic_launcher))\n+                .build();\n+        shortcutManager.requestPinShortcut(info, null);\n+    }\n+    \n     // Callback to show dialog to rename the current deck\n     public void renameDeckDialog() {\n         renameDeckDialog(mContextMenuDid);\n"}}, {"oid": "fef3f0a358b794b13836689628c915594184919a", "url": "https://github.com/ankidroid/Anki-Android/commit/fef3f0a358b794b13836689628c915594184919a", "message": "NF: link to deck", "committedDate": "2020-10-31T03:48:43Z", "type": "forcePushed"}, {"oid": "678a53cfe89a2494462360b6724009b8cd9c1536", "url": "https://github.com/ankidroid/Anki-Android/commit/678a53cfe89a2494462360b6724009b8cd9c1536", "message": "NF: link to deck", "committedDate": "2020-10-31T03:48:58Z", "type": "forcePushed"}, {"oid": "240657423f3194cfffbe1114ad154b1a6d385cfd", "url": "https://github.com/ankidroid/Anki-Android/commit/240657423f3194cfffbe1114ad154b1a6d385cfd", "message": "link to deck", "committedDate": "2020-10-31T05:02:26Z", "type": "forcePushed"}, {"oid": "2f4755024ac5a8030b054f11f814e20a36731f81", "url": "https://github.com/ankidroid/Anki-Android/commit/2f4755024ac5a8030b054f11f814e20a36731f81", "message": "link to deck", "committedDate": "2020-10-31T12:52:18Z", "type": "commit"}, {"oid": "2f4755024ac5a8030b054f11f814e20a36731f81", "url": "https://github.com/ankidroid/Anki-Android/commit/2f4755024ac5a8030b054f11f814e20a36731f81", "message": "link to deck", "committedDate": "2020-10-31T12:52:18Z", "type": "forcePushed"}, {"oid": "c6467e0a12cb43b8344b81467091a9ab94f9696e", "url": "https://github.com/ankidroid/Anki-Android/commit/c6467e0a12cb43b8344b81467091a9ab94f9696e", "message": "NF: adding an annotation DECK_PICKER_CONTEXT_MENU", "committedDate": "2020-10-31T13:31:30Z", "type": "commit"}]}