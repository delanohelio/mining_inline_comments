{"pr_number": 7687, "pr_title": "Deck Picker: Convert the dialog to a Toast", "pr_createdAt": "2020-11-14T19:45:25Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/7687", "timeline": [{"oid": "af691abac0959fe2dd2ae775ba7c485736c0fcaa", "url": "https://github.com/ankidroid/Anki-Android/commit/af691abac0959fe2dd2ae775ba7c485736c0fcaa", "message": "Deck Picker: Convert the dialog to a Toast", "committedDate": "2020-11-14T19:31:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1NjI5OA==", "url": "https://github.com/ankidroid/Anki-Android/pull/7687#discussion_r523456298", "bodyText": "We have UIUtils.showThemedToast which should cut down on the code here.", "author": "david-allison-1", "createdAt": "2020-11-14T19:51:06Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java", "diffHunk": "@@ -436,10 +438,9 @@ private void createCustomStudySession(JSONArray delays, Object[] terms, Boolean\n             Timber.i(\"Found deck: '%s'\", customStudyDeck);\n             if (cur.getInt(\"dyn\") != 1) {\n                 Timber.w(\"Deck: '%s' was non-dynamic\", customStudyDeck);\n-                new MaterialDialog.Builder(getActivity())\n-                    .content(R.string.custom_study_deck_exists)\n-                    .negativeText(R.string.dialog_cancel)\n-                    .build().show();\n+                Toast toast = Toast.makeText(getActivity(), R.string.custom_study_deck_exists, Toast.LENGTH_SHORT);", "originalCommit": "af691abac0959fe2dd2ae775ba7c485736c0fcaa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1c2645380fcc8926552001b81006644bcdcd7eda", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java b/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java\nindex ff9597a985..96212ed7f9 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java\n\n@@ -438,9 +438,12 @@ public class CustomStudyDialog extends AnalyticsDialogFragment {\n             Timber.i(\"Found deck: '%s'\", customStudyDeck);\n             if (cur.getInt(\"dyn\") != 1) {\n                 Timber.w(\"Deck: '%s' was non-dynamic\", customStudyDeck);\n+                UIUtils.showThemedToast(getActivity(), getString(R.string.custom_study_deck_exists), true);\n+/*\n                 Toast toast = Toast.makeText(getActivity(), R.string.custom_study_deck_exists, Toast.LENGTH_SHORT);\n                 toast.setGravity(Gravity.BOTTOM|Gravity.CENTER_HORIZONTAL, 0, 50);\n                 toast.show();\n+*/\n                 return;\n             } else {\n                 Timber.i(\"Emptying dynamic deck '%s' for custom study\", customStudyDeck);\n"}}, {"oid": "1c2645380fcc8926552001b81006644bcdcd7eda", "url": "https://github.com/ankidroid/Anki-Android/commit/1c2645380fcc8926552001b81006644bcdcd7eda", "message": "Deck Picker: Convert the dialog to a Toast", "committedDate": "2020-11-14T20:23:02Z", "type": "commit"}, {"oid": "d43791c9390f9dfc4453b4d815c1d5648895ba72", "url": "https://github.com/ankidroid/Anki-Android/commit/d43791c9390f9dfc4453b4d815c1d5648895ba72", "message": "Deck Picker: Convert the dialog to a Toast", "committedDate": "2020-11-14T20:25:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc0MTcyMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/7687#discussion_r523741721", "bodyText": "Why this import?", "author": "Arthur-Milchior", "createdAt": "2020-11-15T10:51:27Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java", "diffHunk": "@@ -27,11 +27,13 @@\n import android.text.Editable;\n import android.text.TextUtils;\n import android.text.TextWatcher;\n+import android.view.Gravity;", "originalCommit": "d43791c9390f9dfc4453b4d815c1d5648895ba72", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc1MjQ3OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/7687#discussion_r523752479", "bodyText": "When I first added Toast to show the message, Toast message showed up at the center of the screen in my Samsung Galaxy S8 phone (Android 9). I thought maybe it was because I was creating Toast inside DialogFragment, so I wanted to set Toast message position at the bottom of the screen by using setGravity() method as a quick fix. This is why Gravity import was added. But @david-allison-1 reminded me to use UIUtils.showThemedToast. So I replaced my first Toast implementation and deleted setGravity() method. But I forgot to remove unused imports. In the latest commit (7e3453b) I removed both Gravity and Toast imports  which are unused.", "author": "bguneys", "createdAt": "2020-11-15T12:32:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc0MTcyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "7e3453ba76ac39f42d75e04e3d5b2823c1def18b", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java b/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java\nindex 1b87ef344a..3d424b90e8 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/dialogs/CustomStudyDialog.java\n\n@@ -27,13 +27,11 @@ import timber.log.Timber;\n import android.text.Editable;\n import android.text.TextUtils;\n import android.text.TextWatcher;\n-import android.view.Gravity;\n import android.view.View;\n import android.view.WindowManager;\n import android.view.inputmethod.EditorInfo;\n import android.widget.EditText;\n import android.widget.TextView;\n-import android.widget.Toast;\n \n import com.afollestad.materialdialogs.DialogAction;\n import com.afollestad.materialdialogs.MaterialDialog;\n"}}, {"oid": "7e3453ba76ac39f42d75e04e3d5b2823c1def18b", "url": "https://github.com/ankidroid/Anki-Android/commit/7e3453ba76ac39f42d75e04e3d5b2823c1def18b", "message": "Remove unnecessary imports", "committedDate": "2020-11-15T12:16:44Z", "type": "commit"}]}