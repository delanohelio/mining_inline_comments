{"pr_number": 5942, "pr_title": "Add Disable Extended Text UI Preference", "pr_createdAt": "2020-04-06T22:22:46Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/5942", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQyNDczMw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5942#discussion_r404424733", "bodyText": "This is intentionally inconsistent with the default setting.\nI wasn't sure which one to pick, but it's up for discussion and we should standardise both before this gets in.", "author": "david-allison-1", "createdAt": "2020-04-06T22:23:43Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/FieldEditText.java", "diffHunk": "@@ -42,6 +49,25 @@ public Parcelable onSaveInstanceState() {\n         return null;\n     }\n \n+    @Override\n+    protected void onAttachedToWindow() {\n+        super.onAttachedToWindow();\n+        if (shouldDisableExtendedTextUi()) {\n+            Timber.i(\"Disabling Extended Text UI\");\n+            this.setImeOptions(this.getImeOptions() | IME_FLAG_NO_EXTRACT_UI);\n+        }\n+    }\n+\n+    private boolean shouldDisableExtendedTextUi() {\n+        try {\n+            SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this.getContext());\n+            return sp.getBoolean(\"disableExtendedTextUi\", false);\n+        } catch (Exception e) {\n+            Timber.e(e, \"Failed to get extended UI preference\");\n+            return false;", "originalCommit": "a41f71e68c3176e8b60943de89c67af3597a7bf5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "bfaea22562ac58afcb4411fecfa16343a3d9667c", "url": "https://github.com/ankidroid/Anki-Android/commit/bfaea22562ac58afcb4411fecfa16343a3d9667c", "message": "Add Disable Extended Text UI Preference\n\n#5533\n\nThis allows 'Cloze Deletion' to be shown in Landscape mode.", "committedDate": "2020-04-06T22:27:50Z", "type": "forcePushed"}, {"oid": "46c3539f46edb7095b284da690873e73caa25919", "url": "https://github.com/ankidroid/Anki-Android/commit/46c3539f46edb7095b284da690873e73caa25919", "message": "Add Disable Extended Text UI Preference\n\n#5533\n\nThis allows 'Cloze Deletion' to be shown in Landscape mode.", "committedDate": "2020-04-06T22:38:02Z", "type": "commit"}, {"oid": "46c3539f46edb7095b284da690873e73caa25919", "url": "https://github.com/ankidroid/Anki-Android/commit/46c3539f46edb7095b284da690873e73caa25919", "message": "Add Disable Extended Text UI Preference\n\n#5533\n\nThis allows 'Cloze Deletion' to be shown in Landscape mode.", "committedDate": "2020-04-06T22:38:02Z", "type": "forcePushed"}]}