{"pr_number": 5970, "pr_title": "Factor out WebView Debugging", "pr_createdAt": "2020-04-10T17:18:23Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/5970", "timeline": [{"oid": "ff5c68e8a9038619fe70e8a272e5a7f6d7387365", "url": "https://github.com/ankidroid/Anki-Android/commit/ff5c68e8a9038619fe70e8a272e5a7f6d7387365", "message": "Extract: WebViewDebugging.initializeDebugging\n\nI want to use this API from #1377", "committedDate": "2020-04-10T16:50:12Z", "type": "commit"}, {"oid": "b70e90bfcb6ff11f446e2eb03bf0d94956ed19ab", "url": "https://github.com/ankidroid/Anki-Android/commit/b70e90bfcb6ff11f446e2eb03bf0d94956ed19ab", "message": "WebViewDebugging: Disable on unset preference\n\nIf the preference is unset, disable it the next time we use it.", "committedDate": "2020-04-10T16:54:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1NzExOA==", "url": "https://github.com/ankidroid/Anki-Android/pull/5970#discussion_r406857118", "bodyText": "no quibble on the goal of the PR, but adding commented out code \ud83e\udd14", "author": "mikehardy", "createdAt": "2020-04-10T17:22:12Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java", "diffHunk": "@@ -227,6 +228,8 @@ public void onCreate() {\n             UsageAnalytics.setDryRun(true);\n         }\n \n+        //WebViewDebugging.initializeDebugging(preferences);", "originalCommit": "f7583e51bbc6b99509ae5330cf5999864c8e08b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1ODMzOQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5970#discussion_r406858339", "bodyText": "\ud83e\udd26 Thanks", "author": "david-allison-1", "createdAt": "2020-04-10T17:25:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1NzExOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1ODcxNQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5970#discussion_r406858715", "bodyText": "Codacy would have caught that one. Would it be possible for you to email a key to check locally?", "author": "david-allison-1", "createdAt": "2020-04-10T17:26:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1NzExOA=="}], "type": "inlineReview", "revised_code": {"commit": "329ead8fc26a795cf0ad4fd9b1a0effc44d445aa", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java b/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\nindex 7fd2d54ff..6f986909c 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\n\n@@ -228,7 +228,7 @@ public class AnkiDroidApp extends Application {\n             UsageAnalytics.setDryRun(true);\n         }\n \n-        //WebViewDebugging.initializeDebugging(preferences);\n+        WebViewDebugging.initializeDebugging(preferences);\n \n         setLanguage(preferences.getString(Preferences.LANGUAGE, \"\"));\n         NotificationChannels.setup(getApplicationContext());\n"}}, {"oid": "329ead8fc26a795cf0ad4fd9b1a0effc44d445aa", "url": "https://github.com/ankidroid/Anki-Android/commit/329ead8fc26a795cf0ad4fd9b1a0effc44d445aa", "message": "WebViewDebugging: Handle on startup\n\nWhen testing (printf), this has no noticeable difference if the setting\nis off, and shaved 2ms off the call if it's on", "committedDate": "2020-04-10T17:25:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1OTQxOQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5970#discussion_r406859419", "bodyText": "Android Studio makes these changes consistently in a few files within the project. I'll revert for now; are you using other settings to keep these in place?", "author": "david-allison-1", "createdAt": "2020-04-10T17:27:51Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java", "diffHunk": "@@ -62,7 +59,11 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n+import androidx.annotation.NonNull;", "originalCommit": "329ead8fc26a795cf0ad4fd9b1a0effc44d445aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg2NDc5Mg==", "url": "https://github.com/ankidroid/Anki-Android/pull/5970#discussion_r406864792", "bodyText": "I dunno - I just searched preferences in Android Studio for 'import' and didn't see anything that would turn on or off auto-organization. I kind of like them organized myself though it is diff noise. At least it's noise in a place that no one really looks at anyway (w.r.t. diffs) so long as they aren't unused (which codacy catches, so I just skim that chunk). meh", "author": "mikehardy", "createdAt": "2020-04-10T17:39:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg1OTQxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "bafbdda0bee2936428686c712931a41b7dfea678", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java b/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\nindex 6f986909c..8e3dae067 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\n\n@@ -59,11 +63,7 @@ import java.util.Locale;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n-import androidx.annotation.NonNull;\n-import androidx.annotation.Nullable;\n-import androidx.localbroadcastmanager.content.LocalBroadcastManager;\n import timber.log.Timber;\n-\n import static timber.log.Timber.DebugTree;\n \n /**\n"}}, {"oid": "bafbdda0bee2936428686c712931a41b7dfea678", "url": "https://github.com/ankidroid/Anki-Android/commit/bafbdda0bee2936428686c712931a41b7dfea678", "message": "WebViewDebugging: Handle on startup\n\nWhen testing (printf), this has no noticeable difference if the setting\nis off, and shaved 2ms off the call if it's on", "committedDate": "2020-04-10T17:29:27Z", "type": "commit"}, {"oid": "bafbdda0bee2936428686c712931a41b7dfea678", "url": "https://github.com/ankidroid/Anki-Android/commit/bafbdda0bee2936428686c712931a41b7dfea678", "message": "WebViewDebugging: Handle on startup\n\nWhen testing (printf), this has no noticeable difference if the setting\nis off, and shaved 2ms off the call if it's on", "committedDate": "2020-04-10T17:29:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg2MTMyNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5970#discussion_r406861327", "bodyText": "Issue found: The utility class name 'WebViewDebugging' doesn't match '[A-Z][a-zA-Z0-9]+(Utils?|Helper)'", "author": "timrae", "createdAt": "2020-04-10T17:32:30Z", "path": "AnkiDroid/src/main/java/com/ichi2/utils/WebViewDebugging.java", "diffHunk": "@@ -0,0 +1,17 @@\n+package com.ichi2.utils;\n+\n+import android.content.SharedPreferences;\n+import android.os.Build;\n+import android.webkit.WebView;\n+\n+public class WebViewDebugging {", "originalCommit": "bafbdda0bee2936428686c712931a41b7dfea678", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}