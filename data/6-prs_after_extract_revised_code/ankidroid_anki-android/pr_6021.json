{"pr_number": 6021, "pr_title": "Allow listener to be null in collection task", "pr_createdAt": "2020-04-15T21:14:55Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6021", "timeline": [{"oid": "8ee33ac78d8541bbbbfb8b7e27b6e13a76280017", "url": "https://github.com/ankidroid/Anki-Android/commit/8ee33ac78d8541bbbbfb8b7e27b6e13a76280017", "message": "Allow listener to be null in collection task\n\nThis will allow to avoid forcing the use of an actual listener when no\naction are required before/after", "committedDate": "2020-04-15T21:12:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEzOTk3Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6021#discussion_r409139976", "bodyText": "useful future-proofing trick on this one - if you annotate the Listener argument here with @Nullable (from androidx.annotation package I believe) then Android studio will help programmers later by highlighting when mListener might be null but isn't null-checked yet in the code.", "author": "mikehardy", "createdAt": "2020-04-15T21:18:55Z", "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -135,6 +135,10 @@\n      * @param params to pass to the task\n      * @return the newly created task\n      */\n+    public static CollectionTask launchCollectionTask(int type, TaskData... params) {\n+        return launchCollectionTask(type, null, params);\n+    }\n+\n     public static CollectionTask launchCollectionTask(int type, Listener listener, TaskData... params) {", "originalCommit": "8ee33ac78d8541bbbbfb8b7e27b6e13a76280017", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE0MjExNg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6021#discussion_r409142116", "bodyText": "I pushed in a next commit, hoping it's correct", "author": "Arthur-Milchior", "createdAt": "2020-04-15T21:23:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEzOTk3Ng=="}], "type": "inlineReview", "revised_code": {"commit": "a886ca601a5a7e6f7b91214c4d07018409462dc6", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java b/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java\nindex ef6c4f786b..de1da7101c 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java\n\n@@ -139,7 +140,7 @@ public class CollectionTask extends BaseAsyncTask<CollectionTask.TaskData, Colle\n         return launchCollectionTask(type, null, params);\n     }\n \n-    public static CollectionTask launchCollectionTask(int type, Listener listener, TaskData... params) {\n+    public static CollectionTask launchCollectionTask(int type, @Nullable Listener listener, TaskData... params) {\n         // Start new task\n         CollectionTask newTask = new CollectionTask(type, listener, sLatestInstance);\n         newTask.execute(params);\n"}}, {"oid": "a886ca601a5a7e6f7b91214c4d07018409462dc6", "url": "https://github.com/ankidroid/Anki-Android/commit/a886ca601a5a7e6f7b91214c4d07018409462dc6", "message": "listener @Nullable", "committedDate": "2020-04-15T21:22:34Z", "type": "commit"}]}