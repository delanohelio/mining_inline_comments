{"pr_number": 7103, "pr_title": "Refactor BasicImageFieldController", "pr_createdAt": "2020-09-15T09:32:45Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/7103", "timeline": [{"oid": "5f9ffcfff79a9df3d8f7d0f5176516c919b1af4c", "url": "https://github.com/ankidroid/Anki-Android/commit/5f9ffcfff79a9df3d8f7d0f5176516c919b1af4c", "message": "NF: Extract onValidImage", "committedDate": "2020-09-14T22:50:03Z", "type": "commit"}, {"oid": "b0c04933b69826a7ed529e244926b6d27ccb8746", "url": "https://github.com/ankidroid/Anki-Android/commit/b0c04933b69826a7ed529e244926b6d27ccb8746", "message": "NF: Extract image path and Uri to ViewModel", "committedDate": "2020-09-15T09:20:27Z", "type": "commit"}, {"oid": "2ee98bddfccee5ec187dbe5f5fbb54e698b26468", "url": "https://github.com/ankidroid/Anki-Android/commit/2ee98bddfccee5ec187dbe5f5fbb54e698b26468", "message": "NF: Extract captureImage", "committedDate": "2020-09-15T09:20:30Z", "type": "commit"}, {"oid": "eba0ba180a223a295e580c36a9c60207bc3d2786", "url": "https://github.com/ankidroid/Anki-Android/commit/eba0ba180a223a295e580c36a9c60207bc3d2786", "message": "NF: Extract canUseCamera", "committedDate": "2020-09-15T09:20:30Z", "type": "commit"}, {"oid": "2eae905f3ed22adba0c6d7960291b8afe99360fc", "url": "https://github.com/ankidroid/Anki-Android/commit/2eae905f3ed22adba0c6d7960291b8afe99360fc", "message": "extract rotateAndCompress", "committedDate": "2020-09-15T09:20:31Z", "type": "commit"}, {"oid": "4437e9501a83d447620808a94d8e0ae4a9c802af", "url": "https://github.com/ankidroid/Anki-Android/commit/4437e9501a83d447620808a94d8e0ae4a9c802af", "message": "extract setTemporaryMedia", "committedDate": "2020-09-15T09:20:31Z", "type": "commit"}, {"oid": "83fc2ef5642ee9bad82721af1a3944900707461d", "url": "https://github.com/ankidroid/Anki-Android/commit/83fc2ef5642ee9bad82721af1a3944900707461d", "message": "refactor rotateAndCompress", "committedDate": "2020-09-15T09:20:32Z", "type": "commit"}, {"oid": "ea5971586d5c07eda0440b7868d989539c65fe21", "url": "https://github.com/ankidroid/Anki-Android/commit/ea5971586d5c07eda0440b7868d989539c65fe21", "message": "refactor mViewModel", "committedDate": "2020-09-15T09:20:33Z", "type": "commit"}, {"oid": "363cb8529edec0f6169879f85c3e7113d1a5fa32", "url": "https://github.com/ankidroid/Anki-Android/commit/363cb8529edec0f6169879f85c3e7113d1a5fa32", "message": "BasicImageFieldController: Final Refactorings\n\nBefore 5192 - adding rename", "committedDate": "2020-09-15T09:21:55Z", "type": "commit"}, {"oid": "1b665775d25d4a0a560bb646736d880786c60553", "url": "https://github.com/ankidroid/Anki-Android/commit/1b665775d25d4a0a560bb646736d880786c60553", "message": "NF: Refactor requestCrop", "committedDate": "2020-09-15T09:31:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyNDYyMA==", "url": "https://github.com/ankidroid/Anki-Android/pull/7103#discussion_r488524620", "bodyText": "Extracted from getImageUri", "author": "david-allison-1", "createdAt": "2020-09-15T09:33:32Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/multimediacard/fields/BasicImageFieldController.java", "diffHunk": "@@ -400,17 +407,20 @@ private void handleSelectImageIntent(Intent data) {\n \n         File internalizedPick = internalizeUri(selectedImage);\n         if (internalizedPick == null) {\n+            String urlImagePath = getImageInfoFromUri(mActivity, selectedImage).first;", "originalCommit": "1b665775d25d4a0a560bb646736d880786c60553", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyNTE0OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/7103#discussion_r488525149", "bodyText": "Handled in rotateAndCompress now", "author": "david-allison-1", "createdAt": "2020-09-15T09:34:27Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/multimediacard/fields/BasicImageFieldController.java", "diffHunk": "@@ -643,22 +662,35 @@ private void handleCropResult() {\n         Timber.d(\"handleCropResult\");\n         if (!rotateAndCompress()) {\n             Timber.i(\"handleCropResult() appears to have an invalid file, reverting\");\n-            revertToPreviousImage();", "originalCommit": "1b665775d25d4a0a560bb646736d880786c60553", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "ce4b867719606a5b27efca6ff9eea2d800d89dcd", "url": "https://github.com/ankidroid/Anki-Android/commit/ce4b867719606a5b27efca6ff9eea2d800d89dcd", "message": "Merge branch 'master' into 5192-refactor", "committedDate": "2020-09-21T14:38:42Z", "type": "commit"}]}