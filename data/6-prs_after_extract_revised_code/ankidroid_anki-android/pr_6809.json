{"pr_number": 6809, "pr_title": "Preserve launcher animation by not animating IntentHandler finish", "pr_createdAt": "2020-08-04T20:53:08Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6809", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyOTA3OA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6809#discussion_r465329078", "bodyText": "Silly question: don't we still want a finish() here?", "author": "david-allison-1", "createdAt": "2020-08-04T21:03:49Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/IntentHandler.java", "diffHunk": "@@ -144,7 +144,6 @@ private void launchDeckPickerIfNoOtherTasks(Intent reloadIntent) {\n         reloadIntent.addCategory(Intent.CATEGORY_LAUNCHER);\n         reloadIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n         startActivityIfNeeded(reloadIntent, 0);", "originalCommit": "09e27185cd2fafbaa9f37f9a92e14cfc6cc63faa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM0MTM4NQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6809#discussion_r465341385", "bodyText": "See, now that's why everyone needs someone to review their stuff. I thought, nah, not important but you force me to justify myself (how dare you! ;-) ) and when I read up on it, apparently IntentHandler will be \"back-able\" unless I finish it. Also the \"teardown\" lifecycle methods won't be called (onPause/onStop/onDestroy - depending on where you are when finish is called) but that's not important here.\nWill fix and repush", "author": "mikehardy", "createdAt": "2020-08-04T21:29:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyOTA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM0NDkyNA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6809#discussion_r465344924", "bodyText": "https://stackoverflow.com/a/43363868/9910298", "author": "mikehardy", "createdAt": "2020-08-04T21:38:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyOTA3OA=="}], "type": "inlineReview", "revised_code": {"commit": "a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/IntentHandler.java b/AnkiDroid/src/main/java/com/ichi2/anki/IntentHandler.java\nindex 2bed521fc7..98342d6d01 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/IntentHandler.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/IntentHandler.java\n\n@@ -144,6 +144,7 @@ public class IntentHandler extends Activity {\n         reloadIntent.addCategory(Intent.CATEGORY_LAUNCHER);\n         reloadIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n         startActivityIfNeeded(reloadIntent, 0);\n+        finish();\n     }\n \n \n"}}, {"oid": "a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "url": "https://github.com/ankidroid/Anki-Android/commit/a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "message": "Preserve launcher animation by not animating IntentHandler finish\n\nFixes #5143 by letting IntentHandler just finish, if it specifies an animation\nit actually clobbers whatever system launcher animation is specified.\n\nPixel Launcher seems to override the override but Nova Launcher respects it,\nmeaning you don't get the Nova Launcher animation you configure", "committedDate": "2020-08-04T21:34:44Z", "type": "commit"}, {"oid": "a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "url": "https://github.com/ankidroid/Anki-Android/commit/a3e7b46d21e2bda6c67bc73cad9445b949ac8f5c", "message": "Preserve launcher animation by not animating IntentHandler finish\n\nFixes #5143 by letting IntentHandler just finish, if it specifies an animation\nit actually clobbers whatever system launcher animation is specified.\n\nPixel Launcher seems to override the override but Nova Launcher respects it,\nmeaning you don't get the Nova Launcher animation you configure", "committedDate": "2020-08-04T21:34:44Z", "type": "forcePushed"}]}