{"pr_number": 6835, "pr_title": "NoteEditor: Fix newlines when previewing", "pr_createdAt": "2020-08-06T21:04:10Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6835", "timeline": [{"oid": "21420d0b5ae3595f80a84f8234f13214cb553eef", "url": "https://github.com/ankidroid/Anki-Android/commit/21420d0b5ae3595f80a84f8234f13214cb553eef", "message": "NoteEditor: Fix newlines when previewing\n\nWhen saving a note, we convert a newline to <br>\nWe should do the same for Previewing\n\nFixes 6834", "committedDate": "2020-08-06T20:57:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcwOTA5Nw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6835#discussion_r466709097", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private String convertToHtmlNewline(String fieldData) {\n          \n          \n            \n                private String convertToHtmlNewline(@NonNull String fieldData) {\n          \n      \n    \n    \n  \n\nMaybe? (I think that's the right annotation - it's being called with no null check, so seems safer)", "author": "mikehardy", "createdAt": "2020-08-06T21:59:50Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java", "diffHunk": "@@ -1631,6 +1642,11 @@ private boolean updateField(FieldEditText field) {\n     }\n \n \n+    private String convertToHtmlNewline(String fieldData) {", "originalCommit": "21420d0b5ae3595f80a84f8234f13214cb553eef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNzE4OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6835#discussion_r466727189", "bodyText": "Got to be - would throw otherwise", "author": "david-allison-1", "createdAt": "2020-08-06T22:51:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcwOTA5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "d699fc53a4ec51dff72e21e8e365c7f801eaf4db", "chunk": "diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java b/AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java\nindex 09ce1b548..ff9154972 100644\n--- a/AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java\n+++ b/AnkiDroid/src/main/java/com/ichi2/anki/NoteEditor.java\n\n@@ -1642,7 +1642,7 @@ public class NoteEditor extends AnkiActivity {\n     }\n \n \n-    private String convertToHtmlNewline(String fieldData) {\n+    private String convertToHtmlNewline(@NonNull String fieldData) {\n         return fieldData.replace(FieldEditText.NEW_LINE, \"<br>\");\n     }\n \n"}}, {"oid": "d699fc53a4ec51dff72e21e8e365c7f801eaf4db", "url": "https://github.com/ankidroid/Anki-Android/commit/d699fc53a4ec51dff72e21e8e365c7f801eaf4db", "message": "NF: Add NonNull annotation\n\nCo-authored-by: Mike Hardy <github@mikehardy.net>", "committedDate": "2020-08-06T22:51:51Z", "type": "commit"}]}