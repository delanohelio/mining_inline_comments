{"pr_number": 1082, "pr_title": "Issue #911: `pipe` CLI shall allow to list the users/groups/objects permissions globally", "pr_createdAt": "2020-04-30T12:41:39Z", "pr_url": "https://github.com/epam/cloud-pipeline/pull/1082", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4NDIyMw==", "url": "https://github.com/epam/cloud-pipeline/pull/1082#discussion_r418084223", "bodyText": "Result of method is ignored, is it correct? Also I assume non-principal sid may be a group not only role", "author": "mzueva", "createdAt": "2020-04-30T15:11:07Z", "path": "api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java", "diffHunk": "@@ -382,6 +385,7 @@ public void filterTree(AclSid aclSid, AbstractHierarchicalEntity entity, Permiss\n         if (aclSid.isPrincipal()) {\n             filterTree(aclSid.getName(), entity, permission);\n         } else {\n+            roleManager.loadRole(aclSid.getName());", "originalCommit": "d9858bbdd9ec67748d4c094ff3379d850ca4e19c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4NzA1NA==", "url": "https://github.com/epam/cloud-pipeline/pull/1082#discussion_r418087054", "bodyText": "@mzueva  This method is used to determine exists group or not. We do not need result of this method itself.", "author": "ekazachkova", "createdAt": "2020-04-30T15:15:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4NDIyMw=="}], "type": "inlineReview", "revised_code": {"commit": "8cb2222244a8455f63bdc4e73be46ca7a25a7bcd", "chunk": "diff --git a/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java b/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java\nindex 5496afa34..63d5bb910 100644\n--- a/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java\n+++ b/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java\n\n@@ -385,7 +382,6 @@ public class GrantPermissionManager {\n         if (aclSid.isPrincipal()) {\n             filterTree(aclSid.getName(), entity, permission);\n         } else {\n-            roleManager.loadRole(aclSid.getName());\n             filterTree(Collections.singletonList(new GrantedAuthoritySid(aclSid.getName())), entity, permission);\n         }\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4Nzk3NQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1082#discussion_r418087975", "bodyText": "Result of the method call is ignored, is it ok? I assume non-principal sid may be a group not only role.", "author": "mzueva", "createdAt": "2020-04-30T15:16:29Z", "path": "api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java", "diffHunk": "@@ -382,6 +385,7 @@ public void filterTree(AclSid aclSid, AbstractHierarchicalEntity entity, Permiss\n         if (aclSid.isPrincipal()) {\n             filterTree(aclSid.getName(), entity, permission);\n         } else {\n+            roleManager.loadRole(aclSid.getName());", "originalCommit": "d9858bbdd9ec67748d4c094ff3379d850ca4e19c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8cb2222244a8455f63bdc4e73be46ca7a25a7bcd", "chunk": "diff --git a/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java b/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java\nindex 5496afa34..63d5bb910 100644\n--- a/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java\n+++ b/api/src/main/java/com/epam/pipeline/manager/security/GrantPermissionManager.java\n\n@@ -385,7 +382,6 @@ public class GrantPermissionManager {\n         if (aclSid.isPrincipal()) {\n             filterTree(aclSid.getName(), entity, permission);\n         } else {\n-            roleManager.loadRole(aclSid.getName());\n             filterTree(Collections.singletonList(new GrantedAuthoritySid(aclSid.getName())), entity, permission);\n         }\n     }\n"}}, {"oid": "8cb2222244a8455f63bdc4e73be46ca7a25a7bcd", "url": "https://github.com/epam/cloud-pipeline/commit/8cb2222244a8455f63bdc4e73be46ca7a25a7bcd", "message": "Issue #911: `pipe` CLI shall allow to list the users/groups/objects permissions globally - fixes for tool/docker_registry listing", "committedDate": "2020-04-30T16:14:19Z", "type": "commit"}, {"oid": "d98d046e493fb101e516a15376af79141e9a55fb", "url": "https://github.com/epam/cloud-pipeline/commit/d98d046e493fb101e516a15376af79141e9a55fb", "message": "Issue #911: `pipe` CLI shall allow to list the users/groups/objects permissions globally - `POST entities` should fail if group/role does not exist", "committedDate": "2020-04-30T16:14:19Z", "type": "commit"}, {"oid": "9f0df5f8fedada1a2e00503bee9f22fd71f29d9d", "url": "https://github.com/epam/cloud-pipeline/commit/9f0df5f8fedada1a2e00503bee9f22fd71f29d9d", "message": "Issue #911: `pipe` CLI shall allow to list the users/groups/objects permissions globally - tests fix", "committedDate": "2020-04-30T16:14:19Z", "type": "commit"}, {"oid": "07bc71178901d384bbac2bbebe2520f9c75e06c1", "url": "https://github.com/epam/cloud-pipeline/commit/07bc71178901d384bbac2bbebe2520f9c75e06c1", "message": "Issue #911: `pipe` CLI shall allow to list the users/groups/objects permissions globally - do not check role/group existence", "committedDate": "2020-04-30T16:42:29Z", "type": "commit"}, {"oid": "07bc71178901d384bbac2bbebe2520f9c75e06c1", "url": "https://github.com/epam/cloud-pipeline/commit/07bc71178901d384bbac2bbebe2520f9c75e06c1", "message": "Issue #911: `pipe` CLI shall allow to list the users/groups/objects permissions globally - do not check role/group existence", "committedDate": "2020-04-30T16:42:29Z", "type": "forcePushed"}]}