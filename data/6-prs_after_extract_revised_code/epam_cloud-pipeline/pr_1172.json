{"pr_number": 1172, "pr_title": "add 2660, 2663, 2665 GlobalSearch tests", "pr_createdAt": "2020-06-17T10:19:59Z", "pr_url": "https://github.com/epam/cloud-pipeline/pull/1172", "timeline": [{"oid": "1738bac9520294ffb69dded9c2590f1257ccf74e", "url": "https://github.com/epam/cloud-pipeline/commit/1738bac9520294ffb69dded9c2590f1257ccf74e", "message": "add 2660, 2663, 2665 GlobalSearch tests\n\nSigned-off-by: Mariia_Tolstaia <Mariia_Tolstaia@epam.com>", "committedDate": "2020-06-17T10:17:39Z", "type": "commit"}, {"oid": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "url": "https://github.com/epam/cloud-pipeline/commit/c929d9fa55dec10529b8cc71d64a68b783c5ac99", "message": "update 2660, 2663, 2665 GlobalSearch tests\n\nSigned-off-by: Mariia_Tolstaia <Mariia_Tolstaia@epam.com>", "committedDate": "2020-06-17T14:09:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNjc0OQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442026749", "bodyText": "It would be better to move this method before @test", "author": "kamyshova", "createdAt": "2020-06-18T07:36:27Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -383,4 +475,11 @@ public void searchAfterDeleting() {\n     private GlobalSearchAO search() {\n         return new NavigationMenuAO().search();\n     }\n+\n+    @AfterTest", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAzNTk1NA==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442035954", "bodyText": "Done", "author": "maryvictol", "createdAt": "2020-06-18T07:52:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNjc0OQ=="}], "type": "inlineReview", "revised_code": {"commit": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "chunk": "diff --git a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\nindex fb9df3524..ca2d66390 100644\n--- a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n+++ b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n\n@@ -475,11 +482,4 @@ public class GlobalSearchTest extends AbstractSeveralPipelineRunningTest impleme\n     private GlobalSearchAO search() {\n         return new NavigationMenuAO().search();\n     }\n-\n-    @AfterTest\n-    public void checkCloseSearch(){\n-        if($(byClassName(\"earch__search-container\")).is(visible)) {\n-            $(byClassName(\"earch__search-container\")).click();\n-        }\n-    }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNzA5MA==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442027090", "bodyText": "Add a space please", "author": "kamyshova", "createdAt": "2020-06-18T07:37:03Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -383,4 +475,11 @@ public void searchAfterDeleting() {\n     private GlobalSearchAO search() {\n         return new NavigationMenuAO().search();\n     }\n+\n+    @AfterTest\n+    public void checkCloseSearch(){", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAzODM0OQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442038349", "bodyText": "Done", "author": "maryvictol", "createdAt": "2020-06-18T07:57:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNzA5MA=="}], "type": "inlineReview", "revised_code": {"commit": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "chunk": "diff --git a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\nindex fb9df3524..ca2d66390 100644\n--- a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n+++ b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n\n@@ -475,11 +482,4 @@ public class GlobalSearchTest extends AbstractSeveralPipelineRunningTest impleme\n     private GlobalSearchAO search() {\n         return new NavigationMenuAO().search();\n     }\n-\n-    @AfterTest\n-    public void checkCloseSearch(){\n-        if($(byClassName(\"earch__search-container\")).is(visible)) {\n-            $(byClassName(\"earch__search-container\")).click();\n-        }\n-    }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNzY5Nw==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442027697", "bodyText": "Do we need this commented out line?", "author": "kamyshova", "createdAt": "2020-06-18T07:38:09Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -230,6 +249,79 @@ public void searchForPipelineWithRuns() {\n                 .close();\n     }\n \n+    @Test(dependsOnMethods = {\"searchForPipelineWithRuns\"})\n+    @TestCase(value = {\"EPMCMBIBPC-2663\"})\n+    public void searchForPipelineRun() {\n+        home();\n+        search()\n+                .click(RUNS)\n+                .search(pipeline)\n+                .enter()\n+                .sleep(2, SECONDS)\n+                .hover(SEARCH_RESULT)\n+                .openSearchResultItemWithText(pipelineWithRun)\n+                .ensure(TITLE, Status.SUCCESS.reached, text(testRunID), text(pipeline), text(draftVersionName))\n+                .checkTags(configurationDisk, configurationNodeType)\n+                .ensure(HIGHLIGHTS, text(\"Found in pipelineName\"), text(\"Found in description\")/*,\n+                        text(\"Found in logs\")*/)", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1MDU3Nw==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442150577", "bodyText": "\"Found in logs\" field check has been changed to check \"Found in podId\"", "author": "maryvictol", "createdAt": "2020-06-18T11:14:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNzY5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "chunk": "diff --git a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\nindex fb9df3524..ca2d66390 100644\n--- a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n+++ b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n\n@@ -262,13 +269,13 @@ public class GlobalSearchTest extends AbstractSeveralPipelineRunningTest impleme\n                 .openSearchResultItemWithText(pipelineWithRun)\n                 .ensure(TITLE, Status.SUCCESS.reached, text(testRunID), text(pipeline), text(draftVersionName))\n                 .checkTags(configurationDisk, configurationNodeType)\n-                .ensure(HIGHLIGHTS, text(\"Found in pipelineName\"), text(\"Found in description\")/*,\n-                        text(\"Found in logs\")*/)\n+                .ensure(HIGHLIGHTS, text(\"Found in pipelineName\"), text(\"Found in description\"),\n+                        text(\"Found in podId\"))\n                 .ensure(PREVIEW, text(\"Owner\"), text(LOGIN), text(\"Scheduled\"), text(\"Started\"),\n                         text(\"Finished\"), text(\"Estimated price\"))\n                 .ensure(PREVIEW_TAB, text(\"InitializeNode\"))\n                 .parent()\n-                .moveToSearchResultItemWithText(pipelineWithRun, () -> new LogAO())\n+                .moveToSearchResultItemWithText(pipelineWithRun, LogAO::new)\n                 .ensure(STATUS, text(String.format(\"Run #%s\", testRunID)));\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNzkzMg==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442027932", "bodyText": "Add a space please", "author": "kamyshova", "createdAt": "2020-06-18T07:38:35Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -63,6 +74,8 @@\n     private final String title = \"testIssue\" + Utils.randomSuffix();\n     private final String description = \"testIssueDescription\";\n     private String draftVersionName = \"\";\n+    private String testRunID = \"\";\n+    private String pipelineWithRun = String.format(\"%s-%s\",pipeline.toLowerCase(), testRunID);", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1NDY5NA==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442054694", "bodyText": "Done", "author": "maryvictol", "createdAt": "2020-06-18T08:24:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNzkzMg=="}], "type": "inlineReview", "revised_code": {"commit": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "chunk": "diff --git a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\nindex fb9df3524..ca2d66390 100644\n--- a/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n+++ b/e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java\n\n@@ -70,12 +71,11 @@ public class GlobalSearchTest extends AbstractSeveralPipelineRunningTest impleme\n     private final String configurationNodeType = \"c5.large (CPU: 2, RAM: 4)\";\n     private final String configurationDisk = \"23\";\n     private final String configVar = \"config.json\";\n-\n     private final String title = \"testIssue\" + Utils.randomSuffix();\n     private final String description = \"testIssueDescription\";\n     private String draftVersionName = \"\";\n     private String testRunID = \"\";\n-    private String pipelineWithRun = String.format(\"%s-%s\",pipeline.toLowerCase(), testRunID);\n+    private String pipelineWithRun = String.format(\"%s-%s\", pipeline.toLowerCase(), testRunID);\n \n     @BeforeClass\n     @TestCase(value = {\"EPMCMBIBPC-2653\"})\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0Njg0OQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442046849", "bodyText": "Can be replaced by Arrays.stream(list).forEach(tags::contains)", "author": "kamyshova", "createdAt": "2020-06-18T08:11:51Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java", "diffHunk": "@@ -194,5 +215,16 @@ public boolean apply(final WebElement element) {\n                 }\n             };\n         }\n+\n+        public SearchResultItemPreviewAO checkTags(String ... list) {\n+            String tags = String.format(\"%s %s %s %s\", get(TAGS).find(By.xpath(\"./span[2]/span\")).text(),\n+                    get(TAGS).find(By.xpath(\"./span[3]\")).text(),\n+                    get(TAGS).find(By.xpath(\"./span[4]\")).text(),\n+                    get(TAGS).find(By.xpath(\"./span[5]\")).text());\n+            for( String i:list) {\n+                tags.contains(i);\n+            }", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1MDkzOA==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442150938", "bodyText": "Done", "author": "maryvictol", "createdAt": "2020-06-18T11:15:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0Njg0OQ=="}], "type": "inlineReview", "revised_code": {"commit": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "chunk": "diff --git a/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java b/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java\nindex a1f10c67a..2fbc629eb 100644\n--- a/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java\n+++ b/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java\n\n@@ -221,10 +226,9 @@ public class GlobalSearchAO implements AccessObject<GlobalSearchAO> {\n                     get(TAGS).find(By.xpath(\"./span[3]\")).text(),\n                     get(TAGS).find(By.xpath(\"./span[4]\")).text(),\n                     get(TAGS).find(By.xpath(\"./span[5]\")).text());\n-            for( String i:list) {\n-                tags.contains(i);\n-            }\n+            Arrays.stream(list).forEach(tags::contains);\n             return this;\n         }\n     }\n+\n }\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0NzEyNw==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442047127", "bodyText": "Add a new line, please", "author": "kamyshova", "createdAt": "2020-06-18T08:12:19Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java", "diffHunk": "@@ -194,5 +215,16 @@ public boolean apply(final WebElement element) {\n                 }\n             };\n         }\n+\n+        public SearchResultItemPreviewAO checkTags(String ... list) {\n+            String tags = String.format(\"%s %s %s %s\", get(TAGS).find(By.xpath(\"./span[2]/span\")).text(),\n+                    get(TAGS).find(By.xpath(\"./span[3]\")).text(),\n+                    get(TAGS).find(By.xpath(\"./span[4]\")).text(),\n+                    get(TAGS).find(By.xpath(\"./span[5]\")).text());\n+            for( String i:list) {\n+                tags.contains(i);\n+            }\n+            return this;\n+        }\n     }\n-}\n+}", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1MTAzOA==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442151038", "bodyText": "Done", "author": "maryvictol", "createdAt": "2020-06-18T11:15:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0NzEyNw=="}], "type": "inlineReview", "revised_code": {"commit": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "chunk": "diff --git a/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java b/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java\nindex a1f10c67a..2fbc629eb 100644\n--- a/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java\n+++ b/e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java\n\n@@ -221,10 +226,9 @@ public class GlobalSearchAO implements AccessObject<GlobalSearchAO> {\n                     get(TAGS).find(By.xpath(\"./span[3]\")).text(),\n                     get(TAGS).find(By.xpath(\"./span[4]\")).text(),\n                     get(TAGS).find(By.xpath(\"./span[5]\")).text());\n-            for( String i:list) {\n-                tags.contains(i);\n-            }\n+            Arrays.stream(list).forEach(tags::contains);\n             return this;\n         }\n     }\n+\n }\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0ODQ1MQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442048451", "bodyText": "Update the license year please", "author": "kamyshova", "createdAt": "2020-06-18T08:14:37Z", "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/Primitive.java", "diffHunk": "@@ -246,5 +246,7 @@\n     WRITE_TAB,\n     PREVIEW_TAB,\n     PREVIEW,\n-    HIGHLIGHTS\n+    HIGHLIGHTS,", "originalCommit": "c929d9fa55dec10529b8cc71d64a68b783c5ac99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1MDMwMQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1172#discussion_r442050301", "bodyText": "Done", "author": "maryvictol", "createdAt": "2020-06-18T08:17:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0ODQ1MQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "5f5465bf1efa50af8bf360c6c0538aeba961f318", "url": "https://github.com/epam/cloud-pipeline/commit/5f5465bf1efa50af8bf360c6c0538aeba961f318", "message": "update 2660, 2663, 2665 GlobalSearch tests\n\nSigned-off-by: Mariia_Tolstaia <Mariia_Tolstaia@epam.com>", "committedDate": "2020-06-18T13:02:56Z", "type": "commit"}, {"oid": "7cdcd31c49e978aa75cd82781cbbd64a337e45d7", "url": "https://github.com/epam/cloud-pipeline/commit/7cdcd31c49e978aa75cd82781cbbd64a337e45d7", "message": "fix codacy issue\n\nSigned-off-by: Mariia_Tolstaia <Mariia_Tolstaia@epam.com>", "committedDate": "2020-06-18T13:40:12Z", "type": "commit"}, {"oid": "32782dbdc92d76d0d7ec42b6b5b18e1ef54ca6e7", "url": "https://github.com/epam/cloud-pipeline/commit/32782dbdc92d76d0d7ec42b6b5b18e1ef54ca6e7", "message": "ui_tests: new line", "committedDate": "2020-06-19T07:45:47Z", "type": "commit"}]}