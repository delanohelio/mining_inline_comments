{"pr_number": 1455, "pr_title": "Issue #1445 system dictionaries links", "pr_createdAt": "2020-10-01T13:32:19Z", "pr_url": "https://github.com/epam/cloud-pipeline/pull/1455", "timeline": [{"oid": "c0622eb8a7cf60ba3cfc8fbd051426fdb39b1f54", "url": "https://github.com/epam/cloud-pipeline/commit/c0622eb8a7cf60ba3cfc8fbd051426fdb39b1f54", "message": "Issue #1445 Change CategoricalAttribute structure: allow storing links for values", "committedDate": "2020-10-01T11:13:28Z", "type": "commit"}, {"oid": "fdb6605a37f73f4a5e4e505cc5427be85e8b2c2e", "url": "https://github.com/epam/cloud-pipeline/commit/fdb6605a37f73f4a5e4e505cc5427be85e8b2c2e", "message": "Issue #1445 Merge links for one-to-many relation", "committedDate": "2020-10-01T11:57:10Z", "type": "commit"}, {"oid": "7ac6770b8f1cdd15c30282c7ebbd9afd47c7d1e9", "url": "https://github.com/epam/cloud-pipeline/commit/7ac6770b8f1cdd15c30282c7ebbd9afd47c7d1e9", "message": "Issue #1445 Do not consider id in CategoricalAttributeValue comparison", "committedDate": "2020-10-01T12:17:35Z", "type": "commit"}, {"oid": "e6ddd169657c1bcaf2137b6be3e746dc82e4010e", "url": "https://github.com/epam/cloud-pipeline/commit/e6ddd169657c1bcaf2137b6be3e746dc82e4010e", "message": "Issue #1445 Fix CategoricalAttributeValue structure", "committedDate": "2020-10-01T15:15:56Z", "type": "commit"}, {"oid": "0b690c0a595cca3c6fd3a3557cced047b179a18b", "url": "https://github.com/epam/cloud-pipeline/commit/0b690c0a595cca3c6fd3a3557cced047b179a18b", "message": "Issue #1445 Fix links binding during insert operation", "committedDate": "2020-10-01T15:21:56Z", "type": "commit"}, {"oid": "265c8a3abc069c52c05d624025bb5985bd6dda2e", "url": "https://github.com/epam/cloud-pipeline/commit/265c8a3abc069c52c05d624025bb5985bd6dda2e", "message": "Issue #1445 Implement basic testing for linking", "committedDate": "2020-10-01T16:28:48Z", "type": "commit"}, {"oid": "94b100217f8801b26560d798c9d622d4eafd5013", "url": "https://github.com/epam/cloud-pipeline/commit/94b100217f8801b26560d798c9d622d4eafd5013", "message": "Issue #1445 Additional checks of categorical attribute structure during insert operation", "committedDate": "2020-10-02T10:25:01Z", "type": "commit"}, {"oid": "94b100217f8801b26560d798c9d622d4eafd5013", "url": "https://github.com/epam/cloud-pipeline/commit/94b100217f8801b26560d798c9d622d4eafd5013", "message": "Issue #1445 Additional checks of categorical attribute structure during insert operation", "committedDate": "2020-10-02T10:25:01Z", "type": "forcePushed"}, {"oid": "f63cf4e8735650c78b9326ee4515653948a8300b", "url": "https://github.com/epam/cloud-pipeline/commit/f63cf4e8735650c78b9326ee4515653948a8300b", "message": "Issue #1445 Assign `key` value to CategoricalAttributeValue from dictionary during insert", "committedDate": "2020-10-05T09:13:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU2ODMxOQ==", "url": "https://github.com/epam/cloud-pipeline/pull/1455#discussion_r499568319", "bodyText": "Could you please remove this on lines 82 & 83 (method updateCategoricalAttributes )", "author": "mzueva", "createdAt": "2020-10-05T12:42:00Z", "path": "api/src/main/java/com/epam/pipeline/dao/metadata/CategoricalAttributeDao.java", "diffHunk": "@@ -72,29 +86,60 @@ public boolean updateCategoricalAttributes(final List<CategoricalAttribute> dict\n     @Transactional(propagation = Propagation.MANDATORY)\n     public boolean insertAttributesValues(final List<CategoricalAttribute> dict) {\n         final MapSqlParameterSource[] values = dict.stream()\n-            .flatMap(entry -> entry.getValues()", "originalCommit": "f63cf4e8735650c78b9326ee4515653948a8300b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ba54e47d7017d84005ccf52fa0570844c295d720", "chunk": "diff --git a/api/src/main/java/com/epam/pipeline/dao/metadata/CategoricalAttributeDao.java b/api/src/main/java/com/epam/pipeline/dao/metadata/CategoricalAttributeDao.java\nindex 4e0c4b755..d747ae68e 100644\n--- a/api/src/main/java/com/epam/pipeline/dao/metadata/CategoricalAttributeDao.java\n+++ b/api/src/main/java/com/epam/pipeline/dao/metadata/CategoricalAttributeDao.java\n\n@@ -79,8 +79,8 @@ public class CategoricalAttributeDao extends NamedParameterJdbcDaoSupport {\n         final List<String> dictionaries = dict.stream()\n             .map(CategoricalAttribute::getKey)\n             .collect(Collectors.toList());\n-        this.deleteAttributeValues(dictionaries);\n-        return this.insertAttributesValues(dict);\n+        deleteAttributeValues(dictionaries);\n+        return insertAttributesValues(dict);\n     }\n \n     @Transactional(propagation = Propagation.MANDATORY)\n"}}, {"oid": "ba54e47d7017d84005ccf52fa0570844c295d720", "url": "https://github.com/epam/cloud-pipeline/commit/ba54e47d7017d84005ccf52fa0570844c295d720", "message": "Issue #1445 PR review comments refactoring", "committedDate": "2020-10-05T13:16:18Z", "type": "commit"}]}