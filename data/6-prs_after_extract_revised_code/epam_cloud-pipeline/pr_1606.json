{"pr_number": 1606, "pr_title": "Issue 1405: Implemented tests for notification controllers", "pr_createdAt": "2020-11-25T15:32:46Z", "pr_url": "https://github.com/epam/cloud-pipeline/pull/1606", "timeline": [{"oid": "ddb3ba72b28ce7d22b01efb1893d5c77531fa095", "url": "https://github.com/epam/cloud-pipeline/commit/ddb3ba72b28ce7d22b01efb1893d5c77531fa095", "message": "Issue #1405: Implemented tests for NotificationController", "committedDate": "2020-11-25T10:13:24Z", "type": "commit"}, {"oid": "f5377b936bfacf772520816a5ca06d7e2f086412", "url": "https://github.com/epam/cloud-pipeline/commit/f5377b936bfacf772520816a5ca06d7e2f086412", "message": "Issue #1405: Minor refactoring for NotificationControllerTest", "committedDate": "2020-11-25T11:22:20Z", "type": "commit"}, {"oid": "65fa8480f9e6a4d25a2c8da34ab9afe4a3752ce9", "url": "https://github.com/epam/cloud-pipeline/commit/65fa8480f9e6a4d25a2c8da34ab9afe4a3752ce9", "message": "Issue #1405: Implemented tests for NotificationSettingsController", "committedDate": "2020-11-25T11:22:52Z", "type": "commit"}, {"oid": "14642753cd916b8e741d8e087d6eda19d88d9e23", "url": "https://github.com/epam/cloud-pipeline/commit/14642753cd916b8e741d8e087d6eda19d88d9e23", "message": "Issue #1405: Implemented tests for NotificationTemplateController", "committedDate": "2020-11-25T13:16:38Z", "type": "commit"}, {"oid": "da434e33fa4744c876a94d310078489f1e7c1fb3", "url": "https://github.com/epam/cloud-pipeline/commit/da434e33fa4744c876a94d310078489f1e7c1fb3", "message": "Issue #1405: Implemented tests for SystemNotificationController", "committedDate": "2020-11-25T15:31:10Z", "type": "commit"}, {"oid": "c66e84d9fd1ed8fe6dda3d62dab24ac1aa96f917", "url": "https://github.com/epam/cloud-pipeline/commit/c66e84d9fd1ed8fe6dda3d62dab24ac1aa96f917", "message": "Issue #1405: Added JsonIgnore to isEmpty method", "committedDate": "2020-11-26T10:53:12Z", "type": "commit"}, {"oid": "2e43c185fe88d6a2223e1069690fa28d2afcaced", "url": "https://github.com/epam/cloud-pipeline/commit/2e43c185fe88d6a2223e1069690fa28d2afcaced", "message": "Issue #1405: Fixed test with Date param", "committedDate": "2020-11-26T11:07:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM5NDc2Ng==", "url": "https://github.com/epam/cloud-pipeline/pull/1606#discussion_r537394766", "bodyText": "Is it correct name for test?", "author": "ekazachkova", "createdAt": "2020-12-07T10:28:52Z", "path": "api/src/test/java/com/epam/pipeline/controller/notification/NotificationControllerTest.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2017-2020 EPAM Systems, Inc. (https://www.epam.com/)\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.epam.pipeline.controller.notification;\n+\n+import com.epam.pipeline.controller.vo.notification.NotificationMessageVO;\n+import com.epam.pipeline.entity.notification.NotificationMessage;\n+import com.epam.pipeline.manager.notification.NotificationApiService;\n+import com.epam.pipeline.test.web.AbstractControllerTest;\n+import org.junit.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.security.test.context.support.WithMockUser;\n+import org.springframework.test.web.servlet.MvcResult;\n+\n+import static com.epam.pipeline.test.creator.notification.NotificationCreatorUtils.NOTIFICATION_MESSAGE_TYPE;\n+import static com.epam.pipeline.test.creator.notification.NotificationCreatorUtils.getNotificationMessage;\n+import static com.epam.pipeline.test.creator.notification.NotificationCreatorUtils.getNotificationMessageVO;\n+import static org.mockito.Mockito.doReturn;\n+import static org.mockito.Mockito.verify;\n+import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;\n+\n+public class NotificationControllerTest extends AbstractControllerTest {\n+\n+    private static final String NOTIFICATION_URL = SERVLET_PATH + \"/notification\";\n+    private static final String NOTIFICATION_MESSAGE_URL = NOTIFICATION_URL + \"/message\";\n+    private final NotificationMessage notificationMessage = getNotificationMessage();\n+    private final NotificationMessageVO notificationMessageVO = getNotificationMessageVO();\n+\n+    @Autowired\n+    private NotificationApiService mockNotificationApiService;\n+\n+    @Test\n+    public void shouldFailCreateForUnauthorizedUser() {\n+        performUnauthorizedRequest(post(NOTIFICATION_MESSAGE_URL));\n+    }\n+\n+    @Test\n+    @WithMockUser\n+    public void shouldCreateForUnauthorizedUser() throws Exception {", "originalCommit": "2e43c185fe88d6a2223e1069690fa28d2afcaced", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ed609ce11de1d27d84bd89c00a0ead3aa6a6774f", "chunk": "diff --git a/api/src/test/java/com/epam/pipeline/controller/notification/NotificationControllerTest.java b/api/src/test/java/com/epam/pipeline/controller/notification/NotificationControllerTest.java\nindex 6c056377f..3c4cc021d 100644\n--- a/api/src/test/java/com/epam/pipeline/controller/notification/NotificationControllerTest.java\n+++ b/api/src/test/java/com/epam/pipeline/controller/notification/NotificationControllerTest.java\n\n@@ -49,7 +49,7 @@ public class NotificationControllerTest extends AbstractControllerTest {\n \n     @Test\n     @WithMockUser\n-    public void shouldCreateForUnauthorizedUser() throws Exception {\n+    public void shouldCreate() throws Exception {\n         final String content = getObjectMapper().writeValueAsString(notificationMessageVO);\n         doReturn(notificationMessage).when(mockNotificationApiService).createNotification(notificationMessageVO);\n \n"}}, {"oid": "ed609ce11de1d27d84bd89c00a0ead3aa6a6774f", "url": "https://github.com/epam/cloud-pipeline/commit/ed609ce11de1d27d84bd89c00a0ead3aa6a6774f", "message": "Issue #1405: Fixed test name", "committedDate": "2020-12-07T12:07:22Z", "type": "commit"}]}