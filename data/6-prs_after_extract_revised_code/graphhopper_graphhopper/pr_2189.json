{"pr_number": 2189, "pr_title": "Minor comment updates", "pr_createdAt": "2020-11-25T10:49:25Z", "pr_url": "https://github.com/graphhopper/graphhopper/pull/2189", "timeline": [{"oid": "1a796d074d29cf2e57635bf7e68f254f39a582b4", "url": "https://github.com/graphhopper/graphhopper/commit/1a796d074d29cf2e57635bf7e68f254f39a582b4", "message": "Minor comment updates", "committedDate": "2020-11-25T10:48:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530280285", "bodyText": "MISSING does not indicate the \"easiest grade\". The easiest / well maintained grade is grade1. Missing means that we don't know the grade and could assume some other grade, but I wouldn't assume that missing grades mean it's grade1.\nOther is not really the worst grade either :).", "author": "boldtrn", "createdAt": "2020-11-25T10:51:29Z", "path": "core/src/main/java/com/graphhopper/routing/ev/TrackType.java", "diffHunk": "@@ -21,8 +21,7 @@\n \n /**\n  * This enum defines the track type of an edge which describes how well-maintained a certain track is.\n- * If not tagged the value will be MISSING (the default and easiest grad) and all edges that do not fit get OTHER as", "originalCommit": "1a796d074d29cf2e57635bf7e68f254f39a582b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MTMxNg==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530281316", "bodyText": "Maybe we should add some more information on this in the comment defining each grade? But probably it is enough the way it is in the OSM wiki.", "author": "boldtrn", "createdAt": "2020-11-25T10:53:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MzQwNg==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530283406", "bodyText": "BTW: Other is refered as worst value in other comments as well. I would propose to change this for all occurrences. Other is just an undefined state IMHO.", "author": "boldtrn", "createdAt": "2020-11-25T10:56:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDMwMDg1NA==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530300854", "bodyText": "Hmmh, I think what is meant here is that in some cases these enums could be also converted into the corresponding number and then an order is required. But probably this wasn't a good idea and with better scripting support we can now refer to potential bad track types via:\ntrack_type.ordinal() > 3 || track_type == MISSING\ninstead of just:\ntrack_type.ordinal() > 3\n\nBut probably it is enough the way it is in the OSM wiki.\n\nAs we do not have a 1:1 mapping I would not do this. Also we should make this more explicit and improve our documentation independent of OSM wiki.", "author": "karussell", "createdAt": "2020-11-25T11:24:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDMxMjAyNw==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530312027", "bodyText": "The MISSING type is related to how encoded values with no value are handled AFAIK.", "author": "otbutz", "createdAt": "2020-11-25T11:43:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQxNTAzMA==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530415030", "bodyText": "Hmmh, I think what is meant here is that in some cases these enums could be also converted into the corresponding number and then an order is required.\n\nAh, now I see how this was meant. Thanks for the explanation.\n\nAs we do not have a 1:1 mapping I would not do this. Also we should make this more explicit and improve our documentation independent of OSM wiki.\n\nDon't we have a 1:1 mapping for tracktype? But sure I can add some more information on this, if you'd want this?", "author": "boldtrn", "createdAt": "2020-11-25T14:29:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzMDY2OA==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530430668", "bodyText": "Do we really need a distinction between MISSING and OTHER ? We should probably treat them as the same thing and drop OTHER completely.\nShould we reorder the constants according to the grade?\n\n    MISSING(\"missing\"), GRADE5(\"grade5\"), GRADE4(\"grade4\"),\n    GRADE3(\"grade3\"), GRADE2(\"grade2\"),GRADE1(\"grade1\");", "author": "otbutz", "createdAt": "2020-11-25T14:51:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYxODk4OA==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r530618988", "bodyText": "Re 1: yes, you are right\nRe 2: interesting idea. But then gradeX != X ... tricky :D\n\nDon't we have a 1:1 mapping for tracktype? But sure I can add some more information on this, if you'd want this?\n\nYes, for now this is probably identical. But in general our aim should be to have values that can be easily used in our CustomWeighting.", "author": "karussell", "createdAt": "2020-11-25T20:10:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA0MjQwNw==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r531042407", "bodyText": "@boldtrn can you remove OTHER for now? All other values:\nhttps://taginfo.openstreetmap.org/keys/tracktype#values\nshould be interpreted as MISSING.", "author": "karussell", "createdAt": "2020-11-26T13:50:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA0NTUzNg==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r531045536", "bodyText": "Ok sure, should we apply the same to the other encoded values as well? Like Surface, RouteNetwork, etc.? We have other and missing there as well.", "author": "boldtrn", "createdAt": "2020-11-26T13:56:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA1NDY3Nw==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r531054677", "bodyText": "No, for surface etc there are definitely many \"other\" tags that should not mean \"missing\". In case of tracktype no other values can occur according to wiki and not many occur in real world according to taginfo.", "author": "karussell", "createdAt": "2020-11-26T14:11:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA1NTY1OQ==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r531055659", "bodyText": "And also for RouteNetwork there are plenty of tags in the wiki and real world that we cannot handle but should not mean MISSING.", "author": "karussell", "createdAt": "2020-11-26T14:13:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA1NjQzOA==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r531056438", "bodyText": "Hmmh, for route=foot or route=hiking or route=bicycle it seems there are only 4 possible values. But the RouteNetwork enum could be also used for other routes? ... not sure.", "author": "karussell", "createdAt": "2020-11-26T14:14:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQyNjI4MQ==", "url": "https://github.com/graphhopper/graphhopper/pull/2189#discussion_r531426281", "bodyText": "Ah now I understand your reasoning for removing OTHER, thanks. Ok I updated the PR.", "author": "boldtrn", "createdAt": "2020-11-27T07:37:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MDI4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "e1d78315a5eafa8bc741482abb682ec75b8d1930", "chunk": "diff --git a/core/src/main/java/com/graphhopper/routing/ev/TrackType.java b/core/src/main/java/com/graphhopper/routing/ev/TrackType.java\nindex 25f03f23a..1fb61cff2 100644\n--- a/core/src/main/java/com/graphhopper/routing/ev/TrackType.java\n+++ b/core/src/main/java/com/graphhopper/routing/ev/TrackType.java\n\n@@ -21,13 +21,14 @@ import com.graphhopper.util.Helper;\n \n /**\n  * This enum defines the track type of an edge which describes how well-maintained a certain track is.\n- * If not tagged the value will be MISSING and all tracktype values that do not fit get OTHER as value.\n+ * If there is no value tagged or if the value does not fit the given values, the TrackType will be MISSING.\n+ * grade1 is a very well-maintained road, grade5 is a poorly maintained road.\n  *\n  * @see <a href=\"https://wiki.openstreetmap.org/wiki/Tracktype\">Tracktype Wiki</a>\n  */\n public enum TrackType {\n     MISSING(\"missing\"), GRADE1(\"grade1\"), GRADE2(\"grade2\"),\n-    GRADE3(\"grade3\"), GRADE4(\"grade4\"), GRADE5(\"grade5\"), OTHER(\"other\");\n+    GRADE3(\"grade3\"), GRADE4(\"grade4\"), GRADE5(\"grade5\");\n \n     public static final String KEY = \"track_type\";\n \n"}}, {"oid": "e1d78315a5eafa8bc741482abb682ec75b8d1930", "url": "https://github.com/graphhopper/graphhopper/commit/e1d78315a5eafa8bc741482abb682ec75b8d1930", "message": "Remove other for Tracktype", "committedDate": "2020-11-27T07:32:28Z", "type": "commit"}]}