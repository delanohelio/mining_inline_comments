{"pr_number": 1911, "pr_title": "fix country rule ordering", "pr_createdAt": "2020-02-14T17:12:10Z", "pr_url": "https://github.com/graphhopper/graphhopper/pull/1911", "timeline": [{"oid": "d82691d56d49b6730158034a7fbd3a259acd72e4", "url": "https://github.com/graphhopper/graphhopper/commit/d82691d56d49b6730158034a7fbd3a259acd72e4", "message": "trying to fix #1875", "committedDate": "2020-02-14T17:09:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0Nzg0OA==", "url": "https://github.com/graphhopper/graphhopper/pull/1911#discussion_r379547848", "bodyText": "Or better singular country?", "author": "karussell", "createdAt": "2020-02-14T17:14:01Z", "path": "web-bundle/src/main/java/com/graphhopper/http/GraphHopperManaged.java", "diffHunk": "@@ -67,11 +67,11 @@ public GraphHopperManaged(GraphHopperConfig configuration, ObjectMapper objectMa\n             graphHopper = new GraphHopperOSM(landmarkSplittingFeatureCollection).forServer();\n         }\n         if (!configuration.get(\"spatial_rules.location\", \"\").isEmpty()) {\n-            throw new RuntimeException(\"spatial_rules.location has been deprecated. Please use spatial_rules.borders_directory instead.\");\n+            throw new RuntimeException(\"spatial_rules.location has been deprecated. Please use countries.borders_directory instead.\");\n         }\n-        String spatialRuleBordersDirLocation = configuration.get(\"spatial_rules.borders_directory\", \"\");\n+        String spatialRuleBordersDirLocation = configuration.get(\"countries.borders_directory\", \"\");\n         if (!spatialRuleBordersDirLocation.isEmpty()) {\n-            final BBox maxBounds = BBox.parseBBoxString(configuration.get(\"spatial_rules.max_bbox\", \"-180, 180, -90, 90\"));\n+            final BBox maxBounds = BBox.parseBBoxString(configuration.get(\"countries.max_bbox\", \"-180, 180, -90, 90\"));", "originalCommit": "d82691d56d49b6730158034a7fbd3a259acd72e4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "22a7a422a014f006b1fb5b54f626461906d260bb", "chunk": "diff --git a/web-bundle/src/main/java/com/graphhopper/http/GraphHopperManaged.java b/web-bundle/src/main/java/com/graphhopper/http/GraphHopperManaged.java\nindex 347dd2732..64ce9cd29 100644\n--- a/web-bundle/src/main/java/com/graphhopper/http/GraphHopperManaged.java\n+++ b/web-bundle/src/main/java/com/graphhopper/http/GraphHopperManaged.java\n\n@@ -67,11 +67,11 @@ public class GraphHopperManaged implements Managed {\n             graphHopper = new GraphHopperOSM(landmarkSplittingFeatureCollection).forServer();\n         }\n         if (!configuration.get(\"spatial_rules.location\", \"\").isEmpty()) {\n-            throw new RuntimeException(\"spatial_rules.location has been deprecated. Please use countries.borders_directory instead.\");\n+            throw new RuntimeException(\"spatial_rules.location has been deprecated. Please use spatial_rules.borders_directory instead.\");\n         }\n-        String spatialRuleBordersDirLocation = configuration.get(\"countries.borders_directory\", \"\");\n+        String spatialRuleBordersDirLocation = configuration.get(\"spatial_rules.borders_directory\", \"\");\n         if (!spatialRuleBordersDirLocation.isEmpty()) {\n-            final BBox maxBounds = BBox.parseBBoxString(configuration.get(\"countries.max_bbox\", \"-180, 180, -90, 90\"));\n+            final BBox maxBounds = BBox.parseBBoxString(configuration.get(\"spatial_rules.max_bbox\", \"-180, 180, -90, 90\"));\n             final Path bordersDirectory = Paths.get(spatialRuleBordersDirLocation);\n             List<JsonFeatureCollection> jsonFeatureCollections = new ArrayList<>();\n             try (DirectoryStream<Path> stream = Files.newDirectoryStream(bordersDirectory, \"*.{geojson,json}\")) {\n"}}, {"oid": "22a7a422a014f006b1fb5b54f626461906d260bb", "url": "https://github.com/graphhopper/graphhopper/commit/22a7a422a014f006b1fb5b54f626461906d260bb", "message": "revert to spatial_rules.* names", "committedDate": "2020-02-21T11:46:24Z", "type": "commit"}, {"oid": "cbecbb5e5f63f4bb6bd3b6b0be61cbabef80179e", "url": "https://github.com/graphhopper/graphhopper/commit/cbecbb5e5f63f4bb6bd3b6b0be61cbabef80179e", "message": "forgot one occurance", "committedDate": "2020-02-21T11:47:38Z", "type": "commit"}]}