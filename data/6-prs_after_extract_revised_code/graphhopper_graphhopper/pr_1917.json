{"pr_number": 1917, "pr_title": "Fix problems with block_area", "pr_createdAt": "2020-02-17T14:24:27Z", "pr_url": "https://github.com/graphhopper/graphhopper/pull/1917", "timeline": [{"oid": "ba19bb9311ccc27e1c690fa2588fb9989170e9d7", "url": "https://github.com/graphhopper/graphhopper/commit/ba19bb9311ccc27e1c690fa2588fb9989170e9d7", "message": "do not use edgeId cache for virtual edges, #1127", "committedDate": "2020-02-16T16:33:11Z", "type": "commit"}, {"oid": "853661d907df102ecebcdad2709b3f577c775c00", "url": "https://github.com/graphhopper/graphhopper/commit/853661d907df102ecebcdad2709b3f577c775c00", "message": "replaced BFS with locationIndex query; speed up: return immediately if edgeIds are known; proper cached edgeId handling if multiple shapes, fixes #1324", "committedDate": "2020-02-17T14:07:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIxMTE4MA==", "url": "https://github.com/graphhopper/graphhopper/pull/1917#discussion_r380211180", "bodyText": "Here we could think about a more generic solution as this is also required for the CustomWeighting in #1841.", "author": "karussell", "createdAt": "2020-02-17T14:26:04Z", "path": "core/src/main/java/com/graphhopper/GraphHopper.java", "diffHunk": "@@ -1073,6 +1073,9 @@ else if (ALT_ROUTE.equalsIgnoreCase(algoStr))\n                 return Collections.emptyList();\n \n             QueryGraph queryGraph = QueryGraph.lookup(graph, qResults);\n+            if (weighting instanceof BlockAreaWeighting)\n+                ((BlockAreaWeighting) weighting).setQueryGraph(queryGraph);", "originalCommit": "853661d907df102ecebcdad2709b3f577c775c00", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "029e59fb651c019495fb4221943a69287c294524", "url": "https://github.com/graphhopper/graphhopper/commit/029e59fb651c019495fb4221943a69287c294524", "message": "merged master", "committedDate": "2020-02-17T14:30:13Z", "type": "commit"}, {"oid": "ff92a48a8b7be5ef16b325becad9d6ee94aa6c82", "url": "https://github.com/graphhopper/graphhopper/commit/ff92a48a8b7be5ef16b325becad9d6ee94aa6c82", "message": "re-enable block_area for /spt and /isochrone, fixes #1905", "committedDate": "2020-02-21T14:54:21Z", "type": "commit"}]}