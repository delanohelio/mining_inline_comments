{"pr_number": 4870, "pr_title": "improve the flutter error ids we generate for analytics", "pr_createdAt": "2020-09-21T15:57:20Z", "pr_url": "https://github.com/flutter/flutter-intellij/pull/4870", "timeline": [{"oid": "0b6a19590fe76df0f363ac41cd250a8495cadb03", "url": "https://github.com/flutter/flutter-intellij/commit/0b6a19590fe76df0f363ac41cd250a8495cadb03", "message": "improve the flutter error ids we generate for analytics", "committedDate": "2020-09-21T15:56:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE3MzA4MA==", "url": "https://github.com/flutter/flutter-intellij/pull/4870#discussion_r492173080", "bodyText": "@InMatrix - can you verify that the IDs here are roughly what we'd want to see for the given errors?", "author": "devoncarew", "createdAt": "2020-09-21T15:58:14Z", "path": "testSrc/unit/io/flutter/logging/FlutterErrorHelperTest.java", "diffHunk": "@@ -34,27 +34,84 @@ public void testGetAnalyticsId_scrubbing() {\n     assertEquals(\n       \"failed-assertion\",\n       FlutterErrorHelper.getAnalyticsId(\n-        \"package:flutter/src/widgets/framework.dart':\\nfailed assertion: line 123 pos 123: 'owner._debugcurrentbuildtarget == this': is not true\"));\n+        \"'package:flutter/src/widgets/framework.dart':\\n\" +\n+        \"failed assertion: line 123 pos 123: 'owner._debugcurrentbuildtarget == this': is not true\"));\n     assertEquals(\n       \"failed-assertion\",\n       FlutterErrorHelper.getAnalyticsId(\n-        \"'package:flutter/src/widgets/framework.dart':\\nfailed assertion: line 123 pos 123: 'owner._debugcurrentbuildtarget == this': is not true\"));\n+        \"'package:flutter/src/widgets/framework.dart':\\n\" +\n+        \"failed assertion: line 123 pos 123: 'owner._debugcurrentbuildtarget == this': is not true\"));\n     assertEquals(\n       \"unable-to-load-asset\",\n       FlutterErrorHelper.getAnalyticsId(\"unable to load asset: images/foobar.png\"));\n     assertEquals(\n       \"all-children-of-this-widget-must-have-a-key\",\n       FlutterErrorHelper.getAnalyticsId(\n-        \"all children of this widget must have a key.\\n'package:flutter/src/material/reorderable_list.dart': failed assertion: line 123 pos xxx: 'children.every((widget w) => w.key != null)'\"));\n+        \"all children of this widget must have a key.\\n\" +\n+        \"'package:flutter/src/material/reorderable_list.dart': failed assertion: line 123 pos xxx: 'children.every((widget w) => w.key != null)'\"));\n     assertEquals(\n       \"all-children-of-this-widget-must-have-a-key\",\n       FlutterErrorHelper.getAnalyticsId(\n-        \"all children of this widget must have a key. 'package:flutter/src/material/reorderable_list.dart': failed assertion: line 123 pos 123: 'children.every((widget w) => w.key != null)'\"));\n+        \"all children of this widget must have a key.\\n\" +\n+        \"'package:flutter/src/material/reorderable_list.dart': failed assertion: line 123 pos 123: 'children.every((widget w) => w.key != null)'\"));\n     assertEquals(\n       \"could-not-find-a-generator-for-route-routesettings-in-the-_widgetsappstate\",\n       FlutterErrorHelper.getAnalyticsId(\"could not find a generator for route routesettings(\\\"/foobar\\\", null) in the _widgetsappstate\"));\n     assertEquals(\n-      \"controller's-length-property-does-not-match-the\",\n-      FlutterErrorHelper.getAnalyticsId(\"controller's length property (123) does not match the\\nnumber of tabs\"));\n+      \"controller's-length-property-does-not-match-the-number-of-tabs\",\n+      FlutterErrorHelper.getAnalyticsId(\"controller's length property (123) does not match the number of tabs\"));\n+  }\n+\n+  @Test\n+  public void testGetAnalyticsId_errorStudiesApp() {", "originalCommit": "0b6a19590fe76df0f363ac41cd250a8495cadb03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjIzODY1MA==", "url": "https://github.com/flutter/flutter-intellij/pull/4870#discussion_r492238650", "bodyText": "Yes, those IDs look good. I'm not sure if we need to include the package information though. Is it included to disambiguate similar assertions?", "author": "InMatrix", "createdAt": "2020-09-21T17:45:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE3MzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI0MzUzNQ==", "url": "https://github.com/flutter/flutter-intellij/pull/4870#discussion_r492243535", "bodyText": "By the package info, do you mean the package:flutter_error_studies/... text in the source errors below? It's just the text that I copied in - it's nice to have real world examples (definitely an issue when I originally wrote this, to have to guess what the error might look like).", "author": "devoncarew", "createdAt": "2020-09-21T17:54:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE3MzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI5MDUwNA==", "url": "https://github.com/flutter/flutter-intellij/pull/4870#discussion_r492290504", "bodyText": "No, I was referring to \"'package:flutter/src/material/reorderable_list.dart': failed assertion: line 123 pos 123: 'children.every((widget w) => w.key != null)'\"));\" under \"all children of this widget must have a key.\\n\" at line 56. I'm not sure if the extra detail about the specific file in package flutter and assertion position in the file are necessary for analytics .", "author": "InMatrix", "createdAt": "2020-09-21T19:18:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE3MzA4MA=="}], "type": "inlineReview", "revised_code": null}]}