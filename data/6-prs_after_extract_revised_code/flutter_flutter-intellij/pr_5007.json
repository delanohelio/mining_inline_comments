{"pr_number": 5007, "pr_title": "Allow bazel projects to set up JxBrowser", "pr_createdAt": "2020-10-29T20:17:48Z", "pr_url": "https://github.com/flutter/flutter-intellij/pull/5007", "timeline": [{"oid": "321ab468a67898ab8957d20d7feefc77df93158d", "url": "https://github.com/flutter/flutter-intellij/commit/321ab468a67898ab8957d20d7feefc77df93158d", "message": "Allow bazel projects to set up JxBrowser", "committedDate": "2020-10-29T20:15:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU0MjI3Ng==", "url": "https://github.com/flutter/flutter-intellij/pull/5007#discussion_r514542276", "bodyText": "The fact that\nFlutterModuleUtils.declaresFlutter(project) returns false for Bazel projects is probably a bug. We should fix that instead of working around it here. Audit all the other uses to make sure none will be problems for bazel.", "author": "jacob314", "createdAt": "2020-10-29T20:21:00Z", "path": "src/io/flutter/ProjectOpenActivity.java", "diffHunk": "@@ -50,10 +50,17 @@ public void runActivity(@NotNull Project project) {\n     if (FlutterUtils.isAndroidStudio() && AndroidUtils.isAndroidProject(project)) {\n       AndroidUtils.addGradleListeners(project);\n     }\n-    if (!FlutterModuleUtils.declaresFlutter(project)) {\n+\n+    if (!FlutterModuleUtils.declaresFlutter(project) && !WorkspaceCache.getInstance(project).isBazel()) {", "originalCommit": "321ab468a67898ab8957d20d7feefc77df93158d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d9423c58bdd3bcf4e069969a071bc440e0df954b", "chunk": "diff --git a/src/io/flutter/ProjectOpenActivity.java b/src/io/flutter/ProjectOpenActivity.java\nindex 29c2bdec..3cacaa74 100644\n--- a/src/io/flutter/ProjectOpenActivity.java\n+++ b/src/io/flutter/ProjectOpenActivity.java\n\n@@ -51,6 +51,8 @@ public class ProjectOpenActivity implements StartupActivity, DumbAware {\n       AndroidUtils.addGradleListeners(project);\n     }\n \n+    // TODO(helinx): We don't have a good way to check whether a Bazel project is using Flutter. Look into whether we can\n+    // build a better Flutter Bazel check into `declaresFlutter` so we don't need the second condition.\n     if (!FlutterModuleUtils.declaresFlutter(project) && !WorkspaceCache.getInstance(project).isBazel()) {\n       return;\n     }\n"}}, {"oid": "d9423c58bdd3bcf4e069969a071bc440e0df954b", "url": "https://github.com/flutter/flutter-intellij/commit/d9423c58bdd3bcf4e069969a071bc440e0df954b", "message": "Add TODO for better bazel flutter check", "committedDate": "2020-10-29T22:27:44Z", "type": "commit"}]}