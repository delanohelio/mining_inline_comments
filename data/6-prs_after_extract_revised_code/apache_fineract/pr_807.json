{"pr_number": 807, "pr_title": "FINERACT-730: Fixing bootRun and removing embedded Tomcat", "pr_createdAt": "2020-05-03T07:12:15Z", "pr_url": "https://github.com/apache/fineract/pull/807", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4NDM1Mw==", "url": "https://github.com/apache/fineract/pull/807#discussion_r419084353", "bodyText": "@ptuomola would you consider raising this change as a separate PR instead of as part of this one? Or we could try to make a real better fix, based on what you described in FINERACT-855...", "author": "vorburger", "createdAt": "2020-05-03T10:44:12Z", "path": "fineract-provider/src/integrationTest/java/org/apache/fineract/integrationtests/common/SchedulerJobHelper.java", "diffHunk": "@@ -115,6 +115,9 @@ public void executeJob(String jobName) throws InterruptedException {\n \n                 // Executing Scheduler Job\n                 runSchedulerJob(this.requestSpec, jobId.toString());\n+                \n+                // Need to give the job an opportunity to start - otherwise below might return false as job not yet started\n+                Thread.sleep(15000);", "originalCommit": "2460fc7b92f5810479b0390814fbf0c5a958545c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTExMzcwNQ==", "url": "https://github.com/apache/fineract/pull/807#discussion_r419113705", "bodyText": "Of course - will squash the commits and remove this. Based on the emails, I believe Awasum was going to send a fix to FINERACT-855.", "author": "ptuomola", "createdAt": "2020-05-03T14:46:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4NDM1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEyNTQwNA==", "url": "https://github.com/apache/fineract/pull/807#discussion_r419125404", "bodyText": "@ptuomola, I am looking into it but I cannot seem to replicate the issue locally as when running ./gradlew integrationTest --tests ClientSavingsIntegrationTest \nEverything passes locally. Could it be that our Travis Vm is not powerful enough?\nIf you have time to get this done earlier than me. Do it.\nMy fix for FINERACT-855 involved doing something like this where we are accessing the jobHistoryData...like so:\nAssert.assertEquals(\"Verifying Last Scheduler Job Status\", \"success\", jobHistoryData.get(jobHistoryData.size() == 0 ? jobHistoryData.size() : jobHistoryData.size() - 1).get(\"status\"));\nSo that we stop getting the ArrayOutOfBounceException.\nThat may not be a good solution.", "author": "awasum", "createdAt": "2020-05-03T16:17:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4NDM1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEyODI2Nw==", "url": "https://github.com/apache/fineract/pull/807#discussion_r419128267", "bodyText": "My suggestion would be that we wrap up this PR ASAP by strictly and naively \ud83d\udc7f  following the process outlined on https://github.com/apache/fineract#pull-requests ... @ptuomola just try to get this PR to fully pass the build by raising separate PRs, and then rebasing, for any tests that fail on you here. The \"full\" (proper) solution, whether Thread.sleep(15000) or something else, should IMHO be worked on completely separate from this PR.", "author": "vorburger", "createdAt": "2020-05-03T16:40:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4NDM1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEyODQ2Mw==", "url": "https://github.com/apache/fineract/pull/807#discussion_r419128463", "bodyText": "You are right @vorburger . lets just get his green", "author": "awasum", "createdAt": "2020-05-03T16:42:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4NDM1Mw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "70a81ec689e940dc3b7114a53a4325372c345713", "url": "https://github.com/apache/fineract/commit/70a81ec689e940dc3b7114a53a4325372c345713", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-03T19:13:56Z", "type": "forcePushed"}, {"oid": "4e7108230b34384aaa67db4d8a8edbfb8fa0597c", "url": "https://github.com/apache/fineract/commit/4e7108230b34384aaa67db4d8a8edbfb8fa0597c", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-03T19:35:12Z", "type": "forcePushed"}, {"oid": "b916037316a2ed3977e354866082279ead168189", "url": "https://github.com/apache/fineract/commit/b916037316a2ed3977e354866082279ead168189", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-03T20:04:30Z", "type": "forcePushed"}, {"oid": "46b9d3b97e16a65bd4e50a7a74ab53c5ec634588", "url": "https://github.com/apache/fineract/commit/46b9d3b97e16a65bd4e50a7a74ab53c5ec634588", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-04T07:14:37Z", "type": "forcePushed"}, {"oid": "dc76496f6aaeb15896d1ad4cf89073265f58864d", "url": "https://github.com/apache/fineract/commit/dc76496f6aaeb15896d1ad4cf89073265f58864d", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-04T09:37:42Z", "type": "forcePushed"}, {"oid": "1a9ec367471719dfbb1dd97c844e3197e7fc9935", "url": "https://github.com/apache/fineract/commit/1a9ec367471719dfbb1dd97c844e3197e7fc9935", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-05T18:56:05Z", "type": "forcePushed"}, {"oid": "61e4d0b57708f3f823a26d146d3cbbbb2db45d53", "url": "https://github.com/apache/fineract/commit/61e4d0b57708f3f823a26d146d3cbbbb2db45d53", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-05T19:37:53Z", "type": "commit"}, {"oid": "61e4d0b57708f3f823a26d146d3cbbbb2db45d53", "url": "https://github.com/apache/fineract/commit/61e4d0b57708f3f823a26d146d3cbbbb2db45d53", "message": "FINERACT-730: Fixed dependencies, SSL config and main class etc to get bootRun to work. Migrated from Gradle Tomcat plugin to Cargo plugin to fix integration test", "committedDate": "2020-05-05T19:37:53Z", "type": "forcePushed"}]}