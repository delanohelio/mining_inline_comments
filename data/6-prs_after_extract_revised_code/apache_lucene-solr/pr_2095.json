{"pr_number": 2095, "pr_title": "LUCENE-9618: Do not call IntervalIterator.nextInterval after NO_MORE_DOCS returned", "pr_createdAt": "2020-11-23T18:58:09Z", "pr_url": "https://github.com/apache/lucene-solr/pull/2095", "timeline": [{"oid": "c8ed8a6e5ae69edf83f289e99f1c241035fccd08", "url": "https://github.com/apache/lucene-solr/commit/c8ed8a6e5ae69edf83f289e99f1c241035fccd08", "message": "LUCENE-9618: Do not call IntervalIterator.nextInterval after\nNO_MORE_DOCS is returned", "committedDate": "2020-11-22T18:23:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkyOTc5Ng==", "url": "https://github.com/apache/lucene-solr/pull/2095#discussion_r528929796", "bodyText": "Hmm maybe be more specific than other methods?  E.g. maybe say returned by the query scorer's nextDoc() method?", "author": "mikemccand", "createdAt": "2020-11-23T19:01:33Z", "path": "lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java", "diffHunk": "@@ -82,6 +82,11 @@ public int width() {\n   /**\n    * Advance the iterator to the next interval\n    *\n+   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by other methods", "originalCommit": "c8ed8a6e5ae69edf83f289e99f1c241035fccd08", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6b45f23f760a80da6bd27a3ffef419686390d2e7", "chunk": "diff --git a/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java b/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\nindex 0116ed89c79..d08aba8a3a2 100644\n--- a/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\n+++ b/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\n\n@@ -82,10 +82,11 @@ public abstract class IntervalIterator extends DocIdSetIterator {\n   /**\n    * Advance the iterator to the next interval\n    *\n-   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by other methods\n-   * if that's the case in some existing code, please consider opening an issue\n+   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by {@link DocIdSetIterator#nextDoc()} or\n+   * {@link DocIdSetIterator#advance(int)}.\n+   * If that's the case in some existing code, please consider opening an issue.\n    * However, after {@link IntervalIterator#NO_MORE_INTERVALS} is returned by this method, it might be\n-   * called again\n+   * called again.\n    *\n    * @return the start of the next interval, or {@link IntervalIterator#NO_MORE_INTERVALS} if\n    *         there are no more intervals on the current document\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkzMDA2OQ==", "url": "https://github.com/apache/lucene-solr/pull/2095#discussion_r528930069", "bodyText": "This is a new sentence -- maybe add . at end of previous one and capitlize If?", "author": "mikemccand", "createdAt": "2020-11-23T19:02:02Z", "path": "lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java", "diffHunk": "@@ -82,6 +82,11 @@ public int width() {\n   /**\n    * Advance the iterator to the next interval\n    *\n+   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by other methods\n+   * if that's the case in some existing code, please consider opening an issue", "originalCommit": "c8ed8a6e5ae69edf83f289e99f1c241035fccd08", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6b45f23f760a80da6bd27a3ffef419686390d2e7", "chunk": "diff --git a/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java b/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\nindex 0116ed89c79..d08aba8a3a2 100644\n--- a/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\n+++ b/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\n\n@@ -82,10 +82,11 @@ public abstract class IntervalIterator extends DocIdSetIterator {\n   /**\n    * Advance the iterator to the next interval\n    *\n-   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by other methods\n-   * if that's the case in some existing code, please consider opening an issue\n+   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by {@link DocIdSetIterator#nextDoc()} or\n+   * {@link DocIdSetIterator#advance(int)}.\n+   * If that's the case in some existing code, please consider opening an issue.\n    * However, after {@link IntervalIterator#NO_MORE_INTERVALS} is returned by this method, it might be\n-   * called again\n+   * called again.\n    *\n    * @return the start of the next interval, or {@link IntervalIterator#NO_MORE_INTERVALS} if\n    *         there are no more intervals on the current document\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkzMDE5MQ==", "url": "https://github.com/apache/lucene-solr/pull/2095#discussion_r528930191", "bodyText": "Period at end of this sentence?", "author": "mikemccand", "createdAt": "2020-11-23T19:02:13Z", "path": "lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java", "diffHunk": "@@ -82,6 +82,11 @@ public int width() {\n   /**\n    * Advance the iterator to the next interval\n    *\n+   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by other methods\n+   * if that's the case in some existing code, please consider opening an issue\n+   * However, after {@link IntervalIterator#NO_MORE_INTERVALS} is returned by this method, it might be\n+   * called again", "originalCommit": "c8ed8a6e5ae69edf83f289e99f1c241035fccd08", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6b45f23f760a80da6bd27a3ffef419686390d2e7", "chunk": "diff --git a/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java b/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\nindex 0116ed89c79..d08aba8a3a2 100644\n--- a/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\n+++ b/lucene/queries/src/java/org/apache/lucene/queries/intervals/IntervalIterator.java\n\n@@ -82,10 +82,11 @@ public abstract class IntervalIterator extends DocIdSetIterator {\n   /**\n    * Advance the iterator to the next interval\n    *\n-   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by other methods\n-   * if that's the case in some existing code, please consider opening an issue\n+   * Should not be called after {@link DocIdSetIterator#NO_MORE_DOCS} is returned by {@link DocIdSetIterator#nextDoc()} or\n+   * {@link DocIdSetIterator#advance(int)}.\n+   * If that's the case in some existing code, please consider opening an issue.\n    * However, after {@link IntervalIterator#NO_MORE_INTERVALS} is returned by this method, it might be\n-   * called again\n+   * called again.\n    *\n    * @return the start of the next interval, or {@link IntervalIterator#NO_MORE_INTERVALS} if\n    *         there are no more intervals on the current document\n"}}, {"oid": "6b45f23f760a80da6bd27a3ffef419686390d2e7", "url": "https://github.com/apache/lucene-solr/commit/6b45f23f760a80da6bd27a3ffef419686390d2e7", "message": "Refine javadoc wording", "committedDate": "2020-11-25T18:17:54Z", "type": "commit"}, {"oid": "3a6607f2e6a97904cef92ea1de58ae3302ea7ed9", "url": "https://github.com/apache/lucene-solr/commit/3a6607f2e6a97904cef92ea1de58ae3302ea7ed9", "message": "Edit CHANGE.txt entry", "committedDate": "2020-12-02T00:52:46Z", "type": "commit"}, {"oid": "3a6607f2e6a97904cef92ea1de58ae3302ea7ed9", "url": "https://github.com/apache/lucene-solr/commit/3a6607f2e6a97904cef92ea1de58ae3302ea7ed9", "message": "Edit CHANGE.txt entry", "committedDate": "2020-12-02T00:52:46Z", "type": "forcePushed"}]}