{"pr_number": 1896, "pr_title": "SOLR-14880: Support coreRootDirectory setting when create new cores from command line, in standalone mode", "pr_createdAt": "2020-09-20T03:54:04Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1896", "timeline": [{"oid": "49abe2fa07a23b732a4325a8b95a79c066e06dcf", "url": "https://github.com/apache/lucene-solr/commit/49abe2fa07a23b732a4325a8b95a79c066e06dcf", "message": "Use solr_core_root if given", "committedDate": "2020-09-20T03:33:54Z", "type": "commit"}, {"oid": "0ac49c45e8dc664f6041a2bea11edb6d964656a2", "url": "https://github.com/apache/lucene-solr/commit/0ac49c45e8dc664f6041a2bea11edb6d964656a2", "message": "Add CHANGES record", "committedDate": "2020-09-20T03:38:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjIzODM5OA==", "url": "https://github.com/apache/lucene-solr/pull/1896#discussion_r492238398", "bodyText": "Can you help my understand where exactly solr_core_root is populated?  I don't see it in SystemInfoHandler which I presume populates the response for this.", "author": "dsmiley", "createdAt": "2020-09-21T17:45:04Z", "path": "solr/core/src/java/org/apache/solr/util/SolrCLI.java", "diffHunk": "@@ -1675,9 +1675,9 @@ protected void runImpl(CommandLine cli) throws Exception {\n         }\n \n         // convert raw JSON into user-friendly output\n-        solrHome = (String)systemInfo.get(\"solr_home\");\n-        if (solrHome == null)\n-          solrHome = configsetsDir.getParentFile().getAbsolutePath();\n+        coreRootDirectory = (String)systemInfo.get(\"solr_core_root\");", "originalCommit": "0ac49c45e8dc664f6041a2bea11edb6d964656a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI0MTgxNA==", "url": "https://github.com/apache/lucene-solr/pull/1896#discussion_r492241814", "bodyText": "It also had to be introduced, check SOLR-14878", "author": "arafalov", "createdAt": "2020-09-21T17:51:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjIzODM5OA=="}], "type": "inlineReview", "revised_code": {"commit": "d405e76304dfcceaab3c58dd5c6131c850003a6b", "chunk": "diff --git a/solr/core/src/java/org/apache/solr/util/SolrCLI.java b/solr/core/src/java/org/apache/solr/util/SolrCLI.java\nindex 368b9dbbea3..ef7a7e8fc0f 100755\n--- a/solr/core/src/java/org/apache/solr/util/SolrCLI.java\n+++ b/solr/core/src/java/org/apache/solr/util/SolrCLI.java\n\n@@ -1675,7 +1675,9 @@ public class SolrCLI implements CLIO {\n         }\n \n         // convert raw JSON into user-friendly output\n-        coreRootDirectory = (String)systemInfo.get(\"solr_core_root\");\n+        coreRootDirectory = (String)systemInfo.get(\"core_root\");\n+\n+        //Fall back to solr_home, in case we are running against older server that does not return the property\n         if (coreRootDirectory == null)  coreRootDirectory = (String)systemInfo.get(\"solr_home\");\n         if (coreRootDirectory == null)  coreRootDirectory = configsetsDir.getParentFile().getAbsolutePath();\n \n"}}, {"oid": "457ae0d0a4b7775fcf5da7a5fc84f54309ab50aa", "url": "https://github.com/apache/lucene-solr/commit/457ae0d0a4b7775fcf5da7a5fc84f54309ab50aa", "message": "Merge branch 'master' into solr-14880-create_core", "committedDate": "2020-09-22T02:59:28Z", "type": "commit"}, {"oid": "d405e76304dfcceaab3c58dd5c6131c850003a6b", "url": "https://github.com/apache/lucene-solr/commit/d405e76304dfcceaab3c58dd5c6131c850003a6b", "message": "Update to match latest code with shorter name", "committedDate": "2020-09-22T03:08:46Z", "type": "commit"}]}