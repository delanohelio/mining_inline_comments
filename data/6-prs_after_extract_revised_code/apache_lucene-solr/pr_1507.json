{"pr_number": 1507, "pr_title": "SOLR-14471: properly apply base replica ordering to last-place shards\u2026", "pr_createdAt": "2020-05-11T19:05:00Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1507", "timeline": [{"oid": "3d3dc92c1c743ada1bc4b1cce8493511e38b4c41", "url": "https://github.com/apache/lucene-solr/commit/3d3dc92c1c743ada1bc4b1cce8493511e38b4c41", "message": "SOLR-14471: properly apply base replica ordering to last-place shards.preference matches", "committedDate": "2020-05-11T19:05:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg2NDc5Ng==", "url": "https://github.com/apache/lucene-solr/pull/1507#discussion_r424864796", "bodyText": "node5?", "author": "tflobbe", "createdAt": "2020-05-14T04:31:01Z", "path": "solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java", "diffHunk": "@@ -88,6 +88,19 @@ public void replicaTypeAndReplicaBase() {\n         )\n     );\n \n+    // Add a PULL replica so that there's a tie for \"last place\"\n+    replicas.add(\n+        new Replica(\n+            \"node4\",", "originalCommit": "3d3dc92c1c743ada1bc4b1cce8493511e38b4c41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA5OTc0MQ==", "url": "https://github.com/apache/lucene-solr/pull/1507#discussion_r425099741", "bodyText": "Ah yes; fixed, thanks for catching that!", "author": "magibney", "createdAt": "2020-05-14T12:32:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg2NDc5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "970de1332506c8ab715cc203be0ecd5471f5547b", "chunk": "diff --git a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java\nindex b09c6480a80..c0ebad379d6 100644\n--- a/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java\n+++ b/solr/solrj/src/test/org/apache/solr/client/solrj/routing/RequestReplicaListTransformerGeneratorTest.java\n\n@@ -91,7 +91,7 @@ public class RequestReplicaListTransformerGeneratorTest extends SolrTestCaseJ4 {\n     // Add a PULL replica so that there's a tie for \"last place\"\n     replicas.add(\n         new Replica(\n-            \"node4\",\n+            \"node5\",\n             map(\n                 ZkStateReader.BASE_URL_PROP, \"http://host2_2:8983/solr\",\n                 ZkStateReader.NODE_NAME_PROP, \"node5\",\n"}}, {"oid": "970de1332506c8ab715cc203be0ecd5471f5547b", "url": "https://github.com/apache/lucene-solr/commit/970de1332506c8ab715cc203be0ecd5471f5547b", "message": "forgot to increment node id", "committedDate": "2020-05-14T12:34:24Z", "type": "commit"}]}