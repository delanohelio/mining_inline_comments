{"pr_number": 847, "pr_title": "Add Latency Metrics to Performance Tests", "pr_createdAt": "2020-06-29T02:45:35Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/847", "timeline": [{"oid": "8927f1620aa0b938758e6db574c74c735458b145", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/8927f1620aa0b938758e6db574c74c735458b145", "message": "Add Latency stats to aceptance and performance subscribe logs\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-06-28T03:22:58Z", "type": "commit"}, {"oid": "4c5978c49b907e8860377458c7e231315078bc9f", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/4c5978c49b907e8860377458c7e231315078bc9f", "message": "Updated to print total stats and k8s job\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-06-28T22:05:40Z", "type": "commit"}, {"oid": "0e0f703f6d774ede19c15f25ad35ad70836bc469", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/0e0f703f6d774ede19c15f25ad35ad70836bc469", "message": "Update acceptance tests to use first 8 bytes of message for transaction publish time\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-06-29T23:24:47Z", "type": "commit"}, {"oid": "b70214d19b2e0dd95225710e75d99d4f3734ff1d", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b70214d19b2e0dd95225710e75d99d4f3734ff1d", "message": "Cleaned up a bit\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-07-01T14:25:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA1NzE2Mg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/847#discussion_r449057162", "bodyText": "Longs.toByteArray(). But more importantly, why are we converting the long to bytes and then to string? What's wrong with instantRef.toEpochMilli().toString()?", "author": "steven-sheehy", "createdAt": "2020-07-02T14:48:56Z", "path": "hedera-mirror-test/src/test/java/com/hedera/mirror/test/e2e/acceptance/client/TopicClient.java", "diffHunk": "@@ -120,10 +121,12 @@ public TransactionReceipt deleteTopic(ConsensusTopicId topicId) throws HederaSta\n                                                            int numMessages, boolean verify) throws HederaStatusException\n             , InterruptedException {\n         log.debug(\"Publishing {} message(s) to topicId : {}.\", numMessages, topicId);\n-        Instant refInstant = Instant.now();\n         List<TransactionReceipt> transactionReceiptList = new ArrayList<>();\n         for (int i = 0; i < numMessages; i++) {\n-            String message = baseMessage + \"_\" + refInstant + \"_\" + i + 1;\n+            Instant instantRef = Instant.now();\n+            byte[] byteArray = ByteBuffer.allocate(8).putLong(instantRef.toEpochMilli()).array();", "originalCommit": "b70214d19b2e0dd95225710e75d99d4f3734ff1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIzMTE3Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/847#discussion_r449231177", "bodyText": "This was to align with the engineering perf tests that put the long timestamp in the first 8 bytes explicitly.\nI can add a comment and check the optimization in a future PR", "author": "Nana-EC", "createdAt": "2020-07-02T19:42:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA1NzE2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI0NjE3OA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/847#discussion_r449246178", "bodyText": "But it's not getting the first 8 bytes of the message, it's taking an Instant's epoch millis and converting it to bytes and then strings.", "author": "steven-sheehy", "createdAt": "2020-07-02T20:18:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA1NzE2Mg=="}], "type": "inlineReview", "revised_code": null}]}