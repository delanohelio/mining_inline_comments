{"pr_number": 1072, "pr_title": "Fix memory leak in performance tests", "pr_createdAt": "2020-09-22T17:22:54Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/1072", "timeline": [{"oid": "b94681741f6275dbbb8bfecd04dd135e4f810f76", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b94681741f6275dbbb8bfecd04dd135e4f810f76", "message": "Fix memory leak in performance tests\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-09-22T17:19:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwOTU4Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1072#discussion_r492909587", "bodyText": "Can we make this configurable? i.e. default to use SummaryStatistics but when desired use DescriptiveStatistics to get the percentiles.\nDoesn't have to be DescriptiveStatistics but something that gives us those numbers when we want to get a run with them.\nMight be important when we want to get stats on long running tests and see how all users are affected.", "author": "Nana-EC", "createdAt": "2020-09-22T17:25:27Z", "path": "hedera-mirror-grpc/src/test/java/com/hedera/mirror/grpc/jmeter/sampler/result/HCSSamplerResult.java", "diffHunk": "@@ -51,12 +51,12 @@\n     private boolean success = true;\n     private boolean historical = true;\n     private boolean calculateLatencies = true;\n-    private DescriptiveStatistics e2eLatencyStats = new DescriptiveStatistics();\n-    private DescriptiveStatistics publishToConsensusLatencyStats = new DescriptiveStatistics();\n-    private DescriptiveStatistics consensusToDeliveryLatencyStats = new DescriptiveStatistics();\n-    private final DescriptiveStatistics e2eLatencyTotalStats = new DescriptiveStatistics();\n-    private final DescriptiveStatistics publishToConsensusLatencyTotalStats = new DescriptiveStatistics();\n-    private final DescriptiveStatistics consensusToDeliveryLatencyTotalStats = new DescriptiveStatistics();\n+    private SummaryStatistics e2eLatencyStats = new SummaryStatistics();", "originalCommit": "b94681741f6275dbbb8bfecd04dd135e4f810f76", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkxNTA0Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1072#discussion_r492915043", "bodyText": "Nope, they have different APIs. You can't get median from SummaryStatistics, so what's the point of storing all values otherwise? This is really not worth the effort to add if/else to all the log statements.", "author": "steven-sheehy", "createdAt": "2020-09-22T17:34:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwOTU4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkxODQ0MQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1072#discussion_r492918441", "bodyText": "Understandable, maybe we should open a ticket to revisit more memory optimal stats.\nI don't like to rely on averages since they can hide issues caused by outliers and by definition aren't what most people experience", "author": "Nana-EC", "createdAt": "2020-09-22T17:40:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjkwOTU4Nw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "41f40b7e25f1aa28ebb6a5243a23a2771c69f003", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/41f40b7e25f1aa28ebb6a5243a23a2771c69f003", "message": "Fix build\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-09-22T17:32:39Z", "type": "commit"}]}