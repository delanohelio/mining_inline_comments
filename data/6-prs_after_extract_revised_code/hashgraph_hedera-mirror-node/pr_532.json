{"pr_number": 532, "pr_title": "Acceptance test improvements to support subscribe and publish only scenarios", "pr_createdAt": "2020-02-13T20:32:32Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/532", "timeline": [{"oid": "da52b5e6d62075c25884e75406504953e0f22d2d", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/da52b5e6d62075c25884e75406504953e0f22d2d", "message": "Added support for publishonly and subscribe only\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-02-13T17:41:47Z", "type": "commit"}, {"oid": "9bca6b060aab0307280276f887bab9eb5c64b2a2", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9bca6b060aab0307280276f887bab9eb5c64b2a2", "message": "Fix subscribe message count\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-02-13T18:09:09Z", "type": "commit"}, {"oid": "dd5ce11a8c5bbac9df5130c41b34cbf2eb9dd1a3", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/dd5ce11a8c5bbac9df5130c41b34cbf2eb9dd1a3", "message": "Tagged Acceptance tests scenarios and verified runs against mainnet\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-02-13T20:16:41Z", "type": "commit"}, {"oid": "ee4665fd4becaf9033bfbff6090907e8a42ee2e8", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/ee4665fd4becaf9033bfbff6090907e8a42ee2e8", "message": "Updated readme\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-02-13T20:26:09Z", "type": "commit"}, {"oid": "04a23bf502be3e9376c8746a4b501c341a2c4245", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/04a23bf502be3e9376c8746a4b501c341a2c4245", "message": "Fixed issue with getting start time on publish only\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-02-13T23:04:40Z", "type": "commit"}, {"oid": "6d006bf1334268e0cef68793b7b7ae79351832f5", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/6d006bf1334268e0cef68793b7b7ae79351832f5", "message": "Check for null publishedTransactionReceipts when not verifying published messages\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-02-13T23:13:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3OTYyMQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/532#discussion_r379579621", "bodyText": "nit I publish and verify {int} messages sent to differentiate from the receive of X messages", "author": "steven-sheehy", "createdAt": "2020-02-14T18:28:14Z", "path": "hedera-mirror-test/src/test/java/com/hedera/mirror/test/e2e/acceptance/steps/TopicFeature.java", "diffHunk": "@@ -169,12 +189,23 @@ public void verifySubscriptionChannelConnection() throws Throwable {\n         assertNotNull(subscriptionResponse);\n     }\n \n-    @When(\"I publish {int} messages\")\n-    public void verifyTopicMessagePublish(int messageCount) throws InterruptedException, HederaStatusException {\n-        numMessages = messageCount;\n-        List<TransactionReceipt> transactionReceipts = topicClient\n-                .publishMessagesToTopic(consensusTopicId, \"New message\", submitKey, messageCount);\n-        assertEquals(messageCount, transactionReceipts.size());\n+    @When(\"I publish {int} batches of {int} messages every {long} milliseconds\")\n+    public void publishTopicMessages(int numGroups, int messageCount, long milliSleep) throws InterruptedException,\n+            HederaStatusException {\n+        for (int i = 0; i < numGroups; i++) {\n+            topicClient.publishMessagesToTopic(consensusTopicId, \"New message\", submitKey, messageCount, false);\n+            Thread.sleep(milliSleep, 0);\n+        }\n+\n+        messageSubscribeCount = numGroups * messageCount;\n+    }\n+\n+    @When(\"I publish and verify {int} messages\")", "originalCommit": "6d006bf1334268e0cef68793b7b7ae79351832f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY3NjkyNA==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/532#discussion_r379676924", "bodyText": "Will update in next PR.", "author": "Nana-EC", "createdAt": "2020-02-14T22:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3OTYyMQ=="}], "type": "inlineReview", "revised_code": null}]}