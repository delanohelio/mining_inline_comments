{"pr_number": 6788, "pr_title": "Fix cleanup Field formatters not working when enabled", "pr_createdAt": "2020-08-24T18:20:34Z", "pr_url": "https://github.com/JabRef/jabref/pull/6788", "timeline": [{"oid": "4ac18dd74907274b440a2004d17f08cd3e763836", "url": "https://github.com/JabRef/jabref/commit/4ac18dd74907274b440a2004d17f08cd3e763836", "message": "Fix cleanup Field formatters not working when enabled\n\nFixes #6787", "committedDate": "2020-08-24T18:19:23Z", "type": "commit"}, {"oid": "d300612074102bc0108d466f6e6097ed6c843bd4", "url": "https://github.com/JabRef/jabref/commit/d300612074102bc0108d466f6e6097ed6c843bd4", "message": "Add not to cleanupsDisableProperty instead of removing the negation", "committedDate": "2020-08-24T18:57:56Z", "type": "commit"}, {"oid": "af79732c01953e288b8a082ffcd628885c8e7a16", "url": "https://github.com/JabRef/jabref/commit/af79732c01953e288b8a082ffcd628885c8e7a16", "message": "Update CleanupPresetPanel.java\n\ncheckstyle", "committedDate": "2020-08-25T06:02:19Z", "type": "commit"}, {"oid": "b93388d4e36bfa8a1557d4061fe580adfdf7bbec", "url": "https://github.com/JabRef/jabref/commit/b93388d4e36bfa8a1557d4061fe580adfdf7bbec", "message": "Refactored to clean solution", "committedDate": "2020-08-26T19:32:51Z", "type": "commit"}, {"oid": "433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152", "url": "https://github.com/JabRef/jabref/commit/433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152", "message": "Removed unused import", "committedDate": "2020-08-26T19:34:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU5NDk4NA==", "url": "https://github.com/JabRef/jabref/pull/6788#discussion_r477594984", "bodyText": "Please replace this custom binding with https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/util/BindingsHelper.java#L62\nThe manual listeners may result in a race condition, where the update of cleanupsDisableProperty results in an update of cleanupsEnabled which then again updates cleanupsDisableProperty  etc. To prevent this, a locked update mechanism is used in the above bindBidirection: https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/util/BindingsHelper.java#L227", "author": "tobiasdiez", "createdAt": "2020-08-26T21:17:50Z", "path": "src/main/java/org/jabref/gui/commonfxcontrols/FieldFormatterCleanupsPanel.java", "diffHunk": "@@ -106,7 +106,13 @@ private void setupCombos() {\n     }\n \n     private void setupBindings() {\n-        cleanupsEnabled.selectedProperty().bindBidirectional(cleanupsDisableProperty());\n+        // cannot bindBidirectional, because viewModel.cleanupsDisableProperty().not() provides a read only\n+        // BooleanBinding, but bindBidirectional requires a simple BooleanProperty\n+        cleanupsEnabled.selectedProperty().addListener((observableValue, oldValue, newValue) ->", "originalCommit": "433d0c01e9fc54d0c76b60a0bbf1eeaea6cd9152", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}