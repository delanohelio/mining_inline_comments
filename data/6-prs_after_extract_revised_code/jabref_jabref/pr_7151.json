{"pr_number": 7151, "pr_title": "Fix for issue 6959", "pr_createdAt": "2020-12-03T00:22:01Z", "pr_url": "https://github.com/JabRef/jabref/pull/7151", "timeline": [{"oid": "1290a40dff502909a38c7c2b6b8df4540fd94c92", "url": "https://github.com/JabRef/jabref/commit/1290a40dff502909a38c7c2b6b8df4540fd94c92", "message": "Add needsSharedDatabase to validate if DatabaseLocation is shared", "committedDate": "2020-12-02T21:30:09Z", "type": "commit"}, {"oid": "139115ba788eddf36a36fed1064be8b4337dc166", "url": "https://github.com/JabRef/jabref/commit/139115ba788eddf36a36fed1064be8b4337dc166", "message": "Update CHANGELOG.md with fix for pullingChangesFromSharedDb exception", "committedDate": "2020-12-03T00:05:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MTc4MA==", "url": "https://github.com/JabRef/jabref/pull/7151#discussion_r535191780", "bodyText": "Please use Easybind.map(stateManager.activeDatabaseProperty(), ...) instead of createBooleanBinding. It's a bit more readable and shorter.", "author": "tobiasdiez", "createdAt": "2020-12-03T12:35:37Z", "path": "src/main/java/org/jabref/gui/actions/ActionHelper.java", "diffHunk": "@@ -26,6 +27,13 @@ public static BooleanExpression needsDatabase(StateManager stateManager) {\n         return stateManager.activeDatabaseProperty().isPresent();\n     }\n \n+    public static BooleanExpression needsSharedDatabase(StateManager stateManager){\n+        var binding = Bindings.createBooleanBinding(() ->\n+                        stateManager.activeDatabaseProperty().getValue().filter(context -> context.getLocation() == DatabaseLocation.SHARED).isPresent(),", "originalCommit": "139115ba788eddf36a36fed1064be8b4337dc166", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b6f88e045b533bcb81159656f0afa4bf952d3851", "chunk": "diff --git a/src/main/java/org/jabref/gui/actions/ActionHelper.java b/src/main/java/org/jabref/gui/actions/ActionHelper.java\nindex 08d09f270f..7bbccc731b 100644\n--- a/src/main/java/org/jabref/gui/actions/ActionHelper.java\n+++ b/src/main/java/org/jabref/gui/actions/ActionHelper.java\n\n@@ -27,10 +28,9 @@ public class ActionHelper {\n         return stateManager.activeDatabaseProperty().isPresent();\n     }\n \n-    public static BooleanExpression needsSharedDatabase(StateManager stateManager){\n-        var binding = Bindings.createBooleanBinding(() ->\n-                        stateManager.activeDatabaseProperty().getValue().filter(context -> context.getLocation() == DatabaseLocation.SHARED).isPresent(),\n-                stateManager.activeDatabaseProperty());\n+    public static BooleanExpression needsSharedDatabase(StateManager stateManager) {\n+        EasyBinding<Boolean> binding = EasyBind.map(stateManager.activeDatabaseProperty(), context ->\n+                context.filter( c -> c.getLocation() == DatabaseLocation.SHARED).isPresent());\n         return BooleanExpression.booleanExpression(binding);\n     }\n \n"}}, {"oid": "b6f88e045b533bcb81159656f0afa4bf952d3851", "url": "https://github.com/JabRef/jabref/commit/b6f88e045b533bcb81159656f0afa4bf952d3851", "message": "Refactor needsSharedDatabase to use EasyBind.map", "committedDate": "2020-12-03T19:10:12Z", "type": "commit"}, {"oid": "394762ee1c7cb47d026d5db6dde8b966ce31bd6c", "url": "https://github.com/JabRef/jabref/commit/394762ee1c7cb47d026d5db6dde8b966ce31bd6c", "message": "Change Boolean Expression for validation to simplify", "committedDate": "2020-12-03T19:13:04Z", "type": "commit"}, {"oid": "452ce01df1dfc05b3f597c14297a1dcbc3f1b8ab", "url": "https://github.com/JabRef/jabref/commit/452ce01df1dfc05b3f597c14297a1dcbc3f1b8ab", "message": "Remove whitespace to meet checkstyle criteria", "committedDate": "2020-12-03T20:01:04Z", "type": "commit"}, {"oid": "5dfa820e29ed62e949beeada7532b23f0508f43b", "url": "https://github.com/JabRef/jabref/commit/5dfa820e29ed62e949beeada7532b23f0508f43b", "message": "Refactor import order to meet checkstyle criteria", "committedDate": "2020-12-03T21:07:30Z", "type": "commit"}, {"oid": "bde9d557c75ecb85bc2df739a36b1edf02792bc4", "url": "https://github.com/JabRef/jabref/commit/bde9d557c75ecb85bc2df739a36b1edf02792bc4", "message": "Add blankline after heading to meet checkstyle criteria", "committedDate": "2020-12-03T21:14:54Z", "type": "commit"}]}