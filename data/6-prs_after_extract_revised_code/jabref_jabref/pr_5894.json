{"pr_number": 5894, "pr_title": "Fixes problems with managing external file types (issue 5846)", "pr_createdAt": "2020-01-29T14:55:04Z", "pr_url": "https://github.com/JabRef/jabref/pull/5894", "timeline": [{"oid": "cb497fbed11afeabdec400cbcfc99a3b64f32520", "url": "https://github.com/JabRef/jabref/commit/cb497fbed11afeabdec400cbcfc99a3b64f32520", "message": "- edit/customize external file types: radio button for \"default program\"/\"custom program\" fixed: it now gets updated properly (binding added);\n- \"Edit file type dialog\": correct value get loaded now for the input field \"Name\"\n- when storing an updated file type: no differentiation will be made any more whether program runs on Windows or somewhere else\n- quick fix for pending issue: editing an ExternalFileType works now (still room for improvement); visual bug concerning \"lazy\" update of table could be a Linux issue, since other tables are affected as well; so basically - except the \"lazy\" update thing -- everything works concerning external file types", "committedDate": "2020-01-30T22:32:32Z", "type": "commit"}, {"oid": "cb497fbed11afeabdec400cbcfc99a3b64f32520", "url": "https://github.com/JabRef/jabref/commit/cb497fbed11afeabdec400cbcfc99a3b64f32520", "message": "- edit/customize external file types: radio button for \"default program\"/\"custom program\" fixed: it now gets updated properly (binding added);\n- \"Edit file type dialog\": correct value get loaded now for the input field \"Name\"\n- when storing an updated file type: no differentiation will be made any more whether program runs on Windows or somewhere else\n- quick fix for pending issue: editing an ExternalFileType works now (still room for improvement); visual bug concerning \"lazy\" update of table could be a Linux issue, since other tables are affected as well; so basically - except the \"lazy\" update thing -- everything works concerning external file types", "committedDate": "2020-01-30T22:32:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0MDU1OA==", "url": "https://github.com/JabRef/jabref/pull/5894#discussion_r373440558", "bodyText": "Custom application selected is always the opposite of default application, right?\nI guess the problem is that the toggle group is defined locally\n\n  \n    \n      jabref/src/main/java/org/jabref/gui/externalfiletype/EditExternalFileTypeEntryDialog.fxml\n    \n    \n         Line 38\n      in\n      d0393b5\n    \n    \n    \n    \n\n        \n          \n           <ToggleGroup fx:id=\"applicationToggleGroup\" /> \n        \n    \n  \n\n\nand not globally as in\n\n  \n    \n      jabref/src/main/java/org/jabref/gui/preferences/EntryEditorTab.fxml\n    \n    \n        Lines 14 to 17\n      in\n      d0393b5\n    \n    \n    \n    \n\n        \n          \n           <fx:define> \n        \n\n        \n          \n               <ToggleGroup fx:id=\"nameFormat\"/> \n        \n\n        \n          \n               <ToggleGroup fx:id=\"firstNames\"/> \n        \n\n        \n          \n           </fx:define> \n        \n    \n  \n\n\nIf this does not work, then you can also try\ncustomApplication.selectedProperty().bind(viewModel.defaultApplicationSelectedProperty().not());", "author": "tobiasdiez", "createdAt": "2020-01-31T11:43:15Z", "path": "src/main/java/org/jabref/gui/externalfiletype/EditExternalFileTypeEntryDialog.java", "diffHunk": "@@ -62,6 +62,7 @@ public void initialize() {\n         icon.setGraphic(viewModel.getIcon());\n \n         defaultApplication.selectedProperty().bindBidirectional(viewModel.defaultApplicationSelectedProperty());\n+        customApplication.selectedProperty().bindBidirectional(viewModel.customApplicationSelectedProperty());", "originalCommit": "cb497fbed11afeabdec400cbcfc99a3b64f32520", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcyOTUzNg==", "url": "https://github.com/JabRef/jabref/pull/5894#discussion_r373729536", "bodyText": "Yes, the radio button group should toggle and only one radio button should be active. First I tried customApplication.selectedProperty().bindBidirectional(defaultApplicationSelectedProperty().not()); which is of course not possible. On the other hand, I needed a bidirectional binding, because the radio button can be changed from both directions (program or user), thus I implemented it this way. (Which works.)\nNow I have tried your suggestion with customApplication.selectedProperty().bind(viewModel.defaultApplicationSelectedProperty().not()); (so a onedirectional binding) out of curiosity, but, as expected, issues resulted. In this case, when I try to switch to the \"custom\" radio button, then an exception is thrown, stating java.lang.RuntimeException: RadioButton.selected : A bound value cannot be set., since now the value can only be set by the program but not by the user.\nIn the end, I looked how it was done in\n <fx:define> \n     <ToggleGroup fx:id=\"nameFormat\"/> \n     <ToggleGroup fx:id=\"firstNames\"/> \n </fx:define> \n\nHere, also a bidirectional mapping for all radio buttons gets declared:\n    autoCompleteFirstLast.selectedProperty().bindBidirectional(viewModel.autoCompleteFirstLastProperty());\n    autoCompleteLastFirst.selectedProperty().bindBidirectional(viewModel.autoCompleteLastFirstProperty());\n    autoCompleteBoth.selectedProperty().bindBidirectional(viewModel.autoCompleteBothProperty());\n\nBut only the true value is getting set, which is of course sufficient:\n    if (autoCompletePreferences.getOnlyCompleteFirstLast()) {\n        autoCompleteFirstLastProperty.setValue(true);\n    } else if (autoCompletePreferences.getOnlyCompleteLastFirst()) {\n        autoCompleteLastFirstProperty.setValue(true);\n    } else {\n        autoCompleteBothProperty.setValue(true);\n    }\n\nAnd so did I now.", "author": "systemoperator", "createdAt": "2020-01-31T23:30:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0MDU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3MjE3Ng==", "url": "https://github.com/JabRef/jabref/pull/5894#discussion_r373772176", "bodyText": "Radio button in a toggle group dont support bidirectional binding.\nI stumbled across this problem already.\nYou always need to work around that.\nJust look how it's done in the settings dialog", "author": "Siedlerchr", "createdAt": "2020-02-01T10:22:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0MDU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3MjQ0MA==", "url": "https://github.com/JabRef/jabref/pull/5894#discussion_r373772440", "bodyText": "I made it as described above and it is coded this way in the settings dialogue as well (see above) and it works. Is this ok now?", "author": "systemoperator", "createdAt": "2020-02-01T10:28:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0MDU1OA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0MTM0Mw==", "url": "https://github.com/JabRef/jabref/pull/5894#discussion_r373441343", "bodyText": "If it does not work, then you can delete this indeed.", "author": "tobiasdiez", "createdAt": "2020-01-31T11:45:37Z", "path": "src/main/java/org/jabref/gui/externalfiletype/CustomizeExternalFileTypesDialog.java", "diffHunk": "@@ -40,6 +40,7 @@ public CustomizeExternalFileTypesDialog() {\n         this.setResultConverter(button -> {\n             if (button == ButtonType.OK) {\n                 viewModel.storeSettings();\n+                fileTypesTable.refresh();", "originalCommit": "cb497fbed11afeabdec400cbcfc99a3b64f32520", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczMzQzMQ==", "url": "https://github.com/JabRef/jabref/pull/5894#discussion_r373733431", "bodyText": "done", "author": "systemoperator", "createdAt": "2020-01-31T23:51:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ0MTM0Mw=="}], "type": "inlineReview", "revised_code": {"commit": "25285b9af2026f184ed4737a23aaf3c1f6db16cc", "chunk": "diff --git a/src/main/java/org/jabref/gui/externalfiletype/CustomizeExternalFileTypesDialog.java b/src/main/java/org/jabref/gui/externalfiletype/CustomizeExternalFileTypesDialog.java\nindex 31a888bf1..e7a2d1492 100644\n--- a/src/main/java/org/jabref/gui/externalfiletype/CustomizeExternalFileTypesDialog.java\n+++ b/src/main/java/org/jabref/gui/externalfiletype/CustomizeExternalFileTypesDialog.java\n\n@@ -40,7 +40,6 @@ public class CustomizeExternalFileTypesDialog extends BaseDialog<Void> {\n         this.setResultConverter(button -> {\n             if (button == ButtonType.OK) {\n                 viewModel.storeSettings();\n-                fileTypesTable.refresh();\n             }\n             return null;\n         });\n"}}, {"oid": "25285b9af2026f184ed4737a23aaf3c1f6db16cc", "url": "https://github.com/JabRef/jabref/commit/25285b9af2026f184ed4737a23aaf3c1f6db16cc", "message": "cleanup + changelog", "committedDate": "2020-01-31T23:47:27Z", "type": "commit"}, {"oid": "8dc7d1ca58283b0bbf1d8586cc671bdc2bf35200", "url": "https://github.com/JabRef/jabref/commit/8dc7d1ca58283b0bbf1d8586cc671bdc2bf35200", "message": "revert authors", "committedDate": "2020-02-01T23:39:28Z", "type": "commit"}]}