{"pr_number": 10445, "pr_title": "fixes for receipt&issue", "pr_createdAt": "2020-12-15T14:26:52Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/10445", "timeline": [{"oid": "a13098c5ec6d0b01a84615471af7c6553c09fa14", "url": "https://github.com/metasfresh/metasfresh/commit/a13098c5ec6d0b01a84615471af7c6553c09fa14", "message": "fixes for receipt&issue; also:\n\n* improve MD_Candidate type naming https://github.com/metasfresh/metasfresh/issues/10327\n* fix the processing of M_Inventory https://github.com/metasfresh/metasfresh/issues/10422", "committedDate": "2020-12-14T07:50:55Z", "type": "commit"}, {"oid": "2f5c9c08cc7c5c1475a1c50f377464a0eca6c452", "url": "https://github.com/metasfresh/metasfresh/commit/2f5c9c08cc7c5c1475a1c50f377464a0eca6c452", "message": "Merge remote-tracking branch 'origin/master' into gh10327_receipt_and_issue", "committedDate": "2020-12-14T08:51:47Z", "type": "commit"}, {"oid": "ba5d705ffb23f3e5f1c5ab7a94a0528de4acf2e1", "url": "https://github.com/metasfresh/metasfresh/commit/ba5d705ffb23f3e5f1c5ab7a94a0528de4acf2e1", "message": "Merge branch 'master' into gh10327_receipt_and_issue", "committedDate": "2020-12-15T12:39:16Z", "type": "commit"}, {"oid": "10ff18b71e162d418b225de00550163fb6000998", "url": "https://github.com/metasfresh/metasfresh/commit/10ff18b71e162d418b225de00550163fb6000998", "message": "don't fail if WarrantyStartDate attribute is inactive\n\nhttps://github.com/metasfresh/metasfresh/issues/10389", "committedDate": "2020-12-15T12:56:53Z", "type": "commit"}, {"oid": "75cf8647e4f1089ac97159a42aaa02a170deb7f7", "url": "https://github.com/metasfresh/metasfresh/commit/75cf8647e4f1089ac97159a42aaa02a170deb7f7", "message": "fix: RepositoryCommons.mkQueryBuilder ignored BusinessCase", "committedDate": "2020-12-15T13:12:08Z", "type": "commit"}, {"oid": "d6a5cdf48da436e468ca1dee205ac84aab304f35", "url": "https://github.com/metasfresh/metasfresh/commit/d6a5cdf48da436e468ca1dee205ac84aab304f35", "message": "fix and simplify qty-fields in material dispo\n\n#10327", "committedDate": "2020-12-15T14:13:56Z", "type": "commit"}, {"oid": "cccd9fa82bf99ed76f6acaced2f966de14121064", "url": "https://github.com/metasfresh/metasfresh/commit/cccd9fa82bf99ed76f6acaced2f966de14121064", "message": "Merge remote-tracking branch 'origin/gh10327_receipt_and_issue' into gh10327_receipt_and_issue", "committedDate": "2020-12-15T14:14:14Z", "type": "commit"}, {"oid": "d2a34a3e7bfd57f2161966c7dcf7e5929f96830a", "url": "https://github.com/metasfresh/metasfresh/commit/d2a34a3e7bfd57f2161966c7dcf7e5929f96830a", "message": "fix and simplify qty-fields in material dispo\n\n#10327", "committedDate": "2020-12-15T14:19:27Z", "type": "commit"}, {"oid": "5413356f2e5e073820a67314c66fb6f120e613d4", "url": "https://github.com/metasfresh/metasfresh/commit/5413356f2e5e073820a67314c66fb6f120e613d4", "message": "Delete old swing classes (#10432)\n\n* remote de.metas.handlingunits.client project\r\n\r\n* remote de.metas.handlingunits.client project\r\n\r\n* removed swing terminal UI", "committedDate": "2020-12-15T14:20:18Z", "type": "commit"}, {"oid": "c56e84f4180b7bfdd539b51b60679f27b8c5e26d", "url": "https://github.com/metasfresh/metasfresh/commit/c56e84f4180b7bfdd539b51b60679f27b8c5e26d", "message": "Add property skipIfIndirectlyCalled to annotation CalloutMethod (#10433)\n\nand used it by setting \"manualPrice\" to Y only if user manually edits priceEntered", "committedDate": "2020-12-15T14:20:19Z", "type": "commit"}, {"oid": "2b59c2aa5ae17f4b548b264a53b933a366d86321", "url": "https://github.com/metasfresh/metasfresh/commit/2b59c2aa5ae17f4b548b264a53b933a366d86321", "message": "Adapts to fix the patching on hitting the Done button (#10435)\n\nCo-authored-by: Petrica Nanca <petrica.nanca@metasfresh.com>", "committedDate": "2020-12-15T14:20:19Z", "type": "commit"}, {"oid": "4b88d8e45609972b9c7b10a290d69465f7da4347", "url": "https://github.com/metasfresh/metasfresh/commit/4b88d8e45609972b9c7b10a290d69465f7da4347", "message": "Set the testing port to a higher one to avoid collitions (#10437)\n\nCo-authored-by: Petrica Nanca <petrica.nanca@metasfresh.com>", "committedDate": "2020-12-15T14:20:19Z", "type": "commit"}, {"oid": "f16fa877f79e2a00505b836a133ad3cdb413cd26", "url": "https://github.com/metasfresh/metasfresh/commit/f16fa877f79e2a00505b836a133ad3cdb413cd26", "message": "(#10307) Packings Instructions available in sales order batch entry a\u2026 (#10442)\n\n* (#10307) Packings Instructions available in sales order batch entry although not in pricelist\r\nIncrease Ad_Val_RULE.code field size\r\nChange Validation rule for Packing Instruction\r\n\r\n* (#10307) Packings Instructions available in sales order batch entry although not in pricelist\r\nChange Ad_Val_RULE.code\r\n\r\nhttps://github.com/metasfresh/metasfresh/issues/10307\r\nhttps://github.com/metasfresh/sp80/issues/1163", "committedDate": "2020-12-15T14:20:19Z", "type": "commit"}, {"oid": "8ff0c2e69bcb82a42087a99ffbd2bfe641ab4793", "url": "https://github.com/metasfresh/metasfresh/commit/8ff0c2e69bcb82a42087a99ffbd2bfe641ab4793", "message": "minor", "committedDate": "2020-12-15T14:20:19Z", "type": "commit"}, {"oid": "cc86e3ac83cc008ec8e9cb635632f82338ceaf0b", "url": "https://github.com/metasfresh/metasfresh/commit/cc86e3ac83cc008ec8e9cb635632f82338ceaf0b", "message": "Merge remote-tracking branch 'origin/master' into gh10327_receipt_and_issue", "committedDate": "2020-12-15T14:27:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM5ODg5Mg==", "url": "https://github.com/metasfresh/metasfresh/pull/10445#discussion_r543398892", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t// private List<Candidate> prepareCandidateForInventory(@NonNull final AbstractTransactionEvent event)\n          \n          \n            \n            \t// {\n          \n          \n            \n            \t// \tfinal List<Candidate> candidates;\n          \n          \n            \n            \t// \tfinal TransactionDetail transactionDetailOfEvent = createTransactionDetail(event);\n          \n          \n            \n            \t//\n          \n          \n            \n            \t// \tfinal CandidatesQuery query = CandidatesQuery.builder()\n          \n          \n            \n            \t// \t\t\t.transactionDetail(TransactionDetail.forQuery(event.getTransactionId()))\n          \n          \n            \n            \t// \t\t\t.build();\n          \n          \n            \n            \t// \tfinal Candidate existingCandidate = candidateRepository.retrieveLatestMatchOrNull(query);\n          \n          \n            \n            \t// \t// TODO continue here\n          \n          \n            \n            \t// \treturn null;\n          \n          \n            \n            \t// }", "author": "metas-ts", "createdAt": "2020-12-15T14:35:05Z", "path": "backend/de.metas.material/dispo-service/src/main/java/de/metas/material/dispo/service/event/handler/TransactionEventHandler.java", "diffHunk": "@@ -501,6 +508,19 @@ else if (event instanceof TransactionDeletedEvent)\n \t\tthrow fail(\"Unexpected subclass of AbstractTransactionEvent; event={}\", event);\n \t}\n \n+\t// private List<Candidate> prepareCandidateForInventory(@NonNull final AbstractTransactionEvent event)\n+\t// {\n+\t// \tfinal List<Candidate> candidates;\n+\t// \tfinal TransactionDetail transactionDetailOfEvent = createTransactionDetail(event);\n+\t//\n+\t// \tfinal CandidatesQuery query = CandidatesQuery.builder()\n+\t// \t\t\t.transactionDetail(TransactionDetail.forQuery(event.getTransactionId()))\n+\t// \t\t\t.build();\n+\t// \tfinal Candidate existingCandidate = candidateRepository.retrieveLatestMatchOrNull(query);\n+\t// \t// TODO continue here\n+\t// \treturn null;\n+\t// }", "originalCommit": "cc86e3ac83cc008ec8e9cb635632f82338ceaf0b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e8b1e43d28ac346d3212970717fa7f69db0cee7c", "chunk": "diff --git a/backend/de.metas.material/dispo-service/src/main/java/de/metas/material/dispo/service/event/handler/TransactionEventHandler.java b/backend/de.metas.material/dispo-service/src/main/java/de/metas/material/dispo/service/event/handler/TransactionEventHandler.java\nindex 2bc2efdc78..51ac338934 100644\n--- a/backend/de.metas.material/dispo-service/src/main/java/de/metas/material/dispo/service/event/handler/TransactionEventHandler.java\n+++ b/backend/de.metas.material/dispo-service/src/main/java/de/metas/material/dispo/service/event/handler/TransactionEventHandler.java\n\n@@ -508,18 +508,6 @@ public class TransactionEventHandler implements MaterialEventHandler<AbstractTra\n \t\tthrow fail(\"Unexpected subclass of AbstractTransactionEvent; event={}\", event);\n \t}\n \n-\t// private List<Candidate> prepareCandidateForInventory(@NonNull final AbstractTransactionEvent event)\n-\t// {\n-\t// \tfinal List<Candidate> candidates;\n-\t// \tfinal TransactionDetail transactionDetailOfEvent = createTransactionDetail(event);\n-\t//\n-\t// \tfinal CandidatesQuery query = CandidatesQuery.builder()\n-\t// \t\t\t.transactionDetail(TransactionDetail.forQuery(event.getTransactionId()))\n-\t// \t\t\t.build();\n-\t// \tfinal Candidate existingCandidate = candidateRepository.retrieveLatestMatchOrNull(query);\n-\t// \t// TODO continue here\n-\t// \treturn null;\n-\t// }\n \n \tprivate List<Candidate> prepareUnrelatedCandidate(@NonNull final AbstractTransactionEvent event)\n \t{\n"}}, {"oid": "e8b1e43d28ac346d3212970717fa7f69db0cee7c", "url": "https://github.com/metasfresh/metasfresh/commit/e8b1e43d28ac346d3212970717fa7f69db0cee7c", "message": "Update backend/de.metas.material/dispo-service/src/main/java/de/metas/material/dispo/service/event/handler/TransactionEventHandler.java", "committedDate": "2020-12-15T14:36:06Z", "type": "commit"}, {"oid": "1a8b75bc049ebc9f7ac45a4fb08f26a012a8a621", "url": "https://github.com/metasfresh/metasfresh/commit/1a8b75bc049ebc9f7ac45a4fb08f26a012a8a621", "message": "misc\n\n#10327", "committedDate": "2020-12-15T14:44:17Z", "type": "commit"}, {"oid": "09700392652bad0cfcfb8809da4bdef85dc6d95a", "url": "https://github.com/metasfresh/metasfresh/commit/09700392652bad0cfcfb8809da4bdef85dc6d95a", "message": "Merge remote-tracking branch 'origin/gh10327_receipt_and_issue' into gh10327_receipt_and_issue", "committedDate": "2020-12-15T14:44:27Z", "type": "commit"}]}