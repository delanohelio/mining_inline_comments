{"pr_number": 10107, "pr_title": "#285", "pr_createdAt": "2020-10-12T16:24:48Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/10107", "timeline": [{"oid": "20cfdffc322a3a3c8b73f39aacbdf66d1519ea88", "url": "https://github.com/metasfresh/metasfresh/commit/20cfdffc322a3a3c8b73f39aacbdf66d1519ea88", "message": "#285\n - Fix cases when a new view was being opened instead of a modal.", "committedDate": "2020-10-12T16:21:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ0MDcyOQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10107#discussion_r503440729", "bodyText": "avoid having logic here.\npls decide what kind of targetTab we need on the caller method,.", "author": "teosarca", "createdAt": "2020-10-12T17:37:57Z", "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java", "diffHunk": "@@ -885,7 +884,7 @@ private RecordsToOpen(\n \t\t\tthis.records = ImmutableList.copyOf(records);\n \t\t\tthis.windowIdString = StringUtils.trimBlankToNull(adWindowId);\n \t\t\tthis.target = target != null ? target : OpenTarget.GridView;\n-\t\t\tthis.targetTab = targetTab != null ? targetTab : TargetTab.SAME_TAB;\n+\t\t\tthis.targetTab = targetTab != null ? targetTab : target == OpenTarget.GridView ? TargetTab.SAME_TAB_OVERLAY : TargetTab.SAME_TAB;", "originalCommit": "20cfdffc322a3a3c8b73f39aacbdf66d1519ea88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzkxNjEyNw==", "url": "https://github.com/metasfresh/metasfresh/pull/10107#discussion_r503916127", "bodyText": "@teosarca then I would leave it as default in the builder to SAME_TAB unless set different and make sure whenever opentarget.gridview is used the targetTab gets passed as targettab.same_tab_overlay. WDYT?", "author": "dragospodariu96", "createdAt": "2020-10-13T12:39:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ0MDcyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "ffb02ae8db657a04639690425bd13a985db04cea", "chunk": "diff --git a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\nindex f2e38c665a..5e83d12cbb 100644\n--- a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n+++ b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n\n@@ -884,7 +887,7 @@ public class ProcessExecutionResult\n \t\t\tthis.records = ImmutableList.copyOf(records);\n \t\t\tthis.windowIdString = StringUtils.trimBlankToNull(adWindowId);\n \t\t\tthis.target = target != null ? target : OpenTarget.GridView;\n-\t\t\tthis.targetTab = targetTab != null ? targetTab : target == OpenTarget.GridView ? TargetTab.SAME_TAB_OVERLAY : TargetTab.SAME_TAB;\n+\t\t\tthis.targetTab = targetTab != null ? targetTab : TargetTab.SAME_TAB;\n \t\t\tthis.automaticallySetReferencingDocumentPaths = automaticallySetReferencingDocumentPaths != null ? automaticallySetReferencingDocumentPaths : true;\n \t\t\tthis.useAutoFilters = useAutoFilters != null ? useAutoFilters : true;\n \t\t}\n"}}, {"oid": "ffb02ae8db657a04639690425bd13a985db04cea", "url": "https://github.com/metasfresh/metasfresh/commit/ffb02ae8db657a04639690425bd13a985db04cea", "message": "#285\n - setting targetTab to 'SAME_TAB_OVERLAY' where openTarget.GridView is used.", "committedDate": "2020-10-13T12:37:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk2MTA5MA==", "url": "https://github.com/metasfresh/metasfresh/pull/10107#discussion_r503961090", "bodyText": "pls set the target tab too", "author": "teosarca", "createdAt": "2020-10-13T13:41:08Z", "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java", "diffHunk": "@@ -493,7 +496,6 @@ public void setRecordToOpen(@Nullable final TableRecordReference record, final @\n \t\t\t\t\t.record(record)\n \t\t\t\t\t.adWindowId(adWindowId)\n \t\t\t\t\t.target(target)\n-\t\t\t\t\t.targetTab(RecordsToOpen.TargetTab.SAME_TAB)", "originalCommit": "ffb02ae8db657a04639690425bd13a985db04cea", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "388de4ba7ea7990834d368677acf8e8d9d107c08", "chunk": "diff --git a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\nindex 5e83d12cbb..6a2435d447 100644\n--- a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n+++ b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n\n@@ -496,6 +496,7 @@ public class ProcessExecutionResult\n \t\t\t\t\t.record(record)\n \t\t\t\t\t.adWindowId(adWindowId)\n \t\t\t\t\t.target(target)\n+\t\t\t\t\t.targetTab(RecordsToOpen.TargetTab.SAME_TAB)\n \t\t\t\t\t.automaticallySetReferencingDocumentPaths(true)\n \t\t\t\t\t.build());\n \t\t}\n"}}, {"oid": "388de4ba7ea7990834d368677acf8e8d9d107c08", "url": "https://github.com/metasfresh/metasfresh/commit/388de4ba7ea7990834d368677acf8e8d9d107c08", "message": "#285\n - setting targetTab to 'SAME_TAB' when none is given.", "committedDate": "2020-10-13T13:42:51Z", "type": "commit"}]}