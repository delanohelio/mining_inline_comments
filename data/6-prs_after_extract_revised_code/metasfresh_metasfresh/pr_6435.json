{"pr_number": 6435, "pr_title": "Fix using system user for contact in some places", "pr_createdAt": "2020-04-03T10:08:37Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/6435", "timeline": [{"oid": "1c11357a611f6d79dfdf97f64fad2dbf0d04947f", "url": "https://github.com/metasfresh/metasfresh/commit/1c11357a611f6d79dfdf97f64fad2dbf0d04947f", "message": "Fix C_Order\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "commit"}, {"oid": "2c7084c91862eb7a189b0f5219671495053ee3cf", "url": "https://github.com/metasfresh/metasfresh/commit/2c7084c91862eb7a189b0f5219671495053ee3cf", "message": "Add nullability info\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "commit"}, {"oid": "7b828ab4cfc4adcae168c94380ee4947c4750ded", "url": "https://github.com/metasfresh/metasfresh/commit/7b828ab4cfc4adcae168c94380ee4947c4750ded", "message": "Fix OrderLineBL\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "commit"}, {"oid": "9707cd18bbd241830a59bbc505d55b64d32829e3", "url": "https://github.com/metasfresh/metasfresh/commit/9707cd18bbd241830a59bbc505d55b64d32829e3", "message": "Add nullability info\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "commit"}, {"oid": "33d9afec5941a7676c5faef3227998488ddde488", "url": "https://github.com/metasfresh/metasfresh/commit/33d9afec5941a7676c5faef3227998488ddde488", "message": "Refactor `IShipmentScheduleEffectiveBL.getADUserID` to return `BPartnerContactId`\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "commit"}, {"oid": "11d83edc4536066184952cc2507226b74779a262", "url": "https://github.com/metasfresh/metasfresh/commit/11d83edc4536066184952cc2507226b74779a262", "message": "More fixes\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "commit"}, {"oid": "11d83edc4536066184952cc2507226b74779a262", "url": "https://github.com/metasfresh/metasfresh/commit/11d83edc4536066184952cc2507226b74779a262", "message": "More fixes\n\nhttps://github.com/metasfresh/metasfresh/issues/6302", "committedDate": "2020-04-03T10:47:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyMTU5Nw==", "url": "https://github.com/metasfresh/metasfresh/pull/6435#discussion_r402921597", "bodyText": "IMHO u can call it getBPartnerContactId", "author": "teosarca", "createdAt": "2020-04-03T10:51:00Z", "path": "de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java", "diffHunk": "@@ -73,7 +77,8 @@ default int getC_BP_Location_ID(final I_M_ShipmentSchedule sched)\n \n \tI_AD_User getAD_User(I_M_ShipmentSchedule sched);\n \n-\tint getAD_User_ID(I_M_ShipmentSchedule sched);\n+\t@Nullable\n+\tBPartnerContactId getADUserID(@NonNull I_M_ShipmentSchedule sched);", "originalCommit": "11d83edc4536066184952cc2507226b74779a262", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyODU0NA==", "url": "https://github.com/metasfresh/metasfresh/pull/6435#discussion_r402928544", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-04-03T11:03:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyMTU5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "2631acf4eed3641074ef04643fc322568c6bde6b", "chunk": "diff --git a/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java b/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java\nindex 2cde468035..85d3be37cb 100644\n--- a/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java\n+++ b/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java\n\n@@ -75,10 +72,14 @@ public interface IShipmentScheduleEffectiveBL extends ISingletonService\n \n \tBPartnerLocationId getBPartnerLocationId(I_M_ShipmentSchedule sched);\n \n-\tI_AD_User getAD_User(I_M_ShipmentSchedule sched);\n+\t/**\n+\t * @deprecated please use {@link #getBPartnerContactID(I_M_ShipmentSchedule)} as this returns BAD data!\n+\t */\n+\t@Deprecated\n+\tI_AD_User getBPartnerContact(I_M_ShipmentSchedule sched);\n \n \t@Nullable\n-\tBPartnerContactId getADUserID(@NonNull I_M_ShipmentSchedule sched);\n+\tBPartnerContactId getBPartnerContactID(@NonNull I_M_ShipmentSchedule sched);\n \n \t/**\n \t * @return the effective {@code QtyOrdered}. Where it's coming from is determined from different values and flags of the given {@code sched}.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyMjkxNA==", "url": "https://github.com/metasfresh/metasfresh/pull/6435#discussion_r402922914", "bodyText": "mark this one deprecated. advice the dev to use  getBPartnerContactId", "author": "teosarca", "createdAt": "2020-04-03T10:53:34Z", "path": "de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java", "diffHunk": "@@ -73,7 +77,8 @@ default int getC_BP_Location_ID(final I_M_ShipmentSchedule sched)\n \n \tI_AD_User getAD_User(I_M_ShipmentSchedule sched);", "originalCommit": "11d83edc4536066184952cc2507226b74779a262", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyMzYwMA==", "url": "https://github.com/metasfresh/metasfresh/pull/6435#discussion_r402923600", "bodyText": "also pls rename it to getBPartnerContact, for consistency", "author": "teosarca", "createdAt": "2020-04-03T10:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyMjkxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkzMTY3Mg==", "url": "https://github.com/metasfresh/metasfresh/pull/6435#discussion_r402931672", "bodyText": "done", "author": "TheBestPessimist", "createdAt": "2020-04-03T11:10:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkyMjkxNA=="}], "type": "inlineReview", "revised_code": {"commit": "2631acf4eed3641074ef04643fc322568c6bde6b", "chunk": "diff --git a/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java b/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java\nindex 2cde468035..85d3be37cb 100644\n--- a/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java\n+++ b/de.metas.swat/de.metas.swat.base/src/main/java/de/metas/inoutcandidate/api/IShipmentScheduleEffectiveBL.java\n\n@@ -75,10 +72,14 @@ public interface IShipmentScheduleEffectiveBL extends ISingletonService\n \n \tBPartnerLocationId getBPartnerLocationId(I_M_ShipmentSchedule sched);\n \n-\tI_AD_User getAD_User(I_M_ShipmentSchedule sched);\n+\t/**\n+\t * @deprecated please use {@link #getBPartnerContactID(I_M_ShipmentSchedule)} as this returns BAD data!\n+\t */\n+\t@Deprecated\n+\tI_AD_User getBPartnerContact(I_M_ShipmentSchedule sched);\n \n \t@Nullable\n-\tBPartnerContactId getADUserID(@NonNull I_M_ShipmentSchedule sched);\n+\tBPartnerContactId getBPartnerContactID(@NonNull I_M_ShipmentSchedule sched);\n \n \t/**\n \t * @return the effective {@code QtyOrdered}. Where it's coming from is determined from different values and flags of the given {@code sched}.\n"}}, {"oid": "2631acf4eed3641074ef04643fc322568c6bde6b", "url": "https://github.com/metasfresh/metasfresh/commit/2631acf4eed3641074ef04643fc322568c6bde6b", "message": "Rename methods for consistency; add deprecation warning\n\nhttps://github.com/metasfresh/metasfresh/issues/6394", "committedDate": "2020-04-03T11:09:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk0OTk0Mw==", "url": "https://github.com/metasfresh/metasfresh/pull/6435#discussion_r402949943", "bodyText": "neither am I, so let's stick with how you changed it here", "author": "metas-ts", "createdAt": "2020-04-03T11:50:15Z", "path": "de.metas.printing/de.metas.printing.base/src/main/java/de/metas/printing/spi/impl/DocumentPrintingQueueHandler.java", "diffHunk": "@@ -97,7 +97,7 @@ public void afterEnqueueBeforeSave(final I_C_Printing_Queue queueItem, final I_A\n \t\t{\n \t\t\tlogger.debug(\"Setting column of C_Printing_Queue {} from DocAction-PO {} that is referenced by AD_Archive {}: [AD_User_ID={}]\",\n \t\t\t\t\tnew Object[] { queueItem, archiveRerencedModel, archive, document.getDoc_User_ID() });\n-\t\t\tqueueItem.setAD_User_ID(document.getDoc_User_ID());\n+\t\t\tqueueItem.setAD_User_ID(document.getDoc_User_ID());  // TODO tbp: not sure if here i should use BPartnerContactId", "originalCommit": "2631acf4eed3641074ef04643fc322568c6bde6b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}