{"pr_number": 10039, "pr_title": "#285 Now passing a new field when running a process: 'openInNewTab'", "pr_createdAt": "2020-09-30T10:49:29Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/10039", "timeline": [{"oid": "b09d373c30d4c9c46903c7d835be25cf090493d0", "url": "https://github.com/metasfresh/metasfresh/commit/b09d373c30d4c9c46903c7d835be25cf090493d0", "message": "#285\n - Now passing a new field when running a process: 'openInNewTab'", "committedDate": "2020-09-30T10:47:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2NzQxMA==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497467410", "bodyText": "no need to have the other ctor. only one ctor is OK", "author": "teosarca", "createdAt": "2020-09-30T12:26:10Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java", "diffHunk": "@@ -211,13 +225,24 @@ public JSONOpenIncludedViewAction(final ViewId viewId, final ViewProfileId profi\n \t\tprivate final String documentId;\n \t\tprivate final boolean modal;\n \t\tprivate final boolean advanced = false;\n+\t\tprivate final boolean openInNewTab;\n \n \t\tpublic JSONOpenSingleDocumentAction(final WindowId windowId, final String documentId, final boolean modal)\n \t\t{\n \t\t\tsuper(\"openDocument\");\n \t\t\tthis.windowId = windowId;\n \t\t\tthis.documentId = documentId;\n \t\t\tthis.modal = modal;\n+\t\t\tthis.openInNewTab = false;\n+\t\t}\n+\n+\t\tpublic JSONOpenSingleDocumentAction(final WindowId windowId, final String documentId, final boolean modal, boolean openInNewTab)", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\nindex a6e67f6b6c..b241e78d15 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n\n@@ -227,15 +217,6 @@ public final class JSONProcessInstanceResult implements Serializable\n \t\tprivate final boolean advanced = false;\n \t\tprivate final boolean openInNewTab;\n \n-\t\tpublic JSONOpenSingleDocumentAction(final WindowId windowId, final String documentId, final boolean modal)\n-\t\t{\n-\t\t\tsuper(\"openDocument\");\n-\t\t\tthis.windowId = windowId;\n-\t\t\tthis.documentId = documentId;\n-\t\t\tthis.modal = modal;\n-\t\t\tthis.openInNewTab = false;\n-\t\t}\n-\n \t\tpublic JSONOpenSingleDocumentAction(final WindowId windowId, final String documentId, final boolean modal, boolean openInNewTab)\n \t\t{\n \t\t\tsuper(\"openDocument\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2NzQ4Mw==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497467483", "bodyText": "no need to have the other ctor. only one ctor is OK", "author": "teosarca", "createdAt": "2020-09-30T12:26:17Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java", "diffHunk": "@@ -181,6 +184,17 @@ public JSONOpenViewAction(final ViewId viewId, final ViewProfileId profileId, fi\n \t\t\tthis.viewId = viewId.getViewId();\n \t\t\tthis.profileId = profileId != null ? profileId.toJson() : null;\n \t\t\tthis.modalOverlay = modalOverlay;\n+\t\t\tthis.openInNewTab = false;\n+\t\t}\n+\n+\t\tpublic JSONOpenViewAction(final ViewId viewId, final ViewProfileId profileId, final boolean modalOverlay, final boolean openInNewTab)", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\nindex a6e67f6b6c..b241e78d15 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n\n@@ -177,16 +177,6 @@ public final class JSONProcessInstanceResult implements Serializable\n \t\tprivate final boolean modalOverlay;\n \t\tprivate final boolean openInNewTab;\n \n-\t\tpublic JSONOpenViewAction(final ViewId viewId, final ViewProfileId profileId, final boolean modalOverlay)\n-\t\t{\n-\t\t\tsuper(\"openView\");\n-\t\t\tthis.windowId = viewId.getWindowId();\n-\t\t\tthis.viewId = viewId.getViewId();\n-\t\t\tthis.profileId = profileId != null ? profileId.toJson() : null;\n-\t\t\tthis.modalOverlay = modalOverlay;\n-\t\t\tthis.openInNewTab = false;\n-\t\t}\n-\n \t\tpublic JSONOpenViewAction(final ViewId viewId, final ViewProfileId profileId, final boolean modalOverlay, final boolean openInNewTab)\n \t\t{\n \t\t\tsuper(\"openView\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2Nzg0MA==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497467840", "bodyText": "use openDocumentAction", "author": "teosarca", "createdAt": "2020-09-30T12:26:58Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java", "diffHunk": "@@ -111,7 +112,8 @@ else if (resultAction instanceof OpenSingleDocument)\n \t\t{\n \t\t\tfinal OpenSingleDocument openDocumentAction = (OpenSingleDocument)resultAction;\n \t\t\tfinal DocumentPath documentPath = openDocumentAction.getDocumentPath();\n-\t\t\treturn new JSONOpenSingleDocumentAction(documentPath.getWindowId(), documentPath.getDocumentId().toJson(), openDocumentAction.isModal());\n+\t\t\tfinal boolean openInNewTab = ((OpenSingleDocument)resultAction).isOpenInNewTab();", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\nindex a6e67f6b6c..b241e78d15 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n\n@@ -112,7 +112,7 @@ public final class JSONProcessInstanceResult implements Serializable\n \t\t{\n \t\t\tfinal OpenSingleDocument openDocumentAction = (OpenSingleDocument)resultAction;\n \t\t\tfinal DocumentPath documentPath = openDocumentAction.getDocumentPath();\n-\t\t\tfinal boolean openInNewTab = ((OpenSingleDocument)resultAction).isOpenInNewTab();\n+\t\t\tfinal boolean openInNewTab = openDocumentAction.isOpenInNewTab();\n \t\t\treturn new JSONOpenSingleDocumentAction(documentPath.getWindowId(), documentPath.getDocumentId().toJson(), openDocumentAction.isModal(), openDocumentAction.isOpenInNewTab());\n \t\t}\n \t\telse if (resultAction instanceof SelectViewRowsAction)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2NzkxMQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497467911", "bodyText": "use openViewAction", "author": "teosarca", "createdAt": "2020-09-30T12:27:05Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java", "diffHunk": "@@ -100,7 +100,8 @@ else if (resultAction instanceof OpenReportAction)\n \t\telse if (resultAction instanceof OpenViewAction)\n \t\t{\n \t\t\tfinal OpenViewAction openViewAction = (OpenViewAction)resultAction;\n-\t\t\treturn new JSONOpenViewAction(openViewAction.getViewId(), openViewAction.getProfileId(), openViewAction.isModalOverlay());\n+\t\t\tfinal boolean openInNewTab = ((OpenViewAction)resultAction).isOpenInNewTab();", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\nindex a6e67f6b6c..b241e78d15 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/json/JSONProcessInstanceResult.java\n\n@@ -100,7 +100,7 @@ public final class JSONProcessInstanceResult implements Serializable\n \t\telse if (resultAction instanceof OpenViewAction)\n \t\t{\n \t\t\tfinal OpenViewAction openViewAction = (OpenViewAction)resultAction;\n-\t\t\tfinal boolean openInNewTab = ((OpenViewAction)resultAction).isOpenInNewTab();\n+\t\t\tfinal boolean openInNewTab = openViewAction.isOpenInNewTab();\n \t\t\treturn new JSONOpenViewAction(openViewAction.getViewId(), openViewAction.getProfileId(), openViewAction.isModalOverlay(), openInNewTab);\n \t\t}\n \t\telse if (resultAction instanceof OpenIncludedViewAction)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2ODU0Mg==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497468542", "bodyText": "pls fix the code format", "author": "teosarca", "createdAt": "2020-09-30T12:28:12Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java", "diffHunk": "@@ -165,21 +189,27 @@ public boolean isSuccess()\n \t\t@NonNull\n \t\tprivate final DocumentPath documentPath;\n \t\tprivate final boolean modal;\n+\n+\t\t@Nullable\n+\t\tprivate final boolean openInNewTab;\n \t}\n \n \t@lombok.Value\n \t@lombok.Builder\n \tpublic static final class SelectViewRowsAction implements ResultAction\n \t{\n-\t\tprivate @NonNull final ViewId viewId;\n-\t\tprivate @NonNull final DocumentIdsSelection rowIds;\n+\t\tprivate @NonNull\n+\t\tfinal ViewId viewId;\n+\t\tprivate @NonNull\n+\t\tfinal DocumentIdsSelection rowIds;", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\nindex 125ac9be66..e7b99d1df9 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n\n@@ -189,8 +168,6 @@ public final class ProcessInstanceResult\n \t\t@NonNull\n \t\tprivate final DocumentPath documentPath;\n \t\tprivate final boolean modal;\n-\n-\t\t@Nullable\n \t\tprivate final boolean openInNewTab;\n \t}\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2ODYwMg==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497468602", "bodyText": "pls fix the code format", "author": "teosarca", "createdAt": "2020-09-30T12:28:19Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java", "diffHunk": "@@ -165,21 +189,27 @@ public boolean isSuccess()\n \t\t@NonNull\n \t\tprivate final DocumentPath documentPath;\n \t\tprivate final boolean modal;\n+\n+\t\t@Nullable\n+\t\tprivate final boolean openInNewTab;\n \t}\n \n \t@lombok.Value\n \t@lombok.Builder\n \tpublic static final class SelectViewRowsAction implements ResultAction\n \t{\n-\t\tprivate @NonNull final ViewId viewId;\n-\t\tprivate @NonNull final DocumentIdsSelection rowIds;\n+\t\tprivate @NonNull\n+\t\tfinal ViewId viewId;\n+\t\tprivate @NonNull\n+\t\tfinal DocumentIdsSelection rowIds;\n \t}\n \n \t@lombok.Value\n \t@lombok.Builder\n \tpublic static final class DisplayQRCodeAction implements ResultAction\n \t{\n-\t\tprivate @NonNull final String code;\n+\t\tprivate @NonNull\n+\t\tfinal String code;", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\nindex 125ac9be66..e7b99d1df9 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n\n@@ -189,8 +168,6 @@ public final class ProcessInstanceResult\n \t\t@NonNull\n \t\tprivate final DocumentPath documentPath;\n \t\tprivate final boolean modal;\n-\n-\t\t@Nullable\n \t\tprivate final boolean openInNewTab;\n \t}\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2ODc5Nw==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497468797", "bodyText": "Nullable annotation is pointless on primitive types", "author": "teosarca", "createdAt": "2020-09-30T12:28:40Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java", "diffHunk": "@@ -138,6 +160,8 @@ public boolean isSuccess()\n \t\t@NonNull\n \t\tprivate final ViewId viewId;\n \t\tprivate final ViewProfileId profileId;\n+\t\t@Nullable\n+\t\tprivate final boolean openInNewTab;", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\nindex 125ac9be66..e7b99d1df9 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n\n@@ -160,10 +140,9 @@ public final class ProcessInstanceResult\n \t\t@NonNull\n \t\tprivate final ViewId viewId;\n \t\tprivate final ViewProfileId profileId;\n-\t\t@Nullable\n-\t\tprivate final boolean openInNewTab;\n \t\t@Builder.Default\n \t\tprivate final boolean modalOverlay = true;\n+\t\tprivate final boolean openInNewTab;\n \t}\n \n \t@lombok.Value\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2OTEwMQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497469101", "bodyText": "pls remove the other ctor.", "author": "teosarca", "createdAt": "2020-09-30T12:29:13Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java", "diffHunk": "@@ -77,14 +78,32 @@ private ProcessInstanceResult(\n \t\tthis.summary = summary;\n \t\tthis.error = error;\n \t\tthis.action = action;\n+\t\tthis.openInNewTab = false;\n+\t}\n+\n+\t@Builder\n+\tprivate ProcessInstanceResult(", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\nindex 125ac9be66..e7b99d1df9 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n\n@@ -67,20 +66,6 @@ public final class ProcessInstanceResult\n \tprivate final ResultAction action;\n \tprivate final boolean openInNewTab;\n \n-\t@Builder\n-\tprivate ProcessInstanceResult(\n-\t\t\t@NonNull final DocumentId instanceId,\n-\t\t\tfinal String summary,\n-\t\t\tfinal boolean error,\n-\t\t\tfinal ResultAction action)\n-\t{\n-\t\tthis.instanceId = instanceId;\n-\t\tthis.summary = summary;\n-\t\tthis.error = error;\n-\t\tthis.action = action;\n-\t\tthis.openInNewTab = false;\n-\t}\n-\n \t@Builder\n \tprivate ProcessInstanceResult(\n \t\t\t@NonNull final DocumentId instanceId,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2OTYxNQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497469615", "bodyText": "Nullable annotation is pointless on primitive types", "author": "teosarca", "createdAt": "2020-09-30T12:30:00Z", "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java", "diffHunk": "@@ -843,6 +872,7 @@ private RecordsToOpen(\n \t\t\t\t@JsonProperty(\"records\") @NonNull @Singular final List<TableRecordReference> records,\n \t\t\t\t@JsonProperty(\"adWindowId\") @Nullable final String adWindowId,\n \t\t\t\t@JsonProperty(\"target\") @Nullable final OpenTarget target,\n+\t\t\t\t@JsonProperty(\"openInNewTab\") @Nullable final boolean openInNewTab,", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\nindex 5e93081c0a..59e1b837cc 100644\n--- a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n+++ b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n\n@@ -872,7 +871,7 @@ public class ProcessExecutionResult\n \t\t\t\t@JsonProperty(\"records\") @NonNull @Singular final List<TableRecordReference> records,\n \t\t\t\t@JsonProperty(\"adWindowId\") @Nullable final String adWindowId,\n \t\t\t\t@JsonProperty(\"target\") @Nullable final OpenTarget target,\n-\t\t\t\t@JsonProperty(\"openInNewTab\") @Nullable final boolean openInNewTab,\n+\t\t\t\t@JsonProperty(\"openInNewTab\") final boolean openInNewTab,\n \t\t\t\t@JsonProperty(\"automaticallySetReferencingDocumentPaths\") @Nullable final Boolean automaticallySetReferencingDocumentPaths,\n \t\t\t\t@JsonProperty(\"useAutoFilters\") @Nullable final Boolean useAutoFilters)\n \t\t{\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ2OTcxMw==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r497469713", "bodyText": "Nullable annotation is pointless on primitive types", "author": "teosarca", "createdAt": "2020-09-30T12:30:07Z", "path": "backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java", "diffHunk": "@@ -822,6 +846,11 @@ public void setDisplayQRCodeFromString(final String qrCode)\n \t\t@Nullable\n \t\tString windowIdString;\n \n+\t\t@JsonProperty(\"openInNewTab\")\n+\t\t@JsonInclude(JsonInclude.Include.NON_NULL)\n+\t\t@Nullable", "originalCommit": "b09d373c30d4c9c46903c7d835be25cf090493d0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "509a960a3d1941781f556bf4008d73844288eb44", "chunk": "diff --git a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\nindex 5e93081c0a..59e1b837cc 100644\n--- a/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n+++ b/backend/de.metas.adempiere.adempiere/base/src/main/java/de/metas/process/ProcessExecutionResult.java\n\n@@ -848,7 +848,6 @@ public class ProcessExecutionResult\n \n \t\t@JsonProperty(\"openInNewTab\")\n \t\t@JsonInclude(JsonInclude.Include.NON_NULL)\n-\t\t@Nullable\n \t\tboolean openInNewTab;\n \n \t\tpublic enum OpenTarget\n"}}, {"oid": "509a960a3d1941781f556bf4008d73844288eb44", "url": "https://github.com/metasfresh/metasfresh/commit/509a960a3d1941781f556bf4008d73844288eb44", "message": "#285\n - Implemented review notes.", "committedDate": "2020-09-30T14:26:25Z", "type": "commit"}, {"oid": "93d75723c04d0e0512f3c847ae30c9d8fe524e0e", "url": "https://github.com/metasfresh/metasfresh/commit/93d75723c04d0e0512f3c847ae30c9d8fe524e0e", "message": "FE changes to action according to BE response values", "committedDate": "2020-10-01T06:53:15Z", "type": "commit"}, {"oid": "a4c5ba35a2563199472e1cee8f26668731e5e531", "url": "https://github.com/metasfresh/metasfresh/commit/a4c5ba35a2563199472e1cee8f26668731e5e531", "message": "Dont open the new one in same window", "committedDate": "2020-10-01T07:08:47Z", "type": "commit"}, {"oid": "e300806a142ebc948737a09f6ad19da0a3776011", "url": "https://github.com/metasfresh/metasfresh/commit/e300806a142ebc948737a09f6ad19da0a3776011", "message": "#285\n - Test adjustment.", "committedDate": "2020-10-01T07:14:42Z", "type": "commit"}, {"oid": "c205806db5b1ae087c84505c4d973a3f1f5fe3ac", "url": "https://github.com/metasfresh/metasfresh/commit/c205806db5b1ae087c84505c4d973a3f1f5fe3ac", "message": "Merge remote-tracking branch 'origin/gh285_new_tabs_feature' into gh285_new_tabs_feature", "committedDate": "2020-10-01T07:39:03Z", "type": "commit"}, {"oid": "62e9194ddf6e01fadf42618e35160592a6e21124", "url": "https://github.com/metasfresh/metasfresh/commit/62e9194ddf6e01fadf42618e35160592a6e21124", "message": "#285\n - Test adjustment.", "committedDate": "2020-10-01T08:55:08Z", "type": "commit"}, {"oid": "461e5db061a16c53bdb88f65ae1caed29d2db736", "url": "https://github.com/metasfresh/metasfresh/commit/461e5db061a16c53bdb88f65ae1caed29d2db736", "message": "#285\n - Added explaining comment.", "committedDate": "2020-10-02T07:10:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY1MzU1NA==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498653554", "bodyText": "Instead of modalOverlay and openInNewTab flags,\npls introduce an enum, called OpenTarget: SAME_TAB, SAME_TAB_OVERLAY, NEW_TAB.", "author": "teosarca", "createdAt": "2020-10-02T07:21:07Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java", "diffHunk": "@@ -140,6 +142,7 @@ public boolean isSuccess()\n \t\tprivate final ViewProfileId profileId;\n \t\t@Builder.Default\n \t\tprivate final boolean modalOverlay = true;\n+\t\tprivate final boolean openInNewTab;", "originalCommit": "461e5db061a16c53bdb88f65ae1caed29d2db736", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0abbdc485ef384b60c973ea3bafbda1ad4bf9903", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\nindex e7b99d1df9..ab13d529bf 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n\n@@ -141,8 +143,7 @@ public final class ProcessInstanceResult\n \t\tprivate final ViewId viewId;\n \t\tprivate final ViewProfileId profileId;\n \t\t@Builder.Default\n-\t\tprivate final boolean modalOverlay = true;\n-\t\tprivate final boolean openInNewTab;\n+\t\tprivate final OpenTarget openTarget = OpenTarget.SAME_TAB_OVERLAY;\n \t}\n \n \t@lombok.Value\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY1MzcxMw==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498653713", "bodyText": "use the OpenTarget enum", "author": "teosarca", "createdAt": "2020-10-02T07:21:32Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java", "diffHunk": "@@ -165,6 +168,7 @@ public boolean isSuccess()\n \t\t@NonNull\n \t\tprivate final DocumentPath documentPath;\n \t\tprivate final boolean modal;\n+\t\tprivate final boolean openInNewTab;", "originalCommit": "461e5db061a16c53bdb88f65ae1caed29d2db736", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0abbdc485ef384b60c973ea3bafbda1ad4bf9903", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\nindex e7b99d1df9..ab13d529bf 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/ProcessInstanceResult.java\n\n@@ -167,8 +168,8 @@ public final class ProcessInstanceResult\n \t{\n \t\t@NonNull\n \t\tprivate final DocumentPath documentPath;\n-\t\tprivate final boolean modal;\n-\t\tprivate final boolean openInNewTab;\n+\t\t@Builder.Default\n+\t\tprivate final OpenTarget openTarget = OpenTarget.NEW_TAB;\n \t}\n \n \t@lombok.Value\n"}}, {"oid": "0abbdc485ef384b60c973ea3bafbda1ad4bf9903", "url": "https://github.com/metasfresh/metasfresh/commit/0abbdc485ef384b60c973ea3bafbda1ad4bf9903", "message": "#285\n - Intermediary commit.", "committedDate": "2020-10-02T11:29:24Z", "type": "commit"}, {"oid": "551eda5ad83514bfb007b6113efab0289c8dbca5", "url": "https://github.com/metasfresh/metasfresh/commit/551eda5ad83514bfb007b6113efab0289c8dbca5", "message": "#285\n - Intermediary commit. (not tested yet)", "committedDate": "2020-10-02T13:19:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0MDUwOQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498940509", "bodyText": "pls preciselly set the targetTab", "author": "teosarca", "createdAt": "2020-10-02T16:59:31Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java", "diffHunk": "@@ -350,12 +350,10 @@ else if (recordsToOpen != null && recordsToOpen.getTarget() == OpenTarget.GridVi\n \t\t\tfinal ViewId parentViewId = parentViewIdStr != null ? ViewId.ofViewIdString(parentViewIdStr) : null;\n \t\t\tfinal CreateViewRequest viewRequest = createViewRequest(recordsToOpen, referencingDocumentPaths, parentViewId);\n \t\t\tfinal IView view = viewsRepo.createView(viewRequest);\n-\t\t\tfinal boolean openInNewTab = recordsToOpen.isOpenInNewTab();\n \n \t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t.viewId(view.getViewId())\n-\t\t\t\t\t.modalOverlay(false) // set this to false so we use openInNewTab to decide whether to open a modal or a new tab in this case.\n-\t\t\t\t\t.openInNewTab(openInNewTab)\n+", "originalCommit": "551eda5ad83514bfb007b6113efab0289c8dbca5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\nindex 05e1662eb0..3d69cb87d7 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n\n@@ -353,7 +353,7 @@ public class ADProcessPostProcessService\n \n \t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t.viewId(view.getViewId())\n-\n+\t\t\t\t\t.targetTab(recordsToOpen.getTargetTab())\n \t\t\t\t\t.build();\n \t\t}\n \t\t//\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0MDgwNw==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498940807", "bodyText": "pls precisely set the targetTab, even if we have a default defined.\nThis will make the code more readable and robust.", "author": "teosarca", "createdAt": "2020-10-02T17:00:13Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java", "diffHunk": "@@ -378,15 +376,13 @@ else if (ViewOpenTarget.ModalOverlay.equals(target))\n \t\t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t\t.viewId(ViewId.ofViewIdString(viewToOpen.getViewId()))\n \t\t\t\t\t\t.profileId(ViewProfileId.fromJson(viewToOpen.getProfileId()))\n-\t\t\t\t\t\t.modalOverlay(true)", "originalCommit": "551eda5ad83514bfb007b6113efab0289c8dbca5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\nindex 05e1662eb0..3d69cb87d7 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n\n@@ -376,6 +376,7 @@ public class ADProcessPostProcessService\n \t\t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t\t.viewId(ViewId.ofViewIdString(viewToOpen.getViewId()))\n \t\t\t\t\t\t.profileId(ViewProfileId.fromJson(viewToOpen.getProfileId()))\n+\t\t\t\t\t\t.targetTab(recordsToOpen.getTargetTab())\n \t\t\t\t\t\t.build();\n \t\t\t}\n \t\t\telse if (ViewOpenTarget.NewBrowserTab.equals(target))\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0MDg1OA==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498940858", "bodyText": "pls precisely set the targetTab, even if we have a default defined.\nThis will make the code more readable and robust.", "author": "teosarca", "createdAt": "2020-10-02T17:00:20Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java", "diffHunk": "@@ -378,15 +376,13 @@ else if (ViewOpenTarget.ModalOverlay.equals(target))\n \t\t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t\t.viewId(ViewId.ofViewIdString(viewToOpen.getViewId()))\n \t\t\t\t\t\t.profileId(ViewProfileId.fromJson(viewToOpen.getProfileId()))\n-\t\t\t\t\t\t.modalOverlay(true)\n \t\t\t\t\t\t.build();\n \t\t\t}\n \t\t\telse if (ViewOpenTarget.NewBrowserTab.equals(target))\n \t\t\t{\n \t\t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t\t.viewId(ViewId.ofViewIdString(viewToOpen.getViewId()))\n \t\t\t\t\t\t.profileId(ViewProfileId.fromJson(viewToOpen.getProfileId()))\n-\t\t\t\t\t\t.modalOverlay(false)", "originalCommit": "551eda5ad83514bfb007b6113efab0289c8dbca5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\nindex 05e1662eb0..3d69cb87d7 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n\n@@ -376,6 +376,7 @@ public class ADProcessPostProcessService\n \t\t\t\treturn OpenViewAction.builder()\n \t\t\t\t\t\t.viewId(ViewId.ofViewIdString(viewToOpen.getViewId()))\n \t\t\t\t\t\t.profileId(ViewProfileId.fromJson(viewToOpen.getProfileId()))\n+\t\t\t\t\t\t.targetTab(recordsToOpen.getTargetTab())\n \t\t\t\t\t\t.build();\n \t\t\t}\n \t\t\telse if (ViewOpenTarget.NewBrowserTab.equals(target))\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0MTAxOQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498941019", "bodyText": "pls precisely set the targetTab, even if we have a default defined.\nThis will make the code more readable and robust.", "author": "teosarca", "createdAt": "2020-10-02T17:00:40Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java", "diffHunk": "@@ -400,12 +396,9 @@ else if (ViewOpenTarget.NewBrowserTab.equals(target))\n \t\telse if (recordsToOpen != null && recordsToOpen.getTarget() == OpenTarget.SingleDocument)\n \t\t{\n \t\t\tfinal DocumentPath documentPath = extractSingleDocumentPath(recordsToOpen);\n-\t\t\tfinal boolean openInNewTab = recordsToOpen.isOpenInNewTab();\n \n \t\t\treturn OpenSingleDocument.builder()\n \t\t\t\t\t.documentPath(documentPath)\n-\t\t\t\t\t.modal(false)\n-\t\t\t\t\t.openInNewTab(openInNewTab)", "originalCommit": "551eda5ad83514bfb007b6113efab0289c8dbca5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\nindex 05e1662eb0..3d69cb87d7 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n\n@@ -399,6 +401,7 @@ public class ADProcessPostProcessService\n \n \t\t\treturn OpenSingleDocument.builder()\n \t\t\t\t\t.documentPath(documentPath)\n+\t\t\t\t\t.targetTab(recordsToOpen.getTargetTab() != RecordsToOpen.TargetTab.SAME_TAB_OVERLAY ? recordsToOpen.getTargetTab() : RecordsToOpen.TargetTab.SAME_TAB)\n \t\t\t\t\t.build();\n \t\t}\n \t\t//\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0MTA5NA==", "url": "https://github.com/metasfresh/metasfresh/pull/10039#discussion_r498941094", "bodyText": "pls precisely set the targetTab, even if we have a default defined.\nThis will make the code more readable and robust.", "author": "teosarca", "createdAt": "2020-10-02T17:00:49Z", "path": "backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java", "diffHunk": "@@ -415,7 +408,7 @@ else if (recordsToOpen != null && recordsToOpen.getTarget() == OpenTarget.Single\n \t\t\tfinal DocumentPath documentPath = extractSingleDocumentPath(recordsToOpen);\n \t\t\treturn OpenSingleDocument.builder()\n \t\t\t\t\t.documentPath(documentPath)\n-\t\t\t\t\t.modal(true)", "originalCommit": "551eda5ad83514bfb007b6113efab0289c8dbca5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "chunk": "diff --git a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\nindex 05e1662eb0..3d69cb87d7 100644\n--- a/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n+++ b/backend/metasfresh-webui-api/src/main/java/de/metas/ui/web/process/adprocess/ADProcessPostProcessService.java\n\n@@ -408,7 +411,7 @@ public class ADProcessPostProcessService\n \t\t\tfinal DocumentPath documentPath = extractSingleDocumentPath(recordsToOpen);\n \t\t\treturn OpenSingleDocument.builder()\n \t\t\t\t\t.documentPath(documentPath)\n-\n+\t\t\t\t\t.targetTab(recordsToOpen.getTargetTab())\n \t\t\t\t\t.build();\n \t\t}\n \t\t//\n"}}, {"oid": "cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "url": "https://github.com/metasfresh/metasfresh/commit/cfd6a0ceb72faf9eb8bde0712bd8ea74e2070f34", "message": "#285\n - Precisely setting targetTab field\n - Only allowing same_tab and new_tab for singledocuments.", "committedDate": "2020-10-05T09:15:44Z", "type": "commit"}, {"oid": "972f9e39c86cc5b47005d7a987f6665ea3e4b1a2", "url": "https://github.com/metasfresh/metasfresh/commit/972f9e39c86cc5b47005d7a987f6665ea3e4b1a2", "message": "New logic NEW_TAB,SAME_TAB,SAME_TAB_OVERLAY", "committedDate": "2020-10-05T11:17:44Z", "type": "commit"}]}