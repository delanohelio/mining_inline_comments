{"pr_number": 9339, "pr_title": "IntelliJ inspections cleanup", "pr_createdAt": "2020-02-09T23:28:57Z", "pr_url": "https://github.com/apache/druid/pull/9339", "timeline": [{"oid": "f422d698d79b2bf36dba1accc6ac8801a91fa5ca", "url": "https://github.com/apache/druid/commit/f422d698d79b2bf36dba1accc6ac8801a91fa5ca", "message": "IntelliJ inspections cleanup\n\n* Standard Charset object can be used\n* Redundant Collection.addAll() call\n* String literal concatenation missing whitespace\n* Statement with empty body\n* Redundant Collection operation\n* StringBuilder can be replaced with String\n* Type parameter hides visible type", "committedDate": "2020-02-09T23:23:06Z", "type": "commit"}, {"oid": "fe463df5c6a6667811505a416fb1224f887b7d9e", "url": "https://github.com/apache/druid/commit/fe463df5c6a6667811505a416fb1224f887b7d9e", "message": "fix warnings in test code", "committedDate": "2020-02-10T06:44:13Z", "type": "commit"}, {"oid": "67fea33d5cb713461e6572690faba1c90f6e4a39", "url": "https://github.com/apache/druid/commit/67fea33d5cb713461e6572690faba1c90f6e4a39", "message": "more test fixes", "committedDate": "2020-02-10T21:30:01Z", "type": "commit"}, {"oid": "58481e1ec71431e15d36c4e3d29006210069f64d", "url": "https://github.com/apache/druid/commit/58481e1ec71431e15d36c4e3d29006210069f64d", "message": "remove string concatenation inspection error", "committedDate": "2020-02-11T00:02:26Z", "type": "commit"}, {"oid": "5d3df0f86ca8fca5aa95357504ebfd8c291d686f", "url": "https://github.com/apache/druid/commit/5d3df0f86ca8fca5aa95357504ebfd8c291d686f", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2", "committedDate": "2020-02-18T17:37:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTA5OTAzNA==", "url": "https://github.com/apache/druid/pull/9339#discussion_r381099034", "bodyText": "There's an extra { that got added here.", "author": "ccaominh", "createdAt": "2020-02-19T06:30:51Z", "path": "processing/src/main/java/org/apache/druid/query/groupby/having/GreaterThanHavingSpec.java", "diffHunk": "@@ -121,12 +121,10 @@ public int hashCode()\n   @Override\n   public String toString()\n   {\n-    final StringBuilder sb = new StringBuilder();\n-    sb.append(\"GreaterThanHavingSpec\");\n-    sb.append(\"{aggregationName='\").append(aggregationName).append('\\'');\n-    sb.append(\", value=\").append(value);\n-    sb.append('}');\n-    return sb.toString();\n+    return \"GreaterThanHavingSpec{\" +\n+           \"{aggregationName='\" + aggregationName + '\\'' +", "originalCommit": "5d3df0f86ca8fca5aa95357504ebfd8c291d686f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQyMTg2OA==", "url": "https://github.com/apache/druid/pull/9339#discussion_r381421868", "bodyText": "Done", "author": "suneet-s", "createdAt": "2020-02-19T17:17:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTA5OTAzNA=="}], "type": "inlineReview", "revised_code": {"commit": "8b354940cf1bce44c6d12088883b1a928dbb00b9", "chunk": "diff --git a/processing/src/main/java/org/apache/druid/query/groupby/having/GreaterThanHavingSpec.java b/processing/src/main/java/org/apache/druid/query/groupby/having/GreaterThanHavingSpec.java\nindex f3d0c574db..2cd75ffe66 100644\n--- a/processing/src/main/java/org/apache/druid/query/groupby/having/GreaterThanHavingSpec.java\n+++ b/processing/src/main/java/org/apache/druid/query/groupby/having/GreaterThanHavingSpec.java\n\n@@ -122,7 +122,7 @@ public class GreaterThanHavingSpec implements HavingSpec\n   public String toString()\n   {\n     return \"GreaterThanHavingSpec{\" +\n-           \"{aggregationName='\" + aggregationName + '\\'' +\n+           \"aggregationName='\" + aggregationName + '\\'' +\n            \", value=\" + value +\n            '}';\n   }\n"}}, {"oid": "8b354940cf1bce44c6d12088883b1a928dbb00b9", "url": "https://github.com/apache/druid/commit/8b354940cf1bce44c6d12088883b1a928dbb00b9", "message": "fix extra curly brace", "committedDate": "2020-02-19T17:22:57Z", "type": "commit"}, {"oid": "18b01ad06636862ba730475eb4f8c2ec0970e718", "url": "https://github.com/apache/druid/commit/18b01ad06636862ba730475eb4f8c2ec0970e718", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2", "committedDate": "2020-02-19T21:14:30Z", "type": "commit"}, {"oid": "b5042e6609c00fb14fc41515f3866d351fd1c26f", "url": "https://github.com/apache/druid/commit/b5042e6609c00fb14fc41515f3866d351fd1c26f", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2\n\n Conflicts:\n\tprocessing/src/main/java/org/apache/druid/segment/writeout/OnHeapMemorySegmentWriteOutMediumFactory.java\n\tserver/src/test/java/org/apache/druid/server/QueryResourceTest.java", "committedDate": "2020-03-25T17:31:00Z", "type": "commit"}, {"oid": "34eaae0d7a28f5fc96ee792b740c4f319102852c", "url": "https://github.com/apache/druid/commit/34eaae0d7a28f5fc96ee792b740c4f319102852c", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2", "committedDate": "2020-04-06T16:33:30Z", "type": "commit"}, {"oid": "7b59d8052df5e12180f69203f64844d699b6e645", "url": "https://github.com/apache/druid/commit/7b59d8052df5e12180f69203f64844d699b6e645", "message": "cleanup AzureTestUtils", "committedDate": "2020-04-06T16:34:04Z", "type": "commit"}, {"oid": "53060e031dec9f22e698d18dfedeaeacad4bf2f1", "url": "https://github.com/apache/druid/commit/53060e031dec9f22e698d18dfedeaeacad4bf2f1", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2", "committedDate": "2020-04-06T19:42:48Z", "type": "commit"}, {"oid": "a329bafdb482db79f047128a4227a7b395983652", "url": "https://github.com/apache/druid/commit/a329bafdb482db79f047128a4227a7b395983652", "message": "fix charsets for RangerAdminClient", "committedDate": "2020-04-06T19:43:34Z", "type": "commit"}, {"oid": "e4a690f644e21c6931463eda2c462e5a50b8b0e6", "url": "https://github.com/apache/druid/commit/e4a690f644e21c6931463eda2c462e5a50b8b0e6", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2", "committedDate": "2020-04-09T15:25:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3MzI4NQ==", "url": "https://github.com/apache/druid/pull/9339#discussion_r406373285", "bodyText": "Revert?", "author": "ccaominh", "createdAt": "2020-04-09T17:48:20Z", "path": "processing/src/main/java/org/apache/druid/segment/writeout/OnHeapMemorySegmentWriteOutMediumFactory.java", "diffHunk": "@@ -23,6 +23,7 @@\n \n import java.io.File;\n \n+", "originalCommit": "e4a690f644e21c6931463eda2c462e5a50b8b0e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyMzQxOA==", "url": "https://github.com/apache/druid/pull/9339#discussion_r406623418", "bodyText": "removed", "author": "suneet-s", "createdAt": "2020-04-10T06:33:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3MzI4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "90ef72f2d50ccbea337860ecec29db645ed4b877", "chunk": "diff --git a/processing/src/main/java/org/apache/druid/segment/writeout/OnHeapMemorySegmentWriteOutMediumFactory.java b/processing/src/main/java/org/apache/druid/segment/writeout/OnHeapMemorySegmentWriteOutMediumFactory.java\nindex 4c3270f58e..d3409539ee 100644\n--- a/processing/src/main/java/org/apache/druid/segment/writeout/OnHeapMemorySegmentWriteOutMediumFactory.java\n+++ b/processing/src/main/java/org/apache/druid/segment/writeout/OnHeapMemorySegmentWriteOutMediumFactory.java\n\n@@ -23,7 +23,6 @@ import com.fasterxml.jackson.annotation.JsonCreator;\n \n import java.io.File;\n \n-\n public class OnHeapMemorySegmentWriteOutMediumFactory implements SegmentWriteOutMediumFactory\n {\n   private static final OnHeapMemorySegmentWriteOutMediumFactory INSTANCE =\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NTA4MQ==", "url": "https://github.com/apache/druid/pull/9339#discussion_r406375081", "bodyText": "The new ArrrayList<>() seems unnecessary?", "author": "ccaominh", "createdAt": "2020-04-09T17:51:29Z", "path": "services/src/main/java/org/apache/druid/cli/CliHadoopIndexer.java", "diffHunk": "@@ -84,8 +84,8 @@ public void run()\n         extensionURLs.addAll(Arrays.asList(((URLClassLoader) extensionLoader).getURLs()));\n       }\n \n-      final List<URL> nonHadoopURLs = new ArrayList<>();\n-      nonHadoopURLs.addAll(Arrays.asList(((URLClassLoader) CliHadoopIndexer.class.getClassLoader()).getURLs()));\n+      final List<URL> nonHadoopURLs = new ArrayList<>(Arrays.asList(((URLClassLoader) CliHadoopIndexer.class.getClassLoader())", "originalCommit": "e4a690f644e21c6931463eda2c462e5a50b8b0e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYyNDc2NQ==", "url": "https://github.com/apache/druid/pull/9339#discussion_r406624765", "bodyText": "removed", "author": "suneet-s", "createdAt": "2020-04-10T06:38:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NTA4MQ=="}], "type": "inlineReview", "revised_code": {"commit": "90ef72f2d50ccbea337860ecec29db645ed4b877", "chunk": "diff --git a/services/src/main/java/org/apache/druid/cli/CliHadoopIndexer.java b/services/src/main/java/org/apache/druid/cli/CliHadoopIndexer.java\nindex 584a8cacf7..3cc42cbb4e 100644\n--- a/services/src/main/java/org/apache/druid/cli/CliHadoopIndexer.java\n+++ b/services/src/main/java/org/apache/druid/cli/CliHadoopIndexer.java\n\n@@ -80,18 +80,19 @@ public class CliHadoopIndexer implements Runnable\n \n       final List<URL> extensionURLs = new ArrayList<>();\n       for (final File extension : Initialization.getExtensionFilesToLoad(extensionsConfig)) {\n-        final ClassLoader extensionLoader = Initialization.getClassLoaderForExtension(extension, false);\n-        extensionURLs.addAll(Arrays.asList(((URLClassLoader) extensionLoader).getURLs()));\n+        final URLClassLoader extensionLoader = Initialization.getClassLoaderForExtension(extension, false);\n+        extensionURLs.addAll(Arrays.asList(extensionLoader.getURLs()));\n       }\n \n-      final List<URL> nonHadoopURLs = new ArrayList<>(Arrays.asList(((URLClassLoader) CliHadoopIndexer.class.getClassLoader())\n-                                                                        .getURLs()));\n+      final List<URL> nonHadoopURLs = Arrays.asList(\n+          ((URLClassLoader) CliHadoopIndexer.class.getClassLoader()).getURLs()\n+      );\n \n       final List<URL> driverURLs = new ArrayList<>(nonHadoopURLs);\n       // put hadoop dependencies last to avoid jets3t & apache.httpcore version conflicts\n       for (File hadoopDependency : Initialization.getHadoopDependencyFilesToLoad(allCoordinates, extensionsConfig)) {\n-        final ClassLoader hadoopLoader = Initialization.getClassLoaderForExtension(hadoopDependency, false);\n-        driverURLs.addAll(Arrays.asList(((URLClassLoader) hadoopLoader).getURLs()));\n+        final URLClassLoader hadoopLoader = Initialization.getClassLoaderForExtension(hadoopDependency, false);\n+        driverURLs.addAll(Arrays.asList(hadoopLoader.getURLs()));\n       }\n \n       final URLClassLoader loader = new URLClassLoader(driverURLs.toArray(new URL[0]), null);\n"}}, {"oid": "90ef72f2d50ccbea337860ecec29db645ed4b877", "url": "https://github.com/apache/druid/commit/90ef72f2d50ccbea337860ecec29db645ed4b877", "message": "review comments", "committedDate": "2020-04-10T06:36:59Z", "type": "commit"}, {"oid": "411b537d92779b96cef6f14de921c9bad558d437", "url": "https://github.com/apache/druid/commit/411b537d92779b96cef6f14de921c9bad558d437", "message": "Merge remote-tracking branch 'upstream/master' into inspect-cleanup-2", "committedDate": "2020-04-10T06:37:21Z", "type": "commit"}]}