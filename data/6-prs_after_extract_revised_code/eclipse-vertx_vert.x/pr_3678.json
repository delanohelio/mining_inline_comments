{"pr_number": 3678, "pr_title": "minor cleanups", "pr_createdAt": "2020-11-29T09:23:12Z", "pr_url": "https://github.com/eclipse-vertx/vert.x/pull/3678", "timeline": [{"oid": "f0943dc6ca1ef2ab1bfbcf22939c707f168edfb1", "url": "https://github.com/eclipse-vertx/vert.x/commit/f0943dc6ca1ef2ab1bfbcf22939c707f168edfb1", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equal)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-29T09:40:08Z", "type": "forcePushed"}, {"oid": "3aba9fb6b8e63376d16101d7115325c5e96f01b3", "url": "https://github.com/eclipse-vertx/vert.x/commit/3aba9fb6b8e63376d16101d7115325c5e96f01b3", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-29T09:41:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjIzNDc1NQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532234755", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (!Objects.equals(handler, that.handler)) return false;\n          \n          \n            \n                return true;\n          \n          \n            \n                return Objects.equals(handler, that.handler);", "author": "julianladisch", "createdAt": "2020-11-29T16:43:44Z", "path": "src/main/java/io/vertx/core/eventbus/impl/HandlerHolder.java", "diffHunk": "@@ -54,7 +56,7 @@ public boolean equals(Object o) {\n     if (this == o) return true;\n     if (o == null || getClass() != o.getClass()) return false;\n     HandlerHolder that = (HandlerHolder) o;\n-    if (handler != null ? !handler.equals(that.handler) : that.handler != null) return false;\n+    if (!Objects.equals(handler, that.handler)) return false;\n     return true;", "originalCommit": "3aba9fb6b8e63376d16101d7115325c5e96f01b3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "95b9ac840f9f0ad79a22648c621a3d048c9b9d36", "chunk": "diff --git a/src/main/java/io/vertx/core/eventbus/impl/HandlerHolder.java b/src/main/java/io/vertx/core/eventbus/impl/HandlerHolder.java\nindex ca8535ad8..d1135b2b2 100644\n--- a/src/main/java/io/vertx/core/eventbus/impl/HandlerHolder.java\n+++ b/src/main/java/io/vertx/core/eventbus/impl/HandlerHolder.java\n\n@@ -55,14 +55,13 @@ public class HandlerHolder<T> {\n   public boolean equals(Object o) {\n     if (this == o) return true;\n     if (o == null || getClass() != o.getClass()) return false;\n-    HandlerHolder that = (HandlerHolder) o;\n-    if (!Objects.equals(handler, that.handler)) return false;\n-    return true;\n+    HandlerHolder<?> that = (HandlerHolder<?>) o;\n+    return Objects.equals(handler, that.handler);\n   }\n \n   @Override\n   public int hashCode() {\n-    return handler != null ? handler.hashCode() : 0;\n+    return Objects.hashCode(handler);\n   }\n \n   public long getSeq() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjIzNjY0NA==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532236644", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (!Objects.equals(host, that.host)) return false;\n          \n          \n            \n                if (!Objects.equals(path, that.path)) return false;\n          \n          \n            \n            \n          \n          \n            \n                return true;\n          \n          \n            \n                return Objects.equals(host, that.host) && Objects.equals(path, that.path);", "author": "julianladisch", "createdAt": "2020-11-29T16:58:43Z", "path": "src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java", "diffHunk": "@@ -141,8 +141,8 @@ public boolean equals(Object o) {\n     SocketAddressImpl that = (SocketAddressImpl) o;\n \n     if (port != that.port) return false;\n-    if (host != null ? !host.equals(that.host) : that.host != null) return false;\n-    if (path != null ? !path.equals(that.path) : that.path != null) return false;\n+    if (!Objects.equals(host, that.host)) return false;\n+    if (!Objects.equals(path, that.path)) return false;\n \n     return true;", "originalCommit": "3aba9fb6b8e63376d16101d7115325c5e96f01b3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "95b9ac840f9f0ad79a22648c621a3d048c9b9d36", "chunk": "diff --git a/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java b/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java\nindex ffc598ac4..4367365e0 100644\n--- a/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java\n+++ b/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java\n\n@@ -139,19 +140,11 @@ public class SocketAddressImpl implements SocketAddress{\n     if (o == null || getClass() != o.getClass()) return false;\n \n     SocketAddressImpl that = (SocketAddressImpl) o;\n-\n-    if (port != that.port) return false;\n-    if (!Objects.equals(host, that.host)) return false;\n-    if (!Objects.equals(path, that.path)) return false;\n-\n-    return true;\n+    return port != that.port && Objects.equals(host, that.host) && Objects.equals(path, that.path);\n   }\n \n   @Override\n   public int hashCode() {\n-    int result = host != null ? host.hashCode() : 0;\n-    result = 31 * result + (path != null ? path.hashCode() : 0);\n-    result = 31 * result + port;\n-    return result;\n+    return Objects.hash(port, host, path);\n   }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjIzNjc2MQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532236761", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if (!Objects.equals(worker, that.worker)) return false;\n          \n          \n            \n            \n          \n          \n            \n                  return true;\n          \n          \n            \n                  return Objects.equals(worker, that.worker);", "author": "julianladisch", "createdAt": "2020-11-29T16:59:27Z", "path": "src/main/java/io/vertx/core/net/impl/VertxEventLoopGroup.java", "diffHunk": "@@ -155,7 +155,7 @@ public boolean equals(Object o) {\n \n       EventLoopHolder that = (EventLoopHolder) o;\n \n-      if (worker != null ? !worker.equals(that.worker) : that.worker != null) return false;\n+      if (!Objects.equals(worker, that.worker)) return false;\n \n       return true;", "originalCommit": "3aba9fb6b8e63376d16101d7115325c5e96f01b3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "95b9ac840f9f0ad79a22648c621a3d048c9b9d36", "chunk": "diff --git a/src/main/java/io/vertx/core/net/impl/VertxEventLoopGroup.java b/src/main/java/io/vertx/core/net/impl/VertxEventLoopGroup.java\nindex 4fa94b19f..f7bcbd086 100644\n--- a/src/main/java/io/vertx/core/net/impl/VertxEventLoopGroup.java\n+++ b/src/main/java/io/vertx/core/net/impl/VertxEventLoopGroup.java\n\n@@ -154,15 +154,12 @@ public final class VertxEventLoopGroup extends AbstractEventExecutorGroup implem\n       if (o == null || getClass() != o.getClass()) return false;\n \n       EventLoopHolder that = (EventLoopHolder) o;\n-\n-      if (!Objects.equals(worker, that.worker)) return false;\n-\n-      return true;\n+      return Objects.equals(worker, that.worker);\n     }\n \n     @Override\n     public int hashCode() {\n-      return worker != null ? worker.hashCode() : 0;\n+      return Objects.hashCode(worker);\n     }\n   }\n \n"}}, {"oid": "95b9ac840f9f0ad79a22648c621a3d048c9b9d36", "url": "https://github.com/eclipse-vertx/vert.x/commit/95b9ac840f9f0ad79a22648c621a3d048c9b9d36", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-29T20:31:49Z", "type": "forcePushed"}, {"oid": "8c2c975348ac7a02c793e1ba0f23dc52d947e630", "url": "https://github.com/eclipse-vertx/vert.x/commit/8c2c975348ac7a02c793e1ba0f23dc52d947e630", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-29T20:36:57Z", "type": "forcePushed"}, {"oid": "318da38e0ed9397a93fafe5226d5b20b8ee150fd", "url": "https://github.com/eclipse-vertx/vert.x/commit/318da38e0ed9397a93fafe5226d5b20b8ee150fd", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-30T11:27:52Z", "type": "forcePushed"}, {"oid": "dd3fb26f6329ec6b1f21a2d9064295869fb7b568", "url": "https://github.com/eclipse-vertx/vert.x/commit/dd3fb26f6329ec6b1f21a2d9064295869fb7b568", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-30T11:30:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ5OTc3MQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532499771", "bodyText": "This will create an array and the benefit does not seem worth it.", "author": "tsegismont", "createdAt": "2020-11-30T10:40:37Z", "path": "src/main/java/io/vertx/core/net/impl/ServerID.java", "diffHunk": "@@ -32,21 +33,15 @@ public ServerID() {\n   @Override\n   public boolean equals(Object o) {\n     if (this == o) return true;\n-    if (o == null || !(o instanceof ServerID)) return false;\n+    if (!(o instanceof ServerID)) return false;\n \n-    ServerID serverID = (ServerID) o;\n-\n-    if (port != serverID.port) return false;\n-    if (!host.equals(serverID.host)) return false;\n-\n-    return true;\n+    ServerID that = (ServerID) o;\n+    return port != that.port && Objects.equals(host, that.host);\n   }\n \n   @Override\n   public int hashCode() {\n-    int result = port;\n-    result = 31 * result + host.hashCode();\n-    return result;\n+    return Objects.hash(port, host);", "originalCommit": "8c2c975348ac7a02c793e1ba0f23dc52d947e630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc2NzEyMw==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532767123", "bodyText": "thank you @tsegismont :) I just pushed the fix, please have another look", "author": "dfa1", "createdAt": "2020-11-30T17:22:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ5OTc3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "dd3fb26f6329ec6b1f21a2d9064295869fb7b568", "chunk": "diff --git a/src/main/java/io/vertx/core/net/impl/ServerID.java b/src/main/java/io/vertx/core/net/impl/ServerID.java\nindex 669272078..f9d680edc 100644\n--- a/src/main/java/io/vertx/core/net/impl/ServerID.java\n+++ b/src/main/java/io/vertx/core/net/impl/ServerID.java\n\n@@ -36,7 +36,7 @@ public class ServerID implements Serializable {\n     if (!(o instanceof ServerID)) return false;\n \n     ServerID that = (ServerID) o;\n-    return port != that.port && Objects.equals(host, that.host);\n+    return port == that.port && Objects.equals(host, that.host);\n   }\n \n   @Override\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ5OTk4MQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532499981", "bodyText": "Same here, array creation", "author": "tsegismont", "createdAt": "2020-11-30T10:40:59Z", "path": "src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java", "diffHunk": "@@ -139,19 +139,11 @@ public boolean equals(Object o) {\n     if (o == null || getClass() != o.getClass()) return false;\n \n     SocketAddressImpl that = (SocketAddressImpl) o;\n-\n-    if (port != that.port) return false;\n-    if (host != null ? !host.equals(that.host) : that.host != null) return false;\n-    if (path != null ? !path.equals(that.path) : that.path != null) return false;\n-\n-    return true;\n+    return port != that.port && Objects.equals(host, that.host) && Objects.equals(path, that.path);\n   }\n \n   @Override\n   public int hashCode() {\n-    int result = host != null ? host.hashCode() : 0;\n-    result = 31 * result + (path != null ? path.hashCode() : 0);\n-    result = 31 * result + port;\n-    return result;\n+    return Objects.hash(port, host, path);", "originalCommit": "8c2c975348ac7a02c793e1ba0f23dc52d947e630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc2OTIzMQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3678#discussion_r532769231", "bodyText": "changed to use Objects.hashCode that is exactly:\npublic static int hashCode(Object o) {\n    return o != null ? o.hashCode() : 0;\n}", "author": "dfa1", "createdAt": "2020-11-30T17:25:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ5OTk4MQ=="}], "type": "inlineReview", "revised_code": {"commit": "dd3fb26f6329ec6b1f21a2d9064295869fb7b568", "chunk": "diff --git a/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java b/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java\nindex 10e8ff88b..60551e388 100644\n--- a/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java\n+++ b/src/main/java/io/vertx/core/net/impl/SocketAddressImpl.java\n\n@@ -139,7 +139,7 @@ public class SocketAddressImpl implements SocketAddress{\n     if (o == null || getClass() != o.getClass()) return false;\n \n     SocketAddressImpl that = (SocketAddressImpl) o;\n-    return port != that.port && Objects.equals(host, that.host) && Objects.equals(path, that.path);\n+    return port == that.port && Objects.equals(host, that.host) && Objects.equals(path, that.path);\n   }\n \n   @Override\n"}}, {"oid": "944a782cdddc88d7a06da7285803446f9251ea90", "url": "https://github.com/eclipse-vertx/vert.x/commit/944a782cdddc88d7a06da7285803446f9251ea90", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-30T17:23:29Z", "type": "commit"}, {"oid": "944a782cdddc88d7a06da7285803446f9251ea90", "url": "https://github.com/eclipse-vertx/vert.x/commit/944a782cdddc88d7a06da7285803446f9251ea90", "message": "minor cleanups\n\n- using JDK methods when possible (Arrays.fill, Math.max, Objects.equals)\n- diamond operator\n- dandling javadoc\n\nSigned-off-by: Davide Angelocola <davide.angelocola@gmail.com>", "committedDate": "2020-11-30T17:23:29Z", "type": "forcePushed"}]}