{"pr_number": 3431, "pr_title": "Event loop affinity", "pr_createdAt": "2020-05-29T08:54:24Z", "pr_url": "https://github.com/eclipse-vertx/vert.x/pull/3431", "timeline": [{"oid": "e1c8eaf0bc6a2fa64906d602eae5575752e2478d", "url": "https://github.com/eclipse-vertx/vert.x/commit/e1c8eaf0bc6a2fa64906d602eae5575752e2478d", "message": "VertxImpl#tracer field can be private", "committedDate": "2020-05-27T13:22:21Z", "type": "commit"}, {"oid": "94dcf3f879244317e9544418d83f31e8bf0b51da", "url": "https://github.com/eclipse-vertx/vert.x/commit/94dcf3f879244317e9544418d83f31e8bf0b51da", "message": "Non Vert.x thread context affinity - fixes #3430", "committedDate": "2020-05-29T08:53:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM4MzQ0NQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3431#discussion_r432383445", "bodyText": "{@code null}", "author": "jponge", "createdAt": "2020-05-29T10:01:17Z", "path": "src/main/java/io/vertx/core/Vertx.java", "diffHunk": "@@ -110,7 +110,7 @@ static void clusteredVertx(VertxOptions options, Handler<AsyncResult<Vertx>> res\n   /**\n    * Gets the current context\n    *\n-   * @return The current context or null if no current context\n+   * @return The current context or @code null if there is no current context", "originalCommit": "94dcf3f879244317e9544418d83f31e8bf0b51da", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "431206ddb2f08e34b7efb4867bbd60046e6522be", "chunk": "diff --git a/src/main/java/io/vertx/core/Vertx.java b/src/main/java/io/vertx/core/Vertx.java\nindex c6b2e4d5d..81978a28e 100644\n--- a/src/main/java/io/vertx/core/Vertx.java\n+++ b/src/main/java/io/vertx/core/Vertx.java\n\n@@ -110,7 +110,7 @@ public interface Vertx extends Measured {\n   /**\n    * Gets the current context\n    *\n-   * @return The current context or @code null if there is no current context\n+   * @return The current context or {@code null} if there is no current context\n    */\n   static @Nullable Context currentContext() {\n     return ContextInternal.current();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5MDg0Mg==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3431#discussion_r432390842", "bodyText": "\ud83d\udc4d", "author": "jponge", "createdAt": "2020-05-29T10:16:36Z", "path": "src/test/java/io/vertx/core/ContextTest.java", "diffHunk": "@@ -809,4 +809,10 @@ public void testWorkerExecutor() {\n     });\n     await();\n   }\n+\n+  @Test\n+  public void testSticky() {", "originalCommit": "94dcf3f879244317e9544418d83f31e8bf0b51da", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5MzQzNg==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3431#discussion_r432393436", "bodyText": "Not sure you need to cast here.", "author": "jponge", "createdAt": "2020-05-29T10:22:06Z", "path": "src/test/java/io/vertx/core/VertxTest.java", "diffHunk": "@@ -213,4 +214,42 @@ public void testFinalizeNetClient() throws Exception {\n     }\n     await();\n   }\n+\n+\n+  @Test\n+  public void testStickContextFinalization() throws Exception {\n+    VertxInternal vertx = (VertxInternal) Vertx.vertx();", "originalCommit": "94dcf3f879244317e9544418d83f31e8bf0b51da", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "431206ddb2f08e34b7efb4867bbd60046e6522be", "chunk": "diff --git a/src/test/java/io/vertx/core/VertxTest.java b/src/test/java/io/vertx/core/VertxTest.java\nindex e12687dad..0b73cc8fe 100644\n--- a/src/test/java/io/vertx/core/VertxTest.java\n+++ b/src/test/java/io/vertx/core/VertxTest.java\n\n@@ -218,7 +218,7 @@ public class VertxTest extends AsyncTestBase {\n \n   @Test\n   public void testStickContextFinalization() throws Exception {\n-    VertxInternal vertx = (VertxInternal) Vertx.vertx();\n+    Vertx vertx = Vertx.vertx();\n     try {\n       AtomicReference<WeakReference<Context>> ref = new AtomicReference<>();\n       Thread t = new Thread(() -> {\n"}}, {"oid": "431206ddb2f08e34b7efb4867bbd60046e6522be", "url": "https://github.com/eclipse-vertx/vert.x/commit/431206ddb2f08e34b7efb4867bbd60046e6522be", "message": "PR review feedback", "committedDate": "2020-05-30T18:33:03Z", "type": "commit"}]}