{"pr_number": 211, "pr_title": "FM2-214: Add delete operation for diagnostic report resource.", "pr_createdAt": "2020-06-15T21:37:56Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/211", "timeline": [{"oid": "485372c8a79ce9395c1883e01cccd74d5f72d644", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/485372c8a79ce9395c1883e01cccd74d5f72d644", "message": "FM2-214: Add delete operation for diagnostic report resource.", "committedDate": "2020-06-15T21:53:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2MTc5Nw==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/211#discussion_r445461797", "bodyText": "Instead of the above code, leverage the util method provided by FhirProviderUtils.buildDelete() introduced #214\nreturn FhirProviderUtils.buildDelete(diagnosticReport);", "author": "corneliouzbett", "createdAt": "2020-06-25T10:29:50Z", "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r3/DiagnosticReportFhirResourceProvider.java", "diffHunk": "@@ -76,6 +77,19 @@ public MethodOutcome updateDiagnosticReport(@IdParam IdType id, @ResourceParam D\n \t\t    diagnosticReportService.update(idPart, DiagnosticReport30_40.convertDiagnosticReport(diagnosticReport)));\n \t}\n \t\n+\t@Delete\n+\t@SuppressWarnings(\"unused\")\n+\tpublic OperationOutcome deleteDiagnosticReport(@IdParam @NotNull IdType id) {\n+\t\torg.hl7.fhir.r4.model.DiagnosticReport diagnosticReport = diagnosticReportService.delete(id.getIdPart());\n+\t\tif (diagnosticReport == null) {\n+\t\t\tthrow new ResourceNotFoundException(\"Could not find medication to delete with id \" + id.getIdPart());\n+\t\t}\n+\t\tOperationOutcome retVal = new OperationOutcome();\n+\t\tretVal.setId(id.getIdPart());\n+\t\tretVal.getText().setDivAsString(\"Deleted successfully\");\n+\t\treturn retVal;", "originalCommit": "485372c8a79ce9395c1883e01cccd74d5f72d644", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUwNDk3OA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/211#discussion_r446504978", "bodyText": "sure I will do", "author": "Akayeshmantha", "createdAt": "2020-06-27T09:17:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2MTc5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "ba1cc7bb53f8ab181218cd0bb6c940b7a37ef9d4", "chunk": "diff --git a/api/src/main/java/org/openmrs/module/fhir2/providers/r3/DiagnosticReportFhirResourceProvider.java b/api/src/main/java/org/openmrs/module/fhir2/providers/r3/DiagnosticReportFhirResourceProvider.java\nindex ceb59da1..8593b255 100644\n--- a/api/src/main/java/org/openmrs/module/fhir2/providers/r3/DiagnosticReportFhirResourceProvider.java\n+++ b/api/src/main/java/org/openmrs/module/fhir2/providers/r3/DiagnosticReportFhirResourceProvider.java\n\n@@ -84,12 +86,10 @@ public class DiagnosticReportFhirResourceProvider implements IResourceProvider {\n \t\tif (diagnosticReport == null) {\n \t\t\tthrow new ResourceNotFoundException(\"Could not find medication to delete with id \" + id.getIdPart());\n \t\t}\n-\t\tOperationOutcome retVal = new OperationOutcome();\n-\t\tretVal.setId(id.getIdPart());\n-\t\tretVal.getText().setDivAsString(\"Deleted successfully\");\n-\t\treturn retVal;\n+\n+\t\treturn FhirProviderUtils.buildDelete(diagnosticReport);\n \t}\n-\t\n+\n \t@Search\n \tpublic IBundleProvider searchForDiagnosticReports(\n \t        @OptionalParam(name = DiagnosticReport.SP_ENCOUNTER, chainWhitelist = {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2MjU2OQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/211#discussion_r445462569", "bodyText": "return FhirProviderUtils.buildDelete(diagnosticReport);", "author": "corneliouzbett", "createdAt": "2020-06-25T10:31:21Z", "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r4/DiagnosticReportFhirResourceProvider.java", "diffHunk": "@@ -79,6 +81,19 @@ public MethodOutcome updateDiagnosticReport(@IdParam IdType id, @ResourceParam D\n \t\treturn FhirProviderUtils.buildUpdate(service.update(idPart, diagnosticReport));\n \t}\n \t\n+\t@Delete\n+\t@SuppressWarnings(\"unused\")\n+\tpublic OperationOutcome deleteDiagnosticReport(@IdParam @NotNull IdType id) {\n+\t\tDiagnosticReport diagnosticReport = service.delete(id.getIdPart());\n+\t\tif (diagnosticReport == null) {\n+\t\t\tthrow new ResourceNotFoundException(\"Could not find medication to delete with id \" + id.getIdPart());\n+\t\t}\n+\t\tOperationOutcome retVal = new OperationOutcome();\n+\t\tretVal.setId(id.getIdPart());\n+\t\tretVal.getText().setDivAsString(\"Deleted successfully\");\n+\t\treturn retVal;", "originalCommit": "485372c8a79ce9395c1883e01cccd74d5f72d644", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUwNDk3NA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/211#discussion_r446504974", "bodyText": "Hi @corneliouzbett  sure will do sorry for the late reply", "author": "Akayeshmantha", "createdAt": "2020-06-27T09:17:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2MjU2OQ=="}], "type": "inlineReview", "revised_code": {"commit": "ba1cc7bb53f8ab181218cd0bb6c940b7a37ef9d4", "chunk": "diff --git a/api/src/main/java/org/openmrs/module/fhir2/providers/r4/DiagnosticReportFhirResourceProvider.java b/api/src/main/java/org/openmrs/module/fhir2/providers/r4/DiagnosticReportFhirResourceProvider.java\nindex 272e4a17..b90d4908 100644\n--- a/api/src/main/java/org/openmrs/module/fhir2/providers/r4/DiagnosticReportFhirResourceProvider.java\n+++ b/api/src/main/java/org/openmrs/module/fhir2/providers/r4/DiagnosticReportFhirResourceProvider.java\n\n@@ -88,10 +88,7 @@ public class DiagnosticReportFhirResourceProvider implements IResourceProvider {\n \t\tif (diagnosticReport == null) {\n \t\t\tthrow new ResourceNotFoundException(\"Could not find medication to delete with id \" + id.getIdPart());\n \t\t}\n-\t\tOperationOutcome retVal = new OperationOutcome();\n-\t\tretVal.setId(id.getIdPart());\n-\t\tretVal.getText().setDivAsString(\"Deleted successfully\");\n-\t\treturn retVal;\n+\t\treturn FhirProviderUtils.buildDelete(diagnosticReport);\n \t}\n \t\n \t@Search\n"}}, {"oid": "7e550e5e198ea5ce44373a051fa97d5d79af5e87", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/7e550e5e198ea5ce44373a051fa97d5d79af5e87", "message": "FM2-214: Add delete operation for diagnostic report resource.", "committedDate": "2020-06-27T12:00:59Z", "type": "forcePushed"}, {"oid": "ba1cc7bb53f8ab181218cd0bb6c940b7a37ef9d4", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/ba1cc7bb53f8ab181218cd0bb6c940b7a37ef9d4", "message": "FM2-214: Add delete operation for diagnostic report resource.", "committedDate": "2020-06-27T12:31:43Z", "type": "forcePushed"}, {"oid": "f07ae9d70afd531521738789d323da3090f578c4", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/f07ae9d70afd531521738789d323da3090f578c4", "message": "FM2-214: Add delete operation for diagnostic report resource.", "committedDate": "2020-06-28T18:45:02Z", "type": "forcePushed"}, {"oid": "1e3ff2abeb94907ef5e5fcb13a3ad68d1581a3c6", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/1e3ff2abeb94907ef5e5fcb13a3ad68d1581a3c6", "message": "FM2-214: Add delete operation for diagnostic report resource.", "committedDate": "2020-06-29T11:59:36Z", "type": "commit"}, {"oid": "1e3ff2abeb94907ef5e5fcb13a3ad68d1581a3c6", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/1e3ff2abeb94907ef5e5fcb13a3ad68d1581a3c6", "message": "FM2-214: Add delete operation for diagnostic report resource.", "committedDate": "2020-06-29T11:59:36Z", "type": "forcePushed"}]}