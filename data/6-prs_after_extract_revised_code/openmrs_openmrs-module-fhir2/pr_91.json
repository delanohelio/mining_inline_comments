{"pr_number": 91, "pr_title": "FM2-90 : Add ability to search patients using address-country", "pr_createdAt": "2020-02-26T17:43:38Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/91", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY4NzMzNw==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/91#discussion_r384687337", "bodyText": "Can we add a test after this one to search by country? It should work using \"USA\" as the country.", "author": "ibacher", "createdAt": "2020-02-26T18:40:28Z", "path": "api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java", "diffHunk": "@@ -352,7 +352,7 @@ public void searchForPatients_shouldSearchForPatientsByState() {\n \t@Test\n \tpublic void searchForPatients_shouldSearchForPatientsByPostalCode() {", "originalCommit": "6ab779085519ed61db2a6685ba4274854b6ae926", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2ODE4Mg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/91#discussion_r385168182", "bodyText": "@ibacher What is the minimum for FHIR standards in terms of test code coverage?", "author": "tendomart", "createdAt": "2020-02-27T14:57:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY4NzMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIxMDc2NA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/91#discussion_r385210764", "bodyText": "My target is to have ~90% patch coverage for each PR and to avoid decreases in overall coverage where ever feasible. I know that's more aggressive than most OpenMRS modules, but since this is a new module, it should be an achievable aim.", "author": "ibacher", "createdAt": "2020-02-27T16:11:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY4NzMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2NjM5NA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/91#discussion_r386566394", "bodyText": "Wow, thanks bar set high.", "author": "tendomart", "createdAt": "2020-03-02T18:22:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY4NzMzNw=="}], "type": "inlineReview", "revised_code": {"commit": "4035a9ec52f7544d0c8577488cfea5e1a0d30c41", "chunk": "diff --git a/api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java b/api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java\nindex 24c83016..53605d9d 100644\n--- a/api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java\n+++ b/api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java\n\n@@ -349,6 +351,16 @@ public class FhirPatientDaoImplTest extends BaseModuleContextSensitiveTest {\n \t\tassertThat(results.iterator().next().getUuid(), equalTo(PATIENT_ADDRESS_PATIENT_UUID));\n \t}\n \t\n+\t@Test\n+\tpublic void searchForPatients_shouldSearchForPatientsCountry() {\n+\t\tCollection<Patient> results = dao.searchForPatients(null, null, null, null, null, null, null, null, null, null, null,\n+\t\t    new StringOrListParam().add(new StringParam(PATIENT_ADDRESS_COUNTRY)), null);\n+\t\t\n+\t\tassertThat(results, notNullValue());\n+\t\tassertThat(results, not(empty()));\n+\t\tassertThat(results.iterator().next().getUuid(), equalTo(PATIENT_ADDRESS_PATIENT_UUID));\n+\t}\n+\t\n \t@Test\n \tpublic void searchForPatients_shouldSearchForPatientsByPostalCode() {\n \t\tCollection<Patient> results = dao.searchForPatients(null, null, null, null, null, null, null, null, null, null,\n"}}, {"oid": "4035a9ec52f7544d0c8577488cfea5e1a0d30c41", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/4035a9ec52f7544d0c8577488cfea5e1a0d30c41", "message": "FM2-90 : Add ability to search patients using address-country", "committedDate": "2020-03-02T16:32:11Z", "type": "forcePushed"}, {"oid": "c5b846d264de6d0ef18e5a74d456d082b573828e", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c5b846d264de6d0ef18e5a74d456d082b573828e", "message": "FM2-90 : Add ability to search patients using address-country", "committedDate": "2020-03-02T16:48:03Z", "type": "commit"}, {"oid": "c5b846d264de6d0ef18e5a74d456d082b573828e", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c5b846d264de6d0ef18e5a74d456d082b573828e", "message": "FM2-90 : Add ability to search patients using address-country", "committedDate": "2020-03-02T16:48:03Z", "type": "forcePushed"}]}