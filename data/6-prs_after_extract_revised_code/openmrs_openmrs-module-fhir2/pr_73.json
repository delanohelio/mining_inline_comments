{"pr_number": 73, "pr_title": "FM2-73 Remove the OpenMRS Services from Translators", "pr_createdAt": "2020-02-18T19:55:53Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/73", "timeline": [{"oid": "98815bc3ea3920e72bb48ed4e11ae26bd00d9714", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/98815bc3ea3920e72bb48ed4e11ae26bd00d9714", "message": "Removed LocationService from LocationTranslator", "committedDate": "2020-02-18T19:42:31Z", "type": "commit"}, {"oid": "59b2d4f9f7c41027e04ad6cb89cd9a8e9e34ee98", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/59b2d4f9f7c41027e04ad6cb89cd9a8e9e34ee98", "message": "Removed LocationService from LocationTranslator+", "committedDate": "2020-02-18T19:53:49Z", "type": "commit"}, {"oid": "72e8a062e1974c148e0a01d1825cb44b47979cd8", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/72e8a062e1974c148e0a01d1825cb44b47979cd8", "message": "FM2-73 Remove the references to the OpenMRS Service Layer from Translators", "committedDate": "2020-02-18T21:23:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MzY1MA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/73#discussion_r380943650", "bodyText": "Technically, we don't need this function at all. We can just use the implementation in the PersonDao, which simplifies maintenance.", "author": "ibacher", "createdAt": "2020-02-18T21:24:58Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImpl.java", "diffHunk": "@@ -89,4 +91,13 @@ public PatientIdentifierType getPatientIdentifierTypeByNameOrUuid(String name, S\n \t\treturn sessionFactory.getCurrentSession().createCriteria(Patient.class).createAlias(\"names\", \"names\")\n \t\t        .add(ilike(\"names.familyName\", family, MatchMode.START)).list();\n \t}\n+\t\n+\t@Override\n+\tpublic List<PersonAttribute> getActiveAttributesByPatientAndAttributeTypeUuid(Patient patient,", "originalCommit": "72e8a062e1974c148e0a01d1825cb44b47979cd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0ODY2MQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/73#discussion_r380948661", "bodyText": "@ibacher I am removing that code", "author": "VaishSiddharth", "createdAt": "2020-02-18T21:35:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MzY1MA=="}], "type": "inlineReview", "revised_code": {"commit": "106d0cdae1fb8aa46e58b7ba12028160a34461f8", "chunk": "diff --git a/api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImpl.java b/api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImpl.java\nindex 2034c0cc..031adaca 100644\n--- a/api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImpl.java\n+++ b/api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImpl.java\n\n@@ -91,13 +89,4 @@ public class FhirPatientDaoImpl implements FhirPatientDao {\n \t\treturn sessionFactory.getCurrentSession().createCriteria(Patient.class).createAlias(\"names\", \"names\")\n \t\t        .add(ilike(\"names.familyName\", family, MatchMode.START)).list();\n \t}\n-\t\n-\t@Override\n-\tpublic List<PersonAttribute> getActiveAttributesByPatientAndAttributeTypeUuid(Patient patient,\n-\t        String patientAttributeTypeUuid) {\n-\t\treturn (List<PersonAttribute>) sessionFactory.getCurrentSession().createCriteria(PersonAttribute.class)\n-\t\t        .createAlias(\"person\", \"p\", JoinType.INNER_JOIN, eq(\"p.id\", patient.getId()))\n-\t\t        .createAlias(\"attributeType\", \"pat\").add(eq(\"pat.uuid\", patientAttributeTypeUuid)).add(eq(\"voided\", false))\n-\t\t        .list();\n-\t}\n }\n"}}, {"oid": "106d0cdae1fb8aa46e58b7ba12028160a34461f8", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/106d0cdae1fb8aa46e58b7ba12028160a34461f8", "message": "removed getActiveAttributesByPatientAndAttributeTypeUuid from PatientDAO", "committedDate": "2020-02-18T21:38:46Z", "type": "commit"}]}