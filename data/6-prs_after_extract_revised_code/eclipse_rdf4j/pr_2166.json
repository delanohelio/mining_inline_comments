{"pr_number": 2166, "pr_title": "GH-2119 nodes that introduce a new scope get a \"new scope\" label in the query plan", "pr_createdAt": "2020-05-04T17:48:44Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2166", "timeline": [{"oid": "eddf6831eb840869639a32a9854b2ab2b859039c", "url": "https://github.com/eclipse/rdf4j/commit/eddf6831eb840869639a32a9854b2ab2b859039c", "message": "GH-2119 nodes that introduce a new scope get a \"new scope\" label in the query plans\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-04T17:47:49Z", "type": "commit"}, {"oid": "e2c028da7851d69bd6cb7560e5eeff3452b56ca4", "url": "https://github.com/eclipse/rdf4j/commit/e2c028da7851d69bd6cb7560e5eeff3452b56ca4", "message": "fixed test", "committedDate": "2020-05-04T19:33:46Z", "type": "commit"}, {"oid": "21752b099f254f66854a4499e7523b056269e0a7", "url": "https://github.com/eclipse/rdf4j/commit/21752b099f254f66854a4499e7523b056269e0a7", "message": "Merge branch 'develop' into GH-2119-new-scope-label-for-plans\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-05T07:08:10Z", "type": "commit"}, {"oid": "462446f423ee9abc1f32883742d44db3742a45e0", "url": "https://github.com/eclipse/rdf4j/commit/462446f423ee9abc1f32883742d44db3742a45e0", "message": "Merge branch 'develop' into GH-2119-new-scope-label-for-plans\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-06T05:56:10Z", "type": "commit"}, {"oid": "0f672fdfbf6bf2b6b4e296bc11c2136276548a02", "url": "https://github.com/eclipse/rdf4j/commit/0f672fdfbf6bf2b6b4e296bc11c2136276548a02", "message": "fixed the old plan printer\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-06T06:02:56Z", "type": "commit"}, {"oid": "8b5e94bf427b9d002ddbf99661778bf2f5c6e124", "url": "https://github.com/eclipse/rdf4j/commit/8b5e94bf427b9d002ddbf99661778bf2f5c6e124", "message": "experimental tag\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-06T06:08:04Z", "type": "commit"}, {"oid": "ab44060c370dc64dd976eef7d3095abe8890ef58", "url": "https://github.com/eclipse/rdf4j/commit/ab44060c370dc64dd976eef7d3095abe8890ef58", "message": "fix test\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-06T06:10:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU2NTM2NQ==", "url": "https://github.com/eclipse/rdf4j/pull/2166#discussion_r420565365", "bodyText": "This is really minor, but it would be slightly more robust to cast to VariableScopeChange instead, as there may be future (third party) algebra extensions that don't extend AbstractQueryModelNode, but do implement the interface.", "author": "jeenbroekstra", "createdAt": "2020-05-06T06:14:53Z", "path": "core/queryalgebra/model/src/main/java/org/eclipse/rdf4j/query/algebra/helpers/QueryModelTreePrinter.java", "diffHunk": "@@ -67,6 +69,20 @@ protected void meetNode(QueryModelNode node) {\n \t\t}\n \n \t\tsb.append(node.getSignature());\n+\n+\t\tif (node instanceof AbstractQueryModelNode) {\n+\t\t\tif (((AbstractQueryModelNode) node).isVariableScopeChange()) {", "originalCommit": "ab44060c370dc64dd976eef7d3095abe8890ef58", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "023baf8cda258347cf7801b35f5e67e39f9ee0bb", "chunk": "diff --git a/core/queryalgebra/model/src/main/java/org/eclipse/rdf4j/query/algebra/helpers/QueryModelTreePrinter.java b/core/queryalgebra/model/src/main/java/org/eclipse/rdf4j/query/algebra/helpers/QueryModelTreePrinter.java\nindex c30674667..e7e5c60c5 100644\n--- a/core/queryalgebra/model/src/main/java/org/eclipse/rdf4j/query/algebra/helpers/QueryModelTreePrinter.java\n+++ b/core/queryalgebra/model/src/main/java/org/eclipse/rdf4j/query/algebra/helpers/QueryModelTreePrinter.java\n\n@@ -70,8 +71,8 @@ public class QueryModelTreePrinter extends AbstractQueryModelVisitor<RuntimeExce\n \n \t\tsb.append(node.getSignature());\n \n-\t\tif (node instanceof AbstractQueryModelNode) {\n-\t\t\tif (((AbstractQueryModelNode) node).isVariableScopeChange()) {\n+\t\tif (node instanceof VariableScopeChange) {\n+\t\t\tif (((VariableScopeChange) node).isVariableScopeChange()) {\n \t\t\t\tsb.append(\" (new scope)\");\n \t\t\t}\n \t\t}\n"}}, {"oid": "023baf8cda258347cf7801b35f5e67e39f9ee0bb", "url": "https://github.com/eclipse/rdf4j/commit/023baf8cda258347cf7801b35f5e67e39f9ee0bb", "message": "code review changes\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-05-06T07:32:54Z", "type": "commit"}]}