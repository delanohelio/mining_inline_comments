{"pr_number": 2098, "pr_title": "GH-2097 Optimise clear() in ShaclSail", "pr_createdAt": "2020-04-15T10:54:22Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2098", "timeline": [{"oid": "eeed5c32caadd092f574e4e39d415a5b408a6205", "url": "https://github.com/eclipse/rdf4j/commit/eeed5c32caadd092f574e4e39d415a5b408a6205", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-15T11:01:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg1NTU0NQ==", "url": "https://github.com/eclipse/rdf4j/pull/2098#discussion_r408855545", "bodyText": "Missing curlies.", "author": "jeenbroekstra", "createdAt": "2020-04-15T13:48:19Z", "path": "core/sail/shacl/src/main/java/org/eclipse/rdf4j/sail/shacl/AST/SimplePath.java", "diffHunk": "@@ -31,7 +32,10 @@\n \t}\n \n \t@Override\n-\tpublic boolean requiresEvaluation(SailConnection addedStatements, SailConnection removedStatements) {\n+\tpublic boolean requiresEvaluation(SailConnection addedStatements, SailConnection removedStatements, Stats stats) {\n+\n+\t\tif (stats.isEmpty())\n+\t\t\treturn false;", "originalCommit": "eeed5c32caadd092f574e4e39d415a5b408a6205", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "aec604640a3f87376d90b2063abbd99b3c90beac", "chunk": "diff --git a/core/sail/shacl/src/main/java/org/eclipse/rdf4j/sail/shacl/AST/SimplePath.java b/core/sail/shacl/src/main/java/org/eclipse/rdf4j/sail/shacl/AST/SimplePath.java\nindex 3be665caea..6b543daa3f 100644\n--- a/core/sail/shacl/src/main/java/org/eclipse/rdf4j/sail/shacl/AST/SimplePath.java\n+++ b/core/sail/shacl/src/main/java/org/eclipse/rdf4j/sail/shacl/AST/SimplePath.java\n\n@@ -34,8 +34,9 @@ public class SimplePath extends Path {\n \t@Override\n \tpublic boolean requiresEvaluation(SailConnection addedStatements, SailConnection removedStatements, Stats stats) {\n \n-\t\tif (stats.isEmpty())\n+\t\tif (stats.isEmpty()) {\n \t\t\treturn false;\n+\t\t}\n \n \t\treturn addedStatements.hasStatement(null, path, null, false)\n \t\t\t\t|| removedStatements.hasStatement(null, path, null, false);\n"}}, {"oid": "aec604640a3f87376d90b2063abbd99b3c90beac", "url": "https://github.com/eclipse/rdf4j/commit/aec604640a3f87376d90b2063abbd99b3c90beac", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-15T14:07:28Z", "type": "commit"}, {"oid": "aec604640a3f87376d90b2063abbd99b3c90beac", "url": "https://github.com/eclipse/rdf4j/commit/aec604640a3f87376d90b2063abbd99b3c90beac", "message": "GH-2097 added stats for tracking if the sail is empty and use this to optimize validation when clear() has been called\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-04-15T14:07:28Z", "type": "forcePushed"}]}