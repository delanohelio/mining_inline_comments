{"pr_number": 2067, "pr_title": "GH-2006: fix handling of external bindings in FedX SingleSourceQuery", "pr_createdAt": "2020-04-03T10:14:11Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2067", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkwNDE3NA==", "url": "https://github.com/eclipse/rdf4j/pull/2067#discussion_r402904174", "bodyText": "Note that this is a slight change in the interface. Let me know if this is OK for a patch release.\nI do consider this as an internal interface only.\nAs an alternitive I would need to duplicate the method (which is currently only called in a single location for single source queries)", "author": "aschwarte10", "createdAt": "2020-04-03T10:16:37Z", "path": "tools/federation/src/main/java/org/eclipse/rdf4j/federated/evaluation/TripleSource.java", "diffHunk": "@@ -82,6 +83,7 @@\n \t * @throws QueryEvaluationException\n \t */\n \tpublic CloseableIteration<BindingSet, QueryEvaluationException> getStatements(String preparedQuery,\n+\t\t\tBindingSet queryBindings,", "originalCommit": "f24b3653d058ba9dbfee4239567244476c836493", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk3ODczNg==", "url": "https://github.com/eclipse/rdf4j/pull/2067#discussion_r402978736", "bodyText": "Usually for a public interface/class and a public method the method signature would have to stay the same except for between major version. In that case I would propose to introduce a new method, mark this one as deprecated and then we can remove it in 4.0.0 release.\nHowever, if it's an actual bug where the queryBindings should have been provided and are required for this method to function correctly, then I'm not sure.\n@jeenbroekstra should decide if that is the case.", "author": "hmottestad", "createdAt": "2020-04-03T12:45:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkwNDE3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQxMjMxMQ==", "url": "https://github.com/eclipse/rdf4j/pull/2067#discussion_r403412311", "bodyText": "I very much doubt that in practice, third parties will have started relying directly on this method. But of course, strictly speaking, this is a public method and therefore this is a breaking change. I'd rather err on the side of being overly strict than catching anyone who relies on us observing semver to be caught out.\nIt would be fairly simple to keep the old method signature in deprecated form and fill in null for the BindingSet argument. Let's do that, just to be sure, and then we can comfortably get away with doing this as part of a patch.", "author": "jeenbroekstra", "createdAt": "2020-04-04T02:33:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkwNDE3NA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "73d22baa021baadd80ed571415ab7b211797fa57", "url": "https://github.com/eclipse/rdf4j/commit/73d22baa021baadd80ed571415ab7b211797fa57", "message": "GH-2006: fix handling of external bindings in FedX SingleSourceQuery\n\nThis change correctly set externally passed binding to single source\nqueries, i.e. where the query is relevant at a single owner (and thus\nthe original query string is passed as-is)\n\nSigned-off-by: Andreas Schwarte <aschwarte10@gmail.com>", "committedDate": "2020-04-05T12:31:39Z", "type": "commit"}, {"oid": "73d22baa021baadd80ed571415ab7b211797fa57", "url": "https://github.com/eclipse/rdf4j/commit/73d22baa021baadd80ed571415ab7b211797fa57", "message": "GH-2006: fix handling of external bindings in FedX SingleSourceQuery\n\nThis change correctly set externally passed binding to single source\nqueries, i.e. where the query is relevant at a single owner (and thus\nthe original query string is passed as-is)\n\nSigned-off-by: Andreas Schwarte <aschwarte10@gmail.com>", "committedDate": "2020-04-05T12:31:39Z", "type": "forcePushed"}]}