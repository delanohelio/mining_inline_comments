{"pr_number": 166, "pr_title": " (#127) - Extract Path interface for SliceRoute", "pr_createdAt": "2020-05-30T10:38:45Z", "pr_url": "https://github.com/artipie/http/pull/166", "timeline": [{"oid": "ade0cf732b34ba77b4b68ec4e8a894030864b866", "url": "https://github.com/artipie/http/commit/ade0cf732b34ba77b4b68ec4e8a894030864b866", "message": "(#127) - Extract Path interface for SliceRoute", "committedDate": "2020-05-30T10:40:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE3NTUxMg==", "url": "https://github.com/artipie/http/pull/166#discussion_r433175512", "bodyText": "@victornoel I think it's too big change, since all dependencies will be broken after this update. Can we mark this class as deprecated instead of removing it, and extend it from new Path interface? Maybe new Path interface can be extracted to upper level in that case.", "author": "g4s8", "createdAt": "2020-06-01T11:12:49Z", "path": "src/main/java/com/artipie/http/rt/SliceRoute.java", "diffHunk": "@@ -97,52 +97,20 @@ public Response response(final String line,\n \n     /**\n      * Route path.\n-     * <p>\n-     * A path to slice with routing rule. If\n-     * {@link RtRule} passed, then the request will be redirected to\n-     * underlying {@link Slice}.\n-     * </p>\n-     * @since 0.5\n+     * @since 0.10\n      */\n-    public static final class Path {", "originalCommit": "ade0cf732b34ba77b4b68ec4e8a894030864b866", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fc4f5abcbf77a63d3c98abce2ea4553c259e1717", "chunk": "diff --git a/src/main/java/com/artipie/http/rt/SliceRoute.java b/src/main/java/com/artipie/http/rt/SliceRoute.java\nindex ca7177a..b339a50 100644\n--- a/src/main/java/com/artipie/http/rt/SliceRoute.java\n+++ b/src/main/java/com/artipie/http/rt/SliceRoute.java\n\n@@ -97,20 +97,38 @@ public final class SliceRoute implements Slice {\n \n     /**\n      * Route path.\n-     * @since 0.10\n+     * <p>\n+     * A path to slice with routing rule. If\n+     * {@link RtRule} passed, then the request will be redirected to\n+     * underlying {@link Slice}.\n+     * </p>\n+     * @since 0.5\n+     * @deprecated Use {@link RtRulePath} instead\n      */\n-    public interface Path {\n+    @Deprecated\n+    public static final class Path implements RtPath {\n+\n         /**\n-         * Try respond.\n-         * @param line Request line\n-         * @param headers Headers\n-         * @param body Body\n-         * @return Response if passed routing rule\n+         * Wrapped.\n          */\n-        Optional<Response> response(\n-            String line,\n-            Iterable<Map.Entry<String, String>> headers,\n-            Publisher<ByteBuffer> body\n-        );\n+        private final RtPath wrapped;\n+\n+        /**\n+         * New routing path.\n+         * @param rule Rules to apply\n+         * @param slice Slice to call\n+         */\n+        public Path(final RtRule rule, final Slice slice) {\n+            this.wrapped = new RtRulePath(rule, slice);\n+        }\n+\n+        @Override\n+        public Optional<Response> response(\n+            final String line,\n+            final Iterable<Map.Entry<String, String>> headers,\n+            final Publisher<ByteBuffer> body\n+        ) {\n+            return this.wrapped.response(line, headers, body);\n+        }\n     }\n }\n"}}, {"oid": "39ba02bf0110e818c05694bb3de911f6f671eb1d", "url": "https://github.com/artipie/http/commit/39ba02bf0110e818c05694bb3de911f6f671eb1d", "message": "(#127) - Extract Path interface for SliceRoute", "committedDate": "2020-06-02T17:49:37Z", "type": "commit"}, {"oid": "fc4f5abcbf77a63d3c98abce2ea4553c259e1717", "url": "https://github.com/artipie/http/commit/fc4f5abcbf77a63d3c98abce2ea4553c259e1717", "message": "(#127) - Keep backward compatibility", "committedDate": "2020-06-02T17:58:45Z", "type": "commit"}, {"oid": "fc4f5abcbf77a63d3c98abce2ea4553c259e1717", "url": "https://github.com/artipie/http/commit/fc4f5abcbf77a63d3c98abce2ea4553c259e1717", "message": "(#127) - Keep backward compatibility", "committedDate": "2020-06-02T17:58:45Z", "type": "forcePushed"}]}