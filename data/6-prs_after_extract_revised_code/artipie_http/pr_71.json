{"pr_number": 71, "pr_title": "Split improvements", "pr_createdAt": "2020-03-11T13:28:33Z", "pr_url": "https://github.com/artipie/http/pull/71", "timeline": [{"oid": "2a61eedf3bb3f89e72d71384c3d23818e6a40412", "url": "https://github.com/artipie/http/commit/2a61eedf3bb3f89e72d71384c3d23818e6a40412", "message": "add a test with complex splitter", "committedDate": "2020-03-11T13:00:30Z", "type": "commit"}, {"oid": "224aed9a4ec1ab043143d9da2623a21ca1c182f0", "url": "https://github.com/artipie/http/commit/224aed9a4ec1ab043143d9da2623a21ca1c182f0", "message": "last element has index 0", "committedDate": "2020-03-11T13:26:40Z", "type": "commit"}, {"oid": "4bbe86eb4b689e71675c6c1d4f18a06ed6db8847", "url": "https://github.com/artipie/http/commit/4bbe86eb4b689e71675c6c1d4f18a06ed6db8847", "message": "fix qulice warnings", "committedDate": "2020-03-11T13:31:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQzMzQ0NQ==", "url": "https://github.com/artipie/http/pull/71#discussion_r391433445", "bodyText": "@Sammers21 you say in PR description:\n\nFor now, stream splitter does now work correctly with delimiters of size 2 or more. This PR fixes the problem\n\nSo why did it work with small delimiters then, and how using 0 index can fixe it?", "author": "g4s8", "createdAt": "2020-03-12T07:06:13Z", "path": "src/main/java/com/artipie/http/stream/ByteByByteSplit.java", "diffHunk": "@@ -173,7 +173,7 @@ public synchronized void onNext(final ByteBuffer next) {\n         for (final byte each : bytes) {\n             final boolean eviction = this.ring.isAtFullCapacity();\n             if (eviction) {\n-                final Byte last = this.ring.get(this.delim.length - 1);\n+                final Byte last = this.ring.get(0);", "originalCommit": "4bbe86eb4b689e71675c6c1d4f18a06ed6db8847", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5NTE5OA==", "url": "https://github.com/artipie/http/pull/71#discussion_r391495198", "bodyText": "@g4s8, Because in the single element case, the last element is also the first one in the buffer.", "author": "Sammers21", "createdAt": "2020-03-12T09:31:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQzMzQ0NQ=="}], "type": "inlineReview", "revised_code": null}]}