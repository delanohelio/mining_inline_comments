{"pr_number": 171, "pr_title": "Any rule", "pr_createdAt": "2020-06-11T20:02:54Z", "pr_url": "https://github.com/artipie/http/pull/171", "timeline": [{"oid": "46f15faaaf0d1b7f314dae1b9ad8e9d0dc876cde", "url": "https://github.com/artipie/http/commit/46f15faaaf0d1b7f314dae1b9ad8e9d0dc876cde", "message": "#170 - any rule", "committedDate": "2020-06-11T20:02:23Z", "type": "commit"}, {"oid": "c5ad8d26c249fab622b3054b496d9392a11e43f3", "url": "https://github.com/artipie/http/commit/c5ad8d26c249fab622b3054b496d9392a11e43f3", "message": "#170 - qulice warnings fixes", "committedDate": "2020-06-11T20:07:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4ODI3NQ==", "url": "https://github.com/artipie/http/pull/171#discussion_r440088275", "bodyText": "@Sammers21 I'd deprecate this implementation and create new All to use same syntax for rules (All, Any)", "author": "g4s8", "createdAt": "2020-06-15T10:44:20Z", "path": "src/main/java/com/artipie/http/rt/RtRule.java", "diffHunk": "@@ -55,7 +55,7 @@\n     boolean apply(String line, Iterable<Map.Entry<String, String>> headers);\n \n     /**\n-     * Route by multiple rules.\n+     * This rule is matched only when all of the rules is matched.", "originalCommit": "c5ad8d26c249fab622b3054b496d9392a11e43f3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ea992b33d10b665e8d2f559a69ce8ea0a61bce18", "chunk": "diff --git a/src/main/java/com/artipie/http/rt/RtRule.java b/src/main/java/com/artipie/http/rt/RtRule.java\nindex 62e6e3a..3974baf 100644\n--- a/src/main/java/com/artipie/http/rt/RtRule.java\n+++ b/src/main/java/com/artipie/http/rt/RtRule.java\n\n@@ -55,10 +55,20 @@ public interface RtRule {\n     boolean apply(String line, Iterable<Map.Entry<String, String>> headers);\n \n     /**\n-     * This rule is matched only when all of the rules is matched.\n+     * This rule is matched only when all of the rules are matched.\n+     * This class is kept for backward compatibility reasons.\n      * @since 0.5\n+     * @deprecated use {@link All} instead\n      */\n-    final class Multiple implements RtRule {\n+    @Deprecated\n+    final class Multiple extends All {\n+    }\n+\n+    /**\n+     * This rule is matched only when all of the rules are matched.\n+     * @since 0.10\n+     */\n+    class All implements RtRule {\n \n         /**\n          * Rules.\n"}}, {"oid": "829a860f10740f4afec7920233f63ed799e82af8", "url": "https://github.com/artipie/http/commit/829a860f10740f4afec7920233f63ed799e82af8", "message": "Merge branch 'master' into any", "committedDate": "2020-06-15T15:34:57Z", "type": "commit"}, {"oid": "ea992b33d10b665e8d2f559a69ce8ea0a61bce18", "url": "https://github.com/artipie/http/commit/ea992b33d10b665e8d2f559a69ce8ea0a61bce18", "message": "#170 - rename Multiple to All", "committedDate": "2020-06-15T15:42:13Z", "type": "commit"}, {"oid": "2a4660bd33bd66befb03e64a792c1d95f20df5ee", "url": "https://github.com/artipie/http/commit/2a4660bd33bd66befb03e64a792c1d95f20df5ee", "message": "Merge branch 'any' of github.com:Sammers21/http into any", "committedDate": "2020-06-15T15:42:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU3MDY0MA==", "url": "https://github.com/artipie/http/pull/171#discussion_r440570640", "bodyText": "@Sammers21 if you don't put a constructor for this class, Java will generate default empty constructor which calls All varargs constructor with empty array:\nfinal class Multiple extends All {\n  Multiple() {\n    super(new RtRule[0]);\n  }\n}\n\nSo existing code won't be able to access other constructors from All.", "author": "g4s8", "createdAt": "2020-06-16T03:50:57Z", "path": "src/main/java/com/artipie/http/rt/RtRule.java", "diffHunk": "@@ -55,10 +55,20 @@\n     boolean apply(String line, Iterable<Map.Entry<String, String>> headers);\n \n     /**\n-     * Route by multiple rules.\n+     * This rule is matched only when all of the rules are matched.\n+     * This class is kept for backward compatibility reasons.\n      * @since 0.5\n+     * @deprecated use {@link All} instead\n      */\n-    final class Multiple implements RtRule {\n+    @Deprecated\n+    final class Multiple extends All {", "originalCommit": "2a4660bd33bd66befb03e64a792c1d95f20df5ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f92f2bdc61a96dbcc6f0a5cb2519438c2d1d4ff3", "chunk": "diff --git a/src/main/java/com/artipie/http/rt/RtRule.java b/src/main/java/com/artipie/http/rt/RtRule.java\nindex 3974baf..4191066 100644\n--- a/src/main/java/com/artipie/http/rt/RtRule.java\n+++ b/src/main/java/com/artipie/http/rt/RtRule.java\n\n@@ -62,6 +62,23 @@ public interface RtRule {\n      */\n     @Deprecated\n     final class Multiple extends All {\n+\n+        /**\n+         * Ctor.\n+         * @param rules Rules array\n+         */\n+        public Multiple(final RtRule... rules) {\n+            super(new ListOf<>(rules));\n+        }\n+\n+        /**\n+         * Ctor.\n+         * @param rules Rules\n+         */\n+        public Multiple(final Iterable<RtRule> rules) {\n+            super(rules);\n+        }\n+\n     }\n \n     /**\n"}}, {"oid": "f92f2bdc61a96dbcc6f0a5cb2519438c2d1d4ff3", "url": "https://github.com/artipie/http/commit/f92f2bdc61a96dbcc6f0a5cb2519438c2d1d4ff3", "message": "#170 - keep old constructor for Multiple", "committedDate": "2020-06-16T04:26:06Z", "type": "commit"}]}