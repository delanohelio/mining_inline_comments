{"pr_number": 270, "pr_title": "#194 - Authorization header parsing extracted", "pr_createdAt": "2020-11-26T13:54:26Z", "pr_url": "https://github.com/artipie/http/pull/270", "timeline": [{"oid": "b40da86d2d27fb2cb0b72eb1a71664b07195eb0e", "url": "https://github.com/artipie/http/commit/b40da86d2d27fb2cb0b72eb1a71664b07195eb0e", "message": "#194 - Authorization header parsing extracted", "committedDate": "2020-11-26T13:54:49Z", "type": "commit"}, {"oid": "b40da86d2d27fb2cb0b72eb1a71664b07195eb0e", "url": "https://github.com/artipie/http/commit/b40da86d2d27fb2cb0b72eb1a71664b07195eb0e", "message": "#194 - Authorization header parsing extracted", "committedDate": "2020-11-26T13:54:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA5MTU1MA==", "url": "https://github.com/artipie/http/pull/270#discussion_r531091550", "bodyText": "@olegmoz codecov is complaining that this branch is not covered with test, I'd suggest to cover it", "author": "olenagerasimova", "createdAt": "2020-11-26T15:10:55Z", "path": "src/main/java/com/artipie/http/headers/Authorization.java", "diffHunk": "@@ -73,6 +77,40 @@ public Authorization(final Headers headers) {\n         this(new RqHeaders.Single(headers, Authorization.NAME).asString());\n     }\n \n+    /**\n+     * Read scheme from header value.\n+     *\n+     * @return Scheme string.\n+     */\n+    public String scheme() {\n+        return this.matcher().group(\"scheme\");\n+    }\n+\n+    /**\n+     * Read credentials from header value.\n+     *\n+     * @return Credentials string.\n+     */\n+    public String credentials() {\n+        return this.matcher().group(\"credentials\");\n+    }\n+\n+    /**\n+     * Creates matcher for header value.\n+     *\n+     * @return Matcher for header value.\n+     */\n+    private Matcher matcher() {\n+        final String value = this.getValue();\n+        final Matcher matcher = VALUE.matcher(value);\n+        if (!matcher.matches()) {", "originalCommit": "b40da86d2d27fb2cb0b72eb1a71664b07195eb0e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "401e3af1ee44b8334f4f909742282ea8b4a1116c", "chunk": "diff --git a/src/main/java/com/artipie/http/headers/Authorization.java b/src/main/java/com/artipie/http/headers/Authorization.java\nindex 4820eb0..4c37967 100644\n--- a/src/main/java/com/artipie/http/headers/Authorization.java\n+++ b/src/main/java/com/artipie/http/headers/Authorization.java\n\n@@ -104,7 +104,7 @@ public final class Authorization extends Header.Wrap {\n         final String value = this.getValue();\n         final Matcher matcher = VALUE.matcher(value);\n         if (!matcher.matches()) {\n-            throw new IllegalArgumentException(\n+            throw new IllegalStateException(\n                 String.format(\"Failed to parse header value: %s\", value)\n             );\n         }\n"}}, {"oid": "401e3af1ee44b8334f4f909742282ea8b4a1116c", "url": "https://github.com/artipie/http/commit/401e3af1ee44b8334f4f909742282ea8b4a1116c", "message": "#261 - Changes by review", "committedDate": "2020-11-26T17:11:57Z", "type": "commit"}, {"oid": "a42d49348310da4955c3c46d268d478e48bc44f7", "url": "https://github.com/artipie/http/commit/a42d49348310da4955c3c46d268d478e48bc44f7", "message": "Merge remote-tracking branch 'origin/master' into 194-authorization-parsing\n\n# Conflicts:\n#\tsrc/main/java/com/artipie/http/auth/BasicAuthScheme.java\n#\tsrc/main/java/com/artipie/http/auth/BearerAuthScheme.java", "committedDate": "2020-11-26T17:14:37Z", "type": "commit"}]}