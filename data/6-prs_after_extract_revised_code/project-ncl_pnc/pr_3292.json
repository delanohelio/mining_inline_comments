{"pr_number": 3292, "pr_title": "[NCL-5994] Build config creating fails with 500 when environment does\u2026", "pr_createdAt": "2020-09-08T07:54:20Z", "pr_url": "https://github.com/project-ncl/pnc/pull/3292", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzA2Ng==", "url": "https://github.com/project-ncl/pnc/pull/3292#discussion_r484743066", "bodyText": "Typo :D\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new EmptyEntityException(\"Build environment \" + envId + \" does not exists.\");\n          \n          \n            \n                        throw new EmptyEntityException(\"Build environment \" + envId + \" does not exist.\");", "author": "michalovjan", "createdAt": "2020-09-08T08:28:56Z", "path": "facade/src/main/java/org/jboss/pnc/facade/providers/BuildConfigurationProviderImpl.java", "diffHunk": "@@ -250,6 +258,14 @@ private void validateIfItsNotConflicted(BuildConfiguration buildConfigurationRes\n         });\n     }\n \n+    private void validateEnvironment(BuildConfiguration buildConfigurationRest) {\n+        String envId = buildConfigurationRest.getEnvironment().getId();\n+        BuildEnvironment env = buildEnvironmentRepository.queryById(Integer.valueOf(envId));\n+        if (env == null) {\n+            throw new EmptyEntityException(\"Build environment \" + envId + \" does not exists.\");", "originalCommit": "3310ed161f6f3f0fe0de14028c06bf89bc8c226e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0NTk2NQ==", "url": "https://github.com/project-ncl/pnc/pull/3292#discussion_r484745965", "bodyText": "fixed \ud83d\udc4d", "author": "jomrazek", "createdAt": "2020-09-08T08:33:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzA2Ng=="}], "type": "inlineReview", "revised_code": {"commit": "b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "chunk": "diff --git a/facade/src/main/java/org/jboss/pnc/facade/providers/BuildConfigurationProviderImpl.java b/facade/src/main/java/org/jboss/pnc/facade/providers/BuildConfigurationProviderImpl.java\nindex 2c96d39ca..871260f2b 100644\n--- a/facade/src/main/java/org/jboss/pnc/facade/providers/BuildConfigurationProviderImpl.java\n+++ b/facade/src/main/java/org/jboss/pnc/facade/providers/BuildConfigurationProviderImpl.java\n\n@@ -262,7 +262,7 @@ public class BuildConfigurationProviderImpl extends\n         String envId = buildConfigurationRest.getEnvironment().getId();\n         BuildEnvironment env = buildEnvironmentRepository.queryById(Integer.valueOf(envId));\n         if (env == null) {\n-            throw new EmptyEntityException(\"Build environment \" + envId + \" does not exists.\");\n+            throw new EmptyEntityException(\"Build environment \" + envId + \" does not exist.\");\n         }\n     }\n \n"}}, {"oid": "b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "url": "https://github.com/project-ncl/pnc/commit/b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "message": "[NCL-5994] Build config creating fails with 500 when environment doesn't exists", "committedDate": "2020-09-08T08:32:31Z", "type": "commit"}, {"oid": "b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "url": "https://github.com/project-ncl/pnc/commit/b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "message": "[NCL-5994] Build config creating fails with 500 when environment doesn't exists", "committedDate": "2020-09-08T08:32:31Z", "type": "forcePushed"}]}