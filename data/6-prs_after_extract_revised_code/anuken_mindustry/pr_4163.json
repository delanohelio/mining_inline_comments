{"pr_number": 4163, "pr_title": "Display unit cap modifier for core blocks", "pr_createdAt": "2020-12-29T09:26:49Z", "pr_url": "https://github.com/Anuken/Mindustry/pull/4163", "timeline": [{"oid": "df81ee329c497dd255c800f1e120a3dc9b5a2ec3", "url": "https://github.com/Anuken/Mindustry/commit/df81ee329c497dd255c800f1e120a3dc9b5a2ec3", "message": "Display unit cap modifier for core blocks", "committedDate": "2020-12-29T09:24:08Z", "type": "commit"}, {"oid": "f346ffe4301e0010243d67a5741117402d0bd94f", "url": "https://github.com/Anuken/Mindustry/commit/f346ffe4301e0010243d67a5741117402d0bd94f", "message": "Move maxUnits stat from crafting to general", "committedDate": "2020-12-29T09:27:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc1MDc1Mg==", "url": "https://github.com/Anuken/Mindustry/pull/4163#discussion_r549750752", "bodyText": "This is a very simple case, you shouldn't need to use Strings.format here. Just concatenate.\nI don't think the space between + num is necessary.", "author": "Anuken", "createdAt": "2020-12-29T15:41:33Z", "path": "core/src/mindustry/world/Block.java", "diffHunk": "@@ -375,6 +375,8 @@ public void setBars(){\n         if(hasItems && configurable){\n             bars.add(\"items\", entity -> new Bar(() -> Core.bundle.format(\"bar.items\", entity.items.total()), () -> Pal.items, () -> (float)entity.items.total() / itemCapacity));\n         }\n+        \n+        if(flags.contains(BlockFlag.unitModifier)) stats.add(Stat.maxUnits, Strings.format(\"@ @\", unitCapModifier < 0 ? '-' : '+', Math.abs(unitCapModifier)));", "originalCommit": "f346ffe4301e0010243d67a5741117402d0bd94f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgwMTMyNg==", "url": "https://github.com/Anuken/Mindustry/pull/4163#discussion_r549801326", "bodyText": "oh it kinda went wrong the first time and the numbers were in the 40-50 range, probably due to the char?", "author": "Quezler", "createdAt": "2020-12-29T18:16:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc1MDc1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgwMzE3Mw==", "url": "https://github.com/Anuken/Mindustry/pull/4163#discussion_r549803173", "bodyText": "Use double-quotes for string concatenation instead.", "author": "Anuken", "createdAt": "2020-12-29T18:23:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc1MDc1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f459b43d4e13b46306e1342814c2929e0bd27c17", "chunk": "diff --git a/core/src/mindustry/world/Block.java b/core/src/mindustry/world/Block.java\nindex f64bb9217..b630add99 100644\n--- a/core/src/mindustry/world/Block.java\n+++ b/core/src/mindustry/world/Block.java\n\n@@ -376,7 +376,7 @@ public class Block extends UnlockableContent{\n             bars.add(\"items\", entity -> new Bar(() -> Core.bundle.format(\"bar.items\", entity.items.total()), () -> Pal.items, () -> (float)entity.items.total() / itemCapacity));\n         }\n         \n-        if(flags.contains(BlockFlag.unitModifier)) stats.add(Stat.maxUnits, Strings.format(\"@ @\", unitCapModifier < 0 ? '-' : '+', Math.abs(unitCapModifier)));\n+        if(flags.contains(BlockFlag.unitModifier)) stats.add(Stat.maxUnits, (unitCapModifier < 0 ? \"-\" : \"+\") + Math.abs(unitCapModifier));\n     }\n \n     public boolean canReplace(Block other){\n"}}, {"oid": "f459b43d4e13b46306e1342814c2929e0bd27c17", "url": "https://github.com/Anuken/Mindustry/commit/f459b43d4e13b46306e1342814c2929e0bd27c17", "message": "Omit string formatting", "committedDate": "2020-12-29T18:38:02Z", "type": "commit"}]}