{"pr_number": 2821, "pr_title": "Descriptions for schematics.", "pr_createdAt": "2020-10-03T20:01:24Z", "pr_url": "https://github.com/Anuken/Mindustry/pull/2821", "timeline": [{"oid": "5ffff9c151b522c374e0992f7719ff7dc6ca6bb7", "url": "https://github.com/Anuken/Mindustry/commit/5ffff9c151b522c374e0992f7719ff7dc6ca6bb7", "message": "description for schematics", "committedDate": "2020-10-03T19:43:52Z", "type": "commit"}, {"oid": "eedb90ed167fb449d771d8ac08c3274829bbf6dc", "url": "https://github.com/Anuken/Mindustry/commit/eedb90ed167fb449d771d8ac08c3274829bbf6dc", "message": "bigger description area", "committedDate": "2020-10-04T12:27:05Z", "type": "commit"}, {"oid": "bdc69249bbb763c6d4d35912319c7073629ac42d", "url": "https://github.com/Anuken/Mindustry/commit/bdc69249bbb763c6d4d35912319c7073629ac42d", "message": "fix newline", "committedDate": "2020-10-04T13:03:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgwNzIzMw==", "url": "https://github.com/Anuken/Mindustry/pull/2821#discussion_r502807233", "bodyText": "Is it really important for the player to get a description entry dialog when saving the schematic for the first time? If a player cares, they can add it in later. Could be annoying to have an extra field pop up every time you want to save a small utility schematic.", "author": "Anuken", "createdAt": "2020-10-10T16:26:16Z", "path": "core/src/mindustry/input/InputHandler.java", "diffHunk": "@@ -499,11 +500,40 @@ protected void showSchematicSave(){\n                 });\n             }else{\n                 lastSchematic.tags.put(\"name\", text);\n+                lastSchematic.tags.put(\"description\", description);\n                 schematics.add(lastSchematic);\n                 ui.showInfoFade(\"@schematic.saved\");\n                 ui.schematics.showInfo(lastSchematic);\n             }\n-        });\n+        };\n+\n+        new Dialog(\"@schematic.add\"){{", "originalCommit": "bdc69249bbb763c6d4d35912319c7073629ac42d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgxMjk5MQ==", "url": "https://github.com/Anuken/Mindustry/pull/2821#discussion_r502812991", "bodyText": "Yes, you are right. I'll fix it soon.", "author": "summetdev", "createdAt": "2020-10-10T17:30:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgwNzIzMw=="}], "type": "inlineReview", "revised_code": {"commit": "d94fdfa50f6cc94cd16b11211f6ede281641a62a", "chunk": "diff --git a/core/src/mindustry/input/InputHandler.java b/core/src/mindustry/input/InputHandler.java\nindex e27a3f15b..677fb4f35 100644\n--- a/core/src/mindustry/input/InputHandler.java\n+++ b/core/src/mindustry/input/InputHandler.java\n\n@@ -500,40 +500,12 @@ public abstract class InputHandler implements InputProcessor, GestureListener{\n                 });\n             }else{\n                 lastSchematic.tags.put(\"name\", text);\n-                lastSchematic.tags.put(\"description\", description);\n+                lastSchematic.tags.put(\"description\", \"\");\n                 schematics.add(lastSchematic);\n                 ui.showInfoFade(\"@schematic.saved\");\n                 ui.schematics.showInfo(lastSchematic);\n             }\n-        };\n-\n-        new Dialog(\"@schematic.add\"){{\n-            cont.margin(30).add(\"@name\").padRight(6f);\n-            TextField nameField = cont.field(\"\", t -> {}).size(330f, 50f).addInputDialog().get();\n-\n-            cont.row();\n-\n-            cont.margin(30).add(\"@editor.description\").padRight(6f);\n-            TextField descripionField = cont.field(\"\", t -> {}).size(330f, 50f).addInputDialog().get();\n-\n-            buttons.defaults().size(120, 54).pad(4);\n-            buttons.button(\"@ok\", () -> {\n-                saveSchematic.get(nameField.getText(), descripionField.getText());\n-                hide();\n-            }).disabled(b -> nameField.getText().isEmpty());\n-            buttons.button(\"@cancel\", this::hide);\n-\n-            keyDown(KeyCode.enter, () -> {\n-                String text = nameField.getText();\n-                if(!text.isEmpty()){\n-                    saveSchematic.get(text, descripionField.getText());\n-                    hide();\n-                }\n-            });\n-            keyDown(KeyCode.escape, this::hide);\n-            keyDown(KeyCode.back, this::hide);\n-            show();\n-        }};\n+        });\n     }\n \n     public void rotateRequests(Seq<BuildPlan> requests, int direction){\n"}}, {"oid": "d94fdfa50f6cc94cd16b11211f6ede281641a62a", "url": "https://github.com/Anuken/Mindustry/commit/d94fdfa50f6cc94cd16b11211f6ede281641a62a", "message": "don't show desc at schem save", "committedDate": "2020-10-10T17:28:43Z", "type": "commit"}]}