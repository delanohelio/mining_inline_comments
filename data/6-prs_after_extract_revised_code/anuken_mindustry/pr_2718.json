{"pr_number": 2718, "pr_title": "Make lightning have frag angle properties", "pr_createdAt": "2020-09-24T22:31:42Z", "pr_url": "https://github.com/Anuken/Mindustry/pull/2718", "timeline": [{"oid": "55e25cc509b989c269a64b2fa3de5cd811e8717b", "url": "https://github.com/Anuken/Mindustry/commit/55e25cc509b989c269a64b2fa3de5cd811e8717b", "message": "Make lightning have frag angle properties\n\nAdds `lightningCone`, which is the full angle of where the lightning direction can be, and `lightningAngle` which is the angle compared to the bullet that the center of the lightning cone is.", "committedDate": "2020-09-24T22:31:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY1ODY2NQ==", "url": "https://github.com/Anuken/Mindustry/pull/2718#discussion_r494658665", "bodyText": "This should go in the function itself for consistency. No extra variable.", "author": "Anuken", "createdAt": "2020-09-24T23:09:18Z", "path": "core/src/mindustry/entities/bullet/BulletType.java", "diffHunk": "@@ -181,7 +184,8 @@ public void hit(Bullet b, float x, float y){\n         }\n \n         for(int i = 0; i < lightning; i++){\n-            Lightning.create(b, lightningColor, lightningDamage < 0 ? damage : lightningDamage, b.x, b.y, Mathf.random(360f), lightningLength + Mathf.random(lightningLengthRand));\n+            float litA = b.rotation() + Mathf.range(lightningCone/2) + lightningAngle;", "originalCommit": "55e25cc509b989c269a64b2fa3de5cd811e8717b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyNDgyNA==", "url": "https://github.com/Anuken/Mindustry/pull/2718#discussion_r494724824", "bodyText": "Is there a button for accepting suggested changes, or is it committed already?", "author": "MEEPofFaith", "createdAt": "2020-09-25T03:20:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY1ODY2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyNTI2MQ==", "url": "https://github.com/Anuken/Mindustry/pull/2718#discussion_r494725261", "bodyText": "There is no suggested code change or commit. It's a verbal request.", "author": "Anuken", "createdAt": "2020-09-25T03:22:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY1ODY2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyNzg5Mw==", "url": "https://github.com/Anuken/Mindustry/pull/2718#discussion_r494727893", "bodyText": "Ok", "author": "MEEPofFaith", "createdAt": "2020-09-25T03:33:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY1ODY2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "9f2697941951dc86db83f497d0d5b988aeac5812", "chunk": "diff --git a/core/src/mindustry/entities/bullet/BulletType.java b/core/src/mindustry/entities/bullet/BulletType.java\nindex d8d449f6c..b2d2f479f 100644\n--- a/core/src/mindustry/entities/bullet/BulletType.java\n+++ b/core/src/mindustry/entities/bullet/BulletType.java\n\n@@ -184,8 +184,7 @@ public abstract class BulletType extends Content{\n         }\n \n         for(int i = 0; i < lightning; i++){\n-            float litA = b.rotation() + Mathf.range(lightningCone/2) + lightningAngle;\n-            Lightning.create(b, lightningColor, lightningDamage < 0 ? damage : lightningDamage, b.x, b.y, litA, lightningLength + Mathf.random(lightningLengthRand));\n+            Lightning.create(b, lightningColor, lightningDamage < 0 ? damage : lightningDamage, b.x, b.y, b.rotation() + Mathf.range(lightningCone/2) + lightningAngle, lightningLength + Mathf.random(lightningLengthRand));\n         }\n     }\n \n"}}, {"oid": "9f2697941951dc86db83f497d0d5b988aeac5812", "url": "https://github.com/Anuken/Mindustry/commit/9f2697941951dc86db83f497d0d5b988aeac5812", "message": "why variable here", "committedDate": "2020-09-25T03:34:02Z", "type": "commit"}]}