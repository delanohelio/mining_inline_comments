{"pr_number": 2970, "pr_title": "Allow Ground Support Units to Heal Blocks", "pr_createdAt": "2020-10-16T01:02:53Z", "pr_url": "https://github.com/Anuken/Mindustry/pull/2970", "timeline": [{"oid": "ba77f8e2aa41db388932289c94742408bfc17060", "url": "https://github.com/Anuken/Mindustry/commit/ba77f8e2aa41db388932289c94742408bfc17060", "message": "implement content", "committedDate": "2020-10-16T00:59:03Z", "type": "commit"}, {"oid": "69b7d15bebea8fb487918b05d69aa81c460301c9", "url": "https://github.com/Anuken/Mindustry/commit/69b7d15bebea8fb487918b05d69aa81c460301c9", "message": "Merge remote-tracking branch 'upstream/master' into ground-support-heal", "committedDate": "2020-10-16T15:49:55Z", "type": "commit"}, {"oid": "9b95b975683d263ffa5477bb27bdc1a7d2cb9b42", "url": "https://github.com/Anuken/Mindustry/commit/9b95b975683d263ffa5477bb27bdc1a7d2cb9b42", "message": "(Should) prevent vela from setting fires to friendly tiles", "committedDate": "2020-10-16T15:54:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTEwMzc3NA==", "url": "https://github.com/Anuken/Mindustry/pull/2970#discussion_r515103774", "bodyText": "formatting", "author": "Anuken", "createdAt": "2020-10-30T13:39:35Z", "path": "core/src/mindustry/entities/bullet/BulletType.java", "diffHunk": "@@ -159,11 +161,12 @@ public void hitTile(Bullet b, Building tile, float initialHealth){\n         if(status == StatusEffects.burning) {\n             Fires.create(tile.tile);\n         }\n-        hit(b);\n-\n+        \n         if(healPercent > 0f && tile.team == b.team && !(tile.block instanceof ConstructBlock)){\n             Fx.healBlockFull.at(tile.x, tile.y, tile.block.size, Pal.heal);\n             tile.heal(healPercent / 100f * tile.maxHealth());\n+        } else {", "originalCommit": "9b95b975683d263ffa5477bb27bdc1a7d2cb9b42", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "de483990ef9a7d6c4028d2b18d0a9485121f9ee5", "chunk": "diff --git a/core/src/mindustry/entities/bullet/BulletType.java b/core/src/mindustry/entities/bullet/BulletType.java\nindex 85bf80f7f..340ae1415 100644\n--- a/core/src/mindustry/entities/bullet/BulletType.java\n+++ b/core/src/mindustry/entities/bullet/BulletType.java\n\n@@ -158,14 +158,14 @@ public abstract class BulletType extends Content{\n     }\n \n     public void hitTile(Bullet b, Building tile, float initialHealth){\n-        if(status == StatusEffects.burning) {\n+        if(status == StatusEffects.burning){\n             Fires.create(tile.tile);\n         }\n         \n         if(healPercent > 0f && tile.team == b.team && !(tile.block instanceof ConstructBlock)){\n             Fx.healBlockFull.at(tile.x, tile.y, tile.block.size, Pal.heal);\n             tile.heal(healPercent / 100f * tile.maxHealth());\n-        } else {\n+        }else{\n             hit(b);\n         }\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTEwMzk0MQ==", "url": "https://github.com/Anuken/Mindustry/pull/2970#discussion_r515103941", "bodyText": "formatting", "author": "Anuken", "createdAt": "2020-10-30T13:39:49Z", "path": "core/src/mindustry/entities/Lightning.java", "diffHunk": "@@ -36,7 +36,13 @@ private static void createLightningInternal(Bullet hitter, int seed, Team team,\n         random.setSeed(seed);\n         hit.clear();\n \n-        BulletType bulletType = hitter != null && !hitter.type.collidesAir ? Bullets.damageLightningGround : Bullets.damageLightning;\n+        BulletType bulletType;\n+        if(hitter != null && hitter.type.lightningHitter != null) {\n+            bulletType = hitter.type.lightningHitter;\n+        } else {", "originalCommit": "9b95b975683d263ffa5477bb27bdc1a7d2cb9b42", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "de483990ef9a7d6c4028d2b18d0a9485121f9ee5", "chunk": "diff --git a/core/src/mindustry/entities/Lightning.java b/core/src/mindustry/entities/Lightning.java\nindex 300c151ef..9cb650aa8 100644\n--- a/core/src/mindustry/entities/Lightning.java\n+++ b/core/src/mindustry/entities/Lightning.java\n\n@@ -37,9 +37,9 @@ public class Lightning{\n         hit.clear();\n \n         BulletType bulletType;\n-        if(hitter != null && hitter.type.lightningHitter != null) {\n+        if(hitter != null && hitter.type.lightningHitter != null){\n             bulletType = hitter.type.lightningHitter;\n-        } else {\n+        }else{\n             bulletType = hitter != null && !hitter.type.collidesAir ? Bullets.damageLightningGround : Bullets.damageLightning;\n         }\n \n"}}, {"oid": "de483990ef9a7d6c4028d2b18d0a9485121f9ee5", "url": "https://github.com/Anuken/Mindustry/commit/de483990ef9a7d6c4028d2b18d0a9485121f9ee5", "message": "formatting\n\nWhy do I always make these mistakes?\n\nAnd I saw that I did the same thing in my incendiary-fire PR too...", "committedDate": "2020-10-30T16:04:44Z", "type": "commit"}, {"oid": "60f2c67bde578fe3e1cd8767f9f48e5e47904dc9", "url": "https://github.com/Anuken/Mindustry/commit/60f2c67bde578fe3e1cd8767f9f48e5e47904dc9", "message": "Merge branch 'master' into ground-support-heal", "committedDate": "2020-10-30T19:37:33Z", "type": "commit"}]}