{"pr_number": 541, "pr_title": "SO-4039 query expression labeler API", "pr_createdAt": "2020-04-23T13:51:07Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/541", "timeline": [{"oid": "86803a4a68eb74f2bc039cc5b8238be37c96868b", "url": "https://github.com/b2ihealthcare/snow-owl/commit/86803a4a68eb74f2bc039cc5b8238be37c96868b", "message": "SO-4039: remove duplicate RandomSnomedIdentiferGenerator class", "committedDate": "2020-04-23T12:14:21Z", "type": "commit"}, {"oid": "a0e9a65c2c840997ef5c21332613a8c8359f05a6", "url": "https://github.com/b2ihealthcare/snow-owl/commit/a0e9a65c2c840997ef5c21332613a8c8359f05a6", "message": "SO-4039: initial implementation of query labeler request", "committedDate": "2020-04-23T13:33:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgyODQ2NA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/541#discussion_r413828464", "bodyText": "The fact that this builder only accepts the literals SnomedConcept.Expand.FULLY_SPECIFIED_NAME or SnomedConcept.Expand.SYNONYM should be documented somewhere - users of this request might think that it works with a type SCTID.", "author": "apeteri", "createdAt": "2020-04-23T14:10:31Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/ql/SnomedQueryLabelerRequestBuilder.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Copyright 2020 B2i Healthcare Pte Ltd, http://b2i.sg\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.b2international.snowowl.snomed.core.ql;\n+\n+import com.b2international.snowowl.core.domain.BranchContext;\n+import com.b2international.snowowl.core.request.ResourceRequest;\n+import com.b2international.snowowl.core.request.ResourceRequestBuilder;\n+import com.b2international.snowowl.core.request.RevisionIndexRequestBuilder;\n+import com.b2international.snowowl.snomed.core.domain.SnomedConcept;\n+\n+/**\n+ * @since 7.6\n+ */\n+public final class SnomedQueryLabelerRequestBuilder \n+\t\textends ResourceRequestBuilder<SnomedQueryLabelerRequestBuilder, BranchContext, String>\n+\t\timplements RevisionIndexRequestBuilder<String> {\n+\n+\tprivate final String expression;\n+\tprivate String descriptionType = SnomedConcept.Expand.FULLY_SPECIFIED_NAME; \n+\n+\tpublic SnomedQueryLabelerRequestBuilder(String expression) {\n+\t\tthis.expression = expression;\n+\t}\n+\t\n+\tpublic SnomedQueryLabelerRequestBuilder setDescriptionType(String descriptionType) {", "originalCommit": "a0e9a65c2c840997ef5c21332613a8c8359f05a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg0ODM5MA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/541#discussion_r413848390", "bodyText": "Yes, it will be :) in the javadoc of the setDescriptionType method.", "author": "cmark", "createdAt": "2020-04-23T14:33:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgyODQ2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0MDkwMQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/541#discussion_r413940901", "bodyText": "Done!", "author": "cmark", "createdAt": "2020-04-23T16:24:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgyODQ2NA=="}], "type": "inlineReview", "revised_code": {"commit": "1d435c487ef037f63d50d3943c2a10cc5c4959b3", "chunk": "diff --git a/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/ql/SnomedQueryLabelerRequestBuilder.java b/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/ql/SnomedQueryLabelerRequestBuilder.java\nindex 1ddec08f1e..0a68be8647 100644\n--- a/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/ql/SnomedQueryLabelerRequestBuilder.java\n+++ b/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/ql/SnomedQueryLabelerRequestBuilder.java\n\n@@ -24,17 +24,25 @@ import com.b2international.snowowl.snomed.core.domain.SnomedConcept;\n /**\n  * @since 7.6\n  */\n-public final class SnomedQueryLabelerRequestBuilder \n-\t\textends ResourceRequestBuilder<SnomedQueryLabelerRequestBuilder, BranchContext, String>\n+public final class SnomedQueryLabelerRequestBuilder extends ResourceRequestBuilder<SnomedQueryLabelerRequestBuilder, BranchContext, String>\n \t\timplements RevisionIndexRequestBuilder<String> {\n \n \tprivate final String expression;\n-\tprivate String descriptionType = SnomedConcept.Expand.FULLY_SPECIFIED_NAME; \n+\tprivate String descriptionType = SnomedConcept.Expand.FULLY_SPECIFIED_NAME;\n \n \tpublic SnomedQueryLabelerRequestBuilder(String expression) {\n \t\tthis.expression = expression;\n \t}\n-\t\n+\n+\t/**\n+\t * Select a description type to use when expanding labels for all concept IDs in the given expression. Supported values are: <code>fsn</code> and\n+\t * <code>pt</code>. Other values are simply omitted and no label expansion will happen.\n+\t * \n+\t * @param descriptionType\n+\t * @return\n+\t * @see SnomedConcept.Expand#FULLY_SPECIFIED_NAME\n+\t * @see SnomedConcept.Expand#PREFERRED_TERM\n+\t */\n \tpublic SnomedQueryLabelerRequestBuilder setDescriptionType(String descriptionType) {\n \t\tthis.descriptionType = descriptionType;\n \t\treturn getSelf();\n"}}, {"oid": "57e1a49a8a7fbcc73a1a0d397051b8eed666b997", "url": "https://github.com/b2ihealthcare/snow-owl/commit/57e1a49a8a7fbcc73a1a0d397051b8eed666b997", "message": "SO-4039: add a TermStringConverter to strip off pipes from concept terms", "committedDate": "2020-04-23T15:55:20Z", "type": "commit"}, {"oid": "b938c03c7d7368d3ac9d309863046839b3830066", "url": "https://github.com/b2ihealthcare/snow-owl/commit/b938c03c7d7368d3ac9d309863046839b3830066", "message": "SO-4039: fix remaining test failures", "committedDate": "2020-04-23T15:55:33Z", "type": "commit"}, {"oid": "1d435c487ef037f63d50d3943c2a10cc5c4959b3", "url": "https://github.com/b2ihealthcare/snow-owl/commit/1d435c487ef037f63d50d3943c2a10cc5c4959b3", "message": "SO-4039: add javadoc to...\n\n...SnomedQueryLabelerRequestBuilder.setDescriptionType", "committedDate": "2020-04-23T15:59:08Z", "type": "commit"}, {"oid": "4b7a8a2301e93fa8f6f43f577a756ce01c1b2be1", "url": "https://github.com/b2ihealthcare/snow-owl/commit/4b7a8a2301e93fa8f6f43f577a756ce01c1b2be1", "message": "SO-4039: fix failed ETL parsing test cases", "committedDate": "2020-04-23T16:31:56Z", "type": "commit"}]}