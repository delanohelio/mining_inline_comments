{"pr_number": 488, "pr_title": "Release v7.4.0 bug fixes", "pr_createdAt": "2020-02-17T15:03:13Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/488", "timeline": [{"oid": "d0642b8cba1da1d9e775717ae1443acb73f8d26f", "url": "https://github.com/b2ihealthcare/snow-owl/commit/d0642b8cba1da1d9e775717ae1443acb73f8d26f", "message": "[commons] Fix potential ResultSet resource leak in JdbcUtils", "committedDate": "2020-02-14T13:54:35Z", "type": "commit"}, {"oid": "381e244d22e0497fe409facb4133ec95b6b8763b", "url": "https://github.com/b2ihealthcare/snow-owl/commit/381e244d22e0497fe409facb4133ec95b6b8763b", "message": "[validation.snomed] Skip Travis CI tests using a profile", "committedDate": "2020-02-14T14:35:25Z", "type": "commit"}, {"oid": "90ddadea403e3cd33f515e0dcf3a900263fdd98c", "url": "https://github.com/b2ihealthcare/snow-owl/commit/90ddadea403e3cd33f515e0dcf3a900263fdd98c", "message": "[core] rename numberOfWorkers configuration key to maxThreads\n\nChange its default value to `200`.\nChange EventBus thread pool configuration to be not fixed, keep\nRuntime.availableProcessor() or maxThreads (at least 1) as core threads,\nand the configured maxThreads as maximum number of allowed event bus\nthreads.\nDeprecate getNumberOfWorkers() and setNumberOfWorkers(), keeping it for\ncompatibility reasons.", "committedDate": "2020-02-14T15:41:55Z", "type": "commit"}, {"oid": "fda53f3b0faed43c6de01bf7cc83a400f7cb9021", "url": "https://github.com/b2ihealthcare/snow-owl/commit/fda53f3b0faed43c6de01bf7cc83a400f7cb9021", "message": "[cis] use Assigned for the -a option", "committedDate": "2020-02-14T16:07:30Z", "type": "commit"}, {"oid": "4577b2a007a07ff4ffa73c9058ba97122a0570ab", "url": "https://github.com/b2ihealthcare/snow-owl/commit/4577b2a007a07ff4ffa73c9058ba97122a0570ab", "message": "[core] keep excess threads available for 1 minute before terminating", "committedDate": "2020-02-14T16:17:53Z", "type": "commit"}, {"oid": "2fcd16217b6a97313438a0e01e6e71888fef1a2e", "url": "https://github.com/b2ihealthcare/snow-owl/commit/2fcd16217b6a97313438a0e01e6e71888fef1a2e", "message": "[tests] reduce maxThreads to 8 in snomed.core.rest.tests", "committedDate": "2020-02-14T17:03:49Z", "type": "commit"}, {"oid": "d69e50abc04017e3128593557d0b2c24d3306f21", "url": "https://github.com/b2ihealthcare/snow-owl/commit/d69e50abc04017e3128593557d0b2c24d3306f21", "message": "[build] enable travis-ci profile in .travis.yml", "committedDate": "2020-02-15T12:55:19Z", "type": "commit"}, {"oid": "3a8cb062342127fd86e3accbb6ab20ae60ad8562", "url": "https://github.com/b2ihealthcare/snow-owl/commit/3a8cb062342127fd86e3accbb6ab20ae60ad8562", "message": "[docs] upgrade api-docs dependencies to latest version", "committedDate": "2020-02-15T13:58:47Z", "type": "commit"}, {"oid": "68c5463f67b354b3384068a1cfa13e8284e96d32", "url": "https://github.com/b2ihealthcare/snow-owl/commit/68c5463f67b354b3384068a1cfa13e8284e96d32", "message": "[tests] disable EclSerializerTest temporarily", "committedDate": "2020-02-15T13:59:06Z", "type": "commit"}, {"oid": "5222a5f6fce903e618eafbdc3dae5bc2d6b215d2", "url": "https://github.com/b2ihealthcare/snow-owl/commit/5222a5f6fce903e618eafbdc3dae5bc2d6b215d2", "message": "[api] fix incorrect paramType value for nested query parameters\n\nFixes #441", "committedDate": "2020-02-15T15:02:53Z", "type": "commit"}, {"oid": "7f202a3f2bc0485757e5807dea1f7024a10caf75", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7f202a3f2bc0485757e5807dea1f7024a10caf75", "message": "[eventbus] remove unnecessary finalize method (unsupported from java9)", "committedDate": "2020-02-15T16:58:08Z", "type": "commit"}, {"oid": "ef4e900ca74f87b309999de4a1d9c816631ff561", "url": "https://github.com/b2ihealthcare/snow-owl/commit/ef4e900ca74f87b309999de4a1d9c816631ff561", "message": "[snomed] use Promise chaining in SnomedEclRefinementEvaluator", "committedDate": "2020-02-15T16:58:53Z", "type": "commit"}, {"oid": "7351439c798bcfec397f2e68347217129217e67c", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7351439c798bcfec397f2e68347217129217e67c", "message": "[tests] enable EclSerializerTest", "committedDate": "2020-02-15T16:59:08Z", "type": "commit"}, {"oid": "09293f43d2fc3aea30654ee9dcb1248579e3cbf8", "url": "https://github.com/b2ihealthcare/snow-owl/commit/09293f43d2fc3aea30654ee9dcb1248579e3cbf8", "message": "[api] make sure we time out from ECL evaluations after 3 minutes", "committedDate": "2020-02-15T17:12:06Z", "type": "commit"}, {"oid": "ee51b29249342f1dd4fedb5c1ed3ddc43c6f1d72", "url": "https://github.com/b2ihealthcare/snow-owl/commit/ee51b29249342f1dd4fedb5c1ed3ddc43c6f1d72", "message": "[core] change default REST API timeout to 2 minutes in most of the...\n\n...endpoints\n\nAdd timeout values to server side Promise.getSync calls.", "committedDate": "2020-02-16T15:06:32Z", "type": "commit"}, {"oid": "c49ed26420a033e93904d9d826afc88e1ba5344c", "url": "https://github.com/b2ihealthcare/snow-owl/commit/c49ed26420a033e93904d9d826afc88e1ba5344c", "message": "[snomed] fix OWL expression conversion issue", "committedDate": "2020-02-17T11:32:28Z", "type": "commit"}, {"oid": "2abc53319fd6053b338540d689494299c237ec70", "url": "https://github.com/b2ihealthcare/snow-owl/commit/2abc53319fd6053b338540d689494299c237ec70", "message": "[build] skip validation test execution via skip xml node", "committedDate": "2020-02-17T11:33:26Z", "type": "commit"}, {"oid": "a70dc361cfc38559e0af7f4081cbefbcedecd954", "url": "https://github.com/b2ihealthcare/snow-owl/commit/a70dc361cfc38559e0af7f4081cbefbcedecd954", "message": "[tests] increase max number of threads in snomed tests", "committedDate": "2020-02-17T15:59:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI2NzkyOA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/488#discussion_r380267928", "bodyText": "\ud83e\udd47", "author": "apeteri", "createdAt": "2020-02-17T16:11:37Z", "path": "core/com.b2international.snowowl.core.rest/src/com/b2international/snowowl/core/rest/util/ModelAttributeParameterExpanderExt.java", "diffHunk": "@@ -141,23 +142,39 @@ public boolean apply(Parameter input) {\n \t\t};\n \t}\n \n-\tprivate Parameter simpleFields(String parentName, DocumentationContext documentationContext, ModelAttributeField each) {\n+\tprivate Parameter simpleFields(String parentName, ExpansionContext context, ModelAttributeField each) {\n \t\tLOG.debug(\"Attempting to expand field: {}\", each);\n \t\tString dataTypeName = Optional.fromNullable(typeNameFor(each.getFieldType().getErasedType()))\n \t\t\t\t.or(each.getFieldType().getErasedType().getSimpleName());\n \t\tLOG.debug(\"Building parameter for field: {}, with type: {}\", each, each.getFieldType());\n \t\tParameterExpansionContext parameterExpansionContext = new ParameterExpansionContext(\n \t\t\t\tdataTypeName, \n \t\t\t\tparentName, \n-\t\t\t\teach.getFieldType().getTypeName(),\n+\t\t\t\tdetermineScalarParameterType(\n+\t\t            context.getOperationContext().consumes(),\n+\t\t            context.getOperationContext().httpMethod()),\n \t\t\t\tnew ModelAttributeParameterMetadataAccessor(\n \t\t\t            each.annotatedElements(),\n \t\t\t            each.getFieldType(),\n \t\t\t            each.getName()),\n-\t\t\t\tdocumentationContext.getDocumentationType(), \n+\t\t\t\tcontext.getDocumentationContext().getDocumentationType(), ", "originalCommit": "a70dc361cfc38559e0af7f4081cbefbcedecd954", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}