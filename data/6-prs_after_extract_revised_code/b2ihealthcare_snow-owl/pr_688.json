{"pr_number": 688, "pr_title": "SO-4306: include Value Set members in FSN/PT switch", "pr_createdAt": "2020-10-07T22:49:07Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/688", "timeline": [{"oid": "36b86b722ddcda11c74e74e0a993de4b8606a846", "url": "https://github.com/b2ihealthcare/snow-owl/commit/36b86b722ddcda11c74e74e0a993de4b8606a846", "message": "SO-4303: support configuration of term type in\n\nConceptSearchRequestEvaluator", "committedDate": "2020-10-06T16:06:11Z", "type": "commit"}, {"oid": "b3f57e5e636a3306565c82a8a6582f509ba564fd", "url": "https://github.com/b2ihealthcare/snow-owl/commit/b3f57e5e636a3306565c82a8a6582f509ba564fd", "message": "SO-4303: add common description with type", "committedDate": "2020-10-07T12:25:18Z", "type": "commit"}, {"oid": "8442bd8aee0d8a7c9c6f1bcc6227ca32f53caa78", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8442bd8aee0d8a7c9c6f1bcc6227ca32f53caa78", "message": "SO-4303: map concept alternative terms by type", "committedDate": "2020-10-07T12:25:55Z", "type": "commit"}, {"oid": "3a9f70c744de75f92817590bf290d2ca1b54d079", "url": "https://github.com/b2ihealthcare/snow-owl/commit/3a9f70c744de75f92817590bf290d2ca1b54d079", "message": "SO-4303: add tostring method to Description", "committedDate": "2020-10-07T12:33:51Z", "type": "commit"}, {"oid": "5389971c46041da8ef4268adf77e7056815005a7", "url": "https://github.com/b2ihealthcare/snow-owl/commit/5389971c46041da8ef4268adf77e7056815005a7", "message": "SO-4303: revert commit", "committedDate": "2020-10-07T13:13:27Z", "type": "commit"}, {"oid": "8aefd41703001b303849fbaa456017b0fea729c1", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8aefd41703001b303849fbaa456017b0fea729c1", "message": "SO-4303: rename term -> preferredTerm", "committedDate": "2020-10-07T14:14:23Z", "type": "commit"}, {"oid": "de8ed5d2abd90978ed91152d1c67e85ede9b27a1", "url": "https://github.com/b2ihealthcare/snow-owl/commit/de8ed5d2abd90978ed91152d1c67e85ede9b27a1", "message": "SO-4303: add method to get Type from string", "committedDate": "2020-10-07T15:04:57Z", "type": "commit"}, {"oid": "6ac3314795de2c578385a8ad49a0c92f032cf852", "url": "https://github.com/b2ihealthcare/snow-owl/commit/6ac3314795de2c578385a8ad49a0c92f032cf852", "message": "SO-4303: make Description serializeable", "committedDate": "2020-10-07T20:54:21Z", "type": "commit"}, {"oid": "cbf0dcd5962847144ddc7ebe48b39c72e9514d0b", "url": "https://github.com/b2ihealthcare/snow-owl/commit/cbf0dcd5962847144ddc7ebe48b39c72e9514d0b", "message": "Merge remote-tracking branch 'origin/7.x' into feature/so-4303-include-vs-members-in-fsn-pt-switch", "committedDate": "2020-10-07T22:46:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIxNzMxMA==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/688#discussion_r504217310", "bodyText": "Not sure if it is a good idea to call this term a preferred term. If you would like to rename it, then let's use FHIR phrases, like designation or display here. getDisplay or getDisplayTerm would be alternatives I can think of.", "author": "cmark", "createdAt": "2020-10-13T19:54:10Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/Concept.java", "diffHunk": "@@ -45,28 +47,32 @@ public String getCodeSystem() {\n \t\treturn codeSystem;\n \t}\n \t\n-\tpublic String getTerm() {\n-\t\treturn term;\n+\tpublic String getPreferredTerm() {", "originalCommit": "cbf0dcd5962847144ddc7ebe48b39c72e9514d0b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bdd400fe426d04cfe03d064264bef54b5d16428e", "chunk": "diff --git a/core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/Concept.java b/core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/Concept.java\nindex 5a92f5f646..0f9f5d25b9 100644\n--- a/core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/Concept.java\n+++ b/core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/domain/Concept.java\n\n@@ -47,16 +47,16 @@ public final class Concept extends BaseComponent {\n \t\treturn codeSystem;\n \t}\n \t\n-\tpublic String getPreferredTerm() {\n-\t\treturn preferredTerm;\n+\tpublic String getTerm() {\n+\t\treturn term;\n \t}\n \t\n \tpublic String getIconId() {\n \t\treturn iconId;\n \t}\n \t\n-\tpublic void setPreferredTerm(String preferredTerm) {\n-\t\tthis.preferredTerm = preferredTerm;\n+\tpublic void setTerm(String term) {\n+\t\tthis.term = term;\n \t}\n \t\n \tpublic void setIconId(String iconId) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIxOTA0Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/688#discussion_r504219042", "bodyText": "There are multiple issues with this method:\n\nIntroduces a new JSON property in the serialized form of this representation class\nReturns UNKNOWN for synonym subtypes\nReturns UNKNOWN for partially loaded descriptions\nLet's chat, why do you need this new enum type and where are you going to use it.", "author": "cmark", "createdAt": "2020-10-13T19:57:07Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/domain/SnomedDescription.java", "diffHunk": "@@ -227,6 +229,29 @@ public String getCaseSignificanceId() {\n \t\treturn acceptabilities;\n \t}\n \t\n+\t/**\n+\t * Return the common description equivalent of the description type identifier\n+\t * \n+\t * @see Description\n+\t * @return common description type\n+\t */\n+\tpublic Description.Type getCommonDescriptionType() {", "originalCommit": "cbf0dcd5962847144ddc7ebe48b39c72e9514d0b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bdd400fe426d04cfe03d064264bef54b5d16428e", "chunk": "diff --git a/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/domain/SnomedDescription.java b/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/domain/SnomedDescription.java\nindex a6885e6d5a..0943e52ef1 100644\n--- a/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/domain/SnomedDescription.java\n+++ b/snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/core/domain/SnomedDescription.java\n\n@@ -245,8 +245,8 @@ public final class SnomedDescription extends SnomedCoreComponent {\n \t\tswitch(typeId) {\n \t\t\tcase Concepts.FULLY_SPECIFIED_NAME: \n \t\t\t\treturn Description.Type.FSN;\n-\t\t\tcase Concepts.SYNONYM: \n-\t\t\t\treturn Description.Type.SYNONYM;\n+\t\t\tcase Concepts.REFSET_DESCRIPTION_ACCEPTABILITY_PREFERRED: \n+\t\t\t\treturn Description.Type.PT;\n \t\t\tdefault: \n \t\t\t\treturn Description.Type.UNKNOWN;\n \t\t}\n"}}, {"oid": "19bf22fe44257f13bd04b28b06ef7f3f8f7e5508", "url": "https://github.com/b2ihealthcare/snow-owl/commit/19bf22fe44257f13bd04b28b06ef7f3f8f7e5508", "message": "Merge remote-tracking branch 'origin/7.x' into feature/so-4303-include-vs-members-in-fsn-pt-switch", "committedDate": "2020-10-14T07:02:04Z", "type": "commit"}, {"oid": "bdd400fe426d04cfe03d064264bef54b5d16428e", "url": "https://github.com/b2ihealthcare/snow-owl/commit/bdd400fe426d04cfe03d064264bef54b5d16428e", "message": "Revert \"SO-4303: rename term -> preferredTerm\"\n\nThis reverts commit 8aefd41703001b303849fbaa456017b0fea729c1.", "committedDate": "2020-10-14T12:28:14Z", "type": "commit"}, {"oid": "2e0ee7e34fe4daffb6bd2a6b5fedf256892169a1", "url": "https://github.com/b2ihealthcare/snow-owl/commit/2e0ee7e34fe4daffb6bd2a6b5fedf256892169a1", "message": "Revert \"SO-4303: add method to get Type from string\"\n\nThis reverts commit de8ed5d2abd90978ed91152d1c67e85ede9b27a1.", "committedDate": "2020-10-14T12:28:26Z", "type": "commit"}, {"oid": "7047b71236a853efdaa1f39938296b4733310daa", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7047b71236a853efdaa1f39938296b4733310daa", "message": "SO-4303: revert commit", "committedDate": "2020-10-14T12:29:56Z", "type": "commit"}, {"oid": "1ef338e72e65c6abb3f4314d860bab49253d3ac5", "url": "https://github.com/b2ihealthcare/snow-owl/commit/1ef338e72e65c6abb3f4314d860bab49253d3ac5", "message": "SO-4303: revert commit", "committedDate": "2020-10-14T12:41:12Z", "type": "commit"}, {"oid": "0d38a7c3cfb40cb2999c266298d1d9d31d89c422", "url": "https://github.com/b2ihealthcare/snow-owl/commit/0d38a7c3cfb40cb2999c266298d1d9d31d89c422", "message": "SO-4303: restore configuration of preferred display in conceptsearch api", "committedDate": "2020-10-14T12:43:30Z", "type": "commit"}, {"oid": "bb1141e704161361edeeef2e4be3554c752fb514", "url": "https://github.com/b2ihealthcare/snow-owl/commit/bb1141e704161361edeeef2e4be3554c752fb514", "message": "SO-4303: clean up whitespace", "committedDate": "2020-10-14T12:46:13Z", "type": "commit"}, {"oid": "987ab89e35e6333c806577db336740a39c9bb4f0", "url": "https://github.com/b2ihealthcare/snow-owl/commit/987ab89e35e6333c806577db336740a39c9bb4f0", "message": "SO-4303: refactor preferred display API setting", "committedDate": "2020-10-14T13:50:54Z", "type": "commit"}, {"oid": "2e7bc226820d2e8c45965c577cd45684907ae1e7", "url": "https://github.com/b2ihealthcare/snow-owl/commit/2e7bc226820d2e8c45965c577cd45684907ae1e7", "message": "SO-4303: remove unnecessary import", "committedDate": "2020-10-14T14:05:17Z", "type": "commit"}, {"oid": "8508c84925298fe7d94cf4a45be7c4728a29161f", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8508c84925298fe7d94cf4a45be7c4728a29161f", "message": "Merge remote-tracking branch 'origin/7.x' into feature/so-4303-include-vs-members-in-fsn-pt-switch", "committedDate": "2020-10-14T14:53:49Z", "type": "commit"}, {"oid": "8e08289d1f2b8b3e9bb7118c235b758826230af3", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8e08289d1f2b8b3e9bb7118c235b758826230af3", "message": "SO-4303: support filtering concepts on thei ancestor ids", "committedDate": "2020-10-14T15:12:19Z", "type": "commit"}, {"oid": "e5827119620418dfbcf2647eba1e75dbc07b3df3", "url": "https://github.com/b2ihealthcare/snow-owl/commit/e5827119620418dfbcf2647eba1e75dbc07b3df3", "message": "SO-4303: add ancestor id filter", "committedDate": "2020-10-15T09:01:26Z", "type": "commit"}, {"oid": "8a9885bd4baa59a227389d9ecf8a34e77eca4661", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8a9885bd4baa59a227389d9ecf8a34e77eca4661", "message": "SO-4303: add test cases to test new searchConcept features", "committedDate": "2020-10-15T09:01:53Z", "type": "commit"}, {"oid": "c45fc9535d39db8acad82c80ab394af986a2d5d0", "url": "https://github.com/b2ihealthcare/snow-owl/commit/c45fc9535d39db8acad82c80ab394af986a2d5d0", "message": "Revert \"SO-4303: add ancestor id filter\"\n\nThis reverts commit e5827119620418dfbcf2647eba1e75dbc07b3df3.", "committedDate": "2020-10-15T09:03:25Z", "type": "commit"}, {"oid": "8abf386b2b61e657456ae84c3d1f3e73401d1e78", "url": "https://github.com/b2ihealthcare/snow-owl/commit/8abf386b2b61e657456ae84c3d1f3e73401d1e78", "message": "Revert \"SO-4303: support filtering concepts on thei ancestor ids\"\n\nThis reverts commit 8e08289d1f2b8b3e9bb7118c235b758826230af3.", "committedDate": "2020-10-15T09:03:41Z", "type": "commit"}, {"oid": "74c045d355442be122d9f35ffd77858e9539e7f5", "url": "https://github.com/b2ihealthcare/snow-owl/commit/74c045d355442be122d9f35ffd77858e9539e7f5", "message": "SO-4303: fix test-case", "committedDate": "2020-10-15T09:04:55Z", "type": "commit"}, {"oid": "4ce90a22d4f569e2477170bf0ec37293ee1c97b3", "url": "https://github.com/b2ihealthcare/snow-owl/commit/4ce90a22d4f569e2477170bf0ec37293ee1c97b3", "message": "Merge remote-tracking branch 'origin/7.x' into feature/so-4303-include-vs-members-in-fsn-pt-switch", "committedDate": "2020-10-15T09:05:44Z", "type": "commit"}, {"oid": "0d1a0c79832228a39c4a5bb14317b3d07323b95f", "url": "https://github.com/b2ihealthcare/snow-owl/commit/0d1a0c79832228a39c4a5bb14317b3d07323b95f", "message": "Merge remote-tracking branch 'origin/7.x' into\nfeature/so-4303-include-vs-members-in-fsn-pt-switch\n\nConflicts:\n\tcore/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptSearchRequestEvaluator.java", "committedDate": "2020-10-19T07:07:01Z", "type": "commit"}, {"oid": "0d64d0478b4d9020730708870e7d8e8a96fcbbf4", "url": "https://github.com/b2ihealthcare/snow-owl/commit/0d64d0478b4d9020730708870e7d8e8a96fcbbf4", "message": "SO-4303: fix javadoc", "committedDate": "2020-10-19T07:09:24Z", "type": "commit"}, {"oid": "02442db9e6ddc56e70de3c3e4530eb3d10314f2d", "url": "https://github.com/b2ihealthcare/snow-owl/commit/02442db9e6ddc56e70de3c3e4530eb3d10314f2d", "message": "SO-4303: revert changes", "committedDate": "2020-10-19T07:13:59Z", "type": "commit"}, {"oid": "5252629feb36b05f017c8c9f0001ca236017a86a", "url": "https://github.com/b2ihealthcare/snow-owl/commit/5252629feb36b05f017c8c9f0001ca236017a86a", "message": "SO-4303: remove whitespaces", "committedDate": "2020-10-19T07:16:51Z", "type": "commit"}, {"oid": "be27f5e9d82d966265f4750cfed6cec50168df91", "url": "https://github.com/b2ihealthcare/snow-owl/commit/be27f5e9d82d966265f4750cfed6cec50168df91", "message": "SO-4303: remove even more whitespaces", "committedDate": "2020-10-19T07:17:43Z", "type": "commit"}, {"oid": "3a0f032509870cf9c95fd8ce38a54f4a17e7b162", "url": "https://github.com/b2ihealthcare/snow-owl/commit/3a0f032509870cf9c95fd8ce38a54f4a17e7b162", "message": "SO-4303: fix javadoc", "committedDate": "2020-10-19T08:51:36Z", "type": "commit"}, {"oid": "092598182b763f78774bad26d0e372cd996b1d74", "url": "https://github.com/b2ihealthcare/snow-owl/commit/092598182b763f78774bad26d0e372cd996b1d74", "message": "SO-4306: Fix typo, add missing whitespace\n\nhttps://snowowl.atlassian.net/browse/SO-4306", "committedDate": "2020-10-19T09:29:49Z", "type": "commit"}]}