{"pr_number": 1524, "pr_title": "Segment split validation fix", "pr_createdAt": "2020-10-12T10:20:52Z", "pr_url": "https://github.com/AxonFramework/AxonFramework/pull/1524", "timeline": [{"oid": "683e9aba0366fc5602e06eed1f4305188651ff76", "url": "https://github.com/AxonFramework/AxonFramework/commit/683e9aba0366fc5602e06eed1f4305188651ff76", "message": "Throw the right type of exception when splitting a segment.", "committedDate": "2020-10-12T09:32:57Z", "type": "commit"}, {"oid": "f6c9b1c0f7ca0c109be3c6da4f178a2f1f10025b", "url": "https://github.com/AxonFramework/AxonFramework/commit/f6c9b1c0f7ca0c109be3c6da4f178a2f1f10025b", "message": "Adapted SegmentTest.", "committedDate": "2020-10-12T10:18:43Z", "type": "commit"}, {"oid": "61cac5f5abd96ba940cacf3bbaab4a77e9f70773", "url": "https://github.com/AxonFramework/AxonFramework/commit/61cac5f5abd96ba940cacf3bbaab4a77e9f70773", "message": "Tracking Event Processor Tracker Status can be updated more than once at a time.", "committedDate": "2020-10-12T15:19:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc4MjY5Mg==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1524#discussion_r503782692", "bodyText": "No more update invocation validation? :-(", "author": "smcvb", "createdAt": "2020-10-13T08:56:45Z", "path": "integrationtests/src/test/java/org/axonframework/integrationtests/eventhandling/TrackingEventProcessorTest.java", "diffHunk": "@@ -1683,17 +1683,13 @@ void testSplitAndMergeInfluenceOnChangeListenerInvocations() throws InterruptedE\n         int secondSegment = 1;\n \n         CountDownLatch addedStatusLatch = new CountDownLatch(4);\n-        CountDownLatch updatedStatusLatch = new CountDownLatch(1);", "originalCommit": "61cac5f5abd96ba940cacf3bbaab4a77e9f70773", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0bfbc11fe9a3734840ea33162c3c8c9e9626f5f4", "chunk": "diff --git a/integrationtests/src/test/java/org/axonframework/integrationtests/eventhandling/TrackingEventProcessorTest.java b/integrationtests/src/test/java/org/axonframework/integrationtests/eventhandling/TrackingEventProcessorTest.java\nindex 086b88bae..3266bce11 100644\n--- a/integrationtests/src/test/java/org/axonframework/integrationtests/eventhandling/TrackingEventProcessorTest.java\n+++ b/integrationtests/src/test/java/org/axonframework/integrationtests/eventhandling/TrackingEventProcessorTest.java\n\n@@ -1683,13 +1683,17 @@ void testSplitAndMergeInfluenceOnChangeListenerInvocations() throws InterruptedE\n         int secondSegment = 1;\n \n         CountDownLatch addedStatusLatch = new CountDownLatch(4);\n+        CountDownLatch updatedStatusLatch = new CountDownLatch(1);\n         CountDownLatch removedStatusLatch = new CountDownLatch(3);\n         EventTrackerStatusChangeListener statusChangeListener = updatedTrackerStatus -> {\n+            assertEquals(1, updatedTrackerStatus.size());\n             EventTrackerStatus eventTrackerStatus = updatedTrackerStatus.values().iterator().next();\n             if (eventTrackerStatus.trackerAdded()) {\n                 addedStatusLatch.countDown();\n             } else if (eventTrackerStatus.trackerRemoved()) {\n                 removedStatusLatch.countDown();\n+            } else {\n+                updatedStatusLatch.countDown();\n             }\n         };\n \n"}}, {"oid": "0bfbc11fe9a3734840ea33162c3c8c9e9626f5f4", "url": "https://github.com/AxonFramework/AxonFramework/commit/0bfbc11fe9a3734840ea33162c3c8c9e9626f5f4", "message": "Revert test adjustment\n\nRevert test adjustment, as this issue is resolved in PR #1596\n\n#1524", "committedDate": "2020-11-10T18:07:56Z", "type": "commit"}]}