{"pr_number": 4498, "pr_title": " Issue 4490: Improve error logging on client", "pr_createdAt": "2020-01-21T00:15:35Z", "pr_url": "https://github.com/pravega/pravega/pull/4498", "timeline": [{"oid": "26ee048a3a9b6f8a31558f44855e7631a6c7982d", "url": "https://github.com/pravega/pravega/commit/26ee048a3a9b6f8a31558f44855e7631a6c7982d", "message": "Improve error logging on client side\n\nSigned-off-by: Wenxiao Zhang <wenxiao.zhang@emc.com>", "committedDate": "2020-01-21T00:12:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4MDQ1Mw==", "url": "https://github.com/pravega/pravega/pull/4498#discussion_r369180453", "bodyText": "This should include the segment.", "author": "tkaitchuck", "createdAt": "2020-01-21T18:51:26Z", "path": "client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java", "diffHunk": "@@ -757,7 +760,7 @@ private Boolean handleScaleResponse(Stream stream, ScaleResponse response, long\n \n         return getSegmentsBetweenStreamCuts(from, StreamCut.UNBOUNDED).whenComplete((x, e) -> {\n             if (e != null) {\n-                log.warn(\"getSuccessors failed: \", e);\n+                log.warn(\"getSuccessorsFromCut failed: \", e);", "originalCommit": "26ee048a3a9b6f8a31558f44855e7631a6c7982d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1MjM4MQ==", "url": "https://github.com/pravega/pravega/pull/4498#discussion_r369252381", "bodyText": "Fixed.", "author": "zwx14700", "createdAt": "2020-01-21T21:28:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4MDQ1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "feaaaab6ee1c9ba20009e3f8f254f227aba9e63b", "chunk": "diff --git a/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java b/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\nindex 44408ff6b..a5a63fa19 100644\n--- a/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\n+++ b/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\n\n@@ -760,7 +760,7 @@ public class ControllerImpl implements Controller {\n \n         return getSegmentsBetweenStreamCuts(from, StreamCut.UNBOUNDED).whenComplete((x, e) -> {\n             if (e != null) {\n-                log.warn(\"getSuccessorsFromCut failed: \", e);\n+                log.warn(\"getSuccessorsFromCut for {} failed: \", stream e);\n             }\n             LoggerHelpers.traceLeave(log, \"getSuccessors\", traceId);\n         });\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4MDU3NA==", "url": "https://github.com/pravega/pravega/pull/4498#discussion_r369180574", "bodyText": "This should include the stream name", "author": "tkaitchuck", "createdAt": "2020-01-21T18:51:40Z", "path": "client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java", "diffHunk": "@@ -776,7 +779,7 @@ private Boolean handleScaleResponse(Stream stream, ScaleResponse response, long\n \n         return getSegmentsBetweenStreamCuts(fromStreamCut, toStreamCut).whenComplete((x, e) -> {\n             if (e != null) {\n-                log.warn(\"getSuccessors failed: \", e);\n+                log.warn(\"getSegments failed: \", e);", "originalCommit": "26ee048a3a9b6f8a31558f44855e7631a6c7982d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1MjQxMg==", "url": "https://github.com/pravega/pravega/pull/4498#discussion_r369252412", "bodyText": "Fixed.", "author": "zwx14700", "createdAt": "2020-01-21T21:28:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4MDU3NA=="}], "type": "inlineReview", "revised_code": {"commit": "feaaaab6ee1c9ba20009e3f8f254f227aba9e63b", "chunk": "diff --git a/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java b/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\nindex 44408ff6b..a5a63fa19 100644\n--- a/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\n+++ b/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\n\n@@ -779,7 +779,7 @@ public class ControllerImpl implements Controller {\n \n         return getSegmentsBetweenStreamCuts(fromStreamCut, toStreamCut).whenComplete((x, e) -> {\n             if (e != null) {\n-                log.warn(\"getSegments failed: \", e);\n+                log.warn(\"getSegments for {} failed: \", stream, e);\n             }\n             LoggerHelpers.traceLeave(log, \"getSuccessors\", traceId);\n         });\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4MDgwMg==", "url": "https://github.com/pravega/pravega/pull/4498#discussion_r369180802", "bodyText": "Can this include the transactionId?", "author": "tkaitchuck", "createdAt": "2020-01-21T18:52:09Z", "path": "client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java", "diffHunk": "@@ -946,7 +949,7 @@ private TxnSegments convert(CreateTxnResponse response) {\n             }\n         }).whenComplete((s, e) -> {\n             if (e != null) {\n-                log.warn(\"Ping Transaction failed:\", e);\n+                log.warn(\"PingTransaction failed:\", e);", "originalCommit": "26ee048a3a9b6f8a31558f44855e7631a6c7982d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMwNjEzMg==", "url": "https://github.com/pravega/pravega/pull/4498#discussion_r369306132", "bodyText": "fixed.", "author": "zwx14700", "createdAt": "2020-01-21T23:52:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4MDgwMg=="}], "type": "inlineReview", "revised_code": {"commit": "feaaaab6ee1c9ba20009e3f8f254f227aba9e63b", "chunk": "diff --git a/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java b/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\nindex 44408ff6b..a5a63fa19 100644\n--- a/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\n+++ b/client/src/main/java/io/pravega/client/stream/impl/ControllerImpl.java\n\n@@ -949,7 +949,7 @@ public class ControllerImpl implements Controller {\n             }\n         }).whenComplete((s, e) -> {\n             if (e != null) {\n-                log.warn(\"PingTransaction failed:\", e);\n+                log.warn(\"PingTransaction {} failed:\", txId, e);\n             }\n             LoggerHelpers.traceLeave(log, \"pingTransaction\", traceId);\n         });\n"}}, {"oid": "feaaaab6ee1c9ba20009e3f8f254f227aba9e63b", "url": "https://github.com/pravega/pravega/commit/feaaaab6ee1c9ba20009e3f8f254f227aba9e63b", "message": "add segment/stream name to some logging statement\n\nSigned-off-by: Wenxiao Zhang <wenxiao.zhang@emc.com>", "committedDate": "2020-01-21T21:19:42Z", "type": "commit"}, {"oid": "d87f87d458ec96a01d5955b595613b1d54c66232", "url": "https://github.com/pravega/pravega/commit/d87f87d458ec96a01d5955b595613b1d54c66232", "message": "fixes checkstyle\n\nSigned-off-by: Wenxiao Zhang <wenxiao.zhang@emc.com>", "committedDate": "2020-01-21T21:32:05Z", "type": "commit"}, {"oid": "0f0112dc33265d152dec29a719b84bb88d1c4f6c", "url": "https://github.com/pravega/pravega/commit/0f0112dc33265d152dec29a719b84bb88d1c4f6c", "message": "Merge branch 'master' into issue-4490", "committedDate": "2020-01-21T22:52:19Z", "type": "commit"}, {"oid": "cfa738f70b9c246d3128df0d5eaac794ce2a234a", "url": "https://github.com/pravega/pravega/commit/cfa738f70b9c246d3128df0d5eaac794ce2a234a", "message": "change to use stream name for logging\n\nSigned-off-by: Wenxiao Zhang <wenxiao.zhang@emc.com>", "committedDate": "2020-01-21T22:56:23Z", "type": "commit"}, {"oid": "4b2f11d99f9611ad90d164910212a41b56ac3d83", "url": "https://github.com/pravega/pravega/commit/4b2f11d99f9611ad90d164910212a41b56ac3d83", "message": "Merge branch 'master' into issue-4490", "committedDate": "2020-01-22T11:10:15Z", "type": "commit"}]}