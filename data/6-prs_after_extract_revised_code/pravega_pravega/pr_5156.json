{"pr_number": 5156, "pr_title": "Issue 5155: (SegmentStore) Enabling copy-on-read for all Segment Reads", "pr_createdAt": "2020-09-08T21:39:35Z", "pr_url": "https://github.com/pravega/pravega/pull/5156", "timeline": [{"oid": "b36ecc75f9b9de3f7a7fab86e06f279ac9495b5e", "url": "https://github.com/pravega/pravega/commit/b36ecc75f9b9de3f7a7fab86e06f279ac9495b5e", "message": "Enabling copy-on-read for all Segment Reads.\n\nSigned-off-by: Andrei Paduroiu <andrei.paduroiu@emc.com>", "committedDate": "2020-09-08T21:32:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM0NTA3Mw==", "url": "https://github.com/pravega/pravega/pull/5156#discussion_r485345073", "bodyText": "probably you can drop expectedCopyOnReadCount variable", "author": "eolivelli", "createdAt": "2020-09-09T05:22:38Z", "path": "segmentstore/server/src/test/java/io/pravega/segmentstore/server/tables/TableCompactorTests.java", "diffHunk": "@@ -273,9 +273,6 @@ private void testCompaction(int readLength) {\n         // In the real world, the IndexWriter will readjust this number as appropriate when reindexing these values.\n         Assert.assertEquals(\"Expecting TOTAL_ENTRY_COUNT to be 0 after a full compaction.\",\n                 0, context.indexWriter.getTotalEntryCount(context.segmentMetadata));\n-\n-        Assert.assertEquals(\"Unexpected number of candidate reads from the segment with copy-on-read enabled.\",\n-                expectedCopyOnReadCount, context.segment.getCopyOnReadCount());", "originalCommit": "b36ecc75f9b9de3f7a7fab86e06f279ac9495b5e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQwMzY2Mg==", "url": "https://github.com/pravega/pravega/pull/5156#discussion_r485403662", "bodyText": "Thanks @eolivelli, we couldn't address this comment as we received instructions to cut the 0.8 RC branch in the next hours (the PR author is not likely to be able to address that within this time frame). We will address your comment anyway in 0.9, if this works for you.", "author": "RaulGracia", "createdAt": "2020-09-09T07:41:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM0NTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQwNTA3Mw==", "url": "https://github.com/pravega/pravega/pull/5156#discussion_r485405073", "bodyText": "@RaulGracia\nGood for me. it is not a big deal to leave or drop such useless variable.\nIt is also weird that spotbugs did not catch the dead local store.\nI thought we were running spotbugs even against tests.", "author": "eolivelli", "createdAt": "2020-09-09T07:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM0NTA3Mw=="}], "type": "inlineReview", "revised_code": null}]}