{"pr_number": 480, "pr_title": "Graphiti methods pull up to VirSat Core - (Task #477)", "pr_createdAt": "2020-02-19T13:05:19Z", "pr_url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480", "timeline": [{"oid": "594d1210cd57dd63a9ac85ddfe3a846882b0ae2e", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/594d1210cd57dd63a9ac85ddfe3a846882b0ae2e", "message": "Graphiti methods pull up to VirSat Core - (Task #477)\n\nPulls up SWTBot Graphiti test methods to Virsat Core's SWTBotTestCase\nclass.\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-02-19T12:14:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMxMjE0OA==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r381312148", "bodyText": "We need some comments here on this method and how it works since it does some crazy reflection stuff.", "author": "SaMuellerDLR", "createdAt": "2020-02-19T14:08:43Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -161,6 +168,77 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * @param item Tree item for which a diagram editor gets opened\r\n+\t * @return Graphiti GEF Editor handle that SWTBot can work on\r\n+\t */\r\n+\tprotected SWTBotGefEditor openDiagramEditorForTreeItem(SWTBotTreeItem item) {\r\n+\t\tSWTGefBot gefBot = new SWTGefBot();\r\n+\t\titem.contextMenu().menu(\"Open Diagram Editor\").click();\r\n+\t\twaitForEditingDomainAndUiThread();\t\t\r\n+\t\tString editorTitle = bot.editors().get(1).getTitle();\t\t\t\t\r\n+\t\tSWTBotGefEditor editor = gefBot.gefEditor(editorTitle);\r\n+\t\treturn editor;\r\n+\t}\r\n+\t\r\n+\t/**\r", "originalCommit": "594d1210cd57dd63a9ac85ddfe3a846882b0ae2e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bf7557e90d5e2198b5f22fe6b8768e78780d6179", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex c3393e079..020281ae0 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -168,22 +168,13 @@ public class ASwtBotTestCase {\n \t\treturn newItem;\n \t}\n \t\n-\t/**\n-\t * @param item Tree item for which a diagram editor gets opened\n-\t * @return Graphiti GEF Editor handle that SWTBot can work on\n-\t */\n-\tprotected SWTBotGefEditor openDiagramEditorForTreeItem(SWTBotTreeItem item) {\n-\t\tSWTGefBot gefBot = new SWTGefBot();\n-\t\titem.contextMenu().menu(\"Open Diagram Editor\").click();\n-\t\twaitForEditingDomainAndUiThread();\t\t\n-\t\tString editorTitle = bot.editors().get(1).getTitle();\t\t\t\t\n-\t\tSWTBotGefEditor editor = gefBot.gefEditor(editorTitle);\n-\t\treturn editor;\n-\t}\n-\t\n \t/**\n \t * @param item Tree item that is beeing dragged\n \t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\n+\t * \n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\n \t */\n \tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\n \t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMxMzQyNg==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r381313426", "bodyText": "I am not a 100% sure if we can generalize this so easily.\nThe \"Open Diagram Editor\" handler in FDIR is a custom handler.", "author": "SaMuellerDLR", "createdAt": "2020-02-19T14:10:49Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -161,6 +168,77 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * @param item Tree item for which a diagram editor gets opened\r\n+\t * @return Graphiti GEF Editor handle that SWTBot can work on\r\n+\t */\r\n+\tprotected SWTBotGefEditor openDiagramEditorForTreeItem(SWTBotTreeItem item) {\r\n+\t\tSWTGefBot gefBot = new SWTGefBot();\r\n+\t\titem.contextMenu().menu(\"Open Diagram Editor\").click();\r", "originalCommit": "594d1210cd57dd63a9ac85ddfe3a846882b0ae2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5NDU4OQ==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r381994589", "bodyText": "I'll remove it for now until we come up with a better more generic way", "author": "christoph-pietsch-DLR", "createdAt": "2020-02-20T13:24:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMxMzQyNg=="}], "type": "inlineReview", "revised_code": {"commit": "bf7557e90d5e2198b5f22fe6b8768e78780d6179", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex c3393e079..020281ae0 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -168,22 +168,13 @@ public class ASwtBotTestCase {\n \t\treturn newItem;\n \t}\n \t\n-\t/**\n-\t * @param item Tree item for which a diagram editor gets opened\n-\t * @return Graphiti GEF Editor handle that SWTBot can work on\n-\t */\n-\tprotected SWTBotGefEditor openDiagramEditorForTreeItem(SWTBotTreeItem item) {\n-\t\tSWTGefBot gefBot = new SWTGefBot();\n-\t\titem.contextMenu().menu(\"Open Diagram Editor\").click();\n-\t\twaitForEditingDomainAndUiThread();\t\t\n-\t\tString editorTitle = bot.editors().get(1).getTitle();\t\t\t\t\n-\t\tSWTBotGefEditor editor = gefBot.gefEditor(editorTitle);\n-\t\treturn editor;\n-\t}\n-\t\n \t/**\n \t * @param item Tree item that is beeing dragged\n \t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\n+\t * \n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\n \t */\n \tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\n \t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\n"}}, {"oid": "bf7557e90d5e2198b5f22fe6b8768e78780d6179", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/bf7557e90d5e2198b5f22fe6b8768e78780d6179", "message": "Resolved comments - (Task #477)\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-02-20T13:25:12Z", "type": "commit"}, {"oid": "f1b57f81ef83bbbe44f65cbcf99bfb3b8e94106a", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/f1b57f81ef83bbbe44f65cbcf99bfb3b8e94106a", "message": "Removed import - (Task #477)\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-02-20T13:52:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ2MzcwNw==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r382463707", "bodyText": "Usually the comments for methods go above the parameter descriptions.", "author": "SaMuellerDLR", "createdAt": "2020-02-21T08:57:04Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -161,6 +167,68 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t * \r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r", "originalCommit": "f1b57f81ef83bbbe44f65cbcf99bfb3b8e94106a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f3c4c2c8f438f9b9d7d5ecd4805977d7ef633caa", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex 7f5ba723c..319030b03 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -168,12 +168,12 @@ public class ASwtBotTestCase {\n \t}\n \t\n \t/**\n-\t * @param item Tree item that is beeing dragged\n-\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\n-\t * \n \t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \n \t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \n \t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\n+\t * \n+\t * @param item Tree item that is beeing dragged\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\n \t */\n \tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\n \t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ2NDE2OQ==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r382464169", "bodyText": "Can we at least use IllegalArgumentException | IllegalAccessException e to make this more compact?", "author": "SaMuellerDLR", "createdAt": "2020-02-21T08:58:05Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -161,6 +167,68 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t * \r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r\n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \r\n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\r\n+\t */\r\n+\tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\r\n+\t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\r\n+\t\tSWTBotGefFigureCanvas canvas = null;\t\t\r\n+\r\n+\t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\r\n+\t\t    if (\"canvas\".equals(f.getName())) {\r\n+\t\t        f.setAccessible(true);\r\n+\t\t        try {\r\n+\t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\r\n+\t\t        } catch (IllegalArgumentException e) {\r", "originalCommit": "f1b57f81ef83bbbe44f65cbcf99bfb3b8e94106a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f3c4c2c8f438f9b9d7d5ecd4805977d7ef633caa", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex 7f5ba723c..319030b03 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -168,12 +168,12 @@ public class ASwtBotTestCase {\n \t}\n \t\n \t/**\n-\t * @param item Tree item that is beeing dragged\n-\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\n-\t * \n \t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \n \t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \n \t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\n+\t * \n+\t * @param item Tree item that is beeing dragged\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\n \t */\n \tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\n \t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\n"}}, {"oid": "f3c4c2c8f438f9b9d7d5ecd4805977d7ef633caa", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/f3c4c2c8f438f9b9d7d5ecd4805977d7ef633caa", "message": "Resolved comments - (Task #477)\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-02-24T08:36:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwOTk2Mw==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r387509963", "bodyText": "Maybe refactor string to static member variable in TestCase or UtilityClass.", "author": "PhilMFischer", "createdAt": "2020-03-04T08:24:33Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -161,6 +167,66 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r\n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \r\n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\r\n+\t * \r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t */\r\n+\tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\r\n+\t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\r\n+\t\tSWTBotGefFigureCanvas canvas = null;\t\t\r\n+\r\n+\t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\r\n+\t\t    if (\"canvas\".equals(f.getName())) {\r", "originalCommit": "f3c4c2c8f438f9b9d7d5ecd4805977d7ef633caa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "761c784ae36fac4b05a199f3e850cba741740577", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex 319030b03..3f76f69c9 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -180,11 +182,12 @@ public class ASwtBotTestCase {\n \t\tSWTBotGefFigureCanvas canvas = null;\t\t\n \n \t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\n-\t\t    if (\"canvas\".equals(f.getName())) {\n+\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\n \t\t        f.setAccessible(true);\n \t\t        try {\n \t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\n \t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\n+\t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n \t\t            e.printStackTrace(); \n \t\t        }\n \t\t    }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUxMDQzOA==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r387510438", "bodyText": "show error also in log. Log can be accessed via the bundle activators. such as Activator.getLog.log(\u2026)", "author": "PhilMFischer", "createdAt": "2020-03-04T08:25:39Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -161,6 +167,66 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r\n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \r\n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\r\n+\t * \r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t */\r\n+\tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\r\n+\t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\r\n+\t\tSWTBotGefFigureCanvas canvas = null;\t\t\r\n+\r\n+\t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\r\n+\t\t    if (\"canvas\".equals(f.getName())) {\r\n+\t\t        f.setAccessible(true);\r\n+\t\t        try {\r\n+\t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\r\n+\t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\r\n+\t\t            e.printStackTrace(); \r", "originalCommit": "f3c4c2c8f438f9b9d7d5ecd4805977d7ef633caa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "761c784ae36fac4b05a199f3e850cba741740577", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex 319030b03..3f76f69c9 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -180,11 +182,12 @@ public class ASwtBotTestCase {\n \t\tSWTBotGefFigureCanvas canvas = null;\t\t\n \n \t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\n-\t\t    if (\"canvas\".equals(f.getName())) {\n+\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\n \t\t        f.setAccessible(true);\n \t\t        try {\n \t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\n \t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\n+\t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n \t\t            e.printStackTrace(); \n \t\t        }\n \t\t    }\n"}}, {"oid": "761c784ae36fac4b05a199f3e850cba741740577", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/761c784ae36fac4b05a199f3e850cba741740577", "message": "Resolved comments - (Task #477)\n\nResolved comments.\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-04-03T10:51:53Z", "type": "commit"}, {"oid": "9696ff2e78af6fc840f6aa0e2b1c446a886af7f2", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/9696ff2e78af6fc840f6aa0e2b1c446a886af7f2", "message": "Merge branch 'development' into feature/task_477-Pull_up_SWTBot_Graphi", "committedDate": "2020-04-03T11:27:12Z", "type": "commit"}, {"oid": "32c8259494c2ed9bcf21daa008c001317ad870ef", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/32c8259494c2ed9bcf21daa008c001317ad870ef", "message": "Fixed indentation - (Task #477)\n\nFixed indentation.\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-04-03T12:26:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwNTk4Ng==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403005986", "bodyText": "If you log it with the Activator you no longer need to print the stacktrace.", "author": "SaMuellerDLR", "createdAt": "2020-04-03T13:30:08Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -198,6 +205,67 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r\n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \r\n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\r\n+\t * \r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t */\r\n+\tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\r\n+\t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\r\n+\t\tSWTBotGefFigureCanvas canvas = null;\t\t\r\n+\r\n+\t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\r\n+\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\r\n+\t\t        f.setAccessible(true);\r\n+\t\t        try {\r\n+\t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\r\n+\t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\r\n+\t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\r\n+\t\t            e.printStackTrace(); \r", "originalCommit": "32c8259494c2ed9bcf21daa008c001317ad870ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwODQxNQ==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403008415", "bodyText": "Philipp's comment was \"show error also in log\". So I assumed desired behavior was doing both.", "author": "christoph-pietsch-DLR", "createdAt": "2020-04-03T13:34:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwNTk4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwOTA3OQ==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403009079", "bodyText": "will remove printing then.", "author": "christoph-pietsch-DLR", "createdAt": "2020-04-03T13:35:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwNTk4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "94e2fa57dcbdc4dbf2ecf03f9b8cfe2d50fdeab0", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex 406400664..ed91fa19f 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -224,7 +224,6 @@ public class ASwtBotTestCase {\n \t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\n \t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\n \t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n-\t\t            e.printStackTrace(); \n \t\t        }\n \t\t    }\n \t\t}\n"}}, {"oid": "94e2fa57dcbdc4dbf2ecf03f9b8cfe2d50fdeab0", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/94e2fa57dcbdc4dbf2ecf03f9b8cfe2d50fdeab0", "message": "Resolved comment - (Task #477)\n\nRemoved printing of stacktrace.\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-04-03T13:38:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5Mzg1NA==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403093854", "bodyText": "Whitespacing looks incorrect here.", "author": "SaMuellerDLR", "createdAt": "2020-04-03T15:38:55Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -198,6 +205,66 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r\n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \r\n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\r\n+\t * \r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t */\r\n+\tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\r\n+\t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\r\n+\t\tSWTBotGefFigureCanvas canvas = null;\t\t\r\n+\r\n+\t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\r\n+\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\r\n+\t\t        f.setAccessible(true);\r\n+\t\t        try {\r\n+\t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\r\n+\t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\r\n+\t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\r", "originalCommit": "94e2fa57dcbdc4dbf2ecf03f9b8cfe2d50fdeab0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ2MDIxNQ==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403460215", "bodyText": "It seems my IDE mixes up tabs and spaces formating regularly, which is hard to spot if displaying whitespaces isnt turned on. Can we add this check to checkstyle globally?", "author": "christoph-pietsch-DLR", "createdAt": "2020-04-04T11:38:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5Mzg1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg4NTA1Mw==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403885053", "bodyText": "I think it is possible. We can look into it.", "author": "SaMuellerDLR", "createdAt": "2020-04-06T07:36:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5Mzg1NA=="}], "type": "inlineReview", "revised_code": {"commit": "d811859c359f951eb19acfef5a21394f6aee38cb", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex ed91fa19f..1dc8864e0 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -215,17 +215,19 @@ public class ASwtBotTestCase {\n \t */\n \tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\n \t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\n-\t\tSWTBotGefFigureCanvas canvas = null;\t\t\n-\n+\t\tSWTBotGefFigureCanvas canvas = null;\n+\t\t\n \t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\n-\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\n-\t\t        f.setAccessible(true);\n-\t\t        try {\n-\t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\n-\t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\n-\t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n-\t\t        }\n-\t\t    }\n+\t\t\tif (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\n+\t\t\t\t// Here we're bypassing Java's OO-Security model, which is generally not advisable. It's meant to be a workaround to access\n+\t\t\t\t// otherwise inaccessible fields.\n+\t\t\t\tf.setAccessible(true);\n+\t\t\t\ttry {\n+\t\t\t\t\tcanvas = (SWTBotGefFigureCanvas) f.get(viewer);\n+\t\t\t\t} catch (IllegalArgumentException | IllegalAccessException e) {\n+\t\t\t\t\tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n+\t\t\t\t}\n+\t\t\t}\n \t\t}\n \t\titem.dragAndDrop(canvas);\n \t\twaitForEditingDomainAndUiThread();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NDI2Mw==", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/pull/480#discussion_r403094263", "bodyText": "Why do we need to do this? I think a comment would be nice", "author": "SaMuellerDLR", "createdAt": "2020-04-03T15:39:33Z", "path": "de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java", "diffHunk": "@@ -198,6 +205,66 @@ protected SWTBotTreeItem openEditor(SWTBotTreeItem item) {\n \t\treturn newItem;\r\n \t}\r\n \t\r\n+\t/**\r\n+\t * We can only drop tree items to canvas elements. SWTBotGefViewer's canvas element is not \r\n+\t * capable of beeing accessed directly from external classes though. Further more SWTBotGefViewer's \r\n+\t * canvas member gets populated during runtime only. Hence we use reflections to get a hold on it here.\r\n+\t * \r\n+\t * @param item Tree item that is beeing dragged\r\n+\t * @param diagramEditor Graphiti diagram editor which the tree item is beeing dragged onto\r\n+\t */\r\n+\tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\r\n+\t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\r\n+\t\tSWTBotGefFigureCanvas canvas = null;\t\t\r\n+\r\n+\t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\r\n+\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\r\n+\t\t        f.setAccessible(true);\r", "originalCommit": "94e2fa57dcbdc4dbf2ecf03f9b8cfe2d50fdeab0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d811859c359f951eb19acfef5a21394f6aee38cb", "chunk": "diff --git a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\nindex ed91fa19f..1dc8864e0 100644\n--- a/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n+++ b/de.dlr.sc.virsat.swtbot.test/src/de/dlr/sc/virsat/swtbot/test/ASwtBotTestCase.java\n\n@@ -215,17 +215,19 @@ public class ASwtBotTestCase {\n \t */\n \tprotected void dragTreeItemToDiagramEditor(SWTBotTreeItem item, SWTBotGefEditor diagramEditor) {\n \t\tSWTBotGefViewer viewer = diagramEditor.getSWTBotGefViewer();\n-\t\tSWTBotGefFigureCanvas canvas = null;\t\t\n-\n+\t\tSWTBotGefFigureCanvas canvas = null;\n+\t\t\n \t\tfor (Field f : viewer.getClass().getDeclaredFields()) {\n-\t\t    if (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\n-\t\t        f.setAccessible(true);\n-\t\t        try {\n-\t\t            canvas = (SWTBotGefFigureCanvas) f.get(viewer);\n-\t\t        } catch (IllegalArgumentException | IllegalAccessException e) {\n-\t\t        \tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n-\t\t        }\n-\t\t    }\n+\t\t\tif (SWTBOT_CANVAS_FIELD_REFLECTION_NAME.equals(f.getName())) {\n+\t\t\t\t// Here we're bypassing Java's OO-Security model, which is generally not advisable. It's meant to be a workaround to access\n+\t\t\t\t// otherwise inaccessible fields.\n+\t\t\t\tf.setAccessible(true);\n+\t\t\t\ttry {\n+\t\t\t\t\tcanvas = (SWTBotGefFigureCanvas) f.get(viewer);\n+\t\t\t\t} catch (IllegalArgumentException | IllegalAccessException e) {\n+\t\t\t\t\tActivator.getDefault().getLog().log(new Status(Status.ERROR, Activator.getPluginId(), Status.ERROR, \"Can not access SWTBotGefViewer element or do a proper cast to canvas type\", e));\n+\t\t\t\t}\n+\t\t\t}\n \t\t}\n \t\titem.dragAndDrop(canvas);\n \t\twaitForEditingDomainAndUiThread();\n"}}, {"oid": "d811859c359f951eb19acfef5a21394f6aee38cb", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/d811859c359f951eb19acfef5a21394f6aee38cb", "message": "Resolved comments - (Task #477)\n\nResolved comments\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-04-04T10:53:36Z", "type": "commit"}, {"oid": "1ae8664d53bf25fbbbeeb5713ece1b5d750a82bf", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/1ae8664d53bf25fbbbeeb5713ece1b5d750a82bf", "message": "Merge branch 'development' into feature/task_477-Pull_up_SWTBot_Graphi", "committedDate": "2020-04-06T07:43:09Z", "type": "commit"}, {"oid": "735db6412b0e6fe2d982d88afc666a60e6ba71a7", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/735db6412b0e6fe2d982d88afc666a60e6ba71a7", "message": "Method extracted - (Task #477)\n\nPut welcome screen closing in separate method.\n\n---\nTask #477: Pull up SWTBot Graphiti Diagram Editor methods", "committedDate": "2020-04-07T08:05:52Z", "type": "commit"}, {"oid": "39664f114c6d247c32bd9027ea2f595596dcc916", "url": "https://github.com/virtualsatellite/VirtualSatellite4-Core/commit/39664f114c6d247c32bd9027ea2f595596dcc916", "message": "Merge branch 'feature/task_477-Pull_up_SWTBot_Graphi' of https://github.com/virtualsatellite/VirtualSatellite4-Core.git into feature/task_477-Pull_up_SWTBot_Graphi", "committedDate": "2020-04-07T08:12:02Z", "type": "commit"}]}