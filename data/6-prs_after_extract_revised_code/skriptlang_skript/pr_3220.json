{"pr_number": 3220, "pr_title": "Added an effect to stop the server", "pr_createdAt": "2020-07-26T11:41:07Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3220", "timeline": [{"oid": "1331ef806f5cc35a11a8d32cd6e3de06a536e6ab", "url": "https://github.com/SkriptLang/Skript/commit/1331ef806f5cc35a11a8d32cd6e3de06a536e6ab", "message": "Created EffStopServer", "committedDate": "2020-07-26T11:39:38Z", "type": "commit"}, {"oid": "e4584dfa4d180945dced88344d1c0a361017b9b7", "url": "https://github.com/SkriptLang/Skript/commit/e4584dfa4d180945dced88344d1c0a361017b9b7", "message": "Switched to an enum and added skript doc annotations", "committedDate": "2020-07-26T21:10:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NDE3Mw==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r460574173", "bodyText": "Is this necessary?\nI feel like its not, feels like it adds unnecessary lines.\nWould be best to just use an int value for the matched pattern.\nex:\n    int pattern;\n \n  \t@Override\n  \tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n  \t\tpattern = matchedPattern;\n  \t\treturn true;\n  \t}", "author": "ShaneBeee", "createdAt": "2020-07-26T21:13:00Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+enum ShutdownTypes {\n+\tSTOP,\n+\tRESTART,\n+\tRELOAD;", "originalCommit": "e4584dfa4d180945dced88344d1c0a361017b9b7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b77fbf07e654d50a4c09575fee7ffc8da4b3dde4", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex 91242c77..dc80495f 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -33,11 +33,6 @@ import ch.njol.skript.lang.Expression;\n import ch.njol.skript.lang.SkriptParser.ParseResult;\n import ch.njol.util.Kleenean;\n \n-enum ShutdownTypes {\n-\tSTOP,\n-\tRESTART,\n-\tRELOAD;\n-}\n \n @Name(\"Stop Server\")\n @Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NDgzNg==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r460574836", "bodyText": "Theres no pattern for reload. As discussed earlier I dont think it should be added, but regardless either add a pattern or remove the method in the execute.", "author": "ShaneBeee", "createdAt": "2020-07-26T21:19:53Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+enum ShutdownTypes {\n+\tSTOP,\n+\tRESTART,\n+\tRELOAD;\n+}\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n+@Examples({\"stop the server\", \"restart server\"})\n+@Since(\"INSERT VERSION\")\n+public class EffStopServer extends Effect {\n+\t\n+\tstatic {\n+\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n+\t}\n+\t\n+\tShutdownTypes type;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\ttype = ShutdownTypes.values()[matchedPattern];\n+\t\treturn true;\n+\t}\n+\t\n+\t@Override\n+\tprotected void execute(Event e) {\n+\t\tswitch (type) {\n+\t\t\tcase STOP:\n+\t\t\t\tBukkit.shutdown();\n+\t\t\t\tbreak;\n+\t\t\tcase RESTART:\n+\t\t\t\tBukkit.spigot().restart();\n+\t\t\t\tbreak;\n+\t\t\tcase RELOAD:\n+\t\t\t\tBukkit.reload();\n+\t\t\t\tbreak;\n+\t\t}", "originalCommit": "e4584dfa4d180945dced88344d1c0a361017b9b7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b77fbf07e654d50a4c09575fee7ffc8da4b3dde4", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex 91242c77..dc80495f 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -33,11 +33,6 @@ import ch.njol.skript.lang.Expression;\n import ch.njol.skript.lang.SkriptParser.ParseResult;\n import ch.njol.util.Kleenean;\n \n-enum ShutdownTypes {\n-\tSTOP,\n-\tRESTART,\n-\tRELOAD;\n-}\n \n @Name(\"Stop Server\")\n @Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3NDg2OQ==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r460574869", "bodyText": "this should have variations for stop/restart", "author": "ShaneBeee", "createdAt": "2020-07-26T21:20:05Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+enum ShutdownTypes {\n+\tSTOP,\n+\tRESTART,\n+\tRELOAD;\n+}\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n+@Examples({\"stop the server\", \"restart server\"})\n+@Since(\"INSERT VERSION\")\n+public class EffStopServer extends Effect {\n+\t\n+\tstatic {\n+\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n+\t}\n+\t\n+\tShutdownTypes type;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\ttype = ShutdownTypes.values()[matchedPattern];\n+\t\treturn true;\n+\t}\n+\t\n+\t@Override\n+\tprotected void execute(Event e) {\n+\t\tswitch (type) {\n+\t\t\tcase STOP:\n+\t\t\t\tBukkit.shutdown();\n+\t\t\t\tbreak;\n+\t\t\tcase RESTART:\n+\t\t\t\tBukkit.spigot().restart();\n+\t\t\t\tbreak;\n+\t\t\tcase RELOAD:\n+\t\t\t\tBukkit.reload();\n+\t\t\t\tbreak;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic String toString(@Nullable Event e, boolean debug) {\n+\t\treturn \"stop the server\";", "originalCommit": "e4584dfa4d180945dced88344d1c0a361017b9b7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b77fbf07e654d50a4c09575fee7ffc8da4b3dde4", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex 91242c77..dc80495f 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -33,11 +33,6 @@ import ch.njol.skript.lang.Expression;\n import ch.njol.skript.lang.SkriptParser.ParseResult;\n import ch.njol.util.Kleenean;\n \n-enum ShutdownTypes {\n-\tSTOP,\n-\tRESTART,\n-\tRELOAD;\n-}\n \n @Name(\"Stop Server\")\n @Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n"}}, {"oid": "b77fbf07e654d50a4c09575fee7ffc8da4b3dde4", "url": "https://github.com/SkriptLang/Skript/commit/b77fbf07e654d50a4c09575fee7ffc8da4b3dde4", "message": "Updated a few things", "committedDate": "2020-07-28T09:04:42Z", "type": "commit"}, {"oid": "a5d1ff66050b23359b13a70a6453caae0d612b86", "url": "https://github.com/SkriptLang/Skript/commit/a5d1ff66050b23359b13a70a6453caae0d612b86", "message": "Merge branch 'master' into EffStopServer", "committedDate": "2020-07-28T09:57:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjIzMg==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461506232", "bodyText": "What do you mean by \"If restarting isn't configured, the server will stop.\"?", "author": "Wealthyturtle", "createdAt": "2020-07-28T11:20:59Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")", "originalCommit": "a5d1ff66050b23359b13a70a6453caae0d612b86", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNzcyNw==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461507727", "bodyText": "", "author": "DeltaRays", "createdAt": "2020-07-28T11:24:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjIzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwODE0Ng==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461508146", "bodyText": "what about 'if the restart-script spigot.yml option isn't set up the server will stop.'", "author": "DeltaRays", "createdAt": "2020-07-28T11:25:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjIzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUxMDk2OA==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461510968", "bodyText": "Sure", "author": "Wealthyturtle", "createdAt": "2020-07-28T11:31:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjIzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTU0OTEyNQ==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461549125", "bodyText": "Just this and then I think we can merge.", "author": "Wealthyturtle", "createdAt": "2020-07-28T12:43:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjIzMg=="}], "type": "inlineReview", "revised_code": {"commit": "eef1a4cd3a92b4f1e8b7666dd89c772acbec687b", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex dc80495f..9cf54342 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -44,29 +44,26 @@ public class EffStopServer extends Effect {\n \t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n \t}\n \t\n-\tint pattern;\n+\tprivate boolean restart;\n \t\n \t@Override\n \tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n-\t\tpattern = matchedPattern;\n+\t\trestart = matchedPattern == 1;\n \t\treturn true;\n \t}\n \t\n \t@Override\n \tprotected void execute(Event e) {\n-\t\tswitch (pattern) {\n-\t\t\tcase 0:\n-\t\t\t\tBukkit.shutdown();\n-\t\t\t\tbreak;\n-\t\t\tcase 1:\n-\t\t\t\tBukkit.spigot().restart();\n-\t\t\t\tbreak;\n-\t\t}\n+\t\tif (restart)\n+\t\t\tBukkit.spigot().restart();\n+\t\telse\n+\t\t\tBukkit.shutdown();\n \t}\n \t\n+\t\n \t@Override\n \tpublic String toString(@Nullable Event e, boolean debug) {\n-\t\treturn (pattern == 0 ? \"stop\" : \"restart\") + \" the server\";\n+\t\treturn (restart ? \"restart\" : \"stop\" + \"restart\") + \" the server\";\n \t}\n \t\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjI5OA==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461506298", "bodyText": "Use private int", "author": "Wealthyturtle", "createdAt": "2020-07-28T11:21:08Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n+@Examples({\"stop the server\", \"restart server\"})\n+@Since(\"INSERT VERSION\")\n+public class EffStopServer extends Effect {\n+\t\n+\tstatic {\n+\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n+\t}\n+\t\n+\tint pattern;", "originalCommit": "a5d1ff66050b23359b13a70a6453caae0d612b86", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjU4Mg==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461506582", "bodyText": "Actually, scratch that. Since there's only stop or restart, you should use boolean, and replace the switch-case block in execute()", "author": "Wealthyturtle", "createdAt": "2020-07-28T11:21:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjI5OA=="}], "type": "inlineReview", "revised_code": {"commit": "eef1a4cd3a92b4f1e8b7666dd89c772acbec687b", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex dc80495f..9cf54342 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -44,29 +44,26 @@ public class EffStopServer extends Effect {\n \t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n \t}\n \t\n-\tint pattern;\n+\tprivate boolean restart;\n \t\n \t@Override\n \tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n-\t\tpattern = matchedPattern;\n+\t\trestart = matchedPattern == 1;\n \t\treturn true;\n \t}\n \t\n \t@Override\n \tprotected void execute(Event e) {\n-\t\tswitch (pattern) {\n-\t\t\tcase 0:\n-\t\t\t\tBukkit.shutdown();\n-\t\t\t\tbreak;\n-\t\t\tcase 1:\n-\t\t\t\tBukkit.spigot().restart();\n-\t\t\t\tbreak;\n-\t\t}\n+\t\tif (restart)\n+\t\t\tBukkit.spigot().restart();\n+\t\telse\n+\t\t\tBukkit.shutdown();\n \t}\n \t\n+\t\n \t@Override\n \tpublic String toString(@Nullable Event e, boolean debug) {\n-\t\treturn (pattern == 0 ? \"stop\" : \"restart\") + \" the server\";\n+\t\treturn (restart ? \"restart\" : \"stop\" + \"restart\") + \" the server\";\n \t}\n \t\n }\n"}}, {"oid": "de8b2761b7fce4d6d6f5bc8f1012002fbc7c96f3", "url": "https://github.com/SkriptLang/Skript/commit/de8b2761b7fce4d6d6f5bc8f1012002fbc7c96f3", "message": "Merge branch 'master' into EffStopServer", "committedDate": "2020-07-28T11:25:10Z", "type": "commit"}, {"oid": "eef1a4cd3a92b4f1e8b7666dd89c772acbec687b", "url": "https://github.com/SkriptLang/Skript/commit/eef1a4cd3a92b4f1e8b7666dd89c772acbec687b", "message": "switched from an int to the boolean", "committedDate": "2020-07-28T11:28:07Z", "type": "commit"}, {"oid": "ea98b8ffa350ca92331bf0266b548ca4c0b43afb", "url": "https://github.com/SkriptLang/Skript/commit/ea98b8ffa350ca92331bf0266b548ca4c0b43afb", "message": "Merge remote-tracking branch 'origin/EffStopServer' into EffStopServer", "committedDate": "2020-07-28T11:28:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUxMjgzMQ==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r461512831", "bodyText": "Uh... isn't it just (restart ? \"restart\" : \"stop\") + \" the server\";", "author": "Wealthyturtle", "createdAt": "2020-07-28T11:34:55Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n+@Examples({\"stop the server\", \"restart server\"})\n+@Since(\"INSERT VERSION\")\n+public class EffStopServer extends Effect {\n+\t\n+\tstatic {\n+\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n+\t}\n+\t\n+\tprivate boolean restart;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\trestart = matchedPattern == 1;\n+\t\treturn true;\n+\t}\n+\t\n+\t@Override\n+\tprotected void execute(Event e) {\n+\t\tif (restart)\n+\t\t\tBukkit.spigot().restart();\n+\t\telse\n+\t\t\tBukkit.shutdown();\n+\t}\n+\t\n+\t\n+\t@Override\n+\tpublic String toString(@Nullable Event e, boolean debug) {\n+\t\treturn (restart ? \"restart\" : \"stop\" + \"restart\") + \" the server\";", "originalCommit": "ea98b8ffa350ca92331bf0266b548ca4c0b43afb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8aa9ad5e9852d9e45efe3766b5e1f688e5ee6e7b", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex 9cf54342..9c076cca 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -63,7 +63,7 @@ public class EffStopServer extends Effect {\n \t\n \t@Override\n \tpublic String toString(@Nullable Event e, boolean debug) {\n-\t\treturn (restart ? \"restart\" : \"stop\" + \"restart\") + \" the server\";\n+\t\treturn (restart ? \"restart\" : \"stop\") + \" the server\";\n \t}\n \t\n }\n"}}, {"oid": "8aa9ad5e9852d9e45efe3766b5e1f688e5ee6e7b", "url": "https://github.com/SkriptLang/Skript/commit/8aa9ad5e9852d9e45efe3766b5e1f688e5ee6e7b", "message": "Fixed it", "committedDate": "2020-07-28T12:34:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0MTQ5Mg==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r463241492", "bodyText": "IMO you should put each pattern on it's own line \ud83d\ude42", "author": "APickledWalrus", "createdAt": "2020-07-30T20:06:37Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n+@Examples({\"stop the server\", \"restart server\"})\n+@Since(\"INSERT VERSION\")\n+public class EffStopServer extends Effect {\n+\t\n+\tstatic {\n+\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");", "originalCommit": "8aa9ad5e9852d9e45efe3766b5e1f688e5ee6e7b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "79f4128d9b57f546ff34230c6471e2f99d72901c", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex 9c076cca..0b4c7e2d 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -41,7 +41,9 @@ import ch.njol.util.Kleenean;\n public class EffStopServer extends Effect {\n \t\n \tstatic {\n-\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n+\t\tSkript.registerEffect(EffStopServer.class,\n+\t\t\t\"(stop|shut[ ]down) [the] server\",\n+\t\t\t\"restart [the] server\");\n \t}\n \t\n \tprivate boolean restart;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0MTk3OA==", "url": "https://github.com/SkriptLang/Skript/pull/3220#discussion_r463241978", "bodyText": "Maybe put restart server on it's own line? They are pretty short though.", "author": "APickledWalrus", "createdAt": "2020-07-30T20:07:43Z", "path": "src/main/java/ch/njol/skript/effects/EffStopServer.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.effects;\n+\n+import org.bukkit.Bukkit;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Effect;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.util.Kleenean;\n+\n+\n+@Name(\"Stop Server\")\n+@Description(\"Stop/Restart the server. If restarting isn't configured, the server will stop.\")\n+@Examples({\"stop the server\", \"restart server\"})", "originalCommit": "8aa9ad5e9852d9e45efe3766b5e1f688e5ee6e7b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "79f4128d9b57f546ff34230c6471e2f99d72901c", "chunk": "diff --git a/src/main/java/ch/njol/skript/effects/EffStopServer.java b/src/main/java/ch/njol/skript/effects/EffStopServer.java\nindex 9c076cca..0b4c7e2d 100644\n--- a/src/main/java/ch/njol/skript/effects/EffStopServer.java\n+++ b/src/main/java/ch/njol/skript/effects/EffStopServer.java\n\n@@ -41,7 +41,9 @@ import ch.njol.util.Kleenean;\n public class EffStopServer extends Effect {\n \t\n \tstatic {\n-\t\tSkript.registerEffect(EffStopServer.class, \"(stop|shut[ ]down) [the] server\", \"restart [the] server\");\n+\t\tSkript.registerEffect(EffStopServer.class,\n+\t\t\t\"(stop|shut[ ]down) [the] server\",\n+\t\t\t\"restart [the] server\");\n \t}\n \t\n \tprivate boolean restart;\n"}}, {"oid": "5418f2dc05b4ed350402f1928b462173f73339b4", "url": "https://github.com/SkriptLang/Skript/commit/5418f2dc05b4ed350402f1928b462173f73339b4", "message": "Merge branch 'master' into EffStopServer", "committedDate": "2020-07-30T22:18:18Z", "type": "commit"}, {"oid": "79f4128d9b57f546ff34230c6471e2f99d72901c", "url": "https://github.com/SkriptLang/Skript/commit/79f4128d9b57f546ff34230c6471e2f99d72901c", "message": "Fixed everything", "committedDate": "2020-07-30T22:18:32Z", "type": "commit"}, {"oid": "7b26c04b4e447811eaf392798b332a3a829c02fc", "url": "https://github.com/SkriptLang/Skript/commit/7b26c04b4e447811eaf392798b332a3a829c02fc", "message": "Merge remote-tracking branch 'origin/EffStopServer' into EffStopServer", "committedDate": "2020-07-30T22:18:47Z", "type": "commit"}, {"oid": "0217afeb5de5adf284711ae7e0decdd4912d7e2a", "url": "https://github.com/SkriptLang/Skript/commit/0217afeb5de5adf284711ae7e0decdd4912d7e2a", "message": "Merge branch 'master' into EffStopServer", "committedDate": "2020-07-31T11:21:03Z", "type": "commit"}, {"oid": "d27884d9cc370f16b2f6e94361b405b378902d05", "url": "https://github.com/SkriptLang/Skript/commit/d27884d9cc370f16b2f6e94361b405b378902d05", "message": "Elaborated on the description", "committedDate": "2020-07-31T11:23:48Z", "type": "commit"}, {"oid": "5a79be0d10e284ba5c8c1abd13ac95329c670655", "url": "https://github.com/SkriptLang/Skript/commit/5a79be0d10e284ba5c8c1abd13ac95329c670655", "message": "Merge branch 'EffStopServer' of https://github.com/DeltaRays/Skript into EffStopServer", "committedDate": "2020-07-31T11:23:54Z", "type": "commit"}, {"oid": "49bab4496c8bdd50e28735e4934acde4188a57b0", "url": "https://github.com/SkriptLang/Skript/commit/49bab4496c8bdd50e28735e4934acde4188a57b0", "message": "Update EffStopServer.java", "committedDate": "2020-08-01T02:43:05Z", "type": "commit"}, {"oid": "498131434a73d318bffd0413eda65564658cf531", "url": "https://github.com/SkriptLang/Skript/commit/498131434a73d318bffd0413eda65564658cf531", "message": "Merge branch 'master' into EffStopServer", "committedDate": "2020-08-01T02:43:22Z", "type": "commit"}]}