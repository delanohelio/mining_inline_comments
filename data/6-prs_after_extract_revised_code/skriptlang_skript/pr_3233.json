{"pr_number": 3233, "pr_title": "Added ExprLastAttacker and ExprLastDamage", "pr_createdAt": "2020-07-27T15:52:28Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3233", "timeline": [{"oid": "9153b1ea3e981d5a93520a884d9523fcb9d3eee8", "url": "https://github.com/SkriptLang/Skript/commit/9153b1ea3e981d5a93520a884d9523fcb9d3eee8", "message": "Added ExprLastAttacker and ExprLastDamage (which can be used to get the last entity/block who damaged them and by how much they did)", "committedDate": "2020-07-27T15:51:10Z", "type": "commit"}, {"oid": "412b5eec2d665b4ce3e81208b518734fe12df8e1", "url": "https://github.com/SkriptLang/Skript/commit/412b5eec2d665b4ce3e81208b518734fe12df8e1", "message": "Updated the indentation", "committedDate": "2020-07-27T15:54:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjI1MA==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r461196250", "bodyText": "Was this meant to be -1?", "author": "ShaneBeee", "createdAt": "2020-07-27T22:02:12Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase ADD:\n+\t\t\tcase SET:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tint mod = 1;\n+\t\tif (delta != null)\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase SET:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0]);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tmod = 1;", "originalCommit": "412b5eec2d665b4ce3e81208b518734fe12df8e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM5NzQwMQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r461397401", "bodyText": "Yup", "author": "DeltaRays", "createdAt": "2020-07-28T08:09:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjI1MA=="}], "type": "inlineReview", "revised_code": {"commit": "dfac51509381230cbe76a9353811e4798a77bdf3", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 47e2f46a..b5fb1d96 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -70,7 +70,7 @@ public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Numbe\n \t\t\t\t\t\tentity.setLastDamage((Double) delta[0]);\n \t\t\t\t\tbreak;\n \t\t\t\tcase REMOVE:\n-\t\t\t\t\tmod = 1;\n+\t\t\t\t\tmod = -1;\n \t\t\t\tcase ADD:\n \t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n \t\t\t\t\t\tentity.setLastDamage((Double) delta[0] + mod * entity.getLastDamage());\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjM3NA==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r461196374", "bodyText": "I know we ask for an extra line at the end, but I think you went a bit far here ;)", "author": "ShaneBeee", "createdAt": "2020-07-27T22:02:32Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Projectile;\n+import org.bukkit.event.entity.EntityDamageByBlockEvent;\n+import org.bukkit.event.entity.EntityDamageByEntityEvent;\n+import org.bukkit.event.entity.EntityDamageEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.bukkitutil.ProjectileUtils;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+\n+@Name(\"Last Attacker\")\n+@Description(\"The last block / entity that attacked an entity.\")\n+@Examples({\"send \\\"%last attacker of event-entity%\\\"\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\t@SuppressWarnings(\"null\")\n+\tpublic Object convert(Entity entity) {\n+\t\tif (entity.getLastDamageCause() != null) {\n+\t\t\tif (entity.getLastDamageCause() instanceof EntityDamageByBlockEvent)\n+\t\t\t\treturn ((EntityDamageByBlockEvent) entity.getLastDamageCause()).getDamager();\n+\t\t\tEntityDamageEvent event = entity.getLastDamageCause();\n+\t\t\tif (event instanceof EntityDamageByEntityEvent) {\n+\t\t\t\tEntityDamageByEntityEvent evt = (EntityDamageByEntityEvent) event;\n+\t\t\t\tif (evt.getDamager() instanceof Projectile) {\n+\t\t\t\t\t@Nullable\n+\t\t\t\t\tObject shooter = ProjectileUtils.getShooter((Projectile) evt.getDamager());\n+\t\t\t\t\tif (shooter instanceof Entity)\n+\t\t\t\t\t\treturn shooter;\n+\t\t\t\t}\n+\t\t\t\treturn evt.getDamager();\n+\t\t\t}\n+\t\t}\n+\t\treturn null;\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<?> getReturnType() {\n+\t\treturn Object.class;\n+\t}\n+\t\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"last attacker\";\n+\t}\n+\t\n+}\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+", "originalCommit": "412b5eec2d665b4ce3e81208b518734fe12df8e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM5NjU0MQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r461396541", "bodyText": "Lmao", "author": "DeltaRays", "createdAt": "2020-07-28T08:07:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjM3NA=="}], "type": "inlineReview", "revised_code": {"commit": "dfac51509381230cbe76a9353811e4798a77bdf3", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 6c1ec6f7..06671467 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -76,18 +76,3 @@ public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n \t}\n \t\n }\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjUwMQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r461196501", "bodyText": "Needs a line at the end, you can grab one of the extra ones from the other expression ;)", "author": "ShaneBeee", "createdAt": "2020-07-27T22:02:50Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase ADD:\n+\t\t\tcase SET:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tint mod = 1;\n+\t\tif (delta != null)\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase SET:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0]);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tmod = 1;\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0] + mod * entity.getLastDamage());\n+\t\t\t\t\tbreak;\n+\t\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"last damage\";\n+\t}\n+\t\n+}", "originalCommit": "412b5eec2d665b4ce3e81208b518734fe12df8e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM5NjY1Mg==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r461396652", "bodyText": "I'll make sure to do that \ud83d\ude09", "author": "DeltaRays", "createdAt": "2020-07-28T08:08:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjUwMQ=="}], "type": "inlineReview", "revised_code": {"commit": "dfac51509381230cbe76a9353811e4798a77bdf3", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 47e2f46a..b5fb1d96 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -70,7 +70,7 @@ public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Numbe\n \t\t\t\t\t\tentity.setLastDamage((Double) delta[0]);\n \t\t\t\t\tbreak;\n \t\t\t\tcase REMOVE:\n-\t\t\t\t\tmod = 1;\n+\t\t\t\t\tmod = -1;\n \t\t\t\tcase ADD:\n \t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n \t\t\t\t\t\tentity.setLastDamage((Double) delta[0] + mod * entity.getLastDamage());\n"}}, {"oid": "ddaf88c208049fa6f8f5a72d350d83e1caa47416", "url": "https://github.com/SkriptLang/Skript/commit/ddaf88c208049fa6f8f5a72d350d83e1caa47416", "message": "Merge branch 'master' into LastDamage-&-LastAttacker", "committedDate": "2020-07-28T08:08:09Z", "type": "commit"}, {"oid": "dfac51509381230cbe76a9353811e4798a77bdf3", "url": "https://github.com/SkriptLang/Skript/commit/dfac51509381230cbe76a9353811e4798a77bdf3", "message": "Distributed the new lines at the end of one file across two files and fixed a REMOVE issue", "committedDate": "2020-07-28T08:10:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMDEzOQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r463220139", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            @Description(\"The last block / entity that attacked an entity.\")\n          \n          \n            \n            @Description(\"The last block or entity that attacked an entity.\")", "author": "APickledWalrus", "createdAt": "2020-07-30T19:25:12Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Projectile;\n+import org.bukkit.event.entity.EntityDamageByBlockEvent;\n+import org.bukkit.event.entity.EntityDamageByEntityEvent;\n+import org.bukkit.event.entity.EntityDamageEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.bukkitutil.ProjectileUtils;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+\n+@Name(\"Last Attacker\")\n+@Description(\"The last block / entity that attacked an entity.\")", "originalCommit": "dfac51509381230cbe76a9353811e4798a77bdf3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83aef8bcf42f7e25cab97cacda3b5cfe03084242", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 06671467..8eb0a110 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -34,7 +34,7 @@ import ch.njol.skript.doc.Since;\n import ch.njol.skript.expressions.base.SimplePropertyExpression;\n \n @Name(\"Last Attacker\")\n-@Description(\"The last block / entity that attacked an entity.\")\n+@Description(\"The last block or entity that attacked an entity.\")\n @Examples({\"send \\\"%last attacker of event-entity%\\\"\"})\n @Since(\"INSERT VERSION\")\n public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMjQxMQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r463222411", "bodyText": "Are you able to remove the inline annotation? I think I remember someone saying to just keep annotations to the method declaration. \ud83d\ude42", "author": "APickledWalrus", "createdAt": "2020-07-30T19:29:35Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Projectile;\n+import org.bukkit.event.entity.EntityDamageByBlockEvent;\n+import org.bukkit.event.entity.EntityDamageByEntityEvent;\n+import org.bukkit.event.entity.EntityDamageEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.bukkitutil.ProjectileUtils;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+\n+@Name(\"Last Attacker\")\n+@Description(\"The last block / entity that attacked an entity.\")\n+@Examples({\"send \\\"%last attacker of event-entity%\\\"\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\t@SuppressWarnings(\"null\")\n+\tpublic Object convert(Entity entity) {\n+\t\tif (entity.getLastDamageCause() != null) {\n+\t\t\tif (entity.getLastDamageCause() instanceof EntityDamageByBlockEvent)\n+\t\t\t\treturn ((EntityDamageByBlockEvent) entity.getLastDamageCause()).getDamager();\n+\t\t\tEntityDamageEvent event = entity.getLastDamageCause();\n+\t\t\tif (event instanceof EntityDamageByEntityEvent) {\n+\t\t\t\tEntityDamageByEntityEvent evt = (EntityDamageByEntityEvent) event;\n+\t\t\t\tif (evt.getDamager() instanceof Projectile) {\n+\t\t\t\t\t@Nullable", "originalCommit": "dfac51509381230cbe76a9353811e4798a77bdf3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83aef8bcf42f7e25cab97cacda3b5cfe03084242", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 06671467..8eb0a110 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -34,7 +34,7 @@ import ch.njol.skript.doc.Since;\n import ch.njol.skript.expressions.base.SimplePropertyExpression;\n \n @Name(\"Last Attacker\")\n-@Description(\"The last block / entity that attacked an entity.\")\n+@Description(\"The last block or entity that attacked an entity.\")\n @Examples({\"send \\\"%last attacker of event-entity%\\\"\"})\n @Since(\"INSERT VERSION\")\n public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMzE1Mw==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r463223153", "bodyText": "can you put curly brackets around this check?", "author": "APickledWalrus", "createdAt": "2020-07-30T19:31:03Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase ADD:\n+\t\t\tcase SET:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tint mod = 1;\n+\t\tif (delta != null)", "originalCommit": "dfac51509381230cbe76a9353811e4798a77bdf3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83aef8bcf42f7e25cab97cacda3b5cfe03084242", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex b5fb1d96..0245b6cf 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -63,7 +63,7 @@ public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Numbe\n \t@Override\n \tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n \t\tint mod = 1;\n-\t\tif (delta != null)\n+\t\tif (delta != null) {\n \t\t\tswitch (mode) {\n \t\t\t\tcase SET:\n \t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyNTc1MQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r463225751", "bodyText": "Shouldn't this be\nentity.setLastDamage(mod * (Double) delta[0] + entity.getLastDamage());\ncurrently (I think), removing 1 when the damage is 2 would result in -1", "author": "APickledWalrus", "createdAt": "2020-07-30T19:36:09Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase ADD:\n+\t\t\tcase SET:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tint mod = 1;\n+\t\tif (delta != null)\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase SET:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0]);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tmod = -1;\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0] + mod * entity.getLastDamage());", "originalCommit": "dfac51509381230cbe76a9353811e4798a77bdf3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "83aef8bcf42f7e25cab97cacda3b5cfe03084242", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex b5fb1d96..0245b6cf 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -63,7 +63,7 @@ public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Numbe\n \t@Override\n \tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n \t\tint mod = 1;\n-\t\tif (delta != null)\n+\t\tif (delta != null) {\n \t\t\tswitch (mode) {\n \t\t\t\tcase SET:\n \t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n"}}, {"oid": "83aef8bcf42f7e25cab97cacda3b5cfe03084242", "url": "https://github.com/SkriptLang/Skript/commit/83aef8bcf42f7e25cab97cacda3b5cfe03084242", "message": "Fixed everything", "committedDate": "2020-07-30T22:07:49Z", "type": "commit"}, {"oid": "0dc4ed0882751e6357a0fc473124f3fc61c7505d", "url": "https://github.com/SkriptLang/Skript/commit/0dc4ed0882751e6357a0fc473124f3fc61c7505d", "message": "Merge branch 'master' into LastDamage-&-LastAttacker", "committedDate": "2020-08-02T16:16:09Z", "type": "commit"}, {"oid": "3ae185ede71568d2f49bcc43baaa3f0437998491", "url": "https://github.com/SkriptLang/Skript/commit/3ae185ede71568d2f49bcc43baaa3f0437998491", "message": "Merge branch 'master' into LastDamage-&-LastAttacker", "committedDate": "2020-09-08T18:17:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4MDk0Ng==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r495480946", "bodyText": "You should add a default case that asserts false.", "author": "APickledWalrus", "createdAt": "2020-09-26T18:06:03Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,92 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase ADD:\n+\t\t\tcase SET:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tint mod = 1;\n+\t\tif (delta != null) {\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase SET:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0]);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tmod = -1;\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Double) delta[0] * mod + entity.getLastDamage());\n+\t\t\t\t\tbreak;", "originalCommit": "3ae185ede71568d2f49bcc43baaa3f0437998491", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4Mzk4Mg==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r495483982", "bodyText": "When you modify the last damage it's purely visual (unless it's used by other plugins to do something), I'll update the description \ud83d\udc4d", "author": "DeltaRays", "createdAt": "2020-09-26T18:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4MDk0Ng=="}], "type": "inlineReview", "revised_code": {"commit": "0cda60bf7d99d23c3eae18b8ec9f5c0dae3774d9", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 0245b6cf..cdc8be17 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -32,7 +32,7 @@ import ch.njol.skript.expressions.base.SimplePropertyExpression;\n import ch.njol.util.coll.CollectionUtils;\n \n @Name(\"Last Damage\")\n-@Description(\"The last damage that was done to an entity.\")\n+@Description(\"The last damage that was done to an entity. Note that changing it doesn't deal more/less damage.\")\n @Examples({\"set last damage of event-entity to 2\"})\n @Since(\"INSERT VERSION\")\n public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n"}}, {"oid": "203fc74cc724ed82acf5afa5a1066fffa7e4c8b8", "url": "https://github.com/SkriptLang/Skript/commit/203fc74cc724ed82acf5afa5a1066fffa7e4c8b8", "message": "Merge branch 'master' into LastDamage-&-LastAttacker", "committedDate": "2020-09-26T18:29:12Z", "type": "commit"}, {"oid": "0cda60bf7d99d23c3eae18b8ec9f5c0dae3774d9", "url": "https://github.com/SkriptLang/Skript/commit/0cda60bf7d99d23c3eae18b8ec9f5c0dae3774d9", "message": "Updated the description and replaced Double with Long", "committedDate": "2020-09-26T18:49:04Z", "type": "commit"}, {"oid": "e666ded46a43780a1e753c1f73ee896daa146f9c", "url": "https://github.com/SkriptLang/Skript/commit/e666ded46a43780a1e753c1f73ee896daa146f9c", "message": "Merge remote-tracking branch 'origin/LastDamage-&-LastAttacker' into LastDamage-&-LastAttacker", "committedDate": "2020-09-26T18:49:17Z", "type": "commit"}, {"oid": "fe1153fe46dc3e332170739d13678b8338163739", "url": "https://github.com/SkriptLang/Skript/commit/fe1153fe46dc3e332170739d13678b8338163739", "message": "Added a default case", "committedDate": "2020-09-26T18:54:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNzE4NA==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r496317184", "bodyText": "There seems to be a bit of redundancy in calling entity.getLastDamageCause(), perhaps you could cache it instead?\nAlso, calling entity.getLastDamageCause() as event, and (EntityDamageByEntityEvent) event as evt are kinda too similar, could you rename them to something that distinguishes them better?", "author": "Wealthyturtle", "createdAt": "2020-09-29T01:07:48Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Projectile;\n+import org.bukkit.event.entity.EntityDamageByBlockEvent;\n+import org.bukkit.event.entity.EntityDamageByEntityEvent;\n+import org.bukkit.event.entity.EntityDamageEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.bukkitutil.ProjectileUtils;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+\n+@Name(\"Last Attacker\")\n+@Description(\"The last block or entity that attacked an entity.\")\n+@Examples({\"send \\\"%last attacker of event-entity%\\\"\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\t@SuppressWarnings(\"null\")\n+\tpublic Object convert(Entity entity) {\n+\t\tif (entity.getLastDamageCause() != null) {\n+\t\t\tif (entity.getLastDamageCause() instanceof EntityDamageByBlockEvent)\n+\t\t\t\treturn ((EntityDamageByBlockEvent) entity.getLastDamageCause()).getDamager();\n+\t\t\tEntityDamageEvent event = entity.getLastDamageCause();\n+\t\t\tif (event instanceof EntityDamageByEntityEvent) {\n+\t\t\t\tEntityDamageByEntityEvent evt = (EntityDamageByEntityEvent) event;\n+\t\t\t\tif (evt.getDamager() instanceof Projectile) {\n+\t\t\t\t\tObject shooter = ProjectileUtils.getShooter((Projectile) evt.getDamager());\n+\t\t\t\t\tif (shooter instanceof Entity)\n+\t\t\t\t\t\treturn shooter;\n+\t\t\t\t}\n+\t\t\t\treturn evt.getDamager();\n+\t\t\t}\n+\t\t}\n+\t\treturn null;\n+\t}", "originalCommit": "fe1153fe46dc3e332170739d13678b8338163739", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ0MjY0OQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r496442649", "bodyText": "Will do \ud83d\udc4d", "author": "DeltaRays", "createdAt": "2020-09-29T06:19:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNzE4NA=="}], "type": "inlineReview", "revised_code": {"commit": "46015871bb760de651306fc4ad7be68936d9ebf5", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 8eb0a110..293fea82 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -47,18 +47,18 @@ public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n \t@Override\n \t@SuppressWarnings(\"null\")\n \tpublic Object convert(Entity entity) {\n-\t\tif (entity.getLastDamageCause() != null) {\n-\t\t\tif (entity.getLastDamageCause() instanceof EntityDamageByBlockEvent)\n-\t\t\t\treturn ((EntityDamageByBlockEvent) entity.getLastDamageCause()).getDamager();\n-\t\t\tEntityDamageEvent event = entity.getLastDamageCause();\n-\t\t\tif (event instanceof EntityDamageByEntityEvent) {\n-\t\t\t\tEntityDamageByEntityEvent evt = (EntityDamageByEntityEvent) event;\n-\t\t\t\tif (evt.getDamager() instanceof Projectile) {\n-\t\t\t\t\tObject shooter = ProjectileUtils.getShooter((Projectile) evt.getDamager());\n+\t\tEntityDamageEvent damageEvent = entity.getLastDamageCause();\n+\t\tif (damageEvent != null) {\n+\t\t\tif (damageEvent instanceof EntityDamageByBlockEvent)\n+\t\t\t\treturn ((EntityDamageByBlockEvent) damageEvent ).getDamager();\n+\t\t\tif (damageEvent instanceof EntityDamageByEntityEvent) {\n+\t\t\t\tEntityDamageByEntityEvent damageByEntityEvent = (EntityDamageByEntityEvent) damageEvent;\n+\t\t\t\tif (damageByEntityEvent.getDamager() instanceof Projectile) {\n+\t\t\t\t\tObject shooter = ProjectileUtils.getShooter((Projectile) damageByEntityEvent.getDamager());\n \t\t\t\t\tif (shooter instanceof Entity)\n \t\t\t\t\t\treturn shooter;\n \t\t\t\t}\n-\t\t\t\treturn evt.getDamager();\n+\t\t\t\treturn damageByEntityEvent.getDamager();\n \t\t\t}\n \t\t}\n \t\treturn null;\n"}}, {"oid": "46015871bb760de651306fc4ad7be68936d9ebf5", "url": "https://github.com/SkriptLang/Skript/commit/46015871bb760de651306fc4ad7be68936d9ebf5", "message": "Refactored some names and cached entity.getLastDamageCause()", "committedDate": "2020-09-29T06:21:59Z", "type": "commit"}, {"oid": "8cfb755bb27b3a2d17cef52bac0e6ac24c86f154", "url": "https://github.com/SkriptLang/Skript/commit/8cfb755bb27b3a2d17cef52bac0e6ac24c86f154", "message": "Merge branch 'dev-2.5' into LastDamage-&-LastAttacker", "committedDate": "2020-09-29T23:34:30Z", "type": "commit"}, {"oid": "5434792228e831c707b00c5be98c8f7d45154298", "url": "https://github.com/SkriptLang/Skript/commit/5434792228e831c707b00c5be98c8f7d45154298", "message": "Update license header", "committedDate": "2020-09-29T23:55:25Z", "type": "commit"}, {"oid": "8803814bd6900c204c5bafc083e9fee58ab35911", "url": "https://github.com/SkriptLang/Skript/commit/8803814bd6900c204c5bafc083e9fee58ab35911", "message": "Update license header", "committedDate": "2020-09-29T23:55:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYwNTQ3NQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497605475", "bodyText": "instead of duplicating this logic, can we just reuse the logic from ExprAttacker? you can do something like this:\ninit() {\n    this.attackerExpr = new ExprAttacker();\n    attackerExpr.init(exprs, 0, isDelayed, null);\n}\n\nconvert(entity) {\n    return attackerExpr.get(e.getLastDamageCause())[0];\n}\n\nthat way we can ensure that both expressions always give the same attacker", "author": "Pikachu920", "createdAt": "2020-09-30T15:32:44Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -0,0 +1,77 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright Peter G\u00fcttinger, SkriptLang team and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Projectile;\n+import org.bukkit.event.entity.EntityDamageByBlockEvent;\n+import org.bukkit.event.entity.EntityDamageByEntityEvent;\n+import org.bukkit.event.entity.EntityDamageEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.bukkitutil.ProjectileUtils;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+\n+@Name(\"Last Attacker\")\n+@Description(\"The last block or entity that attacked an entity.\")\n+@Examples({\"send \\\"%last attacker of event-entity%\\\"\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\t@SuppressWarnings(\"null\")\n+\tpublic Object convert(Entity entity) {\n+\t\tEntityDamageEvent damageEvent = entity.getLastDamageCause();", "originalCommit": "8803814bd6900c204c5bafc083e9fee58ab35911", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 647289c5..30f73323 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -15,7 +15,7 @@\n  * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n  *\n  *\n- * Copyright Peter G\u00fcttinger, SkriptLang team and contributors\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n  */\n package ch.njol.skript.expressions;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYwNzYyNw==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497607627", "bodyText": "instead of having this mod variable can you either duplicate the code or use something like delta[0] = (Long) delta[0] * -1", "author": "Pikachu920", "createdAt": "2020-09-30T15:35:47Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright Peter G\u00fcttinger, SkriptLang team and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity. Note that changing it doesn't deal more/less damage.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase ADD:\n+\t\t\tcase SET:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tint mod = 1;\n+\t\tif (delta != null) {\n+\t\t\tswitch (mode) {\n+\t\t\t\tcase SET:\n+\t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n+\t\t\t\t\t\tentity.setLastDamage((Long) delta[0]);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tmod = -1;", "originalCommit": "8803814bd6900c204c5bafc083e9fee58ab35911", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 534a75b0..61e02137 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -15,7 +15,7 @@\n  * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n  *\n  *\n- * Copyright Peter G\u00fcttinger, SkriptLang team and contributors\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n  */\n package ch.njol.skript.expressions;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYwOTk2MQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497609961", "bodyText": "same thing here, can you just use ExprDamage and pass in the last event? skript actually has some modifiers on how the damage is returned (like dividing by 2 for EntityDamageEvent)", "author": "Pikachu920", "createdAt": "2020-09-30T15:38:59Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright Peter G\u00fcttinger, SkriptLang team and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.LivingEntity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Last Damage\")\n+@Description(\"The last damage that was done to an entity. Note that changing it doesn't deal more/less damage.\")\n+@Examples({\"set last damage of event-entity to 2\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(LivingEntity livingEntity) {\n+\t\treturn livingEntity.getLastDamage();", "originalCommit": "8803814bd6900c204c5bafc083e9fee58ab35911", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 534a75b0..61e02137 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -15,7 +15,7 @@\n  * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n  *\n  *\n- * Copyright Peter G\u00fcttinger, SkriptLang team and contributors\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n  */\n package ch.njol.skript.expressions;\n \n"}}, {"oid": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "url": "https://github.com/SkriptLang/Skript/commit/aac6af31d9df54aa66189f3b0362a3e62ef027cb", "message": "Updated ExprArrowPierceLevel.java", "committedDate": "2020-09-30T16:30:50Z", "type": "commit"}, {"oid": "cbe6908da1fabfb2306577e0120db41e3ce97e99", "url": "https://github.com/SkriptLang/Skript/commit/cbe6908da1fabfb2306577e0120db41e3ce97e99", "message": "Merge remote-tracking branch 'origin/LastDamage-&-LastAttacker' into LastDamage-&-LastAttacker", "committedDate": "2020-09-30T16:31:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczOTQ0NA==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497739444", "bodyText": "could you put a private modifier on this guy?", "author": "Pikachu920", "createdAt": "2020-09-30T19:10:23Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -42,26 +45,21 @@\n \tstatic {\n \t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n \t}\n+\t@Nullable\n+\tExprAttacker attackerExpr;", "originalCommit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fa8fb506a3412fed75269163a779d51a8bc1d235", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 30f73323..0969c9ec 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -46,11 +46,11 @@ public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n \t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n \t}\n \t@Nullable\n-\tExprAttacker attackerExpr;\n+\tprivate ExprAttacker attackerExpr;\n \t\n \t@Override\n \tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, SkriptParser.ParseResult parseResult) {\n-\t\tthis.attackerExpr = new ExprAttacker();\n+\t\tattackerExpr = new ExprAttacker();\n \t\treturn true;\n \t}\n \t\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzczOTU5Nw==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497739597", "bodyText": "could you put a private modifier on this guy?", "author": "Pikachu920", "createdAt": "2020-09-30T19:10:39Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -41,10 +44,20 @@\n \t\tregister(ExprLastDamage.class, Number.class, \"last damage\", \"livingentities\");\n \t}\n \t\n+\t@Nullable\n+\tExprDamage damageExpr;", "originalCommit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fa8fb506a3412fed75269163a779d51a8bc1d235", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 61e02137..6b711234 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -45,7 +45,7 @@ public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Numbe\n \t}\n \t\n \t@Nullable\n-\tExprDamage damageExpr;\n+\tprivate ExprDamage damageExpr;\n \t\n \t@Override\n \tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, SkriptParser.ParseResult parseResult) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0MTA3OA==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497741078", "bodyText": "could you remove the this. here? your other file doesn't have it and i checked a couple expressions and it looks like most of them don't either", "author": "Pikachu920", "createdAt": "2020-09-30T19:13:29Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java", "diffHunk": "@@ -42,26 +45,21 @@\n \tstatic {\n \t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n \t}\n+\t@Nullable\n+\tExprAttacker attackerExpr;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, SkriptParser.ParseResult parseResult) {\n+\t\tthis.attackerExpr = new ExprAttacker();", "originalCommit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fa8fb506a3412fed75269163a779d51a8bc1d235", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\nindex 30f73323..0969c9ec 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastAttacker.java\n\n@@ -46,11 +46,11 @@ public class ExprLastAttacker extends SimplePropertyExpression<Entity, Object> {\n \t\tregister(ExprLastAttacker.class, Object.class, \"last attacker\", \"entity\");\n \t}\n \t@Nullable\n-\tExprAttacker attackerExpr;\n+\tprivate ExprAttacker attackerExpr;\n \t\n \t@Override\n \tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, SkriptParser.ParseResult parseResult) {\n-\t\tthis.attackerExpr = new ExprAttacker();\n+\t\tattackerExpr = new ExprAttacker();\n \t\treturn true;\n \t}\n \t\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0MTcxMQ==", "url": "https://github.com/SkriptLang/Skript/pull/3233#discussion_r497741711", "bodyText": "missing a space after *", "author": "Pikachu920", "createdAt": "2020-09-30T19:14:40Z", "path": "src/main/java/ch/njol/skript/expressions/ExprLastDamage.java", "diffHunk": "@@ -62,18 +75,17 @@ public Number convert(LivingEntity livingEntity) {\n \t\n \t@Override\n \tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n-\t\tint mod = 1;\n \t\tif (delta != null) {\n \t\t\tswitch (mode) {\n \t\t\t\tcase SET:\n \t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n \t\t\t\t\t\tentity.setLastDamage((Long) delta[0]);\n \t\t\t\t\tbreak;\n \t\t\t\tcase REMOVE:\n-\t\t\t\t\tmod = -1;\n+\t\t\t\t\tdelta[0] = (Long) delta[0] *-1;", "originalCommit": "aac6af31d9df54aa66189f3b0362a3e62ef027cb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fa8fb506a3412fed75269163a779d51a8bc1d235", "chunk": "diff --git a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\nindex 61e02137..6b711234 100644\n--- a/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n+++ b/src/main/java/ch/njol/skript/expressions/ExprLastDamage.java\n\n@@ -82,7 +82,7 @@ public class ExprLastDamage extends SimplePropertyExpression<LivingEntity, Numbe\n \t\t\t\t\t\tentity.setLastDamage((Long) delta[0]);\n \t\t\t\t\tbreak;\n \t\t\t\tcase REMOVE:\n-\t\t\t\t\tdelta[0] = (Long) delta[0] *-1;\n+\t\t\t\t\tdelta[0] = (Long) delta[0] * -1;\n \t\t\t\tcase ADD:\n \t\t\t\t\tfor (LivingEntity entity : getExpr().getArray(e))\n \t\t\t\t\t\tentity.setLastDamage((Long) delta[0] + entity.getLastDamage());\n"}}, {"oid": "fa8fb506a3412fed75269163a779d51a8bc1d235", "url": "https://github.com/SkriptLang/Skript/commit/fa8fb506a3412fed75269163a779d51a8bc1d235", "message": "Updated everything according to what Pikachu said.", "committedDate": "2020-09-30T19:18:00Z", "type": "commit"}, {"oid": "57c1b544a99e3b72d8e654e946ed96cf754198e4", "url": "https://github.com/SkriptLang/Skript/commit/57c1b544a99e3b72d8e654e946ed96cf754198e4", "message": "Removed some imports and added an empty line", "committedDate": "2020-09-30T19:18:27Z", "type": "commit"}, {"oid": "0d06ab42e5e3eeb8dc8c3014e79a8aa43ce82b95", "url": "https://github.com/SkriptLang/Skript/commit/0d06ab42e5e3eeb8dc8c3014e79a8aa43ce82b95", "message": "Merge branch 'dev-2.5' into LastDamage-&-LastAttacker", "committedDate": "2020-10-05T06:49:20Z", "type": "commit"}]}