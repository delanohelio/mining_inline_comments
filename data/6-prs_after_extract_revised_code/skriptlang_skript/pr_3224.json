{"pr_number": 3224, "pr_title": "Added the Inventory pickup item event", "pr_createdAt": "2020-07-26T14:44:30Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3224", "timeline": [{"oid": "11482de7da4f76884b0f1818a7b582450468532a", "url": "https://github.com/SkriptLang/Skript/commit/11482de7da4f76884b0f1818a7b582450468532a", "message": "Added CondServerIsWhitelisted and ExprWhitelist", "committedDate": "2020-07-26T14:19:17Z", "type": "commit"}, {"oid": "886df81ec6ce5ea5d4316841d025d73ee2fe9a33", "url": "https://github.com/SkriptLang/Skript/commit/886df81ec6ce5ea5d4316841d025d73ee2fe9a33", "message": "Revert \"Added CondServerIsWhitelisted and ExprWhitelist\"\n\nThis reverts commit 11482de7da4f76884b0f1818a7b582450468532a.", "committedDate": "2020-07-26T14:19:48Z", "type": "commit"}, {"oid": "1765e4cad24f958ef7c0bdbebcabf75aad3a0312", "url": "https://github.com/SkriptLang/Skript/commit/1765e4cad24f958ef7c0bdbebcabf75aad3a0312", "message": "Added 'on inventory pickup:' (and event-inventory, event-item and event-entity)", "committedDate": "2020-07-26T14:41:14Z", "type": "commit"}, {"oid": "724fc6171d696e2d92bd69d2696cfb767b6b3378", "url": "https://github.com/SkriptLang/Skript/commit/724fc6171d696e2d92bd69d2696cfb767b6b3378", "message": "Revert \"Added 'on inventory pickup:' (and event-inventory, event-item and event-entity)\"\n\nThis reverts commit 1765e4cad24f958ef7c0bdbebcabf75aad3a0312.", "committedDate": "2020-07-26T14:41:22Z", "type": "commit"}, {"oid": "6cbd01764488d23333a1f12124b9077fc6538157", "url": "https://github.com/SkriptLang/Skript/commit/6cbd01764488d23333a1f12124b9077fc6538157", "message": "Added 'on inventory pickup:' (and event-inventory, event-item and event-entity)", "committedDate": "2020-07-26T14:43:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU2NTQzNQ==", "url": "https://github.com/SkriptLang/Skript/pull/3224#discussion_r460565435", "bodyText": "As stated previously in another PR, line changes should only be done for things relevant to the theme of the PR.", "author": "ShaneBeee", "createdAt": "2020-07-26T19:41:24Z", "path": "src/main/java/ch/njol/skript/events/SimpleEvents.java", "diffHunk": "@@ -561,11 +562,15 @@\n \t\t\t\t\"\\tset the cost of enchant offer 1 to 10 levels\")\n \t\t\t.since(\"2.5\");\n \t\tSkript.registerEvent(\"Enchant\", SimpleEvent.class, EnchantItemEvent.class, \"[item] enchant\")\n-\t\t.description(\"Called when a player successfully enchants an item.\",\n-\t\t\t\" To get the enchanted item, see the <a href='expressions.html#ExprEnchantEventsEnchantItem'>enchant item expression</a>\")\n-\t\t.examples(\"on enchant:\",\n-\t\t\t\"\\tif the clicked button is enchantment option 1:\",\n-\t\t\t\"\\t\\tset the applied enchantments to sharpness 10 and unbreaking 10\")\n-\t\t.since(\"2.5\");\n+\t\t\t.description(\"Called when a player successfully enchants an item.\",\n+\t\t\t\t\" To get the enchanted item, see the <a href='expressions.html#ExprEnchantEventsEnchantItem'>enchant item expression</a>\")\n+\t\t\t.examples(\"on enchant:\",\n+\t\t\t\t\"\\tif the clicked button is enchantment option 1:\",\n+\t\t\t\t\"\\t\\tset the applied enchantments to sharpness 10 and unbreaking 10\")\n+\t\t\t.since(\"2.5\");", "originalCommit": "6cbd01764488d23333a1f12124b9077fc6538157", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ce97fd9e7fe510aedb0358e8f536e809414212e5", "chunk": "diff --git a/src/main/java/ch/njol/skript/events/SimpleEvents.java b/src/main/java/ch/njol/skript/events/SimpleEvents.java\nindex df29c8c4..c3f2c7eb 100644\n--- a/src/main/java/ch/njol/skript/events/SimpleEvents.java\n+++ b/src/main/java/ch/njol/skript/events/SimpleEvents.java\n\n@@ -562,12 +562,12 @@ public class SimpleEvents {\n \t\t\t\t\"\\tset the cost of enchant offer 1 to 10 levels\")\n \t\t\t.since(\"2.5\");\n \t\tSkript.registerEvent(\"Enchant\", SimpleEvent.class, EnchantItemEvent.class, \"[item] enchant\")\n-\t\t\t.description(\"Called when a player successfully enchants an item.\",\n-\t\t\t\t\" To get the enchanted item, see the <a href='expressions.html#ExprEnchantEventsEnchantItem'>enchant item expression</a>\")\n-\t\t\t.examples(\"on enchant:\",\n-\t\t\t\t\"\\tif the clicked button is enchantment option 1:\",\n-\t\t\t\t\"\\t\\tset the applied enchantments to sharpness 10 and unbreaking 10\")\n-\t\t\t.since(\"2.5\");\n+\t\t.description(\"Called when a player successfully enchants an item.\",\n+\t\t\t\" To get the enchanted item, see the <a href='expressions.html#ExprEnchantEventsEnchantItem'>enchant item expression</a>\")\n+\t\t.examples(\"on enchant:\",\n+\t\t\t\"\\tif the clicked button is enchantment option 1:\",\n+\t\t\t\"\\t\\tset the applied enchantments to sharpness 10 and unbreaking 10\")\n+\t\t.since(\"2.5\");\n \t\tSkript.registerEvent(\"Inventory Pickup\", SimpleEvent.class, InventoryPickupItemEvent.class, \"inventory pick[ ]up\")\n \t\t\t.description(\"Called when an inventory (a hopper, a hopper minecart, etc.) picks up an item\")\n \t\t\t.examples(\"on inventory pickup:\")\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkwNjQ5NA==", "url": "https://github.com/SkriptLang/Skript/pull/3224#discussion_r460906494", "bodyText": "Use ItemType", "author": "FranKusmiruk", "createdAt": "2020-07-27T13:54:04Z", "path": "src/main/java/ch/njol/skript/classes/data/BukkitEventValues.java", "diffHunk": "@@ -974,6 +975,28 @@ public Inventory get(final InventoryCloseEvent e) {\n \t\t\t\treturn e.getInventory();\n \t\t\t}\n \t\t}, 0);\n+\t\t//InventoryPickupItemEvent\n+\t\tEventValues.registerEventValue(InventoryPickupItemEvent.class, Inventory.class, new Getter<Inventory, InventoryPickupItemEvent>() {\n+\t\t\t@Nullable\n+\t\t\t@Override\n+\t\t\tpublic Inventory get(InventoryPickupItemEvent event) {\n+\t\t\t\treturn event.getInventory();\n+\t\t\t}\n+\t\t}, 0);\n+\t\tEventValues.registerEventValue(InventoryPickupItemEvent.class, Item.class, new Getter<Item, InventoryPickupItemEvent>() {\n+\t\t\t@Nullable\n+\t\t\t@Override\n+\t\t\tpublic Item get(InventoryPickupItemEvent event) {\n+\t\t\t\treturn event.getItem();\n+\t\t\t}\n+\t\t}, 0);\n+\t\tEventValues.registerEventValue(InventoryPickupItemEvent.class, ItemStack.class, new Getter<ItemStack, InventoryPickupItemEvent>() {", "originalCommit": "6cbd01764488d23333a1f12124b9077fc6538157", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQyMTMwNQ==", "url": "https://github.com/SkriptLang/Skript/pull/3224#discussion_r461421305", "bodyText": "Wouldn't there be issues with that?", "author": "DeltaRays", "createdAt": "2020-07-28T08:49:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkwNjQ5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzNTQ2Nw==", "url": "https://github.com/SkriptLang/Skript/pull/3224#discussion_r463235467", "bodyText": "You can do\nnew ItemType(event.getItem().getItemStack());", "author": "APickledWalrus", "createdAt": "2020-07-30T19:54:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkwNjQ5NA=="}], "type": "inlineReview", "revised_code": {"commit": "8659e32e7dc7dc4c5d0d2fef31671dad811e7072", "chunk": "diff --git a/src/main/java/ch/njol/skript/classes/data/BukkitEventValues.java b/src/main/java/ch/njol/skript/classes/data/BukkitEventValues.java\nindex 4e05ff7b..805bc730 100644\n--- a/src/main/java/ch/njol/skript/classes/data/BukkitEventValues.java\n+++ b/src/main/java/ch/njol/skript/classes/data/BukkitEventValues.java\n\n@@ -990,11 +998,11 @@ public final class BukkitEventValues {\n \t\t\t\treturn event.getItem();\n \t\t\t}\n \t\t}, 0);\n-\t\tEventValues.registerEventValue(InventoryPickupItemEvent.class, ItemStack.class, new Getter<ItemStack, InventoryPickupItemEvent>() {\n+\t\tEventValues.registerEventValue(InventoryPickupItemEvent.class, ItemType.class, new Getter<ItemType, InventoryPickupItemEvent>() {\n \t\t\t@Nullable\n \t\t\t@Override\n-\t\t\tpublic ItemStack get(InventoryPickupItemEvent event) {\n-\t\t\t\treturn event.getItem().getItemStack();\n+\t\t\tpublic ItemType get(InventoryPickupItemEvent event) {\n+\t\t\t\treturn new ItemType(event.getItem().getItemStack());\n \t\t\t}\n \t\t}, 0);\n \t\t//PortalCreateEvent\n"}}, {"oid": "ddecf799d8cc034e922bfca57d4f4daec91cde4d", "url": "https://github.com/SkriptLang/Skript/commit/ddecf799d8cc034e922bfca57d4f4daec91cde4d", "message": "Merge branch 'master' into InventoryPickupItemEvent", "committedDate": "2020-07-28T08:46:46Z", "type": "commit"}, {"oid": "ce97fd9e7fe510aedb0358e8f536e809414212e5", "url": "https://github.com/SkriptLang/Skript/commit/ce97fd9e7fe510aedb0358e8f536e809414212e5", "message": "Removed accidental line changes.", "committedDate": "2020-07-28T08:50:12Z", "type": "commit"}, {"oid": "4c34fade1d265d745e0ea55ea2c950dd7c166757", "url": "https://github.com/SkriptLang/Skript/commit/4c34fade1d265d745e0ea55ea2c950dd7c166757", "message": "Merge remote-tracking branch 'origin/InventoryPickupItemEvent' into InventoryPickupItemEvent\n\n# Conflicts:\n#\tsrc/main/java/ch/njol/skript/events/SimpleEvents.java", "committedDate": "2020-07-28T08:50:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM1NzE2Nw==", "url": "https://github.com/SkriptLang/Skript/pull/3224#discussion_r463357167", "bodyText": "When making line breaks, Java standards require two indentations not a single indentation. You can look at the other events.", "author": "TheLimeGlass", "createdAt": "2020-07-31T01:23:27Z", "path": "src/main/java/ch/njol/skript/events/SimpleEvents.java", "diffHunk": "@@ -567,5 +568,9 @@\n \t\t\t\"\\tif the clicked button is enchantment option 1:\",\n \t\t\t\"\\t\\tset the applied enchantments to sharpness 10 and unbreaking 10\")\n \t\t.since(\"2.5\");\n+\t\tSkript.registerEvent(\"Inventory Pickup\", SimpleEvent.class, InventoryPickupItemEvent.class, \"inventory pick[ ]up\")\n+\t\t\t.description(\"Called when an inventory (a hopper, a hopper minecart, etc.) picks up an item\")", "originalCommit": "4c34fade1d265d745e0ea55ea2c950dd7c166757", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bccdb430120cbac3719e49a97db7456077c034be", "chunk": "diff --git a/src/main/java/ch/njol/skript/events/SimpleEvents.java b/src/main/java/ch/njol/skript/events/SimpleEvents.java\nindex c3f2c7eb..ba7b0d08 100644\n--- a/src/main/java/ch/njol/skript/events/SimpleEvents.java\n+++ b/src/main/java/ch/njol/skript/events/SimpleEvents.java\n\n@@ -571,6 +572,13 @@ public class SimpleEvents {\n \t\tSkript.registerEvent(\"Inventory Pickup\", SimpleEvent.class, InventoryPickupItemEvent.class, \"inventory pick[ ]up\")\n \t\t\t.description(\"Called when an inventory (a hopper, a hopper minecart, etc.) picks up an item\")\n \t\t\t.examples(\"on inventory pickup:\")\n+      .since(\"INSERT VERSION\");\n+\t\tif(Skript.classExists(\"org.bukkit.event.block.BlockFertilizeEvent\"))\n+\t\t\tSkript.registerEvent(\"Block Fertilize\", SimpleEvent.class, BlockFertilizeEvent.class, \"[block] fertilize\")\n+\t\t\t.description(\"Called when a player fertilizes blocks.\")\n+\t\t\t.requiredPlugins(\"Minecraft 1.13 or newer\")\n+\t\t\t.examples(\"on block fertilize:\",\n+\t\t\t\t\"\\tsend \\\"Fertilized %size of fertilized blocks% blocks got fertilized.\\\"\")\n \t\t\t.since(\"INSERT VERSION\");\n \t}\n }\n"}}, {"oid": "bccdb430120cbac3719e49a97db7456077c034be", "url": "https://github.com/SkriptLang/Skript/commit/bccdb430120cbac3719e49a97db7456077c034be", "message": "Merge branch 'master' into InventoryPickupItemEvent", "committedDate": "2020-08-02T16:18:01Z", "type": "commit"}, {"oid": "8659e32e7dc7dc4c5d0d2fef31671dad811e7072", "url": "https://github.com/SkriptLang/Skript/commit/8659e32e7dc7dc4c5d0d2fef31671dad811e7072", "message": "Updated it to use ItemType and indented everything correctly", "committedDate": "2020-08-02T16:20:37Z", "type": "commit"}, {"oid": "91905858c3bb89e406dc48d52ea9dd7386cbfee9", "url": "https://github.com/SkriptLang/Skript/commit/91905858c3bb89e406dc48d52ea9dd7386cbfee9", "message": "Merge branch 'master' into InventoryPickupItemEvent", "committedDate": "2020-09-08T18:18:55Z", "type": "commit"}, {"oid": "57f0c2e0a2df769184a97aa0019cee8aa2163b71", "url": "https://github.com/SkriptLang/Skript/commit/57f0c2e0a2df769184a97aa0019cee8aa2163b71", "message": "Merge branch 'master' into InventoryPickupItemEvent", "committedDate": "2020-09-29T20:16:27Z", "type": "commit"}, {"oid": "e16d26b1feee15bac825c23fb0e78161d2d6509a", "url": "https://github.com/SkriptLang/Skript/commit/e16d26b1feee15bac825c23fb0e78161d2d6509a", "message": "Merge branch 'dev-2.5' into InventoryPickupItemEvent", "committedDate": "2020-10-05T06:26:46Z", "type": "commit"}, {"oid": "4cf691192ec384c08bcf82eb5209884361678b0a", "url": "https://github.com/SkriptLang/Skript/commit/4cf691192ec384c08bcf82eb5209884361678b0a", "message": "Merge branch 'dev-2.5' into InventoryPickupItemEvent", "committedDate": "2020-10-05T06:36:00Z", "type": "commit"}, {"oid": "4ccac1980886c5d6d34a0678bdff7adc6715b3e2", "url": "https://github.com/SkriptLang/Skript/commit/4ccac1980886c5d6d34a0678bdff7adc6715b3e2", "message": "Merge branch 'dev-2.5' into InventoryPickupItemEvent", "committedDate": "2020-10-05T12:10:20Z", "type": "commit"}, {"oid": "67e4f7a3202540e632b93a492725034dc522d6e8", "url": "https://github.com/SkriptLang/Skript/commit/67e4f7a3202540e632b93a492725034dc522d6e8", "message": "Merge branch 'dev-2.5' into InventoryPickupItemEvent", "committedDate": "2020-10-06T19:27:41Z", "type": "commit"}, {"oid": "62c0b7d5c2e6bfecd2004e18b471794baf90d852", "url": "https://github.com/SkriptLang/Skript/commit/62c0b7d5c2e6bfecd2004e18b471794baf90d852", "message": "Merge branch 'dev-2.5' into InventoryPickupItemEvent", "committedDate": "2020-10-06T22:15:48Z", "type": "commit"}]}