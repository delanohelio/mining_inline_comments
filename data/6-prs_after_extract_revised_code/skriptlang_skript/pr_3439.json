{"pr_number": 3439, "pr_title": "Fix/slot compare", "pr_createdAt": "2020-10-04T23:48:13Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3439", "timeline": [{"oid": "822efcf2c4d8e476bfac643a184f99dc6f7be6f4", "url": "https://github.com/SkriptLang/Skript/commit/822efcf2c4d8e476bfac643a184f99dc6f7be6f4", "message": "plugin.yml - update line endings\n- This was missed in the major update, and is causing issues for some", "committedDate": "2020-10-04T21:42:19Z", "type": "commit"}, {"oid": "f817c305e70f91803d14824160edeade346813f8", "url": "https://github.com/SkriptLang/Skript/commit/f817c305e70f91803d14824160edeade346813f8", "message": "Merge branch 'dev-2.5' of https://github.com/SkriptLang/Skript into dev-2.5", "committedDate": "2020-10-04T23:42:06Z", "type": "commit"}, {"oid": "ae42c173939cb1157833d9f64ff68d3e21f7d86f", "url": "https://github.com/SkriptLang/Skript/commit/ae42c173939cb1157833d9f64ff68d3e21f7d86f", "message": "DefaultComparators - fix slot comparisons between inventory slot and equiptment slot", "committedDate": "2020-10-04T23:45:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499661343", "bodyText": "Maybe this would be better of as:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tif ((o1 instanceof EquipmentSlot && !(o2 instanceof EquipmentSlot)) || !(o1 instanceof EquipmentSlot) && o2 instanceof EquipmentSlot)\n          \n          \n            \n            \t\t\t\tboolean equipment1 = o1 instanceof EquipmentSlot;\n          \n          \n            \n            \t\t\t\tboolean equipment2 = o2 instanceof EquipmentSlot;\n          \n          \n            \n            \t\t\t\tif (equipment != equipment2)\n          \n      \n    \n    \n  \n\nNot sure about those variable names though.\nThis might not really matter though", "author": "APickledWalrus", "createdAt": "2020-10-05T14:55:26Z", "path": "src/main/java/ch/njol/skript/classes/data/DefaultComparators.java", "diffHunk": "@@ -103,6 +104,8 @@ public boolean supportsOrdering() {\n \n \t\t\t@Override\n \t\t\tpublic Relation compare(Slot o1, Slot o2) {\n+\t\t\t\tif ((o1 instanceof EquipmentSlot && !(o2 instanceof EquipmentSlot)) || !(o1 instanceof EquipmentSlot) && o2 instanceof EquipmentSlot)", "originalCommit": "ae42c173939cb1157833d9f64ff68d3e21f7d86f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg1MTc0MA==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499851740", "bodyText": "kinda just does the same thing with more lines.", "author": "ShaneBeee", "createdAt": "2020-10-05T20:25:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg1MzkwOQ==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499853909", "bodyText": "Maybe - I mainly suggested this just to avoid the double instanceof checks. Not that it really has that much of an impact though", "author": "APickledWalrus", "createdAt": "2020-10-05T20:29:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg1NTA4NA==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499855084", "bodyText": "in all fairness your suggestion is a double instance check anyways", "author": "ShaneBeee", "createdAt": "2020-10-05T20:31:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3MjA2NQ==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499872065", "bodyText": "updated \ud83d\udc4d", "author": "ShaneBeee", "createdAt": "2020-10-05T21:05:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}], "type": "inlineReview", "revised_code": {"commit": "addbf25ec59d740163c5cb0621f4f2701d3a1b30", "chunk": "diff --git a/src/main/java/ch/njol/skript/classes/data/DefaultComparators.java b/src/main/java/ch/njol/skript/classes/data/DefaultComparators.java\nindex dcf05740..0d8d98b1 100644\n--- a/src/main/java/ch/njol/skript/classes/data/DefaultComparators.java\n+++ b/src/main/java/ch/njol/skript/classes/data/DefaultComparators.java\n\n@@ -104,7 +104,9 @@ public class DefaultComparators {\n \n \t\t\t@Override\n \t\t\tpublic Relation compare(Slot o1, Slot o2) {\n-\t\t\t\tif ((o1 instanceof EquipmentSlot && !(o2 instanceof EquipmentSlot)) || !(o1 instanceof EquipmentSlot) && o2 instanceof EquipmentSlot)\n+\t\t\t\tboolean equipment1 = o1 instanceof EquipmentSlot;\n+\t\t\t\tboolean equipment2 = o2 instanceof EquipmentSlot;\n+\t\t\t\tif (equipment != equipment2)\n \t\t\t\t\treturn Relation.NOT_EQUAL;\n \t\t\t\tif (o1.isSameSlot(o2))\n \t\t\t\t\treturn Relation.EQUAL;\n"}}, {"oid": "addbf25ec59d740163c5cb0621f4f2701d3a1b30", "url": "https://github.com/SkriptLang/Skript/commit/addbf25ec59d740163c5cb0621f4f2701d3a1b30", "message": "Update src/main/java/ch/njol/skript/classes/data/DefaultComparators.java\n\nCo-authored-by: APickledWalrus <apickledwalrus@gmail.com>", "committedDate": "2020-10-05T21:00:26Z", "type": "commit"}, {"oid": "59243557310629df6f6d29aee1a66a38d9b57ffa", "url": "https://github.com/SkriptLang/Skript/commit/59243557310629df6f6d29aee1a66a38d9b57ffa", "message": "shorten comparison", "committedDate": "2020-10-05T21:03:58Z", "type": "commit"}, {"oid": "602dca01bb66ce4e8c4affc3835df324df399bba", "url": "https://github.com/SkriptLang/Skript/commit/602dca01bb66ce4e8c4affc3835df324df399bba", "message": "Merge branch 'dev-2.5' into fix/slot-compare", "committedDate": "2020-10-05T21:05:20Z", "type": "commit"}]}