{"pr_number": 537, "pr_title": "feat: support freemarker template Inheritance #534", "pr_createdAt": "2020-02-01T07:35:17Z", "pr_url": "https://github.com/halo-dev/halo/pull/537", "timeline": [{"oid": "ae6d773c4d515a18faa50b58cb3df402534d448c", "url": "https://github.com/halo-dev/halo/commit/ae6d773c4d515a18faa50b58cb3df402534d448c", "message": "feat: #534", "committedDate": "2020-02-01T07:33:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NDgwOQ==", "url": "https://github.com/halo-dev/halo/pull/537#discussion_r373764809", "bodyText": "HashMap\u7684\u53c2\u6570\u4e3a\u4e86\u9632\u6b62\u6269\u5bb9\u521d\u59cb\u5bb9\u91cf\u5e94\u8bbe\u7f6e\u4e3a\u5b9e\u9645\u5bb9\u91cf / 0.75 + 1\u8fd9\u91cc\u5e94\u8be5\u662f5", "author": "guqing", "createdAt": "2020-02-01T07:45:31Z", "path": "src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java", "diffHunk": "@@ -114,6 +120,16 @@ public void addFormatters(FormatterRegistry registry) {\n         registry.addConverterFactory(new StringToEnumConverterFactory());\n     }\n \n+    @Bean\n+    public Map<String, TemplateModel> freemarkerLayoutDirectives() {\n+        Map<String, TemplateModel> freemarkerLayoutDirectives = new HashMap<>(3);", "originalCommit": "ae6d773c4d515a18faa50b58cb3df402534d448c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NzgzOA==", "url": "https://github.com/halo-dev/halo/pull/537#discussion_r373767838", "bodyText": "\u957f\u89c1\u8bc6\u4e86", "author": "ruibaby", "createdAt": "2020-02-01T09:01:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NDgwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NzkwMQ==", "url": "https://github.com/halo-dev/halo/pull/537#discussion_r373767901", "bodyText": "\ud83d\ude02", "author": "guqing", "createdAt": "2020-02-01T09:02:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NDgwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ0OTg3Ng==", "url": "https://github.com/halo-dev/halo/pull/537#discussion_r374449876", "bodyText": "\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e0b loadFactor \u4e3a 1.0\u3002", "author": "JohnNiang", "createdAt": "2020-02-04T02:46:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NDgwOQ=="}], "type": "inlineReview", "revised_code": {"commit": "4bd26ff7fe8752b4d67e8c361c83b8fdefbc291f", "chunk": "diff --git a/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java b/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java\nindex 619c444c..c12c74da 100644\n--- a/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java\n+++ b/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java\n\n@@ -122,7 +122,7 @@ public class WebMvcAutoConfiguration implements WebMvcConfigurer {\n \n     @Bean\n     public Map<String, TemplateModel> freemarkerLayoutDirectives() {\n-        Map<String, TemplateModel> freemarkerLayoutDirectives = new HashMap<>(3);\n+        Map<String, TemplateModel> freemarkerLayoutDirectives = new HashMap<>(5);\n         freemarkerLayoutDirectives.put(\"extends\", new ExtendsDirective());\n         freemarkerLayoutDirectives.put(\"block\", new BlockDirective());\n         freemarkerLayoutDirectives.put(\"put\", new PutDirective());\n"}}, {"oid": "dce969cec347f98361296f37ff614160d84ebeef", "url": "https://github.com/halo-dev/halo/commit/dce969cec347f98361296f37ff614160d84ebeef", "message": "Merge branch 'dev' of https://github.com/halo-dev/halo into freemarker-template-inheritance", "committedDate": "2020-02-01T07:50:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2NTA1Ng==", "url": "https://github.com/halo-dev/halo/pull/537#discussion_r373765056", "bodyText": "\u8fd9\u91cc\u540c\u4e0a", "author": "guqing", "createdAt": "2020-02-01T07:51:33Z", "path": "src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java", "diffHunk": "@@ -142,6 +158,13 @@ public FreeMarkerConfigurer freemarkerConfig(HaloProperties haloProperties) thro\n         // Set predefined freemarker configuration\n         configurer.setConfiguration(configuration);\n \n+        // Set layout variable\n+        Map<String, Object> freemarkerVariables = new HashMap<>(1);", "originalCommit": "ae6d773c4d515a18faa50b58cb3df402534d448c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4bd26ff7fe8752b4d67e8c361c83b8fdefbc291f", "chunk": "diff --git a/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java b/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java\nindex 619c444c..c12c74da 100644\n--- a/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java\n+++ b/src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java\n\n@@ -159,7 +159,7 @@ public class WebMvcAutoConfiguration implements WebMvcConfigurer {\n         configurer.setConfiguration(configuration);\n \n         // Set layout variable\n-        Map<String, Object> freemarkerVariables = new HashMap<>(1);\n+        Map<String, Object> freemarkerVariables = new HashMap<>(5);\n \n         freemarkerVariables.put(\"layout\", freemarkerLayoutDirectives());\n \n"}}, {"oid": "4bd26ff7fe8752b4d67e8c361c83b8fdefbc291f", "url": "https://github.com/halo-dev/halo/commit/4bd26ff7fe8752b4d67e8c361c83b8fdefbc291f", "message": "fix: HashMap initialCapacity", "committedDate": "2020-02-01T09:05:09Z", "type": "commit"}, {"oid": "10981ec017a076dbe72cdb5a948062409fe9b232", "url": "https://github.com/halo-dev/halo/commit/10981ec017a076dbe72cdb5a948062409fe9b232", "message": "Merge branch 'dev' of https://github.com/halo-dev/halo into freemarker-template-inheritance", "committedDate": "2020-02-01T09:09:24Z", "type": "commit"}]}