{"pr_number": 965, "pr_title": "feat: \u6587\u7ae0\u8868\u6dfb\u52a0\u5b57\u6570\u7edf\u8ba1\u5b57\u6bb5\uff0c\u4e3b\u9898\u53ef\u4f7f\u7528${post.wordCount}\u8c03\u7528", "pr_createdAt": "2020-07-12T10:17:48Z", "pr_url": "https://github.com/halo-dev/halo/pull/965", "timeline": [{"oid": "b3fa3190be4ed8aeb5b5b89ceec6f04e2cbff182", "url": "https://github.com/halo-dev/halo/commit/b3fa3190be4ed8aeb5b5b89ceec6f04e2cbff182", "message": "feat: \u6587\u7ae0\u8868\u6dfb\u52a0\u5b57\u6570\u7edf\u8ba1\u5b57\u6bb5\uff0c\u4e3b\u9898\u53ef\u4f7f\u7528${post.wordCount}\u8c03\u7528", "committedDate": "2020-07-12T10:02:13Z", "type": "commit"}, {"oid": "933d9acb44797271510b634f467cf2b7242188a6", "url": "https://github.com/halo-dev/halo/commit/933d9acb44797271510b634f467cf2b7242188a6", "message": "feat: \u6587\u7ae0\u8868\u6dfb\u52a0\u5b57\u6570\u7edf\u8ba1\u5b57\u6bb5\uff0c\u4e3b\u9898\u53ef\u4f7f\u7528${post.wordCount}\u8c03\u7528", "committedDate": "2020-07-12T10:42:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5NDU5OA==", "url": "https://github.com/halo-dev/halo/pull/965#discussion_r453794598", "bodyText": "\u4e0d\u5efa\u8bae\u8fd9\u6837\u8ba1\u7b97\u5b57\u6570\uff0c\u5efa\u8bae\u4f7f\u7528\u6e32\u67d3\u597d\u7684 html \u6587\u6863\uff0c\u5e76\u6e05\u9664 html \u6807\u7b7e\uff0c\u8fd9\u6837\u7b97\u51fa\u6765\u7684\u5b57\u6570\u7406\u8bba\u4e0a\u5e94\u8be5\u66f4\u7cbe\u51c6\u70b9\u3002", "author": "ruibaby", "createdAt": "2020-07-13T16:59:25Z", "path": "src/main/java/run/halo/app/service/impl/PostServiceImpl.java", "diffHunk": "@@ -750,6 +756,8 @@ private PostDetailVO createOrUpdate(@NonNull Post post, Set<Integer> tagIds,\n                                         Set<Integer> categoryIds, Set<PostMeta> metas) {\n         Assert.notNull(post, \"Post param must not be null\");\n \n+        post.setWordCount((long) post.getOriginalContent().trim().length());", "originalCommit": "933d9acb44797271510b634f467cf2b7242188a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5NzEwNw==", "url": "https://github.com/halo-dev/halo/pull/965#discussion_r453797107", "bodyText": "\u53e6\u5916\uff0c\u8fd9\u91cc\u8c8c\u4f3c\u53ea\u4fee\u6539\u4e86 PostService\uff0cSheetService \u4e5f\u9700\u8981\u4fee\u6539\u54e6\u3002", "author": "ruibaby", "createdAt": "2020-07-13T17:03:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5NDU5OA=="}], "type": "inlineReview", "revised_code": {"commit": "f2b274accaa8abed2d11637926fc6cf5248f2375", "chunk": "diff --git a/src/main/java/run/halo/app/service/impl/PostServiceImpl.java b/src/main/java/run/halo/app/service/impl/PostServiceImpl.java\nindex cfaf6f9e..8d8f27fd 100644\n--- a/src/main/java/run/halo/app/service/impl/PostServiceImpl.java\n+++ b/src/main/java/run/halo/app/service/impl/PostServiceImpl.java\n\n@@ -756,8 +755,6 @@ public class PostServiceImpl extends BasePostServiceImpl<Post> implements PostSe\n                                         Set<Integer> categoryIds, Set<PostMeta> metas) {\n         Assert.notNull(post, \"Post param must not be null\");\n \n-        post.setWordCount((long) post.getOriginalContent().trim().length());\n-\n         // Create or update post\n         post = super.createOrUpdateBy(post);\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5NjU5OQ==", "url": "https://github.com/halo-dev/halo/pull/965#discussion_r453796599", "bodyText": "\u8fd9\u91cc\u76f4\u63a5 word_count \u5c31\u884c\u4e86", "author": "ruibaby", "createdAt": "2020-07-13T17:02:45Z", "path": "src/main/java/run/halo/app/model/entity/BasePost.java", "diffHunk": "@@ -151,6 +152,13 @@\n     @Column(name = \"meta_description\", length = 1023)\n     private String metaDescription;\n \n+    /**\n+     * Content word count\n+     */\n+    @Column(name = \"content_word_count\")", "originalCommit": "933d9acb44797271510b634f467cf2b7242188a6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f2b274accaa8abed2d11637926fc6cf5248f2375", "chunk": "diff --git a/src/main/java/run/halo/app/model/entity/BasePost.java b/src/main/java/run/halo/app/model/entity/BasePost.java\nindex 231c650c..de67d8ea 100644\n--- a/src/main/java/run/halo/app/model/entity/BasePost.java\n+++ b/src/main/java/run/halo/app/model/entity/BasePost.java\n\n@@ -155,7 +155,7 @@ public class BasePost extends BaseEntity {\n     /**\n      * Content word count\n      */\n-    @Column(name = \"content_word_count\")\n+    @Column(name = \"word_count\")\n     @ColumnDefault(\"0\")\n     private Long wordCount;\n \n"}}, {"oid": "f2b274accaa8abed2d11637926fc6cf5248f2375", "url": "https://github.com/halo-dev/halo/commit/f2b274accaa8abed2d11637926fc6cf5248f2375", "message": "feat: \u6587\u7ae0\u8868\u6dfb\u52a0\u5b57\u6570\u7edf\u8ba1\u5b57\u6bb5\uff0c\u4e3b\u9898\u53ef\u4f7f\u7528${post.wordCount}\u8c03\u7528", "committedDate": "2020-07-13T18:07:48Z", "type": "commit"}, {"oid": "e04415c3e3656764e4b513243e2239a83528f0a2", "url": "https://github.com/halo-dev/halo/commit/e04415c3e3656764e4b513243e2239a83528f0a2", "message": "feat: \u6587\u7ae0\u8868\u6dfb\u52a0\u5b57\u6570\u7edf\u8ba1\u5b57\u6bb5\uff0c\u4e3b\u9898\u53ef\u4f7f\u7528${post.wordCount}\u8c03\u7528", "committedDate": "2020-07-13T18:08:29Z", "type": "commit"}, {"oid": "66720c73559803ac0e9291072f95677e64f7c046", "url": "https://github.com/halo-dev/halo/commit/66720c73559803ac0e9291072f95677e64f7c046", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-13T18:16:58Z", "type": "commit"}, {"oid": "2ec7694357d4183c96c117c88479b28396ff7899", "url": "https://github.com/halo-dev/halo/commit/2ec7694357d4183c96c117c88479b28396ff7899", "message": "Merge branch 'master' of https://github.com/coortop/halo into temp", "committedDate": "2020-07-13T18:49:21Z", "type": "commit"}, {"oid": "81074eebd8d3f3fd186977c092df3dc88741ba77", "url": "https://github.com/halo-dev/halo/commit/81074eebd8d3f3fd186977c092df3dc88741ba77", "message": "feat: \u6587\u7ae0\u8868\u6dfb\u52a0\u5b57\u6570\u7edf\u8ba1\u5b57\u6bb5\uff0c\u4e3b\u9898\u53ef\u4f7f\u7528${post.wordCount}\u8c03\u7528", "committedDate": "2020-07-13T18:58:26Z", "type": "commit"}]}