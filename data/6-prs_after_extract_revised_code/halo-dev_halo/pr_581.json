{"pr_number": 581, "pr_title": "Fix file upload exception", "pr_createdAt": "2020-02-20T06:34:31Z", "pr_url": "https://github.com/halo-dev/halo/pull/581", "timeline": [{"oid": "3a8280fb89d7811676c2677865b6c045a6b0e4b7", "url": "https://github.com/halo-dev/halo/commit/3a8280fb89d7811676c2677865b6c045a6b0e4b7", "message": "Refactor FileHandler and related implementations", "committedDate": "2020-02-14T02:54:54Z", "type": "commit"}, {"oid": "e9f870b10ba7a2ecfd953c467477506f2f0cdcf3", "url": "https://github.com/halo-dev/halo/commit/e9f870b10ba7a2ecfd953c467477506f2f0cdcf3", "message": "Add more friendly error throw", "committedDate": "2020-02-14T03:15:07Z", "type": "commit"}, {"oid": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d", "url": "https://github.com/halo-dev/halo/commit/1356a3a4dd53c16c7942b0482b02e2116bb04a6d", "message": "Make tmp directory as default location for multipart file", "committedDate": "2020-02-20T06:29:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwMzEyMw==", "url": "https://github.com/halo-dev/halo/pull/581#discussion_r381803123", "bodyText": "\u8fd9\u91cc\u5efa\u8bae\u63d0\u793a\u4e2d\u6587\u54e6\uff0c\u80fd\u5728\u540e\u53f0\u7528 $message \u63d0\u793a\u7684\u5efa\u8bae\u90fd\u7528\u4e2d\u6587\u3002", "author": "ruibaby", "createdAt": "2020-02-20T06:35:53Z", "path": "src/main/java/run/halo/app/handler/file/AliOssFileHandler.java", "diffHunk": "@@ -116,19 +116,13 @@ public UploadResult upload(MultipartFile file) {\n                 }\n             }\n \n+            log.info(\"Uploaded file: [{}] successfully\", file.getOriginalFilename());\n             return uploadResult;\n         } catch (Exception e) {\n-            e.printStackTrace();\n+            throw new FileOperationException(\"Failed to upload file to Ali OSS\", e).setErrorData(file.getOriginalFilename());", "originalCommit": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwNDg4OA==", "url": "https://github.com/halo-dev/halo/pull/581#discussion_r381804888", "bodyText": "\u5728\u6ca1\u5b9e\u73b0\u56fd\u9645\u5316\u4e4b\u524d\u3002", "author": "ruibaby", "createdAt": "2020-02-20T06:39:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwMzEyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwNTEzMg==", "url": "https://github.com/halo-dev/halo/pull/581#discussion_r381805132", "bodyText": "Got it.", "author": "JohnNiang", "createdAt": "2020-02-20T06:39:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwMzEyMw=="}], "type": "inlineReview", "revised_code": {"commit": "e956b62cbb87935b26351707c7cff826dfd6477c", "chunk": "diff --git a/src/main/java/run/halo/app/handler/file/AliOssFileHandler.java b/src/main/java/run/halo/app/handler/file/AliOssFileHandler.java\nindex d152210c..6e4e4149 100644\n--- a/src/main/java/run/halo/app/handler/file/AliOssFileHandler.java\n+++ b/src/main/java/run/halo/app/handler/file/AliOssFileHandler.java\n\n@@ -119,7 +119,7 @@ public class AliOssFileHandler implements FileHandler {\n             log.info(\"Uploaded file: [{}] successfully\", file.getOriginalFilename());\n             return uploadResult;\n         } catch (Exception e) {\n-            throw new FileOperationException(\"Failed to upload file to Ali OSS\", e).setErrorData(file.getOriginalFilename());\n+            throw new FileOperationException(\"\u4e0a\u4f20\u9644\u4ef6 \" + file.getOriginalFilename() + \" \u5230\u963f\u91cc\u4e91\u5931\u8d25 \", e).setErrorData(file.getOriginalFilename());\n         } finally {\n             ossClient.shutdown();\n         }\n"}}, {"oid": "e956b62cbb87935b26351707c7cff826dfd6477c", "url": "https://github.com/halo-dev/halo/commit/e956b62cbb87935b26351707c7cff826dfd6477c", "message": "Change error message in Chinese", "committedDate": "2020-02-20T06:43:46Z", "type": "commit"}]}