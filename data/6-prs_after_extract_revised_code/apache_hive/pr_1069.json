{"pr_number": 1069, "pr_title": "HIVE-23629: Enforce clean findbugs in PRs", "pr_createdAt": "2020-06-06T00:03:50Z", "pr_url": "https://github.com/apache/hive/pull/1069", "timeline": [{"oid": "ea9892c41d53598078b1a89012f25af851c789ce", "url": "https://github.com/apache/hive/commit/ea9892c41d53598078b1a89012f25af851c789ce", "message": "HIVE-23629: Enforce clean findbugs in PRs\n\nChange-Id: Ided89254e2464cf9a6f5ebfdce5c1f222988d18e", "committedDate": "2020-06-06T00:59:31Z", "type": "commit"}, {"oid": "ea9892c41d53598078b1a89012f25af851c789ce", "url": "https://github.com/apache/hive/commit/ea9892c41d53598078b1a89012f25af851c789ce", "message": "HIVE-23629: Enforce clean findbugs in PRs\n\nChange-Id: Ided89254e2464cf9a6f5ebfdce5c1f222988d18e", "committedDate": "2020-06-06T00:59:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxNDE2Nw==", "url": "https://github.com/apache/hive/pull/1069#discussion_r436614167", "bodyText": "this equals method ignores the key field (and hashcode too)", "author": "kgyrtkirk", "createdAt": "2020-06-08T10:59:07Z", "path": "shims/common/src/main/java/org/apache/hadoop/hive/shims/CombineHiveKey.java", "diffHunk": "@@ -51,4 +52,14 @@ public int compareTo(Object w) {\n     assert false;\n     return 0;\n   }\n+\n+  @Override\n+  public int hashCode() {\n+    return super.hashCode();\n+  }\n+\n+  @Override\n+  public boolean equals(Object obj) {\n+    return super.equals(obj);", "originalCommit": "8410f79d72b54dd78a47141c6ce0485adacaf4d4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7078a424d706315b6b717736d494c2ac62160672", "chunk": "diff --git a/shims/common/src/main/java/org/apache/hadoop/hive/shims/CombineHiveKey.java b/shims/common/src/main/java/org/apache/hadoop/hive/shims/CombineHiveKey.java\nindex 06da37551f..6eb83b8051 100644\n--- a/shims/common/src/main/java/org/apache/hadoop/hive/shims/CombineHiveKey.java\n+++ b/shims/common/src/main/java/org/apache/hadoop/hive/shims/CombineHiveKey.java\n\n@@ -54,12 +54,15 @@ public int compareTo(Object w) {\n   }\n \n   @Override\n-  public int hashCode() {\n-    return super.hashCode();\n+  public boolean equals(Object o) {\n+    if (this == o) return true;\n+    if (o == null || getClass() != o.getClass()) return false;\n+    CombineHiveKey that = (CombineHiveKey) o;\n+    return Objects.equals(key, that.key);\n   }\n \n   @Override\n-  public boolean equals(Object obj) {\n-    return super.equals(obj);\n+  public int hashCode() {\n+    return Objects.hash(key);\n   }\n }\n\\ No newline at end of file\n"}}, {"oid": "7078a424d706315b6b717736d494c2ac62160672", "url": "https://github.com/apache/hive/commit/7078a424d706315b6b717736d494c2ac62160672", "message": "HIVE-23629: Fix findbugs errors in hive-shims-common\n\nChange-Id: I8f3d6e321244b65e27b2e3d0f30c8eb2e39778c1", "committedDate": "2020-06-08T16:34:17Z", "type": "commit"}, {"oid": "7078a424d706315b6b717736d494c2ac62160672", "url": "https://github.com/apache/hive/commit/7078a424d706315b6b717736d494c2ac62160672", "message": "HIVE-23629: Fix findbugs errors in hive-shims-common\n\nChange-Id: I8f3d6e321244b65e27b2e3d0f30c8eb2e39778c1", "committedDate": "2020-06-08T16:34:17Z", "type": "forcePushed"}]}