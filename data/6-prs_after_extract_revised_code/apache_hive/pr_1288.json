{"pr_number": 1288, "pr_title": "HIVE-23198", "pr_createdAt": "2020-07-21T13:59:31Z", "pr_url": "https://github.com/apache/hive/pull/1288", "timeline": [{"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b", "url": "https://github.com/apache/hive/commit/78153869c3721f83151c42e4acc6d481ccd29a6b", "message": "HIVE-23198 Initial commit", "committedDate": "2020-07-21T13:57:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459294566", "bodyText": "I do not get this comment. \"request may only contain one information for one DB\".\nCould you please elaborate?", "author": "pvary", "createdAt": "2020-07-23T08:34:32Z", "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "diffHunk": "@@ -229,12 +230,59 @@ public String getSingleDbName() {\n     }\n \n     /**\n-     * Match a CacheTag to this eviction request.\n+     * Match a CacheTag to this eviction request. Must only be used on LLAP side only, where the received request may", "originalCommit": "78153869c3721f83151c42e4acc6d481ccd29a6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM0NzI5OQ==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459347299", "bodyText": "Proactive eviction requests are on a per DB basis: https://github.com/apache/hive/blob/master/llap-common/src/protobuf/LlapDaemonProtocol.proto#L234-L238\nThis comment is just a heads-up of that fact.", "author": "szlta", "createdAt": "2020-07-23T10:13:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3MTE3MA==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459371170", "bodyText": "Why is this checked here, and not at construction time, or when we receive / parse the request? This seems a little awkward for me.", "author": "pvary", "createdAt": "2020-07-23T11:04:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQxMjAxOA==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459412018", "bodyText": "This Request class is used on HS2 side too, and there it may contain multiple DBs, hence there is no such 'general' restriction in this class. Although we're not doing this right now, but It's not impossible to call this method while we have multiple DBs, that's why the javadoc details the restriction on this method only.", "author": "szlta", "createdAt": "2020-07-23T12:30:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQxMzY1NA==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459413654", "bodyText": "Thanks for the clarification!", "author": "pvary", "createdAt": "2020-07-23T12:33:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NjYwMg==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459296602", "bodyText": "Could you please explain why we need LinkedHashMap?", "author": "pvary", "createdAt": "2020-07-23T08:38:21Z", "path": "llap-server/src/test/org/apache/hadoop/hive/llap/cache/TestCacheContentsTracker.java", "diffHunk": "@@ -124,7 +125,7 @@ public void testCacheTagComparison() {\n \n   @Test\n   public void testEncodingDecoding() throws Exception {\n-    Map<String, String> partDescs = new HashMap<>();\n+    LinkedHashMap<String, String> partDescs = new LinkedHashMap<>();", "originalCommit": "78153869c3721f83151c42e4acc6d481ccd29a6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM0NTU4Mg==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459345582", "bodyText": "That's because (nested) partition specification (e.g. p1=v11,p2=v12) has to be sorted.", "author": "szlta", "createdAt": "2020-07-23T10:09:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NjYwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM2OTg0Mw==", "url": "https://github.com/apache/hive/pull/1288#discussion_r459369843", "bodyText": "Got it! Thanks!", "author": "pvary", "createdAt": "2020-07-23T11:00:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NjYwMg=="}], "type": "inlineReview", "revised_code": null}]}