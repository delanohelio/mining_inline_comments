{"pr_number": 1230, "pr_title": "HIVE-23819: Use ranges in ValidReadTxnList serialization", "pr_createdAt": "2020-07-08T16:00:09Z", "pr_url": "https://github.com/apache/hive/pull/1230", "timeline": [{"oid": "d1d0c11ea99fda7272edde9ac28b0921f6fa2533", "url": "https://github.com/apache/hive/commit/d1d0c11ea99fda7272edde9ac28b0921f6fa2533", "message": "HIVE-23819: Use ranges in ValidReadTxnList serialization", "committedDate": "2020-07-08T15:59:33Z", "type": "commit"}, {"oid": "c1121767d6ccdb72abd1d00f10bda0b5d9535e2d", "url": "https://github.com/apache/hive/commit/c1121767d6ccdb72abd1d00f10bda0b5d9535e2d", "message": "Add range limit", "committedDate": "2020-07-10T07:28:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY4NDQxMA==", "url": "https://github.com/apache/hive/pull/1230#discussion_r452684410", "bodyText": "Please add some more comment about the constant \"4\" and the meaning of that.\nOtherwise I think this is good.\nThanks,\nPeter", "author": "pvary", "createdAt": "2020-07-10T07:56:34Z", "path": "storage-api/src/java/org/apache/hadoop/hive/common/ValidReadTxnList.java", "diffHunk": "@@ -137,48 +151,94 @@ public String writeToString() {\n     return buf.toString();\n   }\n \n+  /**\n+   * txnlist is represented in ranges like this: 10-20,14,16-50", "originalCommit": "c1121767d6ccdb72abd1d00f10bda0b5d9535e2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "eb734d43754855bcc76211a2baa9737a485effb5", "chunk": "diff --git a/storage-api/src/java/org/apache/hadoop/hive/common/ValidReadTxnList.java b/storage-api/src/java/org/apache/hadoop/hive/common/ValidReadTxnList.java\nindex b62ad34884..f75aeb37d7 100644\n--- a/storage-api/src/java/org/apache/hadoop/hive/common/ValidReadTxnList.java\n+++ b/storage-api/src/java/org/apache/hadoop/hive/common/ValidReadTxnList.java\n\n@@ -153,6 +154,7 @@ public String writeToString() {\n \n   /**\n    * txnlist is represented in ranges like this: 10-20,14,16-50\n+   * if the range is smaller then 5 it will not get merged, to avoid unnecessary overhead\n    *\n    */\n   private void writeTxnRange(StringBuilder builder, long txnMin, long txnMax) {\n"}}, {"oid": "eb734d43754855bcc76211a2baa9737a485effb5", "url": "https://github.com/apache/hive/commit/eb734d43754855bcc76211a2baa9737a485effb5", "message": "Add some comment", "committedDate": "2020-07-10T09:01:53Z", "type": "commit"}]}