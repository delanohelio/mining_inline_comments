{"pr_number": 4439, "pr_title": "[JENKINS-60721] - Fix IndexOutOfBounds exception in ChoiceParameterDefinition getDefaultParameterValue", "pr_createdAt": "2020-01-20T10:43:01Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4439", "timeline": [{"oid": "e6dd047f962eee2c20b98348cee1fd10a1201b5d", "url": "https://github.com/jenkinsci/jenkins/commit/e6dd047f962eee2c20b98348cee1fd10a1201b5d", "message": "Annotate and fix Parameter functions\n\nSigned-off-by: Raihaan Shouhell <raihaan.shouhell@autodesk.com>", "committedDate": "2020-01-20T10:38:10Z", "type": "commit"}, {"oid": "78ca419ab2aa570908425cae1bb16e6c95b5d667", "url": "https://github.com/jenkinsci/jenkins/commit/78ca419ab2aa570908425cae1bb16e6c95b5d667", "message": "Add checkfornull annotation", "committedDate": "2020-01-20T10:46:18Z", "type": "commit"}, {"oid": "3d1837ef687384b9293b00709e4955ab6e2c0e22", "url": "https://github.com/jenkinsci/jenkins/commit/3d1837ef687384b9293b00709e4955ab6e2c0e22", "message": "Add test for issue\n\nSigned-off-by: Raihaan Shouhell <raihaan.shouhell@autodesk.com>", "committedDate": "2020-01-20T10:53:59Z", "type": "commit"}, {"oid": "14e0e24a89f7c1167e04393a4f2418aa61864c4c", "url": "https://github.com/jenkinsci/jenkins/commit/14e0e24a89f7c1167e04393a4f2418aa61864c4c", "message": "Fix test", "committedDate": "2020-01-20T13:19:33Z", "type": "commit"}, {"oid": "2a9e11c97d41363b6dc1e051a74f9e6c861eda87", "url": "https://github.com/jenkinsci/jenkins/commit/2a9e11c97d41363b6dc1e051a74f9e6c861eda87", "message": "Previous ctor was private d'oh", "committedDate": "2020-01-20T13:44:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc3NDMzNw==", "url": "https://github.com/jenkinsci/jenkins/pull/4439#discussion_r368774337", "bodyText": "Making this bit nonnull makes sense to me because there seems to be no way to obtain that parameter if this is null. Although i don't know how pipeline can enforce this", "author": "res0nance", "createdAt": "2020-01-21T01:18:24Z", "path": "core/src/main/java/hudson/model/ParameterDefinition.java", "diffHunk": "@@ -103,11 +104,11 @@\n \n     private final String description;\n \n-    public ParameterDefinition(String name) {\n+    public ParameterDefinition(@Nonnull String name) {", "originalCommit": "2a9e11c97d41363b6dc1e051a74f9e6c861eda87", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzODA3Mw==", "url": "https://github.com/jenkinsci/jenkins/pull/4439#discussion_r370038073", "bodyText": "Seems to make sense.", "author": "varyvol", "createdAt": "2020-01-23T10:26:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODc3NDMzNw=="}], "type": "inlineReview", "revised_code": {"commit": "b55d26cc5f56a814f750ed0b587a0bb35d85cd2e", "chunk": "diff --git a/core/src/main/java/hudson/model/ParameterDefinition.java b/core/src/main/java/hudson/model/ParameterDefinition.java\nindex 005b67ea4d..72c1f7d782 100644\n--- a/core/src/main/java/hudson/model/ParameterDefinition.java\n+++ b/core/src/main/java/hudson/model/ParameterDefinition.java\n\n@@ -109,6 +109,9 @@ public abstract class ParameterDefinition implements\n     }\n \n     public ParameterDefinition(@Nonnull String name, String description) {\n+        if (name == null) {\n+            throw new IllegalArgumentException(\"Parameter name must be non-null\");\n+        }\n         this.name = name;\n         this.description = description;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzNzk2Nw==", "url": "https://github.com/jenkinsci/jenkins/pull/4439#discussion_r370037967", "bodyText": "If description is null, which is the behaviour then?", "author": "varyvol", "createdAt": "2020-01-23T10:26:14Z", "path": "core/src/main/java/hudson/model/ParameterDefinition.java", "diffHunk": "@@ -142,6 +145,7 @@ public String getDescription() {\n      * return parameter description, applying the configured MarkupFormatter for jenkins instance.\n      * @since 1.521\n      */\n+    @Nonnull", "originalCommit": "2a9e11c97d41363b6dc1e051a74f9e6c861eda87", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bff58b039a3024e5edd3da1264dda1b7eff5dbe9", "chunk": "diff --git a/core/src/main/java/hudson/model/ParameterDefinition.java b/core/src/main/java/hudson/model/ParameterDefinition.java\nindex 005b67ea4d..69ebafe916 100644\n--- a/core/src/main/java/hudson/model/ParameterDefinition.java\n+++ b/core/src/main/java/hudson/model/ParameterDefinition.java\n\n@@ -145,7 +145,7 @@ public abstract class ParameterDefinition implements\n      * return parameter description, applying the configured MarkupFormatter for jenkins instance.\n      * @since 1.521\n      */\n-    @Nonnull\n+    @CheckForNull\n     public String getFormattedDescription() {\n         try {\n             return Jenkins.get().getMarkupFormatter().translate(description);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzOTc5OA==", "url": "https://github.com/jenkinsci/jenkins/pull/4439#discussion_r370039798", "bodyText": "the same as before", "author": "MRamonLeon", "createdAt": "2020-01-23T10:29:52Z", "path": "core/src/main/java/hudson/model/ParameterDefinition.java", "diffHunk": "@@ -152,6 +156,7 @@ public String getFormattedDescription() {\n     }\n \n     @Override\n+    @Nonnull", "originalCommit": "2a9e11c97d41363b6dc1e051a74f9e6c861eda87", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE0MjgwMA==", "url": "https://github.com/jenkinsci/jenkins/pull/4439#discussion_r370142800", "bodyText": "The descriptor should be nonnull since we use getDescriptorOrDie", "author": "res0nance", "createdAt": "2020-01-23T14:18:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzOTc5OA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "bff58b039a3024e5edd3da1264dda1b7eff5dbe9", "url": "https://github.com/jenkinsci/jenkins/commit/bff58b039a3024e5edd3da1264dda1b7eff5dbe9", "message": "Fix annotation", "committedDate": "2020-01-23T14:18:03Z", "type": "commit"}, {"oid": "b55d26cc5f56a814f750ed0b587a0bb35d85cd2e", "url": "https://github.com/jenkinsci/jenkins/commit/b55d26cc5f56a814f750ed0b587a0bb35d85cd2e", "message": "Prevent parameter names from being null", "committedDate": "2020-01-29T07:30:06Z", "type": "commit"}, {"oid": "fa40f39d84c9b87f0b6acb7c84ad88ca064a66ae", "url": "https://github.com/jenkinsci/jenkins/commit/fa40f39d84c9b87f0b6acb7c84ad88ca064a66ae", "message": "Merge branch 'JENKINS-60721' of https://github.com/res0nance/jenkins into JENKINS-60721", "committedDate": "2020-01-29T07:30:53Z", "type": "commit"}, {"oid": "bf86a010b96f7172474fe39c5e24fe0e669192dc", "url": "https://github.com/jenkinsci/jenkins/commit/bf86a010b96f7172474fe39c5e24fe0e669192dc", "message": "Add comment about check", "committedDate": "2020-02-04T14:20:16Z", "type": "commit"}]}