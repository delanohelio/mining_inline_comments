{"pr_number": 4874, "pr_title": "Removed deprecated ProcessTreeKiller", "pr_createdAt": "2020-07-24T21:10:13Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4874", "timeline": [{"oid": "8fc4dd6f57707fd5f1ffa17b383f0eeb815973dd", "url": "https://github.com/jenkinsci/jenkins/commit/8fc4dd6f57707fd5f1ffa17b383f0eeb815973dd", "message": "removed deprecated ProcessTreeKiller", "committedDate": "2020-07-24T21:06:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUwMzEyOA==", "url": "https://github.com/jenkinsci/jenkins/pull/4874#discussion_r460503128", "bodyText": "Would revert this. There's no real reason for this change; just type out the obsolete class name.", "author": "daniel-beck", "createdAt": "2020-07-26T09:25:40Z", "path": "core/src/main/java/hudson/util/ProcessTree.java", "diffHunk": "@@ -1979,9 +1979,6 @@ Object writeReplace() {\n      * This feature involves some native code, so we are allowing the user to disable this\n      * in case there's a fatal problem.\n      *\n-     * <p>\n-     * This property supports two names for a compatibility reason.\n      */\n-    public static boolean enabled = !SystemProperties.getBoolean(ProcessTreeKiller.class.getName()+\".disable\")\n-                                 && !SystemProperties.getBoolean(ProcessTree.class.getName()+\".disable\");\n+    public static boolean enabled = !SystemProperties.getBoolean(ProcessTree.class.getName()+\".disable\");", "originalCommit": "8fc4dd6f57707fd5f1ffa17b383f0eeb815973dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1ODI4Mw==", "url": "https://github.com/jenkinsci/jenkins/pull/4874#discussion_r460658283", "bodyText": "Thanks for pointing that solution out. Changed it as requested.", "author": "StefanSpieker", "createdAt": "2020-07-27T05:43:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUwMzEyOA=="}], "type": "inlineReview", "revised_code": {"commit": "566c67612eeda062f1721a72a530e72e35a6b8ad", "chunk": "diff --git a/core/src/main/java/hudson/util/ProcessTree.java b/core/src/main/java/hudson/util/ProcessTree.java\nindex 7be00f5e48..31c871485b 100644\n--- a/core/src/main/java/hudson/util/ProcessTree.java\n+++ b/core/src/main/java/hudson/util/ProcessTree.java\n\n@@ -1980,5 +1980,6 @@ public abstract class ProcessTree implements Iterable<OSProcess>, IProcessTree,\n      * in case there's a fatal problem.\n      *\n      */\n-    public static boolean enabled = !SystemProperties.getBoolean(ProcessTree.class.getName()+\".disable\");\n+    public static boolean enabled = !SystemProperties.getBoolean(\"ProcessTreeKiller.disable\")\n+            && !SystemProperties.getBoolean(ProcessTree.class.getName()+\".disable\");\n }\n"}}, {"oid": "566c67612eeda062f1721a72a530e72e35a6b8ad", "url": "https://github.com/jenkinsci/jenkins/commit/566c67612eeda062f1721a72a530e72e35a6b8ad", "message": "still respect ProcessTreeKiller.disable", "committedDate": "2020-07-27T05:43:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1OTQxNQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4874#discussion_r460659415", "bodyText": "This should have the full package name https://www.jenkins.io/doc/book/managing/system-properties/#hudson-util-processtree-disable", "author": "timja", "createdAt": "2020-07-27T05:48:03Z", "path": "core/src/main/java/hudson/util/ProcessTree.java", "diffHunk": "@@ -1980,5 +1980,6 @@ Object writeReplace() {\n      * in case there's a fatal problem.\n      *\n      */\n-    public static boolean enabled = !SystemProperties.getBoolean(ProcessTree.class.getName()+\".disable\");\n+    public static boolean enabled = !SystemProperties.getBoolean(\"ProcessTreeKiller.disable\")", "originalCommit": "566c67612eeda062f1721a72a530e72e35a6b8ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY2MDkxMg==", "url": "https://github.com/jenkinsci/jenkins/pull/4874#discussion_r460660912", "bodyText": "Ooops.", "author": "StefanSpieker", "createdAt": "2020-07-27T05:53:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1OTQxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "2ae47713fd4db220b8de35ce176894495488a968", "chunk": "diff --git a/core/src/main/java/hudson/util/ProcessTree.java b/core/src/main/java/hudson/util/ProcessTree.java\nindex 31c871485b..0b35c67da3 100644\n--- a/core/src/main/java/hudson/util/ProcessTree.java\n+++ b/core/src/main/java/hudson/util/ProcessTree.java\n\n@@ -1980,6 +1980,6 @@ public abstract class ProcessTree implements Iterable<OSProcess>, IProcessTree,\n      * in case there's a fatal problem.\n      *\n      */\n-    public static boolean enabled = !SystemProperties.getBoolean(\"ProcessTreeKiller.disable\")\n+    public static boolean enabled = !SystemProperties.getBoolean(\"hudson.util.ProcessTreeKiller.disable\")\n             && !SystemProperties.getBoolean(ProcessTree.class.getName()+\".disable\");\n }\n"}}, {"oid": "2ae47713fd4db220b8de35ce176894495488a968", "url": "https://github.com/jenkinsci/jenkins/commit/2ae47713fd4db220b8de35ce176894495488a968", "message": "set full name of property", "committedDate": "2020-07-27T05:52:52Z", "type": "commit"}]}