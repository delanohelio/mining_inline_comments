{"pr_number": 5035, "pr_title": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance", "pr_createdAt": "2020-10-26T17:31:32Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/5035", "timeline": [{"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "url": "https://github.com/jenkinsci/jenkins/commit/2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "message": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance\n\nThe CaseInsensitive IdStrategy would always do a full string comparison\neven when all that was required was an equivallence check.\n\nupdated the javadoc to clarify performance implications for subclasses\nand fix the performance of the CaseInsensitive strategy", "committedDate": "2020-10-26T17:34:24Z", "type": "commit"}, {"oid": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "url": "https://github.com/jenkinsci/jenkins/commit/2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "message": "[JENKINS-64039] improve CaseInsensitive.equals(String, String) performance\n\nThe CaseInsensitive IdStrategy would always do a full string comparison\neven when all that was required was an equivallence check.\n\nupdated the javadoc to clarify performance implications for subclasses\nand fix the performance of the CaseInsensitive strategy", "committedDate": "2020-10-26T17:34:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0ODk4Ng==", "url": "https://github.com/jenkinsci/jenkins/pull/5035#discussion_r512148986", "bodyText": "given in AUthZ we only care that a user has the role we do not want to go matching individual characters when there are many groups all with similar prefixes\nfor example consider DG_DEPT_ENGINEERING_JENKINS_ADMIN and  DG_DEPT_ENGINEERING_JENKINS_USER\na user with the later and a ACL granting a permission on the former we would have ended up checking the first 29 characters before deciding that the user did not match, when the string length would have told us that pretty cheaply.\ncombine this with lots of groups and the performance starts to take a hit.", "author": "jtnord", "createdAt": "2020-10-26T17:39:35Z", "path": "core/src/main/java/jenkins/model/IdStrategy.java", "diffHunk": "@@ -207,9 +209,14 @@ public String keyFor(@NonNull String id) {\n             return id.toLowerCase(Locale.ENGLISH);\n         }\n \n+        @Override\n+        public boolean equals(@NonNull String id1, @NonNull String id2) {\n+            return id1.equalsIgnoreCase(id2);", "originalCommit": "2cd33a184f3b75a5c1d408abd3f62c9e792fed76", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}