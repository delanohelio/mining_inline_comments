{"pr_number": 4841, "pr_title": "[JENKINS-61806] Form validation for TimeZoneProperty.timeZoneName", "pr_createdAt": "2020-07-10T15:31:37Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4841", "timeline": [{"oid": "6d6129d6984ea8f6f90a5ecf037f7a7910213665", "url": "https://github.com/jenkinsci/jenkins/commit/6d6129d6984ea8f6f90a5ecf037f7a7910213665", "message": "[JENKINS-61806] Form validation for TimeZoneProperty.timeZoneName", "committedDate": "2020-07-10T15:28:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1NTUwMg==", "url": "https://github.com/jenkinsci/jenkins/pull/4841#discussion_r453355502", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            return FormValidation.ok(Messages.TimeZoneProperty_current_time_on_server_in_in_proposed_di(TimeZone.getDefault().getDisplayName(), DateFormat.getDateTimeInstance().format(now), localTime.format(now)));\n          \n          \n            \n                            return FormValidation.ok(Messages.TimeZoneProperty_current_time_on_server_in_proposed_di(TimeZone.getDefault().getDisplayName(), DateFormat.getDateTimeInstance().format(now), localTime.format(now)));", "author": "oleg-nenashev", "createdAt": "2020-07-12T19:42:50Z", "path": "core/src/main/java/hudson/model/TimeZoneProperty.java", "diffHunk": "@@ -85,6 +90,18 @@ public ListBoxModel doFillTimeZoneNameItems() {\n             }\n             return items;\n         }\n+\n+        public FormValidation doCheckTimeZoneName(@QueryParameter String timeZoneName) {\n+            Date now = new Date();\n+            if (Util.fixEmpty(timeZoneName) == null) {\n+                return FormValidation.ok(Messages.TimeZoneProperty_current_time_in_(TimeZone.getDefault().getDisplayName(), DateFormat.getDateTimeInstance().format(now)));\n+            } else {\n+                DateFormat localTime = DateFormat.getDateTimeInstance();\n+                localTime.setTimeZone(TimeZone.getTimeZone(timeZoneName));\n+                return FormValidation.ok(Messages.TimeZoneProperty_current_time_on_server_in_in_proposed_di(TimeZone.getDefault().getDisplayName(), DateFormat.getDateTimeInstance().format(now), localTime.format(now)));", "originalCommit": "6d6129d6984ea8f6f90a5ecf037f7a7910213665", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}