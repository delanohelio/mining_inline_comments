{"pr_number": 4527, "pr_title": "[JENKINS-61197] Skip $WORKSPACE_TMP for root directories", "pr_createdAt": "2020-02-25T14:27:47Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4527", "timeline": [{"oid": "59c0faa8944125a8dc3d238ad059466d11c2fed2", "url": "https://github.com/jenkinsci/jenkins/commit/59c0faa8944125a8dc3d238ad059466d11c2fed2", "message": "[JENKINS-61197] Skip $WORKSPACE_TMP for root directories", "committedDate": "2020-02-25T14:24:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNDY4Nw==", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383914687", "bodyText": "Sort of incompatible for plugin callers, though in cases where this now returns null, it would previously have thrown a NullPointerException, so maybe this is no worse.", "author": "jglick", "createdAt": "2020-02-25T14:32:40Z", "path": "core/src/main/java/hudson/slaves/WorkspaceList.java", "diffHunk": "@@ -302,6 +303,7 @@ public void release() {\n      * @return a sibling directory, for example {@code \u2026/something@tmp} for {@code \u2026/something}\n      * @since 1.652\n      */\n+    @CheckForNull", "originalCommit": "59c0faa8944125a8dc3d238ad059466d11c2fed2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNzgwOA==", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383917808", "bodyText": "Some Javadoc could be moved over from #4526", "author": "oleg-nenashev", "createdAt": "2020-02-25T14:37:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNDY4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyMzc1OA==", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383923758", "bodyText": "Kept it brief, but yeah.", "author": "jglick", "createdAt": "2020-02-25T14:46:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNDY4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "8337315cced961853eb0d9f24034290066783662", "chunk": "diff --git a/core/src/main/java/hudson/slaves/WorkspaceList.java b/core/src/main/java/hudson/slaves/WorkspaceList.java\nindex 2c0f3957ef..ec05886aae 100644\n--- a/core/src/main/java/hudson/slaves/WorkspaceList.java\n+++ b/core/src/main/java/hudson/slaves/WorkspaceList.java\n\n@@ -300,7 +300,7 @@ public final class WorkspaceList {\n      * <p>The resulting directory may not exist; you may call {@link FilePath#mkdirs} on it if you need it to.\n      * It may be deleted alongside the workspace itself during cleanup actions.\n      * @param ws a directory such as a build workspace\n-     * @return a sibling directory, for example {@code \u2026/something@tmp} for {@code \u2026/something}\n+     * @return a sibling directory, for example {@code \u2026/something@tmp} for {@code \u2026/something}, or {@code null} if {@link FilePath#getParent} is null\n      * @since 1.652\n      */\n     @CheckForNull\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkxNzE1MA==", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383917150", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. \n          \n          \n            \n                 * Gets a sibling file in the same directory.\n          \n          \n            \n                 * @param rel name of the file\n          \n          \n            \n                 * @return Sibling file with a specified file name.\n          \n          \n            \n                 *         {@code null} if no sibling file can be created, e.g. if the current file points to the filesystem root.\n          \n      \n    \n    \n  \n\nCopied from #4526", "author": "oleg-nenashev", "createdAt": "2020-02-25T14:36:54Z", "path": "core/src/main/java/hudson/FilePath.java", "diffHunk": "@@ -1323,8 +1323,10 @@ public String getName() {\n     /**\n      * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. ", "originalCommit": "59c0faa8944125a8dc3d238ad059466d11c2fed2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8337315cced961853eb0d9f24034290066783662", "chunk": "diff --git a/core/src/main/java/hudson/FilePath.java b/core/src/main/java/hudson/FilePath.java\nindex 35947d7579..4d75292dce 100644\n--- a/core/src/main/java/hudson/FilePath.java\n+++ b/core/src/main/java/hudson/FilePath.java\n\n@@ -1321,7 +1321,8 @@ public final class FilePath implements SerializableOnlyOverRemoting {\n     }\n \n     /**\n-     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. \n+     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory.\n+     * @return null if {@link #getParent} would have\n      */\n     @CheckForNull\n     public FilePath sibling(String rel) {\n"}}, {"oid": "5364d80423d9744f5020fa7d0b2e2e2b0f178ebd", "url": "https://github.com/jenkinsci/jenkins/commit/5364d80423d9744f5020fa7d0b2e2e2b0f178ebd", "message": "Documenting amended behavior", "committedDate": "2020-02-25T14:43:00Z", "type": "commit"}, {"oid": "8337315cced961853eb0d9f24034290066783662", "url": "https://github.com/jenkinsci/jenkins/commit/8337315cced961853eb0d9f24034290066783662", "message": "Javadoc", "committedDate": "2020-02-25T14:45:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyNDYyOQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4527#discussion_r383924629", "bodyText": "#4527 (comment) is IMHO better but \ud83e\udd37\u200d\u2642 as long as we have user docs", "author": "oleg-nenashev", "createdAt": "2020-02-25T14:48:12Z", "path": "core/src/main/java/hudson/FilePath.java", "diffHunk": "@@ -1321,10 +1321,13 @@ public String getName() {\n     }\n \n     /**\n-     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. \n+     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory.\n+     * @return null if {@link #getParent} would have", "originalCommit": "8337315cced961853eb0d9f24034290066783662", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}