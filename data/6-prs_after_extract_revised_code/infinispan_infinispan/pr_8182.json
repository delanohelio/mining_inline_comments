{"pr_number": 8182, "pr_title": "ISPN-11615 Replace internal metadata class", "pr_createdAt": "2020-04-08T14:23:13Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8182", "timeline": [{"oid": "ea62a06579c75d0f6b21cc56e98f8ab21609cce6", "url": "https://github.com/infinispan/infinispan/commit/ea62a06579c75d0f6b21cc56e98f8ab21609cce6", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-08T15:45:14Z", "type": "forcePushed"}, {"oid": "b7ba3c5c04d8c9594d9830f2571f76034b9e7537", "url": "https://github.com/infinispan/infinispan/commit/b7ba3c5c04d8c9594d9830f2571f76034b9e7537", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-08T17:19:13Z", "type": "forcePushed"}, {"oid": "110cea7dbf11d108f028b737c6aa5bf457e6ef51", "url": "https://github.com/infinispan/infinispan/commit/110cea7dbf11d108f028b737c6aa5bf457e6ef51", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-13T15:52:55Z", "type": "forcePushed"}, {"oid": "918ff7e42e69b74c81b059b64e193d000fee2bc2", "url": "https://github.com/infinispan/infinispan/commit/918ff7e42e69b74c81b059b64e193d000fee2bc2", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-14T15:39:54Z", "type": "forcePushed"}, {"oid": "dce63d01d103fb79b2d0ea10761f94b187c88489", "url": "https://github.com/infinispan/infinispan/commit/dce63d01d103fb79b2d0ea10761f94b187c88489", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-20T09:21:06Z", "type": "forcePushed"}, {"oid": "2fe1fdf504d5084eefa3803f94873f620233de00", "url": "https://github.com/infinispan/infinispan/commit/2fe1fdf504d5084eefa3803f94873f620233de00", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-23T14:00:36Z", "type": "forcePushed"}, {"oid": "c10406535c1861769c6c7e0504148ec0fc11c880", "url": "https://github.com/infinispan/infinispan/commit/c10406535c1861769c6c7e0504148ec0fc11c880", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-23T16:16:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NDM0Nw==", "url": "https://github.com/infinispan/infinispan/pull/8182#discussion_r413944347", "bodyText": "We probably want this in the 0..127 range as it is included in so many commands.", "author": "ryanemerson", "createdAt": "2020-04-23T16:28:45Z", "path": "commons/all/src/main/java/org/infinispan/commons/marshall/ProtoStreamTypeIds.java", "diffHunk": "@@ -53,6 +53,7 @@\n    int META_PARAMS_INTERNAL_METADATA = CORE_LOWER_BOUND + 3;\n    int REMOTE_METADATA = CORE_LOWER_BOUND + 4;\n    int UUID = CORE_LOWER_BOUND + 5;\n+   int PRIVATE_METADATA = UUID + 1;", "originalCommit": "c10406535c1861769c6c7e0504148ec0fc11c880", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk3NzA1OQ==", "url": "https://github.com/infinispan/infinispan/pull/8182#discussion_r413977059", "bodyText": "done!\nis there a special case for ids < 128?", "author": "pruivo", "createdAt": "2020-04-23T17:14:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NDM0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM5MjY4Mw==", "url": "https://github.com/infinispan/infinispan/pull/8182#discussion_r414392683", "bodyText": "Ids < 128 only require a single byte to marshall, whereas > 127 is two bytes. But obviously we only have a limited number of messages that can be in this range, so we should save this range for protobuf messages which are sent frequently", "author": "ryanemerson", "createdAt": "2020-04-24T08:28:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NDM0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "0f61b6eb6bc4bf6a2d686991ab19440f6b2ee125", "chunk": "diff --git a/commons/all/src/main/java/org/infinispan/commons/marshall/ProtoStreamTypeIds.java b/commons/all/src/main/java/org/infinispan/commons/marshall/ProtoStreamTypeIds.java\nindex b1993422c1..943fc7f590 100644\n--- a/commons/all/src/main/java/org/infinispan/commons/marshall/ProtoStreamTypeIds.java\n+++ b/commons/all/src/main/java/org/infinispan/commons/marshall/ProtoStreamTypeIds.java\n\n@@ -53,7 +54,6 @@\n    int META_PARAMS_INTERNAL_METADATA = CORE_LOWER_BOUND + 3;\n    int REMOTE_METADATA = CORE_LOWER_BOUND + 4;\n    int UUID = CORE_LOWER_BOUND + 5;\n-   int PRIVATE_METADATA = UUID + 1;\n \n    // Counter range 4000 -> 4199\n    int COUNTERS_LOWER_BOUND = CORE_LOWER_BOUND + 3000;\n"}}, {"oid": "0f61b6eb6bc4bf6a2d686991ab19440f6b2ee125", "url": "https://github.com/infinispan/infinispan/commit/0f61b6eb6bc4bf6a2d686991ab19440f6b2ee125", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-23T17:13:28Z", "type": "commit"}, {"oid": "0f61b6eb6bc4bf6a2d686991ab19440f6b2ee125", "url": "https://github.com/infinispan/infinispan/commit/0f61b6eb6bc4bf6a2d686991ab19440f6b2ee125", "message": "ISPN-11615 Replace internal metadata class", "committedDate": "2020-04-23T17:13:28Z", "type": "forcePushed"}]}