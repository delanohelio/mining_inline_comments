{"pr_number": 3905, "pr_title": "Remove unused SemiJoinNode", "pr_createdAt": "2020-06-02T15:30:39Z", "pr_url": "https://github.com/trinodb/trino/pull/3905", "timeline": [{"oid": "0e71ab5994a8d9a0be34d2191a505beaa4626305", "url": "https://github.com/trinodb/trino/commit/0e71ab5994a8d9a0be34d2191a505beaa4626305", "message": "Remove unused SemiJoinNode", "committedDate": "2020-05-28T19:54:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM5Mjc2Nw==", "url": "https://github.com/trinodb/trino/pull/3905#discussion_r434392767", "bodyText": "consider adding test for this", "author": "sopel39", "createdAt": "2020-06-03T08:21:53Z", "path": "presto-main/src/main/java/io/prestosql/sql/planner/optimizations/PruneUnreferencedOutputs.java", "diffHunk": "@@ -258,6 +258,10 @@ public PlanNode visitJoin(JoinNode node, RewriteContext<Set<Symbol>> context)\n         @Override\n         public PlanNode visitSemiJoin(SemiJoinNode node, RewriteContext<Set<Symbol>> context)\n         {\n+            if (!context.get().contains(node.getSemiJoinOutput())) {", "originalCommit": "0e71ab5994a8d9a0be34d2191a505beaa4626305", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI2ODE0Ng==", "url": "https://github.com/trinodb/trino/pull/3905#discussion_r435268146", "bodyText": "I added this behavior to make PruneUnreferencedOutputs.visitSemiJoin() consistent with the iterative pruning rules for SemiJoinNode. The visitor method is not tested, so that would be the only piece tested. On the other hand, the iterative rules are thoroughly tested (including this behavior), and soon this Optimizer will be replaced by them.", "author": "kasiafi", "createdAt": "2020-06-04T13:46:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM5Mjc2Nw=="}], "type": "inlineReview", "revised_code": null}]}