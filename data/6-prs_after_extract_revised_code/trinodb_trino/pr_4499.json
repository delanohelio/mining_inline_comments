{"pr_number": 4499, "pr_title": "Specialize implementations of approx_most_frequent", "pr_createdAt": "2020-07-20T17:01:00Z", "pr_url": "https://github.com/trinodb/trino/pull/4499", "timeline": [{"oid": "bd5d999199a027a76d3edffe10f637bc0eae4370", "url": "https://github.com/trinodb/trino/commit/bd5d999199a027a76d3edffe10f637bc0eae4370", "message": "Specialize implementations of approx_most_frequent\n\nThe function was declared as generic, but only supports\nVARCHAR and BIGINT.", "committedDate": "2020-07-20T17:00:29Z", "type": "commit"}, {"oid": "659a46adacd422bb21aae6a304e10ceefb133f8b", "url": "https://github.com/trinodb/trino/commit/659a46adacd422bb21aae6a304e10ceefb133f8b", "message": "Estimate size of StreamSummary", "committedDate": "2020-07-20T17:40:10Z", "type": "commit"}, {"oid": "659a46adacd422bb21aae6a304e10ceefb133f8b", "url": "https://github.com/trinodb/trino/commit/659a46adacd422bb21aae6a304e10ceefb133f8b", "message": "Estimate size of StreamSummary", "committedDate": "2020-07-20T17:40:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc1NjA1Mg==", "url": "https://github.com/trinodb/trino/pull/4499#discussion_r457756052", "bodyText": "\ud83d\udc4d", "author": "Lewuathe", "createdAt": "2020-07-20T23:55:26Z", "path": "presto-main/src/main/java/io/prestosql/operator/aggregation/ApproximateMostFrequentHistogram.java", "diffHunk": "@@ -148,6 +152,9 @@ public void forEachBucket(BucketConsumer<K> consumer)\n \n     public long estimatedInMemorySize()\n     {\n-        return INSTANCE_SIZE;\n+        // imperfect estimate of the size of the underlying StreamSummary. TODO: reimplement StreamSummary with flat structures and proper size accounting", "originalCommit": "659a46adacd422bb21aae6a304e10ceefb133f8b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}