{"pr_number": 5184, "pr_title": "Remove flaky assertions in DF test", "pr_createdAt": "2020-09-16T09:20:53Z", "pr_url": "https://github.com/trinodb/trino/pull/5184", "timeline": [{"oid": "5a9fe02cf019006805c60cf76cf9b5de2c313a45", "url": "https://github.com/trinodb/trino/commit/5a9fe02cf019006805c60cf76cf9b5de2c313a45", "message": "Remove OperatorStats related flaky assertions", "committedDate": "2020-09-16T13:16:19Z", "type": "commit"}, {"oid": "5a9fe02cf019006805c60cf76cf9b5de2c313a45", "url": "https://github.com/trinodb/trino/commit/5a9fe02cf019006805c60cf76cf9b5de2c313a45", "message": "Remove OperatorStats related flaky assertions", "committedDate": "2020-09-16T13:16:19Z", "type": "forcePushed"}, {"id": "PRRC_kwDOCezRTs4rqcxx", "url": "https://github.com/trinodb/trino/pull/5184#discussion_r732548209", "bodyText": "@raunaqmorarka would you like to re-enable this?\n(or at least re-link to #5172?)\n#5120 is closed. #5172 isn't solved, but we have developed ways to deal with that in tests", "author": "findepi", "createdAt": "2021-10-20T08:45:49Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveDynamicPartitionPruning.java", "diffHunk": "@@ -99,9 +97,8 @@ public void testJoinWithEmptyBuildSide()\n                 \"SELECT * FROM partitioned_lineitem JOIN supplier ON partitioned_lineitem.suppkey = supplier.suppkey AND supplier.name = 'abc'\");\n         assertEquals(result.getResult().getRowCount(), 0);\n \n-        OperatorStats probeStats = searchScanFilterAndProjectOperatorStats(result.getQueryId(), \"tpch:\" + PARTITIONED_LINEITEM);\n-        assertEquals(probeStats.getInputPositions(), 0L);\n-        assertEquals(probeStats.getDynamicFilterSplitsProcessed(), 0L);\n+        // TODO bring back OperatorStats assertions from https://github.com/prestosql/presto/commit/1feaa0f928a02f577c8ac9ef6cc0c8ec2008a46d\n+        // after https://github.com/prestosql/presto/issues/5120 is fixed", "originalCommit": "5a9fe02cf019006805c60cf76cf9b5de2c313a45", "replyToReviewId": null, "replies": [{"id": "PRRC_kwDOCezRTs4rqhdw", "url": "https://github.com/trinodb/trino/pull/5184#discussion_r732567408", "bodyText": "I am indeed planning on bringing this back using the assertQueryStats thing we added recently. But I wanted to wait for the in-progress iceberg DF PR to merge which has changes in these files.", "author": "raunaqmorarka", "createdAt": "2021-10-20T09:08:40Z", "replyToReviewId": "PRRC_kwDOCezRTs4rqcxx"}], "type": "inlineReview", "revised_code": null}]}