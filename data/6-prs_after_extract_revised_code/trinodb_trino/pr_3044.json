{"pr_number": 3044, "pr_title": "Add GitHub workflow for Azure tests", "pr_createdAt": "2020-03-09T21:38:39Z", "pr_url": "https://github.com/trinodb/trino/pull/3044", "timeline": [{"oid": "2934e88bb84b01ac0041770784ebfde5a461199a", "url": "https://github.com/trinodb/trino/commit/2934e88bb84b01ac0041770784ebfde5a461199a", "message": "Delete workflows for testing", "committedDate": "2020-03-09T23:08:01Z", "type": "forcePushed"}, {"oid": "7fb6ae509b0a726eee9693c219276b32b4f47131", "url": "https://github.com/trinodb/trino/commit/7fb6ae509b0a726eee9693c219276b32b4f47131", "message": "Delete workflows for testing", "committedDate": "2020-03-11T00:43:43Z", "type": "forcePushed"}, {"oid": "16be19b55ed649ee9f8023decb24e5aee022de7e", "url": "https://github.com/trinodb/trino/commit/16be19b55ed649ee9f8023decb24e5aee022de7e", "message": "Delete workflows for testing", "committedDate": "2020-03-11T01:31:01Z", "type": "forcePushed"}, {"oid": "8cd801b4cb448ddb37954b24ceffdca237cc8661", "url": "https://github.com/trinodb/trino/commit/8cd801b4cb448ddb37954b24ceffdca237cc8661", "message": "Add GitHub workflow for Azure tests", "committedDate": "2020-03-21T16:56:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxMjIyOQ==", "url": "https://github.com/trinodb/trino/pull/3044#discussion_r396312229", "bodyText": "What replaces this test?", "author": "findepi", "createdAt": "2020-03-23T09:27:58Z", "path": "presto-hive-hadoop2/src/test/java/io/prestosql/plugin/hive/TestHiveAzure.java", "diffHunk": "@@ -1,62 +0,0 @@\n-/*\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-package io.prestosql.plugin.hive;\n-\n-import com.google.common.collect.ImmutableSet;\n-import io.prestosql.plugin.hive.azure.HiveAzureConfig;\n-import io.prestosql.plugin.hive.azure.PrestoAzureConfigurationInitializer;\n-import org.testng.annotations.BeforeClass;\n-import org.testng.annotations.Parameters;\n-\n-import static com.google.common.base.Preconditions.checkArgument;\n-import static com.google.common.base.Strings.isNullOrEmpty;\n-\n-public class TestHiveAzure", "originalCommit": "8cd801b4cb448ddb37954b24ceffdca237cc8661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU4OTI2NA==", "url": "https://github.com/trinodb/trino/pull/3044#discussion_r398589264", "bodyText": "This test was never being run.", "author": "anusudarsan", "createdAt": "2020-03-26T13:53:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxMjIyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "b53a9b733c1b47ef0f7cdb86d4f111c4ee02ba8d", "chunk": "diff --git a/presto-hive-hadoop2/src/test/java/io/prestosql/plugin/hive/TestHiveAzure.java b/presto-hive-hadoop2/src/test/java/io/prestosql/plugin/hive/TestHiveAzure.java\nnew file mode 100644\nindex 0000000000..c08f0aa744\n--- /dev/null\n+++ b/presto-hive-hadoop2/src/test/java/io/prestosql/plugin/hive/TestHiveAzure.java\n\n@@ -0,0 +1,62 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.prestosql.plugin.hive;\n+\n+import com.google.common.collect.ImmutableSet;\n+import io.prestosql.plugin.hive.azure.HiveAzureConfig;\n+import io.prestosql.plugin.hive.azure.PrestoAzureConfigurationInitializer;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Parameters;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Strings.isNullOrEmpty;\n+\n+public class TestHiveAzure\n+        extends AbstractTestHive\n+{\n+    private String account;\n+    private String accessKey;\n+\n+    @Parameters({\n+            \"hive.hadoop2.metastoreHost\",\n+            \"hive.hadoop2.metastorePort\",\n+            \"hive.hadoop2.databaseName\",\n+            \"hive.hadoop2.timeZone\",\n+            \"hive.hadoop2.wasb-account\",\n+            \"hive.hadoop2.wasb-access-key\",\n+    })\n+    @BeforeClass\n+    public void initialize(String host, int port, String databaseName, String timeZone, String account, String accessKey)\n+    {\n+        checkArgument(!isNullOrEmpty(host), \"expected non empty host\");\n+        checkArgument(!isNullOrEmpty(databaseName), \"Expected non empty databaseName\");\n+        checkArgument(!isNullOrEmpty(timeZone), \"Expected non empty timeZone\");\n+        checkArgument(!isNullOrEmpty(account), \"expected non empty account\");\n+        checkArgument(!isNullOrEmpty(accessKey), \"expected non empty accessKey\");\n+\n+        this.account = account;\n+        this.accessKey = accessKey;\n+\n+        setup(host, port, databaseName, timeZone);\n+    }\n+\n+    @Override\n+    protected HiveHdfsConfiguration createTestHdfsConfiguration()\n+    {\n+        ConfigurationInitializer wasbConfig = new PrestoAzureConfigurationInitializer(new HiveAzureConfig()\n+                .setWasbAccessKey(accessKey)\n+                .setWasbStorageAccount(account));\n+        return new HiveHdfsConfiguration(new HdfsConfigurationInitializer(new HdfsConfig(), ImmutableSet.of(wasbConfig)), ImmutableSet.of());\n+    }\n+}\n"}}, {"oid": "5a14f7d35fd8aa0cc284fe0bf0f04303737d9ab5", "url": "https://github.com/trinodb/trino/commit/5a14f7d35fd8aa0cc284fe0bf0f04303737d9ab5", "message": "HACK only run Azure tests", "committedDate": "2020-08-28T22:37:28Z", "type": "forcePushed"}, {"oid": "6d6882fb36eb3909c58fdae7a68603b37707a20d", "url": "https://github.com/trinodb/trino/commit/6d6882fb36eb3909c58fdae7a68603b37707a20d", "message": "HACK only run Azure tests", "committedDate": "2020-08-31T18:40:15Z", "type": "forcePushed"}, {"oid": "7fd81ff87db3aee8f3c9b99e5d61af66842be03c", "url": "https://github.com/trinodb/trino/commit/7fd81ff87db3aee8f3c9b99e5d61af66842be03c", "message": "HACK only run Azure tests", "committedDate": "2020-09-01T00:28:33Z", "type": "forcePushed"}, {"oid": "b53a9b733c1b47ef0f7cdb86d4f111c4ee02ba8d", "url": "https://github.com/trinodb/trino/commit/b53a9b733c1b47ef0f7cdb86d4f111c4ee02ba8d", "message": "Rename S3 secret names to use uppercase", "committedDate": "2020-09-01T17:16:48Z", "type": "commit"}, {"oid": "74bc6ae3426f2d0bdcede06bd3ed8ac5a4488c7f", "url": "https://github.com/trinodb/trino/commit/74bc6ae3426f2d0bdcede06bd3ed8ac5a4488c7f", "message": "Remove unused Azure tests", "committedDate": "2020-09-01T17:16:48Z", "type": "commit"}, {"oid": "5f6fcb2568033f2c01a5bd30117c9f74ae75ce21", "url": "https://github.com/trinodb/trino/commit/5f6fcb2568033f2c01a5bd30117c9f74ae75ce21", "message": "Only run CI on push to master", "committedDate": "2020-09-01T17:16:48Z", "type": "commit"}, {"oid": "a8251b47ea230378e9059f1fdbe977f7b161cb70", "url": "https://github.com/trinodb/trino/commit/a8251b47ea230378e9059f1fdbe977f7b161cb70", "message": "Add GitHub workflow for Azure tests", "committedDate": "2020-09-01T19:46:10Z", "type": "commit"}, {"oid": "a8251b47ea230378e9059f1fdbe977f7b161cb70", "url": "https://github.com/trinodb/trino/commit/a8251b47ea230378e9059f1fdbe977f7b161cb70", "message": "Add GitHub workflow for Azure tests", "committedDate": "2020-09-01T19:46:10Z", "type": "forcePushed"}]}