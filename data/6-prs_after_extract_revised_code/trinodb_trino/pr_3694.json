{"pr_number": 3694, "pr_title": "Remove dynamic filters from spatial joins", "pr_createdAt": "2020-05-11T14:55:30Z", "pr_url": "https://github.com/trinodb/trino/pull/3694", "timeline": [{"oid": "4595250945399fc335ba737ea918b29db80256f0", "url": "https://github.com/trinodb/trino/commit/4595250945399fc335ba737ea918b29db80256f0", "message": "Remove dynamic filters from spatial join\n\nDynamic filters that use symbols from\nleft and right sources will land in\nSpatialJoinNode#filter.\nTherefore they need to be removed.", "committedDate": "2020-05-11T14:56:47Z", "type": "commit"}, {"oid": "e944770960640a3a1692d96fa6c47900cff50661", "url": "https://github.com/trinodb/trino/commit/e944770960640a3a1692d96fa6c47900cff50661", "message": "Static import PlanBuilder#expression", "committedDate": "2020-05-11T14:56:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE1OTUyOA==", "url": "https://github.com/trinodb/trino/pull/3694#discussion_r423159528", "bodyText": "Unrelated formatting change", "author": "martint", "createdAt": "2020-05-11T16:20:35Z", "path": "presto-main/src/main/java/io/prestosql/sql/planner/iterative/rule/RemoveUnsupportedDynamicFilters.java", "diffHunk": "@@ -206,9 +240,9 @@ private Expression removeAllDynamicFilters(Expression expression)\n             return combineConjuncts(metadata, extractResult.getStaticConjuncts());\n         }\n \n-        private Expression removeNestedDynamicFilters(Expression expression)\n-        {\n-            return ExpressionTreeRewriter.rewriteWith(new ExpressionRewriter<Void>() {\n+        private Expression removeNestedDynamicFilters(Expression expression) {\n+            return ExpressionTreeRewriter.rewriteWith(new ExpressionRewriter<Void>()\n+            {", "originalCommit": "4595250945399fc335ba737ea918b29db80256f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3d4977727f9a57fe9b4fcfcba9bbeedd00ec24d8", "chunk": "diff --git a/presto-main/src/main/java/io/prestosql/sql/planner/iterative/rule/RemoveUnsupportedDynamicFilters.java b/presto-main/src/main/java/io/prestosql/sql/planner/iterative/rule/RemoveUnsupportedDynamicFilters.java\nindex 5148f0916d..c08c88d043 100644\n--- a/presto-main/src/main/java/io/prestosql/sql/planner/iterative/rule/RemoveUnsupportedDynamicFilters.java\n+++ b/presto-main/src/main/java/io/prestosql/sql/planner/iterative/rule/RemoveUnsupportedDynamicFilters.java\n\n@@ -240,7 +241,8 @@ public class RemoveUnsupportedDynamicFilters\n             return combineConjuncts(metadata, extractResult.getStaticConjuncts());\n         }\n \n-        private Expression removeNestedDynamicFilters(Expression expression) {\n+        private Expression removeNestedDynamicFilters(Expression expression)\n+        {\n             return ExpressionTreeRewriter.rewriteWith(new ExpressionRewriter<Void>()\n             {\n                 @Override\n"}}, {"oid": "3d4977727f9a57fe9b4fcfcba9bbeedd00ec24d8", "url": "https://github.com/trinodb/trino/commit/3d4977727f9a57fe9b4fcfcba9bbeedd00ec24d8", "message": "Fix formatting", "committedDate": "2020-05-12T09:21:13Z", "type": "commit"}, {"oid": "3d4977727f9a57fe9b4fcfcba9bbeedd00ec24d8", "url": "https://github.com/trinodb/trino/commit/3d4977727f9a57fe9b4fcfcba9bbeedd00ec24d8", "message": "Fix formatting", "committedDate": "2020-05-12T09:21:13Z", "type": "forcePushed"}]}