{"pr_number": 4462, "pr_title": "Add Kafka headers as column", "pr_createdAt": "2020-07-15T19:53:48Z", "pr_url": "https://github.com/trinodb/trino/pull/4462", "timeline": [{"oid": "80dc7cea55e1005eff07c0bbca20ae938c58c020", "url": "https://github.com/trinodb/trino/commit/80dc7cea55e1005eff07c0bbca20ae938c58c020", "message": "Add header column to Kafka Connector\n\nColumn definition has been added to KafkaInternalFieldDescription with\nmap(VARCHAR,array(VARBINARY)) type from TypeManager.\nValueProvider has been added to KafkaRecordSet\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-07-29T18:30:30Z", "type": "forcePushed"}, {"oid": "b58473aba6619d686d5e3f86a9d60cc717b63a0e", "url": "https://github.com/trinodb/trino/commit/b58473aba6619d686d5e3f86a9d60cc717b63a0e", "message": "Add header column to Kafka Connector\n\nColumn definition has been added to KafkaInternalFieldDescription with\nmap(VARCHAR,array(VARBINARY)) type from TypeManager.\nValueProvider has been added to KafkaRecordSet\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-07-29T20:54:55Z", "type": "forcePushed"}, {"oid": "a8d59c3ba863da2c7258d8fa8a1043e4c802fa67", "url": "https://github.com/trinodb/trino/commit/a8d59c3ba863da2c7258d8fa8a1043e4c802fa67", "message": "Add header column to Kafka Connector\n\nColumn definition has been added to KafkaInternalFieldDescription with\nmap(VARCHAR,array(VARBINARY)) type from TypeManager.\nValueProvider has been added to KafkaRecordSet\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-08-18T19:45:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzc3NjEyMQ==", "url": "https://github.com/trinodb/trino/pull/4462#discussion_r473776121", "bodyText": "drop dot at the end :)", "author": "losipiuk", "createdAt": "2020-08-20T08:46:58Z", "path": "presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaInternalFieldManager.java", "diffHunk": "@@ -138,6 +149,10 @@ public KafkaInternalFieldManager(TypeManager typeManager)\n                         MESSAGE_FIELD,\n                         \"Message text\",\n                         createUnboundedVarcharType()))\n+                .put(HEADERS_FIELD, new InternalField(\n+                        HEADERS_FIELD,\n+                        \"Headers of the message as map.\",", "originalCommit": "a8d59c3ba863da2c7258d8fa8a1043e4c802fa67", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b3479f0af25757c8eca876fcef8f57ff47ebf7df", "chunk": "diff --git a/presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaInternalFieldManager.java b/presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaInternalFieldManager.java\nindex f684ccdaf4..159226307a 100644\n--- a/presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaInternalFieldManager.java\n+++ b/presto-kafka/src/main/java/io/prestosql/plugin/kafka/KafkaInternalFieldManager.java\n\n@@ -151,7 +151,7 @@ public class KafkaInternalFieldManager\n                         createUnboundedVarcharType()))\n                 .put(HEADERS_FIELD, new InternalField(\n                         HEADERS_FIELD,\n-                        \"Headers of the message as map.\",\n+                        \"Headers of the message as map\",\n                         varcharMapType))\n                 .put(MESSAGE_LENGTH_FIELD, new InternalField(\n                         MESSAGE_LENGTH_FIELD,\n"}}, {"oid": "b3479f0af25757c8eca876fcef8f57ff47ebf7df", "url": "https://github.com/trinodb/trino/commit/b3479f0af25757c8eca876fcef8f57ff47ebf7df", "message": "Add header column to Kafka Connector\n\nColumn definition has been added to KafkaInternalFieldDescription with\nmap(VARCHAR,array(VARBINARY)) type from TypeManager.\nValueProvider has been added to KafkaRecordSet\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-08-31T15:27:01Z", "type": "forcePushed"}, {"oid": "3ddb4ae8ca8fdd25e1245a6f5a7542c25882e748", "url": "https://github.com/trinodb/trino/commit/3ddb4ae8ca8fdd25e1245a6f5a7542c25882e748", "message": "Make Type column wider in Kafka columns documentation\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-09-09T06:56:13Z", "type": "commit"}, {"oid": "0daf4b198fbd91386ae51255642a9fc6b2fa0b8f", "url": "https://github.com/trinodb/trino/commit/0daf4b198fbd91386ae51255642a9fc6b2fa0b8f", "message": "Refactor KafkaInternalFieldDescription to KafkaInternalFieldManager\n\nThe KafkaInternalFieldManager creates the internalFields map in the\nconsructor where the TypeManager can be used.\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-09-09T06:56:13Z", "type": "commit"}, {"oid": "228e08b2b943e057b9e510824b73194b82fbd909", "url": "https://github.com/trinodb/trino/commit/228e08b2b943e057b9e510824b73194b82fbd909", "message": "Add header column to Kafka Connector\n\nColumn definition has been added to KafkaInternalFieldDescription with\nmap(VARCHAR,array(VARBINARY)) type from TypeManager.\nValueProvider has been added to KafkaRecordSet\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-09-09T06:56:14Z", "type": "commit"}, {"oid": "228e08b2b943e057b9e510824b73194b82fbd909", "url": "https://github.com/trinodb/trino/commit/228e08b2b943e057b9e510824b73194b82fbd909", "message": "Add header column to Kafka Connector\n\nColumn definition has been added to KafkaInternalFieldDescription with\nmap(VARCHAR,array(VARBINARY)) type from TypeManager.\nValueProvider has been added to KafkaRecordSet\n\nSigned-off-by: Sven Pfennig <sven.pfennig@syncier.com>", "committedDate": "2020-09-09T06:56:14Z", "type": "forcePushed"}]}