{"pr_number": 6415, "pr_title": "Handle Kafka Schema Registry unsupported formats", "pr_createdAt": "2020-12-21T21:33:11Z", "pr_url": "https://github.com/trinodb/trino/pull/6415", "timeline": [{"oid": "353beda80e91733b42f6500e9b7a57d00d51cfc4", "url": "https://github.com/trinodb/trino/commit/353beda80e91733b42f6500e9b7a57d00d51cfc4", "message": "Cleanup in ConfluentSchemaRegistryTableDescriptionSupplier\n\nOrder fields, constructor parameters and initialization statements\nso they are in the same order.\nAlso cleanup requireNonNull usage.", "committedDate": "2020-12-22T19:44:15Z", "type": "commit"}, {"oid": "5d5464a230408fad2bb080a2b3f93a4d7f01903a", "url": "https://github.com/trinodb/trino/commit/5d5464a230408fad2bb080a2b3f93a4d7f01903a", "message": "Use Optional.isEmpty() instead of negated isPresent()", "committedDate": "2020-12-22T19:44:15Z", "type": "commit"}, {"oid": "01ae8c61025f74efd1aea6b7eb9a9885ab3e98c6", "url": "https://github.com/trinodb/trino/commit/01ae8c61025f74efd1aea6b7eb9a9885ab3e98c6", "message": "Extract SchemaParser in Kafka Schema Registry", "committedDate": "2020-12-22T19:44:15Z", "type": "commit"}, {"oid": "4a7c7bdc27d33bfe0e29e5c087506193e7ac4911", "url": "https://github.com/trinodb/trino/commit/4a7c7bdc27d33bfe0e29e5c087506193e7ac4911", "message": "Fail fast Kafka Schema Registry on unsupported format", "committedDate": "2020-12-22T19:44:15Z", "type": "commit"}, {"oid": "4a7c7bdc27d33bfe0e29e5c087506193e7ac4911", "url": "https://github.com/trinodb/trino/commit/4a7c7bdc27d33bfe0e29e5c087506193e7ac4911", "message": "Fail fast Kafka Schema Registry on unsupported format", "committedDate": "2020-12-22T19:44:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzgxNDc4Ng==", "url": "https://github.com/trinodb/trino/pull/6415#discussion_r547814786", "bodyText": "send -> sent", "author": "skrzypo987", "createdAt": "2020-12-23T08:44:27Z", "path": "presto-kafka/src/test/java/io/prestosql/plugin/kafka/schema/confluent/TestKafkaWithConfluentSchemaRegistryMinimalFunctionality.java", "diffHunk": "@@ -137,6 +148,35 @@ public void testUnsupportedInsert()\n         assertQueryFails(format(\"INSERT INTO \\\"%s\\\" VALUES (0, 0, '')\", topicName), \"Insert not supported\");\n     }\n \n+    @Test\n+    public void testUnsupportedFormat()\n+            throws Exception\n+    {\n+        String topicName = \"topic-unsupported-format\";\n+        testingKafkaWithSchemaRegistry.createTopic(topicName);\n+\n+        assertNotExists(topicName);\n+\n+        Future<RecordMetadata> lastSendFuture = Futures.immediateFuture(null);", "originalCommit": "4a7c7bdc27d33bfe0e29e5c087506193e7ac4911", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}