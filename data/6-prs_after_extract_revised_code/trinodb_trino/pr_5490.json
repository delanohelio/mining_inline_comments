{"pr_number": 5490, "pr_title": "Test*Plugin cleanup", "pr_createdAt": "2020-10-09T10:35:50Z", "pr_url": "https://github.com/trinodb/trino/pull/5490", "timeline": [{"oid": "debf8483f8a30a4c68e6646c1f673c610e84e0e8", "url": "https://github.com/trinodb/trino/commit/debf8483f8a30a4c68e6646c1f673c610e84e0e8", "message": "Shutdown connector in plugin tests\n\nPositive test cases shutdown the connector created within the\ntest.\n\nNegative test cases do not call `.shutdown()` as this must not be\nreachable and the test should verify that.", "committedDate": "2020-10-09T10:35:19Z", "type": "commit"}, {"oid": "57fb8e02e68f156899bc935ca63468f03e6226cd", "url": "https://github.com/trinodb/trino/commit/57fb8e02e68f156899bc935ca63468f03e6226cd", "message": "Simplify test", "committedDate": "2020-10-09T10:35:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM1NDkxNg==", "url": "https://github.com/trinodb/trino/pull/5490#discussion_r502354916", "bodyText": "Maybe connector should be Closeable?", "author": "kokosing", "createdAt": "2020-10-09T11:09:15Z", "path": "presto-druid/src/test/java/io/prestosql/plugin/druid/TestDruidJdbcPlugin.java", "diffHunk": "@@ -28,6 +28,6 @@ public void testCreateConnector()\n     {\n         Plugin plugin = new DruidJdbcPlugin();\n         ConnectorFactory factory = getOnlyElement(plugin.getConnectorFactories());\n-        factory.create(\"test\", ImmutableMap.of(\"connection-url\", \"test\"), new TestingConnectorContext());\n+        factory.create(\"test\", ImmutableMap.of(\"connection-url\", \"test\"), new TestingConnectorContext()).shutdown();", "originalCommit": "debf8483f8a30a4c68e6646c1f673c610e84e0e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4MzUyNQ==", "url": "https://github.com/trinodb/trino/pull/5490#discussion_r502683525", "bodyText": "My thinking exactly", "author": "findepi", "createdAt": "2020-10-09T21:42:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM1NDkxNg=="}], "type": "inlineReview", "revised_code": null}]}