{"pr_number": 3704, "pr_title": "Refactored the way we deal with buttons visiblility in the main menu", "pr_createdAt": "2020-03-12T11:34:25Z", "pr_url": "https://github.com/getodk/collect/pull/3704", "timeline": [{"oid": "2fc61c7a02f7d9ff03580a0f7a979dcdebb3e1c8", "url": "https://github.com/getodk/collect/commit/2fc61c7a02f7d9ff03580a0f7a979dcdebb3e1c8", "message": "Refactored the way we deal with buttons visiblility in the main menu", "committedDate": "2020-03-12T11:25:11Z", "type": "commit"}, {"oid": "318deecf78b7dd65359d4c83466ff07e5d5c5b6c", "url": "https://github.com/getodk/collect/commit/318deecf78b7dd65359d4c83466ff07e5d5c5b6c", "message": "Added automated tests", "committedDate": "2020-03-12T11:27:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc3OTUwMw==", "url": "https://github.com/getodk/collect/pull/3704#discussion_r391779503", "bodyText": "I might be missing something but I think your tests in MainMenuButtonsVisibilityTest cover everything? Was there a reason you felt like you needed tests for the MainMenuViewModel as well?", "author": "seadowg", "createdAt": "2020-03-12T17:29:40Z", "path": "collect_app/src/test/java/org/odk/collect/android/activities/viewmodels/MainMenuViewModelTest.java", "diffHunk": "@@ -87,4 +105,64 @@ public void versionCommitDescription_whenDirtyCommit_returnsCommitCountAndSHAAnd\n         MainMenuViewModel viewModel = new MainMenuViewModel(() -> \"v1.14.0-181-ge51d004d4-dirty\");\n         assertThat(viewModel.getVersionCommitDescription(), equalTo(\"181-ge51d004d4-dirty\"));\n     }\n+\n+    @Test\n+    public void when_editSavedFormButtonIsEnabledInSettings_shouldEditSavedFormButtonBeVisibleReturnTrue() {", "originalCommit": "318deecf78b7dd65359d4c83466ff07e5d5c5b6c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA2MjYyNQ==", "url": "https://github.com/getodk/collect/pull/3704#discussion_r392062625", "bodyText": "Yeah that's right those tests were redundant, fixed.", "author": "grzesiek2010", "createdAt": "2020-03-13T07:14:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc3OTUwMw=="}], "type": "inlineReview", "revised_code": {"commit": "63cd6b079829185e71acfd97d252282c7054dd15", "chunk": "diff --git a/collect_app/src/test/java/org/odk/collect/android/activities/viewmodels/MainMenuViewModelTest.java b/collect_app/src/test/java/org/odk/collect/android/activities/viewmodels/MainMenuViewModelTest.java\nindex 4b93d45a2..4f9578864 100644\n--- a/collect_app/src/test/java/org/odk/collect/android/activities/viewmodels/MainMenuViewModelTest.java\n+++ b/collect_app/src/test/java/org/odk/collect/android/activities/viewmodels/MainMenuViewModelTest.java\n\n@@ -105,64 +87,4 @@ public class MainMenuViewModelTest {\n         MainMenuViewModel viewModel = new MainMenuViewModel(() -> \"v1.14.0-181-ge51d004d4-dirty\");\n         assertThat(viewModel.getVersionCommitDescription(), equalTo(\"181-ge51d004d4-dirty\"));\n     }\n-\n-    @Test\n-    public void when_editSavedFormButtonIsEnabledInSettings_shouldEditSavedFormButtonBeVisibleReturnTrue() {\n-        when(adminSharedPreferences.get(KEY_EDIT_SAVED)).thenReturn(true);\n-        assertThat(viewModel.shouldEditSavedFormButtonBeVisible(), is(true));\n-    }\n-\n-    @Test\n-    public void when_editSavedFormButtonIsDisabledInSettings_shouldEditSavedFormButtonBeVisibleFalse() {\n-        when(adminSharedPreferences.get(KEY_EDIT_SAVED)).thenReturn(false);\n-        assertThat(viewModel.shouldEditSavedFormButtonBeVisible(), is(false));\n-    }\n-\n-    @Test\n-    public void when_sendFinalizedFormButtonIsEnabledInSettings_shouldSendFinalizedFormButtonBeVisibleReturnTrue() {\n-        when(adminSharedPreferences.get(KEY_SEND_FINALIZED)).thenReturn(true);\n-        assertThat(viewModel.shouldSendFinalizedFormButtonBeVisible(), is(true));\n-    }\n-\n-    @Test\n-    public void when_sendFinalizedFormButtonIsDisabledInSettings_shouldSendFinalizedFormButtonBeVisibleReturnFalse() {\n-        when(adminSharedPreferences.get(KEY_SEND_FINALIZED)).thenReturn(false);\n-        assertThat(viewModel.shouldSendFinalizedFormButtonBeVisible(), is(false));\n-    }\n-\n-    @Test\n-    public void when_viewSentFormButtonIsEnabledInSettings_shouldViewSentFormButtonBeVisibleReturnTrue() {\n-        when(adminSharedPreferences.get(KEY_VIEW_SENT)).thenReturn(true);\n-        assertThat(viewModel.shouldViewSentFormButtonBeVisible(), is(true));\n-    }\n-\n-    @Test\n-    public void when_viewSentFormButtonIsDisabledInSettings_shouldViewSentFormButtonBeVisibleReturnFalse() {\n-        when(adminSharedPreferences.get(KEY_VIEW_SENT)).thenReturn(false);\n-        assertThat(viewModel.shouldViewSentFormButtonBeVisible(), is(false));\n-    }\n-\n-    @Test\n-    public void when_getBlankFormButtonIsEnabledInSettings_shouldGetBlankFormButtonBeVisibleReturnTrue() {\n-        when(adminSharedPreferences.get(KEY_GET_BLANK)).thenReturn(true);\n-        assertThat(viewModel.shouldGetBlankFormButtonBeVisible(), is(true));\n-    }\n-\n-    @Test\n-    public void when_getBlankFormButtonIsDisabledInSettings_shouldGetBlankFormButtonBeVisibleReturnFalse() {\n-        when(adminSharedPreferences.get(KEY_GET_BLANK)).thenReturn(false);\n-        assertThat(viewModel.shouldGetBlankFormButtonBeVisible(), is(false));\n-    }\n-\n-    @Test\n-    public void when_deleteSavedFormButtonIsEnabledInSettings_shouldDeleteSavedFormButtonBeVisibleReturnTrue() {\n-        when(adminSharedPreferences.get(KEY_DELETE_SAVED)).thenReturn(true);\n-        assertThat(viewModel.shouldDeleteSavedFormButtonBeVisible(), is(true));\n-    }\n-\n-    @Test\n-    public void when_deleteSavedFormButtonIsDisabledInSettings_shouldDeleteSavedFormButtonBeVisibleReturnFalse() {\n-        when(adminSharedPreferences.get(KEY_DELETE_SAVED)).thenReturn(false);\n-        assertThat(viewModel.shouldDeleteSavedFormButtonBeVisible(), is(false));\n-    }\n }\n\\ No newline at end of file\n"}}, {"oid": "63cd6b079829185e71acfd97d252282c7054dd15", "url": "https://github.com/getodk/collect/commit/63cd6b079829185e71acfd97d252282c7054dd15", "message": "Removed redundant tests", "committedDate": "2020-03-13T07:11:55Z", "type": "commit"}, {"oid": "63cd6b079829185e71acfd97d252282c7054dd15", "url": "https://github.com/getodk/collect/commit/63cd6b079829185e71acfd97d252282c7054dd15", "message": "Removed redundant tests", "committedDate": "2020-03-13T07:11:55Z", "type": "forcePushed"}]}