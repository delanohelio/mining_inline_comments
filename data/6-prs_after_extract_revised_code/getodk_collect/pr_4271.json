{"pr_number": 4271, "pr_title": "Audio recording design polish", "pr_createdAt": "2020-12-04T18:02:26Z", "pr_url": "https://github.com/getodk/collect/pull/4271", "timeline": [{"oid": "ec7773b641ad3e202ddda117da86c3f8aa34f681", "url": "https://github.com/getodk/collect/commit/ec7773b641ad3e202ddda117da86c3f8aa34f681", "message": "Add ability to simulate waveform on emulator", "committedDate": "2020-12-04T14:09:53Z", "type": "commit"}, {"oid": "17f287080849e44c521a49aab224ce5901af6af8", "url": "https://github.com/getodk/collect/commit/17f287080849e44c521a49aab224ce5901af6af8", "message": "Remove excess padding from recording controller", "committedDate": "2020-12-04T14:24:59Z", "type": "commit"}, {"oid": "54baabf0781b910601a7e3293443ae4a23f9d166", "url": "https://github.com/getodk/collect/commit/54baabf0781b910601a7e3293443ae4a23f9d166", "message": "Add confirmation dialog for deleting audio", "committedDate": "2020-12-04T14:57:07Z", "type": "commit"}, {"oid": "220d1be2cbffaa0166d676612ec7b9addef12b32", "url": "https://github.com/getodk/collect/commit/220d1be2cbffaa0166d676612ec7b9addef12b32", "message": "Tweak play/pause controls, add timecode to recording controller", "committedDate": "2020-12-04T17:41:14Z", "type": "commit"}, {"oid": "118d414cc671a1e86ea96787036639859ef898a9", "url": "https://github.com/getodk/collect/commit/118d414cc671a1e86ea96787036639859ef898a9", "message": "Increase touch area for audio seek bar", "committedDate": "2020-12-04T17:59:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI5ODc2Mg==", "url": "https://github.com/getodk/collect/pull/4271#discussion_r536298762", "bodyText": "I think this should be a red record circle.", "author": "lognaturel", "createdAt": "2020-12-04T18:35:14Z", "path": "collect_app/src/main/java/org/odk/collect/android/audio/AudioRecordingControllerFragment.java", "diffHunk": "@@ -53,11 +55,13 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n             } else if (session.getFile() == null) {\n                 binding.getRoot().setVisibility(VISIBLE);\n \n+                binding.timeCode.setText(LengthFormatterKt.formatLength(session.getDuration()));\n+\n                 if (session.getPaused()) {\n-                    binding.pauseRecording.setText(R.string.resume_recording);\n+                    binding.pauseRecording.setIcon(ContextCompat.getDrawable(getContext(), R.drawable.ic_play_arrow_24dp));", "originalCommit": "118d414cc671a1e86ea96787036639859ef898a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5NTE3MA==", "url": "https://github.com/getodk/collect/pull/4271#discussion_r537095170", "bodyText": "Nice touch. I like that!", "author": "seadowg", "createdAt": "2020-12-06T18:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI5ODc2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5OTQ3Mw==", "url": "https://github.com/getodk/collect/pull/4271#discussion_r537099473", "bodyText": "Actually after playing with this it makes it feel like we're recording while paused as there is a big red recording icon. Lets not change this at the moment.", "author": "seadowg", "createdAt": "2020-12-06T18:45:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI5ODc2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzExMTM2Mw==", "url": "https://github.com/getodk/collect/pull/4271#discussion_r537111363", "bodyText": "I don\u2019t think play is at all clear, though. Does it indicate ongoing playback? Playing back what you just recorded before stopping? Even knowing that it was supposed to be resume I wasn\u2019t sure that\u2019s what it would do.\nWhat do other recording apps do?  Maybe a blue or black circle? Or maybe the scale of the button is the challenge?", "author": "lognaturel", "createdAt": "2020-12-06T19:55:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI5ODc2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "817b4fd2e52f8e264c0782fd9250e5701fd5c8d3", "chunk": "diff --git a/collect_app/src/main/java/org/odk/collect/android/audio/AudioRecordingControllerFragment.java b/collect_app/src/main/java/org/odk/collect/android/audio/AudioRecordingControllerFragment.java\nindex c0f70d64a..76e51ad6f 100644\n--- a/collect_app/src/main/java/org/odk/collect/android/audio/AudioRecordingControllerFragment.java\n+++ b/collect_app/src/main/java/org/odk/collect/android/audio/AudioRecordingControllerFragment.java\n\n@@ -59,9 +59,11 @@ public class AudioRecordingControllerFragment extends Fragment {\n \n                 if (session.getPaused()) {\n                     binding.pauseRecording.setIcon(ContextCompat.getDrawable(getContext(), R.drawable.ic_play_arrow_24dp));\n+                    binding.pauseRecording.setContentDescription(getString(R.string.resume_recording));\n                     binding.pauseRecording.setOnClickListener(v -> viewModel.resume());\n                 } else {\n                     binding.pauseRecording.setIcon(ContextCompat.getDrawable(getContext(), R.drawable.ic_pause_24dp));\n+                    binding.pauseRecording.setContentDescription(getString(R.string.pause_recording));\n                     binding.pauseRecording.setOnClickListener(v -> viewModel.pause());\n                 }\n \n"}}, {"oid": "ac35fda1a81844c8879785f13afd9a23d89603e8", "url": "https://github.com/getodk/collect/commit/ac35fda1a81844c8879785f13afd9a23d89603e8", "message": "Update tests", "committedDate": "2020-12-06T18:26:07Z", "type": "commit"}, {"oid": "817b4fd2e52f8e264c0782fd9250e5701fd5c8d3", "url": "https://github.com/getodk/collect/commit/817b4fd2e52f8e264c0782fd9250e5701fd5c8d3", "message": "Update content description for pause button", "committedDate": "2020-12-06T18:31:53Z", "type": "commit"}, {"oid": "f82d8d7456f4a6fd436e2dd642122f001d562c60", "url": "https://github.com/getodk/collect/commit/f82d8d7456f4a6fd436e2dd642122f001d562c60", "message": "Use outlined button for pause/resume", "committedDate": "2020-12-06T18:54:21Z", "type": "commit"}, {"oid": "d2db9a755a70ad16270cf5e9722284009f357888", "url": "https://github.com/getodk/collect/commit/d2db9a755a70ad16270cf5e9722284009f357888", "message": "Fix delete button margin", "committedDate": "2020-12-06T18:55:53Z", "type": "commit"}, {"oid": "ecea0e0679c000bda8232b95bed7b94fb18261c0", "url": "https://github.com/getodk/collect/commit/ecea0e0679c000bda8232b95bed7b94fb18261c0", "message": "Add comments to strings", "committedDate": "2020-12-06T19:06:37Z", "type": "commit"}, {"oid": "9ec4b564d0d07665e4e8dc47a516c70a1deae930", "url": "https://github.com/getodk/collect/commit/9ec4b564d0d07665e4e8dc47a516c70a1deae930", "message": "Use record icon for resume button", "committedDate": "2020-12-07T18:47:42Z", "type": "commit"}, {"oid": "8447e719c77cbefa98a56481794e19eef139d529", "url": "https://github.com/getodk/collect/commit/8447e719c77cbefa98a56481794e19eef139d529", "message": "Use imageview for recording icon", "committedDate": "2020-12-07T19:07:13Z", "type": "commit"}, {"oid": "8608ac366b1ea40260a58c94d6914892794e75cf", "url": "https://github.com/getodk/collect/commit/8608ac366b1ea40260a58c94d6914892794e75cf", "message": "Switch icon for recording status when paused", "committedDate": "2020-12-07T19:15:19Z", "type": "commit"}, {"oid": "b87f991e210eb04a4966da569d3b40d2c7a2212a", "url": "https://github.com/getodk/collect/commit/b87f991e210eb04a4966da569d3b40d2c7a2212a", "message": "Use mic icon for resume", "committedDate": "2020-12-07T19:21:36Z", "type": "commit"}]}