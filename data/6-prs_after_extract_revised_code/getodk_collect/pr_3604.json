{"pr_number": 3604, "pr_title": "Fix rendering of google map labels on top of offline layers", "pr_createdAt": "2020-01-21T17:48:02Z", "pr_url": "https://github.com/getodk/collect/pull/3604", "timeline": [{"oid": "917c9cbd2acf7941b5ace1da47a16a54adc8a43e", "url": "https://github.com/getodk/collect/commit/917c9cbd2acf7941b5ace1da47a16a54adc8a43e", "message": "fix google map labels on top of offline layers", "committedDate": "2020-01-21T17:41:08Z", "type": "commit"}, {"oid": "00c785ac92e325ce0ab7ca0794dd5d93bbb958e9", "url": "https://github.com/getodk/collect/commit/00c785ac92e325ce0ab7ca0794dd5d93bbb958e9", "message": "make map style a local string var", "committedDate": "2020-01-24T18:15:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDgyNzM3NQ==", "url": "https://github.com/getodk/collect/pull/3604#discussion_r370827375", "bodyText": "Generally we should avoid using comments. Comments should be used if it's a tricky case that requires an explanation. In 99% cases you can just come up with a better method name. In this case it would be for example setLabelsVisibility(); ahh and we don't use _ in method names.", "author": "grzesiek2010", "createdAt": "2020-01-24T20:26:09Z", "path": "collect_app/src/main/java/org/odk/collect/android/geo/GoogleMapFragment.java", "diffHunk": "@@ -462,9 +463,18 @@ private void loadReferenceOverlay() {\n             referenceOverlay = this.map.addTileOverlay(new TileOverlayOptions().tileProvider(\n                 new GoogleMapsMapBoxOfflineTileProvider(referenceLayerFile)\n             ));\n+            switch_google_map_labels(\"off\");\n+        } else {\n+            switch_google_map_labels(\"on\");\n         }\n     }\n \n+    // Turns off google map labels for offline layers to work correctly\n+    private void switch_google_map_labels(String state) {", "originalCommit": "00c785ac92e325ce0ab7ca0794dd5d93bbb958e9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ed59d266a2f146fffe4bbc8ecc042a2955d9605", "chunk": "diff --git a/collect_app/src/main/java/org/odk/collect/android/geo/GoogleMapFragment.java b/collect_app/src/main/java/org/odk/collect/android/geo/GoogleMapFragment.java\nindex eb78171ec..bc61cdf05 100644\n--- a/collect_app/src/main/java/org/odk/collect/android/geo/GoogleMapFragment.java\n+++ b/collect_app/src/main/java/org/odk/collect/android/geo/GoogleMapFragment.java\n\n@@ -463,14 +463,13 @@ public class GoogleMapFragment extends SupportMapFragment implements\n             referenceOverlay = this.map.addTileOverlay(new TileOverlayOptions().tileProvider(\n                 new GoogleMapsMapBoxOfflineTileProvider(referenceLayerFile)\n             ));\n-            switch_google_map_labels(\"off\");\n+            setLabelsVisibility(\"off\");\n         } else {\n-            switch_google_map_labels(\"on\");\n+            setLabelsVisibility(\"on\");\n         }\n     }\n \n-    // Turns off google map labels for offline layers to work correctly\n-    private void switch_google_map_labels(String state) {\n+    private void setLabelsVisibility(String state) {\n         String style = String.format(\" [ { featureType: all, elementType: labels, stylers: [ { visibility: %s } ] } ]\", state);\n         map.setMapStyle(new MapStyleOptions(style));\n     }\n"}}, {"oid": "3ed59d266a2f146fffe4bbc8ecc042a2955d9605", "url": "https://github.com/getodk/collect/commit/3ed59d266a2f146fffe4bbc8ecc042a2955d9605", "message": "Change method name", "committedDate": "2020-01-24T20:41:30Z", "type": "commit"}]}