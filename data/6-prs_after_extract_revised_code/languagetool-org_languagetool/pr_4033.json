{"pr_number": 4033, "pr_title": "PatternToken rules: match only from likely tokens if possible", "pr_createdAt": "2020-12-16T19:27:44Z", "pr_url": "https://github.com/languagetool-org/languagetool/pull/4033", "timeline": [{"oid": "25118ef845949e1c3309062f88e0dafb4d1f1673", "url": "https://github.com/languagetool-org/languagetool/commit/25118ef845949e1c3309062f88e0dafb4d1f1673", "message": "PatternToken rules: match only from likely tokens if possible\n\ntrack token indices by lemma/token text in AnalyzedSentence\n\nif a pattern has a token with token/lemma hints and fixed offset from the start,\nuse these indices to narrow down the search space", "committedDate": "2020-12-16T19:26:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDgwNzQ2Ng==", "url": "https://github.com/languagetool-org/languagetool/pull/4033#discussion_r554807466", "bodyText": "This (and below) probably should be changed to 5.3", "author": "donnerpeter", "createdAt": "2021-01-11T06:52:42Z", "path": "languagetool-core/src/main/java/org/languagetool/AnalyzedSentence.java", "diffHunk": "@@ -309,7 +322,29 @@ public String getAnnotations() {\n    * @since 2.5\n    */\n   public Set<String> getLemmaSet() {\n-    return lemmaSet;\n+    return lemmaOffsets.keySet();\n+  }\n+\n+  /**\n+   * @return all offsets in {@link #getTokensWithoutWhitespace()} where tokens with the given text occur (case-insensitive),\n+   * or {@code null} if there are no such occurrences\n+   * @since 5.2", "originalCommit": "25118ef845949e1c3309062f88e0dafb4d1f1673", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDg5Mjk3OQ==", "url": "https://github.com/languagetool-org/languagetool/pull/4033#discussion_r554892979", "bodyText": "Thanks, fixed", "author": "danielnaber", "createdAt": "2021-01-11T08:46:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDgwNzQ2Ng=="}], "type": "inlineReview", "revised_code": null}]}