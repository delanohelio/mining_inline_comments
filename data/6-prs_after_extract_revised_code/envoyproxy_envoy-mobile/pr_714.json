{"pr_number": 714, "pr_title": "dns: add ability to set dns failure refresh rate", "pr_createdAt": "2020-02-29T18:32:07Z", "pr_url": "https://github.com/envoyproxy/envoy-mobile/pull/714", "timeline": [{"oid": "92080e6b7d313a0dfdb3e14b5356d84dc6c343ac", "url": "https://github.com/envoyproxy/envoy-mobile/commit/92080e6b7d313a0dfdb3e14b5356d84dc6c343ac", "message": "wip\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T10:54:13Z", "type": "commit"}, {"oid": "b53ec329890842a45936405d250ac9a411c80d1f", "url": "https://github.com/envoyproxy/envoy-mobile/commit/b53ec329890842a45936405d250ac9a411c80d1f", "message": "tests passing\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T12:29:56Z", "type": "commit"}, {"oid": "54413b0ba7b33af3186d82cb48fe9514538472e9", "url": "https://github.com/envoyproxy/envoy-mobile/commit/54413b0ba7b33af3186d82cb48fe9514538472e9", "message": "fmt\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T18:35:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA0NzAyMQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386047021", "bodyText": "I considered putting all of the dns settings into a struct (same on iOS), but ultimately decided to keep this flat for this change.\nI think if this lists keeps growing we need to first think about how we are going to manage config as it gets more unruly. But for now keeping it flat seemed the least intrusive change.", "author": "junr03", "createdAt": "2020-02-29T18:40:33Z", "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;", "originalCommit": "54413b0ba7b33af3186d82cb48fe9514538472e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTEyMQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541121", "bodyText": "sounds good", "author": "rebello95", "createdAt": "2020-03-02T17:35:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA0NzAyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "1f4f09bcb120bb44adc8ad69b840761413d5630e", "chunk": "diff --git a/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java b/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\nindex 75c8279b..665477dd 100644\n--- a/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\n+++ b/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\n\n@@ -12,7 +12,7 @@ public class EnvoyConfiguration {\n   /**\n    * Create an EnvoyConfiguration with a user provided configuration values.\n    *\n-   * @param statsDomain                  The domain to flush stats to.\n+   * @param statsDomain                  the domain to flush stats to.\n    * @param connectTimeoutSeconds        timeout for new network connections to hosts in\n    *                                     the cluster.\n    * @param dnsRefreshSeconds            rate in seconds to refresh DNS.\n"}}, {"oid": "95fd2c78ace3c598716cb0319da968ace999a2ae", "url": "https://github.com/envoyproxy/envoy-mobile/commit/95fd2c78ace3c598716cb0319da968ace999a2ae", "message": "java test\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T18:42:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTE3Ng==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541176", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param statsDomain                  The domain to flush stats to.\n          \n          \n            \n               * @param statsDomain                  the domain to flush stats to.", "author": "rebello95", "createdAt": "2020-03-02T17:35:12Z", "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;\n+  public final Integer dnsFailureRefreshSecondsBase;\n+  public final Integer dnsFailureRefreshSecondsMax;\n   public final Integer statsFlushSeconds;\n \n   /**\n    * Create an EnvoyConfiguration with a user provided configuration values.\n    *\n-   * @param statsDomain           The domain to flush stats to.\n-   * @param connectTimeoutSeconds timeout for new network connections to hosts in\n-   *                              the cluster.\n-   * @param dnsRefreshSeconds     rate in seconds to refresh DNS.\n-   * @param statsFlushSeconds     interval at which to flush Envoy stats.\n+   * @param statsDomain                  The domain to flush stats to.", "originalCommit": "95fd2c78ace3c598716cb0319da968ace999a2ae", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1f4f09bcb120bb44adc8ad69b840761413d5630e", "chunk": "diff --git a/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java b/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\nindex 75c8279b..665477dd 100644\n--- a/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\n+++ b/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\n\n@@ -12,7 +12,7 @@ public class EnvoyConfiguration {\n   /**\n    * Create an EnvoyConfiguration with a user provided configuration values.\n    *\n-   * @param statsDomain                  The domain to flush stats to.\n+   * @param statsDomain                  the domain to flush stats to.\n    * @param connectTimeoutSeconds        timeout for new network connections to hosts in\n    *                                     the cluster.\n    * @param dnsRefreshSeconds            rate in seconds to refresh DNS.\n"}}, {"oid": "1f4f09bcb120bb44adc8ad69b840761413d5630e", "url": "https://github.com/envoyproxy/envoy-mobile/commit/1f4f09bcb120bb44adc8ad69b840761413d5630e", "message": "fixups\n\nSigned-off-by: Michael Rebello <me@michaelrebello.com>", "committedDate": "2020-03-02T17:38:23Z", "type": "commit"}]}