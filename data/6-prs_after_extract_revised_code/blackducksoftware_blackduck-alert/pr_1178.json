{"pr_number": 1178, "pr_title": " about controller refactor", "pr_createdAt": "2020-09-21T16:09:00Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1178", "timeline": [{"oid": "5360e196929ca079434120e44caf36ee33105c40", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5360e196929ca079434120e44caf36ee33105c40", "message": "refactor: Return ActionResponse", "committedDate": "2020-09-21T14:10:45Z", "type": "commit"}, {"oid": "70cd5f2d810d5121d8fe965adf8ad5ac9ecfe9e9", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/70cd5f2d810d5121d8fe965adf8ad5ac9ecfe9e9", "message": "test: Implement tests for actions and controller.", "committedDate": "2020-09-21T15:21:39Z", "type": "commit"}, {"oid": "d04ec6f52fe353c3965c62a43319c8a722a5e9f8", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d04ec6f52fe353c3965c62a43319c8a722a5e9f8", "message": "refactor: AboutReader return an Optional.", "committedDate": "2020-09-21T16:06:42Z", "type": "commit"}, {"oid": "364a8c3a69b301c67178b5322a7d47ac6e59b842", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/364a8c3a69b301c67178b5322a7d47ac6e59b842", "message": "test: Update tests to use Optional from AboutReader.", "committedDate": "2020-09-21T16:07:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE4NDQ2NQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1178#discussion_r492184465", "bodyText": "Would it be reasonable to do something like this here\nreturn aboutReader.getAboutModel().map(content -> new ActionResponse<>(HttpStatus.OK, content).orElse(new ActionResponse<>(HttpStatus.NOT_FOUND)", "author": "bamandel", "createdAt": "2020-09-21T16:15:28Z", "path": "src/main/java/com/synopsys/integration/alert/web/api/about/AboutActions.java", "diffHunk": "@@ -38,8 +40,15 @@ public AboutActions(AboutReader aboutReader) {\n         this.aboutReader = aboutReader;\n     }\n \n-    public Optional<AboutModel> getAboutModel() {\n-        return Optional.ofNullable(aboutReader.getAboutModel());\n+    public ActionResponse<AboutModel> getAboutModel() {\n+        ActionResponse<AboutModel> response;\n+        Optional<AboutModel> content = aboutReader.getAboutModel();\n+        if (content.isEmpty()) {\n+            response = new ActionResponse<>(HttpStatus.NOT_FOUND);\n+        } else {\n+            response = new ActionResponse<>(HttpStatus.OK, aboutReader.getAboutModel().orElse(null));", "originalCommit": "364a8c3a69b301c67178b5322a7d47ac6e59b842", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0b4e6e746f14b2757de6d9f0b92aba8e74b11fe0", "chunk": "diff --git a/src/main/java/com/synopsys/integration/alert/web/api/about/AboutActions.java b/src/main/java/com/synopsys/integration/alert/web/api/about/AboutActions.java\nindex 9aab1a386..2ecc88527 100644\n--- a/src/main/java/com/synopsys/integration/alert/web/api/about/AboutActions.java\n+++ b/src/main/java/com/synopsys/integration/alert/web/api/about/AboutActions.java\n\n@@ -41,14 +39,9 @@ public class AboutActions {\n     }\n \n     public ActionResponse<AboutModel> getAboutModel() {\n-        ActionResponse<AboutModel> response;\n-        Optional<AboutModel> content = aboutReader.getAboutModel();\n-        if (content.isEmpty()) {\n-            response = new ActionResponse<>(HttpStatus.NOT_FOUND);\n-        } else {\n-            response = new ActionResponse<>(HttpStatus.OK, aboutReader.getAboutModel().orElse(null));\n-        }\n-        return response;\n+        return aboutReader.getAboutModel()\n+                   .map(content -> new ActionResponse<>(HttpStatus.OK, content))\n+                   .orElse(new ActionResponse<>(HttpStatus.NOT_FOUND));\n     }\n \n }\n"}}, {"oid": "0b4e6e746f14b2757de6d9f0b92aba8e74b11fe0", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0b4e6e746f14b2757de6d9f0b92aba8e74b11fe0", "message": "refactor: Update the action to use the optional api.", "committedDate": "2020-09-21T17:06:11Z", "type": "commit"}]}