{"pr_number": 304, "pr_title": "[Offline sync] Fix storing loading project offline", "pr_createdAt": "2020-01-08T22:56:54Z", "pr_url": "https://github.com/google/ground-android/pull/304", "timeline": [{"oid": "940c27c1ee4aee8be31dea5839fdb26730701788", "url": "https://github.com/google/ground-android/commit/940c27c1ee4aee8be31dea5839fdb26730701788", "message": "Log failures to load project from local db", "committedDate": "2020-01-08T22:38:41Z", "type": "commit"}, {"oid": "a35639673f42a3607dfc61cc46b8169984b29bc0", "url": "https://github.com/google/ground-android/commit/a35639673f42a3607dfc61cc46b8169984b29bc0", "message": "Show project selector when project loading fails", "committedDate": "2020-01-08T22:43:02Z", "type": "commit"}, {"oid": "c720a53aed6b9121067bc69e183a953d35feb69b", "url": "https://github.com/google/ground-android/commit/c720a53aed6b9121067bc69e183a953d35feb69b", "message": "Add JavaDoc", "committedDate": "2020-01-08T23:35:22Z", "type": "commit"}, {"oid": "db08f0cf4e5d2f97b39f0862d8a17fe5c65a962d", "url": "https://github.com/google/ground-android/commit/db08f0cf4e5d2f97b39f0862d8a17fe5c65a962d", "message": "Rename method for consistency", "committedDate": "2020-01-08T23:37:17Z", "type": "commit"}, {"oid": "52b54186325e7fce542f95a46505d2ea78cb48bb", "url": "https://github.com/google/ground-android/commit/52b54186325e7fce542f95a46505d2ea78cb48bb", "message": "Delete unused method", "committedDate": "2020-01-08T23:46:57Z", "type": "commit"}, {"oid": "67387c8e0747582404f2c5223daf071e53b89198", "url": "https://github.com/google/ground-android/commit/67387c8e0747582404f2c5223daf071e53b89198", "message": "Remove obsolete Timestamps class", "committedDate": "2020-01-08T23:50:21Z", "type": "commit"}, {"oid": "67387c8e0747582404f2c5223daf071e53b89198", "url": "https://github.com/google/ground-android/commit/67387c8e0747582404f2c5223daf071e53b89198", "message": "Remove obsolete Timestamps class", "committedDate": "2020-01-08T23:50:21Z", "type": "forcePushed"}, {"oid": "3f2914dc1ef2a1a6b13137b1ca0f17fe88563625", "url": "https://github.com/google/ground-android/commit/3f2914dc1ef2a1a6b13137b1ca0f17fe88563625", "message": "Fix JavaDoc", "committedDate": "2020-01-08T23:55:10Z", "type": "commit"}, {"oid": "77763a8ef2f5aade1190c2f9a767c19b65b42d9d", "url": "https://github.com/google/ground-android/commit/77763a8ef2f5aade1190c2f9a767c19b65b42d9d", "message": "Undo accidental commit", "committedDate": "2020-01-09T01:40:50Z", "type": "commit"}, {"oid": "a48f937c4e3bde96431395235c6339703d719271", "url": "https://github.com/google/ground-android/commit/a48f937c4e3bde96431395235c6339703d719271", "message": "Fix saving project locally", "committedDate": "2020-01-09T02:02:28Z", "type": "commit"}, {"oid": "8be71d025b791eedf1650351382338e25526f6d0", "url": "https://github.com/google/ground-android/commit/8be71d025b791eedf1650351382338e25526f6d0", "message": "Remove 3p RxJava debug lib which may interfere with crashlytics", "committedDate": "2020-01-09T02:14:06Z", "type": "commit"}, {"oid": "aa8c140b6fc50bfc2d68dfc804f62dbbecde1dc1", "url": "https://github.com/google/ground-android/commit/aa8c140b6fc50bfc2d68dfc804f62dbbecde1dc1", "message": "Merge branch 'master' into fix-offline", "committedDate": "2020-01-09T02:32:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYyNDU4Mw==", "url": "https://github.com/google/ground-android/pull/304#discussion_r364624583", "bodyText": "Please remove this", "author": "shobhitagarwal1612", "createdAt": "2020-01-09T09:06:43Z", "path": "gnd/src/main/java/com/google/android/gnd/repository/ProjectRepository.java", "diffHunk": "@@ -84,8 +84,14 @@ public ProjectRepository(\n \n     return syncProjectWithRemote(id)\n         .doOnSubscribe(__ -> Log.d(TAG, \"Activating project \" + id))\n-        .doOnError(err -> Log.d(TAG, \"Failed to load project from remote\", err))\n-        .onErrorResumeNext(__ -> localDataStore.getProjectById(id).toSingle())\n+        .doOnError(err -> Log.d(TAG, \"Error loading project from remote\", err))\n+        .onErrorResumeNext(\n+            __ ->\n+                localDataStore\n+                    .getProjectById(id)\n+                    .doOnComplete(() -> Log.d(TAG, \"Project not found in local db\"))", "originalCommit": "aa8c140b6fc50bfc2d68dfc804f62dbbecde1dc1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ff6ad7ef60ac1a529d2a51ad16cba11e28d9f9e4", "chunk": "diff --git a/gnd/src/main/java/com/google/android/gnd/repository/ProjectRepository.java b/gnd/src/main/java/com/google/android/gnd/repository/ProjectRepository.java\nindex 05074927..1e56a8a5 100644\n--- a/gnd/src/main/java/com/google/android/gnd/repository/ProjectRepository.java\n+++ b/gnd/src/main/java/com/google/android/gnd/repository/ProjectRepository.java\n\n@@ -89,7 +89,6 @@ public class ProjectRepository {\n             __ ->\n                 localDataStore\n                     .getProjectById(id)\n-                    .doOnComplete(() -> Log.d(TAG, \"Project not found in local db\"))\n                     .toSingle()\n                     .doOnError(err -> Log.d(TAG, \"Error loading project from local db\", err)))\n         .doOnSuccess(__ -> localValueStore.setLastActiveProjectId(id))\n"}}, {"oid": "ff6ad7ef60ac1a529d2a51ad16cba11e28d9f9e4", "url": "https://github.com/google/ground-android/commit/ff6ad7ef60ac1a529d2a51ad16cba11e28d9f9e4", "message": "Remove duplicate log statement", "committedDate": "2020-01-09T14:18:36Z", "type": "commit"}, {"oid": "a56f0c4d419ef1d900214b0cb4cf323edf4d54a6", "url": "https://github.com/google/ground-android/commit/a56f0c4d419ef1d900214b0cb4cf323edf4d54a6", "message": "Merge remote-tracking branch 'origin/fix-offline' into fix-offline", "committedDate": "2020-01-09T14:19:08Z", "type": "commit"}, {"oid": "101961596ce0ea2687379555584635cabbc1183b", "url": "https://github.com/google/ground-android/commit/101961596ce0ea2687379555584635cabbc1183b", "message": "Revert removal of RxJava2Debug", "committedDate": "2020-01-09T14:29:12Z", "type": "commit"}, {"oid": "8c191f1c6adf3545c14bd1e57987b98fee8c664d", "url": "https://github.com/google/ground-android/commit/8c191f1c6adf3545c14bd1e57987b98fee8c664d", "message": "Move init of Rx error handler into application", "committedDate": "2020-01-09T14:29:32Z", "type": "commit"}, {"oid": "baae8e7586c837668d1dd9ac15a749b49a3486d2", "url": "https://github.com/google/ground-android/commit/baae8e7586c837668d1dd9ac15a749b49a3486d2", "message": "Fix PMD errors", "committedDate": "2020-01-09T14:58:42Z", "type": "commit"}]}