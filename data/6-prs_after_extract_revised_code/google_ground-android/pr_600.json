{"pr_number": 600, "pr_title": "[Polygon] Add support for rendering polygon Features", "pr_createdAt": "2020-10-22T11:59:40Z", "pr_url": "https://github.com/google/ground-android/pull/600", "timeline": [{"oid": "6dfa8fae557efd2801b0c729e12ccdaa77ac98a9", "url": "https://github.com/google/ground-android/commit/6dfa8fae557efd2801b0c729e12ccdaa77ac98a9", "message": "Cleanup GeoJsonParser\n\n * Replace Log with Timber\n * Separate file parsing & intersectingTiles", "committedDate": "2020-10-22T07:37:19Z", "type": "commit"}, {"oid": "839c3023f254de349c73b206898b66f14e282536", "url": "https://github.com/google/ground-android/commit/839c3023f254de349c73b206898b66f14e282536", "message": "Add GeoJsonFeature class", "committedDate": "2020-10-22T11:47:59Z", "type": "commit"}, {"oid": "de5570dcd31b93dfce72c1e5d57b48e61b10c543", "url": "https://github.com/google/ground-android/commit/de5570dcd31b93dfce72c1e5d57b48e61b10c543", "message": "Create abstract class for objects that need to be rendered", "committedDate": "2020-10-22T11:48:29Z", "type": "commit"}, {"oid": "2f70a4498362f4ca2f1cdca1b109bd723d48dd17", "url": "https://github.com/google/ground-android/commit/2f70a4498362f4ca2f1cdca1b109bd723d48dd17", "message": "Add MapPolygon type MapFeature", "committedDate": "2020-10-22T11:49:02Z", "type": "commit"}, {"oid": "669cd532c26720e7beea31e965b3c0accd5e5826", "url": "https://github.com/google/ground-android/commit/669cd532c26720e7beea31e965b3c0accd5e5826", "message": "Extend MapPin as MapFeature", "committedDate": "2020-10-22T11:49:29Z", "type": "commit"}, {"oid": "c1099c4e0c2dca22afc9227598a43553d3609b5a", "url": "https://github.com/google/ground-android/commit/c1099c4e0c2dca22afc9227598a43553d3609b5a", "message": "Add method for parsing all polygons from geojson", "committedDate": "2020-10-22T11:50:04Z", "type": "commit"}, {"oid": "7f90ad134cab4d5e7af63687502513743d529f80", "url": "https://github.com/google/ground-android/commit/7f90ad134cab4d5e7af63687502513743d529f80", "message": "Add parser for creating list of GeoJsonFeature", "committedDate": "2020-10-22T11:50:46Z", "type": "commit"}, {"oid": "f04b77bb9e9967b0f5501af14cbbbba2cab905b1", "url": "https://github.com/google/ground-android/commit/f04b77bb9e9967b0f5501af14cbbbba2cab905b1", "message": "Rename GeoJsonExtent to GeoJsonPolygon", "committedDate": "2020-10-22T11:51:06Z", "type": "commit"}, {"oid": "1cdd0ab1bb35bbf34a2ce30e3377197192210d9a", "url": "https://github.com/google/ground-android/commit/1cdd0ab1bb35bbf34a2ce30e3377197192210d9a", "message": "Add polygon model", "committedDate": "2020-10-22T11:51:32Z", "type": "commit"}, {"oid": "cd015fb5479f52e574c116f002eccde533241204", "url": "https://github.com/google/ground-android/commit/cd015fb5479f52e574c116f002eccde533241204", "message": "Add Polygon to Feature", "committedDate": "2020-10-22T11:51:51Z", "type": "commit"}, {"oid": "0c90200ea823121c007e5c05863683b098582a2f", "url": "https://github.com/google/ground-android/commit/0c90200ea823121c007e5c05863683b098582a2f", "message": "Add support for rendering/clearing polygons", "committedDate": "2020-10-22T11:52:31Z", "type": "commit"}, {"oid": "faf5a2ae3d367419459ba8b261c7d6542cce3c16", "url": "https://github.com/google/ground-android/commit/faf5a2ae3d367419459ba8b261c7d6542cce3c16", "message": "Update MapContainerFragment to display dummy polygons", "committedDate": "2020-10-22T11:52:51Z", "type": "commit"}, {"oid": "fddf358bdabeced07bd60dd1ff1eaa7ee39f0ca7", "url": "https://github.com/google/ground-android/commit/fddf358bdabeced07bd60dd1ff1eaa7ee39f0ca7", "message": "Add dummy data", "committedDate": "2020-10-22T11:53:00Z", "type": "commit"}, {"oid": "f84a76ef65d1083b72117367f4ff37fac3a39f93", "url": "https://github.com/google/ground-android/commit/f84a76ef65d1083b72117367f4ff37fac3a39f93", "message": "Add TODO", "committedDate": "2020-10-22T11:53:59Z", "type": "commit"}, {"oid": "2fd3468beb36c08541561122dbf0fe1e6d484fb8", "url": "https://github.com/google/ground-android/commit/2fd3468beb36c08541561122dbf0fe1e6d484fb8", "message": "Add GeoJson model", "committedDate": "2020-10-22T15:42:56Z", "type": "commit"}, {"oid": "35afbc5edd9ccda462934c2bcfb7fb9458f06511", "url": "https://github.com/google/ground-android/commit/35afbc5edd9ccda462934c2bcfb7fb9458f06511", "message": "Replace Polygon with GeoJson\n\nGeoJson can have multiple polygons", "committedDate": "2020-10-22T15:44:09Z", "type": "commit"}, {"oid": "3caed4bff4bcc49acdafdce336bba6d029d3b014", "url": "https://github.com/google/ground-android/commit/3caed4bff4bcc49acdafdce336bba6d029d3b014", "message": "Add GeoJson attribute to FeatureDocument", "committedDate": "2020-10-22T15:46:01Z", "type": "commit"}, {"oid": "e202754ef46d89fdccf6a35b596e69cfbc60dbe5", "url": "https://github.com/google/ground-android/commit/e202754ef46d89fdccf6a35b596e69cfbc60dbe5", "message": "Cleanup GeoJsonParser", "committedDate": "2020-10-22T15:46:31Z", "type": "commit"}, {"oid": "87806a29a800b4b10ffdc95a18e7bccc8f3d4d21", "url": "https://github.com/google/ground-android/commit/87806a29a800b4b10ffdc95a18e7bccc8f3d4d21", "message": "Parse GeoJson while converting FeatureDocument to Feature", "committedDate": "2020-10-22T15:47:33Z", "type": "commit"}, {"oid": "efdb77743994c6ea557016466fbe03daa851206d", "url": "https://github.com/google/ground-android/commit/efdb77743994c6ea557016466fbe03daa851206d", "message": "Add map features from geoJson in MapContainerViewModel", "committedDate": "2020-10-22T15:48:05Z", "type": "commit"}, {"oid": "fc6eba14bccda7662d5c82d4fdce0820df2cd41b", "url": "https://github.com/google/ground-android/commit/fc6eba14bccda7662d5c82d4fdce0820df2cd41b", "message": "Cleanup MapContainerFragment", "committedDate": "2020-10-22T15:48:46Z", "type": "commit"}, {"oid": "f58e8123630b86b6a4859929894ae4823e714877", "url": "https://github.com/google/ground-android/commit/f58e8123630b86b6a4859929894ae4823e714877", "message": "Save geojson to room db", "committedDate": "2020-10-22T16:14:52Z", "type": "commit"}, {"oid": "3ec91511ca21d8853caf4a776d9132afb9862b22", "url": "https://github.com/google/ground-android/commit/3ec91511ca21d8853caf4a776d9132afb9862b22", "message": "Convert string to geojson when needed", "committedDate": "2020-10-22T16:15:13Z", "type": "commit"}, {"oid": "5bc366055ee8b93585cbe554a2f6d7905dd7ad99", "url": "https://github.com/google/ground-android/commit/5bc366055ee8b93585cbe554a2f6d7905dd7ad99", "message": "Remove unused geojson samples", "committedDate": "2020-10-22T16:17:32Z", "type": "commit"}, {"oid": "ed8e0ad8339bc6a3782da1e20e68cce9f7cb1a4e", "url": "https://github.com/google/ground-android/commit/ed8e0ad8339bc6a3782da1e20e68cce9f7cb1a4e", "message": "Add license header", "committedDate": "2020-10-22T16:49:34Z", "type": "commit"}, {"oid": "681ad138ff287bf929b95221e16c77185b47a2a2", "url": "https://github.com/google/ground-android/commit/681ad138ff287bf929b95221e16c77185b47a2a2", "message": "Fix styling issues", "committedDate": "2020-10-22T16:52:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE1MDY5Mw==", "url": "https://github.com/google/ground-android/pull/600#discussion_r514150693", "bodyText": "This may be a good use of polymorphism, since PointFeature and GeoJsonFeature are mutually exclusive feature types. Wdyt?\nNote that I don't know whether we will want to support drawing of multi-polygons (vs one polygon per feature) in the future; imported GeoJson might be treated differently from polygons that can be edited in the UI (at least for now), which is why I suggested calling the subclass specifically GeoJsonFeature instead of something like MultiPolygonFeature.", "author": "gino-m", "createdAt": "2020-10-29T10:22:13Z", "path": "gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java", "diffHunk": "@@ -39,8 +52,12 @@\n   @Nullable\n   public abstract String getCaption();\n \n+  @Nullable", "originalCommit": "681ad138ff287bf929b95221e16c77185b47a2a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI2OTE1Mg==", "url": "https://github.com/google/ground-android/pull/600#discussion_r514269152", "bodyText": "This is what I went for in the first place. But then I realized that 'point' is a non-null property right now.\nSo this change cannot be made until point becomes optional wherever it is being used.", "author": "shobhitagarwal1612", "createdAt": "2020-10-29T13:45:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE1MDY5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMxNTMwNQ==", "url": "https://github.com/google/ground-android/pull/600#discussion_r514315305", "bodyText": "That's why I was suggesting subclassing Feature; PointFeature could have @NonNull getLocation(), and GeoJsonFeature could have @NonNull getPolygons(), for example. Would that work? Might require some changes here and there though, but it would allow us to enforce the presence of a point or polygon at compile time instead of runtime.", "author": "gino-m", "createdAt": "2020-10-29T14:45:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE1MDY5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "26e43ef8a5c3e94b27c557151323e5f343ffa555", "chunk": "diff --git a/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java b/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java\nindex 6949ae00..7c059de5 100644\n--- a/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java\n+++ b/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java\n\n@@ -52,7 +52,6 @@ public abstract class Feature {\n   @Nullable\n   public abstract String getCaption();\n \n-  @Nullable\n   public abstract Point getPoint();\n \n   @Nullable\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE1Mzc5Nw==", "url": "https://github.com/google/ground-android/pull/600#discussion_r514153797", "bodyText": "If we define this in a subclass of Feature, this accessor can be @NonNull. Same for getPoint.", "author": "gino-m", "createdAt": "2020-10-29T10:27:44Z", "path": "gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java", "diffHunk": "@@ -39,8 +52,12 @@\n   @Nullable\n   public abstract String getCaption();\n \n+  @Nullable\n   public abstract Point getPoint();\n \n+  @Nullable", "originalCommit": "681ad138ff287bf929b95221e16c77185b47a2a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI2OTIzOQ==", "url": "https://github.com/google/ground-android/pull/600#discussion_r514269239", "bodyText": "Same as above", "author": "shobhitagarwal1612", "createdAt": "2020-10-29T13:45:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE1Mzc5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "26e43ef8a5c3e94b27c557151323e5f343ffa555", "chunk": "diff --git a/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java b/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java\nindex 6949ae00..7c059de5 100644\n--- a/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java\n+++ b/gnd/src/main/java/com/google/android/gnd/model/feature/Feature.java\n\n@@ -52,7 +52,6 @@ public abstract class Feature {\n   @Nullable\n   public abstract String getCaption();\n \n-  @Nullable\n   public abstract Point getPoint();\n \n   @Nullable\n"}}, {"oid": "21f9bc07774e94046ee4c12c739d9f37be267c8f", "url": "https://github.com/google/ground-android/commit/21f9bc07774e94046ee4c12c739d9f37be267c8f", "message": "Merge branch 'master' into issue-534", "committedDate": "2020-10-29T12:33:34Z", "type": "commit"}, {"oid": "2b15ff40ed92ef72ef3a4e2dcb6b7631b3ad9304", "url": "https://github.com/google/ground-android/commit/2b15ff40ed92ef72ef3a4e2dcb6b7631b3ad9304", "message": "Add MapGeoJSON model and render GeoJSON using maps SDK", "committedDate": "2020-10-29T13:11:50Z", "type": "commit"}, {"oid": "1e0f052df93c6cc0a59f4066b49f5cd96af5e3f1", "url": "https://github.com/google/ground-android/commit/1e0f052df93c6cc0a59f4066b49f5cd96af5e3f1", "message": "Cleanup GeoJsonFeature and remove parser", "committedDate": "2020-10-29T13:17:09Z", "type": "commit"}, {"oid": "3673dc131d26a0be45dd059a7001ed0c30a864bd", "url": "https://github.com/google/ground-android/commit/3673dc131d26a0be45dd059a7001ed0c30a864bd", "message": "Remove GeoJson and Polygon models now that we don't have to parse GeoJSON string manually", "committedDate": "2020-10-29T13:20:52Z", "type": "commit"}, {"oid": "26e43ef8a5c3e94b27c557151323e5f343ffa555", "url": "https://github.com/google/ground-android/commit/26e43ef8a5c3e94b27c557151323e5f343ffa555", "message": "Revert nullability of Point", "committedDate": "2020-10-29T13:46:49Z", "type": "commit"}, {"oid": "1115ff9e4ef3a6123536f3e7b3251da27eaa1242", "url": "https://github.com/google/ground-android/commit/1115ff9e4ef3a6123536f3e7b3251da27eaa1242", "message": "Fix styling issues", "committedDate": "2020-10-29T16:38:11Z", "type": "commit"}]}