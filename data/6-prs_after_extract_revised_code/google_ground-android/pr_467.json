{"pr_number": 467, "pr_title": "[Feature details] Big cleanup of feature details / bottom sheet impl", "pr_createdAt": "2020-05-08T19:49:28Z", "pr_url": "https://github.com/google/ground-android/pull/467", "timeline": [{"oid": "5ce1f50035b4b36d75cf989b550653d8ba9b5911", "url": "https://github.com/google/ground-android/commit/5ce1f50035b4b36d75cf989b550653d8ba9b5911", "message": "Rename HomeSheetMetrics to more specific name", "committedDate": "2020-05-08T00:33:44Z", "type": "commit"}, {"oid": "e64bd8d293382f7955c421c8b8c59b28d7bda19f", "url": "https://github.com/google/ground-android/commit/e64bd8d293382f7955c421c8b8c59b28d7bda19f", "message": "Rename arg", "committedDate": "2020-05-08T00:42:48Z", "type": "commit"}, {"oid": "edf23cfe31ebba5bf4eef46c5f423337f6dc2627", "url": "https://github.com/google/ground-android/commit/edf23cfe31ebba5bf4eef46c5f423337f6dc2627", "message": "Rename onSheetScrolled for consistency with onDependentViewChanged", "committedDate": "2020-05-08T00:45:09Z", "type": "commit"}, {"oid": "3244418d5d148a2709a2fb1220b83cd6ec8e9b94", "url": "https://github.com/google/ground-android/commit/3244418d5d148a2709a2fb1220b83cd6ec8e9b94", "message": "Rename OnBottomSheetSlideBehavior to BottomSheetDependentBehavior", "committedDate": "2020-05-08T00:47:40Z", "type": "commit"}, {"oid": "0992a97a75f1b5b7a08a9bce4ba731a902c5a669", "url": "https://github.com/google/ground-android/commit/0992a97a75f1b5b7a08a9bce4ba731a902c5a669", "message": "Add JavaDoc", "committedDate": "2020-05-08T00:50:45Z", "type": "commit"}, {"oid": "f9eee7850e2316ee116ee971e4f2e19f260dd388", "url": "https://github.com/google/ground-android/commit/f9eee7850e2316ee116ee971e4f2e19f260dd388", "message": "Refactor and simplify bottom sheet transitions", "committedDate": "2020-05-08T18:59:11Z", "type": "commit"}, {"oid": "373d5a81ce641b192f2bf8ca574e08398597bea0", "url": "https://github.com/google/ground-android/commit/373d5a81ce641b192f2bf8ca574e08398597bea0", "message": "Refactor and simplify bottom sheet transitions", "committedDate": "2020-05-08T19:04:05Z", "type": "commit"}, {"oid": "9b481bcac34be1c4685e1a0776266a22a52b27bf", "url": "https://github.com/google/ground-android/commit/9b481bcac34be1c4685e1a0776266a22a52b27bf", "message": "Move BottomSheetChromeBehavior into featuresheet package for consistency with MapContainerLayoutBehavior", "committedDate": "2020-05-08T19:19:22Z", "type": "commit"}, {"oid": "292e0959ae83be5e1e7bd248626d6667ae4a6227", "url": "https://github.com/google/ground-android/commit/292e0959ae83be5e1e7bd248626d6667ae4a6227", "message": "Refactor map translation calc into metrics class", "committedDate": "2020-05-08T19:19:56Z", "type": "commit"}, {"oid": "7fc10ceebb5b0a40745868f6c43b04564558f480", "url": "https://github.com/google/ground-android/commit/7fc10ceebb5b0a40745868f6c43b04564558f480", "message": "Disambiguate feature sheet from bottom sheet by renaming \"feature details\"", "committedDate": "2020-05-08T19:46:54Z", "type": "commit"}, {"oid": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "url": "https://github.com/google/ground-android/commit/620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "message": "Simplify feature details icon implementation", "committedDate": "2020-05-08T19:59:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyNzcxOA==", "url": "https://github.com/google/ground-android/pull/467#discussion_r425127718", "bodyText": "Add high-level summary of what this class does", "author": "dturner", "createdAt": "2020-05-14T13:16:44Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.android.gnd.ui.home.featuredetails;\n+\n+import android.content.Context;\n+import android.util.AttributeSet;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import androidx.coordinatorlayout.widget.CoordinatorLayout;\n+import com.google.android.gnd.R;\n+import com.google.android.gnd.ui.home.BottomSheetDependentBehavior;\n+import com.google.android.gnd.ui.home.BottomSheetMetrics;\n+\n+public class FeatureDetailsChromeBehavior extends BottomSheetDependentBehavior<ViewGroup> {", "originalCommit": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "chunk": "diff --git a/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java b/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java\nindex f00ff083..30ecfac8 100644\n--- a/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java\n+++ b/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java\n\n@@ -25,6 +25,10 @@ import com.google.android.gnd.R;\n import com.google.android.gnd.ui.home.BottomSheetDependentBehavior;\n import com.google.android.gnd.ui.home.BottomSheetMetrics;\n \n+/**\n+ * Defines behavior of the feature details UI elements (bottom sheet and chrome) when the bottom\n+ * sheet is scrolled, collapsed, or expanded.\n+ */\n public class FeatureDetailsChromeBehavior extends BottomSheetDependentBehavior<ViewGroup> {\n   public FeatureDetailsChromeBehavior(Context context, AttributeSet attrs) {\n     super(context, attrs);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyODE5OQ==", "url": "https://github.com/google/ground-android/pull/467#discussion_r425128199", "bodyText": "Consider adding comment here to make it clear when this method will be called.", "author": "dturner", "createdAt": "2020-05-14T13:17:29Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.android.gnd.ui.home.featuredetails;\n+\n+import android.content.Context;\n+import android.util.AttributeSet;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import androidx.coordinatorlayout.widget.CoordinatorLayout;\n+import com.google.android.gnd.R;\n+import com.google.android.gnd.ui.home.BottomSheetDependentBehavior;\n+import com.google.android.gnd.ui.home.BottomSheetMetrics;\n+\n+public class FeatureDetailsChromeBehavior extends BottomSheetDependentBehavior<ViewGroup> {\n+  public FeatureDetailsChromeBehavior(Context context, AttributeSet attrs) {\n+    super(context, attrs);\n+  }\n+\n+  @Override\n+  protected void onBottomSheetChanged(", "originalCommit": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA1NDQ5MQ==", "url": "https://github.com/google/ground-android/pull/467#discussion_r426054491", "bodyText": "Added more JavaDoc to the base class. Is that sufficient / better than duplicating JavaDoc in multiple places? Note that the IDE is able to help here.", "author": "gino-m", "createdAt": "2020-05-15T21:25:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyODE5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "chunk": "diff --git a/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java b/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java\nindex f00ff083..30ecfac8 100644\n--- a/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java\n+++ b/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsChromeBehavior.java\n\n@@ -25,6 +25,10 @@ import com.google.android.gnd.R;\n import com.google.android.gnd.ui.home.BottomSheetDependentBehavior;\n import com.google.android.gnd.ui.home.BottomSheetMetrics;\n \n+/**\n+ * Defines behavior of the feature details UI elements (bottom sheet and chrome) when the bottom\n+ * sheet is scrolled, collapsed, or expanded.\n+ */\n public class FeatureDetailsChromeBehavior extends BottomSheetDependentBehavior<ViewGroup> {\n   public FeatureDetailsChromeBehavior(Context context, AttributeSet attrs) {\n     super(context, attrs);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyOTg3Mw==", "url": "https://github.com/google/ground-android/pull/467#discussion_r425129873", "bodyText": "Add comment explaining what FeatureDetails or reference another class so it's easy to find out what object this Fragment is representing", "author": "dturner", "createdAt": "2020-05-14T13:19:56Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsFragment.java", "diffHunk": "@@ -14,52 +14,49 @@\n  * limitations under the License.\n  */\n \n-package com.google.android.gnd.ui.home.featuresheet;\n+package com.google.android.gnd.ui.home.featuredetails;\n \n import android.os.Bundle;\n import android.view.LayoutInflater;\n import android.view.View;\n import android.view.ViewGroup;\n-import android.widget.ImageView;\n import androidx.annotation.NonNull;\n import androidx.annotation.Nullable;\n import androidx.core.view.WindowInsetsCompat;\n import butterknife.BindView;\n import com.google.android.gnd.MainViewModel;\n import com.google.android.gnd.R;\n-import com.google.android.gnd.databinding.FeatureSheetFragBinding;\n+import com.google.android.gnd.databinding.FeatureDetailsFragBinding;\n import com.google.android.gnd.ui.common.AbstractFragment;\n-import com.google.android.gnd.ui.home.FeatureSheetState;\n+import com.google.android.gnd.ui.home.BottomSheetState;\n import com.google.android.gnd.ui.home.HomeScreenViewModel;\n import javax.inject.Inject;\n \n-public class FeatureSheetFragment extends AbstractFragment {\n-\n-  @BindView(R.id.feature_header_icon)\n-  ImageView featureHeaderIcon;\n+public class FeatureDetailsFragment extends AbstractFragment {", "originalCommit": "620399f54dfbd9b77c3f1ec7088ad033d9e2b5e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA1NTM1MQ==", "url": "https://github.com/google/ground-android/pull/467#discussion_r426055351", "bodyText": "Adding JavaDoc here. In a follow-up PR, I hope to either move the header into this fragment, in which case its existence would be more reasonably justified. (It currently only contains the observation list).", "author": "gino-m", "createdAt": "2020-05-15T21:28:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEyOTg3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "chunk": "diff --git a/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsFragment.java b/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsFragment.java\nindex c038c415..1ec987e9 100644\n--- a/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsFragment.java\n+++ b/gnd/src/main/java/com/google/android/gnd/ui/home/featuredetails/FeatureDetailsFragment.java\n\n@@ -32,6 +32,7 @@ import com.google.android.gnd.ui.home.BottomSheetState;\n import com.google.android.gnd.ui.home.HomeScreenViewModel;\n import javax.inject.Inject;\n \n+/** Fragment containing the contents of the bottom sheet shown when a feature is selected. */\n public class FeatureDetailsFragment extends AbstractFragment {\n \n   @BindView(R.id.observation_list_container)\n"}}, {"oid": "57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "url": "https://github.com/google/ground-android/commit/57b0f79df9d412ee3e859c78b0bdf1933bcc44ad", "message": "Add missing JavaDoc", "committedDate": "2020-05-15T21:28:29Z", "type": "commit"}, {"oid": "7a4909df2c7624923b1a1d8ea2e6dcf4f582471f", "url": "https://github.com/google/ground-android/commit/7a4909df2c7624923b1a1d8ea2e6dcf4f582471f", "message": "Merge branch 'master' into feature-sheet-cleanup", "committedDate": "2020-05-18T16:07:59Z", "type": "commit"}]}