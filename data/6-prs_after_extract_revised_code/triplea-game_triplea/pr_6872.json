{"pr_number": 6872, "pr_title": "Use Streams in a functional way to create map", "pr_createdAt": "2020-06-26T19:25:44Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6872", "timeline": [{"oid": "cdcc66862635351f3401873fdcc40f3fe94226a8", "url": "https://github.com/triplea-game/triplea/commit/cdcc66862635351f3401873fdcc40f3fe94226a8", "message": "Use Streams to create map", "committedDate": "2020-06-26T19:24:30Z", "type": "commit"}, {"oid": "b8f3eef784662ea2bf96e4b071007e550f643604", "url": "https://github.com/triplea-game/triplea/commit/b8f3eef784662ea2bf96e4b071007e550f643604", "message": "Auto-Formatting", "committedDate": "2020-06-26T19:26:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM4MjI5Mg==", "url": "https://github.com/triplea-game/triplea/pull/6872#discussion_r446382292", "bodyText": "nit, have you considered extracting this to a function?\nOften streams are best when there is no or little body (eg; try to convert most of the blocks into method references).\nBeyond that, looks fine, feel free to update and merge. (I'll be AFK for a day or two).", "author": "DanVanAtta", "createdAt": "2020-06-26T19:57:24Z", "path": "game-core/src/main/java/org/triplea/game/server/AvailableGames.java", "diffHunk": "@@ -35,19 +36,22 @@\n   private final Map<String, URI> availableGames;\n \n   AvailableGames() {\n-    availableGames = Collections.synchronizedMap(new HashMap<>());\n-\n-    FileUtils.listFiles(ClientFileSystemHelper.getUserMapsFolder())\n-        .parallelStream()\n-        .forEach(\n-            map -> {\n-              log.info(\"Loading map: \" + map);\n-              if (map.isDirectory()) {\n-                availableGames.putAll(getGamesFromDirectory(map));\n-              } else if (map.isFile() && map.getName().toLowerCase().endsWith(ZIP_EXTENSION)) {\n-                availableGames.putAll(getGamesFromZip(map));\n-              }\n-            });\n+    availableGames =\n+        FileUtils.listFiles(ClientFileSystemHelper.getUserMapsFolder())\n+            .parallelStream()\n+            .<Map<String, URI>>map(\n+                map -> {", "originalCommit": "b8f3eef784662ea2bf96e4b071007e550f643604", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY5NTI3Mg==", "url": "https://github.com/triplea-game/triplea/pull/6872#discussion_r446695272", "bodyText": "@RoiEXLab I\"m not sure how much we really moved the needle on this one by getting rid of the forEach, in some ways the extra syntax introduced makes it perhaps only very marginal of an improvement:\n\n            .<Map<String, URI>>map(\n        .forEach(\n                map -> {\n\t\n\nI do think the big improvement would be to convert the lambda blocks to be method references. Though, at the end of the day having tests drive the design is probably even better.", "author": "DanVanAtta", "createdAt": "2020-06-28T20:36:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM4MjI5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY5ODg2OQ==", "url": "https://github.com/triplea-game/triplea/pull/6872#discussion_r446698869", "bodyText": "Ah, sorry for not replying, I wanted to extract it to a method (would also get rid of the explicit type parameters), but I simply just haven't got to it yet.\nWill follow up soon-ish", "author": "RoiEXLab", "createdAt": "2020-06-28T21:13:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjM4MjI5Mg=="}], "type": "inlineReview", "revised_code": null}]}