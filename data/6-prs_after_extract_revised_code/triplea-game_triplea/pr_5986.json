{"pr_number": 5986, "pr_title": "ClientMessenger refactoring", "pr_createdAt": "2020-02-29T13:08:23Z", "pr_url": "https://github.com/triplea-game/triplea/pull/5986", "timeline": [{"oid": "aab228f2f166b4be53d93b249fcb4633e7d6be65", "url": "https://github.com/triplea-game/triplea/commit/aab228f2f166b4be53d93b249fcb4633e7d6be65", "message": "Simplify ClientMessenger file logic", "committedDate": "2020-02-29T11:37:16Z", "type": "commit"}, {"oid": "5900e56effc7fd7c36d9a5860386dddb7cefeba1", "url": "https://github.com/triplea-game/triplea/commit/5900e56effc7fd7c36d9a5860386dddb7cefeba1", "message": "Use common remote mechanism", "committedDate": "2020-02-29T12:44:35Z", "type": "commit"}, {"oid": "b7c93eeb24c7cfe83bb806f866cd99d563717c1c", "url": "https://github.com/triplea-game/triplea/commit/b7c93eeb24c7cfe83bb806f866cd99d563717c1c", "message": "Move methods from IClientMessenger to IServerStartupRemote", "committedDate": "2020-02-29T12:55:12Z", "type": "commit"}, {"oid": "79f94148cd50739da68bece849defc2d547ea3b4", "url": "https://github.com/triplea-game/triplea/commit/79f94148cd50739da68bece849defc2d547ea3b4", "message": "Simplify method structure", "committedDate": "2020-02-29T12:56:38Z", "type": "commit"}, {"oid": "6bae6bbc054c81fcd3b3e72a5f6b5a2d71e0de56", "url": "https://github.com/triplea-game/triplea/commit/6bae6bbc054c81fcd3b3e72a5f6b5a2d71e0de56", "message": "Merge methods", "committedDate": "2020-02-29T12:59:15Z", "type": "commit"}, {"oid": "8020e36e14874aa6124cb45ec4ed50d812ff828d", "url": "https://github.com/triplea-game/triplea/commit/8020e36e14874aa6124cb45ec4ed50d812ff828d", "message": "Remove redundant logger", "committedDate": "2020-02-29T13:07:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyNzM1Ng==", "url": "https://github.com/triplea-game/triplea/pull/5986#discussion_r386027356", "bodyText": "This is a change I'm not sure is 100% safe, but it worked no problem so I didn't want to pass clientMessenger as well just for this null check", "author": "RoiEXLab", "createdAt": "2020-02-29T13:09:25Z", "path": "game-core/src/main/java/games/strategy/engine/framework/network/ui/SetMapClientAction.java", "diffHunk": "@@ -17,29 +16,28 @@\n \n   final List<String> availableGames;\n   private final Component parent;\n-  private final IClientMessenger clientMessenger;\n+  private final IServerStartupRemote serverStartupRemote;\n \n   public SetMapClientAction(\n       final Component parent,\n-      final IClientMessenger clientMessenger,\n+      final IServerStartupRemote serverStartupRemote,\n       final List<String> availableGames) {\n     super(\"Change Game To\");\n     this.parent = JOptionPane.getFrameForComponent(parent);\n-    this.clientMessenger = clientMessenger;\n+    this.serverStartupRemote = serverStartupRemote;\n     this.availableGames = availableGames;\n     Collections.sort(this.availableGames);\n   }\n \n   @Override\n   public void actionPerformed(final ActionEvent e) {\n-    final INode serverNode = clientMessenger.getServerNode();\n     final DefaultComboBoxModel<String> model = new DefaultComboBoxModel<>();\n     final JComboBox<String> combo = new JComboBox<>(model);\n     model.addElement(\"\");\n     for (final String game : availableGames) {\n       model.addElement(game);\n     }\n-    if (serverNode == null || model.getSize() <= 1) {\n+    if (model.getSize() <= 1) {", "originalCommit": "8020e36e14874aa6124cb45ec4ed50d812ff828d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "59ef1cf80758b82894bb0cef0d2734dcb36e0481", "chunk": "diff --git a/game-core/src/main/java/games/strategy/engine/framework/network/ui/SetMapClientAction.java b/game-core/src/main/java/games/strategy/engine/framework/network/ui/SetMapClientAction.java\nindex fedc24128..ffbba8d5e 100644\n--- a/game-core/src/main/java/games/strategy/engine/framework/network/ui/SetMapClientAction.java\n+++ b/game-core/src/main/java/games/strategy/engine/framework/network/ui/SetMapClientAction.java\n\n@@ -31,17 +31,15 @@ public class SetMapClientAction extends AbstractAction {\n \n   @Override\n   public void actionPerformed(final ActionEvent e) {\n-    final DefaultComboBoxModel<String> model = new DefaultComboBoxModel<>();\n-    final JComboBox<String> combo = new JComboBox<>(model);\n-    model.addElement(\"\");\n-    for (final String game : availableGames) {\n-      model.addElement(game);\n-    }\n-    if (model.getSize() <= 1) {\n+    if (availableGames.isEmpty()) {\n       JOptionPane.showMessageDialog(\n-          parent, \"No available games\", \"No available games\", JOptionPane.ERROR_MESSAGE);\n+              parent, \"No available games\", \"No available games\", JOptionPane.ERROR_MESSAGE);\n       return;\n     }\n+    final DefaultComboBoxModel<String> model = new DefaultComboBoxModel<>();\n+    final JComboBox<String> combo = new JComboBox<>(model);\n+    model.addElement(\"\");\n+    model.addAll(availableGames);\n     final int selectedOption =\n         JOptionPane.showConfirmDialog(\n             parent, combo, \"Change Game To: \", JOptionPane.OK_CANCEL_OPTION);\n"}}, {"oid": "59ef1cf80758b82894bb0cef0d2734dcb36e0481", "url": "https://github.com/triplea-game/triplea/commit/59ef1cf80758b82894bb0cef0d2734dcb36e0481", "message": "Simplify UI code", "committedDate": "2020-02-29T14:26:27Z", "type": "commit"}, {"oid": "87c3072f9bfcad181a535d0e2b22cac982472835", "url": "https://github.com/triplea-game/triplea/commit/87c3072f9bfcad181a535d0e2b22cac982472835", "message": "Auto-Formatting", "committedDate": "2020-02-29T14:28:38Z", "type": "commit"}, {"oid": "f51b5a0c666bf2d932f5f869f7140c7c4309f6b4", "url": "https://github.com/triplea-game/triplea/commit/f51b5a0c666bf2d932f5f869f7140c7c4309f6b4", "message": "Remove redundant length check", "committedDate": "2020-02-29T14:33:22Z", "type": "commit"}]}