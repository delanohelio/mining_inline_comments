{"pr_number": 6177, "pr_title": "Apply not nice username checks", "pr_createdAt": "2020-04-11T04:02:42Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6177", "timeline": [{"oid": "6addd4ece79f842d278eea17299deab362db59c5", "url": "https://github.com/triplea-game/triplea/commit/6addd4ece79f842d278eea17299deab362db59c5", "message": "Validate usernames do not match banned usernames or bad words\n\nThis update:\n- adds name validation to login, (it was already present\n  for account creation). Name validation asserts that\n  a given name does not contain a bad word.\n- adds banned username check to name validation. This check\n  verifies that a given name does not match a banned username.", "committedDate": "2020-04-11T03:58:18Z", "type": "commit"}, {"oid": "628a59a6b584e098582e7587ce9d92f80cb8480c", "url": "https://github.com/triplea-game/triplea/commit/628a59a6b584e098582e7587ce9d92f80cb8480c", "message": "Split username is already taken check from login\n\nIf we check if a username is already taken when doing\na registered login, we will see the name is always taken!\nThis update removes the username is already taken check\nfrom username validation and moves the check to anonymous\nlogin and user registration.", "committedDate": "2020-04-11T03:58:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MjU3Nw==", "url": "https://github.com/triplea-game/triplea/pull/6177#discussion_r407072577", "bodyText": "Is this method still unused?", "author": "RoiEXLab", "createdAt": "2020-04-11T14:50:36Z", "path": "http-server/src/main/java/org/triplea/modules/user/account/login/LoginModule.java", "diffHunk": "@@ -108,7 +116,6 @@ private ApiKey recordAnonymousLoginAndGenerateApiKey(\n     return recordLoginAndGenerateApiKey(loginRequest, systemId, playerChatId, ip, false);\n   }\n \n-  // TODO: Project#12 also update access log\n   @SuppressWarnings(\"unused\")", "originalCommit": "6addd4ece79f842d278eea17299deab362db59c5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExMDY2Mg==", "url": "https://github.com/triplea-game/triplea/pull/6177#discussion_r407110662", "bodyText": "Looks like no, not sure how long the suppression was out of date for, looks like perhaps for some time.", "author": "DanVanAtta", "createdAt": "2020-04-11T21:01:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MjU3Nw=="}], "type": "inlineReview", "revised_code": {"commit": "3ce5392103ac3f629dbab836f85b662a5355a09d", "chunk": "diff --git a/http-server/src/main/java/org/triplea/modules/user/account/login/LoginModule.java b/http-server/src/main/java/org/triplea/modules/user/account/login/LoginModule.java\nindex 7e80cb676..20fced67a 100644\n--- a/http-server/src/main/java/org/triplea/modules/user/account/login/LoginModule.java\n+++ b/http-server/src/main/java/org/triplea/modules/user/account/login/LoginModule.java\n\n@@ -116,7 +116,6 @@ class LoginModule {\n     return recordLoginAndGenerateApiKey(loginRequest, systemId, playerChatId, ip, false);\n   }\n \n-  @SuppressWarnings(\"unused\")\n   private ApiKey recordLoginAndGenerateApiKey(\n       final LoginRequest loginRequest,\n       final SystemId systemId,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3Mjg0NQ==", "url": "https://github.com/triplea-game/triplea/pull/6177#discussion_r407072845", "bodyText": "I have the sneaking suspicion you forgot to remove this class \ud83d\ude09", "author": "RoiEXLab", "createdAt": "2020-04-11T14:52:59Z", "path": "http-server/src/main/java/org/triplea/modules/user/account/login/authorizer/anonymous/AnonymousLoginFactory.java", "diffHunk": "@@ -1,21 +1,6 @@\n package org.triplea.modules.user.account.login.authorizer.anonymous;\n \n-import java.util.Optional;\n-import java.util.function.Function;\n import lombok.experimental.UtilityClass;\n-import org.jdbi.v3.core.Jdbi;\n-import org.triplea.db.dao.UserJdbiDao;\n-import org.triplea.domain.data.UserName;\n-import org.triplea.modules.chat.Chatters;\n \n @UtilityClass\n-public class AnonymousLoginFactory {\n-\n-  public static Function<UserName, Optional<String>> build(\n-      final Jdbi jdbi, final Chatters chatters) {\n-    return AnonymousLogin.builder()\n-        .chatters(chatters)\n-        .userJdbiDao(jdbi.onDemand(UserJdbiDao.class))\n-        .build();\n-  }\n-}\n+public class AnonymousLoginFactory {}", "originalCommit": "628a59a6b584e098582e7587ce9d92f80cb8480c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExMDc2Mg==", "url": "https://github.com/triplea-game/triplea/pull/6177#discussion_r407110762", "bodyText": "Twice even \ud83d\ude01\nWas also missed earlier when we updated factory class pattern to be factory methods.", "author": "DanVanAtta", "createdAt": "2020-04-11T21:03:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3Mjg0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "3ce5392103ac3f629dbab836f85b662a5355a09d", "chunk": "diff --git a/http-server/src/main/java/org/triplea/modules/user/account/login/authorizer/anonymous/AnonymousLoginFactory.java b/http-server/src/main/java/org/triplea/modules/user/account/login/authorizer/anonymous/AnonymousLoginFactory.java\ndeleted file mode 100644\nindex 0deb277c7..000000000\n--- a/http-server/src/main/java/org/triplea/modules/user/account/login/authorizer/anonymous/AnonymousLoginFactory.java\n+++ /dev/null\n\n@@ -1,6 +0,0 @@\n-package org.triplea.modules.user.account.login.authorizer.anonymous;\n-\n-import lombok.experimental.UtilityClass;\n-\n-@UtilityClass\n-public class AnonymousLoginFactory {}\n"}}, {"oid": "3ce5392103ac3f629dbab836f85b662a5355a09d", "url": "https://github.com/triplea-game/triplea/commit/3ce5392103ac3f629dbab836f85b662a5355a09d", "message": "Delete unused class and remove out of date warning suppression", "committedDate": "2020-04-11T21:01:08Z", "type": "commit"}]}