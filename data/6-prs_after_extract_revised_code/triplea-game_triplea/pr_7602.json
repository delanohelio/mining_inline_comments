{"pr_number": 7602, "pr_title": "Fix: Disable audio if there is no audio device", "pr_createdAt": "2020-09-10T08:18:27Z", "pr_url": "https://github.com/triplea-game/triplea/pull/7602", "timeline": [{"oid": "fced270ae2febf2fe6e2fc7dfb7a0352480e1e64", "url": "https://github.com/triplea-game/triplea/commit/fced270ae2febf2fe6e2fc7dfb7a0352480e1e64", "message": "Fix: Disable audio if there is no audio device", "committedDate": "2020-09-10T08:15:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2ODIzNA==", "url": "https://github.com/triplea-game/triplea/pull/7602#discussion_r487068234", "bodyText": "Not sure if I consider this a satisfying solution but better than a weird exception.", "author": "RoiEXLab", "createdAt": "2020-09-11T14:05:45Z", "path": "game-core/src/main/java/org/triplea/sound/ClipPlayer.java", "diffHunk": "@@ -134,6 +139,18 @@ private ClipPlayer(final ResourceLoader resourceLoader) {\n     }\n   }\n \n+  private static AudioDevice createAudio() {\n+    try {\n+      return FactoryRegistry.systemRegistry().createAudioDevice();\n+    } catch (final JavaLayerException e) {\n+      log.log(\n+          Level.INFO,\n+          \"Unable to create audio device, is there audio on the system? \" + e.getMessage(),\n+          e);\n+      return null;", "originalCommit": "fced270ae2febf2fe6e2fc7dfb7a0352480e1e64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI3NDg3Mg==", "url": "https://github.com/triplea-game/triplea/pull/7602#discussion_r487274872", "bodyText": "Not all systems are going to have audio at all, if that is the case disabling audio features and adding tooltips stating \"you don't have audio, so we disabled audio\" I think is about the best we can do. The 'info' level will be background and users will typically never see it, the tooltip being displayed thus is quite important.\nCan you think of any thing more comprehensive that we could do, or do you have other thoughts on how we could or shoudl handle this? @RoiEXLab\nWe had a series of such error reports in a row, so it seems like the user was getting spammed with error messages every time the game tried to play a sound.", "author": "DanVanAtta", "createdAt": "2020-09-11T20:29:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2ODIzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM2MDAzOA==", "url": "https://github.com/triplea-game/triplea/pull/7602#discussion_r487360038", "bodyText": "Nah, I was mostly thinking about the API. I just think it's weird that an exception is thrown to control the flow", "author": "RoiEXLab", "createdAt": "2020-09-12T03:14:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2ODIzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM4Njg4NA==", "url": "https://github.com/triplea-game/triplea/pull/7602#discussion_r487386884", "bodyText": "It's a little weird to see an exception handled and  'null' returned  rather than 'optional' returned too , speaking of API \ud83d\ude01\nI think I'm starting to come to a pattern where an optional return value means we have either an exception that is handled (no logging needed, it is all already done) and/or a nulllable return value; in those cases getting an optional back has seemed quite clean (so no logging when you get an empty optional back, just assume that it's all been handled already).", "author": "DanVanAtta", "createdAt": "2020-09-12T08:47:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA2ODIzNA=="}], "type": "inlineReview", "revised_code": null}]}