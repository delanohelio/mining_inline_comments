{"pr_number": 1857, "pr_title": "New validation rule: unique_argument_names", "pr_createdAt": "2020-04-10T18:58:54Z", "pr_url": "https://github.com/graphql-java/graphql-java/pull/1857", "timeline": [{"oid": "610a3cde989b0bf49324cbd6724a263e5d103364", "url": "https://github.com/graphql-java/graphql-java/commit/610a3cde989b0bf49324cbd6724a263e5d103364", "message": "unique_argument_names", "committedDate": "2020-04-11T07:50:34Z", "type": "forcePushed"}, {"oid": "0856ab4b52d5336dbd4c341f40e853dd1eee4f34", "url": "https://github.com/graphql-java/graphql-java/commit/0856ab4b52d5336dbd4c341f40e853dd1eee4f34", "message": "unique_argument_names", "committedDate": "2020-04-11T08:00:50Z", "type": "forcePushed"}, {"oid": "8439c24fee6b746c9fe3e27897a368b1b79b1ad0", "url": "https://github.com/graphql-java/graphql-java/commit/8439c24fee6b746c9fe3e27897a368b1b79b1ad0", "message": "unique_argument_names", "committedDate": "2020-04-11T08:03:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwODY1MA==", "url": "https://github.com/graphql-java/graphql-java/pull/1857#discussion_r409908650", "bodyText": "sizing collections is almost never needed.  but easier to read code is.\nI wont say not to this PR because of this but its not needed", "author": "bbakerman", "createdAt": "2020-04-16T23:36:03Z", "path": "src/main/java/graphql/validation/rules/UniqueArgumentNamesRule.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package graphql.validation.rules;\n+\n+import graphql.language.Argument;\n+import graphql.language.Directive;\n+import graphql.language.Field;\n+import graphql.language.Node;\n+import graphql.validation.AbstractRule;\n+import graphql.validation.ValidationContext;\n+import graphql.validation.ValidationErrorCollector;\n+import graphql.validation.ValidationErrorType;\n+\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+\n+/**\n+ * Unique argument names\n+ *\n+ * A GraphQL field or directive is only valid if all supplied arguments are uniquely named.\n+ */\n+public class UniqueArgumentNamesRule extends AbstractRule {\n+    public UniqueArgumentNamesRule(ValidationContext validationContext, ValidationErrorCollector validationErrorCollector) {\n+        super(validationContext, validationErrorCollector);\n+    }\n+\n+    @Override\n+    public void checkField(Field field) {\n+        if(field.getArguments()==null||field.getArguments().size()<=1){\n+            return;\n+        }\n+\n+        Set<String> arguments=new HashSet<>(field.getArguments().size());", "originalCommit": "8439c24fee6b746c9fe3e27897a368b1b79b1ad0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM2MzAwMg==", "url": "https://github.com/graphql-java/graphql-java/pull/1857#discussion_r410363002", "bodyText": "sizing collections is in order to avoid the cost for resize() in HashMap/HashSet, but I haven took loadFactor into consideration. In fact, I want to init Map:\n  int capacity = (int) (field.getArguments().size() / 0.75 + 1);\n\nBut default capacity of HashMap is enough in most case, I will remove this and make it clear.\nThanks for your code review .", "author": "dugenkui03", "createdAt": "2020-04-17T17:21:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwODY1MA=="}], "type": "inlineReview", "revised_code": {"commit": "c017c1800ecd4eb6535c5c54310ebcd790e7964e", "chunk": "diff --git a/src/main/java/graphql/validation/rules/UniqueArgumentNamesRule.java b/src/main/java/graphql/validation/rules/UniqueArgumentNamesRule.java\nindex fd0834f8..f0d02b5a 100644\n--- a/src/main/java/graphql/validation/rules/UniqueArgumentNamesRule.java\n+++ b/src/main/java/graphql/validation/rules/UniqueArgumentNamesRule.java\n\n@@ -29,7 +29,7 @@ public class UniqueArgumentNamesRule extends AbstractRule {\n             return;\n         }\n \n-        Set<String> arguments=new HashSet<>(field.getArguments().size());\n+        Set<String> arguments=new HashSet<>();\n \n         for (Argument argument : field.getArguments()) {\n             if(arguments.contains(argument.getName())){\n"}}, {"oid": "c017c1800ecd4eb6535c5c54310ebcd790e7964e", "url": "https://github.com/graphql-java/graphql-java/commit/c017c1800ecd4eb6535c5c54310ebcd790e7964e", "message": "unique_argument_names", "committedDate": "2020-04-17T17:23:40Z", "type": "commit"}, {"oid": "c017c1800ecd4eb6535c5c54310ebcd790e7964e", "url": "https://github.com/graphql-java/graphql-java/commit/c017c1800ecd4eb6535c5c54310ebcd790e7964e", "message": "unique_argument_names", "committedDate": "2020-04-17T17:23:40Z", "type": "forcePushed"}, {"oid": "91b0c13e36178d3d86e2f664575b3abb86abef56", "url": "https://github.com/graphql-java/graphql-java/commit/91b0c13e36178d3d86e2f664575b3abb86abef56", "message": "formatting the code", "committedDate": "2020-05-20T04:35:09Z", "type": "commit"}, {"oid": "e2b917c597085862fb9e82af1f2f892e49f96902", "url": "https://github.com/graphql-java/graphql-java/commit/e2b917c597085862fb9e82af1f2f892e49f96902", "message": "fix conflict and format the code", "committedDate": "2020-05-20T05:17:02Z", "type": "commit"}]}