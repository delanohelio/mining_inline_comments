{"pr_number": 19643, "pr_title": "Issue 19275 add get token option to add end point screen", "pr_createdAt": "2020-12-02T15:47:55Z", "pr_url": "https://github.com/dotCMS/core/pull/19643", "timeline": [{"oid": "5cd6a668cb4ec2d12e9e60442129e789f4bb9342", "url": "https://github.com/dotCMS/core/commit/5cd6a668cb4ec2d12e9e60442129e789f4bb9342", "message": "19275 Add get token option in add end p[oint screen", "committedDate": "2020-11-23T13:45:29Z", "type": "commit"}, {"oid": "17ab8d80030eb03986306be5ac48e08efe10f1eb", "url": "https://github.com/dotCMS/core/commit/17ab8d80030eb03986306be5ac48e08efe10f1eb", "message": "Removing unneccesary code", "committedDate": "2020-12-01T15:25:02Z", "type": "commit"}, {"oid": "78250b369b416ee60c358af539335c9824de4d29", "url": "https://github.com/dotCMS/core/commit/78250b369b416ee60c358af539335c9824de4d29", "message": "Fixing some errors", "committedDate": "2020-12-02T14:55:39Z", "type": "commit"}, {"oid": "8373a893dd4c7b0aaf0c90ddb0e56c96b5400b4d", "url": "https://github.com/dotCMS/core/commit/8373a893dd4c7b0aaf0c90ddb0e56c96b5400b4d", "message": "Merge remote-tracking branch 'origin/master' into issue-19275-Add-Get-token-option-to-Add-End-point-screen", "committedDate": "2020-12-02T14:56:11Z", "type": "commit"}, {"oid": "2140dab5181aee86080b61d463fb0152f6882c65", "url": "https://github.com/dotCMS/core/commit/2140dab5181aee86080b61d463fb0152f6882c65", "message": "#19275 Test and some fixing", "committedDate": "2020-12-02T15:47:24Z", "type": "commit"}, {"oid": "21c66015c59457f516a618b6f1811c7b58688c6a", "url": "https://github.com/dotCMS/core/commit/21c66015c59457f516a618b6f1811c7b58688c6a", "message": "#19275 Testing", "committedDate": "2020-12-02T15:53:51Z", "type": "commit"}, {"oid": "915c9c11c0425993b443ee42e04ecfec6fb3e351", "url": "https://github.com/dotCMS/core/commit/915c9c11c0425993b443ee42e04ecfec6fb3e351", "message": "fixing teset", "committedDate": "2020-12-02T21:50:25Z", "type": "commit"}, {"oid": "30fc4aa44b439d46b97e3049f401549f73b23e9b", "url": "https://github.com/dotCMS/core/commit/30fc4aa44b439d46b97e3049f401549f73b23e9b", "message": "Adding description to the test", "committedDate": "2020-12-03T13:29:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0OTkyNA==", "url": "https://github.com/dotCMS/core/pull/19643#discussion_r535349924", "bodyText": "Rename this to form instead of from", "author": "dsilvam", "createdAt": "2020-12-03T15:45:49Z", "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenFrom.java", "diffHunk": "@@ -0,0 +1,96 @@\n+package com.dotcms.rest.api.v1.authentication;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+import com.google.common.collect.ImmutableMap;\n+\n+import java.util.Map;\n+\n+import static com.dotcms.util.CollectionsUtils.map;\n+\n+@JsonDeserialize(builder = RemoteAPITokenFrom.Builder.class)\n+public class RemoteAPITokenFrom {", "originalCommit": "30fc4aa44b439d46b97e3049f401549f73b23e9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM1OTYwNg==", "url": "https://github.com/dotCMS/core/pull/19643#discussion_r535359606", "bodyText": "done 0c8f847#diff-22a926c9d121c69fa55d7a1e39a2619e9371629fd92f245bf0f416b74690bdbbR11", "author": "freddyucv", "createdAt": "2020-12-03T15:55:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0OTkyNA=="}], "type": "inlineReview", "revised_code": {"commit": "0c8f8477e3a1c3d9654944171e3904c4f27b06e0", "chunk": "diff --git a/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenFrom.java b/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenForm.java\nsimilarity index 82%\nrename from dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenFrom.java\nrename to dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenForm.java\nindex 7cc8aeecb3..a4d7de8956 100644\n--- a/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenFrom.java\n+++ b/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/RemoteAPITokenForm.java\n\n@@ -2,19 +2,18 @@ package com.dotcms.rest.api.v1.authentication;\n \n import com.fasterxml.jackson.annotation.JsonProperty;\n import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n-import com.google.common.collect.ImmutableMap;\n \n import java.util.Map;\n \n import static com.dotcms.util.CollectionsUtils.map;\n \n-@JsonDeserialize(builder = RemoteAPITokenFrom.Builder.class)\n-public class RemoteAPITokenFrom {\n+@JsonDeserialize(builder = RemoteAPITokenForm.Builder.class)\n+public class RemoteAPITokenForm {\n     private TokenInfo token;\n     private RemoteHostInfo remoteHostInfo;\n     private AuthInfo authInfo;\n \n-    private RemoteAPITokenFrom( Builder builder) {\n+    private RemoteAPITokenForm(Builder builder) {\n         this.token = builder.getToken();\n         this.remoteHostInfo = builder.getRemoteHostInfo();\n         this.authInfo = builder.getAuthInfo();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM1MzQxMA==", "url": "https://github.com/dotCMS/core/pull/19643#discussion_r535353410", "bodyText": "This shouldn't have the _ prefix, because it's not an operation.", "author": "dsilvam", "createdAt": "2020-12-03T15:49:02Z", "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/ApiTokenResource.java", "diffHunk": "@@ -196,7 +207,68 @@ public final Response issueApiToken(@Context final HttpServletRequest request,\n         return Response.ok(new ResponseEntityView(map(\"token\", token,\"jwt\", jwt), EMPTY_MAP)).build(); // 200\n     }\n \n-    \n+    /**\n+     * Request a Token to a remote server\n+     * @param request\n+     * @param response\n+     * @param formData - json data, expecting\n+     * <pre>\n+     * {\n+     *    token: {\n+     *      netmask:'192.168.1.0/24',\n+     *      expirationDays:1000,\n+     *      userId:'dotcms.org.1'\n+     *      claims: {\n+     *          label: 'Push Publish'\n+     *      }\n+     *    },\n+     * \t  remote: {\n+     * \t    host: localhost,\n+     * \t\tport: 8090\n+     * \t  },\n+     * \t  auth: {\n+     * \t    login: admin@dotcms.com,\n+     * \t\tpasword: [password in Base64]\n+     * \t  }\n+     * }\n+     * </pre>\n+     * @return Response\n+     */\n+    @PUT\n+    @Path(\"/_remote\")", "originalCommit": "30fc4aa44b439d46b97e3049f401549f73b23e9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM1OTMyNQ==", "url": "https://github.com/dotCMS/core/pull/19643#discussion_r535359325", "bodyText": "done 0c8f847#diff-63fbac6d5f8fa5e3ac1967d35356f34c1bc23b815139fb0d40c17398ac3d5554R234", "author": "freddyucv", "createdAt": "2020-12-03T15:55:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM1MzQxMA=="}], "type": "inlineReview", "revised_code": {"commit": "0c8f8477e3a1c3d9654944171e3904c4f27b06e0", "chunk": "diff --git a/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/ApiTokenResource.java b/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/ApiTokenResource.java\nindex e370e5a90d..56a48be236 100644\n--- a/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/ApiTokenResource.java\n+++ b/dotCMS/src/main/java/com/dotcms/rest/api/v1/authentication/ApiTokenResource.java\n\n@@ -235,14 +231,14 @@ public class ApiTokenResource implements Serializable {\n      * @return Response\n      */\n     @PUT\n-    @Path(\"/_remote\")\n+    @Path(\"/remote\")\n     @JSONP\n     @NoCache\n     @Consumes(MediaType.APPLICATION_JSON)\n     @Produces({MediaType.APPLICATION_JSON, \"application/javascript\"})\n     public final Response getRemoteToken(@Context final HttpServletRequest request,\n                                         @Context final HttpServletResponse response,\n-                                        final RemoteAPITokenFrom formData) {\n+                                        final RemoteAPITokenForm formData) {\n \n         final InitDataObject initDataObject = this.webResource.init(null, true, request, true, null);\n \n"}}, {"oid": "0c8f8477e3a1c3d9654944171e3904c4f27b06e0", "url": "https://github.com/dotCMS/core/commit/0c8f8477e3a1c3d9654944171e3904c4f27b06e0", "message": "#19275 refactoring", "committedDate": "2020-12-03T15:54:41Z", "type": "commit"}, {"oid": "0122ddfbd99ceaa1273a22677cbcc3758cbace28", "url": "https://github.com/dotCMS/core/commit/0122ddfbd99ceaa1273a22677cbcc3758cbace28", "message": "changing url", "committedDate": "2020-12-03T16:15:15Z", "type": "commit"}, {"oid": "afb798aa2894869ec3185473ef8cc458c926a1ef", "url": "https://github.com/dotCMS/core/commit/afb798aa2894869ec3185473ef8cc458c926a1ef", "message": "fixing ui", "committedDate": "2020-12-03T16:25:16Z", "type": "commit"}, {"oid": "b57502f816092efd9e3f6868b21516b30e83e462", "url": "https://github.com/dotCMS/core/commit/b57502f816092efd9e3f6868b21516b30e83e462", "message": "Merge branch 'issue-19275-Add-Get-token-option-to-Add-End-point-screen' of https://github.com/dotCMS/core into issue-19275-Add-Get-token-option-to-Add-End-point-screen", "committedDate": "2020-12-03T16:25:20Z", "type": "commit"}, {"oid": "e3e152d941da38c263976fa03ef26be320ed329f", "url": "https://github.com/dotCMS/core/commit/e3e152d941da38c263976fa03ef26be320ed329f", "message": "#19275 minor styling issues", "committedDate": "2020-12-03T16:45:22Z", "type": "commit"}, {"oid": "6557fcdd1d281f20fa0189d3ec416722bd4d136c", "url": "https://github.com/dotCMS/core/commit/6557fcdd1d281f20fa0189d3ec416722bd4d136c", "message": "#19275 minor styling issues", "committedDate": "2020-12-03T16:50:39Z", "type": "commit"}, {"oid": "d4344a36e2dcf4dabc92cd81480bba604f0f5afc", "url": "https://github.com/dotCMS/core/commit/d4344a36e2dcf4dabc92cd81480bba604f0f5afc", "message": "#19275 Add ENABLE_PROXY_TOKEN_REQUESTS to disabled the remote token", "committedDate": "2020-12-03T18:27:14Z", "type": "commit"}]}