{"pr_number": 18326, "pr_title": "#18294 changing the message when file asset has invalid size", "pr_createdAt": "2020-04-20T19:10:15Z", "pr_url": "https://github.com/dotCMS/core/pull/18326", "timeline": [{"oid": "b56a26af1d3b934a6f210d0789454b57ca15cd6b", "url": "https://github.com/dotCMS/core/commit/b56a26af1d3b934a6f210d0789454b57ca15cd6b", "message": "#18294 changing the message when file asset has invalid size", "committedDate": "2020-04-20T19:08:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4ODc1MA==", "url": "https://github.com/dotCMS/core/pull/18326#discussion_r412288750", "bodyText": "We need to add the offending file name and the maxsize to the message so the user can fix the situation.\nFile {0) exceeds the maximum file size of {1}", "author": "wezell", "createdAt": "2020-04-21T15:31:16Z", "path": "dotCMS/src/main/java/com/dotcms/content/elasticsearch/business/ESContentletAPIImpl.java", "diffHunk": "@@ -6350,7 +6350,7 @@ private void validateBinary(final File binary, final String fieldName, final Fie\n                         if (-1 != maxLength && // if the user sets a valid value\n                                 fileLength > maxLength) {\n \n-                            final DotContentletValidationException cve = new DotContentletValidationException(Sneaky.sneak(()->LanguageUtil.get(\"message.contentlet.binary.invalidlength\")));\n+                            final DotContentletValidationException cve = new DotContentletValidationException(Sneaky.sneak(()->LanguageUtil.get(\"message.contentlet.binary.file.exceeds.size\")));", "originalCommit": "b56a26af1d3b934a6f210d0789454b57ca15cd6b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "29db5dfd06cc39c1ab545e757d792e81066b83a3", "chunk": "diff --git a/dotCMS/src/main/java/com/dotcms/content/elasticsearch/business/ESContentletAPIImpl.java b/dotCMS/src/main/java/com/dotcms/content/elasticsearch/business/ESContentletAPIImpl.java\nindex df180c6530..818412e5fc 100644\n--- a/dotCMS/src/main/java/com/dotcms/content/elasticsearch/business/ESContentletAPIImpl.java\n+++ b/dotCMS/src/main/java/com/dotcms/content/elasticsearch/business/ESContentletAPIImpl.java\n\n@@ -6350,7 +6350,9 @@ public class ESContentletAPIImpl implements ContentletAPI {\n                         if (-1 != maxLength && // if the user sets a valid value\n                                 fileLength > maxLength) {\n \n-                            final DotContentletValidationException cve = new DotContentletValidationException(Sneaky.sneak(()->LanguageUtil.get(\"message.contentlet.binary.file.exceeds.size\")));\n+                            final DotContentletValidationException cve =\n+                                    new DotContentletValidationException(\n+                                            Sneaky.sneak(()->LanguageUtil.get(\"message.contentlet.binary.file.exceeds.size\", binary.getName(), maxLengthString)));\n                             Logger.warn(this, \"Name of Binary field [\" + fieldName + \"] has a length: \" + fileLength\n                                     + \" but the max length is: \" + maxLength);\n                             cve.addBadTypeField(legacyField);\n"}}, {"oid": "29db5dfd06cc39c1ab545e757d792e81066b83a3", "url": "https://github.com/dotCMS/core/commit/29db5dfd06cc39c1ab545e757d792e81066b83a3", "message": "#18294 message is now rendered with more information", "committedDate": "2020-04-21T18:20:31Z", "type": "commit"}, {"oid": "20eae4dd5cafe97c10c2b7bbdbd3ad0b447e8141", "url": "https://github.com/dotCMS/core/commit/20eae4dd5cafe97c10c2b7bbdbd3ad0b447e8141", "message": "#18294 adding the bytes, kb, mb, etc to the maxlength on the msg", "committedDate": "2020-04-21T20:01:56Z", "type": "commit"}, {"oid": "b73ba470f94597ab99ba5c57d56d8465193ed983", "url": "https://github.com/dotCMS/core/commit/b73ba470f94597ab99ba5c57d56d8465193ed983", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-18294-fixing-msg", "committedDate": "2020-04-21T20:35:55Z", "type": "commit"}]}