{"pr_number": 19191, "pr_title": "#19189 : A list with an empty String representing an empty value in t\u2026", "pr_createdAt": "2020-08-28T18:05:12Z", "pr_url": "https://github.com/dotCMS/core/pull/19191", "timeline": [{"oid": "444dfb7f70f681a0b4dc7d2840d6d433920d02a5", "url": "https://github.com/dotCMS/core/commit/444dfb7f70f681a0b4dc7d2840d6d433920d02a5", "message": "#19189 : A list with an empty String representing an empty value in the Tag field is being sent from the Edit Mode in Angular. This is causing problems in our current Java code, as passing down an empty String to the `CategoryAPI.find` method returns a null value, which causes a Null Pointer Exception during the checkin process.", "committedDate": "2020-08-28T18:04:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1OTg0OA==", "url": "https://github.com/dotCMS/core/pull/19191#discussion_r479459848", "bodyText": "Should the condition be:\nif (UtilMethods.isSet(categoriesList) && categoriesList.size() > 0){", "author": "wezell", "createdAt": "2020-08-28T18:07:47Z", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/contentlet/business/web/ContentletWebAPIImpl.java", "diffHunk": "@@ -423,11 +423,12 @@ private void saveWebAsset(Map<String, Object> contentletFormData,\n \t\t\t}\r\n \t\t }\r\n \r\n-\t\tif (categoriesList != null && categoriesList.size() > 0) {\r\n-\t\t\tfor (final Iterator iterator = categoriesList.iterator(); iterator.hasNext();) {\r\n-\r\n-\t\t\t\tfinal String tmpString = (String) iterator.next();\r\n-\t\t\t\tcategories.add(catAPI.find(tmpString, user, false));\r\n+\t\tif (UtilMethods.isSet(categoriesList)) {\r", "originalCommit": "444dfb7f70f681a0b4dc7d2840d6d433920d02a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2MzE2NA==", "url": "https://github.com/dotCMS/core/pull/19191#discussion_r479463164", "bodyText": "@wezell the isSet method already checks for both null and empty list scenarios:\npublic static final boolean isSet(final Collection<?> collection) {\n    return null != collection && !collection.isEmpty();\n}", "author": "jcastro-dotcms", "createdAt": "2020-08-28T18:14:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1OTg0OA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2NTcyMQ==", "url": "https://github.com/dotCMS/core/pull/19191#discussion_r479465721", "bodyText": "I would replace the iterator with a normal for over categoriesList\nfor (final String categoryId : categoriesList)", "author": "dsilvam", "createdAt": "2020-08-28T18:20:31Z", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/contentlet/business/web/ContentletWebAPIImpl.java", "diffHunk": "@@ -423,11 +423,12 @@ private void saveWebAsset(Map<String, Object> contentletFormData,\n \t\t\t}\r\n \t\t }\r\n \r\n-\t\tif (categoriesList != null && categoriesList.size() > 0) {\r\n-\t\t\tfor (final Iterator iterator = categoriesList.iterator(); iterator.hasNext();) {\r\n-\r\n-\t\t\t\tfinal String tmpString = (String) iterator.next();\r\n-\t\t\t\tcategories.add(catAPI.find(tmpString, user, false));\r\n+\t\tif (UtilMethods.isSet(categoriesList)) {\r\n+\t\t\tfor (final Iterator<String> iterator = categoriesList.iterator(); iterator.hasNext();) {\r", "originalCommit": "444dfb7f70f681a0b4dc7d2840d6d433920d02a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ4MTIyMA==", "url": "https://github.com/dotCMS/core/pull/19191#discussion_r479481220", "bodyText": "Yes, I thought about it too. But didn't add many changes as this is very old code that will be moved over to a REST Endpoint, hopefully soon.", "author": "jcastro-dotcms", "createdAt": "2020-08-28T18:55:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2NTcyMQ=="}], "type": "inlineReview", "revised_code": null}]}