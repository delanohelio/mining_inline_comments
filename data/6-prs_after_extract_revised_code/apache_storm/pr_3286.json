{"pr_number": 3286, "pr_title": "[STORM-3651] Give producerTasks in ExecutorTransferMultiThreadingTest.testExecutorTransfer more time to finish", "pr_createdAt": "2020-06-10T20:34:04Z", "pr_url": "https://github.com/apache/storm/pull/3286", "timeline": [{"oid": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14", "url": "https://github.com/apache/storm/commit/b56a1aafa4bf26f45f6633dacf1a0e7171c06b14", "message": "[STORM-3651] Give producerTasks in ExecutorTransferMultiThreadingTest.testExecutorTransfer more time to finish", "committedDate": "2020-06-10T21:19:01Z", "type": "commit"}, {"oid": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14", "url": "https://github.com/apache/storm/commit/b56a1aafa4bf26f45f6633dacf1a0e7171c06b14", "message": "[STORM-3651] Give producerTasks in ExecutorTransferMultiThreadingTest.testExecutorTransfer more time to finish", "committedDate": "2020-06-10T21:19:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ==", "url": "https://github.com/apache/storm/pull/3286#discussion_r438930049", "bodyText": "Observation: that is really a long time for 10 messages. Wonder why it is that slow.", "author": "bipinprasad", "createdAt": "2020-06-11T16:51:23Z", "path": "storm-client/test/jvm/org/apache/storm/executor/ExecutorTransferMultiThreadingTest.java", "diffHunk": "@@ -126,14 +126,15 @@ public void testExecutorTransfer() throws InterruptedException {\n         }\n \n         //give producers enough time to insert messages into the queue\n-        executorService.awaitTermination(100, TimeUnit.MILLISECONDS);\n+        executorService.awaitTermination(1000, TimeUnit.MILLISECONDS);", "originalCommit": "b56a1aafa4bf26f45f6633dacf1a0e7171c06b14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1NzE1Ng==", "url": "https://github.com/apache/storm/pull/3286#discussion_r438957156", "bodyText": "This test intentionally submits 10 threads with a 5 thread pool to create race condition between threads. 100ms was just fine in my laptop or VM. On travis, I guess the resource is much limited so the thread contention is more observable. 1s maximum should be good enough. We should be able to lower it but since this value is just a maximum, 1s should be harmless.", "author": "Ethanlm", "createdAt": "2020-06-11T17:39:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk4NjA1Mg==", "url": "https://github.com/apache/storm/pull/3286#discussion_r438986052", "bodyText": "As you said, this is harmless for testing. Hopefully the core performance has not been significantly affected.", "author": "bipinprasad", "createdAt": "2020-06-11T18:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY0ODg0NA==", "url": "https://github.com/apache/storm/pull/3286#discussion_r439648844", "bodyText": "Yeah, we haven't changed anything related to core performance. This is a new unit test. It works well in my laptop but fails sometimes on travis. That is mostly an environment difference.", "author": "Ethanlm", "createdAt": "2020-06-12T21:26:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODkzMDA0OQ=="}], "type": "inlineReview", "revised_code": null}]}