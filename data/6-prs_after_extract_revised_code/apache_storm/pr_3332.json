{"pr_number": 3332, "pr_title": "STORM-3696 don't ignore InterruptedException", "pr_createdAt": "2020-09-08T19:15:40Z", "pr_url": "https://github.com/apache/storm/pull/3332", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE3MTkzMg==", "url": "https://github.com/apache/storm/pull/3332#discussion_r485171932", "bodyText": "Need a process.destroy() here before throwing the IOException, so the cleanup can happen.", "author": "bipinprasad", "createdAt": "2020-09-08T20:16:41Z", "path": "storm-client/src/jvm/org/apache/storm/daemon/supervisor/ClientSupervisorUtils.java", "diffHunk": "@@ -71,7 +71,9 @@ public static int processLauncherAndWait(Map<String, Object> conf, String user,\n         try {\n             process.waitFor();\n         } catch (InterruptedException e) {\n-            LOG.info(\"{} interrupted.\", logPreFix);\n+            LOG.warn(\"{} interrupted.\", logPreFix);\n+            Thread.currentThread().interrupt();\n+            throw new IOException(logPreFix + \" interrupted\", e);", "originalCommit": "9448249cac117879e63b914230f4703dfc93fc92", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "feb103e267f591920918473e0360d578e2c34c9e", "chunk": "diff --git a/storm-client/src/jvm/org/apache/storm/daemon/supervisor/ClientSupervisorUtils.java b/storm-client/src/jvm/org/apache/storm/daemon/supervisor/ClientSupervisorUtils.java\nindex 7dde4fbb9..087fee1e3 100644\n--- a/storm-client/src/jvm/org/apache/storm/daemon/supervisor/ClientSupervisorUtils.java\n+++ b/storm-client/src/jvm/org/apache/storm/daemon/supervisor/ClientSupervisorUtils.java\n\n@@ -73,6 +73,7 @@ public class ClientSupervisorUtils {\n         } catch (InterruptedException e) {\n             LOG.warn(\"{} interrupted.\", logPreFix);\n             Thread.currentThread().interrupt();\n+            process.destroy();\n             throw new IOException(logPreFix + \" interrupted\", e);\n         }\n         ret = process.exitValue();\n"}}, {"oid": "feb103e267f591920918473e0360d578e2c34c9e", "url": "https://github.com/apache/storm/commit/feb103e267f591920918473e0360d578e2c34c9e", "message": "STORM-3696 don't ignore InterruptedException", "committedDate": "2020-09-09T18:33:33Z", "type": "commit"}, {"oid": "feb103e267f591920918473e0360d578e2c34c9e", "url": "https://github.com/apache/storm/commit/feb103e267f591920918473e0360d578e2c34c9e", "message": "STORM-3696 don't ignore InterruptedException", "committedDate": "2020-09-09T18:33:33Z", "type": "forcePushed"}]}