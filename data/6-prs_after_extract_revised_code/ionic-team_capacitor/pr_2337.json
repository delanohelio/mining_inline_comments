{"pr_number": 2337, "pr_title": "feat(ios/android): allow to position Toast", "pr_createdAt": "2020-01-15T18:08:22Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/2337", "timeline": [{"oid": "c9e618dee64aa8c2a87df00a741a078722640406", "url": "https://github.com/ionic-team/capacitor/commit/c9e618dee64aa8c2a87df00a741a078722640406", "message": "Implement toast position for android", "committedDate": "2020-01-15T17:38:06Z", "type": "commit"}, {"oid": "5046552a53ddd0c8c38ce3834486562c3172a692", "url": "https://github.com/ionic-team/capacitor/commit/5046552a53ddd0c8c38ce3834486562c3172a692", "message": "Implement toast position on ios", "committedDate": "2020-01-15T17:38:06Z", "type": "commit"}, {"oid": "53897dba470a7b94e4f454669fe9ee8412dcbe7e", "url": "https://github.com/ionic-team/capacitor/commit/53897dba470a7b94e4f454669fe9ee8412dcbe7e", "message": "Use same error message in android and ios", "committedDate": "2020-01-15T17:48:11Z", "type": "commit"}, {"oid": "2c56237f7dc6412c2f74bfa5609d98af5042f449", "url": "https://github.com/ionic-team/capacitor/commit/2c56237f7dc6412c2f74bfa5609d98af5042f449", "message": "Simplify", "committedDate": "2020-01-15T17:57:38Z", "type": "commit"}, {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1", "url": "https://github.com/ionic-team/capacitor/commit/e2170d8effbeeffb4b23c0cd9973abc7e71a41d1", "message": "Don't try to change empty lines", "committedDate": "2020-01-15T18:07:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ==", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372415485", "bodyText": "This also changes the behaviour, so I wouldn't do anything if set to bottom, to keep the old behaviour.", "author": "jcesarmobile", "createdAt": "2020-01-29T14:32:14Z", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java", "diffHunk": "@@ -23,7 +30,22 @@ public void show(PluginCall call) {\n       duration = android.widget.Toast.LENGTH_LONG;\n     }\n \n+\n     android.widget.Toast toast = android.widget.Toast.makeText(getContext(), text, duration);\n+\n+    String position = call.getString(\"position\", \"bottom\");\n+\n+    if(\"top\".equals(position)) {\n+      toast.setGravity(GRAVITY_TOP, 0, BASE_TOP_BOTTOM_OFFSET);\n+    } else  if(\"bottom\".equals(position)) {\n+      toast.setGravity(GRAVITY_BOTTOM, 0, BASE_TOP_BOTTOM_OFFSET);", "originalCommit": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ4MDg4Nw==", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372480887", "bodyText": "Is it not weird to have a margin at the top but no at bottom? IIRC on android the toast sticks to the bottom, I found it not as pretty as with a little margin.", "author": "veloce", "createdAt": "2020-01-29T16:14:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ5Nzc0Nw==", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372497747", "bodyText": "I don't know if it's weird or not, but this PR changes the previous behaviour, moving the default toast position.", "author": "jcesarmobile", "createdAt": "2020-01-29T16:40:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MzEwNA==", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372543104", "bodyText": "Ok I changed it, and put also 40 as top offset.", "author": "veloce", "createdAt": "2020-01-29T18:04:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "35ece70d3937ba04e6a21ea66fed6d55217457be", "chunk": "diff --git a/android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java b/android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java\nindex 02834d3f..9450d837 100644\n--- a/android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java\n+++ b/android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java\n\n@@ -30,20 +27,13 @@ public class Toast extends Plugin {\n       duration = android.widget.Toast.LENGTH_LONG;\n     }\n \n-\n     android.widget.Toast toast = android.widget.Toast.makeText(getContext(), text, duration);\n \n     String position = call.getString(\"position\", \"bottom\");\n-\n     if(\"top\".equals(position)) {\n-      toast.setGravity(GRAVITY_TOP, 0, BASE_TOP_BOTTOM_OFFSET);\n-    } else  if(\"bottom\".equals(position)) {\n-      toast.setGravity(GRAVITY_BOTTOM, 0, BASE_TOP_BOTTOM_OFFSET);\n+      toast.setGravity(GRAVITY_TOP, 0, 40);\n     } else if(\"center\".equals(position)) {\n       toast.setGravity(GRAVITY_CENTER, 0, 0);\n-    } else {\n-      call.error(\"Invalid position. Valid options are 'top', 'center' and 'bottom'.\");\n-      return;\n     }\n \n     toast.show();\n"}}, {"oid": "43e0f32f9a8579b2cfd659fc0b40a2d9fda3c9d7", "url": "https://github.com/ionic-team/capacitor/commit/43e0f32f9a8579b2cfd659fc0b40a2d9fda3c9d7", "message": "Suggested changes", "committedDate": "2020-01-29T16:21:29Z", "type": "commit"}, {"oid": "35ece70d3937ba04e6a21ea66fed6d55217457be", "url": "https://github.com/ionic-team/capacitor/commit/35ece70d3937ba04e6a21ea66fed6d55217457be", "message": "Android default behavior", "committedDate": "2020-01-29T18:03:42Z", "type": "commit"}, {"oid": "8b6145db2967033614b8d7cb60e981f596f4a5c0", "url": "https://github.com/ionic-team/capacitor/commit/8b6145db2967033614b8d7cb60e981f596f4a5c0", "message": "No error returned if invalid toast position on iOS", "committedDate": "2020-01-30T08:44:35Z", "type": "commit"}]}