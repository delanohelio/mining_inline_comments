{"pr_number": 530, "pr_title": "Fix the In Memory connector", "pr_createdAt": "2020-04-29T07:18:38Z", "pr_url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/530", "timeline": [{"oid": "7bd48199b3811f766d1dc86664605d6542b9b2e5", "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/7bd48199b3811f766d1dc86664605d6542b9b2e5", "message": "Fix the In Memory connector\n\n* Cannot switch both incoming and outgoing due to the new validation mechanism (spec enforcement)\n* Update documentation\n* Add jandex plugin - required to fix https://github.com/quarkusio/quarkus/issues/6427", "committedDate": "2020-04-29T07:18:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUwMjM0Ng==", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/530#discussion_r417502346", "bodyText": "Do the methods need to return a Map of the values being set?\nGiven they're set as system properties, what's the use case?", "author": "kenfinnigan", "createdAt": "2020-04-29T17:52:39Z", "path": "smallrye-reactive-messaging-in-memory/src/main/java/io/smallrye/reactive/messaging/connectors/InMemoryConnector.java", "diffHunk": "@@ -48,40 +45,79 @@\n      *\n      *     //...\n      *\n+     *     &#64;Before\n+     *     public void setup() {\n+     *         InMemoryConnector.switchIncomingChannelsToInMemory(\"my-channel\");\n+     *     }\n+     *\n+     *     // ..\n+     *\n      *     InMemorySource&lt;Integer&gt; channel = connector.source(\"my-channel\");\n      *     channel.send(1);\n      *     channel.send(2);\n      *\n      * </pre></code>\n      * <p>\n-     * With the {@link InMemorySource}, you can send messages to the channel, mocking the incoming messages.\n      *\n-     * You can also retrieve an {@link InMemorySink} using:\n+     * @param channels the channels to switch, must not be {@code null}, must not contain {@code null}, must not contain\n+     *        a blank value\n+     * @return The map of properties that have been defined. The method sets the system properties, but give\n+     *         you this map to pass the properties around if needed.\n+     */\n+    public static Map<String, String> switchIncomingChannelsToInMemory(String... channels) {", "originalCommit": "7bd48199b3811f766d1dc86664605d6542b9b2e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA2MDA5Ng==", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/530#discussion_r419060096", "bodyText": "Quarkus Test Resources when using native test.", "author": "cescoffier", "createdAt": "2020-05-03T07:12:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUwMjM0Ng=="}], "type": "inlineReview", "revised_code": null}]}