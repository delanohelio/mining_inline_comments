{"pr_number": 112, "pr_title": "#102 - Added NuGet repository support", "pr_createdAt": "2020-04-30T08:57:58Z", "pr_url": "https://github.com/artipie/artipie/pull/112", "timeline": [{"oid": "cbbd48507098ea9ba40c16d10a61e8c677349c77", "url": "https://github.com/artipie/artipie/commit/cbbd48507098ea9ba40c16d10a61e8c677349c77", "message": "#102 - Added NuGet repository support", "committedDate": "2020-04-30T09:55:58Z", "type": "forcePushed"}, {"oid": "dc97fc8a7f36d4478fe81b0295da8589063e2349", "url": "https://github.com/artipie/artipie/commit/dc97fc8a7f36d4478fe81b0295da8589063e2349", "message": "#102 - Added NuGet repository support", "committedDate": "2020-04-30T16:21:15Z", "type": "forcePushed"}, {"oid": "a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "url": "https://github.com/artipie/artipie/commit/a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "message": "#102 - Added NuGet repository support", "committedDate": "2020-04-30T16:38:01Z", "type": "forcePushed"}, {"oid": "a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "url": "https://github.com/artipie/artipie/commit/a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "message": "#102 - Added NuGet repository support", "committedDate": "2020-04-30T16:38:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3ODk1OQ==", "url": "https://github.com/artipie/artipie/pull/112#discussion_r418678959", "bodyText": "@olegmoz  we can extract this part to a private method to avoid code duplication:\nthis.repo().thenApply(\n   map -> Objects.requireNonNull(map.string(${param}), ${message})\n)", "author": "Vatavuk", "createdAt": "2020-05-01T18:40:05Z", "path": "src/main/java/com/artipie/RepoConfig.java", "diffHunk": "@@ -86,6 +88,28 @@ public RepoConfig(final Vertx vertx, final Publisher<ByteBuffer> content) {\n         );\n     }\n \n+    /**\n+     * Repository URL.\n+     *\n+     * @return Async string of URL\n+     */\n+    public CompletionStage<URL> url() {\n+        return this.repo().thenApply(", "originalCommit": "a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "81bb050e9bd2e44375300a6777b44284fbee2913", "chunk": "diff --git a/src/main/java/com/artipie/RepoConfig.java b/src/main/java/com/artipie/RepoConfig.java\nindex 6712076..3fdca5c 100644\n--- a/src/main/java/com/artipie/RepoConfig.java\n+++ b/src/main/java/com/artipie/RepoConfig.java\n\n@@ -83,9 +81,7 @@ public final class RepoConfig {\n      * @return Async string of path\n      */\n     public CompletionStage<String> path() {\n-        return this.repo().thenApply(\n-            map -> Objects.requireNonNull(map.string(\"path\"), \"yaml repo.path is null\")\n-        );\n+        return this.string(\"path\");\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4MDIzNw==", "url": "https://github.com/artipie/artipie/pull/112#discussion_r418680237", "bodyText": "@olegmoz  let's extract NuGet creation to a private method to make code more readable", "author": "Vatavuk", "createdAt": "2020-05-01T18:42:59Z", "path": "src/main/java/com/artipie/SliceFromConfig.java", "diffHunk": "@@ -101,6 +102,14 @@ public SliceFromConfig(final RepoConfig config, final FileSystem fs) {\n                             );\n                         }\n                     ),\n+                    new MapEntry<>(\n+                        \"nuget\",\n+                        config -> cfg.url().thenCompose(", "originalCommit": "a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "81bb050e9bd2e44375300a6777b44284fbee2913", "chunk": "diff --git a/src/main/java/com/artipie/SliceFromConfig.java b/src/main/java/com/artipie/SliceFromConfig.java\nindex 869d723..831a448 100644\n--- a/src/main/java/com/artipie/SliceFromConfig.java\n+++ b/src/main/java/com/artipie/SliceFromConfig.java\n\n@@ -96,19 +97,11 @@ public final class SliceFromConfig extends Slice.Wrap {\n                     ),\n                     new MapEntry<>(\n                         \"php\",\n-                        config -> {\n-                            return config.path().thenApply(\n-                                path -> new PhpComposer(path, storage)\n-                            );\n-                        }\n+                        config -> php(config, storage)\n                     ),\n                     new MapEntry<>(\n                         \"nuget\",\n-                        config -> cfg.url().thenCompose(\n-                            url -> cfg.path().thenApply(\n-                                path -> new NuGet(url, path, storage)\n-                            )\n-                        )\n+                        config -> nuGet(cfg, storage)\n                     ),\n                     new MapEntry<>(\n                         \"maven\", config -> CompletableFuture.completedStage(new MavenSlice(storage))\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4MDUyMA==", "url": "https://github.com/artipie/artipie/pull/112#discussion_r418680520", "bodyText": "@olegmoz  I would also extract php creation part to a private method to make code more readable", "author": "Vatavuk", "createdAt": "2020-05-01T18:43:41Z", "path": "src/main/java/com/artipie/SliceFromConfig.java", "diffHunk": "@@ -101,6 +102,14 @@ public SliceFromConfig(final RepoConfig config, final FileSystem fs) {\n                             );\n                         }\n                     ),\n+                    new MapEntry<>(", "originalCommit": "a09661bcf7054d08c7a44e55b6eee8a85e2aacd5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "81bb050e9bd2e44375300a6777b44284fbee2913", "chunk": "diff --git a/src/main/java/com/artipie/SliceFromConfig.java b/src/main/java/com/artipie/SliceFromConfig.java\nindex 869d723..831a448 100644\n--- a/src/main/java/com/artipie/SliceFromConfig.java\n+++ b/src/main/java/com/artipie/SliceFromConfig.java\n\n@@ -96,19 +97,11 @@ public final class SliceFromConfig extends Slice.Wrap {\n                     ),\n                     new MapEntry<>(\n                         \"php\",\n-                        config -> {\n-                            return config.path().thenApply(\n-                                path -> new PhpComposer(path, storage)\n-                            );\n-                        }\n+                        config -> php(config, storage)\n                     ),\n                     new MapEntry<>(\n                         \"nuget\",\n-                        config -> cfg.url().thenCompose(\n-                            url -> cfg.path().thenApply(\n-                                path -> new NuGet(url, path, storage)\n-                            )\n-                        )\n+                        config -> nuGet(cfg, storage)\n                     ),\n                     new MapEntry<>(\n                         \"maven\", config -> CompletableFuture.completedStage(new MavenSlice(storage))\n"}}, {"oid": "81bb050e9bd2e44375300a6777b44284fbee2913", "url": "https://github.com/artipie/artipie/commit/81bb050e9bd2e44375300a6777b44284fbee2913", "message": "#102 - Changes by review", "committedDate": "2020-05-06T07:59:08Z", "type": "commit"}]}