{"pr_number": 665, "pr_title": "#652 - Verify publish for pypi", "pr_createdAt": "2020-10-06T20:54:09Z", "pr_url": "https://github.com/artipie/artipie/pull/665", "timeline": [{"oid": "a3e8bb787d104c151b1f6b334530b7a020428310", "url": "https://github.com/artipie/artipie/commit/a3e8bb787d104c151b1f6b334530b7a020428310", "message": "#652 - Verify publish for pypi", "committedDate": "2020-10-06T20:50:36Z", "type": "commit"}, {"oid": "305831f5fdf80ff176a0c25e4e7fed8513fb3f08", "url": "https://github.com/artipie/artipie/commit/305831f5fdf80ff176a0c25e4e7fed8513fb3f08", "message": "#652 - Add description in assertThat", "committedDate": "2020-10-06T21:17:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc2Njc2OQ==", "url": "https://github.com/artipie/artipie/pull/665#discussion_r500766769", "bodyText": "@genryxy I'd suggest to perform this operation in our \"storage terms\": TestResource has addFilesTo() method to copy resources to provided storage and base key. Also, as this will be just one expression, I think that method can be inlined", "author": "olenagerasimova", "createdAt": "2020-10-07T06:30:56Z", "path": "src/test/java/com/artipie/pypi/PypiITCase.java", "diffHunk": "@@ -124,19 +158,16 @@ private String exec(final String... command) throws Exception {\n         return this.cntn.execInContainer(command).getStdout();\n     }\n \n-    private String config() {\n-        return Yaml.createYamlMappingBuilder().add(\n-            \"repo\",\n-            Yaml.createYamlMappingBuilder()\n-                .add(\"type\", \"pypi\")\n-                .add(\n-                    \"storage\",\n-                    Yaml.createYamlMappingBuilder()\n-                        .add(\"type\", \"fs\")\n-                        .add(\"path\", this.tmp.resolve(\"repos\").toString())\n-                        .build()\n-                )\n-                .build()\n-        ).build().toString();\n+    private void prepareDirectory(final String dist) throws IOException {\n+        FileUtils.copyDirectory(", "originalCommit": "305831f5fdf80ff176a0c25e4e7fed8513fb3f08", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "54bb63420c23b61f811752d470334186b0a913dc", "chunk": "diff --git a/src/test/java/com/artipie/pypi/PypiITCase.java b/src/test/java/com/artipie/pypi/PypiITCase.java\nindex f6faee9..5dc3186 100644\n--- a/src/test/java/com/artipie/pypi/PypiITCase.java\n+++ b/src/test/java/com/artipie/pypi/PypiITCase.java\n\n@@ -158,13 +161,6 @@ final class PypiITCase {\n         return this.cntn.execInContainer(command).getStdout();\n     }\n \n-    private void prepareDirectory(final String dist) throws IOException {\n-        FileUtils.copyDirectory(\n-            new TestResource(dist).asPath().toFile(),\n-            this.tmp.resolve(dist).toFile()\n-        );\n-    }\n-\n     private boolean inStorage(final String pckg) {\n         return this.storage.exists(\n             new Key.From(\"repos\", \"my-pypi\", \"artipietestpkg\", pckg)\n"}}, {"oid": "54bb63420c23b61f811752d470334186b0a913dc", "url": "https://github.com/artipie/artipie/commit/54bb63420c23b61f811752d470334186b0a913dc", "message": "#652 - Use TestResource", "committedDate": "2020-10-08T06:04:09Z", "type": "commit"}, {"oid": "6a7f94b51b68fa2090b645bc21f430868aa49dc2", "url": "https://github.com/artipie/artipie/commit/6a7f94b51b68fa2090b645bc21f430868aa49dc2", "message": "Merge remote-tracking branch 'upstream/master' into 652-publish-pypiIT", "committedDate": "2020-10-08T06:04:15Z", "type": "commit"}, {"oid": "11e4b9bd6364fcc2db1024abce99588669dcad2e", "url": "https://github.com/artipie/artipie/commit/11e4b9bd6364fcc2db1024abce99588669dcad2e", "message": "Merge branch 'master' into 652-publish-pypiIT", "committedDate": "2020-10-08T13:05:09Z", "type": "commit"}]}