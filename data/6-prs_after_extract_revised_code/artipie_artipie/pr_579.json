{"pr_number": 579, "pr_title": "#569 - created Credentials.User", "pr_createdAt": "2020-09-11T13:38:10Z", "pr_url": "https://github.com/artipie/artipie/pull/579", "timeline": [{"oid": "2c339a2bf1d13b4cd429b29904a17b2f65a45fba", "url": "https://github.com/artipie/artipie/commit/2c339a2bf1d13b4cd429b29904a17b2f65a45fba", "message": "#569 - created Credentials.User", "committedDate": "2020-09-11T13:36:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1Njk5Mg==", "url": "https://github.com/artipie/artipie/pull/579#discussion_r487756992", "bodyText": "@olenagerasimova looks odd that password is not part of User class. Maybe it should not be in scope of PR, but I'd suggest to add an issue for that to address it later", "author": "olegmoz", "createdAt": "2020-09-14T08:57:47Z", "path": "src/main/java/com/artipie/Credentials.java", "diffHunk": "@@ -56,16 +57,16 @@\n      * Artipie users list.\n      * @return Yaml as completion action\n      */\n-    CompletionStage<List<String>> users();\n+    CompletionStage<List<User>> users();\n \n     /**\n      * Adds user to artipie users.\n-     * @param username User name\n+     * @param user User info\n      * @param pswd Password\n      * @param format Password format\n      * @return Completion add action\n      */\n-    CompletionStage<Void> add(String username, String pswd, PasswordFormat format);\n+    CompletionStage<Void> add(User user, String pswd, PasswordFormat format);", "originalCommit": "2c339a2bf1d13b4cd429b29904a17b2f65a45fba", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc2MTIzOA==", "url": "https://github.com/artipie/artipie/pull/579#discussion_r487761238", "bodyText": "@olenagerasimova not every user has an email, so I think it will make more sense to make it Optional. If the field is required in certain Slice then we may put default value there, but not in all places where User is added/modified", "author": "olegmoz", "createdAt": "2020-09-14T09:05:02Z", "path": "src/main/java/com/artipie/Credentials.java", "diffHunk": "@@ -274,4 +290,47 @@ public FromEnv(final Map<String, String> env) {\n             return CompletableFuture.completedFuture(new AuthFromEnv());\n         }\n     }\n+\n+    /**\n+     * User.\n+     * @since 0.11\n+     */\n+    final class User {\n+\n+        /**\n+         * User name.\n+         */\n+        private final String uname;\n+\n+        /**\n+         * User email.\n+         */\n+        private final String mail;", "originalCommit": "2c339a2bf1d13b4cd429b29904a17b2f65a45fba", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1850f821551ccdca703a02ca54af5dab4a886f1c", "chunk": "diff --git a/src/main/java/com/artipie/Credentials.java b/src/main/java/com/artipie/Credentials.java\nindex 88fbf69..e680456 100644\n--- a/src/main/java/com/artipie/Credentials.java\n+++ b/src/main/java/com/artipie/Credentials.java\n\n@@ -305,14 +306,14 @@ public interface Credentials {\n         /**\n          * User email.\n          */\n-        private final String mail;\n+        private final Optional<String> mail;\n \n         /**\n          * Ctor.\n          * @param name Username\n          * @param email User email\n          */\n-        public User(final String name, final String email) {\n+        public User(final String name, final Optional<String> email) {\n             this.uname = name;\n             this.mail = email;\n         }\n"}}, {"oid": "ccdf526f404598207b66a98461fd9858c5172ed4", "url": "https://github.com/artipie/artipie/commit/ccdf526f404598207b66a98461fd9858c5172ed4", "message": "Merge branch 'master' into 569-add-email", "committedDate": "2020-09-14T10:43:23Z", "type": "commit"}, {"oid": "1850f821551ccdca703a02ca54af5dab4a886f1c", "url": "https://github.com/artipie/artipie/commit/1850f821551ccdca703a02ca54af5dab4a886f1c", "message": "#569 - CR", "committedDate": "2020-09-14T11:03:06Z", "type": "commit"}, {"oid": "9ed83e687bc334ec9028d1905f9b014c68bd9467", "url": "https://github.com/artipie/artipie/commit/9ed83e687bc334ec9028d1905f9b014c68bd9467", "message": "#569 - todo added", "committedDate": "2020-09-14T11:06:25Z", "type": "commit"}, {"oid": "a019203c2204f705a324fc110891e37291127294", "url": "https://github.com/artipie/artipie/commit/a019203c2204f705a324fc110891e37291127294", "message": "Merge branch 'master' into 569-add-email", "committedDate": "2020-09-14T11:52:44Z", "type": "commit"}]}