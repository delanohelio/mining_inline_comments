{"pr_number": 725, "pr_title": "#722 - Extract MavenSettings class", "pr_createdAt": "2020-10-28T11:41:31Z", "pr_url": "https://github.com/artipie/artipie/pull/725", "timeline": [{"oid": "8b9d8463bc3b007f8355e9ba098492d786f764c5", "url": "https://github.com/artipie/artipie/commit/8b9d8463bc3b007f8355e9ba098492d786f764c5", "message": "#722 - Extract MavenSetting class", "committedDate": "2020-10-28T11:40:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM4NzQ3MQ==", "url": "https://github.com/artipie/artipie/pull/725#discussion_r513387471", "bodyText": "@genryxy all usages of MavenSettings class involve reading content and writing it to folder. I'd suggest to add method writeTo to the class that will write the file to specified folder. It will reduce code duplication and will make tests shorter", "author": "olegmoz", "createdAt": "2020-10-28T12:01:15Z", "path": "src/test/java/com/artipie/maven/MavenITCase.java", "diffHunk": "@@ -96,9 +95,10 @@ void init() throws Exception {\n             new RepoConfigYaml(\"maven\").withFileStorage(this.tmp.resolve(\"repos\"))\n         );\n         this.port = this.server.start();\n-        final Path setting = this.tmp.resolve(\"settings.xml\");\n-        setting.toFile().createNewFile();\n-        Files.write(setting, this.settings());\n+        Files.write(\n+            this.tmp.resolve(\"settings.xml\"),\n+            new MavenSettings(this.port).value()\n+        );", "originalCommit": "8b9d8463bc3b007f8355e9ba098492d786f764c5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0415a7ce7fc1b97bcfd9809a15f810f6a5888e46", "chunk": "diff --git a/src/test/java/com/artipie/maven/MavenITCase.java b/src/test/java/com/artipie/maven/MavenITCase.java\nindex f1747f6..5e47a12 100644\n--- a/src/test/java/com/artipie/maven/MavenITCase.java\n+++ b/src/test/java/com/artipie/maven/MavenITCase.java\n\n@@ -95,10 +95,8 @@ final class MavenITCase {\n             new RepoConfigYaml(\"maven\").withFileStorage(this.tmp.resolve(\"repos\"))\n         );\n         this.port = this.server.start();\n-        Files.write(\n-            this.tmp.resolve(\"settings.xml\"),\n-            new MavenSettings(this.port).value()\n-        );\n+        new MavenSettings(this.port)\n+            .writeTo(this.tmp);\n         this.cntn = new TestContainer(\"centos:centos8\", this.tmp);\n         this.cntn.start(this.port);\n         this.cntn.execStdout(\"yum\", \"-y\", \"install\", \"maven\");\n"}}, {"oid": "0415a7ce7fc1b97bcfd9809a15f810f6a5888e46", "url": "https://github.com/artipie/artipie/commit/0415a7ce7fc1b97bcfd9809a15f810f6a5888e46", "message": "#722 - CR", "committedDate": "2020-10-28T14:19:07Z", "type": "commit"}, {"oid": "6dfaff48176145121c1fdde1d1323c97f883ed42", "url": "https://github.com/artipie/artipie/commit/6dfaff48176145121c1fdde1d1323c97f883ed42", "message": "Merge branch 'master' into 722-mvnSettings", "committedDate": "2020-10-28T14:49:51Z", "type": "commit"}]}