{"pr_number": 6699, "pr_title": "xds: refactor io.grpc.xds.sds to io.grpc.xds.internal.sds", "pr_createdAt": "2020-02-11T21:04:09Z", "pr_url": "https://github.com/grpc/grpc-java/pull/6699", "timeline": [{"oid": "c81124dec5b192e30ac431135ecb2181bc5bee58", "url": "https://github.com/grpc/grpc-java/commit/c81124dec5b192e30ac431135ecb2181bc5bee58", "message": "xds: refactor io.grpc.xds.sds to io.grpc.xds.internal.sds", "committedDate": "2020-02-11T21:02:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4MjE2OA==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r378582168", "bodyText": "This one doesn't need to be public any more, right?", "author": "sanjaypujare", "createdAt": "2020-02-13T00:01:29Z", "path": "xds/src/main/java/io/grpc/xds/internal/sds/SdsProtocolNegotiators.java", "diffHunk": "@@ -48,7 +45,6 @@\n  * Provides client and server side gRPC {@link ProtocolNegotiator}s that use SDS to provide the SSL\n  * context.\n  */\n-@Internal\n public final class SdsProtocolNegotiators {", "originalCommit": "c81124dec5b192e30ac431135ecb2181bc5bee58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAyOTI5Mw==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r379029293", "bodyText": "That's right. Thanks for the catch. Done.", "author": "dapengzhang0", "createdAt": "2020-02-13T18:06:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4MjE2OA=="}], "type": "inlineReview", "revised_code": {"commit": "6f0afc8e1f4098cc5ea50082be5147174cd044cc", "chunk": "diff --git a/xds/src/main/java/io/grpc/xds/internal/sds/SdsProtocolNegotiators.java b/xds/src/main/java/io/grpc/xds/internal/sds/SdsProtocolNegotiators.java\nindex 8793a25cf..9f09aba54 100644\n--- a/xds/src/main/java/io/grpc/xds/internal/sds/SdsProtocolNegotiators.java\n+++ b/xds/src/main/java/io/grpc/xds/internal/sds/SdsProtocolNegotiators.java\n\n@@ -45,7 +45,7 @@ import javax.annotation.Nullable;\n  * Provides client and server side gRPC {@link ProtocolNegotiator}s that use SDS to provide the SSL\n  * context.\n  */\n-public final class SdsProtocolNegotiators {\n+final class SdsProtocolNegotiators {\n \n   private static final Logger logger = Logger.getLogger(SdsProtocolNegotiators.class.getName());\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4Mjk3NA==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r378582974", "bodyText": "This too doesn't need to be public any more?", "author": "sanjaypujare", "createdAt": "2020-02-13T00:04:30Z", "path": "xds/src/main/java/io/grpc/xds/internal/sds/SslContextProvider.java", "diffHunk": "@@ -33,7 +32,6 @@\n  * stream that is receiving the requested secret(s) or it could represent file-system based\n  * secret(s) that are dynamic.\n  */\n-@Internal\n public abstract class SslContextProvider<K> {", "originalCommit": "c81124dec5b192e30ac431135ecb2181bc5bee58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAyNjI4OQ==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r379026289", "bodyText": "It is used by io.grpc.xds.CdsLoadBalancer.", "author": "dapengzhang0", "createdAt": "2020-02-13T18:00:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4Mjk3NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NDU4MA==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r378584580", "bodyText": "Why was this removed? Issue 6268 would still be open until we have implemented XdsCredentials API", "author": "sanjaypujare", "createdAt": "2020-02-13T00:10:25Z", "path": "xds/src/main/java/io/grpc/xds/internal/sds/XdsChannelBuilder.java", "diffHunk": "@@ -32,7 +30,6 @@\n  * A version of {@link ManagedChannelBuilder} to create xDS managed channels that will use SDS to\n  * set up SSL with peers. Note, this is not ready to use yet.\n  */\n-@ExperimentalApi(\"https://github.com/grpc/grpc-java/issues/6268\")", "originalCommit": "c81124dec5b192e30ac431135ecb2181bc5bee58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAyNDk1Mw==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r379024953", "bodyText": "Because it's moved to internal. @ExperimentalApi is for APIs that are not internal.", "author": "dapengzhang0", "createdAt": "2020-02-13T17:58:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NDU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAyNTYwMQ==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r379025601", "bodyText": "We can close #6268 and open another once we have to add a public API in io.grpc.xds.", "author": "dapengzhang0", "createdAt": "2020-02-13T17:59:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NDU4MA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NTEzNQ==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r378585135", "bodyText": "Same thing here. Until XdsCreds is implemented we would still treat this as an experimental API. Unless the fact that this is now in \"internal\" makes Experimental unnecessary but I think internal and experimental are 2 different things", "author": "sanjaypujare", "createdAt": "2020-02-13T00:12:17Z", "path": "xds/src/main/java/io/grpc/xds/internal/sds/XdsServerBuilder.java", "diffHunk": "@@ -40,7 +38,6 @@\n  * A version of {@link ServerBuilder} to create xDS managed servers that will use SDS to set up SSL\n  * with peers. Note, this is not ready to use yet.\n  */\n-@ExperimentalApi(\"https://github.com/grpc/grpc-java/issues/6268\")", "originalCommit": "c81124dec5b192e30ac431135ecb2181bc5bee58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTAyNzYxMQ==", "url": "https://github.com/grpc/grpc-java/pull/6699#discussion_r379027611", "bodyText": "We can close #6268 and open another once we have to add XdsServerBuilder in io.grpc.xds.\n@Experimental means the public API is not stable. @Interanl or internal is not \"public\" API and it's inherently unstable.", "author": "dapengzhang0", "createdAt": "2020-02-13T18:03:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NTEzNQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "6f0afc8e1f4098cc5ea50082be5147174cd044cc", "url": "https://github.com/grpc/grpc-java/commit/6f0afc8e1f4098cc5ea50082be5147174cd044cc", "message": "remove public modifier for SdsProtocolNegotiators", "committedDate": "2020-02-13T18:06:21Z", "type": "commit"}]}