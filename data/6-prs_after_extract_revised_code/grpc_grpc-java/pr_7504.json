{"pr_number": 7504, "pr_title": "xds: gate xDS timeout with env variable", "pr_createdAt": "2020-10-09T22:27:27Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7504", "timeline": [{"oid": "904734e7343387e02ae55019bb868638e6e15a5f", "url": "https://github.com/grpc/grpc-java/commit/904734e7343387e02ae55019bb868638e6e15a5f", "message": "Disable xDS timeout by default, can be enabled by setting env variable.", "committedDate": "2020-10-09T22:26:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ2OTk4Mg==", "url": "https://github.com/grpc/grpc-java/pull/7504#discussion_r503469982", "bodyText": "Turn the flag back to the original value in tearDown(). I don't know whether other test classes will run in the same JVM in some settings. Or all other tests don't care this flag?", "author": "dapengzhang0", "createdAt": "2020-10-12T18:39:03Z", "path": "xds/src/test/java/io/grpc/xds/XdsNameResolverTest.java", "diffHunk": "@@ -119,6 +119,7 @@ XdsChannel createChannel(List<ServerInfo> servers) throws XdsInitializationExcep\n \n   @Before\n   public void setUp() {\n+    XdsNameResolver.enableTimeout = true;", "originalCommit": "904734e7343387e02ae55019bb868638e6e15a5f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ4MTQ0Ng==", "url": "https://github.com/grpc/grpc-java/pull/7504#discussion_r503481446", "bodyText": "We do not test the behavior when this env variable is unset.\nThis env variable is just used to exclude one or two lines of logic for emitting a service config, we shouldn't make it involve too complicate code change, as it should be easy to be removed later. Since the gating logic is super clear, we shouldn't bother verify the outcome of this gate, without complicate things when for its removal.", "author": "voidzcy", "createdAt": "2020-10-12T19:05:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ2OTk4Mg=="}], "type": "inlineReview", "revised_code": null}]}