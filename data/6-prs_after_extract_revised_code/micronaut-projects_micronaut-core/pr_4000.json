{"pr_number": 4000, "pr_title": "Add http cookies", "pr_createdAt": "2020-09-01T15:07:27Z", "pr_url": "https://github.com/micronaut-projects/micronaut-core/pull/4000", "timeline": [{"oid": "8f7f6bc08212f916d8411d58621dfccf2d081620", "url": "https://github.com/micronaut-projects/micronaut-core/commit/8f7f6bc08212f916d8411d58621dfccf2d081620", "message": "add default cookie methods", "committedDate": "2020-08-31T14:21:17Z", "type": "commit"}, {"oid": "c60e28e276ffdd8572002a575a14f7a6e7dac334", "url": "https://github.com/micronaut-projects/micronaut-core/commit/c60e28e276ffdd8572002a575a14f7a6e7dac334", "message": "Adds getCookies", "committedDate": "2020-08-31T15:29:59Z", "type": "commit"}, {"oid": "5c87715701407a0b9a658db2cb2d44ccc9ed7cab", "url": "https://github.com/micronaut-projects/micronaut-core/commit/5c87715701407a0b9a658db2cb2d44ccc9ed7cab", "message": "add getCookie", "committedDate": "2020-09-01T14:04:29Z", "type": "commit"}, {"oid": "62218447be09139348a485f568b582e9ef966058", "url": "https://github.com/micronaut-projects/micronaut-core/commit/62218447be09139348a485f568b582e9ef966058", "message": "merge 2.1.x", "committedDate": "2020-09-01T15:29:58Z", "type": "commit"}, {"oid": "b2b226baec4d59fdf03adbed2e04be2fc00deaa8", "url": "https://github.com/micronaut-projects/micronaut-core/commit/b2b226baec4d59fdf03adbed2e04be2fc00deaa8", "message": "fix checkstyle", "committedDate": "2020-09-01T16:33:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQxNjg4MQ==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4000#discussion_r481416881", "bodyText": "use STRICT here instead of LAX", "author": "jameskleeh", "createdAt": "2020-09-01T20:38:40Z", "path": "http-netty/src/main/java/io/micronaut/http/netty/cookies/NettyCookies.java", "diffHunk": "@@ -68,6 +68,28 @@ public NettyCookies(String path, HttpHeaders nettyHeaders, ConversionService con\n         }\n     }\n \n+    /**\n+     * @param nettyHeaders      The Netty HTTP headers\n+     * @param conversionService The conversion service\n+     */\n+    public NettyCookies(HttpHeaders nettyHeaders, ConversionService conversionService) {\n+        this.conversionService = conversionService;\n+        if (nettyHeaders != null) {\n+            String value = nettyHeaders.get(HttpHeaderNames.SET_COOKIE);\n+            if (value != null) {\n+                cookies = new LinkedHashMap<>();\n+                Set<io.netty.handler.codec.http.cookie.Cookie> nettyCookies = ServerCookieDecoder.LAX.decode(value);", "originalCommit": "b2b226baec4d59fdf03adbed2e04be2fc00deaa8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "03a9e5245299fb8fec19a5f70541f2fc2e42d7ae", "chunk": "diff --git a/http-netty/src/main/java/io/micronaut/http/netty/cookies/NettyCookies.java b/http-netty/src/main/java/io/micronaut/http/netty/cookies/NettyCookies.java\nindex df8b2e4fc..02e30c38a 100644\n--- a/http-netty/src/main/java/io/micronaut/http/netty/cookies/NettyCookies.java\n+++ b/http-netty/src/main/java/io/micronaut/http/netty/cookies/NettyCookies.java\n\n@@ -78,7 +78,7 @@ public class NettyCookies implements Cookies {\n             String value = nettyHeaders.get(HttpHeaderNames.SET_COOKIE);\n             if (value != null) {\n                 cookies = new LinkedHashMap<>();\n-                Set<io.netty.handler.codec.http.cookie.Cookie> nettyCookies = ServerCookieDecoder.LAX.decode(value);\n+                Set<io.netty.handler.codec.http.cookie.Cookie> nettyCookies = ServerCookieDecoder.STRICT.decode(value);\n                 for (io.netty.handler.codec.http.cookie.Cookie nettyCookie : nettyCookies) {\n                     cookies.put(nettyCookie.name(), new NettyCookie(nettyCookie));\n                 }\n"}}, {"oid": "03a9e5245299fb8fec19a5f70541f2fc2e42d7ae", "url": "https://github.com/micronaut-projects/micronaut-core/commit/03a9e5245299fb8fec19a5f70541f2fc2e42d7ae", "message": "Use Strict, add tests", "committedDate": "2020-09-01T21:30:24Z", "type": "commit"}, {"oid": "cbe17246b56c1319f00493d15741b94a0915bbf7", "url": "https://github.com/micronaut-projects/micronaut-core/commit/cbe17246b56c1319f00493d15741b94a0915bbf7", "message": "adding testing for cookie parse", "committedDate": "2020-09-02T14:00:58Z", "type": "commit"}, {"oid": "d431b8d3a45a7de706d02d31446c4c49055b6350", "url": "https://github.com/micronaut-projects/micronaut-core/commit/d431b8d3a45a7de706d02d31446c4c49055b6350", "message": "adding tests for cookies", "committedDate": "2020-09-02T14:44:56Z", "type": "commit"}]}