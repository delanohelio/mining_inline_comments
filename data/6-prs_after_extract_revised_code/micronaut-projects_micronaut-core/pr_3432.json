{"pr_number": 3432, "pr_title": "Prevent parallel invocation instrumentation", "pr_createdAt": "2020-06-08T09:40:26Z", "pr_url": "https://github.com/micronaut-projects/micronaut-core/pull/3432", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjU5MzU3Mg==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3432#discussion_r436593572", "bodyText": "@dstepanov This does not seem right here. Did you want to remove the active field completely or did you just accidentally deleted line 63?", "author": "lgathy", "createdAt": "2020-06-08T10:17:04Z", "path": "runtime/src/main/java/io/micronaut/reactive/rxjava2/RxInstrumentedConnectableObservable.java", "diffHunk": "@@ -59,8 +59,7 @@ protected void subscribeActual(Observer<? super T> o) {\n             instrumenter.beforeInvocation();\n             source.subscribe(o);\n         } finally {\n-            instrumenter.afterInvocation(false);\n-            active = false;", "originalCommit": "7332664876790e550788ad9f419e93ca1c4985ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjU5Nzg4NQ==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/3432#discussion_r436597885", "bodyText": "You're right, that was a mistake", "author": "dstepanov", "createdAt": "2020-06-08T10:25:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjU5MzU3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "96dd471ebaadd0e03e0f68bd8f7051defa7ff368", "chunk": "diff --git a/runtime/src/main/java/io/micronaut/reactive/rxjava2/RxInstrumentedConnectableObservable.java b/runtime/src/main/java/io/micronaut/reactive/rxjava2/RxInstrumentedConnectableObservable.java\nindex 804151d62..2755796f6 100644\n--- a/runtime/src/main/java/io/micronaut/reactive/rxjava2/RxInstrumentedConnectableObservable.java\n+++ b/runtime/src/main/java/io/micronaut/reactive/rxjava2/RxInstrumentedConnectableObservable.java\n\n@@ -59,7 +59,8 @@ final class RxInstrumentedConnectableObservable<T> extends ConnectableObservable\n             instrumenter.beforeInvocation();\n             source.subscribe(o);\n         } finally {\n-            instrumenter.afterInvocation();\n+            instrumenter.afterInvocation(false);\n+            active = false;\n         }\n     }\n \n"}}, {"oid": "96dd471ebaadd0e03e0f68bd8f7051defa7ff368", "url": "https://github.com/micronaut-projects/micronaut-core/commit/96dd471ebaadd0e03e0f68bd8f7051defa7ff368", "message": "Prevent parallel invocation instrumentation", "committedDate": "2020-06-08T10:24:23Z", "type": "commit"}, {"oid": "96dd471ebaadd0e03e0f68bd8f7051defa7ff368", "url": "https://github.com/micronaut-projects/micronaut-core/commit/96dd471ebaadd0e03e0f68bd8f7051defa7ff368", "message": "Prevent parallel invocation instrumentation", "committedDate": "2020-06-08T10:24:23Z", "type": "forcePushed"}]}