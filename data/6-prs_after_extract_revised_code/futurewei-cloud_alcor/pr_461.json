{"pr_number": 461, "pr_title": "[E2E Integration] Fix Subnet Deletion & Router Unbinding Issue", "pr_createdAt": "2020-11-03T23:58:36Z", "pr_url": "https://github.com/futurewei-cloud/alcor/pull/461", "timeline": [{"oid": "24b9b76ae349f277ac55f1cc11e81636d1569b6d", "url": "https://github.com/futurewei-cloud/alcor/commit/24b9b76ae349f277ac55f1cc11e81636d1569b6d", "message": "commit message", "committedDate": "2020-10-07T21:49:22Z", "type": "commit"}, {"oid": "08ec421662ef56559a388e6c7308aa47cfd07a6b", "url": "https://github.com/futurewei-cloud/alcor/commit/08ec421662ef56559a388e6c7308aa47cfd07a6b", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-07T22:00:25Z", "type": "commit"}, {"oid": "2507b8fc44a4ca94da310b73c11453cec9f2504b", "url": "https://github.com/futurewei-cloud/alcor/commit/2507b8fc44a4ca94da310b73c11453cec9f2504b", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-15T17:12:49Z", "type": "commit"}, {"oid": "8cab6bfa9573926c29b9f8dbbeab732a9de1da7e", "url": "https://github.com/futurewei-cloud/alcor/commit/8cab6bfa9573926c29b9f8dbbeab732a9de1da7e", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-15T23:33:06Z", "type": "commit"}, {"oid": "d9d2a5822429286e2b01ce0842f16cb70dc5168f", "url": "https://github.com/futurewei-cloud/alcor/commit/d9d2a5822429286e2b01ce0842f16cb70dc5168f", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-16T16:57:50Z", "type": "commit"}, {"oid": "daba98ee8949b91b2b77f74c6fbb30529355ee51", "url": "https://github.com/futurewei-cloud/alcor/commit/daba98ee8949b91b2b77f74c6fbb30529355ee51", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-20T00:03:13Z", "type": "commit"}, {"oid": "b813735c5032b70928a2304007875824f5ccedca", "url": "https://github.com/futurewei-cloud/alcor/commit/b813735c5032b70928a2304007875824f5ccedca", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-22T17:43:05Z", "type": "commit"}, {"oid": "fd9a9847b0f42c5a7fd089ea09fa6f24233d008e", "url": "https://github.com/futurewei-cloud/alcor/commit/fd9a9847b0f42c5a7fd089ea09fa6f24233d008e", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-28T19:40:54Z", "type": "commit"}, {"oid": "e44875aa2fa685b2252647f413c704dce7a21611", "url": "https://github.com/futurewei-cloud/alcor/commit/e44875aa2fa685b2252647f413c704dce7a21611", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-29T18:42:59Z", "type": "commit"}, {"oid": "98dcf0dbb1c950ee71a0d663a7042cbce30d24ed", "url": "https://github.com/futurewei-cloud/alcor/commit/98dcf0dbb1c950ee71a0d663a7042cbce30d24ed", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-10-30T22:44:46Z", "type": "commit"}, {"oid": "a9c3a47d74ba5fffbe13746ee4e33af0fbb394fe", "url": "https://github.com/futurewei-cloud/alcor/commit/a9c3a47d74ba5fffbe13746ee4e33af0fbb394fe", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master", "committedDate": "2020-11-03T23:40:18Z", "type": "commit"}, {"oid": "3669c9e13c2e39cc177ba4c9996add77aaaf7466", "url": "https://github.com/futurewei-cloud/alcor/commit/3669c9e13c2e39cc177ba4c9996add77aaaf7466", "message": "update", "committedDate": "2020-11-03T23:46:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM1NjY0MA==", "url": "https://github.com/futurewei-cloud/alcor/pull/461#discussion_r517356640", "bodyText": "We will need a better handling of exceptions.\n\nEvaluate whether or not we will need to log information for the caught exception.\nIf logging is an option, we will like to include useful information in the message (in this case, subnet id etc.)\nIf not, we could combine exceptions in one line, for example,\n\ncatch(ParameterNullOrEmptyException | HavePortInSubnet e)\n{\n...\n}", "author": "xieus", "createdAt": "2020-11-04T13:51:39Z", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "diffHunk": "@@ -477,6 +477,10 @@ public ResponseId deleteSubnetState(@PathVariable String projectId, @PathVariabl\n         } catch (ParameterNullOrEmptyException e) {\n             logger.error(e.getMessage());\n             throw new Exception(e);\n+        } catch (HavePortInSubnet e) {", "originalCommit": "3669c9e13c2e39cc177ba4c9996add77aaaf7466", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzUzOTAzMg==", "url": "https://github.com/futurewei-cloud/alcor/pull/461#discussion_r517539032", "bodyText": "Sure", "author": "kevin-zhonghao", "createdAt": "2020-11-04T18:13:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM1NjY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzU3MDU5OQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/461#discussion_r517570599", "bodyText": "I checked the code and found that it was not good to log the info, so I combined exceptions in one line.", "author": "kevin-zhonghao", "createdAt": "2020-11-04T19:09:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM1NjY0MA=="}], "type": "inlineReview", "revised_code": {"commit": "28af26b782df496b123768cde56bff15159e366d", "chunk": "diff --git a/services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java b/services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java\nindex e3ec5c82..8bfc0d7d 100644\n--- a/services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java\n+++ b/services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java\n\n@@ -474,13 +474,9 @@ public class SubnetController {\n             // delete subnet id in vpc\n             this.subnetService.deleteSubnetIdInVpc(subnetId, projectId, subnetEntity.getVpcId());\n \n-        } catch (ParameterNullOrEmptyException e) {\n+        } catch (ParameterNullOrEmptyException | HavePortInSubnet | SubnetBindRoutes e) {\n             logger.error(e.getMessage());\n             throw new Exception(e);\n-        } catch (HavePortInSubnet e) {\n-            throw e;\n-        } catch (SubnetBindRoutes e) {\n-            throw e;\n         }\n \n         return new ResponseId(subnetId);\n"}}, {"oid": "28af26b782df496b123768cde56bff15159e366d", "url": "https://github.com/futurewei-cloud/alcor/commit/28af26b782df496b123768cde56bff15159e366d", "message": "update", "committedDate": "2020-11-04T19:10:03Z", "type": "commit"}]}