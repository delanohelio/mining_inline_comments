{"pr_number": 220, "pr_title": "Rename Port/Route Web Classes, and Update Kubernetes yaml", "pr_createdAt": "2020-05-28T22:34:29Z", "pr_url": "https://github.com/futurewei-cloud/alcor/pull/220", "timeline": [{"oid": "43af222551b38dacdee52211a4b9322d9c1e91be", "url": "https://github.com/futurewei-cloud/alcor/commit/43af222551b38dacdee52211a4b9322d9c1e91be", "message": "create branch", "committedDate": "2020-05-22T22:33:08Z", "type": "commit"}, {"oid": "7bca3c9b8bccddb0f70f2a074c2b9610767b385d", "url": "https://github.com/futurewei-cloud/alcor/commit/7bca3c9b8bccddb0f70f2a074c2b9610767b385d", "message": "sync up", "committedDate": "2020-05-26T18:10:59Z", "type": "commit"}, {"oid": "9c736c16c0b298618d836ef7e9c99e064e116e74", "url": "https://github.com/futurewei-cloud/alcor/commit/9c736c16c0b298618d836ef7e9c99e064e116e74", "message": "Merge branch 'new_master' into feature/pending_items", "committedDate": "2020-05-26T18:16:38Z", "type": "commit"}, {"oid": "505c496b93145d89365f31a4d7019226c8a614fa", "url": "https://github.com/futurewei-cloud/alcor/commit/505c496b93145d89365f31a4d7019226c8a614fa", "message": "Rename RouteEntity and PortEntity, update port manager and node manager yaml files", "committedDate": "2020-05-28T22:31:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTY4OQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432169689", "bodyText": "Thanks for updating the comment as well \ud83d\udc4d", "author": "xieus", "createdAt": "2020-05-28T23:00:21Z", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/controller/PortController.java", "diffHunk": "@@ -36,16 +36,16 @@\n      * If any exception occurs in the added process, we need to roll back\n      * the resource allocated from each micro-service.\n      * @param projectId Project the port belongs to\n-     * @param portStateJson Port configuration\n+     * @param portWebJson Port configuration", "originalCommit": "505c496b93145d89365f31a4d7019226c8a614fa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODM2NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432178365", "bodyText": "rename the variable name to \"route\"", "author": "xieus", "createdAt": "2020-05-28T23:28:42Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -50,7 +50,7 @@\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        RouteWebObject routeState = null;\n+        RouteEntity routeState = null;", "originalCommit": "505c496b93145d89365f31a4d7019226c8a614fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE5NzY5Mw==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432197693", "bodyText": "Sure", "author": "kevin-zhonghao", "createdAt": "2020-05-29T00:40:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODM2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "f121481b5cac3a1d7411cd838f63b0a7581805ad", "chunk": "diff --git a/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java b/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java\nindex c993f127..478529da 100644\n--- a/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java\n+++ b/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java\n\n@@ -50,7 +50,7 @@ public class RouteController {\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        RouteEntity routeState = null;\n+        Route routeState = null;\n \n         try {\n             RestPreconditionsUtil.verifyParameterNotNullorEmpty(vpcId);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODY3MQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432178671", "bodyText": "maybe rename the variable name to \"route\"", "author": "xieus", "createdAt": "2020-05-28T23:29:45Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java", "diffHunk": "@@ -35,7 +35,7 @@ public Map getAllRoutes() throws CacheException {\n     }\n \n     @Override\n-    public void addRoute(RouteWebObject routeState) throws DatabasePersistenceException {\n+    public void addRoute(RouteEntity routeState) throws DatabasePersistenceException {", "originalCommit": "505c496b93145d89365f31a4d7019226c8a614fa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f121481b5cac3a1d7411cd838f63b0a7581805ad", "chunk": "diff --git a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java\nindex b5c7f4f4..34b285f5 100644\n--- a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java\n+++ b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java\n\n@@ -35,7 +35,7 @@ public class RouteDatabaseServiceImpl implements RouteDatabaseService {\n     }\n \n     @Override\n-    public void addRoute(RouteEntity routeState) throws DatabasePersistenceException {\n+    public void addRoute(Route routeState) throws DatabasePersistenceException {\n         try {\n             this.routeRepository.addItem(routeState);\n         } catch (Exception e) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODk1OQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432178959", "bodyText": "routeState => route", "author": "xieus", "createdAt": "2020-05-28T23:30:40Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java", "diffHunk": "@@ -4,15 +4,15 @@\n import com.futurewei.alcor.common.exception.DatabasePersistenceException;\n import com.futurewei.alcor.common.exception.ResourceNotFoundException;\n import com.futurewei.alcor.common.exception.ResourcePersistenceException;\n-import com.futurewei.alcor.web.entity.route.RouteWebObject;\n+import com.futurewei.alcor.web.entity.route.RouteEntity;\n \n import java.util.Map;\n \n public interface RouteDatabaseService {\n \n-    public RouteWebObject getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n+    public RouteEntity getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n     public Map getAllRoutes () throws CacheException;\n-    public void addRoute (RouteWebObject routeState) throws DatabasePersistenceException;\n+    public void addRoute (RouteEntity routeState) throws DatabasePersistenceException;", "originalCommit": "505c496b93145d89365f31a4d7019226c8a614fa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f121481b5cac3a1d7411cd838f63b0a7581805ad", "chunk": "diff --git a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java\nindex 8a46e90d..fd2e9468 100644\n--- a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java\n+++ b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java\n\n@@ -4,15 +4,15 @@ import com.futurewei.alcor.common.db.CacheException;\n import com.futurewei.alcor.common.exception.DatabasePersistenceException;\n import com.futurewei.alcor.common.exception.ResourceNotFoundException;\n import com.futurewei.alcor.common.exception.ResourcePersistenceException;\n-import com.futurewei.alcor.web.entity.route.RouteEntity;\n+import com.futurewei.alcor.web.entity.route.Route;\n \n import java.util.Map;\n \n public interface RouteDatabaseService {\n \n-    public RouteEntity getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n+    public Route getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n     public Map getAllRoutes () throws CacheException;\n-    public void addRoute (RouteEntity routeState) throws DatabasePersistenceException;\n+    public void addRoute (Route routeState) throws DatabasePersistenceException;\n     public void deleteRoute (String id) throws CacheException;\n \n }\n"}}, {"oid": "f121481b5cac3a1d7411cd838f63b0a7581805ad", "url": "https://github.com/futurewei-cloud/alcor/commit/f121481b5cac3a1d7411cd838f63b0a7581805ad", "message": "Fix UTs issues, rename route", "committedDate": "2020-05-29T00:45:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzMjE3NA==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432232174", "bodyText": "@kevin-zhonghao The change I was referring to was \"RouteEntity route = null\" :-)", "author": "xieus", "createdAt": "2020-05-29T03:08:29Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -50,7 +50,7 @@\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        RouteWebObject routeState = null;\n+        Route routeState = null;", "originalCommit": "f121481b5cac3a1d7411cd838f63b0a7581805ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1MjY0Mg==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432252642", "bodyText": "Sorry ~ I will change it right now", "author": "kevin-zhonghao", "createdAt": "2020-05-29T04:44:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzMjE3NA=="}], "type": "inlineReview", "revised_code": {"commit": "141655217ae5c3a6065c08fbecd470f68540b7f4", "chunk": "diff --git a/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java b/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java\nindex 478529da..1826e89d 100644\n--- a/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java\n+++ b/services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java\n\n@@ -50,24 +50,24 @@ public class RouteController {\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        Route routeState = null;\n+        RouteEntity routeEntity = null;\n \n         try {\n             RestPreconditionsUtil.verifyParameterNotNullorEmpty(vpcId);\n             RestPreconditionsUtil.verifyParameterNotNullorEmpty(routeId);\n \n-            routeState = this.routeDatabaseService.getByRouteId(routeId);\n+            routeEntity = this.routeDatabaseService.getByRouteId(routeId);\n         } catch (ParameterNullOrEmptyException e) {\n             //TODO: REST error code\n             throw new Exception(e);\n         }\n \n-        if (routeState == null) {\n+        if (routeEntity == null) {\n             //TODO: REST error code\n             return new RouteWebJson();\n         }\n \n-        return new RouteWebJson(routeState);\n+        return new RouteWebJson(routeEntity);\n     }\n \n     @RequestMapping(\n"}}, {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4", "url": "https://github.com/futurewei-cloud/alcor/commit/141655217ae5c3a6065c08fbecd470f68540b7f4", "message": "update route", "committedDate": "2020-05-29T04:45:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDc1Ng==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432254756", "bodyText": "This is good.", "author": "xieus", "createdAt": "2020-05-29T04:53:43Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -50,49 +50,49 @@\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        Route routeState = null;\n+        RouteEntity routeEntity = null;", "originalCommit": "141655217ae5c3a6065c08fbecd470f68540b7f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDg4OA==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432254888", "bodyText": "=> \"RouteEntity routeEntity\"", "author": "xieus", "createdAt": "2020-05-29T04:54:27Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java", "diffHunk": "@@ -35,9 +35,9 @@ public Map getAllRoutes() throws CacheException {\n     }\n \n     @Override\n-    public void addRoute(Route routeState) throws DatabasePersistenceException {\n+    public void addRoute(RouteEntity routeEntityState) throws DatabasePersistenceException {", "originalCommit": "141655217ae5c3a6065c08fbecd470f68540b7f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0597a70567298785a9efc1737dcc645c97d39755", "chunk": "diff --git a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java\nindex 682cec98..74997840 100644\n--- a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java\n+++ b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java\n\n@@ -35,9 +35,9 @@ public class RouteDatabaseServiceImpl implements RouteDatabaseService {\n     }\n \n     @Override\n-    public void addRoute(RouteEntity routeEntityState) throws DatabasePersistenceException {\n+    public void addRoute(RouteEntity routeEntity) throws DatabasePersistenceException {\n         try {\n-            this.routeRepository.addItem(routeEntityState);\n+            this.routeRepository.addItem(routeEntity);\n         } catch (Exception e) {\n             throw new DatabasePersistenceException(e.getMessage());\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDk5OQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432254999", "bodyText": "=> \"RouteEntity routeEntity\"", "author": "xieus", "createdAt": "2020-05-29T04:54:57Z", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java", "diffHunk": "@@ -4,15 +4,15 @@\n import com.futurewei.alcor.common.exception.DatabasePersistenceException;\n import com.futurewei.alcor.common.exception.ResourceNotFoundException;\n import com.futurewei.alcor.common.exception.ResourcePersistenceException;\n-import com.futurewei.alcor.web.entity.route.Route;\n+import com.futurewei.alcor.web.entity.route.RouteEntity;\n \n import java.util.Map;\n \n public interface RouteDatabaseService {\n \n-    public Route getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n+    public RouteEntity getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n     public Map getAllRoutes () throws CacheException;\n-    public void addRoute (Route routeState) throws DatabasePersistenceException;\n+    public void addRoute (RouteEntity routeEntityState) throws DatabasePersistenceException;", "originalCommit": "141655217ae5c3a6065c08fbecd470f68540b7f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI2NDAyNg==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432264026", "bodyText": "Sure", "author": "kevin-zhonghao", "createdAt": "2020-05-29T05:32:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDk5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "0597a70567298785a9efc1737dcc645c97d39755", "chunk": "diff --git a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java\nindex 05bf7415..47710aa9 100644\n--- a/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java\n+++ b/services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java\n\n@@ -12,7 +12,7 @@ public interface RouteDatabaseService {\n \n     public RouteEntity getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n     public Map getAllRoutes () throws CacheException;\n-    public void addRoute (RouteEntity routeEntityState) throws DatabasePersistenceException;\n+    public void addRoute (RouteEntity routeEntity) throws DatabasePersistenceException;\n     public void deleteRoute (String id) throws CacheException;\n \n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NTA3NA==", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432255074", "bodyText": "Revert back to \"RouteControllerTests\"", "author": "xieus", "createdAt": "2020-05-29T04:55:19Z", "path": "services/route_manager/src/test/java/com/futurewei/alcor/route/RouteEntityControllerTests.java", "diffHunk": "@@ -29,7 +29,7 @@\n @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n         properties = {\"httpbin=http://localhost:${wiremock.server.port}\"})\n @AutoConfigureMockMvc\n-public class RouteControllerTests {\n+public class RouteEntityControllerTests {", "originalCommit": "141655217ae5c3a6065c08fbecd470f68540b7f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0597a70567298785a9efc1737dcc645c97d39755", "chunk": "diff --git a/services/route_manager/src/test/java/com/futurewei/alcor/route/RouteEntityControllerTests.java b/services/route_manager/src/test/java/com/futurewei/alcor/route/RouteControllerTests.java\nsimilarity index 99%\nrename from services/route_manager/src/test/java/com/futurewei/alcor/route/RouteEntityControllerTests.java\nrename to services/route_manager/src/test/java/com/futurewei/alcor/route/RouteControllerTests.java\nindex daf0d752..b6c772f8 100644\n--- a/services/route_manager/src/test/java/com/futurewei/alcor/route/RouteEntityControllerTests.java\n+++ b/services/route_manager/src/test/java/com/futurewei/alcor/route/RouteControllerTests.java\n\n@@ -29,7 +29,7 @@ import java.io.IOException;\n @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n         properties = {\"httpbin=http://localhost:${wiremock.server.port}\"})\n @AutoConfigureMockMvc\n-public class RouteEntityControllerTests {\n+public class RouteControllerTests {\n \n     @Autowired\n     private MockMvc mockMvc;\n"}}, {"oid": "0597a70567298785a9efc1737dcc645c97d39755", "url": "https://github.com/futurewei-cloud/alcor/commit/0597a70567298785a9efc1737dcc645c97d39755", "message": "Fix issues", "committedDate": "2020-05-29T06:23:56Z", "type": "commit"}, {"oid": "7052f361447c39a085c98cd20f408cd9bf5177d6", "url": "https://github.com/futurewei-cloud/alcor/commit/7052f361447c39a085c98cd20f408cd9bf5177d6", "message": "Fix issues", "committedDate": "2020-05-29T06:47:30Z", "type": "commit"}]}