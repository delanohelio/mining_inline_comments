{"pr_number": 7530, "pr_title": "Add a toggle to fall back to rails based test connection API", "pr_createdAt": "2020-01-02T07:19:17Z", "pr_url": "https://github.com/gocd/gocd/pull/7530", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM4NjIxOA==", "url": "https://github.com/gocd/gocd/pull/7530#discussion_r362386218", "bodyText": "we don't need a separate class for this, we can add a method inside SparkOrRailsToggle class", "author": "GaneshSPatil", "createdAt": "2020-01-02T07:22:00Z", "path": "server/src/main/java/com/thoughtworks/go/server/MaterialTestConnectionToggle.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2020 ThoughtWorks, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.thoughtworks.go.server;\n+\n+import com.thoughtworks.go.server.service.support.toggle.Toggles;\n+\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+\n+public class MaterialTestConnectionToggle extends SparkOrRailsToggle {", "originalCommit": "18b6a9cd14f9cd3b21a8a5266ca0ad0647d22938", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9cea949ccfbc3f7e6e874c44cd87dc006f52afaf", "chunk": "diff --git a/server/src/main/java/com/thoughtworks/go/server/MaterialTestConnectionToggle.java b/server/src/main/java/com/thoughtworks/go/server/MaterialTestConnectionToggle.java\ndeleted file mode 100644\nindex 17f35ecb1d..0000000000\n--- a/server/src/main/java/com/thoughtworks/go/server/MaterialTestConnectionToggle.java\n+++ /dev/null\n\n@@ -1,27 +0,0 @@\n-/*\n- * Copyright 2020 ThoughtWorks, Inc.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *     http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-package com.thoughtworks.go.server;\n-\n-import com.thoughtworks.go.server.service.support.toggle.Toggles;\n-\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-\n-public class MaterialTestConnectionToggle extends SparkOrRailsToggle {\n-    public void testConnectionAPI(HttpServletRequest request, HttpServletResponse response) {\n-        basedOnToggle(Toggles.USE_RAILS_BASED_MATERIAL_TEST_CONNECTION_API, request);\n-    }\n-}\n"}}, {"oid": "9cea949ccfbc3f7e6e874c44cd87dc006f52afaf", "url": "https://github.com/gocd/gocd/commit/9cea949ccfbc3f7e6e874c44cd87dc006f52afaf", "message": "Add a toggle to fall back to rails based test connection API\n\n - Added `admin` in the spark based API to make it consistent with the rails one.\n - Added a toggle at urlrewrite level which based on toggle `use_rails_based_material_test_connection_api` will redirect to spark or rails based API. Default is spark based.", "committedDate": "2020-01-02T07:24:30Z", "type": "commit"}, {"oid": "9cea949ccfbc3f7e6e874c44cd87dc006f52afaf", "url": "https://github.com/gocd/gocd/commit/9cea949ccfbc3f7e6e874c44cd87dc006f52afaf", "message": "Add a toggle to fall back to rails based test connection API\n\n - Added `admin` in the spark based API to make it consistent with the rails one.\n - Added a toggle at urlrewrite level which based on toggle `use_rails_based_material_test_connection_api` will redirect to spark or rails based API. Default is spark based.", "committedDate": "2020-01-02T07:24:30Z", "type": "forcePushed"}]}