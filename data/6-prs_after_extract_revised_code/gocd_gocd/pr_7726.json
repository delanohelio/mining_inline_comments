{"pr_number": 7726, "pr_title": "Deprecate config repos API v2", "pr_createdAt": "2020-02-11T11:12:32Z", "pr_url": "https://github.com/gocd/gocd/pull/7726", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg1MTc4NQ==", "url": "https://github.com/gocd/gocd/pull/7726#discussion_r377851785", "bodyText": "WDYT about annotating the class as deprecated over passing these deprecation arguments in a constructor.", "author": "maheshp", "createdAt": "2020-02-11T19:31:23Z", "path": "api/api-config-repos-v2/src/main/java/com/thoughtworks/go/apiv2/configrepos/ConfigReposControllerV2.java", "diffHunk": "@@ -53,7 +53,7 @@\n \n     @Autowired\n     public ConfigReposControllerV2(ApiAuthenticationHelper authHelper, ConfigRepoService service, EntityHashingService entityHashingService) {\n-        super(ApiVersion.v2);\n+        super(ApiVersion.v2, EntityType.ConfigRepo.name(), \"20.2.0\", \"20.5.0\", ApiVersion.v3);", "originalCommit": "07a5dcae3728d929614af7329b003589bc1fc381", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ca6546d305c94e2426866c5b2e7942833f412474", "chunk": "diff --git a/api/api-config-repos-v2/src/main/java/com/thoughtworks/go/apiv2/configrepos/ConfigReposControllerV2.java b/api/api-config-repos-v2/src/main/java/com/thoughtworks/go/apiv2/configrepos/ConfigReposControllerV2.java\nindex 7827582f14..fb60de087e 100644\n--- a/api/api-config-repos-v2/src/main/java/com/thoughtworks/go/apiv2/configrepos/ConfigReposControllerV2.java\n+++ b/api/api-config-repos-v2/src/main/java/com/thoughtworks/go/apiv2/configrepos/ConfigReposControllerV2.java\n\n@@ -46,6 +47,7 @@ import static java.util.stream.Collectors.toCollection;\n import static spark.Spark.*;\n \n @Component\n+@DeprecatedAPI(deprecatedApiVersion = ApiVersion.v2, successorApiVersion = ApiVersion.v3, deprecatedIn = \"20.2.0\", removalIn = \"20.5.0\", entityName = \"Config Repo\")\n public class ConfigReposControllerV2 extends ApiController implements SparkSpringController, CrudController<ConfigRepoConfig> {\n     private final ApiAuthenticationHelper authHelper;\n     private final ConfigRepoService service;\n"}}, {"oid": "ca6546d305c94e2426866c5b2e7942833f412474", "url": "https://github.com/gocd/gocd/commit/ca6546d305c94e2426866c5b2e7942833f412474", "message": "Deprecate config repos API v2", "committedDate": "2020-02-12T07:48:21Z", "type": "commit"}, {"oid": "ca6546d305c94e2426866c5b2e7942833f412474", "url": "https://github.com/gocd/gocd/commit/ca6546d305c94e2426866c5b2e7942833f412474", "message": "Deprecate config repos API v2", "committedDate": "2020-02-12T07:48:21Z", "type": "forcePushed"}]}