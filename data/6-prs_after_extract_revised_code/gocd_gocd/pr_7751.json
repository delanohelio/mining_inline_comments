{"pr_number": 7751, "pr_title": "Do not set 0 as default for runInstanceCount", "pr_createdAt": "2020-02-19T09:28:45Z", "pr_url": "https://github.com/gocd/gocd/pull/7751", "timeline": [{"oid": "960df0917a817466c00e34c06ec1a2150f0e5da6", "url": "https://github.com/gocd/gocd/commit/960df0917a817466c00e34c06ec1a2150f0e5da6", "message": "do not set 0 as default for runInstanceCount\n\n - If no value is set for runInstanceCount - it should be defaulted to null rather than 0", "committedDate": "2020-02-19T10:12:06Z", "type": "commit"}, {"oid": "960df0917a817466c00e34c06ec1a2150f0e5da6", "url": "https://github.com/gocd/gocd/commit/960df0917a817466c00e34c06ec1a2150f0e5da6", "message": "do not set 0 as default for runInstanceCount\n\n - If no value is set for runInstanceCount - it should be defaulted to null rather than 0", "committedDate": "2020-02-19T10:12:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4NzQyNg==", "url": "https://github.com/gocd/gocd/pull/7751#discussion_r381887426", "bodyText": "Blow up if runInstanceCount is null and change the return type to int.", "author": "kritika-singh3", "createdAt": "2020-02-20T09:44:42Z", "path": "config/config-api/src/main/java/com/thoughtworks/go/config/JobConfig.java", "diffHunk": "@@ -226,11 +226,12 @@ public void setRunOnAllAgents(boolean runOnAllAgents) {\n     }\n \n \tpublic boolean isRunMultipleInstanceType() {\n-\t\treturn getRunInstanceCountValue() > 0;\n+        Integer runInstanceCountValue = getRunInstanceCountValue();\n+        return runInstanceCountValue != null && runInstanceCountValue > 0;\n \t}\n \n \tpublic Integer getRunInstanceCountValue() {\n-\t\treturn runInstanceCount == null ? 0 : Integer.valueOf(runInstanceCount);\n+\t\treturn isBlank(runInstanceCount) ? null : Integer.valueOf(runInstanceCount);\n \t}", "originalCommit": "960df0917a817466c00e34c06ec1a2150f0e5da6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}