{"pr_number": 2158, "pr_title": "[MINOR]Optimization for Option", "pr_createdAt": "2020-10-09T13:20:27Z", "pr_url": "https://github.com/apache/hudi/pull/2158", "timeline": [{"oid": "20f8e3802d3ef00a002eff9fa7a2bacc3b9b6a6d", "url": "https://github.com/apache/hudi/commit/20f8e3802d3ef00a002eff9fa7a2bacc3b9b6a6d", "message": "Optimization for Option", "committedDate": "2020-10-09T14:07:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4NzcwNw==", "url": "https://github.com/apache/hudi/pull/2158#discussion_r502687707", "bodyText": "let's make this more contextual?\nmapper is expected to be non-null?", "author": "vinothchandar", "createdAt": "2020-10-09T22:02:13Z", "path": "hudi-common/src/main/java/org/apache/hudi/common/util/Option.java", "diffHunk": "@@ -98,6 +98,9 @@ public void ifPresent(Consumer<? super T> consumer) {\n   }\n \n   public <U> Option<U> map(Function<? super T, ? extends U> mapper) {\n+    if (null == mapper) {\n+      throw new NullPointerException(\"Expected a non-null value. Got null\");", "originalCommit": "20f8e3802d3ef00a002eff9fa7a2bacc3b9b6a6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc0ODQwMg==", "url": "https://github.com/apache/hudi/pull/2158#discussion_r502748402", "bodyText": "Thanks.", "author": "dugenkui03", "createdAt": "2020-10-10T05:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4NzcwNw=="}], "type": "inlineReview", "revised_code": {"commit": "260eecb58a5521bce94535bd5aabbcaa58d2a7bf", "chunk": "diff --git a/hudi-common/src/main/java/org/apache/hudi/common/util/Option.java b/hudi-common/src/main/java/org/apache/hudi/common/util/Option.java\nindex a5d66bac2..42d605796 100644\n--- a/hudi-common/src/main/java/org/apache/hudi/common/util/Option.java\n+++ b/hudi-common/src/main/java/org/apache/hudi/common/util/Option.java\n\n@@ -99,7 +99,7 @@ public final class Option<T> implements Serializable {\n \n   public <U> Option<U> map(Function<? super T, ? extends U> mapper) {\n     if (null == mapper) {\n-      throw new NullPointerException(\"Expected a non-null value. Got null\");\n+      throw new NullPointerException(\"mapper should not be null\");\n     }\n     if (!isPresent()) {\n       return empty();\n"}}, {"oid": "260eecb58a5521bce94535bd5aabbcaa58d2a7bf", "url": "https://github.com/apache/hudi/commit/260eecb58a5521bce94535bd5aabbcaa58d2a7bf", "message": "Optimization for Option", "committedDate": "2020-10-10T04:03:13Z", "type": "commit"}, {"oid": "260eecb58a5521bce94535bd5aabbcaa58d2a7bf", "url": "https://github.com/apache/hudi/commit/260eecb58a5521bce94535bd5aabbcaa58d2a7bf", "message": "Optimization for Option", "committedDate": "2020-10-10T04:03:13Z", "type": "forcePushed"}]}