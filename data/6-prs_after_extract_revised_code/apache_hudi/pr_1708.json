{"pr_number": 1708, "pr_title": "[HUDI-1000] Fix incremental query for COW non-partitioned table with no data", "pr_createdAt": "2020-06-06T05:08:55Z", "pr_url": "https://github.com/apache/hudi/pull/1708", "timeline": [{"oid": "ae34f436c0d89cc22ce4e979c166049b7f2fc92b", "url": "https://github.com/apache/hudi/commit/ae34f436c0d89cc22ce4e979c166049b7f2fc92b", "message": "Merge pull request #1 from apache/master\n\nsynchronous source code", "committedDate": "2020-06-04T15:57:44Z", "type": "commit"}, {"oid": "49a8b9ea07f5dec77eb5cd97e5fc303ce3dd891a", "url": "https://github.com/apache/hudi/commit/49a8b9ea07f5dec77eb5cd97e5fc303ce3dd891a", "message": "[hudi-1000] fix incremental query for COW non-partitioned table no data", "committedDate": "2020-06-06T04:53:04Z", "type": "commit"}, {"oid": "ad0809d45737dffc7c2c86e0527483169e8645ef", "url": "https://github.com/apache/hudi/commit/ad0809d45737dffc7c2c86e0527483169e8645ef", "message": "Merge branch 'master' of https://github.com/hj2016/incubator-hudi\nMerge branch 'master' of https://github.com/hj2016/incubator-hudi", "committedDate": "2020-06-06T04:58:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI1NTUxMg==", "url": "https://github.com/apache/hudi/pull/1708#discussion_r436255512", "bodyText": "\"\".equals(s) would be changed to StringUtils.isNullOrEmpty", "author": "leesf", "createdAt": "2020-06-06T09:53:32Z", "path": "hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieParquetInputFormat.java", "diffHunk": "@@ -183,7 +183,7 @@ protected HoodieDefaultTimeline filterInstantsTimeline(HoodieDefaultTimeline tim\n       return null;\n     }\n     String incrementalInputPaths = partitionsToList.stream()\n-        .map(s -> tableMetaClient.getBasePath() + Path.SEPARATOR + s)\n+        .map(s -> \"\".equals(s) ? tableMetaClient.getBasePath() : tableMetaClient.getBasePath() + Path.SEPARATOR + s)", "originalCommit": "ad0809d45737dffc7c2c86e0527483169e8645ef", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "081101d30f3f905dbd8698299af0934400b9727a", "chunk": "diff --git a/hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieParquetInputFormat.java b/hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieParquetInputFormat.java\nindex febbe67c6..5a10f3c99 100644\n--- a/hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieParquetInputFormat.java\n+++ b/hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/HoodieParquetInputFormat.java\n\n@@ -183,7 +183,7 @@ public class HoodieParquetInputFormat extends MapredParquetInputFormat implement\n       return null;\n     }\n     String incrementalInputPaths = partitionsToList.stream()\n-        .map(s -> \"\".equals(s) ? tableMetaClient.getBasePath() : tableMetaClient.getBasePath() + Path.SEPARATOR + s)\n+        .map(s -> StringUtils.isNullOrEmpty(s) ? tableMetaClient.getBasePath() : tableMetaClient.getBasePath() + Path.SEPARATOR + s)\n         .filter(s -> {\n           /*\n            * Ensure to return only results from the original input path that has incremental changes\n"}}, {"oid": "081101d30f3f905dbd8698299af0934400b9727a", "url": "https://github.com/apache/hudi/commit/081101d30f3f905dbd8698299af0934400b9727a", "message": "[HUDI-1000] fix incremental query for COW non-partitioned table no data", "committedDate": "2020-06-06T09:57:43Z", "type": "commit"}]}