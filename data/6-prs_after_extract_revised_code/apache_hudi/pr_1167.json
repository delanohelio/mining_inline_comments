{"pr_number": 1167, "pr_title": "[HUDI-484] Fix NPE when reading IncrementalPull.sqltemplate in HiveIncrementalPuller", "pr_createdAt": "2020-01-01T00:08:48Z", "pr_url": "https://github.com/apache/hudi/pull/1167", "timeline": [{"oid": "628b392e273fb1e0fcfc52688ad5d7f259722cdc", "url": "https://github.com/apache/hudi/commit/628b392e273fb1e0fcfc52688ad5d7f259722cdc", "message": "[HUDI-484] Fix NPE when reading IncrementalPull.sqltemplate in HiveIncrementalPuller", "committedDate": "2019-12-31T23:48:34Z", "type": "commit"}, {"oid": "5e041dad032a5cf1875d2d708e9ad5863b506967", "url": "https://github.com/apache/hudi/commit/5e041dad032a5cf1875d2d708e9ad5863b506967", "message": "Add init HiveIncrementalPuller unit test", "committedDate": "2020-01-01T17:26:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM2NTg2OQ==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r362365869", "bodyText": "rename to setup()? most of our tests are that way I think.", "author": "vinothchandar", "createdAt": "2020-01-02T03:48:41Z", "path": "hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java", "diffHunk": "@@ -0,0 +1,24 @@\n+package org.apache.hudi.utilities;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class TestHiveIncrementalPuller {\n+\n+  private HiveIncrementalPuller.Config config;\n+\n+  @Before\n+  public void init() {", "originalCommit": "5e041dad032a5cf1875d2d708e9ad5863b506967", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1NDEyMg==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r363054122", "bodyText": "Done.", "author": "lamberken", "createdAt": "2020-01-04T20:40:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM2NTg2OQ=="}], "type": "inlineReview", "revised_code": {"commit": "254e8a5e537b6a733aa1f95e16ebc767b34a61e2", "chunk": "diff --git a/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java b/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\nindex 21288d05be..ba807674f9 100644\n--- a/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\n+++ b/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\n\n@@ -9,15 +9,18 @@ public class TestHiveIncrementalPuller {\n   private HiveIncrementalPuller.Config config;\n \n   @Before\n-  public void init() {\n+  public void setup() {\n     config = new HiveIncrementalPuller.Config();\n   }\n \n   @Test\n   public void testInitHiveIncrementalPuller() throws Exception {\n \n-    HiveIncrementalPuller puller = new HiveIncrementalPuller(config);\n-    Assert.assertNotNull(puller);\n+    try {\n+      new HiveIncrementalPuller(config);\n+    } catch (Exception e) {\n+      Assert.fail(\"Unexpected exception while init HiveIncrementalPuller, msg: \" + e.getMessage());\n+    }\n \n   }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM2NjAyMw==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r362366023", "bodyText": "Not following this.. a constructor can either throw an exception or return a non-null object right? should we be using a try-catch and calling fail from the catch block to ensure the NPE is not thrown?", "author": "vinothchandar", "createdAt": "2020-01-02T03:50:24Z", "path": "hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java", "diffHunk": "@@ -0,0 +1,24 @@\n+package org.apache.hudi.utilities;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class TestHiveIncrementalPuller {\n+\n+  private HiveIncrementalPuller.Config config;\n+\n+  @Before\n+  public void init() {\n+    config = new HiveIncrementalPuller.Config();\n+  }\n+\n+  @Test\n+  public void testInitHiveIncrementalPuller() throws Exception {\n+\n+    HiveIncrementalPuller puller = new HiveIncrementalPuller(config);", "originalCommit": "5e041dad032a5cf1875d2d708e9ad5863b506967", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM2OTczNw==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r362369737", "bodyText": "Got it, thank you for your guidance.", "author": "lamberken", "createdAt": "2020-01-02T04:38:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM2NjAyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1NDE0NA==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r363054144", "bodyText": "Done.", "author": "lamberken", "createdAt": "2020-01-04T20:41:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM2NjAyMw=="}], "type": "inlineReview", "revised_code": {"commit": "254e8a5e537b6a733aa1f95e16ebc767b34a61e2", "chunk": "diff --git a/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java b/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\nindex 21288d05be..ba807674f9 100644\n--- a/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\n+++ b/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\n\n@@ -9,15 +9,18 @@ public class TestHiveIncrementalPuller {\n   private HiveIncrementalPuller.Config config;\n \n   @Before\n-  public void init() {\n+  public void setup() {\n     config = new HiveIncrementalPuller.Config();\n   }\n \n   @Test\n   public void testInitHiveIncrementalPuller() throws Exception {\n \n-    HiveIncrementalPuller puller = new HiveIncrementalPuller(config);\n-    Assert.assertNotNull(puller);\n+    try {\n+      new HiveIncrementalPuller(config);\n+    } catch (Exception e) {\n+      Assert.fail(\"Unexpected exception while init HiveIncrementalPuller, msg: \" + e.getMessage());\n+    }\n \n   }\n \n"}}, {"oid": "254e8a5e537b6a733aa1f95e16ebc767b34a61e2", "url": "https://github.com/apache/hudi/commit/254e8a5e537b6a733aa1f95e16ebc767b34a61e2", "message": "Update HiveIncrementalPuller unit test", "committedDate": "2020-01-04T20:39:43Z", "type": "commit"}, {"oid": "4accdc1c939e24356f3798c7874c2283ab2ef23b", "url": "https://github.com/apache/hudi/commit/4accdc1c939e24356f3798c7874c2283ab2ef23b", "message": "Fix typo", "committedDate": "2020-01-04T20:54:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA3MzM3OA==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r363073378", "bodyText": "nit: do we still need the throws Exception? :)", "author": "vinothchandar", "createdAt": "2020-01-05T06:58:41Z", "path": "hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package org.apache.hudi.utilities;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+public class TestHiveIncrementalPuller {\n+\n+  private HiveIncrementalPuller.Config config;\n+\n+  @Before\n+  public void setup() {\n+    config = new HiveIncrementalPuller.Config();\n+  }\n+\n+  @Test\n+  public void testInitHiveIncrementalPuller() throws Exception {", "originalCommit": "4accdc1c939e24356f3798c7874c2283ab2ef23b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA3MzY1MQ==", "url": "https://github.com/apache/hudi/pull/1167#discussion_r363073651", "bodyText": "Good catch \ud83d\udc4d . Sorry, I forgot to delete it.", "author": "lamberken", "createdAt": "2020-01-05T07:04:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA3MzM3OA=="}], "type": "inlineReview", "revised_code": {"commit": "a5b893142782eb82e51796c58e569da4d08774a7", "chunk": "diff --git a/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java b/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\nindex 95b85f685a..74a75878c4 100644\n--- a/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\n+++ b/hudi-utilities/src/test/java/org/apache/hudi/utilities/TestHiveIncrementalPuller.java\n\n@@ -14,7 +14,7 @@ public class TestHiveIncrementalPuller {\n   }\n \n   @Test\n-  public void testInitHiveIncrementalPuller() throws Exception {\n+  public void testInitHiveIncrementalPuller() {\n \n     try {\n       new HiveIncrementalPuller(config);\n"}}, {"oid": "a5b893142782eb82e51796c58e569da4d08774a7", "url": "https://github.com/apache/hudi/commit/a5b893142782eb82e51796c58e569da4d08774a7", "message": "Remove throw statement", "committedDate": "2020-01-05T07:03:00Z", "type": "commit"}]}