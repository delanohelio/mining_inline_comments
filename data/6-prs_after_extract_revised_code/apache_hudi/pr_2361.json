{"pr_number": 2361, "pr_title": "[HUDI-1485] Fix Deletes issued without any prior commits exception", "pr_createdAt": "2020-12-22T08:19:57Z", "pr_url": "https://github.com/apache/hudi/pull/2361", "timeline": [{"oid": "ac0f4d0bdda0a34644c74650cbfff505d02a8cc3", "url": "https://github.com/apache/hudi/commit/ac0f4d0bdda0a34644c74650cbfff505d02a8cc3", "message": "[HUDI-1485] Fix Deletes issued without any prior commits exception", "committedDate": "2020-12-22T07:24:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE0NjEyNQ==", "url": "https://github.com/apache/hudi/pull/2361#discussion_r547146125", "bodyText": "good catch", "author": "Trevor-zhang", "createdAt": "2020-12-22T08:47:56Z", "path": "hudi-client/hudi-client-common/src/main/java/org/apache/hudi/client/AbstractHoodieWriteClient.java", "diffHunk": "@@ -772,7 +772,8 @@ protected void setWriteSchemaForDeletes(HoodieTableMetaClient metaClient) {\n     try {\n       HoodieActiveTimeline activeTimeline = metaClient.getActiveTimeline();\n       Option<HoodieInstant> lastInstant =\n-          activeTimeline.filterCompletedInstants().filter(s -> s.getAction().equals(metaClient.getCommitActionType()))\n+          activeTimeline.filterCompletedInstants().filter(s -> s.getAction().equals(metaClient.getCommitActionType())\n+          || s.getAction().equals(HoodieActiveTimeline.REPLACE_COMMIT_ACTION))", "originalCommit": "ac0f4d0bdda0a34644c74650cbfff505d02a8cc3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}