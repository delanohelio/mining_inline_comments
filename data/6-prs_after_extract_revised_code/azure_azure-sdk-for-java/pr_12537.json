{"pr_number": 12537, "pr_title": "Regenerate swagger classes, fix access and creation of models.", "pr_createdAt": "2020-06-26T20:42:45Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12537", "timeline": [{"oid": "e95d31e1e2e9b8950b8be229fcb4833483d5ce16", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e95d31e1e2e9b8950b8be229fcb4833483d5ce16", "message": "Updating README.md", "committedDate": "2020-06-26T01:14:50Z", "type": "commit"}, {"oid": "9e642aa93f2d841ba631fd0057fcd3393f2df37a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9e642aa93f2d841ba631fd0057fcd3393f2df37a", "message": "Regenerating classes.", "committedDate": "2020-06-26T02:00:21Z", "type": "commit"}, {"oid": "1b64273811b478cd1986b196a1fec950e4224223", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1b64273811b478cd1986b196a1fec950e4224223", "message": "Updating classes in README.", "committedDate": "2020-06-26T02:00:39Z", "type": "commit"}, {"oid": "04ec244205f0dd30e81d146bd9965637fc79434a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/04ec244205f0dd30e81d146bd9965637fc79434a", "message": "Fixing build breaks in tests.", "committedDate": "2020-06-26T02:24:57Z", "type": "commit"}, {"oid": "f278359852f0fa90fe5e61baa34c87261894ef26", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f278359852f0fa90fe5e61baa34c87261894ef26", "message": "Adding QueueHelper to access internal methods.", "committedDate": "2020-06-26T02:50:50Z", "type": "commit"}, {"oid": "4c78d3c73e826ea210d3fce1f9b1c97102d3d1be", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4c78d3c73e826ea210d3fce1f9b1c97102d3d1be", "message": "Adding serializerAdapter.", "committedDate": "2020-06-26T03:39:06Z", "type": "commit"}, {"oid": "504ca0f14d07bf33e184e7e01b6bc942d1b36579", "url": "https://github.com/Azure/azure-sdk-for-java/commit/504ca0f14d07bf33e184e7e01b6bc942d1b36579", "message": "Regenerate models after pulling latest.", "committedDate": "2020-06-26T03:55:58Z", "type": "commit"}, {"oid": "cc19c649fa69655113478ca2d299dbd7b0d401aa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cc19c649fa69655113478ca2d299dbd7b0d401aa", "message": "Adding proper title.", "committedDate": "2020-06-26T07:47:58Z", "type": "commit"}, {"oid": "55a01e40ebd7b3d4286f5407572effd471201a89", "url": "https://github.com/Azure/azure-sdk-for-java/commit/55a01e40ebd7b3d4286f5407572effd471201a89", "message": "Regenerate models from updated swagger.json.", "committedDate": "2020-06-26T19:13:04Z", "type": "commit"}, {"oid": "b4a0b6f406bdefb657300b9d69af814128041ba6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b4a0b6f406bdefb657300b9d69af814128041ba6", "message": "Regenerate models after pulling latest.", "committedDate": "2020-06-26T20:41:14Z", "type": "commit"}, {"oid": "b5193a751a84198f359b7d1ec822580c8a77dc52", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b5193a751a84198f359b7d1ec822580c8a77dc52", "message": "Do not expost rule models.", "committedDate": "2020-06-26T20:41:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQxNzU2OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12537#discussion_r446417569", "bodyText": "Is this going to be always not null entry.getContent() ? Could this throw NPE ?", "author": "hemanttanwar", "createdAt": "2020-06-26T21:27:13Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java", "diffHunk": "@@ -593,8 +595,9 @@\n             return new SimpleResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), null);\n         }\n \n-        final QueueDescription result = entry.getContent().getQueueDescription()\n-            .setName(entry.getTitle().getTitle());\n+        final QueueDescription result = entry.getContent().getQueueDescription();", "originalCommit": "b5193a751a84198f359b7d1ec822580c8a77dc52", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "46477034135b21da46cd14596fe0e3a56751651b", "chunk": "diff --git a/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java b/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java\nindex d12b3f0a92b..120f0100bea 100644\n--- a/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java\n+++ b/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java\n\n@@ -593,6 +593,9 @@ public final class ServiceBusManagementAsyncClient {\n         // This was an empty response (ie. 204).\n         if (entry == null) {\n             return new SimpleResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), null);\n+        } else if (entry.getContent() == null) {\n+            logger.warning(\"entry.getContent() is null. There should have been content returned. Entry: {}\", entry);\n+            return new SimpleResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), null);\n         }\n \n         final QueueDescription result = entry.getContent().getQueueDescription();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQxOTA3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12537#discussion_r446419071", "bodyText": "Should we add some warning message here, in case of ClassCastException ?", "author": "hemanttanwar", "createdAt": "2020-06-26T21:30:20Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java", "diffHunk": "@@ -673,6 +679,31 @@\n             });\n     }\n \n+    /**\n+     * Given an XML title element, returns the XML text inside. Jackson deserializes Objects as LinkedHashMaps. XML text\n+     * is represented as an entry with an empty string as the key.\n+     *\n+     * For example, the text returned from this {@code <title text=\"text/xml\">QueueName</title>} is \"QueueName\".\n+     *\n+     * @param responseTitle XML title element.\n+     *\n+     * @return The XML text inside the title. {@code null} is returned if there is no value.\n+     */\n+    @SuppressWarnings(\"unchecked\")\n+    private static String getTitleValue(Object responseTitle) {\n+        if (!(responseTitle instanceof Map)) {\n+            return null;\n+        }\n+\n+        final Map<String, String> map;\n+        try {\n+            map = (Map<String, String>) responseTitle;\n+            return map.get(\"\");\n+        } catch (ClassCastException ignored) {\n+            return null;", "originalCommit": "b5193a751a84198f359b7d1ec822580c8a77dc52", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "46477034135b21da46cd14596fe0e3a56751651b", "chunk": "diff --git a/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java b/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java\nindex d12b3f0a92b..120f0100bea 100644\n--- a/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java\n+++ b/sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusManagementAsyncClient.java\n\n@@ -690,7 +693,7 @@ public final class ServiceBusManagementAsyncClient {\n      * @return The XML text inside the title. {@code null} is returned if there is no value.\n      */\n     @SuppressWarnings(\"unchecked\")\n-    private static String getTitleValue(Object responseTitle) {\n+    private String getTitleValue(Object responseTitle) {\n         if (!(responseTitle instanceof Map)) {\n             return null;\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyMDg0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12537#discussion_r446420849", "bodyText": "Should we indicate what this object will contain , when user create/update rule what kind of information will come back ? Same comment for other similar return any object .", "author": "hemanttanwar", "createdAt": "2020-06-26T21:34:39Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/implementation/RulesImpl.java", "diffHunk": "@@ -0,0 +1,169 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.\n+\n+package com.azure.messaging.servicebus.implementation;\n+\n+import com.azure.core.annotation.BodyParam;\n+import com.azure.core.annotation.Delete;\n+import com.azure.core.annotation.ExpectedResponses;\n+import com.azure.core.annotation.Get;\n+import com.azure.core.annotation.HeaderParam;\n+import com.azure.core.annotation.Host;\n+import com.azure.core.annotation.HostParam;\n+import com.azure.core.annotation.PathParam;\n+import com.azure.core.annotation.Put;\n+import com.azure.core.annotation.QueryParam;\n+import com.azure.core.annotation.ReturnType;\n+import com.azure.core.annotation.ServiceInterface;\n+import com.azure.core.annotation.ServiceMethod;\n+import com.azure.core.annotation.UnexpectedResponseExceptionType;\n+import com.azure.core.http.rest.Response;\n+import com.azure.core.http.rest.RestProxy;\n+import com.azure.core.util.Context;\n+import com.azure.messaging.servicebus.implementation.models.ServiceBusManagementErrorException;\n+import reactor.core.publisher.Mono;\n+\n+/** An instance of this class provides access to all the operations defined in Rules. */\n+public final class RulesImpl {\n+    /** The proxy service used to perform REST calls. */\n+    private final RulesService service;\n+\n+    /** The service client containing this operation class. */\n+    private final ServiceBusManagementClientImpl client;\n+\n+    /**\n+     * Initializes an instance of RulesImpl.\n+     *\n+     * @param client the instance of the service client containing this operation class.\n+     */\n+    RulesImpl(ServiceBusManagementClientImpl client) {\n+        this.service = RestProxy.create(RulesService.class, client.getHttpPipeline(), client.getSerializerAdapter());\n+        this.client = client;\n+    }\n+\n+    /**\n+     * The interface defining all the services for ServiceBusManagementClientRules to be used by the proxy service to\n+     * perform REST calls.\n+     */\n+    @Host(\"https://{endpoint}\")\n+    @ServiceInterface(name = \"ServiceBusManagement\")\n+    private interface RulesService {\n+        @Get(\"/{topicName}/subscriptions/{subscriptionName}/rules/{ruleName}\")\n+        @ExpectedResponses({200})\n+        @UnexpectedResponseExceptionType(ServiceBusManagementErrorException.class)\n+        Mono<Response<Object>> get(\n+                @HostParam(\"endpoint\") String endpoint,\n+                @PathParam(\"topicName\") String topicName,\n+                @PathParam(\"subscriptionName\") String subscriptionName,\n+                @PathParam(\"ruleName\") String ruleName,\n+                @QueryParam(\"enrich\") Boolean enrich,\n+                @QueryParam(\"api-version\") String apiVersion,\n+                Context context);\n+\n+        @Put(\"/{topicName}/subscriptions/{subscriptionName}/rules/{ruleName}\")\n+        @ExpectedResponses({200, 201})\n+        @UnexpectedResponseExceptionType(ServiceBusManagementErrorException.class)\n+        Mono<Response<Object>> put(\n+                @HostParam(\"endpoint\") String endpoint,\n+                @PathParam(\"topicName\") String topicName,\n+                @PathParam(\"subscriptionName\") String subscriptionName,\n+                @PathParam(\"ruleName\") String ruleName,\n+                @QueryParam(\"api-version\") String apiVersion,\n+                @HeaderParam(\"If-Match\") String ifMatch,\n+                @BodyParam(\"application/xml\") Object requestBody,\n+                Context context);\n+\n+        @Delete(\"/{topicName}/subscriptions/{subscriptionName}/rules/{ruleName}\")\n+        @ExpectedResponses({200})\n+        @UnexpectedResponseExceptionType(ServiceBusManagementErrorException.class)\n+        Mono<Response<Object>> delete(\n+                @HostParam(\"endpoint\") String endpoint,\n+                @PathParam(\"topicName\") String topicName,\n+                @PathParam(\"subscriptionName\") String subscriptionName,\n+                @PathParam(\"ruleName\") String ruleName,\n+                @QueryParam(\"api-version\") String apiVersion,\n+                Context context);\n+    }\n+\n+    /**\n+     * Get the details about the rule of a subscription of a topic.\n+     *\n+     * @param topicName name of the topic.\n+     * @param subscriptionName name of the subscription.\n+     * @param ruleName name of the filter.\n+     * @param enrich A query parameter that sets enrich to true or false.\n+     * @param context The context to associate with this operation.\n+     * @throws IllegalArgumentException thrown if parameters fail the validation.\n+     * @throws ServiceBusManagementErrorException thrown if the request is rejected by server.\n+     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.\n+     * @return the details about the rule of a subscription of a topic.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response<Object>> getWithResponseAsync(\n+            String topicName, String subscriptionName, String ruleName, Boolean enrich, Context context) {\n+        return service.get(\n+                this.client.getEndpoint(),\n+                topicName,\n+                subscriptionName,\n+                ruleName,\n+                enrich,\n+                this.client.getApiVersion(),\n+                context);\n+    }\n+\n+    /**\n+     * Create or update a rule.\n+     *\n+     * @param topicName name of the topic.\n+     * @param subscriptionName name of the subscription.\n+     * @param ruleName name of the filter.\n+     * @param requestBody Any object.\n+     * @param ifMatch Match condition for an entity to be updated. If specified and a matching entity is not found, an\n+     *     error will be raised. To force an unconditional update, set to the wildcard character (*). If not specified,\n+     *     an insert will be performed when no existing entity is found to update and a replace will be performed if an\n+     *     existing entity is found.\n+     * @param context The context to associate with this operation.\n+     * @throws IllegalArgumentException thrown if parameters fail the validation.\n+     * @throws ServiceBusManagementErrorException thrown if the request is rejected by server.\n+     * @throws RuntimeException all other wrapped checked exceptions if the request fails to be sent.\n+     * @return any object.", "originalCommit": "b5193a751a84198f359b7d1ec822580c8a77dc52", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyNTkwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12537#discussion_r446425908", "bodyText": "This is in implementation class. It is autogenerated.", "author": "conniey", "createdAt": "2020-06-26T21:49:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyMDg0OQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyNDcyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12537#discussion_r446424723", "bodyText": "Name change , Shouldn't this be EntitiesImpl  ?", "author": "hemanttanwar", "createdAt": "2020-06-26T21:45:54Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/implementation/EntitysImpl.java", "diffHunk": "@@ -24,82 +24,82 @@\n import com.azure.messaging.servicebus.implementation.models.ServiceBusManagementErrorException;\n import reactor.core.publisher.Mono;\n \n-/** An instance of this class provides access to all the operations defined in Queues. */\n-public final class QueuesImpl {\n+/** An instance of this class provides access to all the operations defined in Entitys. */\n+public final class EntitysImpl {", "originalCommit": "b5193a751a84198f359b7d1ec822580c8a77dc52", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyNTgxNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12537#discussion_r446425815", "bodyText": "This is auto-generated.", "author": "conniey", "createdAt": "2020-06-26T21:49:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyNDcyMw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "46477034135b21da46cd14596fe0e3a56751651b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/46477034135b21da46cd14596fe0e3a56751651b", "message": "add log messages.", "committedDate": "2020-06-26T21:53:03Z", "type": "commit"}, {"oid": "5831adda710454abd724bddcbfa347f52e181afe", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5831adda710454abd724bddcbfa347f52e181afe", "message": "Fix checkstyle errors.", "committedDate": "2020-06-26T22:25:34Z", "type": "commit"}, {"oid": "c04144e8e3c72f6acdc325f1094685e31ed7432d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c04144e8e3c72f6acdc325f1094685e31ed7432d", "message": "Move to use API version and remove QueueHelper parameter.", "committedDate": "2020-06-29T17:31:44Z", "type": "commit"}]}