{"pr_number": 13351, "pr_title": "Add managed identity client id config in DAC", "pr_createdAt": "2020-07-21T01:07:45Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13351", "timeline": [{"oid": "2c4387018edc345a67b495e60710499c35d89f36", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2c4387018edc345a67b495e60710499c35d89f36", "message": "Add managed identity client id config in DAC", "committedDate": "2020-07-21T01:07:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5MjkyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13351#discussion_r458292922", "bodyText": "Shouldn't this default to the value in AZURE_CLIENT_ID if set?", "author": "schaabs", "createdAt": "2020-07-21T18:09:57Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/DefaultAzureCredentialBuilder.java", "diffHunk": "@@ -18,6 +18,7 @@\n  */\n public class DefaultAzureCredentialBuilder extends CredentialBuilderBase<DefaultAzureCredentialBuilder> {\n     private String tenantId;\n+    private String managedIdentityClientId;", "originalCommit": "2c4387018edc345a67b495e60710499c35d89f36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQwMDgzMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13351#discussion_r458400832", "bodyText": "The tenant ID isn't AZURE_TENANT_ID by default, would this cause confusion?", "author": "jianghaolu", "createdAt": "2020-07-21T21:32:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5MjkyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQxNTA4MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13351#discussion_r458415081", "bodyText": "It looks like all environment variables are checked in .NET - adding to Java too", "author": "jianghaolu", "createdAt": "2020-07-21T22:03:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5MjkyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMTEwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13351#discussion_r458431100", "bodyText": "Updated", "author": "jianghaolu", "createdAt": "2020-07-21T22:42:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5MjkyMg=="}], "type": "inlineReview", "revised_code": {"commit": "a45c87d7f6fcb88fec44adc3b7d9904b25cdd458", "chunk": "diff --git a/sdk/identity/azure-identity/src/main/java/com/azure/identity/DefaultAzureCredentialBuilder.java b/sdk/identity/azure-identity/src/main/java/com/azure/identity/DefaultAzureCredentialBuilder.java\nindex d3116157a1b..43f303d718f 100644\n--- a/sdk/identity/azure-identity/src/main/java/com/azure/identity/DefaultAzureCredentialBuilder.java\n+++ b/sdk/identity/azure-identity/src/main/java/com/azure/identity/DefaultAzureCredentialBuilder.java\n\n@@ -21,6 +22,11 @@ public class DefaultAzureCredentialBuilder extends CredentialBuilderBase<Default\n     private String managedIdentityClientId;\n     private final ClientLogger logger = new ClientLogger(DefaultAzureCredentialBuilder.class);\n \n+    public DefaultAzureCredentialBuilder() {\n+        Configuration configuration = Configuration.getGlobalConfiguration().clone();\n+        tenantId = configuration.get(Configuration.PROPERTY_AZURE_TENANT_ID);\n+        managedIdentityClientId = configuration.get(Configuration.PROPERTY_AZURE_CLIENT_ID);\n+    }\n \n     /**\n      * Sets the tenant id of the user to authenticate through the {@link DefaultAzureCredential}. The default is null\n"}}, {"oid": "a45c87d7f6fcb88fec44adc3b7d9904b25cdd458", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a45c87d7f6fcb88fec44adc3b7d9904b25cdd458", "message": "Read default from environment variable", "committedDate": "2020-07-21T22:42:39Z", "type": "commit"}, {"oid": "f959511fe1fb41dad823cd0ac2d1687b99194a70", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f959511fe1fb41dad823cd0ac2d1687b99194a70", "message": "Add more javadoc", "committedDate": "2020-07-21T22:56:40Z", "type": "commit"}, {"oid": "170018eef158af454c876effce7d1a06b90a023a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/170018eef158af454c876effce7d1a06b90a023a", "message": "Pass tenant id to shared token cache in DAC", "committedDate": "2020-07-21T23:00:41Z", "type": "commit"}, {"oid": "4b317bf74288fe463016a94493a180ca1bf64415", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4b317bf74288fe463016a94493a180ca1bf64415", "message": "Checkstyle: cotr javadoc", "committedDate": "2020-07-21T23:34:40Z", "type": "commit"}, {"oid": "fc140b4c42eb2b77a34ba4c8afa962ef11dc6ebd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc140b4c42eb2b77a34ba4c8afa962ef11dc6ebd", "message": "Add change log", "committedDate": "2020-07-22T18:32:53Z", "type": "commit"}, {"oid": "77e277f79009a81784c4a45c3d1198295a8eccda", "url": "https://github.com/Azure/azure-sdk-for-java/commit/77e277f79009a81784c4a45c3d1198295a8eccda", "message": "Merge branch 'dacmiclientid' of github.com:jianghaolu/azure-sdk-for-java into dacmiclientid", "committedDate": "2020-07-22T18:33:07Z", "type": "commit"}]}