{"pr_number": 8789, "pr_title": "Fixing checkstyle issues in cosmos package", "pr_createdAt": "2020-03-06T03:07:03Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/8789", "timeline": [{"oid": "3635e7dad4ccca9a19d3d92fee6ac55f31c2e0c6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3635e7dad4ccca9a19d3d92fee6ac55f31c2e0c6", "message": "Fixing checkstyle issues in cosmos package\nAdded suppressions for checks that are not handled at the moment\nAddressing #8681 https://github.com/Azure/azure-sdk-for-java/issues/8681\nEnabling failsOnError and failOnViolation on cosmos pom\nAdding basic javadoc at places, this has to be redone with proper docs", "committedDate": "2020-03-06T03:06:17Z", "type": "commit"}, {"oid": "16165aa2b93147ba76929a103f81204c89948083", "url": "https://github.com/Azure/azure-sdk-for-java/commit/16165aa2b93147ba76929a103f81204c89948083", "message": "Fixing failing test (added getters for fields that are demoted from public to package private)\nGrouping similar checkstyle suppressions as per PR comments.", "committedDate": "2020-03-06T07:00:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAxODY5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8789#discussion_r389018694", "bodyText": "Please verify that after moving these field(which doesn't have a explicit serializer)from public to default are still coming in diagnostic ,I think  we need to do it manually as all field level validationa not their in tests , please refer CosmosResponseDIagnoticsTest file", "author": "simplynaveen20", "createdAt": "2020-03-06T16:51:30Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/ClientSideRequestStatistics.java", "diffHunk": "@@ -203,77 +217,72 @@ void setRegionsContacted(Set<URI> regionsContacted) {\n         this.regionsContacted = Collections.synchronizedSet(regionsContacted);\n     }\n \n-    private static String formatDateTime(ZonedDateTime dateTime) {\n-        if (dateTime == null) {\n-            return null;\n-        }\n-        return dateTime.format(RESPONSE_TIME_FORMATTER);\n-    }\n-\n-    public void recordRetryContext(RxDocumentServiceRequest request) {\n-        if(request.requestContext.retryContext != null) {\n-            request.requestContext.retryContext.retryEndTime =  ZonedDateTime.now(ZoneOffset.UTC);\n+    void recordRetryContext(RxDocumentServiceRequest request) {\n+        if (request.requestContext.retryContext != null) {\n+            request.requestContext.retryContext.retryEndTime = ZonedDateTime.now(ZoneOffset.UTC);\n             this.retryContext = new RetryContext(request.requestContext.retryContext);\n         }\n     }\n \n     static class StoreResponseStatistics {\n         @JsonSerialize(using = StoreResult.StoreResultSerializer.class)\n-        public StoreResult storeResult;\n+        StoreResult storeResult;\n         @JsonSerialize(using = ZonedDateTimeSerializer.class)\n-        public ZonedDateTime requestResponseTime;\n-        public ResourceType requestResourceType;\n-        public OperationType requestOperationType;\n+        ZonedDateTime requestResponseTime;", "originalCommit": "16165aa2b93147ba76929a103f81204c89948083", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAyNzQ0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8789#discussion_r389027445", "bodyText": "very good point. also as this PR adds getters to the classes in ClientSideRequestStatistics, jackson may see to ways to get a feild, the field itself and the getter for the field.\nWe should ensure they are properly annotated as per jackson guideline if one need to be ignored and the other one be used. etc.", "author": "moderakh", "createdAt": "2020-03-06T17:03:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAxODY5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA1Njk3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8789#discussion_r389056971", "bodyText": "validated with @simplynaveen20 . These look good", "author": "mbhaskar", "createdAt": "2020-03-06T18:02:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAxODY5NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAyMTU0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8789#discussion_r389021544", "bodyText": "Please verify that after moving these field(which doesn't have a explicit serializer)from public to default to after are still coming in diagnostic ,I think we need to do it manually as all field level validation is not their in tests , please refer CosmosResponseDIagnoticsTest file", "author": "simplynaveen20", "createdAt": "2020-03-06T16:56:21Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/ClientSideRequestStatistics.java", "diffHunk": "@@ -303,14 +316,55 @@ public void serialize(ClientSideRequestStatistics statistics, JsonGenerator gene\n                 systemInformation.availableMemory = (maxMemory - (totalMemory - freeMemory)) + \" KB\";\n \n                 OperatingSystemMXBean mbean = (com.sun.management.OperatingSystemMXBean)\n-                    ManagementFactory.getOperatingSystemMXBean();\n-                systemInformation.processCpuLoad = mbean.getProcessCpuLoad()*100 +  \" %\";\n-                systemInformation.systemCpuLoad = mbean.getSystemCpuLoad()*100 +  \" %\";\n+                                                  ManagementFactory.getOperatingSystemMXBean();\n+                systemInformation.processCpuLoad = mbean.getProcessCpuLoad() * 100 + \" %\";\n+                systemInformation.systemCpuLoad = mbean.getSystemCpuLoad() * 100 + \" %\";\n                 generator.writeObjectField(\"systemInformation\", systemInformation);\n             } catch (Exception e) {\n                 // Error while evaluating system information, do nothing\n             }\n             generator.writeEndObject();\n         }\n     }\n+\n+    private class AddressResolutionStatistics {\n+        @JsonSerialize(using = ZonedDateTimeSerializer.class)\n+        ZonedDateTime startTime;\n+        @JsonSerialize(using = ZonedDateTimeSerializer.class)\n+        ZonedDateTime endTime;", "originalCommit": "16165aa2b93147ba76929a103f81204c89948083", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA1ODYwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8789#discussion_r389058603", "bodyText": "Validated with @simplynaveen20. These look good", "author": "mbhaskar", "createdAt": "2020-03-06T18:05:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTAyMTU0NA=="}], "type": "inlineReview", "revised_code": null}]}