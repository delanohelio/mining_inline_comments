{"pr_number": 9334, "pr_title": "Cosmos API Review Iteration - Part 2", "pr_createdAt": "2020-03-20T19:56:10Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/9334", "timeline": [{"oid": "3338f74aec76fcddbeddf844b23d6b130f2c8783", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3338f74aec76fcddbeddf844b23d6b130f2c8783", "message": "Moved IndexKind to implementation package", "committedDate": "2020-03-20T02:59:57Z", "type": "commit"}, {"oid": "99abecf11c32a79e473823d648043e91f23162cd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/99abecf11c32a79e473823d648043e91f23162cd", "message": "Merge branch 'master' into index_kind_implementation_package", "committedDate": "2020-03-20T03:00:30Z", "type": "commit"}, {"oid": "b2397642be0ecddade4e8857855d4e45ecce9375", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b2397642be0ecddade4e8857855d4e45ecce9375", "message": "Reduced method scope from public to protected for most of JsonSerializable APIs", "committedDate": "2020-03-20T06:14:41Z", "type": "commit"}, {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0585e9ec9c992424cd31ba24ba4a75481561c1e", "message": "Reduced method scope from public to protected for most of JsonSerializable APIs", "committedDate": "2020-03-20T19:54:58Z", "type": "commit"}, {"oid": "fa6b37fd6de7adaac32c7f857a99ac4637ed6242", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fa6b37fd6de7adaac32c7f857a99ac4637ed6242", "message": "Removed unused imports", "committedDate": "2020-03-20T20:04:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzAxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863016", "bodyText": "why do we need these overridden methods?\nthe implementation is the same as parent class.", "author": "moderakh", "createdAt": "2020-03-20T20:00:42Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/DatabaseAccount.java", "diffHunk": "@@ -285,4 +285,9 @@ public String toJson() {\n         this.populatePropertyBag();\n         return super.toJson();\n     }\n+\n+    @Override\n+    public Object get(String propertyName) {\n+        return super.get(propertyName);", "originalCommit": "f0585e9ec9c992424cd31ba24ba4a75481561c1e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2NzI3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395867273", "bodyText": "discussed offline.", "author": "moderakh", "createdAt": "2020-03-20T20:11:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzAxNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzIzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863238", "bodyText": "ditto, here and other places for the new methods, the implementation is the same as parent class why are they needed in every child class?", "author": "moderakh", "createdAt": "2020-03-20T20:01:14Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/Offer.java", "diffHunk": "@@ -132,4 +132,14 @@ private ObjectNode getContent() {\n     private void setContent(ObjectNode offerContent) {\n         BridgeInternal.setProperty(this, Constants.Properties.OFFER_CONTENT, offerContent);\n     }\n+\n+    @Override\n+    public String getString(String propertyName) {\n+        return super.getString(propertyName);", "originalCommit": "f0585e9ec9c992424cd31ba24ba4a75481561c1e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzI5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863293", "bodyText": "ditto", "author": "moderakh", "createdAt": "2020-03-20T20:01:24Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/PartitionKeyRange.java", "diffHunk": "@@ -123,4 +123,9 @@ public void setParents(List<String> parents) {\n      * @return a list partition key range ID\n      */\n     public List<String> getParents() { return this.getList(Constants.Properties.PARENTS, String.class); }\n+\n+    @Override\n+    public String toJson() {\n+        return super.toJson();", "originalCommit": "f0585e9ec9c992424cd31ba24ba4a75481561c1e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzkzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863939", "bodyText": "ditto", "author": "moderakh", "createdAt": "2020-03-20T20:02:48Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/directconnectivity/Address.java", "diffHunk": "@@ -87,4 +87,9 @@ public String getParitionKeyRangeId() {\n     public void setPartitionKeyRangeId(String partitionKeyRangeId) {\n         BridgeInternal.setProperty(this, Constants.Properties.PARTITION_KEY_RANGE_ID, partitionKeyRangeId);\n     }\n+\n+    @Override\n+    public Object get(String propertyName) {\n+        return super.get(propertyName);", "originalCommit": "f0585e9ec9c992424cd31ba24ba4a75481561c1e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg4MDAxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395880013", "bodyText": "(Could be out of scope of this PR) Potential double serialization. Instead of converting toJson and again back from Json, we could just use the propertybag to get UDF by using Resource(ObjectNode) overload.", "author": "mbhaskar", "createdAt": "2020-03-20T20:41:44Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosAsyncUserDefinedFunction.java", "diffHunk": "@@ -73,7 +73,7 @@ CosmosAsyncUserDefinedFunction setId(String id) {\n     public Mono<CosmosAsyncUserDefinedFunctionResponse> replace(CosmosUserDefinedFunctionProperties udfSettings) {\n         return container.getDatabase()\n                    .getDocClientWrapper()\n-                   .replaceUserDefinedFunction(new UserDefinedFunction(udfSettings.toJson()), null)\n+                   .replaceUserDefinedFunction(new UserDefinedFunction(ModelBridgeInternal.toJsonFromJsonSerializable(udfSettings)), null)", "originalCommit": "fa6b37fd6de7adaac32c7f857a99ac4637ed6242", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMzAyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395933027", "bodyText": "Will discuss offline on this one with you.", "author": "kushagraThapar", "createdAt": "2020-03-20T23:38:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg4MDAxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMzY5NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395933695", "bodyText": "outside of scope of this PR. we can come back to this later. I fixed double serialization for point read item operation but not the udf, etc.", "author": "moderakh", "createdAt": "2020-03-20T23:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg4MDAxMw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "cbf26d6062dd857e966d092b6893f3f968ea5d7e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cbf26d6062dd857e966d092b6893f3f968ea5d7e", "message": "Fixed Query with multi order test", "committedDate": "2020-03-20T23:09:45Z", "type": "commit"}, {"oid": "589ed30dd9f894a0cb4fd2021080bd12efb39d4b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/589ed30dd9f894a0cb4fd2021080bd12efb39d4b", "message": "Merge branch 'master' into index_kind_implementation_package", "committedDate": "2020-03-23T05:18:23Z", "type": "commit"}]}