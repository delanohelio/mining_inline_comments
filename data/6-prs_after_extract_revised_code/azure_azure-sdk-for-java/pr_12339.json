{"pr_number": 12339, "pr_title": "[BUG] Cosmos | Direct TCP | Address null pointer exception in RntbdClientChannelPool.computeLoadFactor", "pr_createdAt": "2020-06-18T22:12:29Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12339", "timeline": [{"oid": "84a37ab329525ae52d7c1adc6e7ba3c33625c5c7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/84a37ab329525ae52d7c1adc6e7ba3c33625c5c7", "message": "Port from v4", "committedDate": "2019-11-07T04:36:56Z", "type": "commit"}, {"oid": "d218925e1dff21266697a27e4271d34dfcc3b6a7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d218925e1dff21266697a27e4271d34dfcc3b6a7", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-11-08T01:46:09Z", "type": "commit"}, {"oid": "11cbbf37bf63bf50e94f67fe30300ac39c72ed4f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/11cbbf37bf63bf50e94f67fe30300ac39c72ed4f", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-08T03:20:35Z", "type": "commit"}, {"oid": "05c7e0551ffb6fd1ed80c15d1068cb32e734007e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/05c7e0551ffb6fd1ed80c15d1068cb32e734007e", "message": "Corrected package misspelling in log4j.properties and removed System.exit from Main.java", "committedDate": "2019-11-09T00:07:30Z", "type": "commit"}, {"oid": "8dfa3dbf03ae2addeddcb34ffc67c362670a164c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8dfa3dbf03ae2addeddcb34ffc67c362670a164c", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-09T00:07:47Z", "type": "commit"}, {"oid": "e6e71f5e6b292cac17b6a9687d04ad858f02a8a1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e6e71f5e6b292cac17b6a9687d04ad858f02a8a1", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-11-09T18:42:20Z", "type": "commit"}, {"oid": "e082d817a13d64ed57e5243cbc1da5b4ef0ab58e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e082d817a13d64ed57e5243cbc1da5b4ef0ab58e", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-17T00:51:11Z", "type": "commit"}, {"oid": "069c822e997087f384cf1a1864e7efec331e69f8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/069c822e997087f384cf1a1864e7efec331e69f8", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2019-11-23T22:36:47Z", "type": "commit"}, {"oid": "3ead1cca230e56b61e5376e73bd1481f7a7b81e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ead1cca230e56b61e5376e73bd1481f7a7b81e6", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-12-03T18:58:37Z", "type": "commit"}, {"oid": "669ba8b28ed6ae321fda445e0e167ff027cc6481", "url": "https://github.com/Azure/azure-sdk-for-java/commit/669ba8b28ed6ae321fda445e0e167ff027cc6481", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2019-12-04T19:34:26Z", "type": "commit"}, {"oid": "735f57269d45a3497a66d47d594b7efac88179ff", "url": "https://github.com/Azure/azure-sdk-for-java/commit/735f57269d45a3497a66d47d594b7efac88179ff", "message": "Responded to code review comments", "committedDate": "2019-12-04T19:36:31Z", "type": "commit"}, {"oid": "6db330d843c4cdbb80b90c6f734f69a59afb9183", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6db330d843c4cdbb80b90c6f734f69a59afb9183", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-04T00:31:23Z", "type": "commit"}, {"oid": "48855b55564f6f216ee6a156f7a64ff5991ee2e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/48855b55564f6f216ee6a156f7a64ff5991ee2e6", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-04T02:07:38Z", "type": "commit"}, {"oid": "2367f50dd69e8f4d1ba123c3b42ad4388caeaa66", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2367f50dd69e8f4d1ba123c3b42ad4388caeaa66", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-17T20:51:14Z", "type": "commit"}, {"oid": "fb9cac0c12e21f09e3c45580bf324bef7733b8c1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb9cac0c12e21f09e3c45580bf324bef7733b8c1", "message": "Updated sdk/cosmos/README.md with info on using system properties to modify default Direct TCP options", "committedDate": "2020-01-23T01:18:46Z", "type": "commit"}, {"oid": "1dd708ef9e753607040a6bb1f2b69c863dda8a0a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1dd708ef9e753607040a6bb1f2b69c863dda8a0a", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-01-23T01:21:11Z", "type": "commit"}, {"oid": "203507a249705593b04dec3e36566537d15da4e2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/203507a249705593b04dec3e36566537d15da4e2", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-03-16T00:12:48Z", "type": "commit"}, {"oid": "368b10f9893cdf49e95545e8ae4ec5ff03450f60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/368b10f9893cdf49e95545e8ae4ec5ff03450f60", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-03-16T17:10:04Z", "type": "commit"}, {"oid": "a0b44a7f9ef506fe168d1bce9918be6d3a6bfea7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a0b44a7f9ef506fe168d1bce9918be6d3a6bfea7", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java", "committedDate": "2020-04-15T01:29:42Z", "type": "commit"}, {"oid": "d810ba8e1c8384eb363273d6c723f940ee8d244f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d810ba8e1c8384eb363273d6c723f940ee8d244f", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-05-06T18:39:06Z", "type": "commit"}, {"oid": "64a12afb32dc1ca4704ed84098766fe4f97c863b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/64a12afb32dc1ca4704ed84098766fe4f97c863b", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java", "committedDate": "2020-06-04T15:25:14Z", "type": "commit"}, {"oid": "74cc11654de9dffafff1513c52926259e86594e8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/74cc11654de9dffafff1513c52926259e86594e8", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/connection-state-listener", "committedDate": "2020-06-09T03:26:08Z", "type": "commit"}, {"oid": "38bf6e502f93cc650d719f4cfb61b8446816cadc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/38bf6e502f93cc650d719f4cfb61b8446816cadc", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/connection-state-listener", "committedDate": "2020-06-10T18:15:31Z", "type": "commit"}, {"oid": "6bf8f18752bc8e593cc6d6a3369ad51d8714ae35", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6bf8f18752bc8e593cc6d6a3369ad51d8714ae35", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/connection-state-listener", "committedDate": "2020-06-15T18:03:11Z", "type": "commit"}, {"oid": "de5f8d0cc6ce11e1c63a7ec162c478063a6cda99", "url": "https://github.com/Azure/azure-sdk-for-java/commit/de5f8d0cc6ce11e1c63a7ec162c478063a6cda99", "message": "Addresses a NullPointerException raised when an available channel closes since it became available, improves two log messages, and increases the value of maxChannelsPerEndpoint from 10 to 130. The latter is based on performance runs that indicate this is a better value in syncrhonous and asynchronous point read scenarios", "committedDate": "2020-06-18T19:57:17Z", "type": "commit"}, {"oid": "216cf58358e16c371bfa81e13c47752c5103dc56", "url": "https://github.com/Azure/azure-sdk-for-java/commit/216cf58358e16c371bfa81e13c47752c5103dc56", "message": "Tweaked logger message", "committedDate": "2020-06-18T21:39:48Z", "type": "commit"}, {"oid": "f7047a636bf4d0765d5376568f0d87e20f6709e0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7047a636bf4d0765d5376568f0d87e20f6709e0", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/connection-state-listener", "committedDate": "2020-06-18T21:40:03Z", "type": "commit"}, {"oid": "380e43a0e5c7e64975bb219ce67075fff5e3b22a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/380e43a0e5c7e64975bb219ce67075fff5e3b22a", "message": "Removed README.md because it was deleted on master and was not removed when I pulled from master", "committedDate": "2020-06-18T22:24:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjk0OTc5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12339#discussion_r442949796", "bodyText": "Is this the null manager change we talked about on the email with context to linkedin?", "author": "kushagraThapar", "createdAt": "2020-06-19T16:56:54Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/directconnectivity/rntbd/RntbdClientChannelPool.java", "diffHunk": "@@ -623,6 +623,12 @@ private double computeLoadFactor() {\n         for (Channel channel : this.availableChannels) {\n \n             final RntbdRequestManager manager = channel.pipeline().get(RntbdRequestManager.class);\n+\n+            if (manager == null) {", "originalCommit": "380e43a0e5c7e64975bb219ce67075fff5e3b22a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg5NzEwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12339#discussion_r443897101", "bodyText": "yes", "author": "David-Noble-at-work", "createdAt": "2020-06-23T00:35:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjk0OTc5Ng=="}], "type": "inlineReview", "revised_code": null}]}