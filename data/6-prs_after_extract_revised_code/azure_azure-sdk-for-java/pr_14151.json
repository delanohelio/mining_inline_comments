{"pr_number": 14151, "pr_title": "Message update erase body", "pr_createdAt": "2020-08-14T23:37:42Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14151", "timeline": [{"oid": "868df92b66f7d2c0b1d8c7e523e8574414a5be0e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/868df92b66f7d2c0b1d8c7e523e8574414a5be0e", "message": "Fixed bug that would erase queue message if body wasn't passed when updating visibility timeout", "committedDate": "2020-08-14T21:16:18Z", "type": "commit"}, {"oid": "47d5347a67184138ccedfff3cc7d228c5be270f7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/47d5347a67184138ccedfff3cc7d228c5be270f7", "message": "Message text is required for enqueue again", "committedDate": "2020-08-14T23:36:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwOTI0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14151#discussion_r470909249", "bodyText": "Was this a codegen change?", "author": "alzimmermsft", "createdAt": "2020-08-14T23:57:15Z", "path": "sdk/storage/azure-storage-queue/src/main/java/com/azure/storage/queue/implementation/MessageIdsImpl.java", "diffHunk": "@@ -73,15 +73,15 @@ public MessageIdsImpl(AzureQueueStorageImpl client) {\n      *\n      * @param queueName The queue name.\n      * @param messageid The message ID name.\n-     * @param queueMessage A Message object which can be stored in a Queue.\n      * @param popReceipt Required. Specifies the valid pop receipt value returned from an earlier call to the Get Messages or Update Message operation.\n      * @param visibilitytimeout Optional. Specifies the new visibility timeout value, in seconds, relative to server time. The default value is 30 seconds. A specified value must be larger than or equal to 1 second, and cannot be larger than 7 days, or larger than 2 hours on REST protocol versions prior to version 2011-08-18. The visibility timeout of a message can be set to a value later than the expiry time.\n      * @param context The context to associate with this operation.\n      * @throws IllegalArgumentException thrown if parameters fail the validation.\n      * @return a Mono which performs the network request upon subscription.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<MessageIdsUpdateResponse> updateWithRestResponseAsync(String queueName, String messageid, QueueMessage queueMessage, String popReceipt, int visibilitytimeout, Context context) {\n+    public Mono<MessageIdsUpdateResponse> updateWithRestResponseAsync(String queueName, String messageid, String popReceipt, int visibilitytimeout, Context context) {", "originalCommit": "47d5347a67184138ccedfff3cc7d228c5be270f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTYxMjY3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14151#discussion_r471612674", "bodyText": "Yea. The message text was made optional so that you can just update the visibility timeout without updating the message. Previously the body was required, so either it'd throw or you'd have to send an empty xml element for the message, which would erase the content.", "author": "rickle-msft", "createdAt": "2020-08-17T16:56:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwOTI0OQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "088fe024f1903acdcd05e755c7366eb77b684195", "url": "https://github.com/Azure/azure-sdk-for-java/commit/088fe024f1903acdcd05e755c7366eb77b684195", "message": "Merge remote-tracking branch 'upstream/master' into messageUpdateEraseBody", "committedDate": "2020-08-17T18:55:09Z", "type": "commit"}, {"oid": "6590d63753541fc5c0261ec184f698bf857cd148", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6590d63753541fc5c0261ec184f698bf857cd148", "message": "Merge branch 'master' into messageUpdateEraseBody", "committedDate": "2020-08-17T20:10:07Z", "type": "commit"}]}