{"pr_number": 7251, "pr_title": "Enable Complete Test Matrix in Storage", "pr_createdAt": "2020-01-07T23:00:07Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7251", "timeline": [{"oid": "123a807381319a9734eff56d458990fa3a7da4fe", "url": "https://github.com/Azure/azure-sdk-for-java/commit/123a807381319a9734eff56d458990fa3a7da4fe", "message": "Removed Storage tests.yml matrix override to enable complete test matrix", "committedDate": "2020-01-07T22:58:04Z", "type": "commit"}, {"oid": "2db9aa9b94066a0cd5d7848edac12f7513d9e31f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2db9aa9b94066a0cd5d7848edac12f7513d9e31f", "message": "Change windowUntil to use magic number", "committedDate": "2020-01-08T02:53:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM0OTgxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7251#discussion_r364349811", "bodyText": "Update code comment to align with this change", "author": "mikeharder", "createdAt": "2020-01-08T17:23:51Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobAsyncClient.java", "diffHunk": "@@ -434,7 +434,7 @@ as we can guarantee we only need at most two buffers for any call to write (two\n              * windowUntil uses a default limit of 256 and once that is hit it will trigger onComplete which causes\n              * downstream issues.\n              */\n-            }, true, parallelTransferOptions.getMaxSingleUploadSize())\n+            }, true, Integer.MAX_VALUE)", "originalCommit": "2db9aa9b94066a0cd5d7848edac12f7513d9e31f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1MTY0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7251#discussion_r364351646", "bodyText": "Done", "author": "alzimmermsft", "createdAt": "2020-01-08T17:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM0OTgxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1Nzg5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7251#discussion_r364357893", "bodyText": "Updated", "author": "alzimmermsft", "createdAt": "2020-01-08T17:42:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM0OTgxMQ=="}], "type": "inlineReview", "revised_code": {"commit": "f8718ce878674d086f6dc3dce2cd91eec9b2384a", "chunk": "diff --git a/sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobAsyncClient.java b/sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobAsyncClient.java\nindex a6e736eec90..65eaa5db744 100644\n--- a/sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobAsyncClient.java\n+++ b/sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobAsyncClient.java\n\n@@ -430,9 +430,9 @@ public class BlobAsyncClient extends BlobAsyncClientBase {\n                 }\n             /*\n              * Use cutBefore = true as we want to window all data under 4MB into one window.\n-             * Set the prefetch to the maxSingleUploadSize in the case that there are numerous tiny buffers,\n-             * windowUntil uses a default limit of 256 and once that is hit it will trigger onComplete which causes\n-             * downstream issues.\n+             * Set the prefetch to 'Integer.MAX_VALUE' to leverage an unbounded fetch limit in case there are numerous\n+             * tiny buffers, windowUntil uses a default limit of 256 and once that is hit it will trigger onComplete \n+             * which causes downstream issues.\n              */\n             }, true, Integer.MAX_VALUE)\n             .buffer(2)\n"}}, {"oid": "f8718ce878674d086f6dc3dce2cd91eec9b2384a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f8718ce878674d086f6dc3dce2cd91eec9b2384a", "message": "Update windowUntil fetch limit comment", "committedDate": "2020-01-08T17:27:18Z", "type": "commit"}]}