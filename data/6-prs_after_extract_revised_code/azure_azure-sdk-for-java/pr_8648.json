{"pr_number": 8648, "pr_title": "Set return-client-request-id", "pr_createdAt": "2020-03-03T02:39:09Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/8648", "timeline": [{"oid": "65ea3680bc152f713d9244fc9860b5049cf48604", "url": "https://github.com/Azure/azure-sdk-for-java/commit/65ea3680bc152f713d9244fc9860b5049cf48604", "message": "Updated client builders to set return-client-request-id instead of the x-ms-* variant", "committedDate": "2020-03-03T02:37:57Z", "type": "commit"}, {"oid": "a2296bc811aeea4c13136715885aabd57b8b19e7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a2296bc811aeea4c13136715885aabd57b8b19e7", "message": "Add test for change", "committedDate": "2020-03-03T16:37:06Z", "type": "commit"}, {"oid": "bcc424fb72cc3ac511ff08ff4847901a69ac4bae", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bcc424fb72cc3ac511ff08ff4847901a69ac4bae", "message": "Update test to pass in playback", "committedDate": "2020-03-03T17:05:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIzNDUxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8648#discussion_r387234516", "bodyText": "@alzimmermsft In the next month or so, we'll be deploying a service update that will set both client-request-id and x-ms-client-request-id on the response if either return-client-request-id or x-ms-return-client-request-id is specified.", "author": "brjohnstmsft", "createdAt": "2020-03-03T19:11:47Z", "path": "sdk/search/azure-search/src/test/java/com/azure/search/SearchServiceSyncTests.java", "diffHunk": "@@ -26,4 +31,16 @@ public void getServiceStatsReturnsCorrectDefinitionWithResponse() {\n         ServiceStatistics serviceStatistics = serviceClient.getServiceStatisticsWithResponse(generateRequestOptions(), Context.NONE).getValue();\n         assertReflectionEquals(serviceStatistics, getExpectedServiceStatistics(), IGNORE_DEFAULTS);\n     }\n+\n+    @Test\n+    public void getServiceStatsReturnsRequestId() {\n+        SearchServiceClient serviceClient = getSearchServiceClientBuilder().buildClient();\n+\n+        UUID expectedUuid = UUID.randomUUID();\n+        RequestOptions requestOptions = new RequestOptions().setClientRequestId(expectedUuid);\n+        Response<ServiceStatistics> response = serviceClient.getServiceStatisticsWithResponse(requestOptions, Context.NONE);\n+\n+        assertEquals(expectedUuid.toString(), response.getHeaders().getValue(\"client-request-id\"));", "originalCommit": "a2296bc811aeea4c13136715885aabd57b8b19e7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}