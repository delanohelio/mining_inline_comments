{"pr_number": 13581, "pr_title": "Fixing formatting for Instant type in diagnostics", "pr_createdAt": "2020-07-28T19:58:53Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13581", "timeline": [{"oid": "c55a4be6f25d1f03c58400d3cea8479f0bf0792d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c55a4be6f25d1f03c58400d3cea8479f0bf0792d", "message": "Fixing formating for Instant type in diagnostics", "committedDate": "2020-07-28T19:49:50Z", "type": "commit"}, {"oid": "4ca18d603eb4f1ef5e8aa9591e417b00a4aaceaf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ca18d603eb4f1ef5e8aa9591e417b00a4aaceaf", "message": "adding utc to timevalue", "committedDate": "2020-07-28T19:57:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0Mzk1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13581#discussion_r461843951", "bodyText": "Should there be validation to check if it is in the correct format?", "author": "j82w", "createdAt": "2020-07-28T20:04:29Z", "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/CosmosDiagnosticsTest.java", "diffHunk": "@@ -224,6 +224,14 @@ public void supplementalResponseStatisticsList() throws Exception {\n         supplementalResponseStatisticsListNode = (ArrayNode) jsonNode.get(\"supplementalResponseStatisticsList\");\n         assertThat(storeResponseStatistics.size()).isEqualTo(7);\n         assertThat(supplementalResponseStatisticsListNode.size()).isEqualTo(7);\n+\n+        //verifying all components from StoreResponseStatistics\n+        for(JsonNode node : supplementalResponseStatisticsListNode) {\n+            assertThat(node.get(\"storeResult\")).isNotNull();\n+            assertThat(node.get(\"requestResponseTimeUTC\")).isNotNull();", "originalCommit": "4ca18d603eb4f1ef5e8aa9591e417b00a4aaceaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg4NzkwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13581#discussion_r461887904", "bodyText": "Added", "author": "simplynaveen20", "createdAt": "2020-07-28T21:23:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0Mzk1MQ=="}], "type": "inlineReview", "revised_code": {"commit": "4867b2b7bd49a8c5e20abe330c12b30df1ee92f0", "chunk": "diff --git a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/CosmosDiagnosticsTest.java b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/CosmosDiagnosticsTest.java\nindex 347cbc92b84..41c4ce15d09 100644\n--- a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/CosmosDiagnosticsTest.java\n+++ b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/CosmosDiagnosticsTest.java\n\n@@ -227,7 +233,18 @@ public class CosmosDiagnosticsTest extends TestSuiteBase {\n \n         //verifying all components from StoreResponseStatistics\n         for(JsonNode node : supplementalResponseStatisticsListNode) {\n-            assertThat(node.get(\"storeResult\")).isNotNull();\n+            assertThat(node.get(\"storeResult\").asText()).isNotNull();\n+\n+            String requestResponseTimeUTC  = node.get(\"requestResponseTimeUTC\").asText();\n+            String formattedInstant = RESPONSE_TIME_FORMATTER.format(Instant.now());\n+            String[] requestResponseTimeUTCList = requestResponseTimeUTC.split(\" \");\n+            String[] formattedInstantList = formattedInstant.split(\" \");\n+            assertThat(requestResponseTimeUTC.length()).isEqualTo(formattedInstant.length());\n+            assertThat(requestResponseTimeUTCList.length).isEqualTo(formattedInstantList.length);\n+            assertThat(requestResponseTimeUTCList[0]).isEqualTo(formattedInstantList[0]);\n+            assertThat(requestResponseTimeUTCList[1]).isEqualTo(formattedInstantList[1]);\n+            assertThat(requestResponseTimeUTCList[2]).isEqualTo(formattedInstantList[2]);\n+\n             assertThat(node.get(\"requestResponseTimeUTC\")).isNotNull();\n             assertThat(node.get(\"requestOperationType\")).isNotNull();\n             assertThat(node.get(\"requestOperationType\")).isNotNull();\n"}}, {"oid": "4867b2b7bd49a8c5e20abe330c12b30df1ee92f0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4867b2b7bd49a8c5e20abe330c12b30df1ee92f0", "message": "build error fix", "committedDate": "2020-07-28T21:13:40Z", "type": "commit"}]}