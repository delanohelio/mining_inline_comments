{"pr_number": 14323, "pr_title": "Spring app config customer issues", "pr_createdAt": "2020-08-21T00:39:50Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14323", "timeline": [{"oid": "bcab47cd60cb389e8e09a7bc07f27516d6c8bd4f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bcab47cd60cb389e8e09a7bc07f27516d6c8bd4f", "message": "Renaming TimeWindowFilter paramaters. Adding Json Content Type support.", "committedDate": "2020-08-19T17:50:40Z", "type": "commit"}, {"oid": "34315571c39bb74d5780cce21cecf2f089979a00", "url": "https://github.com/Azure/azure-sdk-for-java/commit/34315571c39bb74d5780cce21cecf2f089979a00", "message": "Removed Extra User Agent value. Updated to reuse client if already made for store.", "committedDate": "2020-08-21T00:29:48Z", "type": "commit"}, {"oid": "9d95073d9448739ae2970c10328cca1ba3dc8f4a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9d95073d9448739ae2970c10328cca1ba3dc8f4a", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into SpringAppConfigCustomerIssues", "committedDate": "2020-08-21T00:35:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM1MTMwNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14323#discussion_r474351307", "bodyText": "this line and next line can be merged.", "author": "mssfang", "createdAt": "2020-08-21T01:03:04Z", "path": "sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java", "diffHunk": "@@ -120,13 +133,15 @@ public Object getProperty(String name) {\n      *\n      * <p>\n      * <b>Note</b>: Doesn't update Feature Management, just stores values in cache. Call\n-     * {@code initFeatures} to update Feature Management, but make sure its done in the last {@code\n+     * {@code initFeatures} to update Feature Management, but make sure its done in the\n+     * last {@code", "originalCommit": "9d95073d9448739ae2970c10328cca1ba3dc8f4a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7a4716c7b52f10b8368ad5310d26c4ed222ca8b3", "chunk": "diff --git a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\nindex b92215c7fda..53d746c5f40 100644\n--- a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n+++ b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n\n@@ -132,16 +132,14 @@ public class AppConfigurationPropertySource extends EnumerablePropertySource<Con\n      * </p>\n      *\n      * <p>\n-     * <b>Note</b>: Doesn't update Feature Management, just stores values in cache. Call\n-     * {@code initFeatures} to update Feature Management, but make sure its done in the\n-     * last {@code\n+     * <b>Note</b>: Doesn't update Feature Management, just stores values in cache. Call {@code initFeatures} to update\n+     * Feature Management, but make sure its done in the last {@code\n      * AppConfigurationPropertySource}\n      * </p>\n      *\n      * @param featureSet The set of Feature Management Flags from various config stores.\n      * @return Updated Feature Set from Property Source\n-     * @throws IOException Thrown when processing key/value failed when reading feature\n-     * flags\n+     * @throws IOException Thrown when processing key/value failed when reading feature flags\n      */\n     FeatureSet initProperties(FeatureSet featureSet) throws IOException {\n         String storeName = configStore.getEndpoint();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM1MTYyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14323#discussion_r474351621", "bodyText": "indentation", "author": "mssfang", "createdAt": "2020-08-21T01:04:24Z", "path": "sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java", "diffHunk": "@@ -205,20 +229,21 @@ private String getKeyVaultEntry(String value) {\n     }\n \n     /**\n-     * Initializes Feature Management configurations. Only one {@code AppConfigurationPropertySource} can call this, and\n-     * it needs to be done after the rest have run initProperties.\n+     * Initializes Feature Management configurations. Only one\n+     * {@code AppConfigurationPropertySource} can call this, and it needs to be done after\n+     * the rest have run initProperties.\n      *\n      * @param featureSet Feature Flag info to be set to this property source.\n      */\n     void initFeatures(FeatureSet featureSet) {\n         ObjectMapper featureMapper = new ObjectMapper();\n         featureMapper.setPropertyNamingStrategy(PropertyNamingStrategy.KEBAB_CASE);\n         properties.put(FEATURE_MANAGEMENT_KEY,\n-            featureMapper.convertValue(featureSet.getFeatureManagement(), LinkedHashMap.class));\n+                featureMapper.convertValue(featureSet.getFeatureManagement(), LinkedHashMap.class));", "originalCommit": "9d95073d9448739ae2970c10328cca1ba3dc8f4a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7a4716c7b52f10b8368ad5310d26c4ed222ca8b3", "chunk": "diff --git a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\nindex b92215c7fda..53d746c5f40 100644\n--- a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n+++ b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n\n@@ -229,9 +225,8 @@ public class AppConfigurationPropertySource extends EnumerablePropertySource<Con\n     }\n \n     /**\n-     * Initializes Feature Management configurations. Only one\n-     * {@code AppConfigurationPropertySource} can call this, and it needs to be done after\n-     * the rest have run initProperties.\n+     * Initializes Feature Management configurations. Only one {@code AppConfigurationPropertySource} can call this, and\n+     * it needs to be done after the rest have run initProperties.\n      *\n      * @param featureSet Feature Flag info to be set to this property source.\n      */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM1MTY0Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14323#discussion_r474351647", "bodyText": "indentation", "author": "mssfang", "createdAt": "2020-08-21T01:04:32Z", "path": "sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java", "diffHunk": "@@ -205,20 +229,21 @@ private String getKeyVaultEntry(String value) {\n     }\n \n     /**\n-     * Initializes Feature Management configurations. Only one {@code AppConfigurationPropertySource} can call this, and\n-     * it needs to be done after the rest have run initProperties.\n+     * Initializes Feature Management configurations. Only one\n+     * {@code AppConfigurationPropertySource} can call this, and it needs to be done after\n+     * the rest have run initProperties.\n      *\n      * @param featureSet Feature Flag info to be set to this property source.\n      */\n     void initFeatures(FeatureSet featureSet) {\n         ObjectMapper featureMapper = new ObjectMapper();\n         featureMapper.setPropertyNamingStrategy(PropertyNamingStrategy.KEBAB_CASE);\n         properties.put(FEATURE_MANAGEMENT_KEY,\n-            featureMapper.convertValue(featureSet.getFeatureManagement(), LinkedHashMap.class));\n+                featureMapper.convertValue(featureSet.getFeatureManagement(), LinkedHashMap.class));\n     }\n \n     private FeatureSet addToFeatureSet(FeatureSet featureSet, List<ConfigurationSetting> settings, Date date)\n-        throws IOException {\n+            throws IOException {", "originalCommit": "9d95073d9448739ae2970c10328cca1ba3dc8f4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM1MjAxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14323#discussion_r474352013", "bodyText": "there are more in the same file", "author": "mssfang", "createdAt": "2020-08-21T01:06:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM1MTY0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "7a4716c7b52f10b8368ad5310d26c4ed222ca8b3", "chunk": "diff --git a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\nindex b92215c7fda..53d746c5f40 100644\n--- a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n+++ b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n\n@@ -229,9 +225,8 @@ public class AppConfigurationPropertySource extends EnumerablePropertySource<Con\n     }\n \n     /**\n-     * Initializes Feature Management configurations. Only one\n-     * {@code AppConfigurationPropertySource} can call this, and it needs to be done after\n-     * the rest have run initProperties.\n+     * Initializes Feature Management configurations. Only one {@code AppConfigurationPropertySource} can call this, and\n+     * it needs to be done after the rest have run initProperties.\n      *\n      * @param featureSet Feature Flag info to be set to this property source.\n      */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM1MTg2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14323#discussion_r474351865", "bodyText": "indentation", "author": "mssfang", "createdAt": "2020-08-21T01:05:22Z", "path": "sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java", "diffHunk": "@@ -189,7 +213,7 @@ private String getKeyVaultEntry(String value) {\n             // one\n             if (!keyVaultClients.containsKey(uri.getHost())) {\n                 KeyVaultClient client = new KeyVaultClient(appConfigurationProperties, uri, keyVaultCredentialProvider,\n-                    keyVaultClientProvider);\n+                        keyVaultClientProvider);", "originalCommit": "9d95073d9448739ae2970c10328cca1ba3dc8f4a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7a4716c7b52f10b8368ad5310d26c4ed222ca8b3", "chunk": "diff --git a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\nindex b92215c7fda..53d746c5f40 100644\n--- a/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n+++ b/sdk/appconfiguration/azure-spring-cloud-appconfiguration-config/src/main/java/com/microsoft/azure/spring/cloud/config/AppConfigurationPropertySource.java\n\n@@ -213,7 +209,7 @@ public class AppConfigurationPropertySource extends EnumerablePropertySource<Con\n             // one\n             if (!keyVaultClients.containsKey(uri.getHost())) {\n                 KeyVaultClient client = new KeyVaultClient(appConfigurationProperties, uri, keyVaultCredentialProvider,\n-                        keyVaultClientProvider);\n+                    keyVaultClientProvider);\n                 keyVaultClients.put(uri.getHost(), client);\n             }\n             KeyVaultSecret secret = keyVaultClients.get(uri.getHost()).getSecret(uri, appProperties.getMaxRetryTime());\n"}}, {"oid": "7a4716c7b52f10b8368ad5310d26c4ed222ca8b3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7a4716c7b52f10b8368ad5310d26c4ed222ca8b3", "message": "Fixed Formatting", "committedDate": "2020-08-21T17:17:11Z", "type": "commit"}, {"oid": "2fa1986e875ef94cc88f00e06a1a00e3923b4c81", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2fa1986e875ef94cc88f00e06a1a00e3923b4c81", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into SpringAppConfigCustomerIssues", "committedDate": "2020-08-24T22:12:41Z", "type": "commit"}, {"oid": "d2e07b47671865c59549d8954e54c444ab3263be", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d2e07b47671865c59549d8954e54c444ab3263be", "message": "Fixed Feature Management Link", "committedDate": "2020-08-24T22:13:59Z", "type": "commit"}, {"oid": "c236e4e7c04bb8b71b607983694d1673b88fd405", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c236e4e7c04bb8b71b607983694d1673b88fd405", "message": "Fixed Feature Management Link", "committedDate": "2020-08-24T22:19:04Z", "type": "commit"}, {"oid": "a0d71794434c154e1553fb4afac1caacd12247bb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a0d71794434c154e1553fb4afac1caacd12247bb", "message": "Merge branch 'master' into SpringAppConfigCustomerIssues", "committedDate": "2020-08-27T23:00:37Z", "type": "commit"}]}