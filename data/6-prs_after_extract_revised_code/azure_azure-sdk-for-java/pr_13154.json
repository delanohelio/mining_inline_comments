{"pr_number": 13154, "pr_title": "Identity API updates July 2020", "pr_createdAt": "2020-07-15T02:15:45Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13154", "timeline": [{"oid": "07b26a95d75e3d23e8849c78cf0136c82e3d474e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/07b26a95d75e3d23e8849c78cf0136c82e3d474e", "message": "Identity API updates July 2020", "committedDate": "2020-07-15T02:11:47Z", "type": "commit"}, {"oid": "4a6da7e21afa81d1e4d9535512940d695fe6fa40", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4a6da7e21afa81d1e4d9535512940d695fe6fa40", "message": "update identity versions", "committedDate": "2020-07-15T18:29:37Z", "type": "commit"}, {"oid": "faa0fecf27498020314671e449cf0665e8179a3e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/faa0fecf27498020314671e449cf0665e8179a3e", "message": "update docs", "committedDate": "2020-07-15T19:00:00Z", "type": "commit"}, {"oid": "d16517872bd2366466200a3ea024be70950c4c79", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d16517872bd2366466200a3ea024be70950c4c79", "message": "Merge remote-tracking branch 'upstream/master' into identity-api-changes-july2020", "committedDate": "2020-07-16T17:26:05Z", "type": "commit"}, {"oid": "6f9b8aa7fc1ef739d217f284aa760aa85b16a7e9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f9b8aa7fc1ef739d217f284aa760aa85b16a7e9", "message": "Merge branch 'master' into identity-api-changes-july2020", "committedDate": "2020-07-17T18:43:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5Njc5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13154#discussion_r458296791", "bodyText": "I don't believe we had added the support options for persisting the cache to AuthorizationCodeCredential in .NET and Python. @chlowell Was this in the design for the application authentication feature? If not perhaps we should add it to the backlog and remove from Java until we are ready to do this across languages.", "author": "schaabs", "createdAt": "2020-07-21T18:16:42Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthorizationCodeCredentialBuilder.java", "diffHunk": "@@ -49,21 +49,32 @@ public AuthorizationCodeCredentialBuilder redirectUrl(String redirectUrl) {\n     }\n \n     /**\n-     * Sets whether to use an unprotected file specified by <code>cacheFileLocation()</code> instead of\n-     * Gnome keyring on Linux. This is false by default.\n+     * Allows to use an unprotected file specified by <code>cacheFileLocation()</code> instead of\n+     * Gnome keyring on Linux. This is restricted by default.\n      *\n-     * @param allowUnencryptedCache whether to use an unprotected file for cache storage.\n+     * @return An updated instance of this builder.\n+     */\n+    public AuthorizationCodeCredentialBuilder allowUnencryptedCache() {", "originalCommit": "6f9b8aa7fc1ef739d217f284aa760aa85b16a7e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5OTIzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13154#discussion_r458299230", "bodyText": "It was excluded because you need an authorization code to use this credential. If I have the record of a prior authentication, do I still need the authorization code? If I have an authorization code, why do I want to use cached data? Etc.", "author": "chlowell", "createdAt": "2020-07-21T18:20:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5Njc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMxMDYwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13154#discussion_r458310600", "bodyText": "I believe we've released a preview already with allowUnecnryptedCache on AuthorizationCodeCredentialBuilder.\nFor consistency, we can remove it.\n@jianghaolu  what are your thoughts ?", "author": "g2vinay", "createdAt": "2020-07-21T18:40:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5Njc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ5MDQxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13154#discussion_r458490414", "bodyText": "This API is removed now.", "author": "g2vinay", "createdAt": "2020-07-22T02:04:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5Njc5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "9379033b4f33ce4dd2c3ebb6c9acfcc8061536f9", "chunk": "diff --git a/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthorizationCodeCredentialBuilder.java b/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthorizationCodeCredentialBuilder.java\nindex 2bf9811d113..9ffeaea3fce 100644\n--- a/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthorizationCodeCredentialBuilder.java\n+++ b/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthorizationCodeCredentialBuilder.java\n\n@@ -48,6 +48,7 @@ public class AuthorizationCodeCredentialBuilder extends AadCredentialBuilderBase\n         return this;\n     }\n \n+\n     /**\n      * Allows to use an unprotected file specified by <code>cacheFileLocation()</code> instead of\n      * Gnome keyring on Linux. This is restricted by default.\n"}}, {"oid": "9379033b4f33ce4dd2c3ebb6c9acfcc8061536f9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9379033b4f33ce4dd2c3ebb6c9acfcc8061536f9", "message": "Merge remote-tracking branch 'upstream/master' into identity-api-changes-july2020", "committedDate": "2020-07-21T19:20:50Z", "type": "commit"}, {"oid": "95e2a40fd2691fdef253945c71cc442fd5acb5ec", "url": "https://github.com/Azure/azure-sdk-for-java/commit/95e2a40fd2691fdef253945c71cc442fd5acb5ec", "message": "Merge branch 'identity-api-changes-july2020' of ssh://github.com/g2vinay/azure-sdk-for-java into identity-api-changes-july2020", "committedDate": "2020-07-21T19:22:48Z", "type": "commit"}, {"oid": "aa15c3236a2a90959a8bc17c34030b0bbd57f59e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/aa15c3236a2a90959a8bc17c34030b0bbd57f59e", "message": "update API after consistency review", "committedDate": "2020-07-22T01:19:40Z", "type": "commit"}, {"oid": "c18e0629aa1caedb8ca70c011e9bf7ed0df128de", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c18e0629aa1caedb8ca70c011e9bf7ed0df128de", "message": "update code", "committedDate": "2020-07-22T01:40:24Z", "type": "commit"}, {"oid": "e0fa3d7d0e2d9608885f432c00de3ae546dee902", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e0fa3d7d0e2d9608885f432c00de3ae546dee902", "message": "update docs", "committedDate": "2020-07-22T02:01:29Z", "type": "commit"}, {"oid": "1a09bec758f4ef01a05a38adfe4fa57407e7b835", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1a09bec758f4ef01a05a38adfe4fa57407e7b835", "message": "update code", "committedDate": "2020-07-22T16:43:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5MTE2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13154#discussion_r458991160", "bodyText": "We need to update the SharedTokenCacheCredential to also take an AuthenticationRecord. See Azure/azure-sdk-for-net#13612. If you'd like we can merge this first and add this in a second PR, but we need to add it before the release.", "author": "schaabs", "createdAt": "2020-07-22T18:17:39Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/SharedTokenCacheCredentialBuilder.java", "diffHunk": "@@ -43,6 +41,6 @@ public SharedTokenCacheCredentialBuilder allowUnencryptedCache(boolean allowUnen\n      */\n     public SharedTokenCacheCredential build() {\n         return new SharedTokenCacheCredential(username, clientId, tenantId,\n-                identityClientOptions.enablePersistentCache(true));\n+                identityClientOptions.enablePersistentCache());", "originalCommit": "1a09bec758f4ef01a05a38adfe4fa57407e7b835", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "5a8562bad7c30b357875863bc0d3d3bee71ce0b6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5a8562bad7c30b357875863bc0d3d3bee71ce0b6", "message": "fix checkstyle", "committedDate": "2020-07-22T18:58:57Z", "type": "commit"}]}