{"pr_number": 13981, "pr_title": "Changing sdk package name to cosmos for user agent", "pr_createdAt": "2020-08-11T16:41:20Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13981", "timeline": [{"oid": "2bec0bc91aedd2b45422f9b8565abfab85aecf9a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bec0bc91aedd2b45422f9b8565abfab85aecf9a", "message": "Updating user agent format as per central sdk guidlines", "committedDate": "2020-08-10T22:55:29Z", "type": "commit"}, {"oid": "6e5fd3fd542e864281cee9a74c40227d39d3c0a0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6e5fd3fd542e864281cee9a74c40227d39d3c0a0", "message": "adding timeout to emulator test", "committedDate": "2020-08-10T22:58:37Z", "type": "commit"}, {"oid": "f60d3bc8a0a913c816ca569895db6d6220e65d75", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f60d3bc8a0a913c816ca569895db6d6220e65d75", "message": "Merge branch 'latest-master' into users/nakumar/userAgentFix", "committedDate": "2020-08-11T16:36:28Z", "type": "commit"}, {"oid": "cccd84b9a0ec638e94781f58f95e609090a3f06b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cccd84b9a0ec638e94781f58f95e609090a3f06b", "message": "changing sdk package name to cosmos for user agent", "committedDate": "2020-08-11T16:38:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc0OTE4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13981#discussion_r468749180", "bodyText": "Isn't there a test to verify the prefix?", "author": "kirankumarkolli", "createdAt": "2020-08-11T17:33:59Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/HttpConstants.java", "diffHunk": "@@ -261,7 +261,7 @@\n         public static final String AZURE_COSMOS_PROPERTIES_FILE_NAME = \"azure-cosmos.properties\";\n \n         public static final String SDK_VERSION = CoreUtils.getProperties(AZURE_COSMOS_PROPERTIES_FILE_NAME).get(\"version\");\n-        public static final String SDK_NAME = \"cosmosdb-java-sdk\";\n+        public static final String SDK_NAME = \"cosmos\";", "originalCommit": "cccd84b9a0ec638e94781f58f95e609090a3f06b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "a20feb000abf2e38a6f9cde0b216f5ba5ba0cf23", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a20feb000abf2e38a6f9cde0b216f5ba5ba0cf23", "message": "updating ut", "committedDate": "2020-08-11T17:40:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1MzgzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13981#discussion_r468753831", "bodyText": "please also replace UserAgentContainer.AZSDK_USERAGENT_PREFIX with hard coded value for the test", "author": "moderakh", "createdAt": "2020-08-11T17:42:05Z", "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java", "diffHunk": "@@ -87,7 +87,7 @@ private String getUserAgentFixedPart() {\n         osName = osName.replaceAll(\"\\\\s\", \"\");\n         String geteUserAgentFixedPart =\n             UserAgentContainer.AZSDK_USERAGENT_PREFIX +", "originalCommit": "a20feb000abf2e38a6f9cde0b216f5ba5ba0cf23", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "34292277884452a8582e261e7c1e3a593a321e1a", "chunk": "diff --git a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\nindex 8ac09d8324c..0df64c61888 100644\n--- a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\n+++ b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\n\n@@ -85,18 +85,17 @@ public class UserAgentContainerTest {\n             osName = \"Unknown\";\n         }\n         osName = osName.replaceAll(\"\\\\s\", \"\");\n-        String geteUserAgentFixedPart =\n-            UserAgentContainer.AZSDK_USERAGENT_PREFIX +\n-                \"cosmos\" +\n-                \"/\" +\n-                HttpConstants.Versions.SDK_VERSION +\n-                SPACE +\n-                osName +\n-                \"/\" +\n-                System.getProperty(\"os.version\") +\n-                SPACE +\n-                \"JRE/\" +\n-                System.getProperty(\"java.version\");\n+        String geteUserAgentFixedPart = \"azsdk-java-\" +\n+            \"cosmos\" +\n+            \"/\" +\n+            HttpConstants.Versions.SDK_VERSION +\n+            SPACE +\n+            osName +\n+            \"/\" +\n+            System.getProperty(\"os.version\") +\n+            SPACE +\n+            \"JRE/\" +\n+            System.getProperty(\"java.version\");\n         return geteUserAgentFixedPart;\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1NDExMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13981#discussion_r468754111", "bodyText": "ditto, for theSPACE, the only constant we should use here is the HttpConstants.Versions.SDK_VERSION", "author": "moderakh", "createdAt": "2020-08-11T17:42:31Z", "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java", "diffHunk": "@@ -87,7 +87,7 @@ private String getUserAgentFixedPart() {\n         osName = osName.replaceAll(\"\\\\s\", \"\");\n         String geteUserAgentFixedPart =\n             UserAgentContainer.AZSDK_USERAGENT_PREFIX +\n-                HttpConstants.Versions.SDK_NAME +\n+                \"cosmos\" +\n                 \"/\" +\n                 HttpConstants.Versions.SDK_VERSION +\n                 SPACE +", "originalCommit": "a20feb000abf2e38a6f9cde0b216f5ba5ba0cf23", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "34292277884452a8582e261e7c1e3a593a321e1a", "chunk": "diff --git a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\nindex 8ac09d8324c..0df64c61888 100644\n--- a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\n+++ b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\n\n@@ -85,18 +85,17 @@ public class UserAgentContainerTest {\n             osName = \"Unknown\";\n         }\n         osName = osName.replaceAll(\"\\\\s\", \"\");\n-        String geteUserAgentFixedPart =\n-            UserAgentContainer.AZSDK_USERAGENT_PREFIX +\n-                \"cosmos\" +\n-                \"/\" +\n-                HttpConstants.Versions.SDK_VERSION +\n-                SPACE +\n-                osName +\n-                \"/\" +\n-                System.getProperty(\"os.version\") +\n-                SPACE +\n-                \"JRE/\" +\n-                System.getProperty(\"java.version\");\n+        String geteUserAgentFixedPart = \"azsdk-java-\" +\n+            \"cosmos\" +\n+            \"/\" +\n+            HttpConstants.Versions.SDK_VERSION +\n+            SPACE +\n+            osName +\n+            \"/\" +\n+            System.getProperty(\"os.version\") +\n+            SPACE +\n+            \"JRE/\" +\n+            System.getProperty(\"java.version\");\n         return geteUserAgentFixedPart;\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc1NTc3Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13981#discussion_r468755776", "bodyText": "btw, this class, has a test named UserAgentIntegrationTest() (from prior useragent PR), please change that to\nuserAgentIntegration() to follow test name code style.", "author": "moderakh", "createdAt": "2020-08-11T17:45:25Z", "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java", "diffHunk": "@@ -87,7 +87,7 @@ private String getUserAgentFixedPart() {\n         osName = osName.replaceAll(\"\\\\s\", \"\");", "originalCommit": "a20feb000abf2e38a6f9cde0b216f5ba5ba0cf23", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "34292277884452a8582e261e7c1e3a593a321e1a", "chunk": "diff --git a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\nindex 8ac09d8324c..0df64c61888 100644\n--- a/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\n+++ b/sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/implementation/UserAgentContainerTest.java\n\n@@ -85,18 +85,17 @@ public class UserAgentContainerTest {\n             osName = \"Unknown\";\n         }\n         osName = osName.replaceAll(\"\\\\s\", \"\");\n-        String geteUserAgentFixedPart =\n-            UserAgentContainer.AZSDK_USERAGENT_PREFIX +\n-                \"cosmos\" +\n-                \"/\" +\n-                HttpConstants.Versions.SDK_VERSION +\n-                SPACE +\n-                osName +\n-                \"/\" +\n-                System.getProperty(\"os.version\") +\n-                SPACE +\n-                \"JRE/\" +\n-                System.getProperty(\"java.version\");\n+        String geteUserAgentFixedPart = \"azsdk-java-\" +\n+            \"cosmos\" +\n+            \"/\" +\n+            HttpConstants.Versions.SDK_VERSION +\n+            SPACE +\n+            osName +\n+            \"/\" +\n+            System.getProperty(\"os.version\") +\n+            SPACE +\n+            \"JRE/\" +\n+            System.getProperty(\"java.version\");\n         return geteUserAgentFixedPart;\n     }\n }\n"}}, {"oid": "34292277884452a8582e261e7c1e3a593a321e1a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/34292277884452a8582e261e7c1e3a593a321e1a", "message": "resolving comment", "committedDate": "2020-08-11T18:03:34Z", "type": "commit"}]}