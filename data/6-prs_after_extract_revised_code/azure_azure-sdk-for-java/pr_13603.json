{"pr_number": 13603, "pr_title": "Identity Authentication API rollback", "pr_createdAt": "2020-07-29T20:05:55Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13603", "timeline": [{"oid": "501d73eed728a4f7d2edae7f8c2943597af36a49", "url": "https://github.com/Azure/azure-sdk-for-java/commit/501d73eed728a4f7d2edae7f8c2943597af36a49", "message": "disable public api", "committedDate": "2020-07-29T19:30:53Z", "type": "commit"}, {"oid": "3dcb164566f10d9e367f43534684109dfff206e2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3dcb164566f10d9e367f43534684109dfff206e2", "message": "merge master", "committedDate": "2020-07-29T19:46:12Z", "type": "commit"}, {"oid": "36faf6e1c5ff926c4be30dec3bf2160821c11b60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/36faf6e1c5ff926c4be30dec3bf2160821c11b60", "message": "Remove Public API", "committedDate": "2020-07-29T20:04:39Z", "type": "commit"}, {"oid": "4e3314d1c72874c17f7b49163691e27912f44688", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4e3314d1c72874c17f7b49163691e27912f44688", "message": "update API", "committedDate": "2020-07-29T20:07:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2ODIxNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462568217", "bodyText": "Should you leave the members public since the class is internal? Less to update later to make it public again.", "author": "schaabs", "createdAt": "2020-07-29T20:28:00Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthenticationRequiredException.java", "diffHunk": "@@ -18,7 +18,7 @@\n      * @param message The exception message.\n      * @param request The details of the authentication request.\n      */\n-    public AuthenticationRequiredException(String message, TokenRequestContext request) {\n+    AuthenticationRequiredException(String message, TokenRequestContext request) {", "originalCommit": "4e3314d1c72874c17f7b49163691e27912f44688", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3MzQzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462573431", "bodyText": "This will be a checkstyle  (code style rule) violation  and will fail the CI, if I do that.\nWill need to suppress this rule for this class to leave it as public.\nI can make a //TODO note here to enable in future., that will be less work.", "author": "g2vinay", "createdAt": "2020-07-29T20:37:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2ODIxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4NDE4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462584187", "bodyText": "Added TODOs.", "author": "g2vinay", "createdAt": "2020-07-29T20:57:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2ODIxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwODkxNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462608915", "bodyText": "An alternative is moving the class to implementation package which you are doing for AuthenticationRecord class?", "author": "jianghaolu", "createdAt": "2020-07-29T21:47:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU2ODIxNw=="}], "type": "inlineReview", "revised_code": {"commit": "ab72502fda05300f987257eca30bd8e63881ee60", "chunk": "diff --git a/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthenticationRequiredException.java b/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthenticationRequiredException.java\nindex a3da878e1f0..2e68585ae81 100644\n--- a/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthenticationRequiredException.java\n+++ b/sdk/identity/azure-identity/src/main/java/com/azure/identity/AuthenticationRequiredException.java\n\n@@ -18,6 +18,7 @@ class AuthenticationRequiredException extends CredentialUnavailableException {\n      * @param message The exception message.\n      * @param request The details of the authentication request.\n      */\n+    //TODO: Make this public when exposing this class in Public API\n     AuthenticationRequiredException(String message, TokenRequestContext request) {\n         super(message);\n         this.request = request;\n"}}, {"oid": "ce973f81ac6a7df9d4b0dc44624e909eec642437", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ce973f81ac6a7df9d4b0dc44624e909eec642437", "message": "update changelog", "committedDate": "2020-07-29T20:33:59Z", "type": "commit"}, {"oid": "ab72502fda05300f987257eca30bd8e63881ee60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ab72502fda05300f987257eca30bd8e63881ee60", "message": "Add TODOs", "committedDate": "2020-07-29T20:54:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5NzQ2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462597464", "bodyText": "why moving this to implementation instead of changing the modifier to be package-private?", "author": "jianghaolu", "createdAt": "2020-07-29T21:23:03Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/implementation/AuthenticationRecord.java", "diffHunk": "@@ -1,7 +1,7 @@\n // Copyright (c) Microsoft Corporation. All rights reserved.\n // Licensed under the MIT License.\n \n-package com.azure.identity;\n+package com.azure.identity.implementation;", "originalCommit": "ab72502fda05300f987257eca30bd8e63881ee60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYxMjk4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462612986", "bodyText": "to ensure, the classes  in implementation package such asMsalAuthenticationAccount and IdentityClientOptions can access this class and the underlying implementation retains as it is.", "author": "g2vinay", "createdAt": "2020-07-29T21:56:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5NzQ2NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5Nzk3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462597977", "bodyText": "Could use @schaabs 's opinion but should this be kept for SharedTokenCacheCredential? Since enablePersistentCache is effectively always true.", "author": "jianghaolu", "createdAt": "2020-07-29T21:24:12Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/SharedTokenCacheCredentialBuilder.java", "diffHunk": "@@ -29,7 +31,7 @@ public SharedTokenCacheCredentialBuilder username(String username) {\n      *\n      * @return An updated instance of this builder.\n      */\n-    public SharedTokenCacheCredentialBuilder allowUnencryptedCache() {\n+    SharedTokenCacheCredentialBuilder allowUnencryptedCache() {", "originalCommit": "ab72502fda05300f987257eca30bd8e63881ee60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1NzkzMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462657933", "bodyText": "We discussed offline and have decided to remove the configuration and make the default True for this release. Since the SharedTokenCacheCredential will not create the cache if it doesn't exist. It will only ever support using the unencrypted cache if the encrypted is not available and the unencrypted already exists.", "author": "schaabs", "createdAt": "2020-07-30T00:04:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5Nzk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1ODA4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13603#discussion_r462658082", "bodyText": "enabled this by default in build method.", "author": "g2vinay", "createdAt": "2020-07-30T00:05:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5Nzk3Nw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "59f5a65cfb833928720cb862e6216a7c20ea6fd0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/59f5a65cfb833928720cb862e6216a7c20ea6fd0", "message": "enable stcc unencrypted cache", "committedDate": "2020-07-29T23:31:52Z", "type": "commit"}]}