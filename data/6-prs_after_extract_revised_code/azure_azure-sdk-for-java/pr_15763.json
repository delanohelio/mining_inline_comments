{"pr_number": 15763, "pr_title": "mgmt, improve sample code", "pr_createdAt": "2020-09-28T01:56:41Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15763", "timeline": [{"oid": "838f1a590b4d9d74b50d5ad4dfe75470602fa772", "url": "https://github.com/Azure/azure-sdk-for-java/commit/838f1a590b4d9d74b50d5ad4dfe75470602fa772", "message": "rename curl/post method", "committedDate": "2020-09-28T01:39:26Z", "type": "commit"}, {"oid": "22759ed7e33f8c10e582197eedeee8adea4ea926", "url": "https://github.com/Azure/azure-sdk-for-java/commit/22759ed7e33f8c10e582197eedeee8adea4ea926", "message": "randomResourceName in samples Utils", "committedDate": "2020-09-28T01:46:35Z", "type": "commit"}, {"oid": "740bdc0429b2cf14f6806fc4c0d5d66ce97d1594", "url": "https://github.com/Azure/azure-sdk-for-java/commit/740bdc0429b2cf14f6806fc4c0d5d66ce97d1594", "message": "put randomResourceName to samples Utils", "committedDate": "2020-09-28T01:55:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MzY3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15763#discussion_r495653673", "bodyText": "Hide these to Utils.", "author": "weidongxu-microsoft", "createdAt": "2020-09-28T01:57:14Z", "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/appplatform/samples/ManageSpringCloud.java", "diffHunk": "@@ -72,13 +72,13 @@\n      * @throws IllegalStateException unexcepted state\n      */\n     public static boolean runSample(AzureResourceManager azureResourceManager, String clientId) throws IOException, KeyStoreException, CertificateException, NoSuchAlgorithmException {\n-        final String rgName = azureResourceManager.resourceGroups().manager().internalContext().randomResourceName(\"rg\", 24);", "originalCommit": "740bdc0429b2cf14f6806fc4c0d5d66ce97d1594", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1Mzc2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15763#discussion_r495653763", "bodyText": "Rename it to sendGetRequest.", "author": "weidongxu-microsoft", "createdAt": "2020-09-28T01:57:39Z", "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java", "diffHunk": "@@ -3254,9 +3297,17 @@ public static void print(SpringApp springApp) {\n         System.out.println(info.toString());\n     }\n \n-    public static String curl(String urlString) {\n+    /**\n+     * Sends a GET request to target URL.\n+     * <p>\n+     * The method does not handle 301 redirect.\n+     *\n+     * @param urlString the target URL.\n+     * @return Content of the HTTP response.\n+     */\n+    public static String sendGetRequest(String urlString) {", "originalCommit": "740bdc0429b2cf14f6806fc4c0d5d66ce97d1594", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d0f7e760826d4ff67bc3adec7277474c16fedf49", "chunk": "diff --git a/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java b/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java\nindex 0d31d7a6994..a89c4f79944 100644\n--- a/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java\n+++ b/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java\n\n@@ -3300,6 +3300,7 @@ public final class Utils {\n     /**\n      * Sends a GET request to target URL.\n      * <p>\n+     * Retry logic tuned for AppService.\n      * The method does not handle 301 redirect.\n      *\n      * @param urlString the target URL.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY1MzgwMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15763#discussion_r495653802", "bodyText": "Rename it to sendPostRequest.", "author": "weidongxu-microsoft", "createdAt": "2020-09-28T01:57:51Z", "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java", "diffHunk": "@@ -3276,22 +3327,16 @@ public static String curl(String urlString) {\n         }\n     }\n \n-    public static String get(String urlString) {\n-        try {\n-            SimpleResponse<String> response = stringResponse(HTTP_CLIENT.getString(getHost(urlString), getPathAndQuery(urlString))).block();\n-            if (response != null) {\n-                return response.getValue();\n-            } else {\n-                return null;\n-            }\n-        } catch (Exception e) {\n-            return null;\n-        }\n-    }\n-\n-    public static String post(String urlString, String body) {\n+    /**\n+     * Sends a POST request to target URL.\n+     *\n+     * @param urlString the target URL.\n+     * @param body the request body.\n+     * @return Content of the HTTP response.\n+     * */\n+    public static String sendPostRequest(String urlString, String body) {", "originalCommit": "740bdc0429b2cf14f6806fc4c0d5d66ce97d1594", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d0f7e760826d4ff67bc3adec7277474c16fedf49", "chunk": "diff --git a/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java b/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java\nindex 0d31d7a6994..a89c4f79944 100644\n--- a/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java\n+++ b/sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/samples/Utils.java\n\n@@ -3329,6 +3330,8 @@ public final class Utils {\n \n     /**\n      * Sends a POST request to target URL.\n+     * <p>\n+     * Retry logic tuned for AppService.\n      *\n      * @param urlString the target URL.\n      * @param body the request body.\n"}}, {"oid": "92da4dabd621af13f397f013d614a0915259f607", "url": "https://github.com/Azure/azure-sdk-for-java/commit/92da4dabd621af13f397f013d614a0915259f607", "message": "Merge branch 'master' into mgmt_samples-improvement", "committedDate": "2020-09-28T02:13:59Z", "type": "commit"}, {"oid": "f0ff45d094398dec657bcc3d431e62948a65b745", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0ff45d094398dec657bcc3d431e62948a65b745", "message": "update merged sample", "committedDate": "2020-09-28T02:14:57Z", "type": "commit"}, {"oid": "d0f7e760826d4ff67bc3adec7277474c16fedf49", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d0f7e760826d4ff67bc3adec7277474c16fedf49", "message": "increase retry count, appservice seems take much longer to get app/function ready to use", "committedDate": "2020-09-28T02:35:56Z", "type": "commit"}, {"oid": "7280707ee1c8d3f5c33b35710a3014aca1d5fc75", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7280707ee1c8d3f5c33b35710a3014aca1d5fc75", "message": "improvement on retry and logging\n\nSigned-off-by: Weidong Xu <weidxu@microsoft.com>", "committedDate": "2020-09-28T02:44:47Z", "type": "commit"}, {"oid": "f70c1d93f87b4c8d3d9620c43a670c2b0076d128", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f70c1d93f87b4c8d3d9620c43a670c2b0076d128", "message": "fix bug", "committedDate": "2020-09-28T03:19:27Z", "type": "commit"}, {"oid": "b2e0a718bdd76a4327e42482d087df69040fddf5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b2e0a718bdd76a4327e42482d087df69040fddf5", "message": "ftp deploy to function app need to use a different path", "committedDate": "2020-09-28T04:11:29Z", "type": "commit"}]}