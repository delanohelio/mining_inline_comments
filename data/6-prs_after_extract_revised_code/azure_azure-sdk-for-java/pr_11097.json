{"pr_number": 11097, "pr_title": "Form training client API consistency issues", "pr_createdAt": "2020-05-12T17:25:28Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/11097", "timeline": [{"oid": "2d768b07153c687048e3acba932c8656885f8725", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2d768b07153c687048e3acba932c8656885f8725", "message": "add subpackage", "committedDate": "2020-05-12T17:27:57Z", "type": "commit"}, {"oid": "ef72cb50d8cc2d8b71b853cbc3162683f1e223ce", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef72cb50d8cc2d8b71b853cbc3162683f1e223ce", "message": "Add training File filter", "committedDate": "2020-05-12T17:28:46Z", "type": "commit"}, {"oid": "0d4bed0b1ba8cabdb519c30dfcf3aa0fcde5afbe", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0d4bed0b1ba8cabdb519c30dfcf3aa0fcde5afbe", "message": "training file filter model rename", "committedDate": "2020-05-12T17:29:13Z", "type": "commit"}, {"oid": "5e7fd56c459d84e1dcf8d229e5b000d1e0023198", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5e7fd56c459d84e1dcf8d229e5b000d1e0023198", "message": "checkstyle fix", "committedDate": "2020-05-12T17:30:11Z", "type": "forcePushed"}, {"oid": "6e7f465bedd6a0b37fa479f5d9a7f9b8145d4854", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6e7f465bedd6a0b37fa479f5d9a7f9b8145d4854", "message": "checkstyle fix", "committedDate": "2020-05-12T17:33:20Z", "type": "forcePushed"}, {"oid": "cfa7ce92f2a0ee6022a1903ef91d2ad0b81c49c9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cfa7ce92f2a0ee6022a1903ef91d2ad0b81c49c9", "message": "checkstyle fix", "committedDate": "2020-05-12T17:36:05Z", "type": "forcePushed"}, {"oid": "5bc064238aca9d9f1301717e6f6e33f21a99174d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5bc064238aca9d9f1301717e6f6e33f21a99174d", "message": "checkstyle fix", "committedDate": "2020-05-12T17:38:15Z", "type": "forcePushed"}, {"oid": "ac8a7c45f176b166574b416f2c76aacdd3310ba8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ac8a7c45f176b166574b416f2c76aacdd3310ba8", "message": "checkstyle fix", "committedDate": "2020-05-12T18:03:54Z", "type": "commit"}, {"oid": "ac8a7c45f176b166574b416f2c76aacdd3310ba8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ac8a7c45f176b166574b416f2c76aacdd3310ba8", "message": "checkstyle fix", "committedDate": "2020-05-12T18:03:54Z", "type": "forcePushed"}, {"oid": "3b366d643145771679329c4d5a554b45e667d9f4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3b366d643145771679329c4d5a554b45e667d9f4", "message": "Update readme content", "committedDate": "2020-05-12T18:19:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1MTg3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423951874", "bodyText": "missing closing", "author": "mssfang", "createdAt": "2020-05-12T18:39:30Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/implementation/Utility.java", "diffHunk": "@@ -26,7 +27,7 @@ private Utility() {\n \n     /**\n      * Automatically detect byte buffer's content type.\n-     *\n+     * <p>", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk2MzY5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423963694", "bodyText": "Javadoc is formatted correctly even without closing tags https://stackoverflow.com/questions/33787753/javadoc-closing-tags", "author": "samvaity", "createdAt": "2020-05-12T18:59:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1MTg3NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1MzM5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423953391", "bodyText": "can merge two lines in one", "author": "mssfang", "createdAt": "2020-05-12T18:42:05Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java", "diffHunk": "@@ -86,34 +83,31 @@ public FormRecognizerServiceVersion getServiceVersion() {\n      * error message indicating absence of cancellation support.</p>\n      *\n      * <p><strong>Code sample</strong></p>\n-     * {@codesnippet com.azure.ai.formrecognizer.FormTrainingClient.beginTraining#string-boolean-boolean-string-Duration}\n-     *\n-     * @param fileSourceUrl source URL parameter that is either an externally accessible Azure storage\n-     * blob container Uri (preferably a Shared Access Signature Uri).\n-     * @param useLabelFile Boolean to specify the use of labeled files for training the model.\n-     * @param includeSubFolders to indicate if sub folders within the set of prefix folders will\n-     * also need to be included when searching for content to be preprocessed.\n-     * @param filePrefix A case-sensitive prefix string to filter documents in the source path\n-     * for training. For example, when using a Azure storage blob Uri, use the prefix to restrict\n-     * sub folders for training.\n+     * {@codesnippet com.azure.ai.formrecognizer.training.FormTrainingClient.beginTraining#string-boolean-trainModelOptions-Duration}\n+     *\n+     * @param trainingFilesUrl an externally accessible Azure storage blob container Uri (preferably a\n+     * Shared Access Signature Uri).\n+     * @param useTrainingLabels Boolean to specify the use of labeled files for training the model.\n+     * @param trainModelOptions Filter to apply to the documents in the source path for training.\n      * @param pollInterval Duration between each poll for the operation status. If none is specified, a default of\n      * 5 seconds is used.\n      *\n      * @return A {@link SyncPoller} that polls the extract receipt operation until it\n      * has completed, has failed, or has been cancelled.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public SyncPoller<OperationResult, CustomFormModel> beginTraining(String fileSourceUrl, boolean useLabelFile,\n-        boolean includeSubFolders, String filePrefix, Duration pollInterval) {\n-        return client.beginTraining(fileSourceUrl, useLabelFile, includeSubFolders,\n-            filePrefix, pollInterval).getSyncPoller();\n+    public SyncPoller<OperationResult, CustomFormModel> beginTraining(String trainingFilesUrl,\n+        boolean useTrainingLabels,\n+        TrainModelOptions trainModelOptions, Duration pollInterval) {", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "chunk": "diff --git a/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java b/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java\nindex 8c5bf12e62f..4e86c083bfb 100644\n--- a/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java\n+++ b/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java\n\n@@ -97,10 +97,9 @@ public class FormTrainingClient {\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public SyncPoller<OperationResult, CustomFormModel> beginTraining(String trainingFilesUrl,\n-        boolean useTrainingLabels,\n-        TrainModelOptions trainModelOptions, Duration pollInterval) {\n-        return client.beginTraining(trainingFilesUrl, useTrainingLabels,\n-            null, pollInterval).getSyncPoller();\n+        boolean useTrainingLabels, TrainModelOptions trainModelOptions, Duration pollInterval) {\n+        return client.beginTraining(trainingFilesUrl, useTrainingLabels, trainModelOptions, pollInterval)\n+            .getSyncPoller();\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NDEyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423954121", "bodyText": "this seems odd, can be closed in last line and then begin .subscribe( from this line.", "author": "mssfang", "createdAt": "2020-05-12T18:43:19Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -44,39 +46,39 @@ public void beginTraining() {\n                                 key, customFormModelField.getName(), customFormModelField.getAccuracy())));\n                 });\n             });\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.beginTraining#string-boolean\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingAsyncClient#beginTraining} with options\n+     * Code snippet for {@link FormTrainingAsyncClient#beginTraining(String, boolean, TrainModelOptions, Duration)}\n+     * with options\n      */\n     public void beginTrainingWithOptions() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.beginTraining#string-boolean-boolean-string-Duration\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean-trainModelOptions-Duration\n         String trainingSetSource = \"{training-set-SAS-URL}\";\n-        boolean isIncludeSubFolders = false; // {is-include-subfolders}\n-        String filePrefix = \"{file-prefix}\";\n-        boolean useLabelFile = true;\n-\n-        formTrainingAsyncClient.beginTraining(trainingSetSource, useLabelFile, isIncludeSubFolders, filePrefix,\n-            Duration.ofSeconds(5)).subscribe(recognizePollingOperation -> {\n-                // if training polling operation completed, retrieve the final result.\n-                recognizePollingOperation.getFinalResult().subscribe(customFormModel -> {\n-                    System.out.printf(\"Model Id: %s%n\", customFormModel.getModelId());\n-                    System.out.printf(\"Model Status: %s%n\", customFormModel.getModelStatus());\n-                    customFormModel.getSubModels().forEach(customFormSubModel ->\n-                        customFormSubModel.getFieldMap().forEach((key, customFormModelField) ->\n-                            System.out.printf(\"Form Type: %s Field Text: %s Field Accuracy: %s%n\",\n-                                key, customFormModelField.getName(), customFormModelField.getAccuracy())));\n+        TrainModelOptions trainModelOptions = new TrainModelOptions().setIncludeSubFolders(false).setPrefix(\n+            \"Invoice\");\n+\n+        formTrainingAsyncClient.beginTraining(trainingSetSource, true, trainModelOptions, Duration.ofSeconds(5)\n+        ).subscribe(recognizePollingOperation -> {", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "chunk": "diff --git a/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java b/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java\nindex 900fd4eb76e..38e637fd326 100644\n--- a/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java\n+++ b/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java\n\n@@ -55,20 +55,20 @@ public class FormTrainingAsyncClientJavaDocCodeSnippets {\n      */\n     public void beginTrainingWithOptions() {\n         // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean-trainModelOptions-Duration\n-        String trainingSetSource = \"{training-set-SAS-URL}\";\n+        String trainingFilesUrl = \"{training-set-SAS-URL}\";\n         TrainModelOptions trainModelOptions = new TrainModelOptions().setIncludeSubFolders(false).setPrefix(\n             \"Invoice\");\n \n-        formTrainingAsyncClient.beginTraining(trainingSetSource, true, trainModelOptions, Duration.ofSeconds(5)\n-        ).subscribe(recognizePollingOperation -> {\n-            // if training polling operation completed, retrieve the final result.\n-            recognizePollingOperation.getFinalResult().subscribe(customFormModel -> {\n-                System.out.printf(\"Model Id: %s%n\", customFormModel.getModelId());\n-                System.out.printf(\"Model Status: %s%n\", customFormModel.getModelStatus());\n-                customFormModel.getSubModels().forEach(customFormSubModel ->\n-                    customFormSubModel.getFieldMap().forEach((key, customFormModelField) ->\n-                        System.out.printf(\"Form Type: %s Field Text: %s Field Accuracy: %s%n\",\n-                            key, customFormModelField.getName(), customFormModelField.getAccuracy())));\n+        formTrainingAsyncClient.beginTraining(trainingFilesUrl, true, trainModelOptions,\n+            Duration.ofSeconds(5)).subscribe(recognizePollingOperation -> {\n+                // if training polling operation completed, retrieve the final result.\n+                recognizePollingOperation.getFinalResult().subscribe(customFormModel -> {\n+                    System.out.printf(\"Model Id: %s%n\", customFormModel.getModelId());\n+                    System.out.printf(\"Model Status: %s%n\", customFormModel.getModelStatus());\n+                    customFormModel.getSubModels().forEach(customFormSubModel ->\n+                        customFormSubModel.getFieldMap().forEach((key, customFormModelField) ->\n+                            System.out.printf(\"Form Type: %s Field Text: %s Field Accuracy: %s%n\",\n+                                key, customFormModelField.getName(), customFormModelField.getAccuracy())));\n                 });\n             });\n         // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean-trainModelOptions-Duration\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk2NjEwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423966103", "bodyText": "nitpick: seems like this spacing isn't as good as how it used to be", "author": "iscai-msft", "createdAt": "2020-05-12T19:03:23Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/implementation/Utility.java", "diffHunk": "@@ -61,15 +62,15 @@ private Utility() {\n             // current chunk don't have enough bytes so return true to get next Chunk if there is one.\n             return true;\n         })\n-        .takeWhile(doContinue -> doContinue)\n-        .then(Mono.defer(() -> {\n-            if (contentType[0] != null) {\n-                return Mono.just(contentType[0]);\n-            } else {\n-                return Mono.error(new RuntimeException(\"Content type could not be detected. \"\n-                    + \"Should use other overload API that takes content type.\"));\n-            }\n-        }));\n+            .takeWhile(doContinue -> doContinue)", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk5MTQwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423991401", "bodyText": "Yeah, they were correctly formatted now.", "author": "samvaity", "createdAt": "2020-05-12T19:48:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk2NjEwMw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk2Nzc2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423967764", "bodyText": "Random 's' here", "author": "iscai-msft", "createdAt": "2020-05-12T19:06:27Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java", "diffHunk": "@@ -91,21 +97,23 @@ public FormRecognizerServiceVersion getServiceVersion() {\n      * error message indicating absence of cancellation support.</p>\n      *\n      * <p><strong>Code sample</strong></p>\n-     * {@codesnippet com.azure.ai.formrecognizer.FormTrainingAsyncClient.beginTraining#string-boolean}\n+     * {@codesnippet com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean}\n      *\n-     * @param fileSourceUrl source URL parameter that is either an externally accessible Azure\n+     * @param trainingFilesUrl source URL parameter that is either an externally accessible Azure\n      * storage blob container Uri (preferably a Shared Access Signature Uri).\n-     * @param useLabelFile Boolean to specify the use of labeled files for training the model.\n+     * @param useTrainingLabels Boolean to specify the use of labeled files for training the model.\n      *\n      * @return A {@link PollerFlux} that polls the training model operation until it has completed, has failed, or has\n      * been cancelled.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public PollerFlux<OperationResult, CustomFormModel> beginTraining(String fileSourceUrl, boolean useLabelFile) {\n-        return beginTraining(fileSourceUrl, useLabelFile, false, null, null);\n+    public PollerFlux<OperationResult, CustomFormModel> beginTraining(String trainingFilesUrl,\n+        boolean useTrainingLabels) {\n+        return beginTraining(trainingFilesUrl, useTrainingLabels, null, null);\n     }\n \n     /**\n+     * s", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "chunk": "diff --git a/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java b/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java\nindex 345a49ae78f..699dd6c4546 100644\n--- a/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java\n+++ b/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingAsyncClient.java\n\n@@ -113,7 +113,6 @@ public class FormTrainingAsyncClient {\n     }\n \n     /**\n-     * s\n      * Create and train a custom model.\n      * <p>Models are trained using documents that are of the following content type -\n      * 'application/pdf', 'image/jpeg', 'image/png', 'image/tiff'.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MTA0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423971043", "bodyText": "this is probably a question for the wider team, but should we include pollInterval in the TrainModelOptions? I feel like it's not necessarily related (since pollInterval is more about the LROPoller itself), but the user might be confused seeing this and wondering why pollInterval isn't a training model option? Not sure what your thoguhts are on this, I don't feel strongly either way, just wanted to bring it up.\nI'm assuming useLabelFile is also not in TrainModelOptions since we want it more exposed to the user, right?", "author": "iscai-msft", "createdAt": "2020-05-12T19:12:12Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java", "diffHunk": "@@ -86,34 +83,31 @@ public FormRecognizerServiceVersion getServiceVersion() {\n      * error message indicating absence of cancellation support.</p>\n      *\n      * <p><strong>Code sample</strong></p>\n-     * {@codesnippet com.azure.ai.formrecognizer.FormTrainingClient.beginTraining#string-boolean-boolean-string-Duration}\n-     *\n-     * @param fileSourceUrl source URL parameter that is either an externally accessible Azure storage\n-     * blob container Uri (preferably a Shared Access Signature Uri).\n-     * @param useLabelFile Boolean to specify the use of labeled files for training the model.\n-     * @param includeSubFolders to indicate if sub folders within the set of prefix folders will\n-     * also need to be included when searching for content to be preprocessed.\n-     * @param filePrefix A case-sensitive prefix string to filter documents in the source path\n-     * for training. For example, when using a Azure storage blob Uri, use the prefix to restrict\n-     * sub folders for training.\n+     * {@codesnippet com.azure.ai.formrecognizer.training.FormTrainingClient.beginTraining#string-boolean-trainModelOptions-Duration}\n+     *\n+     * @param trainingFilesUrl an externally accessible Azure storage blob container Uri (preferably a\n+     * Shared Access Signature Uri).\n+     * @param useTrainingLabels Boolean to specify the use of labeled files for training the model.\n+     * @param trainModelOptions Filter to apply to the documents in the source path for training.\n      * @param pollInterval Duration between each poll for the operation status. If none is specified, a default of\n      * 5 seconds is used.\n      *\n      * @return A {@link SyncPoller} that polls the extract receipt operation until it\n      * has completed, has failed, or has been cancelled.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public SyncPoller<OperationResult, CustomFormModel> beginTraining(String fileSourceUrl, boolean useLabelFile,\n-        boolean includeSubFolders, String filePrefix, Duration pollInterval) {\n-        return client.beginTraining(fileSourceUrl, useLabelFile, includeSubFolders,\n-            filePrefix, pollInterval).getSyncPoller();\n+    public SyncPoller<OperationResult, CustomFormModel> beginTraining(String trainingFilesUrl,", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk5MDgxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423990819", "bodyText": "I'm assuming useLabelFile is also not in TrainModelOptions since we want it more exposed to the user, right?\n\nYup, API's are using useTrainingLabels to distinguish  between labeled and unlabeled return result so not containing it in an object and explicitly exposed.\n\nbut should we include pollInterval in the TrainModelOptions?\n\nI am open to doing that.\nWe could even consider removing pollInterval as an option all together since we don't have a lot of supporting use cases to include it?\n@kristapratico @annelo-msft", "author": "samvaity", "createdAt": "2020-05-12T19:47:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MTA0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4Mjk0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r424082943", "bodyText": "Guidelines say we need to support it: https://azure.github.io/azure-sdk/general_design.html#long-running-operations\nWhere is pollInterval on the /Analyze methods? I would place it in the same spot across methods - which I think would be outside of TrainModelOptions, but correct me if I'm wrong.", "author": "kristapratico", "createdAt": "2020-05-12T23:04:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MTA0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4ODM3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r424088379", "bodyText": "Yeah, it is not included in any Model.", "author": "samvaity", "createdAt": "2020-05-12T23:21:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MTA0Mw=="}], "type": "inlineReview", "revised_code": {"commit": "1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "chunk": "diff --git a/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java b/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java\nindex 8c5bf12e62f..4e86c083bfb 100644\n--- a/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java\n+++ b/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClient.java\n\n@@ -97,10 +97,9 @@ public class FormTrainingClient {\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public SyncPoller<OperationResult, CustomFormModel> beginTraining(String trainingFilesUrl,\n-        boolean useTrainingLabels,\n-        TrainModelOptions trainModelOptions, Duration pollInterval) {\n-        return client.beginTraining(trainingFilesUrl, useTrainingLabels,\n-            null, pollInterval).getSyncPoller();\n+        boolean useTrainingLabels, TrainModelOptions trainModelOptions, Duration pollInterval) {\n+        return client.beginTraining(trainingFilesUrl, useTrainingLabels, trainModelOptions, pollInterval)\n+            .getSyncPoller();\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MTc5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423971797", "bodyText": "probably better to change the code snippets to, making it trainingFilesUrl, useTrainingLabels", "author": "iscai-msft", "createdAt": "2020-05-12T19:13:28Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -19,17 +21,17 @@\n      * Code snippet for {@link FormTrainingAsyncClient} initialization\n      */\n     public void formTrainingAsyncClientInInitialization() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.initialization\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.initialization\n         FormTrainingAsyncClient formTrainingAsyncClient = new FormRecognizerClientBuilder().buildAsyncClient()\n             .getFormTrainingAsyncClient();\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.initialization\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.initialization\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingAsyncClient#beginTraining}\n+     * Code snippet for {@link FormTrainingAsyncClient#beginTraining(String, boolean)}\n      */\n     public void beginTraining() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.beginTraining#string-boolean\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean\n         String trainingSetSource = \"{training-set-SAS-URL}\";\n         boolean useLabelFile = true;\n         formTrainingAsyncClient.beginTraining(trainingSetSource, useLabelFile).subscribe(", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "chunk": "diff --git a/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java b/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java\nindex 900fd4eb76e..38e637fd326 100644\n--- a/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java\n+++ b/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java\n\n@@ -32,9 +32,9 @@ public class FormTrainingAsyncClientJavaDocCodeSnippets {\n      */\n     public void beginTraining() {\n         // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.beginTraining#string-boolean\n-        String trainingSetSource = \"{training-set-SAS-URL}\";\n-        boolean useLabelFile = true;\n-        formTrainingAsyncClient.beginTraining(trainingSetSource, useLabelFile).subscribe(\n+        String trainingFilesUrl = \"{training-set-SAS-URL}\";\n+        boolean useTrainingLabels = true;\n+        formTrainingAsyncClient.beginTraining(trainingFilesUrl, useTrainingLabels).subscribe(\n             recognizePollingOperation -> {\n                 // if training polling operation completed, retrieve the final result.\n                 recognizePollingOperation.getFinalResult().subscribe(customFormModel -> {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MjY2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423972665", "bodyText": "maybe you're going to address this in another PR, but from this meeting we also determined to change getModelInfos -> getCustomModels", "author": "iscai-msft", "createdAt": "2020-05-12T19:15:06Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -106,72 +108,72 @@ public void getCustomModelWithResponse() {\n                     System.out.printf(\"Form Type: %s Field Text: %s Field Accuracy: %s%n\",\n                         key, customFormModelField.getName(), customFormModelField.getAccuracy())));\n         });\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.getCustomModelWithResponse#string\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.getCustomModelWithResponse#string\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingAsyncClient#getAccountProperties}\n+     * Code snippet for {@link FormTrainingAsyncClient#getAccountProperties()}\n      */\n     public void getAccountProperties() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.getAccountProperties\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.getAccountProperties\n         formTrainingAsyncClient.getAccountProperties().subscribe(accountProperties -> {\n             System.out.printf(\"Max number of models that can be trained for this account: %s%n\",\n-                accountProperties.getLimit());\n-            System.out.printf(\"Current count of trained custom models: %d%n\", accountProperties.getCount());\n+                accountProperties.getCustomModelLimit());\n+            System.out.printf(\"Current count of trained custom models: %d%n\", accountProperties.getCustomModelCount());\n         });\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.getAccountProperties\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.getAccountProperties\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingAsyncClient#getAccountPropertiesWithResponse}\n+     * Code snippet for {@link FormTrainingAsyncClient#getAccountPropertiesWithResponse()}\n      */\n     public void getAccountPropertiesWithResponse() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.getAccountPropertiesWithResponse\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.getAccountPropertiesWithResponse\n         formTrainingAsyncClient.getAccountPropertiesWithResponse().subscribe(response -> {\n             System.out.printf(\"Response Status Code: %d.\", response.getStatusCode());\n             AccountProperties accountProperties = response.getValue();\n             System.out.printf(\"Max number of models that can be trained for this account: %s%n\",\n-                accountProperties.getLimit());\n-            System.out.printf(\"Current count of trained custom models: %d%n\", accountProperties.getCount());\n+                accountProperties.getCustomModelLimit());\n+            System.out.printf(\"Current count of trained custom models: %d%n\", accountProperties.getCustomModelCount());\n         });\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.getAccountPropertiesWithResponse\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.getAccountPropertiesWithResponse\n     }\n \n     /**\n      * Code snippet for {@link FormTrainingAsyncClient#deleteModel}\n      */\n     public void deleteModel() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.deleteModel#string\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.deleteModel#string\n         String modelId = \"{model_id}\";\n         formTrainingAsyncClient.deleteModel(modelId).subscribe(val ->\n             System.out.printf(\"Model Id: %s is deleted%n\", modelId));\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.deleteModel#string\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.deleteModel#string\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingAsyncClient#deleteModelWithResponse}\n+     * Code snippet for {@link FormTrainingAsyncClient#deleteModelWithResponse(String)}\n      */\n     public void deleteModelWithResponse() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.deleteModelWithResponse#string\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.deleteModelWithResponse#string\n         String modelId = \"{model_id}\";\n         formTrainingAsyncClient.deleteModelWithResponse(modelId).subscribe(response -> {\n             System.out.printf(\"Response Status Code: %d.\", response.getStatusCode());\n             System.out.printf(\"Model Id: %s is deleted%n\", modelId);\n         });\n-        // END: com.azure.ai.formrecognizer.FormTrainingAsyncClient.deleteModelWithResponse#string\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.deleteModelWithResponse#string\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingAsyncClient#getModelInfos}\n+     * Code snippet for {@link FormTrainingAsyncClient#getModelInfos()}\n      */\n     public void getModelInfos() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingAsyncClient.getModelInfos\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingAsyncClient.getModelInfos", "originalCommit": "3b366d643145771679329c4d5a554b45e667d9f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk4ODczMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r423988731", "bodyText": "yup, will address some of the name changes in another PR.", "author": "samvaity", "createdAt": "2020-05-12T19:42:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk3MjY2NQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1e276beb17c18086c62b80b8edd9240fe2e8b7e1", "message": "review comments", "committedDate": "2020-05-12T20:05:58Z", "type": "commit"}, {"oid": "81ceddb5259b248b38e857fd706eed08aca4ae63", "url": "https://github.com/Azure/azure-sdk-for-java/commit/81ceddb5259b248b38e857fd706eed08aca4ae63", "message": "update changelog comments", "committedDate": "2020-05-13T01:12:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc5MzE2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11097#discussion_r424793162", "bodyText": "nit: doesn't need a new line", "author": "mssfang", "createdAt": "2020-05-13T23:46:13Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingClientJavaDocCodeSnippets.java", "diffHunk": "@@ -21,57 +23,58 @@\n      * Code snippet for {@link FormTrainingClient} initialization\n      */\n     public void formTrainingClientInInitialization() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingClient.initialization\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingClient.initialization\n         FormTrainingClient formTrainingClient = new FormRecognizerClientBuilder().buildClient()\n             .getFormTrainingClient();\n-        // END: com.azure.ai.formrecognizer.FormTrainingClient.initialization\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingClient.initialization\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingClient#beginTraining}\n+     * Code snippet for {@link FormTrainingClient#beginTraining(String, boolean)}\n      */\n     public void beginTraining() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingClient.beginTraining#string-boolean\n-        String trainingSetSource = \"{training-set-SAS-URL}\";\n-        boolean useLabelFile = true;\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingClient.beginTraining#string-boolean\n+        String trainingFilesUrl = \"{training-set-SAS-URL}\";\n+        boolean useTrainingLabels = true;\n         CustomFormModel customFormModel =\n-            formTrainingClient.beginTraining(trainingSetSource, useLabelFile).getFinalResult();\n+            formTrainingClient.beginTraining(trainingFilesUrl, useTrainingLabels).getFinalResult();\n         System.out.printf(\"Model Id: %s%n\", customFormModel.getModelId());\n         System.out.printf(\"Model Status: %s%n\", customFormModel.getModelStatus());\n         customFormModel.getSubModels().forEach(customFormSubModel ->\n             customFormSubModel.getFieldMap().forEach((key, customFormModelField) ->\n                 System.out.printf(\"Form Type: %s Field Text: %s Field Accuracy: %s%n\",\n                     key, customFormModelField.getName(), customFormModelField.getAccuracy())));\n-        // END: com.azure.ai.formrecognizer.FormTrainingClient.beginTraining#string-boolean\n+        // END: com.azure.ai.formrecognizer.training.FormTrainingClient.beginTraining#string-boolean\n     }\n \n     /**\n-     * Code snippet for {@link FormTrainingClient#beginTraining} with options\n+     * Code snippet for {@link FormTrainingClient#beginTraining(String, boolean, TrainModelOptions, Duration)}\n+     * with options\n      */\n     public void beginTrainingWithOptions() {\n-        // BEGIN: com.azure.ai.formrecognizer.FormTrainingClient.beginTraining#string-boolean-boolean-string-Duration\n-        String trainingSetSource = \"{training-set-SAS-URL}\";\n-        boolean isIncludeSubFolders = false; // {is-include-subfolders}\n-        String filePrefix = \"{file-prefix}\";\n-        boolean useLabelFile = true;\n+        // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingClient.beginTraining#string-boolean-trainModelOptions-Duration\n+        String trainingFilesUrl = \"{training-set-SAS-URL}\";\n+        TrainModelOptions trainModelOptions = new TrainModelOptions().setIncludeSubFolders(false)\n+            .setPrefix(\"Invoice\");", "originalCommit": "81ceddb5259b248b38e857fd706eed08aca4ae63", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "69415beee0b46afe0c2892eafb01210fe6438c46", "chunk": "diff --git a/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingClientJavaDocCodeSnippets.java b/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingClientJavaDocCodeSnippets.java\nindex 30f3665ca91..da85da1eb44 100644\n--- a/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingClientJavaDocCodeSnippets.java\n+++ b/sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormTrainingClientJavaDocCodeSnippets.java\n\n@@ -54,12 +54,11 @@ public class FormTrainingClientJavaDocCodeSnippets {\n     public void beginTrainingWithOptions() {\n         // BEGIN: com.azure.ai.formrecognizer.training.FormTrainingClient.beginTraining#string-boolean-trainModelOptions-Duration\n         String trainingFilesUrl = \"{training-set-SAS-URL}\";\n-        TrainModelOptions trainModelOptions = new TrainModelOptions().setIncludeSubFolders(false)\n-            .setPrefix(\"Invoice\");\n+        TrainModelOptions trainModelOptions = new TrainModelOptions().setIncludeSubFolders(false).setPrefix(\"Invoice\");\n         boolean useTrainingLabels = true;\n \n-        CustomFormModel customFormModel = formTrainingClient.beginTraining(\n-            trainingFilesUrl, useTrainingLabels, trainModelOptions, Duration.ofSeconds(5)).getFinalResult();\n+        CustomFormModel customFormModel = formTrainingClient.beginTraining(trainingFilesUrl, useTrainingLabels,\n+            trainModelOptions, Duration.ofSeconds(5)).getFinalResult();\n \n         System.out.printf(\"Model Id: %s%n\", customFormModel.getModelId());\n         System.out.printf(\"Model Status: %s%n\", customFormModel.getModelStatus());\n"}}, {"oid": "69415beee0b46afe0c2892eafb01210fe6438c46", "url": "https://github.com/Azure/azure-sdk-for-java/commit/69415beee0b46afe0c2892eafb01210fe6438c46", "message": "nit comments", "committedDate": "2020-05-14T00:08:05Z", "type": "commit"}]}