{"pr_number": 7913, "pr_title": "EventHubs distributed tracing update span kind", "pr_createdAt": "2020-02-03T22:06:05Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7913", "timeline": [{"oid": "96c5d66e927a565ce0c42aab375af1aa28d929f7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/96c5d66e927a565ce0c42aab375af1aa28d929f7", "message": "update span kind for Otel", "committedDate": "2020-02-03T21:59:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM4OTkzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7913#discussion_r374389930", "bodyText": "please also change Send span (line 81 to have Client kind)", "author": "lmolkova", "createdAt": "2020-02-03T22:59:03Z", "path": "sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java", "diffHunk": "@@ -86,7 +86,7 @@ public Context start(String spanName, Context context, ProcessKind processKind)\n                 return context.addData(PARENT_SPAN_KEY, span);\n             case MESSAGE:\n                 spanBuilder = getSpanBuilder(spanName, context);\n-                span = spanBuilder.startSpan();\n+                span = spanBuilder.setSpanKind(Span.Kind.PRODUCER).startSpan();", "originalCommit": "96c5d66e927a565ce0c42aab375af1aa28d929f7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5aff0f1758f4d26c8fd44780bb1ea9a0587201c7", "chunk": "diff --git a/sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java b/sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java\nindex 4cd632fee4a..83a7cd21169 100644\n--- a/sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java\n+++ b/sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java\n\n@@ -78,7 +78,7 @@ public class OpenTelemetryTracer implements com.azure.core.util.tracing.Tracer {\n                 if (spanBuilder == null) {\n                     return Context.NONE;\n                 }\n-                span = spanBuilder.setSpanKind(Span.Kind.PRODUCER).startSpan();\n+                span = spanBuilder.setSpanKind(Span.Kind.CLIENT).startSpan();\n                 if (span.isRecording()) {\n                     // If span is sampled in, add additional request attributes\n                     addSpanRequestAttributes(span, context, spanName);\n"}}, {"oid": "5aff0f1758f4d26c8fd44780bb1ea9a0587201c7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5aff0f1758f4d26c8fd44780bb1ea9a0587201c7", "message": "update send span kind to client", "committedDate": "2020-02-03T23:49:17Z", "type": "commit"}]}