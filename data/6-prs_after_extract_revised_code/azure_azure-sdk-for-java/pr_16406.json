{"pr_number": 16406, "pr_title": "Use default values for timeout and context when null", "pr_createdAt": "2020-10-15T22:25:33Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/16406", "timeline": [{"oid": "ccfdc525a9b318c1d0053eff7b2e2f870c9f86b6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ccfdc525a9b318c1d0053eff7b2e2f870c9f86b6", "message": "Add changelog", "committedDate": "2020-10-15T22:43:31Z", "type": "forcePushed"}, {"oid": "e7a70a67735d675944d2513c875ab567e1770976", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7a70a67735d675944d2513c875ab567e1770976", "message": "Add changelog", "committedDate": "2020-10-15T22:44:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU0MTE1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16406#discussion_r506541154", "bodyText": "Is there no exception thrown anymore? What happens if the timeout expires?", "author": "conniey", "createdAt": "2020-10-16T15:23:52Z", "path": "sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableClient.java", "diffHunk": "@@ -413,7 +409,6 @@ public void deleteEntity(String partitionKey, String rowKey, String eTag) {\n      *                                    table, or if {@code eTag} is not {@code null} and the existing entity's eTag\n      *                                    does not match that of the provided entity.\n      * @throws IllegalArgumentException if the provided partition key or row key are {@code null} or empty.\n-     * @throws RuntimeException if the provided timeout expires.", "originalCommit": "e7a70a67735d675944d2513c875ab567e1770976", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjY1MjMxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16406#discussion_r506652318", "bodyText": "Right, so this is interesting. In Tables, operations that work at the Entity level accept a \"timeout\" parameter that can be sent to the service, where as Table level operations do not. The server also enforces certain limitations on the timeout value itself, such it will be capped to a max value that varies depending on the operation. If the server-side timeout expires, the server will return an error. I haven't seen this happen in practice and it's not documented specifically in the REST api docs or swagger so I'm not sure what error code is returned in this case, vs. other failures.\nI will have to do some research and then document the correct type of exception the customer receives when the server-side timeout expires, but I'll file a separate issue for that.", "author": "bsiegel", "createdAt": "2020-10-16T18:27:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU0MTE1NA=="}], "type": "inlineReview", "revised_code": {"commit": "24a6a35fcd8566411342d66574c5d3936a1444a1", "chunk": "diff --git a/sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableClient.java b/sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableClient.java\nindex c0041925b9..d93b0db94b 100644\n--- a/sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableClient.java\n+++ b/sdk/tables/azure-data-tables/src/main/java/com/azure/data/tables/TableClient.java\n\n@@ -409,6 +411,7 @@ public class TableClient {\n      *                                    table, or if {@code eTag} is not {@code null} and the existing entity's eTag\n      *                                    does not match that of the provided entity.\n      * @throws IllegalArgumentException if the provided partition key or row key are {@code null} or empty.\n+     * @throws RuntimeException if the provided timeout expires.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public void deleteEntity(String partitionKey, String rowKey, String eTag, Duration timeout) {\n"}}, {"oid": "24a6a35fcd8566411342d66574c5d3936a1444a1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/24a6a35fcd8566411342d66574c5d3936a1444a1", "message": "Use the service's timeout parameter for CreateEntity\n\nAll the other entity operations already use it", "committedDate": "2020-10-16T18:33:23Z", "type": "commit"}, {"oid": "9a449a123936e6526850756f26af1efc72e58d8d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9a449a123936e6526850756f26af1efc72e58d8d", "message": "Don't crash if a null timeout value is passed", "committedDate": "2020-10-16T18:33:24Z", "type": "commit"}, {"oid": "210781ac4f506a71403edc8b868767c0785c1127", "url": "https://github.com/Azure/azure-sdk-for-java/commit/210781ac4f506a71403edc8b868767c0785c1127", "message": "No RuntimeException is thrown when using the service timeout parameter", "committedDate": "2020-10-16T18:33:24Z", "type": "commit"}, {"oid": "203346078177c8537d4498625404c3ff8cd58d78", "url": "https://github.com/Azure/azure-sdk-for-java/commit/203346078177c8537d4498625404c3ff8cd58d78", "message": "Ensure the two create/delete table method pairs are identical", "committedDate": "2020-10-16T18:33:24Z", "type": "commit"}, {"oid": "63884272135bff9ca06b8430867fdc61674804cf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/63884272135bff9ca06b8430867fdc61674804cf", "message": "Always pass Context.NONE if the context param is null", "committedDate": "2020-10-16T18:33:24Z", "type": "commit"}, {"oid": "faaf706896ad87e5c1e57cd3ade5d270270cbc90", "url": "https://github.com/Azure/azure-sdk-for-java/commit/faaf706896ad87e5c1e57cd3ade5d270270cbc90", "message": "Add test to cover bug #16386", "committedDate": "2020-10-16T18:33:24Z", "type": "commit"}, {"oid": "38718ead4241af4cfd90a012fbdfb74454aa8ece", "url": "https://github.com/Azure/azure-sdk-for-java/commit/38718ead4241af4cfd90a012fbdfb74454aa8ece", "message": "Add recordings", "committedDate": "2020-10-16T18:33:24Z", "type": "commit"}, {"oid": "e31fa90aec1abd857eb05e0ea8e0c5f042e31c8c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e31fa90aec1abd857eb05e0ea8e0c5f042e31c8c", "message": "Add changelog", "committedDate": "2020-10-16T18:33:25Z", "type": "commit"}, {"oid": "d7e3caee74ee7a24cce32c5632f900d398e2f06c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d7e3caee74ee7a24cce32c5632f900d398e2f06c", "message": "Document error when service timeout expires", "committedDate": "2020-10-16T18:48:44Z", "type": "commit"}, {"oid": "d7e3caee74ee7a24cce32c5632f900d398e2f06c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d7e3caee74ee7a24cce32c5632f900d398e2f06c", "message": "Document error when service timeout expires", "committedDate": "2020-10-16T18:48:44Z", "type": "forcePushed"}]}