{"pr_number": 18303, "pr_title": "mgmt-core, support systemData for Azure resource", "pr_createdAt": "2020-12-22T05:25:57Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/18303", "timeline": [{"oid": "62de7f72958e2337eb9263cd9f046d94c53cdcda", "url": "https://github.com/Azure/azure-sdk-for-java/commit/62de7f72958e2337eb9263cd9f046d94c53cdcda", "message": "support systemData for Azure resource", "committedDate": "2020-12-22T05:24:40Z", "type": "commit"}, {"oid": "fa58baf1766bafdf3b3afe0b5f33ce742babe39a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fa58baf1766bafdf3b3afe0b5f33ce742babe39a", "message": "nit", "committedDate": "2020-12-22T05:28:31Z", "type": "commit"}, {"oid": "332f54842ce977e520e4e207e3ed3d102226a74f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/332f54842ce977e520e4e207e3ed3d102226a74f", "message": "more tests", "committedDate": "2020-12-22T08:50:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE0ODY5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r547148696", "bodyText": "Class name derived from specs, though we should be able to change to a better name if applicable.", "author": "weidongxu-microsoft", "createdAt": "2020-12-22T08:53:24Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/CreatedByType.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.management;\n+\n+import com.azure.core.util.ExpandableStringEnum;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import java.util.Collection;\n+\n+/** Defines values for CreatedByType. */\n+public final class CreatedByType extends ExpandableStringEnum<CreatedByType> {", "originalCommit": "332f54842ce977e520e4e207e3ed3d102226a74f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9ca8b37e8c59222579d2fc1bb07329fa0b677766", "chunk": "diff --git a/sdk/core/azure-core-management/src/main/java/com/azure/core/management/CreatedByType.java b/sdk/core/azure-core-management/src/main/java/com/azure/core/management/CreatedByType.java\ndeleted file mode 100644\nindex 7086ff27c3c..00000000000\n--- a/sdk/core/azure-core-management/src/main/java/com/azure/core/management/CreatedByType.java\n+++ /dev/null\n\n@@ -1,40 +0,0 @@\n-// Copyright (c) Microsoft Corporation. All rights reserved.\n-// Licensed under the MIT License.\n-\n-package com.azure.core.management;\n-\n-import com.azure.core.util.ExpandableStringEnum;\n-import com.fasterxml.jackson.annotation.JsonCreator;\n-import java.util.Collection;\n-\n-/** Defines values for CreatedByType. */\n-public final class CreatedByType extends ExpandableStringEnum<CreatedByType> {\n-\n-    /** Static value User for CreatedByType, represents an AAD user. */\n-    public static final CreatedByType USER = fromString(\"User\");\n-\n-    /** Static value Application for CreatedByType, represents an AAD application. */\n-    public static final CreatedByType APPLICATION = fromString(\"Application\");\n-\n-    /** Static value ManagedIdentity for CreatedByType, represents a Managed Identity. */\n-    public static final CreatedByType MANAGED_IDENTITY = fromString(\"ManagedIdentity\");\n-\n-    /** Static value Key for CreatedByType. */\n-    public static final CreatedByType KEY = fromString(\"Key\");\n-\n-    /**\n-     * Creates or finds a CreatedByType from its string representation.\n-     *\n-     * @param name a name to look for.\n-     * @return the corresponding CreatedByType.\n-     */\n-    @JsonCreator\n-    public static CreatedByType fromString(String name) {\n-        return fromString(name, CreatedByType.class);\n-    }\n-\n-    /** @return known CreatedByType values. */\n-    public static Collection<CreatedByType> values() {\n-        return values(CreatedByType.class);\n-    }\n-}\n"}}, {"oid": "96ce06763f76e66503f86edcf3b59b8678d8e797", "url": "https://github.com/Azure/azure-sdk-for-java/commit/96ce06763f76e66503f86edcf3b59b8678d8e797", "message": "Merge branch 'master' into mgmt-core_support-system-data", "committedDate": "2020-12-24T02:04:24Z", "type": "commit"}, {"oid": "838f377c425e9343bae2e9e73da4ad9a71710e82", "url": "https://github.com/Azure/azure-sdk-for-java/commit/838f377c425e9343bae2e9e73da4ad9a71710e82", "message": "Merge branch 'master' into mgmt-core_support-system-data", "committedDate": "2021-02-25T06:36:29Z", "type": "commit"}, {"oid": "61b0edf8dba53fa1e91974bd64aa2c9f9fbf21c5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/61b0edf8dba53fa1e91974bd64aa2c9f9fbf21c5", "message": "use SystemData as stand-along", "committedDate": "2021-02-25T06:54:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxOTU4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r582619580", "bodyText": "@srnagar\nLet me know if you have concern with the class name CreatedByType. It is defined by swagger. But it might be not very appropriate (as it is returned by createdByType() and lastModifiedByType(), more like IdentityType?).\nHowever IdentityType would cause quite some naming conflicts with other swagger types (though not too bad as they are under different namespace).", "author": "weidongxu-microsoft", "createdAt": "2021-02-25T08:05:43Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java", "diffHunk": "@@ -0,0 +1,76 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.management;\n+\n+import java.time.OffsetDateTime;\n+\n+/** Metadata pertaining to creation and last modification of the resource. */\n+public final class SystemData {\n+\n+    private String createdBy;\n+\n+    private CreatedByType createdByType;\n+\n+    private OffsetDateTime createdAt;\n+\n+    private String lastModifiedBy;\n+\n+    private CreatedByType lastModifiedByType;\n+\n+    private OffsetDateTime lastModifiedAt;\n+\n+    /**\n+     * Get the identity that created the resource.\n+     *\n+     * @return the identity that created the resource.\n+     */\n+    public String createdBy() {\n+        return this.createdBy;\n+    }\n+\n+    /**\n+     * Get the type of identity that created the resource.\n+     *\n+     * @return the type of identity that created the resource.\n+     */\n+    public CreatedByType createdByType() {\n+        return this.createdByType;\n+    }\n+\n+    /**\n+     * Get the timestamp of resource creation (UTC).\n+     *\n+     * @return the timestamp of resource creation (UTC).\n+     */\n+    public OffsetDateTime createdAt() {\n+        return this.createdAt;\n+    }\n+\n+    /**\n+     * Get the identity that last modified the resource.\n+     *\n+     * @return the identity that last modified the resource.\n+     */\n+    public String lastModifiedBy() {\n+        return this.lastModifiedBy;\n+    }\n+\n+    /**\n+     * Get the type of identity that last modified the resource.\n+     *\n+     * @return the type of identity that last modified the resource.\n+     */\n+    public CreatedByType lastModifiedByType() {\n+        return this.lastModifiedByType;\n+    }\n+", "originalCommit": "61b0edf8dba53fa1e91974bd64aa2c9f9fbf21c5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYyNTkwMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r582625902", "bodyText": "Also appreciate suggestion on method names in SystemData. They seems a bit off (but I do not have better idea).", "author": "weidongxu-microsoft", "createdAt": "2021-02-25T08:16:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxOTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzQ4NjUzNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r583486535", "bodyText": "IdentityType sounds like a better name than CreatedByType as it is used for lastModifiedByType too.", "author": "srnagar", "createdAt": "2021-02-26T09:05:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxOTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzUwNDQxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r583504413", "bodyText": "SystemData seems very generic. Is this name finalized? Can we change this to AzureResourceSystemData?", "author": "srnagar", "createdAt": "2021-02-26T09:33:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxOTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzUwNTM4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r583505386", "bodyText": "The method names look fine but just want to check, do we prefix get for getter methods in other arm model types?", "author": "srnagar", "createdAt": "2021-02-26T09:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxOTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzU3MDU0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r583570545", "bodyText": "Got it. Another candidate could be ResourceAuthorIdentityType.\nIt is generic. The class is intended to be returned by every ARM resources (resource group, virtual network, disk, storage account, virtual machine, etc., well, all) in future. It is already in com.azure.core.management namespace. On the other hand from its name, it does seems belong to something of operating system (so far, I didn't find any existing SystemData class that going to be confused with this). Maybe ResourceSystemData would be better. Let me check e.g. how python or .NET names it.\nIt is still used as POJO for ARM, so like Resource class, it does not have get prefix.", "author": "weidongxu-microsoft", "createdAt": "2021-02-26T11:22:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjYxOTU4MA=="}], "type": "inlineReview", "revised_code": {"commit": "9ca8b37e8c59222579d2fc1bb07329fa0b677766", "chunk": "diff --git a/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java b/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java\nindex 18572895743..9fd02d2cd45 100644\n--- a/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java\n+++ b/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java\n\n@@ -10,13 +10,13 @@ public final class SystemData {\n \n     private String createdBy;\n \n-    private CreatedByType createdByType;\n+    private ResourceAuthorIdentityType createdByType;\n \n     private OffsetDateTime createdAt;\n \n     private String lastModifiedBy;\n \n-    private CreatedByType lastModifiedByType;\n+    private ResourceAuthorIdentityType lastModifiedByType;\n \n     private OffsetDateTime lastModifiedAt;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzUwODc3Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r583508776", "bodyText": "Is this type missing a constructor? How are the property values set?", "author": "srnagar", "createdAt": "2021-02-26T09:40:42Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java", "diffHunk": "@@ -0,0 +1,76 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.management;\n+\n+import java.time.OffsetDateTime;\n+\n+/** Metadata pertaining to creation and last modification of the resource. */\n+public final class SystemData {", "originalCommit": "61b0edf8dba53fa1e91974bd64aa2c9f9fbf21c5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzU2NDAxMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18303#discussion_r583564010", "bodyText": "The class is initialized by Jackson (via reflection), hence no constructor (or just default constructor). All properties is read-only, hence no setter.", "author": "weidongxu-microsoft", "createdAt": "2021-02-26T11:10:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzUwODc3Ng=="}], "type": "inlineReview", "revised_code": {"commit": "9ca8b37e8c59222579d2fc1bb07329fa0b677766", "chunk": "diff --git a/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java b/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java\nindex 18572895743..9fd02d2cd45 100644\n--- a/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java\n+++ b/sdk/core/azure-core-management/src/main/java/com/azure/core/management/SystemData.java\n\n@@ -10,13 +10,13 @@ public final class SystemData {\n \n     private String createdBy;\n \n-    private CreatedByType createdByType;\n+    private ResourceAuthorIdentityType createdByType;\n \n     private OffsetDateTime createdAt;\n \n     private String lastModifiedBy;\n \n-    private CreatedByType lastModifiedByType;\n+    private ResourceAuthorIdentityType lastModifiedByType;\n \n     private OffsetDateTime lastModifiedAt;\n \n"}}, {"oid": "d6bc4f8b81c84f43d57a7a7ff441eb86597140eb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d6bc4f8b81c84f43d57a7a7ff441eb86597140eb", "message": "rename CreateByType to ResourceAuthorIdentityType", "committedDate": "2021-03-01T02:22:30Z", "type": "commit"}, {"oid": "9ca8b37e8c59222579d2fc1bb07329fa0b677766", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ca8b37e8c59222579d2fc1bb07329fa0b677766", "message": "rename CreateByType to ResourceAuthorIdentityType", "committedDate": "2021-03-01T02:26:23Z", "type": "commit"}, {"oid": "17aa26eadb86c1e6571a68f439eb6131348fbd5d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/17aa26eadb86c1e6571a68f439eb6131348fbd5d", "message": "add JsonProperty write-only", "committedDate": "2021-03-01T02:29:53Z", "type": "commit"}, {"oid": "dd5d4be7fc4d41f20e119ac997c0d33f2ffb1044", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dd5d4be7fc4d41f20e119ac997c0d33f2ffb1044", "message": "Merge branch 'master' into mgmt-core_support-system-data", "committedDate": "2021-03-03T01:39:31Z", "type": "commit"}, {"oid": "ae9262798ebd4ededc2731b1ba631438c370c3e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ae9262798ebd4ededc2731b1ba631438c370c3e6", "message": "update test with better data (masked)", "committedDate": "2021-03-03T02:19:43Z", "type": "commit"}, {"oid": "26d53368e914dc6643be38a8f3a15678a812aa6e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/26d53368e914dc6643be38a8f3a15678a812aa6e", "message": "nit", "committedDate": "2021-03-03T04:45:44Z", "type": "commit"}]}