{"pr_number": 5891, "pr_title": "Update VoovanTFB.java", "pr_createdAt": "2020-07-21T11:56:13Z", "pr_url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5891", "timeline": [{"oid": "7da9d45367964c0569980c2489e9f77b3c17b4e9", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/7da9d45367964c0569980c2489e9f77b3c17b4e9", "message": "Update VoovanTFB.java", "committedDate": "2020-07-21T11:55:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIzNzE3NA==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5891#discussion_r458237174", "bodyText": "msg needs to be instantiated on each request. I missed this before, but that doesn't appear to be happening here.\nMessage msg = new Message(HELLO_WORLD_STR) needs to happen here.", "author": "nbrady-techempower", "createdAt": "2020-07-21T16:39:51Z", "path": "frameworks/Java/voovan/src/main/java/org/voovan/VoovanTFB.java", "diffHunk": "@@ -65,7 +66,7 @@ public void process(HttpRequest req, HttpResponse resp) throws Exception {\n                 webServer.get(\"/json\", new HttpRouter() {\n                         public void process(HttpRequest req, HttpResponse resp) throws Exception {\n                                 resp.header().put(HttpStatic.CONTENT_TYPE_STRING, HttpStatic.APPLICATION_JSON_STRING);\n-                                resp.write(JSON.toJSON(msg, false, false));\n+                                resp.write(TString.toAsciiBytes(JSON.toJSON(msg, false, false)));", "originalCommit": "7da9d45367964c0569980c2489e9f77b3c17b4e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUwNjI3MQ==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5891#discussion_r458506271", "bodyText": "ok, i fixed it, thanks", "author": "helyho", "createdAt": "2020-07-22T03:04:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIzNzE3NA=="}], "type": "inlineReview", "revised_code": {"commit": "81499cf9884b65880fa5fe1e4bddaa70314fb561", "chunk": "diff --git a/frameworks/Java/voovan/src/main/java/org/voovan/VoovanTFB.java b/frameworks/Java/voovan/src/main/java/org/voovan/VoovanTFB.java\nindex 502d98f38..7e4283560 100644\n--- a/frameworks/Java/voovan/src/main/java/org/voovan/VoovanTFB.java\n+++ b/frameworks/Java/voovan/src/main/java/org/voovan/VoovanTFB.java\n\n@@ -66,7 +64,7 @@ public class VoovanTFB {\n                 webServer.get(\"/json\", new HttpRouter() {\n                         public void process(HttpRequest req, HttpResponse resp) throws Exception {\n                                 resp.header().put(HttpStatic.CONTENT_TYPE_STRING, HttpStatic.APPLICATION_JSON_STRING);\n-                                resp.write(TString.toAsciiBytes(JSON.toJSON(msg, false, false)));\n+                                resp.write(TString.toAsciiBytes(JSON.toJSON(new Message(HELLO_WORLD_STR), false, false)));\n                         }\n                 });\n \n"}}, {"oid": "81499cf9884b65880fa5fe1e4bddaa70314fb561", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/81499cf9884b65880fa5fe1e4bddaa70314fb561", "message": "Update VoovanTFB.java", "committedDate": "2020-07-22T03:03:07Z", "type": "commit"}]}