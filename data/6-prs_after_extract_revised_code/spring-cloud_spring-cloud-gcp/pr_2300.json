{"pr_number": 2300, "pr_title": "Firestore nested properties", "pr_createdAt": "2020-04-01T20:19:23Z", "pr_url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2300", "timeline": [{"oid": "55afc545d774859e9ffd3d92a3aa5dbefa67a1ff", "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/55afc545d774859e9ffd3d92a3aa5dbefa67a1ff", "message": "support embedded properties", "committedDate": "2020-04-01T20:15:46Z", "type": "commit"}, {"oid": "afd5315bc2675afb7db4b774052970d305c1e652", "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/afd5315bc2675afb7db4b774052970d305c1e652", "message": "support embedded properties", "committedDate": "2020-04-01T20:18:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU3Njg4OA==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2300#discussion_r402576888", "bodyText": "combine these two lines into one?", "author": "meltsufin", "createdAt": "2020-04-02T20:00:41Z", "path": "spring-cloud-gcp-data-firestore/src/main/java/org/springframework/cloud/gcp/data/firestore/repository/query/PartTreeFirestoreQuery.java", "diffHunk": "@@ -170,6 +172,19 @@ public Object execute(Object[] parameters) {\n \t\treturn builder;\n \t}\n \n+\tprivate String getName(Part part) {\n+\t\tIterator<PropertyPath> iterator = part.getProperty().iterator();\n+\t\tIterable<PropertyPath> iterable = () -> iterator;", "originalCommit": "afd5315bc2675afb7db4b774052970d305c1e652", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ba5bd049135fa5b889a2a1d1f506936798cd0664", "chunk": "diff --git a/spring-cloud-gcp-data-firestore/src/main/java/org/springframework/cloud/gcp/data/firestore/repository/query/PartTreeFirestoreQuery.java b/spring-cloud-gcp-data-firestore/src/main/java/org/springframework/cloud/gcp/data/firestore/repository/query/PartTreeFirestoreQuery.java\nindex 8c2e6935..ebdcf448 100644\n--- a/spring-cloud-gcp-data-firestore/src/main/java/org/springframework/cloud/gcp/data/firestore/repository/query/PartTreeFirestoreQuery.java\n+++ b/spring-cloud-gcp-data-firestore/src/main/java/org/springframework/cloud/gcp/data/firestore/repository/query/PartTreeFirestoreQuery.java\n\n@@ -172,9 +172,8 @@ public class PartTreeFirestoreQuery implements RepositoryQuery {\n \t\treturn builder;\n \t}\n \n-\tprivate String getName(Part part) {\n-\t\tIterator<PropertyPath> iterator = part.getProperty().iterator();\n-\t\tIterable<PropertyPath> iterable = () -> iterator;\n+\tprivate String buildName(Part part) {\n+\t\tIterable<PropertyPath> iterable = () -> part.getProperty().iterator();\n \n \t\treturn StreamSupport\n \t\t\t\t.stream(iterable.spliterator(), false)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU4MDkxOQ==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2300#discussion_r402580919", "bodyText": "Can you try setting the @PropertyName on a field also?", "author": "meltsufin", "createdAt": "2020-04-02T20:08:34Z", "path": "spring-cloud-gcp-data-firestore/src/test/java/org/springframework/cloud/gcp/data/firestore/User.java", "diffHunk": "@@ -102,10 +103,12 @@ public void setAddresses(List<Address> addresses) {\n \t\tthis.addresses = addresses;\n \t}\n \n+\t@PropertyName(\"address\")", "originalCommit": "afd5315bc2675afb7db4b774052970d305c1e652", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU5NTcyOQ==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2300#discussion_r402595729", "bodyText": "done", "author": "dmitry-s", "createdAt": "2020-04-02T21:03:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU4MDkxOQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "ba5bd049135fa5b889a2a1d1f506936798cd0664", "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/ba5bd049135fa5b889a2a1d1f506936798cd0664", "message": "PR comments", "committedDate": "2020-04-02T20:59:14Z", "type": "commit"}, {"oid": "54a0b17a75b111ff08eb0f2d90466f6d6e72072a", "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/54a0b17a75b111ff08eb0f2d90466f6d6e72072a", "message": "PR comments", "committedDate": "2020-04-02T21:00:59Z", "type": "commit"}]}