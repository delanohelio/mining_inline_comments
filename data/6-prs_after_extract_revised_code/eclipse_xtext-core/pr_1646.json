{"pr_number": 1646, "pr_title": "[#1625] Make test less strict to avoid failing because of bad serialize", "pr_createdAt": "2020-12-11T16:18:47Z", "pr_url": "https://github.com/eclipse/xtext-core/pull/1646", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4Nzg2Nw==", "url": "https://github.com/eclipse/xtext-core/pull/1646#discussion_r541087867", "bodyText": "will would prefer to see tabs inside the strings\nthan as constant", "author": "cdietrich", "createdAt": "2020-12-11T16:55:07Z", "path": "org.eclipse.xtext.tests/src/org/eclipse/xtext/formatting2/internal/JavaFormatterGrammarTest.java", "diffHunk": "@@ -508,7 +508,33 @@ public void beeLanguage() {\n \t\t\t\t);\n \t\t// @formatter:on\n \t}\n-\t\n+\n+\t@Test\n+\tpublic void xtextDocumentModifyTest_testCommentsNotDuplicated() {\n+\t\t// @formatter:off\n+\t\tassertFormattedGrammar(\n+\t\t\t\t\"generate foo \\\"http://foo.net/foo\\\"\" + NL +\n+\t\t\t\t\"Foo: // comment in Foo \" + NL +\n+\t\t\t\t\"// comment before Assignment\" + NL +\n+\t\t\t\t\"  bars+= /* comment in assignment */ Bar // comment after assignment\" + NL +\n+\t\t\t\t\"// comment before keywod\" + NL +\n+\t\t\t\t\"'foo';\" + NL +\n+\t\t\t\t\"Bar: 'bar';\"\n+\t\t\t\t,\n+\t\t\t\t\"generate foo \\\"http://foo.net/foo\\\"\" + NL +\n+\t\t\t\t\"\"  + NL +\n+\t\t\t\t\"Foo: // comment in Foo \" + NL +\n+\t\t\t\t\"// comment before Assignment\" + NL +", "originalCommit": "d99abc429f49c82c001f03db03ab7d3c90f91a66", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY1MTMxNA==", "url": "https://github.com/eclipse/xtext-core/pull/1646#discussion_r545651314", "bodyText": "Done.", "author": "ArneDeutsch", "createdAt": "2020-12-18T08:31:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4Nzg2Nw=="}], "type": "inlineReview", "revised_code": {"commit": "24976d2421ada6d0801098800f10094c6b153f8d", "chunk": "diff --git a/org.eclipse.xtext.tests/src/org/eclipse/xtext/formatting2/internal/JavaFormatterGrammarTest.java b/org.eclipse.xtext.tests/src/org/eclipse/xtext/formatting2/internal/JavaFormatterGrammarTest.java\nindex ce7344872..fa83313c2 100644\n--- a/org.eclipse.xtext.tests/src/org/eclipse/xtext/formatting2/internal/JavaFormatterGrammarTest.java\n+++ b/org.eclipse.xtext.tests/src/org/eclipse/xtext/formatting2/internal/JavaFormatterGrammarTest.java\n\n@@ -499,11 +498,11 @@ public class JavaFormatterGrammarTest extends AbstractXtextTests {\n \t\t\t\t\"\"\n \t\t\t\t,\n \t\t\t\t\"ProvidedCapability:\" + NL +\n-\t\t\t\tTAB + \"{ProvidedCapability}\" + NL +\n-\t\t\t\tTAB + \"((nameSpace=ID) | \\\"unit\\\")\" + NL +\n-\t\t\t\tTAB + \"('{'\" + NL +\n-\t\t\t\tTAB + \"(('when' ':' condExpr=Expression ';')? & (\\\"name\\\" ':' name=ID ';') & (\\\"version\\\" ':' version=ID ';')?)\" + NL +\n-\t\t\t\tTAB + \"'}')?;\" + NL +\n+\t\t\t\t\"\t{ProvidedCapability}\" + NL +\n+\t\t\t\t\"\t((nameSpace=ID) | \\\"unit\\\")\" + NL +\n+\t\t\t\t\"\t('{'\" + NL +\n+\t\t\t\t\"\t(('when' ':' condExpr=Expression ';')? & (\\\"name\\\" ':' name=ID ';') & (\\\"version\\\" ':' version=ID ';')?)\" + NL +\n+\t\t\t\t\"\t'}')?;\" + NL +\n \t\t\t\t\"\"\n \t\t\t\t);\n \t\t// @formatter:on\n"}}, {"oid": "8e6d5aa5c73d073de5ba496ca1e7e85c43d352b8", "url": "https://github.com/eclipse/xtext-core/commit/8e6d5aa5c73d073de5ba496ca1e7e85c43d352b8", "message": "[#1625] Make test less strict to avoid failing because of bad serialize\n\nSigned-off-by: Arne Deutsch <Arne.Deutsch@itemis.de>", "committedDate": "2020-12-18T08:27:35Z", "type": "forcePushed"}, {"oid": "24976d2421ada6d0801098800f10094c6b153f8d", "url": "https://github.com/eclipse/xtext-core/commit/24976d2421ada6d0801098800f10094c6b153f8d", "message": "[#1625] Make test less strict to avoid failing because of bad serialize\n\nSigned-off-by: Arne Deutsch <Arne.Deutsch@itemis.de>", "committedDate": "2020-12-18T08:31:40Z", "type": "forcePushed"}, {"oid": "24976d2421ada6d0801098800f10094c6b153f8d", "url": "https://github.com/eclipse/xtext-core/commit/24976d2421ada6d0801098800f10094c6b153f8d", "message": "[#1625] Make test less strict to avoid failing because of bad serialize\n\nSigned-off-by: Arne Deutsch <Arne.Deutsch@itemis.de>", "committedDate": "2020-12-18T08:31:40Z", "type": "commit"}]}