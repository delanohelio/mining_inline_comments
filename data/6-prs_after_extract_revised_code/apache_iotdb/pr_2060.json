{"pr_number": 2060, "pr_title": "division by zero bug", "pr_createdAt": "2020-11-17T04:17:40Z", "pr_url": "https://github.com/apache/iotdb/pull/2060", "timeline": [{"oid": "a40842eccced325bc574e724cf8677fc0af3946a", "url": "https://github.com/apache/iotdb/commit/a40842eccced325bc574e724cf8677fc0af3946a", "message": "division by zero bug, when endtime - starttime < interval", "committedDate": "2020-11-17T04:16:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg3NTM1NQ==", "url": "https://github.com/apache/iotdb/pull/2060#discussion_r524875355", "bodyText": "What about the plan.getInterval() is zero?  does the code has been checked before?", "author": "neuyilan", "createdAt": "2020-11-17T04:21:58Z", "path": "server/src/main/java/org/apache/iotdb/db/qp/strategy/PhysicalGenerator.java", "diffHunk": "@@ -687,8 +687,10 @@ private void deduplicate(QueryPlan queryPlan, int fetchSize)\n     if (queryPlan instanceof GroupByTimePlan) {\n       GroupByTimePlan plan = (GroupByTimePlan) queryPlan;\n       // the actual row number of group by query should be calculated from startTime, endTime and interval.\n-      fetchSize = Math\n-          .min((int) ((plan.getEndTime() - plan.getStartTime()) / plan.getInterval()), fetchSize);\n+      long interval = (plan.getEndTime() - plan.getStartTime()) / plan.getInterval();", "originalCommit": "a40842eccced325bc574e724cf8677fc0af3946a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkwOTI5Nw==", "url": "https://github.com/apache/iotdb/pull/2060#discussion_r524909297", "bodyText": "yes. if you set interval = 0, it will throw exception: \"Interval must more than 0\"", "author": "haimeiguo", "createdAt": "2020-11-17T06:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg3NTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkxNDM5OA==", "url": "https://github.com/apache/iotdb/pull/2060#discussion_r524914398", "bodyText": "got it", "author": "neuyilan", "createdAt": "2020-11-17T06:38:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg3NTM1NQ=="}], "type": "inlineReview", "revised_code": null}]}