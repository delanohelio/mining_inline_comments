{"pr_number": 1975, "pr_title": "[IOTDB-988] fix nullpointer exception if no password is set when login", "pr_createdAt": "2020-11-07T01:42:37Z", "pr_url": "https://github.com/apache/iotdb/pull/1975", "timeline": [{"oid": "3a58dc022bedf286695396d4dc273c2937542fa8", "url": "https://github.com/apache/iotdb/commit/3a58dc022bedf286695396d4dc273c2937542fa8", "message": "fix nullpointer exception if no password is set when login", "committedDate": "2020-11-07T01:40:14Z", "type": "commit"}, {"oid": "a65719c121cffff8cc66abf787991303773486c7", "url": "https://github.com/apache/iotdb/commit/a65719c121cffff8cc66abf787991303773486c7", "message": "merge with master", "committedDate": "2020-11-07T03:10:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE0Nzk1Mw==", "url": "https://github.com/apache/iotdb/pull/1975#discussion_r519147953", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return user != null && password!=null && user.getPassword().equals(AuthUtils.encryptPassword(password));\n          \n          \n            \n                return user != null && password != null && user.getPassword().equals(AuthUtils.encryptPassword(password));", "author": "qiaojialin", "createdAt": "2020-11-07T07:30:15Z", "path": "server/src/main/java/org/apache/iotdb/db/auth/authorizer/BasicAuthorizer.java", "diffHunk": "@@ -102,7 +102,7 @@ public static IAuthorizer getInstance() throws AuthException {\n   @Override\n   public boolean login(String username, String password) throws AuthException {\n     User user = userManager.getUser(username);\n-    return user != null && user.getPassword().equals(AuthUtils.encryptPassword(password));\n+    return user != null && password!=null && user.getPassword().equals(AuthUtils.encryptPassword(password));", "originalCommit": "a65719c121cffff8cc66abf787991303773486c7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3036e59cd50214d3e30a9017b5811c24d395302d", "chunk": "diff --git a/server/src/main/java/org/apache/iotdb/db/auth/authorizer/BasicAuthorizer.java b/server/src/main/java/org/apache/iotdb/db/auth/authorizer/BasicAuthorizer.java\nindex fd6091ccbd..d162a04c82 100644\n--- a/server/src/main/java/org/apache/iotdb/db/auth/authorizer/BasicAuthorizer.java\n+++ b/server/src/main/java/org/apache/iotdb/db/auth/authorizer/BasicAuthorizer.java\n\n@@ -102,7 +102,7 @@ public abstract class BasicAuthorizer implements IAuthorizer, IService {\n   @Override\n   public boolean login(String username, String password) throws AuthException {\n     User user = userManager.getUser(username);\n-    return user != null && password!=null && user.getPassword().equals(AuthUtils.encryptPassword(password));\n+    return user != null && password != null && user.getPassword().equals(AuthUtils.encryptPassword(password));\n   }\n \n   @Override\n"}}, {"oid": "3036e59cd50214d3e30a9017b5811c24d395302d", "url": "https://github.com/apache/iotdb/commit/3036e59cd50214d3e30a9017b5811c24d395302d", "message": "Update server/src/main/java/org/apache/iotdb/db/auth/authorizer/BasicAuthorizer.java", "committedDate": "2020-11-07T07:30:21Z", "type": "commit"}]}