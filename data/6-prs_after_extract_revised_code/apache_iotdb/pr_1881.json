{"pr_number": 1881, "pr_title": "[IOTDB-941] Support 'delete storage group <prefixPath>'", "pr_createdAt": "2020-10-28T05:53:05Z", "pr_url": "https://github.com/apache/iotdb/pull/1881", "timeline": [{"oid": "919ac91faac8280e539e773feb9e6668e7ba5dc7", "url": "https://github.com/apache/iotdb/commit/919ac91faac8280e539e773feb9e6668e7ba5dc7", "message": "support", "committedDate": "2020-10-28T05:52:53Z", "type": "forcePushed"}, {"oid": "adb5d70f82c4d856fb84b91adfb5cdd0997e282c", "url": "https://github.com/apache/iotdb/commit/adb5d70f82c4d856fb84b91adfb5cdd0997e282c", "message": "support", "committedDate": "2020-10-28T07:34:40Z", "type": "forcePushed"}, {"oid": "25d568b5fe1c40e13387ea1d3278b2ada750943e", "url": "https://github.com/apache/iotdb/commit/25d568b5fe1c40e13387ea1d3278b2ada750943e", "message": "support", "committedDate": "2020-10-30T01:37:31Z", "type": "forcePushed"}, {"oid": "1fedc1b6d3153056e310a1714601529674af6946", "url": "https://github.com/apache/iotdb/commit/1fedc1b6d3153056e310a1714601529674af6946", "message": "support", "committedDate": "2020-10-30T02:23:09Z", "type": "commit"}, {"oid": "1fedc1b6d3153056e310a1714601529674af6946", "url": "https://github.com/apache/iotdb/commit/1fedc1b6d3153056e310a1714601529674af6946", "message": "support", "committedDate": "2020-10-30T02:23:09Z", "type": "forcePushed"}, {"oid": "2625f758dab80742b88e2a8800b890737ce4b262", "url": "https://github.com/apache/iotdb/commit/2625f758dab80742b88e2a8800b890737ce4b262", "message": "Trigger", "committedDate": "2020-10-30T03:34:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkxMjUyNA==", "url": "https://github.com/apache/iotdb/pull/1881#discussion_r514912524", "bodyText": "Recover the format...", "author": "Alima777", "createdAt": "2020-10-30T07:26:54Z", "path": "server/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java", "diffHunk": "@@ -1055,13 +1058,19 @@ private boolean createTimeSeries(CreateTimeSeriesPlan createTimeSeriesPlan)\n   private boolean createMultiTimeSeries(CreateMultiTimeSeriesPlan createMultiTimeSeriesPlan) {\n     Map<Integer, Exception> results = new HashMap<>(createMultiTimeSeriesPlan.getPaths().size());\n     for (int i = 0; i < createMultiTimeSeriesPlan.getPaths().size(); i++) {\n-      CreateTimeSeriesPlan plan = new CreateTimeSeriesPlan(createMultiTimeSeriesPlan.getPaths().get(i),\n-        createMultiTimeSeriesPlan.getDataTypes().get(i), createMultiTimeSeriesPlan.getEncodings().get(i),\n-        createMultiTimeSeriesPlan.getCompressors().get(i),\n-        createMultiTimeSeriesPlan.getProps() == null ? null : createMultiTimeSeriesPlan.getProps().get(i),\n-        createMultiTimeSeriesPlan.getTags() == null ? null : createMultiTimeSeriesPlan.getTags().get(i),\n-        createMultiTimeSeriesPlan.getAttributes() == null ? null : createMultiTimeSeriesPlan.getAttributes().get(i),\n-        createMultiTimeSeriesPlan.getAlias() == null ? null : createMultiTimeSeriesPlan.getAlias().get(i));\n+      CreateTimeSeriesPlan plan = new CreateTimeSeriesPlan(\n+          createMultiTimeSeriesPlan.getPaths().get(i),\n+          createMultiTimeSeriesPlan.getDataTypes().get(i),\n+          createMultiTimeSeriesPlan.getEncodings().get(i),\n+          createMultiTimeSeriesPlan.getCompressors().get(i),\n+          createMultiTimeSeriesPlan.getProps() == null ? null\n+              : createMultiTimeSeriesPlan.getProps().get(i),\n+          createMultiTimeSeriesPlan.getTags() == null ? null\n+              : createMultiTimeSeriesPlan.getTags().get(i),\n+          createMultiTimeSeriesPlan.getAttributes() == null ? null\n+              : createMultiTimeSeriesPlan.getAttributes().get(i),\n+          createMultiTimeSeriesPlan.getAlias() == null ? null\n+              : createMultiTimeSeriesPlan.getAlias().get(i));", "originalCommit": "2625f758dab80742b88e2a8800b890737ce4b262", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkyNDkyNg==", "url": "https://github.com/apache/iotdb/pull/1881#discussion_r514924926", "bodyText": "Actually I have imported java-google-style.xml in the root dir before formating this file.Maybe the old format is not suitable in java-google-style.xml. As you can see, the default hard warp is 100.\n\nIf you put them on one line, the code on the right will exceed the hard limit.", "author": "LebronAl", "createdAt": "2020-10-30T07:59:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkxMjUyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkzNDA4Mg==", "url": "https://github.com/apache/iotdb/pull/1881#discussion_r514934082", "bodyText": "You can rename the createMultiTimeSeriesPlan to a shorter one. It's soooo ugly now.", "author": "Alima777", "createdAt": "2020-10-30T08:20:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkxMjUyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk0NDcwMw==", "url": "https://github.com/apache/iotdb/pull/1881#discussion_r514944703", "bodyText": "Good suggestion!", "author": "LebronAl", "createdAt": "2020-10-30T08:42:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkxMjUyNA=="}], "type": "inlineReview", "revised_code": {"commit": "028533e466021688b335a4284ba86a0e0d137b76", "chunk": "diff --git a/server/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java b/server/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\nindex b05283f6e..db3e52a85 100644\n--- a/server/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\n+++ b/server/src/main/java/org/apache/iotdb/db/qp/executor/PlanExecutor.java\n\n@@ -1055,31 +1055,26 @@ public class PlanExecutor implements IPlanExecutor {\n     return true;\n   }\n \n-  private boolean createMultiTimeSeries(CreateMultiTimeSeriesPlan createMultiTimeSeriesPlan) {\n-    Map<Integer, Exception> results = new HashMap<>(createMultiTimeSeriesPlan.getPaths().size());\n-    for (int i = 0; i < createMultiTimeSeriesPlan.getPaths().size(); i++) {\n+  private boolean createMultiTimeSeries(CreateMultiTimeSeriesPlan multiPlan) {\n+    Map<Integer, Exception> results = new HashMap<>(multiPlan.getPaths().size());\n+    for (int i = 0; i < multiPlan.getPaths().size(); i++) {\n       CreateTimeSeriesPlan plan = new CreateTimeSeriesPlan(\n-          createMultiTimeSeriesPlan.getPaths().get(i),\n-          createMultiTimeSeriesPlan.getDataTypes().get(i),\n-          createMultiTimeSeriesPlan.getEncodings().get(i),\n-          createMultiTimeSeriesPlan.getCompressors().get(i),\n-          createMultiTimeSeriesPlan.getProps() == null ? null\n-              : createMultiTimeSeriesPlan.getProps().get(i),\n-          createMultiTimeSeriesPlan.getTags() == null ? null\n-              : createMultiTimeSeriesPlan.getTags().get(i),\n-          createMultiTimeSeriesPlan.getAttributes() == null ? null\n-              : createMultiTimeSeriesPlan.getAttributes().get(i),\n-          createMultiTimeSeriesPlan.getAlias() == null ? null\n-              : createMultiTimeSeriesPlan.getAlias().get(i));\n-\n+          multiPlan.getPaths().get(i),\n+          multiPlan.getDataTypes().get(i),\n+          multiPlan.getEncodings().get(i),\n+          multiPlan.getCompressors().get(i),\n+          multiPlan.getProps() == null ? null : multiPlan.getProps().get(i),\n+          multiPlan.getTags() == null ? null : multiPlan.getTags().get(i),\n+          multiPlan.getAttributes() == null ? null : multiPlan.getAttributes().get(i),\n+          multiPlan.getAlias() == null ? null : multiPlan.getAlias().get(i));\n       try {\n         createTimeSeries(plan);\n       } catch (QueryProcessException e) {\n-        results.put(createMultiTimeSeriesPlan.getIndexes().get(i), e);\n+        results.put(multiPlan.getIndexes().get(i), e);\n         logger.debug(\"meet error while processing create timeseries. \", e);\n       }\n     }\n-    createMultiTimeSeriesPlan.setResults(results);\n+    multiPlan.setResults(results);\n     return true;\n   }\n \n"}}, {"oid": "028533e466021688b335a4284ba86a0e0d137b76", "url": "https://github.com/apache/iotdb/commit/028533e466021688b335a4284ba86a0e0d137b76", "message": "fix format", "committedDate": "2020-10-30T08:42:03Z", "type": "commit"}]}