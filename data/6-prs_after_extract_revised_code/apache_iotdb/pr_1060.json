{"pr_number": 1060, "pr_title": "[IOTDB-597] Rename methods in Session", "pr_createdAt": "2020-04-16T05:11:49Z", "pr_url": "https://github.com/apache/iotdb/pull/1060", "timeline": [{"oid": "df8f1e74dfe74d5a59541de352c7882dc3786853", "url": "https://github.com/apache/iotdb/commit/df8f1e74dfe74d5a59541de352c7882dc3786853", "message": "add insertMultiple batch in SessionPool", "committedDate": "2020-04-16T05:11:22Z", "type": "commit"}, {"oid": "bc641cdeffd3ba26662c6178094bc93362776637", "url": "https://github.com/apache/iotdb/commit/bc641cdeffd3ba26662c6178094bc93362776637", "message": "rename session method", "committedDate": "2020-04-16T05:33:16Z", "type": "commit"}, {"oid": "e88e0de2a9a67f73b3305bcd99171c5acf2369d1", "url": "https://github.com/apache/iotdb/commit/e88e0de2a9a67f73b3305bcd99171c5acf2369d1", "message": "fix flink sink", "committedDate": "2020-04-16T08:37:54Z", "type": "commit"}, {"oid": "1312b31b9477787e99ca1df6c4345ee0139bb21f", "url": "https://github.com/apache/iotdb/commit/1312b31b9477787e99ca1df6c4345ee0139bb21f", "message": "fix test", "committedDate": "2020-04-16T12:17:07Z", "type": "commit"}, {"oid": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b", "url": "https://github.com/apache/iotdb/commit/d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b", "message": "rename and refactor", "committedDate": "2020-04-16T15:07:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NDM3MQ==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r410874371", "bodyText": "don't forget to change the method name of  this. insertInBatch()", "author": "liutaohua", "createdAt": "2020-04-19T10:38:14Z", "path": "example/session/src/main/java/org/apache/iotdb/SessionExample.java", "diffHunk": "@@ -125,20 +125,19 @@ private static void insertInBatch() throws IoTDBConnectionException, BatchExecut\n       valuesList.add(values);\n       timestamps.add(time);\n       if (time != 0 && time % 100 == 0) {\n-        session.insertInBatch(deviceIds, timestamps, measurementsList, valuesList);\n+        session.insertRows(deviceIds, timestamps, measurementsList, valuesList);\n         deviceIds.clear();\n         measurementsList.clear();\n         valuesList.clear();\n         timestamps.clear();\n       }\n     }\n \n-    session.insertInBatch(deviceIds, timestamps, measurementsList, valuesList);\n+    session.insertRows(deviceIds, timestamps, measurementsList, valuesList);", "originalCommit": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM1MDEzNA==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414350134", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-24T07:16:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NDM3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "d05860224677aed881957cdb3f04b78dbff859db", "chunk": "diff --git a/example/session/src/main/java/org/apache/iotdb/SessionExample.java b/example/session/src/main/java/org/apache/iotdb/SessionExample.java\nindex 6c7eb1617a..3275af987e 100644\n--- a/example/session/src/main/java/org/apache/iotdb/SessionExample.java\n+++ b/example/session/src/main/java/org/apache/iotdb/SessionExample.java\n\n@@ -125,7 +125,7 @@ public class SessionExample {\n       valuesList.add(values);\n       timestamps.add(time);\n       if (time != 0 && time % 100 == 0) {\n-        session.insertRows(deviceIds, timestamps, measurementsList, valuesList);\n+        session.insertRecords(deviceIds, timestamps, measurementsList, valuesList);\n         deviceIds.clear();\n         measurementsList.clear();\n         valuesList.clear();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NTA3MQ==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r410875071", "bodyText": "rowBatchList", "author": "liutaohua", "createdAt": "2020-04-19T10:42:13Z", "path": "example/session/src/main/java/org/apache/iotdb/SessionExample.java", "diffHunk": "@@ -211,10 +209,10 @@ private static void insertMultipleDeviceRowBatch()\n     \n     RowBatch rowBatch3 = schema3.createRowBatch(\"root.sg1.d3\", 100);\n     \n-    Map<String, RowBatch> rowBatchMap = new HashMap<>();\n-    rowBatchMap.put(\"root.sg1.d1\", rowBatch1);\n-    rowBatchMap.put(\"root.sg1.d2\", rowBatch2);\n-    rowBatchMap.put(\"root.sg1.d3\", rowBatch3);\n+    List<RowBatch> rowBatchMap = new ArrayList<>();", "originalCommit": "d29e9c3e696b3f8ac26db9ad8fe9a2e71f599f4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM1MDE3Ng==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414350176", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-24T07:16:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NTA3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "d05860224677aed881957cdb3f04b78dbff859db", "chunk": "diff --git a/example/session/src/main/java/org/apache/iotdb/SessionExample.java b/example/session/src/main/java/org/apache/iotdb/SessionExample.java\nindex 6c7eb1617a..3275af987e 100644\n--- a/example/session/src/main/java/org/apache/iotdb/SessionExample.java\n+++ b/example/session/src/main/java/org/apache/iotdb/SessionExample.java\n\n@@ -207,24 +199,24 @@ public class SessionExample {\n     schema3.extendTemplate(\"template3\", new MeasurementSchema(\"s3\", TSDataType.FLOAT, TSEncoding.RLE));\n     schema3.registerDevice(\"root.sg1.d3\", \"template3\");\n     \n-    RowBatch rowBatch3 = schema3.createRowBatch(\"root.sg1.d3\", 100);\n+    Tablet tablet3 = new Tablet(\"root.sg1.d3\", schemaList, 100);\n     \n-    List<RowBatch> rowBatchMap = new ArrayList<>();\n-    rowBatchMap.add(rowBatch1);\n-    rowBatchMap.add(rowBatch2);\n-    rowBatchMap.add(rowBatch3);\n+    Map<String, Tablet> tabletMap = new HashMap<>();\n+    tabletMap.put(\"root.sg1.d1\", tablet1);\n+    tabletMap.put(\"root.sg1.d2\", tablet2);\n+    tabletMap.put(\"root.sg1.d3\", tablet3);\n \n-    long[] timestamps1 = rowBatch1.timestamps;\n-    Object[] values1 = rowBatch1.values;\n-    long[] timestamps2 = rowBatch2.timestamps;\n-    Object[] values2 = rowBatch2.values;\n-    long[] timestamps3 = rowBatch3.timestamps;\n-    Object[] values3 = rowBatch3.values;\n+    long[] timestamps1 = tablet1.timestamps;\n+    Object[] values1 = tablet1.values;\n+    long[] timestamps2 = tablet2.timestamps;\n+    Object[] values2 = tablet2.values;\n+    long[] timestamps3 = tablet3.timestamps;\n+    Object[] values3 = tablet3.values;\n \n     for (long time = 0; time < 100; time++) {\n-      int row1 = rowBatch1.batchSize++;\n-      int row2 = rowBatch2.batchSize++;\n-      int row3 = rowBatch3.batchSize++;\n+      int row1 = tablet1.rowSize++;\n+      int row2 = tablet2.rowSize++;\n+      int row3 = tablet3.rowSize++;\n       timestamps1[row1] = time;\n       timestamps2[row2] = time;\n       timestamps3[row3] = time;\n"}}, {"oid": "d05860224677aed881957cdb3f04b78dbff859db", "url": "https://github.com/apache/iotdb/commit/d05860224677aed881957cdb3f04b78dbff859db", "message": "rename records tablet", "committedDate": "2020-04-24T06:03:24Z", "type": "commit"}, {"oid": "c62feb7018fade1f4e7f39097d7d0b254ead0d3e", "url": "https://github.com/apache/iotdb/commit/c62feb7018fade1f4e7f39097d7d0b254ead0d3e", "message": "rename records tablet", "committedDate": "2020-04-24T06:10:22Z", "type": "commit"}, {"oid": "c08c91bec189757b7adce73049e85ad7aca34e67", "url": "https://github.com/apache/iotdb/commit/c08c91bec189757b7adce73049e85ad7aca34e67", "message": "update doc", "committedDate": "2020-04-24T07:01:51Z", "type": "commit"}, {"oid": "820f653c0b215c5238d0dcf60e0b3f2ffadfd44b", "url": "https://github.com/apache/iotdb/commit/820f653c0b215c5238d0dcf60e0b3f2ffadfd44b", "message": "fix sonar", "committedDate": "2020-04-24T07:15:24Z", "type": "commit"}, {"oid": "1d4d7e206e93ce0dc91aaa613a7ef3c1b0209064", "url": "https://github.com/apache/iotdb/commit/1d4d7e206e93ce0dc91aaa613a7ef3c1b0209064", "message": "add insertTables rpc interface", "committedDate": "2020-04-24T07:56:06Z", "type": "commit"}, {"oid": "9743126073f7a134a0d992beba805c36a98dc52e", "url": "https://github.com/apache/iotdb/commit/9743126073f7a134a0d992beba805c36a98dc52e", "message": "fix python interface", "committedDate": "2020-04-24T07:58:48Z", "type": "commit"}, {"oid": "880a8fb67f9744e8dc431071f459f9deaf4f8307", "url": "https://github.com/apache/iotdb/commit/880a8fb67f9744e8dc431071f459f9deaf4f8307", "message": "fix sonar", "committedDate": "2020-04-24T08:03:02Z", "type": "commit"}, {"oid": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "url": "https://github.com/apache/iotdb/commit/b94f4f72703e074ba78c4b3efeccd30391cc17b8", "message": "fix pool return", "committedDate": "2020-04-24T14:37:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxNjE3Mw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414716173", "bodyText": "I think we should also change the java doc to insert tablet plan.", "author": "HTHou", "createdAt": "2020-04-24T16:45:23Z", "path": "server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java", "diffHunk": "@@ -576,12 +576,12 @@ private boolean checkTTL(long time) {\n   /**\n    * insert batch to tsfile processor thread-safety that the caller need to guarantee\n    *\n-   * @param batchInsertPlan batch insert plan\n+   * @param insertTabletPlan batch insert plan", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NjU3MA==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414946570", "bodyText": "thanks! fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:32:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxNjE3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java b/server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java\nindex eed8c0c8fb..c3a6495b1a 100755\n--- a/server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java\n+++ b/server/src/main/java/org/apache/iotdb/db/engine/storagegroup/StorageGroupProcessor.java\n\n@@ -576,7 +576,7 @@ public class StorageGroupProcessor {\n   /**\n    * insert batch to tsfile processor thread-safety that the caller need to guarantee\n    *\n-   * @param insertTabletPlan batch insert plan\n+   * @param insertTabletPlan insert a tablet of a device\n    * @param sequence whether is sequence\n    * @param results result array\n    * @param timePartitionId time partition id\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxOTk0Mg==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414719942", "bodyText": "The comment should be // test insert tablet now.", "author": "HTHou", "createdAt": "2020-04-24T16:51:26Z", "path": "session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java", "diffHunk": "@@ -206,14 +202,14 @@ public void testTestMethod()\n     createTimeseries();\n \n     // test insert batch\n-    Schema schema = new Schema();\n-    schema.registerTimeseries(new Path(deviceId, \"s1\"), new MeasurementSchema(\"s1\", TSDataType.INT64, TSEncoding.RLE));\n-    schema.registerTimeseries(new Path(deviceId, \"s2\"), new MeasurementSchema(\"s2\", TSDataType.INT64, TSEncoding.RLE));\n-    schema.registerTimeseries(new Path(deviceId, \"s3\"), new MeasurementSchema(\"s3\", TSDataType.INT64, TSEncoding.RLE));\n+    List<MeasurementSchema> schemaList = new ArrayList<>();", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NjcyMw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414946723", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:33:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxOTk0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java b/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java\nindex bf4cf65a3f..fcc03b958a 100644\n--- a/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java\n+++ b/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java\n\n@@ -201,7 +201,7 @@ public class IoTDBSessionIT {\n \n     createTimeseries();\n \n-    // test insert batch\n+    // test insert tablet\n     List<MeasurementSchema> schemaList = new ArrayList<>();\n     schemaList.add(new MeasurementSchema(\"s1\", TSDataType.INT64, TSEncoding.RLE));\n     schemaList.add(new MeasurementSchema(\"s2\", TSDataType.INT64, TSEncoding.RLE));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMDgyMQ==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414720821", "bodyText": "// test inset records", "author": "HTHou", "createdAt": "2020-04-24T16:52:54Z", "path": "session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java", "diffHunk": "@@ -225,7 +221,7 @@ public void testTestMethod()\n       values.add(\"1\");\n       values.add(\"2\");\n       values.add(\"3\");\n-      session.testInsert(deviceId, time, measurements, values);\n+      session.testInsertRecord(deviceId, time, measurements, values);\n     }\n \n     // test insert row in batch", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NjgxNw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414946817", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:33:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMDgyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java b/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java\nindex bf4cf65a3f..fcc03b958a 100644\n--- a/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java\n+++ b/session/src/test/java/org/apache/iotdb/session/IoTDBSessionIT.java\n\n@@ -224,7 +224,7 @@ public class IoTDBSessionIT {\n       session.testInsertRecord(deviceId, time, measurements, values);\n     }\n \n-    // test insert row in batch\n+    // test insert records\n     measurements = new ArrayList<>();\n     measurements.add(\"s1\");\n     measurements.add(\"s2\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjAyOA==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414722028", "bodyText": "Confirm whether the tablet is legal.", "author": "HTHou", "createdAt": "2020-04-24T16:54:47Z", "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java", "diffHunk": "@@ -208,22 +208,22 @@ private boolean checkIsTimeSeriesExist(TSRecord record) throws WriteProcessExcep\n   /**\n    * Confirm whether the row batch is legal.\n    *\n-   * @param rowBatch - a row batch responding multiple columns\n+   * @param tablet - a row batch responding multiple columns\n    * @return - whether the row batch has been added into RecordWriter legally", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzEwMw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947103", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:35:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjAyOA=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java\nindex 262b4a9bda..53468475a4 100644\n--- a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java\n+++ b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java\n\n@@ -206,10 +206,10 @@ public class TsFileWriter implements AutoCloseable {\n   }\n \n   /**\n-   * Confirm whether the row batch is legal.\n+   * Confirm whether the tablet is legal.\n    *\n-   * @param tablet - a row batch responding multiple columns\n-   * @return - whether the row batch has been added into RecordWriter legally\n+   * @param tablet - a tablet data responding multiple columns\n+   * @return - whether the tablet's measurements have been added into RecordWriter legally\n    * @throws WriteProcessException exception\n    */\n   private void checkIsTimeSeriesExist(Tablet tablet) throws WriteProcessException {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjQwMw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414722403", "bodyText": "write a tablet", "author": "HTHou", "createdAt": "2020-04-24T16:55:23Z", "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java", "diffHunk": "@@ -254,16 +254,16 @@ public boolean write(TSRecord record) throws IOException, WriteProcessException\n   /**\n    * write a row batch\n    *\n-   * @param rowBatch - multiple time series of one device that share a time column\n+   * @param tablet - multiple time series of one device that share a time column", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzE1Mw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947153", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:35:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjQwMw=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java\nindex 262b4a9bda..53468475a4 100644\n--- a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java\n+++ b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/TsFileWriter.java\n\n@@ -252,7 +252,7 @@ public class TsFileWriter implements AutoCloseable {\n   }\n \n   /**\n-   * write a row batch\n+   * write a tablet\n    *\n    * @param tablet - multiple time series of one device that share a time column\n    * @throws IOException           exception in IO\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjc4NQ==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414722785", "bodyText": "receive a tablet, write it to timeseries writers", "author": "HTHou", "createdAt": "2020-04-24T16:56:03Z", "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/chunk/IChunkGroupWriter.java", "diffHunk": "@@ -51,14 +51,14 @@\n   /**\n    * receive a row batch, write it to timeseries writers\n    *\n-   * @param rowBatch\n+   * @param tablet", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzQwNg==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947406", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:36:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMjc4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/chunk/IChunkGroupWriter.java b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/chunk/IChunkGroupWriter.java\nindex ede9741af6..f6e3fe7664 100644\n--- a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/chunk/IChunkGroupWriter.java\n+++ b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/chunk/IChunkGroupWriter.java\n\n@@ -49,14 +49,10 @@ public interface IChunkGroupWriter {\n   void write(long time, List<DataPoint> data) throws WriteProcessException, IOException;\n \n   /**\n-   * receive a row batch, write it to timeseries writers\n+   * receive a tablet, write it to chunk writers\n    *\n-   * @param tablet\n-   *                - row batch to input\n-   * @throws WriteProcessException\n-   *                  exception in write process\n-   * @throws IOException\n-   *                  exception in IO\n+   * @throws WriteProcessException exception in write process\n+   * @throws IOException exception in IO\n    */\n   void write(Tablet tablet) throws WriteProcessException, IOException;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzQzNQ==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414723435", "bodyText": "Return a tablet", "author": "HTHou", "createdAt": "2020-04-24T16:57:02Z", "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java", "diffHunk": "@@ -46,49 +57,43 @@\n    */\n   public long[] timestamps;\n   /**\n-   * each object is a primitive type array, which represents values of one\n-   * measurement\n+   * each object is a primitive type array, which represents values of one measurement\n    */\n   public Object[] values;\n   /**\n-   * the number of rows to include in this row batch\n+   * the number of rows to include in this tablet\n    */\n-  public int batchSize;\n+  public int rowSize;\n   /**\n    * the maximum number of rows for this row batch\n    */\n-  private int maxBatchSize;\n-\n-  /**\n-   * total byte size that values occupies\n-   */\n-  private int valueOccupation = -1;\n+  private int maxRowNumber;\n \n   /**\n    * Return a row batch with default specified row number. This is the standard\n-   * constructor (all RowBatch should be the same size).\n+   * constructor (all Tablet should be the same size).", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzQ2NA==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947464", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:37:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzQzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\nindex 4e317d22c7..1ead641efb 100644\n--- a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\n+++ b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\n\n@@ -43,17 +43,17 @@ public class Tablet {\n   private static final int DEFAULT_SIZE = 1024;\n \n   /**\n-   * deviceId of this row batch\n+   * deviceId of this tablet\n    */\n   public String deviceId;\n \n   /**\n-   * the list of measurement schemas for creating the row batch\n+   * the list of measurement schemas for creating the tablet\n    */\n   private List<MeasurementSchema> schemas;\n \n   /**\n-   * timestamps in this row batch\n+   * timestamps in this tablet\n    */\n   public long[] timestamps;\n   /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzYwMw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414723603", "bodyText": "Return a tablet", "author": "HTHou", "createdAt": "2020-04-24T16:57:21Z", "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java", "diffHunk": "@@ -46,49 +57,43 @@\n    */\n   public long[] timestamps;\n   /**\n-   * each object is a primitive type array, which represents values of one\n-   * measurement\n+   * each object is a primitive type array, which represents values of one measurement\n    */\n   public Object[] values;\n   /**\n-   * the number of rows to include in this row batch\n+   * the number of rows to include in this tablet\n    */\n-  public int batchSize;\n+  public int rowSize;\n   /**\n    * the maximum number of rows for this row batch\n    */\n-  private int maxBatchSize;\n-\n-  /**\n-   * total byte size that values occupies\n-   */\n-  private int valueOccupation = -1;\n+  private int maxRowNumber;\n \n   /**\n    * Return a row batch with default specified row number. This is the standard\n-   * constructor (all RowBatch should be the same size).\n+   * constructor (all Tablet should be the same size).\n    *\n    * @param deviceId   the name of the device specified to be written in\n    * @param timeseries the list of measurement schemas for creating the row batch\n    */\n-  public RowBatch(String deviceId, List<MeasurementSchema> timeseries) {\n+  public Tablet(String deviceId, List<MeasurementSchema> timeseries) {\n     this(deviceId, timeseries, DEFAULT_SIZE);\n   }\n \n   /**\n    * Return a row batch with the specified number of rows (maxBatchSize). Only\n-   * call this constructor directly for testing purposes. RowBatch should normally\n+   * call this constructor directly for testing purposes. Tablet should normally", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzUwNg==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947506", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:37:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzYwMw=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\nindex 4e317d22c7..1ead641efb 100644\n--- a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\n+++ b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\n\n@@ -43,17 +43,17 @@ public class Tablet {\n   private static final int DEFAULT_SIZE = 1024;\n \n   /**\n-   * deviceId of this row batch\n+   * deviceId of this tablet\n    */\n   public String deviceId;\n \n   /**\n-   * the list of measurement schemas for creating the row batch\n+   * the list of measurement schemas for creating the tablet\n    */\n   private List<MeasurementSchema> schemas;\n \n   /**\n-   * timestamps in this row batch\n+   * timestamps in this tablet\n    */\n   public long[] timestamps;\n   /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzkzNw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414723937", "bodyText": "Return the maximum number of rows for this tablet", "author": "HTHou", "createdAt": "2020-04-24T16:57:57Z", "path": "tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java", "diffHunk": "@@ -102,42 +107,42 @@ public RowBatch(String deviceId, List<MeasurementSchema> schemas, int maxBatchSi\n   /**\n    * Return the maximum number of rows for this row batch\n    */", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzU1Nw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947557", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:37:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyMzkzNw=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\nindex 4e317d22c7..1ead641efb 100644\n--- a/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\n+++ b/tsfile/src/main/java/org/apache/iotdb/tsfile/write/record/Tablet.java\n\n@@ -105,7 +105,7 @@ public class Tablet {\n   }\n \n   /**\n-   * Return the maximum number of rows for this row batch\n+   * Return the maximum number of rows for this tablet\n    */\n   public int getMaxRowNumber() {\n     return maxRowNumber;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNDg3MA==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414724870", "bodyText": "// construct the tablet", "author": "HTHou", "createdAt": "2020-04-24T16:59:26Z", "path": "hive-connector/src/test/java/org/apache/iotdb/hive/TsFileTestHelper.java", "diffHunk": "@@ -61,40 +64,42 @@ public static void writeTsFile(String filePath) {\n \n       // add measurements into file schema (all with INT64 data type)\n       for (int i = 0; i < sensorNum; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\"sensor_\" + (i + 1),\n+            TSDataType.INT64, TSEncoding.TS_2DIFF, CompressionType.UNCOMPRESSED);\n         schema.registerTimeseries(new Path(\"device_1\", \"sensor_\" + (i + 1)),\n-            new MeasurementSchema(\"sensor_\" + (i + 1), TSDataType.INT64, TSEncoding.TS_2DIFF,\n-                CompressionType.UNCOMPRESSED));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       // add measurements into TSFileWriter\n       TsFileWriter tsFileWriter = new TsFileWriter(file, schema);\n \n       // construct the row batch\n-      RowBatch rowBatch = schema.createRowBatch(\"device_1\");\n+      Tablet tablet = new Tablet(\"device_1\", schemaList);", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0NzY3Mg==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947672", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:38:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNDg3MA=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/hive-connector/src/test/java/org/apache/iotdb/hive/TsFileTestHelper.java b/hive-connector/src/test/java/org/apache/iotdb/hive/TsFileTestHelper.java\nindex e3b6a2dacf..9ef22cbb68 100644\n--- a/hive-connector/src/test/java/org/apache/iotdb/hive/TsFileTestHelper.java\n+++ b/hive-connector/src/test/java/org/apache/iotdb/hive/TsFileTestHelper.java\n\n@@ -57,9 +57,9 @@ public class TsFileTestHelper {\n       Schema schema = new Schema();\n       List<MeasurementSchema> schemaList = new ArrayList<>();\n \n-      // the number of rows to include in the row batch\n+      // the number of rows to include in the tablet\n       int rowNum = 1000000;\n-      // the number of values to include in the row batch\n+      // the number of values to include in the tablet\n       int sensorNum = 10;\n \n       // add measurements into file schema (all with INT64 data type)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNTA4Nw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414725087", "bodyText": "// construct the tablet", "author": "HTHou", "createdAt": "2020-04-24T16:59:50Z", "path": "hadoop/src/test/java/org/apache/iotdb/hadoop/tsfile/TsFileTestHelper.java", "diffHunk": "@@ -61,39 +64,42 @@ public static void writeTsFile(String filePath) {\n \n       // add timeseries into file schema (all with INT64 data type)\n       for (int i = 0; i < sensorNum; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\"sensor_\" + (i + 1),\n+            TSDataType.INT64, TSEncoding.TS_2DIFF);\n         schema.registerTimeseries(new Path(\"device_1\", \"sensor_\" + (i + 1)),\n-                new MeasurementSchema(\"sensor_\" + (i + 1), TSDataType.INT64, TSEncoding.TS_2DIFF));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       // add timeseries into TSFileWriter\n       TsFileWriter tsFileWriter = new TsFileWriter(file, schema);\n \n       // construct the row batch\n-      RowBatch rowBatch = schema.createRowBatch(\"device_1\");\n+      Tablet tablet = new Tablet(\"device_1\", schemaList);", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk0Nzg2Mw==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414947863", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:39:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNTA4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/hadoop/src/test/java/org/apache/iotdb/hadoop/tsfile/TsFileTestHelper.java b/hadoop/src/test/java/org/apache/iotdb/hadoop/tsfile/TsFileTestHelper.java\nindex d32428fc33..3b349cd620 100644\n--- a/hadoop/src/test/java/org/apache/iotdb/hadoop/tsfile/TsFileTestHelper.java\n+++ b/hadoop/src/test/java/org/apache/iotdb/hadoop/tsfile/TsFileTestHelper.java\n\n@@ -57,9 +57,9 @@ public class TsFileTestHelper {\n       Schema schema = new Schema();\n       List<MeasurementSchema> schemaList = new ArrayList<>();\n \n-      // the number of rows to include in the row batch\n+      // the number of rows to include in the tablet\n       int rowNum = 1000000;\n-      // the number of values to include in the row batch\n+      // the number of values to include in the tablet\n       int sensorNum = 10;\n \n       // add timeseries into file schema (all with INT64 data type)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNTYzOA==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414725638", "bodyText": "// construct the tablet", "author": "HTHou", "createdAt": "2020-04-24T17:00:41Z", "path": "example/hadoop/src/main/java/org/apache/iotdb/hadoop/tsfile/TsFileHelper.java", "diffHunk": "@@ -52,39 +54,47 @@ public static void writeTsFile(String filePath) {\n \n       Schema schema = new Schema();\n \n+      List<MeasurementSchema> schemaList = new ArrayList<>();\n+\n       // the number of rows to include in the row batch\n       int rowNum = 1000000;\n       // the number of values to include in the row batch\n       int sensorNum = 10;\n \n       // add measurements into file schema (all with INT64 data type)\n       for (int i = 0; i < 2; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\n+            Constant.SENSOR_PREFIX + (i + 1), TSDataType.INT64,\n+            TSEncoding.TS_2DIFF);\n         schema.registerTimeseries(new Path(Constant.DEVICE_1, Constant.SENSOR_PREFIX + (i + 1)),\n-            new MeasurementSchema(Constant.SENSOR_PREFIX + (i + 1), TSDataType.INT64,\n-                TSEncoding.TS_2DIFF));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       for (int i = 2; i < sensorNum; i++) {\n+        MeasurementSchema measurementSchema = new MeasurementSchema(\n+            Constant.SENSOR_PREFIX + (i + 1), TSDataType.DOUBLE,\n+            TSEncoding.TS_2DIFF);\n         schema.registerTimeseries(new Path(Constant.DEVICE_1, Constant.SENSOR_PREFIX + (i + 1)),\n-            new MeasurementSchema(Constant.SENSOR_PREFIX + (i + 1), TSDataType.DOUBLE,\n-                TSEncoding.TS_2DIFF));\n+            measurementSchema);\n+        schemaList.add(measurementSchema);\n       }\n \n       // add measurements into TSFileWriter\n       TsFileWriter tsFileWriter = new TsFileWriter(file, schema);\n \n       // construct the row batch\n-      RowBatch rowBatch = schema.createRowBatch(Constant.DEVICE_1);\n+      Tablet tablet = new Tablet(Constant.DEVICE_1, schemaList);", "originalCommit": "b94f4f72703e074ba78c4b3efeccd30391cc17b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk1MDAzNQ==", "url": "https://github.com/apache/iotdb/pull/1060#discussion_r414950035", "bodyText": "fixed", "author": "qiaojialin", "createdAt": "2020-04-25T01:51:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNTYzOA=="}], "type": "inlineReview", "revised_code": {"commit": "cd980727382f2c911886ebfbf340756049bc041a", "chunk": "diff --git a/example/hadoop/src/main/java/org/apache/iotdb/hadoop/tsfile/TsFileHelper.java b/example/hadoop/src/main/java/org/apache/iotdb/hadoop/tsfile/TsFileHelper.java\nindex 191e14bb01..63e2997350 100644\n--- a/example/hadoop/src/main/java/org/apache/iotdb/hadoop/tsfile/TsFileHelper.java\n+++ b/example/hadoop/src/main/java/org/apache/iotdb/hadoop/tsfile/TsFileHelper.java\n\n@@ -56,9 +56,9 @@ public class TsFileHelper {\n \n       List<MeasurementSchema> schemaList = new ArrayList<>();\n \n-      // the number of rows to include in the row batch\n+      // the number of rows to include in the tablet\n       int rowNum = 1000000;\n-      // the number of values to include in the row batch\n+      // the number of values to include in the tablet\n       int sensorNum = 10;\n \n       // add measurements into file schema (all with INT64 data type)\n"}}, {"oid": "cd980727382f2c911886ebfbf340756049bc041a", "url": "https://github.com/apache/iotdb/commit/cd980727382f2c911886ebfbf340756049bc041a", "message": "rename all row batch to tablet", "committedDate": "2020-04-25T01:40:47Z", "type": "commit"}]}