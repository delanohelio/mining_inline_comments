{"pr_number": 1069, "pr_title": "Issue #1062: Adding CircuitBreaker to CallNotPermittedException for inspection", "pr_createdAt": "2020-07-08T15:05:27Z", "pr_url": "https://github.com/resilience4j/resilience4j/pull/1069", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2MjUzMQ==", "url": "https://github.com/resilience4j/resilience4j/pull/1069#discussion_r452062531", "bodyText": "I'm not sure if we should have a reference in every exception to the CircuitBreaker instance.\nI would prefer if we just add the name to the CallNotPermittedException as a field.", "author": "RobWin", "createdAt": "2020-07-09T08:47:53Z", "path": "resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CallNotPermittedException.java", "diffHunk": "@@ -24,8 +24,11 @@\n  */\n public class CallNotPermittedException extends RuntimeException {\n \n-    private CallNotPermittedException(String message, boolean writableStackTrace) {\n+    private final transient CircuitBreaker circuitBreaker;\n+\n+    private CallNotPermittedException(CircuitBreaker circuitBreaker, String message, boolean writableStackTrace) {\n         super(message, null, false, writableStackTrace);\n+        this.circuitBreaker = circuitBreaker;", "originalCommit": "b62013eed7f136b5511cc4f0bc38bf46353910fd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIwNDE1Mg==", "url": "https://github.com/resilience4j/resilience4j/pull/1069#discussion_r452204152", "bodyText": "I also felt a bit uncomfortable doing this, but also didn't want future requests asking to add other fields in the exception. What's the major concern with adding a reference?", "author": "adwsingh", "createdAt": "2020-07-09T13:09:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2MjUzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYxOTE1MQ==", "url": "https://github.com/resilience4j/resilience4j/pull/1069#discussion_r453619151", "bodyText": "Any update? Can change to just having string if there are major concerns.", "author": "adwsingh", "createdAt": "2020-07-13T12:39:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2MjUzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYyMDQ0MA==", "url": "https://github.com/resilience4j/resilience4j/pull/1069#discussion_r453620440", "bodyText": "Yes, please change it to a string.", "author": "RobWin", "createdAt": "2020-07-13T12:42:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2MjUzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYzMzExNQ==", "url": "https://github.com/resilience4j/resilience4j/pull/1069#discussion_r453633115", "bodyText": "Done.", "author": "adwsingh", "createdAt": "2020-07-13T13:03:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2MjUzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "9d4e6033ec6dea7264f8fe3c2a065ab8a0ac2dbf", "chunk": "diff --git a/resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CallNotPermittedException.java b/resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CallNotPermittedException.java\nindex 308cc1cc..fec6a3d7 100644\n--- a/resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CallNotPermittedException.java\n+++ b/resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CallNotPermittedException.java\n\n@@ -24,11 +24,11 @@ package io.github.resilience4j.circuitbreaker;\n  */\n public class CallNotPermittedException extends RuntimeException {\n \n-    private final transient CircuitBreaker circuitBreaker;\n+    private final transient String causingCircuitBreakerName;\n \n     private CallNotPermittedException(CircuitBreaker circuitBreaker, String message, boolean writableStackTrace) {\n         super(message, null, false, writableStackTrace);\n-        this.circuitBreaker = circuitBreaker;\n+        this.causingCircuitBreakerName = circuitBreaker.getName();\n     }\n \n     /**\n"}}, {"oid": "9d4e6033ec6dea7264f8fe3c2a065ab8a0ac2dbf", "url": "https://github.com/resilience4j/resilience4j/commit/9d4e6033ec6dea7264f8fe3c2a065ab8a0ac2dbf", "message": "Issue #1062: Adding CircuitBreaker to CallNotPermittedException for inspection", "committedDate": "2020-07-13T13:00:10Z", "type": "commit"}, {"oid": "9d4e6033ec6dea7264f8fe3c2a065ab8a0ac2dbf", "url": "https://github.com/resilience4j/resilience4j/commit/9d4e6033ec6dea7264f8fe3c2a065ab8a0ac2dbf", "message": "Issue #1062: Adding CircuitBreaker to CallNotPermittedException for inspection", "committedDate": "2020-07-13T13:00:10Z", "type": "forcePushed"}]}