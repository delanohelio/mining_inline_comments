{"pr_number": 748, "pr_title": "Add a Future implementation that wraps a Thread", "pr_createdAt": "2020-08-27T02:46:59Z", "pr_url": "https://github.com/linkedin/brooklin/pull/748", "timeline": [{"oid": "92152898261019d761551e4b8ad3d796255f8f47", "url": "https://github.com/linkedin/brooklin/commit/92152898261019d761551e4b8ad3d796255f8f47", "message": "Add a Future implementation that wraps a Thread", "committedDate": "2020-08-27T02:45:21Z", "type": "commit"}, {"oid": "ac55385efee663e31b39c420abc0882175e16788", "url": "https://github.com/linkedin/brooklin/commit/ac55385efee663e31b39c420abc0882175e16788", "message": "Add license info and missing javadocs", "committedDate": "2020-08-27T07:40:04Z", "type": "commit"}, {"oid": "dd35ef7e3212e27687722616ab0591893ea258be", "url": "https://github.com/linkedin/brooklin/commit/dd35ef7e3212e27687722616ab0591893ea258be", "message": "Specify test timeout on every test case", "committedDate": "2020-08-27T07:52:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyNjU1NA==", "url": "https://github.com/linkedin/brooklin/pull/748#discussion_r480326554", "bodyText": "nit: 2020 instead of 2019", "author": "vmaheshw", "createdAt": "2020-08-31T18:59:06Z", "path": "datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/**\n+ *  Copyright 2019 LinkedIn Corporation. All rights reserved.", "originalCommit": "dd35ef7e3212e27687722616ab0591893ea258be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM4NTE3OQ==", "url": "https://github.com/linkedin/brooklin/pull/748#discussion_r480385179", "bodyText": "same nit for the test file", "author": "somandal", "createdAt": "2020-08-31T20:37:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyNjU1NA=="}], "type": "inlineReview", "revised_code": {"commit": "87dc4b425019b4045d3ddc6764b5b98287ee2c54", "chunk": "diff --git a/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java b/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java\nindex a60c6b9a..aab738c4 100644\n--- a/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java\n+++ b/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java\n\n@@ -1,5 +1,5 @@\n /**\n- *  Copyright 2019 LinkedIn Corporation. All rights reserved.\n+ *  Copyright 2020 LinkedIn Corporation. All rights reserved.\n  *  Licensed under the BSD 2-Clause License. See the LICENSE file in the project root for license information.\n  *  See the NOTICE file in the project root for additional information regarding copyright ownership.\n  */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyOTA1OQ==", "url": "https://github.com/linkedin/brooklin/pull/748#discussion_r480329059", "bodyText": "Can you please document the benefit of converting thread to future instead of directly checking the thread status?", "author": "vmaheshw", "createdAt": "2020-08-31T19:04:04Z", "path": "datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/**\n+ *  Copyright 2019 LinkedIn Corporation. All rights reserved.\n+ *  Licensed under the BSD 2-Clause License. See the LICENSE file in the project root for license information.\n+ *  See the NOTICE file in the project root for additional information regarding copyright ownership.\n+ */\n+package com.linkedin.datastream.common;\n+\n+import java.util.concurrent.CancellationException;\n+import java.util.concurrent.Future;\n+import java.util.concurrent.TimeUnit;\n+\n+import org.apache.commons.lang3.Validate;\n+\n+\n+/**\n+ * A {@link Future} impl that wraps a {@link Thread}.", "originalCommit": "dd35ef7e3212e27687722616ab0591893ea258be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM4NDYwOA==", "url": "https://github.com/linkedin/brooklin/pull/748#discussion_r480384608", "bodyText": "+1", "author": "somandal", "createdAt": "2020-08-31T20:36:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyOTA1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDU2MTMyNw==", "url": "https://github.com/linkedin/brooklin/pull/748#discussion_r480561327", "bodyText": "There's no inherent benefit. We're just adapting one API to another, i.e. we have a utility (FutureUtils) that checks if a Future is done after a timeout and we're using that to verify if connector tasks stop within a specific duration. We need that same logic for situations when we're working with threads not futures (e.g. MySQLBinaryLogConnector). There's no benefit to using this wrapper as opposed to using an executor service to check if a thread is still alive after a specific duration (other than code reuse).\nMy initial intent was to keep ThreadFuture private within the MySQL connector module but you suggested it may be useful as a general purpose utility.", "author": "ahmedahamid", "createdAt": "2020-09-01T01:36:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyOTA1OQ=="}], "type": "inlineReview", "revised_code": {"commit": "87dc4b425019b4045d3ddc6764b5b98287ee2c54", "chunk": "diff --git a/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java b/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java\nindex a60c6b9a..aab738c4 100644\n--- a/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java\n+++ b/datastream-utils/src/main/java/com/linkedin/datastream/common/ThreadFuture.java\n\n@@ -1,5 +1,5 @@\n /**\n- *  Copyright 2019 LinkedIn Corporation. All rights reserved.\n+ *  Copyright 2020 LinkedIn Corporation. All rights reserved.\n  *  Licensed under the BSD 2-Clause License. See the LICENSE file in the project root for license information.\n  *  See the NOTICE file in the project root for additional information regarding copyright ownership.\n  */\n"}}, {"oid": "87dc4b425019b4045d3ddc6764b5b98287ee2c54", "url": "https://github.com/linkedin/brooklin/commit/87dc4b425019b4045d3ddc6764b5b98287ee2c54", "message": "Update year in copyright header", "committedDate": "2020-09-01T15:28:07Z", "type": "commit"}]}