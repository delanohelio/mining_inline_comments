{"pr_number": 26273, "pr_title": "Fix tuple rest descriptor not recognized with union type", "pr_createdAt": "2020-10-08T06:46:42Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/26273", "timeline": [{"oid": "06182faa7ef0c1fac2e0a365306062c759993a8b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/06182faa7ef0c1fac2e0a365306062c759993a8b", "message": "Fix rest descriptor not recognized issue", "committedDate": "2020-10-08T06:41:51Z", "type": "commit"}, {"oid": "3db800308e7b19307d37ff114683a197a86858c4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3db800308e7b19307d37ff114683a197a86858c4", "message": "Add test case", "committedDate": "2020-10-08T06:42:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUyNTgyNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26273#discussion_r501525826", "bodyText": "since we check the kind can consume directly.\nAlso the method we are in is parseTypeDescOrExpr. Is it only called within a tuple?\nOtherwise will have to do an additional check?", "author": "lochana-chathura", "createdAt": "2020-10-08T08:07:11Z", "path": "compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -12860,7 +12860,14 @@ private STNode parseTypeDescOrExpr() {\n                     return parseActionOrExpressionInLhs(STNodeFactory.createEmptyNodeList());\n                 }\n \n-                return parseTypeDescriptor(ParserRuleContext.TYPE_DESC_IN_TYPE_BINDING_PATTERN);\n+                STNode typedesc =  parseTypeDescriptor(ParserRuleContext.TYPE_DESC_IN_TYPE_BINDING_PATTERN);\n+                // Tuple type desc can contain rest descriptor which is not a regular type desc,\n+                // hence handle it separately.\n+                if (peek().kind == SyntaxKind.ELLIPSIS_TOKEN) {\n+                    STNode ellipsis = parseEllipsis();", "originalCommit": "3db800308e7b19307d37ff114683a197a86858c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYyODcyNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26273#discussion_r501628724", "bodyText": "Updated, thanx", "author": "rdulmina", "createdAt": "2020-10-08T10:54:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTUyNTgyNg=="}], "type": "inlineReview", "revised_code": {"commit": "403894341c1c40673dd8bdadfa2528c5cc63eadd", "chunk": "diff --git a/compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java b/compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java\nindex 4f63527dee3..0a65ec8a6f8 100644\n--- a/compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java\n+++ b/compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java\n\n@@ -12859,15 +12859,7 @@ public class BallerinaParser extends AbstractParser {\n                 if (isValidExpressionStart(nextToken.kind, 1)) {\n                     return parseActionOrExpressionInLhs(STNodeFactory.createEmptyNodeList());\n                 }\n-\n-                STNode typedesc =  parseTypeDescriptor(ParserRuleContext.TYPE_DESC_IN_TYPE_BINDING_PATTERN);\n-                // Tuple type desc can contain rest descriptor which is not a regular type desc,\n-                // hence handle it separately.\n-                if (peek().kind == SyntaxKind.ELLIPSIS_TOKEN) {\n-                    STNode ellipsis = parseEllipsis();\n-                    typedesc = STNodeFactory.createRestDescriptorNode(typedesc, ellipsis);\n-                }\n-                return typedesc;\n+                return parseTypeDescriptor(ParserRuleContext.TYPE_DESC_IN_TYPE_BINDING_PATTERN);\n         }\n \n         if (isDefiniteTypeDesc(typeOrExpr.kind)) {\n"}}, {"oid": "403894341c1c40673dd8bdadfa2528c5cc63eadd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/403894341c1c40673dd8bdadfa2528c5cc63eadd", "message": "Change parsing logic of tuple type rest descriptor.\nMove rest descriptor parsing logic to parseTupleTypeDescOrExprStartsWithOpenBracket method.", "committedDate": "2020-10-08T10:49:09Z", "type": "commit"}]}