{"pr_number": 24445, "pr_title": "Provide Choreo Extension Jar along with native dependencies", "pr_createdAt": "2020-06-24T14:35:44Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24445", "timeline": [{"oid": "aaebaac855de2f49fdafe8eb372a9bf2ef9e563a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aaebaac855de2f49fdafe8eb372a9bf2ef9e563a", "message": "Provide Choreo Extension Jar along with native dependencies", "committedDate": "2020-06-24T14:28:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk0NTk4MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24445#discussion_r444945980", "bodyText": "Lets rename to all instances of Choreo to observability since this is a generic feature", "author": "hevayo", "createdAt": "2020-06-24T14:41:55Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java", "diffHunk": "@@ -73,24 +73,28 @@\n     private final String balHomePath;\n     private final Manifest manifest;\n     private boolean skipCopyLibsFromDist;\n+    private boolean isChoreoExtensionSkipped;", "originalCommit": "aaebaac855de2f49fdafe8eb372a9bf2ef9e563a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b1d024b20c9f910f2ee3737dd0f43b8890533baa", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java\nindex 0bcbb91da96..4601ded5eac 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java\n\n@@ -73,7 +73,7 @@ public class JarResolverImpl implements JarResolver {\n     private final String balHomePath;\n     private final Manifest manifest;\n     private boolean skipCopyLibsFromDist;\n-    private boolean isChoreoExtensionSkipped;\n+    private boolean isObservabilitySkipped;\n \n     public static JarResolver getInstance(BuildContext buildContext, boolean skipCopyLibsFromDist, boolean\n             observabilityIncluded) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk0ODk2OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24445#discussion_r444948969", "bodyText": "Can we add a test for this ? we can write an integration test to see of the observability classes are packed in to the final jar", "author": "hevayo", "createdAt": "2020-06-24T14:45:38Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java", "diffHunk": "@@ -124,6 +128,10 @@ public Path moduleTestJar(BLangPackage bLangPackage) {\n         List<Path> modulePlatformLibs = new ArrayList<>();\n         // copy platform libs for all modules(imported modules as well)\n         addPlatformLibs(packageID, modulePlatformLibs);\n+        // copy choreo extension if --observability-included flag is added\n+        if (!isChoreoExtensionSkipped) {\n+            modulePlatformLibs.add(getChoreoRuntimeJar());\n+        }", "originalCommit": "aaebaac855de2f49fdafe8eb372a9bf2ef9e563a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b1d024b20c9f910f2ee3737dd0f43b8890533baa", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java\nindex 0bcbb91da96..4601ded5eac 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/JarResolverImpl.java\n\n@@ -128,12 +128,12 @@ public class JarResolverImpl implements JarResolver {\n         List<Path> modulePlatformLibs = new ArrayList<>();\n         // copy platform libs for all modules(imported modules as well)\n         addPlatformLibs(packageID, modulePlatformLibs);\n-        // copy choreo extension if --observability-included flag is added\n-        if (!isChoreoExtensionSkipped) {\n-            modulePlatformLibs.add(getChoreoRuntimeJar());\n-        }\n \n         if (isProjectModule(packageID)) {\n+            // copy choreo extension if --observability-included flag is added\n+            if (!isObservabilitySkipped) {\n+                modulePlatformLibs.add(getChoreoRuntimeJar());\n+            }\n             return modulePlatformLibs;\n         } else if (isPathDependency(packageID)) {\n             addLibsFromBaloDependency(packageID, modulePlatformLibs);\n"}}, {"oid": "b1d024b20c9f910f2ee3737dd0f43b8890533baa", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b1d024b20c9f910f2ee3737dd0f43b8890533baa", "message": "Apply suggestions and add an integration test", "committedDate": "2020-06-30T09:28:43Z", "type": "commit"}]}