{"pr_number": 24407, "pr_title": " Fix conditional expressions in all places", "pr_createdAt": "2020-06-22T11:30:16Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24407", "timeline": [{"oid": "5a79fae14f677849dc8cf4907effb1f31dd94285", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a79fae14f677849dc8cf4907effb1f31dd94285", "message": "Fix conditional expr for few expr types", "committedDate": "2020-06-22T10:00:47Z", "type": "commit"}, {"oid": "a76b8aa955d8f4a5a188a7aded72b5eec3ef5b05", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a76b8aa955d8f4a5a188a7aded72b5eec3ef5b05", "message": "Fix conditional expr for \"is expr\"", "committedDate": "2020-06-22T11:27:59Z", "type": "commit"}, {"oid": "11790df1fcfd1f4103bf37a40a5e0ad4721b859c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/11790df1fcfd1f4103bf37a40a5e0ad4721b859c", "message": "Refactor code", "committedDate": "2020-06-22T12:20:27Z", "type": "commit"}, {"oid": "11790df1fcfd1f4103bf37a40a5e0ad4721b859c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/11790df1fcfd1f4103bf37a40a5e0ad4721b859c", "message": "Refactor code", "committedDate": "2020-06-22T12:20:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk2NDMzMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24407#discussion_r443964332", "bodyText": "Shouldn't we pass isInConditionalExpr as the last arg?", "author": "SupunS", "createdAt": "2020-06-23T05:09:19Z", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -2319,7 +2327,7 @@ private STNode parseTypeDescriptorInternal(SyntaxKind tokenKind, ParserRuleConte\n                     return solution.recoveredNode;\n                 }\n \n-                return parseTypeDescriptorInternal(solution.tokenKind, context);\n+                return parseTypeDescriptorInternal(solution.tokenKind, context, false);", "originalCommit": "11790df1fcfd1f4103bf37a40a5e0ad4721b859c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk3MDU5Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24407#discussion_r443970596", "bodyText": "yh It should be. thanks. Fixed with bbc37f6.\nbtw just found out that parser crashes for\nfunction main() {\n    int x = a?b:c\n}\n\nmissing semicolon in conditional-expr. I'll have a look", "author": "lochana-chathura", "createdAt": "2020-06-23T05:28:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk2NDMzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk3MzgwOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24407#discussion_r443973809", "bodyText": "Latter issue fixed with aecf63b", "author": "lochana-chathura", "createdAt": "2020-06-23T05:40:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk2NDMzMg=="}], "type": "inlineReview", "revised_code": {"commit": "bbc37f629dff60f47fdf48c1558867f18a0e94ec", "chunk": "diff --git a/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java b/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java\nindex dc59d8dffe9..2bae64c3135 100644\n--- a/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java\n+++ b/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java\n\n@@ -2327,7 +2327,7 @@ public class BallerinaParser extends AbstractParser {\n                     return solution.recoveredNode;\n                 }\n \n-                return parseTypeDescriptorInternal(solution.tokenKind, context, false);\n+                return parseTypeDescriptorInternal(solution.tokenKind, context, isInConditionalExpr);\n         }\n     }\n \n"}}, {"oid": "bbc37f629dff60f47fdf48c1558867f18a0e94ec", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bbc37f629dff60f47fdf48c1558867f18a0e94ec", "message": "Fix parseTypeDescriptorInternal() recovery issue", "committedDate": "2020-06-23T05:22:45Z", "type": "commit"}, {"oid": "aecf63bf85e7f2911f7f412d6a59524875c6a241", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aecf63bf85e7f2911f7f412d6a59524875c6a241", "message": "Fix conditional-expr recovery for missing semicolon", "committedDate": "2020-06-23T05:39:31Z", "type": "commit"}]}