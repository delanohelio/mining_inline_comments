{"pr_number": 25952, "pr_title": "[Formatter] Fix formatting issues in several parser nodes", "pr_createdAt": "2020-09-21T03:12:06Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952", "timeline": [{"oid": "5cbe2bb7b0e59c423d3586898caa4eca5aa043b4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5cbe2bb7b0e59c423d3586898caa4eca5aa043b4", "message": "Fix the do statement", "committedDate": "2020-09-19T09:07:10Z", "type": "commit"}, {"oid": "e88e8b642d464db3eacbfb942663601e09e13b38", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e88e8b642d464db3eacbfb942663601e09e13b38", "message": "Fix query expressions", "committedDate": "2020-09-19T23:25:05Z", "type": "commit"}, {"oid": "35cca60be71e93cc91a61c474ff1c6dd72d6ecd3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35cca60be71e93cc91a61c474ff1c6dd72d6ecd3", "message": "Fix fork statements", "committedDate": "2020-09-20T20:10:01Z", "type": "commit"}, {"oid": "bc60e344edb0968caca8540e9e042ebd9ced9489", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bc60e344edb0968caca8540e9e042ebd9ced9489", "message": "Fix panic statements", "committedDate": "2020-09-20T20:23:49Z", "type": "commit"}, {"oid": "56a6e8880b18c232b94daca3c5d438a4d5224492", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/56a6e8880b18c232b94daca3c5d438a4d5224492", "message": "Fix continue statements", "committedDate": "2020-09-20T21:22:41Z", "type": "commit"}, {"oid": "c1b9b083dd01e2d4313b469d5a2d0a8e7ab72a4a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c1b9b083dd01e2d4313b469d5a2d0a8e7ab72a4a", "message": "Fix break statements", "committedDate": "2020-09-20T21:26:51Z", "type": "commit"}, {"oid": "68bec39929c0174d02d30b49864a279dd4502b76", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68bec39929c0174d02d30b49864a279dd4502b76", "message": "Fix enum declarations", "committedDate": "2020-09-20T22:12:59Z", "type": "commit"}, {"oid": "abcb7059ab61cf4c9af884ec7b11c7bc0ad10e26", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/abcb7059ab61cf4c9af884ec7b11c7bc0ad10e26", "message": "Fix compound assignment statements", "committedDate": "2020-09-20T22:21:56Z", "type": "commit"}, {"oid": "87e1a9c82f735eb9ed527b7761abe4276606d454", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/87e1a9c82f735eb9ed527b7761abe4276606d454", "message": "Fix let expressions", "committedDate": "2020-09-21T00:49:00Z", "type": "commit"}, {"oid": "d4911658abd694dabb225f0f0e482aaa2c5ee9a4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d4911658abd694dabb225f0f0e482aaa2c5ee9a4", "message": "Fix the call statement", "committedDate": "2020-09-21T00:59:12Z", "type": "commit"}, {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "message": "Fix the if else statements", "committedDate": "2020-09-21T03:03:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjExMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491782113", "bodyText": "Shall we assign the addSpaces value with the if's condition? No need to add an if clause just for setting the variable", "author": "nadeeshaan", "createdAt": "2020-09-21T03:47:12Z", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormatterUtils.java", "diffHunk": "@@ -526,8 +561,12 @@ private static Indentation getBlockParent(Node node) {\n         if (parent.kind() == SyntaxKind.IF_ELSE_STATEMENT) {\n             ArrayList nestedBlock = nestedIfBlock((NonTerminalNode) parent);\n             if (!nestedBlock.isEmpty()) {\n+                boolean addSpaces = false;\n+                if (parent.parent() != null && parent.parent().kind() == SyntaxKind.BLOCK_STATEMENT) {", "originalCommit": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4NTE4NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491785184", "bodyText": "Will make the following improvement in a refactoring PR.\nboolean addSpaces = parent.parent() != null && parent.parent().kind() == SyntaxKind.BLOCK_STATEMENT;", "author": "IrushiL", "createdAt": "2020-09-21T04:06:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4NTQwMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491785401", "bodyText": "Great, approving the PR upon the above comment", "author": "nadeeshaan", "createdAt": "2020-09-21T04:07:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjExMw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjI0Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491782242", "bodyText": "can simplify the addSpaces value assignment by assigning the if condition directly", "author": "nadeeshaan", "createdAt": "2020-09-21T03:48:03Z", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/NodeIndentation.java", "diffHunk": "@@ -111,8 +112,20 @@ static int simpleNameReferenceNode(Node node, FormattingOptions options) {\n             }\n         }\n         if (parent != null && parent.kind() == SyntaxKind.FUNCTION_CALL) {\n+            if (grandParent != null && grandParent.kind() == SyntaxKind.CALL_STATEMENT) {", "originalCommit": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4NTMwOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491785308", "bodyText": "Will make the following improvement in a refactoring PR.\naddSpaces = grandParent != null && grandParent.kind() == SyntaxKind.CALL_STATEMENT;", "author": "IrushiL", "createdAt": "2020-09-21T04:06:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjI0Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4Mjc3Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491782776", "bodyText": "Can simplify the addSpaces variable assignment", "author": "nadeeshaan", "createdAt": "2020-09-21T03:51:38Z", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -409,12 +418,18 @@ public ReturnTypeDescriptorNode transform(ReturnTypeDescriptorNode returnTypeDes\n         if (!isInLineRange(returnTypeDescriptorNode, lineRange)) {\n             return returnTypeDescriptorNode;\n         }\n+        boolean addSpaces = false;\n+        if (returnTypeDescriptorNode.parent() != null &&\n+                returnTypeDescriptorNode.parent().kind() == SyntaxKind.BLOCK_STATEMENT) {\n+            addSpaces = true;\n+        }", "originalCommit": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4NTQxNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491785416", "bodyText": "Will make the following improvement in a refactoring PR.\nboolean addSpaces = returnTypeDescriptorNode.parent() != null && returnTypeDescriptorNode.parent().kind() == SyntaxKind.BLOCK_STATEMENT;", "author": "IrushiL", "createdAt": "2020-09-21T04:07:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4Mjc3Ng=="}], "type": "inlineReview", "revised_code": null}]}