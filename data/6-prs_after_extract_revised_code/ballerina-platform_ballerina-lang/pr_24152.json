{"pr_number": 24152, "pr_title": "Add build time flag to control packaging Choreo Extension", "pr_createdAt": "2020-06-15T12:08:48Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24152", "timeline": [{"oid": "ff350376d2bc5293f690c2d0f48f372e665354c0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ff350376d2bc5293f690c2d0f48f372e665354c0", "message": "Add build time flag to package Choreo extension\n\n# By default it is not packaged", "committedDate": "2020-06-15T12:10:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE4NTc3OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24152#discussion_r440185779", "bodyText": "Can we move this logic inside the CopyChoreoExtensionTask", "author": "hevayo", "createdAt": "2020-06-15T13:44:53Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java", "diffHunk": "@@ -399,7 +405,11 @@ public void execute() {\n         buildContext.put(BuildContextField.JAR_RESOLVER, jarResolver);\n         buildContext.setOut(outStream);\n         buildContext.setErr(errStream);\n-    \n+", "originalCommit": "8c22baa3a30408a9e5869fb40d7319acee50d367", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE5NTc2MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24152#discussion_r440195761", "bodyText": "As per the offline conversation, resolving as this will be refactored later anyway", "author": "nadundesilva", "createdAt": "2020-06-15T13:58:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE4NTc3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "da58131933eaa2a5a0bfbd346ae4d8133c8ab224", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java\nindex f09142b415a..869352bf9fd 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java\n\n@@ -405,11 +399,7 @@ public class BuildCommand implements BLauncherCmd {\n         buildContext.put(BuildContextField.JAR_RESOLVER, jarResolver);\n         buildContext.setOut(outStream);\n         buildContext.setErr(errStream);\n-\n-        Manifest manifest = ManifestProcessor.getInstance(compilerContext).getManifest();\n-        boolean isChoreoExtensionSkipped = !(withChoreo ||\n-                (manifest.getBuildOptions() != null && manifest.getBuildOptions().isWithChoreo()));\n-\n+    \n         boolean isSingleFileBuild = buildContext.getSourceType().equals(SINGLE_BAL_FILE);\n         // output path is the current directory if -o flag is not given.\n         Path outputPath = null == this.output ? Paths.get(System.getProperty(\"user.dir\")) : Paths.get(this.output);\n"}}, {"oid": "001b1eb990205bc4f56582c08c54d2a2489ca99b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/001b1eb990205bc4f56582c08c54d2a2489ca99b", "message": "Move Choreo specific SPI information from ballerina-rt to ballerina-choreo-extension-rt", "committedDate": "2020-06-15T14:17:18Z", "type": "forcePushed"}, {"oid": "da58131933eaa2a5a0bfbd346ae4d8133c8ab224", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/da58131933eaa2a5a0bfbd346ae4d8133c8ab224", "message": "Revert changes done to ballerina-rt for Choreo", "committedDate": "2020-06-15T15:29:31Z", "type": "commit"}, {"oid": "aca0ebe26a6a49561cc1fd62ba3cf0d1129d58c7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aca0ebe26a6a49561cc1fd62ba3cf0d1129d58c7", "message": "Add ballerina-choreo-extension-rt jar to the Ballerina distribution", "committedDate": "2020-06-15T15:29:31Z", "type": "commit"}, {"oid": "c186f26ccbcb7ac0d67eaa3c07ded78ba71d70a0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c186f26ccbcb7ac0d67eaa3c07ded78ba71d70a0", "message": "Add build time flag to package Choreo extension\n\n# By default it is not packaged", "committedDate": "2020-06-15T15:29:31Z", "type": "commit"}, {"oid": "c4d468bd12baefcb40be0fbc736669b4b8acaae2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c4d468bd12baefcb40be0fbc736669b4b8acaae2", "message": "Add Ballerina.toml support for packaging Choreo extension", "committedDate": "2020-06-15T15:29:35Z", "type": "commit"}, {"oid": "6093e4bb49f85aef20a170aa09689bca1a1963dc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6093e4bb49f85aef20a170aa09689bca1a1963dc", "message": "Move Choreo specific SPI information from ballerina-rt to ballerina-choreo-extension-rt", "committedDate": "2020-06-15T15:29:35Z", "type": "commit"}, {"oid": "6093e4bb49f85aef20a170aa09689bca1a1963dc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6093e4bb49f85aef20a170aa09689bca1a1963dc", "message": "Move Choreo specific SPI information from ballerina-rt to ballerina-choreo-extension-rt", "committedDate": "2020-06-15T15:29:35Z", "type": "forcePushed"}]}