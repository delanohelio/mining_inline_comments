{"pr_number": 25589, "pr_title": "Add sorting support for import and top level contexts", "pr_createdAt": "2020-09-03T11:51:30Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25589", "timeline": [{"oid": "7426ee027143309b703f10d951374e13796dea3d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7426ee027143309b703f10d951374e13796dea3d", "message": "add sorting support for import and top level contexts", "committedDate": "2020-09-08T03:10:50Z", "type": "commit"}, {"oid": "f53c2b558514cc263147b884299352debee51165", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f53c2b558514cc263147b884299352debee51165", "message": "add completion item sorting support for listener context", "committedDate": "2020-09-08T06:05:27Z", "type": "commit"}, {"oid": "f53c2b558514cc263147b884299352debee51165", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f53c2b558514cc263147b884299352debee51165", "message": "add completion item sorting support for listener context", "committedDate": "2020-09-08T06:05:27Z", "type": "forcePushed"}, {"oid": "63a6ce1abc71a6c68fb9e89a57800d0ad8224165", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63a6ce1abc71a6c68fb9e89a57800d0ad8224165", "message": "remove unused enum declaration", "committedDate": "2020-09-08T06:11:27Z", "type": "commit"}, {"oid": "bb7c7e3520940204878061fa020b1d6bf37478bd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb7c7e3520940204878061fa020b1d6bf37478bd", "message": "consider sort text for completion test assertion", "committedDate": "2020-09-08T06:48:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc1MzE2Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25589#discussion_r484753166", "bodyText": "Shall we move this check into a util function in SortingUtil such as SortingUtil.isKeywordCompletionItem(item)?", "author": "rasika", "createdAt": "2020-09-08T08:44:44Z", "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/completions/providers/context/ModulePartNodeContext.java", "diffHunk": "@@ -57,7 +63,35 @@ public ModulePartNodeContext() {\n         completionItems.addAll(addTopLevelItems(context));\n         completionItems.addAll(this.getTypeItems(context));\n         completionItems.addAll(this.getPackagesCompletionItems(context));\n+        this.sort(context, node, completionItems);\n \n         return completionItems;\n     }\n+\n+    @Override\n+    public void sort(LSContext context, ModulePartNode node, List<LSCompletionItem> items, Object... metaData) {\n+        for (LSCompletionItem item : items) {\n+            CompletionItem cItem = item.getCompletionItem();\n+            if (item instanceof SnippetCompletionItem\n+                    && (((SnippetCompletionItem) item).kind() == SnippetBlock.Kind.SNIPPET\n+                    || ((SnippetCompletionItem) item).kind() == SnippetBlock.Kind.STATEMENT)) {\n+                cItem.setSortText(genSortText(1));\n+                continue;\n+            }\n+            if (item instanceof SnippetCompletionItem\n+                    && ((SnippetCompletionItem) item).kind() == SnippetBlock.Kind.KEYWORD) {", "originalCommit": "bb7c7e3520940204878061fa020b1d6bf37478bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc1ODcyMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25589#discussion_r484758722", "bodyText": "Sounds good, will do.", "author": "nadeeshaan", "createdAt": "2020-09-08T08:53:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc1MzE2Ng=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc1MzQwNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25589#discussion_r484753406", "bodyText": "Shall we move this check into a util function in SortingUtil such as SortingUtil.isStatementCompletionItem(item)", "author": "rasika", "createdAt": "2020-09-08T08:45:03Z", "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/completions/providers/context/ModulePartNodeContext.java", "diffHunk": "@@ -57,7 +63,35 @@ public ModulePartNodeContext() {\n         completionItems.addAll(addTopLevelItems(context));\n         completionItems.addAll(this.getTypeItems(context));\n         completionItems.addAll(this.getPackagesCompletionItems(context));\n+        this.sort(context, node, completionItems);\n \n         return completionItems;\n     }\n+\n+    @Override\n+    public void sort(LSContext context, ModulePartNode node, List<LSCompletionItem> items, Object... metaData) {\n+        for (LSCompletionItem item : items) {\n+            CompletionItem cItem = item.getCompletionItem();\n+            if (item instanceof SnippetCompletionItem\n+                    && (((SnippetCompletionItem) item).kind() == SnippetBlock.Kind.SNIPPET\n+                    || ((SnippetCompletionItem) item).kind() == SnippetBlock.Kind.STATEMENT)) {", "originalCommit": "bb7c7e3520940204878061fa020b1d6bf37478bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc1ODc0Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25589#discussion_r484758746", "bodyText": "Sounds good, will do.", "author": "nadeeshaan", "createdAt": "2020-09-08T08:53:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc1MzQwNg=="}], "type": "inlineReview", "revised_code": null}]}