{"pr_number": 23919, "pr_title": "Move assignments with init to a separate method ", "pr_createdAt": "2020-06-11T05:57:08Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23919", "timeline": [{"oid": "716f04c69064f7636b5c1271b29f48f204291d90", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/716f04c69064f7636b5c1271b29f48f204291d90", "message": "Make the method size smaller for splitting init\n\nThe method size is made smaller for splitting the ___init_ function in the generated byte code. This would temporarily fix the method too large issue as in #23376", "committedDate": "2020-06-12T04:00:01Z", "type": "forcePushed"}, {"oid": "542f01386b04f00d3a3f0425eb280d65faa913f6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/542f01386b04f00d3a3f0425eb280d65faa913f6", "message": "Make the method size smaller for splitting init\n\nThe method size is made smaller for splitting the ___init_ function in the generated byte code. This would temporarily fix the method too large issue as in #23376", "committedDate": "2020-06-12T10:54:43Z", "type": "forcePushed"}, {"oid": "c2d7e3db30213b78dcaea30fde9a519aa3c2311b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c2d7e3db30213b78dcaea30fde9a519aa3c2311b", "message": "Move assignments with init or record to a separate method\n\nTo prevent the method too large issue, this fix moves the assignment statements with init or record expressions to a separate method, thus making the init method smaller", "committedDate": "2020-06-12T10:58:24Z", "type": "forcePushed"}, {"oid": "e1bbcbfab166abab4bdb219418448d2e14ea14b5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e1bbcbfab166abab4bdb219418448d2e14ea14b5", "message": "Move assignments with init or record to a separate method\n\nTo prevent the method too large issue, this fix moves the assignment statements with init or record expressions to a separate method, thus making the init method smaller", "committedDate": "2020-06-12T11:40:59Z", "type": "commit"}, {"oid": "e1bbcbfab166abab4bdb219418448d2e14ea14b5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e1bbcbfab166abab4bdb219418448d2e14ea14b5", "message": "Move assignments with init or record to a separate method\n\nTo prevent the method too large issue, this fix moves the assignment statements with init or record expressions to a separate method, thus making the init method smaller", "committedDate": "2020-06-12T11:40:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ4MzAxNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23919#discussion_r439483017", "bodyText": "I assume this change is due to the new check with method size splitting logic. Did we check the exact reason for this?", "author": "Kishanthan", "createdAt": "2020-06-12T15:18:25Z", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/service/grpc/tool/StubGeneratorTestCase.java", "diffHunk": "@@ -436,7 +436,7 @@ public void testHelloWorldGatewayWithRepeatedField() throws IllegalAccessExcepti\n                 \"Expected compilation units not found in compile results.\");\n         assertEquals(((BLangPackage) compileResult.getAST()).typeDefinitions.size(), 9,\n                 \"Expected type definitions not found in compile results.\");\n-        assertEquals(((BLangPackage) compileResult.getAST()).functions.size(), 22,\n+        assertEquals(((BLangPackage) compileResult.getAST()).functions.size(), 24,", "originalCommit": "e1bbcbfab166abab4bdb219418448d2e14ea14b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzMzQ0MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23919#discussion_r439533440", "bodyText": "yes I checked the AST before and after the change. After the change there were more <init># functions", "author": "riyafa", "createdAt": "2020-06-12T16:50:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ4MzAxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NDY4MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23919#discussion_r439584680", "bodyText": "ack", "author": "Kishanthan", "createdAt": "2020-06-12T18:40:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ4MzAxNw=="}], "type": "inlineReview", "revised_code": null}]}