{"pr_number": 25702, "pr_title": "Add Testerina code-coverage error message when source not present", "pr_createdAt": "2020-09-10T05:42:08Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25702", "timeline": [{"oid": "73c862654a3a38db70709d0655f89e584865ef1d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/73c862654a3a38db70709d0655f89e584865ef1d", "message": "Testerina code coverage fix", "committedDate": "2020-09-10T05:48:17Z", "type": "forcePushed"}, {"oid": "c307797435163e15296115e4bc7ab024fbf188b6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c307797435163e15296115e4bc7ab024fbf188b6", "message": "Testerina code coverage fix", "committedDate": "2020-09-10T17:04:36Z", "type": "forcePushed"}, {"oid": "0bb75e538a26cf19210bfef4b4c8a829029ea2f7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0bb75e538a26cf19210bfef4b4c8a829029ea2f7", "message": "Testerina code coverage fix", "committedDate": "2020-09-10T17:23:51Z", "type": "commit"}, {"oid": "0bb75e538a26cf19210bfef4b4c8a829029ea2f7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0bb75e538a26cf19210bfef4b4c8a829029ea2f7", "message": "Testerina code coverage fix", "committedDate": "2020-09-10T17:23:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4ODAxOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25702#discussion_r486888019", "bodyText": "Let's improve the error message a bit.\n\"Unable to generate code coverage. Source file for the module \" + moduleName + \"does not exist.\"\nWDYT?", "author": "Dilhasha", "createdAt": "2020-09-11T09:09:26Z", "path": "misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/CodeCoverageUtils.java", "diffHunk": "@@ -70,8 +75,13 @@ public static void unzipCompiledSource(Path source, Path destination, String org\n                 }\n \n             }\n+\n             copyClassFilesToBinPath(destination, destJarDir, orgName, moduleName, version);\n             deleteDirectory(new File(destJarDir));\n+        } catch (NoSuchFileException e) {\n+            String msg = \"Source file for \" + moduleName + \" doesnt exist. Cannot generate Code coverage\";", "originalCommit": "0bb75e538a26cf19210bfef4b4c8a829029ea2f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwMzMwOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25702#discussion_r486903308", "bodyText": "Yes. The way it is currently worded doesnt sound nice.\nI think it would be better if I change it to \"Unable to generate code coverage for the module \" + moduleName \". Source file does not exist\". If we word it like this, then it implies that it couldn't generate the coverage only for this particular module and that it will continue to do so for the other modules.\nWDYT?", "author": "Ibaqu", "createdAt": "2020-09-11T09:24:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4ODAxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk2OTQwNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25702#discussion_r486969407", "bodyText": "Changed it to \"Unable to generate code coverage for the module \" + moduleName \". Source file does not exist\"", "author": "Ibaqu", "createdAt": "2020-09-11T10:56:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4ODAxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "e9f65b63b468cf66d142f3060eaac06516be9d2a", "chunk": "diff --git a/misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/CodeCoverageUtils.java b/misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/CodeCoverageUtils.java\nindex 626e4c3aaf4..a2f9968b1c4 100644\n--- a/misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/CodeCoverageUtils.java\n+++ b/misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/CodeCoverageUtils.java\n\n@@ -79,7 +79,8 @@ public class CodeCoverageUtils {\n             copyClassFilesToBinPath(destination, destJarDir, orgName, moduleName, version);\n             deleteDirectory(new File(destJarDir));\n         } catch (NoSuchFileException e) {\n-            String msg = \"Source file for \" + moduleName + \" doesnt exist. Cannot generate Code coverage\";\n+            String msg = \"Unable to generate code coverage for the module \" + moduleName + \". Source file does not \" +\n+                    \"exist\";\n             errStream.println(msg);\n             throw new NoSuchFileException(msg);\n         } catch (IOException e) {\n"}}, {"oid": "e9f65b63b468cf66d142f3060eaac06516be9d2a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e9f65b63b468cf66d142f3060eaac06516be9d2a", "message": "Change CodeCoverage error message", "committedDate": "2020-09-11T10:32:45Z", "type": "commit"}]}