{"pr_number": 20747, "pr_title": "Prevent compiling of test bal files when not required", "pr_createdAt": "2020-01-27T06:32:06Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747", "timeline": [{"oid": "aaeb7696f2fc8ab1261a7ec69cefdd822c33e477", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aaeb7696f2fc8ab1261a7ec69cefdd822c33e477", "message": "Prevent compiling of test bal fils when not required", "committedDate": "2020-01-27T05:57:00Z", "type": "commit"}, {"oid": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9e97335a6bc8fcd876c61e736784ad3c3e6eae29", "message": "Exclude the resources directory when retrieving source files", "committedDate": "2020-01-30T07:48:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyODYzNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r375228636", "bodyText": "Why we are throwing IOException from here?", "author": "anupama-pathirage", "createdAt": "2020-02-05T12:33:02Z", "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -744,6 +744,23 @@ public void testBuildCommandSingleFileWithOutput() throws IOException {\n         Path execJar = tmpDir.resolve(\"sample.jar\");\n         Assert.assertTrue(Files.exists(execJar), \"Check if jar gets created\");\n     }\n+\n+    @Test(description = \"Test the --skip-tests flag in the build command to ensure it avoids compiling tests\")\n+    public void testBuildWithSkipTests() throws IOException {", "originalCommit": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI1ODY1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r376258658", "bodyText": "Since the output log generated from the build command is read at line 756 and the readOutput method used for this throws an IOException.", "author": "IrushiL", "createdAt": "2020-02-07T08:07:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyODYzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI2MDc3Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r376260772", "bodyText": "Sorry my bad yor are correct., This comment was for  line 732 method which was already there.", "author": "anupama-pathirage", "createdAt": "2020-02-07T08:13:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyODYzNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyOTQyMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r375229420", "bodyText": "Do we need to throw IOException from here?", "author": "anupama-pathirage", "createdAt": "2020-02-05T12:34:45Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/packaging/converters/FilterSearch.java", "diffHunk": "@@ -47,7 +47,7 @@ public FileVisitResult visitFile(Object file, BasicFileAttributes attrs) throws\n      */\n     private boolean isExcluded(Path path) throws IOException {", "originalCommit": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI2MTM5MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r376261390", "bodyText": "This is not needed, removed it.", "author": "IrushiL", "createdAt": "2020-02-07T08:15:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyOTQyMA=="}], "type": "inlineReview", "revised_code": {"commit": "686bdca75475d4ab95dc51ebb9f970321aa35c41", "chunk": "diff --git a/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/packaging/converters/FilterSearch.java b/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/packaging/converters/FilterSearch.java\nindex 8a94ca52028..a25c0cf4c20 100644\n--- a/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/packaging/converters/FilterSearch.java\n+++ b/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/packaging/converters/FilterSearch.java\n\n@@ -43,9 +43,8 @@ class FilterSearch extends SimpleFileVisitor {\n      *\n      * @param path directory path to be traversed\n      * @return if the directory is to be excluded or not\n-     * @throws IOException exception\n      */\n-    private boolean isExcluded(Path path) throws IOException {\n+    private boolean isExcluded(Path path) {\n         Path name = path.getFileName();\n         return (name != null) && excludeDir.contains(name);\n     }\n"}}, {"oid": "686bdca75475d4ab95dc51ebb9f970321aa35c41", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/686bdca75475d4ab95dc51ebb9f970321aa35c41", "message": "Fix review comments", "committedDate": "2020-02-07T08:14:24Z", "type": "commit"}]}