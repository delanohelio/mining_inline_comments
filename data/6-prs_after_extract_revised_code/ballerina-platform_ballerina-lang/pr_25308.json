{"pr_number": 25308, "pr_title": "Add callOriginal functionality to function mocking", "pr_createdAt": "2020-08-18T09:10:50Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25308", "timeline": [{"oid": "8cd1a6065d71a3bb537de5706fedf3203f81ffbe", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8cd1a6065d71a3bb537de5706fedf3203f81ffbe", "message": "Add callOriginal functionality to function mocking", "committedDate": "2020-08-18T13:00:17Z", "type": "forcePushed"}, {"oid": "fa1100ca4b2867e57ea0eff8cb26e85c5df47dd5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fa1100ca4b2867e57ea0eff8cb26e85c5df47dd5", "message": "Address review changes", "committedDate": "2020-08-19T09:26:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE4NTAwNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25308#discussion_r476185006", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if ((returnVal instanceof StringValue)) {\n          \n          \n            \n                            if (returnVal instanceof StringValue) {", "author": "azinneera", "createdAt": "2020-08-25T05:24:21Z", "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/mock/FunctionMock.java", "diffHunk": "@@ -51,9 +52,12 @@ public static Object mockHandler(ObjectValue mockFuncObj, Object... args) {\n         for (String caseId : caseIds) {\n             if (MockRegistry.getInstance().hasCase(caseId)) {\n                 returnVal = MockRegistry.getInstance().getReturnValue(caseId);\n-                if ((returnVal instanceof StringValue)\n-                        && returnVal.toString().contains(MockConstants.FUNCTION_CALL_PLACEHOLDER)) {\n-                    return callFunction(originalFunction, originalFunctionPackage, returnVal.toString(), args);\n+                if ((returnVal instanceof StringValue)) {", "originalCommit": "fa1100ca4b2867e57ea0eff8cb26e85c5df47dd5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1201377e47ea58a5d6e91fc3ee0b22e674c09926", "chunk": "diff --git a/misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/mock/FunctionMock.java b/misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/mock/FunctionMock.java\nindex ae1baa68026..a1fa5a77546 100644\n--- a/misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/mock/FunctionMock.java\n+++ b/misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/mock/FunctionMock.java\n\n@@ -52,7 +52,7 @@ public class FunctionMock {\n         for (String caseId : caseIds) {\n             if (MockRegistry.getInstance().hasCase(caseId)) {\n                 returnVal = MockRegistry.getInstance().getReturnValue(caseId);\n-                if ((returnVal instanceof StringValue)) {\n+                if (returnVal instanceof StringValue) {\n                     if (returnVal.toString().contains(MockConstants.FUNCTION_CALL_PLACEHOLDER)) {\n                         return callFunction(originalFunction, originalFunctionPackage, returnVal.toString(), args);\n                     } else if (returnVal.toString().equals(MockConstants.FUNCTION_CALLORIGINAL_PLACEHOLDER)) {\n"}}, {"oid": "07f61e83f8dff908b418c42c874cfa9141689bd6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/07f61e83f8dff908b418c42c874cfa9141689bd6", "message": "Add callOriginal functionality to function mocking", "committedDate": "2020-08-25T06:01:17Z", "type": "commit"}, {"oid": "1201377e47ea58a5d6e91fc3ee0b22e674c09926", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1201377e47ea58a5d6e91fc3ee0b22e674c09926", "message": "Address review changes", "committedDate": "2020-08-25T07:52:39Z", "type": "commit"}, {"oid": "1201377e47ea58a5d6e91fc3ee0b22e674c09926", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1201377e47ea58a5d6e91fc3ee0b22e674c09926", "message": "Address review changes", "committedDate": "2020-08-25T07:52:39Z", "type": "forcePushed"}]}