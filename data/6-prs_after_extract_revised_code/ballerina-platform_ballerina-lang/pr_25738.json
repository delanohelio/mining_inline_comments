{"pr_number": 25738, "pr_title": "Introduce breaking changes to `toString()` method", "pr_createdAt": "2020-09-11T09:34:06Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738", "timeline": [{"oid": "1b39e4ecb376b6bfa8d7c7445b108f767d6cb819", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b39e4ecb376b6bfa8d7c7445b108f767d6cb819", "message": "Add initial implementation of toString functionality", "committedDate": "2020-09-09T13:54:46Z", "type": "commit"}, {"oid": "e37fe37e81d59371144fc1a0825bb6a1f1e144e3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e37fe37e81d59371144fc1a0825bb6a1f1e144e3", "message": "Add additional changes for toString functionality", "committedDate": "2020-09-10T07:40:21Z", "type": "commit"}, {"oid": "bee2256c38f2ac75fd409122334fda894610779f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bee2256c38f2ac75fd409122334fda894610779f", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into toString-impl", "committedDate": "2020-09-10T07:48:47Z", "type": "commit"}, {"oid": "a67e033422297370d8303b7b3b444a339e63dfc2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a67e033422297370d8303b7b3b444a339e63dfc2", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into master-new", "committedDate": "2020-09-10T10:04:20Z", "type": "commit"}, {"oid": "2aeb06690c91fcbd239ea70fda285e5b9911f833", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2aeb06690c91fcbd239ea70fda285e5b9911f833", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into toString-impl", "committedDate": "2020-09-10T10:42:31Z", "type": "commit"}, {"oid": "ff40c9c4012d83b0a3d1bd6be21c261bf6801567", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ff40c9c4012d83b0a3d1bd6be21c261bf6801567", "message": "Add toString() for error type", "committedDate": "2020-09-10T12:34:13Z", "type": "commit"}, {"oid": "2badd4d9a33b9c0510320b8eabe1344d67ecb7b7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2badd4d9a33b9c0510320b8eabe1344d67ecb7b7", "message": "Fix test cases due to toSting impl change", "committedDate": "2020-09-10T13:05:49Z", "type": "commit"}, {"oid": "2c24e116816a9b97ad2d89e97861c54536d535d5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2c24e116816a9b97ad2d89e97861c54536d535d5", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-10T13:13:17Z", "type": "commit"}, {"oid": "3d0384d940b8b6ce47fd6671a31bb029b3e1d076", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3d0384d940b8b6ce47fd6671a31bb029b3e1d076", "message": "Fix tests to sync toString change", "committedDate": "2020-09-10T14:26:07Z", "type": "commit"}, {"oid": "220cefc9a724da82534eb17eaf724e9cabf66299", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/220cefc9a724da82534eb17eaf724e9cabf66299", "message": "Fix types package after toString change", "committedDate": "2020-09-10T14:31:54Z", "type": "commit"}, {"oid": "1170f1f67fb548fd21c644670e2546d6b31e67ce", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1170f1f67fb548fd21c644670e2546d6b31e67ce", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-10T14:36:06Z", "type": "commit"}, {"oid": "866a259b4f323969f7df712404970b14d1cb6446", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/866a259b4f323969f7df712404970b14d1cb6446", "message": "Fix parser/error handler as per review comments", "committedDate": "2020-09-10T14:36:58Z", "type": "commit"}, {"oid": "d93c4210fcd97b7f48395b7a6854fc79a75f462c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d93c4210fcd97b7f48395b7a6854fc79a75f462c", "message": "Merge remote-tracking branch 'mohan/tostring-impl' into tostring-impl", "committedDate": "2020-09-10T14:37:26Z", "type": "commit"}, {"oid": "8541761c3a1f6d42b7ac631453f9e67cdb7d101d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8541761c3a1f6d42b7ac631453f9e67cdb7d101d", "message": "Revert testng changes", "committedDate": "2020-09-10T14:46:37Z", "type": "commit"}, {"oid": "e312e734acae141b4ccab8f1baceb905cf9b98fc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e312e734acae141b4ccab8f1baceb905cf9b98fc", "message": "Merge pull request #6 from pcnfernando/tostring-impl\n\nFix tests to sync toString change", "committedDate": "2020-09-10T14:48:46Z", "type": "commit"}, {"oid": "fc213fb9abb270868a66685792ae69e948eebf71", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fc213fb9abb270868a66685792ae69e948eebf71", "message": "Merge pull request #7 from grainier/tostring-impl\n\nFix types package after toString change", "committedDate": "2020-09-10T14:48:58Z", "type": "commit"}, {"oid": "aa5b9cfd8fa1822f4ec9b5966f89939a380149f7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aa5b9cfd8fa1822f4ec9b5966f89939a380149f7", "message": "Add toString() for error type", "committedDate": "2020-09-10T14:49:03Z", "type": "commit"}, {"oid": "a8318e7e401a60529c8904a6ab634f1af8cbbde5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a8318e7e401a60529c8904a6ab634f1af8cbbde5", "message": "Refactor code", "committedDate": "2020-09-10T15:14:41Z", "type": "commit"}, {"oid": "5d15dea8ba86575e4ac4659b31c89e849e0ff00a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5d15dea8ba86575e4ac4659b31c89e849e0ff00a", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-10T15:37:38Z", "type": "commit"}, {"oid": "92a64da3cdee292cc3d23c5fa5310916687ffbdd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/92a64da3cdee292cc3d23c5fa5310916687ffbdd", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into master-new", "committedDate": "2020-09-10T15:38:43Z", "type": "commit"}, {"oid": "8be12d2eb364f97f67a79c06096580cc8d8ce79e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8be12d2eb364f97f67a79c06096580cc8d8ce79e", "message": "Fix error test", "committedDate": "2020-09-10T16:32:55Z", "type": "commit"}, {"oid": "c7cca18d80d0176afe2c5be48e5100e4beb4644e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c7cca18d80d0176afe2c5be48e5100e4beb4644e", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into toString-impl", "committedDate": "2020-09-10T16:38:22Z", "type": "commit"}, {"oid": "1ef88108f5c643465600aa31cd251a8f69f90b02", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1ef88108f5c643465600aa31cd251a8f69f90b02", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-10T17:45:45Z", "type": "commit"}, {"oid": "d2eca11fe0c16dffb4c15a761824b0f3a7bf19e2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d2eca11fe0c16dffb4c15a761824b0f3a7bf19e2", "message": "Fix assignments test", "committedDate": "2020-09-10T18:01:05Z", "type": "commit"}, {"oid": "850d45928709726519a6fa6ae588ebf43647f3c0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/850d45928709726519a6fa6ae588ebf43647f3c0", "message": "Fix jvm error test", "committedDate": "2020-09-10T18:01:52Z", "type": "commit"}, {"oid": "2db9f3ef0edb569d5fb6b653aa3a04cafc1a8960", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2db9f3ef0edb569d5fb6b653aa3a04cafc1a8960", "message": "Fix member access test", "committedDate": "2020-09-10T18:25:53Z", "type": "commit"}, {"oid": "0567963a72e4ce1246d13cc2daaa5c82b49c8ade", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0567963a72e4ce1246d13cc2daaa5c82b49c8ade", "message": "Fix binary operations test", "committedDate": "2020-09-10T18:36:22Z", "type": "commit"}, {"oid": "cdb10a3828ee964d92dd8ae3752a8e6875b2fed5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cdb10a3828ee964d92dd8ae3752a8e6875b2fed5", "message": "Undo changes", "committedDate": "2020-09-10T18:44:29Z", "type": "commit"}, {"oid": "1b31fc954c68603f5ededc0dbffbc0a086ea97f4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b31fc954c68603f5ededc0dbffbc0a086ea97f4", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-10T18:53:41Z", "type": "commit"}, {"oid": "63c611fe16216f6b2f6f63d361e04264d5df0275", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63c611fe16216f6b2f6f63d361e04264d5df0275", "message": "Merge pull request #5 from lasinicl/toString-impl\n\nAdd toString() for error type", "committedDate": "2020-09-10T18:56:12Z", "type": "commit"}, {"oid": "01dd1b698cece6154e316a2d9e1818bb1af9dd40", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/01dd1b698cece6154e316a2d9e1818bb1af9dd40", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-10T19:27:26Z", "type": "commit"}, {"oid": "02241543afeffdd0e15be9f87be614f7a9281551", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02241543afeffdd0e15be9f87be614f7a9281551", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-11T02:33:48Z", "type": "commit"}, {"oid": "085065162d01e2c2892d47e462291313355399d8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/085065162d01e2c2892d47e462291313355399d8", "message": "Fix error value toString()", "committedDate": "2020-09-11T04:17:10Z", "type": "commit"}, {"oid": "f1a77c22fd2c545af6bd54bf1203f6b12b8fb0ef", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f1a77c22fd2c545af6bd54bf1203f6b12b8fb0ef", "message": "Merge pull request #8 from lasinicl/toString-impl\n\nFix error value toString()", "committedDate": "2020-09-11T05:51:29Z", "type": "commit"}, {"oid": "135ba8ed1f97ae8005a3265f787b8d476fef97ee", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/135ba8ed1f97ae8005a3265f787b8d476fef97ee", "message": "Fix tests to sync toString change", "committedDate": "2020-09-11T06:06:43Z", "type": "commit"}, {"oid": "add5276f8a90e74f6635cea8fdb5b81069724f19", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/add5276f8a90e74f6635cea8fdb5b81069724f19", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into tostring-impl", "committedDate": "2020-09-11T06:07:18Z", "type": "commit"}, {"oid": "06eb7f4da7522492e6d8656404727851ce1f0b4b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/06eb7f4da7522492e6d8656404727851ce1f0b4b", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-11T06:26:15Z", "type": "commit"}, {"oid": "842c44f8d295ad0f3da8397d26e3c4c010b25bdb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/842c44f8d295ad0f3da8397d26e3c4c010b25bdb", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into master-new", "committedDate": "2020-09-11T06:26:34Z", "type": "commit"}, {"oid": "b2cee6e434602e74639dad9e8e7ab03f81cf8c25", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b2cee6e434602e74639dad9e8e7ab03f81cf8c25", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-11T06:41:32Z", "type": "commit"}, {"oid": "ae5f37f90d2917e65c2700148591fbb023f89b0c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ae5f37f90d2917e65c2700148591fbb023f89b0c", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-11T06:46:11Z", "type": "commit"}, {"oid": "9aa0a5d185eabcc88dfd0fb886e04860a6ffac47", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9aa0a5d185eabcc88dfd0fb886e04860a6ffac47", "message": "Fix mime tests to sync toString change", "committedDate": "2020-09-11T07:34:43Z", "type": "commit"}, {"oid": "d545bba8e6c561ca00bfb33b38dd3c71145627fd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d545bba8e6c561ca00bfb33b38dd3c71145627fd", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-11T07:50:56Z", "type": "commit"}, {"oid": "64e284b5ff6389d9316fc6dc99c424ab35168415", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/64e284b5ff6389d9316fc6dc99c424ab35168415", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into master-new", "committedDate": "2020-09-11T07:51:31Z", "type": "commit"}, {"oid": "dc554b59f5140735a629c60213533b494aa941eb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dc554b59f5140735a629c60213533b494aa941eb", "message": "Add additional xml tags to informal toString conversion", "committedDate": "2020-09-11T08:06:27Z", "type": "commit"}, {"oid": "8ff59bfec07e7d392504dd0b6be6c2a8b6251683", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8ff59bfec07e7d392504dd0b6be6c2a8b6251683", "message": "Fix interop package after toString change", "committedDate": "2020-09-11T08:09:45Z", "type": "commit"}, {"oid": "587ce9ac7c7ec55edaed4826c87ba36e433741ba", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/587ce9ac7c7ec55edaed4826c87ba36e433741ba", "message": "Merge branch 'tostring-impl' of github.com:mohanvive/ballerina-lang into tostring-impl", "committedDate": "2020-09-11T08:10:01Z", "type": "commit"}, {"oid": "e5206159ec75fc8111366fd20a71411cb13ef2eb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e5206159ec75fc8111366fd20a71411cb13ef2eb", "message": "Add additional changes for toString functionality", "committedDate": "2020-09-11T08:11:23Z", "type": "commit"}, {"oid": "a9809f9cb760789a60d2b05b55984d9d5470d94a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a9809f9cb760789a60d2b05b55984d9d5470d94a", "message": "Fix langlib tests", "committedDate": "2020-09-11T08:23:27Z", "type": "commit"}, {"oid": "98ed9944f1df8f6df270c2fdae4010783b5e0218", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/98ed9944f1df8f6df270c2fdae4010783b5e0218", "message": "Merge branch 'tostring-impl' of github.com:mohanvive/ballerina-lang into tostring-impl", "committedDate": "2020-09-11T08:29:16Z", "type": "commit"}, {"oid": "013700c86c6f71e12d8a6a90d52135c345d9c7b2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/013700c86c6f71e12d8a6a90d52135c345d9c7b2", "message": "Fix checkstyle issues", "committedDate": "2020-09-11T08:34:32Z", "type": "commit"}, {"oid": "436ed078e3ba72561fed525871b17ee286918553", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/436ed078e3ba72561fed525871b17ee286918553", "message": "Merge branch 'tostring-impl' of github.com:mohanvive/ballerina-lang into tostring-impl", "committedDate": "2020-09-11T08:35:19Z", "type": "commit"}, {"oid": "7e386f164071f053d3609478b082045600d09b55", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7e386f164071f053d3609478b082045600d09b55", "message": "Fix interop test", "committedDate": "2020-09-11T08:46:54Z", "type": "commit"}, {"oid": "625d7f015afcada539f4900a3ccd141b4f039ef7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/625d7f015afcada539f4900a3ccd141b4f039ef7", "message": "Merge pull request #9 from grainier/tostring-impl\n\nFix interop package after toString change", "committedDate": "2020-09-11T08:49:15Z", "type": "commit"}, {"oid": "5d3cd66f8f80edee38f172fd2571b4356904f1a1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5d3cd66f8f80edee38f172fd2571b4356904f1a1", "message": "Fix checkstyle issues", "committedDate": "2020-09-11T08:56:55Z", "type": "commit"}, {"oid": "d455657b0f6f19ab347f780af3269efa30d109a1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d455657b0f6f19ab347f780af3269efa30d109a1", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into master-new\n\n# Conflicts:\n#\ttests/jballerina-unit-test/src/test/resources/test-src/javainterop/basic/object_test.bal", "committedDate": "2020-09-11T09:28:51Z", "type": "commit"}, {"oid": "b36ed242ddbe39d5d571825e914803b95714d93f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b36ed242ddbe39d5d571825e914803b95714d93f", "message": "Merge pull request #10 from lasinicl/toString-impl\n\nFix langlib tests", "committedDate": "2020-09-11T09:33:30Z", "type": "commit"}, {"oid": "ea442a3c50c6752249f3c729e1c396efeece6283", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea442a3c50c6752249f3c729e1c396efeece6283", "message": "Add toString for cycles", "committedDate": "2020-09-11T09:57:00Z", "type": "commit"}, {"oid": "b6b2b17273e590c0018ce38671f7505c760aa894", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b6b2b17273e590c0018ce38671f7505c760aa894", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into toString-cycles\n\n# Conflicts:\n#\tbvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java", "committedDate": "2020-09-11T10:11:48Z", "type": "commit"}, {"oid": "4a8f3a320b2313d4e2f06ec1772e0517c7571b40", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4a8f3a320b2313d4e2f06ec1772e0517c7571b40", "message": "Merge pull request #11 from gimantha/toString-cycles\n\nAdd toString() for cycles", "committedDate": "2020-09-11T10:33:16Z", "type": "commit"}, {"oid": "1a0051c1736670481138494ceb013651f3608548", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1a0051c1736670481138494ceb013651f3608548", "message": "Fix links", "committedDate": "2020-09-11T10:34:03Z", "type": "commit"}, {"oid": "5d2920e16b1c32f48cd8b4163f6e6ac1f0b0148d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5d2920e16b1c32f48cd8b4163f6e6ac1f0b0148d", "message": "Merge pull request #12 from gimantha/toString-cycles\n\nFix links of tuples and xml items", "committedDate": "2020-09-11T10:41:25Z", "type": "commit"}, {"oid": "79a5459d88cd099652cde3a1b1499407b0627a59", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79a5459d88cd099652cde3a1b1499407b0627a59", "message": "Fix checkstyle issues", "committedDate": "2020-09-11T11:23:06Z", "type": "commit"}, {"oid": "b3bb50b919bac60e267dda878b7ecc91e82f4446", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b3bb50b919bac60e267dda878b7ecc91e82f4446", "message": "Merge pull request #13 from gimantha/toString-cycles\n\nFix checkstyle issues", "committedDate": "2020-09-11T11:29:22Z", "type": "commit"}, {"oid": "eb77f5eb64051628e70cc5318ba1cb07f000526e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eb77f5eb64051628e70cc5318ba1cb07f000526e", "message": "Fix Java doc issues", "committedDate": "2020-09-11T11:48:17Z", "type": "commit"}, {"oid": "96d920f636ec066693e6657888c32f54d7274f78", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/96d920f636ec066693e6657888c32f54d7274f78", "message": "Merge pull request #14 from gimantha/toString-cycles\n\nFix java doc issues", "committedDate": "2020-09-11T11:51:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487011340", "bodyText": "wondering whether we can reuse and share between error and mapvalueImpl stringValue methods @mohanvive wdyt?", "author": "gimantha", "createdAt": "2020-09-11T12:28:45Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java", "diffHunk": "@@ -73,21 +78,54 @@ public ErrorValue(BType type, BString message, ErrorValue cause, Object details)\n     }\n \n     @Override\n-    public String stringValue() {\n+    public String stringValue(BLink parent) {\n+        CycleUtils.Node linkParent = new CycleUtils.Node(this, parent);\n         if (isEmptyDetail()) {\n-            return \"error \" + message.getValue();\n+            return \"error\" + getModuleName() + \"(\" + ((StringValue) message).informalStringValue(linkParent) + \")\";\n         }\n-        return \"error \" + message.getValue() + \" \" + getCauseToString() +\n-                org.ballerinalang.jvm.values.utils.StringUtils.getStringValue(details);\n+        return \"error\" + getModuleName() + \"(\" + ((StringValue) message).informalStringValue(linkParent) +\n+                getCauseToString(linkParent) + getDetailsToString(linkParent) + \")\";\n     }\n \n-    private String getCauseToString() {\n+    private String getCauseToString(BLink parent) {\n         if (cause != null) {\n-            return org.ballerinalang.jvm.values.utils.StringUtils.getStringValue(cause) + \" \";\n+            return \", \" + cause.informalStringValue(parent);\n         }\n         return \"\";\n     }\n \n+    private String getDetailsToString(BLink parent) {\n+        StringJoiner sj = new StringJoiner(\", \");\n+        for (Object key : ((MapValue) details).getKeys()) {\n+            Object value = ((MapValue) details).get(key);\n+            if (value == null) {\n+                sj.add(key + \"=null\");\n+            } else {\n+                BType type = TypeChecker.getType(value);", "originalCommit": "96d920f636ec066693e6657888c32f54d7274f78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTc3OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487011778", "bodyText": "from line 104 to 120", "author": "gimantha", "createdAt": "2020-09-11T12:29:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMzgyNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487013826", "bodyText": "BTW, there should be space between equal and null right? Isn't it ?", "author": "mohanvive", "createdAt": "2020-09-11T12:33:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxNDA4Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487014083", "bodyText": "I think, there is a delimeter difference between them.", "author": "mohanvive", "createdAt": "2020-09-11T12:34:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxNzY1NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487017654", "bodyText": "Should there be a space specifically for null?\nIn James's example here ballerina-platform/ballerina-spec#499 (comment) , there's no space between the key and the value (accountID=123 and detail=\"Failed to get account balance\")", "author": "lasinicl", "createdAt": "2020-09-11T12:41:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxODAwNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487018006", "bodyText": "Ah, Ok. Cool.", "author": "mohanvive", "createdAt": "2020-09-11T12:41:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyMTEzNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487021134", "bodyText": "Yes. There's a difference. map uses {\"key1\": \"value1\", \"key1\": \"value2\"} format. here it should be key1=\"value1\", key2=\"value2\"", "author": "lasinicl", "createdAt": "2020-09-11T12:47:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTM0MA=="}], "type": "inlineReview", "revised_code": {"commit": "514c17949a14bad64cdf505a310b9fd4b0ee13ef", "chunk": "diff --git a/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java b/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java\nindex 68993e69f5a..0fe67cbf304 100644\n--- a/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java\n+++ b/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java\n\n@@ -78,23 +76,22 @@ public class ErrorValue extends BError implements RefValue {\n     }\n \n     @Override\n-    public String stringValue(BLink parent) {\n-        CycleUtils.Node linkParent = new CycleUtils.Node(this, parent);\n+    public String stringValue() {\n         if (isEmptyDetail()) {\n-            return \"error\" + getModuleName() + \"(\" + ((StringValue) message).informalStringValue(linkParent) + \")\";\n+            return \"error\" + getModuleName() + \"(\" + ((StringValue) message).informalStringValue() + \")\";\n         }\n-        return \"error\" + getModuleName() + \"(\" + ((StringValue) message).informalStringValue(linkParent) +\n-                getCauseToString(linkParent) + getDetailsToString(linkParent) + \")\";\n+        return \"error\" + getModuleName() + \"(\" + ((StringValue) message).informalStringValue() + getCauseToString()\n+                + getDetailsToString() + \")\";\n     }\n \n-    private String getCauseToString(BLink parent) {\n+    private String getCauseToString() {\n         if (cause != null) {\n-            return \", \" + cause.informalStringValue(parent);\n+            return \", \" + ((BValue) cause).informalStringValue();\n         }\n         return \"\";\n     }\n \n-    private String getDetailsToString(BLink parent) {\n+    private String getDetailsToString() {\n         StringJoiner sj = new StringJoiner(\", \");\n         for (Object key : ((MapValue) details).getKeys()) {\n             Object value = ((MapValue) details).get(key);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMjEyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487012121", "bodyText": "This is the reusable part for detail of errorvalue @mohanvive", "author": "gimantha", "createdAt": "2020-09-11T12:30:16Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MapValueImpl.java", "diffHunk": "@@ -408,14 +411,34 @@ public Object frozenCopy(Map<Object, Object> refs) {\n     }\n \n     @Override\n-    public String stringValue() {\n-        StringJoiner sj = new StringJoiner(\" \");\n+    public String stringValue(BLink parent) {\n+        StringJoiner sj = new StringJoiner(\", \");\n         for (Map.Entry<K, V> kvEntry : this.entrySet()) {\n             K key = kvEntry.getKey();\n             V value = kvEntry.getValue();\n-            sj.add(key + \"=\" + StringUtils.getStringValue(value));\n+            if (value == null) {\n+                sj.add(\"\\\"\" + key + \"\\\": null\");\n+            } else {\n+                BType type = TypeChecker.getType(value);", "originalCommit": "96d920f636ec066693e6657888c32f54d7274f78", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "514c17949a14bad64cdf505a310b9fd4b0ee13ef", "chunk": "diff --git a/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MapValueImpl.java b/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MapValueImpl.java\nindex 0bab40aa773..b5b7dc3a182 100644\n--- a/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MapValueImpl.java\n+++ b/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MapValueImpl.java\n\n@@ -411,16 +409,15 @@ public class MapValueImpl<K, V> extends LinkedHashMap<K, V> implements RefValue,\n     }\n \n     @Override\n-    public String stringValue(BLink parent) {\n+    public String stringValue() {\n         StringJoiner sj = new StringJoiner(\", \");\n         for (Map.Entry<K, V> kvEntry : this.entrySet()) {\n             K key = kvEntry.getKey();\n             V value = kvEntry.getValue();\n             if (value == null) {\n-                sj.add(\"\\\"\" + key + \"\\\": null\");\n+                sj.add(\"\\\"\" + key + \"\\\":null\");\n             } else {\n                 BType type = TypeChecker.getType(value);\n-                CycleUtils.Node mapParent = new CycleUtils.Node(this, parent);\n                 switch (type.getTag()) {\n                     case TypeTags.STRING_TAG:\n                     case TypeTags.XML_TAG:\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxNDU3OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487014578", "bodyText": "is it possible to move XML toString part to the SrtingUtil as well? this is same as in mapvalueimpl and detail in errorvalue", "author": "gimantha", "createdAt": "2020-09-11T12:35:21Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ArrayValueImpl.java", "diffHunk": "@@ -576,16 +579,36 @@ public String stringValue() {\n             case TypeTags.STRING_TAG:\n             case TypeTags.CHAR_STRING_TAG:\n                 for (int i = 0; i < size; i++) {\n-                    sj.add(bStringValues[i].getValue());\n+                    sj.add(((BValue) (bStringValues[i])).informalStringValue(parent));\n                 }\n                 break;\n             default:\n                 for (int i = 0; i < size; i++) {\n-                    sj.add(StringUtils.getStringValue(refValues[i]));\n+                    if (refValues[i] == null) {\n+                        sj.add(\"null\");\n+                    } else {\n+                        BType type = TypeChecker.getType(refValues[i]);\n+                        switch (type.getTag()) {\n+                            case TypeTags.STRING_TAG:", "originalCommit": "96d920f636ec066693e6657888c32f54d7274f78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxNTUzNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25738#discussion_r487015534", "bodyText": "I don't think, it is possible since toString value of a string and string in a array is different.", "author": "mohanvive", "createdAt": "2020-09-11T12:37:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxNDU3OA=="}], "type": "inlineReview", "revised_code": {"commit": "514c17949a14bad64cdf505a310b9fd4b0ee13ef", "chunk": "diff --git a/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ArrayValueImpl.java b/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ArrayValueImpl.java\nindex 5485e16d14b..81ada11d45c 100644\n--- a/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ArrayValueImpl.java\n+++ b/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ArrayValueImpl.java\n\n@@ -579,7 +577,7 @@ public class ArrayValueImpl extends AbstractArrayValue {\n             case TypeTags.STRING_TAG:\n             case TypeTags.CHAR_STRING_TAG:\n                 for (int i = 0; i < size; i++) {\n-                    sj.add(((BValue) (bStringValues[i])).informalStringValue(parent));\n+                    sj.add(((BValue) (bStringValues[i])).informalStringValue());\n                 }\n                 break;\n             default:\n"}}, {"oid": "514c17949a14bad64cdf505a310b9fd4b0ee13ef", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/514c17949a14bad64cdf505a310b9fd4b0ee13ef", "message": "Fix spacing issue in Array, Map and Table", "committedDate": "2020-09-11T13:36:47Z", "type": "commit"}, {"oid": "19c6d752e7c20937546431c914c0a2239f0947e0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/19c6d752e7c20937546431c914c0a2239f0947e0", "message": "Merge branch 'tostring-impl' of https://github.com/mohanvive/ballerina-lang into master-new\n\n# Conflicts:\n#\tbvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ArrayValueImpl.java\n#\tbvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/TableValueImpl.java", "committedDate": "2020-09-11T13:39:25Z", "type": "commit"}, {"oid": "4a9f135cbda199ef33812689c273b1c93cf76558", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4a9f135cbda199ef33812689c273b1c93cf76558", "message": "Fix testcases according to the changes in spacing for array and table", "committedDate": "2020-09-11T14:18:46Z", "type": "commit"}, {"oid": "0dffd4d57b4b02f85fc9e021d4a21d6c8fad2d08", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0dffd4d57b4b02f85fc9e021d4a21d6c8fad2d08", "message": "Fix tests", "committedDate": "2020-09-11T14:23:58Z", "type": "commit"}, {"oid": "d535d3aca55e7a938016680743e792aefd2e6981", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d535d3aca55e7a938016680743e792aefd2e6981", "message": "Merge pull request #15 from gimantha/toString-cycles\n\nFix tests", "committedDate": "2020-09-11T14:25:30Z", "type": "commit"}, {"oid": "2a583d0f96fb469ac81e62abe11e2c9b33576d5e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a583d0f96fb469ac81e62abe11e2c9b33576d5e", "message": "Fix IO print test assertion", "committedDate": "2020-09-11T14:52:23Z", "type": "commit"}]}