{"pr_number": 20965, "pr_title": "Improve the error message for 'ballerina pull' command", "pr_createdAt": "2020-02-10T16:46:45Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965", "timeline": [{"oid": "fe60e62ffdd7e92f8e5a89dc5bd53c3459516a1e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fe60e62ffdd7e92f8e5a89dc5bd53c3459516a1e", "message": "Modify the error message for 'ballerina pull' command", "committedDate": "2020-02-10T16:27:25Z", "type": "commit"}, {"oid": "02a392c11f05a1f141d9e0ecff90ab02ccb70ada", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02a392c11f05a1f141d9e0ecff90ab02ccb70ada", "message": "Exit with non-zero status code for error", "committedDate": "2020-02-11T08:31:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUxNTc0OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r380515748", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                \"Pull command requires the names of the organization and module.\",\n          \n          \n            \n                                \"pull command requires the names of the organization and module.\",\n          \n      \n    \n    \n  \n\nAren't we using simple letters only for warnings?", "author": "pramodya1994", "createdAt": "2020-02-18T08:19:48Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +81,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n+        String[] module = resourceName.split(\"/\");\n+        if (module.length == 2) {\n+            orgName = module[0];\n+            packageName = module[1];\n             if (orgName.equals(\"ballerina\")) {\n                 throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n                                                                     + \" are included in the runtime.\");\n             }\n         } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+            CommandUtil.printError(outStream,\n+                    \"Pull command requires the names of the organization and module.\",", "originalCommit": "02a392c11f05a1f141d9e0ecff90ab02ccb70ada", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "784fbaeb899f3bec989abc5166bedcc244565fb6", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex 30d3eca3cd1..e374ab418bc 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -96,7 +96,7 @@ public class PullCommand implements BLauncherCmd {\n             }\n         } else {\n             CommandUtil.printError(outStream,\n-                    \"Pull command requires the names of the organization and module.\",\n+                    \"pull command requires the names of the organization and module.\",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n"}}, {"oid": "784fbaeb899f3bec989abc5166bedcc244565fb6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/784fbaeb899f3bec989abc5166bedcc244565fb6", "message": "Modify error message", "committedDate": "2020-02-18T10:06:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDM5MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381104391", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return (Pattern.matches(getPullCommandRegex(), str));\n          \n          \n            \n                    return Pattern.matches(getPullCommandRegex(), str);", "author": "warunalakshitha", "createdAt": "2020-02-19T06:51:07Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -147,4 +155,12 @@ public void printUsage(StringBuilder out) {\n     @Override\n     public void setParentCmdParser(CommandLine parentCmdParser) {\n     }\n+\n+    private String getPullCommandRegex() {\n+        return MODULE_NAME_REGEX;\n+    }\n+\n+    public boolean validateModuleName(String str) {\n+        return (Pattern.matches(getPullCommandRegex(), str));", "originalCommit": "7222adea8976c8fbd9b04704b30bc9d19fce5508", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4d33695f42103c406a794a334522cb6f58d15246", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex 0266d57d7a7..fcd0dbe1d4d 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -161,6 +162,6 @@ public class PullCommand implements BLauncherCmd {\n     }\n \n     public boolean validateModuleName(String str) {\n-        return (Pattern.matches(getPullCommandRegex(), str));\n+        return Pattern.matches(getPullCommandRegex(), str);\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDg1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381104858", "bodyText": "Shall we use one spilt function and use return array to get module name and version? we can remove contains and check split array", "author": "warunalakshitha", "createdAt": "2020-02-19T06:52:36Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] module = resourceName.split(\"/\");\n+        orgName = module[0];\n+        packageName = module[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n+                    + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        int packageNameIndex = resourceName.indexOf(\":\");\n-        if (packageNameIndex != -1) { // version is provided\n-            moduleName = resourceName.substring(orgNameIndex + 1, packageNameIndex);\n-            version = resourceName.substring(packageNameIndex + 1, resourceName.length());\n+        if (packageName.contains(\":\")) { // version is provided", "originalCommit": "7222adea8976c8fbd9b04704b30bc9d19fce5508", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4d33695f42103c406a794a334522cb6f58d15246", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex 0266d57d7a7..fcd0dbe1d4d 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -90,25 +90,26 @@ public class PullCommand implements BLauncherCmd {\n         // Get org-name\n         if (!validateModuleName(resourceName)) {\n             CommandUtil.printError(outStream,\n-                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"invalid module name. Provide the module-name with the org-name \",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n             return;\n         }\n \n-        String[] module = resourceName.split(\"/\");\n-        orgName = module[0];\n-        packageName = module[1];\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n         if (orgName.equals(\"ballerina\")) {\n-            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n                     + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        if (packageName.contains(\":\")) { // version is provided\n-            moduleName = packageName.split(\":\")[0];\n-            version = packageName.split(\":\")[1];\n+        String[] packageInfo = packageName.split(\":\");\n+        if (packageName.length() == 2) { // version is provided\n+            moduleName = packageInfo[0];\n+            version = packageInfo[1];\n         } else {\n             moduleName = packageName;\n             version = Names.EMPTY.getValue();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTEwNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381105106", "bodyText": "space after org name", "author": "warunalakshitha", "createdAt": "2020-02-19T06:53:23Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name\",", "originalCommit": "7222adea8976c8fbd9b04704b30bc9d19fce5508", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4d33695f42103c406a794a334522cb6f58d15246", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex 0266d57d7a7..fcd0dbe1d4d 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -90,25 +90,26 @@ public class PullCommand implements BLauncherCmd {\n         // Get org-name\n         if (!validateModuleName(resourceName)) {\n             CommandUtil.printError(outStream,\n-                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"invalid module name. Provide the module-name with the org-name \",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n             return;\n         }\n \n-        String[] module = resourceName.split(\"/\");\n-        orgName = module[0];\n-        packageName = module[1];\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n         if (orgName.equals(\"ballerina\")) {\n-            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n                     + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        if (packageName.contains(\":\")) { // version is provided\n-            moduleName = packageName.split(\":\")[0];\n-            version = packageName.split(\":\")[1];\n+        String[] packageInfo = packageName.split(\":\");\n+        if (packageName.length() == 2) { // version is provided\n+            moduleName = packageInfo[0];\n+            version = packageInfo[1];\n         } else {\n             moduleName = packageName;\n             version = Names.EMPTY.getValue();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTM1OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381105359", "bodyText": "start with simple letter and shall we remove starting space.", "author": "warunalakshitha", "createdAt": "2020-02-19T06:54:17Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] module = resourceName.split(\"/\");\n+        orgName = module[0];\n+        packageName = module[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"", "originalCommit": "7222adea8976c8fbd9b04704b30bc9d19fce5508", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTExNjE4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381116189", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n          \n          \n            \n                        throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"", "author": "warunalakshitha", "createdAt": "2020-02-19T07:29:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTM1OQ=="}], "type": "inlineReview", "revised_code": {"commit": "4d33695f42103c406a794a334522cb6f58d15246", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex 0266d57d7a7..fcd0dbe1d4d 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -90,25 +90,26 @@ public class PullCommand implements BLauncherCmd {\n         // Get org-name\n         if (!validateModuleName(resourceName)) {\n             CommandUtil.printError(outStream,\n-                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"invalid module name. Provide the module-name with the org-name \",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n             return;\n         }\n \n-        String[] module = resourceName.split(\"/\");\n-        orgName = module[0];\n-        packageName = module[1];\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n         if (orgName.equals(\"ballerina\")) {\n-            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n                     + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        if (packageName.contains(\":\")) { // version is provided\n-            moduleName = packageName.split(\":\")[0];\n-            version = packageName.split(\":\")[1];\n+        String[] packageInfo = packageName.split(\":\");\n+        if (packageName.length() == 2) { // version is provided\n+            moduleName = packageInfo[0];\n+            version = packageInfo[1];\n         } else {\n             moduleName = packageName;\n             version = Names.EMPTY.getValue();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTQ3NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381105474", "bodyText": "Shall we add a comment on describing regex rules.", "author": "warunalakshitha", "createdAt": "2020-02-19T06:54:47Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java", "diffHunk": "@@ -37,4 +37,9 @@\n     static final String SEARCH_COMMAND = \"search\";\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n+\n+    static final String MODULE_NAME_REGEX = \"[^0-9_][_\\\\w]+/[^0-9_][_\\\\.\\\\w]+|\" +", "originalCommit": "7222adea8976c8fbd9b04704b30bc9d19fce5508", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4d33695f42103c406a794a334522cb6f58d15246", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java\nindex 6236f59a861..237d1525a27 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java\n\n@@ -38,6 +38,8 @@ public class Constants {\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n \n+    //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>\n+    //version format : 1, 1.*, 1.*.*\n     static final String MODULE_NAME_REGEX = \"[^0-9_][_\\\\w]+/[^0-9_][_\\\\.\\\\w]+|\" +\n             \"[^0-9_][_\\\\w]+/[^0-9_][_\\\\.\\\\w]+:[\\\\*\\\\d]+|\" +\n             \"[^0-9_][_\\\\w]+/[^0-9_][_\\\\.\\\\w]+:[\\\\*\\\\d]+\\\\.[\\\\*\\\\d]+|\" +\n"}}, {"oid": "ed66194747b4eb7785d3a0df5cb05d56d765a22b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ed66194747b4eb7785d3a0df5cb05d56d765a22b", "message": "Validate the module name with regex", "committedDate": "2020-02-19T08:12:13Z", "type": "commit"}, {"oid": "4d33695f42103c406a794a334522cb6f58d15246", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4d33695f42103c406a794a334522cb6f58d15246", "message": "Fix review comments", "committedDate": "2020-02-19T08:12:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMDk4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381130989", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Get org-name\n          \n          \n            \n                    // Get the name of the organization.", "author": "praneesha", "createdAt": "2020-02-19T08:08:57Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name", "originalCommit": "eb958be5729e27e002425295624009e3d99fff83", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ed66194747b4eb7785d3a0df5cb05d56d765a22b", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex fcd0dbe1d4d..0266d57d7a7 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -90,26 +90,25 @@ public class PullCommand implements BLauncherCmd {\n         // Get org-name\n         if (!validateModuleName(resourceName)) {\n             CommandUtil.printError(outStream,\n-                    \"invalid module name. Provide the module-name with the org-name \",\n+                    \"invalid module name. Provide the module-name with the org-name\",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n             return;\n         }\n \n-        String[] moduleInfo = resourceName.split(\"/\");\n-        orgName = moduleInfo[0];\n-        packageName = moduleInfo[1];\n+        String[] module = resourceName.split(\"/\");\n+        orgName = module[0];\n+        packageName = module[1];\n         if (orgName.equals(\"ballerina\")) {\n-            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n+            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n                     + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        String[] packageInfo = packageName.split(\":\");\n-        if (packageName.length() == 2) { // version is provided\n-            moduleName = packageInfo[0];\n-            version = packageInfo[1];\n+        if (packageName.contains(\":\")) { // version is provided\n+            moduleName = packageName.split(\":\")[0];\n+            version = packageName.split(\":\")[1];\n         } else {\n             moduleName = packageName;\n             version = Names.EMPTY.getValue();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMTIwMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381131201", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Get module name\n          \n          \n            \n                    // Get the name of the module.", "author": "praneesha", "createdAt": "2020-02-19T08:09:30Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name \",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n+                    + \" are included in the runtime.\");\n         }\n \n         // Get module name", "originalCommit": "eb958be5729e27e002425295624009e3d99fff83", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ed66194747b4eb7785d3a0df5cb05d56d765a22b", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex fcd0dbe1d4d..0266d57d7a7 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -90,26 +90,25 @@ public class PullCommand implements BLauncherCmd {\n         // Get org-name\n         if (!validateModuleName(resourceName)) {\n             CommandUtil.printError(outStream,\n-                    \"invalid module name. Provide the module-name with the org-name \",\n+                    \"invalid module name. Provide the module-name with the org-name\",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n             return;\n         }\n \n-        String[] moduleInfo = resourceName.split(\"/\");\n-        orgName = moduleInfo[0];\n-        packageName = moduleInfo[1];\n+        String[] module = resourceName.split(\"/\");\n+        orgName = module[0];\n+        packageName = module[1];\n         if (orgName.equals(\"ballerina\")) {\n-            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n+            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n                     + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        String[] packageInfo = packageName.split(\":\");\n-        if (packageName.length() == 2) { // version is provided\n-            moduleName = packageInfo[0];\n-            version = packageInfo[1];\n+        if (packageName.contains(\":\")) { // version is provided\n+            moduleName = packageName.split(\":\")[0];\n+            version = packageName.split(\":\")[1];\n         } else {\n             moduleName = packageName;\n             version = Names.EMPTY.getValue();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMjQ4NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381132484", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>\n          \n          \n            \n                //Module name format: <org-name>/<module-name> | <org-name>/<module-name>:<version>", "author": "praneesha", "createdAt": "2020-02-19T08:12:39Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java", "diffHunk": "@@ -37,4 +37,11 @@\n     static final String SEARCH_COMMAND = \"search\";\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n+\n+    //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>", "originalCommit": "a83b54a671431b87a44e6efc98344f72ba798d00", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMjU3OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381132579", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //version format : 1, 1.*, 1.*.*\n          \n          \n            \n                //Module version format: 1, 1.*, 1.*.*", "author": "praneesha", "createdAt": "2020-02-19T08:12:52Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java", "diffHunk": "@@ -37,4 +37,11 @@\n     static final String SEARCH_COMMAND = \"search\";\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n+\n+    //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>\n+    //version format : 1, 1.*, 1.*.*", "originalCommit": "a83b54a671431b87a44e6efc98344f72ba798d00", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMjgxNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381132816", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                \"invalid module name. Provide the module-name with the org-name \",\n          \n          \n            \n                                \"invalid module name. Provide the module name with the org name. \",", "author": "praneesha", "createdAt": "2020-02-19T08:13:26Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name \",", "originalCommit": "a83b54a671431b87a44e6efc98344f72ba798d00", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ea9e431228997fba446c0009395c7ae68d895a33", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex fcd0dbe1d4d..093645aa63e 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -100,9 +100,9 @@ public class PullCommand implements BLauncherCmd {\n         String[] moduleInfo = resourceName.split(\"/\");\n         orgName = moduleInfo[0];\n         packageName = moduleInfo[1];\n-        if (orgName.equals(\"ballerina\")) {\n-            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n-                    + \" are included in the runtime.\");\n+        if (orgName.equals(\"ballerina\") || orgName.equals(\"ballerinax\")) {\n+            throw LauncherUtils.createLauncherException(\"`ballerina` and `ballerinax` are reserved organization\" +\n+                    \" names used by ballerina\");\n         }\n \n         // Get module name\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1NzM5Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381157396", "bodyText": "if (orgName.equals(\"ballerina\") || orgName.equals(\"ballerinax\") ) {\nthrow LauncherUtils.createLauncherException(\"`ballerina' and 'ballerinax' are reserved \" +\n\"organization names used by Ballerina\");\n}", "author": "warunalakshitha", "createdAt": "2020-02-19T09:06:05Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n-        // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        // Get the name of the organization.\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module name with the org name. \",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n+                    + \" are included in the runtime.\");\n         }", "originalCommit": "c01bf39022a848c8c55048f264aa4a83dc29d4d2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ea9e431228997fba446c0009395c7ae68d895a33", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex f7361a2b908..093645aa63e 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -87,10 +87,10 @@ public class PullCommand implements BLauncherCmd {\n         String moduleName;\n         String version;\n \n-        // Get the name of the organization.\n+        // Get org-name\n         if (!validateModuleName(resourceName)) {\n             CommandUtil.printError(outStream,\n-                    \"invalid module name. Provide the module name with the org name. \",\n+                    \"invalid module name. Provide the module-name with the org-name \",\n                     \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n                     false);\n             Runtime.getRuntime().exit(1);\n"}}, {"oid": "ea9e431228997fba446c0009395c7ae68d895a33", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea9e431228997fba446c0009395c7ae68d895a33", "message": "Check if org name is reserved one when pulling", "committedDate": "2020-02-19T09:31:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgxNDU4Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381814586", "bodyText": "This should be removed we should not special case ballerina org", "author": "hevayo", "createdAt": "2020-02-20T07:01:19Z", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name \",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n+        if (orgName.equals(\"ballerina\") || orgName.equals(\"ballerinax\")) {", "originalCommit": "ea9e431228997fba446c0009395c7ae68d895a33", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgxNzc5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381817792", "bodyText": "Removed.", "author": "suganyasuven", "createdAt": "2020-02-20T07:11:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgxNDU4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "5fad2a213aae7e7fd27586a1ac3c853f5fb83219", "chunk": "diff --git a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\nindex 093645aa63e..8525eb0ddc9 100644\n--- a/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n+++ b/cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java\n\n@@ -100,10 +100,6 @@ public class PullCommand implements BLauncherCmd {\n         String[] moduleInfo = resourceName.split(\"/\");\n         orgName = moduleInfo[0];\n         packageName = moduleInfo[1];\n-        if (orgName.equals(\"ballerina\") || orgName.equals(\"ballerinax\")) {\n-            throw LauncherUtils.createLauncherException(\"`ballerina` and `ballerinax` are reserved organization\" +\n-                    \" names used by ballerina\");\n-        }\n \n         // Get module name\n         String[] packageInfo = packageName.split(\":\");\n"}}, {"oid": "5fad2a213aae7e7fd27586a1ac3c853f5fb83219", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5fad2a213aae7e7fd27586a1ac3c853f5fb83219", "message": "Remove the condition added to check if org name is reserved one", "committedDate": "2020-02-20T07:08:54Z", "type": "commit"}]}