{"pr_number": 23596, "pr_title": "Fix EOF Bug", "pr_createdAt": "2020-05-29T06:09:40Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23596", "timeline": [{"oid": "a269c994109b54b4aa09019c80d738b8597ab514", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a269c994109b54b4aa09019c80d738b8597ab514", "message": "Fix EOF Bug", "committedDate": "2020-05-29T05:44:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4MjkxNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23596#discussion_r432282915", "bodyText": "Shall we do this null check at the beginning and break the loop?", "author": "SupunS", "createdAt": "2020-05-29T06:36:30Z", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -503,7 +503,7 @@ private STNode parseCompUnit() {\n         boolean processImports = true;\n         while (token.kind != SyntaxKind.EOF_TOKEN) {\n             STNode decl = parseTopLevelNode(token.kind);\n-            if (decl.kind == SyntaxKind.IMPORT_DECLARATION) {\n+            if (decl != null && decl.kind == SyntaxKind.IMPORT_DECLARATION) {", "originalCommit": "a269c994109b54b4aa09019c80d738b8597ab514", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM4MDk2MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23596#discussion_r432380960", "bodyText": "sure", "author": "m36dot", "createdAt": "2020-05-29T09:56:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI4MjkxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "0b0bba0ee5f216f95bf12cdae315c7d98f23d925", "chunk": "diff --git a/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java b/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java\nindex 960ec34c83a..15887dd3a01 100644\n--- a/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java\n+++ b/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java\n\n@@ -503,7 +503,10 @@ public class BallerinaParser extends AbstractParser {\n         boolean processImports = true;\n         while (token.kind != SyntaxKind.EOF_TOKEN) {\n             STNode decl = parseTopLevelNode(token.kind);\n-            if (decl != null && decl.kind == SyntaxKind.IMPORT_DECLARATION) {\n+            if (decl == null) {\n+                break;\n+            }\n+            if (decl.kind == SyntaxKind.IMPORT_DECLARATION) {\n                 if (processImports) {\n                     importDecls.add(decl);\n                 } else {\n"}}, {"oid": "0b0bba0ee5f216f95bf12cdae315c7d98f23d925", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0b0bba0ee5f216f95bf12cdae315c7d98f23d925", "message": "Code Refactor", "committedDate": "2020-05-29T10:05:38Z", "type": "commit"}, {"oid": "b985fe22c3861ee6483a97947e9aa84a1010139b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b985fe22c3861ee6483a97947e9aa84a1010139b", "message": "Add test case for EOF error", "committedDate": "2020-06-01T07:06:11Z", "type": "commit"}, {"oid": "d68aa22868eda842e02e61a0cbb346ad4dbf8bf9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d68aa22868eda842e02e61a0cbb346ad4dbf8bf9", "message": "Add missing new lines", "committedDate": "2020-06-01T07:58:04Z", "type": "commit"}]}