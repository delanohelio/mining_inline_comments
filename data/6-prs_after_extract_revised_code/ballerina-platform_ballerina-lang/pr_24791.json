{"pr_number": 24791, "pr_title": "Add integration test for resolving `ballerina` modules from central", "pr_createdAt": "2020-07-16T13:28:28Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24791", "timeline": [{"oid": "ba2802d62f3d9ace82fd3e6efb6ecebc24e23432", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba2802d62f3d9ace82fd3e6efb6ecebc24e23432", "message": "Add integration test for resolving `ballerina` modules from central", "committedDate": "2020-07-16T13:29:06Z", "type": "commit"}, {"oid": "ba2802d62f3d9ace82fd3e6efb6ecebc24e23432", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba2802d62f3d9ace82fd3e6efb6ecebc24e23432", "message": "Add integration test for resolving `ballerina` modules from central", "committedDate": "2020-07-16T13:29:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc5NDQwOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24791#discussion_r455794408", "bodyText": "If I'm not mistaken, this test will be failing once a newer version of the socket module is available, as the module version is hard-coded here. Is it the expected behaviour or am I missing something?", "author": "NipunaRanasinghe", "createdAt": "2020-07-16T13:41:37Z", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -297,6 +298,27 @@ public void testBuildAndRunModuleWithPeriod() throws BallerinaTestException {\n         buildLeecher.waitForText(5000);\n     }\n \n+    @Test(description = \"Test modules with org-name `ballerina` resolving from central, if new version is available\")\n+    public void testResolveBallerinaModulesFromCentral() throws BallerinaTestException, IOException {\n+        // copy `ballerina-central-module` project from resources to a temp\n+        Path originalTestProject = Paths\n+                .get(\"src\", \"test\", \"resources\", \"packaging\", \"scope\", \"ballerina-central-module\").toAbsolutePath();\n+        Path projectPath = tempProjectDirectory.resolve(\"ballerinaCentralModuleProject\");\n+        copyFolder(originalTestProject, projectPath);\n+\n+        // Build module\n+        LogLeecher buildLeecher = new LogLeecher(\"ballerina/socket:9.0.0 pulled from central successfully\");", "originalCommit": "ba2802d62f3d9ace82fd3e6efb6ecebc24e23432", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg0OTAwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24791#discussion_r455849004", "bodyText": "This particular module version is pushed to staging central server we used a high version number so that newer version will not break the test.  I doubt socket module will reach 9.0.0. The test will check if newer modules in central will get pulled even though module is found in bit cache.", "author": "hevayo", "createdAt": "2020-07-16T14:53:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc5NDQwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg3MDQyOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24791#discussion_r455870428", "bodyText": "The current ballerina/socket version is 0.6.5, So we decided to pull a higher version (9.0.0) than that to stg-central. In this test case that pulled version to stg-central is pulling when building this project. Normally we are using stg-central only for testing purposes and newer versions will to add to it. So we will not have a need to update this version in the near future. Do we have any good way of doing this? So I can put another PR for that.", "author": "pramodya1994", "createdAt": "2020-07-16T15:22:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc5NDQwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIxMzI2OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24791#discussion_r456213269", "bodyText": "@hevayo @pramodya1994 thanks for the explanations. I also think this would be okay as we are using an unreachable version. +1", "author": "NipunaRanasinghe", "createdAt": "2020-07-17T04:35:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc5NDQwOA=="}], "type": "inlineReview", "revised_code": null}]}