{"pr_number": 23773, "pr_title": "Transform xml navigation expression", "pr_createdAt": "2020-06-07T15:09:35Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23773", "timeline": [{"oid": "87865c6292136d61f3ccafb6551898aefb4962a9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/87865c6292136d61f3ccafb6551898aefb4962a9", "message": "Transform xml navigation", "committedDate": "2020-06-07T17:06:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ5NTM3MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23773#discussion_r436495370", "bodyText": "shall we check the tag instead ?", "author": "manuranga", "createdAt": "2020-06-08T07:09:42Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -1464,12 +1472,26 @@ private void populateArgsInvocation(NewExpressionNode expression, BLangInvocatio\n     }\n \n     @Override\n-    public BLangIndexBasedAccess transform(IndexedExpressionNode indexedExpressionNode) {\n+    public BLangNode transform(IndexedExpressionNode indexedExpressionNode) {\n         BLangIndexBasedAccess indexBasedAccess = (BLangIndexBasedAccess) TreeBuilder.createIndexBasedAccessNode();\n         indexBasedAccess.pos = getPosition(indexedExpressionNode);\n         // TODO : Add BLangTableMultiKeyExpr for indexExpr if it is available\n         indexBasedAccess.indexExpr = createExpression(indexedExpressionNode.keyExpression().get(0));\n-        indexBasedAccess.expr = createExpression(indexedExpressionNode.containerExpression());\n+\n+        BLangExpression expression = createExpression(indexedExpressionNode.containerExpression());\n+        if (expression instanceof BLangGroupExpr) {", "originalCommit": "87865c6292136d61f3ccafb6551898aefb4962a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYxNjczNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23773#discussion_r436616734", "bodyText": "+1, changes this to check the kind", "author": "KavinduZoysa", "createdAt": "2020-06-08T11:04:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ5NTM3MA=="}], "type": "inlineReview", "revised_code": {"commit": "22ee87fe133d3f8876795f7721429a998cac9815", "chunk": "diff --git a/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java b/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java\nindex 7673c5fb403..2c6d495195a 100644\n--- a/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java\n+++ b/compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java\n\n@@ -1478,14 +1496,15 @@ public class BLangNodeTransformer extends NodeTransformer<BLangNode> {\n         // TODO : Add BLangTableMultiKeyExpr for indexExpr if it is available\n         indexBasedAccess.indexExpr = createExpression(indexedExpressionNode.keyExpression().get(0));\n \n-        BLangExpression expression = createExpression(indexedExpressionNode.containerExpression());\n-        if (expression instanceof BLangGroupExpr) {\n+        Node containerExpr = indexedExpressionNode.containerExpression();\n+        BLangExpression expression = createExpression(containerExpr);\n+        if (containerExpr.kind() == SyntaxKind.BRACED_EXPRESSION) {\n             indexBasedAccess.expr = ((BLangGroupExpr) expression).expression;\n             BLangGroupExpr group = (BLangGroupExpr) TreeBuilder.createGroupExpressionNode();\n             group.expression = indexBasedAccess;\n             group.pos = getPosition(indexedExpressionNode);\n             return group;\n-        } else if (expression instanceof BLangXMLNavigationAccess) {\n+        } else if (containerExpr.kind() == SyntaxKind.XML_STEP_EXPRESSION) {\n             // TODO : This check will be removed after changes are done for spec issue #536\n             ((BLangXMLNavigationAccess) expression).childIndex = indexBasedAccess.indexExpr;\n             return expression;\n"}}, {"oid": "4b91d49c3c016a37eeb29474b893f7ca94310d77", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4b91d49c3c016a37eeb29474b893f7ca94310d77", "message": "Transform xml navigation", "committedDate": "2020-06-08T11:02:39Z", "type": "commit"}, {"oid": "22ee87fe133d3f8876795f7721429a998cac9815", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22ee87fe133d3f8876795f7721429a998cac9815", "message": "Fix the suggestion", "committedDate": "2020-06-08T11:02:39Z", "type": "commit"}, {"oid": "22ee87fe133d3f8876795f7721429a998cac9815", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22ee87fe133d3f8876795f7721429a998cac9815", "message": "Fix the suggestion", "committedDate": "2020-06-08T11:02:39Z", "type": "forcePushed"}]}