{"pr_number": 13428, "pr_title": "[WFLY-13700] Add ability to configure stale transaction timeout for l\u2026", "pr_createdAt": "2020-07-26T14:47:32Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13428", "timeline": [{"oid": "abd34a3a2f788c34d217cc65420b0ad86b9f574b", "url": "https://github.com/wildfly/wildfly/commit/abd34a3a2f788c34d217cc65420b0ad86b9f574b", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2020-08-03T10:28:11Z", "type": "forcePushed"}, {"oid": "5b5c520e2787252bb142ce3562156255b58afcc3", "url": "https://github.com/wildfly/wildfly/commit/5b5c520e2787252bb142ce3562156255b58afcc3", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2020-08-03T12:13:19Z", "type": "forcePushed"}, {"oid": "ce6fa0593d9c7d701e2d776472677c81611aa1bf", "url": "https://github.com/wildfly/wildfly/commit/ce6fa0593d9c7d701e2d776472677c81611aa1bf", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2020-08-03T18:03:28Z", "type": "forcePushed"}, {"oid": "49ad982990e9ed7254157ed18c3be8a89b68b011", "url": "https://github.com/wildfly/wildfly/commit/49ad982990e9ed7254157ed18c3be8a89b68b011", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2020-08-13T11:38:48Z", "type": "forcePushed"}, {"oid": "fb6debe466c03dd0333ebcc202a99eca6735952c", "url": "https://github.com/wildfly/wildfly/commit/fb6debe466c03dd0333ebcc202a99eca6735952c", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2020-09-01T08:15:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI1MTgyOQ==", "url": "https://github.com/wildfly/wildfly/pull/13428#discussion_r582251829", "bodyText": "This should be RESTART_ALL_SERVICES -- ReloadRequiredWriteAttributeHandler handles the writes.", "author": "bstansberry", "createdAt": "2021-02-24T19:45:12Z", "path": "transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java", "diffHunk": "@@ -281,6 +281,13 @@\n             .setAllowExpression(true)\n             .setRequires(CommonAttributes.USE_JDBC_STORE).build();\n \n+    public static final SimpleAttributeDefinition STALE_TRANSACTION_TIME = new SimpleAttributeDefinitionBuilder(CommonAttributes.STALE_TRANSACTION_TIME, ModelType.INT, true)\n+            .setValidator(new IntRangeValidator(0))\n+            .setMeasurementUnit(MeasurementUnit.SECONDS)\n+            .setDefaultValue(new ModelNode().set(600))\n+            .setFlags(AttributeAccess.Flag.RESTART_NONE)", "originalCommit": "fb6debe466c03dd0333ebcc202a99eca6735952c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDc2NjA3NA==", "url": "https://github.com/wildfly/wildfly/pull/13428#discussion_r584766074", "bodyText": "fixed", "author": "tadamski", "createdAt": "2021-03-01T14:43:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI1MTgyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "2df61a38f526a39429ec98251d093a937c86e61c", "chunk": "diff --git a/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java b/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java\nindex eb5b39faa6..adf28a7013 100644\n--- a/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java\n+++ b/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionSubsystemRootResourceDefinition.java\n\n@@ -285,7 +285,7 @@ public class TransactionSubsystemRootResourceDefinition extends SimpleResourceDe\n             .setValidator(new IntRangeValidator(0))\n             .setMeasurementUnit(MeasurementUnit.SECONDS)\n             .setDefaultValue(new ModelNode().set(600))\n-            .setFlags(AttributeAccess.Flag.RESTART_NONE)\n+            .setFlags(AttributeAccess.Flag.RESTART_ALL_SERVICES)\n             .setAllowExpression(true).build();\n \n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI1MzY1Ng==", "url": "https://github.com/wildfly/wildfly/pull/13428#discussion_r582253656", "bodyText": "This would be MODEL_VERSION_EAP74", "author": "bstansberry", "createdAt": "2021-02-24T19:47:49Z", "path": "transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionTransformers.java", "diffHunk": "@@ -39,6 +40,8 @@\n     static final ModelVersion MODEL_VERSION_EAP70 = ModelVersion.create(3, 0);\n     static final ModelVersion MODEL_VERSION_EAP71 = ModelVersion.create(4, 0);\n     static final ModelVersion MODEL_VERSION_EAP72 = ModelVersion.create(5, 0);\n+    static final ModelVersion MODEL_VERSION_5_1_0 = ModelVersion.create(5, 1);\n+    static final ModelVersion MODEL_VERSION_EAP73 = ModelVersion.create(6, 0);", "originalCommit": "fb6debe466c03dd0333ebcc202a99eca6735952c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDc2NjE0MA==", "url": "https://github.com/wildfly/wildfly/pull/13428#discussion_r584766140", "bodyText": "fixed", "author": "tadamski", "createdAt": "2021-03-01T14:43:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjI1MzY1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "7b065cbdb080b78e215aad6709cf745329638d63", "chunk": "diff --git a/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionTransformers.java b/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionTransformers.java\nindex 515ae7fccb..eb2a99f7ef 100644\n--- a/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionTransformers.java\n+++ b/transactions/src/main/java/org/jboss/as/txn/subsystem/TransactionTransformers.java\n\n@@ -40,8 +40,8 @@ public class TransactionTransformers implements ExtensionTransformerRegistration\n     static final ModelVersion MODEL_VERSION_EAP70 = ModelVersion.create(3, 0);\n     static final ModelVersion MODEL_VERSION_EAP71 = ModelVersion.create(4, 0);\n     static final ModelVersion MODEL_VERSION_EAP72 = ModelVersion.create(5, 0);\n-    static final ModelVersion MODEL_VERSION_5_1_0 = ModelVersion.create(5, 1);\n-    static final ModelVersion MODEL_VERSION_EAP73 = ModelVersion.create(6, 0);\n+    static final ModelVersion MODEL_VERSION_EAP73 = ModelVersion.create(5, 1);\n+    static final ModelVersion MODEL_VERSION_5_2_0 = ModelVersion.create(5, 2);\n \n \n     @Override\n"}}, {"oid": "7b065cbdb080b78e215aad6709cf745329638d63", "url": "https://github.com/wildfly/wildfly/commit/7b065cbdb080b78e215aad6709cf745329638d63", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2021-03-01T13:31:51Z", "type": "forcePushed"}, {"oid": "2df61a38f526a39429ec98251d093a937c86e61c", "url": "https://github.com/wildfly/wildfly/commit/2df61a38f526a39429ec98251d093a937c86e61c", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2021-03-01T14:42:26Z", "type": "commit"}, {"oid": "2df61a38f526a39429ec98251d093a937c86e61c", "url": "https://github.com/wildfly/wildfly/commit/2df61a38f526a39429ec98251d093a937c86e61c", "message": "[WFLY-13700] Add ability to configure stale transaction timeout for local transaction", "committedDate": "2021-03-01T14:42:26Z", "type": "forcePushed"}]}