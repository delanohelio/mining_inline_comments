{"pr_number": 13288, "pr_title": "[WFLY-13471]:Warn the ws deployment packaged with JAXP implementation", "pr_createdAt": "2020-05-14T12:37:40Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13288", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1MTAwNA==", "url": "https://github.com/wildfly/wildfly/pull/13288#discussion_r425451004", "bodyText": "I think you mean javax.xml.validation.SchemaFactory?", "author": "pferraro", "createdAt": "2020-05-14T21:49:59Z", "path": "webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSLibraryFilterProcessor.java", "diffHunk": "@@ -66,6 +65,13 @@ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentU\n                 AttachmentList<ResourceRoot> resourceRoots = unit.getAttachment(RESOURCE_ROOTS);\n                 if (resourceRoots != null) {\n                     for (ResourceRoot root : resourceRoots) {\n+                        if (root.getRoot().getChild(\"META-INF/services/javax.xml.datatype.DatatypeFactory\").exists()\n+                                || root.getRoot().getChild(\"META-INF/services/javax.xml.parsers.DocumentBuilderFactory\").exists()\n+                                || root.getRoot().getChild(\"META-INF/services/javax.xml.parsers.SAXParserFactory\").exists()\n+                                || root.getRoot().getChild(\"META-INF/services/jjavax.xml.validation.SchemaFactory\").exists()) {", "originalCommit": "a2862f79b4e8c9f2a9aedc28c7d56ac95d2e4d48", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU4MjgwMQ==", "url": "https://github.com/wildfly/wildfly/pull/13288#discussion_r425582801", "bodyText": "@pferraro  Yes. Thanks for review. Already fixed.", "author": "jimma", "createdAt": "2020-05-15T05:59:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1MTAwNA=="}], "type": "inlineReview", "revised_code": {"commit": "89a3dafe19dd4713c54e9cd3faeeec31a1cd9d9c", "chunk": "diff --git a/webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSLibraryFilterProcessor.java b/webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSLibraryFilterProcessor.java\nindex c755822c80..f2305b8ad7 100644\n--- a/webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSLibraryFilterProcessor.java\n+++ b/webservices/server-integration/src/main/java/org/jboss/as/webservices/deployers/WSLibraryFilterProcessor.java\n\n@@ -68,9 +68,8 @@ public class WSLibraryFilterProcessor implements DeploymentUnitProcessor {\n                         if (root.getRoot().getChild(\"META-INF/services/javax.xml.datatype.DatatypeFactory\").exists()\n                                 || root.getRoot().getChild(\"META-INF/services/javax.xml.parsers.DocumentBuilderFactory\").exists()\n                                 || root.getRoot().getChild(\"META-INF/services/javax.xml.parsers.SAXParserFactory\").exists()\n-                                || root.getRoot().getChild(\"META-INF/services/jjavax.xml.validation.SchemaFactory\").exists()) {\n-                            throw WSLogger.ROOT_LOGGER.invalidLibraryInDeployment(\"JAXP Implementation\", root.getRootName());\n-\n+                                || root.getRoot().getChild(\"META-INF/services/javax.xml.validation.SchemaFactory\").exists()) {\n+                            WSLogger.ROOT_LOGGER.warningLibraryInDeployment(\"JAXP Implementation\", root.getRootName());\n                         }\n                         if (hasClassesFromPackage(root.getAttachment(ANNOTATION_INDEX), \"org.apache.cxf\")) {\n                             throw WSLogger.ROOT_LOGGER.invalidLibraryInDeployment(\"Apache CXF\", root.getRootName());\n"}}, {"oid": "89a3dafe19dd4713c54e9cd3faeeec31a1cd9d9c", "url": "https://github.com/wildfly/wildfly/commit/89a3dafe19dd4713c54e9cd3faeeec31a1cd9d9c", "message": "[WFLY-13471]:Print warning message if ws deployment packaged with JAXP implementation", "committedDate": "2020-06-11T10:12:56Z", "type": "commit"}, {"oid": "89a3dafe19dd4713c54e9cd3faeeec31a1cd9d9c", "url": "https://github.com/wildfly/wildfly/commit/89a3dafe19dd4713c54e9cd3faeeec31a1cd9d9c", "message": "[WFLY-13471]:Print warning message if ws deployment packaged with JAXP implementation", "committedDate": "2020-06-11T10:12:56Z", "type": "forcePushed"}]}