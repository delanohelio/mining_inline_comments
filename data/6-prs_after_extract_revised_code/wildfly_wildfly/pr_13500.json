{"pr_number": 13500, "pr_title": "WFLY-13426 Convert clustering modules to use ProtoStream marshalling", "pr_createdAt": "2020-08-22T20:22:32Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13500", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMxMDc0OA==", "url": "https://github.com/wildfly/wildfly/pull/13500#discussion_r475310748", "bodyText": "Unresolved conflict", "author": "bstansberry", "createdAt": "2020-08-24T02:30:05Z", "path": "clustering/server/src/main/java/org/wildfly/clustering/server/group/JGroupsAddressSerializer.java", "diffHunk": "@@ -1,6 +1,10 @@\n /*\n  * JBoss, Home of Professional Open Source.\n+<<<<<<< HEAD\n  * Copyright 2019, Red Hat, Inc., and individual contributors\n+=======\n+ * Copyright 2020, Red Hat, Inc., and individual contributors\n+>>>>>>> 9aad2a3ba7... ProtoStream support for wildfly-clustering-server module", "originalCommit": "1697049d7fcddd16326e950247b9b85eb2dce8dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc0OTU5NQ==", "url": "https://github.com/wildfly/wildfly/pull/13500#discussion_r475749595", "bodyText": "Fixed.", "author": "pferraro", "createdAt": "2020-08-24T16:41:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTMxMDc0OA=="}], "type": "inlineReview", "revised_code": {"commit": "d29b4d3b3033d1351eff31b5389901d93dd6d34b", "chunk": "diff --git a/clustering/server/src/main/java/org/wildfly/clustering/server/group/JGroupsAddressSerializer.java b/clustering/server/src/main/java/org/wildfly/clustering/server/group/JGroupsAddressSerializer.java\nindex 9352abced5..fd0f5a1870 100644\n--- a/clustering/server/src/main/java/org/wildfly/clustering/server/group/JGroupsAddressSerializer.java\n+++ b/clustering/server/src/main/java/org/wildfly/clustering/server/group/JGroupsAddressSerializer.java\n\n@@ -1,10 +1,6 @@\n /*\n  * JBoss, Home of Professional Open Source.\n-<<<<<<< HEAD\n  * Copyright 2019, Red Hat, Inc., and individual contributors\n-=======\n- * Copyright 2020, Red Hat, Inc., and individual contributors\n->>>>>>> 9aad2a3ba7... ProtoStream support for wildfly-clustering-server module\n  * as indicated by the @author tags. See the copyright.txt file in the\n  * distribution for a full listing of individual contributors.\n  *\n"}}, {"oid": "d7089c9afee42f8f8f3a99e3ca14b2152cba60ff", "url": "https://github.com/wildfly/wildfly/commit/d7089c9afee42f8f8f3a99e3ca14b2152cba60ff", "message": "Override default UUID protostream marshalling to use fixed sized long values.", "committedDate": "2020-08-24T11:12:47Z", "type": "forcePushed"}, {"oid": "d29b4d3b3033d1351eff31b5389901d93dd6d34b", "url": "https://github.com/wildfly/wildfly/commit/d29b4d3b3033d1351eff31b5389901d93dd6d34b", "message": "Override default UUID protostream marshalling to use fixed sized long values.", "committedDate": "2020-08-24T16:40:45Z", "type": "forcePushed"}, {"oid": "492255264d933d87c25efe2d9b29d5ba79f457ac", "url": "https://github.com/wildfly/wildfly/commit/492255264d933d87c25efe2d9b29d5ba79f457ac", "message": "Override default UUID protostream marshalling to use fixed sized long values.", "committedDate": "2020-09-01T03:02:46Z", "type": "forcePushed"}, {"oid": "f9341ffb8f3c642a76046d34d2ff4e173780486f", "url": "https://github.com/wildfly/wildfly/commit/f9341ffb8f3c642a76046d34d2ff4e173780486f", "message": "Override default UUID protostream marshalling to use fixed sized long values.", "committedDate": "2020-09-01T11:40:59Z", "type": "forcePushed"}, {"oid": "2d182b91184b9b23ac63d941386c3868726f905d", "url": "https://github.com/wildfly/wildfly/commit/2d182b91184b9b23ac63d941386c3868726f905d", "message": "Override default UUID protostream marshalling to use fixed sized long values.", "committedDate": "2020-09-08T17:31:14Z", "type": "forcePushed"}, {"oid": "8b0d439892dc4531038bfeb000e38c686c27e364", "url": "https://github.com/wildfly/wildfly/commit/8b0d439892dc4531038bfeb000e38c686c27e364", "message": "Override default UUID protostream marshalling to use fixed sized long values.", "committedDate": "2020-09-16T11:14:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc4ODU0Nw==", "url": "https://github.com/wildfly/wildfly/pull/13500#discussion_r489788547", "bodyText": "May want to get rid of this System.out running loose here in this test case.", "author": "rhusar", "createdAt": "2020-09-16T22:27:29Z", "path": "clustering/server/src/test/java/org/wildfly/clustering/server/ServiceLoaderTestCase.java", "diffHunk": "@@ -51,10 +51,11 @@ public void load() {\n         load(DistributedCacheServiceConfiguratorProvider.class);\n         load(LocalGroupServiceConfiguratorProvider.class);\n         load(LocalCacheServiceConfiguratorProvider.class);\n+        load(SerializationContextInitializer.class);\n     }\n \n     private static <T> void load(Class<T> targetClass) {\n         ServiceLoader.load(targetClass, ServiceLoaderTestCase.class.getClassLoader())\n-                .forEach(object -> LOGGER.trace(\"\\t\" + object.getClass().getName()));\n+                .forEach(object -> System.out.println(\"\\t\" + object.getClass().getName()));", "originalCommit": "2ac73928f8dadf3ca982a270ff04699054b4558c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTg4MTA3Ng==", "url": "https://github.com/wildfly/wildfly/pull/13500#discussion_r489881076", "bodyText": "Yeah...", "author": "pferraro", "createdAt": "2020-09-17T02:10:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc4ODU0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "e834097bae6be7dd7f9b6f65edb6767913fd3bd8", "chunk": "diff --git a/clustering/server/src/test/java/org/wildfly/clustering/server/ServiceLoaderTestCase.java b/clustering/server/src/test/java/org/wildfly/clustering/server/ServiceLoaderTestCase.java\nindex 3ecc92ca60..c3e76dad02 100644\n--- a/clustering/server/src/test/java/org/wildfly/clustering/server/ServiceLoaderTestCase.java\n+++ b/clustering/server/src/test/java/org/wildfly/clustering/server/ServiceLoaderTestCase.java\n\n@@ -56,6 +58,6 @@ public class ServiceLoaderTestCase {\n \n     private static <T> void load(Class<T> targetClass) {\n         ServiceLoader.load(targetClass, ServiceLoaderTestCase.class.getClassLoader())\n-                .forEach(object -> System.out.println(\"\\t\" + object.getClass().getName()));\n+                .forEach(object -> LOGGER.tracef(\"\\t\" + object.getClass().getName()));\n     }\n }\n"}}, {"oid": "e834097bae6be7dd7f9b6f65edb6767913fd3bd8", "url": "https://github.com/wildfly/wildfly/commit/e834097bae6be7dd7f9b6f65edb6767913fd3bd8", "message": "Remove explicit proto3 syntax specification in proto3-incompatible definitions", "committedDate": "2020-09-17T17:44:21Z", "type": "forcePushed"}, {"oid": "76d1a7744dcdd87f6355ee64cd5b45462cabcc38", "url": "https://github.com/wildfly/wildfly/commit/76d1a7744dcdd87f6355ee64cd5b45462cabcc38", "message": "Remove explicit proto3 syntax specification in proto3-incompatible definitions", "committedDate": "2020-09-17T17:59:32Z", "type": "forcePushed"}, {"oid": "7352f57c73cb8e11d133db64b0a1b906340c52fa", "url": "https://github.com/wildfly/wildfly/commit/7352f57c73cb8e11d133db64b0a1b906340c52fa", "message": "WFLY-13426 ProtoStream marshalling support", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "8ab0ddc015a8f3fb9b096414977ea9c8bdfc3e31", "url": "https://github.com/wildfly/wildfly/commit/8ab0ddc015a8f3fb9b096414977ea9c8bdfc3e31", "message": "Ignore checkstyle rules for auto-generated ProtoStream classes.", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "500d092f4250a02abb35904b77684f07d1dab31c", "url": "https://github.com/wildfly/wildfly/commit/500d092f4250a02abb35904b77684f07d1dab31c", "message": "Add test for exception response.", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "aca091423299e1fd310d851336bcb7dfdb20b56c", "url": "https://github.com/wildfly/wildfly/commit/aca091423299e1fd310d851336bcb7dfdb20b56c", "message": "ProtoStream support for wildfly-clustering-ee-cache module", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "595569ad9e1ab22d649fa7d6ce6d5d670e1c1c01", "url": "https://github.com/wildfly/wildfly/commit/595569ad9e1ab22d649fa7d6ce6d5d670e1c1c01", "message": "ProtoStream support for wildfly-clustering-ee-infinispan module", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "fd16671a7e7ffcdf3a42e243ad7f5cec8aeed8b0", "url": "https://github.com/wildfly/wildfly/commit/fd16671a7e7ffcdf3a42e243ad7f5cec8aeed8b0", "message": "ProtoStream support for wildfly-clustering-ejb-infinispan module", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "e19e01ca1e77ce9067784b36c25defa0d4dbe52a", "url": "https://github.com/wildfly/wildfly/commit/e19e01ca1e77ce9067784b36c25defa0d4dbe52a", "message": "ProtoStream support for wildfly-clustering-server module", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "5880e510533eea474500d9bca4188a1cc0152601", "url": "https://github.com/wildfly/wildfly/commit/5880e510533eea474500d9bca4188a1cc0152601", "message": "ProtoStream support for wildfly-clustering-web-cache module", "committedDate": "2020-09-17T19:55:58Z", "type": "commit"}, {"oid": "1dda5cb233e8cb9c4778584b6d5957583d5f31d1", "url": "https://github.com/wildfly/wildfly/commit/1dda5cb233e8cb9c4778584b6d5957583d5f31d1", "message": "ProtoStream support for wildfly-clustering-web-hotrod module", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "68b4a405d47281a199f56f618c31f1383ae294c7", "url": "https://github.com/wildfly/wildfly/commit/68b4a405d47281a199f56f618c31f1383ae294c7", "message": "ProtoStream support for wildfly-clustering-web-infinispan module", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "0913c7477f014a82d0915e81f053fee4edc729b2", "url": "https://github.com/wildfly/wildfly/commit/0913c7477f014a82d0915e81f053fee4edc729b2", "message": "ProtoStream support for wildfly-clustering-web-undertow module", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "2bed1cae0c56d697ee0fc80b7f339085a164fac6", "url": "https://github.com/wildfly/wildfly/commit/2bed1cae0c56d697ee0fc80b7f339085a164fac6", "message": "Detect Infinispan cache-container marshaller based on module.", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "d70c5655599de77f730329a7cd9df3778630fb5c", "url": "https://github.com/wildfly/wildfly/commit/d70c5655599de77f730329a7cd9df3778630fb5c", "message": "Allow Externalizer to provide buffer size hint.", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "66e4b73987d4724579ff130dde1ed7e539cb0355", "url": "https://github.com/wildfly/wildfly/commit/66e4b73987d4724579ff130dde1ed7e539cb0355", "message": "Break up DefaultExternalizer.", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "5bf4885f48e9e18ab4cd0d7a0e1fbd042761ca42", "url": "https://github.com/wildfly/wildfly/commit/5bf4885f48e9e18ab4cd0d7a0e1fbd042761ca42", "message": "Refactor TimestampExternalizer into sql package.", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "6f54665ad005fb7c844dfa0ac2f157981386d254", "url": "https://github.com/wildfly/wildfly/commit/6f54665ad005fb7c844dfa0ac2f157981386d254", "message": "Add externalizer buffer size hints.", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "6337df449ac49ec0a31f983292d6e3554ddbc389", "url": "https://github.com/wildfly/wildfly/commit/6337df449ac49ec0a31f983292d6e3554ddbc389", "message": "Test extreme value of AtomicLong.", "committedDate": "2020-09-17T19:55:59Z", "type": "commit"}, {"oid": "6f2f935fd93cb0343cb242e66f578d353f080b52", "url": "https://github.com/wildfly/wildfly/commit/6f2f935fd93cb0343cb242e66f578d353f080b52", "message": "Remove explicit proto3 syntax specification in proto3-incompatible definitions", "committedDate": "2020-09-17T19:55:59Z", "type": "forcePushed"}, {"oid": "ce11ed02b12ef50ca52c322e335e50d3a51e8582", "url": "https://github.com/wildfly/wildfly/commit/ce11ed02b12ef50ca52c322e335e50d3a51e8582", "message": "Optimize select externalizer-based marshallers using ProtoStream-native marshallers", "committedDate": "2020-09-17T21:28:20Z", "type": "commit"}, {"oid": "133bea982d024514695e43f2247a759325458959", "url": "https://github.com/wildfly/wildfly/commit/133bea982d024514695e43f2247a759325458959", "message": "Remove explicit proto3 syntax specification in proto3-incompatible definitions", "committedDate": "2020-09-17T21:28:20Z", "type": "forcePushed"}, {"oid": "0c78dea2d0fee7be698ae5fbb7e195173318384d", "url": "https://github.com/wildfly/wildfly/commit/0c78dea2d0fee7be698ae5fbb7e195173318384d", "message": "Utilize MarshallerProvider interface to eliminate redundant decorator code.", "committedDate": "2020-09-17T21:38:51Z", "type": "commit"}, {"oid": "e000e6f5ee005b3fd74c577298fd0f664c15b672", "url": "https://github.com/wildfly/wildfly/commit/e000e6f5ee005b3fd74c577298fd0f664c15b672", "message": "Remove explicit proto3 syntax specification in proto3-incompatible definitions", "committedDate": "2020-09-17T21:38:51Z", "type": "commit"}, {"oid": "e000e6f5ee005b3fd74c577298fd0f664c15b672", "url": "https://github.com/wildfly/wildfly/commit/e000e6f5ee005b3fd74c577298fd0f664c15b672", "message": "Remove explicit proto3 syntax specification in proto3-incompatible definitions", "committedDate": "2020-09-17T21:38:51Z", "type": "forcePushed"}]}