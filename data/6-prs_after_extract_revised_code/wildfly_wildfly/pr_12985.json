{"pr_number": 12985, "pr_title": "[WFLY-13088] Ejb binding should not be listed if there is no Remote i\u2026", "pr_createdAt": "2020-02-13T08:08:25Z", "pr_url": "https://github.com/wildfly/wildfly/pull/12985", "timeline": [{"oid": "bc3829d93b80d0e1461510d78288b070facc789b", "url": "https://github.com/wildfly/wildfly/commit/bc3829d93b80d0e1461510d78288b070facc789b", "message": "[WFLY-13088] Space added as per checkstyle", "committedDate": "2020-02-13T10:32:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMyNjQ4MA==", "url": "https://github.com/wildfly/wildfly/pull/12985#discussion_r381326480", "bodyText": "Maybe it would be a bit more elegant to evaluate this expression in the if below and thus avoid artificial empty string initialization.", "author": "tadamski", "createdAt": "2020-02-19T14:30:50Z", "path": "ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJndiBindingsDeploymentUnitProcessor.java", "diffHunk": "@@ -161,8 +165,12 @@ private void setupJNDIBindings(EJBComponentDescription sessionBean, DeploymentUn\n             }\n \n             // log EJB's ejb:/ namespace binding\n-            final String ejbNamespaceBindingName = sessionBean.isStateful() ? ejbNamespaceBindingBaseName + \"!\" + viewClassName + \"?stateful\" : ejbNamespaceBindingBaseName + \"!\" + viewClassName;\n-            logBinding(jndiBindingsLogMessage, ejbNamespaceBindingName);\n+            final String ejbNamespaceBindingName =  isEjbNamespaceBindingBaseName == true ? \"\": sessionBean.isStateful() ? ejbNamespaceBindingBaseName + \"!\" + viewClassName + \"?stateful\" : ejbNamespaceBindingBaseName + \"!\" + viewClassName;", "originalCommit": "bc3829d93b80d0e1461510d78288b070facc789b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk4NTMyMg==", "url": "https://github.com/wildfly/wildfly/pull/12985#discussion_r381985322", "bodyText": "Hi @tadamski ,\nDo you think below code change is fine. If ok ill make changes and resend pull request.\n final String ejbNamespaceBindingName =  sessionBean.isStateful() ? ejbNamespaceBindingBaseName + \"!\" + viewClassName + \"?stateful\" : ejbNamespaceBindingBaseName + \"!\" + viewClassName;\n\nif(!isEjbNamespaceBindingBaseName){\n                logBinding(jndiBindingsLogMessage, ejbNamespaceBindingName);\n}", "author": "moulalis", "createdAt": "2020-02-20T13:05:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMyNjQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg3MjE2MQ==", "url": "https://github.com/wildfly/wildfly/pull/12985#discussion_r383872161", "bodyText": "@tadamski could you please review :)", "author": "moulalis", "createdAt": "2020-02-25T13:18:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMyNjQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDczMzk5OA==", "url": "https://github.com/wildfly/wildfly/pull/12985#discussion_r384733998", "bodyText": "@moulalis yes, this looks fine", "author": "tadamski", "createdAt": "2020-02-26T20:03:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMyNjQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDkzODY0NA==", "url": "https://github.com/wildfly/wildfly/pull/12985#discussion_r384938644", "bodyText": "Thanks @tadamski . I have resent PR for this change.", "author": "moulalis", "createdAt": "2020-02-27T06:44:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMyNjQ4MA=="}], "type": "inlineReview", "revised_code": {"commit": "7840244c2eb0ef9ddd7c8a41da88dd8ec0d8c342", "chunk": "diff --git a/ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJndiBindingsDeploymentUnitProcessor.java b/ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJndiBindingsDeploymentUnitProcessor.java\nindex 8ff6be3587..e758a7cf74 100644\n--- a/ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJndiBindingsDeploymentUnitProcessor.java\n+++ b/ejb3/src/main/java/org/jboss/as/ejb3/deployment/processors/EjbJndiBindingsDeploymentUnitProcessor.java\n\n@@ -165,9 +166,9 @@ public class EjbJndiBindingsDeploymentUnitProcessor implements DeploymentUnitPro\n             }\n \n             // log EJB's ejb:/ namespace binding\n-            final String ejbNamespaceBindingName =  isEjbNamespaceBindingBaseName == true ? \"\": sessionBean.isStateful() ? ejbNamespaceBindingBaseName + \"!\" + viewClassName + \"?stateful\" : ejbNamespaceBindingBaseName + \"!\" + viewClassName;\n+            final String ejbNamespaceBindingName =  sessionBean.isStateful() ? ejbNamespaceBindingBaseName + \"!\" + viewClassName + \"?stateful\" : ejbNamespaceBindingBaseName + \"!\" + viewClassName;\n \n-            if(ejbNamespaceBindingName != \"\"){\n+            if(!isEjbNamespaceBindingBaseName){\n                 logBinding(jndiBindingsLogMessage, ejbNamespaceBindingName);\n             }\n \n"}}, {"oid": "7840244c2eb0ef9ddd7c8a41da88dd8ec0d8c342", "url": "https://github.com/wildfly/wildfly/commit/7840244c2eb0ef9ddd7c8a41da88dd8ec0d8c342", "message": "[WFLY-13088] Space added as per checkstyle\n\n[WFLY-13088] EJB binding should not be listed if there is no Remote interface", "committedDate": "2020-02-27T06:38:44Z", "type": "commit"}, {"oid": "7840244c2eb0ef9ddd7c8a41da88dd8ec0d8c342", "url": "https://github.com/wildfly/wildfly/commit/7840244c2eb0ef9ddd7c8a41da88dd8ec0d8c342", "message": "[WFLY-13088] Space added as per checkstyle\n\n[WFLY-13088] EJB binding should not be listed if there is no Remote interface", "committedDate": "2020-02-27T06:38:44Z", "type": "forcePushed"}]}