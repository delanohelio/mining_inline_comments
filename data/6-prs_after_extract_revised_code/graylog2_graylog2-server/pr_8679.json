{"pr_number": 8679, "pr_title": "Add get a single role from the AuthzRolesResource", "pr_createdAt": "2020-08-03T12:51:45Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8679", "timeline": [{"oid": "69e0280c4dc8c58404283768d8f98005ed25470e", "url": "https://github.com/Graylog2/graylog2-server/commit/69e0280c4dc8c58404283768d8f98005ed25470e", "message": "Add get a single role from the AuthzRolesResource\n\nPrior to this change, there was no way to get a single Role from the\nnew AuthzRolesResource. But we would like to display a single role\nreadonly in the frontend.\n\nThis change will search for a role by id and return it.", "committedDate": "2020-08-03T12:48:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMTM5OA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8679#discussion_r464431398", "bodyText": "this would require the user to have a roles:read:* permission.\nThe specific one underneath is better. I'd just remove this line.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @RequiresPermissions(RestPermissions.ROLES_READ)", "author": "mpfz0r", "createdAt": "2020-08-03T13:59:08Z", "path": "graylog2-server/src/main/java/org/graylog/security/authzroles/AuthzRolesResource.java", "diffHunk": "@@ -88,6 +90,18 @@ public AuthzRolesResource(PaginatedAuthzRolesService authzRolesService) {\n         return PaginatedResponse.create(\"roles\", result, query);\n     }\n \n+\n+    @GET\n+    @ApiOperation(value = \"Get a single role\")\n+    @Path(\"/{roleId}\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    @RequiresPermissions(RestPermissions.ROLES_READ)", "originalCommit": "69e0280c4dc8c58404283768d8f98005ed25470e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "817cb8d413565b1ccfc1c537d7a398ac98f6c225", "chunk": "diff --git a/graylog2-server/src/main/java/org/graylog/security/authzroles/AuthzRolesResource.java b/graylog2-server/src/main/java/org/graylog/security/authzroles/AuthzRolesResource.java\nindex 8e37faaa49..08552bf8da 100644\n--- a/graylog2-server/src/main/java/org/graylog/security/authzroles/AuthzRolesResource.java\n+++ b/graylog2-server/src/main/java/org/graylog/security/authzroles/AuthzRolesResource.java\n\n@@ -95,7 +95,6 @@ public class AuthzRolesResource extends RestResource {\n     @ApiOperation(value = \"Get a single role\")\n     @Path(\"/{roleId}\")\n     @Produces(MediaType.APPLICATION_JSON)\n-    @RequiresPermissions(RestPermissions.ROLES_READ)\n     public AuthzRoleDTO get(@ApiParam(name = \"roleId\") @PathParam(\"roleId\") @NotBlank String roleId) {\n         checkPermission(RestPermissions.ROLES_READ, roleId);\n         return authzRolesService.get(roleId).orElseThrow(\n"}}, {"oid": "817cb8d413565b1ccfc1c537d7a398ac98f6c225", "url": "https://github.com/Graylog2/graylog2-server/commit/817cb8d413565b1ccfc1c537d7a398ac98f6c225", "message": "Remove wrong permission check", "committedDate": "2020-08-05T07:44:06Z", "type": "commit"}]}