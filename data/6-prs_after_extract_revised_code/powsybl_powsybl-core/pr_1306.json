{"pr_number": 1306, "pr_title": "Cgmes conversion . Add phaseTapChangerLinear", "pr_createdAt": "2020-05-07T11:38:14Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1306", "timeline": [{"oid": "d2bdb31668a29076e033f12e615a4b99b3a4b8bf", "url": "https://github.com/powsybl/powsybl-core/commit/d2bdb31668a29076e033f12e615a4b99b3a4b8bf", "message": "add phaseTapChangerLinear\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-03-16T09:09:45Z", "type": "commit"}, {"oid": "1e16b355da1d6936a1e475e37e360e6f1aa4ed00", "url": "https://github.com/powsybl/powsybl-core/commit/1e16b355da1d6936a1e475e37e360e6f1aa4ed00", "message": "PhaseTapChangerLinear\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-03-16T11:00:44Z", "type": "commit"}, {"oid": "7752a418ef988001a45b08a771fd433f35e8140d", "url": "https://github.com/powsybl/powsybl-core/commit/7752a418ef988001a45b08a771fd433f35e8140d", "message": "Merge branch 'master' into cgmes_conversion_phaseTapChangerLinear", "committedDate": "2020-04-20T09:25:02Z", "type": "commit"}, {"oid": "baeeecb61a50e3c8efbdc6516b18c1ca05f3b0b1", "url": "https://github.com/powsybl/powsybl-core/commit/baeeecb61a50e3c8efbdc6516b18c1ca05f3b0b1", "message": "Merge branch 'master' into cgmes_conversion_phaseTapChangerLinear", "committedDate": "2020-05-06T10:15:33Z", "type": "commit"}, {"oid": "73406dc3b0b220544cd495976a7cce76d7882eae", "url": "https://github.com/powsybl/powsybl-core/commit/73406dc3b0b220544cd495976a7cce76d7882eae", "message": "Pretty code. Add unitary tests\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-05-06T16:35:19Z", "type": "commit"}, {"oid": "229e65b47606ecfa5966d0e7daa70b3560d48707", "url": "https://github.com/powsybl/powsybl-core/commit/229e65b47606ecfa5966d0e7daa70b3560d48707", "message": "Merge branch 'master' into cgmes_conversion_phaseTapChangerLinear", "committedDate": "2020-05-12T08:44:56Z", "type": "commit"}, {"oid": "0720294ebe2b51343b5d688f525fd1d59baacd3b", "url": "https://github.com/powsybl/powsybl-core/commit/0720294ebe2b51343b5d688f525fd1d59baacd3b", "message": "Merge branch 'master' into cgmes_conversion_phaseTapChangerLinear", "committedDate": "2020-05-13T06:51:49Z", "type": "commit"}, {"oid": "232033a708d3b92f9247ba45d070f601e45ef804", "url": "https://github.com/powsybl/powsybl-core/commit/232033a708d3b92f9247ba45d070f601e45ef804", "message": "Merge branch 'master' into cgmes_conversion_phaseTapChangerLinear", "committedDate": "2020-05-19T06:43:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5NjM3Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1306#discussion_r427296376", "bodyText": "This can be static", "author": "MioRtia", "createdAt": "2020-05-19T13:21:04Z", "path": "cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/conformity/modified/CgmesConformity1ModifiedConversionTest.java", "diffHunk": "@@ -67,6 +74,48 @@ public void microBERatioPhaseTabularTest() {\n         }\n     }\n \n+    @Test\n+    public void microBEPhaseTapChangerLinearTest() throws IOException {\n+        Conversion.Config config = new Conversion.Config();\n+        Network n = networkModel(CgmesConformity1ModifiedCatalog.microT4BePhaseTapChangerLinear(),\n+            config);\n+\n+        PhaseTapChanger ptc = n.getTwoWindingsTransformer(\"_a708c3bc-465d-4fe7-b6ef-6fa6408a62b0\").getPhaseTapChanger();\n+        assertEquals(25, ptc.getStepCount());\n+\n+        for (int step = 1; step <= ptc.getStepCount(); step++) {\n+            assertEquals(1.0, ptc.getStep(step).getRho(), 0);\n+            assertEquals(0.0, ptc.getStep(step).getR(), 0);\n+            assertEquals(-87.517240, ptc.getStep(1).getX(), 0.000001);\n+            assertEquals(0.0, ptc.getStep(step).getG(), 0);\n+            assertEquals(0.0, ptc.getStep(step).getB(), 0);\n+        }\n+\n+        // Check alpha in some steps\n+        assertEquals(14.4, ptc.getStep(1).getAlpha(), 0.001);\n+        assertEquals(8.4, ptc.getStep(6).getAlpha(), 0.001);\n+        assertEquals(2.4, ptc.getStep(11).getAlpha(), 0.001);\n+        assertEquals(0.0, ptc.getStep(13).getAlpha(), 0.0);\n+        assertEquals(-1.2, ptc.getStep(14).getAlpha(), 0.001);\n+        assertEquals(-7.2, ptc.getStep(19).getAlpha(), 0.001);\n+        assertEquals(-14.4, ptc.getStep(25).getAlpha(), 0.001);\n+    }\n+\n+    private Network networkModel(TestGridModel testGridModel, Conversion.Config config) throws IOException {", "originalCommit": "232033a708d3b92f9247ba45d070f601e45ef804", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMyMzY0Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1306#discussion_r427323647", "bodyText": "Done", "author": "marqueslanauja", "createdAt": "2020-05-19T13:59:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5NjM3Ng=="}], "type": "inlineReview", "revised_code": {"commit": "43a3a2a847eeb28325dd4dca58c0e89950412b33", "chunk": "diff --git a/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/conformity/modified/CgmesConformity1ModifiedConversionTest.java b/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/conformity/modified/CgmesConformity1ModifiedConversionTest.java\nindex eb4df4954..e2a2a63fd 100644\n--- a/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/conformity/modified/CgmesConformity1ModifiedConversionTest.java\n+++ b/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/test/conformity/modified/CgmesConformity1ModifiedConversionTest.java\n\n@@ -101,7 +101,7 @@ public class CgmesConformity1ModifiedConversionTest {\n         assertEquals(-14.4, ptc.getStep(25).getAlpha(), 0.001);\n     }\n \n-    private Network networkModel(TestGridModel testGridModel, Conversion.Config config) throws IOException {\n+    private static Network networkModel(TestGridModel testGridModel, Conversion.Config config) throws IOException {\n \n         ReadOnlyDataSource ds = testGridModel.dataSource();\n         String impl = TripleStoreFactory.defaultImplementation();\n"}}, {"oid": "43a3a2a847eeb28325dd4dca58c0e89950412b33", "url": "https://github.com/powsybl/powsybl-core/commit/43a3a2a847eeb28325dd4dca58c0e89950412b33", "message": "Apply reviewer comments\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-05-19T13:55:07Z", "type": "commit"}, {"oid": "d8214d2599815792c55678eb7045fbe6bafe98fe", "url": "https://github.com/powsybl/powsybl-core/commit/d8214d2599815792c55678eb7045fbe6bafe98fe", "message": "Merge branch 'master' into cgmes_conversion_phaseTapChangerLinear", "committedDate": "2020-05-20T18:20:02Z", "type": "commit"}]}