{"pr_number": 1325, "pr_title": "check voltage level on both side of the line", "pr_createdAt": "2020-05-27T07:03:41Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1325", "timeline": [{"oid": "e1ee3c0945dc53527045e87327efa4ad159b7c96", "url": "https://github.com/powsybl/powsybl-core/commit/e1ee3c0945dc53527045e87327efa4ad159b7c96", "message": "check voltage level on both side of the line\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>", "committedDate": "2020-05-26T16:10:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMzE0NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r430923144", "bodyText": "I think this test should be done in the UcteElement::fix method or in the constructor.\n@murgeyseb what do you think?\n@jlabous You should give more information in the error message: with your proposal, if this exception is thrown, I don't know which line is the faulty one so it's impossible to debug/fix it.", "author": "mathbagu", "createdAt": "2020-05-27T07:50:49Z", "path": "ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java", "diffHunk": "@@ -399,6 +399,9 @@ private static void createLines(UcteNetworkExt ucteNetwork, Network network) {\n         for (UcteLine ucteLine : ucteNetwork.getLines()) {\n             UcteNodeCode nodeCode1 = ucteLine.getId().getNodeCode1();\n             UcteNodeCode nodeCode2 = ucteLine.getId().getNodeCode2();\n+            if (!nodeCode1.getVoltageLevelCode().equals(nodeCode2.getVoltageLevelCode())) {\n+                throw new UcteException(\"Line with two different nominal voltages\");\n+            }", "originalCommit": "e1ee3c0945dc53527045e87327efa4ad159b7c96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkzMDUwOQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r430930509", "bodyText": "Yes it could be done in UcteElement::fix, it is true. And the message should be more explicit.\nBut this method is supposed to fix the issue, not throw exception, but why not.", "author": "murgeyseb", "createdAt": "2020-05-27T08:03:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMzE0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzNDY2OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1325#discussion_r431634668", "bodyText": "So maybe we can do the test in the constructor then?", "author": "mathbagu", "createdAt": "2020-05-28T07:28:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMzE0NA=="}], "type": "inlineReview", "revised_code": {"commit": "4da806a724326995316cbb57b81116cc37b923b9", "chunk": "diff --git a/ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java b/ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java\nindex b701997ae..c64aefc09 100644\n--- a/ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java\n+++ b/ucte/ucte-converter/src/main/java/com/powsybl/ucte/converter/UcteImporter.java\n\n@@ -399,9 +399,7 @@ public class UcteImporter implements Importer {\n         for (UcteLine ucteLine : ucteNetwork.getLines()) {\n             UcteNodeCode nodeCode1 = ucteLine.getId().getNodeCode1();\n             UcteNodeCode nodeCode2 = ucteLine.getId().getNodeCode2();\n-            if (!nodeCode1.getVoltageLevelCode().equals(nodeCode2.getVoltageLevelCode())) {\n-                throw new UcteException(\"Line with two different nominal voltages\");\n-            }\n+\n             UcteVoltageLevel ucteVoltageLevel1 = ucteNetwork.getVoltageLevel(nodeCode1);\n             UcteVoltageLevel ucteVoltageLevel2 = ucteNetwork.getVoltageLevel(nodeCode2);\n \n"}}, {"oid": "4da806a724326995316cbb57b81116cc37b923b9", "url": "https://github.com/powsybl/powsybl-core/commit/4da806a724326995316cbb57b81116cc37b923b9", "message": "move check in ucteElement\n\nSigned-off-by: J\u00e9r\u00e9my LABOUS <jlabous@silicom.fr>", "committedDate": "2020-05-27T09:59:22Z", "type": "commit"}, {"oid": "e25b5c82403cd510438743a43c42e4be90846c12", "url": "https://github.com/powsybl/powsybl-core/commit/e25b5c82403cd510438743a43c42e4be90846c12", "message": "Fix implementation\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>", "committedDate": "2020-05-28T07:38:35Z", "type": "commit"}, {"oid": "1737781f89011afbf1267b26436c2167a287ae69", "url": "https://github.com/powsybl/powsybl-core/commit/1737781f89011afbf1267b26436c2167a287ae69", "message": "Merge branch 'master' into issue_1242_check_lines_nominal_voltage", "committedDate": "2020-05-28T07:41:49Z", "type": "commit"}]}