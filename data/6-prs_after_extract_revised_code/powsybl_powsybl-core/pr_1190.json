{"pr_number": 1190, "pr_title": "Sensi csv export", "pr_createdAt": "2020-02-28T10:42:21Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1190", "timeline": [{"oid": "3c8283aff535a43d64a438919fc997f3b12f7f91", "url": "https://github.com/powsybl/powsybl-core/commit/3c8283aff535a43d64a438919fc997f3b12f7f91", "message": "Add a CSV exporter for the sensitivity results\n\n- TODO: add tests\n\nSigned-off-by: Agn\u00e8s Leroy <agnes.leroy@rte-france.com>", "committedDate": "2020-02-28T09:40:22Z", "type": "commit"}, {"oid": "876868dde47f25f7e1e928d17254be24df27c551", "url": "https://github.com/powsybl/powsybl-core/commit/876868dde47f25f7e1e928d17254be24df27c551", "message": "Add tests for the CSV export of the results\n\nSigned-off-by: Agn\u00e8s Leroy <agnes.leroy@rte-france.com>", "committedDate": "2020-02-28T10:28:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNDA3MA==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385734070", "bodyText": "year 2020 for the copyright", "author": "MioRtia", "createdAt": "2020-02-28T14:46:05Z", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)", "originalCommit": "876868dde47f25f7e1e928d17254be24df27c551", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c373e4b840187595686fc12b77230e78fcf5d04f", "chunk": "diff --git a/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java b/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java\nindex 2cb978141..484506878 100644\n--- a/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java\n+++ b/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java\n\n@@ -1,5 +1,5 @@\n /**\n- * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n  * This Source Code Form is subject to the terms of the Mozilla Public\n  * License, v. 2.0. If a copy of the MPL was not distributed with this\n  * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNDI2OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385734269", "bodyText": "Since you created this class, put yourself as author", "author": "MioRtia", "createdAt": "2020-02-28T14:46:26Z", "path": "sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.sensitivity.converter;\n+\n+import com.google.auto.service.AutoService;\n+import com.powsybl.commons.io.table.*;\n+import com.powsybl.sensitivity.SensitivityComputationResults;\n+\n+import java.io.IOException;\n+import java.io.UncheckedIOException;\n+import java.io.Writer;\n+import java.util.Locale;\n+\n+/**\n+ * A SensitivityComputationResultExporter implementation which export the result in JSON\n+ *\n+ * @author Sebastien Murgey {@literal <sebastien.murgey at rte-france.com>}", "originalCommit": "876868dde47f25f7e1e928d17254be24df27c551", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c373e4b840187595686fc12b77230e78fcf5d04f", "chunk": "diff --git a/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java b/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java\nindex 2cb978141..484506878 100644\n--- a/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java\n+++ b/sensitivity-api/src/main/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporter.java\n\n@@ -1,5 +1,5 @@\n /**\n- * Copyright (c) 2018, RTE (http://www.rte-france.com)\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n  * This Source Code Form is subject to the terms of the Mozilla Public\n  * License, v. 2.0. If a copy of the MPL was not distributed with this\n  * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNDQ1MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385734451", "bodyText": "add copyright", "author": "MioRtia", "createdAt": "2020-02-28T14:46:44Z", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package com.powsybl.sensitivity.converter;", "originalCommit": "876868dde47f25f7e1e928d17254be24df27c551", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c373e4b840187595686fc12b77230e78fcf5d04f", "chunk": "diff --git a/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java b/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\nindex 528bb10cd..e4c236412 100644\n--- a/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\n+++ b/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\n\n@@ -1,3 +1,9 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n package com.powsybl.sensitivity.converter;\n \n import com.powsybl.commons.AbstractConverterTest;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTczNDUwMQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385734501", "bodyText": "add author", "author": "MioRtia", "createdAt": "2020-02-28T14:46:50Z", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package com.powsybl.sensitivity.converter;\n+\n+import com.powsybl.commons.AbstractConverterTest;\n+import com.powsybl.sensitivity.SensitivityComputationResults;\n+import com.powsybl.sensitivity.SensitivityFactor;\n+import com.powsybl.sensitivity.SensitivityValue;\n+import com.powsybl.sensitivity.json.SensitivityFactorsJsonSerializer;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.nio.file.Path;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n+public class CsvSensitivityComputationResultExporterTest extends AbstractConverterTest {", "originalCommit": "876868dde47f25f7e1e928d17254be24df27c551", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c373e4b840187595686fc12b77230e78fcf5d04f", "chunk": "diff --git a/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java b/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\nindex 528bb10cd..e4c236412 100644\n--- a/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\n+++ b/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\n\n@@ -1,3 +1,9 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n package com.powsybl.sensitivity.converter;\n \n import com.powsybl.commons.AbstractConverterTest;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc0MDEzOA==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385740138", "bodyText": "You should avoid to log on std/err, use a logger instead.", "author": "geofjamg", "createdAt": "2020-02-28T14:56:53Z", "path": "sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package com.powsybl.sensitivity.converter;\n+\n+import com.powsybl.commons.AbstractConverterTest;\n+import com.powsybl.sensitivity.SensitivityComputationResults;\n+import com.powsybl.sensitivity.SensitivityFactor;\n+import com.powsybl.sensitivity.SensitivityValue;\n+import com.powsybl.sensitivity.json.SensitivityFactorsJsonSerializer;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.nio.file.Path;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n+public class CsvSensitivityComputationResultExporterTest extends AbstractConverterTest {\n+\n+    private static SensitivityComputationResults createSensitivityResult() {\n+        // read sensitivity factors\n+        List<SensitivityFactor> factors = Collections.emptyList();\n+        try {\n+            factors = SensitivityFactorsJsonSerializer.read(new InputStreamReader(SensitivityComputationResultExportersTest.class.getResourceAsStream(\"/sensitivityFactorsExample.json\")));\n+        } catch (IOException e) {\n+            e.printStackTrace();", "originalCommit": "876868dde47f25f7e1e928d17254be24df27c551", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc0MTMzMQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385741331", "bodyText": "in that case you need to rethrow the exception to stop the test\nthrow new UncheckedIoException(e)", "author": "geofjamg", "createdAt": "2020-02-28T14:58:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc0MDEzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc0NjMzOA==", "url": "https://github.com/powsybl/powsybl-core/pull/1190#discussion_r385746338", "bodyText": "I'll make the change, thanks!", "author": "agnesLeroy", "createdAt": "2020-02-28T15:07:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc0MDEzOA=="}], "type": "inlineReview", "revised_code": {"commit": "c373e4b840187595686fc12b77230e78fcf5d04f", "chunk": "diff --git a/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java b/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\nindex 528bb10cd..e4c236412 100644\n--- a/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\n+++ b/sensitivity-api/src/test/java/com/powsybl/sensitivity/converter/CsvSensitivityComputationResultExporterTest.java\n\n@@ -1,3 +1,9 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n package com.powsybl.sensitivity.converter;\n \n import com.powsybl.commons.AbstractConverterTest;\n"}}, {"oid": "c373e4b840187595686fc12b77230e78fcf5d04f", "url": "https://github.com/powsybl/powsybl-core/commit/c373e4b840187595686fc12b77230e78fcf5d04f", "message": "Fix the copyrights and author info fot the two new files\n\nSigned-off-by: Agn\u00e8s Leroy <agnes.leroy@rte-france.com>", "committedDate": "2020-02-28T14:56:54Z", "type": "commit"}, {"oid": "817edebba88fcc31373fd9d3ca8ea55e4a23f72b", "url": "https://github.com/powsybl/powsybl-core/commit/817edebba88fcc31373fd9d3ca8ea55e4a23f72b", "message": "Remove the use of printStackTrace and throw an exception instead\n\nSigned-off-by: Agn\u00e8s Leroy <agnes.leroy@rte-france.com>", "committedDate": "2020-02-28T15:05:47Z", "type": "commit"}, {"oid": "334765c3377446cb0adf9def62bdf130fc8e98f8", "url": "https://github.com/powsybl/powsybl-core/commit/334765c3377446cb0adf9def62bdf130fc8e98f8", "message": "Merge branch 'master' into sensi_csv_export", "committedDate": "2020-03-02T09:31:01Z", "type": "commit"}, {"oid": "9e1ed6cd4de9d514061d42359a68bffcbf67acde", "url": "https://github.com/powsybl/powsybl-core/commit/9e1ed6cd4de9d514061d42359a68bffcbf67acde", "message": "Add a test to improve coverage and do some refactoring\n\nSigned-off-by: Agn\u00e8s Leroy <agnes.leroy@rte-france.com>", "committedDate": "2020-03-02T10:00:03Z", "type": "commit"}, {"oid": "7ef3d23d69346e7dca14575468ef93f8f7967b51", "url": "https://github.com/powsybl/powsybl-core/commit/7ef3d23d69346e7dca14575468ef93f8f7967b51", "message": "Merge branch 'master' into sensi_csv_export", "committedDate": "2020-03-02T13:16:44Z", "type": "commit"}]}