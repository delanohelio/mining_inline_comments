{"pr_number": 1464, "pr_title": "Introduce CimCharacteristics extension and use in CGMES import", "pr_createdAt": "2020-09-08T12:51:37Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1464", "timeline": [{"oid": "2406ba8d77e0d92389f0ff6e3e2e2dd33b57a001", "url": "https://github.com/powsybl/powsybl-core/commit/2406ba8d77e0d92389f0ff6e3e2e2dd33b57a001", "message": "Introduce new extension CIMCharacteristics\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>\n\ntmp\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-08T12:52:53Z", "type": "commit"}, {"oid": "5062f7de7b31f08fe679316ebc754b919b2fa0d8", "url": "https://github.com/powsybl/powsybl-core/commit/5062f7de7b31f08fe679316ebc754b919b2fa0d8", "message": "Add XML Serializer\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-08T12:52:54Z", "type": "commit"}, {"oid": "e6c32534f89fa930bf99a375c05f770c6e9da115", "url": "https://github.com/powsybl/powsybl-core/commit/e6c32534f89fa930bf99a375c05f770c6e9da115", "message": "Add tests\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-08T12:52:54Z", "type": "commit"}, {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67", "url": "https://github.com/powsybl/powsybl-core/commit/938fb21ff62e384e0862d43fc8462be4025c5c67", "message": "Use extension in CGMES import\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-08T12:52:54Z", "type": "commit"}, {"oid": "938fb21ff62e384e0862d43fc8462be4025c5c67", "url": "https://github.com/powsybl/powsybl-core/commit/938fb21ff62e384e0862d43fc8462be4025c5c67", "message": "Use extension in CGMES import\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-08T12:52:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQ1MzcxMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r485453712", "bodyText": "A drawback of using here the expected exception annotation is that it doesn't ensure that the exception is thrown by the call which you expect will throw the exception (if create() throws a PowsyblException the test remains passed)", "author": "flo-dup", "createdAt": "2020-09-09T09:00:43Z", "path": "cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.cgmes.conversion.extensions;\n+\n+import com.powsybl.cgmes.conversion.elements.CgmesTopologyKind;\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.iidm.network.Network;\n+import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public class CIMCharacteristicsTest {\n+\n+    @Test\n+    public void test() {\n+        Network network = EurostagTutorialExample1Factory.create();\n+        network.newExtension(CIMCharacteristicsAdder.class)\n+                .setTopologyKind(CgmesTopologyKind.NODE_BREAKER)\n+                .setCimVersion(16)\n+                .add();\n+        CIMCharacteristics extension = network.getExtension(CIMCharacteristics.class);\n+        assertNotNull(extension);\n+        assertEquals(CgmesTopologyKind.NODE_BREAKER, extension.getTopologyKind());\n+        assertEquals(16, extension.getCimVersion());\n+    }\n+\n+    @Test(expected = PowsyblException.class)\n+    public void invalid() {\n+        EurostagTutorialExample1Factory.create().newExtension(CIMCharacteristicsAdder.class).add();", "originalCommit": "938fb21ff62e384e0862d43fc8462be4025c5c67", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e97f80449e66348fc6d0cd4a4ec8e8b59efdb524", "chunk": "diff --git a/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java b/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java\nindex c283692df..336cc2ff2 100644\n--- a/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java\n+++ b/cgmes/cgmes-conversion/src/test/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristicsTest.java\n\n@@ -10,7 +10,9 @@ import com.powsybl.cgmes.conversion.elements.CgmesTopologyKind;\n import com.powsybl.commons.PowsyblException;\n import com.powsybl.iidm.network.Network;\n import com.powsybl.iidm.network.test.EurostagTutorialExample1Factory;\n+import org.junit.Rule;\n import org.junit.Test;\n+import org.junit.rules.ExpectedException;\n \n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0MzkwOA==", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r486143908", "bodyText": "I think that you should call your extension it CimCharacteristics. For CGMES, we in general choose Cgmes instead of CGMES. What do you think ?", "author": "annetill", "createdAt": "2020-09-10T08:03:26Z", "path": "cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.cgmes.conversion.extensions;\n+\n+import com.powsybl.cgmes.conversion.elements.CgmesTopologyKind;\n+import com.powsybl.commons.extensions.Extension;\n+import com.powsybl.iidm.network.Network;\n+\n+/**\n+ * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n+ */\n+public interface CIMCharacteristics extends Extension<Network> {", "originalCommit": "938fb21ff62e384e0862d43fc8462be4025c5c67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM3Mzc4Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1464#discussion_r486373787", "bodyText": "You're right, I will change it", "author": "miovd", "createdAt": "2020-09-10T14:08:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE0MzkwOA=="}], "type": "inlineReview", "revised_code": {"commit": "4637bdd5984bba4befb55bc04c5c53762b2dd3a5", "chunk": "diff --git a/cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java b/cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CimCharacteristics.java\nsimilarity index 91%\nrename from cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java\nrename to cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CimCharacteristics.java\nindex fecb849fe..ea88902bf 100644\n--- a/cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CIMCharacteristics.java\n+++ b/cgmes/cgmes-conversion/src/main/java/com/powsybl/cgmes/conversion/extensions/CimCharacteristics.java\n\n@@ -13,7 +13,7 @@ import com.powsybl.iidm.network.Network;\n /**\n  * @author Miora Ralambotiana <miora.ralambotiana at rte-france.com>\n  */\n-public interface CIMCharacteristics extends Extension<Network> {\n+public interface CimCharacteristics extends Extension<Network> {\n \n     CgmesTopologyKind getTopologyKind();\n \n"}}, {"oid": "e97f80449e66348fc6d0cd4a4ec8e8b59efdb524", "url": "https://github.com/powsybl/powsybl-core/commit/e97f80449e66348fc6d0cd4a4ec8e8b59efdb524", "message": "Add rule to test (reviewer's comment)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-10T14:32:58Z", "type": "commit"}, {"oid": "4637bdd5984bba4befb55bc04c5c53762b2dd3a5", "url": "https://github.com/powsybl/powsybl-core/commit/4637bdd5984bba4befb55bc04c5c53762b2dd3a5", "message": "Rename CIMCharacteristics as CimCharacteristics (reviewer's comment)\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-09-10T14:43:45Z", "type": "commit"}]}