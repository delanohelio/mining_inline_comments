{"pr_number": 6438, "pr_title": "Fix #4840: Datatable attribute 'renderEmptyFacets'", "pr_createdAt": "2020-10-22T13:28:22Z", "pr_url": "https://github.com/primefaces/primefaces/pull/6438", "timeline": [{"oid": "6af9d867551f0b2e76282b7ab5a38ad46e9e72d1", "url": "https://github.com/primefaces/primefaces/commit/6af9d867551f0b2e76282b7ab5a38ad46e9e72d1", "message": "Fix #4840: Datatable attribute 'renderEmptyFacets'", "committedDate": "2020-10-22T13:27:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE2NjY0NA==", "url": "https://github.com/primefaces/primefaces/pull/6438#discussion_r510166644", "bodyText": "switch the statements", "author": "tandraschko", "createdAt": "2020-10-22T13:35:49Z", "path": "src/main/java/org/primefaces/util/ComponentUtils.java", "diffHunk": "@@ -470,25 +470,35 @@ public static boolean isRequestSource(UIComponent component, FacesContext contex\n     }\n \n     /**\n-     * Checks if the facet and one of the first level child's is rendered.\n+     * Checks if the facet and one of the first level children is rendered.\n      * @param facet The Facet component to check\n-     * @return true when facet and one of the first level child's is rendered.\n+     * @param ignoreChildren flag to ignore children and only check the facet itself\n+     * @return true if the facet should be rendered, false if not\n      */\n-    public static boolean shouldRenderFacet(UIComponent facet) {\n+    public static boolean shouldRenderFacet(UIComponent facet, boolean ignoreChildren) {\n         if (facet == null || !facet.isRendered()) {\n             // For any future version of JSF where the f:facet gets a rendered attribute (https://github.com/javaserverfaces/mojarra/issues/4299)\n             // or there is only 1 child.\n             return false;\n         }\n \n         // Facet has no child but is rendered\n-        if (facet.getChildren().isEmpty()) {\n+        if (facet.getChildren().isEmpty() || ignoreChildren) {", "originalCommit": "6af9d867551f0b2e76282b7ab5a38ad46e9e72d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NDYzMw==", "url": "https://github.com/primefaces/primefaces/pull/6438#discussion_r510684633", "bodyText": "also always use facet.getChildCount() instead of facet.getChildren().size()/isEmpty()", "author": "tandraschko", "createdAt": "2020-10-23T07:21:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE2NjY0NA=="}], "type": "inlineReview", "revised_code": {"commit": "337872e5ff0faee6b2c3d3f18606bb1e232f6ee9", "chunk": "diff --git a/src/main/java/org/primefaces/util/ComponentUtils.java b/src/main/java/org/primefaces/util/ComponentUtils.java\nindex ca8f79f53..71a1cee8c 100644\n--- a/src/main/java/org/primefaces/util/ComponentUtils.java\n+++ b/src/main/java/org/primefaces/util/ComponentUtils.java\n\n@@ -483,7 +483,7 @@ public class ComponentUtils {\n         }\n \n         // Facet has no child but is rendered\n-        if (facet.getChildren().isEmpty() || ignoreChildren) {\n+        if (ignoreChildren || facet.getChildCount() == 0) {\n             return true;\n         }\n \n"}}, {"oid": "337872e5ff0faee6b2c3d3f18606bb1e232f6ee9", "url": "https://github.com/primefaces/primefaces/commit/337872e5ff0faee6b2c3d3f18606bb1e232f6ee9", "message": "Fix #4840: Datatable attribute 'renderEmptyFacets'", "committedDate": "2020-10-27T16:30:47Z", "type": "commit"}]}