{"pr_number": 6235, "pr_title": "Fix #6226: Added closestWidgetVar EL function", "pr_createdAt": "2020-08-19T17:09:35Z", "pr_url": "https://github.com/primefaces/primefaces/pull/6235", "timeline": [{"oid": "040660a6a657a4d931d934a0a1fffa4237a3366a", "url": "https://github.com/primefaces/primefaces/commit/040660a6a657a4d931d934a0a1fffa4237a3366a", "message": "Added closestWidgetVar EL function", "committedDate": "2020-08-19T17:04:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE5MzczMQ==", "url": "https://github.com/primefaces/primefaces/pull/6235#discussion_r473193731", "bodyText": "I wasn't sure where to put these methods... is it okay to have them here?", "author": "jepsar", "createdAt": "2020-08-19T17:11:07Z", "path": "src/main/java/org/primefaces/expression/SearchExpressionUtils.java", "diffHunk": "@@ -85,10 +87,30 @@ public static String resolveWidgetVar(String expression, UIComponent component)\n                 expression);\n \n         if (resolvedComponent instanceof Widget) {\n-            return \"PF('\" + ((Widget) resolvedComponent).resolveWidgetVar(context) + \"')\";\n+            return javascriptWidgetVar((Widget) resolvedComponent, context);\n         }\n         else {\n             throw new FacesException(\"Component with clientId \" + resolvedComponent.getClientId() + \" is not a Widget\");\n         }\n     }\n+\n+    // used by p:closestWidgetVar\n+    public static String closestWidgetVar() {", "originalCommit": "040660a6a657a4d931d934a0a1fffa4237a3366a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3c4aa9c13504aabc8a9d760ee343f09178f14886", "chunk": "diff --git a/src/main/java/org/primefaces/expression/SearchExpressionUtils.java b/src/main/java/org/primefaces/expression/SearchExpressionUtils.java\nindex 414b7b27a..ffb89e4c9 100644\n--- a/src/main/java/org/primefaces/expression/SearchExpressionUtils.java\n+++ b/src/main/java/org/primefaces/expression/SearchExpressionUtils.java\n\n@@ -87,7 +87,7 @@ public class SearchExpressionUtils {\n                 expression);\n \n         if (resolvedComponent instanceof Widget) {\n-            return javascriptWidgetVar((Widget) resolvedComponent, context);\n+            return ((Widget) resolvedComponent).resolveWidgetVar(context);\n         }\n         else {\n             throw new FacesException(\"Component with clientId \" + resolvedComponent.getClientId() + \" is not a Widget\");\n"}}, {"oid": "3c4aa9c13504aabc8a9d760ee343f09178f14886", "url": "https://github.com/primefaces/primefaces/commit/3c4aa9c13504aabc8a9d760ee343f09178f14886", "message": "Removed PF('') wrapper", "committedDate": "2020-08-19T19:49:40Z", "type": "commit"}, {"oid": "3ef61f03d5e922b7f9c9b0f5c45b71bb44abbbea", "url": "https://github.com/primefaces/primefaces/commit/3ef61f03d5e922b7f9c9b0f5c45b71bb44abbbea", "message": "Removed closestWidgetVarFor", "committedDate": "2020-08-19T19:52:52Z", "type": "commit"}]}