{"pr_number": 6453, "pr_title": "[2.19.x] DDF-6221 Fixes NPE in MatchAnyValidator", "pr_createdAt": "2020-12-09T17:23:40Z", "pr_url": "https://github.com/codice/ddf/pull/6453", "timeline": [{"oid": "cb0ad03a9f8c63218d78ba873bf8ccac3c0d9818", "url": "https://github.com/codice/ddf/commit/cb0ad03a9f8c63218d78ba873bf8ccac3c0d9818", "message": "DDF-6221 Fixed NPE in MatchAnyValidator", "committedDate": "2020-12-09T17:19:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxOTU3Mg==", "url": "https://github.com/codice/ddf/pull/6453#discussion_r539519572", "bodyText": "Would it make more sense to initialize this.validators as an empty List in this case? Unless the distinction between an empty validators and a null validators matters, I think that we could prevent complications down the line if we reduce the number of null values which our codebase permits.", "author": "kentmorrissey", "createdAt": "2020-12-09T17:50:36Z", "path": "catalog/core/catalog-core-validator/src/main/java/ddf/catalog/validation/impl/validator/MatchAnyValidator.java", "diffHunk": "@@ -34,11 +34,16 @@\n   private final List<AttributeValidator> validators;\n \n   public MatchAnyValidator(List<AttributeValidator> validators) {\n-    this.validators =\n-        validators\n-            .stream()\n-            .sorted(Comparator.comparingInt(Object::hashCode))\n-            .collect(Collectors.toList());\n+    // validators has to be initialized\n+    if (validators == null) {\n+      this.validators = null;", "originalCommit": "cb0ad03a9f8c63218d78ba873bf8ccac3c0d9818", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTU0MTUzNg==", "url": "https://github.com/codice/ddf/pull/6453#discussion_r539541536", "bodyText": "I do like the idea of empty list better. It seems the unit tests pass with empty list initialization so that seems to work. Initially I was trying to avoid the NPE.", "author": "shaundmorris", "createdAt": "2020-12-09T18:22:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxOTU3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "734926b39e05edbe9cf9807cf0c65c1d3226e349", "chunk": "diff --git a/catalog/core/catalog-core-validator/src/main/java/ddf/catalog/validation/impl/validator/MatchAnyValidator.java b/catalog/core/catalog-core-validator/src/main/java/ddf/catalog/validation/impl/validator/MatchAnyValidator.java\nindex cb97c3accf..9c3d84835d 100644\n--- a/catalog/core/catalog-core-validator/src/main/java/ddf/catalog/validation/impl/validator/MatchAnyValidator.java\n+++ b/catalog/core/catalog-core-validator/src/main/java/ddf/catalog/validation/impl/validator/MatchAnyValidator.java\n\n@@ -36,7 +37,7 @@\n   public MatchAnyValidator(List<AttributeValidator> validators) {\n     // validators has to be initialized\n     if (validators == null) {\n-      this.validators = null;\n+      this.validators = Collections.<AttributeValidator>emptyList();\n     } else {\n       this.validators =\n           validators\n"}}, {"oid": "734926b39e05edbe9cf9807cf0c65c1d3226e349", "url": "https://github.com/codice/ddf/commit/734926b39e05edbe9cf9807cf0c65c1d3226e349", "message": "DDF-6221 initialize validators to an empty list in  MatchAnyValidator", "committedDate": "2020-12-09T18:24:16Z", "type": "commit"}, {"oid": "07afc08f89848be2d78b6cfb361275d986c499b1", "url": "https://github.com/codice/ddf/commit/07afc08f89848be2d78b6cfb361275d986c499b1", "message": "DDF-6221 made AttributeValidator list dependency optional", "committedDate": "2020-12-10T16:17:56Z", "type": "commit"}]}