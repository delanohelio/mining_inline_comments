{"pr_number": 5918, "pr_title": "DDF-5907 - Fix spellcheck Showing Results For", "pr_createdAt": "2020-03-19T16:38:16Z", "pr_url": "https://github.com/codice/ddf/pull/5918", "timeline": [{"oid": "50751d92618a58ae02845c2bd747e0bbe3df4007", "url": "https://github.com/codice/ddf/commit/50751d92618a58ae02845c2bd747e0bbe3df4007", "message": "DDF-5907 - Fix spellcheck Showing Results For", "committedDate": "2020-03-19T16:20:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTIwMDc1Nw==", "url": "https://github.com/codice/ddf/pull/5918#discussion_r395200757", "bodyText": "\u270f\ufe0f Possibly worth changing the method name to maybe something like findBestCollation or something that matches the return value more appropriately.", "author": "cantstoptheunk", "createdAt": "2020-03-19T17:31:47Z", "path": "catalog/core/catalog-core-solr/src/main/java/ddf/catalog/source/solr/SolrMetacardClientImpl.java", "diffHunk": "@@ -260,7 +260,8 @@ public SourceResponse query(QueryRequest request) throws UnsupportedQueryExcepti\n         addDocsToResults(docs, results);\n \n         if (userSpellcheckIsOn && solrSpellcheckHasResults(solrResponse)) {\n-          query.set(\"q\", findQueryToResend(query, solrResponse));\n+          Collation collation = findQueryToResend(query, solrResponse);", "originalCommit": "50751d92618a58ae02845c2bd747e0bbe3df4007", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f11f8c32fc10427318ac8f9f48ce2defb11334a2", "chunk": "diff --git a/catalog/core/catalog-core-solr/src/main/java/ddf/catalog/source/solr/SolrMetacardClientImpl.java b/catalog/core/catalog-core-solr/src/main/java/ddf/catalog/source/solr/SolrMetacardClientImpl.java\nindex 307dd8d064..f123084c2e 100644\n--- a/catalog/core/catalog-core-solr/src/main/java/ddf/catalog/source/solr/SolrMetacardClientImpl.java\n+++ b/catalog/core/catalog-core-solr/src/main/java/ddf/catalog/source/solr/SolrMetacardClientImpl.java\n\n@@ -260,7 +260,7 @@ public SourceResponse query(QueryRequest request) throws UnsupportedQueryExcepti\n         addDocsToResults(docs, results);\n \n         if (userSpellcheckIsOn && solrSpellcheckHasResults(solrResponse)) {\n-          Collation collation = findQueryToResend(query, solrResponse);\n+          Collation collation = getCollationToResend(query, solrResponse);\n           query.set(\"q\", collation.getCollationQueryString());\n           query.set(\"spellcheck\", false);\n           QueryResponse solrResponseRequery = client.query(query, METHOD.POST);\n"}}, {"oid": "f11f8c32fc10427318ac8f9f48ce2defb11334a2", "url": "https://github.com/codice/ddf/commit/f11f8c32fc10427318ac8f9f48ce2defb11334a2", "message": "Update function name", "committedDate": "2020-03-19T17:33:25Z", "type": "commit"}, {"oid": "ba320aad4468079d7cb72df5c798797683085b9d", "url": "https://github.com/codice/ddf/commit/ba320aad4468079d7cb72df5c798797683085b9d", "message": "Change corrections to use a set", "committedDate": "2020-03-25T15:33:28Z", "type": "commit"}, {"oid": "3f163562e747d7b9533aad0fcbd09a417f326ae3", "url": "https://github.com/codice/ddf/commit/3f163562e747d7b9533aad0fcbd09a417f326ae3", "message": "Update to use sets but return lists", "committedDate": "2020-03-25T20:10:05Z", "type": "commit"}]}