{"pr_number": 5951, "pr_title": "[2.20.x] DDF-5649 G-6176 Add interface to filter warnings (#5843)", "pr_createdAt": "2020-03-28T12:14:33Z", "pr_url": "https://github.com/codice/ddf/pull/5951", "timeline": [{"oid": "f5c674b83193212cab298ab911ad4cd200c6b4b4", "url": "https://github.com/codice/ddf/commit/f5c674b83193212cab298ab911ad4cd200c6b4b4", "message": "DDF-5649 G-6176 Add interface to filter warnings (#5843)\n\nIn response to a malfunction of a query which the user runs, the user\nwould like a message which describes or explains the malfunction so that\nthe user can more easily resolve the malfunction. This commit supports\nthe user's aforementioned desire in that it:\n\n - adds an interface\u2014SourceWarningsFilter\u2014which allows that a Source\n   which implements it filter the warnings of ProcessingDetails of a\n   SourceResponse which the Source may receive from the execution of a\n   query and, thereby, produce new ProcessingDetails whose warnings\n   contain only each warning of the original ProcessingDetails which\n   describes or explains a malfunction which occurred in the execution\n   of the query\n\n - ensures that the implementations of SourceResponse not return null\n   from getProcessingDetails(), in accordance with the dictate of the\n   Javadoc of SourceResponse.getProcessingDetails()\n\n - refactors some of the code which relates to the changes listed above", "committedDate": "2020-03-28T12:12:20Z", "type": "commit"}, {"oid": "d4e51974588c66b53775ef1dd39dc3ae5015fed4", "url": "https://github.com/codice/ddf/commit/d4e51974588c66b53775ef1dd39dc3ae5015fed4", "message": "DDF-5649 G-6176 routes details back to client", "committedDate": "2020-03-28T15:40:04Z", "type": "commit"}, {"oid": "d4e51974588c66b53775ef1dd39dc3ae5015fed4", "url": "https://github.com/codice/ddf/commit/d4e51974588c66b53775ef1dd39dc3ae5015fed4", "message": "DDF-5649 G-6176 routes details back to client", "committedDate": "2020-03-28T15:40:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY4NDgzMw==", "url": "https://github.com/codice/ddf/pull/5951#discussion_r399684833", "bodyText": "Not sure the context, but just making sure we are fine finding only the first and not using the rest? We don't need to collapse/reduce them into a single set?", "author": "rzwiefel", "createdAt": "2020-03-28T17:01:53Z", "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/EndpointUtil.java", "diffHunk": "@@ -551,7 +551,13 @@ public CqlQueryResponse executeCqlQuery(CqlRequest cqlRequest)\n                 .filter(Objects::nonNull)\n                 .map(QueryResponse::getProperties)\n                 .findFirst()\n-                .orElse(Collections.emptyMap()));\n+                .orElse(Collections.emptyMap()),\n+            responses\n+                .stream()\n+                .filter(Objects::nonNull)\n+                .map(QueryResponse::getProcessingDetails)\n+                .findFirst()", "originalCommit": "d4e51974588c66b53775ef1dd39dc3ae5015fed4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwMDQzMQ==", "url": "https://github.com/codice/ddf/pull/5951#discussion_r399700431", "bodyText": "good catch - fixed", "author": "jlcsmith", "createdAt": "2020-03-28T19:33:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY4NDgzMw=="}], "type": "inlineReview", "revised_code": {"commit": "49c1537d82efa17388638d2ecff390491d6a6865", "chunk": "diff --git a/catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/EndpointUtil.java b/catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/EndpointUtil.java\nindex bf4ffd838a..976cf27a64 100644\n--- a/catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/EndpointUtil.java\n+++ b/catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/EndpointUtil.java\n\n@@ -556,8 +557,12 @@ public CqlQueryResponse executeCqlQuery(CqlRequest cqlRequest)\n                 .stream()\n                 .filter(Objects::nonNull)\n                 .map(QueryResponse::getProcessingDetails)\n-                .findFirst()\n-                .orElse(Collections.EMPTY_SET));\n+                .reduce(\n+                    new HashSet<>(),\n+                    (l, r) -> {\n+                      l.addAll(r);\n+                      return l;\n+                    }));\n \n     stopwatch.stop();\n \n"}}, {"oid": "49c1537d82efa17388638d2ecff390491d6a6865", "url": "https://github.com/codice/ddf/commit/49c1537d82efa17388638d2ecff390491d6a6865", "message": "DDF-5649 G-6176 corrects details accumulator", "committedDate": "2020-03-28T18:59:57Z", "type": "commit"}]}