{"pr_number": 725, "pr_title": "Check that the expected parameter is a String instead of using .toString()", "pr_createdAt": "2020-04-10T14:51:00Z", "pr_url": "https://github.com/senx/warp10-platform/pull/725", "timeline": [{"oid": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "url": "https://github.com/senx/warp10-platform/commit/48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "message": "Check that the expected parameter is a String instead of using .toString()", "committedDate": "2020-04-10T14:47:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5NDAyNQ==", "url": "https://github.com/senx/warp10-platform/pull/725#discussion_r406794025", "bodyText": "remove mention of the stack", "author": "hbs", "createdAt": "2020-04-10T14:54:46Z", "path": "warp10/src/main/java/io/warp10/script/functions/ASSERTMSG.java", "diffHunk": "@@ -30,8 +30,12 @@ public ASSERTMSG(String name) {\n   @Override\n   public Object apply(WarpScriptStack stack) throws WarpScriptException {\n     Object o = stack.pop();\n-    \n-    String msg = o.toString();\n+\n+    if (!(o instanceof String)) {\n+      throw new WarpScriptException(getName() + \" expects a STRING message on top of the stack.\");", "originalCommit": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "chunk": "diff --git a/warp10/src/main/java/io/warp10/script/functions/ASSERTMSG.java b/warp10/src/main/java/io/warp10/script/functions/ASSERTMSG.java\nindex 9ba0d20e..618ace4e 100644\n--- a/warp10/src/main/java/io/warp10/script/functions/ASSERTMSG.java\n+++ b/warp10/src/main/java/io/warp10/script/functions/ASSERTMSG.java\n\n@@ -32,7 +32,7 @@ public class ASSERTMSG extends NamedWarpScriptFunction implements WarpScriptStac\n     Object o = stack.pop();\n \n     if (!(o instanceof String)) {\n-      throw new WarpScriptException(getName() + \" expects a STRING message on top of the stack.\");\n+      throw new WarpScriptException(getName() + \" expects a STRING message.\");\n     }\n \n     String msg = (String) o;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5NDA4Mg==", "url": "https://github.com/senx/warp10-platform/pull/725#discussion_r406794082", "bodyText": "ditto", "author": "hbs", "createdAt": "2020-04-10T14:54:53Z", "path": "warp10/src/main/java/io/warp10/script/functions/CHRONOEND.java", "diffHunk": "@@ -37,7 +37,12 @@ public Object apply(WarpScriptStack stack) throws WarpScriptException {\n     long endNanos = System.nanoTime();\n \n     Object o1 = stack.pop();\n-    String alias = o1.toString();\n+\n+    if (!(o1 instanceof String)) {\n+      throw new WarpScriptException(getName() + \" expects a String alias on top of the stack.\");", "originalCommit": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "chunk": "diff --git a/warp10/src/main/java/io/warp10/script/functions/CHRONOEND.java b/warp10/src/main/java/io/warp10/script/functions/CHRONOEND.java\nindex 7478b12c..14d256f4 100644\n--- a/warp10/src/main/java/io/warp10/script/functions/CHRONOEND.java\n+++ b/warp10/src/main/java/io/warp10/script/functions/CHRONOEND.java\n\n@@ -39,7 +39,7 @@ public class CHRONOEND extends NamedWarpScriptFunction implements WarpScriptStac\n     Object o1 = stack.pop();\n \n     if (!(o1 instanceof String)) {\n-      throw new WarpScriptException(getName() + \" expects a String alias on top of the stack.\");\n+      throw new WarpScriptException(getName() + \" expects a STRING alias.\");\n     }\n \n     String alias = (String) o1;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5NDE2OQ==", "url": "https://github.com/senx/warp10-platform/pull/725#discussion_r406794169", "bodyText": "ditto", "author": "hbs", "createdAt": "2020-04-10T14:55:06Z", "path": "warp10/src/main/java/io/warp10/script/functions/CHRONOSTART.java", "diffHunk": "@@ -32,7 +32,12 @@ public CHRONOSTART(String name) {\n   @Override\n   public Object apply(WarpScriptStack stack) throws WarpScriptException {\n     Object o1 = stack.pop();\n-    String alias = o1.toString();\n+\n+    if (!(o1 instanceof String)) {\n+      throw new WarpScriptException(getName() + \" expects a String alias on top of the stack.\");", "originalCommit": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "chunk": "diff --git a/warp10/src/main/java/io/warp10/script/functions/CHRONOSTART.java b/warp10/src/main/java/io/warp10/script/functions/CHRONOSTART.java\nindex 0de9d91d..4367da52 100644\n--- a/warp10/src/main/java/io/warp10/script/functions/CHRONOSTART.java\n+++ b/warp10/src/main/java/io/warp10/script/functions/CHRONOSTART.java\n\n@@ -34,7 +34,7 @@ public class CHRONOSTART extends NamedWarpScriptFunction implements WarpScriptSt\n     Object o1 = stack.pop();\n \n     if (!(o1 instanceof String)) {\n-      throw new WarpScriptException(getName() + \" expects a String alias on top of the stack.\");\n+      throw new WarpScriptException(getName() + \" expects a STRING alias.\");\n     }\n \n     String alias = (String) o1;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5NDU3OA==", "url": "https://github.com/senx/warp10-platform/pull/725#discussion_r406794578", "bodyText": "ditto", "author": "hbs", "createdAt": "2020-04-10T14:56:01Z", "path": "warp10/src/main/java/io/warp10/script/functions/FFTWINDOW.java", "diffHunk": "@@ -55,6 +55,10 @@ public FFTWINDOW(String name) {\n     Map<String,Object> params = new HashMap<String, Object>();\n     \n     Object window = stack.pop();\n+\n+    if (!(window instanceof String)) {\n+      throw new WarpScriptException(getName() + \" expects a STRING on top of the stack\");", "originalCommit": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "chunk": "diff --git a/warp10/src/main/java/io/warp10/script/functions/FFTWINDOW.java b/warp10/src/main/java/io/warp10/script/functions/FFTWINDOW.java\nindex d21fbb62..bb721e02 100644\n--- a/warp10/src/main/java/io/warp10/script/functions/FFTWINDOW.java\n+++ b/warp10/src/main/java/io/warp10/script/functions/FFTWINDOW.java\n\n@@ -57,7 +57,7 @@ public class FFTWINDOW extends GTSStackFunction {\n     Object window = stack.pop();\n \n     if (!(window instanceof String)) {\n-      throw new WarpScriptException(getName() + \" expects a STRING on top of the stack\");\n+      throw new WarpScriptException(getName() + \" expects a STRING algorithm name.\");\n     }\n     \n     params.put(WINDOWING_ALGORITHM, window);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5NDg4NQ==", "url": "https://github.com/senx/warp10-platform/pull/725#discussion_r406794885", "bodyText": "ditto", "author": "hbs", "createdAt": "2020-04-10T14:56:42Z", "path": "warp10/src/main/java/io/warp10/script/functions/RENAME.java", "diffHunk": "@@ -40,18 +40,22 @@ public RENAME(String name) {\n   public ElementStackFunction generateFunction(WarpScriptStack stack) throws WarpScriptException {\n     final Object top = stack.pop();\n \n+    if(!(top instanceof String)) {\n+      throw new WarpScriptException(getName() + \" expects a STRING on top of the stack.\");", "originalCommit": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "chunk": "diff --git a/warp10/src/main/java/io/warp10/script/functions/RENAME.java b/warp10/src/main/java/io/warp10/script/functions/RENAME.java\nindex f123fd78..0a9b13c4 100644\n--- a/warp10/src/main/java/io/warp10/script/functions/RENAME.java\n+++ b/warp10/src/main/java/io/warp10/script/functions/RENAME.java\n\n@@ -41,7 +41,7 @@ public class RENAME extends ElementOrListStackFunction {\n     final Object top = stack.pop();\n \n     if(!(top instanceof String)) {\n-      throw new WarpScriptException(getName() + \" expects a STRING on top of the stack.\");\n+      throw new WarpScriptException(getName() + \" expects a STRING name.\");\n     }\n \n     return new ElementStackFunction() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5NTA0OA==", "url": "https://github.com/senx/warp10-platform/pull/725#discussion_r406795048", "bodyText": "ditto", "author": "hbs", "createdAt": "2020-04-10T14:57:04Z", "path": "warp10/src/main/java/io/warp10/script/functions/TIMED.java", "diffHunk": "@@ -38,7 +38,12 @@ public TIMED(String name) {\n   @Override\n   public Object apply(WarpScriptStack stack) throws WarpScriptException {\n     Object o1 = stack.pop();\n-    String alias = o1.toString();\n+\n+    if (!(o1 instanceof String)) {\n+      throw new WarpScriptException(getName() + \" expects a String alias on top of the stack.\");", "originalCommit": "48001d5bc7a83daf843e5b54c1e5bb896efc4dbf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "chunk": "diff --git a/warp10/src/main/java/io/warp10/script/functions/TIMED.java b/warp10/src/main/java/io/warp10/script/functions/TIMED.java\nindex 1ad137d0..69ee6c87 100644\n--- a/warp10/src/main/java/io/warp10/script/functions/TIMED.java\n+++ b/warp10/src/main/java/io/warp10/script/functions/TIMED.java\n\n@@ -40,7 +40,7 @@ public class TIMED extends NamedWarpScriptFunction implements WarpScriptStackFun\n     Object o1 = stack.pop();\n \n     if (!(o1 instanceof String)) {\n-      throw new WarpScriptException(getName() + \" expects a String alias on top of the stack.\");\n+      throw new WarpScriptException(getName() + \" expects a STRING alias.\");\n     }\n \n     String alias = (String) o1;\n"}}, {"oid": "b613c0951d2c330ec0b93195bc870c0d83ac1f50", "url": "https://github.com/senx/warp10-platform/commit/b613c0951d2c330ec0b93195bc870c0d83ac1f50", "message": "Remove mention of the stack in error messages", "committedDate": "2020-04-14T09:54:16Z", "type": "commit"}]}