{"pr_number": 7481, "pr_title": "CB-5896: Use the IAM service for the CDP_FREEIPA_HA entitlement", "pr_createdAt": "2020-03-05T19:58:41Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7481", "timeline": [{"oid": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb", "url": "https://github.com/hortonworks/cloudbreak/commit/8d83dddd2c3e66c0f685202af335ae96cdc9dbcb", "message": "CB-5896: Use the IAM service for the CDP_FREEIPA_HA entitlement\n\nFix the CDP_FREEIPA_HA entitlement check to use the IAM service as the\ninternal actor's service. The UMS requires the internal actor to be\nIAM.", "committedDate": "2020-03-05T19:50:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU1NTc1Mg==", "url": "https://github.com/hortonworks/cloudbreak/pull/7481#discussion_r388555752", "bodyText": "So yes, the internal actor is currently a single, fixed CRN. In that fixed string the IAM is the service type. Until we change that I think that the InternalCrnBuilder should not take any parameters. It's most probably not something that you introduced or need to fix. It's just a thought.", "author": "giladwolff", "createdAt": "2020-03-05T20:46:55Z", "path": "freeipa/src/main/java/com/sequenceiq/freeipa/controller/validation/CreateFreeIpaRequestValidator.java", "diffHunk": "@@ -19,7 +19,7 @@\n @Component\n public class CreateFreeIpaRequestValidator implements Validator<CreateFreeIpaRequest> {\n \n-    static final String FREEIPA_INTERNAL_ACTOR_CRN = new InternalCrnBuilder(Crn.Service.FREEIPA).getInternalCrnForServiceAsString();\n+    static final String INTERNAL_ACTOR_CRN = new InternalCrnBuilder(Crn.Service.IAM).getInternalCrnForServiceAsString();", "originalCommit": "8d83dddd2c3e66c0f685202af335ae96cdc9dbcb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}