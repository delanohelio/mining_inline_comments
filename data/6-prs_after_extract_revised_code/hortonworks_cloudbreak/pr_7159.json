{"pr_number": 7159, "pr_title": "CB-5150 added parcel manifest checks", "pr_createdAt": "2020-01-28T16:19:22Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7159", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjIxMjY2NQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7159#discussion_r372212665", "bodyText": "Is the parcel url should be ended with /?", "author": "topolyai5", "createdAt": "2020-01-29T06:47:42Z", "path": "core/src/test/java/com/sequenceiq/cloudbreak/util/ParcelAccessibilityTest.java", "diffHunk": "@@ -26,29 +28,47 @@\n \n public class ParcelAccessibilityTest {\n \n+    private static Map<String, Object> appYaml;\n+\n+    @BeforeAll\n+    public static void setUp() throws IOException, URISyntaxException {\n+        appYaml = readCoreAppYaml();\n+    }\n+\n+    @Test\n+    public void testParcelAccessibility() {\n+        List<DefaultCDHInfo> defaultCDHInfo = getCsds(appYaml);\n+        defaultCDHInfo.stream()\n+                .filter(s -> !s.getParcels().isEmpty())\n+                .flatMap(s -> s.getParcels().stream())\n+                .flatMap(s -> s.getCsd().stream())\n+                .forEach(this::validateUrl);\n+    }\n+\n     @Test\n-    public void testParcelAccessibility() throws URISyntaxException, IOException {\n+    void validateParcelUrls() {\n+        List<DefaultCDHInfo> defaultCDHInfo = getCsds(appYaml);\n+        defaultCDHInfo.stream()\n+                .filter(s -> !s.getRepo().getStack().isEmpty())\n+                .flatMap(s -> s.getRepo().getStack().entrySet().stream())\n+                .map(s -> s.getValue() + \"manifest.json\")", "originalCommit": "9c86446c2203fc3d6b1301097959f2f853c5a5e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjIyMjc4NA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7159#discussion_r372222784", "bodyText": "So far all parcel URL's ended with a slash and from now it will be enforced.", "author": "lnardai", "createdAt": "2020-01-29T07:21:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjIxMjY2NQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "25473b47bbc3331263753c4f46c5aa9759a23624", "url": "https://github.com/hortonworks/cloudbreak/commit/25473b47bbc3331263753c4f46c5aa9759a23624", "message": "CB-5150 added parcel manifest checks", "committedDate": "2020-01-29T08:58:03Z", "type": "commit"}, {"oid": "25473b47bbc3331263753c4f46c5aa9759a23624", "url": "https://github.com/hortonworks/cloudbreak/commit/25473b47bbc3331263753c4f46c5aa9759a23624", "message": "CB-5150 added parcel manifest checks", "committedDate": "2020-01-29T08:58:03Z", "type": "forcePushed"}]}