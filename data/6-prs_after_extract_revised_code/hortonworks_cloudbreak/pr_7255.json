{"pr_number": 7255, "pr_title": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "pr_createdAt": "2020-02-10T15:11:40Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7255", "timeline": [{"oid": "af1b92150186ff709074edd082a226ef0cb4d39b", "url": "https://github.com/hortonworks/cloudbreak/commit/af1b92150186ff709074edd082a226ef0cb4d39b", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "committedDate": "2020-02-10T16:23:55Z", "type": "forcePushed"}, {"oid": "c9b8d748f82e671a520b49f572f82eae556298b6", "url": "https://github.com/hortonworks/cloudbreak/commit/c9b8d748f82e671a520b49f572f82eae556298b6", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "committedDate": "2020-02-12T14:32:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODcxODk0NA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7255#discussion_r378718944", "bodyText": "The method should be returned with an empty list, we should avoid the unnecessary NPE", "author": "topolyai5", "createdAt": "2020-02-13T08:44:30Z", "path": "auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java", "diffHunk": "@@ -453,6 +454,18 @@ public void deleteMachineUserAccessKeys(String actorCrn, String machineUserCrn,\n         }\n     }\n \n+    /**\n+     * Gather anonymization rules for a specific account\n+     * NOTE: not supported yet on UMS side\n+     * @param accountId account that owns the anonymization rules\n+     * @param actorCrn actor that requests to gather the anonymization rules\n+     * @return a list of anonymization rules for an UMS account\n+     */\n+    public List<AnonymizationRule> getAnonymizationRules(String accountId, String actorCrn) {\n+        LOGGER.debug(\"Try getting anonymization rules for {} by {}\", accountId, actorCrn);\n+        return null;", "originalCommit": "c9b8d748f82e671a520b49f572f82eae556298b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODczMjU1OA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7255#discussion_r378732558", "bodyText": "if you read the description, it's returning null \"by design\" as it does nothing, that's always the case, it cannot cause NPE .\nI can do that you asked but does not make that much sense to change it or not", "author": "oleewere", "createdAt": "2020-02-13T09:11:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODcxODk0NA=="}], "type": "inlineReview", "revised_code": {"commit": "74d87bad1b2c428984b375c8b04b48b7300f95d6", "chunk": "diff --git a/auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java b/auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java\nindex 4600c3e0ba..497e7d0428 100644\n--- a/auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java\n+++ b/auth-connector/src/main/java/com/sequenceiq/cloudbreak/auth/altus/GrpcUmsClient.java\n\n@@ -463,7 +464,7 @@ public class GrpcUmsClient {\n      */\n     public List<AnonymizationRule> getAnonymizationRules(String accountId, String actorCrn) {\n         LOGGER.debug(\"Try getting anonymization rules for {} by {}\", accountId, actorCrn);\n-        return null;\n+        return new ArrayList<>();\n     }\n \n     private ManagedChannelWrapper makeWrapper() {\n"}}, {"oid": "74d87bad1b2c428984b375c8b04b48b7300f95d6", "url": "https://github.com/hortonworks/cloudbreak/commit/74d87bad1b2c428984b375c8b04b48b7300f95d6", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "committedDate": "2020-02-13T09:11:04Z", "type": "forcePushed"}, {"oid": "01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "url": "https://github.com/hortonworks/cloudbreak/commit/01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "committedDate": "2020-02-13T13:39:25Z", "type": "commit"}, {"oid": "01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "url": "https://github.com/hortonworks/cloudbreak/commit/01b974446c0116b8eb21e2a9fb410b9a7e8220ef", "message": "CB-5408. Apply anonymization rules on td-agent configs (by Salt)", "committedDate": "2020-02-13T13:39:25Z", "type": "forcePushed"}]}