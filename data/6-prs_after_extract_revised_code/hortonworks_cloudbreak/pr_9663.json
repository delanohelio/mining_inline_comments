{"pr_number": 9663, "pr_title": "CB-10351: Improve exception logging when aws api throws exception during Rds creation", "pr_createdAt": "2020-12-16T13:13:58Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/9663", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI4ODE4Mg==", "url": "https://github.com/hortonworks/cloudbreak/pull/9663#discussion_r544288182", "bodyText": "it is not ignored anymore. Could you please rename it?", "author": "topolyai5", "createdAt": "2020-12-16T13:14:58Z", "path": "cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/connector/resource/AwsRdsLaunchService.java", "diffHunk": "@@ -88,8 +87,9 @@\n         } catch (AmazonServiceException ignored) {", "originalCommit": "b9f664de7dd4b86d329f4e33292139be1832f30b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d497a8aed4c306ab3460d97fe5c86b0794c937e1", "chunk": "diff --git a/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/connector/resource/AwsRdsLaunchService.java b/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/connector/resource/AwsRdsLaunchService.java\nindex 0b126040a5..71a4e80f14 100644\n--- a/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/connector/resource/AwsRdsLaunchService.java\n+++ b/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/connector/resource/AwsRdsLaunchService.java\n\n@@ -84,12 +84,12 @@ public class AwsRdsLaunchService {\n         try {\n             cfRetryClient.describeStacks(describeStacksRequest);\n             LOGGER.debug(\"Stack already exists: {}\", cFStackName);\n-        } catch (AmazonServiceException ignored) {\n+        } catch (AmazonServiceException exception) {\n             // all subnets desired for DB subnet group are in the stack\n             boolean existingSubnet = awsNetworkView.isExistingSubnet();\n-            LOGGER.warn(\"API call failed with this error:\", ignored);\n+            LOGGER.warn(\"API call failed with this error:\", exception);\n             if (!existingSubnet) {\n-                throw new CloudConnectorException(\"Can only create RDS instance with existing subnets\", ignored);\n+                throw new CloudConnectorException(\"Can only create RDS instance with existing subnets\", exception);\n             }\n             CloudResource cloudFormationStack = new Builder().type(ResourceType.CLOUDFORMATION_STACK).name(cFStackName).build();\n             resourceNotifier.notifyAllocation(cloudFormationStack, ac.getCloudContext());\n"}}, {"oid": "d497a8aed4c306ab3460d97fe5c86b0794c937e1", "url": "https://github.com/hortonworks/cloudbreak/commit/d497a8aed4c306ab3460d97fe5c86b0794c937e1", "message": "CB-10351: Improve exception logging when aws api throws exception during Rds creation\nCurrently when the stackDescribe API call failing the code is ignoring the AmazonServiceException. Therefore we don't what was the error.\nIn this fix I've added exception logging and I extended our CloudConnectorException with the original exception as root cause.", "committedDate": "2020-12-16T13:47:53Z", "type": "commit"}, {"oid": "d497a8aed4c306ab3460d97fe5c86b0794c937e1", "url": "https://github.com/hortonworks/cloudbreak/commit/d497a8aed4c306ab3460d97fe5c86b0794c937e1", "message": "CB-10351: Improve exception logging when aws api throws exception during Rds creation\nCurrently when the stackDescribe API call failing the code is ignoring the AmazonServiceException. Therefore we don't what was the error.\nIn this fix I've added exception logging and I extended our CloudConnectorException with the original exception as root cause.", "committedDate": "2020-12-16T13:47:53Z", "type": "forcePushed"}]}