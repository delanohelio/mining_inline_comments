{"pr_number": 7544, "pr_title": "CB-5727\tSolve CM clock offset issues", "pr_createdAt": "2020-03-11T16:21:34Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7544", "timeline": [{"oid": "df17662e16a479af39ac11b38e5c8b7369dbb234", "url": "https://github.com/hortonworks/cloudbreak/commit/df17662e16a479af39ac11b38e5c8b7369dbb234", "message": "CB-5727 Yarn warning suppression logic refactor", "committedDate": "2020-03-11T16:21:11Z", "type": "commit"}, {"oid": "df17662e16a479af39ac11b38e5c8b7369dbb234", "url": "https://github.com/hortonworks/cloudbreak/commit/df17662e16a479af39ac11b38e5c8b7369dbb234", "message": "CB-5727 Yarn warning suppression logic refactor", "committedDate": "2020-03-11T16:21:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI2MjAyNg==", "url": "https://github.com/hortonworks/cloudbreak/pull/7544#discussion_r391262026", "bodyText": "This condition could also go to the yarn related implementation.", "author": "biharitomi", "createdAt": "2020-03-11T20:54:17Z", "path": "cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/ClouderaManagerSetupService.java", "diffHunk": "@@ -227,7 +219,7 @@ public Cluster buildCluster(\n             installCluster(cluster, apiClusterTemplate, clouderaManagerResourceApi, prewarmed);\n             clouderaManagerMgmtLaunchService.startManagementServices(stack, apiClient);\n             if (CloudPlatform.YARN.equalsIgnoreCase(stack.getCloudPlatform())) {", "originalCommit": "df17662e16a479af39ac11b38e5c8b7369dbb234", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fc961676118a5c2c84ba4489c1991bd98aa3612a", "chunk": "diff --git a/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/ClouderaManagerSetupService.java b/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/ClouderaManagerSetupService.java\nindex e0188629fb..609530feff 100644\n--- a/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/ClouderaManagerSetupService.java\n+++ b/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/ClouderaManagerSetupService.java\n\n@@ -218,9 +217,7 @@ public class ClouderaManagerSetupService implements ClusterSetupService {\n             }\n             installCluster(cluster, apiClusterTemplate, clouderaManagerResourceApi, prewarmed);\n             clouderaManagerMgmtLaunchService.startManagementServices(stack, apiClient);\n-            if (CloudPlatform.YARN.equalsIgnoreCase(stack.getCloudPlatform())) {\n-                clouderaManagerYarnSetupService.suppressWarnings(stack, apiClient);\n-            }\n+            clouderaManagerYarnSetupService.suppressWarnings(stack, apiClient);\n             configureKerberos(kerberosConfig, clouderaManagerRepoDetails);\n             clouderaManagerConfigService.setCdpEnvironmentIfCmVersionAtLeast(CLOUDERAMANAGER_VERSION_7_0_2, apiClient, clientConfig);\n         } catch (CancellationException cancellationException) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI2NDU1Nw==", "url": "https://github.com/hortonworks/cloudbreak/pull/7544#discussion_r391264557", "bodyText": "I think it could be part of CmConfigServiceDelegate interface as a default method.", "author": "biharitomi", "createdAt": "2020-03-11T20:59:21Z", "path": "cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/util/ConfigUtils.java", "diffHunk": "@@ -25,4 +26,14 @@ public static ApiConfig makeApiConfig(String name, String value) {\n         apiConfig.setValue(value);\n         return apiConfig;\n     }\n+\n+    public static void addConfig(ApiRole apiRole, ApiConfig apiConfig) {", "originalCommit": "df17662e16a479af39ac11b38e5c8b7369dbb234", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fc961676118a5c2c84ba4489c1991bd98aa3612a", "chunk": "diff --git a/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/util/ConfigUtils.java b/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/util/ConfigUtils.java\nindex ac5a703ca9..4bbce62f46 100644\n--- a/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/util/ConfigUtils.java\n+++ b/cluster-cm/src/main/java/com/sequenceiq/cloudbreak/cm/util/ConfigUtils.java\n\n@@ -26,14 +25,4 @@ public class ConfigUtils {\n         apiConfig.setValue(value);\n         return apiConfig;\n     }\n-\n-    public static void addConfig(ApiRole apiRole, ApiConfig apiConfig) {\n-        if (apiRole.getConfig() == null || apiRole.getConfig().getItems() == null) {\n-            ApiConfigList apiConfigList = new ApiConfigList();\n-            apiConfigList.addItemsItem(apiConfig);\n-            apiRole.setConfig(apiConfigList);\n-        } else {\n-            apiRole.getConfig().getItems().add(apiConfig);\n-        }\n-    }\n }\n"}}, {"oid": "fc961676118a5c2c84ba4489c1991bd98aa3612a", "url": "https://github.com/hortonworks/cloudbreak/commit/fc961676118a5c2c84ba4489c1991bd98aa3612a", "message": "CB-5727 Refactor yarn suppressions", "committedDate": "2020-03-12T09:42:07Z", "type": "commit"}]}