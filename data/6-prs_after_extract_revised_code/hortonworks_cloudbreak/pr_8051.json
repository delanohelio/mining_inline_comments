{"pr_number": 8051, "pr_title": "CB-7065 Backward compatibility for Environment flow enums", "pr_createdAt": "2020-05-14T10:58:21Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8051", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA1MzI2NQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8051#discussion_r425053265", "bodyText": "why we dont add a default implementation here?", "author": "doktoric", "createdAt": "2020-05-14T11:04:16Z", "path": "common/src/main/java/com/sequenceiq/cloudbreak/converter/DefaultEnumConverter.java", "diffHunk": "@@ -24,9 +26,12 @@ public E convertToEntityAttribute(String attribute) {\n         } catch (Exception e) {\n             LOGGER.info(\"The {} value is not backward compatible: {}\", getDefault().getClass().getSimpleName(), attribute);\n         }\n-        return getDefault();\n+        Optional<E> convertedEnum = tryConvert(attribute);\n+        return convertedEnum.orElse(getDefault());\n     }\n \n     public abstract E getDefault();\n \n+    public abstract Optional<E> tryConvert(String attribute);", "originalCommit": "a379c48b6e7063e7b87d15fffdcab13c479beac9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA2NjkzMw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8051#discussion_r425066933", "bodyText": "Ehm, great idea.", "author": "gergopapi2", "createdAt": "2020-05-14T11:31:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTA1MzI2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "03b29cef2a300de66c8fa678579884c0c249b1d7", "chunk": "diff --git a/common/src/main/java/com/sequenceiq/cloudbreak/converter/DefaultEnumConverter.java b/common/src/main/java/com/sequenceiq/cloudbreak/converter/DefaultEnumConverter.java\nindex 256bbb4bf3..3b81b15ab8 100644\n--- a/common/src/main/java/com/sequenceiq/cloudbreak/converter/DefaultEnumConverter.java\n+++ b/common/src/main/java/com/sequenceiq/cloudbreak/converter/DefaultEnumConverter.java\n\n@@ -32,6 +32,7 @@ public abstract class DefaultEnumConverter<E extends Enum<E>> implements Attribu\n \n     public abstract E getDefault();\n \n-    public abstract Optional<E> tryConvert(String attribute);\n-\n+    protected Optional<E> tryConvert(String attribute) {\n+        return Optional.empty();\n+    }\n }\n"}}, {"oid": "03b29cef2a300de66c8fa678579884c0c249b1d7", "url": "https://github.com/hortonworks/cloudbreak/commit/03b29cef2a300de66c8fa678579884c0c249b1d7", "message": "CB-7065 Backward compatibility for Environment flow enums", "committedDate": "2020-05-14T11:41:33Z", "type": "forcePushed"}, {"oid": "19dfe6f9943af2e24f73ad9984359d90f743bec4", "url": "https://github.com/hortonworks/cloudbreak/commit/19dfe6f9943af2e24f73ad9984359d90f743bec4", "message": "CB-7065 Backward compatibility for Environment flow enums", "committedDate": "2020-05-14T11:43:31Z", "type": "forcePushed"}, {"oid": "cec4c000f49f06212b2de890aed62bd5fc8c335c", "url": "https://github.com/hortonworks/cloudbreak/commit/cec4c000f49f06212b2de890aed62bd5fc8c335c", "message": "CB-7065 Backward compatibility for Environment flow enums", "committedDate": "2020-05-14T13:19:13Z", "type": "commit"}, {"oid": "cec4c000f49f06212b2de890aed62bd5fc8c335c", "url": "https://github.com/hortonworks/cloudbreak/commit/cec4c000f49f06212b2de890aed62bd5fc8c335c", "message": "CB-7065 Backward compatibility for Environment flow enums", "committedDate": "2020-05-14T13:19:13Z", "type": "forcePushed"}]}