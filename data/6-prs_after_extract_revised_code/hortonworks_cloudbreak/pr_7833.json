{"pr_number": 7833, "pr_title": "CB-4925 Enable EBS encryption for FreeIPA and DL", "pr_createdAt": "2020-04-19T22:42:56Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7833", "timeline": [{"oid": "015ca1a966b9af3fa253e1a94a5651cf721dac30", "url": "https://github.com/hortonworks/cloudbreak/commit/015ca1a966b9af3fa253e1a94a5651cf721dac30", "message": "CB-4925 Enable EBS encryption for FreeIPA and DL\n\nSquashed commits:\nCB-4925 Add further logging for encrypted images, volumes & snapshots", "committedDate": "2020-04-23T15:27:05Z", "type": "forcePushed"}, {"oid": "6c10c63b015094ce2eef5fbd32986de68e631436", "url": "https://github.com/hortonworks/cloudbreak/commit/6c10c63b015094ce2eef5fbd32986de68e631436", "message": "CB-4925 Enable EBS encryption for FreeIPA and DL\n\nSquashed commits:\nCB-4925 Add further logging for encrypted images, volumes & snapshots", "committedDate": "2020-04-28T13:35:45Z", "type": "forcePushed"}, {"oid": "bcc8235b8e7221fe43ef73f780d5dd175fe37651", "url": "https://github.com/hortonworks/cloudbreak/commit/bcc8235b8e7221fe43ef73f780d5dd175fe37651", "message": "CB-4925 Enable EBS encryption for FreeIPA and DL\n\nSquashed commits:\nCB-4925 Add further logging for encrypted images, volumes & snapshots\nCB-4925 Add entitlement check\nCB-4925 Add logs to AwsVolumeResourceBuilder", "committedDate": "2020-05-23T17:16:40Z", "type": "forcePushed"}, {"oid": "6cc9dece5558d0530bfefe85eae8792e16c27c47", "url": "https://github.com/hortonworks/cloudbreak/commit/6cc9dece5558d0530bfefe85eae8792e16c27c47", "message": "CB-4925 Enable EBS encryption for FreeIPA and DL\n\nSquashed commits:\nCB-4925 Add further logging for encrypted images, volumes & snapshots\nCB-4925 Add entitlement check\nCB-4925 Add logs to AwsVolumeResourceBuilder\nCB-4925 Add logs to ResourceCreateThread;\n        fix logs in AwsVolumeResourceBuilder\nCB-4925 Fix comment & log formatting in\n        StackRequestManifester.setupCloudStorageAccountMapping", "committedDate": "2020-06-06T18:41:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk0NTk3MQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7833#discussion_r437945971", "bodyText": "I think it could be on info level, as it is an important info. This log should have been added by me years ago :)", "author": "biharitomi", "createdAt": "2020-06-10T08:19:52Z", "path": "cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/encryption/EncryptedImageCopyService.java", "diffHunk": "@@ -78,8 +78,9 @@\n                 .collect(Collectors.toMap(Entry::getKey, e -> e.getValue().getImageId()));\n         if (!imageIdByGroupName.isEmpty()) {\n             Collection<String> imageIds = new HashSet<>(imageIdByGroupName.values());\n-            LOGGER.debug(\"Start polling the availability of the created AMIs: '{}'\", String.join(\",\", imageIds));\n+            LOGGER.debug(\"Start polling the availability of the created encrypted AMIs: '{}'\", String.join(\",\", imageIds));\n             checkBooleanPollTask(awsPollTaskFactory.newAMICopyStatusCheckerTask(ac, imageIds, client));\n+            LOGGER.debug(\"All created encrypted AMIs are available: '{}'\", String.join(\",\", imageIds));", "originalCommit": "6cc9dece5558d0530bfefe85eae8792e16c27c47", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3OTA5NA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7833#discussion_r439779094", "bodyText": "Done.", "author": "lajosrodek", "createdAt": "2020-06-14T00:08:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk0NTk3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "150d7a32ed5c80961389e8a84c452a7a0eb6a544", "chunk": "diff --git a/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/encryption/EncryptedImageCopyService.java b/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/encryption/EncryptedImageCopyService.java\nindex 345b4fcdef..caa0cd3c0a 100644\n--- a/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/encryption/EncryptedImageCopyService.java\n+++ b/cloud-aws/src/main/java/com/sequenceiq/cloudbreak/cloud/aws/encryption/EncryptedImageCopyService.java\n\n@@ -80,7 +80,7 @@ public class EncryptedImageCopyService {\n             Collection<String> imageIds = new HashSet<>(imageIdByGroupName.values());\n             LOGGER.debug(\"Start polling the availability of the created encrypted AMIs: '{}'\", String.join(\",\", imageIds));\n             checkBooleanPollTask(awsPollTaskFactory.newAMICopyStatusCheckerTask(ac, imageIds, client));\n-            LOGGER.debug(\"All created encrypted AMIs are available: '{}'\", String.join(\",\", imageIds));\n+            LOGGER.info(\"All created encrypted AMIs are available: '{}'\", String.join(\",\", imageIds));\n         }\n         return imageIdByGroupName;\n     }\n"}}, {"oid": "150d7a32ed5c80961389e8a84c452a7a0eb6a544", "url": "https://github.com/hortonworks/cloudbreak/commit/150d7a32ed5c80961389e8a84c452a7a0eb6a544", "message": "CB-4925 Enable EBS encryption for FreeIPA and DL\n\nSquashed commits:\nCB-4925 Add further logging for encrypted images, volumes & snapshots\nCB-4925 Add entitlement check\nCB-4925 Add logs to AwsVolumeResourceBuilder\nCB-4925 Add logs to ResourceCreateThread;\n        fix logs in AwsVolumeResourceBuilder\nCB-4925 Fix comment & log formatting in\n        StackRequestManifester.setupCloudStorageAccountMapping\nCB-4925 Add unit tests; honor all user-specified encryption setting in\n        StackRequestManifester, including EncryptionType.NONE", "committedDate": "2020-06-13T22:57:19Z", "type": "commit"}, {"oid": "150d7a32ed5c80961389e8a84c452a7a0eb6a544", "url": "https://github.com/hortonworks/cloudbreak/commit/150d7a32ed5c80961389e8a84c452a7a0eb6a544", "message": "CB-4925 Enable EBS encryption for FreeIPA and DL\n\nSquashed commits:\nCB-4925 Add further logging for encrypted images, volumes & snapshots\nCB-4925 Add entitlement check\nCB-4925 Add logs to AwsVolumeResourceBuilder\nCB-4925 Add logs to ResourceCreateThread;\n        fix logs in AwsVolumeResourceBuilder\nCB-4925 Fix comment & log formatting in\n        StackRequestManifester.setupCloudStorageAccountMapping\nCB-4925 Add unit tests; honor all user-specified encryption setting in\n        StackRequestManifester, including EncryptionType.NONE", "committedDate": "2020-06-13T22:57:19Z", "type": "forcePushed"}]}