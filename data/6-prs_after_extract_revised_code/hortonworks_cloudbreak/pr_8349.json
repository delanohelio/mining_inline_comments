{"pr_number": 8349, "pr_title": "CB-7474 Updating SDXService to override sdx internal create when the \u2026", "pr_createdAt": "2020-06-19T23:17:09Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8349", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1MTgxOQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8349#discussion_r443651819", "bodyText": "Rephrase and update the comment, and point to the JIRA for more information.", "author": "kmanamcheri", "createdAt": "2020-06-22T15:40:30Z", "path": "datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java", "diffHunk": "@@ -265,6 +265,8 @@ private StackV4Request getStackRequest(SdxClusterRequest sdxClusterRequest, Stac\n             stackRequest.getCluster().setRangerRazEnabled(sdxClusterRequest.isEnableRangerRaz());\n             return stackRequest;\n         } else {\n+            //The cli flag overrides the sdx json's ranger raz setting", "originalCommit": "669a8e59830467d7ec8943e8d2099e0590bb36e2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2d7f55d37b2890c2d1e155efed8fd8251e3c159e", "chunk": "diff --git a/datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java b/datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java\nindex 259f7a3fe6..d572bc1331 100644\n--- a/datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java\n+++ b/datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java\n\n@@ -265,7 +265,9 @@ public class SdxService implements ResourceIdProvider, ResourceBasedCrnProvider\n             stackRequest.getCluster().setRangerRazEnabled(sdxClusterRequest.isEnableRangerRaz());\n             return stackRequest;\n         } else {\n-            //The cli flag overrides the sdx json's ranger raz setting\n+            // We have provided a --ranger-raz-enabled flag in the CLI, but it will\n+            // get overwritten if you use a custom json (using --cli-json). To avoid\n+            // this, we will set the raz enablement here as well. See CB-7474 for more details\n             internalStackV4Request.getCluster().setRangerRazEnabled(sdxClusterRequest.isEnableRangerRaz());\n             return internalStackV4Request;\n         }\n"}}, {"oid": "2d7f55d37b2890c2d1e155efed8fd8251e3c159e", "url": "https://github.com/hortonworks/cloudbreak/commit/2d7f55d37b2890c2d1e155efed8fd8251e3c159e", "message": "CB-7474 Updating SDXService to override sdx internal create when the Raz config is set on the cli but not on the cluster json.", "committedDate": "2020-06-22T19:32:00Z", "type": "commit"}, {"oid": "2d7f55d37b2890c2d1e155efed8fd8251e3c159e", "url": "https://github.com/hortonworks/cloudbreak/commit/2d7f55d37b2890c2d1e155efed8fd8251e3c159e", "message": "CB-7474 Updating SDXService to override sdx internal create when the Raz config is set on the cli but not on the cluster json.", "committedDate": "2020-06-22T19:32:00Z", "type": "forcePushed"}]}