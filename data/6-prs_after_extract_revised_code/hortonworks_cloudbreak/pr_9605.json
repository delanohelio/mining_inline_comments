{"pr_number": 9605, "pr_title": "Small fixes regarding scaling, templating, know configurations (separated commits)", "pr_createdAt": "2020-12-08T17:19:19Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/9605", "timeline": [{"oid": "1661de9e78da1a292dafd3592d15c207efac9016", "url": "https://github.com/hortonworks/cloudbreak/commit/1661de9e78da1a292dafd3592d15c207efac9016", "message": "CB-10240 Adding application tags to the current modal object to be used in template generation. This helps to provide additional application data into the recipes.", "committedDate": "2020-12-08T17:17:29Z", "type": "commit"}, {"oid": "2ab80c414d0e4ca6ac9c28d02c407035bb6802fc", "url": "https://github.com/hortonworks/cloudbreak/commit/2ab80c414d0e4ca6ac9c28d02c407035bb6802fc", "message": "CB-10228 Adding Livy server to know services and support it. Also fixing the livy service name.", "committedDate": "2020-12-08T17:17:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA4MjQ2MA==", "url": "https://github.com/hortonworks/cloudbreak/pull/9605#discussion_r539082460", "bodyText": "I would add some logs here to be able to identify which entitlements and for which enum were parameterezied.", "author": "biharitomi", "createdAt": "2020-12-09T07:55:22Z", "path": "template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/CmTemplateProcessor.java", "diffHunk": "@@ -253,12 +254,13 @@ public GatewayRecommendation recommendGateway() {\n \n     @Override\n     public AutoscaleRecommendation recommendAutoscale() {\n-        Set<String> time = getRecommendationByBlacklist(BlackListedTimeBasedAutoscaleRole.class, true);\n-        Set<String> load = getRecommendationByBlacklist(BlackListedLoadBasedAutoscaleRole.class, true);\n+        Set<String> time = getRecommendationByBlacklist(BlackListedTimeBasedAutoscaleRole.class, true, List.of());\n+        Set<String> load = getRecommendationByBlacklist(BlackListedLoadBasedAutoscaleRole.class, true, List.of());\n         return new AutoscaleRecommendation(time, load);\n     }\n \n-    private <T extends Enum<T>> Set<String> getRecommendationByBlacklist(Class<T> enumClass, boolean emptyServiceListBlacklisted) {\n+    private <T extends Enum<T>> Set<String> getRecommendationByBlacklist(Class<T> enumClass, boolean emptyServiceListBlacklisted,\n+        List<String> entitlements) {", "originalCommit": "dd8a1763bd0a3c46a95ec89690f79bd153b0b04e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5573c7ec9fff7ed108329fd6eb44d849bbb5c850", "chunk": "diff --git a/template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/CmTemplateProcessor.java b/template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/CmTemplateProcessor.java\nindex e569ae2b31..301b0425d7 100644\n--- a/template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/CmTemplateProcessor.java\n+++ b/template-manager-cmtemplate/src/main/java/com/sequenceiq/cloudbreak/cmtemplate/CmTemplateProcessor.java\n\n@@ -261,6 +261,7 @@ public class CmTemplateProcessor implements BlueprintTextProcessor {\n \n     private <T extends Enum<T>> Set<String> getRecommendationByBlacklist(Class<T> enumClass, boolean emptyServiceListBlacklisted,\n         List<String> entitlements) {\n+        LOGGER.info(\"Get recommendation by blacklisted {} with entitlements.\", enumClass, entitlements);\n         Map<String, Set<String>> componentsByHostGroup = getNonGatewayComponentsByHostGroup();\n         Set<String> recos = new HashSet<>();\n         for (Entry<String, Set<String>> hostGroupServices : componentsByHostGroup.entrySet()) {\n"}}, {"oid": "5573c7ec9fff7ed108329fd6eb44d849bbb5c850", "url": "https://github.com/hortonworks/cloudbreak/commit/5573c7ec9fff7ed108329fd6eb44d849bbb5c850", "message": "CB-10224 Recommendation should also use entitlement based check for streaming and flow services. Now the UI is able to see hostgroups in case of upscale/downscale.", "committedDate": "2020-12-09T08:32:44Z", "type": "forcePushed"}, {"oid": "6b292e25937881f36ffc68edb85fc59c033ef0e6", "url": "https://github.com/hortonworks/cloudbreak/commit/6b292e25937881f36ffc68edb85fc59c033ef0e6", "message": "CB-10224 Recommendation should also use entitlement based check for streaming and flow services. Now the UI is able to see hostgroups in case of upscale/downscale.", "committedDate": "2020-12-09T09:23:17Z", "type": "commit"}, {"oid": "6b292e25937881f36ffc68edb85fc59c033ef0e6", "url": "https://github.com/hortonworks/cloudbreak/commit/6b292e25937881f36ffc68edb85fc59c033ef0e6", "message": "CB-10224 Recommendation should also use entitlement based check for streaming and flow services. Now the UI is able to see hostgroups in case of upscale/downscale.", "committedDate": "2020-12-09T09:23:17Z", "type": "forcePushed"}]}