{"pr_number": 1865, "pr_title": "Issue/1863 mysql sink quote fields", "pr_createdAt": "2020-04-30T13:16:31Z", "pr_url": "https://github.com/telefonicaid/fiware-cygnus/pull/1865", "timeline": [{"oid": "d8a204498fdc0702dfdeee10dc3d435bed597c9d", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/d8a204498fdc0702dfdeee10dc3d435bed597c9d", "message": "Merge pull request #4 from telefonicaid/master\n\nUpdate master", "committedDate": "2020-04-30T10:28:24Z", "type": "commit"}, {"oid": "c37b812d66403c2ba4cb9096f1b16df1848d7908", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/c37b812d66403c2ba4cb9096f1b16df1848d7908", "message": "Quote Sql Fields.\n\nhttps://github.com/telefonicaid/fiware-cygnus/issues/1863", "committedDate": "2020-04-30T10:37:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODAyNDgwNQ==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1865#discussion_r418024805", "bodyText": "An entry in CHANGES_NEXT_RELEASE describing the fix and citing #1863 should be included, using the usual style.", "author": "fgalan", "createdAt": "2020-04-30T13:50:20Z", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java", "diffHunk": "@@ -338,7 +338,7 @@ protected NGSIGenericAggregator getAggregator(boolean rowAttrPersistence) {\n     private void persistAggregation(NGSIGenericAggregator aggregator)", "originalCommit": "c37b812d66403c2ba4cb9096f1b16df1848d7908", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMwMTQxMQ==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1865#discussion_r419301411", "bodyText": "Fixed in 9010472", "author": "fgalan", "createdAt": "2020-05-04T09:05:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODAyNDgwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "32340f3e556712c79c5f7985978f4a30398910a4", "chunk": "diff --git a/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java b/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java\nindex d36e3b04..c888c2fc 100644\n--- a/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java\n+++ b/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java\n\n@@ -338,7 +339,7 @@ public class NGSIMySQLSink extends NGSISink {\n     private void persistAggregation(NGSIGenericAggregator aggregator)\n         throws CygnusPersistenceError, CygnusRuntimeError, CygnusBadContextData {\n         String fieldsForCreate = NGSIUtils.getFieldsForCreate(aggregator.getAggregationToPersist());\n-        String fieldsForInsert = NGSIUtils.getFieldsForInsert(aggregator.getAggregationToPersist(), \"`\");\n+        String fieldsForInsert = NGSIUtils.getFieldsForInsert(aggregator.getAggregationToPersist(), MYSQL_QUOTE_CHAR);\n         String valuesForInsert = NGSIUtils.getValuesForInsert(aggregator.getAggregationToPersist(), aggregator.isAttrNativeTypes());\n         String dbName = aggregator.getDbName(enableLowercase);\n         String tableName = aggregator.getTableName(enableLowercase);\n"}}, {"oid": "9010472afc4beb4dabf3c1e6af240031d599f7c0", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/9010472afc4beb4dabf3c1e6af240031d599f7c0", "message": "Update CHANGES_NEXT_RELEASE\n\n#1863 \r\n#1865", "committedDate": "2020-05-04T06:57:24Z", "type": "commit"}, {"oid": "32340f3e556712c79c5f7985978f4a30398910a4", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/32340f3e556712c79c5f7985978f4a30398910a4", "message": "Extract Constant\n\nIn advance to  @IvanHdzC review ;)", "committedDate": "2020-05-04T09:22:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUxOTIyNA==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1865#discussion_r419519224", "bodyText": "I have just spotted a little missindent in this line...", "author": "fgalan", "createdAt": "2020-05-04T15:23:59Z", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java", "diffHunk": "@@ -48,7 +48,8 @@\n  */\n public class NGSIMySQLSink extends NGSISink {\n     \n-    private static final String DEFAULT_ROW_ATTR_PERSISTENCE = \"row\";\n+    private static final String MYSQL_QUOTE_CHAR = \"`\";\n+\tprivate static final String DEFAULT_ROW_ATTR_PERSISTENCE = \"row\";", "originalCommit": "32340f3e556712c79c5f7985978f4a30398910a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA4MDUxOQ==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1865#discussion_r486080519", "bodyText": "done", "author": "joelcamus", "createdAt": "2020-09-10T05:49:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUxOTIyNA=="}], "type": "inlineReview", "revised_code": {"commit": "d4a3cbe38f5f471b4201753baa221f379f7c097e", "chunk": "diff --git a/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java b/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java\nindex c888c2fc..c6ae1e06 100644\n--- a/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java\n+++ b/cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSIMySQLSink.java\n\n@@ -49,7 +49,7 @@ import com.telefonica.iot.cygnus.log.CygnusLogger;\n public class NGSIMySQLSink extends NGSISink {\n     \n     private static final String MYSQL_QUOTE_CHAR = \"`\";\n-\tprivate static final String DEFAULT_ROW_ATTR_PERSISTENCE = \"row\";\n+    private static final String DEFAULT_ROW_ATTR_PERSISTENCE = \"row\";\n     private static final String DEFAULT_PASSWORD = \"\";\n     private static final String DEFAULT_PORT = \"3306\";\n     private static final String DEFAULT_HOST = \"localhost\";\n"}}, {"oid": "47c8cb7aa17702a7dfe69e40d6f05e0598fb2728", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/47c8cb7aa17702a7dfe69e40d6f05e0598fb2728", "message": "Update test NGSIUtilsTest.java\n\nUpdate tests that @IvanHdzC requested", "committedDate": "2020-08-13T17:51:39Z", "type": "commit"}, {"oid": "d4a3cbe38f5f471b4201753baa221f379f7c097e", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/d4a3cbe38f5f471b4201753baa221f379f7c097e", "message": "Update NGSIMySQLSink.java\n\nFixed", "committedDate": "2020-08-13T17:54:55Z", "type": "commit"}, {"oid": "7f57bdd38a3d9f2ef7b0b95d100cb021b30e3044", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/7f57bdd38a3d9f2ef7b0b95d100cb021b30e3044", "message": "Merge pull request #1 from telefonicaid/master\n\nMerge with master", "committedDate": "2020-08-13T18:02:16Z", "type": "commit"}, {"oid": "a26b7e738725e8d21daa2011e2fe9363f2f73630", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/a26b7e738725e8d21daa2011e2fe9363f2f73630", "message": "Update NGSIUtilsTest.java\n\nRemove unnecessary import", "committedDate": "2020-08-14T17:18:07Z", "type": "commit"}, {"oid": "bb7c4c6ea4bc62201e393c2b34cfaf26a184f050", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/bb7c4c6ea4bc62201e393c2b34cfaf26a184f050", "message": "Update NGSIUtils.java", "committedDate": "2020-08-19T17:25:48Z", "type": "commit"}, {"oid": "2585eaf720741d60a00673b267d1ceec3045d571", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/2585eaf720741d60a00673b267d1ceec3045d571", "message": "Merge branch 'master' of https://github.com/telefonicaid/fiware-cygnus into issue/1863_mysql_sink_quote_fields", "committedDate": "2020-08-19T17:36:00Z", "type": "commit"}, {"oid": "86fa4cdb81d1fd539c3ac05a3f40ef78db7238c7", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/86fa4cdb81d1fd539c3ac05a3f40ef78db7238c7", "message": "Merge pull request #5 from joelcamus/patch-1\n\nFixed a little missindent and add test", "committedDate": "2020-08-27T08:51:06Z", "type": "commit"}, {"oid": "bb4261387e1c880c24c19537fb5c63af80ca9951", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/bb4261387e1c880c24c19537fb5c63af80ca9951", "message": "Merge remote-tracking branch 'upstream/master' into issue/1863_mysql_sink_quote_fields", "committedDate": "2020-09-17T10:29:15Z", "type": "commit"}, {"oid": "88a35c79529e11236bd098af413a1ac643f236a1", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/88a35c79529e11236bd098af413a1ac643f236a1", "message": "Merge branch 'issue/1863_mysql_sink_quote_fields' into issue/1863_mysql_sink_quote_fields", "committedDate": "2020-09-17T10:32:49Z", "type": "commit"}, {"oid": "bc592b08275cdeb0b7549bb4a48d3fce4942bfc5", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/bc592b08275cdeb0b7549bb4a48d3fce4942bfc5", "message": "Merge pull request #6 from joelcamus/issue/1863_mysql_sink_quote_fields\n\nIssue/1863 mysql sink quote fields", "committedDate": "2020-09-17T10:36:55Z", "type": "commit"}]}