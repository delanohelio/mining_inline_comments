{"pr_number": 346, "pr_title": "SSL Alert Handling", "pr_createdAt": "2020-01-07T18:51:04Z", "pr_url": "https://github.com/dogtagpki/jss/pull/346", "timeline": [{"oid": "6e8e2cd590551c38b5420081ce96ccca1006c9a6", "url": "https://github.com/dogtagpki/jss/commit/6e8e2cd590551c38b5420081ce96ccca1006c9a6", "message": "Enable SSLAlertEvent storage on SSLFDProxy\n\nStoring events on a SSLFDProxy object requires:\n\n - A place to put them (both inbound and outbound),\n - A way of tracking how many we've processed,\n - A way of giving the SSLFDProxy reference to NSS (a GlobalRefProxy).\n\nUnlike the client certificate callback (where we can directly pass the\nCERTCertificate pointer and assume it is valid for the entire lifetime\nof the SSLFDProxy), we have to have this global state in order to\ninteract with Java-owned objects.\n\nWe introduce helper functions for accessing and creating all\nevent-related members and add the underlying callbacks one would use to\ntrigger them. In the future, other callbacks could be written that\ntrigger an event (similar to the existing SSLSocket code); this isn't\nsuitable for use in an SSLEngine however.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-01-07T18:33:27Z", "type": "commit"}, {"oid": "5251459e33e7296a82984663a52c403b94d1b8ac", "url": "https://github.com/dogtagpki/jss/commit/5251459e33e7296a82984663a52c403b94d1b8ac", "message": "Enable attaching SSL Alert capturing listeners\n\nThis enables logging of the SSLAlerts sent and received by a SSLFDProxy\ninstance using the callbacks provided SSLFDProxy.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-01-07T18:33:28Z", "type": "commit"}, {"oid": "c9bb450a623fbce14cc0ab6a6fcfde0bb5344230", "url": "https://github.com/dogtagpki/jss/commit/c9bb450a623fbce14cc0ab6a6fcfde0bb5344230", "message": "Test new SSL alert logging functionality\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-01-07T18:33:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5OTMwMA==", "url": "https://github.com/dogtagpki/jss/pull/346#discussion_r363899300", "bodyText": "@edewata Is there a better option here?\nI want a data structure that let's me:\n\nTrack my position in the list\nPush new elements\nKnow when a new one has been seen\nBut also lets me access previous elements if I need to.\n\nUp until the last requirement, that's kinda looking like a stock queue (and calling .pop() and .push(...)) but...", "author": "cipherboy", "createdAt": "2020-01-07T18:58:14Z", "path": "org/mozilla/jss/nss/SSL.java", "diffHunk": "@@ -188,6 +191,24 @@ public static native int ConfigServerSessionIDCache(int maxCacheEntries,\n      */\n     public static native int AttachClientCertCallback(SSLFDProxy fd) throws Exception;\n \n+    /**\n+     * Enable recording of alerts in the SSLFDProxy object.\n+     *\n+     * See also: SSL_AlertReceivedCallback in /usr/include/nss3/ssl.h,\n+     *           SSL_AlertSentCallback in /usr/include/nss3/ssl.h\n+     */\n+    public static int EnableAlertLogging(SSLFDProxy fd) {\n+        fd.inboundAlerts = new ArrayList<SSLAlertEvent>();", "originalCommit": "c9bb450a623fbce14cc0ab6a6fcfde0bb5344230", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}