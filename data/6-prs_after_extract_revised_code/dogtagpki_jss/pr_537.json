{"pr_number": 537, "pr_title": "Remove JSSContextSpi for the time being", "pr_createdAt": "2020-05-05T15:31:07Z", "pr_url": "https://github.com/dogtagpki/jss/pull/537", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIwNDE2Nw==", "url": "https://github.com/dogtagpki/jss/pull/537#discussion_r420204167", "bodyText": "LGTM, but could we put the /* and */ in separate lines so they don't disturb the code?", "author": "edewata", "createdAt": "2020-05-05T15:35:19Z", "path": "org/mozilla/jss/JSSProvider.java", "diffHunk": "@@ -403,12 +403,12 @@ protected void initializeProvider() {\n         /////////////////////////////////////////////////////////////\n         // TLS\n         /////////////////////////////////////////////////////////////\n-        put(\"SSLContext.Default\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n+        /* put(\"SSLContext.Default\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n         put(\"SSLContext.SSL\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n         put(\"SSLContext.TLS\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n         put(\"SSLContext.TLSv1.1\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv11\");\n         put(\"SSLContext.TLSv1.2\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv12\");\n-        put(\"SSLContext.TLSv1.3\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv13\");\n+        put(\"SSLContext.TLSv1.3\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv13\"); */", "originalCommit": "28dd46fcc9c453fe182432fed431ee74e224d61f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cd528c0e0f09ed5690639816b19a5134677adada", "chunk": "diff --git a/org/mozilla/jss/JSSProvider.java b/org/mozilla/jss/JSSProvider.java\nindex 3d5c87c2..c692a7c5 100644\n--- a/org/mozilla/jss/JSSProvider.java\n+++ b/org/mozilla/jss/JSSProvider.java\n\n@@ -403,12 +404,14 @@ public final class JSSProvider extends java.security.Provider {\n         /////////////////////////////////////////////////////////////\n         // TLS\n         /////////////////////////////////////////////////////////////\n-        /* put(\"SSLContext.Default\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n-        put(\"SSLContext.SSL\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n-        put(\"SSLContext.TLS\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n-        put(\"SSLContext.TLSv1.1\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv11\");\n-        put(\"SSLContext.TLSv1.2\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv12\");\n-        put(\"SSLContext.TLSv1.3\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv13\"); */\n+        if (SSLEngine) {\n+            put(\"SSLContext.Default\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n+            put(\"SSLContext.SSL\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n+            put(\"SSLContext.TLS\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi\");\n+            put(\"SSLContext.TLSv1.1\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv11\");\n+            put(\"SSLContext.TLSv1.2\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv12\");\n+            put(\"SSLContext.TLSv1.3\", \"org.mozilla.jss.provider.javax.net.JSSContextSpi$TLSv13\");\n+        }\n     }\n \n     public String toString() {\n"}}, {"oid": "cd528c0e0f09ed5690639816b19a5134677adada", "url": "https://github.com/dogtagpki/jss/commit/cd528c0e0f09ed5690639816b19a5134677adada", "message": "Gate JSSContextSpi behind SSLEngine feature flag\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-05-05T16:06:58Z", "type": "forcePushed"}, {"oid": "8337fa6260edd1a96f223b799bb94b15d202e72a", "url": "https://github.com/dogtagpki/jss/commit/8337fa6260edd1a96f223b799bb94b15d202e72a", "message": "Gate JSSContextSpi behind SSLEngine feature flag\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-05-05T16:09:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0Mjc2Nw==", "url": "https://github.com/dogtagpki/jss/pull/537#discussion_r420242767", "bodyText": "The SSLEngine looks like a class name instead of variable name. I'd probably use something like USE_SSL_ENGINE. Regardless, this is just preference. The code looks good, feel free to merge.", "author": "edewata", "createdAt": "2020-05-05T16:29:16Z", "path": "org/mozilla/jss/JSSProvider.java", "diffHunk": "@@ -9,6 +9,7 @@\n import java.io.InputStream;\n \n public final class JSSProvider extends java.security.Provider {\n+    public static boolean SSLEngine = false;", "originalCommit": "8337fa6260edd1a96f223b799bb94b15d202e72a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a7b0a538708b33a7a02c4689b80ff747090b3dc9", "chunk": "diff --git a/org/mozilla/jss/JSSProvider.java b/org/mozilla/jss/JSSProvider.java\nindex c692a7c5..8726cf07 100644\n--- a/org/mozilla/jss/JSSProvider.java\n+++ b/org/mozilla/jss/JSSProvider.java\n\n@@ -9,7 +9,7 @@ import java.security.Provider;\n import java.io.InputStream;\n \n public final class JSSProvider extends java.security.Provider {\n-    public static boolean SSLEngine = false;\n+    public static boolean ENABLE_JSSENGINE = false;\n \n     private static final long serialVersionUID = 1L;\n     /********************************************************************/\n"}}, {"oid": "a7b0a538708b33a7a02c4689b80ff747090b3dc9", "url": "https://github.com/dogtagpki/jss/commit/a7b0a538708b33a7a02c4689b80ff747090b3dc9", "message": "Gate JSSContextSpi behind SSLEngine feature flag\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-05-05T16:31:10Z", "type": "forcePushed"}, {"oid": "c2d0a71651bfb1bd664622c2d4421567668cbf07", "url": "https://github.com/dogtagpki/jss/commit/c2d0a71651bfb1bd664622c2d4421567668cbf07", "message": "Gate JSSContextSpi behind SSLEngine feature flag\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-05-05T17:00:10Z", "type": "commit"}, {"oid": "c2d0a71651bfb1bd664622c2d4421567668cbf07", "url": "https://github.com/dogtagpki/jss/commit/c2d0a71651bfb1bd664622c2d4421567668cbf07", "message": "Gate JSSContextSpi behind SSLEngine feature flag\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-05-05T17:00:10Z", "type": "forcePushed"}]}