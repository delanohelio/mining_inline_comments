{"pr_number": 627, "pr_title": "[v4.7.3] Disable Fallback SCSV and add PHA to legacy SSLSocket", "pr_createdAt": "2020-09-01T13:33:58Z", "pr_url": "https://github.com/dogtagpki/jss/pull/627", "timeline": [{"oid": "0085883e958c994d36cc165417b8a387bdc4c780", "url": "https://github.com/dogtagpki/jss/commit/0085883e958c994d36cc165417b8a387bdc4c780", "message": "Disable ENABLE_FALLBACK_SCSV for JCA compatibility\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-09-01T12:03:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMyMjY3OQ==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r481322679", "bodyText": "This is, can remove this comment.", "author": "cipherboy", "createdAt": "2020-09-01T17:45:38Z", "path": "org/mozilla/jss/ssl/SocketBase.java", "diffHunk": "@@ -101,9 +101,11 @@ void setProxy(SocketProxy sockProxy) {\n     /* ssl/sslt.h */\n     static final int SSL_Variant_Stream = 33;\n     static final int SSL_Variant_Datagram = 34;\n+    static final int SSL_ENABLE_POST_HANDSHAKE_AUTH = 36;\n \n     static final int SSL_AF_INET = 50;\n     static final int SSL_AF_INET6 = 51;\n+    /* TODO right place? */", "originalCommit": "5e206a609e0cfaad649717c38bc8a74833db512a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b031fedc2f9a6be1b1033df40b6758d3d0c9883a", "chunk": "diff --git a/org/mozilla/jss/ssl/SocketBase.java b/org/mozilla/jss/ssl/SocketBase.java\nindex 479f3e0d..9a109ea4 100644\n--- a/org/mozilla/jss/ssl/SocketBase.java\n+++ b/org/mozilla/jss/ssl/SocketBase.java\n\n@@ -105,7 +105,6 @@ class SocketBase {\n \n     static final int SSL_AF_INET = 50;\n     static final int SSL_AF_INET6 = 51;\n-    /* TODO right place? */\n \n     void close() throws IOException {\n         try {\n"}}, {"oid": "9e73a76af8d83bad12b489ac240b2ff3e6f233b0", "url": "https://github.com/dogtagpki/jss/commit/9e73a76af8d83bad12b489ac240b2ff3e6f233b0", "message": "Add Post-Handshake Auth to legacy SSLSocket\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-09-01T21:38:58Z", "type": "forcePushed"}, {"oid": "b031fedc2f9a6be1b1033df40b6758d3d0c9883a", "url": "https://github.com/dogtagpki/jss/commit/b031fedc2f9a6be1b1033df40b6758d3d0c9883a", "message": "Add Post-Handshake Auth to legacy SSLSocket\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-09-01T21:40:50Z", "type": "commit"}, {"oid": "b031fedc2f9a6be1b1033df40b6758d3d0c9883a", "url": "https://github.com/dogtagpki/jss/commit/b031fedc2f9a6be1b1033df40b6758d3d0c9883a", "message": "Add Post-Handshake Auth to legacy SSLSocket\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-09-01T21:40:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r481468884", "bodyText": "would it makes sense to just comment this out and give explanation, so later someone who wishes to add this would know why?", "author": "ladycfu", "createdAt": "2020-09-01T22:33:11Z", "path": "org/mozilla/jss/ssl/javax/JSSEngine.java", "diffHunk": "@@ -945,7 +945,6 @@ public boolean isOutboundDone() {\n         // TLS < 1.3.\n         result.put(SSL.ENABLE_RENEGOTIATION, SSL.RENEGOTIATE_REQUIRES_XTN);\n         result.put(SSL.REQUIRE_SAFE_NEGOTIATION, 1);\n-        result.put(SSL.ENABLE_FALLBACK_SCSV, 1);", "originalCommit": "b031fedc2f9a6be1b1033df40b6758d3d0c9883a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIxNzU5OQ==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r482217599", "bodyText": "@cipherboy I\"m not sure if I've seen any response to this ;-)", "author": "ladycfu", "createdAt": "2020-09-02T16:51:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIxODk0NQ==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r482218945", "bodyText": "Ah sorry, I responded at the bottom:\n#627 (comment)\nThe version in master has a better commit message and description:\nd0c8b24\n        // Don't enable FALLBACK_SCSV support; this is incompatible with other\n        // JCA providers and makes transitioning TLS versions difficult.\n        // result.put(SSL.ENABLE_FALLBACK_SCSV, 1);", "author": "cipherboy", "createdAt": "2020-09-02T16:53:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyMDM0Mg==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r482220342", "bodyText": "Ah, I didn't know you were responding to this one, as I was suggesting you to comment out that line instead of removing it in the code and add comment in the code.", "author": "ladycfu", "createdAt": "2020-09-02T16:55:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyMDU4NA==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r482220584", "bodyText": "it's not that critical though. It's just a suggestion.", "author": "ladycfu", "createdAt": "2020-09-02T16:55:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyMDk4MA==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r482220980", "bodyText": "Yeah it was commented out (as suggested here) in master for posterity. :-)", "author": "cipherboy", "createdAt": "2020-09-02T16:56:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyNDA2NA==", "url": "https://github.com/dogtagpki/jss/pull/627#discussion_r482224064", "bodyText": "Ah, sorry, my bad.  I didn't see. ;-) Thanks!!", "author": "ladycfu", "createdAt": "2020-09-02T17:01:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2ODg4NA=="}], "type": "inlineReview", "revised_code": null}]}