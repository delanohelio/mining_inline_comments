{"pr_number": 4014, "pr_title": "PLFM-5170-VI enforce RequiredScopes annotation", "pr_createdAt": "2020-04-22T23:41:56Z", "pr_url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014", "timeline": [{"oid": "4c12f502f02bed6b4cbb6fac48fb769ef460052a", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/4c12f502f02bed6b4cbb6fac48fb769ef460052a", "message": "PLFM-5170-VI enforce RequiredScopes annotation", "committedDate": "2020-04-22T23:40:46Z", "type": "commit"}, {"oid": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/2385825c16398c893fdb8c9ad7b484f21d1ff043", "message": "PLFM-5170-VI", "committedDate": "2020-04-22T23:54:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA4ODQxNw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414088417", "bodyText": "We could add either a filter or a check that the @RequestMapping annotation is there", "author": "marcomarasca", "createdAt": "2020-04-23T20:06:10Z", "path": "services/repository/src/test/java/org/sagebionetworks/repo/web/RequiredScopeAnnotationTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package org.sagebionetworks.repo.web;\n+\n+import static org.junit.jupiter.api.Assertions.fail;\n+\n+import java.lang.reflect.Method;\n+import java.lang.reflect.Modifier;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.junit.jupiter.api.Test;\n+import org.sagebionetworks.repo.web.controller.RequiredScope;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;\n+import org.springframework.core.type.filter.AnnotationTypeFilter;\n+import org.springframework.stereotype.Controller;\n+\n+class RequiredScopeAnnotationTest {\n+\n+\t@Test\n+\tvoid testCoverage() throws Exception {\n+\n+\t\tClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(false);\n+\t\t// Find controllers\n+\t\tprovider.addIncludeFilter(new AnnotationTypeFilter(Controller.class));\n+\t\t// Find controllers in the given package (or subpackages)\n+\t\tSet<BeanDefinition> beans = provider.findCandidateComponents(\"org.sagebionetworks\");\n+\t\tList<String> missingRequiredScope = new ArrayList<String>();\n+\t\tfor (BeanDefinition bd : beans) {\n+\t\t\tString className = bd.getBeanClassName();\n+\t\t\tClass<?> clazz = Class.forName(className);\n+\t\t\tfor (Method method : clazz.getDeclaredMethods()) {\n+\t\t\t\tif (method.getAnnotation(RequiredScope.class)==null && !Modifier.isStatic(method.getModifiers())) {", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA4OTM3Nw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414089377", "bodyText": "public modifier otherwise the surefire (or the failsafe) plugin will not run this", "author": "marcomarasca", "createdAt": "2020-04-23T20:07:47Z", "path": "services/repository/src/test/java/org/sagebionetworks/repo/web/RequiredScopeAnnotationTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package org.sagebionetworks.repo.web;\n+\n+import static org.junit.jupiter.api.Assertions.fail;\n+\n+import java.lang.reflect.Method;\n+import java.lang.reflect.Modifier;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.junit.jupiter.api.Test;\n+import org.sagebionetworks.repo.web.controller.RequiredScope;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;\n+import org.springframework.core.type.filter.AnnotationTypeFilter;\n+import org.springframework.stereotype.Controller;\n+\n+class RequiredScopeAnnotationTest {", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA4OTYxOQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414089619", "bodyText": "public modifier", "author": "marcomarasca", "createdAt": "2020-04-23T20:08:09Z", "path": "services/repository/src/test/java/org/sagebionetworks/repo/web/RequiredScopeAnnotationTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+package org.sagebionetworks.repo.web;\n+\n+import static org.junit.jupiter.api.Assertions.fail;\n+\n+import java.lang.reflect.Method;\n+import java.lang.reflect.Modifier;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.junit.jupiter.api.Test;\n+import org.sagebionetworks.repo.web.controller.RequiredScope;\n+import org.springframework.beans.factory.config.BeanDefinition;\n+import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;\n+import org.springframework.core.type.filter.AnnotationTypeFilter;\n+import org.springframework.stereotype.Controller;\n+\n+class RequiredScopeAnnotationTest {\n+\n+\t@Test\n+\tvoid testCoverage() throws Exception {", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5MzQ5MQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414093491", "bodyText": "Should be empty scope", "author": "marcomarasca", "createdAt": "2020-04-23T20:14:49Z", "path": "services/repository/src/main/java/org/sagebionetworks/auth/controller/AuthenticationController.java", "diffHunk": "@@ -126,6 +134,7 @@ public void revalidate(\n \t * Deauthenticate a session token. This will sign out all active sessions\r\n \t * using the session token.\r\n \t */\r\n+\t@RequiredScope({modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5NjIzOQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414096239", "bodyText": "@RequiredScope({modify,authorize})", "author": "marcomarasca", "createdAt": "2020-04-23T20:19:27Z", "path": "services/repository/src/main/java/org/sagebionetworks/auth/controller/AuthenticationController.java", "diffHunk": "@@ -304,10 +322,10 @@ Session createAccountViaOAuth2(@RequestBody OAuthAccountCreationRequest request)\n \t * @param alias the alias for the user given by the provider\r\n \t * @throws Exception\r\n \t */\r\n+\t@RequiredScope({modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwMzA4OQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414103089", "bodyText": "view, modify", "author": "marcomarasca", "createdAt": "2020-04-23T20:31:04Z", "path": "services/repository/src/main/java/org/sagebionetworks/file/controller/UploadController.java", "diffHunk": "@@ -915,6 +946,7 @@ public void fileRedirectURLForAffiliate(\n \t * @throws NotFoundException\n \t * @throws IOException\n \t */\n+\t@RequiredScope({download})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwNTI5MQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414105291", "bodyText": "authorize?", "author": "marcomarasca", "createdAt": "2020-04-23T20:34:53Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/AccessApprovalController.java", "diffHunk": "@@ -65,6 +66,7 @@\n \t * @throws InvalidModelException\r\n \t * @throws IOException\r\n \t */\r\n+\t@RequiredScope({view,modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwNTQ4MA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414105480", "bodyText": "authorize?", "author": "marcomarasca", "createdAt": "2020-04-23T20:35:12Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/AccessApprovalController.java", "diffHunk": "@@ -125,6 +129,7 @@ AccessApproval createAccessApproval(\n \t * @throws UnauthorizedException\r\n \t * @throws NotFoundException\r\n \t */\r\n+\t@RequiredScope({modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwNTg2MQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414105861", "bodyText": "authorize", "author": "marcomarasca", "createdAt": "2020-04-23T20:35:52Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/AccessApprovalController.java", "diffHunk": "@@ -244,6 +253,7 @@ public void revokeGroup(\n \t * @throws UnauthorizedException\r\n \t * @throws NotFoundException\r\n \t */\r\n+\t@RequiredScope({modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwNjA0Ng==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414106046", "bodyText": "authorize", "author": "marcomarasca", "createdAt": "2020-04-23T20:36:06Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/AccessApprovalController.java", "diffHunk": "@@ -262,6 +272,7 @@ public void deleteAccessApproval(\n \t * @throws UnauthorizedException\r\n \t * @throws NotFoundException\r\n \t */\r\n+\t@RequiredScope({modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwNjk5Mw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414106993", "bodyText": "authorize", "author": "marcomarasca", "createdAt": "2020-04-23T20:37:38Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/AccessRequirementController.java", "diffHunk": "@@ -207,6 +215,7 @@ AccessRequirement createLockAccessRequirement(\n \t * @throws UnauthorizedException\r\n \t * @throws NotFoundException\r\n \t */\r\n+\t@RequiredScope({modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDExMDAzMA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414110030", "bodyText": "no view", "author": "marcomarasca", "createdAt": "2020-04-23T20:42:31Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/CertifiedUserController.java", "diffHunk": "@@ -157,12 +168,14 @@ public void deleteQuizResponse(\n \t\treturn serviceProvider.getCertifiedUserService().getPassingRecords(userId, id, limit, offset);\n \t}\n \n+\t@RequiredScope({view,modify})\n \t@ResponseStatus(HttpStatus.GONE)\n \t@RequestMapping(value = UrlHelpers.CERTIFIED_USER_STATUS, method = RequestMethod.PUT)\n \tpublic @ResponseBody String setUserCertificationStatus()  {\n \t\treturn \"This endpoint has been removed. The service has been moved to \" + UrlHelpers.ADMIN + UrlHelpers.CERTIFIED_USER_STATUS + \" and is only accessible to Synapse administrators\";\n \t}\n \n+\t@RequiredScope({view,modify})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDExMzk4MA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414113980", "bodyText": "authorize", "author": "marcomarasca", "createdAt": "2020-04-23T20:49:18Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/EntityController.java", "diffHunk": "@@ -1460,6 +1507,7 @@ public void deleteActivityForEntity(@PathVariable String id,\n \t * @param id\n \t * @param dataType\n \t */\n+\t@RequiredScope({view,modify})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDExNTIxNQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414115215", "bodyText": "+modify, view", "author": "marcomarasca", "createdAt": "2020-04-23T20:51:25Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/EvaluationController.java", "diffHunk": "@@ -959,6 +984,7 @@ long getSubmissionCount(\n \t * @return        The ACL created.\n \t */\n \t@Deprecated\n+\t@RequiredScope({authorize})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDExNTMzMg==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414115332", "bodyText": "+modify, view", "author": "marcomarasca", "createdAt": "2020-04-23T20:51:38Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/EvaluationController.java", "diffHunk": "@@ -980,6 +1006,7 @@ long getSubmissionCount(\n \t * @param acl     The ACL being updated.\n \t * @return        The updated ACL.\n \t */\n+\t@RequiredScope({authorize})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDExNTQzNQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414115435", "bodyText": "+modify, view", "author": "marcomarasca", "createdAt": "2020-04-23T20:51:49Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/EvaluationController.java", "diffHunk": "@@ -999,6 +1026,7 @@ long getSubmissionCount(\n \t *\n \t */\n \t@Deprecated\n+\t@RequiredScope({authorize})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDExNTY5Mw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414115693", "bodyText": "+modify, view", "author": "marcomarasca", "createdAt": "2020-04-23T20:52:14Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/FormController.java", "diffHunk": "@@ -126,6 +132,7 @@\n \t * @param acl    The updated ACL.\n \t * @return\n \t */\n+\t@RequiredScope({authorize})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMDM5NA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414120394", "bodyText": "-modify", "author": "marcomarasca", "createdAt": "2020-04-23T21:00:11Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -494,6 +506,7 @@ AsyncJobId startTableTransactionJob(\n \t * @throws NotFoundException\r\n \t * @throws AsynchJobFailedException\r\n \t */\r\n+\t@RequiredScope({view,modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMDU2MA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414120560", "bodyText": "-modify", "author": "marcomarasca", "createdAt": "2020-04-23T21:00:29Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -635,6 +649,7 @@ AsyncJobId startAppendRowsJob(\n \t * @throws AsynchJobFailedException\r\n \t */\r\n \t@Deprecated\r\n+\t@RequiredScope({view,modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMDc4Nw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414120787", "bodyText": "view", "author": "marcomarasca", "createdAt": "2020-04-23T21:00:53Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -702,6 +718,7 @@ RowReferenceSet deleteRows(\n \t * @throws IOException\r\n \t */\r\n \t@ResponseStatus(HttpStatus.OK)\r\n+\t@RequiredScope({download})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMTQ3Mg==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414121472", "bodyText": "-modify", "author": "marcomarasca", "createdAt": "2020-04-23T21:01:59Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -1152,6 +1178,7 @@ AsyncJobId csvUploadPreviewAsyncStart(\n \t * @throws AsynchJobFailedException\r\n \t * @throws NotReadyException\r\n \t */\r\n+\t@RequiredScope({view,modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMTY4MQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414121681", "bodyText": "-modify", "author": "marcomarasca", "createdAt": "2020-04-23T21:02:23Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -1176,6 +1204,7 @@ AsyncJobId csvUploadAsyncStart(\n \t}\r\n \r\n \t@Deprecated\r\n+\t@RequiredScope({view,modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMTgwOA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414121808", "bodyText": "-modify", "author": "marcomarasca", "createdAt": "2020-04-23T21:02:38Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -1257,6 +1287,7 @@ AsyncJobId csvUploadAsyncStart(\n \t * @throws NotReadyException\r\n \t */\r\n \t@ResponseStatus(HttpStatus.CREATED)\r\n+\t@RequiredScope({view,modify})\r", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMjU2Nw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414122567", "bodyText": "{}", "author": "marcomarasca", "createdAt": "2020-04-23T21:04:00Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TeamController.java", "diffHunk": "@@ -338,6 +353,7 @@ public void addTeamMember(\n \t * @param notificationUnsubscribeEndpoint\n \t * @throws NotFoundException\n \t */\n+\t@RequiredScope({view,modify})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEyMzAzOA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4014#discussion_r414123038", "bodyText": "+view,modify", "author": "marcomarasca", "createdAt": "2020-04-23T21:04:54Z", "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TeamController.java", "diffHunk": "@@ -526,6 +550,7 @@ AccessControlList getTeamACL(\n \t * @return\n \t * @throws NotFoundException\n \t */\n+\t@RequiredScope({authorize})", "originalCommit": "2385825c16398c893fdb8c9ad7b484f21d1ff043", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}