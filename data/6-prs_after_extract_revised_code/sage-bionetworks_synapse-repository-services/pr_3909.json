{"pr_number": 3909, "pr_title": "PLFM-6051: Fixed Numeric Type issue depends on MySql Version", "pr_createdAt": "2020-01-24T00:05:53Z", "pr_url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3909", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyMDc3OQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3909#discussion_r370420779", "bodyText": "add test case where we have a VARCHAR MySqlType and assert that maxSize's value equals an expected value", "author": "zimingd", "createdAt": "2020-01-24T00:13:20Z", "path": "lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/TableIndexDAOImplTest.java", "diffHunk": "@@ -1034,7 +1030,7 @@ public void testColumnInfoAndCardinality(){\n \t\tassertTrue(info.hasIndex());\r\n \t\tassertEquals(\"_C13_idx_\", info.getIndexName());\r\n \t\tassertEquals(MySqlColumnType.TINYINT, info.getType());\r\n-\t\tassertEquals(new Integer(1), info.getMaxSize());\r", "originalCommit": "ae06bf28262167200273636234e66fdcf6b8ae4f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "275763f51781649aaa0c63c7e56b22fb8b9633a7", "chunk": "diff --git a/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/TableIndexDAOImplTest.java b/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/TableIndexDAOImplTest.java\nindex 7c8442e2ab..a529c86758 100644\n--- a/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/TableIndexDAOImplTest.java\n+++ b/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/TableIndexDAOImplTest.java\n\n@@ -1030,7 +1033,7 @@ public class TableIndexDAOImplTest {\n \t\tassertTrue(info.hasIndex());\n \t\tassertEquals(\"_C13_idx_\", info.getIndexName());\n \t\tassertEquals(MySqlColumnType.TINYINT, info.getType());\n-\t\tassertNull(info.getMaxSize());\n+\t\tassertEquals(new Integer(1), info.getMaxSize());\n \t\tassertEquals(ColumnType.BOOLEAN, info.getColumnType());\n \t}\n \t\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyMTYyNg==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3909#discussion_r370421626", "bodyText": "add test case for VARCHAR of the parseSize() method.\nString typeString = \"VARCHAR(56)\";", "author": "zimingd", "createdAt": "2020-01-24T00:16:41Z", "path": "lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/MySqlColumnTypeTest.java", "diffHunk": "@@ -28,9 +26,9 @@ public void testParserTypeNoSize(){\n \t\r\n \t@Test\r\n \tpublic void testParseSizeBigInt(){\r\n-\t\tString typeString = \"bigint(20)\";\r\n+\t\tString typeString = \"BIGINT\";\r\n \t\tInteger size = MySqlColumnType.parseSize(typeString);\r\n-\t\tassertEquals(new Integer(20), size);\r\n+\t\tassertNull(size);\r", "originalCommit": "ae06bf28262167200273636234e66fdcf6b8ae4f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "275763f51781649aaa0c63c7e56b22fb8b9633a7", "chunk": "diff --git a/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/MySqlColumnTypeTest.java b/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/MySqlColumnTypeTest.java\nindex 1f8f6c3ad4..26812348d3 100755\n--- a/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/MySqlColumnTypeTest.java\n+++ b/lib/lib-table-cluster/src/test/java/org/sagebionetworks/table/cluster/MySqlColumnTypeTest.java\n\n@@ -26,9 +28,9 @@ public class MySqlColumnTypeTest {\n \t\n \t@Test\n \tpublic void testParseSizeBigInt(){\n-\t\tString typeString = \"BIGINT\";\n+\t\tString typeString = \"bigint(20)\";\n \t\tInteger size = MySqlColumnType.parseSize(typeString);\n-\t\tassertNull(size);\n+\t\tassertEquals(new Integer(20), size);\n \t}\n \t\n \t@Test\n"}}, {"oid": "275763f51781649aaa0c63c7e56b22fb8b9633a7", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/275763f51781649aaa0c63c7e56b22fb8b9633a7", "message": "Fixed Numeric Type Attributes Issue", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "c84d64253019101a71003f054dda712844035a09", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/c84d64253019101a71003f054dda712844035a09", "message": "Removed size of numeric type in SQLutilsTest", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "0d8a11c7a5071108b10f0772a7e1aa8893c40b07", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/0d8a11c7a5071108b10f0772a7e1aa8893c40b07", "message": "Removed size of numeric type in ColumnTypeInfoTest", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "d4e89f13c496c40f8e717400cbc8ee2c79f5f7a0", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/d4e89f13c496c40f8e717400cbc8ee2c79f5f7a0", "message": "Changed JUnit assertTrue to assertFalse for BIGINT", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "75ba97c69b5e2299a07ce5ba22913643e432278c", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/75ba97c69b5e2299a07ce5ba22913643e432278c", "message": "Removed size of TINYINT", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "6ad313d9a0df69a1301624d0abdbf7f043d5335f", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/6ad313d9a0df69a1301624d0abdbf7f043d5335f", "message": "PLFM-6051: Deleted size of BigInt when create tables, and Changed a test not to have a size for TinyInt and BigInt", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "bb0f7e3d60bfb7aafb46d5db6331a6fd915fa387", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/bb0f7e3d60bfb7aafb46d5db6331a6fd915fa387", "message": "Test for MySql Version 8.0.16 (Automatically show size of Interget Type)", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "5b1bc6f0e967f2c1459b3df71125cf7366b16bce", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/5b1bc6f0e967f2c1459b3df71125cf7366b16bce", "message": "Changed to set size when column type has size", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "b161b2dc6d6c8340b2288730360ce90a9b0e31f7", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/b161b2dc6d6c8340b2288730360ce90a9b0e31f7", "message": "Added a test case for parsing size of VarChar", "committedDate": "2020-01-25T00:22:17Z", "type": "commit"}, {"oid": "b161b2dc6d6c8340b2288730360ce90a9b0e31f7", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/b161b2dc6d6c8340b2288730360ce90a9b0e31f7", "message": "Added a test case for parsing size of VarChar", "committedDate": "2020-01-25T00:22:17Z", "type": "forcePushed"}, {"oid": "8e7b4e6d6b70c3fe84c24f875b2cb2e35ce22ad8", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/8e7b4e6d6b70c3fe84c24f875b2cb2e35ce22ad8", "message": "Added a test cases for parsing size of VarChar", "committedDate": "2020-01-25T01:01:37Z", "type": "commit"}, {"oid": "1f5ee0d876fc15df7503ed5a4b4f729bdc5ba951", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/1f5ee0d876fc15df7503ed5a4b4f729bdc5ba951", "message": "Merge branch 'develop' of github.com:Sage-Bionetworks/Synapse-Repository-Services into PLFM-6051", "committedDate": "2020-01-27T17:49:56Z", "type": "commit"}]}