{"pr_number": 5145, "pr_title": "[LW] Smile for the snapshot", "pr_createdAt": "2020-12-04T13:25:25Z", "pr_url": "https://github.com/palantir/atlasdb/pull/5145", "timeline": [{"oid": "a129f322bceec16f84afdaabc045fdb97cce5e35", "url": "https://github.com/palantir/atlasdb/commit/a129f322bceec16f84afdaabc045fdb97cce5e35", "message": "really let us make this right", "committedDate": "2020-12-04T13:19:33Z", "type": "commit"}, {"oid": "53cd3e27210d4260fe256e3a620cd0d45b414ecc", "url": "https://github.com/palantir/atlasdb/commit/53cd3e27210d4260fe256e3a620cd0d45b414ecc", "message": "Add generated changelog entries", "committedDate": "2020-12-04T13:19:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjExMDc4Ng==", "url": "https://github.com/palantir/atlasdb/pull/5145#discussion_r536110786", "bodyText": "doh", "author": "jeremyk-91", "createdAt": "2020-12-04T13:47:15Z", "path": "atlasdb-impl-shared/src/main/java/com/palantir/atlasdb/keyvalue/api/watch/ClientLogEvents.java", "diffHunk": "@@ -65,9 +65,12 @@ each version starting with the client version (exclusive) and ending with latest\n          Case 3: client is completely up-to-date. Here, we don't need to check for any versions.\n          Case 4: client has no version. Then we expect that the events returned at least enclose the versions of\n                  the transactions.\n+         Case 5: the client is very far behind, but still has a version. In this case, we should not check based on the\n+                 client version, but rather the lower bound of the timestamp mapping.\n         */\n         verifyReturnedEventsEnclosesTransactionVersions(\n                 lastKnownVersion\n+                        .filter(_unused -> !clearCache())", "originalCommit": "53cd3e27210d4260fe256e3a620cd0d45b414ecc", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}