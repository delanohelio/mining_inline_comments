{"pr_number": 4843, "pr_title": "Add serviceId", "pr_createdAt": "2020-06-17T10:33:56Z", "pr_url": "https://github.com/palantir/atlasdb/pull/4843", "timeline": [{"oid": "2ac94e6ff8ecd357c2619353773a492bb1489b56", "url": "https://github.com/palantir/atlasdb/commit/2ac94e6ff8ecd357c2619353773a492bb1489b56", "message": "Add serviceId", "committedDate": "2020-06-17T10:29:29Z", "type": "commit"}, {"oid": "0d51cd79e71cc035b45837e04ae8823532717760", "url": "https://github.com/palantir/atlasdb/commit/0d51cd79e71cc035b45837e04ae8823532717760", "message": "Add generated changelog entries", "committedDate": "2020-06-17T10:29:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ1MTk0Mg==", "url": "https://github.com/palantir/atlasdb/pull/4843#discussion_r441451942", "bodyText": "nit: can we name this serviceIdentifierOverride or explicitServiceIdentifier or something like that?", "author": "jeremyk-91", "createdAt": "2020-06-17T10:40:06Z", "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java", "diffHunk": "@@ -552,16 +552,18 @@ private TransactionManager serializableInternal(@Output List<AutoCloseable> clos\n         return transactionManager;\n     }\n \n+    abstract Optional<String> serviceIdentifier();", "originalCommit": "0d51cd79e71cc035b45837e04ae8823532717760", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "92e6045155821c1c781443ed82f8897b441c56dc", "chunk": "diff --git a/atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java b/atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java\nindex 6876e30674..d78a4f0d8a 100644\n--- a/atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java\n+++ b/atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java\n\n@@ -552,12 +552,12 @@ public abstract class TransactionManagers {\n         return transactionManager;\n     }\n \n-    abstract Optional<String> serviceIdentifier();\n+    abstract Optional<String> serviceIdentifierOverride();\n \n     @VisibleForTesting\n     @Value.Derived\n     String serviceName() {\n-        return serviceIdentifier().orElseGet(() -> Stream.of(config().namespace(),\n+        return serviceIdentifierOverride().orElseGet(() -> Stream.of(config().namespace(),\n                 config().timelock().flatMap(TimeLockClientConfig::client),\n                 config().keyValueService().namespace())\n                 .filter(Optional::isPresent)\n"}}, {"oid": "92e6045155821c1c781443ed82f8897b441c56dc", "url": "https://github.com/palantir/atlasdb/commit/92e6045155821c1c781443ed82f8897b441c56dc", "message": "Address comment", "committedDate": "2020-06-17T10:42:29Z", "type": "commit"}, {"oid": "0d9c291979a94c3ed8c0c74d3fe9a1050f4ae523", "url": "https://github.com/palantir/atlasdb/commit/0d9c291979a94c3ed8c0c74d3fe9a1050f4ae523", "message": "Merge branch 'service_name_III' of github.com:palantir/atlasdb into service_name_III", "committedDate": "2020-06-17T10:42:39Z", "type": "commit"}]}