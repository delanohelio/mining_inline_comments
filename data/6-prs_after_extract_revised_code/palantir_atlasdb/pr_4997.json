{"pr_number": 4997, "pr_title": "Wire paxos history providers", "pr_createdAt": "2020-09-24T14:00:53Z", "pr_url": "https://github.com/palantir/atlasdb/pull/4997", "timeline": [{"oid": "67d048c02fd95358e3e814ccbcb071f22c725244", "url": "https://github.com/palantir/atlasdb/commit/67d048c02fd95358e3e814ccbcb071f22c725244", "message": "Wire paxos history providers", "committedDate": "2020-09-24T13:52:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQwMTAzMQ==", "url": "https://github.com/palantir/atlasdb/pull/4997#discussion_r494401031", "bodyText": "These two aren't really used in creating a leadership context, and so shouldn't be here.", "author": "jeremyk-91", "createdAt": "2020-09-24T15:14:28Z", "path": "timelock-agent/src/main/java/com/palantir/atlasdb/timelock/paxos/LeadershipContextFactory.java", "diffHunk": "@@ -113,6 +114,11 @@ public LeaderElectionHealthCheck leaderElectionHealthCheck() {\n         return remoteClients().getRemoteCorruptionNotifiers();\n     }\n \n+    @Value.Derived\n+    List<TimeLockPaxosHistoryProvider> remoteHistoryProviders() {\n+        return remoteClients().getRemoteHistoryProviders();\n+    }", "originalCommit": "67d048c02fd95358e3e814ccbcb071f22c725244", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d7dec31ad483d40e7bc8fc8d558e38edf08fab9c", "chunk": "diff --git a/timelock-agent/src/main/java/com/palantir/atlasdb/timelock/paxos/LeadershipContextFactory.java b/timelock-agent/src/main/java/com/palantir/atlasdb/timelock/paxos/LeadershipContextFactory.java\nindex d5de5afeb6..4a09a4b51f 100644\n--- a/timelock-agent/src/main/java/com/palantir/atlasdb/timelock/paxos/LeadershipContextFactory.java\n+++ b/timelock-agent/src/main/java/com/palantir/atlasdb/timelock/paxos/LeadershipContextFactory.java\n\n@@ -109,16 +106,6 @@ public abstract class LeadershipContextFactory implements\n         return new LeaderElectionHealthCheck(Instant::now);\n     }\n \n-    @Value.Derived\n-    List<TimeLockCorruptionNotifier> remoteCorruptionNotifiers() {\n-        return remoteClients().getRemoteCorruptionNotifiers();\n-    }\n-\n-    @Value.Derived\n-    List<TimeLockPaxosHistoryProvider> remoteHistoryProviders() {\n-        return remoteClients().getRemoteHistoryProviders();\n-    }\n-\n     @Override\n     public LeadershipContext create(Client client) {\n         ClientAwareComponents clientAwareComponents = ImmutableClientAwareComponents.builder()\n"}}, {"oid": "24ae4d42401a0ab447a8fa266ef11a642b558e55", "url": "https://github.com/palantir/atlasdb/commit/24ae4d42401a0ab447a8fa266ef11a642b558e55", "message": "redesign", "committedDate": "2020-09-24T15:21:21Z", "type": "commit"}, {"oid": "d7dec31ad483d40e7bc8fc8d558e38edf08fab9c", "url": "https://github.com/palantir/atlasdb/commit/d7dec31ad483d40e7bc8fc8d558e38edf08fab9c", "message": "Remove redundant", "committedDate": "2020-09-24T15:22:04Z", "type": "commit"}]}