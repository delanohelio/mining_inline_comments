{"pr_number": 4863, "pr_title": "Local and remote health pinger", "pr_createdAt": "2020-06-24T12:16:37Z", "pr_url": "https://github.com/palantir/atlasdb/pull/4863", "timeline": [{"oid": "fc42b460e117e8d031335dea762b1d9cee2623de", "url": "https://github.com/palantir/atlasdb/commit/fc42b460e117e8d031335dea762b1d9cee2623de", "message": "Local and remote health pinger", "committedDate": "2020-06-24T12:05:35Z", "type": "commit"}, {"oid": "357284a838caa9ad91860b442e975fdf73f08a70", "url": "https://github.com/palantir/atlasdb/commit/357284a838caa9ad91860b442e975fdf73f08a70", "message": "clean up", "committedDate": "2020-06-24T12:16:23Z", "type": "commit"}, {"oid": "3d659b413653ade6c83ba0615a3d050c3799824b", "url": "https://github.com/palantir/atlasdb/commit/3d659b413653ade6c83ba0615a3d050c3799824b", "message": "fix", "committedDate": "2020-06-24T12:33:12Z", "type": "commit"}, {"oid": "7a1caf4c6ec0914565a688e337d8e60f966401ed", "url": "https://github.com/palantir/atlasdb/commit/7a1caf4c6ec0914565a688e337d8e60f966401ed", "message": "minor refactor", "committedDate": "2020-06-24T12:45:57Z", "type": "commit"}, {"oid": "5e6fb7e76c079acd1e1179e45004cbb1a6385dda", "url": "https://github.com/palantir/atlasdb/commit/5e6fb7e76c079acd1e1179e45004cbb1a6385dda", "message": "Minor refactor", "committedDate": "2020-06-24T14:50:08Z", "type": "commit"}, {"oid": "74820aacaa40c6e66957cb2348567fb2f36eb1c4", "url": "https://github.com/palantir/atlasdb/commit/74820aacaa40c6e66957cb2348567fb2f36eb1c4", "message": "Add generated changelog entries", "committedDate": "2020-06-24T14:51:13Z", "type": "commit"}, {"oid": "ebd6a87e8971518b2134b08bd2eeb41c9ef85a3f", "url": "https://github.com/palantir/atlasdb/commit/ebd6a87e8971518b2134b08bd2eeb41c9ef85a3f", "message": "Add generated changelog entries", "committedDate": "2020-06-24T14:51:13Z", "type": "commit"}, {"oid": "a6a3282082e0281307153ce7f00fda9ca2204a69", "url": "https://github.com/palantir/atlasdb/commit/a6a3282082e0281307153ce7f00fda9ca2204a69", "message": "remove todo", "committedDate": "2020-06-24T14:51:13Z", "type": "commit"}, {"oid": "75456992f854af9e98c40c84b9acaf7568f2adb8", "url": "https://github.com/palantir/atlasdb/commit/75456992f854af9e98c40c84b9acaf7568f2adb8", "message": "Add generated changelog entries", "committedDate": "2020-06-24T14:51:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA0NDk3Mw==", "url": "https://github.com/palantir/atlasdb/pull/4863#discussion_r445044973", "bodyText": "nit: Predicate<Client> avoids boxing/generics overheads, and I'd argue is more descriptive here", "author": "jeremyk-91", "createdAt": "2020-06-24T17:08:44Z", "path": "timelock-impl/src/main/java/com/palantir/atlasdb/timelock/adjudicate/TimeLockClientFeedbackResource.java", "diffHunk": "@@ -16,35 +16,42 @@\n \n package com.palantir.atlasdb.timelock.adjudicate;\n \n+import java.util.function.Function;\n+\n import com.google.common.util.concurrent.Futures;\n import com.google.common.util.concurrent.ListenableFuture;\n import com.palantir.atlasdb.timelock.adjudicate.feedback.TimeLockClientFeedbackService;\n import com.palantir.atlasdb.timelock.adjudicate.feedback.TimeLockClientFeedbackServiceEndpoints;\n import com.palantir.atlasdb.timelock.adjudicate.feedback.UndertowTimeLockClientFeedbackService;\n import com.palantir.conjure.java.undertow.lib.UndertowService;\n+import com.palantir.paxos.Client;\n import com.palantir.timelock.feedback.ConjureTimeLockClientFeedback;\n import com.palantir.tokens.auth.AuthHeader;\n \n public class TimeLockClientFeedbackResource implements UndertowTimeLockClientFeedbackService {\n+    private Function<Client, Boolean> leadershipCheck;", "originalCommit": "75456992f854af9e98c40c84b9acaf7568f2adb8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4deaf60ac9e5ec9882acced5b8d2af04a84749d5", "chunk": "diff --git a/timelock-impl/src/main/java/com/palantir/atlasdb/timelock/adjudicate/TimeLockClientFeedbackResource.java b/timelock-impl/src/main/java/com/palantir/atlasdb/timelock/adjudicate/TimeLockClientFeedbackResource.java\nindex c243dd0adc..58e347c0a9 100644\n--- a/timelock-impl/src/main/java/com/palantir/atlasdb/timelock/adjudicate/TimeLockClientFeedbackResource.java\n+++ b/timelock-impl/src/main/java/com/palantir/atlasdb/timelock/adjudicate/TimeLockClientFeedbackResource.java\n\n@@ -48,7 +48,6 @@ public class TimeLockClientFeedbackResource implements UndertowTimeLockClientFee\n     }\n     @Override\n     public ListenableFuture<Void> reportFeedback(AuthHeader authHeader, ConjureTimeLockClientFeedback feedbackReport) {\n-        // todo - this will not work for Alta\n         if (leadershipCheck.apply(Client.of(feedbackReport.getServiceName()))) {\n             // process feedback\n         }\n"}}, {"oid": "4deaf60ac9e5ec9882acced5b8d2af04a84749d5", "url": "https://github.com/palantir/atlasdb/commit/4deaf60ac9e5ec9882acced5b8d2af04a84749d5", "message": "Remove comment", "committedDate": "2020-06-24T17:26:28Z", "type": "commit"}, {"oid": "0a614634297b751737d1ce91b3b8c767646382b2", "url": "https://github.com/palantir/atlasdb/commit/0a614634297b751737d1ce91b3b8c767646382b2", "message": "Merge branch 'feedback_sink_leadership' of github.com:palantir/atlasdb into feedback_sink_leadership", "committedDate": "2020-06-24T17:26:45Z", "type": "commit"}, {"oid": "ae9e123310468f2e30ccf55d0e7bc8fa8c27a698", "url": "https://github.com/palantir/atlasdb/commit/ae9e123310468f2e30ccf55d0e7bc8fa8c27a698", "message": "Address comments", "committedDate": "2020-06-24T17:57:09Z", "type": "commit"}]}