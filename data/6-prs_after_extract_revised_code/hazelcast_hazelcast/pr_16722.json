{"pr_number": 16722, "pr_title": "Allow AbstractSerializationService.serializerFor() to be overridden", "pr_createdAt": "2020-03-04T08:38:46Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/16722", "timeline": [{"oid": "c357136528722e9cdcddeff20d44ace8163a0176", "url": "https://github.com/hazelcast/hazelcast/commit/c357136528722e9cdcddeff20d44ace8163a0176", "message": "Allow AbstractSerializationService.serializerFor() to be overridden", "committedDate": "2020-03-04T08:37:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTczOTc4Mw==", "url": "https://github.com/hazelcast/hazelcast/pull/16722#discussion_r389739783", "bodyText": "removing final should be enough, why does serializerFor need to be public?", "author": "vbekiaris", "createdAt": "2020-03-09T14:49:51Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/AbstractSerializationService.java", "diffHunk": "@@ -435,7 +446,7 @@ private SerializerAdapter registerFromSuperType(final Class type, final Class su\n         return serializer;\n     }\n \n-    protected final SerializerAdapter serializerFor(final int typeId) {\n+    public SerializerAdapter serializerFor(final int typeId) {", "originalCommit": "c357136528722e9cdcddeff20d44ace8163a0176", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEzNzQyNg==", "url": "https://github.com/hazelcast/hazelcast/pull/16722#discussion_r390137426", "bodyText": "as discussed, serializerFor methods need to be public to be used by the delegating serialization service on Jet side.", "author": "vbekiaris", "createdAt": "2020-03-10T07:44:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTczOTc4Mw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MDAxMg==", "url": "https://github.com/hazelcast/hazelcast/pull/16722#discussion_r389740012", "bodyText": "isn't protected enough?", "author": "vbekiaris", "createdAt": "2020-03-09T14:50:14Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/AbstractSerializationService.java", "diffHunk": "@@ -445,7 +456,7 @@ protected final SerializerAdapter serializerFor(final int typeId) {\n         return idMap.get(typeId);\n     }\n \n-    protected final SerializerAdapter serializerFor(Object object) {\n+    public SerializerAdapter serializerFor(Object object) {", "originalCommit": "c357136528722e9cdcddeff20d44ace8163a0176", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEzNzUyMQ==", "url": "https://github.com/hazelcast/hazelcast/pull/16722#discussion_r390137521", "bodyText": "same as above serializerFor comment", "author": "vbekiaris", "createdAt": "2020-03-10T07:45:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0MDAxMg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0NjE5MA==", "url": "https://github.com/hazelcast/hazelcast/pull/16722#discussion_r389746190", "bodyText": "instead of changing visibility of constructor maybe you can make the static factory method SerializationUtil#createSerializerAdapter public and client code on Jet side can work on SerializerAdapter interface?", "author": "vbekiaris", "createdAt": "2020-03-09T14:58:39Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/StreamSerializerAdapter.java", "diffHunk": "@@ -27,12 +26,12 @@\n \n import java.io.IOException;\n \n-class StreamSerializerAdapter implements SerializerAdapter {\n+public class StreamSerializerAdapter implements SerializerAdapter {\n \n     protected final InternalSerializationService service;\n     protected final StreamSerializer serializer;\n \n-    StreamSerializerAdapter(InternalSerializationService service, StreamSerializer serializer) {\n+    public StreamSerializerAdapter(InternalSerializationService service, StreamSerializer serializer) {", "originalCommit": "c357136528722e9cdcddeff20d44ace8163a0176", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "41a679c8cbbd6accae3560ecb318af0135f5c2f9", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/StreamSerializerAdapter.java b/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/StreamSerializerAdapter.java\nindex 014af813f24..4b652595c6f 100644\n--- a/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/StreamSerializerAdapter.java\n+++ b/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/StreamSerializerAdapter.java\n\n@@ -26,12 +26,12 @@ import com.hazelcast.nio.serialization.TypedStreamDeserializer;\n \n import java.io.IOException;\n \n-public class StreamSerializerAdapter implements SerializerAdapter {\n+class StreamSerializerAdapter implements SerializerAdapter {\n \n     protected final InternalSerializationService service;\n     protected final StreamSerializer serializer;\n \n-    public StreamSerializerAdapter(InternalSerializationService service, StreamSerializer serializer) {\n+    StreamSerializerAdapter(InternalSerializationService service, StreamSerializer serializer) {\n         this.service = service;\n         this.serializer = serializer;\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0NzIzNQ==", "url": "https://github.com/hazelcast/hazelcast/pull/16722#discussion_r389747235", "bodyText": "no need for this to be public as discussed", "author": "vbekiaris", "createdAt": "2020-03-09T15:00:11Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/ByteArraySerializerAdapter.java", "diffHunk": "@@ -25,11 +25,11 @@\n \n import java.io.IOException;\n \n-class ByteArraySerializerAdapter implements SerializerAdapter {\n+public class ByteArraySerializerAdapter implements SerializerAdapter {", "originalCommit": "c357136528722e9cdcddeff20d44ace8163a0176", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "41a679c8cbbd6accae3560ecb318af0135f5c2f9", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/ByteArraySerializerAdapter.java b/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/ByteArraySerializerAdapter.java\nindex c2789ef9aab..1a700883b13 100644\n--- a/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/ByteArraySerializerAdapter.java\n+++ b/hazelcast/src/main/java/com/hazelcast/internal/serialization/impl/ByteArraySerializerAdapter.java\n\n@@ -25,11 +25,11 @@ import com.hazelcast.nio.serialization.TypedByteArrayDeserializer;\n \n import java.io.IOException;\n \n-public class ByteArraySerializerAdapter implements SerializerAdapter {\n+class ByteArraySerializerAdapter implements SerializerAdapter {\n \n     protected final ByteArraySerializer serializer;\n \n-    public ByteArraySerializerAdapter(ByteArraySerializer serializer) {\n+    ByteArraySerializerAdapter(ByteArraySerializer serializer) {\n         this.serializer = serializer;\n     }\n \n"}}, {"oid": "41a679c8cbbd6accae3560ecb318af0135f5c2f9", "url": "https://github.com/hazelcast/hazelcast/commit/41a679c8cbbd6accae3560ecb318af0135f5c2f9", "message": "Unpublish adapters", "committedDate": "2020-03-09T15:30:25Z", "type": "commit"}, {"oid": "3c13677466c3b230751decceb0edc2c89bcf5e7c", "url": "https://github.com/hazelcast/hazelcast/commit/3c13677466c3b230751decceb0edc2c89bcf5e7c", "message": "Merge branch 'master' into expose_serializerFor", "committedDate": "2020-03-09T15:35:32Z", "type": "commit"}, {"oid": "caeb51f133b078f525defc796407cc78322a3fb5", "url": "https://github.com/hazelcast/hazelcast/commit/caeb51f133b078f525defc796407cc78322a3fb5", "message": "Fix checkstyle", "committedDate": "2020-03-09T16:07:12Z", "type": "commit"}]}