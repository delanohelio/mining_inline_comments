{"pr_number": 16508, "pr_title": "Indicate eviction works by returning a boolean result)", "pr_createdAt": "2020-01-21T08:06:48Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/16508", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAwOTgyOA==", "url": "https://github.com/hazelcast/hazelcast/pull/16508#discussion_r369009828", "bodyText": "minor: internal API but adding a @return would be nice", "author": "vojtechtoman", "createdAt": "2020-01-21T13:49:43Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/nearcache/NearCacheRecordStore.java", "diffHunk": "@@ -110,7 +110,7 @@\n      *                            size check, otherwise set {@code false} to evict\n      *                            after a max size check.\n      */\n-    void doEviction(boolean withoutMaxSizeCheck);\n+    boolean doEviction(boolean withoutMaxSizeCheck);", "originalCommit": "84244b7218b9cb6ac0fc3b9e5c7fd8f2b8cc7304", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAyMjg5Mg==", "url": "https://github.com/hazelcast/hazelcast/pull/16508#discussion_r369022892", "bodyText": "fixed", "author": "ahmetmircik", "createdAt": "2020-01-21T14:13:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAwOTgyOA=="}], "type": "inlineReview", "revised_code": {"commit": "ae30dbfb7bb80079c20f83c31747ae2d83b252db", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/internal/nearcache/NearCacheRecordStore.java b/hazelcast/src/main/java/com/hazelcast/internal/nearcache/NearCacheRecordStore.java\nindex 2389f903771..53d34508224 100644\n--- a/hazelcast/src/main/java/com/hazelcast/internal/nearcache/NearCacheRecordStore.java\n+++ b/hazelcast/src/main/java/com/hazelcast/internal/nearcache/NearCacheRecordStore.java\n\n@@ -109,6 +109,8 @@ public interface NearCacheRecordStore<K, V> extends InitializingObject {\n      * @param withoutMaxSizeCheck set {@code true} to evict regardless of a max\n      *                            size check, otherwise set {@code false} to evict\n      *                            after a max size check.\n+     * @return {@code true} to indicate eviction\n+     * is done otherwise returns {@code false}\n      */\n     boolean doEviction(boolean withoutMaxSizeCheck);\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxMjE2OQ==", "url": "https://github.com/hazelcast/hazelcast/pull/16508#discussion_r369012169", "bodyText": "Just to double-check - the idea is to return true if eviction was performed, but not if eviction was performed and an entry was evicted (that is, return the result of evictionStrategy.evict()), correct?", "author": "vojtechtoman", "createdAt": "2020-01-21T13:53:59Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/nearcache/impl/store/AbstractNearCacheRecordStore.java", "diffHunk": "@@ -321,15 +321,16 @@ public int size() {\n     }\n \n     @Override\n-    public void doEviction(boolean withoutMaxSizeCheck) {\n+    public boolean doEviction(boolean withoutMaxSizeCheck) {\n         checkAvailable();\n \n         if (evictionDisabled) {\n-            return;\n+            return false;\n         }\n \n         EvictionChecker evictionChecker = withoutMaxSizeCheck ? null : this.evictionChecker;\n         evictionStrategy.evict(records, evictionPolicyEvaluator, evictionChecker, this);\n+        return true;", "originalCommit": "84244b7218b9cb6ac0fc3b9e5c7fd8f2b8cc7304", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAyMzAxMg==", "url": "https://github.com/hazelcast/hazelcast/pull/16508#discussion_r369023012", "bodyText": "your understanding is true.", "author": "ahmetmircik", "createdAt": "2020-01-21T14:13:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxMjE2OQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "86b5229afbbefda0947fd43937392f9e038f0b23", "url": "https://github.com/hazelcast/hazelcast/commit/86b5229afbbefda0947fd43937392f9e038f0b23", "message": "Indicate eviction works by returning a boolean result", "committedDate": "2020-01-21T14:11:38Z", "type": "commit"}, {"oid": "ae30dbfb7bb80079c20f83c31747ae2d83b252db", "url": "https://github.com/hazelcast/hazelcast/commit/ae30dbfb7bb80079c20f83c31747ae2d83b252db", "message": "Address review comment", "committedDate": "2020-01-21T14:12:56Z", "type": "commit"}, {"oid": "ae30dbfb7bb80079c20f83c31747ae2d83b252db", "url": "https://github.com/hazelcast/hazelcast/commit/ae30dbfb7bb80079c20f83c31747ae2d83b252db", "message": "Address review comment", "committedDate": "2020-01-21T14:12:56Z", "type": "forcePushed"}]}