{"pr_number": 16688, "pr_title": "#13938 Remove slash when appended to map key in REST call", "pr_createdAt": "2020-02-26T03:03:47Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/16688", "timeline": [{"oid": "bd5b7801e41c86dabdf9b3ee73c4f1dc4ca95d73", "url": "https://github.com/hazelcast/hazelcast/commit/bd5b7801e41c86dabdf9b3ee73c4f1dc4ca95d73", "message": "#13938 Remove slash when appended to map key in REST call", "committedDate": "2020-02-26T02:40:54Z", "type": "commit"}, {"oid": "c0bd6b1252bde92477fab11ed88cf3f1cc269ad2", "url": "https://github.com/hazelcast/hazelcast/commit/c0bd6b1252bde92477fab11ed88cf3f1cc269ad2", "message": "Merge branch 'master' into pr/map-put-ending-slash", "committedDate": "2020-03-02T12:19:44Z", "type": "commit"}, {"oid": "1b9d69ef2029c86aa9c9507340a5d925d2ecea81", "url": "https://github.com/hazelcast/hazelcast/commit/1b9d69ef2029c86aa9c9507340a5d925d2ecea81", "message": "#13938 Remove trailing slash from key for map get and delete commands", "committedDate": "2020-03-02T13:45:25Z", "type": "commit"}, {"oid": "51efbce548b9a3e65281147c72ae3d39beb10c7b", "url": "https://github.com/hazelcast/hazelcast/commit/51efbce548b9a3e65281147c72ae3d39beb10c7b", "message": "Merge branch 'master' into pr/map-put-ending-slash", "committedDate": "2020-03-03T03:57:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg0NzA5Mw==", "url": "https://github.com/hazelcast/hazelcast/pull/16688#discussion_r386847093", "bodyText": "It would be great to cover the util method with tests.", "author": "kwart", "createdAt": "2020-03-03T07:52:53Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java", "diffHunk": "@@ -388,4 +388,17 @@ public static boolean equalsIgnoreCase(String str1, String str2) {\n                 ? false\n                 : (str1 == str2 || lowerCaseInternal(str1).equals(lowerCaseInternal(str2)));\n     }\n+\n+    /**\n+     * Strips the trailing slash from the input string, if it is present\n+     *\n+     * @param str\n+     * @return the string with trailing slash removed\n+     */\n+    public static String stripTrailingSlash(String str) {", "originalCommit": "51efbce548b9a3e65281147c72ae3d39beb10c7b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f6212966e3a12f247bc4456025895c37bad6e9e0", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java b/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java\nindex 9754dffb861..23233880039 100644\n--- a/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java\n+++ b/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java\n\n@@ -396,6 +396,9 @@ public final class StringUtil {\n      * @return the string with trailing slash removed\n      */\n     public static String stripTrailingSlash(String str) {\n+        if (isNullOrEmpty(str)) {\n+            return str;\n+        }\n         if (str.charAt(str.length() - 1) == '/') {\n             return str.substring(0, str.length() - 1);\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg0NzUyNw==", "url": "https://github.com/hazelcast/hazelcast/pull/16688#discussion_r386847527", "bodyText": "Empty Strings and null values can fail here.", "author": "kwart", "createdAt": "2020-03-03T07:53:59Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java", "diffHunk": "@@ -388,4 +388,17 @@ public static boolean equalsIgnoreCase(String str1, String str2) {\n                 ? false\n                 : (str1 == str2 || lowerCaseInternal(str1).equals(lowerCaseInternal(str2)));\n     }\n+\n+    /**\n+     * Strips the trailing slash from the input string, if it is present\n+     *\n+     * @param str\n+     * @return the string with trailing slash removed\n+     */\n+    public static String stripTrailingSlash(String str) {\n+        if (str.charAt(str.length() - 1) == '/') {", "originalCommit": "51efbce548b9a3e65281147c72ae3d39beb10c7b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f6212966e3a12f247bc4456025895c37bad6e9e0", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java b/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java\nindex 9754dffb861..23233880039 100644\n--- a/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java\n+++ b/hazelcast/src/main/java/com/hazelcast/internal/util/StringUtil.java\n\n@@ -396,6 +396,9 @@ public final class StringUtil {\n      * @return the string with trailing slash removed\n      */\n     public static String stripTrailingSlash(String str) {\n+        if (isNullOrEmpty(str)) {\n+            return str;\n+        }\n         if (str.charAt(str.length() - 1) == '/') {\n             return str.substring(0, str.length() - 1);\n         }\n"}}, {"oid": "339d23e0339fbf1e1d4ca5b74ab8e872e4747e70", "url": "https://github.com/hazelcast/hazelcast/commit/339d23e0339fbf1e1d4ca5b74ab8e872e4747e70", "message": "Merge branch 'master' into pr/map-put-ending-slash", "committedDate": "2020-03-04T03:06:57Z", "type": "commit"}, {"oid": "f6212966e3a12f247bc4456025895c37bad6e9e0", "url": "https://github.com/hazelcast/hazelcast/commit/f6212966e3a12f247bc4456025895c37bad6e9e0", "message": "Add null check to stripTrailingSlash method and add tests for method", "committedDate": "2020-03-04T04:08:37Z", "type": "commit"}]}