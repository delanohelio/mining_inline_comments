{"pr_number": 17071, "pr_title": "Map count with atleast one query cache", "pr_createdAt": "2020-06-11T11:08:33Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/17071", "timeline": [{"oid": "03cf529c2680fc0ba428e458f501d3e1baa42799", "url": "https://github.com/hazelcast/hazelcast/commit/03cf529c2680fc0ba428e458f501d3e1baa42799", "message": "Map count with atleast a query cache", "committedDate": "2020-06-11T10:19:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgyNTQ4OQ==", "url": "https://github.com/hazelcast/hazelcast/pull/17071#discussion_r438825489", "bodyText": "Please write it as !config.getQueryCacheConfigs().isEmpty() instead of checking the size.", "author": "erosb", "createdAt": "2020-06-11T14:24:32Z", "path": "hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/MapInfoCollector.java", "diffHunk": "@@ -65,4 +66,15 @@ private long countMapWithMapStoreEnabled(Node node) {\n             return false;\n         }).count();\n     }\n+\n+    private long countMapWithAtleastOneQueryCache(Node node) {\n+        return maps.stream().filter(distributedObject -> {\n+            MapConfig config = node.getConfig().getMapConfig(distributedObject.getName());\n+            if (config != null) {\n+                return config.getQueryCacheConfigs().size() >= 1;", "originalCommit": "03cf529c2680fc0ba428e458f501d3e1baa42799", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "466b9c7234fd66af2ae79cc7a33dcef800c39633", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/MapInfoCollector.java b/hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/MapInfoCollector.java\nindex 09ea8ca2b8..fce9ad37d3 100644\n--- a/hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/MapInfoCollector.java\n+++ b/hazelcast/src/main/java/com/hazelcast/internal/util/phonehome/MapInfoCollector.java\n\n@@ -71,7 +71,7 @@ class MapInfoCollector implements MetricsCollector {\n         return maps.stream().filter(distributedObject -> {\n             MapConfig config = node.getConfig().getMapConfig(distributedObject.getName());\n             if (config != null) {\n-                return config.getQueryCacheConfigs().size() >= 1;\n+                return !config.getQueryCacheConfigs().isEmpty();\n             }\n             return false;\n         }).count();\n"}}, {"oid": "466b9c7234fd66af2ae79cc7a33dcef800c39633", "url": "https://github.com/hazelcast/hazelcast/commit/466b9c7234fd66af2ae79cc7a33dcef800c39633", "message": "updates", "committedDate": "2020-06-11T16:24:21Z", "type": "commit"}]}