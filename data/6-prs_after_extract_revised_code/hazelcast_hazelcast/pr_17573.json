{"pr_number": 17573, "pr_title": "Allow simplified Kerberos authentication configuration in basic scenarios", "pr_createdAt": "2020-09-17T16:37:46Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/17573", "timeline": [{"oid": "c637bd288058ccd613771a1316293d2408cbe00b", "url": "https://github.com/hazelcast/hazelcast/commit/c637bd288058ccd613771a1316293d2408cbe00b", "message": "Allow simplified Kerberos authentication configuration in basic scenarios.", "committedDate": "2020-09-16T13:43:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NzkwOA==", "url": "https://github.com/hazelcast/hazelcast/pull/17573#discussion_r494457908", "bodyText": "This behaviour (null value removing property mapping) should be documented in method's javadoc and tested in LoginModuleConfigTest. I guess the behaviour change is not a problem, since it was previously throwing NullPointerException.", "author": "vbekiaris", "createdAt": "2020-09-24T16:35:46Z", "path": "hazelcast/src/main/java/com/hazelcast/config/LoginModuleConfig.java", "diffHunk": "@@ -99,7 +99,11 @@ public LoginModuleConfig setProperties(Properties properties) {\n     }\n \n     public LoginModuleConfig setProperty(String key, String value) {\n-        properties.setProperty(key, value);\n+        if (value != null) {", "originalCommit": "c637bd288058ccd613771a1316293d2408cbe00b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDkyMDA3Ng==", "url": "https://github.com/hazelcast/hazelcast/pull/17573#discussion_r494920076", "bodyText": "Good point. I'll probably add another method setOrClear(String, String), and revert the behavior of the setProperty as there could be users relying on the original behavior as a fail-fast approach for login misconfiguration.", "author": "kwart", "createdAt": "2020-09-25T11:18:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NzkwOA=="}], "type": "inlineReview", "revised_code": {"commit": "d4eba1e09af168a5240b4886fb24181687a09195", "chunk": "diff --git a/hazelcast/src/main/java/com/hazelcast/config/LoginModuleConfig.java b/hazelcast/src/main/java/com/hazelcast/config/LoginModuleConfig.java\nindex 5a5c8531209..fb67d21d09d 100644\n--- a/hazelcast/src/main/java/com/hazelcast/config/LoginModuleConfig.java\n+++ b/hazelcast/src/main/java/com/hazelcast/config/LoginModuleConfig.java\n\n@@ -99,6 +102,19 @@ public class LoginModuleConfig {\n     }\n \n     public LoginModuleConfig setProperty(String key, String value) {\n+        properties.setProperty(key, value);\n+        return this;\n+    }\n+\n+    /**\n+     * Alternative to the {@link #setProperty(String, String)} method. This method allows to use {@code null} as {@code value}\n+     * parameter. In such case is the property removed.\n+     *\n+     * @param key property name (must not be {@code null})\n+     * @param value new value or {@code null}\n+     * @return this instance\n+     */\n+    public LoginModuleConfig setOrClear(@Nonnull String key, @Nullable String value) {\n         if (value != null) {\n             properties.setProperty(key, value);\n         } else {\n"}}, {"oid": "d4eba1e09af168a5240b4886fb24181687a09195", "url": "https://github.com/hazelcast/hazelcast/commit/d4eba1e09af168a5240b4886fb24181687a09195", "message": "Impl review comments", "committedDate": "2020-09-25T14:35:17Z", "type": "commit"}]}