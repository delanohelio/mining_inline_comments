{"pr_number": 7038, "pr_title": "Split App class following the object store pattern", "pr_createdAt": "2020-08-17T16:57:06Z", "pr_url": "https://github.com/realm/realm-java/pull/7038", "timeline": [{"oid": "7e8e0b7abd717bb2ce8f843503e27e262dd7e706", "url": "https://github.com/realm/realm-java/commit/7e8e0b7abd717bb2ce8f843503e27e262dd7e706", "message": "Move app native calls into OsApp", "committedDate": "2020-08-17T16:19:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk1OTI4NQ==", "url": "https://github.com/realm/realm-java/pull/7038#discussion_r471959285", "bodyText": "Rember to delete other constructors if they are not used anymore.", "author": "rorbech", "createdAt": "2020-08-18T07:05:49Z", "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/User.java", "diffHunk": "@@ -119,6 +119,11 @@ protected PushImpl(OsPush osPush) {\n         this.app = app;\n     }\n \n+    User(OsSyncUser osUser, App app) {", "originalCommit": "7e8e0b7abd717bb2ce8f843503e27e262dd7e706", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "534a482ba4a96ddb5863c58fa7b8036014a8d455", "chunk": "diff --git a/realm/realm-library/src/objectServer/java/io/realm/mongodb/User.java b/realm/realm-library/src/objectServer/java/io/realm/mongodb/User.java\nindex 54bdf4108..755132eff 100644\n--- a/realm/realm-library/src/objectServer/java/io/realm/mongodb/User.java\n+++ b/realm/realm-library/src/objectServer/java/io/realm/mongodb/User.java\n\n@@ -114,11 +114,6 @@ public class User {\n         }\n     }\n \n-    User(long nativePtr, App app) {\n-        this.osUser = new OsSyncUser(nativePtr);\n-        this.app = app;\n-    }\n-\n     User(OsSyncUser osUser, App app) {\n         this.osUser = osUser;\n         this.app = app;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk4NDI0NQ==", "url": "https://github.com/realm/realm-java/pull/7038#discussion_r471984245", "bodyText": "Does this really need to be public? It looks like it is only used by TestApp which already extends App, so it could just access internals directly.\nIf not, we need to add JavaDoc and warn people about not using this as it is for internal usage.", "author": "cmelchior", "createdAt": "2020-08-18T07:50:12Z", "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/App.java", "diffHunk": "@@ -519,14 +492,8 @@ public AppConfiguration getConfiguration() {\n      * Swap the currently configured network transport with the provided one.\n      * This should only be done if no network requests are currently running.\n      */\n-    void setNetworkTransport(OsJavaNetworkTransport transport) {\n-        networkTransport = transport;\n-    }\n-\n-    @KeepMember\n-        // Called from JNI\n-    OsJavaNetworkTransport getNetworkTransport() {\n-        return networkTransport;\n+    public void setNetworkTransport(OsJavaNetworkTransport transport) {", "originalCommit": "7e8e0b7abd717bb2ce8f843503e27e262dd7e706", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "534a482ba4a96ddb5863c58fa7b8036014a8d455", "chunk": "diff --git a/realm/realm-library/src/objectServer/java/io/realm/mongodb/App.java b/realm/realm-library/src/objectServer/java/io/realm/mongodb/App.java\nindex c4f54a4d8..70d400a6a 100644\n--- a/realm/realm-library/src/objectServer/java/io/realm/mongodb/App.java\n+++ b/realm/realm-library/src/objectServer/java/io/realm/mongodb/App.java\n\n@@ -492,7 +492,7 @@ public class App {\n      * Swap the currently configured network transport with the provided one.\n      * This should only be done if no network requests are currently running.\n      */\n-    public void setNetworkTransport(OsJavaNetworkTransport transport) {\n+    protected void setNetworkTransport(OsJavaNetworkTransport transport) {\n         osApp.setNetworkTransport(transport);\n     }\n \n"}}, {"oid": "534a482ba4a96ddb5863c58fa7b8036014a8d455", "url": "https://github.com/realm/realm-java/commit/534a482ba4a96ddb5863c58fa7b8036014a8d455", "message": "Remove unused constructor\nProtect setNetworkTransport", "committedDate": "2020-08-18T08:36:02Z", "type": "commit"}]}