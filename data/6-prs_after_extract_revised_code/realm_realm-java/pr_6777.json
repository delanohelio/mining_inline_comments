{"pr_number": 6777, "pr_title": "Add new test cases", "pr_createdAt": "2020-03-16T08:04:31Z", "pr_url": "https://github.com/realm/realm-java/pull/6777", "timeline": [{"oid": "af46e4c5232780f8bdea4e91c3866c1d1b928923", "url": "https://github.com/realm/realm-java/commit/af46e4c5232780f8bdea4e91c3866c1d1b928923", "message": "Add three new test cases, two in RealmInMemoryTest.java one in IOSRealmTests.java", "committedDate": "2020-03-16T07:02:42Z", "type": "commit"}, {"oid": "08cd7181a5b60e7feeca6ae82846792d6db4456d", "url": "https://github.com/realm/realm-java/commit/08cd7181a5b60e7feeca6ae82846792d6db4456d", "message": "Delete new test cases in RealmInMemoryTest.java", "committedDate": "2020-03-16T19:31:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI4NDIzNQ==", "url": "https://github.com/realm/realm-java/pull/6777#discussion_r393284235", "bodyText": "Suggested change", "author": "cmelchior", "createdAt": "2020-03-16T20:12:35Z", "path": "realm/realm-library/src/androidTest/java/io/realm/RealmInMemoryTest.java", "diffHunk": "@@ -182,6 +182,34 @@ public void writeCopyTo() {\n         }\n     }\n \n+    // Tests writeCopyTo result when called in a transaction.\n+    @Test\n+    public void writeCopyToInTransaction() {\n+        String fileName = IDENTIFIER + \".realm\";\n+        RealmConfiguration conf = configFactory.createConfigurationBuilder()\n+                .name(fileName)\n+                .build();\n+\n+        Realm.deleteRealm(conf);\n+\n+        testRealm.beginTransaction();\n+        Dog dog = testRealm.createObject(Dog.class);\n+        dog.setName(\"DinoDog\");\n+\n+        // Write copy to destination file in transaction.\n+        // Check if the new data would be written into the file.\n+        testRealm.writeCopyTo(new File(configFactory.getRoot(), fileName));\n+        Realm onDiskRealm = Realm.getInstance(conf);\n+        assertEquals(1, onDiskRealm.where(Dog.class).count());\n+\n+        testRealm.commitTransaction();\n+\n+        assertEquals(1, testRealm.where(Dog.class).count());\n+        onDiskRealm.close();\n+", "originalCommit": "08cd7181a5b60e7feeca6ae82846792d6db4456d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8090121a66e245734cd8e728734b34d4fd37a042", "chunk": "diff --git a/realm/realm-library/src/androidTest/java/io/realm/RealmInMemoryTest.java b/realm/realm-library/src/androidTest/java/io/realm/RealmInMemoryTest.java\nindex a1e443b4f..6435ada01 100644\n--- a/realm/realm-library/src/androidTest/java/io/realm/RealmInMemoryTest.java\n+++ b/realm/realm-library/src/androidTest/java/io/realm/RealmInMemoryTest.java\n\n@@ -206,7 +206,6 @@ public class RealmInMemoryTest {\n \n         assertEquals(1, testRealm.where(Dog.class).count());\n         onDiskRealm.close();\n-\n     }\n \n \n"}}, {"oid": "8090121a66e245734cd8e728734b34d4fd37a042", "url": "https://github.com/realm/realm-java/commit/8090121a66e245734cd8e728734b34d4fd37a042", "message": "Update realm/realm-library/src/androidTest/java/io/realm/RealmInMemoryTest.java\r\n\r\nRemove a blank line\n\nCo-Authored-By: Christian Melchior <christian@ilios.dk>", "committedDate": "2020-03-16T20:15:16Z", "type": "commit"}]}