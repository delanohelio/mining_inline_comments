{"pr_number": 6779, "pr_title": "Add support for RealmApp.logOut + associated helper methods", "pr_createdAt": "2020-03-18T23:36:08Z", "pr_url": "https://github.com/realm/realm-java/pull/6779", "timeline": [{"oid": "1298355f213d4dc3eff9f00d9c9cdfda5b94d0ff", "url": "https://github.com/realm/realm-java/commit/1298355f213d4dc3eff9f00d9c9cdfda5b94d0ff", "message": "Rough POC of RealmApp refactor", "committedDate": "2020-02-26T15:28:18Z", "type": "commit"}, {"oid": "52b5f6e2ba11ea61c50096f77ed754c3efbf7ac8", "url": "https://github.com/realm/realm-java/commit/52b5f6e2ba11ea61c50096f77ed754c3efbf7ac8", "message": "Merge branch 'v10' into cm/realmapp", "committedDate": "2020-03-02T12:02:09Z", "type": "commit"}, {"oid": "6d7d6e185780414172134ad7eb0070c90cec335b", "url": "https://github.com/realm/realm-java/commit/6d7d6e185780414172134ad7eb0070c90cec335b", "message": "Android android.jar to javah classpath. Disable JavaDoc generation temporarily (a lot of links are broken)", "committedDate": "2020-03-02T13:01:29Z", "type": "commit"}, {"oid": "f7a075182fb82afb703642d930b2e7d8aa296798", "url": "https://github.com/realm/realm-java/commit/f7a075182fb82afb703642d930b2e7d8aa296798", "message": "Minimal work to get object server unit tests to compile", "committedDate": "2020-03-02T14:54:22Z", "type": "commit"}, {"oid": "5d65cc85a8c23e34c83f48fbdc620ae28ad11e33", "url": "https://github.com/realm/realm-java/commit/5d65cc85a8c23e34c83f48fbdc620ae28ad11e33", "message": "Add basic support for RealmCredentials. Remove App from most class names. Preliminary work on getting a a network request to work.", "committedDate": "2020-03-03T23:47:57Z", "type": "commit"}, {"oid": "9bba39bc70ec3b340a723b15bfa911cdff844e24", "url": "https://github.com/realm/realm-java/commit/9bba39bc70ec3b340a723b15bfa911cdff844e24", "message": "Remove UserStore interface. It will flow through RealmApp in the future.", "committedDate": "2020-03-04T00:06:09Z", "type": "commit"}, {"oid": "f2766cc524b284bfbf1af807c8f0ab1f033a1e0d", "url": "https://github.com/realm/realm-java/commit/f2766cc524b284bfbf1af807c8f0ab1f033a1e0d", "message": "Implementing first draft for network transport callbacks between Java and C++. Added first draft for RealmUser functionality.", "committedDate": "2020-03-05T10:40:18Z", "type": "commit"}, {"oid": "93aae2d1bd0c1676d6d4d6c0e96eb338e48a64d1", "url": "https://github.com/realm/realm-java/commit/93aae2d1bd0c1676d6d4d6c0e96eb338e48a64d1", "message": "Use AndroidX for test artifacts. Upgrade OKHttp. Add test app used for native debugging. Fix most of the bugs for doing network roundtrips.", "committedDate": "2020-03-06T11:07:38Z", "type": "commit"}, {"oid": "086fbae14e8f24bd61de5dd44191cc4063ff439e", "url": "https://github.com/realm/realm-java/commit/086fbae14e8f24bd61de5dd44191cc4063ff439e", "message": "Merge branch 'v10' into cm/realmapp\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tdependencies.list\n#\trealm/build.gradle\n#\trealm/gradle/wrapper/gradle-wrapper.properties\n#\trealm/kotlin-extensions/build.gradle\n#\trealm/kotlin-extensions/src/androidTest/kotlin/io/realm/KotlinRealmTests.kt\n#\trealm/kotlin-extensions/src/androidTestObjectServer/kotlin/io/realm/kotlin/KotlinSyncedRealmTests.kt\n#\trealm/realm-library/build.gradle\n#\trealm/realm-library/src/androidTestObjectServer/java/io/realm/AuthenticateRequestTests.java\n#\trealm/realm-library/src/androidTestObjectServer/java/io/realm/SyncConfigurationTests.java\n#\trealm/realm-library/src/androidTestObjectServer/java/io/realm/SyncUserTests.java\n#\trealm/realm-library/src/androidTestObjectServer/java/io/realm/objectserver/utils/StringOnlyModule.java\n#\trealm/realm-library/src/main/cpp/CMakeLists.txt\n#\trealm/realm-library/src/main/cpp/io_realm_RealmFileUserStore.cpp\n#\trealm/realm-library/src/syncIntegrationTest/java/io/realm/objectserver/utils/StringOnlyModule.java\n#\trealm/realm-library/src/syncTestUtils/java/io/realm/objectserver/utils/StringOnlyModule.java\n#\trealm/realm-library/src/testUtils/java/io/realm/rule/RunWithRemoteService.java", "committedDate": "2020-03-08T21:49:07Z", "type": "commit"}, {"oid": "afa4621f78f7ec609ad070e24ec4fbfb34537881", "url": "https://github.com/realm/realm-java/commit/afa4621f78f7ec609ad070e24ec4fbfb34537881", "message": "Make project compile after merge from v10", "committedDate": "2020-03-09T08:03:50Z", "type": "commit"}, {"oid": "a70e679a890f6ce527cef009f73c4445b0fa701f", "url": "https://github.com/realm/realm-java/commit/a70e679a890f6ce527cef009f73c4445b0fa701f", "message": "Enable test scripts to start docker. Make objectServer tests compile and run", "committedDate": "2020-03-09T10:01:39Z", "type": "commit"}, {"oid": "271fc1ddd5f83d2e90a30c9893385cea56db590b", "url": "https://github.com/realm/realm-java/commit/271fc1ddd5f83d2e90a30c9893385cea56db590b", "message": "Add startup scripts for Stitch", "committedDate": "2020-03-09T23:40:54Z", "type": "commit"}, {"oid": "486abf477c6b0d9eaf4886d9086f4588151adc13", "url": "https://github.com/realm/realm-java/commit/486abf477c6b0d9eaf4886d9086f4588151adc13", "message": "Merge branch 'v10' into cm/realmapp\n\n# Conflicts:\n#\trealm/realm-library/src/main/cpp/io_realm_RealmFileUserStore.cpp", "committedDate": "2020-03-11T06:52:12Z", "type": "commit"}, {"oid": "4f017f416bf3601ddba308d32c91701eeceef003", "url": "https://github.com/realm/realm-java/commit/4f017f416bf3601ddba308d32c91701eeceef003", "message": "Send response headers. Use correct url. Fix location value for Stitch", "committedDate": "2020-03-11T07:50:28Z", "type": "commit"}, {"oid": "57bc1979fdedd33324327d758133941bfd200df1", "url": "https://github.com/realm/realm-java/commit/57bc1979fdedd33324327d758133941bfd200df1", "message": "Add Service error codes. Fix http method support in Java. Enable auth providers on Stitch. Better error message when UNKNOWN.", "committedDate": "2020-03-11T09:47:36Z", "type": "commit"}, {"oid": "b7cddb82cd68be6225ba81c1c36e7e57aeaa7a54", "url": "https://github.com/realm/realm-java/commit/b7cddb82cd68be6225ba81c1c36e7e57aeaa7a54", "message": "Fix replacing the transport. Fix propagating all errors correctly through the transport", "committedDate": "2020-03-11T23:52:36Z", "type": "commit"}, {"oid": "064550c6462bb0bfe0abc290bfd483bef73b5ed9", "url": "https://github.com/realm/realm-java/commit/064550c6462bb0bfe0abc290bfd483bef73b5ed9", "message": "Add a new command web server for okhttp tests. Add tests for the OkHttp implementation.", "committedDate": "2020-03-12T13:16:14Z", "type": "commit"}, {"oid": "3a59b71cfd52e41be3af27110161d9dd5cffd3cf", "url": "https://github.com/realm/realm-java/commit/3a59b71cfd52e41be3af27110161d9dd5cffd3cf", "message": "Expose applicationId to integration tests", "committedDate": "2020-03-12T16:38:11Z", "type": "commit"}, {"oid": "8418e83a8249fe7c4f75a15fc2c2802840dec950", "url": "https://github.com/realm/realm-java/commit/8418e83a8249fe7c4f75a15fc2c2802840dec950", "message": "Cleanup", "committedDate": "2020-03-12T17:08:49Z", "type": "commit"}, {"oid": "596388f8070bf1bdd3cabf706a0628f11fceef59", "url": "https://github.com/realm/realm-java/commit/596388f8070bf1bdd3cabf706a0628f11fceef59", "message": "Fix Findbugs", "committedDate": "2020-03-12T17:26:20Z", "type": "commit"}, {"oid": "982ad7f279a73e59a448bec120499dd52df5696d", "url": "https://github.com/realm/realm-java/commit/982ad7f279a73e59a448bec120499dd52df5696d", "message": "Attempt to enable CI testing", "committedDate": "2020-03-12T18:15:22Z", "type": "commit"}, {"oid": "ac903ab07486a88f8e7bbfc2efac2d3cada19a8c", "url": "https://github.com/realm/realm-java/commit/ac903ab07486a88f8e7bbfc2efac2d3cada19a8c", "message": "Magic Jenkins incantations that probably blows up CI", "committedDate": "2020-03-12T19:10:56Z", "type": "commit"}, {"oid": "0fa34514d0d3b9d9f5177946a1b728f6fdff4051", "url": "https://github.com/realm/realm-java/commit/0fa34514d0d3b9d9f5177946a1b728f6fdff4051", "message": "Attempt to fix CI", "committedDate": "2020-03-13T11:48:09Z", "type": "commit"}, {"oid": "80c217fd98af00f1c7c7af98249faed99395be05", "url": "https://github.com/realm/realm-java/commit/80c217fd98af00f1c7c7af98249faed99395be05", "message": "Debug output", "committedDate": "2020-03-13T11:51:29Z", "type": "commit"}, {"oid": "20b3bee85a899d9be1170e2f3b849c13d0e21795", "url": "https://github.com/realm/realm-java/commit/20b3bee85a899d9be1170e2f3b849c13d0e21795", "message": "More CI fixes", "committedDate": "2020-03-13T12:22:40Z", "type": "commit"}, {"oid": "90bbb698bd26d1c352c5b6b15b494b5c40a88d35", "url": "https://github.com/realm/realm-java/commit/90bbb698bd26d1c352c5b6b15b494b5c40a88d35", "message": "Use tmp folder", "committedDate": "2020-03-13T13:00:40Z", "type": "commit"}, {"oid": "f99dbbeb737f684182bd985ddaa48f363494a1a9", "url": "https://github.com/realm/realm-java/commit/f99dbbeb737f684182bd985ddaa48f363494a1a9", "message": "Fix path", "committedDate": "2020-03-13T13:10:22Z", "type": "commit"}, {"oid": "4a1debde94ed4ed4e7266c03dda47c5dc9eb622c", "url": "https://github.com/realm/realm-java/commit/4a1debde94ed4ed4e7266c03dda47c5dc9eb622c", "message": "Use latest Stitch image.", "committedDate": "2020-03-13T13:19:19Z", "type": "commit"}, {"oid": "4c9a611437c0af7b31633146e85b5913d6f0ab42", "url": "https://github.com/realm/realm-java/commit/4c9a611437c0af7b31633146e85b5913d6f0ab42", "message": "Use tmp on CI", "committedDate": "2020-03-13T13:19:55Z", "type": "commit"}, {"oid": "090f011cb9ed1248b662787959cd151502abb8c4", "url": "https://github.com/realm/realm-java/commit/090f011cb9ed1248b662787959cd151502abb8c4", "message": "Test", "committedDate": "2020-03-13T13:29:14Z", "type": "commit"}, {"oid": "d95fc361517e612e824107c4a8279cc93013c266", "url": "https://github.com/realm/realm-java/commit/d95fc361517e612e824107c4a8279cc93013c266", "message": "Add JQ to Docker", "committedDate": "2020-03-13T13:36:38Z", "type": "commit"}, {"oid": "1e2ecf20f9440f567fc742e76aa4364a7eb8c4f1", "url": "https://github.com/realm/realm-java/commit/1e2ecf20f9440f567fc742e76aa4364a7eb8c4f1", "message": "Attempt to fix not finding executables on CI", "committedDate": "2020-03-13T13:40:31Z", "type": "commit"}, {"oid": "feaa6dfc8253e3edf5d718fb648be3ced5e0f876", "url": "https://github.com/realm/realm-java/commit/feaa6dfc8253e3edf5d718fb648be3ced5e0f876", "message": "lower case export", "committedDate": "2020-03-13T13:56:34Z", "type": "commit"}, {"oid": "d44e6f0b6356a2af243b906b7f125ef0addcc01a", "url": "https://github.com/realm/realm-java/commit/d44e6f0b6356a2af243b906b7f125ef0addcc01a", "message": "Debug", "committedDate": "2020-03-13T14:09:06Z", "type": "commit"}, {"oid": "16c4f1db462f285008d7443ef8bb1a7d9faffb86", "url": "https://github.com/realm/realm-java/commit/16c4f1db462f285008d7443ef8bb1a7d9faffb86", "message": "Started the wrong image", "committedDate": "2020-03-13T14:16:12Z", "type": "commit"}, {"oid": "360b2f44f75878a6eb4f99e5e4e7eb4c20558be1", "url": "https://github.com/realm/realm-java/commit/360b2f44f75878a6eb4f99e5e4e7eb4c20558be1", "message": "Reenable real build", "committedDate": "2020-03-13T14:23:21Z", "type": "commit"}, {"oid": "ac2e4b8edee243fe272cf51d30f96c51766b8573", "url": "https://github.com/realm/realm-java/commit/ac2e4b8edee243fe272cf51d30f96c51766b8573", "message": "Disable PMD", "committedDate": "2020-03-13T14:33:46Z", "type": "commit"}, {"oid": "cbfcd7c227285f6af7127b024b5bcbd744bae8b3", "url": "https://github.com/realm/realm-java/commit/cbfcd7c227285f6af7127b024b5bcbd744bae8b3", "message": "Expose ports", "committedDate": "2020-03-13T14:58:12Z", "type": "commit"}, {"oid": "4c7cb8feb83ac4f2d4850fe7bf6e083d99d91893", "url": "https://github.com/realm/realm-java/commit/4c7cb8feb83ac4f2d4850fe7bf6e083d99d91893", "message": "Add better debug info to Response. Pair down JenkinsFile while testing", "committedDate": "2020-03-13T16:15:20Z", "type": "commit"}, {"oid": "d74a45e26725730e061f0b19db29bd7b2a39b9f4", "url": "https://github.com/realm/realm-java/commit/d74a45e26725730e061f0b19db29bd7b2a39b9f4", "message": "Restrict test", "committedDate": "2020-03-13T16:39:16Z", "type": "commit"}, {"oid": "f83012adcc5b520977a629c71621b9cb452e33dd", "url": "https://github.com/realm/realm-java/commit/f83012adcc5b520977a629c71621b9cb452e33dd", "message": "Attempt network fix", "committedDate": "2020-03-13T18:13:29Z", "type": "commit"}, {"oid": "ae9ff70d20e54d1fedab87592dacae9148a4d7d4", "url": "https://github.com/realm/realm-java/commit/ae9ff70d20e54d1fedab87592dacae9148a4d7d4", "message": "Attempt to use host network", "committedDate": "2020-03-13T19:27:47Z", "type": "commit"}, {"oid": "c7a941920cfd1bb9a727b50f449c0c16d9dc9f07", "url": "https://github.com/realm/realm-java/commit/c7a941920cfd1bb9a727b50f449c0c16d9dc9f07", "message": "Back to fixing CI", "committedDate": "2020-03-13T21:06:03Z", "type": "commit"}, {"oid": "2f8d857f7ac0ee256fd3e6853aa9ba0bf01f9b39", "url": "https://github.com/realm/realm-java/commit/2f8d857f7ac0ee256fd3e6853aa9ba0bf01f9b39", "message": "Yet more network magic", "committedDate": "2020-03-13T22:11:25Z", "type": "commit"}, {"oid": "0fae1b36b94dfc01d203a8e7701ef768c892a26c", "url": "https://github.com/realm/realm-java/commit/0fae1b36b94dfc01d203a8e7701ef768c892a26c", "message": "Attempt to combine networks both locally and on CI", "committedDate": "2020-03-13T22:21:42Z", "type": "commit"}, {"oid": "63c82fe03e09abacd5d219187de75b1a8a736345", "url": "https://github.com/realm/realm-java/commit/63c82fe03e09abacd5d219187de75b1a8a736345", "message": "Fix Jenkins (finally I hope)", "committedDate": "2020-03-13T23:10:18Z", "type": "commit"}, {"oid": "a22d85706407bbdfac715f8db2bb13a6f1377349", "url": "https://github.com/realm/realm-java/commit/a22d85706407bbdfac715f8db2bb13a6f1377349", "message": "Fix tests. Publish correct ports.", "committedDate": "2020-03-13T23:21:23Z", "type": "commit"}, {"oid": "d068549e5add4b47ccabafe907733545e61a3e5f", "url": "https://github.com/realm/realm-java/commit/d068549e5add4b47ccabafe907733545e61a3e5f", "message": "Avoid using container names on CI", "committedDate": "2020-03-13T23:27:10Z", "type": "commit"}, {"oid": "962e1e3fa84899430ca4966f9390918ba95c03a9", "url": "https://github.com/realm/realm-java/commit/962e1e3fa84899430ca4966f9390918ba95c03a9", "message": "Random network name on CI", "committedDate": "2020-03-13T23:33:09Z", "type": "commit"}, {"oid": "bd806a99ca4f3b8a65461eb26586d2f5190511b3", "url": "https://github.com/realm/realm-java/commit/bd806a99ca4f3b8a65461eb26586d2f5190511b3", "message": "Spelling mistake", "committedDate": "2020-03-13T23:36:41Z", "type": "commit"}, {"oid": "3dfeb7ea6257b1a830e814494ad1e0898c4cac7e", "url": "https://github.com/realm/realm-java/commit/3dfeb7ea6257b1a830e814494ad1e0898c4cac7e", "message": "Disable trying to save checkstyle and pmd output", "committedDate": "2020-03-14T00:08:19Z", "type": "commit"}, {"oid": "d98304d6f7774cfdac5cd3bd396785473728554f", "url": "https://github.com/realm/realm-java/commit/d98304d6f7774cfdac5cd3bd396785473728554f", "message": "Cleanup", "committedDate": "2020-03-14T01:15:29Z", "type": "commit"}, {"oid": "282a0b52c17f3463313346170d3cf0aa87d14cca", "url": "https://github.com/realm/realm-java/commit/282a0b52c17f3463313346170d3cf0aa87d14cca", "message": "Generalize Network transport.\nNew BlockingLooperThread helper class.\nAdd support:\n- RealmApp.logOut()\n- RealmUser.logOut()\n- RealmUser.getState()\n- RealmApp.currentUser()\n- RealmUser.equals()`", "committedDate": "2020-03-18T23:23:48Z", "type": "commit"}, {"oid": "30519959e43a537deaeca3db177b1baed54e66de", "url": "https://github.com/realm/realm-java/commit/30519959e43a537deaeca3db177b1baed54e66de", "message": "Cleanup", "committedDate": "2020-03-18T23:37:23Z", "type": "commit"}, {"oid": "33f95c47bb01e4e991ed45e8438e6f0d42ce4431", "url": "https://github.com/realm/realm-java/commit/33f95c47bb01e4e991ed45e8438e6f0d42ce4431", "message": "PR feedback", "committedDate": "2020-03-19T08:00:43Z", "type": "commit"}, {"oid": "18ed057b2ee74985148cfbc25c3fe37f1d611167", "url": "https://github.com/realm/realm-java/commit/18ed057b2ee74985148cfbc25c3fe37f1d611167", "message": "More PR feedback", "committedDate": "2020-03-19T08:06:18Z", "type": "commit"}, {"oid": "30a92829a32160cc46a954d1286bec790109be46", "url": "https://github.com/realm/realm-java/commit/30a92829a32160cc46a954d1286bec790109be46", "message": "Apply suggestions from code review\n\nCo-Authored-By: Nabil Hachicha <nh@realm.io>", "committedDate": "2020-03-19T08:12:14Z", "type": "commit"}, {"oid": "5c42f2a3260edb90748202861871d30141d462d7", "url": "https://github.com/realm/realm-java/commit/5c42f2a3260edb90748202861871d30141d462d7", "message": "Added missing FIXMEs", "committedDate": "2020-03-19T08:23:50Z", "type": "commit"}, {"oid": "885ea91b56a2c68d70f8a094e0df06e7128704b2", "url": "https://github.com/realm/realm-java/commit/885ea91b56a2c68d70f8a094e0df06e7128704b2", "message": "Merge branch 'cm/realmapp' of https://github.com/realm/realm-java into cm/realmapp", "committedDate": "2020-03-19T08:24:26Z", "type": "commit"}, {"oid": "4fa271655777d6d7c031ba12282979d32fda4e6e", "url": "https://github.com/realm/realm-java/commit/4fa271655777d6d7c031ba12282979d32fda4e6e", "message": "Add missing include", "committedDate": "2020-03-19T08:37:45Z", "type": "commit"}, {"oid": "d5fc3afc395cf3236b46ca1b6003d46347f886ce", "url": "https://github.com/realm/realm-java/commit/d5fc3afc395cf3236b46ca1b6003d46347f886ce", "message": "Fix namespace", "committedDate": "2020-03-19T08:58:37Z", "type": "commit"}, {"oid": "38a5db8b4483068b75d6513406291fd0b2560e65", "url": "https://github.com/realm/realm-java/commit/38a5db8b4483068b75d6513406291fd0b2560e65", "message": "Merge branch 'v10' into cm/realmapp\n\n# Conflicts:\n#\ttools/sync_test_server/ros/tsconfig.json", "committedDate": "2020-03-19T13:28:46Z", "type": "commit"}, {"oid": "a208c63f73631e374bc46d506cd4f0d24a9e467a", "url": "https://github.com/realm/realm-java/commit/a208c63f73631e374bc46d506cd4f0d24a9e467a", "message": "Merge branch 'cm/realmapp' into cm/app/logout\n\n# Conflicts:\n#\trealm/realm-library/build.gradle\n#\trealm/realm-library/src/main/cpp/io_realm_internal_objectstore_OsSyncUser.cpp", "committedDate": "2020-03-19T13:30:22Z", "type": "commit"}, {"oid": "d864fc17b473dcf10fe17f25ce121c7d11ee41c6", "url": "https://github.com/realm/realm-java/commit/d864fc17b473dcf10fe17f25ce121c7d11ee41c6", "message": "Merge branch 'v10' into cm/app/logout\n\n# Conflicts:\n#\trealm/realm-library/src/androidTestObjectServer/kotlin/io/realm/RealmAppTests.kt\n#\trealm/realm-library/src/androidTestObjectServer/kotlin/io/realm/TestRealmApp.kt\n#\trealm/realm-library/src/androidTestObjectServer/kotlin/io/realm/transport/OkHttpNetworkTransportTests.kt\n#\trealm/realm-library/src/androidTestObjectServer/kotlin/io/realm/transport/OsJavaNetworkTransportTests.kt\n#\trealm/realm-library/src/main/cpp/io_realm_RealmApp.cpp\n#\trealm/realm-library/src/main/cpp/io_realm_internal_objectstore_OsSyncUser.cpp\n#\trealm/realm-library/src/main/cpp/java_network_transport.hpp\n#\trealm/realm-library/src/objectServer/java/io/realm/RealmApp.java\n#\trealm/realm-library/src/objectServer/java/io/realm/RealmUser.java\n#\trealm/realm-library/src/objectServer/java/io/realm/internal/network/OkHttpNetworkTransport.java\n#\trealm/realm-library/src/objectServer/java/io/realm/internal/objectstore/OsSyncUser.java", "committedDate": "2020-03-19T17:19:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMjQ3OA==", "url": "https://github.com/realm/realm-java/pull/6779#discussion_r395602478", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Log the current user out of the Realm App, destroying their server state, unregistering them from the\n          \n          \n            \n                 * Log the current user out of the Realm App asynchronously, destroying their server state, unregistering them from the", "author": "nhachicha", "createdAt": "2020-03-20T12:26:16Z", "path": "realm/realm-library/src/objectServer/java/io/realm/RealmApp.java", "diffHunk": "@@ -201,11 +181,67 @@ public RealmUser run() throws ObjectServerError {\n         }.start();\n     }\n \n-    public static void logout(RealmUser user) {\n+    /**\n+     * Log the current user out of the Realm App, destroying their server state, unregistering them from the\n+     * SDK, and removing any synced Realms associated with them from on-disk storage on next app\n+     * launch.\n+     * <p>\n+     * This method should be called whenever the application is committed to not using a user again.\n+     * Failing to call this method may result in unused files and metadata needlessly taking up space.\n+     * <p>\n+     * Once the Realm App has confirmed the logout any registered {@link AuthenticationListener}\n+     * will be notified and user credentials will be deleted from this device.\n+     *\n+     * @throws IllegalStateException if no current user could be found.\n+     * @throws ObjectServerError if an error occurred while trying to log the user out of the Realm\n+     * App.\n+     */\n+     public void logOut() {\n+        RealmUser user = currentUser();\n+        if (user == null) {\n+            throw new IllegalStateException(\"No current user was found.\");\n+        }\n+        logOut(user);\n+     }\n \n+    /**\n+     * Log the current user out of the Realm App, destroying their server state, unregistering them from the", "originalCommit": "d864fc17b473dcf10fe17f25ce121c7d11ee41c6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8f75c17c2aefad9a7c375d4601b8b9552cb881b1", "chunk": "diff --git a/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java b/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java\nindex c780f7a7f..91524f549 100644\n--- a/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java\n+++ b/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java\n\n@@ -205,7 +205,7 @@ public class RealmApp {\n      }\n \n     /**\n-     * Log the current user out of the Realm App, destroying their server state, unregistering them from the\n+     * Log the current user out of the Realm App asynchronously, destroying their server state, unregistering them from the\n      * SDK, and removing any synced Realms associated with them from on-disk storage on next app\n      * launch.\n      * <p>\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMzY0OA==", "url": "https://github.com/realm/realm-java/pull/6779#discussion_r395603648", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            RealmLog.error(\"Log out user\");\n          \n          \n            \n                            RealmLog.info(\"Log out user \" + user.getEmail());", "author": "nhachicha", "createdAt": "2020-03-20T12:28:42Z", "path": "realm/realm-library/src/objectServer/java/io/realm/RealmApp.java", "diffHunk": "@@ -201,11 +181,67 @@ public RealmUser run() throws ObjectServerError {\n         }.start();\n     }\n \n-    public static void logout(RealmUser user) {\n+    /**\n+     * Log the current user out of the Realm App, destroying their server state, unregistering them from the\n+     * SDK, and removing any synced Realms associated with them from on-disk storage on next app\n+     * launch.\n+     * <p>\n+     * This method should be called whenever the application is committed to not using a user again.\n+     * Failing to call this method may result in unused files and metadata needlessly taking up space.\n+     * <p>\n+     * Once the Realm App has confirmed the logout any registered {@link AuthenticationListener}\n+     * will be notified and user credentials will be deleted from this device.\n+     *\n+     * @throws IllegalStateException if no current user could be found.\n+     * @throws ObjectServerError if an error occurred while trying to log the user out of the Realm\n+     * App.\n+     */\n+     public void logOut() {\n+        RealmUser user = currentUser();\n+        if (user == null) {\n+            throw new IllegalStateException(\"No current user was found.\");\n+        }\n+        logOut(user);\n+     }\n \n+    /**\n+     * Log the current user out of the Realm App, destroying their server state, unregistering them from the\n+     * SDK, and removing any synced Realms associated with them from on-disk storage on next app\n+     * launch.\n+     * <p>\n+     * This method should be called whenever the application is committed to not using a user again.\n+     * Failing to call this method may result in unused files and metadata needlessly taking up space.\n+     * <p>\n+     * Once the Realm App has confirmed the logout any registered {@link AuthenticationListener}\n+     * will be notified and user credentials will be deleted from this device.\n+     *\n+     * @throws IllegalStateException if not called on a looper thread or no current user could be found.\n+     */\n+     public RealmAsyncTask logOutAsync(Callback<RealmUser> callback) {\n+         RealmUser user = currentUser();\n+         if (user == null) {\n+             throw new IllegalStateException(\"No current user was found.\");\n+         }\n+         return logOutAsync(user, callback);\n+     }\n+\n+    void logOut(RealmUser user) {\n+        checkNull(user, \"user\");\n+        AtomicReference<ObjectServerError> error = new AtomicReference<>(null);\n+        nativeLogOut(nativePtr, user.osUser.getNativePtr(), new OsJNIVoidResultCallback(error));\n+        handleResult(null, error);\n     }\n-    public RealmAsyncTask logoutAsync(RealmUser user, Callback<Void> callback) {\n-        return null;\n+\n+    RealmAsyncTask logOutAsync(RealmUser user, Callback<RealmUser> callback) {\n+        checkLooperThread(\"Asynchronous log out is only possible from looper threads.\");\n+        return new Request<RealmUser>(SyncManager.NETWORK_POOL_EXECUTOR, callback) {\n+            @Override\n+            public RealmUser run() throws ObjectServerError {\n+                RealmLog.error(\"Log out user\");", "originalCommit": "d864fc17b473dcf10fe17f25ce121c7d11ee41c6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8f75c17c2aefad9a7c375d4601b8b9552cb881b1", "chunk": "diff --git a/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java b/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java\nindex c780f7a7f..91524f549 100644\n--- a/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java\n+++ b/realm/realm-library/src/objectServer/java/io/realm/RealmApp.java\n\n@@ -205,7 +205,7 @@ public class RealmApp {\n      }\n \n     /**\n-     * Log the current user out of the Realm App, destroying their server state, unregistering them from the\n+     * Log the current user out of the Realm App asynchronously, destroying their server state, unregistering them from the\n      * SDK, and removing any synced Realms associated with them from on-disk storage on next app\n      * launch.\n      * <p>\n"}}, {"oid": "8f75c17c2aefad9a7c375d4601b8b9552cb881b1", "url": "https://github.com/realm/realm-java/commit/8f75c17c2aefad9a7c375d4601b8b9552cb881b1", "message": "PR feedback", "committedDate": "2020-03-20T13:01:38Z", "type": "commit"}, {"oid": "f93d75a859031457b4c7f4798123c2ca2f8a7e34", "url": "https://github.com/realm/realm-java/commit/f93d75a859031457b4c7f4798123c2ca2f8a7e34", "message": "Capture lambda arguments by value", "committedDate": "2020-03-20T15:02:16Z", "type": "commit"}]}