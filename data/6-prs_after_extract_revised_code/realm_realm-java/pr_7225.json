{"pr_number": 7225, "pr_title": "Support OpenId credential for google identification", "pr_createdAt": "2020-12-02T08:57:55Z", "pr_url": "https://github.com/realm/realm-java/pull/7225", "timeline": [{"oid": "fad3c94f42855836d35ab70a94f0ce69855a5ff4", "url": "https://github.com/realm/realm-java/commit/fad3c94f42855836d35ab70a94f0ce69855a5ff4", "message": "Add coding changes for supporting google's open id", "committedDate": "2020-12-02T08:51:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk5OTY2MQ==", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r533999661", "bodyText": "We need public API docs for this, including each enum type + missing license headers", "author": "cmelchior", "createdAt": "2020-12-02T09:03:14Z", "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java", "diffHunk": "@@ -0,0 +1,6 @@\n+package io.realm.mongodb.auth;\n+\n+public enum GoogleAuthType {", "originalCommit": "fad3c94f42855836d35ab70a94f0ce69855a5ff4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "84d42dcf5f42f41a32275262dc42de147eef41f4", "chunk": "diff --git a/realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java b/realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java\nindex b2ed7b408..3bbdd3ead 100644\n--- a/realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java\n+++ b/realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java\n\n@@ -1,5 +1,26 @@\n+/*\n+ * Copyright 2020 Realm Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n package io.realm.mongodb.auth;\n \n+/**\n+ * This enum contains the list of Google authentication types supported by MongoDB Realm.\n+ *\n+ * @see <a href=\"https://docs.mongodb.com/realm/authentication/google\">Google Authentication</a>\n+ */\n public enum GoogleAuthType {\n     AUTH_CODE,\n     ID_TOKEN\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAwMDc1MA==", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r534000750", "bodyText": "We should probably just rename this to token as the type is determined by the enum?", "author": "cmelchior", "createdAt": "2020-12-02T09:04:51Z", "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java", "diffHunk": "@@ -150,17 +152,33 @@ public static Credentials facebook(String accessToken) {\n     }\n \n     /**\n-     * Creates credentials representing a login using a Google Authorization Code.\n+     * Creates credentials representing a login using a Google access token of a given {@link GoogleAuthType}.\n+     * <p>\n+     * This provider must be enabled on MongoDB Realm to work.\n+     *\n+     * @param accessToken the access token returned when logging in to Google.", "originalCommit": "fad3c94f42855836d35ab70a94f0ce69855a5ff4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "84d42dcf5f42f41a32275262dc42de147eef41f4", "chunk": "diff --git a/realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java b/realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java\nindex b30480054..1b94e6fd7 100644\n--- a/realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java\n+++ b/realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java\n\n@@ -156,14 +156,14 @@ public class Credentials {\n      * <p>\n      * This provider must be enabled on MongoDB Realm to work.\n      *\n-     * @param accessToken the access token returned when logging in to Google.\n+     * @param token the access token returned when logging in to Google.\n      * @param type the access token type\n      * @return a set of credentials that can be used to log into MongoDB Realm using\n      * {@link App#loginAsync(Credentials, App.Callback)}.\n      */\n-    public static Credentials google(String accessToken, GoogleAuthType type) {\n-        Util.checkEmpty(accessToken, \"authorizationCode\");\n-        return new Credentials(OsAppCredentials.google(accessToken, type), Provider.GOOGLE);\n+    public static Credentials google(String token, GoogleAuthType type) {\n+        Util.checkEmpty(token, \"authorizationCode\");\n+        return new Credentials(OsAppCredentials.google(token, type), Provider.GOOGLE);\n     }\n \n     /**\n"}}, {"oid": "84d42dcf5f42f41a32275262dc42de147eef41f4", "url": "https://github.com/realm/realm-java/commit/84d42dcf5f42f41a32275262dc42de147eef41f4", "message": "Change accessToken param to token\nAdd license and docs to GoogleAuthType", "committedDate": "2020-12-02T09:20:05Z", "type": "commit"}, {"oid": "2c9d860dd69767d5a56094e0924cda421eefeb6b", "url": "https://github.com/realm/realm-java/commit/2c9d860dd69767d5a56094e0924cda421eefeb6b", "message": "Update to latest Core/Sync/OS", "committedDate": "2020-12-08T11:09:47Z", "type": "commit"}, {"oid": "8b88192da475225bb26f31f5b2b20dc390027648", "url": "https://github.com/realm/realm-java/commit/8b88192da475225bb26f31f5b2b20dc390027648", "message": "Bump test server", "committedDate": "2020-12-08T12:00:42Z", "type": "commit"}, {"oid": "7f63c31f5bf7d4dd2cd52bdd46d60f57ae0ef60b", "url": "https://github.com/realm/realm-java/commit/7f63c31f5bf7d4dd2cd52bdd46d60f57ae0ef60b", "message": "Ignore broken tests", "committedDate": "2020-12-08T15:33:50Z", "type": "commit"}, {"oid": "00c30f40fdb5a86542efbb22895c3398cfaa3e2b", "url": "https://github.com/realm/realm-java/commit/00c30f40fdb5a86542efbb22895c3398cfaa3e2b", "message": "Ignore more tests", "committedDate": "2020-12-08T17:53:31Z", "type": "commit"}, {"oid": "2da2f910f39997f8cfbbfe1fe9357a16837dd989", "url": "https://github.com/realm/realm-java/commit/2da2f910f39997f8cfbbfe1fe9357a16837dd989", "message": "Missed test", "committedDate": "2020-12-08T18:43:50Z", "type": "commit"}, {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb", "url": "https://github.com/realm/realm-java/commit/65ff78d72e064107a9fb0b397011b107191d4dbb", "message": "Merge branch 'releases' into ct/google-open-id\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-12-08T22:09:08Z", "type": "commit"}, {"oid": "84127f0ac9f1471ba5ba59db52688db9822187dc", "url": "https://github.com/realm/realm-java/commit/84127f0ac9f1471ba5ba59db52688db9822187dc", "message": "Cleanup", "committedDate": "2020-12-09T08:40:10Z", "type": "commit"}]}