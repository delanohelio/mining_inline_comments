{"pr_number": 2257, "pr_title": "WebClient request id added and logging messages updated", "pr_createdAt": "2020-08-13T15:33:49Z", "pr_url": "https://github.com/oracle/helidon/pull/2257", "timeline": [{"oid": "0e5a888ed0cc179a7e7d3383cb82fbddf2632382", "url": "https://github.com/oracle/helidon/commit/0e5a888ed0cc179a7e7d3383cb82fbddf2632382", "message": "WebClient request id added and logging messages updated\n\nSigned-off-by: David Kral <david.k.kral@oracle.com>", "committedDate": "2020-08-12T11:57:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDUxMTMxMQ==", "url": "https://github.com/oracle/helidon/pull/2257#discussion_r470511311", "bodyText": "public method in a non-public class, also no javadoc", "author": "tomas-langer", "createdAt": "2020-08-14T09:20:07Z", "path": "webclient/webclient/src/main/java/io/helidon/webclient/RequestConfiguration.java", "diffHunk": "@@ -50,13 +52,18 @@ WebClientServiceRequest clientServiceRequest() {\n         return services;\n     }\n \n+    public long requestId() {", "originalCommit": "0e5a888ed0cc179a7e7d3383cb82fbddf2632382", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDUxNjA1MQ==", "url": "https://github.com/oracle/helidon/pull/2257#discussion_r470516051", "bodyText": "ehm... yes.. This should be package private", "author": "Verdent", "createdAt": "2020-08-14T09:29:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDUxMTMxMQ=="}], "type": "inlineReview", "revised_code": {"commit": "7eb2287e265250f14b22f6278337e8525ba34d74", "chunk": "diff --git a/webclient/webclient/src/main/java/io/helidon/webclient/RequestConfiguration.java b/webclient/webclient/src/main/java/io/helidon/webclient/RequestConfiguration.java\nindex 750a9d524..eca47003e 100644\n--- a/webclient/webclient/src/main/java/io/helidon/webclient/RequestConfiguration.java\n+++ b/webclient/webclient/src/main/java/io/helidon/webclient/RequestConfiguration.java\n\n@@ -52,7 +52,7 @@ class RequestConfiguration extends WebClientConfiguration {\n         return services;\n     }\n \n-    public long requestId() {\n+    long requestId() {\n         return requestId;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDUxMjY2NA==", "url": "https://github.com/oracle/helidon/pull/2257#discussion_r470512664", "bodyText": "If we want to have request id, it should be configurable (esp. when using tracing, we may want to bind it to the trace id).", "author": "tomas-langer", "createdAt": "2020-08-14T09:22:58Z", "path": "webclient/webclient/src/main/java/io/helidon/webclient/WebClientRequestBuilderImpl.java", "diffHunk": "@@ -147,7 +149,8 @@ private WebClientRequestBuilderImpl(LazyValue<NioEventLoopGroup> eventGroup,\n         this.services = configuration.clientServices();\n         this.readerContext = MessageBodyReaderContext.create(configuration.readerContext());\n         this.writerContext = MessageBodyWriterContext.create(configuration.writerContext(), headers);\n-        Context.Builder contextBuilder = Context.builder().id(\"webclient-\" + REQUEST_NUMBER.incrementAndGet());\n+        this.requestId = REQUEST_NUMBER.incrementAndGet();", "originalCommit": "0e5a888ed0cc179a7e7d3383cb82fbddf2632382", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDUzMDI1MQ==", "url": "https://github.com/oracle/helidon/pull/2257#discussion_r470530251", "bodyText": "fixed", "author": "Verdent", "createdAt": "2020-08-14T09:58:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDUxMjY2NA=="}], "type": "inlineReview", "revised_code": {"commit": "7eb2287e265250f14b22f6278337e8525ba34d74", "chunk": "diff --git a/webclient/webclient/src/main/java/io/helidon/webclient/WebClientRequestBuilderImpl.java b/webclient/webclient/src/main/java/io/helidon/webclient/WebClientRequestBuilderImpl.java\nindex 7f87b2523..e6a08379b 100644\n--- a/webclient/webclient/src/main/java/io/helidon/webclient/WebClientRequestBuilderImpl.java\n+++ b/webclient/webclient/src/main/java/io/helidon/webclient/WebClientRequestBuilderImpl.java\n\n@@ -149,7 +149,7 @@ class WebClientRequestBuilderImpl implements WebClientRequestBuilder {\n         this.services = configuration.clientServices();\n         this.readerContext = MessageBodyReaderContext.create(configuration.readerContext());\n         this.writerContext = MessageBodyWriterContext.create(configuration.writerContext(), headers);\n-        this.requestId = REQUEST_NUMBER.incrementAndGet();\n+        this.requestId = null;\n         Context.Builder contextBuilder = Context.builder().id(\"webclient-\" + requestId);\n         configuration.context().ifPresentOrElse(contextBuilder::parent,\n                                                 () -> Contexts.context().ifPresent(contextBuilder::parent));\n"}}, {"oid": "7eb2287e265250f14b22f6278337e8525ba34d74", "url": "https://github.com/oracle/helidon/commit/7eb2287e265250f14b22f6278337e8525ba34d74", "message": "Request id is now configurable\n\nSigned-off-by: David Kral <david.k.kral@oracle.com>", "committedDate": "2020-08-14T09:58:09Z", "type": "commit"}, {"oid": "73bcb8a922b8646819cc447a53e78fee8aeb851c", "url": "https://github.com/oracle/helidon/commit/73bcb8a922b8646819cc447a53e78fee8aeb851c", "message": "checkstyle fix\n\nSigned-off-by: David Kral <david.k.kral@oracle.com>", "committedDate": "2020-08-14T10:06:56Z", "type": "commit"}]}