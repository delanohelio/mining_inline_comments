{"pr_number": 1115, "pr_title": "Client-sided commands", "pr_createdAt": "2020-10-10T10:58:51Z", "pr_url": "https://github.com/FabricMC/fabric/pull/1115", "timeline": [{"oid": "2961ca1ea45227765b328a699cf6a5d058bb3e8d", "url": "https://github.com/FabricMC/fabric/commit/2961ca1ea45227765b328a699cf6a5d058bb3e8d", "message": "Move command API icon to correct location", "committedDate": "2020-10-10T10:32:05Z", "type": "commit"}, {"oid": "07d27cc753c6c3d4f9433a2244b57d2f415daf8e", "url": "https://github.com/FabricMC/fabric/commit/07d27cc753c6c3d4f9433a2244b57d2f415daf8e", "message": "Add client-sided command API", "committedDate": "2020-10-10T10:47:11Z", "type": "commit"}, {"oid": "b7e1fffb3b9c272a10dde58878039d4affdc5a51", "url": "https://github.com/FabricMC/fabric/commit/b7e1fffb3b9c272a10dde58878039d4affdc5a51", "message": "Add jd note about threads", "committedDate": "2020-10-10T10:57:26Z", "type": "commit"}, {"oid": "4cbebe0bf78b32545153616d6d9d3a3562806d8e", "url": "https://github.com/FabricMC/fabric/commit/4cbebe0bf78b32545153616d6d9d3a3562806d8e", "message": "Add license headers", "committedDate": "2020-10-10T11:00:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgwOTIzNg==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r502809236", "bodyText": "The class name should specify it is for client arguments.", "author": "i509VCB", "createdAt": "2020-10-10T16:48:48Z", "path": "fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ArgumentBuilders.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.client.command.v1;\n+\n+import com.mojang.brigadier.arguments.ArgumentType;\n+import com.mojang.brigadier.builder.LiteralArgumentBuilder;\n+import com.mojang.brigadier.builder.RequiredArgumentBuilder;\n+\n+/**\n+ * Provides helper methods for constructing argument builders\n+ * for client-sided commands.\n+ *\n+ * <p>This is an alternative to the server-side helper methods in\n+ * {@link net.minecraft.server.command.CommandManager}.\n+ */\n+public final class ArgumentBuilders {", "originalCommit": "4cbebe0bf78b32545153616d6d9d3a3562806d8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTAxMDc4MQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r515010781", "bodyText": "Renamed to ClientArgumentBuilders.", "author": "Juuxel", "createdAt": "2020-10-30T10:47:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgwOTIzNg=="}], "type": "inlineReview", "revised_code": {"commit": "148d88b8f91450510528ba1c110ec2c5b465d5e3", "chunk": "diff --git a/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ArgumentBuilders.java b/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientArgumentBuilders.java\nsimilarity index 95%\nrename from fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ArgumentBuilders.java\nrename to fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientArgumentBuilders.java\nindex b43ae5f1..a99ce545 100644\n--- a/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ArgumentBuilders.java\n+++ b/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientArgumentBuilders.java\n\n@@ -27,8 +27,8 @@ import com.mojang.brigadier.builder.RequiredArgumentBuilder;\n  * <p>This is an alternative to the server-side helper methods in\n  * {@link net.minecraft.server.command.CommandManager}.\n  */\n-public final class ArgumentBuilders {\n-\tprivate ArgumentBuilders() {\n+public final class ClientArgumentBuilders {\n+\tprivate ClientArgumentBuilders() {\n \t}\n \n \t/**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzMTk0OQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r513031949", "bodyText": "Not a big fan of allowing prefixes like this? Id keep this as close as possible to the normal CommandRegistrationCallback", "author": "modmuss50", "createdAt": "2020-10-27T21:06:37Z", "path": "fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientCommandRegistrationCallback.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.client.command.v1;\n+\n+import com.mojang.brigadier.CommandDispatcher;\n+\n+import net.fabricmc.api.EnvType;\n+import net.fabricmc.api.Environment;\n+import net.fabricmc.fabric.api.event.Event;\n+import net.fabricmc.fabric.impl.command.client.ClientCommandInternals;\n+\n+/**\n+ * Callback for registering client-sided commands.\n+ *\n+ * <p>Client-sided commands are fully executed on the client,\n+ * so players can use them in both singleplayer and multiplayer.\n+ *\n+ * <p>Client-sided commands also support using custom command\n+ * prefixes instead of the {@code /} symbol. You can customize\n+ * the used prefix with {@link #event(char)}.\n+ *\n+ * <p>The commands are run on the client game thread by default.\n+ * Avoid doing any heavy calculations here as that can freeze the game's rendering.\n+ * For example, you can move heavy code to another thread.\n+ *\n+ * <h2>Example</h2>\n+ * <pre>\n+ * {@code\n+ * ClientCommandRegistrationCallback.event().register(dispatcher -> {\n+ *     dispatcher.register(ArgumentBuilders.literal(\"hello\").executes(context -> {\n+ *         context.getSource().sendFeedback(new LiteralText(\"Hello, world!\"));\n+ *         return 0;\n+ *     }));\n+ * });\n+ * }\n+ * </pre>\n+ */\n+@FunctionalInterface\n+@Environment(EnvType.CLIENT)\n+public interface ClientCommandRegistrationCallback {\n+\t/**\n+\t * Gets the command registration event for commands with the {@code /} prefix.\n+\t *\n+\t * @return the event object\n+\t */\n+\tstatic Event<ClientCommandRegistrationCallback> event() {\n+\t\treturn event('/');\n+\t}\n+\n+\t/**\n+\t * Gets the command registration event with a custom command prefix.\n+\t *\n+\t * @param prefix the command prefix\n+\t * @return the event object\n+\t * @throws IllegalArgumentException if the prefix {@linkplain Character#isLetterOrDigit(char) is a letter or a digit},\n+\t *                                  or if it {@linkplain Character#isWhitespace(char) is whitespace}.\n+\t */\n+\tstatic Event<ClientCommandRegistrationCallback> event(char prefix) {", "originalCommit": "4cbebe0bf78b32545153616d6d9d3a3562806d8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzIyNDMyNQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r513224325", "bodyText": "Ah, alright. That lets me simplify the code a lot, then.", "author": "Juuxel", "createdAt": "2020-10-28T07:19:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzMTk0OQ=="}], "type": "inlineReview", "revised_code": {"commit": "362b2f4c097a3367b716ab1dde5fbe2ee8b87cd7", "chunk": "diff --git a/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientCommandRegistrationCallback.java b/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientCommandRegistrationCallback.java\nindex e49875b2..b2df1cb1 100644\n--- a/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientCommandRegistrationCallback.java\n+++ b/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/api/client/command/v1/ClientCommandRegistrationCallback.java\n\n@@ -21,7 +21,7 @@ import com.mojang.brigadier.CommandDispatcher;\n import net.fabricmc.api.EnvType;\n import net.fabricmc.api.Environment;\n import net.fabricmc.fabric.api.event.Event;\n-import net.fabricmc.fabric.impl.command.client.ClientCommandInternals;\n+import net.fabricmc.fabric.api.event.EventFactory;\n \n /**\n  * Callback for registering client-sided commands.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzMzA3OA==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r513033078", "bodyText": "Might be nice to have some better tests, take a look at the normal command tests to see how they fail hard even if not ran. Has saved a bug once before. \ud83d\udc4d", "author": "modmuss50", "createdAt": "2020-10-27T21:08:13Z", "path": "fabric-command-api-v1/src/testmod/java/net/fabricmc/fabric/test/command/client/ClientCommandTest.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.test.command.client;\n+\n+import com.mojang.brigadier.exceptions.DynamicCommandExceptionType;\n+\n+import net.minecraft.text.LiteralText;\n+\n+import net.fabricmc.api.ClientModInitializer;\n+import net.fabricmc.fabric.api.client.command.v1.ArgumentBuilders;\n+import net.fabricmc.fabric.api.client.command.v1.ClientCommandRegistrationCallback;\n+\n+public final class ClientCommandTest implements ClientModInitializer {\n+\tprivate static final DynamicCommandExceptionType IS_NULL = new DynamicCommandExceptionType(x -> new LiteralText(\"The \" + x + \" is null\"));\n+\n+\t@Override\n+\tpublic void onInitializeClient() {\n+\t\tClientCommandRegistrationCallback.event().register(registerSimpleCommands(\"This is a client command\"));", "originalCommit": "4cbebe0bf78b32545153616d6d9d3a3562806d8e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "148d88b8f91450510528ba1c110ec2c5b465d5e3", "chunk": "diff --git a/fabric-command-api-v1/src/testmod/java/net/fabricmc/fabric/test/command/client/ClientCommandTest.java b/fabric-command-api-v1/src/testmod/java/net/fabricmc/fabric/test/command/client/ClientCommandTest.java\nindex a09a1c43..284106e9 100644\n--- a/fabric-command-api-v1/src/testmod/java/net/fabricmc/fabric/test/command/client/ClientCommandTest.java\n+++ b/fabric-command-api-v1/src/testmod/java/net/fabricmc/fabric/test/command/client/ClientCommandTest.java\n\n@@ -21,7 +21,7 @@ import com.mojang.brigadier.exceptions.DynamicCommandExceptionType;\n import net.minecraft.text.LiteralText;\n \n import net.fabricmc.api.ClientModInitializer;\n-import net.fabricmc.fabric.api.client.command.v1.ArgumentBuilders;\n+import net.fabricmc.fabric.api.client.command.v1.ClientArgumentBuilders;\n import net.fabricmc.fabric.api.client.command.v1.ClientCommandRegistrationCallback;\n \n public final class ClientCommandTest implements ClientModInitializer {\n"}}, {"oid": "148d88b8f91450510528ba1c110ec2c5b465d5e3", "url": "https://github.com/FabricMC/fabric/commit/148d88b8f91450510528ba1c110ec2c5b465d5e3", "message": "ArgumentBuilders => ClientArgumentBuilders", "committedDate": "2020-10-30T10:15:13Z", "type": "commit"}, {"oid": "362b2f4c097a3367b716ab1dde5fbe2ee8b87cd7", "url": "https://github.com/FabricMC/fabric/commit/362b2f4c097a3367b716ab1dde5fbe2ee8b87cd7", "message": "Yeet custom prefixes", "committedDate": "2020-10-30T10:27:09Z", "type": "commit"}, {"oid": "c425287b38bdaa1dcaab42876103a54ce770a22c", "url": "https://github.com/FabricMC/fabric/commit/c425287b38bdaa1dcaab42876103a54ce770a22c", "message": "Migrate testmod to lifecycle-events-v1", "committedDate": "2020-10-30T10:30:20Z", "type": "commit"}, {"oid": "074ea8e1fc6374d582fab1c699a0f71a4f707d83", "url": "https://github.com/FabricMC/fabric/commit/074ea8e1fc6374d582fab1c699a0f71a4f707d83", "message": "Improve client command test", "committedDate": "2020-10-30T10:46:04Z", "type": "commit"}, {"oid": "1ccfdf1b2e9617923dd6ffc501c5a91be73d26bc", "url": "https://github.com/FabricMC/fabric/commit/1ccfdf1b2e9617923dd6ffc501c5a91be73d26bc", "message": "Merge remote-tracking branch 'upstream/1.16' into client-commands\n\n# Conflicts:\n#\tfabric-command-api-v1/src/testmod/java/net/fabricmc/fabric/test/command/CommandTest.java", "committedDate": "2020-10-30T10:50:20Z", "type": "commit"}, {"oid": "6811d0e1029e5dfd6b1456db0d22e1cf1e65a9e5", "url": "https://github.com/FabricMC/fabric/commit/6811d0e1029e5dfd6b1456db0d22e1cf1e65a9e5", "message": "Make client command test more similar to the server one", "committedDate": "2020-10-30T10:51:46Z", "type": "commit"}, {"oid": "702076845e2af429656f55bfdeccfc3ef7261935", "url": "https://github.com/FabricMC/fabric/commit/702076845e2af429656f55bfdeccfc3ef7261935", "message": "Update to new yarn names", "committedDate": "2020-10-30T12:32:42Z", "type": "commit"}, {"oid": "2565b106295a4d42fb2a5e389cc7ae44597c5361", "url": "https://github.com/FabricMC/fabric/commit/2565b106295a4d42fb2a5e389cc7ae44597c5361", "message": "Add handling for requires() in command suggestions", "committedDate": "2020-10-30T13:14:37Z", "type": "commit"}, {"oid": "0ef279703bc04999e428e0e621c1a7bbbc0a73bb", "url": "https://github.com/FabricMC/fabric/commit/0ef279703bc04999e428e0e621c1a7bbbc0a73bb", "message": "Remove outdated TODO", "committedDate": "2020-12-08T18:16:17Z", "type": "commit"}, {"oid": "527f292bdbef03b35ccc9f3aaa3f3f207120bf1b", "url": "https://github.com/FabricMC/fabric/commit/527f292bdbef03b35ccc9f3aaa3f3f207120bf1b", "message": "Playerification", "committedDate": "2020-12-08T18:31:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r557064184", "bodyText": "I think there was already a discussion on this in the discord if these commands should have a different/customizable prefix. If not, it would be nice to have customizable prefixes and if the API is going through the trouble of adding client commands, we might as well have commands be able to have custom prefixes. (obviously default to /).", "author": "OroArmor", "createdAt": "2021-01-14T06:11:55Z", "path": "fabric-command-api-v1/src/main/java/net/fabricmc/fabric/impl/command/client/ClientCommandInternals.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.impl.command.client;\n+\n+import static net.fabricmc.fabric.api.client.command.v1.ClientCommandManager.DISPATCHER;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import com.mojang.brigadier.AmbiguityConsumer;\n+import com.mojang.brigadier.CommandDispatcher;\n+import com.mojang.brigadier.builder.ArgumentBuilder;\n+import com.mojang.brigadier.exceptions.BuiltInExceptionProvider;\n+import com.mojang.brigadier.exceptions.CommandExceptionType;\n+import com.mojang.brigadier.exceptions.CommandSyntaxException;\n+import com.mojang.brigadier.tree.CommandNode;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+import net.minecraft.client.MinecraftClient;\n+import net.minecraft.command.CommandException;\n+import net.minecraft.text.Text;\n+import net.minecraft.text.Texts;\n+import net.minecraft.text.TranslatableText;\n+\n+import net.fabricmc.api.EnvType;\n+import net.fabricmc.api.Environment;\n+import net.fabricmc.fabric.api.client.command.v1.FabricClientCommandSource;\n+\n+@Environment(EnvType.CLIENT)\n+public final class ClientCommandInternals {\n+\tprivate static final Logger LOGGER = LogManager.getLogger();\n+\tprivate static final char PREFIX = '/';", "originalCommit": "527f292bdbef03b35ccc9f3aaa3f3f207120bf1b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NjAzNQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r557066035", "bodyText": "Ah, it seems that modmuss50 already gave some input on this, but I think that having two registration methods, one for a default prefix and one for a custom one is better. I feel like the main reason to have a different prefix is to think about how it has a different function than /, If we don't include this, it will exclude the modders that want to include these features, and force them to rewrite what we have already done. I feel that this is counterproductive to the purpose of the Fabric API where common needs are made accessible to all modders and do not require mixins.", "author": "OroArmor", "createdAt": "2021-01-14T06:18:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTY0MDE4MQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r561640181", "bodyText": "Well, I had custom prefixes working quite nicely originally. I removed them because modmuss didn't want them in Fabric API (to keep the client commands closer to vanilla's server commands).", "author": "Juuxel", "createdAt": "2021-01-21T06:56:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTcyMDQ0Mw==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r561720443", "bodyText": "Which seems a bit weird, because it doesn't seem to handle conflict very well.\nLike if a mod register a command a and the server also has a command a what happens?\nCustom prefixes could partially fix this issue, but at the same time some custom prefixes might be weird/annoying.\nClient commands having the same prefix as everything else doesn't seem very user-friendly in the end.", "author": "LambdAurora", "createdAt": "2021-01-21T09:25:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTczNzQzNQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r561737435", "bodyText": "Like if a mod register a command a and the server also has a command a what happens?\n\nI actually haven't tested this, but with the current impl the client command should override the server command. It might be more sensible to reverse that behaviour.\n@modmuss50 Should we reconsider custom prefixes for compatibility with servers? I'm not sure whether there should use only /, only some client-specific character (say, #) or to have the full prefix support again.", "author": "Juuxel", "createdAt": "2021-01-21T09:49:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTc0MDY1MA==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r561740650", "bodyText": "I don't know if it's possible, but for the conflict situation I would like to see the Bukkit behavior which is to add namespace: at the start of the command.", "author": "LambdAurora", "createdAt": "2021-01-21T09:54:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTk1Njk2Mw==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r561956963", "bodyText": "namespace:command is fairly pointless when you can do namespace command", "author": "liach", "createdAt": "2021-01-21T15:10:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTg4NzUzMQ==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r575887531", "bodyText": "A custom prefix is out of scope for the initial PR at least, IMO the best solution is to eventually:\n\ngive precedence to server side commands\nuse /fcc x to always run the client command /x\n\nThis will resolve the ambiguity cleanly, as long as nothing else claims /fcc, which me might exclude from the server precedence.", "author": "sfPlayer1", "createdAt": "2021-02-15T00:08:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTg4ODk0Mw==", "url": "https://github.com/FabricMC/fabric/pull/1115#discussion_r575888943", "bodyText": "I feel like /fcc should just be a shortcut to a full /fabricclientcommand or whatever, much like /tp is a short alias for /teleport. It lets people find it if they don't know the acronym, and if they do then they can type it quickly.", "author": "Prospector", "createdAt": "2021-02-15T00:18:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzA2NDE4NA=="}], "type": "inlineReview", "revised_code": {"commit": "3b45e7fc02c69e7d370070db9a19809cff1092c4", "chunk": "diff --git a/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/impl/command/client/ClientCommandInternals.java b/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/impl/command/client/ClientCommandInternals.java\nindex efa7bd1f..76d9f9d4 100644\n--- a/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/impl/command/client/ClientCommandInternals.java\n+++ b/fabric-command-api-v1/src/main/java/net/fabricmc/fabric/impl/command/client/ClientCommandInternals.java\n\n@@ -155,8 +155,8 @@ public final class ClientCommandInternals {\n \n \t\t\tArgumentBuilder<FabricClientCommandSource, ?> builder = child.createBuilder();\n \n-\t\t\t// Reset the builder\n-\t\t\tbuilder.requires(it -> true);\n+\t\t\t// Reset the unnecessary non-completion stuff from the builder\n+\t\t\tbuilder.requires(it -> true); // This is checked with the if check above.\n \n \t\t\tif (builder.getCommand() != null) {\n \t\t\t\tbuilder.executes(context -> 0);\n"}}, {"oid": "3b45e7fc02c69e7d370070db9a19809cff1092c4", "url": "https://github.com/FabricMC/fabric/commit/3b45e7fc02c69e7d370070db9a19809cff1092c4", "message": "Clarify comments in ClientCommandInternals", "committedDate": "2021-02-06T23:48:46Z", "type": "commit"}, {"oid": "50b07052aa44e086432873e7241381fe0e948517", "url": "https://github.com/FabricMC/fabric/commit/50b07052aa44e086432873e7241381fe0e948517", "message": "Use \"s\" instead of \"it\"", "committedDate": "2021-02-11T15:44:51Z", "type": "commit"}, {"oid": "8e5eede05dbe126579fc1ef047db6d9c67ce1890", "url": "https://github.com/FabricMC/fabric/commit/8e5eede05dbe126579fc1ef047db6d9c67ce1890", "message": "Improve CommandSyntaxException logging", "committedDate": "2021-02-14T11:57:32Z", "type": "commit"}, {"oid": "6f834ebd4cf8f3815accdda540e6f5eda369eb45", "url": "https://github.com/FabricMC/fabric/commit/6f834ebd4cf8f3815accdda540e6f5eda369eb45", "message": "Add missing import", "committedDate": "2021-02-14T11:58:09Z", "type": "commit"}, {"oid": "75be4cd591a15c662e71d6f5cc9e3d7b70755085", "url": "https://github.com/FabricMC/fabric/commit/75be4cd591a15c662e71d6f5cc9e3d7b70755085", "message": "Add /fcc help command", "committedDate": "2021-02-14T12:19:15Z", "type": "commit"}, {"oid": "a847ea0c2e96c40a966454afbd1d951c716f4ee1", "url": "https://github.com/FabricMC/fabric/commit/a847ea0c2e96c40a966454afbd1d951c716f4ee1", "message": "Add comments about server-client precedence rules", "committedDate": "2021-02-14T13:26:19Z", "type": "commit"}, {"oid": "46714d75f45b78bdb3dcf73347b1818b84b71fbc", "url": "https://github.com/FabricMC/fabric/commit/46714d75f45b78bdb3dcf73347b1818b84b71fbc", "message": "Add missing license header", "committedDate": "2021-02-14T13:28:17Z", "type": "commit"}, {"oid": "f5eaf9bd30c55c0f96a4aaea0d3a0ee0b715e941", "url": "https://github.com/FabricMC/fabric/commit/f5eaf9bd30c55c0f96a4aaea0d3a0ee0b715e941", "message": "Add /fabric-command-api-v1:client as an alias for /fcc", "committedDate": "2021-02-17T19:55:08Z", "type": "commit"}]}