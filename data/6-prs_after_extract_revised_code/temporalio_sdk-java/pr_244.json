{"pr_number": 244, "pr_title": "Use daemon threads for connection backoff resetter", "pr_createdAt": "2020-11-05T03:31:18Z", "pr_url": "https://github.com/temporalio/sdk-java/pull/244", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc3MzgzNg==", "url": "https://github.com/temporalio/sdk-java/pull/244#discussion_r517773836", "bodyText": "I would also set the nameFormat property to distinguish these threads in the dumps.", "author": "mfateev", "createdAt": "2020-11-05T03:36:53Z", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -168,7 +169,9 @@ public WorkflowServiceStubsImpl(\n   }\n \n   private ScheduledExecutorService startConnectionBackoffResetter(Duration backoffResetFrequency) {\n-    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\n+    ScheduledExecutorService executor =\n+        Executors.newSingleThreadScheduledExecutor(\n+            new ThreadFactoryBuilder().setDaemon(true).build());", "originalCommit": "84d82ec7547c6d5d8d94a048bb1d710097bd9492", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc3NDIzNw==", "url": "https://github.com/temporalio/sdk-java/pull/244#discussion_r517774237", "bodyText": "Good point, let me do that too.", "author": "vitarb", "createdAt": "2020-11-05T03:38:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzc3MzgzNg=="}], "type": "inlineReview", "revised_code": {"commit": "2d830f136ab1fa0ddeaa5016cbd27090c8c7067e", "chunk": "diff --git a/temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java b/temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java\nindex e7d3dde1..b888ee24 100644\n--- a/temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java\n+++ b/temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java\n\n@@ -171,7 +171,10 @@ public final class WorkflowServiceStubsImpl implements WorkflowServiceStubs {\n   private ScheduledExecutorService startConnectionBackoffResetter(Duration backoffResetFrequency) {\n     ScheduledExecutorService executor =\n         Executors.newSingleThreadScheduledExecutor(\n-            new ThreadFactoryBuilder().setDaemon(true).build());\n+            new ThreadFactoryBuilder()\n+                .setDaemon(true)\n+                .setNameFormat(\"ConnectionBackoffResetter-thread-%d\")\n+                .build());\n \n     executor.scheduleWithFixedDelay(\n         () -> {\n"}}, {"oid": "e35b7292579d46c8f1fbf68ee55a938a44723668", "url": "https://github.com/temporalio/sdk-java/commit/e35b7292579d46c8f1fbf68ee55a938a44723668", "message": "Use deamon threads for connection backoff resetor", "committedDate": "2020-11-05T03:45:36Z", "type": "commit"}, {"oid": "2d830f136ab1fa0ddeaa5016cbd27090c8c7067e", "url": "https://github.com/temporalio/sdk-java/commit/2d830f136ab1fa0ddeaa5016cbd27090c8c7067e", "message": "Add a thread name", "committedDate": "2020-11-05T03:45:36Z", "type": "commit"}, {"oid": "2d830f136ab1fa0ddeaa5016cbd27090c8c7067e", "url": "https://github.com/temporalio/sdk-java/commit/2d830f136ab1fa0ddeaa5016cbd27090c8c7067e", "message": "Add a thread name", "committedDate": "2020-11-05T03:45:36Z", "type": "forcePushed"}]}