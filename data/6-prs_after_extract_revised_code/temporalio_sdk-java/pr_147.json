{"pr_number": 147, "pr_title": "Added tags to request metrics. Eliminated duplicated ones", "pr_createdAt": "2020-07-10T04:23:17Z", "pr_url": "https://github.com/temporalio/sdk-java/pull/147", "timeline": [{"oid": "33b1c0f1c2cfac5e8bad17ad9eb878953e09cb71", "url": "https://github.com/temporalio/sdk-java/commit/33b1c0f1c2cfac5e8bad17ad9eb878953e09cb71", "message": "Added tags to request metrics. Eliminated duplicated ones", "committedDate": "2020-07-10T03:26:55Z", "type": "commit"}, {"oid": "8af444183c11737966514189784d25f690534052", "url": "https://github.com/temporalio/sdk-java/commit/8af444183c11737966514189784d25f690534052", "message": "Refactored GrpcDeadlineInterceptor", "committedDate": "2020-07-10T04:28:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNzY5Mg==", "url": "https://github.com/temporalio/sdk-java/pull/147#discussion_r453917692", "bodyText": "renamed as Workflow_TASK", "author": "samarabbas", "createdAt": "2020-07-13T20:37:49Z", "path": "src/main/java/io/temporal/internal/metrics/MetricsType.java", "diffHunk": "@@ -32,18 +31,8 @@\n   // measure workflow execution from start to close\n   public static final String WORKFLOW_E2E_LATENCY =\n       TEMPORAL_METRICS_PREFIX + \"workflow-endtoend-latency\";\n-  public static final String WORKFLOW_GET_HISTORY_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-get-history-total\";\n-  public static final String WORKFLOW_GET_HISTORY_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-get-history-failed\";\n-  public static final String WORKFLOW_GET_HISTORY_SUCCEED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-get-history-succeed\";\n-  public static final String WORKFLOW_GET_HISTORY_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-get-history-latency\";\n-  public static final String WORKFLOW_SIGNAL_WITH_START_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-signal-with-start\";\n-  public static final String DECISION_TIMEOUT_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-timeout\";\n+  public static final String DECISION_TASK_REPLAY_LATENCY =", "originalCommit": "8af444183c11737966514189784d25f690534052", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "23298f381b15a492b1859a69538d0104c4994836", "chunk": "diff --git a/src/main/java/io/temporal/internal/metrics/MetricsType.java b/src/main/java/io/temporal/internal/metrics/MetricsType.java\nindex 3b0d8b6d..cd3ff997 100644\n--- a/src/main/java/io/temporal/internal/metrics/MetricsType.java\n+++ b/src/main/java/io/temporal/internal/metrics/MetricsType.java\n\n@@ -20,83 +20,83 @@\n package io.temporal.internal.metrics;\n \n public class MetricsType {\n-  public static final String TEMPORAL_METRICS_PREFIX = \"temporal-\";\n+  public static final String TEMPORAL_METRICS_PREFIX = \"temporal_\";\n   public static final String WORKFLOW_COMPLETED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-completed\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_completed\";\n   public static final String WORKFLOW_CANCELLED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-canceled\";\n-  public static final String WORKFLOW_FAILED_COUNTER = TEMPORAL_METRICS_PREFIX + \"workflow-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_canceled\";\n+  public static final String WORKFLOW_FAILED_COUNTER = TEMPORAL_METRICS_PREFIX + \"workflow_failed\";\n   public static final String WORKFLOW_CONTINUE_AS_NEW_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-continue-as-new\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_continue_as_new\";\n   // measure workflow execution from start to close\n   public static final String WORKFLOW_E2E_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-endtoend-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_endtoend_latency\";\n   public static final String DECISION_TASK_REPLAY_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-task-replay-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_task_replay_latency\";\n \n   public static final String DECISION_POLL_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-total\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_total\";\n   public static final String DECISION_POLL_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_failed\";\n   public static final String DECISION_POLL_TRANSIENT_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-transient-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_transient_failed\";\n   public static final String DECISION_POLL_NO_TASK_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-no-task\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_no_task\";\n   public static final String DECISION_POLL_SUCCEED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-succeed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_succeed\";\n   public static final String DECISION_POLL_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-latency\"; // measure succeed poll request latency\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_latency\"; // measure succeed poll request latency\n   public static final String DECISION_SCHEDULED_TO_START_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-scheduled-to-start-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_scheduled_to_start_latency\";\n   public static final String DECISION_EXECUTION_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-execution-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_execution_failed\";\n   public static final String DECISION_EXECUTION_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_execution_latency\";\n   public static final String DECISION_TASK_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-task-error\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_task_error\";\n \n   public static final String ACTIVITY_POLL_NO_TASK_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-poll-no-task\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_poll_no_task\";\n   public static final String ACTIVITY_SCHEDULE_TO_START_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-scheduled-to-start-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_scheduled_to_start_latency\";\n   public static final String ACTIVITY_EXEC_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-execution-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_execution_failed\";\n   public static final String ACTIVITY_EXEC_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_execution_latency\";\n   public static final String ACTIVITY_E2E_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-endtoend-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_endtoend_latency\";\n   public static final String ACTIVITY_TASK_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-task-error\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_task_error\";\n   public static final String LOCAL_ACTIVITY_TOTAL_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-total\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_total\";\n   public static final String LOCAL_ACTIVITY_CANCELED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-canceled\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_canceled\";\n   public static final String LOCAL_ACTIVITY_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_failed\";\n   public static final String LOCAL_ACTIVITY_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-panic\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_panic\";\n   public static final String LOCAL_ACTIVITY_EXECUTION_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_execution_latency\";\n   public static final String CORRUPTED_SIGNALS_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"corrupted-signals\";\n+      TEMPORAL_METRICS_PREFIX + \"corrupted_signals\";\n \n-  public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker-start\";\n-  public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller-start\";\n+  public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker_start\";\n+  public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller_start\";\n \n   public static final String TEMPORAL_REQUEST = TEMPORAL_METRICS_PREFIX + \"request\";\n-  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"-failure\";\n-  public static final String TEMPORAL_REQUEST_LATENCY = TEMPORAL_REQUEST + \"-latency\";\n-  public static final String TEMPORAL_LONG_REQUEST = TEMPORAL_METRICS_PREFIX + \"long-request\";\n-  public static final String TEMPORAL_LONG_REQUEST_FAILURE = TEMPORAL_LONG_REQUEST + \"-failure\";\n-  public static final String TEMPORAL_LONG_REQUEST_LATENCY = TEMPORAL_LONG_REQUEST + \"-latency\";\n+  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"_failure\";\n+  public static final String TEMPORAL_REQUEST_LATENCY = TEMPORAL_REQUEST + \"_latency\";\n+  public static final String TEMPORAL_LONG_REQUEST = TEMPORAL_METRICS_PREFIX + \"long_request\";\n+  public static final String TEMPORAL_LONG_REQUEST_FAILURE = TEMPORAL_LONG_REQUEST + \"_failure\";\n+  public static final String TEMPORAL_LONG_REQUEST_LATENCY = TEMPORAL_LONG_REQUEST + \"_latency\";\n \n-  public static final String STICKY_CACHE_HIT = TEMPORAL_METRICS_PREFIX + \"sticky-cache-hit\";\n-  public static final String STICKY_CACHE_MISS = TEMPORAL_METRICS_PREFIX + \"sticky-cache-miss\";\n+  public static final String STICKY_CACHE_HIT = TEMPORAL_METRICS_PREFIX + \"sticky_cache_hit\";\n+  public static final String STICKY_CACHE_MISS = TEMPORAL_METRICS_PREFIX + \"sticky_cache_miss\";\n   public static final String STICKY_CACHE_TOTAL_FORCED_EVICTION =\n-      TEMPORAL_METRICS_PREFIX + \"sticky-cache-total-forced-eviction\";\n+      TEMPORAL_METRICS_PREFIX + \"sticky_cache_total_forced_eviction\";\n   public static final String STICKY_CACHE_THREAD_FORCED_EVICTION =\n-      TEMPORAL_METRICS_PREFIX + \"sticky-cache-thread-forced-eviction\";\n-  public static final String STICKY_CACHE_SIZE = TEMPORAL_METRICS_PREFIX + \"sticky-cache-size\";\n+      TEMPORAL_METRICS_PREFIX + \"sticky_cache_thread_forced_eviction\";\n+  public static final String STICKY_CACHE_SIZE = TEMPORAL_METRICS_PREFIX + \"sticky_cache_size\";\n   public static final String WORKFLOW_ACTIVE_THREAD_COUNT =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-active-thread-count\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_active_thread_count\";\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkyMDY5Mg==", "url": "https://github.com/temporalio/sdk-java/pull/147#discussion_r453920692", "bodyText": "Looks like we are deviating from convention we use from go-sdk.  Is there a reason to move away from existing convention.  We don't want to build 2 separate dashboards for each different type of sdk.", "author": "samarabbas", "createdAt": "2020-07-13T20:43:17Z", "path": "src/main/java/io/temporal/internal/metrics/MetricsType.java", "diffHunk": "@@ -122,32 +77,26 @@\n       TEMPORAL_METRICS_PREFIX + \"local-activity-panic\";\n   public static final String LOCAL_ACTIVITY_EXECUTION_LATENCY =\n       TEMPORAL_METRICS_PREFIX + \"local-activity-execution-latency\";\n-  public static final String WORKER_PANIC_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker-panic\";\n-\n-  public static final String TASK_QUEUE_QUEUE_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"taskqueue-queue-latency\";\n-\n-  public static final String UNHANDLED_SIGNALS_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"unhandled-signals\";\n   public static final String CORRUPTED_SIGNALS_COUNTER =\n       TEMPORAL_METRICS_PREFIX + \"corrupted-signals\";\n \n   public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker-start\";\n   public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller-start\";\n \n   public static final String TEMPORAL_REQUEST = TEMPORAL_METRICS_PREFIX + \"request\";\n-  public static final String TEMPORAL_ERROR = TEMPORAL_METRICS_PREFIX + \"error\";\n-  public static final String TEMPORAL_LATENCY = TEMPORAL_METRICS_PREFIX + \"latency\";\n-  public static final String TEMPORAL_INVALID_REQUEST = TEMPORAL_METRICS_PREFIX + \"invalid-request\";\n+  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"-failure\";", "originalCommit": "8af444183c11737966514189784d25f690534052", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "23298f381b15a492b1859a69538d0104c4994836", "chunk": "diff --git a/src/main/java/io/temporal/internal/metrics/MetricsType.java b/src/main/java/io/temporal/internal/metrics/MetricsType.java\nindex 3b0d8b6d..cd3ff997 100644\n--- a/src/main/java/io/temporal/internal/metrics/MetricsType.java\n+++ b/src/main/java/io/temporal/internal/metrics/MetricsType.java\n\n@@ -20,83 +20,83 @@\n package io.temporal.internal.metrics;\n \n public class MetricsType {\n-  public static final String TEMPORAL_METRICS_PREFIX = \"temporal-\";\n+  public static final String TEMPORAL_METRICS_PREFIX = \"temporal_\";\n   public static final String WORKFLOW_COMPLETED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-completed\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_completed\";\n   public static final String WORKFLOW_CANCELLED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-canceled\";\n-  public static final String WORKFLOW_FAILED_COUNTER = TEMPORAL_METRICS_PREFIX + \"workflow-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_canceled\";\n+  public static final String WORKFLOW_FAILED_COUNTER = TEMPORAL_METRICS_PREFIX + \"workflow_failed\";\n   public static final String WORKFLOW_CONTINUE_AS_NEW_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-continue-as-new\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_continue_as_new\";\n   // measure workflow execution from start to close\n   public static final String WORKFLOW_E2E_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-endtoend-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_endtoend_latency\";\n   public static final String DECISION_TASK_REPLAY_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-task-replay-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_task_replay_latency\";\n \n   public static final String DECISION_POLL_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-total\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_total\";\n   public static final String DECISION_POLL_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_failed\";\n   public static final String DECISION_POLL_TRANSIENT_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-transient-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_transient_failed\";\n   public static final String DECISION_POLL_NO_TASK_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-no-task\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_no_task\";\n   public static final String DECISION_POLL_SUCCEED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-succeed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_succeed\";\n   public static final String DECISION_POLL_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-latency\"; // measure succeed poll request latency\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_latency\"; // measure succeed poll request latency\n   public static final String DECISION_SCHEDULED_TO_START_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-scheduled-to-start-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_scheduled_to_start_latency\";\n   public static final String DECISION_EXECUTION_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-execution-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_execution_failed\";\n   public static final String DECISION_EXECUTION_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_execution_latency\";\n   public static final String DECISION_TASK_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-task-error\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_task_error\";\n \n   public static final String ACTIVITY_POLL_NO_TASK_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-poll-no-task\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_poll_no_task\";\n   public static final String ACTIVITY_SCHEDULE_TO_START_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-scheduled-to-start-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_scheduled_to_start_latency\";\n   public static final String ACTIVITY_EXEC_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-execution-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_execution_failed\";\n   public static final String ACTIVITY_EXEC_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_execution_latency\";\n   public static final String ACTIVITY_E2E_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-endtoend-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_endtoend_latency\";\n   public static final String ACTIVITY_TASK_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-task-error\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_task_error\";\n   public static final String LOCAL_ACTIVITY_TOTAL_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-total\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_total\";\n   public static final String LOCAL_ACTIVITY_CANCELED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-canceled\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_canceled\";\n   public static final String LOCAL_ACTIVITY_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_failed\";\n   public static final String LOCAL_ACTIVITY_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-panic\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_panic\";\n   public static final String LOCAL_ACTIVITY_EXECUTION_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_execution_latency\";\n   public static final String CORRUPTED_SIGNALS_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"corrupted-signals\";\n+      TEMPORAL_METRICS_PREFIX + \"corrupted_signals\";\n \n-  public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker-start\";\n-  public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller-start\";\n+  public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker_start\";\n+  public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller_start\";\n \n   public static final String TEMPORAL_REQUEST = TEMPORAL_METRICS_PREFIX + \"request\";\n-  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"-failure\";\n-  public static final String TEMPORAL_REQUEST_LATENCY = TEMPORAL_REQUEST + \"-latency\";\n-  public static final String TEMPORAL_LONG_REQUEST = TEMPORAL_METRICS_PREFIX + \"long-request\";\n-  public static final String TEMPORAL_LONG_REQUEST_FAILURE = TEMPORAL_LONG_REQUEST + \"-failure\";\n-  public static final String TEMPORAL_LONG_REQUEST_LATENCY = TEMPORAL_LONG_REQUEST + \"-latency\";\n+  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"_failure\";\n+  public static final String TEMPORAL_REQUEST_LATENCY = TEMPORAL_REQUEST + \"_latency\";\n+  public static final String TEMPORAL_LONG_REQUEST = TEMPORAL_METRICS_PREFIX + \"long_request\";\n+  public static final String TEMPORAL_LONG_REQUEST_FAILURE = TEMPORAL_LONG_REQUEST + \"_failure\";\n+  public static final String TEMPORAL_LONG_REQUEST_LATENCY = TEMPORAL_LONG_REQUEST + \"_latency\";\n \n-  public static final String STICKY_CACHE_HIT = TEMPORAL_METRICS_PREFIX + \"sticky-cache-hit\";\n-  public static final String STICKY_CACHE_MISS = TEMPORAL_METRICS_PREFIX + \"sticky-cache-miss\";\n+  public static final String STICKY_CACHE_HIT = TEMPORAL_METRICS_PREFIX + \"sticky_cache_hit\";\n+  public static final String STICKY_CACHE_MISS = TEMPORAL_METRICS_PREFIX + \"sticky_cache_miss\";\n   public static final String STICKY_CACHE_TOTAL_FORCED_EVICTION =\n-      TEMPORAL_METRICS_PREFIX + \"sticky-cache-total-forced-eviction\";\n+      TEMPORAL_METRICS_PREFIX + \"sticky_cache_total_forced_eviction\";\n   public static final String STICKY_CACHE_THREAD_FORCED_EVICTION =\n-      TEMPORAL_METRICS_PREFIX + \"sticky-cache-thread-forced-eviction\";\n-  public static final String STICKY_CACHE_SIZE = TEMPORAL_METRICS_PREFIX + \"sticky-cache-size\";\n+      TEMPORAL_METRICS_PREFIX + \"sticky_cache_thread_forced_eviction\";\n+  public static final String STICKY_CACHE_SIZE = TEMPORAL_METRICS_PREFIX + \"sticky_cache_size\";\n   public static final String WORKFLOW_ACTIVE_THREAD_COUNT =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-active-thread-count\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_active_thread_count\";\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkyMTM4Mw==", "url": "https://github.com/temporalio/sdk-java/pull/147#discussion_r453921383", "bodyText": "'-' does not work well with certain backends like prometheus for instance.  It would be nice to replace '-' with '_' everywhere if possible.  I think we have to plugin name sanitizer to fix that at runtime otherwise.", "author": "samarabbas", "createdAt": "2020-07-13T20:44:33Z", "path": "src/main/java/io/temporal/internal/metrics/MetricsType.java", "diffHunk": "@@ -21,7 +21,6 @@\n \n public class MetricsType {\n   public static final String TEMPORAL_METRICS_PREFIX = \"temporal-\";", "originalCommit": "8af444183c11737966514189784d25f690534052", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "23298f381b15a492b1859a69538d0104c4994836", "chunk": "diff --git a/src/main/java/io/temporal/internal/metrics/MetricsType.java b/src/main/java/io/temporal/internal/metrics/MetricsType.java\nindex 3b0d8b6d..cd3ff997 100644\n--- a/src/main/java/io/temporal/internal/metrics/MetricsType.java\n+++ b/src/main/java/io/temporal/internal/metrics/MetricsType.java\n\n@@ -20,83 +20,83 @@\n package io.temporal.internal.metrics;\n \n public class MetricsType {\n-  public static final String TEMPORAL_METRICS_PREFIX = \"temporal-\";\n+  public static final String TEMPORAL_METRICS_PREFIX = \"temporal_\";\n   public static final String WORKFLOW_COMPLETED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-completed\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_completed\";\n   public static final String WORKFLOW_CANCELLED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-canceled\";\n-  public static final String WORKFLOW_FAILED_COUNTER = TEMPORAL_METRICS_PREFIX + \"workflow-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_canceled\";\n+  public static final String WORKFLOW_FAILED_COUNTER = TEMPORAL_METRICS_PREFIX + \"workflow_failed\";\n   public static final String WORKFLOW_CONTINUE_AS_NEW_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-continue-as-new\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_continue_as_new\";\n   // measure workflow execution from start to close\n   public static final String WORKFLOW_E2E_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-endtoend-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_endtoend_latency\";\n   public static final String DECISION_TASK_REPLAY_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-task-replay-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_task_replay_latency\";\n \n   public static final String DECISION_POLL_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-total\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_total\";\n   public static final String DECISION_POLL_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_failed\";\n   public static final String DECISION_POLL_TRANSIENT_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-transient-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_transient_failed\";\n   public static final String DECISION_POLL_NO_TASK_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-no-task\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_no_task\";\n   public static final String DECISION_POLL_SUCCEED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-succeed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_succeed\";\n   public static final String DECISION_POLL_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-poll-latency\"; // measure succeed poll request latency\n+      TEMPORAL_METRICS_PREFIX + \"decision_poll_latency\"; // measure succeed poll request latency\n   public static final String DECISION_SCHEDULED_TO_START_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-scheduled-to-start-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_scheduled_to_start_latency\";\n   public static final String DECISION_EXECUTION_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-execution-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_execution_failed\";\n   public static final String DECISION_EXECUTION_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"decision-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_execution_latency\";\n   public static final String DECISION_TASK_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"decision-task-error\";\n+      TEMPORAL_METRICS_PREFIX + \"decision_task_error\";\n \n   public static final String ACTIVITY_POLL_NO_TASK_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-poll-no-task\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_poll_no_task\";\n   public static final String ACTIVITY_SCHEDULE_TO_START_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-scheduled-to-start-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_scheduled_to_start_latency\";\n   public static final String ACTIVITY_EXEC_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-execution-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_execution_failed\";\n   public static final String ACTIVITY_EXEC_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_execution_latency\";\n   public static final String ACTIVITY_E2E_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"activity-endtoend-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_endtoend_latency\";\n   public static final String ACTIVITY_TASK_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"activity-task-error\";\n+      TEMPORAL_METRICS_PREFIX + \"activity_task_error\";\n   public static final String LOCAL_ACTIVITY_TOTAL_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-total\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_total\";\n   public static final String LOCAL_ACTIVITY_CANCELED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-canceled\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_canceled\";\n   public static final String LOCAL_ACTIVITY_FAILED_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-failed\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_failed\";\n   public static final String LOCAL_ACTIVITY_ERROR_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-panic\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_panic\";\n   public static final String LOCAL_ACTIVITY_EXECUTION_LATENCY =\n-      TEMPORAL_METRICS_PREFIX + \"local-activity-execution-latency\";\n+      TEMPORAL_METRICS_PREFIX + \"local_activity_execution_latency\";\n   public static final String CORRUPTED_SIGNALS_COUNTER =\n-      TEMPORAL_METRICS_PREFIX + \"corrupted-signals\";\n+      TEMPORAL_METRICS_PREFIX + \"corrupted_signals\";\n \n-  public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker-start\";\n-  public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller-start\";\n+  public static final String WORKER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"worker_start\";\n+  public static final String POLLER_START_COUNTER = TEMPORAL_METRICS_PREFIX + \"poller_start\";\n \n   public static final String TEMPORAL_REQUEST = TEMPORAL_METRICS_PREFIX + \"request\";\n-  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"-failure\";\n-  public static final String TEMPORAL_REQUEST_LATENCY = TEMPORAL_REQUEST + \"-latency\";\n-  public static final String TEMPORAL_LONG_REQUEST = TEMPORAL_METRICS_PREFIX + \"long-request\";\n-  public static final String TEMPORAL_LONG_REQUEST_FAILURE = TEMPORAL_LONG_REQUEST + \"-failure\";\n-  public static final String TEMPORAL_LONG_REQUEST_LATENCY = TEMPORAL_LONG_REQUEST + \"-latency\";\n+  public static final String TEMPORAL_REQUEST_FAILURE = TEMPORAL_REQUEST + \"_failure\";\n+  public static final String TEMPORAL_REQUEST_LATENCY = TEMPORAL_REQUEST + \"_latency\";\n+  public static final String TEMPORAL_LONG_REQUEST = TEMPORAL_METRICS_PREFIX + \"long_request\";\n+  public static final String TEMPORAL_LONG_REQUEST_FAILURE = TEMPORAL_LONG_REQUEST + \"_failure\";\n+  public static final String TEMPORAL_LONG_REQUEST_LATENCY = TEMPORAL_LONG_REQUEST + \"_latency\";\n \n-  public static final String STICKY_CACHE_HIT = TEMPORAL_METRICS_PREFIX + \"sticky-cache-hit\";\n-  public static final String STICKY_CACHE_MISS = TEMPORAL_METRICS_PREFIX + \"sticky-cache-miss\";\n+  public static final String STICKY_CACHE_HIT = TEMPORAL_METRICS_PREFIX + \"sticky_cache_hit\";\n+  public static final String STICKY_CACHE_MISS = TEMPORAL_METRICS_PREFIX + \"sticky_cache_miss\";\n   public static final String STICKY_CACHE_TOTAL_FORCED_EVICTION =\n-      TEMPORAL_METRICS_PREFIX + \"sticky-cache-total-forced-eviction\";\n+      TEMPORAL_METRICS_PREFIX + \"sticky_cache_total_forced_eviction\";\n   public static final String STICKY_CACHE_THREAD_FORCED_EVICTION =\n-      TEMPORAL_METRICS_PREFIX + \"sticky-cache-thread-forced-eviction\";\n-  public static final String STICKY_CACHE_SIZE = TEMPORAL_METRICS_PREFIX + \"sticky-cache-size\";\n+      TEMPORAL_METRICS_PREFIX + \"sticky_cache_thread_forced_eviction\";\n+  public static final String STICKY_CACHE_SIZE = TEMPORAL_METRICS_PREFIX + \"sticky_cache_size\";\n   public static final String WORKFLOW_ACTIVE_THREAD_COUNT =\n-      TEMPORAL_METRICS_PREFIX + \"workflow-active-thread-count\";\n+      TEMPORAL_METRICS_PREFIX + \"workflow_active_thread_count\";\n }\n"}}, {"oid": "23298f381b15a492b1859a69538d0104c4994836", "url": "https://github.com/temporalio/sdk-java/commit/23298f381b15a492b1859a69538d0104c4994836", "message": "Changed metrics name separator to underscore", "committedDate": "2020-07-13T22:54:58Z", "type": "commit"}, {"oid": "75737988489eea666c9781436309782576c5479e", "url": "https://github.com/temporalio/sdk-java/commit/75737988489eea666c9781436309782576c5479e", "message": "Fixed hyphon in license", "committedDate": "2020-07-13T23:04:41Z", "type": "commit"}, {"oid": "52f5ca88436ac1f91b47f0d59b2de2ac8175a213", "url": "https://github.com/temporalio/sdk-java/commit/52f5ca88436ac1f91b47f0d59b2de2ac8175a213", "message": "Fixed metrics test for the new metrics names", "committedDate": "2020-07-13T23:23:12Z", "type": "commit"}]}