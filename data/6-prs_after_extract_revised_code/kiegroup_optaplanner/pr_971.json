{"pr_number": 971, "pr_title": "[7.x] PLANNER-2204 VariableListener becomes public API #970", "pr_createdAt": "2020-10-15T09:50:04Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/971", "timeline": [{"oid": "f2b6e0d78852dd6b0d6a7cf77e845fb8ff3bf25d", "url": "https://github.com/kiegroup/optaplanner/commit/f2b6e0d78852dd6b0d6a7cf77e845fb8ff3bf25d", "message": "VariableListener moves to public API", "committedDate": "2020-10-14T10:43:51Z", "type": "commit"}, {"oid": "f596eca31906d886dbb4a72aa6cb295700a3170d", "url": "https://github.com/kiegroup/optaplanner/commit/f596eca31906d886dbb4a72aa6cb295700a3170d", "message": "Deprecate the rest of the stuff", "committedDate": "2020-10-14T10:54:30Z", "type": "commit"}, {"oid": "781aeaf030ebfa9b66b996cbf1ba74a9095d71d6", "url": "https://github.com/kiegroup/optaplanner/commit/781aeaf030ebfa9b66b996cbf1ba74a9095d71d6", "message": "Handle the build", "committedDate": "2020-10-14T10:58:01Z", "type": "commit"}, {"oid": "93e47cbb1311e288b7b42e1ee36c03d5229d8db7", "url": "https://github.com/kiegroup/optaplanner/commit/93e47cbb1311e288b7b42e1ee36c03d5229d8db7", "message": "Adjust docs", "committedDate": "2020-10-14T11:08:43Z", "type": "commit"}, {"oid": "825e9faaf9aac0f8f5de53ef3390450f3b97bd15", "url": "https://github.com/kiegroup/optaplanner/commit/825e9faaf9aac0f8f5de53ef3390450f3b97bd15", "message": "Update tests", "committedDate": "2020-10-15T09:42:47Z", "type": "commit"}, {"oid": "0c48b43a05cd3ef50552c1911d8daa6bf1e9c261", "url": "https://github.com/kiegroup/optaplanner/commit/0c48b43a05cd3ef50552c1911d8daa6bf1e9c261", "message": "Better Javadoc", "committedDate": "2020-10-15T09:44:45Z", "type": "commit"}, {"oid": "346f5a819e6b9fff847b1e5ac979602d404caa9f", "url": "https://github.com/kiegroup/optaplanner/commit/346f5a819e6b9fff847b1e5ac979602d404caa9f", "message": "Formatting", "committedDate": "2020-10-15T09:48:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ2MzQ0MQ==", "url": "https://github.com/kiegroup/optaplanner/pull/971#discussion_r505463441", "bodyText": "Are we sure this doesn't break the API?\nIf a user had written:  method(ScoreDirector<MyRoster> ...) it wouldn't have compiled\nBut if a user had written\nbeforeEntityAdded(ScoreDirector scoreDirector, ...) {\n   ((ScoreDirector<MyRoster>) scoreDirector).getMyShiftList()...\n   ...\n}\n\nWould that still compile?", "author": "ge0ffrey", "createdAt": "2020-10-15T11:22:15Z", "path": "optaplanner-core/src/main/java/org/optaplanner/core/impl/domain/variable/listener/VariableListener.java", "diffHunk": "@@ -47,36 +51,36 @@ default boolean requiresUniqueEntityEvents() {\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void beforeEntityAdded(ScoreDirector scoreDirector, Entity_ entity);\n+    void beforeEntityAdded(ScoreDirector<Object> scoreDirector, Entity_ entity);", "originalCommit": "346f5a819e6b9fff847b1e5ac979602d404caa9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ2MzYzNQ==", "url": "https://github.com/kiegroup/optaplanner/pull/971#discussion_r505463635", "bodyText": "Would it compile if the method signature was ScoreDirector<?> instead of ScoreDirector?", "author": "ge0ffrey", "createdAt": "2020-10-15T11:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ2MzQ0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTUyNjU3OA==", "url": "https://github.com/kiegroup/optaplanner/pull/971#discussion_r505526578", "bodyText": "I've removed <Solution_> from the new VariableListener. This should remove all potential for generic corner case problems.", "author": "triceo", "createdAt": "2020-10-15T13:08:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ2MzQ0MQ=="}], "type": "inlineReview", "revised_code": {"commit": "9e7b2ad08ac65ecc8f702ce577404727461ef5a0", "chunk": "diff --git a/optaplanner-core/src/main/java/org/optaplanner/core/impl/domain/variable/listener/VariableListener.java b/optaplanner-core/src/main/java/org/optaplanner/core/impl/domain/variable/listener/VariableListener.java\nindex 8fc0218710..d37dce43cf 100644\n--- a/optaplanner-core/src/main/java/org/optaplanner/core/impl/domain/variable/listener/VariableListener.java\n+++ b/optaplanner-core/src/main/java/org/optaplanner/core/impl/domain/variable/listener/VariableListener.java\n\n@@ -51,36 +51,36 @@ public interface VariableListener<Entity_>\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void beforeEntityAdded(ScoreDirector<Object> scoreDirector, Entity_ entity);\n+    void beforeEntityAdded(ScoreDirector scoreDirector, Entity_ entity);\n \n     /**\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void afterEntityAdded(ScoreDirector<Object> scoreDirector, Entity_ entity);\n+    void afterEntityAdded(ScoreDirector scoreDirector, Entity_ entity);\n \n     /**\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void beforeVariableChanged(ScoreDirector<Object> scoreDirector, Entity_ entity);\n+    void beforeVariableChanged(ScoreDirector scoreDirector, Entity_ entity);\n \n     /**\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void afterVariableChanged(ScoreDirector<Object> scoreDirector, Entity_ entity);\n+    void afterVariableChanged(ScoreDirector scoreDirector, Entity_ entity);\n \n     /**\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void beforeEntityRemoved(ScoreDirector<Object> scoreDirector, Entity_ entity);\n+    void beforeEntityRemoved(ScoreDirector scoreDirector, Entity_ entity);\n \n     /**\n      * @param scoreDirector never null\n      * @param entity never null\n      */\n-    void afterEntityRemoved(ScoreDirector<Object> scoreDirector, Entity_ entity);\n+    void afterEntityRemoved(ScoreDirector scoreDirector, Entity_ entity);\n \n }\n"}}, {"oid": "9e7b2ad08ac65ecc8f702ce577404727461ef5a0", "url": "https://github.com/kiegroup/optaplanner/commit/9e7b2ad08ac65ecc8f702ce577404727461ef5a0", "message": "Code review", "committedDate": "2020-10-15T13:06:09Z", "type": "commit"}]}