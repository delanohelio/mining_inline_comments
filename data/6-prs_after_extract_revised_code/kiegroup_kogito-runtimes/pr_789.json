{"pr_number": 789, "pr_title": "KOGITO-2348: Scenario fails if DMN model imports another one", "pr_createdAt": "2020-09-28T15:54:38Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/789", "timeline": [{"oid": "d8fe8f901acd1f46aaa3ab142dd9e352edf9f84c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/d8fe8f901acd1f46aaa3ab142dd9e352edf9f84c", "message": "KOGITO-2348: Filtering out resources under target/ folder", "committedDate": "2020-09-23T16:29:20Z", "type": "commit"}, {"oid": "d18add990d503334db372c78b752ad031971a24c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/d18add990d503334db372c78b752ad031971a24c", "message": "KOGITO-2348: Filtering out resources under target/ folder", "committedDate": "2020-09-28T15:51:08Z", "type": "commit"}, {"oid": "f2137507cd9727a7855417ca863b6458b8eb241e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/f2137507cd9727a7855417ca863b6458b8eb241e", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348", "committedDate": "2020-09-28T15:52:48Z", "type": "commit"}, {"oid": "9d364f41fd3249a6b08d3a89bf5ec2d956d61e5e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/9d364f41fd3249a6b08d3a89bf5ec2d956d61e5e", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348", "committedDate": "2020-10-01T11:00:16Z", "type": "commit"}, {"oid": "8a0e61d8e1a66001bd660935e70801a08b352ed2", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8a0e61d8e1a66001bd660935e70801a08b352ed2", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348", "committedDate": "2020-10-06T07:54:20Z", "type": "commit"}, {"oid": "863f51d471d43c345aeba284559b884e73ef4e86", "url": "https://github.com/kiegroup/kogito-runtimes/commit/863f51d471d43c345aeba284559b884e73ef4e86", "message": "KOGITO-2348: Test case with Imported DMN", "committedDate": "2020-10-06T12:58:01Z", "type": "commit"}, {"oid": "c904f2de8ffcd7e105be54027808e7dc0997652c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/c904f2de8ffcd7e105be54027808e7dc0997652c", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348", "committedDate": "2020-10-06T12:59:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkwODgzNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#discussion_r500908834", "bodyText": "Wouldn't moving the String#contains and String#endsWith to the beginning of the return statement optimize the evaluation of &&? e.g. Based on https://rules.sonarsource.com/java/tag/performance/RSPEC-3725 the Files methods have poor performance, so in theory it's a waste to invoke it on target-located files when those are filtered out in the end anyway.\nI would actually reverse the order as is now, filter out any path containing target, get just paths with given extension and only the check the file.", "author": "jstastny-cz", "createdAt": "2020-10-07T10:35:11Z", "path": "drools/kogito-scenario-simulation/src/main/java/org/kogito/scenariosimulation/runner/KogitoDMNScenarioRunnerHelper.java", "diffHunk": "@@ -133,4 +133,8 @@ private DMNRuntime initDmnRuntime() {\n         }\n     }\n \n+    private boolean filterResource(Path path, String extension) {\n+        return Files.isRegularFile(path) && path.toString().endsWith(extension) && !path.toString().contains(\"/target/\");", "originalCommit": "c904f2de8ffcd7e105be54027808e7dc0997652c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDk1MzY4OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/789#discussion_r500953688", "bodyText": "@jstastny-cz Excellent suggestion, done!", "author": "yesamer", "createdAt": "2020-10-07T11:59:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkwODgzNA=="}], "type": "inlineReview", "revised_code": {"commit": "20a2a4622f4d5cf712c5d7bed33e16a73d2c86f0", "chunk": "diff --git a/drools/kogito-scenario-simulation/src/main/java/org/kogito/scenariosimulation/runner/KogitoDMNScenarioRunnerHelper.java b/drools/kogito-scenario-simulation/src/main/java/org/kogito/scenariosimulation/runner/KogitoDMNScenarioRunnerHelper.java\nindex 73a0c41d3f..5b98016a2c 100644\n--- a/drools/kogito-scenario-simulation/src/main/java/org/kogito/scenariosimulation/runner/KogitoDMNScenarioRunnerHelper.java\n+++ b/drools/kogito-scenario-simulation/src/main/java/org/kogito/scenariosimulation/runner/KogitoDMNScenarioRunnerHelper.java\n\n@@ -134,7 +134,7 @@ public class KogitoDMNScenarioRunnerHelper extends DMNScenarioRunnerHelper {\n     }\n \n     private boolean filterResource(Path path, String extension) {\n-        return Files.isRegularFile(path) && path.toString().endsWith(extension) && !path.toString().contains(\"/target/\");\n+        return path.toString().endsWith(extension) && !path.toString().contains(\"/target/\") && Files.isRegularFile(path);\n     }\n \n }\n"}}, {"oid": "20a2a4622f4d5cf712c5d7bed33e16a73d2c86f0", "url": "https://github.com/kiegroup/kogito-runtimes/commit/20a2a4622f4d5cf712c5d7bed33e16a73d2c86f0", "message": "KOGITO-2348: Changes required during code review", "committedDate": "2020-10-07T11:56:55Z", "type": "commit"}, {"oid": "84a9d3cd9e4bd78eddf411c7774c55beb2570928", "url": "https://github.com/kiegroup/kogito-runtimes/commit/84a9d3cd9e4bd78eddf411c7774c55beb2570928", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348", "committedDate": "2020-10-07T11:57:48Z", "type": "commit"}, {"oid": "f53fb20dc62c7e5281b5628f5d93310e5e720fbd", "url": "https://github.com/kiegroup/kogito-runtimes/commit/f53fb20dc62c7e5281b5628f5d93310e5e720fbd", "message": "KOGITO-2348: Updated Scesim test case - now it's compatible with BC.", "committedDate": "2020-10-09T13:05:40Z", "type": "commit"}, {"oid": "10ad297065182e1f955bb424f67bd6ef367fd826", "url": "https://github.com/kiegroup/kogito-runtimes/commit/10ad297065182e1f955bb424f67bd6ef367fd826", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-2348", "committedDate": "2020-10-09T13:06:05Z", "type": "commit"}]}