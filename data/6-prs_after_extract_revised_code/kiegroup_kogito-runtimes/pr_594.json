{"pr_number": 594, "pr_title": "[KOGITO-2518] add hot reload test case to demonstrate addition of a n\u2026", "pr_createdAt": "2020-06-29T17:28:59Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/594", "timeline": [{"oid": "2bab174241e2a5583ccf891975ee6f36f418cc29", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2bab174241e2a5583ccf891975ee6f36f418cc29", "message": "[KOGITO-2518] add hot reload test case to demonstrate addition of a new field to an existing pojo", "committedDate": "2020-07-07T16:44:01Z", "type": "commit"}, {"oid": "5bd53ebbb89a99dc16d6901562bd412425c52934", "url": "https://github.com/kiegroup/kogito-runtimes/commit/5bd53ebbb89a99dc16d6901562bd412425c52934", "message": "wip", "committedDate": "2020-07-07T16:56:11Z", "type": "commit"}, {"oid": "0a2310b274c213797c120db79ee3c2ad488c44a7", "url": "https://github.com/kiegroup/kogito-runtimes/commit/0a2310b274c213797c120db79ee3c2ad488c44a7", "message": "wip", "committedDate": "2020-07-07T16:59:43Z", "type": "commit"}, {"oid": "75b2f8c2ac5d34ba8e462d4bec773ccd1ffa5ee9", "url": "https://github.com/kiegroup/kogito-runtimes/commit/75b2f8c2ac5d34ba8e462d4bec773ccd1ffa5ee9", "message": "wip", "committedDate": "2020-07-08T07:24:52Z", "type": "commit"}, {"oid": "75b2f8c2ac5d34ba8e462d4bec773ccd1ffa5ee9", "url": "https://github.com/kiegroup/kogito-runtimes/commit/75b2f8c2ac5d34ba8e462d4bec773ccd1ffa5ee9", "message": "wip", "committedDate": "2020-07-08T07:24:52Z", "type": "forcePushed"}, {"oid": "ce2824e3753accd91cf65fddc28ec076c0c1eba2", "url": "https://github.com/kiegroup/kogito-runtimes/commit/ce2824e3753accd91cf65fddc28ec076c0c1eba2", "message": "[KOGITO-2518] fix hot reload when adding a new field to an existing pojo", "committedDate": "2020-07-09T12:10:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIwNjA3Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/594#discussion_r452206073", "bodyText": "maybe add a comment explaining this is a temporary hack, and what it fixes", "author": "evacchi", "createdAt": "2020-07-09T13:12:18Z", "path": "kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoCompilationProvider.java", "diffHunk": "@@ -35,19 +36,20 @@\n \n     @Override\n     public final void compile(Set<File> filesToCompile, Context context) {\n+        final URLClassLoader cl = new URLClassLoader( getClasspathUrls( context ), null );", "originalCommit": "ce2824e3753accd91cf65fddc28ec076c0c1eba2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "776eece9af98ce09874d7516ee93f23885f51d65", "chunk": "diff --git a/kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoCompilationProvider.java b/kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoCompilationProvider.java\nindex 6f82ca729d..0b3126ab61 100644\n--- a/kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoCompilationProvider.java\n+++ b/kogito-quarkus-extension/deployment/src/main/java/org/kie/kogito/quarkus/deployment/KogitoCompilationProvider.java\n\n@@ -36,6 +36,10 @@ public abstract class KogitoCompilationProvider extends JavaCompilationProvider\n \n     @Override\n     public final void compile(Set<File> filesToCompile, Context context) {\n+        // This classloader reads from the file system all the project dependencies, plus the quarkus output directory\n+        // containing all the latest class definitions of user's pojos, eventually recompiled also during the latest\n+        // hot reload round. It is also necessary to use a null as a parent classloader otherwise this classloader\n+        // could load the old definition of a class from the parent instead of getting the latest one from the output directory\n         final URLClassLoader cl = new URLClassLoader( getClasspathUrls( context ), null );\n \n         File outputDirectory = context.getOutputDirectory();\n"}}, {"oid": "66c1b32959a15f58215208447dc5059c12534bf1", "url": "https://github.com/kiegroup/kogito-runtimes/commit/66c1b32959a15f58215208447dc5059c12534bf1", "message": "[KOGITO-2518] add test case changing both pojo and drl at once", "committedDate": "2020-07-09T13:22:42Z", "type": "commit"}, {"oid": "776eece9af98ce09874d7516ee93f23885f51d65", "url": "https://github.com/kiegroup/kogito-runtimes/commit/776eece9af98ce09874d7516ee93f23885f51d65", "message": "add comment", "committedDate": "2020-07-09T14:34:18Z", "type": "commit"}]}