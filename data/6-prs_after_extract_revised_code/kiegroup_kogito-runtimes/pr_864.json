{"pr_number": 864, "pr_title": "FAI-280 - fix dmn model model publisher", "pr_createdAt": "2020-11-02T10:39:30Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/864", "timeline": [{"oid": "2aa57b958556c52ee249d348bc02017f11387846", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2aa57b958556c52ee249d348bc02017f11387846", "message": "fix dmn model model publisher", "committedDate": "2020-11-02T10:36:59Z", "type": "commit"}, {"oid": "57d58dced5668270c1afd340039cd4743b0b5037", "url": "https://github.com/kiegroup/kogito-runtimes/commit/57d58dced5668270c1afd340039cd4743b0b5037", "message": "remove log statement", "committedDate": "2020-11-02T10:39:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk1NjI0Ng==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/864#discussion_r515956246", "bodyText": "Can you add a comment to refer Quarkus issue?", "author": "danielezonca", "createdAt": "2020-11-02T13:03:31Z", "path": "addons/tracing/tracing-decision-quarkus-addon/src/main/java/org/kie/kogito/tracing/decision/QuarkusStartupModelPublisher.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.kogito.tracing.decision;\n+\n+import javax.enterprise.event.Observes;\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+\n+import io.quarkus.runtime.Startup;\n+import io.quarkus.runtime.StartupEvent;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+@Singleton\n+@Startup\n+public class QuarkusStartupModelPublisher {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(QuarkusStartupModelPublisher.class);\n+\n+    @Inject\n+    QuarkusModelEventEmitter modelEventEmitter;\n+\n+    public void publish(@Observes StartupEvent event) {", "originalCommit": "57d58dced5668270c1afd340039cd4743b0b5037", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk1OTU4MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/864#discussion_r515959581", "bodyText": "Sure \ud83d\udc4d", "author": "r00ta", "createdAt": "2020-11-02T13:09:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk1NjI0Ng=="}], "type": "inlineReview", "revised_code": {"commit": "ae99a3cbaf89f273165df0270bd7e3a14f2471c8", "chunk": "diff --git a/addons/tracing/tracing-decision-quarkus-addon/src/main/java/org/kie/kogito/tracing/decision/QuarkusStartupModelPublisher.java b/addons/tracing/tracing-decision-quarkus-addon/src/main/java/org/kie/kogito/tracing/decision/QuarkusStartupModelPublisher.java\nindex 575e77a555..1c40fdd19d 100644\n--- a/addons/tracing/tracing-decision-quarkus-addon/src/main/java/org/kie/kogito/tracing/decision/QuarkusStartupModelPublisher.java\n+++ b/addons/tracing/tracing-decision-quarkus-addon/src/main/java/org/kie/kogito/tracing/decision/QuarkusStartupModelPublisher.java\n\n@@ -34,6 +34,7 @@ public class QuarkusStartupModelPublisher {\n     @Inject\n     QuarkusModelEventEmitter modelEventEmitter;\n \n+    // The bean that fires the event at startup must be separated from the kafka connector due to https://github.com/quarkusio/quarkus/issues/12820\n     public void publish(@Observes StartupEvent event) {\n         LOGGER.debug(\"Publishing decision models to the kafka topic\");\n         modelEventEmitter.publishDecisionModels();\n"}}, {"oid": "ae99a3cbaf89f273165df0270bd7e3a14f2471c8", "url": "https://github.com/kiegroup/kogito-runtimes/commit/ae99a3cbaf89f273165df0270bd7e3a14f2471c8", "message": "Update QuarkusStartupModelPublisher.java", "committedDate": "2020-11-02T13:08:56Z", "type": "commit"}]}