{"pr_number": 861, "pr_title": "KOGITO-3741 DMN relativize OAS to JSONSchema $ref", "pr_createdAt": "2020-10-29T16:58:38Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/861", "timeline": [{"oid": "8ce48cf40f3739baa25fe40c826f4d8e1dee8f2c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8ce48cf40f3739baa25fe40c826f4d8e1dee8f2c", "message": "KOGITO-3741 DMN relativize OAS to JSONSchema $ref", "committedDate": "2020-10-29T16:57:39Z", "type": "commit"}, {"oid": "51b095b1bbb25fa7c91867d10a38fdd514fba857", "url": "https://github.com/kiegroup/kogito-runtimes/commit/51b095b1bbb25fa7c91867d10a38fdd514fba857", "message": "improve sonarcloud score", "committedDate": "2020-11-02T08:54:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk0NzYxOA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/861#discussion_r515947618", "bodyText": "Hi @tarilabs, could you please clarify if this path is correct? Just to make sure, because there was a \"/docs\" in the path and now there is only one constant (DMN_DEFINITIONS_JSON).", "author": "hellowdan", "createdAt": "2020-11-02T12:47:56Z", "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/decision/DecisionRestResourceGenerator.java", "diffHunk": "@@ -171,27 +171,28 @@ private void processOASAnn(MethodDeclaration dmnMethod, DecisionService ds) {\n             inputRef = withOASResult.getNamingPolicy().getRef(identifyInputSet);\n             outputRef = withOASResult.getNamingPolicy().getRef(identifyOutputSet);\n         }\n+        final String DMN_DEFINITIONS_JSON = \"dmnDefinitions.json\";\n         // MP / Quarkus\n         processAnnForRef(dmnMethod,\n                          \"org.eclipse.microprofile.openapi.annotations.parameters.RequestBody\",\n                          \"org.eclipse.microprofile.openapi.annotations.media.Schema\",\n-                         \"/dmnDefinitions.json\" + inputRef,\n+                         DMN_DEFINITIONS_JSON + inputRef,\n                          !mpAnnPresent);\n         processAnnForRef(dmnMethod,\n                          \"org.eclipse.microprofile.openapi.annotations.responses.APIResponse\",\n                          \"org.eclipse.microprofile.openapi.annotations.media.Schema\",\n-                         \"/dmnDefinitions.json\" + outputRef,\n+                         DMN_DEFINITIONS_JSON + outputRef,\n                          !mpAnnPresent);\n         // io.swagger / SB\n         processAnnForRef(dmnMethod,\n                          \"io.swagger.v3.oas.annotations.parameters.RequestBody\",\n                          \"io.swagger.v3.oas.annotations.media.Schema\",\n-                         \"/docs/dmnDefinitions.json\" + inputRef,\n+                         DMN_DEFINITIONS_JSON + inputRef,", "originalCommit": "51b095b1bbb25fa7c91867d10a38fdd514fba857", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk1OTk3OQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/861#discussion_r515959979", "bodyText": "yes it's correct, as it will be relative path in the swagger/OAS file (as expected)", "author": "tarilabs", "createdAt": "2020-11-02T13:10:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk0NzYxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk3NjE2Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/861#discussion_r515976163", "bodyText": "thanks @tarilabs !", "author": "hellowdan", "createdAt": "2020-11-02T13:38:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk0NzYxOA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk0NzgyNQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/861#discussion_r515947825", "bodyText": "Same as above.", "author": "hellowdan", "createdAt": "2020-11-02T12:48:23Z", "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/decision/DecisionRestResourceGenerator.java", "diffHunk": "@@ -171,27 +171,28 @@ private void processOASAnn(MethodDeclaration dmnMethod, DecisionService ds) {\n             inputRef = withOASResult.getNamingPolicy().getRef(identifyInputSet);\n             outputRef = withOASResult.getNamingPolicy().getRef(identifyOutputSet);\n         }\n+        final String DMN_DEFINITIONS_JSON = \"dmnDefinitions.json\";\n         // MP / Quarkus\n         processAnnForRef(dmnMethod,\n                          \"org.eclipse.microprofile.openapi.annotations.parameters.RequestBody\",\n                          \"org.eclipse.microprofile.openapi.annotations.media.Schema\",\n-                         \"/dmnDefinitions.json\" + inputRef,\n+                         DMN_DEFINITIONS_JSON + inputRef,\n                          !mpAnnPresent);\n         processAnnForRef(dmnMethod,\n                          \"org.eclipse.microprofile.openapi.annotations.responses.APIResponse\",\n                          \"org.eclipse.microprofile.openapi.annotations.media.Schema\",\n-                         \"/dmnDefinitions.json\" + outputRef,\n+                         DMN_DEFINITIONS_JSON + outputRef,\n                          !mpAnnPresent);\n         // io.swagger / SB\n         processAnnForRef(dmnMethod,\n                          \"io.swagger.v3.oas.annotations.parameters.RequestBody\",\n                          \"io.swagger.v3.oas.annotations.media.Schema\",\n-                         \"/docs/dmnDefinitions.json\" + inputRef,\n+                         DMN_DEFINITIONS_JSON + inputRef,\n                          !swaggerAnnPresent);\n         processAnnForRef(dmnMethod,\n                          \"io.swagger.v3.oas.annotations.responses.ApiResponse\",\n                          \"io.swagger.v3.oas.annotations.media.Schema\",\n-                         \"/docs/dmnDefinitions.json\" + outputRef,\n+                         DMN_DEFINITIONS_JSON + outputRef,", "originalCommit": "51b095b1bbb25fa7c91867d10a38fdd514fba857", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk2MDA3Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/861#discussion_r515960073", "bodyText": "above", "author": "tarilabs", "createdAt": "2020-11-02T13:10:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk0NzgyNQ=="}], "type": "inlineReview", "revised_code": null}]}