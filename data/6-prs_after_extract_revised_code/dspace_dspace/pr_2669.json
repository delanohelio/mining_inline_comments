{"pr_number": 2669, "pr_title": "DS-4380 : Fix errorprone test warnings after JDK11 upgrade", "pr_createdAt": "2020-02-11T19:07:24Z", "pr_url": "https://github.com/DSpace/DSpace/pull/2669", "timeline": [{"oid": "657319b02ceba4cbd7ff8e98fd5d08986a05ca25", "url": "https://github.com/DSpace/DSpace/commit/657319b02ceba4cbd7ff8e98fd5d08986a05ca25", "message": "Rename IntegrationTest to end in IT.", "committedDate": "2020-02-13T21:31:45Z", "type": "commit"}, {"oid": "f50156d32031270fa6fdbe725af22a17a7b8206a", "url": "https://github.com/DSpace/DSpace/commit/f50156d32031270fa6fdbe725af22a17a7b8206a", "message": "Refactor to remove deprecation warning for ObjectUtils.equals", "committedDate": "2020-02-13T21:31:45Z", "type": "commit"}, {"oid": "1b40e6d6e9f7a128d66b933e771d7252679e9f02", "url": "https://github.com/DSpace/DSpace/commit/1b40e6d6e9f7a128d66b933e771d7252679e9f02", "message": "Minor test class refactors to remove errorprone warnings.", "committedDate": "2020-02-13T21:31:45Z", "type": "commit"}, {"oid": "408acc2b907fc46faf02eb460e438317a7d2c8b3", "url": "https://github.com/DSpace/DSpace/commit/408acc2b907fc46faf02eb460e438317a7d2c8b3", "message": "Fix deprecation warning", "committedDate": "2020-02-13T21:31:45Z", "type": "commit"}, {"oid": "f73b2b5fea2f159356b225e45479a5c1f7278333", "url": "https://github.com/DSpace/DSpace/commit/f73b2b5fea2f159356b225e45479a5c1f7278333", "message": "Fix deprecation warnings", "committedDate": "2020-02-13T21:31:45Z", "type": "commit"}, {"oid": "82c90ca15ce987db3ec2ee68cc9aa618c82b97c2", "url": "https://github.com/DSpace/DSpace/commit/82c90ca15ce987db3ec2ee68cc9aa618c82b97c2", "message": "Fix errorprone warning https://errorprone.info/bugpattern/StringSplitter", "committedDate": "2020-02-13T21:31:45Z", "type": "commit"}, {"oid": "14586eb59458de180e7f706ea6c6b99e65511d55", "url": "https://github.com/DSpace/DSpace/commit/14586eb59458de180e7f706ea6c6b99e65511d55", "message": "Fix errorprone warnings (UnusedVariable, out of order params)", "committedDate": "2020-02-13T21:31:46Z", "type": "commit"}, {"oid": "3ae9009dbd573c35e2bfed8d472a7e419670d31c", "url": "https://github.com/DSpace/DSpace/commit/3ae9009dbd573c35e2bfed8d472a7e419670d31c", "message": "Fixes to various errorprone warnings in tests", "committedDate": "2020-02-13T21:31:46Z", "type": "commit"}, {"oid": "db09a70d8f3f4866acf6676b64a30c776fb68fff", "url": "https://github.com/DSpace/DSpace/commit/db09a70d8f3f4866acf6676b64a30c776fb68fff", "message": "Fix deprecation of ObjectUtils.toString", "committedDate": "2020-02-13T21:31:46Z", "type": "commit"}, {"oid": "e69a63c5a7715a6528553ddc335d2aaad345861a", "url": "https://github.com/DSpace/DSpace/commit/e69a63c5a7715a6528553ddc335d2aaad345861a", "message": "Fix a number of errorprone warnings in tests.", "committedDate": "2020-02-13T21:31:47Z", "type": "commit"}, {"oid": "4f9fb7d339c2c628b287b0426a5b6845b3fbbe52", "url": "https://github.com/DSpace/DSpace/commit/4f9fb7d339c2c628b287b0426a5b6845b3fbbe52", "message": "Minor fix to test cleanup", "committedDate": "2020-02-13T21:31:47Z", "type": "commit"}, {"oid": "fb8ef5044bd9c1c21aff88b53bdf001e19aefc01", "url": "https://github.com/DSpace/DSpace/commit/fb8ef5044bd9c1c21aff88b53bdf001e19aefc01", "message": "Fix checkstyle errors", "committedDate": "2020-02-13T21:31:47Z", "type": "commit"}, {"oid": "fb8ef5044bd9c1c21aff88b53bdf001e19aefc01", "url": "https://github.com/DSpace/DSpace/commit/fb8ef5044bd9c1c21aff88b53bdf001e19aefc01", "message": "Fix checkstyle errors", "committedDate": "2020-02-13T21:31:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM2ODY1OA==", "url": "https://github.com/DSpace/DSpace/pull/2669#discussion_r380368658", "bodyText": "ObjectUtils.toString(null) returns \"\" while Objects.toString(null) returns \"null.  OK?  If not, Objects.toString(thing, \"\") should be an exact replacement.", "author": "mwoodiupui", "createdAt": "2020-02-17T21:17:14Z", "path": "dspace-api/src/main/java/org/dspace/authority/PersonAuthorityValue.java", "diffHunk": "@@ -140,8 +140,8 @@ public SolrInputDocument getSolrInputDocument() {\n     @Override\n     public void setValues(SolrDocument document) {\n         super.setValues(document);\n-        this.firstName = ObjectUtils.toString(document.getFieldValue(\"first_name\"));\n-        this.lastName = ObjectUtils.toString(document.getFieldValue(\"last_name\"));\n+        this.firstName = Objects.toString(document.getFieldValue(\"first_name\"));", "originalCommit": "fb8ef5044bd9c1c21aff88b53bdf001e19aefc01", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU5NDA4Mg==", "url": "https://github.com/DSpace/DSpace/pull/2669#discussion_r381594082", "bodyText": "This has been fixed now in 280ccac", "author": "tdonohue", "createdAt": "2020-02-19T22:52:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM2ODY1OA=="}], "type": "inlineReview", "revised_code": {"commit": "280ccac20cbd93a187e315dada42c5f55f2a710b", "chunk": "diff --git a/dspace-api/src/main/java/org/dspace/authority/PersonAuthorityValue.java b/dspace-api/src/main/java/org/dspace/authority/PersonAuthorityValue.java\nindex d8349227f..2ffacae2a 100644\n--- a/dspace-api/src/main/java/org/dspace/authority/PersonAuthorityValue.java\n+++ b/dspace-api/src/main/java/org/dspace/authority/PersonAuthorityValue.java\n\n@@ -140,8 +140,8 @@ public class PersonAuthorityValue extends AuthorityValue {\n     @Override\n     public void setValues(SolrDocument document) {\n         super.setValues(document);\n-        this.firstName = Objects.toString(document.getFieldValue(\"first_name\"));\n-        this.lastName = Objects.toString(document.getFieldValue(\"last_name\"));\n+        this.firstName = Objects.toString(document.getFieldValue(\"first_name\"), \"\");\n+        this.lastName = Objects.toString(document.getFieldValue(\"last_name\"), \"\");\n         nameVariants = new ArrayList<String>();\n         Collection<Object> document_name_variant = document.getFieldValues(\"name_variant\");\n         if (document_name_variant != null) {\n"}}, {"oid": "280ccac20cbd93a187e315dada42c5f55f2a710b", "url": "https://github.com/DSpace/DSpace/commit/280ccac20cbd93a187e315dada42c5f55f2a710b", "message": "Fix Objects.toString() calls to return empty string if null", "committedDate": "2020-02-19T22:51:28Z", "type": "commit"}]}