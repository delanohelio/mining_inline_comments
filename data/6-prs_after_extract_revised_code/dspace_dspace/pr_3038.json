{"pr_number": 3038, "pr_title": "Importing new csv with relationships", "pr_createdAt": "2020-10-30T10:16:56Z", "pr_url": "https://github.com/DSpace/DSpace/pull/3038", "timeline": [{"oid": "27a61733600bb3e707de271fddff20ea3afe3c10", "url": "https://github.com/DSpace/DSpace/commit/27a61733600bb3e707de271fddff20ea3afe3c10", "message": "[Task 71782] created support to check relationship.type metadata from the csv instead of the item which won't yet exist\n\nConflicts:\n\tdspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java\n\tdspace-api/src/test/resources/test-config.properties", "committedDate": "2020-10-30T09:05:24Z", "type": "commit"}, {"oid": "3df1ff5f70d1949f8be4dbcfaa975f739f732151", "url": "https://github.com/DSpace/DSpace/commit/3df1ff5f70d1949f8be4dbcfaa975f739f732151", "message": "[Task 71782] added test to the MetadataImport tests\n\nConflicts:\n\tdspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java", "committedDate": "2020-10-30T09:06:04Z", "type": "commit"}, {"oid": "e33cc4735dae2bd5fbfbc38547112e944e338670", "url": "https://github.com/DSpace/DSpace/commit/e33cc4735dae2bd5fbfbc38547112e944e338670", "message": "Fixed imports for MetadataImportTest", "committedDate": "2020-10-30T09:06:42Z", "type": "commit"}, {"oid": "eaa53c53b1281311212b87aefd0df1b4ac5ed884", "url": "https://github.com/DSpace/DSpace/commit/eaa53c53b1281311212b87aefd0df1b4ac5ed884", "message": "Rewrote MetadataImportTest with builders", "committedDate": "2020-10-30T10:12:40Z", "type": "commit"}, {"oid": "9d4151c22fac2acfc53a636b200ebfab5fb46b43", "url": "https://github.com/DSpace/DSpace/commit/9d4151c22fac2acfc53a636b200ebfab5fb46b43", "message": "deleting unused files", "committedDate": "2020-10-30T10:13:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDEyNjYwNA==", "url": "https://github.com/DSpace/DSpace/pull/3038#discussion_r520126604", "bodyText": "Small thing...this is an Integration Test, so it should be renamed MetadataImportIT.", "author": "tdonohue", "createdAt": "2020-11-09T21:19:16Z", "path": "dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java", "diffHunk": "@@ -10,63 +10,75 @@\n import static junit.framework.TestCase.assertEquals;\n import static junit.framework.TestCase.assertTrue;\n \n+import java.io.BufferedWriter;\n import java.io.File;\n+import java.io.FileOutputStream;\n+import java.io.OutputStreamWriter;\n+import java.sql.SQLException;\n+import java.util.List;\n \n import org.apache.commons.cli.ParseException;\n+import org.apache.commons.collections4.IteratorUtils;\n import org.apache.commons.lang3.StringUtils;\n-import org.dspace.AbstractIntegrationTest;\n+import org.dspace.AbstractIntegrationTestWithDatabase;\n import org.dspace.app.launcher.ScriptLauncher;\n import org.dspace.app.scripts.handler.impl.TestDSpaceRunnableHandler;\n+import org.dspace.builder.CollectionBuilder;\n+import org.dspace.builder.CommunityBuilder;\n+import org.dspace.builder.EntityTypeBuilder;\n+import org.dspace.builder.ItemBuilder;\n+import org.dspace.builder.RelationshipTypeBuilder;\n import org.dspace.content.Collection;\n import org.dspace.content.Community;\n+import org.dspace.content.EntityType;\n import org.dspace.content.Item;\n+import org.dspace.content.Relationship;\n import org.dspace.content.factory.ContentServiceFactory;\n-import org.dspace.content.service.CollectionService;\n-import org.dspace.content.service.CommunityService;\n import org.dspace.content.service.ItemService;\n+import org.dspace.content.service.RelationshipService;\n+import org.dspace.eperson.factory.EPersonServiceFactory;\n+import org.dspace.eperson.service.EPersonService;\n import org.dspace.scripts.DSpaceRunnable;\n import org.dspace.scripts.configuration.ScriptConfiguration;\n import org.dspace.scripts.factory.ScriptServiceFactory;\n import org.dspace.scripts.service.ScriptService;\n-import org.junit.Rule;\n+import org.junit.Before;\n import org.junit.Test;\n-import org.junit.rules.ExpectedException;\n \n-public class MetadataImportTest extends AbstractIntegrationTest {\n+public class MetadataImportTest extends AbstractIntegrationTestWithDatabase {", "originalCommit": "9d4151c22fac2acfc53a636b200ebfab5fb46b43", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a1cc44ebac859ab622a3d526fb90bcfeeb938698", "chunk": "diff --git a/dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java b/dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java\nsimilarity index 99%\nrename from dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java\nrename to dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java\nindex 74c71037e..3dd229f06 100644\n--- a/dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java\n+++ b/dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java\n\n@@ -45,7 +45,7 @@ import org.dspace.scripts.service.ScriptService;\n import org.junit.Before;\n import org.junit.Test;\n \n-public class MetadataImportTest extends AbstractIntegrationTestWithDatabase {\n+public class MetadataImportIT extends AbstractIntegrationTestWithDatabase {\n \n     private ItemService itemService\n         = ContentServiceFactory.getInstance().getItemService();\n"}}, {"oid": "a1cc44ebac859ab622a3d526fb90bcfeeb938698", "url": "https://github.com/DSpace/DSpace/commit/a1cc44ebac859ab622a3d526fb90bcfeeb938698", "message": "Renamed MetadataImportTest to MetadataImportIT to better reflect that it is an Integration Test class", "committedDate": "2020-11-10T13:43:53Z", "type": "commit"}]}