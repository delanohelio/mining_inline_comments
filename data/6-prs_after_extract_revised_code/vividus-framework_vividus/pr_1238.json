{"pr_number": 1238, "pr_title": "[extension-selenium] Add verification of visible attribute on iOS native apps", "pr_createdAt": "2020-12-14T15:09:14Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/1238", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ3MDIyNw==", "url": "https://github.com/vividus-framework/vividus/pull/1238#discussion_r542470227", "bodyText": "Boolean.parseBoolean ?", "author": "valfirst", "createdAt": "2020-12-14T15:24:10Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java", "diffHunk": "@@ -17,13 +17,30 @@\n package org.vividus.ui.mobile.action;\n \n import org.openqa.selenium.WebElement;\n+import org.vividus.selenium.manager.GenericWebDriverManager;\n import org.vividus.ui.action.ElementActions;\n \n public class MobileAppElementActions implements ElementActions\n {\n+    private final GenericWebDriverManager genericWebDriverManager;\n+\n+    public MobileAppElementActions(GenericWebDriverManager genericWebDriverManager)\n+    {\n+        this.genericWebDriverManager = genericWebDriverManager;\n+    }\n+\n     @Override\n     public String getElementText(WebElement element)\n     {\n         return element.getText();\n     }\n+\n+    @Override\n+    public boolean isElementVisible(WebElement element)\n+    {\n+        boolean visible = element.isDisplayed();\n+        return !visible && genericWebDriverManager.isIOSNativeApp()\n+                ? Boolean.valueOf(element.getAttribute(\"visible\"))", "originalCommit": "d319be7c6ce4a2417ac2bec639f1fa90091a3fad", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bea9bd6673de350bc7c0956cb6315453eb244c8d", "chunk": "diff --git a/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java b/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java\nindex 16dc8e53..3d97332f 100644\n--- a/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java\n+++ b/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java\n\n@@ -38,9 +38,7 @@ public class MobileAppElementActions implements ElementActions\n     @Override\n     public boolean isElementVisible(WebElement element)\n     {\n-        boolean visible = element.isDisplayed();\n-        return !visible && genericWebDriverManager.isIOSNativeApp()\n-                ? Boolean.valueOf(element.getAttribute(\"visible\"))\n-                : visible; \n+        return element.isDisplayed()\n+                || (genericWebDriverManager.isIOSNativeApp() && Boolean.parseBoolean(element.getAttribute(\"visible\")));\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ3MTE5Nw==", "url": "https://github.com/vividus-framework/vividus/pull/1238#discussion_r542471197", "bodyText": "return visible || (genericWebDriverManager.isIOSNativeApp() && Boolean. parseBoolean(...))", "author": "valfirst", "createdAt": "2020-12-14T15:25:16Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java", "diffHunk": "@@ -17,13 +17,30 @@\n package org.vividus.ui.mobile.action;\n \n import org.openqa.selenium.WebElement;\n+import org.vividus.selenium.manager.GenericWebDriverManager;\n import org.vividus.ui.action.ElementActions;\n \n public class MobileAppElementActions implements ElementActions\n {\n+    private final GenericWebDriverManager genericWebDriverManager;\n+\n+    public MobileAppElementActions(GenericWebDriverManager genericWebDriverManager)\n+    {\n+        this.genericWebDriverManager = genericWebDriverManager;\n+    }\n+\n     @Override\n     public String getElementText(WebElement element)\n     {\n         return element.getText();\n     }\n+\n+    @Override\n+    public boolean isElementVisible(WebElement element)\n+    {\n+        boolean visible = element.isDisplayed();\n+        return !visible && genericWebDriverManager.isIOSNativeApp()\n+                ? Boolean.valueOf(element.getAttribute(\"visible\"))\n+                : visible; ", "originalCommit": "d319be7c6ce4a2417ac2bec639f1fa90091a3fad", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bea9bd6673de350bc7c0956cb6315453eb244c8d", "chunk": "diff --git a/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java b/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java\nindex 16dc8e53..3d97332f 100644\n--- a/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java\n+++ b/vividus-plugin-mobile-app/src/main/java/org/vividus/ui/mobile/action/MobileAppElementActions.java\n\n@@ -38,9 +38,7 @@ public class MobileAppElementActions implements ElementActions\n     @Override\n     public boolean isElementVisible(WebElement element)\n     {\n-        boolean visible = element.isDisplayed();\n-        return !visible && genericWebDriverManager.isIOSNativeApp()\n-                ? Boolean.valueOf(element.getAttribute(\"visible\"))\n-                : visible; \n+        return element.isDisplayed()\n+                || (genericWebDriverManager.isIOSNativeApp() && Boolean.parseBoolean(element.getAttribute(\"visible\")));\n     }\n }\n"}}, {"oid": "bea9bd6673de350bc7c0956cb6315453eb244c8d", "url": "https://github.com/vividus-framework/vividus/commit/bea9bd6673de350bc7c0956cb6315453eb244c8d", "message": "[extension-selenium] Add verification of visible attribute on iOS native apps", "committedDate": "2020-12-14T18:27:13Z", "type": "forcePushed"}, {"oid": "d29d2cd5dbb93f4636259fcb9b2ef84629b3e6b7", "url": "https://github.com/vividus-framework/vividus/commit/d29d2cd5dbb93f4636259fcb9b2ef84629b3e6b7", "message": "[extension-selenium] Add verification of visible attribute on iOS native apps", "committedDate": "2020-12-14T20:22:10Z", "type": "forcePushed"}, {"oid": "fdb4bdcc325cb216384da04cdade64b4e524ba73", "url": "https://github.com/vividus-framework/vividus/commit/fdb4bdcc325cb216384da04cdade64b4e524ba73", "message": "[extension-selenium] Add verification of visible attribute on iOS native apps", "committedDate": "2020-12-15T09:48:31Z", "type": "commit"}, {"oid": "fdb4bdcc325cb216384da04cdade64b4e524ba73", "url": "https://github.com/vividus-framework/vividus/commit/fdb4bdcc325cb216384da04cdade64b4e524ba73", "message": "[extension-selenium] Add verification of visible attribute on iOS native apps", "committedDate": "2020-12-15T09:48:31Z", "type": "forcePushed"}]}