{"pr_number": 293, "pr_title": "Add step for saving examples table to variable as list of maps", "pr_createdAt": "2020-02-04T14:44:10Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/293", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDcyMDU1MA==", "url": "https://github.com/vividus-framework/vividus/pull/293#discussion_r374720550", "bodyText": "@When(\"I initialize $scopes variable `$variableName` with values:$examplesTable\")\npublic void initVariableWithGivenValues(Set<VariableScope> scopes, String variableName,\n            ExamplesTable examplesTable)\n...", "author": "valfirst", "createdAt": "2020-02-04T14:58:51Z", "path": "vividus/src/main/java/org/vividus/bdd/steps/BddVariableSteps.java", "diffHunk": "@@ -229,6 +231,21 @@ public void saveVariableToFile(String pathname, String fileContent) throws IOExc\n         FileUtils.writeStringToFile(new File(pathname), fileContent, StandardCharsets.UTF_8);\n     }\n \n+    /**\n+     * Saves examples table as list of maps to variable\n+     * @param scope NEXT_BATCHES, STORY, SCENARIO, STEP\n+     * @param variableName A name of variable to assign the values\n+     * @param examplesTable A table for saving in variable\n+     */\n+    @When(\"I initialize the $scope variable `$variableName` with values:$examplesTable\")\n+    public void saveExamplesTableToVariableAsListOfMaps(VariableScope scope, String variableName,\n+            ExamplesTable examplesTable)", "originalCommit": "d65488117263b1103c15f17a2f16e648c7cf9e58", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1f0c49dcc6453319ebf8647a81f3b54d8340b85b", "chunk": "diff --git a/vividus/src/main/java/org/vividus/bdd/steps/BddVariableSteps.java b/vividus/src/main/java/org/vividus/bdd/steps/BddVariableSteps.java\nindex 894feb5ad..040758a9b 100644\n--- a/vividus/src/main/java/org/vividus/bdd/steps/BddVariableSteps.java\n+++ b/vividus/src/main/java/org/vividus/bdd/steps/BddVariableSteps.java\n\n@@ -233,17 +233,24 @@ public class BddVariableSteps\n \n     /**\n      * Saves examples table as list of maps to variable\n-     * @param scope NEXT_BATCHES, STORY, SCENARIO, STEP\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step,\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario,\n+     * <li><b>STORY</b> - the variable will be available within the whole story,\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n      * @param variableName A name of variable to assign the values\n      * @param examplesTable A table for saving in variable\n      */\n-    @When(\"I initialize the $scope variable `$variableName` with values:$examplesTable\")\n-    public void saveExamplesTableToVariableAsListOfMaps(VariableScope scope, String variableName,\n-            ExamplesTable examplesTable)\n+    @When(\"I initialize $scopes variable `$variableName` with values:$examplesTable\")\n+    public void initVariableWithGivenValues(Set<VariableScope> scopes, String variableName,\n+                ExamplesTable examplesTable)\n     {\n         List<Map<String, String>> listOfMaps = examplesTable.getRowsAsParameters()\n                 .stream().map(Parameters::values).collect(Collectors.toList());\n-        bddVariableContext.putVariable(scope, variableName, listOfMaps);\n+        bddVariableContext.putVariable(scopes, variableName, listOfMaps);\n     }\n \n     private boolean compareListsOfMaps(Object variable1, Object variable2)\n"}}, {"oid": "1f0c49dcc6453319ebf8647a81f3b54d8340b85b", "url": "https://github.com/vividus-framework/vividus/commit/1f0c49dcc6453319ebf8647a81f3b54d8340b85b", "message": "Add step for saving examples table to variable as list of maps", "committedDate": "2020-02-05T07:32:58Z", "type": "forcePushed"}, {"oid": "ef4bf009b649fbe1180852e3177eb723dd5a20ef", "url": "https://github.com/vividus-framework/vividus/commit/ef4bf009b649fbe1180852e3177eb723dd5a20ef", "message": "Add step for saving examples table to variable as list of maps", "committedDate": "2020-02-05T08:13:02Z", "type": "forcePushed"}, {"oid": "18f0e25ed01ea272e64da387c838b2b4420600c9", "url": "https://github.com/vividus-framework/vividus/commit/18f0e25ed01ea272e64da387c838b2b4420600c9", "message": "Add step for saving examples table to variable as list of maps", "committedDate": "2020-02-05T08:15:37Z", "type": "commit"}, {"oid": "18f0e25ed01ea272e64da387c838b2b4420600c9", "url": "https://github.com/vividus-framework/vividus/commit/18f0e25ed01ea272e64da387c838b2b4420600c9", "message": "Add step for saving examples table to variable as list of maps", "committedDate": "2020-02-05T08:15:37Z", "type": "forcePushed"}]}