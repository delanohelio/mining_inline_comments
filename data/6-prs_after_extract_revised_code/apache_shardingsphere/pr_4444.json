{"pr_number": 4444, "pr_title": "#4255, column definition information for mysql_stmt_prepare", "pr_createdAt": "2020-02-24T09:09:06Z", "pr_url": "https://github.com/apache/shardingsphere/pull/4444", "timeline": [{"oid": "6adb9d053a19560c3f104e34489ef67eff643059", "url": "https://github.com/apache/shardingsphere/commit/6adb9d053a19560c3f104e34489ef67eff643059", "message": "#4255, column definition information for mysql_stmt_prepare", "committedDate": "2020-02-24T09:06:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzE5OTUxMQ==", "url": "https://github.com/apache/shardingsphere/pull/4444#discussion_r383199511", "bodyText": "Replace if else return and assign statement with ternary operator in priority", "author": "terrymanu", "createdAt": "2020-02-24T10:57:26Z", "path": "sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java", "diffHunk": "@@ -48,26 +49,33 @@ public MySQLComStmtPrepareExecutor(final MySQLComStmtPreparePacket packet, final\n         logicSchema = backendConnection.getLogicSchema();\n     }\n     \n+    private int getColumnsCount(final SQLStatement sqlStatement) {\n+        if (sqlStatement instanceof SelectStatement) {\n+            return ((SelectStatement) sqlStatement).getProjections().getProjections().size();\n+        }\n+        return 0;", "originalCommit": "6adb9d053a19560c3f104e34489ef67eff643059", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d21c5f5466c308d24801b945ee0860ead635109", "chunk": "diff --git a/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java b/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java\nindex 17ea19e5a9..ccb7504083 100644\n--- a/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java\n+++ b/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java\n\n@@ -50,10 +50,7 @@ public final class MySQLComStmtPrepareExecutor implements CommandExecutor {\n     }\n     \n     private int getColumnsCount(final SQLStatement sqlStatement) {\n-        if (sqlStatement instanceof SelectStatement) {\n-            return ((SelectStatement) sqlStatement).getProjections().getProjections().size();\n-        }\n-        return 0;\n+        return (sqlStatement instanceof SelectStatement) ? ((SelectStatement) sqlStatement).getProjections().getProjections().size() : 0;\n     }\n     \n     @Override\n"}}, {"oid": "1d21c5f5466c308d24801b945ee0860ead635109", "url": "https://github.com/apache/shardingsphere/commit/1d21c5f5466c308d24801b945ee0860ead635109", "message": "#4255, for comments", "committedDate": "2020-02-24T11:30:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI4NzIyOA==", "url": "https://github.com/apache/shardingsphere/pull/4444#discussion_r383287228", "bodyText": "unnecessary brackets of sqlStatement instanceof SelectStatement", "author": "terrymanu", "createdAt": "2020-02-24T14:14:20Z", "path": "sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java", "diffHunk": "@@ -48,26 +49,30 @@ public MySQLComStmtPrepareExecutor(final MySQLComStmtPreparePacket packet, final\n         logicSchema = backendConnection.getLogicSchema();\n     }\n     \n+    private int getColumnsCount(final SQLStatement sqlStatement) {\n+        return (sqlStatement instanceof SelectStatement) ? ((SelectStatement) sqlStatement).getProjections().getProjections().size() : 0;", "originalCommit": "1d21c5f5466c308d24801b945ee0860ead635109", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "73512d275c3dd3951ade8762921c2f828faba6bd", "chunk": "diff --git a/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java b/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java\nindex ccb7504083..9bc06dea4c 100644\n--- a/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java\n+++ b/sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/command/query/binary/prepare/MySQLComStmtPrepareExecutor.java\n\n@@ -50,7 +50,7 @@ public final class MySQLComStmtPrepareExecutor implements CommandExecutor {\n     }\n     \n     private int getColumnsCount(final SQLStatement sqlStatement) {\n-        return (sqlStatement instanceof SelectStatement) ? ((SelectStatement) sqlStatement).getProjections().getProjections().size() : 0;\n+        return sqlStatement instanceof SelectStatement ? ((SelectStatement) sqlStatement).getProjections().getProjections().size() : 0;\n     }\n     \n     @Override\n"}}, {"oid": "73512d275c3dd3951ade8762921c2f828faba6bd", "url": "https://github.com/apache/shardingsphere/commit/73512d275c3dd3951ade8762921c2f828faba6bd", "message": "#4255, for comments", "committedDate": "2020-02-24T14:22:32Z", "type": "commit"}]}