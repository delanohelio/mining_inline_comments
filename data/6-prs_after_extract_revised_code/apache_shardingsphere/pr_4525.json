{"pr_number": 4525, "pr_title": "#4482 Correct the `DataTypeName` for PostgreSQL", "pr_createdAt": "2020-02-29T03:58:24Z", "pr_url": "https://github.com/apache/shardingsphere/pull/4525", "timeline": [{"oid": "95779d7cfb6962da9aa1439fa956fded35305b8b", "url": "https://github.com/apache/shardingsphere/commit/95779d7cfb6962da9aa1439fa956fded35305b8b", "message": "#4482 Correct the `DataTypeName` for PostgreSQL", "committedDate": "2020-02-29T03:50:48Z", "type": "commit"}, {"oid": "88f3a0c4beff6ad87cde300959e84fac9e4994b5", "url": "https://github.com/apache/shardingsphere/commit/88f3a0c4beff6ad87cde300959e84fac9e4994b5", "message": "merge master & resolve conflicts", "committedDate": "2020-02-29T04:38:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxNzQxMg==", "url": "https://github.com/apache/shardingsphere/pull/4525#discussion_r386017412", "bodyText": "Here is a better way,\nif (null != doublePrecisionContext) {\n    return visit(ctx.doublePrecision());\n}\n\n@Override\npublic final ASTNode visitDoublePrecision(final DoublePrecisionContext ctx) {\n    return new KeywordValue(xxxx);\n}", "author": "tristaZero", "createdAt": "2020-02-29T10:07:35Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java", "diffHunk": "@@ -460,6 +461,14 @@ public final ASTNode visitCaseExpression(final CaseExpressionContext ctx) {\n     \n     @Override\n     public final ASTNode visitDataTypeName(final DataTypeNameContext ctx) {\n+        DoublePrecisionContext doublePrecisionContext = ctx.doublePrecision();\n+        if (null != doublePrecisionContext) {", "originalCommit": "88f3a0c4beff6ad87cde300959e84fac9e4994b5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8cab63415dd8ce8b424c59384b55172d4d4b37d7", "chunk": "diff --git a/shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java b/shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java\nindex 2671609745..ff324c94a1 100644\n--- a/shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java\n+++ b/shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java\n\n@@ -461,10 +460,6 @@ public abstract class PostgreSQLVisitor extends PostgreSQLStatementBaseVisitor<A\n     \n     @Override\n     public final ASTNode visitDataTypeName(final DataTypeNameContext ctx) {\n-        DoublePrecisionContext doublePrecisionContext = ctx.doublePrecision();\n-        if (null != doublePrecisionContext) {\n-            return new KeywordValue(String.format(\"%s %s\", doublePrecisionContext.getChild(0).getText(), doublePrecisionContext.getChild(1).getText()));\n-        }\n         IdentifierContext identifierContext = ctx.identifier();\n         if (null != identifierContext) {\n             return new KeywordValue(identifierContext.getText());\n"}}, {"oid": "8cab63415dd8ce8b424c59384b55172d4d4b37d7", "url": "https://github.com/apache/shardingsphere/commit/8cab63415dd8ce8b424c59384b55172d4d4b37d7", "message": "remove doublePrecision and add keyword DOUBLEPRECISION in PostgreSQLKeyword.g4", "committedDate": "2020-02-29T11:54:29Z", "type": "commit"}]}