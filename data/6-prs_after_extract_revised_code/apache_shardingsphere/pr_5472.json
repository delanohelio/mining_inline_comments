{"pr_number": 5472, "pr_title": "Fixes #5467", "pr_createdAt": "2020-05-08T09:41:12Z", "pr_url": "https://github.com/apache/shardingsphere/pull/5472", "timeline": [{"oid": "0674be2c4729a96aa09a780b753174975c625b28", "url": "https://github.com/apache/shardingsphere/commit/0674be2c4729a96aa09a780b753174975c625b28", "message": "fix NPE", "committedDate": "2020-05-08T09:39:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA3NDAzOA==", "url": "https://github.com/apache/shardingsphere/pull/5472#discussion_r422074038", "bodyText": "Object => BigDecimal\nGenerally we use 'result' to naming the return item in a function. Actually we don't return the 'result' here.", "author": "tuohai666", "createdAt": "2020-05-08T10:43:00Z", "path": "shardingsphere-underlying/shardingsphere-executor/src/main/java/org/apache/shardingsphere/underlying/executor/sql/execute/jdbc/queryresult/MemoryQueryResult.java", "diffHunk": "@@ -81,7 +81,8 @@ private Object getRowValue(final ResultSet resultSet, final int columnIndex) thr\n                 if (metaData.isSigned(columnIndex)) {\n                     return resultSet.getLong(columnIndex);\n                 }\n-                return resultSet.getBigDecimal(columnIndex).toBigInteger();\n+                Object result = resultSet.getBigDecimal(columnIndex);", "originalCommit": "0674be2c4729a96aa09a780b753174975c625b28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA3NDUwNQ==", "url": "https://github.com/apache/shardingsphere/pull/5472#discussion_r422074505", "bodyText": "Maybe result => bigDecimal", "author": "tuohai666", "createdAt": "2020-05-08T10:44:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA3NDAzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0MzE2Mw==", "url": "https://github.com/apache/shardingsphere/pull/5472#discussion_r422443163", "bodyText": "thanks!", "author": "DreamerBear", "createdAt": "2020-05-09T02:29:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA3NDAzOA=="}], "type": "inlineReview", "revised_code": {"commit": "0dd9bcee897fffe5c0aee3b565b7537fbab9ddb4", "chunk": "diff --git a/shardingsphere-underlying/shardingsphere-executor/src/main/java/org/apache/shardingsphere/underlying/executor/sql/execute/jdbc/queryresult/MemoryQueryResult.java b/shardingsphere-underlying/shardingsphere-executor/src/main/java/org/apache/shardingsphere/underlying/executor/sql/execute/jdbc/queryresult/MemoryQueryResult.java\nindex 56f651bee0..2f5ac4a1c4 100644\n--- a/shardingsphere-underlying/shardingsphere-executor/src/main/java/org/apache/shardingsphere/underlying/executor/sql/execute/jdbc/queryresult/MemoryQueryResult.java\n+++ b/shardingsphere-underlying/shardingsphere-executor/src/main/java/org/apache/shardingsphere/underlying/executor/sql/execute/jdbc/queryresult/MemoryQueryResult.java\n\n@@ -81,8 +82,8 @@ public final class MemoryQueryResult implements QueryResult {\n                 if (metaData.isSigned(columnIndex)) {\n                     return resultSet.getLong(columnIndex);\n                 }\n-                Object result = resultSet.getBigDecimal(columnIndex);\n-                return result == null ? null : result.toBigInteger();\n+                BigDecimal bigDecimal = resultSet.getBigDecimal(columnIndex);\n+                return bigDecimal == null ? null : bigDecimal.toBigInteger();\n             case Types.NUMERIC:\n             case Types.DECIMAL:\n                 return resultSet.getBigDecimal(columnIndex);\n"}}, {"oid": "0dd9bcee897fffe5c0aee3b565b7537fbab9ddb4", "url": "https://github.com/apache/shardingsphere/commit/0dd9bcee897fffe5c0aee3b565b7537fbab9ddb4", "message": "Update MemoryQueryResult.java", "committedDate": "2020-05-09T02:25:59Z", "type": "commit"}]}