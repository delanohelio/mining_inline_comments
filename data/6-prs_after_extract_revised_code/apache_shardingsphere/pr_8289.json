{"pr_number": 8289, "pr_title": "Update the sub class ShardingCTLShowBackendHandler of TextProtocolBackendHandler ", "pr_createdAt": "2020-11-22T08:47:15Z", "pr_url": "https://github.com/apache/shardingsphere/pull/8289", "timeline": [{"oid": "1af0b6500d3ae713fd11bfa1aef6fee8ed7211c4", "url": "https://github.com/apache/shardingsphere/commit/1af0b6500d3ae713fd11bfa1aef6fee8ed7211c4", "message": "update the sub class ShardingCTLHintBackendHandler of TextProtocolBackendHandler", "committedDate": "2020-11-22T08:21:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNzA1NA==", "url": "https://github.com/apache/shardingsphere/pull/8289#discussion_r528327054", "bodyText": "why add a constructor?", "author": "kimmking", "createdAt": "2020-11-22T12:17:02Z", "path": "shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java", "diffHunk": "@@ -43,7 +43,10 @@\n     private final BackendConnection backendConnection;\n     \n     private HintCommandExecutor hintCommandExecutor;\n-    \n+\n+    public ShardingCTLHintBackendHandler() {", "originalCommit": "1c557fd380fd4d3c7ebd65d66b127003efc2b753", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQzODUxMw==", "url": "https://github.com/apache/shardingsphere/pull/8289#discussion_r528438513", "bodyText": "Sorry,this was a mistake,Do I have a chance to resubmit it again?", "author": "guojia1698", "createdAt": "2020-11-23T01:37:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNzA1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU5ODc1Nw==", "url": "https://github.com/apache/shardingsphere/pull/8289#discussion_r528598757", "bodyText": "Yes, just git push", "author": "terrymanu", "createdAt": "2020-11-23T10:22:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyNzA1NA=="}], "type": "inlineReview", "revised_code": {"commit": "b3252e3fe2d9d5fd0b02ae74363958b537fec3de", "chunk": "diff --git a/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java b/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java\nindex bce7766a69..10fbf9055a 100644\n--- a/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java\n+++ b/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java\n\n@@ -44,8 +44,6 @@ public final class ShardingCTLHintBackendHandler implements TextProtocolBackendH\n     \n     private HintCommandExecutor hintCommandExecutor;\n \n-    public ShardingCTLHintBackendHandler() {\n-    }\n \n     @SuppressWarnings(\"unchecked\")\n     @Override\n"}}, {"oid": "b3252e3fe2d9d5fd0b02ae74363958b537fec3de", "url": "https://github.com/apache/shardingsphere/commit/b3252e3fe2d9d5fd0b02ae74363958b537fec3de", "message": "Update the sub class ShardingCTLShowBackendHandler of TextProtocolBackendHandler", "committedDate": "2020-11-23T11:47:11Z", "type": "commit"}, {"oid": "b3252e3fe2d9d5fd0b02ae74363958b537fec3de", "url": "https://github.com/apache/shardingsphere/commit/b3252e3fe2d9d5fd0b02ae74363958b537fec3de", "message": "Update the sub class ShardingCTLShowBackendHandler of TextProtocolBackendHandler", "committedDate": "2020-11-23T11:47:11Z", "type": "forcePushed"}, {"oid": "1ef0314e64502a2ec0316a7a996d391230368f56", "url": "https://github.com/apache/shardingsphere/commit/1ef0314e64502a2ec0316a7a996d391230368f56", "message": "update the sub class ShardingCTLHintBackendHandler of TextProtocolBackendHandler", "committedDate": "2020-11-23T22:33:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTIwMTc5OQ==", "url": "https://github.com/apache/shardingsphere/pull/8289#discussion_r529201799", "bodyText": "keep four blanks", "author": "kimmking", "createdAt": "2020-11-24T04:53:11Z", "path": "shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java", "diffHunk": "@@ -43,7 +43,7 @@\n     private final BackendConnection backendConnection;\n     \n     private HintCommandExecutor hintCommandExecutor;\n-    ", "originalCommit": "1ef0314e64502a2ec0316a7a996d391230368f56", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e907bb783f00c40ce5ed01b0d750256a6e1e2fc4", "chunk": "diff --git a/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java b/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java\nindex 47f241fd47..cf1e3b9c3e 100644\n--- a/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java\n+++ b/shardingsphere-proxy/shardingsphere-proxy-backend/src/main/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandler.java\n\n@@ -43,7 +43,7 @@ public final class ShardingCTLHintBackendHandler implements TextProtocolBackendH\n     private final BackendConnection backendConnection;\n     \n     private HintCommandExecutor hintCommandExecutor;\n-\n+    \n     @SuppressWarnings(\"unchecked\")\n     @Override\n     public BackendResponse execute() {\n"}}, {"oid": "e907bb783f00c40ce5ed01b0d750256a6e1e2fc4", "url": "https://github.com/apache/shardingsphere/commit/e907bb783f00c40ce5ed01b0d750256a6e1e2fc4", "message": "Update ShardingCTLHintBackendHandler.java", "committedDate": "2020-11-24T09:48:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYwMDQ1NQ==", "url": "https://github.com/apache/shardingsphere/pull/8289#discussion_r529600455", "bodyText": "Cloud you use Iterator instead of cast list?", "author": "terrymanu", "createdAt": "2020-11-24T14:47:13Z", "path": "shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java", "diffHunk": "@@ -141,7 +141,7 @@ public void assertShowStatus() throws SQLException {\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(0).getColumnLabel(), is(\"primary_only\"));\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(1).getColumnLabel(), is(\"sharding_type\"));\n         assertTrue(defaultHintBackendHandler.next());\n-        List<Object> defaultRowData = defaultHintBackendHandler.getRowData();\n+        List<Object> defaultRowData = (List<Object>) defaultHintBackendHandler.getRowData();", "originalCommit": "e907bb783f00c40ce5ed01b0d750256a6e1e2fc4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cceea7729523050568d5eb5ba45dad05cad7a1ff", "chunk": "diff --git a/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java b/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java\nindex 678614dbe0..c233a9495d 100644\n--- a/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java\n+++ b/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java\n\n@@ -142,8 +142,9 @@ public final class ShardingCTLHintBackendHandlerTest {\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(1).getColumnLabel(), is(\"sharding_type\"));\n         assertTrue(defaultHintBackendHandler.next());\n         List<Object> defaultRowData = (List<Object>) defaultHintBackendHandler.getRowData();\n-        assertThat(defaultRowData.get(0).toString(), is(\"false\"));\n-        assertThat(defaultRowData.get(1).toString(), is(\"databases_tables\"));\n+        Iterator<Object> iterator = defaultRowData.iterator();\n+        assertThat(iterator.next().toString(), is(\"false\"));\n+        assertThat(iterator.next().toString(), is(\"databases_tables\"));\n         assertFalse(defaultHintBackendHandler.next());\n         String setPrimaryOnlySQL = \"sctl:hint set primary_only=true\";\n         String setDatabaseOnlySQL = \"sctl:hint set DatabaseShardingValue=100\";\n"}}, {"oid": "cceea7729523050568d5eb5ba45dad05cad7a1ff", "url": "https://github.com/apache/shardingsphere/commit/cceea7729523050568d5eb5ba45dad05cad7a1ff", "message": "Update ShardingCTLHintBackendHandlerTest.java", "committedDate": "2020-11-26T08:31:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg2MjA3NQ==", "url": "https://github.com/apache/shardingsphere/pull/8289#discussion_r530862075", "bodyText": "remove redundant variable", "author": "kimmking", "createdAt": "2020-11-26T08:48:43Z", "path": "shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java", "diffHunk": "@@ -176,10 +178,11 @@ public void assertShowTableStatus() throws SQLException, NoSuchFieldException, I\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(1).getColumnLabel(), is(\"database_sharding_values\"));\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(2).getColumnLabel(), is(\"table_sharding_values\"));\n         assertTrue(defaultHintBackendHandler.next());\n-        List<Object> defaultRowData = defaultHintBackendHandler.getRowData();\n-        assertThat(defaultRowData.get(0).toString(), is(\"user\"));\n-        assertThat(defaultRowData.get(1).toString(), is(\"\"));\n-        assertThat(defaultRowData.get(2).toString(), is(\"\"));\n+        List<Object> defaultRowData = (List<Object>) defaultHintBackendHandler.getRowData();", "originalCommit": "cceea7729523050568d5eb5ba45dad05cad7a1ff", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e107a0e3ea93d7b3a7fd8ff955d58bf697c0a21f", "chunk": "diff --git a/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java b/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java\nindex c233a9495d..8f8239e440 100644\n--- a/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java\n+++ b/shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/text/sctl/hint/ShardingCTLHintBackendHandlerTest.java\n\n@@ -178,11 +176,10 @@ public final class ShardingCTLHintBackendHandlerTest {\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(1).getColumnLabel(), is(\"database_sharding_values\"));\n         assertThat(((QueryResponse) backendResponse).getQueryHeaders().get(2).getColumnLabel(), is(\"table_sharding_values\"));\n         assertTrue(defaultHintBackendHandler.next());\n-        List<Object> defaultRowData = (List<Object>) defaultHintBackendHandler.getRowData();\n-        Iterator<Object> iterator = defaultRowData.iterator();\n-        assertThat(iterator.next().toString(), is(\"user\"));\n-        assertThat(iterator.next().toString(), is(\"\"));\n-        assertThat(iterator.next().toString(), is(\"\"));\n+        Iterator<Object> defaultRowData = defaultHintBackendHandler.getRowData().iterator();\n+        assertThat(defaultRowData.next().toString(), is(\"user\"));\n+        assertThat(defaultRowData.next().toString(), is(\"\"));\n+        assertThat(defaultRowData.next().toString(), is(\"\"));\n         assertFalse(defaultHintBackendHandler.next());\n         String addDatabaseShardingValueSQL = \"sctl:hint addDatabaseshardingvalue user=100\";\n         String addTableShardingValueSQL1 = \"sctl:hint addTableshardingvalue user=200\";\n"}}, {"oid": "e107a0e3ea93d7b3a7fd8ff955d58bf697c0a21f", "url": "https://github.com/apache/shardingsphere/commit/e107a0e3ea93d7b3a7fd8ff955d58bf697c0a21f", "message": "Update ShardingCTLHintBackendHandlerTest.java", "committedDate": "2020-11-26T08:58:18Z", "type": "commit"}, {"oid": "0bb37611cabf669f99034a5734766fb7659ae0fa", "url": "https://github.com/apache/shardingsphere/commit/0bb37611cabf669f99034a5734766fb7659ae0fa", "message": "Update ShardingCTLHintBackendHandlerTest.java", "committedDate": "2020-11-26T13:37:18Z", "type": "commit"}, {"oid": "d910e09d981e94cd93e8f2a065775be9770e3f63", "url": "https://github.com/apache/shardingsphere/commit/d910e09d981e94cd93e8f2a065775be9770e3f63", "message": "Update ShardingCTLHintBackendHandlerTest.java", "committedDate": "2020-11-27T01:39:15Z", "type": "commit"}]}