{"pr_number": 9344, "pr_title": "avoid crash when trying to log a PM cache as basic member", "pr_createdAt": "2020-11-02T21:27:57Z", "pr_url": "https://github.com/cgeo/cgeo/pull/9344", "timeline": [{"oid": "e491cabf7f1880f26a51e3f347eb36500bcbfe0c", "url": "https://github.com/cgeo/cgeo/commit/e491cabf7f1880f26a51e3f347eb36500bcbfe0c", "message": "parse PM only caches", "committedDate": "2020-11-03T14:23:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYwMzY2OQ==", "url": "https://github.com/cgeo/cgeo/pull/9344#discussion_r517603669", "bodyText": "This will not work when \"<\" is part of the cache name.\nI tested with creating such cache name - this was possible.\nWhat about <h1 class=\"heading-3\">(.+)<\\/h1> ?\n(plus extra \\ of cause)\nInteresting question: is or was a cache name eg. head </h1> or <h1> not? possible?\nAt least today the html tags were filtered out on my tests creating such cache name.", "author": "bekuno", "createdAt": "2020-11-04T20:11:50Z", "path": "main/src/cgeo/geocaching/connector/gc/GCConstants.java", "diffHunk": "@@ -168,6 +168,13 @@\n \n     static final String STRING_PREMIUMONLY_2 = \"Sorry, the owner of this listing has made it viewable to Premium Members only.\";\n     static final String STRING_PREMIUMONLY_1 = \"class=\\\"illustration lock-icon\\\"\";\n+    static final Pattern PATTERN_PREMIUMONLY_CACHETYPE = Pattern.compile(\"/app/ui-icons/sprites/cache-types\\\\.svg#icon\\\\-([^\\\"\\\\-]+)-?([^\\\"]+)?\");\n+    static final Pattern PATTERN_PREMIUMONLY_CACHENAME = Pattern.compile(\"<h1 class=\\\"heading\\\\-3\\\">([^<]+)\");", "originalCommit": "e491cabf7f1880f26a51e3f347eb36500bcbfe0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk4Mzg0MQ==", "url": "https://github.com/cgeo/cgeo/pull/9344#discussion_r517983841", "bodyText": "You are totally right! Fixed.", "author": "fm-sys", "createdAt": "2020-11-05T11:34:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYwMzY2OQ=="}], "type": "inlineReview", "revised_code": {"commit": "feaf569a20c31a8a06936651b823b92eb51c5d79", "chunk": "diff --git a/main/src/cgeo/geocaching/connector/gc/GCConstants.java b/main/src/cgeo/geocaching/connector/gc/GCConstants.java\nindex a1098e073..fba453072 100644\n--- a/main/src/cgeo/geocaching/connector/gc/GCConstants.java\n+++ b/main/src/cgeo/geocaching/connector/gc/GCConstants.java\n\n@@ -168,8 +168,8 @@ public final class GCConstants {\n \n     static final String STRING_PREMIUMONLY_2 = \"Sorry, the owner of this listing has made it viewable to Premium Members only.\";\n     static final String STRING_PREMIUMONLY_1 = \"class=\\\"illustration lock-icon\\\"\";\n-    static final Pattern PATTERN_PREMIUMONLY_CACHETYPE = Pattern.compile(\"/app/ui-icons/sprites/cache-types\\\\.svg#icon\\\\-([^\\\"\\\\-]+)-?([^\\\"]+)?\");\n-    static final Pattern PATTERN_PREMIUMONLY_CACHENAME = Pattern.compile(\"<h1 class=\\\"heading\\\\-3\\\">([^<]+)\");\n+    static final Pattern PATTERN_PREMIUMONLY_CACHETYPE = Pattern.compile(\"/app/ui-icons/sprites/cache-types\\\\.svg#icon-([^\\\"\\\\-]+)-?([^\\\"]+)?\");\n+    static final Pattern PATTERN_PREMIUMONLY_CACHENAME = Pattern.compile(\"<h1 class=\\\"heading-3\\\">(.+)</h1>\");\n     static final Pattern PATTERN_PREMIUMONLY_GEOCODE = Pattern.compile(\"<li class=\\\"li__gccode\\\">([^<]+)\");\n     static final Pattern PATTERN_PREMIUMONLY_DIFFICULTY = Pattern.compile(\"<span id=\\\"ctl00_ContentBody_lblDifficulty\\\"(?:.|\\\\s)*?<span>([0-5](?:[\\\\.,]5)?)</span>\");\n     static final Pattern PATTERN_PREMIUMONLY_TERRAIN = Pattern.compile(\"<span id=\\\"ctl00_ContentBody_lblTerrain\\\"(?:.|\\\\s)*?<span>([0-5](?:[\\\\.,]5)?)</span>\");\n"}}, {"oid": "feaf569a20c31a8a06936651b823b92eb51c5d79", "url": "https://github.com/cgeo/cgeo/commit/feaf569a20c31a8a06936651b823b92eb51c5d79", "message": "parse PM only caches", "committedDate": "2020-11-05T11:14:28Z", "type": "commit"}, {"oid": "feaf569a20c31a8a06936651b823b92eb51c5d79", "url": "https://github.com/cgeo/cgeo/commit/feaf569a20c31a8a06936651b823b92eb51c5d79", "message": "parse PM only caches", "committedDate": "2020-11-05T11:14:28Z", "type": "forcePushed"}]}