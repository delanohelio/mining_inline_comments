{"pr_number": 9064, "pr_title": " Fix #7771: Support [TYPE] in signature", "pr_createdAt": "2020-09-25T01:59:52Z", "pr_url": "https://github.com/cgeo/cgeo/pull/9064", "timeline": [{"oid": "84ddd815d82dc34603c006e6235a49237c4653fb", "url": "https://github.com/cgeo/cgeo/commit/84ddd815d82dc34603c006e6235a49237c4653fb", "message": "https://github.com/cgeo/cgeo/issues/7771\n\nAdd [TYPE] as a signature template, and also as a logging insertion option.", "committedDate": "2020-09-25T02:06:11Z", "type": "forcePushed"}, {"oid": "62aacdee021a0335cb284dfb4a1019bb0d58b10b", "url": "https://github.com/cgeo/cgeo/commit/62aacdee021a0335cb284dfb4a1019bb0d58b10b", "message": "https://github.com/cgeo/cgeo/issues/7771\n\nAdd [TYPE] as a signature template, and also as a logging insertion option.", "committedDate": "2020-09-25T02:44:57Z", "type": "forcePushed"}, {"oid": "efd8e323316a26170c55e20457ec227b39224f9e", "url": "https://github.com/cgeo/cgeo/commit/efd8e323316a26170c55e20457ec227b39224f9e", "message": "https://github.com/cgeo/cgeo/issues/7771\n\nAdd [TYPE] as a signature template, and also as a logging insertion option.", "committedDate": "2020-09-25T02:50:15Z", "type": "forcePushed"}, {"oid": "dee177237a292bc554a417d110cd7a839bf9dca5", "url": "https://github.com/cgeo/cgeo/commit/dee177237a292bc554a417d110cd7a839bf9dca5", "message": "Fix #7771: Support [TYPE] in signature", "committedDate": "2020-09-25T12:53:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ5NjI3OA==", "url": "https://github.com/cgeo/cgeo/pull/9064#discussion_r495496278", "bodyText": "CacheType.pattern is the non-translatable string used by GPX files etc. Should use CacheType.stringId instead AFAICS, which is the translated type identifier.", "author": "moving-bits", "createdAt": "2020-09-26T21:14:25Z", "path": "main/src/cgeo/geocaching/log/LogTemplateProvider.java", "diffHunk": "@@ -285,6 +286,17 @@ public String getValue(final LogContext context) {\n                 return StringUtils.EMPTY;\n             }\n         });\n+        templates.add(new LogTemplate(\"TYPE\",  R.string.init_signature_template_type) {\n+            @Override\n+            public String getValue(final LogContext context) {\n+                final Geocache cache = context.getCache();\n+                if (cache != null) {\n+                    final CacheType cacheType = cache.getType();\n+                    return cacheType.pattern;", "originalCommit": "dee177237a292bc554a417d110cd7a839bf9dca5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MjMyNA==", "url": "https://github.com/cgeo/cgeo/pull/9064#discussion_r498572324", "bodyText": "Looks like the translated stringId is private, but comes through translated with getL10n() - not sure what the function is named for? .. But seems to be used in many places to get the translated name.", "author": "bmuzzin", "createdAt": "2020-10-02T00:24:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ5NjI3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAwODQzNQ==", "url": "https://github.com/cgeo/cgeo/pull/9064#discussion_r499008435", "bodyText": "@bmuzzin\nThanks for updating the PR.\nBTW: \"L10n\" stands for \"Localization\" which starts with a \"L\", ends with a \"n\" and has 10 letters in between...", "author": "moving-bits", "createdAt": "2020-10-02T19:22:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ5NjI3OA=="}], "type": "inlineReview", "revised_code": {"commit": "0b77d2a750131e4433bfd7d8f252ba1c1b48c06f", "chunk": "diff --git a/main/src/cgeo/geocaching/log/LogTemplateProvider.java b/main/src/cgeo/geocaching/log/LogTemplateProvider.java\nindex abcd67ce9..56b33249e 100644\n--- a/main/src/cgeo/geocaching/log/LogTemplateProvider.java\n+++ b/main/src/cgeo/geocaching/log/LogTemplateProvider.java\n\n@@ -292,7 +292,7 @@ public final class LogTemplateProvider {\n                 final Geocache cache = context.getCache();\n                 if (cache != null) {\n                     final CacheType cacheType = cache.getType();\n-                    return cacheType.pattern;\n+                    return cacheType.getL10n();\n                 }\n                 return StringUtils.EMPTY;\n             }\n"}}, {"oid": "0b77d2a750131e4433bfd7d8f252ba1c1b48c06f", "url": "https://github.com/cgeo/cgeo/commit/0b77d2a750131e4433bfd7d8f252ba1c1b48c06f", "message": "Fix #7771: Support [TYPE] in signature", "committedDate": "2020-10-02T00:22:37Z", "type": "commit"}, {"oid": "0b77d2a750131e4433bfd7d8f252ba1c1b48c06f", "url": "https://github.com/cgeo/cgeo/commit/0b77d2a750131e4433bfd7d8f252ba1c1b48c06f", "message": "Fix #7771: Support [TYPE] in signature", "committedDate": "2020-10-02T00:22:37Z", "type": "forcePushed"}]}