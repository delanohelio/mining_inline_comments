{"pr_number": 9537, "pr_title": "Deprecation fixes and LayoutInflater.from", "pr_createdAt": "2020-12-14T00:01:01Z", "pr_url": "https://github.com/cgeo/cgeo/pull/9537", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTc4OA==", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r543121788", "bodyText": "Why not use LoaderManager.getInstance(this). as with the other changes?", "author": "bekuno", "createdAt": "2020-12-15T07:55:29Z", "path": "main/src/cgeo/geocaching/CacheListActivity.java", "diffHunk": "@@ -1536,9 +1536,9 @@ public void onClick(final View arg0) {\n             showProgress(true);\n             showFooterLoadingCaches();\n \n-            getSupportLoaderManager().restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);\n+            LoaderManager.getInstance(CacheListActivity.this).restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);", "originalCommit": "dc6ae2220bdb28a5f9cde6b37777140df9c7d7f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzMjgzNw==", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r544632837", "bodyText": "The instance of the type variable has to exist, so the CacheListActivity has to be explicitly referred to.", "author": "TacoTheDank", "createdAt": "2020-12-16T21:23:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTc4OA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTkyOQ==", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r543121929", "bodyText": "Why not use LoaderManager.getInstance(this). as with the other changes?", "author": "bekuno", "createdAt": "2020-12-15T07:55:44Z", "path": "main/src/cgeo/geocaching/CacheListActivity.java", "diffHunk": "@@ -1536,9 +1536,9 @@ public void onClick(final View arg0) {\n             showProgress(true);\n             showFooterLoadingCaches();\n \n-            getSupportLoaderManager().restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);\n+            LoaderManager.getInstance(CacheListActivity.this).restartLoader(CacheListLoaderType.NEXT_PAGE.getLoaderId(), null, CacheListActivity.this);\n             // the loader for subsequent pages takes over - therefore the initial loader needs to be destroyed\n-            getSupportLoaderManager().destroyLoader(type.getLoaderId());\n+            LoaderManager.getInstance(CacheListActivity.this).destroyLoader(type.getLoaderId());", "originalCommit": "dc6ae2220bdb28a5f9cde6b37777140df9c7d7f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzMzE5Nw==", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r544633197", "bodyText": "See above.", "author": "TacoTheDank", "createdAt": "2020-12-16T21:24:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzEyMTkyOQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3MzUxMQ==", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r543573511", "bodyText": "clipboard.getText(); is also deprecated. Is there a chance for solution as before for setText()?", "author": "bekuno", "createdAt": "2020-12-15T18:12:27Z", "path": "main/src/cgeo/geocaching/utils/ClipboardUtils.java", "diffHunk": "@@ -25,22 +26,23 @@ private ClipboardUtils() {\n      * @param text\n      *            The text to place in the clipboard.\n      */\n-    @SuppressWarnings(\"deprecation\")\n     public static void copyToClipboard(@NonNull final CharSequence text) {\n         // fully qualified name used here to avoid buggy deprecation warning (of javac) on the import statement\n-        final android.text.ClipboardManager clipboard = (android.text.ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n-        clipboard.setText(text);\n+        final ClipboardManager clipboard = (ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n+        if (clipboard != null) {\n+            final ClipData data = ClipData.newPlainText(null, text);\n+            clipboard.setPrimaryClip(data);\n+        }\n     }\n \n     /**\n      * get clipboard content\n      *\n      */\n-    @SuppressWarnings(\"deprecation\")\n     @Nullable\n     public static String getText() {\n         // fully qualified name used here to avoid buggy deprecation warning (of javac) on the import statement\n-        final android.text.ClipboardManager clipboard = (android.text.ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n+        final ClipboardManager clipboard = (ClipboardManager) CgeoApplication.getInstance().getSystemService(Context.CLIPBOARD_SERVICE);\n         final CharSequence text = clipboard.getText();", "originalCommit": "4ae5347080db827780d06e5c69dd50e188cbdbf9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYyNTQ0OA==", "url": "https://github.com/cgeo/cgeo/pull/9537#discussion_r544625448", "bodyText": "Perhaps, though I'm not certain about how to go about it, so I'm leaving it as is so I don't break anything by accident.", "author": "TacoTheDank", "createdAt": "2020-12-16T21:10:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3MzUxMQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "11ded5502d553b32df93a131dfb71bf44cf4856c", "url": "https://github.com/cgeo/cgeo/commit/11ded5502d553b32df93a131dfb71bf44cf4856c", "message": "Fix some deprecations", "committedDate": "2020-12-16T21:33:05Z", "type": "commit"}, {"oid": "ca02d2ba9558e9b0f6077e6d1ad6b2dfa01cc5d4", "url": "https://github.com/cgeo/cgeo/commit/ca02d2ba9558e9b0f6077e6d1ad6b2dfa01cc5d4", "message": "Use LayoutInflater.from instead of getSystemService where possible", "committedDate": "2020-12-16T21:33:51Z", "type": "commit"}]}