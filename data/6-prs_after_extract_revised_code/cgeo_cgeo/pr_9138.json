{"pr_number": 9138, "pr_title": "related to #8978: fixing non-GUI-parts (img delete, remove exif, move img fct to helper)", "pr_createdAt": "2020-10-04T10:04:29Z", "pr_url": "https://github.com/cgeo/cgeo/pull/9138", "timeline": [{"oid": "594f8faddeecba1814565a5e3bcff916a699819e", "url": "https://github.com/cgeo/cgeo/commit/594f8faddeecba1814565a5e3bcff916a699819e", "message": "related to #8978: fixing non-GUI-parts (img delete, remove exif, move img fct to helper)", "committedDate": "2020-10-04T10:18:25Z", "type": "forcePushed"}, {"oid": "58ad3633cce54fe2d31e3aae979ac796932c5e11", "url": "https://github.com/cgeo/cgeo/commit/58ad3633cce54fe2d31e3aae979ac796932c5e11", "message": "related to #8978: fixing non-GUI-parts (img delete, remove exif, move img fct to helper)", "committedDate": "2020-10-04T10:45:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NTk2Mw==", "url": "https://github.com/cgeo/cgeo/pull/9138#discussion_r499275963", "bodyText": "something yet to be done, or an outdated comment?", "author": "moving-bits", "createdAt": "2020-10-04T18:42:12Z", "path": "main/src/cgeo/geocaching/ImageSelectActivity.java", "diffHunk": "@@ -196,129 +196,38 @@ private void syncEditTexts() {\n     }\n \n     private void selectImageFromCamera() {\n-        final File file = ImageUtils.getOutputImageFile();\n-        if (file == null) {\n-            showFailure();\n-            return;\n-        }\n-\n-        image = new Image.Builder().setUrl(Uri.fromFile(file)).build();\n-        if (image.isEmpty()) {\n-            showFailure();\n-            return;\n-        }\n \n-        // create Intent to take a picture and return control to the calling application\n-        final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n-        final Context context = getApplicationContext();\n-        final Uri uri = FileProvider.getUriForFile(\n-                context,\n-                context.getString(R.string.file_provider_authority),\n-                file);\n-        intent.putExtra(MediaStore.EXTRA_OUTPUT, uri); // set the image file name\n-\n-        // start the image capture Intent\n-        startActivityForResult(intent, SELECT_NEW_IMAGE);\n+        imageActivityHelper.getImageFromCamera(-1, false, false, img -> {\n+            deleteImageFromDeviceIfNotOriginal(image);\n+            image = img;\n+            loadImagePreview();\n+        });\n     }\n \n     private void selectImageFromStorage() {\n-        final Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n-        intent.setType(\"image/*\");\n \n-        startActivityForResult(Intent.createChooser(intent, \"Select Image\"), SELECT_STORED_IMAGE);\n+        //TODO: revert to single", "originalCommit": "58ad3633cce54fe2d31e3aae979ac796932c5e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3OTAwMw==", "url": "https://github.com/cgeo/cgeo/pull/9138#discussion_r499279003", "bodyText": "Danm, I forgot to remove the TODO tag. But the change itself was done. I can remove the false comment tomorrow (don't have access to source right now)", "author": "eddiemuc", "createdAt": "2020-10-04T19:14:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NTk2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM0NzYzMA==", "url": "https://github.com/cgeo/cgeo/pull/9138#discussion_r499347630", "bodyText": "something yet to be done, or an outdated comment?\n\nTodo is now removed", "author": "eddiemuc", "createdAt": "2020-10-05T05:05:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NTk2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgzNzUyMA==", "url": "https://github.com/cgeo/cgeo/pull/9138#discussion_r499837520", "bodyText": "thanks", "author": "moving-bits", "createdAt": "2020-10-05T19:57:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3NTk2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "387a99a0e88303e581e7080a0f30fdf027af8e5e", "chunk": "diff --git a/main/src/cgeo/geocaching/ImageSelectActivity.java b/main/src/cgeo/geocaching/ImageSelectActivity.java\nindex d995948af..6d7a33c11 100644\n--- a/main/src/cgeo/geocaching/ImageSelectActivity.java\n+++ b/main/src/cgeo/geocaching/ImageSelectActivity.java\n\n@@ -205,8 +205,6 @@ public class ImageSelectActivity extends AbstractActionBarActivity {\n     }\n \n     private void selectImageFromStorage() {\n-\n-        //TODO: revert to single\n         imageActivityHelper.getImageFromStorage(-1, false, false,  img -> {\n             deleteImageFromDeviceIfNotOriginal(image);\n             image = img;\n"}}, {"oid": "387a99a0e88303e581e7080a0f30fdf027af8e5e", "url": "https://github.com/cgeo/cgeo/commit/387a99a0e88303e581e7080a0f30fdf027af8e5e", "message": "related to #8978: fixing non-GUI-parts (img delete, remove exif, move img fct to helper)", "committedDate": "2020-10-05T04:41:23Z", "type": "commit"}, {"oid": "387a99a0e88303e581e7080a0f30fdf027af8e5e", "url": "https://github.com/cgeo/cgeo/commit/387a99a0e88303e581e7080a0f30fdf027af8e5e", "message": "related to #8978: fixing non-GUI-parts (img delete, remove exif, move img fct to helper)", "committedDate": "2020-10-05T04:41:23Z", "type": "forcePushed"}]}