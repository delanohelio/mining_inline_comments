{"pr_number": 4228, "pr_title": "feat(JOML): migrate block placement", "pr_createdAt": "2020-10-31T22:09:21Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/4228", "timeline": [{"oid": "c6ad2e2f15382769f799d8f769258fc9f81ed989", "url": "https://github.com/MovingBlocks/Terasology/commit/c6ad2e2f15382769f799d8f769258fc9f81ed989", "message": "feat(JOML): migrate block placment", "committedDate": "2020-10-31T22:07:00Z", "type": "commit"}, {"oid": "96dc99abd9b4cd4b20dc5f7049dcd934514208e5", "url": "https://github.com/MovingBlocks/Terasology/commit/96dc99abd9b4cd4b20dc5f7049dcd934514208e5", "message": "Merge branch 'develop' into feature/migrate-block-placement", "committedDate": "2020-10-31T22:09:43Z", "type": "commit"}, {"oid": "a4e47d76388f9980124d268f10f921fa4a3b3fcd", "url": "https://github.com/MovingBlocks/Terasology/commit/a4e47d76388f9980124d268f10f921fa4a3b3fcd", "message": "Merge branch 'develop' into feature/migrate-block-placement", "committedDate": "2020-12-12T10:42:47Z", "type": "commit"}, {"oid": "4b8819f8ec0fbe6ef3d9ef78417ab9983a54751b", "url": "https://github.com/MovingBlocks/Terasology/commit/4b8819f8ec0fbe6ef3d9ef78417ab9983a54751b", "message": "feat(joml): add createFromMinAndSize for BlockRegions", "committedDate": "2020-12-12T12:36:57Z", "type": "commit"}, {"oid": "b845cdbd5ce12b85029f90b6b9becf7195593328", "url": "https://github.com/MovingBlocks/Terasology/commit/b845cdbd5ce12b85029f90b6b9becf7195593328", "message": "fix blockregionlookup", "committedDate": "2020-12-12T17:56:23Z", "type": "commit"}, {"oid": "41573e35a202fb34894882609b03db6235434f15", "url": "https://github.com/MovingBlocks/Terasology/commit/41573e35a202fb34894882609b03db6235434f15", "message": "Merge branch 'develop' into feature/migrate-block-placement", "committedDate": "2020-12-12T20:06:49Z", "type": "commit"}, {"oid": "7bb8eda5b599f23b4e61920a1acd6563fece6d72", "url": "https://github.com/MovingBlocks/Terasology/commit/7bb8eda5b599f23b4e61920a1acd6563fece6d72", "message": "Merge branch 'develop' into feature/migrate-block-placement", "committedDate": "2020-12-12T22:08:35Z", "type": "commit"}, {"oid": "c5a988501f676813c52d015c536a94dc427a62e4", "url": "https://github.com/MovingBlocks/Terasology/commit/c5a988501f676813c52d015c536a94dc427a62e4", "message": "fix: use `createFromMinAndSize` as implemented in #4228", "committedDate": "2020-12-12T22:15:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc5MTM3NA==", "url": "https://github.com/MovingBlocks/Terasology/pull/4228#discussion_r541791374", "bodyText": "do we still need this? if so why is it commented out? if not, why is it still there \ud83d\ude0b", "author": "jdrueckert", "createdAt": "2020-12-12T22:17:19Z", "path": "engine/src/main/java/org/terasology/world/block/entity/placement/BlockPlacingSystem.java", "diffHunk": "@@ -34,6 +38,9 @@\n \n     @ReceiveEvent(components = {WorldComponent.class}, priority = EventPriority.PRIORITY_TRIVIAL)\n     public void placeBlockInWorld(PlaceBlocks event, EntityRef world) {\n-        worldProvider.setBlocks(event.getBlocks());\n+        //   worldProvider.setBlocks(event.getBlocks());", "originalCommit": "c5a988501f676813c52d015c536a94dc427a62e4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc5MTcxNw==", "url": "https://github.com/MovingBlocks/Terasology/pull/4228#discussion_r541791717", "bodyText": "looks like the same line but commented out :P", "author": "pollend", "createdAt": "2020-12-12T22:19:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc5MTM3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc5Mzc3MA==", "url": "https://github.com/MovingBlocks/Terasology/pull/4228#discussion_r541793770", "bodyText": "opps", "author": "pollend", "createdAt": "2020-12-12T22:32:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc5MTM3NA=="}], "type": "inlineReview", "revised_code": {"commit": "ab7901af9fbce0eb0dd361d8d97b1bb3300fafb1", "chunk": "diff --git a/engine/src/main/java/org/terasology/world/block/entity/placement/BlockPlacingSystem.java b/engine/src/main/java/org/terasology/world/block/entity/placement/BlockPlacingSystem.java\nindex 2b3426d9c..259f9ab91 100644\n--- a/engine/src/main/java/org/terasology/world/block/entity/placement/BlockPlacingSystem.java\n+++ b/engine/src/main/java/org/terasology/world/block/entity/placement/BlockPlacingSystem.java\n\n@@ -38,9 +35,6 @@\n \n     @ReceiveEvent(components = {WorldComponent.class}, priority = EventPriority.PRIORITY_TRIVIAL)\n     public void placeBlockInWorld(PlaceBlocks event, EntityRef world) {\n-        //   worldProvider.setBlocks(event.getBlocks());\n-        for (Map.Entry<Vector3i, Block> entry: event.getBlocks().entrySet()) {\n-            worldProvider.setBlock(entry.getKey(), entry.getValue());\n-        }\n+        worldProvider.setBlocks(JomlUtil.blockMap(event.getBlocks()));\n     }\n }\n"}}, {"oid": "ab7901af9fbce0eb0dd361d8d97b1bb3300fafb1", "url": "https://github.com/MovingBlocks/Terasology/commit/ab7901af9fbce0eb0dd361d8d97b1bb3300fafb1", "message": "use toBlockMapping utility", "committedDate": "2020-12-12T22:39:42Z", "type": "commit"}, {"oid": "916eb83fbf75c2064ddcde14145dfce785f4e2c6", "url": "https://github.com/MovingBlocks/Terasology/commit/916eb83fbf75c2064ddcde14145dfce785f4e2c6", "message": "Merge branch 'develop' into feature/migrate-block-placement", "committedDate": "2020-12-12T23:22:11Z", "type": "commit"}]}