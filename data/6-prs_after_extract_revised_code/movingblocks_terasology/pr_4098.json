{"pr_number": 4098, "pr_title": "fix: Actually register InputSystem as system", "pr_createdAt": "2020-07-25T11:47:41Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/4098", "timeline": [{"oid": "5e6cc3781b1f940e44eff0aaec1666e0037eca63", "url": "https://github.com/MovingBlocks/Terasology/commit/5e6cc3781b1f940e44eff0aaec1666e0037eca63", "message": "fix: Actually register InputSystem as system\n\nThere were a couple of NPEs with Dialogs because of this. The dependencies for the InputSystem were not injected via `@In` because the system was never registered as such. This simple change should solve this issue.", "committedDate": "2020-07-24T23:09:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxNzM1OQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4098#discussion_r460417359", "bodyText": "I wonder if this should be set to Client? It'll otherwise default to Always which means it would also run on a headless server, which seems silly for input handling.\nWhich makes me wonder what it was doing without the annotation in the first place \ud83e\udd14 I'm tempted to put a couple fingers in my ears and walk away slowly going \"lalalalala\" pretending to never having seen this ... \ud83d\ude01", "author": "Cervator", "createdAt": "2020-07-25T15:51:09Z", "path": "engine/src/main/java/org/terasology/input/InputSystem.java", "diffHunk": "@@ -64,6 +65,7 @@\n  * In addition to raw keyboard and mouse input, the system handles Bind Buttons and Bind Axis, which can be mapped\n  * to one or more inputs.\n  */\n+@RegisterSystem", "originalCommit": "5e6cc3781b1f940e44eff0aaec1666e0037eca63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQyNDM4Ng==", "url": "https://github.com/MovingBlocks/Terasology/pull/4098#discussion_r460424386", "bodyText": "I got the impression that we should double-check all @RegisterSystem usages anyways \ud83d\ude48 Having it ALWAYS register wouldn't hurt that much, would it?", "author": "skaldarnar", "createdAt": "2020-07-25T17:07:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxNzM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQzMTU3Mg==", "url": "https://github.com/MovingBlocks/Terasology/pull/4098#discussion_r460431572", "bodyText": "Probably not, but the class does have an update that'll run every tick, pointlessly, since servers don't process input. Likely it is minor and probably even has been an issue for ages. So not likely much to worry about - we should hunt whichever performance issues actually manifest themselves rather than theoretical ones :-)\n(and yeah we should totally check all the systems - if no sooner then maybe when we re-integrate Gestalt, as any detailed effort until then might end up wasted if everything changes too much anyway ...)", "author": "Cervator", "createdAt": "2020-07-25T18:33:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxNzM1OQ=="}], "type": "inlineReview", "revised_code": null}]}