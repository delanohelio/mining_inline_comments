{"pr_number": 3947, "pr_title": "feat(JOML): Migrate BlockChange", "pr_createdAt": "2020-05-10T09:45:42Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/3947", "timeline": [{"oid": "dd64c52ea1ae0194a8a26628b8f7dbc1125438e5", "url": "https://github.com/MovingBlocks/Terasology/commit/dd64c52ea1ae0194a8a26628b8f7dbc1125438e5", "message": "Migrate BlockChange to JOML", "committedDate": "2020-05-10T08:43:36Z", "type": "commit"}, {"oid": "e81f6af80a6db59e17e50eec9922012b213d8d08", "url": "https://github.com/MovingBlocks/Terasology/commit/e81f6af80a6db59e17e50eec9922012b213d8d08", "message": "Fix BlockChange related unit tests", "committedDate": "2020-05-10T09:15:35Z", "type": "commit"}, {"oid": "a778b4be3e53e942aab21f6c2ba50d52277142f0", "url": "https://github.com/MovingBlocks/Terasology/commit/a778b4be3e53e942aab21f6c2ba50d52277142f0", "message": "Fix joml migration related error.", "committedDate": "2020-05-10T09:40:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYxOTcyOQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/3947#discussion_r422619729", "bodyText": "Note:\nThis was an error in the previous joml-migration commit. blockChanges uses TeraMath-vectors as keys, but here a JOML-vector is being used to find an element.\nThe TeraMath- and JOML-vector classes are not hash-equal.", "author": "kBlaszczyk", "createdAt": "2020-05-10T09:50:40Z", "path": "engine/src/main/java/org/terasology/world/internal/WorldProviderCoreImpl.java", "diffHunk": "@@ -201,9 +200,9 @@ public Block setBlock(Vector3ic worldPos, Block type) {\n             Vector3i blockPos = ChunkMath.calcBlockPos(JomlUtil.from(worldPos));\n             Block oldBlockType = chunk.setBlock(blockPos, type);\n             if (oldBlockType != type) {\n-                BlockChange oldChange = blockChanges.get(worldPos);", "originalCommit": "a778b4be3e53e942aab21f6c2ba50d52277142f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}