{"pr_number": 1713, "pr_title": "Adding custom AttributeConverterProvider and AttributeConverter to DD\u2026", "pr_createdAt": "2020-03-13T21:50:03Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1713", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzQzMQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1713#discussion_r392507431", "bodyText": "Can we comment that it may be null?", "author": "millems", "createdAt": "2020-03-13T22:06:33Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java", "diffHunk": "@@ -128,6 +130,14 @@ public String name() {\n         return this.type;\n     }\n \n+    /**\n+     * A custom {@link AttributeConverter} that will be used to convert this attribute.\n+     * @see Builder#attributeConverter\n+     */", "originalCommit": "ca63ceb82454b978145b1ff2cd455520bf7f8dbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwOTQxOA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1713#discussion_r392509418", "bodyText": "Yes.", "author": "cenedhryn", "createdAt": "2020-03-13T22:13:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzQzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "chunk": "diff --git a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java\nindex 959a378e0f..c9608dd881 100644\n--- a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java\n+++ b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java\n\n@@ -132,6 +132,7 @@ public final class StaticAttribute<T, R> {\n \n     /**\n      * A custom {@link AttributeConverter} that will be used to convert this attribute.\n+     * If no custom converter was provided, the value will be null.\n      * @see Builder#attributeConverter\n      */\n     public AttributeConverter<R> attributeConverter() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzgyMw==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1713#discussion_r392507823", "bodyText": "Nit: Overrides -> takes precedence over. It doesn't change the table schema.", "author": "millems", "createdAt": "2020-03-13T22:07:52Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java", "diffHunk": "@@ -216,6 +227,15 @@ private Builder(EnhancedType<R> type) {\n             return this;\n         }\n \n+        /**\n+         * An {@link AttributeConverter} for the attribute type ({@link EnhancedType}), that can convert this attribute.\n+         * It overrides any converter for this type provided by the table schema {@link AttributeConverterProvider}.", "originalCommit": "ca63ceb82454b978145b1ff2cd455520bf7f8dbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwOTU2Mg==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1713#discussion_r392509562", "bodyText": "Yes", "author": "cenedhryn", "createdAt": "2020-03-13T22:14:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzgyMw=="}], "type": "inlineReview", "revised_code": {"commit": "9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "chunk": "diff --git a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java\nindex 959a378e0f..c9608dd881 100644\n--- a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java\n+++ b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticAttribute.java\n\n@@ -229,7 +230,8 @@ public final class StaticAttribute<T, R> {\n \n         /**\n          * An {@link AttributeConverter} for the attribute type ({@link EnhancedType}), that can convert this attribute.\n-         * It overrides any converter for this type provided by the table schema {@link AttributeConverterProvider}.\n+         * It takes precedence over any converter for this type provided by the table schema\n+         * {@link AttributeConverterProvider}.\n          */\n         public Builder<T, R> attributeConverter(AttributeConverter<R> attributeConverter) {\n             this.attributeConverter = attributeConverter;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwODIzNA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1713#discussion_r392508234", "bodyText": "Does it add it to the table schema? It seems like it provides a higher-precedence alternative to the table schema.", "author": "millems", "createdAt": "2020-03-13T22:09:16Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticTableSchema.java", "diffHunk": "@@ -274,6 +281,19 @@ private Builder(Class<T> itemClass) {\n             return this;\n         }\n \n+        /**\n+         * Adds an {@link AttributeConverterProvider} to the table schema. The {@link AttributeConverterProvider} must\n+         * provide {@link AttributeConverter}s for all types used in the schema.", "originalCommit": "ca63ceb82454b978145b1ff2cd455520bf7f8dbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwOTYyOQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1713#discussion_r392509629", "bodyText": "Let's go with that terminology, clearer.", "author": "cenedhryn", "createdAt": "2020-03-13T22:14:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwODIzNA=="}], "type": "inlineReview", "revised_code": {"commit": "9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "chunk": "diff --git a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticTableSchema.java b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticTableSchema.java\nindex 6a508d7f2f..7123f2341b 100644\n--- a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticTableSchema.java\n+++ b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/mapper/StaticTableSchema.java\n\n@@ -282,10 +282,10 @@ public final class StaticTableSchema<T> implements TableSchema<T> {\n         }\n \n         /**\n-         * Adds an {@link AttributeConverterProvider} to the table schema. The {@link AttributeConverterProvider} must\n-         * provide {@link AttributeConverter}s for all types used in the schema.\n+         * A higher-precedence {@link AttributeConverterProvider} than the default one provided by the table schema.\n+         * The {@link AttributeConverterProvider} must provide {@link AttributeConverter}s for all types used in the schema.\n          * <p>\n-         * By default, the table schema has an internal AttributeConverterProvider which provides standard converters\n+         * The table schema default provider has an internal AttributeConverterProvider which provides standard converters\n          * for most primitive and common Java types. Use custom AttributeConverterProvider only when you have specific\n          * needs for type conversion that the defaults do not cover.\n          */\n"}}, {"oid": "9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "url": "https://github.com/aws/aws-sdk-java-v2/commit/9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "message": "Adding custom AttributeConverterProvider and AttributeConverter to DDB Enhanced static table schema and static attribute", "committedDate": "2020-03-13T22:24:10Z", "type": "commit"}, {"oid": "9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "url": "https://github.com/aws/aws-sdk-java-v2/commit/9f4d06a4d5554319beb57e4ff23e474ad8a55f39", "message": "Adding custom AttributeConverterProvider and AttributeConverter to DDB Enhanced static table schema and static attribute", "committedDate": "2020-03-13T22:24:10Z", "type": "forcePushed"}]}