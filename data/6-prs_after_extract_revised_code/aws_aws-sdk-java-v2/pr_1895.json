{"pr_number": 1895, "pr_title": "Async core metrics part3: add tests to verify async core metrics for event streaming apis", "pr_createdAt": "2020-06-12T16:59:37Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1895", "timeline": [{"oid": "ef206163c9f27e01f7923609d77466ccb795af4d", "url": "https://github.com/aws/aws-sdk-java-v2/commit/ef206163c9f27e01f7923609d77466ccb795af4d", "message": "Add functional and unit tests to verify async core metrics for event streaming operation", "committedDate": "2020-06-12T17:26:29Z", "type": "forcePushed"}, {"oid": "f22c0ddca3872315eca33ea87846772856d32304", "url": "https://github.com/aws/aws-sdk-java-v2/commit/f22c0ddca3872315eca33ea87846772856d32304", "message": "Add functional and unit tests to verify async core metrics for event streaming operation", "committedDate": "2020-06-12T17:36:11Z", "type": "commit"}, {"oid": "f22c0ddca3872315eca33ea87846772856d32304", "url": "https://github.com/aws/aws-sdk-java-v2/commit/f22c0ddca3872315eca33ea87846772856d32304", "message": "Add functional and unit tests to verify async core metrics for event streaming operation", "committedDate": "2020-06-12T17:36:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU3OTIyOA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1895#discussion_r439579228", "bodyText": "Is this meant to be reporting request id header, not request id?", "author": "cenedhryn", "createdAt": "2020-06-12T18:27:48Z", "path": "core/sdk-core/src/main/java/software/amazon/awssdk/core/internal/util/MetricUtils.java", "diffHunk": "@@ -106,6 +107,8 @@ public static void collectHttpMetrics(MetricCollector metricCollector, SdkHttpFu\n         metricCollector.reportMetric(CoreMetric.HTTP_STATUS_CODE, httpResponse.statusCode());\n         httpResponse.firstMatchingHeader(\"x-amz-request-id\")\n                     .ifPresent(v -> metricCollector.reportMetric(CoreMetric.AWS_REQUEST_ID, v));\n+        httpResponse.firstMatchingHeader(X_AMZN_REQUEST_ID_HEADER)\n+                    .ifPresent(v -> metricCollector.reportMetric(CoreMetric.AWS_REQUEST_ID, v));", "originalCommit": "f22c0ddca3872315eca33ea87846772856d32304", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4MTk4NQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1895#discussion_r439581985", "bodyText": "It's the header name for request Ids with different format.\nCurrently, we have two formats I think\nx-amzn-RequestId\nx-amz-request-id", "author": "zoewangg", "createdAt": "2020-06-12T18:33:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU3OTIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4MjM0Mw==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1895#discussion_r439582343", "bodyText": "ok!", "author": "cenedhryn", "createdAt": "2020-06-12T18:34:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU3OTIyOA=="}], "type": "inlineReview", "revised_code": null}]}