{"pr_number": 1669, "pr_title": "DynamoDB Enhanced Client: Redesign of Key interface", "pr_createdAt": "2020-02-26T22:45:20Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1669", "timeline": [{"oid": "b207aeaa6c900d04755eb1961dbe3ebc0a63ad6b", "url": "https://github.com/aws/aws-sdk-java-v2/commit/b207aeaa6c900d04755eb1961dbe3ebc0a63ad6b", "message": "DynamoDB Enhanced Client: Redesign of Key interface", "committedDate": "2020-02-27T01:12:07Z", "type": "forcePushed"}, {"oid": "9fa68b2bb2e08984223e01b57ad9802596fdba3f", "url": "https://github.com/aws/aws-sdk-java-v2/commit/9fa68b2bb2e08984223e01b57ad9802596fdba3f", "message": "DynamoDB Enhanced Client: Redesign of Key interface", "committedDate": "2020-02-27T01:53:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2NDM1OA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1669#discussion_r385264358", "bodyText": "Can you newline partitionValue, sortValue and build so that this can then be formatted nicer within our line length limits?", "author": "spfink", "createdAt": "2020-02-27T17:36:36Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/internal/EnhancedClientUtils.java", "diffHunk": "@@ -116,8 +116,9 @@ public static String cleanAttributeName(String key) {\n         AttributeValue partitionKeyValue = tableSchema.attributeValue(item, partitionKeyName);\n         Optional<AttributeValue> sortKeyValue = sortKeyName.map(key -> tableSchema.attributeValue(item, key));\n \n-        return sortKeyValue.map(attributeValue -> Key.create(partitionKeyValue, attributeValue))\n-                           .orElseGet(() -> Key.create(partitionKeyValue));\n+        return sortKeyValue.map(\n+            attributeValue -> Key.builder().partitionValue(partitionKeyValue).sortValue(attributeValue).build())", "originalCommit": "9fa68b2bb2e08984223e01b57ad9802596fdba3f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f4c5bb82f8fb8b5593a106ecee85ab018e2b7734", "chunk": "diff --git a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/internal/EnhancedClientUtils.java b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/internal/EnhancedClientUtils.java\nindex d7d8418e58..aa6fe92741 100644\n--- a/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/internal/EnhancedClientUtils.java\n+++ b/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/internal/EnhancedClientUtils.java\n\n@@ -117,8 +117,13 @@ public final class EnhancedClientUtils {\n         Optional<AttributeValue> sortKeyValue = sortKeyName.map(key -> tableSchema.attributeValue(item, key));\n \n         return sortKeyValue.map(\n-            attributeValue -> Key.builder().partitionValue(partitionKeyValue).sortValue(attributeValue).build())\n-                           .orElseGet(() -> Key.builder().partitionValue(partitionKeyValue).build());\n+            attributeValue -> Key.builder()\n+                                 .partitionValue(partitionKeyValue)\n+                                 .sortValue(attributeValue)\n+                                 .build())\n+                           .orElseGet(\n+                               () -> Key.builder()\n+                                        .partitionValue(partitionKeyValue).build());\n     }\n \n     public static <T> List<T> getItemsFromSupplier(List<Supplier<T>> itemSupplierList) {\n"}}, {"oid": "f4c5bb82f8fb8b5593a106ecee85ab018e2b7734", "url": "https://github.com/aws/aws-sdk-java-v2/commit/f4c5bb82f8fb8b5593a106ecee85ab018e2b7734", "message": "DynamoDB Enhanced Client: Redesign of Key interface", "committedDate": "2020-02-27T18:34:11Z", "type": "commit"}, {"oid": "f4c5bb82f8fb8b5593a106ecee85ab018e2b7734", "url": "https://github.com/aws/aws-sdk-java-v2/commit/f4c5bb82f8fb8b5593a106ecee85ab018e2b7734", "message": "DynamoDB Enhanced Client: Redesign of Key interface", "committedDate": "2020-02-27T18:34:11Z", "type": "forcePushed"}]}