{"pr_number": 1921, "pr_title": "Add HttpClient collector to HTTP request", "pr_createdAt": "2020-06-22T23:55:52Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1921", "timeline": [{"oid": "a9339284773a223d6d947137d682f643d1620826", "url": "https://github.com/aws/aws-sdk-java-v2/commit/a9339284773a223d6d947137d682f643d1620826", "message": "Add HttpClient collector to HTTP request", "committedDate": "2020-06-22T23:55:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkwMzc3Ng==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1921#discussion_r443903776", "bodyText": "Not a comment, just a small question. What's the difference between these two collectors? Specifically, what kind of metrics are they collecting differently? Or are they just collectors publishing the same metric but in different hierarchy levels?", "author": "Quanzzzz", "createdAt": "2020-06-23T01:01:00Z", "path": "core/sdk-core/src/main/java/software/amazon/awssdk/core/internal/http/pipeline/stages/MakeHttpRequestStage.java", "diffHunk": "@@ -59,17 +59,20 @@ public MakeHttpRequestStage(HttpClientDependencies dependencies) {\n     }\n \n     private HttpExecuteResponse executeHttpRequest(SdkHttpFullRequest request, RequestExecutionContext context) throws Exception {\n+        MetricCollector metricCollector = context.metricCollector();", "originalCommit": "a9339284773a223d6d947137d682f643d1620826", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM4MTA5Mg==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1921#discussion_r444381092", "bodyText": "metricCollector here is the collector for all API call attempt metrics, the name is ApiCallAttempt. The code is creating a child collector of this collector, HttpClient and passing that as a collector for the HTTP client so that any metrics the HTTP client reports are added to this collector instead so it's clear from the node path later, ApiCallAttempt > HttpClient that the metrics were reported by the HTTP client.", "author": "dagnir", "createdAt": "2020-06-23T17:13:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkwMzc3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM4ODIwNA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1921#discussion_r444388204", "bodyText": "It's clear now. Thanks.", "author": "Quanzzzz", "createdAt": "2020-06-23T17:26:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkwMzc3Ng=="}], "type": "inlineReview", "revised_code": null}]}