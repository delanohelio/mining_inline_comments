{"pr_number": 1738, "pr_title": "Log result data when no baseline found", "pr_createdAt": "2020-03-26T21:35:48Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1738", "timeline": [{"oid": "3b6b5628de2a7c30eab27c00cdd703db3abe031b", "url": "https://github.com/aws/aws-sdk-java-v2/commit/3b6b5628de2a7c30eab27c00cdd703db3abe031b", "message": "Log result data when no baseline found\n\nShould make it easier to add new benchmarks and get baseline numbers for them.", "committedDate": "2020-03-26T21:33:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkwODI0MQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1738#discussion_r398908241", "bodyText": "continue?", "author": "zoewangg", "createdAt": "2020-03-26T21:37:39Z", "path": "test/sdk-benchmarks/src/main/java/software/amazon/awssdk/benchmark/BenchmarkResultProcessor.java", "diffHunk": "@@ -76,8 +77,16 @@\n             SdkBenchmarkResult sdkBenchmarkData = constructSdkBenchmarkResult(result);\n \n             if (baselineResult == null) {\n-                log.warn(() -> \"Unable to find the baseline for \" + benchmarkId + \" Skipping regression validation\");\n-                continue;\n+                log.warn(() -> {\n+                    String benchmarkResultJson = null;\n+                    try {\n+                        benchmarkResultJson = OBJECT_MAPPER.writeValueAsString(sdkBenchmarkData);\n+                    } catch (IOException e) {\n+                        log.error(() -> \"Unable to serialize result data to JSON\");\n+                    }\n+                    return String.format(\"Unable to find the baseline for %s. Skipping regression validation. \" +\n+                        \"Results were: %s\", benchmarkId, benchmarkResultJson);\n+            });", "originalCommit": "3b6b5628de2a7c30eab27c00cdd703db3abe031b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkwODkwMA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1738#discussion_r398908900", "bodyText": "Oops good catch", "author": "dagnir", "createdAt": "2020-03-26T21:39:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkwODI0MQ=="}], "type": "inlineReview", "revised_code": {"commit": "ca9342fceaf4eb3c3340ec17fd983342fd12c815", "chunk": "diff --git a/test/sdk-benchmarks/src/main/java/software/amazon/awssdk/benchmark/BenchmarkResultProcessor.java b/test/sdk-benchmarks/src/main/java/software/amazon/awssdk/benchmark/BenchmarkResultProcessor.java\nindex 0e9c88fc40..f74fa66261 100644\n--- a/test/sdk-benchmarks/src/main/java/software/amazon/awssdk/benchmark/BenchmarkResultProcessor.java\n+++ b/test/sdk-benchmarks/src/main/java/software/amazon/awssdk/benchmark/BenchmarkResultProcessor.java\n\n@@ -85,8 +85,9 @@ class BenchmarkResultProcessor {\n                         log.error(() -> \"Unable to serialize result data to JSON\");\n                     }\n                     return String.format(\"Unable to find the baseline for %s. Skipping regression validation. \" +\n-                        \"Results were: %s\", benchmarkId, benchmarkResultJson);\n-            });\n+                            \"Results were: %s\", benchmarkId, benchmarkResultJson);\n+                });\n+                continue;\n             }\n \n             currentData.add(sdkBenchmarkData);\n"}}, {"oid": "ca9342fceaf4eb3c3340ec17fd983342fd12c815", "url": "https://github.com/aws/aws-sdk-java-v2/commit/ca9342fceaf4eb3c3340ec17fd983342fd12c815", "message": "fixup! Log result data when no baseline found", "committedDate": "2020-03-26T21:40:33Z", "type": "commit"}]}