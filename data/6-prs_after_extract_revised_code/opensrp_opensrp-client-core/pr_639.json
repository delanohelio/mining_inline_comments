{"pr_number": 639, "pr_title": "Add tests for SettingsSyncIntentService", "pr_createdAt": "2020-09-08T09:10:40Z", "pr_url": "https://github.com/opensrp/opensrp-client-core/pull/639", "timeline": [{"oid": "efeedbd013b68fc66e9dca42ee5437b8034d35a1", "url": "https://github.com/opensrp/opensrp-client-core/commit/efeedbd013b68fc66e9dca42ee5437b8034d35a1", "message": "Remove unused setters", "committedDate": "2020-09-08T12:10:41Z", "type": "commit"}, {"oid": "ad729f547ccd80cfcfc655601aceb9a5a2c7bd32", "url": "https://github.com/opensrp/opensrp-client-core/commit/ad729f547ccd80cfcfc655601aceb9a5a2c7bd32", "message": "Add tests for SettingsSyncIntentService\n\n- Add test for onCreate\n- Add test for onHandleIntent", "committedDate": "2020-09-08T12:10:41Z", "type": "commit"}, {"oid": "f8ed7e6aedced63fffa695c486600f52c7954f7e", "url": "https://github.com/opensrp/opensrp-client-core/commit/f8ed7e6aedced63fffa695c486600f52c7954f7e", "message": "Fix HTTPAgentTest#testPostPassesGivenCorrectUrl fail due to env", "committedDate": "2020-09-08T12:10:41Z", "type": "commit"}, {"oid": "f8ed7e6aedced63fffa695c486600f52c7954f7e", "url": "https://github.com/opensrp/opensrp-client-core/commit/f8ed7e6aedced63fffa695c486600f52c7954f7e", "message": "Fix HTTPAgentTest#testPostPassesGivenCorrectUrl fail due to env", "committedDate": "2020-09-08T12:10:41Z", "type": "forcePushed"}, {"oid": "b1a5675e3c70d81b4400399306622d0035eb766a", "url": "https://github.com/opensrp/opensrp-client-core/commit/b1a5675e3c70d81b4400399306622d0035eb766a", "message": "Merge branch 'master' into kigamba-tt-8-9-2020", "committedDate": "2020-09-11T10:21:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzMDczOQ==", "url": "https://github.com/opensrp/opensrp-client-core/pull/639#discussion_r487830739", "bodyText": "Any reason you removed this?", "author": "bennsimon", "createdAt": "2020-09-14T11:08:23Z", "path": "opensrp-app/src/main/java/org/smartregister/sync/helper/SyncSettingsServiceHelper.java", "diffHunk": "@@ -222,16 +222,4 @@ private JSONArray pullSettings(String directoryUrl, String accessToken) throws J\n     protected Response<String> getResponse(String completeUrl, String accessToken) {\n         return httpAgent.fetchWithCredentials(completeUrl, accessToken);\n     }\n-\n-    public void setHttpAgent(HTTPAgent httpAgent) {\n-        this.httpAgent = httpAgent;\n-    }\n-\n-    public void setBaseUrl(String baseUrl) {\n-        this.baseUrl = baseUrl;\n-    }\n-\n-    public void setSharedPreferences(AllSharedPreferences sharedPreferences) {\n-        this.sharedPreferences = sharedPreferences;\n-    }", "originalCommit": "b1a5675e3c70d81b4400399306622d0035eb766a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzODUzNw==", "url": "https://github.com/opensrp/opensrp-client-core/pull/639#discussion_r487838537", "bodyText": "I had added the setters on another testing PR. Their role was to enable setting the values instead of using the constructor. I no longer need them", "author": "ekigamba", "createdAt": "2020-09-14T11:23:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzMDczOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg0NzMyMg==", "url": "https://github.com/opensrp/opensrp-client-core/pull/639#discussion_r487847322", "bodyText": "cool", "author": "bennsimon", "createdAt": "2020-09-14T11:42:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzMDczOQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzMTA2NQ==", "url": "https://github.com/opensrp/opensrp-client-core/pull/639#discussion_r487831065", "bodyText": "Could you update the test name to match the convention.", "author": "bennsimon", "createdAt": "2020-09-14T11:09:06Z", "path": "opensrp-app/src/test/java/org/smartregister/sync/intent/SettingsSyncIntentServiceTest.java", "diffHunk": "@@ -27,11 +33,18 @@ public void setUp() throws Exception {\n                 .get();\n     }\n \n-    @Ignore\n+    @After\n+    public void tearDown() throws Exception {\n+        ReflectionHelpers.setStaticField(Context.class, \"context\", null);\n+    }\n+\n     @Test\n     public void onHandleIntent() {", "originalCommit": "b1a5675e3c70d81b4400399306622d0035eb766a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzOTE1NQ==", "url": "https://github.com/opensrp/opensrp-client-core/pull/639#discussion_r487839155", "bodyText": "Cool", "author": "ekigamba", "createdAt": "2020-09-14T11:25:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzMTA2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "19a19dfcc8ef701d670eda1c174b04c93fd96a6c", "chunk": "diff --git a/opensrp-app/src/test/java/org/smartregister/sync/intent/SettingsSyncIntentServiceTest.java b/opensrp-app/src/test/java/org/smartregister/sync/intent/SettingsSyncIntentServiceTest.java\nindex c28c623e..71a96613 100644\n--- a/opensrp-app/src/test/java/org/smartregister/sync/intent/SettingsSyncIntentServiceTest.java\n+++ b/opensrp-app/src/test/java/org/smartregister/sync/intent/SettingsSyncIntentServiceTest.java\n\n@@ -39,7 +39,7 @@ public class SettingsSyncIntentServiceTest extends BaseRobolectricUnitTest {\n     }\n \n     @Test\n-    public void onHandleIntent() {\n+    public void onHandleIntentShouldScheduleJobRequestAndInvokeProcessSettingsWhenGivenNullIntent() {\n         settingsSyncIntentService = Mockito.spy(settingsSyncIntentService);\n         settingsSyncIntentService.onHandleIntent(null);\n \n"}}, {"oid": "935204e2b53042c87e342c4b2133914d16ade3c3", "url": "https://github.com/opensrp/opensrp-client-core/commit/935204e2b53042c87e342c4b2133914d16ade3c3", "message": "Merge branch 'master' into kigamba-tt-8-9-2020", "committedDate": "2020-09-14T11:25:36Z", "type": "commit"}, {"oid": "19a19dfcc8ef701d670eda1c174b04c93fd96a6c", "url": "https://github.com/opensrp/opensrp-client-core/commit/19a19dfcc8ef701d670eda1c174b04c93fd96a6c", "message": "Rename method test to follow should-when convention", "committedDate": "2020-09-14T11:28:44Z", "type": "commit"}]}