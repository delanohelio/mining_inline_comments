{"pr_number": 716, "pr_title": "add findPlanDefinitionSearchByPlanId", "pr_createdAt": "2020-12-09T16:04:08Z", "pr_url": "https://github.com/opensrp/opensrp-client-core/pull/716", "timeline": [{"oid": "819f61d74b74975f147eeb19f70ffef526de29e2", "url": "https://github.com/opensrp/opensrp-client-core/commit/819f61d74b74975f147eeb19f70ffef526de29e2", "message": "add findPlanDefinitionSearchByPlanId", "committedDate": "2020-12-09T16:03:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ0NDk2NA==", "url": "https://github.com/opensrp/opensrp-client-core/pull/716#discussion_r539444964", "bodyText": "Since you are using format, can you remove the string concatenation", "author": "githengi", "createdAt": "2020-12-09T16:17:19Z", "path": "opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java", "diffHunk": "@@ -86,6 +94,33 @@ public void addOrUpdate(PlanDefinition planDefinition, String jurisdiction) {\n         return getPlanDefinitionRepository().findPlanDefinitionByIds(planIds);\n     }\n \n+    public List<PlanDefinitionSearch> findPlanDefinitionSearchByPlanId(@NonNull String planId) {\n+        List<PlanDefinitionSearch> planDefinitionSearchSet = new ArrayList<>();\n+        String query = String.format(\"SELECT \" + StringUtils.join(COLUMNS, \",\") + \" FROM %s \" +\n+                \"WHERE %s=? \", PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);", "originalCommit": "819f61d74b74975f147eeb19f70ffef526de29e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxMjgxMw==", "url": "https://github.com/opensrp/opensrp-client-core/pull/716#discussion_r540012813", "bodyText": "updated", "author": "bennsimon", "createdAt": "2020-12-10T09:33:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ0NDk2NA=="}], "type": "inlineReview", "revised_code": {"commit": "5b632bf95a14ce0496693157eeba84e341a0f25f", "chunk": "diff --git a/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java b/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\nindex a62d31ed..75f2d000 100644\n--- a/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\n+++ b/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\n\n@@ -96,8 +96,8 @@ public class PlanDefinitionSearchRepository extends BaseRepository {\n \n     public List<PlanDefinitionSearch> findPlanDefinitionSearchByPlanId(@NonNull String planId) {\n         List<PlanDefinitionSearch> planDefinitionSearchSet = new ArrayList<>();\n-        String query = String.format(\"SELECT \" + StringUtils.join(COLUMNS, \",\") + \" FROM %s \" +\n-                \"WHERE %s=? \", PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);\n+        String query = String.format(\"SELECT %s FROM %s \" +\n+                \"WHERE %s=? \", StringUtils.join(COLUMNS, \",\"), PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);\n         try (Cursor cursor = getReadableDatabase().rawQuery(query, new String[]{planId})) {\n             if (cursor != null) {\n                 while (cursor.moveToNext()) {\n"}}, {"oid": "5b632bf95a14ce0496693157eeba84e341a0f25f", "url": "https://github.com/opensrp/opensrp-client-core/commit/5b632bf95a14ce0496693157eeba84e341a0f25f", "message": "code cleanup", "committedDate": "2020-12-10T08:09:07Z", "type": "commit"}, {"oid": "ce4a62c2eb5dec7d71a3d2da615e2555ef7235b4", "url": "https://github.com/opensrp/opensrp-client-core/commit/ce4a62c2eb5dec7d71a3d2da615e2555ef7235b4", "message": "Merge branch 'master' into add-plandefinitionsearch", "committedDate": "2020-12-10T09:32:59Z", "type": "commit"}, {"oid": "faa848050191ad90ea85860b8c715de65881c95c", "url": "https://github.com/opensrp/opensrp-client-core/commit/faa848050191ad90ea85860b8c715de65881c95c", "message": "update snapshot version", "committedDate": "2020-12-10T09:34:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAyODk3Ng==", "url": "https://github.com/opensrp/opensrp-client-core/pull/716#discussion_r540028976", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String query = String.format(\"SELECT %s FROM %s \" +\n          \n          \n            \n                            \"WHERE %s=? \", StringUtils.join(COLUMNS, \",\"), PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);\n          \n          \n            \n                    String query = String.format(\"SELECT %s FROM %s WHERE %s=? \", \n          \n          \n            \n                    StringUtils.join(COLUMNS, \",\"), PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);", "author": "githengi", "createdAt": "2020-12-10T09:55:35Z", "path": "opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java", "diffHunk": "@@ -86,6 +94,33 @@ public void addOrUpdate(PlanDefinition planDefinition, String jurisdiction) {\n         return getPlanDefinitionRepository().findPlanDefinitionByIds(planIds);\n     }\n \n+    public List<PlanDefinitionSearch> findPlanDefinitionSearchByPlanId(@NonNull String planId) {\n+        List<PlanDefinitionSearch> planDefinitionSearchSet = new ArrayList<>();\n+        String query = String.format(\"SELECT %s FROM %s \" +\n+                \"WHERE %s=? \", StringUtils.join(COLUMNS, \",\"), PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);", "originalCommit": "faa848050191ad90ea85860b8c715de65881c95c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "aef9e7e07760cb40e6915703070ea60584ed813c", "chunk": "diff --git a/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java b/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\nindex 75f2d000..56235597 100644\n--- a/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\n+++ b/opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\n\n@@ -96,8 +96,8 @@ public class PlanDefinitionSearchRepository extends BaseRepository {\n \n     public List<PlanDefinitionSearch> findPlanDefinitionSearchByPlanId(@NonNull String planId) {\n         List<PlanDefinitionSearch> planDefinitionSearchSet = new ArrayList<>();\n-        String query = String.format(\"SELECT %s FROM %s \" +\n-                \"WHERE %s=? \", StringUtils.join(COLUMNS, \",\"), PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);\n+        String query = String.format(\"SELECT %s FROM %s WHERE %s=? \", \n+        StringUtils.join(COLUMNS, \",\"), PLAN_DEFINITION_SEARCH_TABLE, PLAN_ID);\n         try (Cursor cursor = getReadableDatabase().rawQuery(query, new String[]{planId})) {\n             if (cursor != null) {\n                 while (cursor.moveToNext()) {\n"}}, {"oid": "aef9e7e07760cb40e6915703070ea60584ed813c", "url": "https://github.com/opensrp/opensrp-client-core/commit/aef9e7e07760cb40e6915703070ea60584ed813c", "message": "Update opensrp-app/src/main/java/org/smartregister/repository/PlanDefinitionSearchRepository.java\n\nCo-authored-by: Samuel Githengi <samuel.githengi@gmail.com>", "committedDate": "2020-12-10T09:57:26Z", "type": "commit"}]}