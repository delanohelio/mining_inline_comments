{"pr_number": 962, "pr_title": "Fix missing Request parameter for Adgeneration bidder", "pr_createdAt": "2020-10-19T11:44:30Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/962", "timeline": [{"oid": "896edee169c55dbef84a0d5e73e094780db40c79", "url": "https://github.com/prebid/prebid-server-java/commit/896edee169c55dbef84a0d5e73e094780db40c79", "message": "Fix missing Request parameter for Adgeneration bidder", "committedDate": "2020-10-19T11:39:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczMTk4OQ==", "url": "https://github.com/prebid/prebid-server-java/pull/962#discussion_r507731989", "bodyText": "Minor. It may looks simpler if we extract needed param to separate variable, like:\nsourceTid = source != null ? source.getTid() : null;\nif (StringUtils.isNotEmpty(sourceTid))\n{\n    //...\n}\n\nThe same can be done for site.getPage() in case above and device.getUa() below.", "author": "rpanchyk", "createdAt": "2020-10-19T13:10:01Z", "path": "src/main/java/org/prebid/server/bidder/adgeneration/AdgenerationBidder.java", "diffHunk": "@@ -113,13 +115,17 @@ private String getUri(String endpointUrl, String adSize, String id, String curre\n                 .addParameter(\"adapterver\", VERSION);\n \n         if (StringUtils.isNotBlank(adSize)) {\n-            uriBuilder.addParameter(\"size\", adSize);\n+            uriBuilder.addParameter(\"sizes\", adSize);\n         }\n \n         if (site != null && StringUtils.isNotBlank(site.getPage())) {\n             uriBuilder.addParameter(\"tp\", site.getPage());\n         }\n \n+        if (source != null && StringUtils.isNotBlank(source.getTid())) {", "originalCommit": "896edee169c55dbef84a0d5e73e094780db40c79", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cac1ab089de7a8bfa8dd9e61cee555c38ca36e0b", "chunk": "diff --git a/src/main/java/org/prebid/server/bidder/adgeneration/AdgenerationBidder.java b/src/main/java/org/prebid/server/bidder/adgeneration/AdgenerationBidder.java\nindex 620b4dc75..7ab45c530 100644\n--- a/src/main/java/org/prebid/server/bidder/adgeneration/AdgenerationBidder.java\n+++ b/src/main/java/org/prebid/server/bidder/adgeneration/AdgenerationBidder.java\n\n@@ -118,12 +118,14 @@ public class AdgenerationBidder implements Bidder<Void> {\n             uriBuilder.addParameter(\"sizes\", adSize);\n         }\n \n-        if (site != null && StringUtils.isNotBlank(site.getPage())) {\n-            uriBuilder.addParameter(\"tp\", site.getPage());\n+        final String page = site != null ? site.getPage() : null;\n+        if (StringUtils.isNotBlank(page)) {\n+            uriBuilder.addParameter(\"tp\", page);\n         }\n \n-        if (source != null && StringUtils.isNotBlank(source.getTid())) {\n-            uriBuilder.addParameter(\"transactionid\", source.getTid());\n+        final String transactionid = source != null ? source.getTid() : null;\n+        if (StringUtils.isNotBlank(transactionid)) {\n+            uriBuilder.addParameter(\"transactionid\", transactionid);\n         }\n \n         return uriBuilder.toString();\n"}}, {"oid": "cac1ab089de7a8bfa8dd9e61cee555c38ca36e0b", "url": "https://github.com/prebid/prebid-server-java/commit/cac1ab089de7a8bfa8dd9e61cee555c38ca36e0b", "message": "Fixes after review", "committedDate": "2020-10-19T13:21:45Z", "type": "commit"}]}