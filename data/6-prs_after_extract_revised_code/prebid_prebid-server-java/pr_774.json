{"pr_number": 774, "pr_title": "Allow zero price for deal bids", "pr_createdAt": "2020-06-23T11:47:59Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/774", "timeline": [{"oid": "351a3e91231c9d5718673d27c0aa20bcb3384395", "url": "https://github.com/prebid/prebid-server-java/commit/351a3e91231c9d5718673d27c0aa20bcb3384395", "message": "Allow zero price for deal bids", "committedDate": "2020-06-23T11:46:48Z", "type": "commit"}, {"oid": "ecfceb9ece578886318ffb3a643dfdb7d882cf21", "url": "https://github.com/prebid/prebid-server-java/commit/ecfceb9ece578886318ffb3a643dfdb7d882cf21", "message": "Cache deal zero price bids and update validation in rubicon bidder", "committedDate": "2020-06-24T11:41:13Z", "type": "commit"}, {"oid": "7ec53ff1b8d3c86e5c5a7ea6b0d00c5cefcd57cf", "url": "https://github.com/prebid/prebid-server-java/commit/7ec53ff1b8d3c86e5c5a7ea6b0d00c5cefcd57cf", "message": "Merge branch 'master' into allow-zero-price-deals-bids\n\n# Conflicts:\n#\tsrc/main/java/org/prebid/server/bidder/rubicon/RubiconBidder.java\n#\tsrc/test/java/org/prebid/server/bidder/rubicon/RubiconBidderTest.java", "committedDate": "2020-08-20T14:30:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAyOTE4MQ==", "url": "https://github.com/prebid/prebid-server-java/pull/774#discussion_r474029181", "bodyText": "Pls rename to isValidForCaching.", "author": "rpanchyk", "createdAt": "2020-08-20T14:32:13Z", "path": "src/main/java/org/prebid/server/auction/BidResponseCreator.java", "diffHunk": "@@ -343,13 +343,18 @@ private static void tryAddWinningBidByBidder(Bid bid, String bidder,\n                     .auctionTimestamp(auctionTimestamp)\n                     .build();\n \n-            result = cacheService.cacheBidsOpenrtb(bidsWithNonZeroPrice, imps, cacheContext, account, eventsContext,\n+            result = cacheService.cacheBidsOpenrtb(bidsValidToBeCached, imps, cacheContext, account, eventsContext,\n                     timeout)\n                     .map(cacheResult -> addNotCachedBids(cacheResult, bidsToCache));\n         }\n         return result;\n     }\n \n+    private static boolean isValidForToBeCached(Bid bid) {", "originalCommit": "7ec53ff1b8d3c86e5c5a7ea6b0d00c5cefcd57cf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e9c8d1cb5705f128449b4d4bb239ca6dc11ff489", "chunk": "diff --git a/src/main/java/org/prebid/server/auction/BidResponseCreator.java b/src/main/java/org/prebid/server/auction/BidResponseCreator.java\nindex c9f41661..dc20c060 100644\n--- a/src/main/java/org/prebid/server/auction/BidResponseCreator.java\n+++ b/src/main/java/org/prebid/server/auction/BidResponseCreator.java\n\n@@ -350,7 +350,7 @@ public class BidResponseCreator {\n         return result;\n     }\n \n-    private static boolean isValidForToBeCached(Bid bid) {\n+    private static boolean isValidForCaching(Bid bid) {\n         final BigDecimal price = bid.getPrice();\n         return bid.getDealid() != null ? price.compareTo(BigDecimal.ZERO) >= 0 : price.compareTo(BigDecimal.ZERO) > 0;\n     }\n"}}, {"oid": "f9a03ff1bb6cd18ab1d1e632262ee8cff1ce1fb5", "url": "https://github.com/prebid/prebid-server-java/commit/f9a03ff1bb6cd18ab1d1e632262ee8cff1ce1fb5", "message": "Merge branch 'master' into allow-zero-price-deals-bids", "committedDate": "2020-09-07T08:49:41Z", "type": "commit"}, {"oid": "e9c8d1cb5705f128449b4d4bb239ca6dc11ff489", "url": "https://github.com/prebid/prebid-server-java/commit/e9c8d1cb5705f128449b4d4bb239ca6dc11ff489", "message": "Fix typo", "committedDate": "2020-09-07T08:54:03Z", "type": "commit"}, {"oid": "fcb6ebd40c1b4e03a4131dc165fe788cc3d3edae", "url": "https://github.com/prebid/prebid-server-java/commit/fcb6ebd40c1b4e03a4131dc165fe788cc3d3edae", "message": "Merge branch 'master' into allow-zero-price-deals-bids\n\n# Conflicts:\n#\tsrc/main/java/org/prebid/server/auction/BidResponseCreator.java", "committedDate": "2020-10-08T14:15:57Z", "type": "commit"}, {"oid": "71be4f48880aad1bbdde6bcea53c7cad5e41fa76", "url": "https://github.com/prebid/prebid-server-java/commit/71be4f48880aad1bbdde6bcea53c7cad5e41fa76", "message": "Merge branch 'master' into allow-zero-price-deals-bids", "committedDate": "2020-10-09T15:26:05Z", "type": "commit"}]}