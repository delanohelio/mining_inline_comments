{"pr_number": 649, "pr_title": "Add Brightroll adapter config", "pr_createdAt": "2020-03-31T15:17:22Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/649", "timeline": [{"oid": "b42cb0af68975e5d8f9685f7f233ecdbc7e817d9", "url": "https://github.com/prebid/prebid-server-java/commit/b42cb0af68975e5d8f9685f7f233ecdbc7e817d9", "message": "Add publisher specific configuration to Brightroll bidder config\n\nUpdate tests.\n\nQ.\n\n`/bid/bid/rubiconpbs` is it ok ?\nWe are replace badv, badc by `accounts[n].id`\n`badv` is not used anywhere in the code.", "committedDate": "2020-03-31T13:32:31Z", "type": "commit"}, {"oid": "bac7d372db5341785a61fe8b218f5b11691c8052", "url": "https://github.com/prebid/prebid-server-java/commit/bac7d372db5341785a61fe8b218f5b11691c8052", "message": "Add Brightroll badv insert", "committedDate": "2020-03-31T15:12:04Z", "type": "commit"}, {"oid": "d5c858b6e07b710ce714d6d639c4a102c58b49f2", "url": "https://github.com/prebid/prebid-server-java/commit/d5c858b6e07b710ce714d6d639c4a102c58b49f2", "message": "Merge branch 'master' into brightroll-account\n\n# Conflicts:\n#\tsrc/test/java/org/prebid/server/it/BrightrollTest.java", "committedDate": "2020-04-03T14:18:42Z", "type": "commit"}, {"oid": "b451e15246e34c0213b844ff8a49af5ea56f3c59", "url": "https://github.com/prebid/prebid-server-java/commit/b451e15246e34c0213b844ff8a49af5ea56f3c59", "message": "fix line", "committedDate": "2020-04-03T14:42:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDgzNTI4MA==", "url": "https://github.com/prebid/prebid-server-java/pull/649#discussion_r404835280", "bodyText": "Since BidderAccount is intended for use exclusively within Spring configuration and wiring code it shouldn't be here. Please create another holder class in org.prebid.server.bidder.brightroll.model package that will be used by the bidder implementation.", "author": "schernysh", "createdAt": "2020-04-07T14:04:54Z", "path": "src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java", "diffHunk": "@@ -27,11 +27,11 @@\n import org.prebid.server.proto.openrtb.ext.ExtPrebid;\n import org.prebid.server.proto.openrtb.ext.request.brightroll.ExtImpBrightroll;\n import org.prebid.server.proto.openrtb.ext.response.BidType;\n+import org.prebid.server.spring.config.bidder.model.BidderAccount;", "originalCommit": "b451e15246e34c0213b844ff8a49af5ea56f3c59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk5ODkwMw==", "url": "https://github.com/prebid/prebid-server-java/pull/649#discussion_r404998903", "bodyText": "Thanks, good point to separate logic", "author": "DGarbar", "createdAt": "2020-04-07T17:48:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDgzNTI4MA=="}], "type": "inlineReview", "revised_code": {"commit": "82d478839b3707b609312ba7e2f218103854f54f", "chunk": "diff --git a/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java b/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java\nindex e0d1afb29..01f7396de 100644\n--- a/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java\n+++ b/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java\n\n@@ -27,9 +29,7 @@ import org.prebid.server.json.JacksonMapper;\n import org.prebid.server.proto.openrtb.ext.ExtPrebid;\n import org.prebid.server.proto.openrtb.ext.request.brightroll.ExtImpBrightroll;\n import org.prebid.server.proto.openrtb.ext.response.BidType;\n-import org.prebid.server.spring.config.bidder.model.BidderAccount;\n import org.prebid.server.util.HttpUtil;\n-import org.springframework.util.StringUtils;\n \n import java.util.ArrayList;\n import java.util.Collections;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDgzNjM2OQ==", "url": "https://github.com/prebid/prebid-server-java/pull/649#discussion_r404836369", "bodyText": "While it is not directly related to this PR, let's fix this dependency as well.", "author": "schernysh", "createdAt": "2020-04-07T14:06:28Z", "path": "src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java", "diffHunk": "@@ -27,11 +27,11 @@\n import org.prebid.server.proto.openrtb.ext.ExtPrebid;\n import org.prebid.server.proto.openrtb.ext.request.brightroll.ExtImpBrightroll;\n import org.prebid.server.proto.openrtb.ext.response.BidType;\n+import org.prebid.server.spring.config.bidder.model.BidderAccount;\n import org.prebid.server.util.HttpUtil;\n import org.springframework.util.StringUtils;", "originalCommit": "b451e15246e34c0213b844ff8a49af5ea56f3c59", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "82d478839b3707b609312ba7e2f218103854f54f", "chunk": "diff --git a/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java b/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java\nindex e0d1afb29..01f7396de 100644\n--- a/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java\n+++ b/src/main/java/org/prebid/server/bidder/brightroll/BrightrollBidder.java\n\n@@ -27,9 +29,7 @@ import org.prebid.server.json.JacksonMapper;\n import org.prebid.server.proto.openrtb.ext.ExtPrebid;\n import org.prebid.server.proto.openrtb.ext.request.brightroll.ExtImpBrightroll;\n import org.prebid.server.proto.openrtb.ext.response.BidType;\n-import org.prebid.server.spring.config.bidder.model.BidderAccount;\n import org.prebid.server.util.HttpUtil;\n-import org.springframework.util.StringUtils;\n \n import java.util.ArrayList;\n import java.util.Collections;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg0MDAwNw==", "url": "https://github.com/prebid/prebid-server-java/pull/649#discussion_r404840007", "bodyText": "Please see how this is handled for FacebookBidder (FacebookConfigurationProperties). There is no need to add this field to generic class for properties.", "author": "schernysh", "createdAt": "2020-04-07T14:11:31Z", "path": "src/main/java/org/prebid/server/spring/config/bidder/model/BidderConfigurationProperties.java", "diffHunk": "@@ -38,5 +38,7 @@\n     @NotNull\n     private UsersyncConfigurationProperties usersync;\n \n+    private List<BidderAccount> accounts;", "originalCommit": "b451e15246e34c0213b844ff8a49af5ea56f3c59", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "82d478839b3707b609312ba7e2f218103854f54f", "chunk": "diff --git a/src/main/java/org/prebid/server/spring/config/bidder/model/BidderConfigurationProperties.java b/src/main/java/org/prebid/server/spring/config/bidder/model/BidderConfigurationProperties.java\nindex 34db0c847..96ce0d784 100644\n--- a/src/main/java/org/prebid/server/spring/config/bidder/model/BidderConfigurationProperties.java\n+++ b/src/main/java/org/prebid/server/spring/config/bidder/model/BidderConfigurationProperties.java\n\n@@ -38,7 +38,5 @@ public class BidderConfigurationProperties {\n     @NotNull\n     private UsersyncConfigurationProperties usersync;\n \n-    private List<BidderAccount> accounts;\n-\n     private Map<String, String> extraInfo;\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg0MDcwMA==", "url": "https://github.com/prebid/prebid-server-java/pull/649#discussion_r404840700", "bodyText": "This class should be an inner class of BrightrollConfiguration.", "author": "schernysh", "createdAt": "2020-04-07T14:12:22Z", "path": "src/main/java/org/prebid/server/spring/config/bidder/model/BidderAccount.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package org.prebid.server.spring.config.bidder.model;\n+\n+import lombok.AllArgsConstructor;\n+import lombok.Data;\n+import lombok.NoArgsConstructor;\n+\n+import java.util.List;\n+\n+@Data\n+@NoArgsConstructor\n+@AllArgsConstructor\n+public class BidderAccount {", "originalCommit": "b451e15246e34c0213b844ff8a49af5ea56f3c59", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "82d478839b3707b609312ba7e2f218103854f54f", "chunk": "diff --git a/src/main/java/org/prebid/server/spring/config/bidder/model/BidderAccount.java b/src/main/java/org/prebid/server/bidder/brightroll/model/PublisherOverride.java\nsimilarity index 59%\nrename from src/main/java/org/prebid/server/spring/config/bidder/model/BidderAccount.java\nrename to src/main/java/org/prebid/server/bidder/brightroll/model/PublisherOverride.java\nindex 40447dcd6..772f80989 100644\n--- a/src/main/java/org/prebid/server/spring/config/bidder/model/BidderAccount.java\n+++ b/src/main/java/org/prebid/server/bidder/brightroll/model/PublisherOverride.java\n\n@@ -1,18 +1,13 @@\n-package org.prebid.server.spring.config.bidder.model;\n+package org.prebid.server.bidder.brightroll.model;\n \n import lombok.AllArgsConstructor;\n-import lombok.Data;\n-import lombok.NoArgsConstructor;\n+import lombok.Value;\n \n import java.util.List;\n \n-@Data\n-@NoArgsConstructor\n-@AllArgsConstructor\n-public class BidderAccount {\n-\n-    private String id;\n-\n+@Value\n+@AllArgsConstructor(staticName = \"of\")\n+public class PublisherOverride {\n     /**\n      * Blocked advertisers.\n      */\n"}}, {"oid": "82d478839b3707b609312ba7e2f218103854f54f", "url": "https://github.com/prebid/prebid-server-java/commit/82d478839b3707b609312ba7e2f218103854f54f", "message": "Fix after changes", "committedDate": "2020-04-07T17:53:50Z", "type": "commit"}, {"oid": "b6969bf688c73c8db97df1dc95e512eb1b3b8d4c", "url": "https://github.com/prebid/prebid-server-java/commit/b6969bf688c73c8db97df1dc95e512eb1b3b8d4c", "message": "fix url path", "committedDate": "2020-04-08T06:29:00Z", "type": "commit"}]}