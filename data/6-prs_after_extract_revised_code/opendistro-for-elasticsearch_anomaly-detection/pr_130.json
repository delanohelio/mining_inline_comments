{"pr_number": 130, "pr_title": "fix dynamic setting of max detector/feature limit", "pr_createdAt": "2020-05-20T16:42:55Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/130", "timeline": [{"oid": "0db7bd6862963af208b3fd49b8be7613f163e8f3", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/0db7bd6862963af208b3fd49b8be7613f163e8f3", "message": "fix dynamic setting of max detector/feature limit", "committedDate": "2020-05-20T09:12:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE3NTU2MQ==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/130#discussion_r428175561", "bodyText": "maybe you can it to keep this line consistent with other lines?", "author": "yizheliu-amazon", "createdAt": "2020-05-20T17:12:02Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/ad/rest/RestIndexAnomalyDetectorAction.java", "diffHunk": "@@ -73,12 +77,16 @@ public RestIndexAnomalyDetectorAction(\n         this.requestTimeout = REQUEST_TIMEOUT.get(settings);\n         this.detectionInterval = DETECTION_INTERVAL.get(settings);\n         this.detectionWindowDelay = DETECTION_WINDOW_DELAY.get(settings);\n+        this.maxAnomalyDetectors = MAX_ANOMALY_DETECTORS.get(settings);\n+        this.maxAnomalyFeatures = MAX_ANOMALY_FEATURES.get(settings);\n         this.clusterService = clusterService;\n         // TODO: will add more cluster setting consumer later\n         // TODO: inject ClusterSettings only if clusterService is only used to get ClusterSettings\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(REQUEST_TIMEOUT, it -> requestTimeout = it);\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(DETECTION_INTERVAL, it -> detectionInterval = it);\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(DETECTION_WINDOW_DELAY, it -> detectionWindowDelay = it);\n+        clusterService.getClusterSettings().addSettingsUpdateConsumer(MAX_ANOMALY_DETECTORS, newVal -> maxAnomalyDetectors = newVal);", "originalCommit": "0db7bd6862963af208b3fd49b8be7613f163e8f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI1OTY4Ng==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/130#discussion_r428259686", "bodyText": "sure", "author": "ylwu-amzn", "createdAt": "2020-05-20T19:32:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE3NTU2MQ=="}], "type": "inlineReview", "revised_code": {"commit": "f2eec21fcea7c90c8cb93bca0cb8cde4bf0f2f3e", "chunk": "diff --git a/src/main/java/com/amazon/opendistroforelasticsearch/ad/rest/RestIndexAnomalyDetectorAction.java b/src/main/java/com/amazon/opendistroforelasticsearch/ad/rest/RestIndexAnomalyDetectorAction.java\nindex 3e61e53..c40fd0e 100644\n--- a/src/main/java/com/amazon/opendistroforelasticsearch/ad/rest/RestIndexAnomalyDetectorAction.java\n+++ b/src/main/java/com/amazon/opendistroforelasticsearch/ad/rest/RestIndexAnomalyDetectorAction.java\n\n@@ -85,7 +85,7 @@ public class RestIndexAnomalyDetectorAction extends BaseRestHandler {\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(REQUEST_TIMEOUT, it -> requestTimeout = it);\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(DETECTION_INTERVAL, it -> detectionInterval = it);\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(DETECTION_WINDOW_DELAY, it -> detectionWindowDelay = it);\n-        clusterService.getClusterSettings().addSettingsUpdateConsumer(MAX_ANOMALY_DETECTORS, newVal -> maxAnomalyDetectors = newVal);\n+        clusterService.getClusterSettings().addSettingsUpdateConsumer(MAX_ANOMALY_DETECTORS, it -> maxAnomalyDetectors = it);\n         clusterService.getClusterSettings().addSettingsUpdateConsumer(MAX_ANOMALY_FEATURES, it -> maxAnomalyFeatures = it);\n     }\n \n"}}, {"oid": "f2eec21fcea7c90c8cb93bca0cb8cde4bf0f2f3e", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/f2eec21fcea7c90c8cb93bca0cb8cde4bf0f2f3e", "message": "renmae to it to keep consistent", "committedDate": "2020-05-20T19:32:32Z", "type": "commit"}]}