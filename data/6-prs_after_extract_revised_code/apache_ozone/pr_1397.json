{"pr_number": 1397, "pr_title": "HDDS-4211. [OFS] Better owner and group display for listing Ozone volumes and buckets", "pr_createdAt": "2020-09-04T20:37:27Z", "pr_url": "https://github.com/apache/ozone/pull/1397", "timeline": [{"oid": "e0994f23437c81deae20b66316b6724a044afcc5", "url": "https://github.com/apache/ozone/commit/e0994f23437c81deae20b66316b6724a044afcc5", "message": "HDDS-4211. [OFS] Better owner and group display for listing Ozone volumes and buckets\n\nChange-Id: I28a4d6dc8756c63b9ac242f283c3ed0b0f0b40c8", "committedDate": "2020-09-04T20:35:10Z", "type": "commit"}, {"oid": "245a16787cb67b31c30027c72eee7990c7a6e6ac", "url": "https://github.com/apache/ozone/commit/245a16787cb67b31c30027c72eee7990c7a6e6ac", "message": "Update test testListStatusRootAndVolumeNonRecursive.\n\nChange-Id: I5286aadd344dca405c062ed6c4942112b8754f8b", "committedDate": "2020-09-04T21:19:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0NjMxMA==", "url": "https://github.com/apache/ozone/pull/1397#discussion_r485046310", "bodyText": "NIT: The comment is not accurate. The ACLs will not be able to provider owner and group information. We might add owner information as bucket metadata in future.", "author": "xiaoyuyao", "createdAt": "2020-09-08T16:23:34Z", "path": "hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicRootedOzoneClientAdapterImpl.java", "diffHunk": "@@ -972,24 +992,26 @@ private static FileStatusAdapter getFileStatusAdapterForVolume(\n    * Generate a FileStatusAdapter for a bucket.\n    * @param ozoneBucket OzoneBucket object.\n    * @param uri Full URI to OFS root.\n+   * @param owner Owner of the parent volume of the bucket.\n+   * @param group Group of the parent volume of the bucket.\n    * @return FileStatusAdapter for a bucket.\n    */\n   private static FileStatusAdapter getFileStatusAdapterForBucket(\n-      OzoneBucket ozoneBucket, URI uri, String username) {\n+      OzoneBucket ozoneBucket, URI uri, String owner, String group) {\n     String pathStr = uri.toString() +\n         OZONE_URI_DELIMITER + ozoneBucket.getVolumeName() +\n         OZONE_URI_DELIMITER + ozoneBucket.getName();\n     if (LOG.isDebugEnabled()) {\n-      LOG.debug(\"getFileStatusAdapterForBucket: ozoneBucket={}, pathStr={}, \"\n-              + \"username={}\", ozoneBucket.getVolumeName() + OZONE_URI_DELIMITER\n-              + ozoneBucket.getName(), pathStr, username);\n+      LOG.debug(\"getFileStatusAdapterForBucket: ozoneBucket={}, pathStr={}\",\n+          ozoneBucket.getVolumeName() + OZONE_URI_DELIMITER +\n+              ozoneBucket.getName(), pathStr);\n     }\n     Path path = new Path(pathStr);\n     return new FileStatusAdapter(0L, path, true, (short)0, 0L,\n         ozoneBucket.getCreationTime().getEpochSecond() * 1000, 0L,\n-        FsPermission.getDirDefault().toShort(),  // TODO: derive from ACLs later\n-        // TODO: revisit owner and group\n-        username, username, path, new BlockLocation[0]);\n+        FsPermission.getDirDefault().toShort(),\n+        // TODO: maybe derive owner and group from ACLs later", "originalCommit": "245a16787cb67b31c30027c72eee7990c7a6e6ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgyMDk3OA==", "url": "https://github.com/apache/ozone/pull/1397#discussion_r485820978", "bodyText": "Thanks! Removed the comment.", "author": "smengcl", "createdAt": "2020-09-09T18:16:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0NjMxMA=="}], "type": "inlineReview", "revised_code": {"commit": "0ca182aaee8b52713cb54b50daa917284b79ec0c", "chunk": "diff --git a/hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicRootedOzoneClientAdapterImpl.java b/hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicRootedOzoneClientAdapterImpl.java\nindex 09fc392a9..848119d5f 100644\n--- a/hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicRootedOzoneClientAdapterImpl.java\n+++ b/hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicRootedOzoneClientAdapterImpl.java\n\n@@ -1010,7 +1010,6 @@ private static FileStatusAdapter getFileStatusAdapterForBucket(\n     return new FileStatusAdapter(0L, path, true, (short)0, 0L,\n         ozoneBucket.getCreationTime().getEpochSecond() * 1000, 0L,\n         FsPermission.getDirDefault().toShort(),\n-        // TODO: maybe derive owner and group from ACLs later\n         owner, group, path, new BlockLocation[0]);\n   }\n \n"}}, {"oid": "0ca182aaee8b52713cb54b50daa917284b79ec0c", "url": "https://github.com/apache/ozone/commit/0ca182aaee8b52713cb54b50daa917284b79ec0c", "message": "Remove inaccurate comment.\n\nChange-Id: If9a8f7106ad3a3eb3358e5118a4c08368588cb66", "committedDate": "2020-09-09T18:19:49Z", "type": "commit"}]}