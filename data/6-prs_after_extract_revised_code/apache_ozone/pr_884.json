{"pr_number": 884, "pr_title": "HDDS-2406. Ozone shell key get throws IllegalArgumentException if pipeline is empty.", "pr_createdAt": "2020-04-29T09:03:50Z", "pr_url": "https://github.com/apache/ozone/pull/884", "timeline": [{"oid": "392f60bf08292ab562026c4d9aaaa246f4366bad", "url": "https://github.com/apache/ozone/commit/392f60bf08292ab562026c4d9aaaa246f4366bad", "message": "HDDS-2406. Ozone shell key get throws IllegalArgumentException if pipeline is empty.", "committedDate": "2020-04-29T07:06:51Z", "type": "commit"}, {"oid": "80b7c9b024d4e8cbe7a5f7293763fde4a47543da", "url": "https://github.com/apache/ozone/commit/80b7c9b024d4e8cbe7a5f7293763fde4a47543da", "message": "Fix checkstyle", "committedDate": "2020-04-29T07:23:40Z", "type": "commit"}, {"oid": "38277be5f71f9d35088f65bf292fbf52cb814b17", "url": "https://github.com/apache/ozone/commit/38277be5f71f9d35088f65bf292fbf52cb814b17", "message": "Fix unit test.", "committedDate": "2020-04-29T07:41:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3ODEzMQ==", "url": "https://github.com/apache/ozone/pull/884#discussion_r417278131", "bodyText": "I think NO_REPLICA_FOUND would better reflect the situation.  There may be other, live datanodes, and \"healthy nodes\" seem more related to placement of new data.", "author": "adoroszlai", "createdAt": "2020-04-29T12:32:30Z", "path": "hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java", "diffHunk": "@@ -168,7 +169,8 @@ private XceiverClientSpi acquireClient(Pipeline pipeline, boolean read)\n       throws IOException {\n     Preconditions.checkNotNull(pipeline);\n     Preconditions.checkArgument(pipeline.getNodes() != null);\n-    Preconditions.checkArgument(!pipeline.getNodes().isEmpty());\n+    Preconditions.checkArgument(!pipeline.getNodes().isEmpty(),\n+        FAILED_TO_FIND_HEALTHY_NODES);", "originalCommit": "38277be5f71f9d35088f65bf292fbf52cb814b17", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc1NTg5Nw==", "url": "https://github.com/apache/ozone/pull/884#discussion_r417755897", "bodyText": "Thanks @adoroszlai for review, I change it.", "author": "flirmnave", "createdAt": "2020-04-30T05:07:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3ODEzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "c6ed849228c825ddb01bb3ef5e68bb30b3e1ac8c", "chunk": "diff --git a/hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java b/hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java\nindex dfa4cfecb..ed0f0e208 100644\n--- a/hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java\n+++ b/hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java\n\n@@ -170,7 +170,7 @@ private XceiverClientSpi acquireClient(Pipeline pipeline, boolean read)\n     Preconditions.checkNotNull(pipeline);\n     Preconditions.checkArgument(pipeline.getNodes() != null);\n     Preconditions.checkArgument(!pipeline.getNodes().isEmpty(),\n-        FAILED_TO_FIND_HEALTHY_NODES);\n+        NO_REPLICA_FOUND);\n \n     synchronized (clientCache) {\n       XceiverClientSpi info = getClient(pipeline, read);\n"}}, {"oid": "c6ed849228c825ddb01bb3ef5e68bb30b3e1ac8c", "url": "https://github.com/apache/ozone/commit/c6ed849228c825ddb01bb3ef5e68bb30b3e1ac8c", "message": "Change Resultcode.", "committedDate": "2020-04-30T05:02:38Z", "type": "commit"}]}