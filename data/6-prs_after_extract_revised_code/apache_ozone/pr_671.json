{"pr_number": 671, "pr_title": "HDDS-3086. Failure running integration test it-freon.", "pr_createdAt": "2020-03-13T08:33:46Z", "pr_url": "https://github.com/apache/ozone/pull/671", "timeline": [{"oid": "40be338dd0a136e9276d125e64eb587ce3b0c844", "url": "https://github.com/apache/ozone/commit/40be338dd0a136e9276d125e64eb587ce3b0c844", "message": "HDDS-3086. Failure running integration test it-freon.", "committedDate": "2020-03-13T08:29:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEyMzE2Ng==", "url": "https://github.com/apache/ozone/pull/671#discussion_r392123166", "bodyText": "Can we make these configs to be the default, somewhere around MiniOzoneCluster?  Eg. let Builder.build() add them if they are not explicitly set.  I hope that would let us avoid repeating them for all integration tests.", "author": "adoroszlai", "createdAt": "2020-03-13T09:44:20Z", "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestDataValidate.java", "diffHunk": "@@ -33,9 +38,28 @@\n   private static MiniOzoneCluster cluster = null;\n \n   static void startCluster(OzoneConfiguration conf) throws Exception {\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_SERVER_PREFIX_KEY + \".\" +\n+                    DatanodeRatisServerConfig.RATIS_SERVER_REQUEST_TIMEOUT_KEY,\n+            3, TimeUnit.SECONDS);\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_SERVER_PREFIX_KEY + \".\" +\n+                    DatanodeRatisServerConfig.\n+                            RATIS_SERVER_WATCH_REQUEST_TIMEOUT_KEY,\n+            10, TimeUnit.SECONDS);\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_CLIENT_PREFIX_KEY+ \".\" +\n+                    \"rpc.request.timeout\",\n+            3, TimeUnit.SECONDS);\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_CLIENT_PREFIX_KEY+ \".\" +\n+                    \"watch.request.timeout\",\n+            10, TimeUnit.SECONDS);", "originalCommit": "40be338dd0a136e9276d125e64eb587ce3b0c844", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjE1MDE0OA==", "url": "https://github.com/apache/ozone/pull/671#discussion_r392150148", "bodyText": "yes, i think we can do that..But we need to ensure all other tests work with this config", "author": "bshashikant", "createdAt": "2020-03-13T10:38:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEyMzE2Ng=="}], "type": "inlineReview", "revised_code": {"commit": "2f8a3f8745e5ccec1896903e0780db2d87febebd", "chunk": "diff --git a/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestDataValidate.java b/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestDataValidate.java\nindex c65881232..1310585c8 100644\n--- a/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestDataValidate.java\n+++ b/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestDataValidate.java\n\n@@ -58,8 +58,8 @@ static void startCluster(OzoneConfiguration conf) throws Exception {\n     cluster = MiniOzoneCluster.newBuilder(conf)\n         .setNumDatanodes(5).setTotalPipelineNumLimit(8).build();\n     cluster.waitForClusterToBeReady();\n-    cluster.waitForPipelineTobeReady\n-            (HddsProtos.ReplicationFactor.THREE, 180000);\n+    cluster.waitForPipelineTobeReady(HddsProtos.ReplicationFactor.THREE,\n+            180000);\n   }\n \n   static void shutdownCluster() {\n"}}, {"oid": "2f8a3f8745e5ccec1896903e0780db2d87febebd", "url": "https://github.com/apache/ozone/commit/2f8a3f8745e5ccec1896903e0780db2d87febebd", "message": "Addressed checkstyle issues.", "committedDate": "2020-03-16T08:30:35Z", "type": "commit"}]}