{"pr_number": 405, "pr_title": "HDDS-2763. Handle Datanode registration in Recon.", "pr_createdAt": "2020-01-02T04:36:23Z", "pr_url": "https://github.com/apache/ozone/pull/405", "timeline": [{"oid": "94f6f33a24c5e6143ee653fde48227c314e53264", "url": "https://github.com/apache/ozone/commit/94f6f33a24c5e6143ee653fde48227c314e53264", "message": "HDDS-2763. Handle Datanode registration in Recon.", "committedDate": "2020-01-01T07:23:05Z", "type": "commit"}, {"oid": "f5ecf3559f67bf2f02ee8448b5541a572965ac88", "url": "https://github.com/apache/ozone/commit/f5ecf3559f67bf2f02ee8448b5541a572965ac88", "message": "HDDS-2763. Fix checkstyle issue.", "committedDate": "2020-01-02T04:33:39Z", "type": "commit"}, {"oid": "97a67d4b760fb135828bff6d429ae3e49e749a4d", "url": "https://github.com/apache/ozone/commit/97a67d4b760fb135828bff6d429ae3e49e749a4d", "message": "HDDS-2763. Remove log line.", "committedDate": "2020-01-02T04:40:43Z", "type": "commit"}, {"oid": "d3fe88e14058b5d2fd6a361fa8d49dfa244d98fd", "url": "https://github.com/apache/ozone/commit/d3fe88e14058b5d2fd6a361fa8d49dfa244d98fd", "message": "HDDS-2763. Fix checkstyle issue.", "committedDate": "2020-01-02T22:17:08Z", "type": "commit"}, {"oid": "020dd0673d5082dca93679fe7f05027555f5e499", "url": "https://github.com/apache/ozone/commit/020dd0673d5082dca93679fe7f05027555f5e499", "message": "HDDS-2763. Fix Datanode heartbeat issue, add more comments.", "committedDate": "2020-01-06T22:18:10Z", "type": "commit"}, {"oid": "4606ae22d6beca9c9682665e3a74e99aca046e1a", "url": "https://github.com/apache/ozone/commit/4606ae22d6beca9c9682665e3a74e99aca046e1a", "message": "HDDS-2763. Change Recon RPC server port to 9891.", "committedDate": "2020-01-06T22:55:39Z", "type": "commit"}, {"oid": "7dff8954e1acb0806f7c3e942c3acb18ef028939", "url": "https://github.com/apache/ozone/commit/7dff8954e1acb0806f7c3e942c3acb18ef028939", "message": "Merge remote-tracking branch 'upstream/master' into HDDS-2763-master", "committedDate": "2020-01-07T21:14:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA0MjEyNg==", "url": "https://github.com/apache/ozone/pull/405#discussion_r364042126", "bodyText": "Advice to add explicit imports.", "author": "swagle", "createdAt": "2020-01-08T02:36:07Z", "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java", "diffHunk": "@@ -64,6 +66,8 @@\n import org.apache.hadoop.net.NetUtils;\n \n import com.google.common.net.HostAndPort;\n+\n+import static org.apache.hadoop.hdds.recon.ReconConfigKeys.*;", "originalCommit": "7dff8954e1acb0806f7c3e942c3acb18ef028939", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA2MjU4Mw==", "url": "https://github.com/apache/ozone/pull/405#discussion_r364062583", "bodyText": "Fixed", "author": "avijayanhwx", "createdAt": "2020-01-08T04:48:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA0MjEyNg=="}], "type": "inlineReview", "revised_code": {"commit": "7bdd99eeb8eb6c5fd4bc12e29227081cd0d37b91", "chunk": "diff --git a/hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java b/hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java\nindex 5e663977fc..01d0e21c50 100644\n--- a/hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java\n+++ b/hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java\n\n@@ -67,7 +67,8 @@\n \n import com.google.common.net.HostAndPort;\n \n-import static org.apache.hadoop.hdds.recon.ReconConfigKeys.*;\n+import static org.apache.hadoop.hdds.recon.ReconConfigKeys.OZONE_RECON_ADDRESS_KEY;\n+import static org.apache.hadoop.hdds.recon.ReconConfigKeys.OZONE_RECON_DATANODE_PORT_DEFAULT;\n import static org.apache.hadoop.hdfs.DFSConfigKeys.DFS_DATANODE_DNS_INTERFACE_KEY;\n import static org.apache.hadoop.hdfs.DFSConfigKeys.DFS_DATANODE_DNS_NAMESERVER_KEY;\n import static org.apache.hadoop.hdfs.DFSConfigKeys.DFS_DATANODE_HOST_NAME_KEY;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA0NDE3NA==", "url": "https://github.com/apache/ozone/pull/405#discussion_r364044174", "bodyText": "Suggest rename: ozone.recon.server.address", "author": "swagle", "createdAt": "2020-01-08T02:47:52Z", "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/recon/ReconConfigKeys.java", "diffHunk": "@@ -32,9 +32,11 @@ private ReconConfigKeys() {\n \n   public static final String OZONE_RECON_DATANODE_ADDRESS_KEY =\n       \"ozone.recon.datanode.address\";\n+  public static final String OZONE_RECON_ADDRESS_KEY =\n+      \"ozone.recon.address\";", "originalCommit": "7dff8954e1acb0806f7c3e942c3acb18ef028939", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA1NzY5MA==", "url": "https://github.com/apache/ozone/pull/405#discussion_r364057690", "bodyText": "I went with ozone.recon.address to keep it consistent with ozone.om.address and ozone.scm.names.", "author": "avijayanhwx", "createdAt": "2020-01-08T04:14:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA0NDE3NA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "7bdd99eeb8eb6c5fd4bc12e29227081cd0d37b91", "url": "https://github.com/apache/ozone/commit/7bdd99eeb8eb6c5fd4bc12e29227081cd0d37b91", "message": "HDDS-2763. Address review comments, increase retry interval for Datanode-recon RPC call.", "committedDate": "2020-01-08T04:16:28Z", "type": "commit"}, {"oid": "48fc274802f158b71aff82f5d4ad1d634cb2e72c", "url": "https://github.com/apache/ozone/commit/48fc274802f158b71aff82f5d4ad1d634cb2e72c", "message": "Merge remote-tracking branch 'upstream/master' into HDDS-2763-master", "committedDate": "2020-01-08T19:37:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwMjg3NA==", "url": "https://github.com/apache/ozone/pull/405#discussion_r365002874", "bodyText": "This is already committed? Should we remove this change from here ?", "author": "anuengineer", "createdAt": "2020-01-09T23:03:35Z", "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/recon/ReconConfigKeys.java", "diffHunk": "@@ -32,9 +32,11 @@ private ReconConfigKeys() {\n \n   public static final String OZONE_RECON_DATANODE_ADDRESS_KEY =\n       \"ozone.recon.datanode.address\";\n+  public static final String OZONE_RECON_ADDRESS_KEY =\n+      \"ozone.recon.address\";\n   public static final String OZONE_RECON_DATANODE_BIND_HOST_KEY =\n       \"ozone.recon.datanode.bind.host\";\n   public static final String OZONE_RECON_DATANODE_BIND_HOST_DEFAULT =\n       \"0.0.0.0\";\n-  public static final int OZONE_RECON_DATANODE_PORT_DEFAULT = 9865;\n+  public static final int OZONE_RECON_DATANODE_PORT_DEFAULT = 9891;", "originalCommit": "48fc274802f158b71aff82f5d4ad1d634cb2e72c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAxODM4OA==", "url": "https://github.com/apache/ozone/pull/405#discussion_r365018388", "bodyText": "Yes, it can be removed", "author": "avijayanhwx", "createdAt": "2020-01-10T00:02:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwMjg3NA=="}], "type": "inlineReview", "revised_code": null}]}