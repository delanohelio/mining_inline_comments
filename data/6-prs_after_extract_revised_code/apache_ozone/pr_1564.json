{"pr_number": 1564, "pr_title": "HDDS-4437. Avoid unnecessary builder conversion in setting volume Quota/Owner request", "pr_createdAt": "2020-11-10T06:06:04Z", "pr_url": "https://github.com/apache/ozone/pull/1564", "timeline": [{"oid": "dd5cf53418ec0b43aaa584ff050c3b69e86e9a49", "url": "https://github.com/apache/ozone/commit/dd5cf53418ec0b43aaa584ff050c3b69e86e9a49", "message": "avoid unnecessary call of toBuilder", "committedDate": "2020-11-09T13:32:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk2ODY3MA==", "url": "https://github.com/apache/ozone/pull/1564#discussion_r520968670", "bodyText": "The variable name is a little confused IMHO.\nDo you mind that we change it to setPropertyRequestBuilder ?", "author": "cxorm", "createdAt": "2020-11-11T00:49:46Z", "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetOwnerRequest.java", "diffHunk": "@@ -65,12 +65,12 @@ public OMVolumeSetOwnerRequest(OMRequest omRequest) {\n   public OMRequest preExecute(OzoneManager ozoneManager) throws IOException {\n \n     long modificationTime = Time.now();\n-    SetVolumePropertyRequest modifiedRequest = getOmRequest()\n+    SetVolumePropertyRequest.Builder modifiedRequestBuilder = getOmRequest()", "originalCommit": "dd5cf53418ec0b43aaa584ff050c3b69e86e9a49", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4017223b3dc6717cf8ef69a5f53986e92c81d206", "chunk": "diff --git a/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetOwnerRequest.java b/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetOwnerRequest.java\nindex 40aaf0327b..f695da2c90 100644\n--- a/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetOwnerRequest.java\n+++ b/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetOwnerRequest.java\n\n@@ -65,12 +65,12 @@ public OMVolumeSetOwnerRequest(OMRequest omRequest) {\n   public OMRequest preExecute(OzoneManager ozoneManager) throws IOException {\n \n     long modificationTime = Time.now();\n-    SetVolumePropertyRequest.Builder modifiedRequestBuilder = getOmRequest()\n+    SetVolumePropertyRequest.Builder setPropertyRequestBuilder = getOmRequest()\n         .getSetVolumePropertyRequest().toBuilder()\n         .setModificationTime(modificationTime);\n \n     return getOmRequest().toBuilder()\n-        .setSetVolumePropertyRequest(modifiedRequestBuilder)\n+        .setSetVolumePropertyRequest(setPropertyRequestBuilder)\n         .setUserInfo(getUserInfo())\n         .build();\n   }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk2ODkzNQ==", "url": "https://github.com/apache/ozone/pull/1564#discussion_r520968935", "bodyText": "The same as above.", "author": "cxorm", "createdAt": "2020-11-11T00:50:25Z", "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java", "diffHunk": "@@ -71,12 +71,12 @@ public OMVolumeSetQuotaRequest(OMRequest omRequest) {\n   public OMRequest preExecute(OzoneManager ozoneManager) throws IOException {\n \n     long modificationTime = Time.now();\n-    SetVolumePropertyRequest modifiedRequest = getOmRequest()\n+    SetVolumePropertyRequest.Builder modifiedRequestBuilde = getOmRequest()", "originalCommit": "dd5cf53418ec0b43aaa584ff050c3b69e86e9a49", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4017223b3dc6717cf8ef69a5f53986e92c81d206", "chunk": "diff --git a/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java b/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java\nindex b74e7cf689..7cc2f03287 100644\n--- a/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java\n+++ b/hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java\n\n@@ -71,12 +71,12 @@ public OMVolumeSetQuotaRequest(OMRequest omRequest) {\n   public OMRequest preExecute(OzoneManager ozoneManager) throws IOException {\n \n     long modificationTime = Time.now();\n-    SetVolumePropertyRequest.Builder modifiedRequestBuilde = getOmRequest()\n+    SetVolumePropertyRequest.Builder setPropertyRequestBuilde = getOmRequest()\n         .getSetVolumePropertyRequest().toBuilder()\n         .setModificationTime(modificationTime);\n \n     return getOmRequest().toBuilder()\n-        .setSetVolumePropertyRequest(modifiedRequestBuilde)\n+        .setSetVolumePropertyRequest(setPropertyRequestBuilde)\n         .setUserInfo(getUserInfo())\n         .build();\n   }\n"}}, {"oid": "4017223b3dc6717cf8ef69a5f53986e92c81d206", "url": "https://github.com/apache/ozone/commit/4017223b3dc6717cf8ef69a5f53986e92c81d206", "message": "Edit variable name", "committedDate": "2020-11-12T05:36:50Z", "type": "commit"}]}