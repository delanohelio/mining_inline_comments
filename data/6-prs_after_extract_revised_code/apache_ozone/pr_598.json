{"pr_number": 598, "pr_title": "HDDS-3067. Fix Bug in Scrub Pipeline causing destory pipelines after SCM restart.", "pr_createdAt": "2020-02-25T01:27:25Z", "pr_url": "https://github.com/apache/ozone/pull/598", "timeline": [{"oid": "867aafbbbb078b8da543c63fe3670550850878d4", "url": "https://github.com/apache/ozone/commit/867aafbbbb078b8da543c63fe3670550850878d4", "message": "HDDS-3067. Fix Bug in Scrub Pipeline causing destory pipelines after SCM restart.", "committedDate": "2020-02-25T01:24:07Z", "type": "commit"}, {"oid": "719a22f6c80a4ad7cbc02e9139049e28824b1f24", "url": "https://github.com/apache/ozone/commit/719a22f6c80a4ad7cbc02e9139049e28824b1f24", "message": "fix checkstyle.", "committedDate": "2020-02-25T01:39:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzY3OTg1OQ==", "url": "https://github.com/apache/ozone/pull/598#discussion_r383679859", "bodyText": "Nit: this should go after Preconditions.checkNotNull in the next line, otherwise the check becomes unnecessary (will never fail).  The result is the same anyway (NPE).", "author": "adoroszlai", "createdAt": "2020-02-25T06:25:20Z", "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/pipeline/SCMPipelineManager.java", "diffHunk": "@@ -153,6 +153,8 @@ protected void initializePipelineState() throws IOException {\n           .newBuilder(HddsProtos.Pipeline.PARSER.parseFrom(entry.getValue()));\n       Pipeline pipeline = Pipeline.getFromProtobuf(pipelineBuilder.setState(\n           HddsProtos.PipelineState.PIPELINE_ALLOCATED).build());\n+      // When SCM is restarted, set Creation time with current time.\n+      pipeline.setCreationTimestamp(Instant.now());", "originalCommit": "719a22f6c80a4ad7cbc02e9139049e28824b1f24", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}