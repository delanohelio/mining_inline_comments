{"pr_number": 1659, "pr_title": "HDDS-4329. Expose Ratis retry config cache in OM.", "pr_createdAt": "2020-12-04T19:03:58Z", "pr_url": "https://github.com/apache/ozone/pull/1659", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ3NjYxMw==", "url": "https://github.com/apache/ozone/pull/1659#discussion_r537476613", "bodyText": "Can we use a smaller cache duration?", "author": "lokeshj1703", "createdAt": "2020-12-07T12:42:52Z", "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHAMetadataOnly.java", "diffHunk": "@@ -422,6 +422,24 @@ public void testOMRetryCache() throws Exception {\n     Assert.assertFalse(logCapturer.getOutput().contains(\"created volume:\"\n         + volumeName));\n \n+    //Sleep for little above seconds to get cache clear.\n+    Thread.sleep(65000);", "originalCommit": "d0e4d26d695cd026693c3012ca89afe41fce79ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzkzOTExOA==", "url": "https://github.com/apache/ozone/pull/1659#discussion_r537939118", "bodyText": "Done.", "author": "bharatviswa504", "createdAt": "2020-12-08T00:29:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ3NjYxMw=="}], "type": "inlineReview", "revised_code": {"commit": "44b652713333189ee02963c6ca5f910a745f303a", "chunk": "diff --git a/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHAMetadataOnly.java b/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHAMetadataOnly.java\nindex 2989dfbd9..a7e6f197d 100644\n--- a/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHAMetadataOnly.java\n+++ b/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHAMetadataOnly.java\n\n@@ -423,7 +423,7 @@ public void testOMRetryCache() throws Exception {\n         + volumeName));\n \n     //Sleep for little above seconds to get cache clear.\n-    Thread.sleep(65000);\n+    Thread.sleep(35000);\n \n     raftClientReply =\n         raftServer.submitClientRequest(new RaftClientRequest(clientId,\n"}}, {"oid": "44b652713333189ee02963c6ca5f910a745f303a", "url": "https://github.com/apache/ozone/commit/44b652713333189ee02963c6ca5f910a745f303a", "message": "HDDS-4329. Expose Ratis retry config cache in OM.", "committedDate": "2020-12-07T18:02:45Z", "type": "commit"}, {"oid": "9cdecbb649d48b1e66e6260cbd2b7d874786fe22", "url": "https://github.com/apache/ozone/commit/9cdecbb649d48b1e66e6260cbd2b7d874786fe22", "message": "fix cs and test", "committedDate": "2020-12-07T18:02:47Z", "type": "commit"}, {"oid": "afd915f6eaded431a4c41adef3a9a224a09180ca", "url": "https://github.com/apache/ozone/commit/afd915f6eaded431a4c41adef3a9a224a09180ca", "message": "increase cache duration", "committedDate": "2020-12-07T18:02:48Z", "type": "commit"}, {"oid": "fa9ffbc9e44b24ca7291dbd83a4995b33ad44da5", "url": "https://github.com/apache/ozone/commit/fa9ffbc9e44b24ca7291dbd83a4995b33ad44da5", "message": "reduce time and 2nd time check for correct log message", "committedDate": "2020-12-08T00:28:37Z", "type": "forcePushed"}, {"oid": "0206a5412910b2e50708d0b2601fe04842af5e58", "url": "https://github.com/apache/ozone/commit/0206a5412910b2e50708d0b2601fe04842af5e58", "message": "reduce time and 2nd time check for correct log message", "committedDate": "2020-12-08T00:32:53Z", "type": "forcePushed"}, {"oid": "6410fb86299c59e3d634e2cadc4340f9e768aa52", "url": "https://github.com/apache/ozone/commit/6410fb86299c59e3d634e2cadc4340f9e768aa52", "message": "reduce time and 2nd time check for correct log message", "committedDate": "2020-12-08T00:33:47Z", "type": "commit"}, {"oid": "6410fb86299c59e3d634e2cadc4340f9e768aa52", "url": "https://github.com/apache/ozone/commit/6410fb86299c59e3d634e2cadc4340f9e768aa52", "message": "reduce time and 2nd time check for correct log message", "committedDate": "2020-12-08T00:33:47Z", "type": "forcePushed"}]}