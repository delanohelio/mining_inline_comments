{"pr_number": 1149, "pr_title": "HDDS-3878. Make OMHA serviceID optional if one (but only one) is defined in the config", "pr_createdAt": "2020-06-30T12:51:35Z", "pr_url": "https://github.com/apache/ozone/pull/1149", "timeline": [{"oid": "d2e2869ade51fb7db8d86da42ef1ffef0db5dd06", "url": "https://github.com/apache/ozone/commit/d2e2869ade51fb7db8d86da42ef1ffef0db5dd06", "message": "fix1", "committedDate": "2020-06-25T09:36:35Z", "type": "commit"}, {"oid": "bd8b353f9157183c92d6fdcfed237532cd68a3e9", "url": "https://github.com/apache/ozone/commit/bd8b353f9157183c92d6fdcfed237532cd68a3e9", "message": "update om ha compose fix", "committedDate": "2020-06-25T10:27:11Z", "type": "commit"}, {"oid": "0c540c5746537db775246fa6c860c4a83525d8a8", "url": "https://github.com/apache/ozone/commit/0c540c5746537db775246fa6c860c4a83525d8a8", "message": "fix ofs without host names", "committedDate": "2020-06-25T15:16:55Z", "type": "commit"}, {"oid": "8f0a92cdd4a87d32b5d1a250a2275bc790d910f7", "url": "https://github.com/apache/ozone/commit/8f0a92cdd4a87d32b5d1a250a2275bc790d910f7", "message": "fix unit test", "committedDate": "2020-06-26T07:28:57Z", "type": "commit"}, {"oid": "e5b35b1434837d5e124c5f91e2a440177cf6e67f", "url": "https://github.com/apache/ozone/commit/e5b35b1434837d5e124c5f91e2a440177cf6e67f", "message": "fix acceptance tests", "committedDate": "2020-06-26T11:52:21Z", "type": "commit"}, {"oid": "9c5e18efef41a1c8ff2a1072b90abde5b59553aa", "url": "https://github.com/apache/ozone/commit/9c5e18efef41a1c8ff2a1072b90abde5b59553aa", "message": "add missing stop command", "committedDate": "2020-06-26T15:56:46Z", "type": "commit"}, {"oid": "ccfdd3ed52d653a69b20610f35331d4358ffd8a7", "url": "https://github.com/apache/ozone/commit/ccfdd3ed52d653a69b20610f35331d4358ffd8a7", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3878", "committedDate": "2020-06-30T12:52:32Z", "type": "commit"}, {"oid": "689f6d246b51be052fa86b33e61f140d0a35ea02", "url": "https://github.com/apache/ozone/commit/689f6d246b51be052fa86b33e61f140d0a35ea02", "message": "rollback irrelevant changes", "committedDate": "2020-06-30T12:53:05Z", "type": "commit"}, {"oid": "ab346cb66537b5a772945ee3e6cf2a5ea1812ddd", "url": "https://github.com/apache/ozone/commit/ab346cb66537b5a772945ee3e6cf2a5ea1812ddd", "message": "fix rpc client generation", "committedDate": "2020-06-30T13:17:25Z", "type": "commit"}, {"oid": "8c4500b06d6a77eddcbaabafdc081688dd15b725", "url": "https://github.com/apache/ozone/commit/8c4500b06d6a77eddcbaabafdc081688dd15b725", "message": "fix OzoneClientFactory", "committedDate": "2020-06-30T19:46:17Z", "type": "commit"}, {"oid": "36b9295faa75ae8f8ecfbd63697e53421caeb4c2", "url": "https://github.com/apache/ozone/commit/36b9295faa75ae8f8ecfbd63697e53421caeb4c2", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3878", "committedDate": "2020-07-06T12:36:25Z", "type": "commit"}, {"oid": "477233136d119fc1c946113aabfcb162ff1ea846", "url": "https://github.com/apache/ozone/commit/477233136d119fc1c946113aabfcb162ff1ea846", "message": "trigger new CI check", "committedDate": "2020-07-06T14:42:17Z", "type": "commit"}, {"oid": "0fa87add21efd0a91d0078a359bd2326996c58d3", "url": "https://github.com/apache/ozone/commit/0fa87add21efd0a91d0078a359bd2326996c58d3", "message": "trigger new CI check", "committedDate": "2020-07-06T16:17:01Z", "type": "commit"}, {"oid": "1c7a9ba7d7f20367768ac2b73f142fa5ab711984", "url": "https://github.com/apache/ozone/commit/1c7a9ba7d7f20367768ac2b73f142fa5ab711984", "message": "trigger new CI check", "committedDate": "2020-07-07T11:07:26Z", "type": "commit"}, {"oid": "3b860ef5624aa8fe521da1ea3fe7fbb20c01350d", "url": "https://github.com/apache/ozone/commit/3b860ef5624aa8fe521da1ea3fe7fbb20c01350d", "message": "trigger new CI check", "committedDate": "2020-07-07T12:28:30Z", "type": "commit"}, {"oid": "732e83c7d6a7ff78b9d9b89ee140dc222c5a37f1", "url": "https://github.com/apache/ozone/commit/732e83c7d6a7ff78b9d9b89ee140dc222c5a37f1", "message": "revert ozone fs related changes", "committedDate": "2020-07-22T09:40:35Z", "type": "commit"}, {"oid": "78d4c7af12c988efc8af018abba6107ab0ef17ce", "url": "https://github.com/apache/ozone/commit/78d4c7af12c988efc8af018abba6107ab0ef17ce", "message": "Merge remote-tracking branch 'elek/HDDS-3878' into HDDS-3878", "committedDate": "2020-07-22T09:41:42Z", "type": "commit"}, {"oid": "024d7a48abdfa385ad05b6c0654a509397b6de91", "url": "https://github.com/apache/ozone/commit/024d7a48abdfa385ad05b6c0654a509397b6de91", "message": "fix om related freon tests", "committedDate": "2020-07-22T09:56:20Z", "type": "commit"}, {"oid": "0818fa8049675f0e0fe44dbfbc39a3b4699cff6f", "url": "https://github.com/apache/ozone/commit/0818fa8049675f0e0fe44dbfbc39a3b4699cff6f", "message": "add more unit test", "committedDate": "2020-07-29T07:48:51Z", "type": "commit"}, {"oid": "dfc07661a4b70a3159759b582b12ab72372404bf", "url": "https://github.com/apache/ozone/commit/dfc07661a4b70a3159759b582b12ab72372404bf", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3878", "committedDate": "2020-07-29T07:49:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3ODQxMA==", "url": "https://github.com/apache/ozone/pull/1149#discussion_r466678410", "bodyText": "Is this change, related to this PR?", "author": "bharatviswa504", "createdAt": "2020-08-06T20:49:59Z", "path": "hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ * <p>\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * <p>\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.hadoop.test;\n+\n+import java.io.IOException;\n+import java.util.Collection;", "originalCommit": "dfc07661a4b70a3159759b582b12ab72372404bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA1NTI5Ng==", "url": "https://github.com/apache/ozone/pull/1149#discussion_r467055296", "bodyText": "Yes. It's introduced for the unit test which is mentioned before.\n\nUnfortunately it's harder to follow the logic here. I created a new unit test (TestOzoneAddressClientCreation). Which shows exactly this case.", "author": "elek", "createdAt": "2020-08-07T13:54:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3ODQxMA=="}], "type": "inlineReview", "revised_code": {"commit": "29550ce803abb075d7899e7a7e747d97d0e9cbc7", "chunk": "diff --git a/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java b/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java\nindex abf8d379ea..ee74feff77 100644\n--- a/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java\n+++ b/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java\n\n@@ -25,7 +25,7 @@\n import org.apache.hadoop.hdds.conf.MutableConfigurationSource;\n \n /**\n- * In memory, mutable configuration source for testing..\n+ * In memory, mutable configuration source for testing.\n  */\n public class InMemoryConfiguration implements MutableConfigurationSource {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY4MDEwMg==", "url": "https://github.com/apache/ozone/pull/1149#discussion_r466680102", "bodyText": "Minor. Extra \".\"", "author": "bharatviswa504", "createdAt": "2020-08-06T20:53:24Z", "path": "hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ * <p>\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * <p>\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.hadoop.test;\n+\n+import java.io.IOException;\n+import java.util.Collection;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.hadoop.hdds.conf.MutableConfigurationSource;\n+\n+/**\n+ * In memory, mutable configuration source for testing..", "originalCommit": "dfc07661a4b70a3159759b582b12ab72372404bf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "29550ce803abb075d7899e7a7e747d97d0e9cbc7", "chunk": "diff --git a/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java b/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java\nindex abf8d379ea..ee74feff77 100644\n--- a/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java\n+++ b/hadoop-hdds/test-utils/src/main/java/org/apache/hadoop/test/InMemoryConfiguration.java\n\n@@ -25,7 +25,7 @@\n import org.apache.hadoop.hdds.conf.MutableConfigurationSource;\n \n /**\n- * In memory, mutable configuration source for testing..\n+ * In memory, mutable configuration source for testing.\n  */\n public class InMemoryConfiguration implements MutableConfigurationSource {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY4ODg3NA==", "url": "https://github.com/apache/ozone/pull/1149#discussion_r466688874", "bodyText": "Minor: protected OzoneClient createRpcClient(ConfigurationSource conf) fits in a single line", "author": "bharatviswa504", "createdAt": "2020-08-06T21:11:50Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/OzoneAddress.java", "diffHunk": "@@ -85,7 +89,34 @@ public OzoneAddress(String address)\n \n   }\n \n-  public OzoneClient createClient(OzoneConfiguration conf)\n+  @VisibleForTesting\n+  protected OzoneClient createRpcClient(", "originalCommit": "dfc07661a4b70a3159759b582b12ab72372404bf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9980b56c75921032963ec3b246b5d045cb9aa6a9", "chunk": "diff --git a/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/OzoneAddress.java b/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/OzoneAddress.java\nindex 516177610c..0ddd657628 100644\n--- a/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/OzoneAddress.java\n+++ b/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/OzoneAddress.java\n\n@@ -90,9 +90,7 @@ public OzoneAddress(String address)\n   }\n \n   @VisibleForTesting\n-  protected OzoneClient createRpcClient(\n-      ConfigurationSource conf\n-  )\n+  protected OzoneClient createRpcClient(ConfigurationSource conf)\n       throws IOException {\n     return OzoneClientFactory.getRpcClient(conf);\n   }\n"}}, {"oid": "29550ce803abb075d7899e7a7e747d97d0e9cbc7", "url": "https://github.com/apache/ozone/commit/29550ce803abb075d7899e7a7e747d97d0e9cbc7", "message": "typo fix", "committedDate": "2020-08-07T13:55:15Z", "type": "commit"}, {"oid": "9980b56c75921032963ec3b246b5d045cb9aa6a9", "url": "https://github.com/apache/ozone/commit/9980b56c75921032963ec3b246b5d045cb9aa6a9", "message": "one line method def", "committedDate": "2020-08-07T13:56:28Z", "type": "commit"}, {"oid": "3f305df3ef241a0d3ee0cf115160e4fe6b406359", "url": "https://github.com/apache/ozone/commit/3f305df3ef241a0d3ee0cf115160e4fe6b406359", "message": "Merge remote-tracking branch 'origin/master' into HDDS-3878", "committedDate": "2020-08-08T08:59:01Z", "type": "commit"}, {"oid": "9776c88e06de10f25c41858f712e75af4da5dc3a", "url": "https://github.com/apache/ozone/commit/9776c88e06de10f25c41858f712e75af4da5dc3a", "message": "retrigger build with empty commit", "committedDate": "2020-08-10T15:11:48Z", "type": "commit"}, {"oid": "872d13e1a0f49dc74ffb7846a2aefe12b2081029", "url": "https://github.com/apache/ozone/commit/872d13e1a0f49dc74ffb7846a2aefe12b2081029", "message": "fix unit tests", "committedDate": "2020-08-10T17:22:34Z", "type": "commit"}, {"oid": "51295548fa4093504856f4cbfffb143c5d5915b4", "url": "https://github.com/apache/ozone/commit/51295548fa4093504856f4cbfffb143c5d5915b4", "message": "restore original om-ha-tests", "committedDate": "2020-08-10T18:25:16Z", "type": "commit"}]}