{"pr_number": 1260, "pr_title": "HDDS-3423. Enabling TestContainerReplicationEndToEnd and addressing f\u2026", "pr_createdAt": "2020-07-27T06:35:51Z", "pr_url": "https://github.com/apache/ozone/pull/1260", "timeline": [{"oid": "142fbfe7906ecb100238e99205bee6c78c5947bb", "url": "https://github.com/apache/ozone/commit/142fbfe7906ecb100238e99205bee6c78c5947bb", "message": "HDDS-3423. Enabling TestContainerReplicationEndToEnd and addressing failure.", "committedDate": "2020-07-27T06:19:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTU2ODczOA==", "url": "https://github.com/apache/ozone/pull/1260#discussion_r461568738", "bodyText": "Please use placeholder in log message instead of + to avoid new code warning (sonar).", "author": "adoroszlai", "createdAt": "2020-07-28T13:14:01Z", "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/client/rpc/TestContainerReplicationEndToEnd.java", "diffHunk": "@@ -167,9 +166,13 @@ public void testContainerReplication() throws Exception {\n             .getPipeline(pipelineID);\n     key.close();\n \n-    if (cluster.getStorageContainerManager().getContainerManager()\n-        .getContainer(new ContainerID(containerID)).getState() !=\n-        HddsProtos.LifeCycleState.CLOSING) {\n+    HddsProtos.LifeCycleState containerState =\n+        cluster.getStorageContainerManager().getContainerManager()\n+            .getContainer(new ContainerID(containerID)).getState();\n+    LoggerFactory.getLogger(TestContainerReplicationEndToEnd.class).info(\n+        \"Current Container State is \" + containerState);", "originalCommit": "c900f4165b1695f0d5e81d8b307e12d3117a9b0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NTU4Ng==", "url": "https://github.com/apache/ozone/pull/1260#discussion_r462095586", "bodyText": "done. Also changed the intervals you mentioned to maintain the same ratio as their default values. for container-report-intrval : stalenode-interval : deadnode-interval.", "author": "prashantpogde", "createdAt": "2020-07-29T07:30:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTU2ODczOA=="}], "type": "inlineReview", "revised_code": {"commit": "6277a9f6e0a702ac475f5f02986d09b5d3be8979", "chunk": "diff --git a/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/client/rpc/TestContainerReplicationEndToEnd.java b/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/client/rpc/TestContainerReplicationEndToEnd.java\nindex 7497a67f2..d9f75788e 100644\n--- a/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/client/rpc/TestContainerReplicationEndToEnd.java\n+++ b/hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/client/rpc/TestContainerReplicationEndToEnd.java\n\n@@ -170,7 +170,7 @@ public void testContainerReplication() throws Exception {\n         cluster.getStorageContainerManager().getContainerManager()\n             .getContainer(new ContainerID(containerID)).getState();\n     LoggerFactory.getLogger(TestContainerReplicationEndToEnd.class).info(\n-        \"Current Container State is \" + containerState);\n+        \"Current Container State is {}\",  containerState);\n     if ((containerState != HddsProtos.LifeCycleState.CLOSING) &&\n         (containerState != HddsProtos.LifeCycleState.CLOSED)) {\n       cluster.getStorageContainerManager().getContainerManager()\n"}}, {"oid": "6277a9f6e0a702ac475f5f02986d09b5d3be8979", "url": "https://github.com/apache/ozone/commit/6277a9f6e0a702ac475f5f02986d09b5d3be8979", "message": "HDDS-3423. Changes after addressing code review comments.", "committedDate": "2020-07-29T07:28:06Z", "type": "commit"}, {"oid": "6277a9f6e0a702ac475f5f02986d09b5d3be8979", "url": "https://github.com/apache/ozone/commit/6277a9f6e0a702ac475f5f02986d09b5d3be8979", "message": "HDDS-3423. Changes after addressing code review comments.", "committedDate": "2020-07-29T07:28:06Z", "type": "forcePushed"}, {"oid": "8eeba17565edccf003983d13902431a36daa8220", "url": "https://github.com/apache/ozone/commit/8eeba17565edccf003983d13902431a36daa8220", "message": "trigger new CI check", "committedDate": "2020-07-29T12:24:58Z", "type": "commit"}]}