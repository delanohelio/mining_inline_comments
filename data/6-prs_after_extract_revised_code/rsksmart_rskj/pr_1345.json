{"pr_number": 1345, "pr_title": "Check if RSKIP 170 is active before parsing peg-in instructions", "pr_createdAt": "2020-10-26T15:42:28Z", "pr_url": "https://github.com/rsksmart/rskj/pull/1345", "timeline": [{"oid": "7bb779dd53229f9260e1c1b9f8ba74a3973e56d4", "url": "https://github.com/rsksmart/rskj/commit/7bb779dd53229f9260e1c1b9f8ba74a3973e56d4", "message": "Check if RSKIP 170 is active before parsing peg-in instructions", "committedDate": "2020-10-26T16:33:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMjY0Mw==", "url": "https://github.com/rsksmart/rskj/pull/1345#discussion_r512122643", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void parse_fromBtcLockSender_withPeginInstructions_preIris() throws PeginInstructionsException {\n          \n          \n            \n                public void parse_withBtcLockSender_withPeginInstructions_preIris() throws PeginInstructionsException {", "author": "josedahlquist", "createdAt": "2020-10-26T17:00:40Z", "path": "rskj-core/src/test/java/co/rsk/peg/PeginInformationTest.java", "diffHunk": "@@ -292,10 +317,102 @@ public void parse_withoutBtcLockSender_withoutPeginInstructions() throws PeginIn\n         when(peginInstructionsProviderMock.buildPeginInstructions(btcTx))\n             .thenReturn(Optional.empty());\n \n+        ActivationConfig.ForBlock activationsMock = mock(ActivationConfig.ForBlock.class);\n+        when(activationsMock.isActive(ConsensusRule.RSKIP170)).thenReturn(true);\n+\n+        // Act\n+        PeginInformation peginInformation = new PeginInformation(\n+            btcLockSenderProviderMock,\n+            peginInstructionsProviderMock,\n+            activationsMock\n+        );\n+        peginInformation.parse(btcTx);\n+    }\n+\n+    @Test\n+    public void parse_fromBtcLockSender_withPeginInstructions_preIris() throws PeginInstructionsException {", "originalCommit": "7bb779dd53229f9260e1c1b9f8ba74a3973e56d4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b51f7cec51ea5acdd742de34c66cfbc69b7e6a67", "chunk": "diff --git a/rskj-core/src/test/java/co/rsk/peg/PeginInformationTest.java b/rskj-core/src/test/java/co/rsk/peg/PeginInformationTest.java\nindex cda1d68ac..713aadce9 100644\n--- a/rskj-core/src/test/java/co/rsk/peg/PeginInformationTest.java\n+++ b/rskj-core/src/test/java/co/rsk/peg/PeginInformationTest.java\n\n@@ -330,7 +330,7 @@ public class PeginInformationTest {\n     }\n \n     @Test\n-    public void parse_fromBtcLockSender_withPeginInstructions_preIris() throws PeginInstructionsException {\n+    public void parse_withBtcLockSender_withPeginInstructions_preIris() throws PeginInstructionsException {\n         // Arrange\n         BtcECKey address1Key = new BtcECKey();\n         RskAddress rskDestinationAddressFromBtcLockSender = new RskAddress(ECKey.fromPublicOnly(address1Key.getPubKey()).getAddress());\n"}}, {"oid": "b51f7cec51ea5acdd742de34c66cfbc69b7e6a67", "url": "https://github.com/rsksmart/rskj/commit/b51f7cec51ea5acdd742de34c66cfbc69b7e6a67", "message": "Check if RSKIP 170 is active before parsing peg-in instructions", "committedDate": "2020-10-26T19:11:42Z", "type": "commit"}, {"oid": "b51f7cec51ea5acdd742de34c66cfbc69b7e6a67", "url": "https://github.com/rsksmart/rskj/commit/b51f7cec51ea5acdd742de34c66cfbc69b7e6a67", "message": "Check if RSKIP 170 is active before parsing peg-in instructions", "committedDate": "2020-10-26T19:11:42Z", "type": "forcePushed"}]}