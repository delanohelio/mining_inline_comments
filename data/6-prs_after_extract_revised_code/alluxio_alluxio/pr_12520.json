{"pr_number": 12520, "pr_title": "Add configuration for Ratis retry cache expiry time", "pr_createdAt": "2020-11-17T19:32:09Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12520", "timeline": [{"oid": "ba3e3834d423e55514401b9d0210ed0a5f3c3803", "url": "https://github.com/Alluxio/alluxio/commit/ba3e3834d423e55514401b9d0210ed0a5f3c3803", "message": "Add configuration for ratis retry cache expiry time", "committedDate": "2020-11-17T19:30:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2Njg2Mw==", "url": "https://github.com/Alluxio/alluxio/pull/12520#discussion_r525466863", "bodyText": "Can this not be ServerConfiguration.getMs()?", "author": "gpang", "createdAt": "2020-11-17T20:01:25Z", "path": "core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java", "diffHunk": "@@ -324,6 +324,12 @@ private synchronized void initServer() throws IOException {\n                 .getMs(PropertyKey.MASTER_EMBEDDED_JOURNAL_TRANSPORT_REQUEST_TIMEOUT_MS),\n             TimeUnit.MILLISECONDS));\n \n+    RaftServerConfigKeys.RetryCache.setExpiryTime(properties,\n+        TimeDuration.valueOf(\n+            ServerConfiguration.global()", "originalCommit": "ba3e3834d423e55514401b9d0210ed0a5f3c3803", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxNTIxNg==", "url": "https://github.com/Alluxio/alluxio/pull/12520#discussion_r525515216", "bodyText": "Good to know. Updated.", "author": "bf8086", "createdAt": "2020-11-17T20:49:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2Njg2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "4bee784d6a15fc48a1bd45f5c94a4f33c8ba180e", "chunk": "diff --git a/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java b/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java\nindex cf0e217b90..c7a92ec5a5 100644\n--- a/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java\n+++ b/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java\n\n@@ -326,7 +326,7 @@ public class RaftJournalSystem extends AbstractJournalSystem {\n \n     RaftServerConfigKeys.RetryCache.setExpiryTime(properties,\n         TimeDuration.valueOf(\n-            ServerConfiguration.global()\n+            ServerConfiguration\n                 .getMs(PropertyKey.MASTER_EMBEDDED_JOURNAL_RETRY_CACHE_EXPIRY_TIME),\n             TimeUnit.MILLISECONDS));\n \n"}}, {"oid": "4bee784d6a15fc48a1bd45f5c94a4f33c8ba180e", "url": "https://github.com/Alluxio/alluxio/commit/4bee784d6a15fc48a1bd45f5c94a4f33c8ba180e", "message": "Simplify configuration call", "committedDate": "2020-11-17T20:49:15Z", "type": "commit"}]}