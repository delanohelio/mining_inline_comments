{"pr_number": 12376, "pr_title": "Improve polling client for embedded journal", "pr_createdAt": "2020-10-23T18:09:46Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12376", "timeline": [{"oid": "82d4769c14a76fbbc36733ccea62615129758585", "url": "https://github.com/Alluxio/alluxio/commit/82d4769c14a76fbbc36733ccea62615129758585", "message": "Improve polling client for embedded journal", "committedDate": "2020-10-23T19:23:23Z", "type": "commit"}, {"oid": "82d4769c14a76fbbc36733ccea62615129758585", "url": "https://github.com/Alluxio/alluxio/commit/82d4769c14a76fbbc36733ccea62615129758585", "message": "Improve polling client for embedded journal", "committedDate": "2020-10-23T19:23:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEzNzE5NA==", "url": "https://github.com/Alluxio/alluxio/pull/12376#discussion_r511137194", "bodyText": "Is there a way to aggregate the error here and log/throw it if no valid master is selected?", "author": "bf8086", "createdAt": "2020-10-23T20:20:50Z", "path": "core/common/src/main/java/alluxio/master/PollingMasterInquireClient.java", "diffHunk": "@@ -130,7 +130,8 @@ private InetSocketAddress getAddress() {\n         LOG.debug(\"Timeout while connecting to {}\", address);\n         continue;\n       } catch (AlluxioStatusException e) {\n-        throw new RuntimeException(e);\n+        LOG.debug(\"Exception while connecting to {}. error: {}\", address, e.getMessage());", "originalCommit": "82d4769c14a76fbbc36733ccea62615129758585", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEzNzg3Mw==", "url": "https://github.com/Alluxio/alluxio/pull/12376#discussion_r511137873", "bodyText": "that already happens elsewhere: https://github.com/Alluxio/alluxio/pull/12376/files#diff-7f60cdbf4f4b4313bee9dd5a28c81ce3577fe6e120c8f8eab522386d7085afe0R112", "author": "gpang", "createdAt": "2020-10-23T20:22:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEzNzE5NA=="}], "type": "inlineReview", "revised_code": {"commit": "ce2a7e540085491bc6ecd56a29f0860a45324853", "chunk": "diff --git a/core/common/src/main/java/alluxio/master/PollingMasterInquireClient.java b/core/common/src/main/java/alluxio/master/PollingMasterInquireClient.java\nindex 5ecb2a72c7..a6d94a7510 100644\n--- a/core/common/src/main/java/alluxio/master/PollingMasterInquireClient.java\n+++ b/core/common/src/main/java/alluxio/master/PollingMasterInquireClient.java\n\n@@ -130,8 +130,8 @@ public class PollingMasterInquireClient implements MasterInquireClient {\n         LOG.debug(\"Timeout while connecting to {}\", address);\n         continue;\n       } catch (AlluxioStatusException e) {\n-        LOG.debug(\"Exception while connecting to {}. error: {}\", address, e.getMessage());\n-        continue;\n+        throw new RuntimeException(\n+            String.format(\"Received exception from %s. message: %s\", address, e.getMessage()), e);\n       }\n     }\n     return null;\n"}}, {"oid": "ce2a7e540085491bc6ecd56a29f0860a45324853", "url": "https://github.com/Alluxio/alluxio/commit/ce2a7e540085491bc6ecd56a29f0860a45324853", "message": "Update unavailable exception", "committedDate": "2020-10-23T21:48:18Z", "type": "commit"}, {"oid": "5329d500cd07fa13a9d78afa657118ec918a4fa7", "url": "https://github.com/Alluxio/alluxio/commit/5329d500cd07fa13a9d78afa657118ec918a4fa7", "message": "Fix style", "committedDate": "2020-10-23T22:03:44Z", "type": "commit"}]}