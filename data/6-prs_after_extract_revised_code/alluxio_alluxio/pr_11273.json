{"pr_number": 11273, "pr_title": "Make connection multiplexing bounded for streaming channels", "pr_createdAt": "2020-04-11T07:29:06Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11273", "timeline": [{"oid": "37c19305a8504a7c757a7f81b37596432ba883a7", "url": "https://github.com/Alluxio/alluxio/commit/37c19305a8504a7c757a7f81b37596432ba883a7", "message": "Make connection multiplexing bounded for streaming channels", "committedDate": "2020-04-11T07:55:13Z", "type": "forcePushed"}, {"oid": "a759e69d911b081def703a27e2349b1b5db16229", "url": "https://github.com/Alluxio/alluxio/commit/a759e69d911b081def703a27e2349b1b5db16229", "message": "Make connection multiplexing bounded for streaming channels", "committedDate": "2020-04-11T08:17:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA4OTU5Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11273#discussion_r407089593", "bodyText": "can you add a javadoc about each method and the expected behavior when used?", "author": "ZacBlanco", "createdAt": "2020-04-11T17:33:50Z", "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "diffHunk": "@@ -329,11 +337,11 @@ private String getStringFromOptional(Optional<?> field) {\n   }\n \n   /**\n-   * Enumeration to determine the pooling strategy.\n+   * Used to define connection level multiplexing groups.\n    */\n-  public enum PoolingStrategy {\n+  public enum MultiplexGroup {\n     DEFAULT,\n-    DISABLED\n+    STREAMING\n   }", "originalCommit": "a759e69d911b081def703a27e2349b1b5db16229", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f9cb30319fab536ec6e38b088acdcd3fb682d797", "chunk": "diff --git a/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java b/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java\nindex 72d7228b2a..91c0d8b89f 100644\n--- a/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java\n+++ b/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java\n\n@@ -340,7 +340,16 @@ public class GrpcChannelKey {\n    * Used to define connection level multiplexing groups.\n    */\n   public enum MultiplexGroup {\n+    /**\n+     * Multiplexing will be enforced.\n+     */\n     DEFAULT,\n+    /**\n+     * Multiplexing will be enforced in a separate\n+     * group for increasing streaming bandwidth.\n+     *\n+     * Pool size is controlled by {@code PropertyKey.USER_BLOCK_WORKER_MAX_STREAMING_CONNECTIONS}.\n+     */\n     STREAMING\n   }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA4OTgzOQ==", "url": "https://github.com/Alluxio/alluxio/pull/11273#discussion_r407089839", "bodyText": "final?", "author": "ZacBlanco", "createdAt": "2020-04-11T17:36:35Z", "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "diffHunk": "@@ -39,9 +39,13 @@\n public class GrpcChannelKey {\n   private static final Random RANDOM = new Random();\n \n+  private AlluxioConfiguration mConf;", "originalCommit": "a759e69d911b081def703a27e2349b1b5db16229", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f9cb30319fab536ec6e38b088acdcd3fb682d797", "chunk": "diff --git a/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java b/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java\nindex 72d7228b2a..91c0d8b89f 100644\n--- a/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java\n+++ b/core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java\n\n@@ -39,7 +39,7 @@ import java.util.concurrent.TimeUnit;\n public class GrpcChannelKey {\n   private static final Random RANDOM = new Random();\n \n-  private AlluxioConfiguration mConf;\n+  private final AlluxioConfiguration mConf;\n \n   @IdentityField\n   MultiplexGroup mMultiplexGroup = MultiplexGroup.DEFAULT;\n"}}, {"oid": "f9cb30319fab536ec6e38b088acdcd3fb682d797", "url": "https://github.com/Alluxio/alluxio/commit/f9cb30319fab536ec6e38b088acdcd3fb682d797", "message": "Make connection multiplexing bounded for streaming channels", "committedDate": "2020-04-11T18:02:30Z", "type": "commit"}, {"oid": "f9cb30319fab536ec6e38b088acdcd3fb682d797", "url": "https://github.com/Alluxio/alluxio/commit/f9cb30319fab536ec6e38b088acdcd3fb682d797", "message": "Make connection multiplexing bounded for streaming channels", "committedDate": "2020-04-11T18:02:30Z", "type": "forcePushed"}, {"oid": "29252b56c4d04e059f50d7006abb35253e4d8018", "url": "https://github.com/Alluxio/alluxio/commit/29252b56c4d04e059f50d7006abb35253e4d8018", "message": "Add unit test", "committedDate": "2020-04-11T18:15:08Z", "type": "commit"}]}