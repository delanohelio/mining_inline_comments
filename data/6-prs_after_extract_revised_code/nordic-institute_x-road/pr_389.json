{"pr_number": 389, "pr_title": "XRDDEV-840 Generate internal csr", "pr_createdAt": "2020-02-26T11:48:49Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/389", "timeline": [{"oid": "ca16b8f749466eccc436f674f5dbfb6a0accc83d", "url": "https://github.com/nordic-institute/X-Road/commit/ca16b8f749466eccc436f674f5dbfb6a0accc83d", "message": "XRDDEV-840 Internal CSR gen\n\n* service\n* controller\n* API design", "committedDate": "2020-02-25T14:28:11Z", "type": "commit"}, {"oid": "635394d374ccd05ed6eb0eab16eb5b38908657a2", "url": "https://github.com/nordic-institute/X-Road/commit/635394d374ccd05ed6eb0eab16eb5b38908657a2", "message": "XRDDEV-840 Internal CSR gen tests", "committedDate": "2020-02-26T11:45:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwODM3Ng==", "url": "https://github.com/nordic-institute/X-Road/pull/389#discussion_r385108376", "bodyText": "I think it would be good to add a short description about the situation(s) when this exception can occur.", "author": "TJaakkola", "createdAt": "2020-02-27T12:56:17Z", "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java", "diffHunk": "@@ -139,4 +153,23 @@ private String getExceptionMessage(String name, String url, String message) {\n         sb.append(\" \").append(message);\n         return sb.toString();\n     }\n+\n+    /**\n+     * Generate internal auth cert CSR\n+     * @param distinguishedName\n+     * @return\n+     * @throws InvalidDistinguishedNameException", "originalCommit": "635394d374ccd05ed6eb0eab16eb5b38908657a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEyMzAwNg==", "url": "https://github.com/nordic-institute/X-Road/pull/389#discussion_r385123006", "bodyText": "Added javadoc description here for the InvalidDistinguishedNameException", "author": "carohauta", "createdAt": "2020-02-27T13:25:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwODM3Ng=="}], "type": "inlineReview", "revised_code": {"commit": "2e50dc42964b6c3ce2fc2d3e357d7eb68273ffc9", "chunk": "diff --git a/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java b/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java\nindex 3f68dde93..92bb882e9 100644\n--- a/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java\n+++ b/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java\n\n@@ -135,18 +135,6 @@ public class SystemService {\n         configuredTimestampingServices.remove(delete.get());\n     }\n \n-    /**\n-     * Thrown when attempt to add timestamping service that is already configured\n-     */\n-    public static class DuplicateConfiguredTimestampingServiceException extends ServiceException {\n-        public static final String ERROR_DUPLICATE_CONFIGURED_TIMESTAMPING_SERVICE\n-                = \"timestamping_service_already_configured\";\n-\n-        public DuplicateConfiguredTimestampingServiceException(String s) {\n-            super(s, new ErrorDeviation(ERROR_DUPLICATE_CONFIGURED_TIMESTAMPING_SERVICE));\n-        }\n-    }\n-\n     private String getExceptionMessage(String name, String url, String message) {\n         StringBuilder sb = new StringBuilder();\n         sb.append(\"Timestamping service with name \").append(name).append(\" and url \").append(url);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTExMDAyNg==", "url": "https://github.com/nordic-institute/X-Road/pull/389#discussion_r385110026", "bodyText": "Very minor thing but I think Exceptions in serviceclasses have been last thing to declare.", "author": "TJaakkola", "createdAt": "2020-02-27T12:59:42Z", "path": "src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java", "diffHunk": "@@ -139,4 +153,23 @@ private String getExceptionMessage(String name, String url, String message) {\n         sb.append(\" \").append(message);\n         return sb.toString();\n     }\n+\n+    /**", "originalCommit": "635394d374ccd05ed6eb0eab16eb5b38908657a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEyMjU5Nw==", "url": "https://github.com/nordic-institute/X-Road/pull/389#discussion_r385122597", "bodyText": "Moved the exception to the bottom.", "author": "carohauta", "createdAt": "2020-02-27T13:24:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTExMDAyNg=="}], "type": "inlineReview", "revised_code": {"commit": "2e50dc42964b6c3ce2fc2d3e357d7eb68273ffc9", "chunk": "diff --git a/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java b/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java\nindex 3f68dde93..92bb882e9 100644\n--- a/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java\n+++ b/src/proxy-ui-api/src/main/java/org/niis/xroad/restapi/service/SystemService.java\n\n@@ -135,18 +135,6 @@ public class SystemService {\n         configuredTimestampingServices.remove(delete.get());\n     }\n \n-    /**\n-     * Thrown when attempt to add timestamping service that is already configured\n-     */\n-    public static class DuplicateConfiguredTimestampingServiceException extends ServiceException {\n-        public static final String ERROR_DUPLICATE_CONFIGURED_TIMESTAMPING_SERVICE\n-                = \"timestamping_service_already_configured\";\n-\n-        public DuplicateConfiguredTimestampingServiceException(String s) {\n-            super(s, new ErrorDeviation(ERROR_DUPLICATE_CONFIGURED_TIMESTAMPING_SERVICE));\n-        }\n-    }\n-\n     private String getExceptionMessage(String name, String url, String message) {\n         StringBuilder sb = new StringBuilder();\n         sb.append(\"Timestamping service with name \").append(name).append(\" and url \").append(url);\n"}}, {"oid": "2e50dc42964b6c3ce2fc2d3e357d7eb68273ffc9", "url": "https://github.com/nordic-institute/X-Road/commit/2e50dc42964b6c3ce2fc2d3e357d7eb68273ffc9", "message": "XRDDEV-840 Internal CSR gen // PR fixes 1", "committedDate": "2020-02-27T13:23:22Z", "type": "commit"}]}