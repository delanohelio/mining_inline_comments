{"pr_number": 1147, "pr_title": "Generic way to store ConfigurationWarnings", "pr_createdAt": "2020-10-14T11:39:40Z", "pr_url": "https://github.com/ibissource/iaf/pull/1147", "timeline": [{"oid": "e486977194b44c71a01d5b84eedbccb43ef98eb8", "url": "https://github.com/ibissource/iaf/commit/e486977194b44c71a01d5b84eedbccb43ef98eb8", "message": "concept", "committedDate": "2020-10-14T11:35:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY4MTYzNw==", "url": "https://github.com/ibissource/iaf/pull/1147#discussion_r504681637", "bodyText": "Is it also possible to add the adapter name?", "author": "nielsm5", "createdAt": "2020-10-14T13:35:34Z", "path": "core/src/main/java/nl/nn/adapterframework/jdbc/DirectQuerySender.java", "diffHunk": "@@ -49,7 +50,7 @@ public void configure() throws ConfigurationException {\n \tpublic void configure(boolean trust) throws ConfigurationException {\n \t\tsuper.configure();\n \t\tif (!trust) {\n-\t\t\tConfigurationWarnings.add(log, \"The class [\"+getClass().getName()+\"] is used one or more times. Please change to [\"+FixedQuerySender.class.getName()+\"] to avoid potential SQL injections!\");\n+\t\t\tConfigurationWarnings.add(log, \"The class [\"+ClassUtils.nameOf(this)+\"] is used one or more times. Please change to [\"+FixedQuerySender.class.getName()+\"] to avoid potential SQL injections!\");", "originalCommit": "e486977194b44c71a01d5b84eedbccb43ef98eb8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "792e18b7b6ac814cca0b9ace88215d973b86a9f2", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/jdbc/DirectQuerySender.java b/core/src/main/java/nl/nn/adapterframework/jdbc/DirectQuerySender.java\nindex 144c81b9b..65911e790 100644\n--- a/core/src/main/java/nl/nn/adapterframework/jdbc/DirectQuerySender.java\n+++ b/core/src/main/java/nl/nn/adapterframework/jdbc/DirectQuerySender.java\n\n@@ -50,7 +50,7 @@ public class DirectQuerySender extends JdbcQuerySenderBase<Connection>{\n \tpublic void configure(boolean trust) throws ConfigurationException {\n \t\tsuper.configure();\n \t\tif (!trust) {\n-\t\t\tConfigurationWarnings.add(log, \"The class [\"+ClassUtils.nameOf(this)+\"] is used one or more times. Please change to [\"+FixedQuerySender.class.getName()+\"] to avoid potential SQL injections!\");\n+\t\t\tConfigurationWarnings.add(log, \"The class [\"+ClassUtils.nameOf(this)+\"] is used one or more times. This may cause potential SQL injections!\");\n \t\t}\n \t}\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY4MzIwMg==", "url": "https://github.com/ibissource/iaf/pull/1147#discussion_r504683202", "bodyText": "Move this, as public final static, to ConfigurationWarnings so all warnings/keys are in 1 place.", "author": "nielsm5", "createdAt": "2020-10-14T13:37:41Z", "path": "core/src/main/java/nl/nn/adapterframework/batch/StreamTransformerPipe.java", "diffHunk": "@@ -68,6 +68,7 @@\n public class StreamTransformerPipe extends FixedForwardPipe {\n \n \tpublic static final String originalBlockKey=\"originalBlock\";\n+\tprivate final String deprecationSuppressKey=\"warnings.suppress.deprecated\";", "originalCommit": "e486977194b44c71a01d5b84eedbccb43ef98eb8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "70b91229de0867f88e74df6f03a2854dd14788a2", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/batch/StreamTransformerPipe.java b/core/src/main/java/nl/nn/adapterframework/batch/StreamTransformerPipe.java\nindex 3fa344813..e79276500 100644\n--- a/core/src/main/java/nl/nn/adapterframework/batch/StreamTransformerPipe.java\n+++ b/core/src/main/java/nl/nn/adapterframework/batch/StreamTransformerPipe.java\n\n@@ -68,7 +68,6 @@ import nl.nn.adapterframework.util.Misc;\n public class StreamTransformerPipe extends FixedForwardPipe {\n \n \tpublic static final String originalBlockKey=\"originalBlock\";\n-\tprivate final String deprecationSuppressKey=\"warnings.suppress.deprecated\";\n \n \tprivate boolean storeOriginalBlock=false;\n \tprivate boolean closeInputstreamOnExit=true;\n"}}, {"oid": "70b91229de0867f88e74df6f03a2854dd14788a2", "url": "https://github.com/ibissource/iaf/commit/70b91229de0867f88e74df6f03a2854dd14788a2", "message": "add adapter information to sql injection warnings", "committedDate": "2020-10-15T13:35:43Z", "type": "commit"}, {"oid": "c971274a9c79009690110fa362d0e7d98aa34dcc", "url": "https://github.com/ibissource/iaf/commit/c971274a9c79009690110fa362d0e7d98aa34dcc", "message": "improve message", "committedDate": "2020-10-16T07:09:26Z", "type": "commit"}, {"oid": "792e18b7b6ac814cca0b9ace88215d973b86a9f2", "url": "https://github.com/ibissource/iaf/commit/792e18b7b6ac814cca0b9ace88215d973b86a9f2", "message": "improve warning message", "committedDate": "2020-10-16T08:01:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzUzNjkzOQ==", "url": "https://github.com/ibissource/iaf/pull/1147#discussion_r507536939", "bodyText": "Technically, final statics field names should be all uppercase", "author": "nielsm5", "createdAt": "2020-10-19T07:44:24Z", "path": "core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationWarnings.java", "diffHunk": "@@ -32,6 +33,9 @@\n public final class ConfigurationWarnings extends BaseConfigurationWarnings {\n \tprivate static ConfigurationWarnings self = null;\n \tprivate Configuration activeConfiguration = null;\n+\tpublic static final String sqlInjectionSuppressKey = \"warnings.suppress.sqlInjections\";\n+\tpublic static final String deprecationSuppressKey=\"warnings.suppress.deprecated\";\n+\tpublic static final String defaultValueSuppressKey = \"warnings.suppress.defaultvalue\";", "originalCommit": "792e18b7b6ac814cca0b9ace88215d973b86a9f2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a4eaa7ea8a0d1426ba6591198c0b17046d25e92b", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationWarnings.java b/core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationWarnings.java\nindex 1a73929fe..7a9818491 100644\n--- a/core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationWarnings.java\n+++ b/core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationWarnings.java\n\n@@ -33,9 +33,9 @@ import nl.nn.adapterframework.util.ClassUtils;\n public final class ConfigurationWarnings extends BaseConfigurationWarnings {\n \tprivate static ConfigurationWarnings self = null;\n \tprivate Configuration activeConfiguration = null;\n-\tpublic static final String sqlInjectionSuppressKey = \"warnings.suppress.sqlInjections\";\n-\tpublic static final String deprecationSuppressKey=\"warnings.suppress.deprecated\";\n-\tpublic static final String defaultValueSuppressKey = \"warnings.suppress.defaultvalue\";\n+\tpublic static final String SQL_INJECTION_SUPPRESS_KEY = \"warnings.suppress.sqlInjections\";\n+\tpublic static final String DEPRECATION_SUPPRESS_KEY=\"warnings.suppress.deprecated\";\n+\tpublic static final String DEFAULT_VALUE_SUPPRESS_KEY = \"warnings.suppress.defaultvalue\";\n \n \t/**\n \t * Add configuration independent warning\n"}}, {"oid": "a4eaa7ea8a0d1426ba6591198c0b17046d25e92b", "url": "https://github.com/ibissource/iaf/commit/a4eaa7ea8a0d1426ba6591198c0b17046d25e92b", "message": "static fields to upper-case", "committedDate": "2020-10-19T12:07:28Z", "type": "commit"}, {"oid": "6fd3bc4852b14ffbfc0fd12d16b19b32a5b9c2cd", "url": "https://github.com/ibissource/iaf/commit/6fd3bc4852b14ffbfc0fd12d16b19b32a5b9c2cd", "message": "remove unused import", "committedDate": "2020-10-19T12:18:34Z", "type": "commit"}]}