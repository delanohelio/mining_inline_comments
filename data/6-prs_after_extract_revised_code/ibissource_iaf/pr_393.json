{"pr_number": 393, "pr_title": "Add possibility to put error details in ESB SOAP body response", "pr_createdAt": "2020-01-31T14:20:26Z", "pr_url": "https://github.com/ibissource/iaf/pull/393", "timeline": [{"oid": "9e2b378a5171affc0892871a6f9579c3615479b8", "url": "https://github.com/ibissource/iaf/commit/9e2b378a5171affc0892871a6f9579c3615479b8", "message": "Add possibility to put error details in ESB SOAP body response", "committedDate": "2020-01-31T14:18:10Z", "type": "commit"}, {"oid": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1", "url": "https://github.com/ibissource/iaf/commit/c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1", "message": "Do not commit this file", "committedDate": "2020-01-31T14:24:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5NDY0NQ==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r377594645", "bodyText": "Je kan niet zomaar voor elke Xslt een parameter 'environment' toevoegen, hier in de XsltSender.\nAls dit voor de EsbSoapWrapperPipe nodig is, dan moet je het daar doen.", "author": "gvanbrakel", "createdAt": "2020-02-11T12:06:41Z", "path": "core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java", "diffHunk": "@@ -95,6 +96,13 @@\n \t */\n \t@Override\n \tpublic void configure() throws ConfigurationException {\n+\t\tParameterList parameterList = getParameterList();", "originalCommit": "c66e0f16b6cb16774423dcb1aa7ac03bcf9465f1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI4NzA0OA==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r378287048", "bodyText": "Ja daar heb je eigenlijk wel gelijk in. Maar het leek me handig om dit generiek te maken omdat je het vaker nodig kunt hebben. Ik stel voor om een attribuut aan de XsltSender toe te voegen waarmee deze parameter toegevoegd wordt (addEnvironmentParameter, default is dan 'false').\nAccoord?", "author": "leeuw73", "createdAt": "2020-02-12T14:32:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5NDY0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA2MDg5Ng==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r397060896", "bodyText": "Je kan toch ook gewoon een parameter aan je configuratie toevoegen als je hem nodig hebt.\nWaarom moet dit iets speciaals zijn?", "author": "gvanbrakel", "createdAt": "2020-03-24T10:50:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5NDY0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "2efc7164041da708463932ec00492e7e6ffc6b7d", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java b/core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java\nindex 1465dea21..9745c48db 100644\n--- a/core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java\n+++ b/core/src/main/java/nl/nn/adapterframework/senders/XsltSender.java\n\n@@ -97,7 +102,7 @@ public class XsltSender extends StreamingSenderBase implements IThreadCreator {\n \t@Override\n \tpublic void configure() throws ConfigurationException {\n \t\tParameterList parameterList = getParameterList();\n-\t\tif (parameterList == null || parameterList.findParameter(ENVIRONMENT) == null) {\n+\t\tif (isAddEnvironmentParameter() && (parameterList == null || parameterList.findParameter(ENVIRONMENT) == null)) {\n \t\t\tParameter p = new Parameter();\n \t\t\tp.setName(ENVIRONMENT);\n \t\t\tp.setValue(AppConstants.getInstance().getResolvedProperty(\"otap.stage\"));\n"}}, {"oid": "b5ac8977abb008615124ceb5b440cd7b585206ea", "url": "https://github.com/ibissource/iaf/commit/b5ac8977abb008615124ceb5b440cd7b585206ea", "message": "Merge remote-tracking branch 'origin/master' into\nEsbSoapBodyErrorDetails\n\nConflicts:\n\tRELEASES.md", "committedDate": "2020-02-28T11:10:29Z", "type": "commit"}, {"oid": "4debe9488dce924c6b5b5919023616c2ce57a0ea", "url": "https://github.com/ibissource/iaf/commit/4debe9488dce924c6b5b5919023616c2ce57a0ea", "message": "[ci skip] Merge release notes", "committedDate": "2020-02-28T11:13:45Z", "type": "commit"}, {"oid": "d8997c4ebdb06180d7ff98d5b5d4879223a7a733", "url": "https://github.com/ibissource/iaf/commit/d8997c4ebdb06180d7ff98d5b5d4879223a7a733", "message": "Merge branch 'master' into EsbSoapBodyErrorDetails", "committedDate": "2020-02-28T14:39:22Z", "type": "commit"}, {"oid": "2efc7164041da708463932ec00492e7e6ffc6b7d", "url": "https://github.com/ibissource/iaf/commit/2efc7164041da708463932ec00492e7e6ffc6b7d", "message": "XsltSender/XsltPipe: new attribute addEnvironmentParameter", "committedDate": "2020-02-28T15:14:28Z", "type": "commit"}, {"oid": "9b0bc41fd941948909eb200fb8d5412a0457775a", "url": "https://github.com/ibissource/iaf/commit/9b0bc41fd941948909eb200fb8d5412a0457775a", "message": "Add comments for soapBody.xls", "committedDate": "2020-02-28T15:26:16Z", "type": "commit"}, {"oid": "76e72703f1d9ccab59f90f4b7bd21a8baf439596", "url": "https://github.com/ibissource/iaf/commit/76e72703f1d9ccab59f90f4b7bd21a8baf439596", "message": "Replace attribute addEnvironmentParameter by xslt parameter", "committedDate": "2020-03-25T14:08:34Z", "type": "commit"}, {"oid": "ad8f03c0f6325d8dfba354af6c04c4475aa5614f", "url": "https://github.com/ibissource/iaf/commit/ad8f03c0f6325d8dfba354af6c04c4475aa5614f", "message": "Remove free-ride change", "committedDate": "2020-03-25T14:12:57Z", "type": "commit"}, {"oid": "cdc69f2a38e499a04aa6b71d4b449e4155d098d3", "url": "https://github.com/ibissource/iaf/commit/cdc69f2a38e499a04aa6b71d4b449e4155d098d3", "message": "clarify ibisdoc", "committedDate": "2020-03-31T11:26:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1ODUzMA==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r397058530", "bodyText": "Is dit nodig voor deze aanpassing?", "author": "gvanbrakel", "createdAt": "2020-03-24T10:46:34Z", "path": "core/src/main/java/nl/nn/adapterframework/extensions/test/IbisTester.java", "diffHunk": "@@ -141,9 +141,13 @@ public void initTest() {\n \t\tSystem.setProperty(\"log.level\", \"INFO\");\n \t\tSystem.setProperty(\"dtap.stage\", \"LOC\");\n \t\tSystem.setProperty(\"application.server.type\", \"IBISTEST\");\n+\t\tSystem.setProperty(\"application.server.type.custom\", \"\");\n \t\tSystem.setProperty(\"flow.create.url\", \"\");\n \t\tdebug(\"***start***\");\n-\t\tibisContext = null;\n+\t\tif (ibisContext != null) {\n+\t\t\tibisContext.destroy();\n+\t\t\tibisContext = null;\n+\t\t}", "originalCommit": "9b0bc41fd941948909eb200fb8d5412a0457775a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE5MTU3Mg==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r403191572", "bodyText": "Deze class is uit de PR", "author": "leeuw73", "createdAt": "2020-04-03T17:50:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1ODUzMA=="}], "type": "inlineReview", "revised_code": {"commit": "ad8f03c0f6325d8dfba354af6c04c4475aa5614f", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/extensions/test/IbisTester.java b/core/src/main/java/nl/nn/adapterframework/extensions/test/IbisTester.java\nindex 063576df7..6b6e51b7d 100644\n--- a/core/src/main/java/nl/nn/adapterframework/extensions/test/IbisTester.java\n+++ b/core/src/main/java/nl/nn/adapterframework/extensions/test/IbisTester.java\n\n@@ -141,13 +141,9 @@ public class IbisTester {\n \t\tSystem.setProperty(\"log.level\", \"INFO\");\n \t\tSystem.setProperty(\"dtap.stage\", \"LOC\");\n \t\tSystem.setProperty(\"application.server.type\", \"IBISTEST\");\n-\t\tSystem.setProperty(\"application.server.type.custom\", \"\");\n \t\tSystem.setProperty(\"flow.create.url\", \"\");\n \t\tdebug(\"***start***\");\n-\t\tif (ibisContext != null) {\n-\t\t\tibisContext.destroy();\n-\t\t\tibisContext = null;\n-\t\t}\n+\t\tibisContext = null;\n \t}\n \n \tpublic void closeTest() {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1OTQyMw==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r397059423", "bodyText": "Bij wat voor replacements gebeurt dit dan? En waarom dan?", "author": "gvanbrakel", "createdAt": "2020-03-24T10:48:13Z", "path": "core/src/main/java/nl/nn/adapterframework/pipes/AbstractPipe.java", "diffHunk": "@@ -497,6 +498,16 @@ public boolean isPreserveInput() {\n \t\treturn preserveInput;\n \t}\n \n+\t@IbisDoc({\"6\", \"when set, the original input (which will be replaced) is stored under this session key\", \"\"})", "originalCommit": "9b0bc41fd941948909eb200fb8d5412a0457775a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE5MTg3OA==", "url": "https://github.com/ibissource/iaf/pull/393#discussion_r403191878", "bodyText": "Attribuut heb ik verwijderd", "author": "leeuw73", "createdAt": "2020-04-03T17:50:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA1OTQyMw=="}], "type": "inlineReview", "revised_code": {"commit": "cdc69f2a38e499a04aa6b71d4b449e4155d098d3", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/pipes/AbstractPipe.java b/core/src/main/java/nl/nn/adapterframework/pipes/AbstractPipe.java\nindex ea0299920..70670925e 100644\n--- a/core/src/main/java/nl/nn/adapterframework/pipes/AbstractPipe.java\n+++ b/core/src/main/java/nl/nn/adapterframework/pipes/AbstractPipe.java\n\n@@ -498,7 +498,7 @@ public abstract class AbstractPipe implements IExtendedPipe, HasTransactionAttri\n \t\treturn preserveInput;\n \t}\n \n-\t@IbisDoc({\"6\", \"when set, the original input (which will be replaced) is stored under this session key\", \"\"})\n+\t@IbisDoc({\"6\", \"when set, the original input is stored under this session key in case it is replaced using getInputFromSessionKey or getInputFromFixedValue\", \"\"})\n \t@Override\n \tpublic void setStoreReplacedInputInSessionKey(String string) {\n \t\tstoreReplacedInputInSessionKey = string;\n"}}, {"oid": "7f3cc4d3249bd871aba9c1c44466b96f0f2039f6", "url": "https://github.com/ibissource/iaf/commit/7f3cc4d3249bd871aba9c1c44466b96f0f2039f6", "message": "Remove attribute storeReplacedInputInSessionKey\n\nAnd remove ERROR counter suffix", "committedDate": "2020-04-03T17:45:42Z", "type": "commit"}, {"oid": "5d715ba741057dd81ab14fe53cbc60d8aa394d85", "url": "https://github.com/ibissource/iaf/commit/5d715ba741057dd81ab14fe53cbc60d8aa394d85", "message": "Forgotten Larva scenario", "committedDate": "2020-04-04T07:48:36Z", "type": "commit"}, {"oid": "6ee2e3c197bf8dbb6bf92309c58931e1e0981feb", "url": "https://github.com/ibissource/iaf/commit/6ee2e3c197bf8dbb6bf92309c58931e1e0981feb", "message": "Merge branch 'master' into EsbSoapBodyErrorDetails", "committedDate": "2020-04-15T13:35:47Z", "type": "commit"}]}