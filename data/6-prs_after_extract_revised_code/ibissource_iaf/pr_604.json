{"pr_number": 604, "pr_title": "Apply necessary changes for ApiPrincipal Hardening, #595", "pr_createdAt": "2020-04-15T12:28:52Z", "pr_url": "https://github.com/ibissource/iaf/pull/604", "timeline": [{"oid": "cf1bb65dfa8bc4780b56024be4d33981640d21f9", "url": "https://github.com/ibissource/iaf/commit/cf1bb65dfa8bc4780b56024be4d33981640d21f9", "message": "Apply necessary changes for ApiPrincipal Hardening, #595", "committedDate": "2020-04-14T15:22:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg1NjUzMg==", "url": "https://github.com/ibissource/iaf/pull/604#discussion_r408856532", "bodyText": "Since AppConstants is a static instance you can just refer to it by calling AppConstants.getInstance()\nSaves this additional parameter, which is always 'AppConstants.getInstance()'", "author": "nielsm5", "createdAt": "2020-04-15T13:49:39Z", "path": "core/src/main/java/nl/nn/adapterframework/lifecycle/ServletManager.java", "diffHunk": "@@ -155,4 +144,17 @@ public void register(DynamicRegistration.Servlet servlet) {\n \n \t\tregisterServlet(servlet.getName(), servlet.getServlet(), servlet.getUrlMapping(), servlet.getRoles(), servlet.loadOnStartUp(), parameters);\n \t}\n+\n+\tpublic static ServletSecurity.TransportGuarantee getTransportGuarantee(AppConstants appConstants, String propertyName) {", "originalCommit": "cf1bb65dfa8bc4780b56024be4d33981640d21f9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9f8370ea40596f2f055fbc7671fed7073056d6be", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/lifecycle/ServletManager.java b/core/src/main/java/nl/nn/adapterframework/lifecycle/ServletManager.java\nindex 0aad8e968..539cd8eae 100644\n--- a/core/src/main/java/nl/nn/adapterframework/lifecycle/ServletManager.java\n+++ b/core/src/main/java/nl/nn/adapterframework/lifecycle/ServletManager.java\n\n@@ -145,7 +145,8 @@ public class ServletManager {\n \t\tregisterServlet(servlet.getName(), servlet.getServlet(), servlet.getUrlMapping(), servlet.getRoles(), servlet.loadOnStartUp(), parameters);\n \t}\n \n-\tpublic static ServletSecurity.TransportGuarantee getTransportGuarantee(AppConstants appConstants, String propertyName) {\n+\tpublic static ServletSecurity.TransportGuarantee getTransportGuarantee(String propertyName) {\n+\t\tAppConstants appConstants = AppConstants.getInstance();\n \t\tString constraintType = appConstants.getString(propertyName, null);\n \t\tif (StringUtils.isNotEmpty(constraintType))\n \t\t\treturn ServletSecurity.TransportGuarantee.valueOf(constraintType);\n"}}, {"oid": "9f8370ea40596f2f055fbc7671fed7073056d6be", "url": "https://github.com/ibissource/iaf/commit/9f8370ea40596f2f055fbc7671fed7073056d6be", "message": "Remove appconstants from params.", "committedDate": "2020-04-15T13:55:07Z", "type": "commit"}]}