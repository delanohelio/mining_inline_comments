{"pr_number": 757, "pr_title": "Always escape XML log data", "pr_createdAt": "2020-05-25T17:37:56Z", "pr_url": "https://github.com/ibissource/iaf/pull/757", "timeline": [{"oid": "a929c0534203b5d8cdbadc1a222314f107ec49d7", "url": "https://github.com/ibissource/iaf/commit/a929c0534203b5d8cdbadc1a222314f107ec49d7", "message": "Always escape XML log data", "committedDate": "2020-05-25T17:37:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA1NzAzMA==", "url": "https://github.com/ibissource/iaf/pull/757#discussion_r430057030", "bodyText": "Nu worden de xml log messages dubbel geescaped als je het mij vraagt.", "author": "gvanbrakel", "createdAt": "2020-05-25T19:40:39Z", "path": "core/src/test/java/nl/nn/adapterframework/logging/TestLogMessages.java", "diffHunk": "@@ -108,11 +108,11 @@ public void testXmlLayout() {\n \t\t\tassertEquals(6, logEvents.size());\n \n \t\t\tString expectedWarn = \"<event logger=\\\"org.apache.logging.log4j.spi.AbstractLogger\\\" timestamp=\\\"xxx\\\" level=\\\"WARN\\\" thread=\\\"HIDE-HERE\\\">\\n\" + \n-\t\t\t\"  <message>my beautiful warning &lt;![CDATA[message]]&gt; for me &amp; you --&gt; \\\"world\\\"</message>\\n\" + \n+\t\t\t\"  <message>my beautiful warning &amp;lt;![CDATA[message]]&amp;gt; for me &amp;amp; you --&amp;gt; &amp;quot;world&amp;quot;</message>\\n\" + \n \t\t\t\"  <throwable />\\n\" + \n \t\t\t\"</event>\";\n \t\t\tString expectedError = \"<event logger=\\\"org.apache.logging.log4j.spi.AbstractLogger\\\" timestamp=\\\"xxx\\\" level=\\\"ERROR\\\" thread=\\\"HIDE-HERE\\\">\\n\" + \n-\t\t\t\"  <message>my beautiful error &lt;![CDATA[message]]&gt; for me &amp; you --&gt; \\\"world\\\"</message>\\n\" + \n+\t\t\t\"  <message>my beautiful error &amp;lt;![CDATA[message]]&amp;gt; for me &amp;amp; you --&amp;gt; &amp;quot;world&amp;quot;</message>\\n\" + \n \t\t\t\"  <throwable />\\n\" + ", "originalCommit": "a929c0534203b5d8cdbadc1a222314f107ec49d7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4e10257e7b7a4def27bdadd330dfd7621a8d389d", "chunk": "diff --git a/core/src/test/java/nl/nn/adapterframework/logging/TestLogMessages.java b/core/src/test/java/nl/nn/adapterframework/logging/TestLogMessages.java\nindex 58f8e6598..d8af2134d 100644\n--- a/core/src/test/java/nl/nn/adapterframework/logging/TestLogMessages.java\n+++ b/core/src/test/java/nl/nn/adapterframework/logging/TestLogMessages.java\n\n@@ -108,11 +108,11 @@ public class TestLogMessages {\n \t\t\tassertEquals(6, logEvents.size());\n \n \t\t\tString expectedWarn = \"<event logger=\\\"org.apache.logging.log4j.spi.AbstractLogger\\\" timestamp=\\\"xxx\\\" level=\\\"WARN\\\" thread=\\\"HIDE-HERE\\\">\\n\" + \n-\t\t\t\"  <message>my beautiful warning &amp;lt;![CDATA[message]]&amp;gt; for me &amp;amp; you --&amp;gt; &amp;quot;world&amp;quot;</message>\\n\" + \n+\t\t\t\"  <message>my beautiful warning &lt;![CDATA[message]]&gt; for me &amp; you --&gt; \\\\\\\"world\\\\\\\"</message>\\n\" + \n \t\t\t\"  <throwable />\\n\" + \n \t\t\t\"</event>\";\n \t\t\tString expectedError = \"<event logger=\\\"org.apache.logging.log4j.spi.AbstractLogger\\\" timestamp=\\\"xxx\\\" level=\\\"ERROR\\\" thread=\\\"HIDE-HERE\\\">\\n\" + \n-\t\t\t\"  <message>my beautiful error &amp;lt;![CDATA[message]]&amp;gt; for me &amp;amp; you --&amp;gt; &amp;quot;world&amp;quot;</message>\\n\" + \n+\t\t\t\"  <message>my beautiful error &lt;![CDATA[message]]&gt; for me &amp; you --&gt; \\\\\\\"world\\\\\\\"</message>\\n\" + \n \t\t\t\"  <throwable />\\n\" + \n \t\t\t\"</event>\";\n \n"}}, {"oid": "4e10257e7b7a4def27bdadd330dfd7621a8d389d", "url": "https://github.com/ibissource/iaf/commit/4e10257e7b7a4def27bdadd330dfd7621a8d389d", "message": "Do not double escape characters", "committedDate": "2020-05-26T09:32:44Z", "type": "commit"}, {"oid": "b33a1aad9004725cac65f8e7cf1b6c9ae2f14390", "url": "https://github.com/ibissource/iaf/commit/b33a1aad9004725cac65f8e7cf1b6c9ae2f14390", "message": "Add pdf test file to log", "committedDate": "2020-05-26T11:42:36Z", "type": "commit"}]}