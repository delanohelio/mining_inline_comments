{"pr_number": 1136, "pr_title": "fix test scenarios to create required folder automatically", "pr_createdAt": "2020-10-12T12:03:33Z", "pr_url": "https://github.com/ibissource/iaf/pull/1136", "timeline": [{"oid": "7f52fd0c72c7e129327cacc8158f83f310093738", "url": "https://github.com/ibissource/iaf/commit/7f52fd0c72c7e129327cacc8158f83f310093738", "message": "fix test scenarios to create required folder automatically", "committedDate": "2020-10-12T11:59:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5MzQ0Nw==", "url": "https://github.com/ibissource/iaf/pull/1136#discussion_r503393447", "bodyText": "Could you:\n\nset the setter before the getter, with the ibisdoc before the setter\nmake a setCheckDirectory() with @deprecated, and a config warning stating what you did", "author": "gvanbrakel", "createdAt": "2020-10-12T16:03:58Z", "path": "core/src/main/java/nl/nn/adapterframework/pipes/UnzipPipe.java", "diffHunk": "@@ -337,14 +337,12 @@ public void setCreateSubdirectories(boolean b) {\n \tpublic boolean isCreateSubdirectories() {\n \t\treturn createSubdirectories;\n \t}\n-\t\n-\t@IbisDoc({\"if set <code>true</code>, validation on directory is ignored\", \"false\"})\n-\tpublic boolean isCheckDirectory()\n-\t{\n-\t\treturn checkDirectory;\n+\n+\t@IbisDoc({\"if set <code>true</code>, validation of directory is ignored\", \"false\"})\n+\tpublic boolean isAssumeDirectoryExists() {\n+\t\treturn assumeDirectoryExists;", "originalCommit": "7f52fd0c72c7e129327cacc8158f83f310093738", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e03cc260885a536604377683eba2c05d3ca5fd3e", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/pipes/UnzipPipe.java b/core/src/main/java/nl/nn/adapterframework/pipes/UnzipPipe.java\nindex d52aa43ae..0c51c269a 100644\n--- a/core/src/main/java/nl/nn/adapterframework/pipes/UnzipPipe.java\n+++ b/core/src/main/java/nl/nn/adapterframework/pipes/UnzipPipe.java\n\n@@ -339,10 +340,16 @@ public class UnzipPipe extends FixedForwardPipe {\n \t}\n \n \t@IbisDoc({\"if set <code>true</code>, validation of directory is ignored\", \"false\"})\n+\tpublic void setAssumeDirectoryExists(boolean assumeDirectoryExists) {\n+\t\tthis.assumeDirectoryExists = assumeDirectoryExists;\n+\t}\n \tpublic boolean isAssumeDirectoryExists() {\n \t\treturn assumeDirectoryExists;\n \t}\n-\tpublic void setAssumeDirectoryExists(boolean assumeDirectoryExists) {\n-\t\tthis.assumeDirectoryExists = assumeDirectoryExists;\n+\n+\t@Deprecated\n+\t@ConfigurationWarning(\"the attribute 'checkDirectory' has been renamed to 'assumeDirectoryExists'\")\n+\tpublic void setCheckDirectory(boolean checkDirectory) {\n+\t\tthis.assumeDirectoryExists = checkDirectory;\n \t}\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5NTA5MQ==", "url": "https://github.com/ibissource/iaf/pull/1136#discussion_r503395091", "bodyText": "Could you place the getter after the setter?", "author": "gvanbrakel", "createdAt": "2020-10-12T16:06:53Z", "path": "core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java", "diffHunk": "@@ -305,4 +313,12 @@ public void setFxfVersion(String fxfVersion) {\n \tpublic String getFxfVersion() {\n \t\treturn fxfVersion;\n \t}\n+\n+\tpublic boolean isCreateFolder() {\n+\t\treturn createFolder;\n+\t}", "originalCommit": "7f52fd0c72c7e129327cacc8158f83f310093738", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e03cc260885a536604377683eba2c05d3ca5fd3e", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java b/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java\nindex 6da9ea16b..4096e250d 100644\n--- a/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java\n+++ b/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java\n\n@@ -314,11 +312,11 @@ public class FxfWrapperPipe extends EsbSoapWrapperPipe {\n \t\treturn fxfVersion;\n \t}\n \n-\tpublic boolean isCreateFolder() {\n-\t\treturn createFolder;\n-\t}\n \t@IbisDoc({\"when set to <code>true</code>, the folder corresponding fxf.dir property will be created in case it does not exist\", \"false\"})\n \tpublic void setCreateFolder(boolean createFolder) {\n \t\tthis.createFolder = createFolder;\n \t}\n+\tpublic boolean isCreateFolder() {\n+\t\treturn createFolder;\n+\t}\n }\n"}}, {"oid": "e03cc260885a536604377683eba2c05d3ca5fd3e", "url": "https://github.com/ibissource/iaf/commit/e03cc260885a536604377683eba2c05d3ca5fd3e", "message": "change codestyle for readability", "committedDate": "2020-10-13T05:53:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzczODAwOA==", "url": "https://github.com/ibissource/iaf/pull/1136#discussion_r503738008", "bodyText": "Could you please remove the space in front of could (lower case), put arguments between [ ... ] instead of ' ...  '. And can you also change this in the ConfigurationException underneath?", "author": "nielsm5", "createdAt": "2020-10-13T07:48:55Z", "path": "core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java", "diffHunk": "@@ -117,7 +119,11 @@ public void configure() throws ConfigurationException {\n \t\t\tfxfDir = AppConstants.getInstance(getConfigurationClassLoader()).getResolvedProperty(\"fxf.dir\");\n \t\t\tif (fxfDir == null) {\n \t\t\t\tthrow new ConfigurationException(\"property fxf.dir has not been initialised\");\n-\t\t\t} else if (!new File(fxfDir).isDirectory()) {\n+\t\t\t}\n+\t\t\tif(isCreateFolder() && !new File(fxfDir).exists() && !new File(fxfDir).mkdirs()) {\n+\t\t\t\tthrow new ConfigurationException(\" Cannot create fxf.dir in the path '\" + fxfDir + \"'\");", "originalCommit": "e03cc260885a536604377683eba2c05d3ca5fd3e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "97c5bb2a84db800e68df90f08a1c994435f80753", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java b/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java\nindex 4096e250d..242456c0e 100644\n--- a/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java\n+++ b/core/src/main/java/nl/nn/adapterframework/extensions/fxf/FxfWrapperPipe.java\n\n@@ -121,10 +121,10 @@ public class FxfWrapperPipe extends EsbSoapWrapperPipe {\n \t\t\t\tthrow new ConfigurationException(\"property fxf.dir has not been initialised\");\n \t\t\t}\n \t\t\tif(isCreateFolder() && !new File(fxfDir).exists() && !new File(fxfDir).mkdirs()) {\n-\t\t\t\tthrow new ConfigurationException(\" Cannot create fxf.dir in the path '\" + fxfDir + \"'\");\n+\t\t\t\tthrow new ConfigurationException(\"cannot create fxf.dir in the path ['\" + fxfDir + \"]'\");\n \t\t\t}\n \t\t\tif(!new File(fxfDir).isDirectory()) {\n-\t\t\t\tthrow new ConfigurationException(\"fxf.dir '\" + fxfDir + \"' doesn't exist or is not a directory\");\n+\t\t\t\tthrow new ConfigurationException(\"fxf.dir ['\" + fxfDir + \"'] doesn't exist or is not a directory\");\n \t\t\t}\n \t\t\ttransferFlowIdTp = XmlUtils.getXPathTransformerPool(null, \"/OnCompletedTransferNotify_Action/TransferFlowId\", \"text\", false, getParameterList());\n \t\t\tclientFilenameTp = XmlUtils.getXPathTransformerPool(null, \"/OnCompletedTransferNotify_Action/ClientFilename\", \"text\", false, getParameterList());\n"}}, {"oid": "97c5bb2a84db800e68df90f08a1c994435f80753", "url": "https://github.com/ibissource/iaf/commit/97c5bb2a84db800e68df90f08a1c994435f80753", "message": "path in brackets", "committedDate": "2020-10-13T11:04:50Z", "type": "commit"}, {"oid": "75d6f0ab1b909b1023e063b5d067c75a640359cb", "url": "https://github.com/ibissource/iaf/commit/75d6f0ab1b909b1023e063b5d067c75a640359cb", "message": "Revert \"path in brackets\"\n\nThis reverts commit 97c5bb2a84db800e68df90f08a1c994435f80753.", "committedDate": "2020-10-13T11:05:16Z", "type": "commit"}, {"oid": "527366a51b768cd2c6b8a6e7781f5e90012a772a", "url": "https://github.com/ibissource/iaf/commit/527366a51b768cd2c6b8a6e7781f5e90012a772a", "message": "path in brackets instead of quotes", "committedDate": "2020-10-13T11:06:32Z", "type": "commit"}]}