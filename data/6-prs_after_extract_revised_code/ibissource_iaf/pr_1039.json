{"pr_number": 1039, "pr_title": "IbisDocPipe: Get rid of expecting errors", "pr_createdAt": "2020-09-07T09:16:59Z", "pr_url": "https://github.com/ibissource/iaf/pull/1039", "timeline": [{"oid": "76df253395351906fc8b53e38d6444e7ff18c541", "url": "https://github.com/ibissource/iaf/commit/76df253395351906fc8b53e38d6444e7ff18c541", "message": "IbisDocPipe: Get rid of expecting errors", "committedDate": "2020-09-07T09:15:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDMxNDgwNA==", "url": "https://github.com/ibissource/iaf/pull/1039#discussion_r484314804", "bodyText": "Ik denk dat het wel goed is om ergens te kunnen zien dat deze Exceptie is opgetreden, bijvoorbeeld in de logging, door hier iets op te nemen als:\nlog.warn(\"ignoring NoClassDefFoundError, assuming it is about a third party class\", e);\nAls het namelijk een keer toch over een framework class gaat, dan zoek je je anders een aap.", "author": "gvanbrakel", "createdAt": "2020-09-07T09:36:49Z", "path": "core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java", "diffHunk": "@@ -312,9 +312,15 @@ private static void addExcludeFilter(ClassPathBeanDefinitionScanner scanner, Str\n \tprivate static Class<?> getClass(String className) {\n \t\ttry {\n \t\t\treturn Class.forName(className);\n-\t\t} catch (Throwable t) {\n-\t\t\terrors.put(className, t.getClass() + \": \" + t.getMessage());\n+\t\t} catch (NoClassDefFoundError e) {\n+\t\t\t// This exception happens when you have the proprietary sub-projects of the Frank!Framework.\n+\t\t\t// These sub-projects have classes that depend on third-party classes. If such a third-party\n+\t\t\t// class is not found, then this exception handler is entered. We ignore the error because\n+\t\t\t// we do have the class in the proprietary FF! subproject.\n \t\t\treturn null;", "originalCommit": "76df253395351906fc8b53e38d6444e7ff18c541", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d19acd9a2a0491f9db6a7710049267766b4a98fa", "chunk": "diff --git a/core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java b/core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java\nindex e7c952ad0..1540634c3 100644\n--- a/core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java\n+++ b/core/src/main/java/nl/nn/adapterframework/doc/IbisDocPipe.java\n\n@@ -317,6 +317,7 @@ public class IbisDocPipe extends FixedForwardPipe {\n \t\t\t// These sub-projects have classes that depend on third-party classes. If such a third-party\n \t\t\t// class is not found, then this exception handler is entered. We ignore the error because\n \t\t\t// we do have the class in the proprietary FF! subproject.\n+\t\t\tlog.warn(\"Ignoring NoClassDefFoundError, assuming it is about a third party class\", e);\n \t\t\treturn null;\n \t\t} catch(ClassNotFoundException e) {\n \t\t\t// This handler is entered when we really do not have the class.\n"}}, {"oid": "d19acd9a2a0491f9db6a7710049267766b4a98fa", "url": "https://github.com/ibissource/iaf/commit/d19acd9a2a0491f9db6a7710049267766b4a98fa", "message": "Write log message about ignoring NoClassDefFoundError", "committedDate": "2020-09-07T09:57:15Z", "type": "commit"}]}