{"pr_number": 898, "pr_title": "DROOLS-4792: Reduce RenderingInformation computation", "pr_createdAt": "2020-02-14T11:05:13Z", "pr_url": "https://github.com/kiegroup/appformer/pull/898", "timeline": [{"oid": "6f59cf498d6d0e6500025b9007b2649e5eecdfc8", "url": "https://github.com/kiegroup/appformer/commit/6f59cf498d6d0e6500025b9007b2649e5eecdfc8", "message": "DROOLS-4792: Reduce RenderingInformation computation\n\nFor more details see https://issues.redhat.com/browse/DROOLS-4792", "committedDate": "2020-02-14T11:04:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM3NTY5MA==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379375690", "bodyText": "I'd be tempted to remove this method all together now.", "author": "manstis", "createdAt": "2020-02-14T11:10:41Z", "path": "uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java", "diffHunk": "@@ -98,16 +102,14 @@ private boolean isHeaderSelectionOriginSet(final GridWidget selectedGridWidget)\n         return !gridModel.getSelectedHeaderCells().isEmpty();\n     }\n \n-    private boolean isGridWidgetRendered(final GridWidget gridWidget) {\n-        final BaseGridRendererHelper rendererHelper = gridWidget.getRendererHelper();\n-        final BaseGridRendererHelper.RenderingInformation renderingInformation = rendererHelper.getRenderingInformation();\n+    private boolean isGridWidgetRendered(final BaseGridRendererHelper.RenderingInformation renderingInformation) {", "originalCommit": "6f59cf498d6d0e6500025b9007b2649e5eecdfc8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4MDcxMQ==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379380711", "bodyText": "ok, that is questionable, it is one liner, but the method name gives a little bit more information, what the null check means", "author": "jomarko", "createdAt": "2020-02-14T11:23:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM3NTY5MA=="}], "type": "inlineReview", "revised_code": {"commit": "b9afa1c851e230120914628787246b4c57c57e97", "chunk": "diff --git a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\nindex 6cc55b6e0..23c69c2ac 100644\n--- a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n+++ b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n\n@@ -102,18 +104,15 @@ public abstract class BaseKeyboardOperation implements KeyboardOperation {\n         return !gridModel.getSelectedHeaderCells().isEmpty();\n     }\n \n-    private boolean isGridWidgetRendered(final BaseGridRendererHelper.RenderingInformation renderingInformation) {\n-        return renderingInformation != null;\n-    }\n-\n     private boolean isGridColumnCandidateForScroll(final GridWidget gridWidget,\n                                                    final BaseGridRendererHelper.RenderingInformation renderingInformation,\n                                                    final boolean isHeaderCellSelected) {\n-        final GridData gridModel = gridWidget.getModel();\n-        if (renderingInformation == null) {\n+        if (Objects.isNull(renderingInformation)) {\n             return false;\n         }\n \n+        final GridData gridModel = gridWidget.getModel();\n+\n         final List<GridColumn<?>> columns = gridModel.getColumns();\n         final GridData.SelectedCell origin = getSelectedCellOrigin(gridModel, isHeaderCellSelected);\n         final int uiColumnIndex = ColumnIndexUtilities.findUiColumnIndex(columns,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM3NjM1NQ==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379376355", "bodyText": "You could move this line to after the check for renderingInformation == null.\n.. and why are you not using Objects.isNull(..)!!!! (You're the main promoter of it's use!)", "author": "manstis", "createdAt": "2020-02-14T11:12:19Z", "path": "uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java", "diffHunk": "@@ -98,16 +102,14 @@ private boolean isHeaderSelectionOriginSet(final GridWidget selectedGridWidget)\n         return !gridModel.getSelectedHeaderCells().isEmpty();\n     }\n \n-    private boolean isGridWidgetRendered(final GridWidget gridWidget) {\n-        final BaseGridRendererHelper rendererHelper = gridWidget.getRendererHelper();\n-        final BaseGridRendererHelper.RenderingInformation renderingInformation = rendererHelper.getRenderingInformation();\n+    private boolean isGridWidgetRendered(final BaseGridRendererHelper.RenderingInformation renderingInformation) {\n         return renderingInformation != null;\n     }\n \n-    private boolean isGridColumnCandidateForScroll(final GridWidget gridWidget, final boolean isHeaderCellSelected) {\n+    private boolean isGridColumnCandidateForScroll(final GridWidget gridWidget,\n+                                                   final BaseGridRendererHelper.RenderingInformation renderingInformation,\n+                                                   final boolean isHeaderCellSelected) {\n         final GridData gridModel = gridWidget.getModel();", "originalCommit": "6f59cf498d6d0e6500025b9007b2649e5eecdfc8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4MTA5NA==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379381094", "bodyText": "nope, I am promoter of equals, isNull  I asked just in case class mixed isNull and == null", "author": "jomarko", "createdAt": "2020-02-14T11:24:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM3NjM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4NzY3MQ==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379387671", "bodyText": "Indeed in if statement  Objects.isNull(..) could be used, however it was made mainly for lambda expressions. Also some people prefer to use ligatures. They work with == sign.", "author": "dupliaka", "createdAt": "2020-02-14T11:41:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM3NjM1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "b9afa1c851e230120914628787246b4c57c57e97", "chunk": "diff --git a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\nindex 6cc55b6e0..23c69c2ac 100644\n--- a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n+++ b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n\n@@ -102,18 +104,15 @@ public abstract class BaseKeyboardOperation implements KeyboardOperation {\n         return !gridModel.getSelectedHeaderCells().isEmpty();\n     }\n \n-    private boolean isGridWidgetRendered(final BaseGridRendererHelper.RenderingInformation renderingInformation) {\n-        return renderingInformation != null;\n-    }\n-\n     private boolean isGridColumnCandidateForScroll(final GridWidget gridWidget,\n                                                    final BaseGridRendererHelper.RenderingInformation renderingInformation,\n                                                    final boolean isHeaderCellSelected) {\n-        final GridData gridModel = gridWidget.getModel();\n-        if (renderingInformation == null) {\n+        if (Objects.isNull(renderingInformation)) {\n             return false;\n         }\n \n+        final GridData gridModel = gridWidget.getModel();\n+\n         final List<GridColumn<?>> columns = gridModel.getColumns();\n         final GridData.SelectedCell origin = getSelectedCellOrigin(gridModel, isHeaderCellSelected);\n         final int uiColumnIndex = ColumnIndexUtilities.findUiColumnIndex(columns,\n"}}, {"oid": "b9afa1c851e230120914628787246b4c57c57e97", "url": "https://github.com/kiegroup/appformer/commit/b9afa1c851e230120914628787246b4c57c57e97", "message": "DROOLS-4792: Updates following peer review", "committedDate": "2020-02-14T11:27:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4ODA4MA==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379388080", "bodyText": "Why not to use a static import?", "author": "dupliaka", "createdAt": "2020-02-14T11:42:45Z", "path": "uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java", "diffHunk": "@@ -72,7 +72,13 @@ protected boolean scrollSelectedCellIntoView(final GridWidget gridWidget) {\n             isHeaderCellSelected = true;\n         }\n \n-        if (!(isGridWidgetRendered(gridWidget) || isGridColumnCandidateForScroll(gridWidget, isHeaderCellSelected))) {\n+        final BaseGridRendererHelper.RenderingInformation renderingInformation = computeRenderingInformation(gridWidget);", "originalCommit": "b9afa1c851e230120914628787246b4c57c57e97", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4ODk1NA==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r379388954", "bodyText": "Will do, thank you", "author": "jomarko", "createdAt": "2020-02-14T11:44:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTM4ODA4MA=="}], "type": "inlineReview", "revised_code": {"commit": "7c3912477b8a58f1c8532b3a8804ae87df8d23c8", "chunk": "diff --git a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\nindex 23c69c2ac..d388094f3 100644\n--- a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n+++ b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n\n@@ -72,7 +74,7 @@ public abstract class BaseKeyboardOperation implements KeyboardOperation {\n             isHeaderCellSelected = true;\n         }\n \n-        final BaseGridRendererHelper.RenderingInformation renderingInformation = computeRenderingInformation(gridWidget);\n+        final RenderingInformation renderingInformation = computeRenderingInformation(gridWidget);\n \n         if (Objects.isNull(renderingInformation)) {\n             return false;\n"}}, {"oid": "7c3912477b8a58f1c8532b3a8804ae87df8d23c8", "url": "https://github.com/kiegroup/appformer/commit/7c3912477b8a58f1c8532b3a8804ae87df8d23c8", "message": "DROOLS-4792: Add import for RenderingInformation", "committedDate": "2020-02-14T11:51:11Z", "type": "commit"}, {"oid": "568b965cdfc9c9879c59931d25ab5061ab22e03c", "url": "https://github.com/kiegroup/appformer/commit/568b965cdfc9c9879c59931d25ab5061ab22e03c", "message": "DROOLS-4792: Simplify the condition before scrolling", "committedDate": "2020-02-14T13:57:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2MjA0Mg==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r380662042", "bodyText": "Now you obtain RenderingInformation here BUT it is only used in isGridColumnCandidateForScroll(..).\nSo why not simply call computeRenderingInformation(..) in isGridColumnCandidateForScroll(..)?", "author": "manstis", "createdAt": "2020-02-18T13:12:42Z", "path": "uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java", "diffHunk": "@@ -72,7 +74,11 @@ protected boolean scrollSelectedCellIntoView(final GridWidget gridWidget) {\n             isHeaderCellSelected = true;\n         }\n \n-        if (!(isGridWidgetRendered(gridWidget) || isGridColumnCandidateForScroll(gridWidget, isHeaderCellSelected))) {\n+        final RenderingInformation renderingInformation = computeRenderingInformation(gridWidget);", "originalCommit": "568b965cdfc9c9879c59931d25ab5061ab22e03c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2ODk5Mw==", "url": "https://github.com/kiegroup/appformer/pull/898#discussion_r380668993", "bodyText": "will do, thank you", "author": "jomarko", "createdAt": "2020-02-18T13:25:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2MjA0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "b120043b87c7a760b99b462ec63e14d00cf8377a", "chunk": "diff --git a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\nindex 43d6d285e..77cccd71b 100644\n--- a/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n+++ b/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseKeyboardOperation.java\n\n@@ -74,10 +74,7 @@ public abstract class BaseKeyboardOperation implements KeyboardOperation {\n             isHeaderCellSelected = true;\n         }\n \n-        final RenderingInformation renderingInformation = computeRenderingInformation(gridWidget);\n-\n         if (!isGridColumnCandidateForScroll(gridWidget,\n-                                            renderingInformation,\n                                             isHeaderCellSelected)) {\n             return false;\n         }\n"}}, {"oid": "b120043b87c7a760b99b462ec63e14d00cf8377a", "url": "https://github.com/kiegroup/appformer/commit/b120043b87c7a760b99b462ec63e14d00cf8377a", "message": "DROOLS-4792: Peer review - minimize renderingInformation visibility", "committedDate": "2020-02-18T13:27:19Z", "type": "commit"}]}