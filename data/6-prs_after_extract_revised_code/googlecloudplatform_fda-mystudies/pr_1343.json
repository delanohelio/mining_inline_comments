{"pr_number": 1343, "pr_title": "Participant Manager : Fixed Issue #1322, for GET /sites/{participantRegistrySiteId}/participant and GET /sites/{siteId}/participants", "pr_createdAt": "2020-10-13T10:47:16Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1343", "timeline": [{"oid": "3e13d1a23f289c15ddfab5276d33f580488dc850", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3e13d1a23f289c15ddfab5276d33f580488dc850", "message": "Fixed Issue #1322, for get participant details and get site participants\n\nFixed Issue #1322, for get participant details and get site participants", "committedDate": "2020-10-13T10:42:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1NTE3Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1343#discussion_r504655176", "bodyText": "Should we add cases for SuperAdmin = true, too?", "author": "saminguyen", "createdAt": "2020-10-14T12:58:32Z", "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/SiteControllerTest.java", "diffHunk": "@@ -433,6 +433,8 @@ public void shouldReturnSiteNotFoundError() throws Exception {\n   @Test\n   public void shouldReturnSitePermissionAccessDeniedError() throws Exception {\n     // Site 1: set manage site permission to no permission\n+    userRegAdminEntity.setSuperAdmin(false);", "originalCommit": "3e13d1a23f289c15ddfab5276d33f580488dc850", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgxNjcwOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1343#discussion_r504816709", "bodyText": "Superadmin will be having all the apps, studies and site level permissions, so access denied error is not applicable for super admin.", "author": "monica-BTC", "createdAt": "2020-10-14T16:32:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1NTE3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkyMjI0Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1343#discussion_r504922242", "bodyText": "I am saying for the usual success cases, not for this particular case", "author": "saminguyen", "createdAt": "2020-10-14T19:31:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1NTE3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQwMTI3Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1343#discussion_r505401272", "bodyText": "Added Test case. Please review and approve", "author": "monica-BTC", "createdAt": "2020-10-15T09:37:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1NTE3Ng=="}], "type": "inlineReview", "revised_code": {"commit": "7782870e8994d2d6b2358fe4f027dbc306160c60", "chunk": "diff --git a/participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/SiteControllerTest.java b/participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/SiteControllerTest.java\nindex fdb4702b0..cff0620c1 100644\n--- a/participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/SiteControllerTest.java\n+++ b/participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/SiteControllerTest.java\n\n@@ -430,6 +430,24 @@ public class SiteControllerTest extends BaseMockIT {\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldReturnUserNotFoundForSiteParticipants() throws Exception {\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.add(USER_ID_HEADER, IdGenerator.id());\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_SITE_PARTICIPANTS.getPath(), siteEntity.getId())\n+                .headers(headers)\n+                .contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isNotFound())\n+        .andExpect(\n+            jsonPath(\"$.error_description\").value(ErrorCode.USER_NOT_FOUND.getDescription()));\n+\n+    verifyTokenIntrospectRequest();\n+  }\n+\n   @Test\n   public void shouldReturnSitePermissionAccessDeniedError() throws Exception {\n     // Site 1: set manage site permission to no permission\n"}}, {"oid": "7782870e8994d2d6b2358fe4f027dbc306160c60", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7782870e8994d2d6b2358fe4f027dbc306160c60", "message": "added test case for User not found exception\n\nadded test case for User not found exception", "committedDate": "2020-10-14T17:30:33Z", "type": "commit"}, {"oid": "f4e71db239c6203b8fbf4ddb3a8160051cd1849e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f4e71db239c6203b8fbf4ddb3a8160051cd1849e", "message": "Merge branch 'develop' into get-site-participants-participant-details-for-superAdmin", "committedDate": "2020-10-14T17:46:34Z", "type": "commit"}, {"oid": "bd31d35243037dbd4744e666e17db4086832de0c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bd31d35243037dbd4744e666e17db4086832de0c", "message": "Fixed build issue\n\nFixed build issue", "committedDate": "2020-10-14T17:49:40Z", "type": "commit"}, {"oid": "0b8a1c58e6aed5162a37387b332e28d7bb5c04bf", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0b8a1c58e6aed5162a37387b332e28d7bb5c04bf", "message": "added test case\n\nadded test case", "committedDate": "2020-10-15T08:53:32Z", "type": "commit"}, {"oid": "e72eaca9fa4107a218761d7d152ea1fbcb2201eb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e72eaca9fa4107a218761d7d152ea1fbcb2201eb", "message": "Merge branch 'develop' into get-site-participants-participant-details-for-superAdmin", "committedDate": "2020-10-15T08:55:47Z", "type": "commit"}]}