{"pr_number": 981, "pr_title": "Participant Manager - Issue #963 fixed , Pagination for Study Participant Registry view", "pr_createdAt": "2020-09-16T15:02:23Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/981", "timeline": [{"oid": "5787ebe96d776e20e63c55c2d3dd1e739a659d0f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5787ebe96d776e20e63c55c2d3dd1e739a659d0f", "message": "Study Participant PSagination\n\nStudy Participant PSagination", "committedDate": "2020-09-16T14:48:18Z", "type": "commit"}, {"oid": "b095808a4aad18904469d5e22c1b0ad80ddf4c4d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b095808a4aad18904469d5e22c1b0ad80ddf4c4d", "message": "Update StudyControllerTest.java", "committedDate": "2020-09-16T14:52:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk4MDc5Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/981#discussion_r490980797", "bodyText": "Since participant registry view is a whole page view, I would recommend using a higher default value, e.g. 50 to 100, depending on how much space each row takes.", "author": "zohrehj", "createdAt": "2020-09-18T14:17:03Z", "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java", "diffHunk": "@@ -62,12 +63,14 @@\n   public ResponseEntity<ParticipantRegistryResponse> getStudyParticipants(\n       @RequestHeader(name = USER_ID_HEADER) String userId,\n       @PathVariable String studyId,\n+      @RequestParam(defaultValue = \"0\") int page,\n+      @RequestParam(defaultValue = \"10\") int limit,", "originalCommit": "b095808a4aad18904469d5e22c1b0ad80ddf4c4d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3NDEzMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/981#discussion_r492574131", "bodyText": "As discussed with BA team, based on the requirement , I have done the changes. Kindly review and approve.", "author": "navya-BTC", "createdAt": "2020-09-22T08:52:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk4MDc5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "7e57b737b9d8c8420959a59ef7255c3a18442750", "chunk": "diff --git a/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java b/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java\nindex 61d0fc725..d925db185 100644\n--- a/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java\n+++ b/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/StudyController.java\n\n@@ -63,8 +63,8 @@ public class StudyController {\n   public ResponseEntity<ParticipantRegistryResponse> getStudyParticipants(\n       @RequestHeader(name = USER_ID_HEADER) String userId,\n       @PathVariable String studyId,\n-      @RequestParam(defaultValue = \"0\") int page,\n-      @RequestParam(defaultValue = \"10\") int limit,\n+      @RequestParam(required = false) Integer page,\n+      @RequestParam(required = false) Integer limit,\n       HttpServletRequest request) {\n     logger.entry(BEGIN_REQUEST_LOG, request.getRequestURI());\n     AuditLogEventRequest auditRequest = AuditEventMapper.fromHttpServletRequest(request);\n"}}, {"oid": "7e57b737b9d8c8420959a59ef7255c3a18442750", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7e57b737b9d8c8420959a59ef7255c3a18442750", "message": "Pagination changes", "committedDate": "2020-09-22T08:49:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2MDU3MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/981#discussion_r494360570", "bodyText": "does this handle the case where only one value is null?", "author": "zohrehj", "createdAt": "2020-09-24T14:22:07Z", "path": "participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java", "diffHunk": "@@ -294,8 +307,16 @@ private ParticipantRegistryResponse prepareRegistryParticipantResponse(\n       }\n     }\n \n-    List<ParticipantStudyEntity> participantStudiesList =\n-        participantStudyRepository.findParticipantsByStudy(study.getId());\n+    List<ParticipantStudyEntity> participantStudiesList = null;\n+    if (page != null || limit != null) {", "originalCommit": "7e57b737b9d8c8420959a59ef7255c3a18442750", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM4MTQ5Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/981#discussion_r494381492", "bodyText": "Fixed the comment", "author": "navya-BTC", "createdAt": "2020-09-24T14:48:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM2MDU3MA=="}], "type": "inlineReview", "revised_code": {"commit": "bc61c60b844619d18e563a3a24a2b663bbf397fa", "chunk": "diff --git a/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java b/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java\nindex 99e315920..988841125 100644\n--- a/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java\n+++ b/participant-manager-module/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyServiceImpl.java\n\n@@ -308,7 +308,7 @@ public class StudyServiceImpl implements StudyService {\n     }\n \n     List<ParticipantStudyEntity> participantStudiesList = null;\n-    if (page != null || limit != null) {\n+    if (page != null && limit != null) {\n       Page<ParticipantStudyEntity> participantStudyPage =\n           participantStudyRepository.findParticipantsByStudyForPage(\n               study.getId(), PageRequest.of(page, limit, Sort.by(\"created\").descending()));\n"}}, {"oid": "5313e7c66cca800d48a72f39e388faf91283fe59", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5313e7c66cca800d48a72f39e388faf91283fe59", "message": "Merge branch 'develop' into study-participant-pagination", "committedDate": "2020-09-24T14:33:08Z", "type": "commit"}, {"oid": "bc61c60b844619d18e563a3a24a2b663bbf397fa", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bc61c60b844619d18e563a3a24a2b663bbf397fa", "message": "Update StudyServiceImpl.java\n\nFixed PR Comment", "committedDate": "2020-09-24T14:47:29Z", "type": "commit"}, {"oid": "e0271a9ffb77ec36649558775247f7cb39266617", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e0271a9ffb77ec36649558775247f7cb39266617", "message": "Merge branch 'develop' into study-participant-pagination", "committedDate": "2020-09-24T16:16:58Z", "type": "commit"}, {"oid": "0f01a251478d9fbc712e814d29e2fa0060d8ae6b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0f01a251478d9fbc712e814d29e2fa0060d8ae6b", "message": "Merge branch 'develop' into study-participant-pagination", "committedDate": "2020-09-25T06:49:22Z", "type": "commit"}, {"oid": "92ca3a7ebb24f57e108c14cceb34418cf3865d6c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/92ca3a7ebb24f57e108c14cceb34418cf3865d6c", "message": "Merge branch 'develop' into study-participant-pagination", "committedDate": "2020-09-25T11:32:03Z", "type": "commit"}, {"oid": "48c4e5d5fbff6dabae24b220ba5354450b98e6e6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/48c4e5d5fbff6dabae24b220ba5354450b98e6e6", "message": "Merge branch 'develop' into study-participant-pagination", "committedDate": "2020-09-25T14:14:45Z", "type": "commit"}, {"oid": "eca4da930f9fc01cb7bb3ab8d970d1787d80c3d8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/eca4da930f9fc01cb7bb3ab8d970d1787d80c3d8", "message": "Merge branch 'develop' into study-participant-pagination", "committedDate": "2020-09-25T14:41:06Z", "type": "commit"}]}