{"pr_number": 1709, "pr_title": "[Study Builder] Sql Injection issue fixes for DashBoardAndProfileDAOImpl,UsersDAOImpl,LoginDAOImpl,NotificationDAOImpl,StudyActiveTasksDAOImpl classes", "pr_createdAt": "2020-10-29T11:24:39Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1709", "timeline": [{"oid": "e4473be468e367fc4b0dd0f84e9f6baebe778c49", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e4473be468e367fc4b0dd0f84e9f6baebe778c49", "message": "SQL_Injection_with_Formatting", "committedDate": "2020-10-23T08:44:05Z", "type": "commit"}, {"oid": "72ac256342d3650c50bbcf4b2924554965a8bff7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/72ac256342d3650c50bbcf4b2924554965a8bff7", "message": "fixed test failures\n\nfixed test failures", "committedDate": "2020-10-27T06:16:54Z", "type": "commit"}, {"oid": "8872952f8f6445bbf33f5d01a3526d919cf6d4cb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8872952f8f6445bbf33f5d01a3526d919cf6d4cb", "message": "UserControllerTest", "committedDate": "2020-10-29T09:41:49Z", "type": "commit"}, {"oid": "cb65bebe8b393c67fc5fe9588b38f546e969b1e3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cb65bebe8b393c67fc5fe9588b38f546e969b1e3", "message": "Merge branch 'develop' into studybuilder_sql_issues_vinuth1_PR", "committedDate": "2020-10-29T11:19:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI1NDAyMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1709#discussion_r514254021", "bodyText": "please remove commented code", "author": "zohrehj", "createdAt": "2020-10-29T13:23:49Z", "path": "study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java", "diffHunk": "@@ -84,7 +85,7 @@ public String deleteActiveTask(\n     Session session = null;\n     StudyVersionBo studyVersionBo = null;\n     String deleteActQuery = \"\";\n-    String deleteQuery = \"\";\n+    //  String deleteQuery = \"\";", "originalCommit": "cb65bebe8b393c67fc5fe9588b38f546e969b1e3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "14a77c343594e66c32aaec4cd5a420e9758eab9f", "chunk": "diff --git a/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java b/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\nindex 4702267bd..ecada5d24 100644\n--- a/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\n+++ b/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\n\n@@ -85,7 +85,6 @@ public class StudyActiveTasksDAOImpl implements StudyActiveTasksDAO {\n     Session session = null;\n     StudyVersionBo studyVersionBo = null;\n     String deleteActQuery = \"\";\n-    //  String deleteQuery = \"\";\n     StudyBuilderAuditEvent eventEnum = null;\n     Map<String, String> values = new HashMap<String, String>();\n     try {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI4NDAzMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1709#discussion_r514284031", "bodyText": "fix : customStudyId", "author": "zohrehj", "createdAt": "2020-10-29T14:05:16Z", "path": "study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java", "diffHunk": "@@ -651,43 +673,56 @@ public ActiveTaskBo saveOrUpdateActiveTaskInfo(\n       } else {\n \n         // Notification Purpose needed Started\n-        queryString = \" From StudyBo where customStudyId='\" + customStudyId + \"' and live=1\";\n-        StudyBo studyBo = (StudyBo) session.createQuery(queryString).uniqueResult();\n+        queryString = \" From StudyBo where customStudyId=: customStudyId  and live=1\";", "originalCommit": "cb65bebe8b393c67fc5fe9588b38f546e969b1e3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "14a77c343594e66c32aaec4cd5a420e9758eab9f", "chunk": "diff --git a/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java b/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\nindex 4702267bd..ecada5d24 100644\n--- a/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\n+++ b/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\n\n@@ -673,7 +672,7 @@ public class StudyActiveTasksDAOImpl implements StudyActiveTasksDAO {\n       } else {\n \n         // Notification Purpose needed Started\n-        queryString = \" From StudyBo where customStudyId=: customStudyId  and live=1\";\n+        queryString = \" From StudyBo where customStudyId=:customStudyId  and live=1\";\n         StudyBo studyBo =\n             (StudyBo)\n                 session\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI4NTQ5Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1709#discussion_r514285497", "bodyText": "this should be passed as an array and not already joined", "author": "zohrehj", "createdAt": "2020-10-29T14:07:09Z", "path": "study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java", "diffHunk": "@@ -753,34 +788,48 @@ public boolean validateActiveTaskAttrById(\n                 }\n                 activeTaskAttIdName = StringUtils.join(idArr, ',');", "originalCommit": "cb65bebe8b393c67fc5fe9588b38f546e969b1e3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "14a77c343594e66c32aaec4cd5a420e9758eab9f", "chunk": "diff --git a/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java b/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\nindex 4702267bd..ecada5d24 100644\n--- a/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\n+++ b/study-builder/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/dao/StudyActiveTasksDAOImpl.java\n\n@@ -803,7 +802,7 @@ public class StudyActiveTasksDAOImpl implements StudyActiveTasksDAO {\n                       .createQuery(queryString)\n                       .setParameter(\"customStudyId\", customStudyId)\n                       .setParameter(\"activeTaskAttIdVal\", activeTaskAttIdVal)\n-                      .setParameterList(\"activeTaskAttIdName\", Arrays.asList(activeTaskAttIdName))\n+                      .setParameterList(\"activeTaskAttIdName\", idArr)\n                       .list();\n             } else {\n               activeTaskAtrributeValuesBos =\n"}}, {"oid": "14a77c343594e66c32aaec4cd5a420e9758eab9f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/14a77c343594e66c32aaec4cd5a420e9758eab9f", "message": "Fixed as suggested", "committedDate": "2020-10-29T14:45:36Z", "type": "commit"}, {"oid": "63f18a57e9bb39c117502207ec6985c0e028b420", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/63f18a57e9bb39c117502207ec6985c0e028b420", "message": "Merge branch 'develop' into studybuilder_sql_issues_vinuth1_PR", "committedDate": "2020-10-29T14:57:28Z", "type": "commit"}]}