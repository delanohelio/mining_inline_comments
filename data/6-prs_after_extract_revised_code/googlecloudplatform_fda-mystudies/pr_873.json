{"pr_number": 873, "pr_title": "User Management Service: Replace Model BO with Entity classes from common service", "pr_createdAt": "2020-09-04T08:24:10Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/873", "timeline": [{"oid": "8262e5cad3ac2dbcec9fa63677077ec4827f3d15", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8262e5cad3ac2dbcec9fa63677077ec4827f3d15", "message": "User Management data integrity\n\nUser Management data integrity", "committedDate": "2020-09-02T10:32:12Z", "type": "commit"}, {"oid": "36ac5ea1fd838bd9412b3c099eba7f92cb7557af", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/36ac5ea1fd838bd9412b3c099eba7f92cb7557af", "message": "Changed variable name\n\nChanged variable name", "committedDate": "2020-09-04T08:19:10Z", "type": "commit"}, {"oid": "e17d81827e331b6790dd20cbebd3ea89a36a4a07", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e17d81827e331b6790dd20cbebd3ea89a36a4a07", "message": "Merge branch 'develop' into user-mgmnt-data-integrity", "committedDate": "2020-09-04T08:29:24Z", "type": "commit"}, {"oid": "87f3b22e675c688baae944a478107de656df5d9e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/87f3b22e675c688baae944a478107de656df5d9e", "message": "Update FdaEaUserDetailsServiceImpl.java", "committedDate": "2020-09-04T08:42:51Z", "type": "commit"}, {"oid": "4e291ed14e56c76ad59aa18e94f9b13bd2ab138c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4e291ed14e56c76ad59aa18e94f9b13bd2ab138c", "message": "Fixed Build issue\n\nFixed Build issue", "committedDate": "2020-09-04T09:38:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTczNTI3MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/873#discussion_r485735270", "bodyText": "Please remove getCurrentUtilDateTime() in MyStudiesUserRegUtil as it will now be an unused method", "author": "saminguyen", "createdAt": "2020-09-09T16:10:36Z", "path": "user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileController.java", "diffHunk": "@@ -214,9 +216,10 @@ public String ping() {\n           if (participantDetails.getStatus() == 2) {\n             String code = RandomStringUtils.randomAlphanumeric(6);\n             participantDetails.setEmailCode(code);\n-            participantDetails.setCodeExpireDate(LocalDateTime.now().plusMinutes(expireTime));\n-            participantDetails.setVerificationDate(MyStudiesUserRegUtil.getCurrentUtilDateTime());", "originalCommit": "4e291ed14e56c76ad59aa18e94f9b13bd2ab138c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNzMzOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/873#discussion_r486107339", "bodyText": "removed getCurrentUtilDateTime() in MyStudiesUserRegUtil", "author": "navya-BTC", "createdAt": "2020-09-10T06:56:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTczNTI3MA=="}], "type": "inlineReview", "revised_code": {"commit": "e71154e42c718261d20bc03dfd45017c455cbf7e", "chunk": "diff --git a/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileController.java b/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileController.java\nindex 3627f2427..1a078ef73 100644\n--- a/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileController.java\n+++ b/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/controller/UserProfileController.java\n\n@@ -201,16 +200,14 @@ public class UserProfileController {\n     ResponseBean responseBean = new ResponseBean();\n     try {\n       String isValidAppMsg =\n-          commonService.validatedUserAppDetailsByAllApi(\"\", loginBean.getEmailId(), appId, orgId);\n+          commonService.validatedUserAppDetailsByAllApi(\"\", loginBean.getEmailId(), appId);\n       if (!StringUtils.isEmpty(isValidAppMsg)) {\n         AppOrgInfoBean appOrgInfoBean =\n-            commonService.getUserAppDetailsByAllApi(\"\", loginBean.getEmailId(), appId, orgId);\n+            commonService.getUserAppDetailsByAllApi(\"\", loginBean.getEmailId(), appId);\n         if (appOrgInfoBean != null) {\n           participantDetails =\n               userManagementProfService.getParticipantDetailsByEmail(\n-                  loginBean.getEmailId(),\n-                  appOrgInfoBean.getAppInfoId(),\n-                  appOrgInfoBean.getOrgInfoId());\n+                  loginBean.getEmailId(), appOrgInfoBean.getAppInfoId());\n         }\n         if (participantDetails != null) {\n           if (participantDetails.getStatus() == 2) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc0OTE3NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/873#discussion_r485749175", "bodyText": "some typos here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public String getParticicpantId(String id, String customeStudyId);\n          \n          \n            \n              public String getParticipantId(String id, String customStudyId);", "author": "saminguyen", "createdAt": "2020-09-09T16:26:06Z", "path": "user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/CommonDao.java", "diffHunk": "@@ -9,27 +9,28 @@\n package com.google.cloud.healthcare.fdamystudies.dao;\n \n import com.google.cloud.healthcare.fdamystudies.beans.AppOrgInfoBean;\n-import com.google.cloud.healthcare.fdamystudies.usermgmt.model.AppInfoDetailsBO;\n-import com.google.cloud.healthcare.fdamystudies.usermgmt.model.StudyInfoBO;\n+import com.google.cloud.healthcare.fdamystudies.model.AppEntity;\n+import com.google.cloud.healthcare.fdamystudies.model.StudyEntity;\n import java.util.HashSet;\n import java.util.List;\n import java.util.Map;\n import org.json.JSONArray;\n \n public interface CommonDao {\n \n-  public String validatedUserAppDetailsByAllApi(String userId, String email, int appId, int orgId);\n+  public String validatedUserAppDetailsByAllApi(\n+      String userId, String email, String appId, String orgId);\n \n   public AppOrgInfoBean getUserAppDetailsByAllApi(String userId, String appId, String orgId);\n \n-  public Integer getUserInfoDetails(String userId);\n+  public String getUserInfoDetails(String userId);\n \n-  public List<AppInfoDetailsBO> getAppInfoSet(HashSet<String> appIds);\n+  public List<AppEntity> getAppInfoSet(HashSet<String> appIds);\n \n-  public List<StudyInfoBO> getStudyInfoSet(HashSet<String> studyInfoSet);\n+  public List<StudyEntity> getStudyInfoSet(HashSet<String> studyInfoSet);\n \n   public Map<Integer, Map<String, JSONArray>> getStudyLevelDeviceToken(\n-      List<StudyInfoBO> studyInfoIds);\n+      List<StudyEntity> studyInfoIds);\n \n-  public String getParticicpantId(Integer id, String customeStudyId);\n+  public String getParticicpantId(String id, String customeStudyId);", "originalCommit": "4e291ed14e56c76ad59aa18e94f9b13bd2ab138c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNzYyOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/873#discussion_r486107629", "bodyText": "Typo corrected", "author": "navya-BTC", "createdAt": "2020-09-10T06:57:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc0OTE3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "132ac76887e82319293f884483cb812ce13413a2", "chunk": "diff --git a/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/CommonDao.java b/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/CommonDao.java\nindex 8cf71855d..6d5590c3c 100644\n--- a/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/CommonDao.java\n+++ b/user-registration-server-ws/user-mgmt-module/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/dao/CommonDao.java\n\n@@ -32,5 +32,5 @@ public interface CommonDao {\n   public Map<Integer, Map<String, JSONArray>> getStudyLevelDeviceToken(\n       List<StudyEntity> studyInfoIds);\n \n-  public String getParticicpantId(String id, String customeStudyId);\n+  public String getParticipantId(String id, String customStudyId);\n }\n"}}, {"oid": "132ac76887e82319293f884483cb812ce13413a2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/132ac76887e82319293f884483cb812ce13413a2", "message": "Fixed PR Comments\n\nFixed PR Comments", "committedDate": "2020-09-10T06:54:29Z", "type": "commit"}, {"oid": "e71154e42c718261d20bc03dfd45017c455cbf7e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e71154e42c718261d20bc03dfd45017c455cbf7e", "message": "Merge branch 'develop' into user-mgmnt-data-integrity", "committedDate": "2020-09-11T07:34:24Z", "type": "commit"}, {"oid": "21bcd4c12fed797135d2f238556343717d55a37e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/21bcd4c12fed797135d2f238556343717d55a37e", "message": "Resolved Conflicts", "committedDate": "2020-09-15T14:40:17Z", "type": "commit"}, {"oid": "873b8483ecc84ee31ea443537aa11cf497665a0e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/873b8483ecc84ee31ea443537aa11cf497665a0e", "message": "Resolved Conflicts\n\nResolved Conflicts", "committedDate": "2020-09-16T11:26:54Z", "type": "commit"}, {"oid": "6f67843fa04b926d2e9d420f07a555b09aa5cb82", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6f67843fa04b926d2e9d420f07a555b09aa5cb82", "message": "Merge branch 'develop' into user-mgmnt-data-integrity", "committedDate": "2020-09-16T11:34:22Z", "type": "commit"}, {"oid": "f4edde8a5beea19da50d55d25d44477a09ca470d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f4edde8a5beea19da50d55d25d44477a09ca470d", "message": "Merge branch 'develop' into user-mgmnt-data-integrity", "committedDate": "2020-09-17T05:52:07Z", "type": "commit"}, {"oid": "5d5227dff8a3a9edb8ceee284bdaf9b0cb4089e8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5d5227dff8a3a9edb8ceee284bdaf9b0cb4089e8", "message": "Resolved conflicts\n\nResolved conflicts", "committedDate": "2020-09-17T06:26:32Z", "type": "commit"}, {"oid": "0a4835bc2be1224fd69e07259c700334bcb98168", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0a4835bc2be1224fd69e07259c700334bcb98168", "message": "Merge branch 'develop' into user-mgmnt-data-integrity", "committedDate": "2020-09-17T16:31:24Z", "type": "commit"}, {"oid": "dfec589743eea33fc7c27d30577ea3e44604b4ef", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dfec589743eea33fc7c27d30577ea3e44604b4ef", "message": "Merge branch 'develop' into user-mgmnt-data-integrity", "committedDate": "2020-09-18T05:17:48Z", "type": "commit"}]}