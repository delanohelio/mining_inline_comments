{"pr_number": 512, "pr_title": "User /healthCheck in all services", "pr_createdAt": "2020-06-14T22:03:38Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/512", "timeline": [{"oid": "15f8ffdfd02cb95954976942f5b394dbec9a5f02", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/15f8ffdfd02cb95954976942f5b394dbec9a5f02", "message": "Clean up healthCheck in response-server", "committedDate": "2020-06-14T22:02:47Z", "type": "commit"}, {"oid": "d22fa54dd0e986c307a6c79777699c090132a3f0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d22fa54dd0e986c307a6c79777699c090132a3f0", "message": "remove healthcheck log from WCP", "committedDate": "2020-06-14T22:02:47Z", "type": "commit"}, {"oid": "b800dde0da434dd6f4bc3a17ef40dec0bace84f3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b800dde0da434dd6f4bc3a17ef40dec0bace84f3", "message": "Clean up healthCheck in wcp-ws server, improve logging", "committedDate": "2020-06-14T22:02:48Z", "type": "commit"}, {"oid": "d2923d3486363c447ca00d5f0a9005bfe093f2bd", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d2923d3486363c447ca00d5f0a9005bfe093f2bd", "message": "Rename appDetails to healthCheck in WCP", "committedDate": "2020-06-14T23:49:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNTQxNA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/512#discussion_r440905414", "bodyText": "This isn't valid json. We really could just return an empty body, all that matters is the HTTP status code.", "author": "nikklassen", "createdAt": "2020-06-16T14:41:57Z", "path": "WCP-WS/src/main/java/com/hphc/mystudies/service/StudyMetaDataService.java", "diffHunk": "@@ -888,11 +888,9 @@ public Object validateEnrollmentToken(\n   @GET\n   @Produces(MediaType.APPLICATION_JSON + \";charset=utf-8\")", "originalCommit": "d2923d3486363c447ca00d5f0a9005bfe093f2bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkxODY5Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/512#discussion_r440918692", "bodyText": "Good catch, will fix shortly", "author": "zohrehj", "createdAt": "2020-06-16T14:58:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNTQxNA=="}], "type": "inlineReview", "revised_code": {"commit": "1f9ee7430c4756638ea03e751b224c244f24da26", "chunk": "diff --git a/WCP-WS/src/main/java/com/hphc/mystudies/service/StudyMetaDataService.java b/WCP-WS/src/main/java/com/hphc/mystudies/service/StudyMetaDataService.java\nindex fb86a91c5..be25d5cea 100644\n--- a/WCP-WS/src/main/java/com/hphc/mystudies/service/StudyMetaDataService.java\n+++ b/WCP-WS/src/main/java/com/hphc/mystudies/service/StudyMetaDataService.java\n\n@@ -886,12 +886,9 @@ public class StudyMetaDataService {\n   }\n \n   @GET\n-  @Produces(MediaType.APPLICATION_JSON + \";charset=utf-8\")\n-  @Consumes(MediaType.APPLICATION_XML)\n   @Path(\"healthCheck\")\n   public String healthCheck() {\n-    String response = \"OK!\";\n-    return response;\n+    return \"200 OK!\";\n   }\n \n   @GET\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNjQzNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/512#discussion_r440906435", "bodyText": "I don't think this need to return a JSP, I believe a \"200 OK\" would work fine here too.", "author": "nikklassen", "createdAt": "2020-06-16T14:43:19Z", "path": "WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/LoginController.java", "diffHunk": "@@ -111,12 +111,10 @@ public ModelAndView addPassword(HttpServletRequest request, UserBO userBO) {\n     return mv;\n   }\n \n-  @RequestMapping(\"/appDetails.do\")\n-  public ModelAndView appDetails() {\n-    logger.info(\"LoginController - appDetails() - Starts\");\n+  @RequestMapping(\"/healthCheck.do\")\n+  public ModelAndView healthCheck() {", "originalCommit": "d2923d3486363c447ca00d5f0a9005bfe093f2bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkxODQ0OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/512#discussion_r440918448", "bodyText": "Good point, I will have to find out how that's done in Spring :-)", "author": "zohrehj", "createdAt": "2020-06-16T14:58:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwNjQzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "1f9ee7430c4756638ea03e751b224c244f24da26", "chunk": "diff --git a/WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/LoginController.java b/WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/LoginController.java\nindex 4f6b2f962..660ccb6c3 100644\n--- a/WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/LoginController.java\n+++ b/WCP/fdahpStudyDesigner/src/main/java/com/fdahpstudydesigner/controller/LoginController.java\n\n@@ -112,9 +112,8 @@ public class LoginController {\n   }\n \n   @RequestMapping(\"/healthCheck.do\")\n-  public ModelAndView healthCheck() {\n-    ModelMap map = new ModelMap();\n-    return new ModelAndView(\"healthCheck\", map);\n+  public String healthCheck() {\n+    return \"200 OK!\";\n   }\n \n   @RequestMapping(value = \"/profile/changeExpiredPassword.do\")\n"}}, {"oid": "bf7cb833d79450690ff59f88d855da3d1db52a57", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bf7cb833d79450690ff59f88d855da3d1db52a57", "message": "Merge branch 'early-access' into health-check", "committedDate": "2020-06-16T14:57:44Z", "type": "commit"}, {"oid": "1f9ee7430c4756638ea03e751b224c244f24da26", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1f9ee7430c4756638ea03e751b224c244f24da26", "message": "healthCheck returns string", "committedDate": "2020-06-16T18:24:29Z", "type": "commit"}, {"oid": "4cb80f9361816840293129490c8a8b4cc3c5ad13", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4cb80f9361816840293129490c8a8b4cc3c5ad13", "message": "Consistent response", "committedDate": "2020-06-16T18:26:16Z", "type": "commit"}, {"oid": "2b3b83d1cce67d27b7bded134837ecbc5d91eda7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2b3b83d1cce67d27b7bded134837ecbc5d91eda7", "message": "Merge branch 'early-access' into health-check", "committedDate": "2020-06-16T20:13:47Z", "type": "commit"}, {"oid": "ebb13bf2b19eba77f1597850a6f979e88cfc4b3e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ebb13bf2b19eba77f1597850a6f979e88cfc4b3e", "message": "Merge branch 'early-access' into health-check", "committedDate": "2020-06-17T14:40:41Z", "type": "commit"}]}