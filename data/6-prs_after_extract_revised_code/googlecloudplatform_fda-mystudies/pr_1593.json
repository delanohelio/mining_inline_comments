{"pr_number": 1593, "pr_title": "Fixed issue #1580 Participant Manager - PATCH /users/{userId} - check authUserId is not empty before calling any APIs on Auth Scim Service", "pr_createdAt": "2020-10-22T07:16:30Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1593", "timeline": [{"oid": "f10e708e6301386a94e7aafe75e7e35fca7560bc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f10e708e6301386a94e7aafe75e7e35fca7560bc", "message": "Fixed issue #1580\n\nFixed issue #1580", "committedDate": "2020-10-22T07:14:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDg5OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1593#discussion_r512050898", "bodyText": "why does this replace the need to check the userStatus?\nPlease add a test to verify that everything is working as expected.", "author": "zohrehj", "createdAt": "2020-10-26T15:28:53Z", "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/UserProfileServiceImpl.java", "diffHunk": "@@ -227,7 +228,7 @@ public PatchUserResponse updateUserAccountStatus(PatchUserRequest statusRequest)\n     }\n \n     UserRegAdminEntity user = optUser.get();\n-    if (UserStatus.ACTIVE == userStatus || UserStatus.DEACTIVATED == userStatus) {\n+    if (StringUtils.isNotEmpty(user.getUrAdminAuthId())) {\n       updateUserAccountStatusInAuthServer(user.getUrAdminAuthId(), statusRequest.getStatus());", "originalCommit": "f10e708e6301386a94e7aafe75e7e35fca7560bc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU0NTIwNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1593#discussion_r512545205", "bodyText": "Use Status validation is already implemented at Line 225 so we don't need to check the status again. We are setting User Account Status based on the request in Line 257.", "author": "dhanyak-btc", "createdAt": "2020-10-27T09:44:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDg5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU0NjE3NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1593#discussion_r512546175", "bodyText": "Test cases shouldDeactivateUserAccount() and shouldReactivateUserAccount() is available in UserProfileControllerTest class", "author": "harisboston", "createdAt": "2020-10-27T09:46:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDg5OA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "610e05dca3e350c396442dfa25a958df60f5371f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/610e05dca3e350c396442dfa25a958df60f5371f", "message": "Merge branch 'develop' into participant-datastore-issue-1580", "committedDate": "2020-10-27T09:46:40Z", "type": "commit"}]}