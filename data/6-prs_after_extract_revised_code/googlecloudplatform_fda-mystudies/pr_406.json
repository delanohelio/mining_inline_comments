{"pr_number": 406, "pr_title": "Use \"native\" generator for personalized report primary key.", "pr_createdAt": "2020-05-19T05:24:32Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/406", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM4NDY4MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/406#discussion_r427384681", "bodyText": "If we don't need this to be portable to other sql dialects then using GenerationType.IDENTITY seems more straightforward. I think supporting the SEQUENCE type is more complicated if we expect pipelines to add to the table consistently rather than just as a single backfill.", "author": "wamills", "createdAt": "2020-05-19T15:16:18Z", "path": "user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/PersonalizedUserReportBO.java", "diffHunk": "@@ -37,7 +38,8 @@\n \n   @Id\n   @Column(name = \"id\")\n-  @GeneratedValue(strategy = GenerationType.AUTO)\n+  @GeneratedValue(strategy = GenerationType.AUTO, generator = \"native\")", "originalCommit": "c7387f12a94389fcd2b05bcfe790feac4ec1d86d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY3NDc5Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/406#discussion_r427674796", "bodyText": "I guess it doesn't need to be portable to all SQL implementations, just MySQL and the hibernate in-memory database for unit tests.\nChanged to IDENTITY.", "author": "karepker", "createdAt": "2020-05-20T00:27:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM4NDY4MQ=="}], "type": "inlineReview", "revised_code": {"commit": "16797afbe55226fc4a639c07dbc9e9ff0d6dd813", "chunk": "diff --git a/user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/PersonalizedUserReportBO.java b/user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/PersonalizedUserReportBO.java\nindex 04dc9836e..487a1d601 100644\n--- a/user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/PersonalizedUserReportBO.java\n+++ b/user-registration-server-ws/user-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/model/PersonalizedUserReportBO.java\n\n@@ -38,8 +37,7 @@ public class PersonalizedUserReportBO implements Serializable {\n \n   @Id\n   @Column(name = \"id\")\n-  @GeneratedValue(strategy = GenerationType.AUTO, generator = \"native\")\n-  @GenericGenerator(name = \"native\", strategy = \"native\")\n+  @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n \n   @ManyToOne\n"}}, {"oid": "16797afbe55226fc4a639c07dbc9e9ff0d6dd813", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/16797afbe55226fc4a639c07dbc9e9ff0d6dd813", "message": "Use IDENTITY generator for personalized report primary key.\n\nPull #387 updated the SQL for the prod database, so this is just making\nthe Java annotations and the SQL consistent.", "committedDate": "2020-05-20T00:25:15Z", "type": "commit"}, {"oid": "16797afbe55226fc4a639c07dbc9e9ff0d6dd813", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/16797afbe55226fc4a639c07dbc9e9ff0d6dd813", "message": "Use IDENTITY generator for personalized report primary key.\n\nPull #387 updated the SQL for the prod database, so this is just making\nthe Java annotations and the SQL consistent.", "committedDate": "2020-05-20T00:25:15Z", "type": "forcePushed"}, {"oid": "1156951b17ee2873a26a69503b0f2f45d94b7c6b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1156951b17ee2873a26a69503b0f2f45d94b7c6b", "message": "Merge branch 'early-access' into karepker-report-id-generation-type", "committedDate": "2020-05-20T23:01:44Z", "type": "commit"}, {"oid": "f7123eea9a475cbb9362b0f2998f0ac4534b1b08", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f7123eea9a475cbb9362b0f2998f0ac4534b1b08", "message": "Merge branch 'early-access' into karepker-report-id-generation-type", "committedDate": "2020-06-08T18:40:13Z", "type": "commit"}]}