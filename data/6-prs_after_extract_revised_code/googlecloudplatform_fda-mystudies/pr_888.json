{"pr_number": 888, "pr_title": "OAuth Scim Service - Externalized configuration And Add @EntityScan to exclude common entities", "pr_createdAt": "2020-09-06T11:11:23Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/888", "timeline": [{"oid": "d9de97e54c24d8820d472c3447d83ec99752ce73", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d9de97e54c24d8820d472c3447d83ec99752ce73", "message": "OAuth Scim Service - Externalized Configuration\n\nOAuth Scim Service - Externalized Configuration", "committedDate": "2020-09-06T11:01:46Z", "type": "commit"}, {"oid": "44cd76a847e372d5d544c69fe219a85781d976f7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/44cd76a847e372d5d544c69fe219a85781d976f7", "message": "Added @EntityScan to avoid creating tables for Entities in common-service\n\nAdded @EntityScan to avoid creating tables for Entities in common-service\n\nRemoved participant.datastore.entities.enabled=false", "committedDate": "2020-09-06T11:09:40Z", "type": "commit"}, {"oid": "286636f830de8bee8bc623cb0db08c8d06633cc9", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/286636f830de8bee8bc623cb0db08c8d06633cc9", "message": "Added ${CLIENT_ID} and ${SECRET_KEY}\n\nAdded ${CLIENT_ID} and ${SECRET_KEY}", "committedDate": "2020-09-06T14:14:36Z", "type": "commit"}, {"oid": "1c086c2851dfe0b5ed5c968f246c720d067c8ea6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1c086c2851dfe0b5ed5c968f246c720d067c8ea6", "message": "Changed datasource url and actuator properties\n\nChanged datasource url and actuator properties", "committedDate": "2020-09-08T10:52:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk4MzEwNA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/888#discussion_r484983104", "bodyText": "why change this?", "author": "zohrehj", "createdAt": "2020-09-08T14:52:27Z", "path": "oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/mapper/UserMapper.java", "diffHunk": "@@ -12,7 +12,7 @@\n import com.google.cloud.healthcare.fdamystudies.beans.UserResponse;\n import com.google.cloud.healthcare.fdamystudies.common.IdGenerator;\n import com.google.cloud.healthcare.fdamystudies.common.UserAccountStatus;\n-import com.google.cloud.healthcare.fdamystudies.oauthscim.model.UserEntity;\n+import com.google.cloud.healthcare.fdamystudies.oauthscim.model.oauthscim.UserEntity;", "originalCommit": "1c086c2851dfe0b5ed5c968f246c720d067c8ea6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQyMjUzMg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/888#discussion_r486422532", "bodyText": "My apologies, while debugging the test I noticed entities from common-service were created in h2 database.  To fix the issue, I needed to add @EntityScan with a different package name to the Application class.\nIn common-service, the package name was com.google.cloud.healthcare.fdamystudies.model so I added a sub-package oauthscim. I really didn't see the oauthscim before the model in package name.\nI've reverted the changes.", "author": "dhanyak-btc", "createdAt": "2020-09-10T15:11:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk4MzEwNA=="}], "type": "inlineReview", "revised_code": {"commit": "ee6d18c853627f8e44f596b3b0e7b8f97bf4661e", "chunk": "diff --git a/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/mapper/UserMapper.java b/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/mapper/UserMapper.java\nindex d909735cd..67a79eee8 100644\n--- a/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/mapper/UserMapper.java\n+++ b/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/mapper/UserMapper.java\n\n@@ -12,7 +12,7 @@ import com.google.cloud.healthcare.fdamystudies.beans.UserRequest;\n import com.google.cloud.healthcare.fdamystudies.beans.UserResponse;\n import com.google.cloud.healthcare.fdamystudies.common.IdGenerator;\n import com.google.cloud.healthcare.fdamystudies.common.UserAccountStatus;\n-import com.google.cloud.healthcare.fdamystudies.oauthscim.model.oauthscim.UserEntity;\n+import com.google.cloud.healthcare.fdamystudies.oauthscim.model.UserEntity;\n \n public final class UserMapper {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk4Mzk1Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/888#discussion_r484983953", "bodyText": "what's the reason for this change?\nhaving oauthscim.mode.oauthscim as the package does not read very well.", "author": "zohrehj", "createdAt": "2020-09-08T14:53:37Z", "path": "oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/oauthscim/UserEntity.java", "diffHunk": "@@ -6,7 +6,7 @@\n  * https://opensource.org/licenses/MIT.\n  */\n \n-package com.google.cloud.healthcare.fdamystudies.oauthscim.model;\n+package com.google.cloud.healthcare.fdamystudies.oauthscim.model.oauthscim;", "originalCommit": "1c086c2851dfe0b5ed5c968f246c720d067c8ea6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQyMzQyMw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/888#discussion_r486423423", "bodyText": "My bad, I've reverted the changes.", "author": "dhanyak-btc", "createdAt": "2020-09-10T15:12:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk4Mzk1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "ee6d18c853627f8e44f596b3b0e7b8f97bf4661e", "chunk": "diff --git a/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/oauthscim/UserEntity.java b/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/UserEntity.java\nsimilarity index 99%\nrename from oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/oauthscim/UserEntity.java\nrename to oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/UserEntity.java\nindex 2663daae2..9f3d231e3 100644\n--- a/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/oauthscim/UserEntity.java\n+++ b/oauth-scim-module/oauth-scim-service/src/main/java/com/google/cloud/healthcare/fdamystudies/oauthscim/model/UserEntity.java\n\n@@ -6,7 +6,7 @@\n  * https://opensource.org/licenses/MIT.\n  */\n \n-package com.google.cloud.healthcare.fdamystudies.oauthscim.model.oauthscim;\n+package com.google.cloud.healthcare.fdamystudies.oauthscim.model;\n \n import com.fasterxml.jackson.databind.JsonNode;\n import com.google.cloud.healthcare.fdamystudies.common.JsonNodeConverter;\n"}}, {"oid": "ee6d18c853627f8e44f596b3b0e7b8f97bf4661e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ee6d18c853627f8e44f596b3b0e7b8f97bf4661e", "message": "Reverted entity package name changes\n\nReverted entity package name changes", "committedDate": "2020-09-10T11:52:00Z", "type": "commit"}, {"oid": "fa82c495ff3af62494f9e50c0d523ffa9f9bdcde", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fa82c495ff3af62494f9e50c0d523ffa9f9bdcde", "message": "Added # to participant manager redirect url\n\nAdded # to participant manager redirect url", "committedDate": "2020-09-10T15:24:22Z", "type": "commit"}, {"oid": "fe461a9cd77d9d62619e2c878ee3467d36092e7e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fe461a9cd77d9d62619e2c878ee3467d36092e7e", "message": "Merge branch 'develop' into oauth_scim_externalized_configuration", "committedDate": "2020-09-10T15:29:44Z", "type": "commit"}, {"oid": "3dd34d7283574ff93fc0ee5848d662e7fbd025c4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3dd34d7283574ff93fc0ee5848d662e7fbd025c4", "message": "Merge branch 'develop' into oauth_scim_externalized_configuration", "committedDate": "2020-09-11T07:30:20Z", "type": "commit"}, {"oid": "f130e2758cef33efb415ef614c18d5cd8f9969f9", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f130e2758cef33efb415ef614c18d5cd8f9969f9", "message": "Fixed review comment on redirect urls\n\nFixed review comment on redirect urls", "committedDate": "2020-09-11T07:50:18Z", "type": "commit"}, {"oid": "5c57cdbd0dd5356a759350899bbd0392c7ab8f69", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5c57cdbd0dd5356a759350899bbd0392c7ab8f69", "message": "updated actuator link\n\nupdated actuator link", "committedDate": "2020-09-11T08:30:36Z", "type": "commit"}, {"oid": "e450d5adb554b758105b1b5d8bebbce95e43bbd8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e450d5adb554b758105b1b5d8bebbce95e43bbd8", "message": "Merge branch 'develop' into oauth_scim_externalized_configuration", "committedDate": "2020-09-14T05:13:41Z", "type": "commit"}, {"oid": "a5ede4e17f9e672431c8ba6f7a72ea576cf939be", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a5ede4e17f9e672431c8ba6f7a72ea576cf939be", "message": "Merge branch 'develop' into oauth_scim_externalized_configuration", "committedDate": "2020-09-14T05:17:35Z", "type": "commit"}]}