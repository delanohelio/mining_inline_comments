{"pr_number": 924, "pr_title": "Server side changes to fix CORS issue", "pr_createdAt": "2020-09-09T15:46:55Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/924", "timeline": [{"oid": "916597438c4060598dcff830577807e6812c486a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/916597438c4060598dcff830577807e6812c486a", "message": "Server side changes to fix CORS issue\n\nServer side changes to fix CORS issue", "committedDate": "2020-09-09T15:44:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgzNTI2OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/924#discussion_r485835268", "bodyText": "Why do we need this and the corsConfigurer method? That one also still has \"*\" as the allowed origins.", "author": "nikklassen", "createdAt": "2020-09-09T18:42:36Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/config/CommonModuleConfiguration.java", "diffHunk": "@@ -60,4 +65,15 @@ protected void addInterceptors(RestTemplate restTemplate) {\n     interceptors.add(new RestTemplateAuthTokenModifierInterceptor());\n     restTemplate.setInterceptors(interceptors);\n   }\n+\n+  @Override\n+  public void addCorsMappings(CorsRegistry registry) {", "originalCommit": "916597438c4060598dcff830577807e6812c486a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIwMzc1Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/924#discussion_r486203756", "bodyText": "My bad..we are using addCorsMappings only. I have removed corsConfigurer method now. Please verify and approve .", "author": "aswinijena100", "createdAt": "2020-09-10T09:39:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgzNTI2OA=="}], "type": "inlineReview", "revised_code": {"commit": "db295bf64b661cf64f16b672c85d21b2a9ccf33e", "chunk": "diff --git a/common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/config/CommonModuleConfiguration.java b/common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/config/CommonModuleConfiguration.java\nindex d051ecbb0..7a7cffefd 100644\n--- a/common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/config/CommonModuleConfiguration.java\n+++ b/common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/config/CommonModuleConfiguration.java\n\n@@ -47,22 +51,12 @@ public class CommonModuleConfiguration implements WebMvcConfigurer {\n     return restTemplate;\n   }\n \n-  @Bean\n-  public WebMvcConfigurer corsConfigurer() {\n-    return new WebMvcConfigurer() {\n-      @Override\n-      public void addCorsMappings(CorsRegistry registry) {\n-        registry.addMapping(\"/**\").allowedOrigins(\"*\").allowedHeaders(\"*\").allowedMethods(\"*\");\n-      }\n-    };\n-  }\n-\n   protected void addInterceptors(RestTemplate restTemplate) {\n     List<ClientHttpRequestInterceptor> interceptors = restTemplate.getInterceptors();\n     if (CollectionUtils.isEmpty(interceptors)) {\n       interceptors = new ArrayList<>();\n     }\n-    interceptors.add(new RestTemplateAuthTokenModifierInterceptor());\n+    interceptors.add(restTemplateAuthTokenModifierInterceptor);\n     restTemplate.setInterceptors(interceptors);\n   }\n \n"}}, {"oid": "ea3acf83f4208fa7ad76e38e168da490a1db3207", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ea3acf83f4208fa7ad76e38e168da490a1db3207", "message": "removed corsConfigurer method\n\nremoved corsConfigurer method", "committedDate": "2020-09-10T09:34:59Z", "type": "commit"}, {"oid": "db295bf64b661cf64f16b672c85d21b2a9ccf33e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/db295bf64b661cf64f16b672c85d21b2a9ccf33e", "message": "Merge branch 'develop' into backend-changes-for-cors-issue", "committedDate": "2020-09-11T08:19:17Z", "type": "commit"}, {"oid": "b96a399805ef9711029587b011f1617520d92399", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b96a399805ef9711029587b011f1617520d92399", "message": "Merge branch 'develop' into backend-changes-for-cors-issue", "committedDate": "2020-09-14T05:13:18Z", "type": "commit"}]}