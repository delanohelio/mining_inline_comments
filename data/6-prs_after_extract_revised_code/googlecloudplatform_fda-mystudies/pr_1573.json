{"pr_number": 1573, "pr_title": "Participant manager: Fixed issue#1531", "pr_createdAt": "2020-10-21T10:22:40Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1573", "timeline": [{"oid": "94e3b04749a746868cb645293bc24b300a51a080", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/94e3b04749a746868cb645293bc24b300a51a080", "message": "Fixed issue #1531\n\nFixed issue #1531", "committedDate": "2020-10-21T09:46:11Z", "type": "commit"}, {"oid": "fb9c78d91afaf0ee0e8a12e76e90e2aa6a99f3e9", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fb9c78d91afaf0ee0e8a12e76e90e2aa6a99f3e9", "message": "added test case\n\nadded test case", "committedDate": "2020-10-21T10:21:01Z", "type": "commit"}, {"oid": "9907c276dfadeea86e00a4b5149442710cc6db73", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9907c276dfadeea86e00a4b5149442710cc6db73", "message": "renamed variables\n\nrenamed variables", "committedDate": "2020-10-21T11:33:32Z", "type": "commit"}, {"oid": "422cb41ba05054e9b1251a28d73e71a57215c2a2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/422cb41ba05054e9b1251a28d73e71a57215c2a2", "message": "removed null check\n\nremoved null check", "committedDate": "2020-10-21T11:36:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTYzNTIxOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1573#discussion_r509635218", "bodyText": "could you quickly fix the typo here", "author": "saminguyen", "createdAt": "2020-10-21T20:00:10Z", "path": "participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/AppServiceImpl.java", "diffHunk": "@@ -430,13 +430,15 @@ public AppParticipantsResponse getAppParticipants(\n \n     List<UserDetailsEntity> userDetails = userDetailsRepository.findByAppId(app.getId());\n     List<StudyEntity> studyEntity = studyRepository.findByAppId(app.getId());\n+    List<ParticipantDetail> participants = new ArrayList<>();\n \n-    Map<String, Map<StudyEntity, List<ParticipantStudyEntity>>>\n-        participantEnrollmentsByUserDetailsAndStudy =\n-            getEnrolledParticipants(userDetails, studyEntity);\n-\n-    List<ParticipantDetail> participants =\n-        prepareParticpantDetails(userDetails, participantEnrollmentsByUserDetailsAndStudy);\n+    if (CollectionUtils.isNotEmpty(userDetails)) {\n+      Map<String, Map<StudyEntity, List<ParticipantStudyEntity>>>\n+          participantEnrollmentsByUserDetailsAndStudy =\n+              getEnrolledParticipants(userDetails, studyEntity);\n+      participants =\n+          prepareParticpantDetails(userDetails, participantEnrollmentsByUserDetailsAndStudy);", "originalCommit": "422cb41ba05054e9b1251a28d73e71a57215c2a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4NzIyMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1573#discussion_r510587221", "bodyText": "Fixed review comment.", "author": "monica-BTC", "createdAt": "2020-10-23T04:31:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTYzNTIxOA=="}], "type": "inlineReview", "revised_code": {"commit": "6702180a2b931afdb7a649c21fef2c9e18ae73ea", "chunk": "diff --git a/participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/AppServiceImpl.java b/participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/AppServiceImpl.java\nindex ee52e9d18..f169df19b 100644\n--- a/participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/AppServiceImpl.java\n+++ b/participant-manager-datastore/participant-manager-service/src/main/java/com/google/cloud/healthcare/fdamystudies/service/AppServiceImpl.java\n\n@@ -434,10 +434,10 @@ public class AppServiceImpl implements AppService {\n \n     if (CollectionUtils.isNotEmpty(userDetails)) {\n       Map<String, Map<StudyEntity, List<ParticipantStudyEntity>>>\n-          participantEnrollmentsByUserDetailsAndStudy =\n+          participantsEnrolled =\n               getEnrolledParticipants(userDetails, studyEntity);\n       participants =\n-          prepareParticpantDetails(userDetails, participantEnrollmentsByUserDetailsAndStudy);\n+          prepareParticpantDetails(userDetails, participantsEnrolled);\n     }\n \n     AppParticipantsResponse appParticipantsResponse =\n"}}, {"oid": "f71050d88aa66f39952bf200b529d46f8f975256", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f71050d88aa66f39952bf200b529d46f8f975256", "message": "Merge branch 'develop' into participant-manager-issue#1531", "committedDate": "2020-10-23T03:47:42Z", "type": "commit"}, {"oid": "6702180a2b931afdb7a649c21fef2c9e18ae73ea", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6702180a2b931afdb7a649c21fef2c9e18ae73ea", "message": "Fixed Review comment\n\nFixed Review comment", "committedDate": "2020-10-23T04:25:11Z", "type": "commit"}, {"oid": "6bc09415be72a111616e3b057fa19b0c62285b2d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6bc09415be72a111616e3b057fa19b0c62285b2d", "message": "Merge branch 'develop' into participant-manager-issue#1531", "committedDate": "2020-10-23T04:27:23Z", "type": "commit"}, {"oid": "ae173e07c08c2d6ef6aa4939c359938dd78747da", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ae173e07c08c2d6ef6aa4939c359938dd78747da", "message": "Merge branch 'develop' into participant-manager-issue#1531", "committedDate": "2020-10-27T04:42:56Z", "type": "commit"}]}