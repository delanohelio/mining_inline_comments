{"pr_number": 209, "pr_title": "Implement sum score", "pr_createdAt": "2020-04-23T02:27:58Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/209", "timeline": [{"oid": "1318cbdb2c81ed7c30b279b12009342c0d06e378", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1318cbdb2c81ed7c30b279b12009342c0d06e378", "message": "Implement sum score", "committedDate": "2020-04-23T02:27:01Z", "type": "commit"}, {"oid": "7035de3bfe7fe640e02028de25e3f330a6ea1dd1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7035de3bfe7fe640e02028de25e3f330a6ea1dd1", "message": "Make \"_SUM\" a constant and change some logging to debug.", "committedDate": "2020-04-23T17:30:42Z", "type": "commit"}, {"oid": "10cd4871190bcef54c2a21a20b1ecf305e1da70f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/10cd4871190bcef54c2a21a20b1ecf305e1da70f", "message": "Merge branch 'early-access' into score-sum", "committedDate": "2020-04-23T17:32:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA1NDkzNA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/209#discussion_r414054934", "bodyText": "should the debug log be removed?", "author": "zohrehj", "createdAt": "2020-04-23T19:11:34Z", "path": "response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/service/ActivityResponseProcessorServiceImpl.java", "diffHunk": "@@ -144,7 +144,12 @@ public void updateWithdrawalStatusForParticipant(String studyId, String particip\n   private void processActivityResponses(\n       List<QuestionnaireActivityStepsBean> questionnaireResponses,\n       List<QuestionnaireActivityStepsBean> activityMetadataBeanFromWCP) {\n+    QuestionnaireActivityStepsBean scoreSumResponseBean = null;\n     for (QuestionnaireActivityStepsBean responseBean : questionnaireResponses) {\n+      if (responseBean.getKey().equals(AppConstants.DUMMY_SUM_QUESTION_KEY)) {\n+        logger.debug(\"processActivityResponses() - Found dummy _SUM question.\");", "originalCommit": "10cd4871190bcef54c2a21a20b1ecf305e1da70f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg2NzgyNA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/209#discussion_r414867824", "bodyText": "Done.", "author": "kuoyuchi", "createdAt": "2020-04-24T21:16:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA1NDkzNA=="}], "type": "inlineReview", "revised_code": {"commit": "fa9712bdcc1b7c5bebdd21d748116889cbe7da72", "chunk": "diff --git a/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/service/ActivityResponseProcessorServiceImpl.java b/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/service/ActivityResponseProcessorServiceImpl.java\nindex 7e8696c70..fbbf6e5d8 100644\n--- a/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/service/ActivityResponseProcessorServiceImpl.java\n+++ b/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/service/ActivityResponseProcessorServiceImpl.java\n\n@@ -147,7 +147,6 @@ public class ActivityResponseProcessorServiceImpl implements ActivityResponsePro\n     QuestionnaireActivityStepsBean scoreSumResponseBean = null;\n     for (QuestionnaireActivityStepsBean responseBean : questionnaireResponses) {\n       if (responseBean.getKey().equals(AppConstants.DUMMY_SUM_QUESTION_KEY)) {\n-        logger.debug(\"processActivityResponses() - Found dummy _SUM question.\");\n         scoreSumResponseBean = responseBean;\n       }\n       if (responseBean.getResultType().equalsIgnoreCase(AppConstants.GROUPED_FIELD_KEY)) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA3MjY3NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/209#discussion_r414072674", "bodyText": "Can you please add a TODO that this should be properly implemented in future?", "author": "zohrehj", "createdAt": "2020-04-23T19:40:37Z", "path": "response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/utils/AppConstants.java", "diffHunk": "@@ -26,6 +26,7 @@\n   public static final String CREATED_RESPONSE = \"Created\";\n   public static final String RESULT_TYPE_KEY = \"resultType\";\n   public static final String QUESTION_ID_KEY = \"key\";\n+  public static final String DUMMY_SUM_QUESTION_KEY = \"_SUM\";", "originalCommit": "10cd4871190bcef54c2a21a20b1ecf305e1da70f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg2Nzc1NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/209#discussion_r414867755", "bodyText": "Done.", "author": "kuoyuchi", "createdAt": "2020-04-24T21:16:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA3MjY3NA=="}], "type": "inlineReview", "revised_code": {"commit": "31aec32a4f252784ccbb9ab8fd7946066f45b92e", "chunk": "diff --git a/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/utils/AppConstants.java b/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/utils/AppConstants.java\nindex 995c5aea8..59d01b952 100644\n--- a/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/utils/AppConstants.java\n+++ b/response-server-ws/src/main/java/com/google/cloud/healthcare/fdamystudies/utils/AppConstants.java\n\n@@ -26,6 +26,8 @@ public class AppConstants {\n   public static final String CREATED_RESPONSE = \"Created\";\n   public static final String RESULT_TYPE_KEY = \"resultType\";\n   public static final String QUESTION_ID_KEY = \"key\";\n+  // TODO: The score sum feature should be properly implemented. This dummy question\n+  // approach is a short-term workaround.\n   public static final String DUMMY_SUM_QUESTION_KEY = \"_SUM\";\n   public static final String FIELD_PATH_ACTIVITY_ID = \"metadata.activityId\";\n   public static final String PARTICIPANT_TOKEN_IDENTIFIER_KEY = \"tokenIdentifier\";\n"}}, {"oid": "fa9712bdcc1b7c5bebdd21d748116889cbe7da72", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fa9712bdcc1b7c5bebdd21d748116889cbe7da72", "message": "remove logger.debug", "committedDate": "2020-04-24T21:14:45Z", "type": "commit"}, {"oid": "31aec32a4f252784ccbb9ab8fd7946066f45b92e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/31aec32a4f252784ccbb9ab8fd7946066f45b92e", "message": "Add TODO", "committedDate": "2020-04-24T21:15:42Z", "type": "commit"}, {"oid": "87afe63a87cf27bd813b53dd4280f0ef75301536", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/87afe63a87cf27bd813b53dd4280f0ef75301536", "message": "Merge branch 'early-access' into score-sum", "committedDate": "2020-04-24T21:16:30Z", "type": "commit"}, {"oid": "475a06376d3bc410211c549f4eddede7db1bdcd2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/475a06376d3bc410211c549f4eddede7db1bdcd2", "message": "Merge branch 'early-access' into score-sum", "committedDate": "2020-04-24T21:26:33Z", "type": "commit"}]}