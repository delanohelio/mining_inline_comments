{"pr_number": 2444, "pr_title": "Fixed issue #1087 Account lock and Forgot password email for PM ", "pr_createdAt": "2020-12-16T17:13:38Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444", "timeline": [{"oid": "c184b5a376cc186403015082ccf85900e08e91cd", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c184b5a376cc186403015082ccf85900e08e91cd", "message": "Fixed Account lock and Forgot password email for PM #1087\n\nFixed Account lock and Forgot password email for PM #1087", "committedDate": "2020-12-16T17:07:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3NzYwMg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544477602", "bodyText": "[auth-server Checks] reported by reviewdog \ud83d\udc36\nLine is longer than 100 characters (found 129).", "author": "github-actions", "createdAt": "2020-12-16T17:16:53Z", "path": "auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java", "diffHunk": "@@ -689,7 +689,7 @@ public void shouldSendAccountLockedEmail() throws Exception {\n     String body =\n         String.join(\n             \"<br/>\",\n-            \"This is to inform you that, as a security measure, your user account for MyStudies app\",\n+            \"This is to inform you that, as a security measure, your user account for MyStudiesOrg's Participant Manager portal\",", "originalCommit": "c184b5a376cc186403015082ccf85900e08e91cd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "36f13445825acacbea106061ee99d5a855a148a2", "chunk": "diff --git a/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java b/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java\nindex 2061534bb..6d7d66442 100644\n--- a/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java\n+++ b/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java\n\n@@ -689,7 +689,7 @@ public class LoginControllerTest extends BaseMockIT {\n     String body =\n         String.join(\n             \"<br/>\",\n-            \"This is to inform you that, as a security measure, your user account for MyStudiesOrg's Participant Manager portal\",\n+            \"This is to inform you that, as a security measure, your user account for MyStudies Participant Manager portal\",\n             \"has been temporarily locked for a period of 15 minutes, due to multiple consecutive failed sign-in\",\n             \"attempts with incorrect password.\");\n \n"}}, {"oid": "7bcaf08c631c6c2186bd50f2b32818bc5dba0ca6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7bcaf08c631c6c2186bd50f2b32818bc5dba0ca6", "message": "Merge branch 'develop' into oauth-server-email-issue-1087", "committedDate": "2020-12-16T17:18:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MjA4OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544492089", "bodyText": "remove org, i.e. change to MyStudies Participant Manager portal", "author": "zohrehj", "createdAt": "2020-12-16T17:37:05Z", "path": "auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java", "diffHunk": "@@ -689,7 +689,7 @@ public void shouldSendAccountLockedEmail() throws Exception {\n     String body =\n         String.join(\n             \"<br/>\",\n-            \"This is to inform you that, as a security measure, your user account for MyStudies app\",\n+            \"This is to inform you that, as a security measure, your user account for MyStudiesOrg's Participant Manager portal\",", "originalCommit": "7bcaf08c631c6c2186bd50f2b32818bc5dba0ca6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUwMjczMw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544502733", "bodyText": "Fixed review comment", "author": "harisboston", "createdAt": "2020-12-16T17:52:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MjA4OQ=="}], "type": "inlineReview", "revised_code": {"commit": "36f13445825acacbea106061ee99d5a855a148a2", "chunk": "diff --git a/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java b/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java\nindex 2061534bb..6d7d66442 100644\n--- a/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java\n+++ b/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java\n\n@@ -689,7 +689,7 @@ public class LoginControllerTest extends BaseMockIT {\n     String body =\n         String.join(\n             \"<br/>\",\n-            \"This is to inform you that, as a security measure, your user account for MyStudiesOrg's Participant Manager portal\",\n+            \"This is to inform you that, as a security measure, your user account for MyStudies Participant Manager portal\",\n             \"has been temporarily locked for a period of 15 minutes, due to multiple consecutive failed sign-in\",\n             \"attempts with incorrect password.\");\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MjU4Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544492583", "bodyText": "Thank you is more formal and should be used.", "author": "zohrehj", "createdAt": "2020-12-16T17:37:44Z", "path": "auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/UserControllerTest.java", "diffHunk": "@@ -708,7 +708,7 @@ public void shouldSendPasswordResetEmailAndUpdateThePassword()\n         .andExpect(jsonPath(\"$.message\").value(MessageCode.FORGOT_PASSWORD.getMessage()));\n \n     String subject = getMailResetSubject();\n-    String body = \"Thank you for reaching out for password help\";\n+    String body = \"Thanks for reaching out for password help\";", "originalCommit": "7bcaf08c631c6c2186bd50f2b32818bc5dba0ca6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUwMjg5NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544502895", "bodyText": "Fixed review comment", "author": "harisboston", "createdAt": "2020-12-16T17:52:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MjU4Mw=="}], "type": "inlineReview", "revised_code": {"commit": "36f13445825acacbea106061ee99d5a855a148a2", "chunk": "diff --git a/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/UserControllerTest.java b/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/UserControllerTest.java\nindex 0c765fcd3..8cc6204af 100644\n--- a/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/UserControllerTest.java\n+++ b/auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/UserControllerTest.java\n\n@@ -708,7 +708,7 @@ public class UserControllerTest extends BaseMockIT {\n         .andExpect(jsonPath(\"$.message\").value(MessageCode.FORGOT_PASSWORD.getMessage()));\n \n     String subject = getMailResetSubject();\n-    String body = \"Thanks for reaching out for password help\";\n+    String body = \"Thank you for reaching out for password help\";\n \n     MimeMessage mail =\n         verifyMimeMessage(EMAIL_VALUE, appPropertyConfig.getFromEmail(), subject, body);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MzEwNg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544493106", "bodyText": "return the default value here, is that null?", "author": "zohrehj", "createdAt": "2020-12-16T17:38:31Z", "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/PlatformComponent.java", "diffHunk": "@@ -66,7 +71,16 @@\n \n   private String description;\n \n+  private static final XLogger logger =\n+      XLoggerFactory.getXLogger(PlatformComponent.class.getName());\n+\n   public static PlatformComponent fromValue(String value) {\n+    try {\n+      value = StringUtils.isNotBlank(value) ? URLDecoder.decode(value, \"UTF-8\") : value;\n+    } catch (UnsupportedEncodingException e) {\n+      logger.error(String.format(\"Unable to decode '%s' using URLDecoder\", value), e);\n+      return null;", "originalCommit": "7bcaf08c631c6c2186bd50f2b32818bc5dba0ca6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUwNTI1OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544505259", "bodyText": "source value should never be null, if it is for some reason, will throw exception.", "author": "harisboston", "createdAt": "2020-12-16T17:56:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MzEwNg=="}], "type": "inlineReview", "revised_code": null}, {"oid": "36f13445825acacbea106061ee99d5a855a148a2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/36f13445825acacbea106061ee99d5a855a148a2", "message": "Fixed review comment\n\nFixed review comment", "committedDate": "2020-12-16T17:50:48Z", "type": "commit"}, {"oid": "de1cf894c29e46af228fb2aa7326e5266b3fd313", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/de1cf894c29e46af228fb2aa7326e5266b3fd313", "message": "Merge branch 'oauth-server-email-issue-1087' of https://github.com/GoogleCloudPlatform/fda-mystudies into oauth-server-email-issue-1087", "committedDate": "2020-12-16T17:50:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUwNzI3Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2444#discussion_r544507276", "bodyText": "[auth-server Checks] reported by reviewdog \ud83d\udc36\nLine is longer than 100 characters (found 124).", "author": "github-actions", "createdAt": "2020-12-16T17:59:08Z", "path": "auth-server/oauth-scim-service/src/test/java/com/google/cloud/healthcare/fdamystudies/oauthscim/controller/LoginControllerTest.java", "diffHunk": "@@ -689,7 +689,7 @@ public void shouldSendAccountLockedEmail() throws Exception {\n     String body =\n         String.join(\n             \"<br/>\",\n-            \"This is to inform you that, as a security measure, your user account for MyStudies app\",\n+            \"This is to inform you that, as a security measure, your user account for MyStudies Participant Manager portal\",", "originalCommit": "de1cf894c29e46af228fb2aa7326e5266b3fd313", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "a088ea7cf3d8b58b1026dbf6258a39e2359f7d20", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a088ea7cf3d8b58b1026dbf6258a39e2359f7d20", "message": "Merge branch 'develop' into oauth-server-email-issue-1087", "committedDate": "2020-12-16T18:53:04Z", "type": "commit"}, {"oid": "d5ae4b5b20b969492cf8532d5f4bbc03bc2b9d12", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d5ae4b5b20b969492cf8532d5f4bbc03bc2b9d12", "message": "Merge branch 'develop' into oauth-server-email-issue-1087", "committedDate": "2020-12-17T06:00:50Z", "type": "commit"}]}