{"pr_number": 907, "pr_title": "Check agent instance relocation attributes in placement", "pr_createdAt": "2020-09-01T20:25:03Z", "pr_url": "https://github.com/Netflix/titus-control-plane/pull/907", "timeline": [{"oid": "95f8c3b7ed8e2965b4fd424ff50f20eeee85e8f5", "url": "https://github.com/Netflix/titus-control-plane/commit/95f8c3b7ed8e2965b4fd424ff50f20eeee85e8f5", "message": "Check agent instance relocation attributes in placement", "committedDate": "2020-09-01T20:24:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2NTYzNQ==", "url": "https://github.com/Netflix/titus-control-plane/pull/907#discussion_r481465635", "bodyText": "thoughts on extracting these constants (from RelocationAttributes) to a common module and centralizing there?", "author": "fabiokung", "createdAt": "2020-09-01T22:23:54Z", "path": "titus-server-master/src/main/java/com/netflix/titus/master/scheduler/constraint/AgentManagementConstraint.java", "diffHunk": "@@ -50,6 +50,12 @@\n @Singleton\n public class AgentManagementConstraint implements SystemConstraint {\n \n+    /**\n+     * See RelocationAttributes for full documentation.\n+     */\n+    public static final String RELOCATION_REQUIRED = \"titus.relocation.required\";\n+    public static final String RELOCATION_REQUIRED_IMMEDIATELY = \"titus.relocation.requiredImmediately\";", "originalCommit": "95f8c3b7ed8e2965b4fd424ff50f20eeee85e8f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ3OTE3NQ==", "url": "https://github.com/Netflix/titus-control-plane/pull/907#discussion_r481479175", "bodyText": "That was the original intent, but it is fine to be extra safe here while we transition to taints.", "author": "corindwyer", "createdAt": "2020-09-01T23:03:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ2NTYzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "21e4da9078693c246ca0906364e984b989794656", "chunk": "diff --git a/titus-server-master/src/main/java/com/netflix/titus/master/scheduler/constraint/AgentManagementConstraint.java b/titus-server-master/src/main/java/com/netflix/titus/master/scheduler/constraint/AgentManagementConstraint.java\nindex f2eb8082e..9fded59a6 100644\n--- a/titus-server-master/src/main/java/com/netflix/titus/master/scheduler/constraint/AgentManagementConstraint.java\n+++ b/titus-server-master/src/main/java/com/netflix/titus/master/scheduler/constraint/AgentManagementConstraint.java\n\n@@ -50,12 +51,6 @@ import static com.netflix.titus.master.scheduler.SchedulerUtils.getTolerations;\n @Singleton\n public class AgentManagementConstraint implements SystemConstraint {\n \n-    /**\n-     * See RelocationAttributes for full documentation.\n-     */\n-    public static final String RELOCATION_REQUIRED = \"titus.relocation.required\";\n-    public static final String RELOCATION_REQUIRED_IMMEDIATELY = \"titus.relocation.requiredImmediately\";\n-\n     public static final String NAME = \"AgentManagementConstraint\";\n \n     private static final Result VALID = new Result(true, null);\n"}}, {"oid": "21e4da9078693c246ca0906364e984b989794656", "url": "https://github.com/Netflix/titus-control-plane/commit/21e4da9078693c246ca0906364e984b989794656", "message": "Move RelocationAttributes to titus-server-runtime to share with other components", "committedDate": "2020-09-01T22:36:48Z", "type": "commit"}]}