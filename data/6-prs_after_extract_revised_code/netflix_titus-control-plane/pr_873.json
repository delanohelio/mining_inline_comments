{"pr_number": 873, "pr_title": "Check if all required node attributes are present", "pr_createdAt": "2020-06-16T19:11:32Z", "pr_url": "https://github.com/Netflix/titus-control-plane/pull/873", "timeline": [{"oid": "3d1ba6a76eb77bbbccf256405ba06461e8a89e43", "url": "https://github.com/Netflix/titus-control-plane/commit/3d1ba6a76eb77bbbccf256405ba06461e8a89e43", "message": "Check if all required node attributes are present\n\nbefore adding a lease for a node to Fenzo", "committedDate": "2020-06-16T19:09:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4NTg2OQ==", "url": "https://github.com/Netflix/titus-control-plane/pull/873#discussion_r441085869", "bodyText": "id, res, hostIp, zone, region, itype", "author": "corindwyer", "createdAt": "2020-06-16T19:17:57Z", "path": "titus-server-master/src/main/java/com/netflix/titus/master/mesos/kubeapiserver/KubeApiServerIntegrator.java", "diffHunk": "@@ -124,6 +126,15 @@\n \n     static final String GC_UNKNOWN_PODS = \"gcUnknownPods\";\n \n+    static final String NODE_ATTRIBUTE_ID = \"id\";\n+    static final String NODE_ATTRIBUTE_HOST_IP = \"hostIp\";\n+    static final String NODE_ATTRIBUTE_RES = \"res\";\n+    private static final Set<String> REQUIRED_NODE_ATTRIBUTES = CollectionsExt.asSet(", "originalCommit": "3d1ba6a76eb77bbbccf256405ba06461e8a89e43", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fd7dc34caba7dd919251d4d547c1c160400ebfc1", "chunk": "diff --git a/titus-server-master/src/main/java/com/netflix/titus/master/mesos/kubeapiserver/KubeApiServerIntegrator.java b/titus-server-master/src/main/java/com/netflix/titus/master/mesos/kubeapiserver/KubeApiServerIntegrator.java\nindex b25704d82..e643a366d 100644\n--- a/titus-server-master/src/main/java/com/netflix/titus/master/mesos/kubeapiserver/KubeApiServerIntegrator.java\n+++ b/titus-server-master/src/main/java/com/netflix/titus/master/mesos/kubeapiserver/KubeApiServerIntegrator.java\n\n@@ -129,10 +129,16 @@ public class KubeApiServerIntegrator implements VirtualMachineMasterService {\n     static final String NODE_ATTRIBUTE_ID = \"id\";\n     static final String NODE_ATTRIBUTE_HOST_IP = \"hostIp\";\n     static final String NODE_ATTRIBUTE_RES = \"res\";\n+    static final String NODE_ATTRIBUTE_REGION = \"region\";\n+    static final String NODE_ATTRIBUTE_ZONE = \"zone\";\n+    static final String NODE_ATTRIBUTE_I_TYPE = \"itype\";\n     private static final Set<String> REQUIRED_NODE_ATTRIBUTES = CollectionsExt.asSet(\n             NODE_ATTRIBUTE_ID,\n             NODE_ATTRIBUTE_HOST_IP,\n-            NODE_ATTRIBUTE_RES\n+            NODE_ATTRIBUTE_RES,\n+            NODE_ATTRIBUTE_REGION,\n+            NODE_ATTRIBUTE_ZONE,\n+            NODE_ATTRIBUTE_I_TYPE\n     );\n \n     private final TitusRuntime titusRuntime;\n"}}, {"oid": "fd7dc34caba7dd919251d4d547c1c160400ebfc1", "url": "https://github.com/Netflix/titus-control-plane/commit/fd7dc34caba7dd919251d4d547c1c160400ebfc1", "message": "Code review updates", "committedDate": "2020-06-16T19:39:51Z", "type": "commit"}]}