{"pr_number": 780, "pr_title": "use kube config file", "pr_createdAt": "2020-02-19T23:04:00Z", "pr_url": "https://github.com/Netflix/titus-control-plane/pull/780", "timeline": [{"oid": "2cd0b681793fe31b0b5703707908b70696ab8239", "url": "https://github.com/Netflix/titus-control-plane/commit/2cd0b681793fe31b0b5703707908b70696ab8239", "message": "use kube config file instead of a configured url to kube-apiserver", "committedDate": "2020-02-19T23:03:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYxNzc0MA==", "url": "https://github.com/Netflix/titus-control-plane/pull/780#discussion_r381617740", "bodyText": "It would be good to support both modes (the former for testing).", "author": "tbak", "createdAt": "2020-02-20T00:02:32Z", "path": "titus-server-master/src/main/java/com/netflix/titus/master/mesos/MesosConfiguration.java", "diffHunk": "@@ -109,10 +109,10 @@\n     boolean isKubeApiServerIntegrationEnabled();\n \n     /**\n-     * @return the url of the Kube API Server\n+     * @return the path to the kubeconfig file\n      */\n-    @DefaultValue(\"localhost:8080\")\n-    String getKubeApiServerUrl();\n+    @DefaultValue(\"/run/kubernetes/config\")\n+    String getKubeConfigPath();", "originalCommit": "2cd0b681793fe31b0b5703707908b70696ab8239", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "94f43f036573af24b345ce7bb70154e4c0c97a8d", "chunk": "diff --git a/titus-server-master/src/main/java/com/netflix/titus/master/mesos/MesosConfiguration.java b/titus-server-master/src/main/java/com/netflix/titus/master/mesos/MesosConfiguration.java\nindex 4b0f7b312..5c3e1dc53 100644\n--- a/titus-server-master/src/main/java/com/netflix/titus/master/mesos/MesosConfiguration.java\n+++ b/titus-server-master/src/main/java/com/netflix/titus/master/mesos/MesosConfiguration.java\n\n@@ -108,6 +108,12 @@ public interface MesosConfiguration {\n     @DefaultValue(\"false\")\n     boolean isKubeApiServerIntegrationEnabled();\n \n+    /**\n+     * @return the kube api server url to use. If this is empty, use the kube config path instead.\n+     */\n+    @DefaultValue(\"\")\n+    String getKubeApiServerUrl();\n+\n     /**\n      * @return the path to the kubeconfig file\n      */\n"}}, {"oid": "94f43f036573af24b345ce7bb70154e4c0c97a8d", "url": "https://github.com/Netflix/titus-control-plane/commit/94f43f036573af24b345ce7bb70154e4c0c97a8d", "message": "review comments and don't instantiate kube components unless the server has it enabled", "committedDate": "2020-02-21T17:35:04Z", "type": "commit"}, {"oid": "1db4c08971aa59976ff03fbae0913a774c1b5d5e", "url": "https://github.com/Netflix/titus-control-plane/commit/1db4c08971aa59976ff03fbae0913a774c1b5d5e", "message": "Merge branch 'master' into use-kubeconfig", "committedDate": "2020-02-21T18:57:26Z", "type": "commit"}]}