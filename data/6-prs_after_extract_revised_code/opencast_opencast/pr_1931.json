{"pr_number": 1931, "pr_title": "Make copy-event-to-series workflow id configurable", "pr_createdAt": "2020-10-07T05:46:02Z", "pr_url": "https://github.com/opencast/opencast/pull/1931", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE4MjI3OQ==", "url": "https://github.com/opencast/opencast/pull/1931#discussion_r501182279", "bodyText": "Java's Objects.toString(Object o, String nullDefault is a very convenient way of doing exactly what you did:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  final String copyWorkflowId = (String) properties.get(\"copy-workflow-id\");\n          \n          \n            \n                  if (copyWorkflowId == null) {\n          \n          \n            \n                    this.copyWorkflowId = \"copy-event-to-series\";\n          \n          \n            \n                  } else {\n          \n          \n            \n                    this.copyWorkflowId = copyWorkflowId;\n          \n          \n            \n                  }\n          \n          \n            \n                  this.copyWorkflowId = Objects.toString(properties.get(\"copy-workflow-id\"), \"copy-event-to-series\");", "author": "lkiesow", "createdAt": "2020-10-07T17:20:48Z", "path": "modules/lti-service-impl/src/main/java/org/opencastproject/lti/service/impl/LtiServiceImpl.java", "diffHunk": "@@ -493,6 +493,12 @@ public void updated(Dictionary<String, ?> properties) throws ConfigurationExcept\n       } else {\n         this.retractWorkflowId = retractWorkflowId;\n       }\n+      final String copyWorkflowId = (String) properties.get(\"copy-workflow-id\");\n+      if (copyWorkflowId == null) {\n+        this.copyWorkflowId = \"copy-event-to-series\";\n+      } else {\n+        this.copyWorkflowId = copyWorkflowId;\n+      }", "originalCommit": "5c6bf58aa516a5165fa3fe84301a6352a06938c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUxMzgxNg==", "url": "https://github.com/opencast/opencast/pull/1931#discussion_r504513816", "bodyText": "Thanks! I changed that.", "author": "ebbertd", "createdAt": "2020-10-14T08:56:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE4MjI3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "c8f4b1a7f57dc4748d40adb84f2f3662ae307ecc", "chunk": "diff --git a/modules/lti-service-impl/src/main/java/org/opencastproject/lti/service/impl/LtiServiceImpl.java b/modules/lti-service-impl/src/main/java/org/opencastproject/lti/service/impl/LtiServiceImpl.java\nindex e872ae1cae..819f9adc0d 100644\n--- a/modules/lti-service-impl/src/main/java/org/opencastproject/lti/service/impl/LtiServiceImpl.java\n+++ b/modules/lti-service-impl/src/main/java/org/opencastproject/lti/service/impl/LtiServiceImpl.java\n\n@@ -487,18 +488,8 @@ public class LtiServiceImpl implements LtiService, ManagedService {\n       gson.fromJson(workflowConfigurationStr, Map.class);\n       workflowConfiguration = workflowConfigurationStr;\n       workflow = workflowStr;\n-      final String retractWorkflowId = (String) properties.get(\"retract-workflow-id\");\n-      if (retractWorkflowId == null) {\n-        this.retractWorkflowId = \"retract\";\n-      } else {\n-        this.retractWorkflowId = retractWorkflowId;\n-      }\n-      final String copyWorkflowId = (String) properties.get(\"copy-workflow-id\");\n-      if (copyWorkflowId == null) {\n-        this.copyWorkflowId = \"copy-event-to-series\";\n-      } else {\n-        this.copyWorkflowId = copyWorkflowId;\n-      }\n+      this.retractWorkflowId = Objects.toString(properties.get(\"retract-workflow-id\"), \"retract\");\n+      this.copyWorkflowId = Objects.toString(properties.get(\"copy-workflow-id\"), \"copy-event-to-series\");\n     } catch (JsonSyntaxException e) {\n       throw new IllegalArgumentException(\"Invalid JSON specified for workflow configuration\");\n     }\n"}}, {"oid": "de76819e14b5ea27bea01077ae257fa6b442f754", "url": "https://github.com/opencast/opencast/commit/de76819e14b5ea27bea01077ae257fa6b442f754", "message": "Make copy workflow configurable", "committedDate": "2020-10-14T08:53:14Z", "type": "commit"}, {"oid": "c8f4b1a7f57dc4748d40adb84f2f3662ae307ecc", "url": "https://github.com/opencast/opencast/commit/c8f4b1a7f57dc4748d40adb84f2f3662ae307ecc", "message": "Change to using Objects to string", "committedDate": "2020-10-14T08:53:59Z", "type": "commit"}, {"oid": "c8f4b1a7f57dc4748d40adb84f2f3662ae307ecc", "url": "https://github.com/opencast/opencast/commit/c8f4b1a7f57dc4748d40adb84f2f3662ae307ecc", "message": "Change to using Objects to string", "committedDate": "2020-10-14T08:53:59Z", "type": "forcePushed"}]}