{"pr_number": 1327, "pr_title": "Video Segemntation On Short Videos", "pr_createdAt": "2020-01-06T20:58:13Z", "pr_url": "https://github.com/opencast/opencast/pull/1327", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjExODcxMA==", "url": "https://github.com/opencast/opencast/pull/1327#discussion_r366118710", "bodyText": "15 seconds is fine to me, although I somewhat agree with Matthias in that sub 5 minute videos don't really benefit from segmentation.\nMy complaint here whoever, is somewhat simpler: Magic numbers.  IMO this should be a constant properly defined so it shows up in the javadocs.", "author": "gregorydlogan", "createdAt": "2020-01-14T01:50:44Z", "path": "modules/videosegmenter-workflowoperation/src/main/java/org/opencastproject/workflow/handler/videosegmenter/VideoSegmenterWorkflowOperationHandler.java", "diffHunk": "@@ -110,6 +110,12 @@ public WorkflowOperationResult start(final WorkflowInstance workflowInstance, Jo\n     }\n     Track track = candidates.get(0);\n \n+    // Skip operation if media is shorter than 15s since we won't generate a sensible segmentation on such a short\n+    // video anyway.\n+    if (track.getDuration() != null && track.getDuration() < 15000) {", "originalCommit": "f0198c25f4b9448375cdfa3676deae3ea0241ee3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "94feda5a4191a44fcd8eaa425fbb1f789b728e58", "chunk": "diff --git a/modules/videosegmenter-workflowoperation/src/main/java/org/opencastproject/workflow/handler/videosegmenter/VideoSegmenterWorkflowOperationHandler.java b/modules/videosegmenter-workflowoperation/src/main/java/org/opencastproject/workflow/handler/videosegmenter/VideoSegmenterWorkflowOperationHandler.java\nindex 77917130a1..4d00be17ff 100644\n--- a/modules/videosegmenter-workflowoperation/src/main/java/org/opencastproject/workflow/handler/videosegmenter/VideoSegmenterWorkflowOperationHandler.java\n+++ b/modules/videosegmenter-workflowoperation/src/main/java/org/opencastproject/workflow/handler/videosegmenter/VideoSegmenterWorkflowOperationHandler.java\n\n@@ -110,9 +107,9 @@ public class VideoSegmenterWorkflowOperationHandler extends AbstractWorkflowOper\n     }\n     Track track = candidates.get(0);\n \n-    // Skip operation if media is shorter than 15s since we won't generate a sensible segmentation on such a short\n-    // video anyway.\n-    if (track.getDuration() != null && track.getDuration() < 15000) {\n+    // Skip operation if media is shorter than the minimum defined video length (30s) since we won't generate a\n+    // sensible segmentation on such a short video anyway.\n+    if (track.getDuration() != null && track.getDuration() < MIN_VIDEO_LENGTH) {\n       return createResult(mediaPackage, Action.SKIP);\n     }\n \n"}}, {"oid": "94feda5a4191a44fcd8eaa425fbb1f789b728e58", "url": "https://github.com/opencast/opencast/commit/94feda5a4191a44fcd8eaa425fbb1f789b728e58", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326", "committedDate": "2020-01-14T14:16:23Z", "type": "forcePushed"}, {"oid": "b7bd03d55949d53271327abe465d5ca9c6ab6828", "url": "https://github.com/opencast/opencast/commit/b7bd03d55949d53271327abe465d5ca9c6ab6828", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326", "committedDate": "2020-01-14T15:41:29Z", "type": "commit"}, {"oid": "b7bd03d55949d53271327abe465d5ca9c6ab6828", "url": "https://github.com/opencast/opencast/commit/b7bd03d55949d53271327abe465d5ca9c6ab6828", "message": "Video Segemntation On Short Videos\n\nOur video segmentation works extremely bad on short videos, e.g. trying\nto divide a 0.5 seconds video into 100 segments, causing the segments to\nbe shorter than a single frame which then caused problems with the\nslide-preview extraction.\n\nAssuming that a segmentation on extremely short videos is useless at\nbest and causes workflow failures or services in error states at worst,\nthis patch will make Opencast skip the segmentation on videos shorter\nthan 15 seconds.\n\nThis is related to #1219 and #1326", "committedDate": "2020-01-14T15:41:29Z", "type": "forcePushed"}]}