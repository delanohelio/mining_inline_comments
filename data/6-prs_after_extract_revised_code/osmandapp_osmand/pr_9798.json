{"pr_number": 9798, "pr_title": "Save dialog in route details", "pr_createdAt": "2020-09-13T11:01:50Z", "pr_url": "https://github.com/osmandapp/OsmAnd/pull/9798", "timeline": [{"oid": "2ca2e5a554b85d404b63deb982b3a21df96dba8d", "url": "https://github.com/osmandapp/OsmAnd/commit/2ca2e5a554b85d404b63deb982b3a21df96dba8d", "message": "Close #9746 Request: Replace saving dialog in Route Details > Save", "committedDate": "2020-09-13T10:54:31Z", "type": "commit"}, {"oid": "728733a1f4ff05e2a45cd719303a85df21a0aaff", "url": "https://github.com/osmandapp/OsmAnd/commit/728733a1f4ff05e2a45cd719303a85df21a0aaff", "message": "Merge branch 'master' into save_dialog_in_route_details", "committedDate": "2020-09-13T10:59:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgxODY3OQ==", "url": "https://github.com/osmandapp/OsmAnd/pull/9798#discussion_r487818679", "bodyText": "Give proper file name\n\nParameter Name Format\nParameter  Folder name\nExtension", "author": "vshcherb", "createdAt": "2020-09-14T10:44:49Z", "path": "OsmAnd/src/net/osmand/FileUtils.java", "diffHunk": "@@ -165,6 +171,22 @@ public static File checkRenamePossibility(OsmandApplication ctx, File source, St\n \t\treturn dest;\n \t}\n \n+\tpublic static String createName(OsmandApplication app) {", "originalCommit": "728733a1f4ff05e2a45cd719303a85df21a0aaff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgxODg3OQ==", "url": "https://github.com/osmandapp/OsmAnd/pull/9798#discussion_r487818879", "bodyText": "Method name - createUniqueFileName", "author": "vshcherb", "createdAt": "2020-09-14T10:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgxODY3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "454ab23eed444d1b7dd099109fba18332a6ed59e", "chunk": "diff --git a/OsmAnd/src/net/osmand/FileUtils.java b/OsmAnd/src/net/osmand/FileUtils.java\nindex 222b706e3c..59fb36c88d 100644\n--- a/OsmAnd/src/net/osmand/FileUtils.java\n+++ b/OsmAnd/src/net/osmand/FileUtils.java\n\n@@ -171,20 +166,16 @@ public class FileUtils {\n \t\treturn dest;\n \t}\n \n-\tpublic static String createName(OsmandApplication app) {\n-\t\tString displayedName;\n-\t\tfinal String suggestedName = new SimpleDateFormat(\"EEE dd MMM yyyy\", Locale.US).format(new Date());\n-\t\tdisplayedName = suggestedName;\n-\t\tif (app != null) {\n-\t\t\tFile dir = app.getAppPath(GPX_INDEX_DIR);\n-\t\t\tFile fout = new File(dir, suggestedName + GPX_FILE_EXT);\n-\t\t\tint ind = 0;\n-\t\t\twhile (fout.exists()) {\n-\t\t\t\tdisplayedName = suggestedName + \"_\" + (++ind);\n-\t\t\t\tfout = new File(dir, displayedName + GPX_FILE_EXT);\n-\t\t\t}\n+\tpublic static String createUniqueFileName(@NonNull OsmandApplication app, String name, String dirName, String extension) {\n+\t\tString uniqueFileName = name;\n+\t\tFile dir = app.getAppPath(dirName);\n+\t\tFile fout = new File(dir, name + extension);\n+\t\tint ind = 0;\n+\t\twhile (fout.exists()) {\n+\t\t\tuniqueFileName = name + \"_\" + (++ind);\n+\t\t\tfout = new File(dir, uniqueFileName + extension);\n \t\t}\n-\t\treturn displayedName;\n+\t\treturn uniqueFileName;\n \t}\n \n \tpublic interface RenameCallback {\n"}}, {"oid": "e9f890b9ff3c780fcbab2104d72e25dd821137fa", "url": "https://github.com/osmandapp/OsmAnd/commit/e9f890b9ff3c780fcbab2104d72e25dd821137fa", "message": "Merge branch 'master' into save_dialog_in_route_details", "committedDate": "2020-09-14T19:50:45Z", "type": "commit"}, {"oid": "454ab23eed444d1b7dd099109fba18332a6ed59e", "url": "https://github.com/osmandapp/OsmAnd/commit/454ab23eed444d1b7dd099109fba18332a6ed59e", "message": "Refactor createUniqueFileName", "committedDate": "2020-09-14T22:57:21Z", "type": "commit"}]}