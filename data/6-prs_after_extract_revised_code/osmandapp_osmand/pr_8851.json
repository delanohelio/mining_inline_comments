{"pr_number": 8851, "pr_title": "add native pt setting to dev plugin", "pr_createdAt": "2020-04-28T11:34:46Z", "pr_url": "https://github.com/osmandapp/OsmAnd/pull/8851", "timeline": [{"oid": "fdb94ad33acc5dfb16b9dc5f5a974071460c9c90", "url": "https://github.com/osmandapp/OsmAnd/commit/fdb94ad33acc5dfb16b9dc5f5a974071460c9c90", "message": "add native pt setting to dev plugin", "committedDate": "2020-04-28T11:31:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjU2Njc1MA==", "url": "https://github.com/osmandapp/OsmAnd/pull/8851#discussion_r416566750", "bodyText": "not needed", "author": "vshcherb", "createdAt": "2020-04-28T12:20:58Z", "path": "OsmAnd/src/net/osmand/plus/AppInitializer.java", "diffHunk": "@@ -859,10 +859,12 @@ private void initNativeCore() {\n \t\t\tOsmandSettings osmandSettings = app.getSettings();\n \t\t\tif (osmandSettings.NATIVE_RENDERING_FAILED.get()) {\n \t\t\t\tosmandSettings.SAFE_MODE.set(true);\n+\t\t\t\tosmandSettings.PT_SAFE_MODE.set(true);", "originalCommit": "fdb94ad33acc5dfb16b9dc5f5a974071460c9c90", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "dd9e9ec9f21066c63a7d06dfb4c9a9745478d700", "chunk": "diff --git a/OsmAnd/src/net/osmand/plus/AppInitializer.java b/OsmAnd/src/net/osmand/plus/AppInitializer.java\nindex ecd4a25c08..4d8e243e1f 100644\n--- a/OsmAnd/src/net/osmand/plus/AppInitializer.java\n+++ b/OsmAnd/src/net/osmand/plus/AppInitializer.java\n\n@@ -859,7 +859,6 @@ public class AppInitializer implements IProgress {\n \t\t\tOsmandSettings osmandSettings = app.getSettings();\n \t\t\tif (osmandSettings.NATIVE_RENDERING_FAILED.get()) {\n \t\t\t\tosmandSettings.SAFE_MODE.set(true);\n-\t\t\t\tosmandSettings.PT_SAFE_MODE.set(true);\n \t\t\t\tosmandSettings.NATIVE_RENDERING_FAILED.set(false);\n \t\t\t\twarnings.add(app.getString(R.string.native_library_not_supported));\n \t\t\t} else {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjU2NzMzNw==", "url": "https://github.com/osmandapp/OsmAnd/pull/8851#discussion_r416567337", "bodyText": "???", "author": "vshcherb", "createdAt": "2020-04-28T12:21:56Z", "path": "OsmAnd/src/net/osmand/plus/development/SettingsDevelopmentActivity.java", "diffHunk": "@@ -42,12 +42,16 @@ public void onCreate(Bundle savedInstanceState) {\n \n \t\tif (!Version.isBlackberry(app)) {\n \t\t\tCheckBoxPreference nativeCheckbox = createCheckBoxPreference(settings.SAFE_MODE, R.string.safe_mode, R.string.safe_mode_description);\n+\t\t\tCheckBoxPreference nativePTCheckbox = createCheckBoxPreference(settings.PT_SAFE_MODE, R.string.pt_native_development, R.string.pt_native_development_descr);\n \t\t\t// disable the checkbox if the library cannot be used\n \t\t\tif ((NativeOsmandLibrary.isLoaded() && !NativeOsmandLibrary.isSupported()) || settings.NATIVE_RENDERING_FAILED.get()) {\n \t\t\t\tnativeCheckbox.setEnabled(false);\n \t\t\t\tnativeCheckbox.setChecked(true);\n+\t\t\t\tnativePTCheckbox.setEnabled(false);", "originalCommit": "fdb94ad33acc5dfb16b9dc5f5a974071460c9c90", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "dd9e9ec9f21066c63a7d06dfb4c9a9745478d700", "chunk": "diff --git a/OsmAnd/src/net/osmand/plus/development/SettingsDevelopmentActivity.java b/OsmAnd/src/net/osmand/plus/development/SettingsDevelopmentActivity.java\nindex 0a8678700d..83095b45b6 100644\n--- a/OsmAnd/src/net/osmand/plus/development/SettingsDevelopmentActivity.java\n+++ b/OsmAnd/src/net/osmand/plus/development/SettingsDevelopmentActivity.java\n\n@@ -42,13 +42,11 @@ public class SettingsDevelopmentActivity extends SettingsBaseActivity {\n \n \t\tif (!Version.isBlackberry(app)) {\n \t\t\tCheckBoxPreference nativeCheckbox = createCheckBoxPreference(settings.SAFE_MODE, R.string.safe_mode, R.string.safe_mode_description);\n-\t\t\tCheckBoxPreference nativePTCheckbox = createCheckBoxPreference(settings.PT_SAFE_MODE, R.string.pt_native_development, R.string.pt_native_development_descr);\n+\t\t\tCheckBoxPreference nativePTCheckbox = createCheckBoxPreference(settings.PT_SAFE_MODE, \"Native PT routing development\", \"Switch to Java (safe) Public Transport routing calculation\");\n \t\t\t// disable the checkbox if the library cannot be used\n \t\t\tif ((NativeOsmandLibrary.isLoaded() && !NativeOsmandLibrary.isSupported()) || settings.NATIVE_RENDERING_FAILED.get()) {\n \t\t\t\tnativeCheckbox.setEnabled(false);\n \t\t\t\tnativeCheckbox.setChecked(true);\n-\t\t\t\tnativePTCheckbox.setEnabled(false);\n-\t\t\t\tnativePTCheckbox.setChecked(true);\n \t\t\t}\n \t\t\tcat.addPreference(nativeCheckbox);\n \t\t\tcat.addPreference(nativePTCheckbox);\n"}}, {"oid": "dd9e9ec9f21066c63a7d06dfb4c9a9745478d700", "url": "https://github.com/osmandapp/OsmAnd/commit/dd9e9ec9f21066c63a7d06dfb4c9a9745478d700", "message": "add native pt setting to dev plugin\nfix no result crash", "committedDate": "2020-04-28T13:26:08Z", "type": "commit"}, {"oid": "4395e0f6e64c0d9ecc0cdf67cbbf67864b4d9a10", "url": "https://github.com/osmandapp/OsmAnd/commit/4395e0f6e64c0d9ecc0cdf67cbbf67864b4d9a10", "message": "Update AppInitializer.java", "committedDate": "2020-04-28T13:29:15Z", "type": "commit"}]}