{"pr_number": 677, "pr_title": "CXF-8296: Custom Boolean ParamConverter wrong behaviour", "pr_createdAt": "2020-06-08T02:44:23Z", "pr_url": "https://github.com/apache/cxf/pull/677", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY5NDI2Ng==", "url": "https://github.com/apache/cxf/pull/677#discussion_r436694266", "bodyText": "Minor suggestion - you could replace the if-check and this line with return Optional.ofNullable(pm);", "author": "andymc12", "createdAt": "2020-06-08T13:21:11Z", "path": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java", "diffHunk": "@@ -539,21 +547,32 @@ private static RuntimeException createParamConversionException(ParameterType pTy\n         }\n         return ExceptionUtils.toBadRequestException(ex, null);\n     }\n-    public static <T> T createFromParameterHandler(String value,\n-                                                    Class<T> pClass,\n-                                                    Type genericType,\n-                                                    Annotation[] anns,\n-                                                    Message message) {\n-        T result = null;\n+    \n+    public static <T> Optional<ParamConverter<T>> getParamConverter(Class<T> pClass,\n+            Type genericType, Annotation[] anns, Message message) {\n+        \n         if (message != null) {\n             ServerProviderFactory pf = ServerProviderFactory.getInstance(message);\n             ParamConverter<T> pm = pf.createParameterHandler(pClass, genericType, anns, message);\n             if (pm != null) {\n-                result = pm.fromString(value);\n+                return Optional.of(pm);\n             }\n         }\n-        return result;\n+        \n+        return Optional.empty();", "originalCommit": "c2fa6f36bf0a9db1b0c178a221e4398086143f5d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA3MjQ5Ng==", "url": "https://github.com/apache/cxf/pull/677#discussion_r437072496", "bodyText": "Surely, less code, thanks @andymc12!", "author": "reta", "createdAt": "2020-06-09T00:31:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY5NDI2Ng=="}], "type": "inlineReview", "revised_code": {"commit": "3b2b194ef61001f5fd8c0c3feb0f0da671a408d4", "chunk": "diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java\nindex 6f1a274cc3..7e73caeb39 100644\n--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java\n+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java\n\n@@ -554,9 +554,7 @@ public final class InjectionUtils {\n         if (message != null) {\n             ServerProviderFactory pf = ServerProviderFactory.getInstance(message);\n             ParamConverter<T> pm = pf.createParameterHandler(pClass, genericType, anns, message);\n-            if (pm != null) {\n-                return Optional.of(pm);\n-            }\n+            return Optional.ofNullable(pm);\n         }\n         \n         return Optional.empty();\n"}}, {"oid": "3b2b194ef61001f5fd8c0c3feb0f0da671a408d4", "url": "https://github.com/apache/cxf/commit/3b2b194ef61001f5fd8c0c3feb0f0da671a408d4", "message": "CXF-8296: Custom Boolean ParamConverter wrong behaviour", "committedDate": "2020-06-09T00:42:38Z", "type": "commit"}, {"oid": "3b2b194ef61001f5fd8c0c3feb0f0da671a408d4", "url": "https://github.com/apache/cxf/commit/3b2b194ef61001f5fd8c0c3feb0f0da671a408d4", "message": "CXF-8296: Custom Boolean ParamConverter wrong behaviour", "committedDate": "2020-06-09T00:42:38Z", "type": "forcePushed"}]}