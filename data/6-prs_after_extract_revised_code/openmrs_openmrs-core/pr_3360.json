{"pr_number": 3360, "pr_title": "TRUNK-5816: Migrate api package tests to Junit5 4", "pr_createdAt": "2020-07-14T23:19:47Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3360", "timeline": [{"oid": "5e4dce59f2f8c99d4da50d973360263c9c73e02d", "url": "https://github.com/openmrs/openmrs-core/commit/5e4dce59f2f8c99d4da50d973360263c9c73e02d", "message": "TRUNK-5816: Migrate api package tests to Junit5", "committedDate": "2020-07-15T07:03:31Z", "type": "forcePushed"}, {"oid": "f9f817d4a1ebe3de33fdbb58f38999269a46f407", "url": "https://github.com/openmrs/openmrs-core/commit/f9f817d4a1ebe3de33fdbb58f38999269a46f407", "message": "TRUNK-5816: Migrate api package tests to Junit5", "committedDate": "2020-07-15T07:12:31Z", "type": "forcePushed"}, {"oid": "a86e3246359b44a78a1754fa8c2beecb3221f41d", "url": "https://github.com/openmrs/openmrs-core/commit/a86e3246359b44a78a1754fa8c2beecb3221f41d", "message": "TRUNK-5816: Migrate api package tests to Junit5", "committedDate": "2020-07-15T16:03:31Z", "type": "forcePushed"}, {"oid": "53a415746f2362a5951a7e122952d366a09c3051", "url": "https://github.com/openmrs/openmrs-core/commit/53a415746f2362a5951a7e122952d366a09c3051", "message": "TRUNK-5816: Migrate api package tests to Junit 5", "committedDate": "2020-07-15T16:51:00Z", "type": "commit"}, {"oid": "53a415746f2362a5951a7e122952d366a09c3051", "url": "https://github.com/openmrs/openmrs-core/commit/53a415746f2362a5951a7e122952d366a09c3051", "message": "TRUNK-5816: Migrate api package tests to Junit 5", "committedDate": "2020-07-15T16:51:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIxMzg5Nw==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455213897", "bodyText": "You seem to be going back to JUnit 4. Was that intentional?", "author": "teleivo", "createdAt": "2020-07-15T17:26:44Z", "path": "api/src/test/java/org/openmrs/api/UserServiceTest.java", "diffHunk": "@@ -11,13 +11,12 @@\n \n import static org.hamcrest.CoreMatchers.is;\n import static org.hamcrest.MatcherAssert.assertThat;\n-import static org.junit.jupiter.api.Assertions.assertEquals;\n-import static org.junit.jupiter.api.Assertions.assertFalse;\n-import static org.junit.jupiter.api.Assertions.assertNotNull;\n-import static org.junit.jupiter.api.Assertions.assertNotSame;\n-import static org.junit.jupiter.api.Assertions.assertNull;\n-import static org.junit.jupiter.api.Assertions.assertThrows;\n-import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertThrows;\n+import static org.junit.Assert.assertTrue;", "originalCommit": "53a415746f2362a5951a7e122952d366a09c3051", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIzOTIwOQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455239209", "bodyText": "yes is to correct this Error UserServiceTest.getAllUsers_shouldNotContainsAnyDuplicateUsers:680 expected: <11> but was: <12>\nfor now", "author": "achilep", "createdAt": "2020-07-15T18:00:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIxMzg5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI0MjIyMg==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455242222", "bodyText": "Do you mean that we get this error on JUnit 5 but not JUnit 4?", "author": "teleivo", "createdAt": "2020-07-15T18:05:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIxMzg5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1Nzg5Nw==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455257897", "bodyText": "please remove this file from the PR. tests for it on JUnit 5 are green on Bamboo and the Travis CI build on master https://travis-ci.org/github/openmrs/openmrs-core/builds/708421471", "author": "teleivo", "createdAt": "2020-07-15T18:30:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIxMzg5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1OTA4NA==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455259084", "bodyText": "also see my suggestions you added some lines that have to be removed.", "author": "teleivo", "createdAt": "2020-07-15T18:32:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIxMzg5Nw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NDkwMg==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455254902", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \t\t\tassertTrue(order.getAction() == Action.DISCONTINUE);", "author": "teleivo", "createdAt": "2020-07-15T18:25:27Z", "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -2268,6 +2238,9 @@ public void getOrders_shouldreturnDiscontinuedOrders() {\n \t\tassertEquals(2, orders.size());\n \t\tfor (Order order : orders) {\n \t\t\tassertEquals(DISCONTINUE, order.getAction());\n+\n+\t\t\tassertTrue(order.getAction() == Action.DISCONTINUE);\n+", "originalCommit": "53a415746f2362a5951a7e122952d366a09c3051", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e67f20099b2b6ac3ead3f62758ba6f1f87693065", "chunk": "diff --git a/api/src/test/java/org/openmrs/api/OrderServiceTest.java b/api/src/test/java/org/openmrs/api/OrderServiceTest.java\nindex b86763c63..5c579ee1d 100644\n--- a/api/src/test/java/org/openmrs/api/OrderServiceTest.java\n+++ b/api/src/test/java/org/openmrs/api/OrderServiceTest.java\n\n@@ -2238,9 +2238,6 @@ public class OrderServiceTest extends BaseContextSensitiveTest {\n \t\tassertEquals(2, orders.size());\n \t\tfor (Order order : orders) {\n \t\t\tassertEquals(DISCONTINUE, order.getAction());\n-\n-\t\t\tassertTrue(order.getAction() == Action.DISCONTINUE);\n-\n \t\t}\n \t}\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NTE5Ng==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455255196", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \t\t\tassertTrue(order.getFulfillerStatus() == Order.FulfillerStatus.COMPLETED);", "author": "teleivo", "createdAt": "2020-07-15T18:25:48Z", "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -2215,7 +2181,10 @@ public void getOrders_shouldreturnOrdersWithFulfillerStatusCompleted() {\n \t\tList<Order> orders = orderService.getOrders(orderSearchCriteria);\n \t\tassertEquals(1, orders.size());\n \t\tfor (Order order : orders) {\n+\n \t\t\tassertEquals(COMPLETED, order.getFulfillerStatus());\n+\n+\t\t\tassertTrue(order.getFulfillerStatus() == Order.FulfillerStatus.COMPLETED);", "originalCommit": "53a415746f2362a5951a7e122952d366a09c3051", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0d18e8327a30dd0e161cbd5c9ffe215fddf5e022", "chunk": "diff --git a/api/src/test/java/org/openmrs/api/OrderServiceTest.java b/api/src/test/java/org/openmrs/api/OrderServiceTest.java\nindex b86763c63..58ab6cba5 100644\n--- a/api/src/test/java/org/openmrs/api/OrderServiceTest.java\n+++ b/api/src/test/java/org/openmrs/api/OrderServiceTest.java\n\n@@ -2181,7 +2181,6 @@ public class OrderServiceTest extends BaseContextSensitiveTest {\n \t\tList<Order> orders = orderService.getOrders(orderSearchCriteria);\n \t\tassertEquals(1, orders.size());\n \t\tfor (Order order : orders) {\n-\n \t\t\tassertEquals(COMPLETED, order.getFulfillerStatus());\n \n \t\t\tassertTrue(order.getFulfillerStatus() == Order.FulfillerStatus.COMPLETED);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NTI1NQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3360#discussion_r455255255", "bodyText": "Suggested change", "author": "teleivo", "createdAt": "2020-07-15T18:25:54Z", "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -2215,7 +2181,10 @@ public void getOrders_shouldreturnOrdersWithFulfillerStatusCompleted() {\n \t\tList<Order> orders = orderService.getOrders(orderSearchCriteria);\n \t\tassertEquals(1, orders.size());\n \t\tfor (Order order : orders) {\n+", "originalCommit": "53a415746f2362a5951a7e122952d366a09c3051", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0d18e8327a30dd0e161cbd5c9ffe215fddf5e022", "chunk": "diff --git a/api/src/test/java/org/openmrs/api/OrderServiceTest.java b/api/src/test/java/org/openmrs/api/OrderServiceTest.java\nindex b86763c63..58ab6cba5 100644\n--- a/api/src/test/java/org/openmrs/api/OrderServiceTest.java\n+++ b/api/src/test/java/org/openmrs/api/OrderServiceTest.java\n\n@@ -2181,7 +2181,6 @@ public class OrderServiceTest extends BaseContextSensitiveTest {\n \t\tList<Order> orders = orderService.getOrders(orderSearchCriteria);\n \t\tassertEquals(1, orders.size());\n \t\tfor (Order order : orders) {\n-\n \t\t\tassertEquals(COMPLETED, order.getFulfillerStatus());\n \n \t\t\tassertTrue(order.getFulfillerStatus() == Order.FulfillerStatus.COMPLETED);\n"}}, {"oid": "e67f20099b2b6ac3ead3f62758ba6f1f87693065", "url": "https://github.com/openmrs/openmrs-core/commit/e67f20099b2b6ac3ead3f62758ba6f1f87693065", "message": "Update api/src/test/java/org/openmrs/api/OrderServiceTest.java", "committedDate": "2020-07-15T18:34:32Z", "type": "commit"}, {"oid": "0d18e8327a30dd0e161cbd5c9ffe215fddf5e022", "url": "https://github.com/openmrs/openmrs-core/commit/0d18e8327a30dd0e161cbd5c9ffe215fddf5e022", "message": "Update api/src/test/java/org/openmrs/api/OrderServiceTest.java", "committedDate": "2020-07-15T18:34:40Z", "type": "commit"}, {"oid": "326d720326ad08462965fbe5193d374ee19f5b33", "url": "https://github.com/openmrs/openmrs-core/commit/326d720326ad08462965fbe5193d374ee19f5b33", "message": "Update api/src/test/java/org/openmrs/api/OrderServiceTest.java", "committedDate": "2020-07-15T18:34:54Z", "type": "commit"}]}