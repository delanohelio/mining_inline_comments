{"pr_number": 3599, "pr_title": "TRUNK-5115-new-2:Replace use of conditional logging with slf4j parame\u2026", "pr_createdAt": "2020-10-12T23:01:51Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3599", "timeline": [{"oid": "67fe5293d3094a142516a8be44db620e8ec2c793", "url": "https://github.com/openmrs/openmrs-core/commit/67fe5293d3094a142516a8be44db620e8ec2c793", "message": "TRUNK-5115-new-2:Replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-10-12T22:48:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA5NjgyOQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3599#discussion_r504096829", "bodyText": "Here I can see that version 1.6.x has problems when there are more than two arguments. Have you checked if the currently used version still has this problem?", "author": "sacull", "createdAt": "2020-10-13T16:34:21Z", "path": "api/src/main/java/org/openmrs/module/ModuleClassLoader.java", "diffHunk": "@@ -822,10 +812,7 @@ protected File cacheLibrary(final URL libUrl, final String libname) {\n \t\t\t// save a link to the cached file\n \t\t\tlibraryCache.put(libUri, result);\n \t\t\t\n-\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\tlog.debug(\"library \" + libname + \" successfully cached from URL \" + libUrl + \" and saved to local file \"\n-\t\t\t\t        + result);\n-\t\t\t}\n+\t\t\tlog.debug(\"library {} successfully cached from URL {} and saved to local file {}\", libname, libUrl, result);", "originalCommit": "67fe5293d3094a142516a8be44db620e8ec2c793", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1NTkyMQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3599#discussion_r504955921", "bodyText": "Are you passing in 3 or 4 arguments?", "author": "dkayiwa", "createdAt": "2020-10-14T20:34:31Z", "path": "api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java", "diffHunk": "@@ -590,26 +585,19 @@ protected static void nullInstance(Object instance) {\n \t\t\t\t\tif (null != value) {\n \t\t\t\t\t\tClass<?> valueClass = value.getClass();\n \t\t\t\t\t\tif (!loadedByThisOrChild(valueClass)) {\n-\t\t\t\t\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\t\t\t\t\tlog.debug(\"Not setting field \" + field.getName() + \" to null in object of class \"\n-\t\t\t\t\t\t\t\t\t\t+ instance.getClass().getName() + \" because the referenced object was of type \"\n-\t\t\t\t\t\t\t\t\t\t+ valueClass.getName() + \" which was not loaded by this WebappClassLoader.\");\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tlog.debug(\n+\t\t\t\t\t\t\t    \"Not setting field {} to null in object of class {} because the referenced object was of type {} which was not loaded by this WebappClassLoader. {}\",", "originalCommit": "67fe5293d3094a142516a8be44db620e8ec2c793", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjM3MDM1MQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3599#discussion_r506370351", "bodyText": "I have made the modifications on the ticket.", "author": "gracebish", "createdAt": "2020-10-16T12:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1NTkyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "34b293223e8c635cae47b4bba57a33c89fef240a", "chunk": "diff --git a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\nindex ea1af2a64..5d25b3c10 100644\n--- a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n+++ b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n\n@@ -586,7 +586,7 @@ public class OpenmrsClassLoader extends URLClassLoader {\n \t\t\t\t\t\tClass<?> valueClass = value.getClass();\n \t\t\t\t\t\tif (!loadedByThisOrChild(valueClass)) {\n \t\t\t\t\t\t\tlog.debug(\n-\t\t\t\t\t\t\t    \"Not setting field {} to null in object of class {} because the referenced object was of type {} which was not loaded by this WebappClassLoader. {}\",\n+\t\t\t\t\t\t\t    \"Not setting field {} to null in object of class {} because the referenced object was of type {} which was not loaded by this WebappClassLoader.\",\n \t\t\t\t\t\t\t    field.getName(), instance.getClass().getName(), valueClass.getName());\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tfield.set(instance, null);\n"}}, {"oid": "34b293223e8c635cae47b4bba57a33c89fef240a", "url": "https://github.com/openmrs/openmrs-core/commit/34b293223e8c635cae47b4bba57a33c89fef240a", "message": "TRUNK-5115-new-2:Modifying a logging statement", "committedDate": "2020-10-16T12:35:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI0Njk3OA==", "url": "https://github.com/openmrs/openmrs-core/pull/3599#discussion_r510246978", "bodyText": "How many messages are you replacing in the above line?", "author": "dkayiwa", "createdAt": "2020-10-22T15:18:05Z", "path": "api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java", "diffHunk": "@@ -590,26 +585,19 @@ protected static void nullInstance(Object instance) {\n \t\t\t\t\tif (null != value) {\n \t\t\t\t\t\tClass<?> valueClass = value.getClass();\n \t\t\t\t\t\tif (!loadedByThisOrChild(valueClass)) {\n-\t\t\t\t\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\t\t\t\t\tlog.debug(\"Not setting field \" + field.getName() + \" to null in object of class \"\n-\t\t\t\t\t\t\t\t\t\t+ instance.getClass().getName() + \" because the referenced object was of type \"\n-\t\t\t\t\t\t\t\t\t\t+ valueClass.getName() + \" which was not loaded by this WebappClassLoader.\");\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tlog.debug(\n+\t\t\t\t\t\t\t    \"Not setting field {} to null in object of class {} because the referenced object was of type {} which was not loaded by this WebappClassLoader.\",\n+\t\t\t\t\t\t\t    field.getName(), instance.getClass().getName(), valueClass.getName());\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tfield.set(instance, null);\n-\t\t\t\t\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\t\t\t\t\tlog.debug(\"Set field \" + field.getName() + \" to null in class \"\n-\t\t\t\t\t\t\t\t\t\t+ instance.getClass().getName());\n-\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tlog.debug(\"Set field {} to null in class\", field.getName(), instance.getClass().getName());", "originalCommit": "34b293223e8c635cae47b4bba57a33c89fef240a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "323897df1ad5322b1f9748c6043653fbd37a393a", "chunk": "diff --git a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\nindex 5d25b3c10..90075ebb9 100644\n--- a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n+++ b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n\n@@ -590,7 +590,7 @@ public class OpenmrsClassLoader extends URLClassLoader {\n \t\t\t\t\t\t\t    field.getName(), instance.getClass().getName(), valueClass.getName());\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tfield.set(instance, null);\n-\t\t\t\t\t\t\tlog.debug(\"Set field {} to null in class\", field.getName(), instance.getClass().getName());\n+\t\t\t\t\t\t\tlog.debug(\"Set field {} to null in class {}\", field.getName(), instance.getClass().getName());\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t} \n"}}, {"oid": "323897df1ad5322b1f9748c6043653fbd37a393a", "url": "https://github.com/openmrs/openmrs-core/commit/323897df1ad5322b1f9748c6043653fbd37a393a", "message": "TRUNK-5115-new-2:Fixing a bug in a conditional statement", "committedDate": "2020-10-23T10:50:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDkzOTQzMA==", "url": "https://github.com/openmrs/openmrs-core/pull/3599#discussion_r510939430", "bodyText": "Was the comma before or after the field name?", "author": "dkayiwa", "createdAt": "2020-10-23T14:51:36Z", "path": "api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java", "diffHunk": "@@ -590,7 +590,7 @@ protected static void nullInstance(Object instance) {\n \t\t\t\t\t\t\t    field.getName(), instance.getClass().getName(), valueClass.getName());\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tfield.set(instance, null);\n-\t\t\t\t\t\t\tlog.debug(\"Set field {} to null in class\", field.getName(), instance.getClass().getName());\n+\t\t\t\t\t\t\tlog.debug(\"Set field {} to null in class {}\", field.getName(), instance.getClass().getName());", "originalCommit": "323897df1ad5322b1f9748c6043653fbd37a393a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTU2NTA2NA==", "url": "https://github.com/openmrs/openmrs-core/pull/3599#discussion_r511565064", "bodyText": "The comma was after field.getName()", "author": "gracebish", "createdAt": "2020-10-25T08:31:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDkzOTQzMA=="}], "type": "inlineReview", "revised_code": null}]}