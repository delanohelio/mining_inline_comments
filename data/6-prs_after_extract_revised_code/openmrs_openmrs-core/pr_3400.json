{"pr_number": 3400, "pr_title": "TRUNK-5115-new: Replace use of conditional logging with sfl4j paramet\u2026", "pr_createdAt": "2020-07-27T21:19:39Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3400", "timeline": [{"oid": "c34c4d80c69e8d594a819edff7924de069ec342e", "url": "https://github.com/openmrs/openmrs-core/commit/c34c4d80c69e8d594a819edff7924de069ec342e", "message": "TRUNK-5115-new: Replace use of conditional logging with sfl4j parameterized messages", "committedDate": "2020-07-27T20:57:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3Mjk5MA==", "url": "https://github.com/openmrs/openmrs-core/pull/3400#discussion_r461372990", "bodyText": "please remove the indentation since you have removed an if block we do not need the extra tab", "author": "teleivo", "createdAt": "2020-07-28T07:25:37Z", "path": "api/src/main/java/org/openmrs/api/context/ServiceContext.java", "diffHunk": "@@ -143,10 +143,10 @@ public static ServiceContext getInstance() {\n \t */\n \tpublic static void destroyInstance() {\n \t\tif (ServiceContextHolder.instance != null && ServiceContextHolder.instance.services != null) {\n-\t\t\tif (log.isDebugEnabled()) {\n+\t\t\t\t", "originalCommit": "c34c4d80c69e8d594a819edff7924de069ec342e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f8838e8b71202b7d673d4c6b240548694a897ef1", "chunk": "diff --git a/api/src/main/java/org/openmrs/api/context/ServiceContext.java b/api/src/main/java/org/openmrs/api/context/ServiceContext.java\nindex 98cf48bf1..4cb725e28 100644\n--- a/api/src/main/java/org/openmrs/api/context/ServiceContext.java\n+++ b/api/src/main/java/org/openmrs/api/context/ServiceContext.java\n\n@@ -143,10 +143,8 @@ public class ServiceContext implements ApplicationContextAware {\n \t */\n \tpublic static void destroyInstance() {\n \t\tif (ServiceContextHolder.instance != null && ServiceContextHolder.instance.services != null) {\n-\t\t\t\t\n \t\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n \t\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n-\t\t\t\t\t\n \t\t\t}\n \t\t\t\n \t\t\t// Remove advice and advisors that this service added\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3MzY5OQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3400#discussion_r461373699", "bodyText": "please remove the indentation", "author": "teleivo", "createdAt": "2020-07-28T07:26:53Z", "path": "api/src/main/java/org/openmrs/scheduler/tasks/AutoCloseVisitsTask.java", "diffHunk": "@@ -33,10 +33,10 @@\n \t@Override\n \tpublic void execute() {\n \t\tif (!isExecuting) {\n-\t\t\tif (log.isDebugEnabled()) {\n+\t\t\t\t", "originalCommit": "c34c4d80c69e8d594a819edff7924de069ec342e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f8838e8b71202b7d673d4c6b240548694a897ef1", "chunk": "diff --git a/api/src/main/java/org/openmrs/scheduler/tasks/AutoCloseVisitsTask.java b/api/src/main/java/org/openmrs/scheduler/tasks/AutoCloseVisitsTask.java\nindex d37867151..0c21c5438 100644\n--- a/api/src/main/java/org/openmrs/scheduler/tasks/AutoCloseVisitsTask.java\n+++ b/api/src/main/java/org/openmrs/scheduler/tasks/AutoCloseVisitsTask.java\n\n@@ -33,9 +33,7 @@ public class AutoCloseVisitsTask extends AbstractTask {\n \t@Override\n \tpublic void execute() {\n \t\tif (!isExecuting) {\n-\t\t\t\t\n-\t\t\t\tlog.debug(\"Starting Auto Close Visits Task...\");\n-\t\t\t\n+\t\t\tlog.debug(\"Starting Auto Close Visits Task...\");\n \n \t\t\tstartExecuting();\n \t\t\ttry {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3NDY0Mg==", "url": "https://github.com/openmrs/openmrs-core/pull/3400#discussion_r461374642", "bodyText": "please remove the indentation and the extra newlines", "author": "teleivo", "createdAt": "2020-07-28T07:28:37Z", "path": "api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java", "diffHunk": "@@ -84,10 +84,10 @@ public OpenmrsClassLoader(ClassLoader parent) {\n \t\t\n \t\tOpenmrsClassLoaderHolder.INSTANCE = this;\n \t\t\n-\t\tif (log.isDebugEnabled()) {\n+", "originalCommit": "c34c4d80c69e8d594a819edff7924de069ec342e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f8838e8b71202b7d673d4c6b240548694a897ef1", "chunk": "diff --git a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\nindex 02bba6b6f..4a2140fa4 100644\n--- a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n+++ b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n\n@@ -84,10 +84,8 @@ public class OpenmrsClassLoader extends URLClassLoader {\n \t\t\n \t\tOpenmrsClassLoaderHolder.INSTANCE = this;\n \t\t\n-\n-\t\t\tlog.debug(\"Creating new OpenmrsClassLoader instance with parent: {}\", parent);\n+\t\tlog.debug(\"Creating new OpenmrsClassLoader instance with parent: {}\", parent);\n \t\t\n-\n \t\t//disable caching so the jars aren't locked\n \t\t//if performance is effected, this can be disabled in favor of\n \t\t//copying all opened jars to a temp location\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3NTA3Mw==", "url": "https://github.com/openmrs/openmrs-core/pull/3400#discussion_r461375073", "bodyText": "Suggested change", "author": "teleivo", "createdAt": "2020-07-28T07:29:27Z", "path": "api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java", "diffHunk": "@@ -542,9 +542,9 @@ protected static void clearReferences() {\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\tfield.set(null, null);\n-\t\t\t\t\t\t\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\t\t\t\t\t\t\tlog.debug(\"Set field \" + field.getName() + \" to null in class \" + clazz.getName());\n-\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t", "originalCommit": "c34c4d80c69e8d594a819edff7924de069ec342e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f8838e8b71202b7d673d4c6b240548694a897ef1", "chunk": "diff --git a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\nindex 02bba6b6f..4a2140fa4 100644\n--- a/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n+++ b/api/src/main/java/org/openmrs/util/OpenmrsClassLoader.java\n\n@@ -542,9 +540,7 @@ public class OpenmrsClassLoader extends URLClassLoader {\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t\tfield.set(null, null);\n-\t\t\t\t\t\t\t\t\t\n \t\t\t\t\t\t\t\t\tlog.debug(\"Set field {} to null in class {}\", field.getName(), clazz.getName());\n-\t\t\t\t\t\t\t\t\t\n \t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tcatch (Exception t) {\n"}}, {"oid": "f8838e8b71202b7d673d4c6b240548694a897ef1", "url": "https://github.com/openmrs/openmrs-core/commit/f8838e8b71202b7d673d4c6b240548694a897ef1", "message": "TRUNK-5115-new: Replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-07-28T08:11:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUyMDUyOA==", "url": "https://github.com/openmrs/openmrs-core/pull/3400#discussion_r461520528", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n          \n          \n            \n            \t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {", "author": "teleivo", "createdAt": "2020-07-28T11:50:56Z", "path": "api/src/main/java/org/openmrs/api/context/ServiceContext.java", "diffHunk": "@@ -143,10 +143,8 @@ public static ServiceContext getInstance() {\n \t */\n \tpublic static void destroyInstance() {\n \t\tif (ServiceContextHolder.instance != null && ServiceContextHolder.instance.services != null) {\n-\t\t\tif (log.isDebugEnabled()) {\n \t\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {", "originalCommit": "f8838e8b71202b7d673d4c6b240548694a897ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bcab74d7e2efd6651ee3e5f869af24c62d9115a0", "chunk": "diff --git a/api/src/main/java/org/openmrs/api/context/ServiceContext.java b/api/src/main/java/org/openmrs/api/context/ServiceContext.java\nindex 4cb725e28..441dce342 100644\n--- a/api/src/main/java/org/openmrs/api/context/ServiceContext.java\n+++ b/api/src/main/java/org/openmrs/api/context/ServiceContext.java\n\n@@ -143,8 +143,8 @@ public class ServiceContext implements ApplicationContextAware {\n \t */\n \tpublic static void destroyInstance() {\n \t\tif (ServiceContextHolder.instance != null && ServiceContextHolder.instance.services != null) {\n-\t\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n-\t\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n+\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n+\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n \t\t\t}\n \t\t\t\n \t\t\t// Remove advice and advisors that this service added\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUyMjAyNg==", "url": "https://github.com/openmrs/openmrs-core/pull/3400#discussion_r461522026", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n          \n          \n            \n            \t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n          \n      \n    \n    \n  \n\nthe log.debug is inside the for loop, so we need to make sure the indentation is right. otherwise its hard to read. so it should stay as\nfor () {\n    log.debug()\n}\nplease use tabs (writing this on my phone where I don't know how to insert tabs :)", "author": "teleivo", "createdAt": "2020-07-28T11:54:14Z", "path": "api/src/main/java/org/openmrs/api/context/ServiceContext.java", "diffHunk": "@@ -143,10 +143,8 @@ public static ServiceContext getInstance() {\n \t */\n \tpublic static void destroyInstance() {\n \t\tif (ServiceContextHolder.instance != null && ServiceContextHolder.instance.services != null) {\n-\t\t\tif (log.isDebugEnabled()) {\n \t\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n-\t\t\t\t\tlog.debug(\"Service - \" + entry.getKey().getName() + \":\" + entry.getValue());\n-\t\t\t\t}\n+\t\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());", "originalCommit": "f8838e8b71202b7d673d4c6b240548694a897ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bcab74d7e2efd6651ee3e5f869af24c62d9115a0", "chunk": "diff --git a/api/src/main/java/org/openmrs/api/context/ServiceContext.java b/api/src/main/java/org/openmrs/api/context/ServiceContext.java\nindex 4cb725e28..441dce342 100644\n--- a/api/src/main/java/org/openmrs/api/context/ServiceContext.java\n+++ b/api/src/main/java/org/openmrs/api/context/ServiceContext.java\n\n@@ -143,8 +143,8 @@ public class ServiceContext implements ApplicationContextAware {\n \t */\n \tpublic static void destroyInstance() {\n \t\tif (ServiceContextHolder.instance != null && ServiceContextHolder.instance.services != null) {\n-\t\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n-\t\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n+\t\t\tfor (Map.Entry<Class, Object> entry : ServiceContextHolder.instance.services.entrySet()) {\n+\t\t\t\tlog.debug(\"Service - {} : {}\", entry.getKey().getName(), entry.getValue());\n \t\t\t}\n \t\t\t\n \t\t\t// Remove advice and advisors that this service added\n"}}, {"oid": "bcab74d7e2efd6651ee3e5f869af24c62d9115a0", "url": "https://github.com/openmrs/openmrs-core/commit/bcab74d7e2efd6651ee3e5f869af24c62d9115a0", "message": "TRUNK-5115-new: Replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-07-28T14:39:50Z", "type": "commit"}]}