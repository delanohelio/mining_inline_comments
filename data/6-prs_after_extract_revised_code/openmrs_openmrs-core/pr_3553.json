{"pr_number": 3553, "pr_title": "TRUNK-5898:Add suppose for JSON MIME Type", "pr_createdAt": "2020-09-01T13:45:45Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3553", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIyOTY5Nw==", "url": "https://github.com/openmrs/openmrs-core/pull/3553#discussion_r481229697", "bodyText": "Let's actually undo this change as well, since it shouldn't be necessary with the change to web.xml.", "author": "ibacher", "createdAt": "2020-09-01T15:26:18Z", "path": "web/src/main/java/org/openmrs/module/web/ModuleResourcesServlet.java", "diffHunk": "@@ -61,7 +61,7 @@ protected void doGet(HttpServletRequest request, HttpServletResponse response) t\n \t\t\n \t\tresponse.setDateHeader(\"Last-Modified\", f.lastModified());\n \t\tresponse.setContentLength(Long.valueOf(f.length()).intValue());\n-\t\tString mimeType = getServletContext().getMimeType(f.getName());\n+\t\tString mimeType = OpenmrsUtil.getFileMimeType(f);", "originalCommit": "ca72578e94a792487a41eac1e8286d3dcd96e08f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM1MTc0MQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3553#discussion_r481351741", "bodyText": "@ibacher  I have fixed it. Thanks so much.", "author": "jwnasambu", "createdAt": "2020-09-01T18:38:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIyOTY5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "f4e212e508d245d2cbaf13a65110cdfe59f93868", "chunk": "diff --git a/web/src/main/java/org/openmrs/module/web/ModuleResourcesServlet.java b/web/src/main/java/org/openmrs/module/web/ModuleResourcesServlet.java\nindex 347193ec0..860d13245 100644\n--- a/web/src/main/java/org/openmrs/module/web/ModuleResourcesServlet.java\n+++ b/web/src/main/java/org/openmrs/module/web/ModuleResourcesServlet.java\n\n@@ -61,7 +61,7 @@ public class ModuleResourcesServlet extends HttpServlet {\n \t\t\n \t\tresponse.setDateHeader(\"Last-Modified\", f.lastModified());\n \t\tresponse.setContentLength(Long.valueOf(f.length()).intValue());\n-\t\tString mimeType = OpenmrsUtil.getFileMimeType(f);\n+\t\tString mimeType = getServletContext().getMimeType(f.getName());\n \t\tresponse.setContentType(mimeType);\n \t\t\n \t\tFileInputStream is = new FileInputStream(f);\n"}}, {"oid": "f4e212e508d245d2cbaf13a65110cdfe59f93868", "url": "https://github.com/openmrs/openmrs-core/commit/f4e212e508d245d2cbaf13a65110cdfe59f93868", "message": "TRUNK-5898:Add suppose for JSON MIME Type", "committedDate": "2020-09-01T18:32:43Z", "type": "commit"}]}