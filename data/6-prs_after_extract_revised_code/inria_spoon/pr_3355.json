{"pr_number": 3355, "pr_title": "fix: sort type references by position and qualified name (may be BREAKING)", "pr_createdAt": "2020-05-04T11:31:44Z", "pr_url": "https://github.com/INRIA/spoon/pull/3355", "timeline": [{"oid": "9733af39f63d1be71c2f47171adcd33dec76f461", "url": "https://github.com/INRIA/spoon/commit/9733af39f63d1be71c2f47171adcd33dec76f461", "message": "Add failing test case for retention of super interface order", "committedDate": "2020-05-04T08:00:24Z", "type": "commit"}, {"oid": "bebf1adaa7af4aaed4401aa72778dc4eac420f91", "url": "https://github.com/INRIA/spoon/commit/bebf1adaa7af4aaed4401aa72778dc4eac420f91", "message": "Attempt to solve unnecessary sorting by qualified name", "committedDate": "2020-05-04T11:20:51Z", "type": "commit"}, {"oid": "dc63326fc17a88309bb7f35914a76093d2928ae8", "url": "https://github.com/INRIA/spoon/commit/dc63326fc17a88309bb7f35914a76093d2928ae8", "message": "Fix indentation", "committedDate": "2020-05-04T11:37:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYyNzU0MA==", "url": "https://github.com/INRIA/spoon/pull/3355#discussion_r419627540", "bodyText": "Also note this change. Using a plain HashSet here causes set order to be lost again during cloning.", "author": "slarse", "createdAt": "2020-05-04T18:08:43Z", "path": "src/main/java/spoon/support/visitor/equals/CloneHelper.java", "diffHunk": "@@ -78,7 +78,7 @@\n \t\tif (elements == null || elements.isEmpty()) {\n \t\t\treturn EmptyClearableSet.instance();\n \t\t}\n-\t\tSet<T> others = new HashSet<>(elements.size());\n+\t\tSet<T> others = new LinkedHashSet<>(elements.size());", "originalCommit": "dc63326fc17a88309bb7f35914a76093d2928ae8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f9800a346f034fea600a65ef7d56f998455d328f", "chunk": "diff --git a/src/main/java/spoon/support/visitor/equals/CloneHelper.java b/src/main/java/spoon/support/visitor/equals/CloneHelper.java\nindex 92a62114..2e178e95 100644\n--- a/src/main/java/spoon/support/visitor/equals/CloneHelper.java\n+++ b/src/main/java/spoon/support/visitor/equals/CloneHelper.java\n\n@@ -78,7 +78,7 @@ public class CloneHelper {\n \t\tif (elements == null || elements.isEmpty()) {\n \t\t\treturn EmptyClearableSet.instance();\n \t\t}\n-\t\tSet<T> others = new LinkedHashSet<>(elements.size());\n+\t\tSet<T> others = new HashSet<>(elements.size());\n \t\tfor (T element : elements) {\n \t\t\taddClone(others, element);\n \t\t}\n"}}, {"oid": "dcecbf46808ed782634019d6997c8e61dffceba5", "url": "https://github.com/INRIA/spoon/commit/dcecbf46808ed782634019d6997c8e61dffceba5", "message": "Revert \"Fix indentation\"\n\nThis reverts commit dc63326fc17a88309bb7f35914a76093d2928ae8.", "committedDate": "2020-05-05T06:59:35Z", "type": "commit"}, {"oid": "f9800a346f034fea600a65ef7d56f998455d328f", "url": "https://github.com/INRIA/spoon/commit/f9800a346f034fea600a65ef7d56f998455d328f", "message": "Revert \"Attempt to solve unnecessary sorting by qualified name\"\n\nThis reverts commit bebf1adaa7af4aaed4401aa72778dc4eac420f91.", "committedDate": "2020-05-05T06:59:43Z", "type": "commit"}, {"oid": "3edb71afa97067122409124c38054831706fa3e5", "url": "https://github.com/INRIA/spoon/commit/3edb71afa97067122409124c38054831706fa3e5", "message": "Sort stream and iterator with CtLineElementComparator", "committedDate": "2020-05-05T07:19:44Z", "type": "commit"}, {"oid": "7477ea8056f100af534659687937053021f5a8bd", "url": "https://github.com/INRIA/spoon/commit/7477ea8056f100af534659687937053021f5a8bd", "message": "Fix shadow model test by unsetting source position of normal model elements", "committedDate": "2020-05-05T18:33:27Z", "type": "commit"}, {"oid": "e7e3bf59f815253cb9fbcd9be6899e7cb17965cc", "url": "https://github.com/INRIA/spoon/commit/e7e3bf59f815253cb9fbcd9be6899e7cb17965cc", "message": "Fix incorrect order of thrown types in comment tests", "committedDate": "2020-05-06T07:23:10Z", "type": "commit"}, {"oid": "72d443f5c5faa3a775a2398d4b2005109984e738", "url": "https://github.com/INRIA/spoon/commit/72d443f5c5faa3a775a2398d4b2005109984e738", "message": "Sort metamodel superconcepts before comparing", "committedDate": "2020-05-06T07:24:13Z", "type": "commit"}, {"oid": "ffe2127d2e6955c4a8426997eb84f13d18df0e5b", "url": "https://github.com/INRIA/spoon/commit/ffe2127d2e6955c4a8426997eb84f13d18df0e5b", "message": "Document new behavior of QualifiedNameBasedSortedSet", "committedDate": "2020-05-06T07:27:59Z", "type": "commit"}, {"oid": "eb15938b0a5f0f484ba9659a8dc69be97bd04ffa", "url": "https://github.com/INRIA/spoon/commit/eb15938b0a5f0f484ba9659a8dc69be97bd04ffa", "message": "Document iterator ordering with a test", "committedDate": "2020-05-06T09:13:04Z", "type": "commit"}]}