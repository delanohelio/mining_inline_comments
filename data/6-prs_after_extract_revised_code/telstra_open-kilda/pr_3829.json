{"pr_number": 3829, "pr_title": "ISL status transition visibility improvement", "pr_createdAt": "2020-11-05T17:30:09Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3829", "timeline": [{"oid": "c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65", "url": "https://github.com/telstra/open-kilda/commit/c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65", "message": "ISL status transition visibility improvement", "committedDate": "2020-11-05T20:16:58Z", "type": "commit"}, {"oid": "c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65", "url": "https://github.com/telstra/open-kilda/commit/c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65", "message": "ISL status transition visibility improvement", "committedDate": "2020-11-05T20:16:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzMTE1Ng==", "url": "https://github.com/telstra/open-kilda/pull/3829#discussion_r524331156", "bodyText": "Why do you need to add space here?", "author": "rozdy", "createdAt": "2020-11-16T14:59:38Z", "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/StatusAggregator.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.network.controller.isl;\n+\n+import org.openkilda.model.IslDownReason;\n+import org.openkilda.model.IslStatus;\n+\n+import lombok.Getter;\n+\n+import java.util.Optional;\n+\n+class StatusAggregator {\n+    private IslStatus effectiveStatus = null;\n+\n+    @Getter\n+    private IslDownReason downReason = null;\n+\n+    private String details = \"\";\n+    private boolean isFirstHit = true;\n+\n+    public void evaluate(DiscoveryMonitor<?> monitor) {\n+        Optional<IslStatus> status = monitor.evaluateStatus();\n+        String detailsEntry = monitor.getName() + \":\";\n+        if (status.isPresent()) {\n+            if (isFirstHit) {\n+                isFirstHit = false;\n+\n+                effectiveStatus = status.get();\n+                downReason = monitor.getDownReason();\n+                detailsEntry = \"*\" + detailsEntry;\n+            }\n+            detailsEntry += status.get();\n+        } else {\n+            detailsEntry += \"-\";\n+        }\n+\n+        updateDetails(detailsEntry);\n+    }\n+\n+    IslStatus getEffectiveStatus() {\n+        if (effectiveStatus == null) {\n+            return IslStatus.INACTIVE;\n+        }\n+        return effectiveStatus;\n+    }\n+\n+    String getDetails() {\n+        return String.join(\" \", details);", "originalCommit": "c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA2NzM1Ng==", "url": "https://github.com/telstra/open-kilda/pull/3829#discussion_r525067356", "bodyText": "Compare this two lines:\nISL 00:00:00:00:00:00:00:01_1 <===> 00:00:00:00:00:00:00:02_2 status evaluation details - moved:- port-down:- BFD:- round-trip:- *poll:ACTIVE\nISL 00:00:00:00:00:00:00:01_1 <===> 00:00:00:00:00:00:00:02_2 status evaluation details - moved:-port-down:-BFD:-round-trip:-*poll:ACTIVE\n\nOr you are asking why these spaces added exactly in this place? - It is the simplest way to add them - because of the nature of aggregator fill.", "author": "surabujin", "createdAt": "2020-11-17T11:01:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzMTE1Ng=="}], "type": "inlineReview", "revised_code": null}]}