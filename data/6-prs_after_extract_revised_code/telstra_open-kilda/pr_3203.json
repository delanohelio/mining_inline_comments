{"pr_number": 3203, "pr_title": "ARP Part 6: Added shared rule", "pr_createdAt": "2020-02-13T10:27:21Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3203", "timeline": [{"oid": "2f0073eaec50bd5c4f52b95f2d17dce38bce7d6a", "url": "https://github.com/telstra/open-kilda/commit/2f0073eaec50bd5c4f52b95f2d17dce38bce7d6a", "message": "ARP for v1 Flow CRUD", "committedDate": "2020-02-13T12:11:42Z", "type": "forcePushed"}, {"oid": "ff2bffa53c7780f8d591572e1966ea7b5a883712", "url": "https://github.com/telstra/open-kilda/commit/ff2bffa53c7780f8d591572e1966ea7b5a883712", "message": "ARP for v1 Flow CRUD", "committedDate": "2020-02-14T09:40:06Z", "type": "forcePushed"}, {"oid": "346d843eed010cd196d2e746f0a67e227d0d6769", "url": "https://github.com/telstra/open-kilda/commit/346d843eed010cd196d2e746f0a67e227d0d6769", "message": "ARP for v1 Flow CRUD", "committedDate": "2020-02-14T10:31:01Z", "type": "forcePushed"}, {"oid": "1c3e0a5c49a3d1e84f38b03868c80e24415bda38", "url": "https://github.com/telstra/open-kilda/commit/1c3e0a5c49a3d1e84f38b03868c80e24415bda38", "message": "Added ARP support to traff gens", "committedDate": "2020-02-18T03:54:21Z", "type": "forcePushed"}, {"oid": "9923f574411588e9a504a54c2ac54e0fb6096f69", "url": "https://github.com/telstra/open-kilda/commit/9923f574411588e9a504a54c2ac54e0fb6096f69", "message": "Fixed shared rule for v1 and v2", "committedDate": "2020-02-18T13:07:16Z", "type": "forcePushed"}, {"oid": "39ebd3ef756caf7264d07b2cba22a2a1097d3a25", "url": "https://github.com/telstra/open-kilda/commit/39ebd3ef756caf7264d07b2cba22a2a1097d3a25", "message": "Fixed shared rule for v1 and v2", "committedDate": "2020-02-19T06:53:08Z", "type": "forcePushed"}, {"oid": "1d81b90847f37caae3ffa26f2c2bbae49f4ed746", "url": "https://github.com/telstra/open-kilda/commit/1d81b90847f37caae3ffa26f2c2bbae49f4ed746", "message": "Fixed shared rule for v1 and v2", "committedDate": "2020-02-19T08:26:19Z", "type": "forcePushed"}, {"oid": "c7b0d0b11435ce1b319f98b415bb66652f5c0be0", "url": "https://github.com/telstra/open-kilda/commit/c7b0d0b11435ce1b319f98b415bb66652f5c0be0", "message": "Fixed shared rule for v1 and v2", "committedDate": "2020-02-19T12:23:21Z", "type": "forcePushed"}, {"oid": "0b794ef524f9324c98b46beb4a44b6fc8f2c62db", "url": "https://github.com/telstra/open-kilda/commit/0b794ef524f9324c98b46beb4a44b6fc8f2c62db", "message": "Fixed func tests", "committedDate": "2020-02-21T08:49:04Z", "type": "forcePushed"}, {"oid": "cadc0bd17f734c1cf5d59737bdf26a839ba8e625", "url": "https://github.com/telstra/open-kilda/commit/cadc0bd17f734c1cf5d59737bdf26a839ba8e625", "message": "Fixed func tests", "committedDate": "2020-02-21T11:28:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1NzYxNQ==", "url": "https://github.com/telstra/open-kilda/pull/3203#discussion_r382557615", "bodyText": "nit: align it with lldp(there is a setter for the lldp above)", "author": "timofei-durakov", "createdAt": "2020-02-21T12:33:46Z", "path": "src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallIngressFlow.java", "diffHunk": "@@ -143,6 +154,7 @@ public InstallIngressFlow(@JsonProperty(TRANSACTION_ID) final UUID transactionId\n         setMeterId(meterId);\n         setEnableLldp(enableLldp);\n         setEgressSwitchId(egressSwitchId);\n+        this.enableArp = enableArp;", "originalCommit": "cadc0bd17f734c1cf5d59737bdf26a839ba8e625", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM3ODgxNQ==", "url": "https://github.com/telstra/open-kilda/pull/3203#discussion_r386378815", "bodyText": "fixed", "author": "niksv", "createdAt": "2020-03-02T13:02:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1NzYxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "37c470967af897cdb021b44619d70fc4520478f8", "chunk": "diff --git a/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallIngressFlow.java b/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallIngressFlow.java\nindex 74260d2ce..16b31f1b6 100644\n--- a/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallIngressFlow.java\n+++ b/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallIngressFlow.java\n\n@@ -154,7 +150,7 @@ public class InstallIngressFlow extends InstallTransitFlow {\n         setMeterId(meterId);\n         setEnableLldp(enableLldp);\n         setEgressSwitchId(egressSwitchId);\n-        this.enableArp = enableArp;\n+        setEnableArp(enableArp);\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1Nzc0Mg==", "url": "https://github.com/telstra/open-kilda/pull/3203#discussion_r382557742", "bodyText": "same as above", "author": "timofei-durakov", "createdAt": "2020-02-21T12:34:04Z", "path": "src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallOneSwitchFlow.java", "diffHunk": "@@ -124,14 +135,16 @@ public InstallOneSwitchFlow(@JsonProperty(TRANSACTION_ID) final UUID transaction\n                                 @JsonProperty(\"bandwidth\") final Long bandwidth,\n                                 @JsonProperty(\"meter_id\") final Long meterId,\n                                 @JsonProperty(\"multi_table\") final boolean multiTable,\n-                                @JsonProperty(\"enable_lldp\") final boolean enableLldp) {\n+                                @JsonProperty(\"enable_lldp\") final boolean enableLldp,\n+                                @JsonProperty(\"enable_arp\") final boolean enableArp) {\n         super(transactionId, id, cookie, switchId, inputPort, outputPort, multiTable);\n         setInputVlanId(inputVlanId);\n         setOutputVlanId(outputVlanId);\n         setOutputVlanType(outputVlanType);\n         setBandwidth(bandwidth);\n         setMeterId(meterId);\n         setEnableLldp(enableLldp);\n+        this.enableArp = enableArp;", "originalCommit": "cadc0bd17f734c1cf5d59737bdf26a839ba8e625", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM3OTI5Ng==", "url": "https://github.com/telstra/open-kilda/pull/3203#discussion_r386379296", "bodyText": "fixed", "author": "niksv", "createdAt": "2020-03-02T13:03:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1Nzc0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "37c470967af897cdb021b44619d70fc4520478f8", "chunk": "diff --git a/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallOneSwitchFlow.java b/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallOneSwitchFlow.java\nindex 9182293b8..41fbc85d5 100644\n--- a/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallOneSwitchFlow.java\n+++ b/src-java/floodlight-service/floodlight-api/src/main/java/org/openkilda/messaging/command/flow/InstallOneSwitchFlow.java\n\n@@ -144,7 +140,7 @@ public class InstallOneSwitchFlow extends BaseInstallFlow {\n         setBandwidth(bandwidth);\n         setMeterId(meterId);\n         setEnableLldp(enableLldp);\n-        this.enableArp = enableArp;\n+        setEnableArp(enableArp);\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1ODY3OA==", "url": "https://github.com/telstra/open-kilda/pull/3203#discussion_r382558678", "bodyText": "nit: maybe switch to builder? or create final constants of remove shared rules context instance", "author": "timofei-durakov", "createdAt": "2020-02-21T12:36:29Z", "path": "src-java/floodlight-service/floodlight-modules/src/test/java/org/openkilda/floodlight/command/flow/ingress/IngressFlowSegmentCommandJsonTest.java", "diffHunk": "@@ -56,7 +56,7 @@ protected IngressFlowSegmentRequest makeRequest() {\n                 new SwitchId(20),\n                 8,\n                 new FlowTransitEncapsulation(9, FlowEncapsulationType.TRANSIT_VLAN),\n-                new RemoveSharedRulesContext(false, false));\n+                new RemoveSharedRulesContext(false, false, false));", "originalCommit": "cadc0bd17f734c1cf5d59737bdf26a839ba8e625", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM5NDMzMw==", "url": "https://github.com/telstra/open-kilda/pull/3203#discussion_r386394333", "bodyText": "fixed", "author": "niksv", "createdAt": "2020-03-02T13:34:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU1ODY3OA=="}], "type": "inlineReview", "revised_code": {"commit": "37c470967af897cdb021b44619d70fc4520478f8", "chunk": "diff --git a/src-java/floodlight-service/floodlight-modules/src/test/java/org/openkilda/floodlight/command/flow/ingress/IngressFlowSegmentCommandJsonTest.java b/src-java/floodlight-service/floodlight-modules/src/test/java/org/openkilda/floodlight/command/flow/ingress/IngressFlowSegmentCommandJsonTest.java\nindex 85da3daec..610dedee6 100644\n--- a/src-java/floodlight-service/floodlight-modules/src/test/java/org/openkilda/floodlight/command/flow/ingress/IngressFlowSegmentCommandJsonTest.java\n+++ b/src-java/floodlight-service/floodlight-modules/src/test/java/org/openkilda/floodlight/command/flow/ingress/IngressFlowSegmentCommandJsonTest.java\n\n@@ -56,7 +56,7 @@ abstract class IngressFlowSegmentCommandJsonTest\n                 new SwitchId(20),\n                 8,\n                 new FlowTransitEncapsulation(9, FlowEncapsulationType.TRANSIT_VLAN),\n-                new RemoveSharedRulesContext(false, false, false));\n+                RemoveSharedRulesContext.builder().build());\n         return makeRequest(factory);\n     }\n \n"}}, {"oid": "37c470967af897cdb021b44619d70fc4520478f8", "url": "https://github.com/telstra/open-kilda/commit/37c470967af897cdb021b44619d70fc4520478f8", "message": "Fixed func tests", "committedDate": "2020-03-02T13:33:47Z", "type": "forcePushed"}, {"oid": "e637ad07af4223b75205990b34150642df03c95f", "url": "https://github.com/telstra/open-kilda/commit/e637ad07af4223b75205990b34150642df03c95f", "message": "Fixed func tests", "committedDate": "2020-03-04T12:45:54Z", "type": "forcePushed"}, {"oid": "35ddf18db522dce9ff5a2972c95aeaf4def2e3d1", "url": "https://github.com/telstra/open-kilda/commit/35ddf18db522dce9ff5a2972c95aeaf4def2e3d1", "message": "ARP Part 6: Added shared rule\n\nPart of #3118", "committedDate": "2020-03-05T04:44:49Z", "type": "commit"}, {"oid": "ed935aee27897d5c4adf6d1517375b5df4a47213", "url": "https://github.com/telstra/open-kilda/commit/ed935aee27897d5c4adf6d1517375b5df4a47213", "message": "ARP for v1 Flow CRUD", "committedDate": "2020-03-05T04:44:49Z", "type": "commit"}, {"oid": "77eb05ce15375e2cd3284f4ca332e4ea147eed5b", "url": "https://github.com/telstra/open-kilda/commit/77eb05ce15375e2cd3284f4ca332e4ea147eed5b", "message": "Fixed shared rule for v1 and v2", "committedDate": "2020-03-05T04:44:49Z", "type": "commit"}, {"oid": "3d21a0700106bc7391f8b8b4ae13cef57538cfc8", "url": "https://github.com/telstra/open-kilda/commit/3d21a0700106bc7391f8b8b4ae13cef57538cfc8", "message": "Fixed func tests", "committedDate": "2020-03-05T04:49:33Z", "type": "forcePushed"}, {"oid": "5eed07f36caa69a9c3044c7e65126b80cd6ab594", "url": "https://github.com/telstra/open-kilda/commit/5eed07f36caa69a9c3044c7e65126b80cd6ab594", "message": "Fixed func tests", "committedDate": "2020-03-05T07:55:55Z", "type": "commit"}, {"oid": "5eed07f36caa69a9c3044c7e65126b80cd6ab594", "url": "https://github.com/telstra/open-kilda/commit/5eed07f36caa69a9c3044c7e65126b80cd6ab594", "message": "Fixed func tests", "committedDate": "2020-03-05T07:55:55Z", "type": "forcePushed"}]}