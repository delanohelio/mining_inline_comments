{"pr_number": 1557, "pr_title": "Add code actions to support new Java 15 modifiers on permitted class.", "pr_createdAt": "2020-09-29T14:23:52Z", "pr_url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1557", "timeline": [{"oid": "602847ba7bd0be92abc142977e6275b7b35ba053", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/602847ba7bd0be92abc142977e6275b7b35ba053", "message": "Add code actions to support new Java 15 modifiers on permitted class.\n\n- Add support for code actions to generate sealed/un-sealed/final\n  modifiers on class with sealed direct super-class/super-interface\n- Fixes #1555\n- Add testcase\n\nSigned-off-by: Roland Grunberg <rgrunber@redhat.com>", "committedDate": "2020-09-30T14:33:19Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODI0OTY2NQ==", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1557#discussion_r498249665", "bodyText": "StringBuilders all the way baby", "author": "fbricon", "createdAt": "2020-10-01T13:36:31Z", "path": "org.eclipse.jdt.ls.tests/src/org/eclipse/jdt/ls/core/internal/correction/ModifierCorrectionsQuickFixTest.java", "diffHunk": "@@ -1203,4 +1208,50 @@ public void testClassExtendFinalClass() throws Exception {\n \t\tExpected e1 = new Expected(\"Remove 'final' modifier of 'X'\", buf.toString());\n \t\tassertCodeActions(cu, e1);\n \t}\n+\n+\t@Test\n+\tpublic void testAddSealedMissingClassModifierProposal() throws Exception {\n+\t\tMap<String, String> options15 = new HashMap<>();\n+\t\tJavaModelUtil.setComplianceOptions(options15, JavaCore.VERSION_15);\n+\t\toptions15.put(JavaCore.COMPILER_PB_ENABLE_PREVIEW_FEATURES, JavaCore.ENABLED);\n+\t\toptions15.put(JavaCore.COMPILER_PB_REPORT_PREVIEW_FEATURES, JavaCore.IGNORE);\n+\t\tfJProject.setOptions(options15);\n+\t\tIPackageFragment pack1 = fSourceFolder.createPackageFragment(\"test\", false, null);\n+\n+\t\tStringBuffer buf = new StringBuffer();", "originalCommit": "602847ba7bd0be92abc142977e6275b7b35ba053", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "71cfeb7dd3e6cb8828b7892920a5bd59484ef84c", "chunk": "diff --git a/org.eclipse.jdt.ls.tests/src/org/eclipse/jdt/ls/core/internal/correction/ModifierCorrectionsQuickFixTest.java b/org.eclipse.jdt.ls.tests/src/org/eclipse/jdt/ls/core/internal/correction/ModifierCorrectionsQuickFixTest.java\nindex 3ded2b75..2950a0d5 100644\n--- a/org.eclipse.jdt.ls.tests/src/org/eclipse/jdt/ls/core/internal/correction/ModifierCorrectionsQuickFixTest.java\n+++ b/org.eclipse.jdt.ls.tests/src/org/eclipse/jdt/ls/core/internal/correction/ModifierCorrectionsQuickFixTest.java\n\n@@ -1217,9 +1217,10 @@ public class ModifierCorrectionsQuickFixTest extends AbstractQuickFixTest {\n \t\toptions15.put(JavaCore.COMPILER_PB_REPORT_PREVIEW_FEATURES, JavaCore.IGNORE);\n \t\tfJProject.setOptions(options15);\n \t\tIPackageFragment pack1 = fSourceFolder.createPackageFragment(\"test\", false, null);\n+\t\tassertNoErrors(fJProject.getResource());\n \n-\t\tStringBuffer buf = new StringBuffer();\n-\t\tbuf = new StringBuffer();\n+\t\tStringBuilder buf = new StringBuilder();\n+\t\tbuf = new StringBuilder();\n \t\tbuf.append(\"package test;\\n\");\n \t\tbuf.append(\"\\n\");\n \t\tbuf.append(\"public sealed class Shape permits Square {}\\n\");\n"}}, {"oid": "71cfeb7dd3e6cb8828b7892920a5bd59484ef84c", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/71cfeb7dd3e6cb8828b7892920a5bd59484ef84c", "message": "Add code actions to support new Java 15 modifiers on permitted class.\n\n- Add support for code actions to generate sealed/un-sealed/final\n  modifiers on class with sealed direct super-class/super-interface\n- Fixes #1555\n- Add testcase\n\nSigned-off-by: Roland Grunberg <rgrunber@redhat.com>", "committedDate": "2020-10-01T13:59:30Z", "type": "commit"}, {"oid": "71cfeb7dd3e6cb8828b7892920a5bd59484ef84c", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/71cfeb7dd3e6cb8828b7892920a5bd59484ef84c", "message": "Add code actions to support new Java 15 modifiers on permitted class.\n\n- Add support for code actions to generate sealed/un-sealed/final\n  modifiers on class with sealed direct super-class/super-interface\n- Fixes #1555\n- Add testcase\n\nSigned-off-by: Roland Grunberg <rgrunber@redhat.com>", "committedDate": "2020-10-01T13:59:30Z", "type": "forcePushed"}]}