{"pr_number": 8318, "pr_title": "[innogysmarthome] Reconnect fixes (#8182)", "pr_createdAt": "2020-08-19T20:41:14Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8318", "timeline": [{"oid": "78699f923475262f714b186a4440d2a40edf1331", "url": "https://github.com/openhab/openhab-addons/commit/78699f923475262f714b186a4440d2a40edf1331", "message": "Merge pull request #1 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-10T17:50:55Z", "type": "commit"}, {"oid": "ae6b89156403811be49f80a0ad7831957f7e3ff3", "url": "https://github.com/openhab/openhab-addons/commit/ae6b89156403811be49f80a0ad7831957f7e3ff3", "message": "Merge pull request #2 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-12T18:12:18Z", "type": "commit"}, {"oid": "66abc11ea152aaa77d9bc64abe15f2dc94f65056", "url": "https://github.com/openhab/openhab-addons/commit/66abc11ea152aaa77d9bc64abe15f2dc94f65056", "message": "Merge pull request #3 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-13T20:20:47Z", "type": "commit"}, {"oid": "4f2cd511ce4312cde304741620c1765d56cd68c5", "url": "https://github.com/openhab/openhab-addons/commit/4f2cd511ce4312cde304741620c1765d56cd68c5", "message": "Merge pull request #4 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-16T16:31:06Z", "type": "commit"}, {"oid": "bd9cfc1d515b67147465297aabcfba123c8b0da2", "url": "https://github.com/openhab/openhab-addons/commit/bd9cfc1d515b67147465297aabcfba123c8b0da2", "message": "Merge pull request #5 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-18T18:57:15Z", "type": "commit"}, {"oid": "de620021e378cd1f0823075981f891007372f606", "url": "https://github.com/openhab/openhab-addons/commit/de620021e378cd1f0823075981f891007372f606", "message": "Merge pull request #6 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-20T20:31:41Z", "type": "commit"}, {"oid": "ad272b75fe2a8099893fcb90c57c70c3030dbc78", "url": "https://github.com/openhab/openhab-addons/commit/ad272b75fe2a8099893fcb90c57c70c3030dbc78", "message": "Merge pull request #7 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-20T22:24:01Z", "type": "commit"}, {"oid": "76c47b885b5ed65d8397451c2e5f6afee41e71a5", "url": "https://github.com/openhab/openhab-addons/commit/76c47b885b5ed65d8397451c2e5f6afee41e71a5", "message": "Merge pull request #8 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-06-21T08:57:04Z", "type": "commit"}, {"oid": "2ce668b656f52dd498baef0654be370687c42bcf", "url": "https://github.com/openhab/openhab-addons/commit/2ce668b656f52dd498baef0654be370687c42bcf", "message": "Merge pull request #9 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-07-06T17:43:22Z", "type": "commit"}, {"oid": "bcfbee2a19fec819cf7a7360594ca7a3fe0114d4", "url": "https://github.com/openhab/openhab-addons/commit/bcfbee2a19fec819cf7a7360594ca7a3fe0114d4", "message": "Merge pull request #10 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-07-10T09:39:03Z", "type": "commit"}, {"oid": "2d654b9963f163b6a9076eecc88b8770227c07e4", "url": "https://github.com/openhab/openhab-addons/commit/2d654b9963f163b6a9076eecc88b8770227c07e4", "message": "Merge pull request #11 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-07-24T18:12:05Z", "type": "commit"}, {"oid": "05de7f6c4b3e11467f6620d578e612f49316ed98", "url": "https://github.com/openhab/openhab-addons/commit/05de7f6c4b3e11467f6620d578e612f49316ed98", "message": "Merge pull request #12 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-07-29T18:35:04Z", "type": "commit"}, {"oid": "77b02c408ee56727652693e39e82ea0bc66cbcd9", "url": "https://github.com/openhab/openhab-addons/commit/77b02c408ee56727652693e39e82ea0bc66cbcd9", "message": "Merge pull request #13 from openhab/2.5.x\n\nUpdate", "committedDate": "2020-08-19T20:22:36Z", "type": "commit"}, {"oid": "0d3589929d2bdb3816825c8633ae47b7c385e3ba", "url": "https://github.com/openhab/openhab-addons/commit/0d3589929d2bdb3816825c8633ae47b7c385e3ba", "message": "When an error occurs, it is waited at least for 30 seconds to avoid too many requests (on re-occurring errors).\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:31:15Z", "type": "commit"}, {"oid": "4c67a6f09b3cd02745ef020761d6ce1abea0a3b0", "url": "https://github.com/openhab/openhab-addons/commit/4c67a6f09b3cd02745ef020761d6ce1abea0a3b0", "message": "Code optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:31:24Z", "type": "commit"}, {"oid": "d881c2d1272ca4f434beca81c9be7bccb3569f46", "url": "https://github.com/openhab/openhab-addons/commit/d881c2d1272ca4f434beca81c9be7bccb3569f46", "message": "Workaround for side-effect of \"Fix possible resource leak #8080\"\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:31:33Z", "type": "commit"}, {"oid": "a57883f839c440632e19af39123f351562674099", "url": "https://github.com/openhab/openhab-addons/commit/a57883f839c440632e19af39123f351562674099", "message": "Workaround for side-effect of \"Fix possible resource leak #8080\" - Improved by not rescheduling when the close/stop was actively triggered by the binding (in this case there is already a reschedule triggered)\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:31:41Z", "type": "commit"}, {"oid": "34b0fa6e9b32d23ba3d8dc6cf71e24ef7fc152ce", "url": "https://github.com/openhab/openhab-addons/commit/34b0fa6e9b32d23ba3d8dc6cf71e24ef7fc152ce", "message": "- NPE fixed\n- Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:31:49Z", "type": "commit"}, {"oid": "e5e9743805cf1c263604a14944cd52cb1550d2c5", "url": "https://github.com/openhab/openhab-addons/commit/e5e9743805cf1c263604a14944cd52cb1550d2c5", "message": "Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:31:57Z", "type": "commit"}, {"oid": "33e6422ff6343a971f9b43c15652a7d3e885cb05", "url": "https://github.com/openhab/openhab-addons/commit/33e6422ff6343a971f9b43c15652a7d3e885cb05", "message": "Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:32:05Z", "type": "commit"}, {"oid": "254233736bef269d939ec50a819a0807c94c1813", "url": "https://github.com/openhab/openhab-addons/commit/254233736bef269d939ec50a819a0807c94c1813", "message": "Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>", "committedDate": "2020-08-19T20:32:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA0MzkyNg==", "url": "https://github.com/openhab/openhab-addons/pull/8318#discussion_r474043926", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    } else if(!closing) {\n          \n          \n            \n                    } else if (!closing) {", "author": "Hilbrand", "createdAt": "2020-08-20T14:52:16Z", "path": "bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java", "diffHunk": "@@ -128,7 +128,8 @@ public void onConnect(Session session) {\n     public void onClose(int statusCode, String reason) {\n         if (statusCode == StatusCode.NORMAL) {\n             logger.info(\"Connection to innogy Webservice was closed normally.\");\n-        } else {\n+        } else if(!closing) {", "originalCommit": "254233736bef269d939ec50a819a0807c94c1813", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "283bde7e21ba84a8536ee29fc0b3e5eab4c64800", "chunk": "diff --git a/bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java b/bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java\nindex bc03c155e5..42cf624a88 100644\n--- a/bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java\n+++ b/bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java\n\n@@ -128,7 +128,7 @@ public class InnogyWebSocket {\n     public void onClose(int statusCode, String reason) {\n         if (statusCode == StatusCode.NORMAL) {\n             logger.info(\"Connection to innogy Webservice was closed normally.\");\n-        } else if(!closing) {\n+        } else if (!closing) {\n             //An additional reconnect attempt is only required when the close/stop wasn't executed by the binding.\n             logger.info(\"Connection to innogy Webservice was closed abnormally (code: {}). Reason: {}\", statusCode,\n                     reason);\n"}}, {"oid": "283bde7e21ba84a8536ee29fc0b3e5eab4c64800", "url": "https://github.com/openhab/openhab-addons/commit/283bde7e21ba84a8536ee29fc0b3e5eab4c64800", "message": "Update bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java", "committedDate": "2020-08-20T14:59:14Z", "type": "commit"}]}