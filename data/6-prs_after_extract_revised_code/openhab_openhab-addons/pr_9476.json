{"pr_number": 9476, "pr_title": "[amazonechocontrol] refactor arrays to modern types", "pr_createdAt": "2020-12-22T16:43:14Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/9476", "timeline": [{"oid": "9254d4161a8c5f25d2f3855e32b1ca6226cddff0", "url": "https://github.com/openhab/openhab-addons/commit/9254d4161a8c5f25d2f3855e32b1ca6226cddff0", "message": "refactor arrays to modern types\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2021-01-07T16:44:02Z", "type": "forcePushed"}, {"oid": "77b4e7e26632f7488487a3f288fba6e94893f0d1", "url": "https://github.com/openhab/openhab-addons/commit/77b4e7e26632f7488487a3f288fba6e94893f0d1", "message": "refactor arrays to modern types\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2021-01-07T18:27:34Z", "type": "commit"}, {"oid": "77b4e7e26632f7488487a3f288fba6e94893f0d1", "url": "https://github.com/openhab/openhab-addons/commit/77b4e7e26632f7488487a3f288fba6e94893f0d1", "message": "refactor arrays to modern types\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2021-01-07T18:27:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njc4MDQwOQ==", "url": "https://github.com/openhab/openhab-addons/pull/9476#discussion_r556780409", "bodyText": "You shouldn't use string concatenation when you already have a StringBuilder to use. String concatenation ends up using another StringBuilder when it generates the java bytecode. So just chain multiple append statements instead.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            capability -> html.append(\"<tr><td>\" + StringEscapeUtils.escapeHtml(capability) + \"</td></tr>\"));\n          \n          \n            \n                            capability -> html.append(\"<tr><td>\").append(StringEscapeUtils.escapeHtml(capability)).append(\"</td></tr>\"));", "author": "cpmeister", "createdAt": "2021-01-13T19:37:22Z", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java", "diffHunk": "@@ -499,14 +497,8 @@ private void handleIds(HttpServletResponse resp, Connection connection, Device d\n     private void renderCapabilities(Connection connection, Device device, StringBuilder html) {\n         html.append(\"<h2>Capabilities</h2>\");\n         html.append(\"<table><tr><th align='left'>Name</th></tr>\");\n-        String[] capabilities = device.capabilities;\n-        if (capabilities != null) {\n-            for (String capability : capabilities) {\n-                html.append(\"<tr><td>\");\n-                html.append(StringEscapeUtils.escapeHtml(capability));\n-                html.append(\"</td></tr>\");\n-            }\n-        }\n+        device.getCapabilities().forEach(\n+                capability -> html.append(\"<tr><td>\" + StringEscapeUtils.escapeHtml(capability) + \"</td></tr>\"));", "originalCommit": "77b4e7e26632f7488487a3f288fba6e94893f0d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njc4OTk0NQ==", "url": "https://github.com/openhab/openhab-addons/pull/9476#discussion_r556789945", "bodyText": "Done. Also in other places.", "author": "J-N-K", "createdAt": "2021-01-13T19:53:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njc4MDQwOQ=="}], "type": "inlineReview", "revised_code": {"commit": "27949c3728e8b3528f36cd9410e9cb13a867d14a", "chunk": "diff --git a/bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java b/bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java\nindex d98e995ff7..7d75f24454 100644\n--- a/bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java\n+++ b/bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java\n\n@@ -497,13 +497,14 @@ public class AccountServlet extends HttpServlet {\n     private void renderCapabilities(Connection connection, Device device, StringBuilder html) {\n         html.append(\"<h2>Capabilities</h2>\");\n         html.append(\"<table><tr><th align='left'>Name</th></tr>\");\n-        device.getCapabilities().forEach(\n-                capability -> html.append(\"<tr><td>\" + StringEscapeUtils.escapeHtml(capability) + \"</td></tr>\"));\n+        device.getCapabilities().forEach(capability -> html.append(\"<tr><td>\")\n+                .append(StringEscapeUtils.escapeHtml(capability)).append(\"</td></tr>\"));\n         html.append(\"</table>\");\n     }\n \n     private void renderMusicProviderIdChannel(Connection connection, StringBuilder html) {\n-        html.append(\"<h2>\" + StringEscapeUtils.escapeHtml(\"Channel \" + CHANNEL_MUSIC_PROVIDER_ID) + \"</h2>\");\n+        html.append(\"<h2>\").append(StringEscapeUtils.escapeHtml(\"Channel \" + CHANNEL_MUSIC_PROVIDER_ID))\n+                .append(\"</h2>\");\n         html.append(\"<table><tr><th align='left'>Name</th><th align='left'>Value</th></tr>\");\n         List<JsonMusicProvider> musicProviders = connection.getMusicProviders();\n         for (JsonMusicProvider musicProvider : musicProviders) {\n"}}, {"oid": "27949c3728e8b3528f36cd9410e9cb13a867d14a", "url": "https://github.com/openhab/openhab-addons/commit/27949c3728e8b3528f36cd9410e9cb13a867d14a", "message": "address review comments\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2021-01-13T19:53:21Z", "type": "commit"}]}