{"pr_number": 7818, "pr_title": "[lametrictime] correctly parse response", "pr_createdAt": "2020-05-28T20:54:17Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7818", "timeline": [{"oid": "14d6f1fc9d92fc072666c779f679ca88e84ed5f6", "url": "https://github.com/openhab/openhab-addons/commit/14d6f1fc9d92fc072666c779f679ca88e84ed5f6", "message": "correctly parse response\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>", "committedDate": "2020-05-28T20:44:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1MTMzOQ==", "url": "https://github.com/openhab/openhab-addons/pull/7818#discussion_r432151339", "bodyText": "You should specify the charset to use in the InputStreamReader. The charset should be part of the content type of the response right?\nAlso, you should probably just input the reader directly into fromJson so that you don't have to go through the extra step of creating a string.", "author": "cpmeister", "createdAt": "2020-05-28T22:07:32Z", "path": "bundles/org.openhab.binding.lametrictime/src/3rdparty/java/org/openhab/binding/lametrictime/api/local/impl/LaMetricTimeLocalImpl.java", "diffHunk": "@@ -252,8 +256,11 @@ public void updateApplication(String packageName, String accessToken, WidgetUpda\n         Response response = getClient().target(getApi().getEndpoints().getAppsListUrl())\n                 .request(MediaType.APPLICATION_JSON_TYPE).get();\n \n+        String entity = new BufferedReader(new InputStreamReader((InputStream) response.getEntity())).lines()\n+                .collect(Collectors.joining(\"\\n\"));", "originalCommit": "14d6f1fc9d92fc072666c779f679ca88e84ed5f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjMxNzY0NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7818#discussion_r432317645", "bodyText": "Thanks for your (as always) good and helpful review comments! I've addressed this now.", "author": "kaikreuzer", "createdAt": "2020-05-29T07:56:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1MTMzOQ=="}], "type": "inlineReview", "revised_code": {"commit": "fe981645466eb84dee6118da77c18e674abfa385", "chunk": "diff --git a/bundles/org.openhab.binding.lametrictime/src/3rdparty/java/org/openhab/binding/lametrictime/api/local/impl/LaMetricTimeLocalImpl.java b/bundles/org.openhab.binding.lametrictime/src/3rdparty/java/org/openhab/binding/lametrictime/api/local/impl/LaMetricTimeLocalImpl.java\nindex 216b91a8c0..5aea72fe61 100644\n--- a/bundles/org.openhab.binding.lametrictime/src/3rdparty/java/org/openhab/binding/lametrictime/api/local/impl/LaMetricTimeLocalImpl.java\n+++ b/bundles/org.openhab.binding.lametrictime/src/3rdparty/java/org/openhab/binding/lametrictime/api/local/impl/LaMetricTimeLocalImpl.java\n\n@@ -256,8 +259,8 @@ public class LaMetricTimeLocalImpl extends AbstractClient implements LaMetricTim\n         Response response = getClient().target(getApi().getEndpoints().getAppsListUrl())\n                 .request(MediaType.APPLICATION_JSON_TYPE).get();\n \n-        String entity = new BufferedReader(new InputStreamReader((InputStream) response.getEntity())).lines()\n-                .collect(Collectors.joining(\"\\n\"));\n+        Reader entity = new BufferedReader(\n+                new InputStreamReader((InputStream) response.getEntity(), StandardCharsets.UTF_8));\n \n         // @formatter:off\n         return getGson().fromJson(entity,\n"}}, {"oid": "fe981645466eb84dee6118da77c18e674abfa385", "url": "https://github.com/openhab/openhab-addons/commit/fe981645466eb84dee6118da77c18e674abfa385", "message": "addressed review comments\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>", "committedDate": "2020-05-29T07:55:12Z", "type": "commit"}]}