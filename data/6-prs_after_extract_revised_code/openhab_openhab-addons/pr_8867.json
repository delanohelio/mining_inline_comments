{"pr_number": 8867, "pr_title": "[miio] avoid Invalid URI host: null error", "pr_createdAt": "2020-10-25T21:46:45Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8867", "timeline": [{"oid": "f9c5945218a6879bbc8e610cef9e938566919418", "url": "https://github.com/openhab/openhab-addons/commit/f9c5945218a6879bbc8e610cef9e938566919418", "message": "[miio] avoid Invalid URI host: null error\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>", "committedDate": "2020-10-25T21:44:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkwNzIxNQ==", "url": "https://github.com/openhab/openhab-addons/pull/8867#discussion_r511907215", "bodyText": "Why is this annotation necessary?", "author": "J-N-K", "createdAt": "2020-10-26T11:59:11Z", "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/cloud/CloudConnector.java", "diffHunk": "@@ -137,14 +137,23 @@ public boolean isConnected() {\n             mapCountry = country.trim().toLowerCase();\n             mapUrl = cl.getMapUrl(mapId, mapCountry);\n         }\n-        @Nullable\n-        RawType mapData = HttpUtil.downloadData(mapUrl, null, false, -1);\n-        if (mapData != null) {\n-            return mapData;\n-        } else {\n-            logger.debug(\"Could not download '{}'\", mapUrl);\n+        if (mapUrl.isBlank()) {\n+            logger.debug(\"Cannot download map data: Returned map URL is empty\");\n             return null;\n         }\n+        try {\n+            @Nullable", "originalCommit": "f9c5945218a6879bbc8e610cef9e938566919418", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ3Mjc2MA==", "url": "https://github.com/openhab/openhab-addons/pull/8867#discussion_r512472760", "bodyText": "It is no longer... I'll remove it.", "author": "marcelrv", "createdAt": "2020-10-27T07:44:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkwNzIxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "5f8fb03a5cd7ff078b538f388e89fcde86b380cc", "chunk": "diff --git a/bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/cloud/CloudConnector.java b/bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/cloud/CloudConnector.java\nindex e788c9e0b2..e3660dada0 100644\n--- a/bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/cloud/CloudConnector.java\n+++ b/bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/cloud/CloudConnector.java\n\n@@ -142,7 +142,6 @@ public class CloudConnector {\n             return null;\n         }\n         try {\n-            @Nullable\n             RawType mapData = HttpUtil.downloadData(mapUrl, null, false, -1);\n             if (mapData != null) {\n                 return mapData;\n"}}, {"oid": "5f8fb03a5cd7ff078b538f388e89fcde86b380cc", "url": "https://github.com/openhab/openhab-addons/commit/5f8fb03a5cd7ff078b538f388e89fcde86b380cc", "message": "[miio] remove not needed @nullable annotation\n\nbased on feedback of @J-N-K\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>", "committedDate": "2020-10-27T09:03:35Z", "type": "commit"}]}