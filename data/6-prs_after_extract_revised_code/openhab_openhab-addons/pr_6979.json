{"pr_number": 6979, "pr_title": "[bluetooth.am43] AM43 Binding initial contribution", "pr_createdAt": "2020-02-08T21:33:14Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6979", "timeline": [{"oid": "0ff2111d00e120b0b4779b61bfaa38f7c9bff534", "url": "https://github.com/openhab/openhab-addons/commit/0ff2111d00e120b0b4779b61bfaa38f7c9bff534", "message": "Initial commit of AM43 Binding\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-06T05:39:34Z", "type": "commit"}, {"oid": "46ef5f0741297c6e217c5dce26ca19fc19b3bcfd", "url": "https://github.com/openhab/openhab-addons/commit/46ef5f0741297c6e217c5dce26ca19fc19b3bcfd", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\nam43\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-06T05:43:30Z", "type": "commit"}, {"oid": "97064da9c280a6aefbe9bab448f9fb4a211a1f51", "url": "https://github.com/openhab/openhab-addons/commit/97064da9c280a6aefbe9bab448f9fb4a211a1f51", "message": "Replace AM43Handler with AM43Handler2 and other finishing touches\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-08T20:40:13Z", "type": "commit"}, {"oid": "1c27004c367216c90d8de0e4855b89edcbe41f98", "url": "https://github.com/openhab/openhab-addons/commit/1c27004c367216c90d8de0e4855b89edcbe41f98", "message": "Make some field final\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-08T21:47:30Z", "type": "commit"}, {"oid": "9218407a4a289f3dc6e37725dc80cf93287609bc", "url": "https://github.com/openhab/openhab-addons/commit/9218407a4a289f3dc6e37725dc80cf93287609bc", "message": "Update code to adhere to community guidelines\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-09T05:41:34Z", "type": "commit"}, {"oid": "93dc6d996bb805659430db9abeda891e792cf869", "url": "https://github.com/openhab/openhab-addons/commit/93dc6d996bb805659430db9abeda891e792cf869", "message": "fix typo\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-09T18:48:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2MjM5MA==", "url": "https://github.com/openhab/openhab-addons/pull/6979#discussion_r387262390", "bodyText": "This method is deprecated. Please set the thing status to UNKNOWN here instead.", "author": "kaikreuzer", "createdAt": "2020-03-03T20:03:48Z", "path": "bundles/org.openhab.binding.bluetooth.am43/src/main/java/org/openhab/binding/bluetooth/am43/internal/AM43Handler.java", "diffHunk": "@@ -0,0 +1,474 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.bluetooth.am43.internal;\n+\n+import java.util.Arrays;\n+import java.util.concurrent.Executor;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executors;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.quantity.Length;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.smarthome.core.common.NamedThreadFactory;\n+import org.eclipse.smarthome.core.library.types.DecimalType;\n+import org.eclipse.smarthome.core.library.types.OnOffType;\n+import org.eclipse.smarthome.core.library.types.PercentType;\n+import org.eclipse.smarthome.core.library.types.QuantityType;\n+import org.eclipse.smarthome.core.library.types.StopMoveType;\n+import org.eclipse.smarthome.core.library.types.StringType;\n+import org.eclipse.smarthome.core.library.types.UpDownType;\n+import org.eclipse.smarthome.core.library.unit.SIUnits;\n+import org.eclipse.smarthome.core.thing.ChannelUID;\n+import org.eclipse.smarthome.core.thing.Thing;\n+import org.eclipse.smarthome.core.types.Command;\n+import org.eclipse.smarthome.core.types.RefreshType;\n+import org.eclipse.smarthome.core.types.State;\n+import org.eclipse.smarthome.core.types.UnDefType;\n+import org.eclipse.smarthome.core.util.HexUtils;\n+import org.openhab.binding.bluetooth.BluetoothCharacteristic;\n+import org.openhab.binding.bluetooth.BluetoothCompletionStatus;\n+import org.openhab.binding.bluetooth.BluetoothDevice.ConnectionState;\n+import org.openhab.binding.bluetooth.ConnectedBluetoothHandler;\n+import org.openhab.binding.bluetooth.am43.internal.command.AM43Command;\n+import org.openhab.binding.bluetooth.am43.internal.command.ControlCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.GetAllCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.GetBatteryLevelCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.GetLightLevelCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.GetPositionCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.GetSpeedCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.ResponseListener;\n+import org.openhab.binding.bluetooth.am43.internal.command.SetPositionCommand;\n+import org.openhab.binding.bluetooth.am43.internal.command.SetSettingsCommand;\n+import org.openhab.binding.bluetooth.am43.internal.data.ControlAction;\n+import org.openhab.binding.bluetooth.am43.internal.data.Direction;\n+import org.openhab.binding.bluetooth.am43.internal.data.MotorSettings;\n+import org.openhab.binding.bluetooth.am43.internal.data.OperationMode;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import tec.uom.se.unit.MetricPrefix;\n+\n+/**\n+ * The {@link AM43Handler} is responsible for handling commands, which are\n+ * sent to one of the channels.\n+ *\n+ * @author Connor Petty - Initial contribution\n+ */\n+@NonNullByDefault\n+public class AM43Handler extends ConnectedBluetoothHandler implements ResponseListener {\n+\n+    private final Logger logger = LoggerFactory.getLogger(AM43Handler.class);\n+\n+    private @Nullable AM43Configuration config;\n+\n+    private volatile @Nullable AM43Command currentCommand = null;\n+\n+    private @Nullable ScheduledFuture<?> refreshJob;\n+\n+    private @Nullable ExecutorService commandExecutor;\n+\n+    private @Nullable MotorSettings motorSettings = null;\n+\n+    public AM43Handler(Thing thing) {\n+        super(thing);\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        super.initialize();", "originalCommit": "93dc6d996bb805659430db9abeda891e792cf869", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDI0MQ==", "url": "https://github.com/openhab/openhab-addons/pull/6979#discussion_r387270241", "bodyText": "The parent handler class is ConnectedBluetoothHandler, so the super.initialize() is required.", "author": "cpmeister", "createdAt": "2020-03-03T20:19:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2MjM5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3MDg1OA==", "url": "https://github.com/openhab/openhab-addons/pull/6979#discussion_r387270858", "bodyText": "Outch, you've got me there :-) You're obviously right, I missed that.", "author": "kaikreuzer", "createdAt": "2020-03-03T20:20:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2MjM5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM0MzY4NA==", "url": "https://github.com/openhab/openhab-addons/pull/6979#discussion_r387343684", "bodyText": "I don't blame you, the bluetooth binding is a unique case \ud83d\ude04", "author": "cpmeister", "createdAt": "2020-03-03T22:52:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI2MjM5MA=="}], "type": "inlineReview", "revised_code": null}]}