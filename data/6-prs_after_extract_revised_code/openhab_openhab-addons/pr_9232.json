{"pr_number": 9232, "pr_title": "[lcn] add workaround for dynamic text firmware bug", "pr_createdAt": "2020-12-04T21:24:32Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/9232", "timeline": [{"oid": "a58021ced2f2cc617c185fabff74d933108df9dc", "url": "https://github.com/openhab/openhab-addons/commit/a58021ced2f2cc617c185fabff74d933108df9dc", "message": "[lcn] add workaround for dynamic text firmware bug\n\nSome LCN-GTxD don't display the text if it fits exactly in one chunk (12 bytes). Observed with GT10D 8.0.\n\nCloses #9208\n\nSigned-off-by: Fabian Wolter <github@fabian-wolter.de>", "committedDate": "2020-12-04T21:21:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM5Nzc4Mw==", "url": "https://github.com/openhab/openhab-addons/pull/9232#discussion_r536397783", "bodyText": "The default charset varies from system to system so it is better to specify it yourself instead of using the default.", "author": "cpmeister", "createdAt": "2020-12-04T21:45:44Z", "path": "bundles/org.openhab.binding.lcn/src/main/java/org/openhab/binding/lcn/internal/LcnModuleActions.java", "diffHunk": "@@ -125,6 +125,11 @@ public void sendDynamicText(\n                 text = new String();\n             }\n \n+            // some LCN-GTxD don't display the text if it fits exactly in one chunk. Observed with GT10D 8.0.\n+            if (text.getBytes(LcnDefs.LCN_ENCODING).length % DYN_TEXT_CHUNK_LENGTH == 0) {", "originalCommit": "a58021ced2f2cc617c185fabff74d933108df9dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQyMzU4MQ==", "url": "https://github.com/openhab/openhab-addons/pull/9232#discussion_r536423581", "bodyText": "LcnDefs.LCN_ENCODING is set to StandardCharsets.UTF_8.", "author": "fwolter", "createdAt": "2020-12-04T22:34:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM5Nzc4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQzNjA5OQ==", "url": "https://github.com/openhab/openhab-addons/pull/9232#discussion_r536436099", "bodyText": "...I have no idea why I didn't notice that.", "author": "cpmeister", "createdAt": "2020-12-04T23:06:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM5Nzc4Mw=="}], "type": "inlineReview", "revised_code": null}]}