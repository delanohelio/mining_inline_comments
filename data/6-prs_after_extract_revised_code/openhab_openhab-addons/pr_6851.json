{"pr_number": 6851, "pr_title": "[network] Issue 6495", "pr_createdAt": "2020-01-17T16:34:55Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6851", "timeline": [{"oid": "0c8f3ca8dfdee0c8a7b3efbad02ceab347ef39ff", "url": "https://github.com/openhab/openhab-addons/commit/0c8f3ca8dfdee0c8a7b3efbad02ceab347ef39ff", "message": "[unleash-maven-plugin] Preparation for next development cycle.\n\nSigned-off-by: Ga\u00ebl L'hopital <gael@lhopital.org>\n\nConflicts:\n\tbom/openhab-addons/pom.xml\n\tbom/openhab-core-index/pom.xml\n\tbom/pom.xml\n\tbom/runtime-index/pom.xml\n\tbom/test-index/pom.xml\n\tbundles/org.openhab.binding.airquality/pom.xml\n\tbundles/org.openhab.binding.airvisualnode/pom.xml\n\tbundles/org.openhab.binding.allplay/pom.xml\n\tbundles/org.openhab.binding.amazondashbutton/pom.xml\n\tbundles/org.openhab.binding.amazonechocontrol/pom.xml\n\tbundles/org.openhab.binding.ambientweather/pom.xml\n\tbundles/org.openhab.binding.astro/pom.xml\n\tbundles/org.openhab.binding.atlona/pom.xml\n\tbundles/org.openhab.binding.autelis/pom.xml\n\tbundles/org.openhab.binding.avmfritz/pom.xml\n\tbundles/org.openhab.binding.bigassfan/pom.xml\n\tbundles/org.openhab.binding.bluetooth.bluegiga/pom.xml\n\tbundles/org.openhab.binding.bluetooth.bluez/pom.xml\n\tbundles/org.openhab.binding.bluetooth.blukii/pom.xml\n\tbundles/org.openhab.binding.bluetooth.ruuvitag/pom.xml\n\tbundles/org.openhab.binding.bluetooth/pom.xml\n\tbundles/org.openhab.binding.boschindego/pom.xml\n\tbundles/org.openhab.binding.bosesoundtouch/pom.xml\n\tbundles/org.openhab.binding.buienradar/pom.xml\n\tbundles/org.openhab.binding.chromecast/pom.xml\n\tbundles/org.openhab.binding.cm11a/pom.xml\n\tbundles/org.openhab.binding.coolmasternet/pom.xml\n\tbundles/org.openhab.binding.daikin/pom.xml\n\tbundles/org.openhab.binding.darksky/pom.xml\n\tbundles/org.openhab.binding.deconz/pom.xml\n\tbundles/org.openhab.binding.denonmarantz/pom.xml\n\tbundles/org.openhab.binding.digiplex/pom.xml\n\tbundles/org.openhab.binding.digitalstrom/pom.xml\n\tbundles/org.openhab.binding.dlinksmarthome/pom.xml\n\tbundles/org.openhab.binding.dmx/pom.xml\n\tbundles/org.openhab.binding.doorbird/pom.xml\n\tbundles/org.openhab.binding.dscalarm/pom.xml\n\tbundles/org.openhab.binding.dsmr/pom.xml\n\tbundles/org.openhab.binding.dwdunwetter/pom.xml\n\tbundles/org.openhab.binding.elerotransmitterstick/pom.xml\n\tbundles/org.openhab.binding.enocean/pom.xml\n\tbundles/org.openhab.binding.enturno/pom.xml\n\tbundles/org.openhab.binding.evohome/pom.xml\n\tbundles/org.openhab.binding.exec/pom.xml\n\tbundles/org.openhab.binding.feed/pom.xml\n\tbundles/org.openhab.binding.feican/pom.xml\n\tbundles/org.openhab.binding.folding/pom.xml\n\tbundles/org.openhab.binding.foobot/pom.xml\n\tbundles/org.openhab.binding.freebox/pom.xml\n\tbundles/org.openhab.binding.fronius/pom.xml\n\tbundles/org.openhab.binding.fsinternetradio/pom.xml\n\tbundles/org.openhab.binding.ftpupload/pom.xml\n\tbundles/org.openhab.binding.gardena/pom.xml\n\tbundles/org.openhab.binding.globalcache/pom.xml\n\tbundles/org.openhab.binding.gpstracker/pom.xml\n\tbundles/org.openhab.binding.groheondus/pom.xml\n\tbundles/org.openhab.binding.harmonyhub/pom.xml\n\tbundles/org.openhab.binding.hdanywhere/pom.xml\n\tbundles/org.openhab.binding.hdpowerview/pom.xml\n\tbundles/org.openhab.binding.helios/pom.xml\n\tbundles/org.openhab.binding.heos/pom.xml\n\tbundles/org.openhab.binding.homematic/pom.xml\n\tbundles/org.openhab.binding.hpprinter/pom.xml\n\tbundles/org.openhab.binding.hue/pom.xml\n\tbundles/org.openhab.binding.hydrawise/pom.xml\n\tbundles/org.openhab.binding.hyperion/pom.xml\n\tbundles/org.openhab.binding.iaqualink/pom.xml\n\tbundles/org.openhab.binding.icloud/pom.xml\n\tbundles/org.openhab.binding.ihc/pom.xml\n\tbundles/org.openhab.binding.innogysmarthome/pom.xml\n\tbundles/org.openhab.binding.ipp/pom.xml\n\tbundles/org.openhab.binding.irtrans/pom.xml\n\tbundles/org.openhab.binding.jeelink/pom.xml\n\tbundles/org.openhab.binding.keba/pom.xml\n\tbundles/org.openhab.binding.km200/pom.xml\n\tbundles/org.openhab.binding.knx/pom.xml\n\tbundles/org.openhab.binding.kodi/pom.xml\n\tbundles/org.openhab.binding.konnected/pom.xml\n\tbundles/org.openhab.binding.kostalinverter/pom.xml\n\tbundles/org.openhab.binding.lametrictime/pom.xml\n\tbundles/org.openhab.binding.leapmotion/pom.xml\n\tbundles/org.openhab.binding.lghombot/pom.xml\n\tbundles/org.openhab.binding.lgtvserial/pom.xml\n\tbundles/org.openhab.binding.lgwebos/pom.xml\n\tbundles/org.openhab.binding.lifx/pom.xml\n\tbundles/org.openhab.binding.linuxinput/pom.xml\n\tbundles/org.openhab.binding.lirc/pom.xml\n\tbundles/org.openhab.binding.logreader/pom.xml\n\tbundles/org.openhab.binding.loxone/pom.xml\n\tbundles/org.openhab.binding.lutron/pom.xml\n\tbundles/org.openhab.binding.mail/pom.xml\n\tbundles/org.openhab.binding.max/pom.xml\n\tbundles/org.openhab.binding.mcp23017/pom.xml\n\tbundles/org.openhab.binding.melcloud/pom.xml\n\tbundles/org.openhab.binding.meteoblue/pom.xml\n\tbundles/org.openhab.binding.meteostick/pom.xml\n\tbundles/org.openhab.binding.miele/pom.xml\n\tbundles/org.openhab.binding.mihome/pom.xml\n\tbundles/org.openhab.binding.miio/pom.xml\n\tbundles/org.openhab.binding.milight/pom.xml\n\tbundles/org.openhab.binding.millheat/pom.xml\n\tbundles/org.openhab.binding.minecraft/pom.xml\n\tbundles/org.openhab.binding.modbus/pom.xml\n\tbundles/org.openhab.binding.mqtt.generic/pom.xml\n\tbundles/org.openhab.binding.mqtt.homeassistant/pom.xml\n\tbundles/org.openhab.binding.mqtt.homie/pom.xml\n\tbundles/org.openhab.binding.mqtt/pom.xml\n\tbundles/org.openhab.binding.nanoleaf/pom.xml\n\tbundles/org.openhab.binding.neato/pom.xml\n\tbundles/org.openhab.binding.neeo/pom.xml\n\tbundles/org.openhab.binding.neohub/pom.xml\n\tbundles/org.openhab.binding.nest/pom.xml\n\tbundles/org.openhab.binding.netatmo/pom.xml\n\tbundles/org.openhab.binding.network/pom.xml\n\tbundles/org.openhab.binding.networkupstools/pom.xml\n\tbundles/org.openhab.binding.nibeheatpump/pom.xml\n\tbundles/org.openhab.binding.nibeuplink/pom.xml\n\tbundles/org.openhab.binding.nikobus/pom.xml\n\tbundles/org.openhab.binding.nikohomecontrol/pom.xml\n\tbundles/org.openhab.binding.ntp/pom.xml\n\tbundles/org.openhab.binding.nuki/pom.xml\n\tbundles/org.openhab.binding.oceanic/pom.xml\n\tbundles/org.openhab.binding.omnikinverter/pom.xml\n\tbundles/org.openhab.binding.onebusaway/pom.xml\n\tbundles/org.openhab.binding.onewire/pom.xml\n\tbundles/org.openhab.binding.onewiregpio/pom.xml\n\tbundles/org.openhab.binding.onkyo/pom.xml\n\tbundles/org.openhab.binding.opengarage/pom.xml\n\tbundles/org.openhab.binding.opensprinkler/pom.xml\n\tbundles/org.openhab.binding.openuv/pom.xml\n\tbundles/org.openhab.binding.openweathermap/pom.xml\n\tbundles/org.openhab.binding.orvibo/pom.xml\n\tbundles/org.openhab.binding.paradoxalarm/pom.xml\n\tbundles/org.openhab.binding.pentair/pom.xml\n\tbundles/org.openhab.binding.phc/pom.xml\n\tbundles/org.openhab.binding.pioneeravr/pom.xml\n\tbundles/org.openhab.binding.pixometer/pom.xml\n\tbundles/org.openhab.binding.pjlinkdevice/pom.xml\n\tbundles/org.openhab.binding.plclogo/pom.xml\n\tbundles/org.openhab.binding.plugwise/pom.xml\n\tbundles/org.openhab.binding.powermax/pom.xml\n\tbundles/org.openhab.binding.pulseaudio/pom.xml\n\tbundles/org.openhab.binding.pushbullet/pom.xml\n\tbundles/org.openhab.binding.regoheatpump/pom.xml\n\tbundles/org.openhab.binding.rfxcom/pom.xml\n\tbundles/org.openhab.binding.rme/pom.xml\n\tbundles/org.openhab.binding.robonect/pom.xml\n\tbundles/org.openhab.binding.rotel/pom.xml\n\tbundles/org.openhab.binding.rotelra1x/pom.xml\n\tbundles/org.openhab.binding.russound/pom.xml\n\tbundles/org.openhab.binding.samsungtv/pom.xml\n\tbundles/org.openhab.binding.satel/pom.xml\n\tbundles/org.openhab.binding.seneye/pom.xml\n\tbundles/org.openhab.binding.sensebox/pom.xml\n\tbundles/org.openhab.binding.serialbutton/pom.xml\n\tbundles/org.openhab.binding.shelly/pom.xml\n\tbundles/org.openhab.binding.siemensrds/pom.xml\n\tbundles/org.openhab.binding.silvercrestwifisocket/pom.xml\n\tbundles/org.openhab.binding.sinope/pom.xml\n\tbundles/org.openhab.binding.sleepiq/pom.xml\n\tbundles/org.openhab.binding.smaenergymeter/pom.xml\n\tbundles/org.openhab.binding.smartmeter/pom.xml\n\tbundles/org.openhab.binding.snmp/pom.xml\n\tbundles/org.openhab.binding.solaredge/pom.xml\n\tbundles/org.openhab.binding.solarlog/pom.xml\n\tbundles/org.openhab.binding.somfytahoma/pom.xml\n\tbundles/org.openhab.binding.sonos/pom.xml\n\tbundles/org.openhab.binding.sonyaudio/pom.xml\n\tbundles/org.openhab.binding.sonyprojector/pom.xml\n\tbundles/org.openhab.binding.spotify/pom.xml\n\tbundles/org.openhab.binding.squeezebox/pom.xml\n\tbundles/org.openhab.binding.synopanalyzer/pom.xml\n\tbundles/org.openhab.binding.systeminfo/pom.xml\n\tbundles/org.openhab.binding.tado/pom.xml\n\tbundles/org.openhab.binding.tankerkoenig/pom.xml\n\tbundles/org.openhab.binding.telegram/pom.xml\n\tbundles/org.openhab.binding.tellstick/pom.xml\n\tbundles/org.openhab.binding.tesla/pom.xml\n\tbundles/org.openhab.binding.toon/pom.xml\n\tbundles/org.openhab.binding.tplinksmarthome/pom.xml\n\tbundles/org.openhab.binding.tradfri/pom.xml\n\tbundles/org.openhab.binding.unifi/pom.xml\n\tbundles/org.openhab.binding.urtsi/pom.xml\n\tbundles/org.openhab.binding.valloxmv/pom.xml\n\tbundles/org.openhab.binding.vektiva/pom.xml\n\tbundles/org.openhab.binding.velbus/pom.xml\n\tbundles/org.openhab.binding.vitotronic/pom.xml\n\tbundles/org.openhab.binding.volvooncall/pom.xml\n\tbundles/org.openhab.binding.weathercompany/pom.xml\n\tbundles/org.openhab.binding.weatherunderground/pom.xml\n\tbundles/org.openhab.binding.wemo/pom.xml\n\tbundles/org.openhab.binding.wifiled/pom.xml\n\tbundles/org.openhab.binding.windcentrale/pom.xml\n\tbundles/org.openhab.binding.xmltv/pom.xml\n\tbundles/org.openhab.binding.xmppclient/pom.xml\n\tbundles/org.openhab.binding.yamahareceiver/pom.xml\n\tbundles/org.openhab.binding.yeelight/pom.xml\n\tbundles/org.openhab.binding.zoneminder/pom.xml\n\tbundles/org.openhab.binding.zway/pom.xml\n\tbundles/org.openhab.extensionservice.marketplace.automation/pom.xml\n\tbundles/org.openhab.extensionservice.marketplace/pom.xml\n\tbundles/org.openhab.io.homekit/pom.xml\n\tbundles/org.openhab.io.hueemulation/pom.xml\n\tbundles/org.openhab.io.imperihome/pom.xml\n\tbundles/org.openhab.io.javasound/pom.xml\n\tbundles/org.openhab.io.mqttembeddedbroker/pom.xml\n\tbundles/org.openhab.io.neeo/pom.xml\n\tbundles/org.openhab.io.openhabcloud/pom.xml\n\tbundles/org.openhab.io.transport.modbus/pom.xml\n\tbundles/org.openhab.io.webaudio/pom.xml\n\tbundles/org.openhab.persistence.mapdb/pom.xml\n\tbundles/org.openhab.transform.bin2json/pom.xml\n\tbundles/org.openhab.transform.exec/pom.xml\n\tbundles/org.openhab.transform.javascript/pom.xml\n\tbundles/org.openhab.transform.jinja/pom.xml\n\tbundles/org.openhab.transform.jsonpath/pom.xml\n\tbundles/org.openhab.transform.map/pom.xml\n\tbundles/org.openhab.transform.regex/pom.xml\n\tbundles/org.openhab.transform.scale/pom.xml\n\tbundles/org.openhab.transform.xpath/pom.xml\n\tbundles/org.openhab.transform.xslt/pom.xml\n\tbundles/org.openhab.voice.googletts/pom.xml\n\tbundles/org.openhab.voice.mactts/pom.xml\n\tbundles/org.openhab.voice.marytts/pom.xml\n\tbundles/org.openhab.voice.picotts/pom.xml\n\tbundles/org.openhab.voice.pollytts/pom.xml\n\tbundles/org.openhab.voice.voicerss/pom.xml\n\tbundles/pom.xml\n\tfeatures/openhab-addons-external/pom.xml\n\tfeatures/openhab-addons/pom.xml\n\tfeatures/pom.xml\n\titests/org.openhab.binding.astro.tests/pom.xml\n\titests/org.openhab.binding.avmfritz.tests/pom.xml\n\titests/org.openhab.binding.feed.tests/pom.xml\n\titests/org.openhab.binding.hue.tests/pom.xml\n\titests/org.openhab.binding.max.tests/pom.xml\n\titests/org.openhab.binding.nest.tests/pom.xml\n\titests/org.openhab.binding.ntp.tests/pom.xml\n\titests/org.openhab.binding.systeminfo.tests/pom.xml\n\titests/org.openhab.binding.tradfri.tests/pom.xml\n\titests/org.openhab.binding.wemo.tests/pom.xml\n\titests/org.openhab.io.hueemulation.tests/pom.xml\n\titests/org.openhab.persistence.mapdb.tests/pom.xml\n\titests/pom.xml\n\tpom.xml", "committedDate": "2020-01-17T16:27:12Z", "type": "commit"}, {"oid": "463a8c2d33a753041b1b8b9174daa567ff2d5250", "url": "https://github.com/openhab/openhab-addons/commit/463a8c2d33a753041b1b8b9174daa567ff2d5250", "message": "Recreating PR for issue #6495 and making two small nullable potential issues corrections\n\nSigned-off-by: Ga\u00ebl L'hopital <gael@lhopital.org>", "committedDate": "2020-01-17T16:32:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzkxNw==", "url": "https://github.com/openhab/openhab-addons/pull/6851#discussion_r368233917", "bodyText": "What is the benefit of the null-check? null is not equal to DHCPPacket.DHCPREQUEST anyway.", "author": "J-N-K", "createdAt": "2020-01-18T16:00:06Z", "path": "bundles/org.openhab.binding.network/src/main/java/org/openhab/binding/network/internal/dhcp/DHCPPacketListenerServer.java", "diffHunk": "@@ -70,7 +70,7 @@ protected void receivePacket(DHCPPacket request, @Nullable InetAddress udpRemote\n \n         Byte dhcpMessageType = request.getDHCPMessageType();\n \n-        if (dhcpMessageType != DHCPPacket.DHCPREQUEST) {\n+        if (dhcpMessageType != null && dhcpMessageType != DHCPPacket.DHCPREQUEST) {", "originalCommit": "463a8c2d33a753041b1b8b9174daa567ff2d5250", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzNzY5OQ==", "url": "https://github.com/openhab/openhab-addons/pull/6851#discussion_r368237699", "bodyText": "You're 100% right !", "author": "clinique", "createdAt": "2020-01-18T17:16:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzkxNw=="}], "type": "inlineReview", "revised_code": {"commit": "512ff432f8d26390a641e5af93ce46dc81d65493", "chunk": "diff --git a/bundles/org.openhab.binding.network/src/main/java/org/openhab/binding/network/internal/dhcp/DHCPPacketListenerServer.java b/bundles/org.openhab.binding.network/src/main/java/org/openhab/binding/network/internal/dhcp/DHCPPacketListenerServer.java\nindex 121756b0f3..cc5b941624 100644\n--- a/bundles/org.openhab.binding.network/src/main/java/org/openhab/binding/network/internal/dhcp/DHCPPacketListenerServer.java\n+++ b/bundles/org.openhab.binding.network/src/main/java/org/openhab/binding/network/internal/dhcp/DHCPPacketListenerServer.java\n\n@@ -70,7 +70,7 @@ public class DHCPPacketListenerServer extends Thread {\n \n         Byte dhcpMessageType = request.getDHCPMessageType();\n \n-        if (dhcpMessageType != null && dhcpMessageType != DHCPPacket.DHCPREQUEST) {\n+        if (dhcpMessageType != DHCPPacket.DHCPREQUEST) {\n             return; // skipping non DHCPREQUEST message types\n         }\n \n"}}, {"oid": "512ff432f8d26390a641e5af93ce46dc81d65493", "url": "https://github.com/openhab/openhab-addons/commit/512ff432f8d26390a641e5af93ce46dc81d65493", "message": "Revert incorrect correction\n\nSigned-off-by: Ga\u00ebl L'hopital <gael@lhopital.org>", "committedDate": "2020-01-20T16:02:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5MTMyNw==", "url": "https://github.com/openhab/openhab-addons/pull/6851#discussion_r373091327", "bodyText": "How can the user reset this counter? I'm thinking of e.g. a network connection problem which takes half a day or so.\nOr maybe a setting of configuration.maxTimeouts=0 disables timeouts at all?", "author": "J-N-K", "createdAt": "2020-01-30T17:34:14Z", "path": "bundles/org.openhab.binding.network/src/main/java/org/openhab/binding/network/internal/handler/SpeedTestHandler.java", "diffHunk": "@@ -132,7 +130,17 @@ public void onError(final @Nullable SpeedTestError testError, final @Nullable St\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, errorMessage);\n             freeRefreshTask();\n             return;\n-        } else if (SpeedTestError.SOCKET_TIMEOUT.equals(testError) || SpeedTestError.SOCKET_ERROR.equals(testError)\n+        } else if (SpeedTestError.SOCKET_TIMEOUT.equals(testError)) {\n+            timeouts--;\n+            if (timeouts <= 0) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR, \"Max timeout count reached\");", "originalCommit": "512ff432f8d26390a641e5af93ce46dc81d65493", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM4MzI1Nw==", "url": "https://github.com/openhab/openhab-addons/pull/6851#discussion_r373383257", "bodyText": "Disabling the thing is an option no ?", "author": "clinique", "createdAt": "2020-01-31T09:22:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5MTMyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzYyMDY5OQ==", "url": "https://github.com/openhab/openhab-addons/pull/6851#discussion_r373620699", "bodyText": "Sounds good. But what do you think of the timeout-counter disable?", "author": "J-N-K", "createdAt": "2020-01-31T18:28:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5MTMyNw=="}], "type": "inlineReview", "revised_code": null}]}