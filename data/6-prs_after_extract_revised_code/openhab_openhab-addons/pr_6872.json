{"pr_number": 6872, "pr_title": "[freebox] Adding Fiber optic and support of Delta bridge", "pr_createdAt": "2020-01-19T11:29:02Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6872", "timeline": [{"oid": "68fd3b80b36682336499bd7a23caa1a90d977498", "url": "https://github.com/openhab/openhab-addons/commit/68fd3b80b36682336499bd7a23caa1a90d977498", "message": "Adding Delta / Fiber optic capability to Freebox binding\n\nSigned-off-by: Ga\u00ebl L'hopital <glhopital@gmail.com>", "committedDate": "2020-01-19T11:24:00Z", "type": "commit"}, {"oid": "e987449a90a7bb65c33974e879c5358a37df5f83", "url": "https://github.com/openhab/openhab-addons/commit/e987449a90a7bb65c33974e879c5358a37df5f83", "message": "Correction of indentation\n\nSigned-off-by: Ga\u00ebl L'hopital <glhopital@gmail.com>", "committedDate": "2020-01-19T11:27:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM5Mjc2Mg==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r370392762", "bodyText": "This will return \"true\" or \"false\" as string.\nWhy not producing a more convenient string status, maybe something similar to the xDSL status ?\nOr return boolean and use a Switch channel rather than a String channel ?\nYou consider the field sfp_present but are we sure that the other fields like sfp_has_signal or link are not better candidates ? (unfortunately the API is not documented !)", "author": "lolodomo", "createdAt": "2020-01-23T22:39:06Z", "path": "bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/FreeboxApiManager.java", "diffHunk": "@@ -201,6 +202,10 @@ public String getxDslStatus() throws FreeboxException {\n         return executeGetUrl(\"connection/xdsl/\", FreeboxXdslStatusResponse.class).getStatus();\n     }\n \n+    public String getFtthStatus() throws FreeboxException {\n+        return executeGetUrl(\"connection/ftth/\", FreeboxFtthStatusResponse.class).getSfp_present().toString();", "originalCommit": "e987449a90a7bb65c33974e879c5358a37df5f83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUxNTUzNA==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r370515534", "bodyText": "This was more intended to introduce a quick running solution to solve F.O. issue. I plan a wider review later on this binding to introduce other field and switch to UoM", "author": "clinique", "createdAt": "2020-01-24T08:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM5Mjc2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "0758b8603757a0c5f7da823dbdeac34f9eaa6cf7", "chunk": "diff --git a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/FreeboxApiManager.java b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/FreeboxApiManager.java\nindex 44f1ef8185..06b4934ba6 100644\n--- a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/FreeboxApiManager.java\n+++ b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/FreeboxApiManager.java\n\n@@ -202,8 +202,8 @@ public class FreeboxApiManager {\n         return executeGetUrl(\"connection/xdsl/\", FreeboxXdslStatusResponse.class).getStatus();\n     }\n \n-    public String getFtthStatus() throws FreeboxException {\n-        return executeGetUrl(\"connection/ftth/\", FreeboxFtthStatusResponse.class).getSfp_present().toString();\n+    public boolean getFtthPresent() throws FreeboxException {\n+        return executeGetUrl(\"connection/ftth/\", FreeboxFtthStatusResponse.class).getSfpPresent();\n     }\n \n     public boolean isWifiEnabled() throws FreeboxException {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM5Mjk2Nw==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r370392967", "bodyText": "Why not using boolean rather than Boolean ?\nSame for other Boolean fields.", "author": "lolodomo", "createdAt": "2020-01-23T22:39:36Z", "path": "bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.freebox.internal.api.model;\n+\n+/**\n+ * The {@link FreeboxFtthStatus} is the Java class used to map the \"FtthStatus\"\n+ * structure used by the response of the connection Ftth status API\n+ * https://dev.freebox.fr/sdk/os/connection/#\n+ *\n+ * @author Ga\u00ebl L'hopital - Initial contribution\n+ */\n+public class FreeboxFtthStatus {\n+    private Boolean sfp_present;", "originalCommit": "e987449a90a7bb65c33974e879c5358a37df5f83", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0758b8603757a0c5f7da823dbdeac34f9eaa6cf7", "chunk": "diff --git a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\nindex e2742cf11c..bb81a48f92 100644\n--- a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n+++ b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n\n@@ -20,30 +20,30 @@ package org.openhab.binding.freebox.internal.api.model;\n  * @author Ga\u00ebl L'hopital - Initial contribution\n  */\n public class FreeboxFtthStatus {\n-    private Boolean sfp_present;\n-    private Boolean sfp_alim_ok;\n-    private Boolean sfp_has_power_report;\n-    private Boolean sfp_has_signal;\n-    private Boolean link;\n+    private boolean sfp_present;\n+    private boolean sfp_alim_ok;\n+    private boolean sfp_has_power_report;\n+    private boolean sfp_has_signal;\n+    private boolean link;\n     private String sfp_serial;\n     private String sfp_model;\n     private String sfp_vendor;\n     private long sfp_pwr_tx;\n     private long sfp_pwr_rx;\n \n-    public Boolean getSfp_present() {\n+    public boolean getSfpPresent() {\n         return sfp_present;\n     }\n \n-    public Boolean getSfp_alim_ok() {\n+    public boolean getSfpAlimOk() {\n         return sfp_alim_ok;\n     }\n \n-    public Boolean getSfp_has_power_report() {\n+    public boolean getSfpHasPowerReport() {\n         return sfp_has_power_report;\n     }\n \n-    public Boolean getSfp_has_signal() {\n+    public Boolean getSfpHasSignal() {\n         return sfp_has_signal;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM5MzQ5MQ==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r370393491", "bodyText": "Could you please use standard naming, getSfpPresent rather than getSfp_present ?\nSame for the other getter methods.", "author": "lolodomo", "createdAt": "2020-01-23T22:41:04Z", "path": "bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.freebox.internal.api.model;\n+\n+/**\n+ * The {@link FreeboxFtthStatus} is the Java class used to map the \"FtthStatus\"\n+ * structure used by the response of the connection Ftth status API\n+ * https://dev.freebox.fr/sdk/os/connection/#\n+ *\n+ * @author Ga\u00ebl L'hopital - Initial contribution\n+ */\n+public class FreeboxFtthStatus {\n+    private Boolean sfp_present;\n+    private Boolean sfp_alim_ok;\n+    private Boolean sfp_has_power_report;\n+    private Boolean sfp_has_signal;\n+    private Boolean link;\n+    private String sfp_serial;\n+    private String sfp_model;\n+    private String sfp_vendor;\n+    private long sfp_pwr_tx;\n+    private long sfp_pwr_rx;\n+\n+    public Boolean getSfp_present() {", "originalCommit": "e987449a90a7bb65c33974e879c5358a37df5f83", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0758b8603757a0c5f7da823dbdeac34f9eaa6cf7", "chunk": "diff --git a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\nindex e2742cf11c..bb81a48f92 100644\n--- a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n+++ b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n\n@@ -20,30 +20,30 @@ package org.openhab.binding.freebox.internal.api.model;\n  * @author Ga\u00ebl L'hopital - Initial contribution\n  */\n public class FreeboxFtthStatus {\n-    private Boolean sfp_present;\n-    private Boolean sfp_alim_ok;\n-    private Boolean sfp_has_power_report;\n-    private Boolean sfp_has_signal;\n-    private Boolean link;\n+    private boolean sfp_present;\n+    private boolean sfp_alim_ok;\n+    private boolean sfp_has_power_report;\n+    private boolean sfp_has_signal;\n+    private boolean link;\n     private String sfp_serial;\n     private String sfp_model;\n     private String sfp_vendor;\n     private long sfp_pwr_tx;\n     private long sfp_pwr_rx;\n \n-    public Boolean getSfp_present() {\n+    public boolean getSfpPresent() {\n         return sfp_present;\n     }\n \n-    public Boolean getSfp_alim_ok() {\n+    public boolean getSfpAlimOk() {\n         return sfp_alim_ok;\n     }\n \n-    public Boolean getSfp_has_power_report() {\n+    public boolean getSfpHasPowerReport() {\n         return sfp_has_power_report;\n     }\n \n-    public Boolean getSfp_has_signal() {\n+    public Boolean getSfpHasSignal() {\n         return sfp_has_signal;\n     }\n \n"}}, {"oid": "0758b8603757a0c5f7da823dbdeac34f9eaa6cf7", "url": "https://github.com/openhab/openhab-addons/commit/0758b8603757a0c5f7da823dbdeac34f9eaa6cf7", "message": "Code review\n\nSigned-off-by: Ga\u00ebl L'hopital <gael@lhopital.org>", "committedDate": "2020-01-24T08:18:44Z", "type": "commit"}, {"oid": "5ea91bc671e83f8a36cd4eb50b7dcb4ff0b27182", "url": "https://github.com/openhab/openhab-addons/commit/5ea91bc671e83f8a36cd4eb50b7dcb4ff0b27182", "message": "Forgot one thingx\n\nSigned-off-by: Ga\u00ebl L'hopital <gael@lhopital.org>", "committedDate": "2020-01-24T08:24:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkyNzgyMw==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r370927823", "bodyText": "Please update the return type from Boolean to boolean", "author": "lolodomo", "createdAt": "2020-01-25T11:09:57Z", "path": "bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.freebox.internal.api.model;\n+\n+/**\n+ * The {@link FreeboxFtthStatus} is the Java class used to map the \"FtthStatus\"\n+ * structure used by the response of the connection Ftth status API\n+ * https://dev.freebox.fr/sdk/os/connection/#\n+ *\n+ * @author Ga\u00ebl L'hopital - Initial contribution\n+ */\n+public class FreeboxFtthStatus {\n+    private boolean sfp_present;\n+    private boolean sfp_alim_ok;\n+    private boolean sfp_has_power_report;\n+    private boolean sfp_has_signal;\n+    private boolean link;\n+    private String sfp_serial;\n+    private String sfp_model;\n+    private String sfp_vendor;\n+    private long sfp_pwr_tx;\n+    private long sfp_pwr_rx;\n+\n+    public boolean getSfpPresent() {\n+        return sfp_present;\n+    }\n+\n+    public boolean getSfpAlimOk() {\n+        return sfp_alim_ok;\n+    }\n+\n+    public boolean getSfpHasPowerReport() {\n+        return sfp_has_power_report;\n+    }\n+\n+    public Boolean getSfpHasSignal() {", "originalCommit": "5ea91bc671e83f8a36cd4eb50b7dcb4ff0b27182", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a872689d6f2929ced383a231806b6a44c12176ac", "chunk": "diff --git a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\nindex bb81a48f92..c0e81e9cff 100644\n--- a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n+++ b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n\n@@ -43,11 +43,11 @@ public class FreeboxFtthStatus {\n         return sfp_has_power_report;\n     }\n \n-    public Boolean getSfpHasSignal() {\n+    public boolean getSfpHasSignal() {\n         return sfp_has_signal;\n     }\n \n-    public Boolean getLink() {\n+    public boolean getLink() {\n         return link;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkyNzgyNg==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r370927826", "bodyText": "Please update the return type from Boolean to boolean", "author": "lolodomo", "createdAt": "2020-01-25T11:10:06Z", "path": "bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.freebox.internal.api.model;\n+\n+/**\n+ * The {@link FreeboxFtthStatus} is the Java class used to map the \"FtthStatus\"\n+ * structure used by the response of the connection Ftth status API\n+ * https://dev.freebox.fr/sdk/os/connection/#\n+ *\n+ * @author Ga\u00ebl L'hopital - Initial contribution\n+ */\n+public class FreeboxFtthStatus {\n+    private boolean sfp_present;\n+    private boolean sfp_alim_ok;\n+    private boolean sfp_has_power_report;\n+    private boolean sfp_has_signal;\n+    private boolean link;\n+    private String sfp_serial;\n+    private String sfp_model;\n+    private String sfp_vendor;\n+    private long sfp_pwr_tx;\n+    private long sfp_pwr_rx;\n+\n+    public boolean getSfpPresent() {\n+        return sfp_present;\n+    }\n+\n+    public boolean getSfpAlimOk() {\n+        return sfp_alim_ok;\n+    }\n+\n+    public boolean getSfpHasPowerReport() {\n+        return sfp_has_power_report;\n+    }\n+\n+    public Boolean getSfpHasSignal() {\n+        return sfp_has_signal;\n+    }\n+\n+    public Boolean getLink() {", "originalCommit": "5ea91bc671e83f8a36cd4eb50b7dcb4ff0b27182", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a872689d6f2929ced383a231806b6a44c12176ac", "chunk": "diff --git a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\nindex bb81a48f92..c0e81e9cff 100644\n--- a/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n+++ b/bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatus.java\n\n@@ -43,11 +43,11 @@ public class FreeboxFtthStatus {\n         return sfp_has_power_report;\n     }\n \n-    public Boolean getSfpHasSignal() {\n+    public boolean getSfpHasSignal() {\n         return sfp_has_signal;\n     }\n \n-    public Boolean getLink() {\n+    public boolean getLink() {\n         return link;\n     }\n \n"}}, {"oid": "a872689d6f2929ced383a231806b6a44c12176ac", "url": "https://github.com/openhab/openhab-addons/commit/a872689d6f2929ced383a231806b6a44c12176ac", "message": "Correcting leftovers showed by code review.\n\nSigned-off-by: Ga\u00ebl L'hopital <glhopital@gmail.com>", "committedDate": "2020-01-26T15:25:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTYyNw==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r373801627", "bodyText": "What about nullness annotations in the new classes?", "author": "cweitkamp", "createdAt": "2020-02-01T20:50:00Z", "path": "bundles/org.openhab.binding.freebox/src/main/java/org/openhab/binding/freebox/internal/api/model/FreeboxFtthStatusResponse.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.freebox.internal.api.model;\n+\n+import org.openhab.binding.freebox.internal.api.FreeboxException;\n+\n+/**\n+ * The {@link FreeboxFtthStatusResponse} is the Java class used to map the\n+ * response of the connection Ftth status API\n+ * https://dev.freebox.fr/sdk/os/connection/#\n+ *\n+ * @author Ga\u00ebl L'hopital - Initial contribution\n+ */\n+public class FreeboxFtthStatusResponse extends FreeboxResponse<FreeboxFtthStatus> {", "originalCommit": "a872689d6f2929ced383a231806b6a44c12176ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgzMTgwMw==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r373831803", "bodyText": "This is a very old binding without nullness annotations.\nAnd the class you point  is an object for JSON mapping, The nonnull annotation is not very appropriate for such case.", "author": "lolodomo", "createdAt": "2020-02-02T09:27:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTYyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA0MjY5Nw==", "url": "https://github.com/openhab/openhab-addons/pull/6872#discussion_r374042697", "bodyText": "Agreed.", "author": "cweitkamp", "createdAt": "2020-02-03T11:06:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTYyNw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "65777a78127426379a0daac88337b593a2fde33e", "url": "https://github.com/openhab/openhab-addons/commit/65777a78127426379a0daac88337b593a2fde33e", "message": "Code review corrections\n\nSigned-off-by: Ga\u00ebl L'hopital <gael@lhopital.org>", "committedDate": "2020-02-03T10:42:48Z", "type": "commit"}, {"oid": "d770fd5c319c5eb53f590b8d3f1457cd618e2a37", "url": "https://github.com/openhab/openhab-addons/commit/d770fd5c319c5eb53f590b8d3f1457cd618e2a37", "message": "Merge branch 'FreeboxFtth' of https://github.com/clinique/openhab2-addons into FreeboxFtth", "committedDate": "2020-02-03T10:44:12Z", "type": "commit"}]}