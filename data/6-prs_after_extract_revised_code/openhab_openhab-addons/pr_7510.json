{"pr_number": 7510, "pr_title": "[neohub] added support for Fahrenheit, new accessory devices, and low battery alarm", "pr_createdAt": "2020-04-30T19:52:47Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7510", "timeline": [{"oid": "7bd98872086b72cf683e5caa331c27b99c15428e", "url": "https://github.com/openhab/openhab-addons/commit/7bd98872086b72cf683e5caa331c27b99c15428e", "message": "Rename method call\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-05-01T11:51:28Z", "type": "commit"}, {"oid": "7bd98872086b72cf683e5caa331c27b99c15428e", "url": "https://github.com/openhab/openhab-addons/commit/7bd98872086b72cf683e5caa331c27b99c15428e", "message": "Rename method call\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-05-01T11:51:28Z", "type": "forcePushed"}, {"oid": "b3ea4f6b090ff8c913ffe7a33d4b0d24a9a089e6", "url": "https://github.com/openhab/openhab-addons/commit/b3ea4f6b090ff8c913ffe7a33d4b0d24a9a089e6", "message": "Rebased to upstream; Support Fahrenheit; Apply Spotless formatter\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-05-01T12:20:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcxNTg2NA==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r418715864", "bodyText": "Please handle the case if firmwareVersion is null", "author": "cpmeister", "createdAt": "2020-05-01T20:08:53Z", "path": "bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoHubReadDcbResponse.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.neohub.internal;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.smarthome.core.library.unit.ImperialUnits;\n+import org.eclipse.smarthome.core.library.unit.SIUnits;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.JsonSyntaxException;\n+import com.google.gson.annotations.SerializedName;\n+\n+/**\n+ * A wrapper around the JSON response to the JSON READ_DCB 100 request\n+ *\n+ * @author Andrew Fiddian-Green - Initial contribution\n+ * \n+ */\n+public class NeoHubReadDcbResponse {\n+\n+    private static final Gson GSON = new Gson();\n+\n+    @SerializedName(\"CORF\")\n+    private String degreesCorF;\n+    @SerializedName(\"Firmware version\")\n+    private Integer firmwareVersion;\n+\n+    public Unit<?> getTemperatureUnit() {\n+        return \"F\".equalsIgnoreCase(degreesCorF) ? ImperialUnits.FAHRENHEIT : SIUnits.CELSIUS;\n+    }\n+\n+    public String getFirmwareVersion() {\n+        return firmwareVersion.toString();", "originalCommit": "b3ea4f6b090ff8c913ffe7a33d4b0d24a9a089e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODkzMzE2Nw==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r418933167", "bodyText": "@cpmeister thanks for pointing this out; in fact firmwareVersion is never used code, so I think I will remove it entirely; I will probably remove other elements of never used code at the same time.", "author": "andrewfg", "createdAt": "2020-05-02T08:54:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcxNTg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk3ODg5MA==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r418978890", "bodyText": "Done", "author": "andrewfg", "createdAt": "2020-05-02T16:34:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcxNTg2NA=="}], "type": "inlineReview", "revised_code": {"commit": "13eb2e78fde6f620fe653a4638412d48e055eae3", "chunk": "diff --git a/bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoHubReadDcbResponse.java b/bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoHubReadDcbResponse.java\nindex 96321aeaef..c40c52e43a 100644\n--- a/bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoHubReadDcbResponse.java\n+++ b/bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoHubReadDcbResponse.java\n\n@@ -34,17 +34,11 @@ public class NeoHubReadDcbResponse {\n \n     @SerializedName(\"CORF\")\n     private String degreesCorF;\n-    @SerializedName(\"Firmware version\")\n-    private Integer firmwareVersion;\n \n     public Unit<?> getTemperatureUnit() {\n         return \"F\".equalsIgnoreCase(degreesCorF) ? ImperialUnits.FAHRENHEIT : SIUnits.CELSIUS;\n     }\n \n-    public String getFirmwareVersion() {\n-        return firmwareVersion.toString();\n-    }\n-\n     /**\n      * Create wrapper around the JSON response\n      * \n"}}, {"oid": "13eb2e78fde6f620fe653a4638412d48e055eae3", "url": "https://github.com/openhab/openhab-addons/commit/13eb2e78fde6f620fe653a4638412d48e055eae3", "message": "[neohub] support heatmiser accessory devices\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-05-02T16:30:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NjUxMg==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r418996512", "bodyText": "Please add @NonNullByDefault", "author": "cpmeister", "createdAt": "2020-05-02T19:15:14Z", "path": "bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoTemperatureSensorHandler.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.neohub.internal;\n+\n+import static org.openhab.binding.neohub.internal.NeoHubBindingConstants.*;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.smarthome.core.library.types.OnOffType;\n+import org.eclipse.smarthome.core.library.types.QuantityType;\n+import org.eclipse.smarthome.core.thing.Thing;\n+\n+/**\n+ * The {@link NeoTemperatureSensorHandler} is the OpenHAB Handler for NeoTemperatureSensor devices\n+ * \n+ * Note: inherits almost all the functionality of a {@link NeoBaseHandler}\n+ * \n+ * @author Andrew Fiddian-Green - Initial contribution\n+ * \n+ */\n+public class NeoTemperatureSensorHandler extends NeoBaseHandler {", "originalCommit": "13eb2e78fde6f620fe653a4638412d48e055eae3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMDY4NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r419000685", "bodyText": "I feared you might say that @cpmeister :( \u2014 I think the logical conclusion would be for me to retroactively do that to all of the classes in the binding, and not only just the new classes. Do you guys have an opinion on this?", "author": "andrewfg", "createdAt": "2020-05-02T19:55:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NjUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMTkyOQ==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r419001929", "bodyText": "It is not my intent to make a PR any more complicated than it needs to be. I only want you to add @NonNullByDefault to new classes that are added to the binding, the existing classes can be considered to be grandfathered in.\nOf course, nothing is stopping you from adding them in if you wish but I would prefer if that were a separate PR. This PR already has too much going on.", "author": "cpmeister", "createdAt": "2020-05-02T20:07:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NjUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA4MzIwNA==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r419083204", "bodyText": "@cpmeister hmm, these two new classes are trivial inherited classes from the base handler class; so if I add @NonNullByDefault to them, it causes an mvn build error by differing from the parent class.\nTo correct the mvn build errors, I would need to add @NonNullByDefault to the parent base class. Which means I would have to do the same to the other classes derived from the base. And I suspect this would cause a full rat's tail of null analysis changes to many other classes in the binding.\nSo, in fact I would prefer to follow your prior suggestion, and defer ALL of the null annotation changes to a separate PR. => Is that OK with you?", "author": "andrewfg", "createdAt": "2020-05-03T10:34:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NjUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwOTAzOA==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r419209038", "bodyText": "That sounds fine by me, I don't want to add a ton of work to this PR.", "author": "cpmeister", "createdAt": "2020-05-04T04:27:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5NjUxMg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5Njg1MA==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r418996850", "bodyText": "Please add @NonNullByDefault", "author": "cpmeister", "createdAt": "2020-05-02T19:18:38Z", "path": "bundles/org.openhab.binding.neohub/src/main/java/org/openhab/binding/neohub/internal/NeoContactHandler.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.neohub.internal;\n+\n+import static org.openhab.binding.neohub.internal.NeoHubBindingConstants.*;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.smarthome.core.library.types.OnOffType;\n+import org.eclipse.smarthome.core.thing.Thing;\n+\n+/**\n+ * The {@link NeoContactHandler} is the OpenHAB Handler for NeoContact devices\n+ * \n+ * Note: inherits almost all the functionality of a {@link NeoBaseHandler}\n+ * \n+ * @author Andrew Fiddian-Green - Initial contribution\n+ * \n+ */\n+public class NeoContactHandler extends NeoBaseHandler {", "originalCommit": "13eb2e78fde6f620fe653a4638412d48e055eae3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMDY5Nw==", "url": "https://github.com/openhab/openhab-addons/pull/7510#discussion_r419000697", "bodyText": "See above", "author": "andrewfg", "createdAt": "2020-05-02T19:55:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5Njg1MA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "b2a95e1487deb660031dc178118d97bafb980d15", "url": "https://github.com/openhab/openhab-addons/commit/b2a95e1487deb660031dc178118d97bafb980d15", "message": "[neohub] minor tweak to logging\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-05-03T17:12:28Z", "type": "commit"}]}