{"pr_number": 7358, "pr_title": "[CoronaStats] Initial contribution", "pr_createdAt": "2020-04-13T19:27:29Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7358", "timeline": [{"oid": "a29c3acd127bc827a7ecf9d82a821faf1b48f0bf", "url": "https://github.com/openhab/openhab-addons/commit/a29c3acd127bc827a7ecf9d82a821faf1b48f0bf", "message": "[CoronaStats] Finished initial development\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-15T15:00:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA0OTgwOA==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409049808", "bodyText": "Please remove the empty lines between the fields.", "author": "kaikreuzer", "createdAt": "2020-04-15T18:32:42Z", "path": "bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCases.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.coronastats.internal.dto;\n+\n+import static org.openhab.binding.coronastats.internal.CoronaStatsBindingConstants.*;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.smarthome.core.library.types.DecimalType;\n+import org.eclipse.smarthome.core.types.State;\n+import org.eclipse.smarthome.core.types.UnDefType;\n+\n+/**\n+ * The {@link CoronaStatsCountry} class holds the internal data representation of each Country\n+ *\n+ * @author Johannes Ott - Initial contribution\n+ */\n+@NonNullByDefault\n+public class CoronaStatsCases {\n+    private int cases = -1;\n+", "originalCommit": "a29c3acd127bc827a7ecf9d82a821faf1b48f0bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEyMTU5Ng==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409121596", "bodyText": "Removed", "author": "DerOetzi", "createdAt": "2020-04-15T20:43:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA0OTgwOA=="}], "type": "inlineReview", "revised_code": {"commit": "3fdbf06a31ec00f97792c2ea36356002422b0880", "chunk": "diff --git a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCases.java b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCases.java\ndeleted file mode 100644\nindex c34b6a3f9b..0000000000\n--- a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCases.java\n+++ /dev/null\n\n@@ -1,67 +0,0 @@\n-/**\n- * Copyright (c) 2010-2020 Contributors to the openHAB project\n- *\n- * See the NOTICE file(s) distributed with this work for additional\n- * information.\n- *\n- * This program and the accompanying materials are made available under the\n- * terms of the Eclipse Public License 2.0 which is available at\n- * http://www.eclipse.org/legal/epl-2.0\n- *\n- * SPDX-License-Identifier: EPL-2.0\n- */\n-package org.openhab.binding.coronastats.internal.dto;\n-\n-import static org.openhab.binding.coronastats.internal.CoronaStatsBindingConstants.*;\n-\n-import java.util.HashMap;\n-import java.util.Map;\n-\n-import org.eclipse.jdt.annotation.NonNullByDefault;\n-import org.eclipse.smarthome.core.library.types.DecimalType;\n-import org.eclipse.smarthome.core.types.State;\n-import org.eclipse.smarthome.core.types.UnDefType;\n-\n-/**\n- * The {@link CoronaStatsCountry} class holds the internal data representation of each Country\n- *\n- * @author Johannes Ott - Initial contribution\n- */\n-@NonNullByDefault\n-public class CoronaStatsCases {\n-    private int cases = -1;\n-\n-    private int todayCases = -1;\n-\n-    private int deaths = -1;\n-\n-    private int todayDeaths = -1;\n-\n-    private int recovered = -1;\n-\n-    private int active = -1;\n-\n-    private int critical = -1;\n-\n-    protected Map<String, State> getCaseChannelsStateMap() {\n-        Map<String, State> map = new HashMap<>();\n-\n-        map.put(CHANNEL_CASES, parseToState(cases));\n-        map.put(CHANNEL_NEW_CASES, parseToState(todayCases));\n-        map.put(CHANNEL_DEATHS, parseToState(deaths));\n-        map.put(CHANNEL_NEW_DEATHS, parseToState(todayDeaths));\n-        map.put(CHANNEL_RECOVERED, parseToState(recovered));\n-        map.put(CHANNEL_ACTIVE, parseToState(active));\n-        map.put(CHANNEL_CRITICAL, parseToState(critical));\n-\n-        return map;\n-    }\n-\n-    protected State parseToState(int count) {\n-        if (count == -1) {\n-            return UnDefType.NULL;\n-        } else {\n-            return new DecimalType(count);\n-        }\n-    }\n-}\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1MDAzNg==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409050036", "bodyText": "remove empty lines", "author": "kaikreuzer", "createdAt": "2020-04-15T18:32:59Z", "path": "bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCountry.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.coronastats.internal.dto;\n+\n+import static org.openhab.binding.coronastats.internal.CoronaStatsBindingConstants.*;\n+\n+import java.time.ZoneId;\n+import java.time.ZonedDateTime;\n+import java.util.Collections;\n+import java.util.Date;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.smarthome.core.library.types.DateTimeType;\n+import org.eclipse.smarthome.core.types.State;\n+import org.eclipse.smarthome.core.types.UnDefType;\n+\n+/**\n+ * The {@link CoronaStatsCountry} class holds the internal data representation of each Country\n+ *\n+ * @author Johannes Ott - Initial contribution\n+ */\n+@NonNullByDefault\n+public class CoronaStatsCountry extends CoronaStatsCases {\n+    private String country = \"\";\n+", "originalCommit": "a29c3acd127bc827a7ecf9d82a821faf1b48f0bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEyMTYyMQ==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409121621", "bodyText": "Removed", "author": "DerOetzi", "createdAt": "2020-04-15T20:43:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1MDAzNg=="}], "type": "inlineReview", "revised_code": {"commit": "3fdbf06a31ec00f97792c2ea36356002422b0880", "chunk": "diff --git a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCountry.java b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCountry.java\nindex 8325e59710..4f7efbe161 100644\n--- a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCountry.java\n+++ b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/dto/CoronaStatsCountry.java\n\n@@ -12,19 +12,7 @@\n  */\n package org.openhab.binding.coronastats.internal.dto;\n \n-import static org.openhab.binding.coronastats.internal.CoronaStatsBindingConstants.*;\n-\n-import java.time.ZoneId;\n-import java.time.ZonedDateTime;\n-import java.util.Collections;\n-import java.util.Date;\n-import java.util.HashMap;\n-import java.util.Map;\n-\n import org.eclipse.jdt.annotation.NonNullByDefault;\n-import org.eclipse.smarthome.core.library.types.DateTimeType;\n-import org.eclipse.smarthome.core.types.State;\n-import org.eclipse.smarthome.core.types.UnDefType;\n \n /**\n  * The {@link CoronaStatsCountry} class holds the internal data representation of each Country\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1MDkyMQ==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409050921", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        updateStatus(ThingStatus.ONLINE);\n          \n          \n            \n                        updateStatus(ThingStatus.UNKNOWN);", "author": "kaikreuzer", "createdAt": "2020-04-15T18:34:25Z", "path": "bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsBridgeHandler.java", "diffHunk": "@@ -0,0 +1,211 @@\n+/**\r\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\r\n+ *\r\n+ * See the NOTICE file(s) distributed with this work for additional\r\n+ * information.\r\n+ *\r\n+ * This program and the accompanying materials are made available under the\r\n+ * terms of the Eclipse Public License 2.0 which is available at\r\n+ * http://www.eclipse.org/legal/epl-2.0\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ */\r\n+package org.openhab.binding.coronastats.internal.handler;\r\n+\r\n+import java.net.URI;\r\n+import java.util.Set;\r\n+import java.net.SocketTimeoutException;\r\n+import java.util.concurrent.CompletableFuture;\r\n+import java.util.concurrent.ConcurrentHashMap;\r\n+import java.util.concurrent.ScheduledFuture;\r\n+import java.util.concurrent.TimeUnit;\r\n+import java.util.concurrent.TimeoutException;\r\n+\r\n+import com.google.gson.Gson;\r\n+import com.google.gson.JsonSyntaxException;\r\n+\r\n+import org.eclipse.jdt.annotation.NonNullByDefault;\r\n+import org.eclipse.jdt.annotation.Nullable;\r\n+import org.eclipse.jetty.client.HttpClient;\r\n+import org.eclipse.jetty.client.HttpResponse;\r\n+import org.eclipse.jetty.client.api.Request;\r\n+import org.eclipse.jetty.client.api.Result;\r\n+import org.eclipse.jetty.client.util.BufferingResponseListener;\r\n+import org.eclipse.jetty.http.HttpMethod;\r\n+import org.eclipse.smarthome.core.thing.Bridge;\r\n+import org.eclipse.smarthome.core.thing.ChannelUID;\r\n+import org.eclipse.smarthome.core.thing.Thing;\r\n+import org.eclipse.smarthome.core.thing.ThingStatus;\r\n+import org.eclipse.smarthome.core.thing.ThingStatusDetail;\r\n+import org.eclipse.smarthome.core.thing.binding.BaseBridgeHandler;\r\n+import org.eclipse.smarthome.core.thing.binding.ThingHandler;\r\n+import org.eclipse.smarthome.core.types.Command;\r\n+import org.eclipse.smarthome.core.types.RefreshType;\r\n+import org.openhab.binding.coronastats.internal.CoronaStatsPollingException;\r\n+import org.openhab.binding.coronastats.internal.config.CoronaStatsBridgeConfiguration;\r\n+import org.openhab.binding.coronastats.internal.dto.CoronaStats;\r\n+import org.slf4j.Logger;\r\n+import org.slf4j.LoggerFactory;\r\n+\r\n+/**\r\n+ * The {@link CoronaStatsBridgeHandler} is the handler for bridge thing\r\n+ *\r\n+ * @author Johannes Ott - Initial contribution\r\n+ */\r\n+@NonNullByDefault\r\n+public class CoronaStatsBridgeHandler extends BaseBridgeHandler {\r\n+    private static final String CORONASTATS_URL = \"https://corona-stats.online/?format=json\";\r\n+\r\n+    private final Logger logger = LoggerFactory.getLogger(CoronaStatsBridgeHandler.class);\r\n+\r\n+    private CoronaStatsBridgeConfiguration bridgeConfig = new CoronaStatsBridgeConfiguration();\r\n+    private @Nullable ScheduledFuture<?> pollingJob;\r\n+    private @Nullable CoronaStats coronaStats;\r\n+    private final Set<CoronaStatsThingHandler> listeners = ConcurrentHashMap.newKeySet();\r\n+    private final HttpClient client;\r\n+    private final Gson gson = new Gson();\r\n+\r\n+    public CoronaStatsBridgeHandler(Bridge bridge, HttpClient client) {\r\n+        super(bridge);\r\n+        this.client = client;\r\n+    }\r\n+\r\n+    @Override\r\n+    public void handleCommand(ChannelUID channelUID, Command command) {\r\n+        if (command instanceof RefreshType) {\r\n+            final CoronaStats localCoronaStats = coronaStats;\r\n+            if (localCoronaStats != null) {\r\n+                notifyOnUpdate(localCoronaStats);\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    @Override\r\n+    public void initialize() {\r\n+        logger.debug(\"Initializing Corona Stats bridge handler\");\r\n+        bridgeConfig = getConfigAs(CoronaStatsBridgeConfiguration.class);\r\n+\r\n+        if (bridgeConfig.isValid()) {\r\n+            startPolling();\r\n+            updateStatus(ThingStatus.ONLINE);\r", "originalCommit": "a29c3acd127bc827a7ecf9d82a821faf1b48f0bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEyMTc0MQ==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409121741", "bodyText": "Changed", "author": "DerOetzi", "createdAt": "2020-04-15T20:43:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1MDkyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "3fdbf06a31ec00f97792c2ea36356002422b0880", "chunk": "diff --git a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsBridgeHandler.java b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsBridgeHandler.java\nindex 7830cd3eea..85b7ac6a3b 100644\n--- a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsBridgeHandler.java\n+++ b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsBridgeHandler.java\n\n@@ -61,7 +61,7 @@ public class CoronaStatsBridgeHandler extends BaseBridgeHandler {\n     private CoronaStatsBridgeConfiguration bridgeConfig = new CoronaStatsBridgeConfiguration();\n     private @Nullable ScheduledFuture<?> pollingJob;\n     private @Nullable CoronaStats coronaStats;\n-    private final Set<CoronaStatsThingHandler> listeners = ConcurrentHashMap.newKeySet();\n+    private final Set<CoronaStatsCountryHandler> listeners = ConcurrentHashMap.newKeySet();\n     private final HttpClient client;\n     private final Gson gson = new Gson();\n \n"}}, {"oid": "3fdbf06a31ec00f97792c2ea36356002422b0880", "url": "https://github.com/openhab/openhab-addons/commit/3fdbf06a31ec00f97792c2ea36356002422b0880", "message": "[CoronaStats] Initial contribution bridge is running\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:18Z", "type": "commit"}, {"oid": "f1b9073f91f506d74ef73b1c7e4186d167391450", "url": "https://github.com/openhab/openhab-addons/commit/f1b9073f91f506d74ef73b1c7e4186d167391450", "message": "[CoronaStats] Country thing working\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:18Z", "type": "commit"}, {"oid": "30068e16963b94564da2f23170fd0e488ce2d321", "url": "https://github.com/openhab/openhab-addons/commit/30068e16963b94564da2f23170fd0e488ce2d321", "message": "[CoronaStats] Finished initial development\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:19Z", "type": "commit"}, {"oid": "5db97edcfaeafb4495c39d37ee7b37a76548481b", "url": "https://github.com/openhab/openhab-addons/commit/5db97edcfaeafb4495c39d37ee7b37a76548481b", "message": "[CoronaStats] Fixed small checkstyle findings\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:19Z", "type": "commit"}, {"oid": "b2af6eba3c3a97f98e39d4348da61ffd1ce0849c", "url": "https://github.com/openhab/openhab-addons/commit/b2af6eba3c3a97f98e39d4348da61ffd1ce0849c", "message": "[CoronaStats] Bridge and world thing merged\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:19Z", "type": "commit"}, {"oid": "4b41e00590d4279f18a9b566b557cbc10b0aa325", "url": "https://github.com/openhab/openhab-addons/commit/4b41e00590d4279f18a9b566b557cbc10b0aa325", "message": "[CoronaStats] Merge Bridge and world thing in README\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:19Z", "type": "commit"}, {"oid": "a554c500a120a9696f7abb1b102acb18e41ff0af", "url": "https://github.com/openhab/openhab-addons/commit/a554c500a120a9696f7abb1b102acb18e41ff0af", "message": "[CoronaStats] First draft DisvoceryService\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:19Z", "type": "commit"}, {"oid": "a554c500a120a9696f7abb1b102acb18e41ff0af", "url": "https://github.com/openhab/openhab-addons/commit/a554c500a120a9696f7abb1b102acb18e41ff0af", "message": "[CoronaStats] First draft DisvoceryService\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:37:19Z", "type": "forcePushed"}, {"oid": "ff21650bd147ad5f9db3f0621a65a29b82c07fcb", "url": "https://github.com/openhab/openhab-addons/commit/ff21650bd147ad5f9db3f0621a65a29b82c07fcb", "message": "[CoronaStats] Added discovery information to README\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T17:52:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwNjkyMg==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409806922", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final String WORLD_LABEL = \"CoronaStats World\";\n          \n          \n            \n                public static final String WORLD_LABEL = \"Corona Statistics (World)\";", "author": "kaikreuzer", "createdAt": "2020-04-16T19:46:13Z", "path": "bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/CoronaStatsBindingConstants.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/**\r\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\r\n+ *\r\n+ * See the NOTICE file(s) distributed with this work for additional\r\n+ * information.\r\n+ *\r\n+ * This program and the accompanying materials are made available under the\r\n+ * terms of the Eclipse Public License 2.0 which is available at\r\n+ * http://www.eclipse.org/legal/epl-2.0\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ */\r\n+package org.openhab.binding.coronastats.internal;\r\n+\r\n+import java.util.Collections;\r\n+import java.util.Set;\r\n+import java.util.stream.Collectors;\r\n+import java.util.stream.Stream;\r\n+\r\n+import org.eclipse.jdt.annotation.NonNullByDefault;\r\n+import org.eclipse.smarthome.core.thing.ThingTypeUID;\r\n+\r\n+/**\r\n+ * The {@link CoronaStatsBindingConstants} class defines common constants, which are\r\n+ * used across the whole binding.\r\n+ *\r\n+ * @author Johannes Ott - Initial contribution\r\n+ */\r\n+@NonNullByDefault\r\n+public class CoronaStatsBindingConstants {\r\n+\r\n+    public static final String BINDING_ID = \"coronastats\";\r\n+\r\n+    // World\r\n+    public static final ThingTypeUID THING_TYPE_WORLD = new ThingTypeUID(BINDING_ID, \"world\");\r\n+    public static final String STATS = \"stats\";\r\n+    public static final String WORLD_LABEL = \"CoronaStats World\";\r", "originalCommit": "ff21650bd147ad5f9db3f0621a65a29b82c07fcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgxNjE0Mw==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409816143", "bodyText": "Changed", "author": "DerOetzi", "createdAt": "2020-04-16T20:03:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwNjkyMg=="}], "type": "inlineReview", "revised_code": {"commit": "97d42eb57ae8b214538d0b3fca541cb2b667696d", "chunk": "diff --git a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/CoronaStatsBindingConstants.java b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/CoronaStatsBindingConstants.java\nindex 869ee4f969..594887ea8b 100644\n--- a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/CoronaStatsBindingConstants.java\n+++ b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/CoronaStatsBindingConstants.java\n\n@@ -34,7 +34,7 @@ public class CoronaStatsBindingConstants {\n     // World\n     public static final ThingTypeUID THING_TYPE_WORLD = new ThingTypeUID(BINDING_ID, \"world\");\n     public static final String STATS = \"stats\";\n-    public static final String WORLD_LABEL = \"CoronaStats World\";\n+    public static final String WORLD_LABEL = \"Corona Statistics (World)\";\n \n     // Country\n     public static final ThingTypeUID THING_TYPE_COUNTRY = new ThingTypeUID(BINDING_ID, \"country\");\n"}}, {"oid": "97d42eb57ae8b214538d0b3fca541cb2b667696d", "url": "https://github.com/openhab/openhab-addons/commit/97d42eb57ae8b214538d0b3fca541cb2b667696d", "message": "[CoronaStats] Changed some wordings like suggested\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T20:02:01Z", "type": "commit"}, {"oid": "20ae76084a97894a402508790d5aedbb5b995228", "url": "https://github.com/openhab/openhab-addons/commit/20ae76084a97894a402508790d5aedbb5b995228", "message": "[CoronaStats] Checkstyle fix DiscoveryService\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T20:08:05Z", "type": "commit"}, {"oid": "dbb52c31d5cc8cff959132d8908a691862682246", "url": "https://github.com/openhab/openhab-addons/commit/dbb52c31d5cc8cff959132d8908a691862682246", "message": "[CoronaStats] A few more small checkstyles\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T20:22:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE3ODUxNg==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409178516", "bodyText": "I don't see a reason for this to be synchronized", "author": "cpmeister", "createdAt": "2020-04-15T22:47:53Z", "path": "bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsCountryHandler.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/**\r\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\r\n+ *\r\n+ * See the NOTICE file(s) distributed with this work for additional\r\n+ * information.\r\n+ *\r\n+ * This program and the accompanying materials are made available under the\r\n+ * terms of the Eclipse Public License 2.0 which is available at\r\n+ * http://www.eclipse.org/legal/epl-2.0\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ */\r\n+package org.openhab.binding.coronastats.internal.handler;\r\n+\r\n+import org.eclipse.jdt.annotation.NonNullByDefault;\r\n+import org.eclipse.jdt.annotation.Nullable;\r\n+import org.eclipse.smarthome.core.thing.Bridge;\r\n+import org.eclipse.smarthome.core.thing.ChannelUID;\r\n+import org.eclipse.smarthome.core.thing.Thing;\r\n+import org.eclipse.smarthome.core.thing.ThingStatus;\r\n+import org.eclipse.smarthome.core.thing.ThingStatusDetail;\r\n+import org.eclipse.smarthome.core.thing.binding.BaseThingHandler;\r\n+import org.eclipse.smarthome.core.thing.binding.ThingHandler;\r\n+import org.eclipse.smarthome.core.types.Command;\r\n+import org.eclipse.smarthome.core.types.RefreshType;\r\n+import org.openhab.binding.coronastats.internal.config.CoronaStatsCountryConfiguration;\r\n+import org.openhab.binding.coronastats.internal.dto.CoronaStats;\r\n+import org.openhab.binding.coronastats.internal.dto.CoronaStatsCountry;\r\n+import org.slf4j.Logger;\r\n+import org.slf4j.LoggerFactory;\r\n+\r\n+/**\r\n+ * The {@link CoronaStatsCountryHandler} is the handler for country thing\r\n+ *\r\n+ * @author Johannes Ott - Initial contribution\r\n+ */\r\n+@NonNullByDefault\r\n+public class CoronaStatsCountryHandler extends BaseThingHandler {\r\n+\r\n+    private final Logger logger = LoggerFactory.getLogger(CoronaStatsCountryHandler.class);\r\n+\r\n+    private CoronaStatsCountryConfiguration thingConfig = new CoronaStatsCountryConfiguration();\r\n+\r\n+    public CoronaStatsCountryHandler(Thing thing) {\r\n+        super(thing);\r\n+    }\r\n+\r\n+    @Override\r\n+    public void initialize() {\r\n+        thingConfig = getConfigAs(CoronaStatsCountryConfiguration.class);\r\n+        logger.debug(\"Initializing Corona Stats country handler for country code {}\", thingConfig.getCountryCode());\r\n+\r\n+        if (thingConfig.isValid()) {\r\n+            CoronaStatsWorldHandler handler = getBridgeHandler();\r\n+            if (handler == null) {\r\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, \"Bridge handler missing\");\r\n+            } else {\r\n+                updateStatus(ThingStatus.ONLINE);\r\n+            }\r\n+        } else {\r\n+            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, \"No valid country code given.\");\r\n+        }\r\n+    }\r\n+\r\n+    @Override\r\n+    public void dispose() {\r\n+        logger.debug(\"CoronaStats country handler disposes.\");\r\n+    }\r\n+\r\n+    @Override\r\n+    public void handleCommand(ChannelUID channelUID, Command command) {\r\n+        if (command instanceof RefreshType) {\r\n+            refresh();\r\n+        }\r\n+    }\r\n+\r\n+    private void refresh() {\r\n+        CoronaStatsWorldHandler handler = getBridgeHandler();\r\n+        if (handler != null) {\r\n+            CoronaStats coronaStats = handler.getCoronaStats();\r\n+            if (coronaStats != null) {\r\n+                notifyOnUpdate(coronaStats);\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    private synchronized @Nullable CoronaStatsWorldHandler getBridgeHandler() {\r", "originalCommit": "ebb6770865cc4db0c4095244786d2c45cc5b3622", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzOTc1Ng==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409839756", "bodyText": "I don't know from which binding I copied this now, but I didn't understand as well. Thought it is some framework specific thing. So if you think we can remove as well, I will do.", "author": "DerOetzi", "createdAt": "2020-04-16T20:49:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE3ODUxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg0MjQ5OQ==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409842499", "bodyText": "Yep, please remove synchronized", "author": "cpmeister", "createdAt": "2020-04-16T20:55:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE3ODUxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg0NDA3MA==", "url": "https://github.com/openhab/openhab-addons/pull/7358#discussion_r409844070", "bodyText": "Removed", "author": "DerOetzi", "createdAt": "2020-04-16T20:58:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE3ODUxNg=="}], "type": "inlineReview", "revised_code": {"commit": "3fdbf06a31ec00f97792c2ea36356002422b0880", "chunk": "diff --git a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsCountryHandler.java b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsCountryHandler.java\nindex 86d61a7517..804231d97a 100644\n--- a/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsCountryHandler.java\n+++ b/bundles/org.openhab.binding.coronastats/src/main/java/org/openhab/binding/coronastats/internal/handler/CoronaStatsCountryHandler.java\n\n@@ -1,111 +1,27 @@\n-/**\n- * Copyright (c) 2010-2020 Contributors to the openHAB project\n- *\n- * See the NOTICE file(s) distributed with this work for additional\n- * information.\n- *\n- * This program and the accompanying materials are made available under the\n- * terms of the Eclipse Public License 2.0 which is available at\n- * http://www.eclipse.org/legal/epl-2.0\n- *\n- * SPDX-License-Identifier: EPL-2.0\n- */\n-package org.openhab.binding.coronastats.internal.handler;\n-\n-import org.eclipse.jdt.annotation.NonNullByDefault;\n-import org.eclipse.jdt.annotation.Nullable;\n-import org.eclipse.smarthome.core.thing.Bridge;\n-import org.eclipse.smarthome.core.thing.ChannelUID;\n-import org.eclipse.smarthome.core.thing.Thing;\n-import org.eclipse.smarthome.core.thing.ThingStatus;\n-import org.eclipse.smarthome.core.thing.ThingStatusDetail;\n-import org.eclipse.smarthome.core.thing.binding.BaseThingHandler;\n-import org.eclipse.smarthome.core.thing.binding.ThingHandler;\n-import org.eclipse.smarthome.core.types.Command;\n-import org.eclipse.smarthome.core.types.RefreshType;\n-import org.openhab.binding.coronastats.internal.config.CoronaStatsCountryConfiguration;\n-import org.openhab.binding.coronastats.internal.dto.CoronaStats;\n-import org.openhab.binding.coronastats.internal.dto.CoronaStatsCountry;\n-import org.slf4j.Logger;\n-import org.slf4j.LoggerFactory;\n-\n-/**\n- * The {@link CoronaStatsCountryHandler} is the handler for country thing\n- *\n- * @author Johannes Ott - Initial contribution\n- */\n-@NonNullByDefault\n-public class CoronaStatsCountryHandler extends BaseThingHandler {\n-\n-    private final Logger logger = LoggerFactory.getLogger(CoronaStatsCountryHandler.class);\n-\n-    private CoronaStatsCountryConfiguration thingConfig = new CoronaStatsCountryConfiguration();\n-\n-    public CoronaStatsCountryHandler(Thing thing) {\n-        super(thing);\n-    }\n-\n-    @Override\n-    public void initialize() {\n-        thingConfig = getConfigAs(CoronaStatsCountryConfiguration.class);\n-        logger.debug(\"Initializing Corona Stats country handler for country code {}\", thingConfig.getCountryCode());\n-\n-        if (thingConfig.isValid()) {\n-            CoronaStatsWorldHandler handler = getBridgeHandler();\n-            if (handler == null) {\n-                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, \"Bridge handler missing\");\n-            } else {\n-                updateStatus(ThingStatus.ONLINE);\n-            }\n-        } else {\n-            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, \"No valid country code given.\");\n-        }\n-    }\n-\n-    @Override\n-    public void dispose() {\n-        logger.debug(\"CoronaStats country handler disposes.\");\n-    }\n-\n-    @Override\n-    public void handleCommand(ChannelUID channelUID, Command command) {\n-        if (command instanceof RefreshType) {\n-            refresh();\n-        }\n-    }\n-\n-    private void refresh() {\n-        CoronaStatsWorldHandler handler = getBridgeHandler();\n-        if (handler != null) {\n-            CoronaStats coronaStats = handler.getCoronaStats();\n-            if (coronaStats != null) {\n-                notifyOnUpdate(coronaStats);\n-            }\n-        }\n-    }\n-\n-    private synchronized @Nullable CoronaStatsWorldHandler getBridgeHandler() {\n-        Bridge bridge = getBridge();\n-        if (bridge != null) {\n-            ThingHandler handler = bridge.getHandler();\n-            if (handler instanceof CoronaStatsWorldHandler) {\n-                return (CoronaStatsWorldHandler) handler;\n-            }\n-        }\n-\n-        return null;\n-    }\n-\n-    public void notifyOnUpdate(CoronaStats coronaStats) {\n-        CoronaStatsCountry country = coronaStats.getCountry(thingConfig.getCountryCode());\n-        if (country == null) {\n-            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR, \"Country not found\");\n-            return;\n-        }\n-\n-        updateStatus(ThingStatus.ONLINE);\n-        updateProperties(country.getProperties());\n-\n-        country.getChannelsStateMap().forEach(this::updateState);\n-    }\n-}\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.coronastats.internal.handler;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.binding.coronastats.internal.dto.CoronaStats;\n+\n+/**\n+ * The {@link CoronaStatsCountryHandler} is the handler for world/country thing\n+ *\n+ * @author Johannes Ott - Initial contribution\n+ */\n+@NonNullByDefault\n+public class CoronaStatsCountryHandler {\n+    public void notifyOnUpdate(CoronaStats localCoronaStats) {\n+    }\n+}\n"}}, {"oid": "2969007717b26ae2dc7f9147f90f8e2dccf7a8d5", "url": "https://github.com/openhab/openhab-addons/commit/2969007717b26ae2dc7f9147f90f8e2dccf7a8d5", "message": "[CoronaStats] Removed unneccessary sychronized keyword\n\nSigned-off-by: Johannes DerOetzi Ott <info@johannes-ott.net>", "committedDate": "2020-04-16T20:57:38Z", "type": "commit"}]}