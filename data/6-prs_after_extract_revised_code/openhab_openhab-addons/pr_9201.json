{"pr_number": 9201, "pr_title": "[avmfritz] Properly interrupt monitor thread upon dispose", "pr_createdAt": "2020-12-02T16:19:04Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/9201", "timeline": [{"oid": "26927d6916da2ad15de727ae268e53abec52e3ac", "url": "https://github.com/openhab/openhab-addons/commit/26927d6916da2ad15de727ae268e53abec52e3ac", "message": "Properly interrupt monitor thread upon dispose\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>", "committedDate": "2020-12-02T16:15:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI2MjAxNw==", "url": "https://github.com/openhab/openhab-addons/pull/9201#discussion_r535262017", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (monitorThread != null) {\n          \n          \n            \n                        monitorThread.interrupt();\n          \n          \n            \n                    }\n          \n          \n            \n                    CallMonitorThread monitorThread = this.monitorThread;\n          \n          \n            \n                    if (monitorThread != null) {\n          \n          \n            \n                        monitorThread.interrupt();\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nOtherwise this results in a null-warning", "author": "J-N-K", "createdAt": "2020-12-03T14:16:49Z", "path": "bundles/org.openhab.binding.avmfritz/src/main/java/org/openhab/binding/avmfritz/internal/callmonitor/CallMonitor.java", "diffHunk": "@@ -75,6 +75,9 @@ public CallMonitor(String ip, BoxHandler handler, ScheduledExecutorService sched\n      */\n     public void dispose() {\n         reconnectJob.cancel(true);\n+        if (monitorThread != null) {\n+            monitorThread.interrupt();\n+        }", "originalCommit": "26927d6916da2ad15de727ae268e53abec52e3ac", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "57b4deae44be69f8d4818ddbbe978b169ca0939b", "chunk": "diff --git a/bundles/org.openhab.binding.avmfritz/src/main/java/org/openhab/binding/avmfritz/internal/callmonitor/CallMonitor.java b/bundles/org.openhab.binding.avmfritz/src/main/java/org/openhab/binding/avmfritz/internal/callmonitor/CallMonitor.java\nindex b643d844c2..6905c9aa49 100644\n--- a/bundles/org.openhab.binding.avmfritz/src/main/java/org/openhab/binding/avmfritz/internal/callmonitor/CallMonitor.java\n+++ b/bundles/org.openhab.binding.avmfritz/src/main/java/org/openhab/binding/avmfritz/internal/callmonitor/CallMonitor.java\n\n@@ -75,6 +75,7 @@ public class CallMonitor {\n      */\n     public void dispose() {\n         reconnectJob.cancel(true);\n+        CallMonitorThread monitorThread = this.monitorThread;\n         if (monitorThread != null) {\n             monitorThread.interrupt();\n         }\n"}}, {"oid": "57b4deae44be69f8d4818ddbbe978b169ca0939b", "url": "https://github.com/openhab/openhab-addons/commit/57b4deae44be69f8d4818ddbbe978b169ca0939b", "message": "Update bundles/org.openhab.binding.avmfritz/src/main/java/org/openhab/binding/avmfritz/internal/callmonitor/CallMonitor.java\n\nCo-authored-by: J-N-K <J-N-K@users.noreply.github.com>", "committedDate": "2020-12-03T14:19:43Z", "type": "commit"}]}