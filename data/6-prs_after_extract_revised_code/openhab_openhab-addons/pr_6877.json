{"pr_number": 6877, "pr_title": "[modbus] Fix for data things not initializing properly in some cases.", "pr_createdAt": "2020-01-19T17:25:42Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6877", "timeline": [{"oid": "510bc2234f2127981a83ed242d8d02366aefadad", "url": "https://github.com/openhab/openhab-addons/commit/510bc2234f2127981a83ed242d8d02366aefadad", "message": "[modbus] Fix for data things not initializing properly in some cases.\n\nFixes #6876\n\nSigned-off-by: Sami Salonen <ssalonen@gmail.com>", "committedDate": "2020-01-20T05:52:05Z", "type": "commit"}, {"oid": "510bc2234f2127981a83ed242d8d02366aefadad", "url": "https://github.com/openhab/openhab-addons/commit/510bc2234f2127981a83ed242d8d02366aefadad", "message": "[modbus] Fix for data things not initializing properly in some cases.\n\nFixes #6876\n\nSigned-off-by: Sami Salonen <ssalonen@gmail.com>", "committedDate": "2020-01-20T05:52:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNTkyNw==", "url": "https://github.com/openhab/openhab-addons/pull/6877#discussion_r371015927", "bodyText": "I wonder if this is the correct way to do it. @openhab/core-maintainers, I would expect that after dispose() was called, the thing-status should not be ONLINE, OFFLINE or UNKNOWN but UNINITIALIZED or something like that. Since BaseThingHandler.dispose() does not contain any code, the thing status stays unchanged even if dispose() has been called and initialize() is called again.", "author": "J-N-K", "createdAt": "2020-01-26T17:21:53Z", "path": "bundles/org.openhab.binding.modbus/src/main/java/org/openhab/binding/modbus/internal/handler/ModbusPollerThingHandlerImpl.java", "diffHunk": "@@ -296,6 +296,11 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n \n     @Override\n     public synchronized void initialize() {\n+        if (this.getThing().getStatus().equals(ThingStatus.ONLINE)) {", "originalCommit": "510bc2234f2127981a83ed242d8d02366aefadad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAyMTA0Nw==", "url": "https://github.com/openhab/openhab-addons/pull/6877#discussion_r371021047", "bodyText": "Thank you @J-N-K for the review!\nI am not certain of the details so I simply followed what was previously done in the related PR.\nHappy to accomodate the PR if there is a better way to do it of course.\n#5244 (comment)", "author": "ssalonen", "createdAt": "2020-01-26T18:46:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNTkyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5NTcwOQ==", "url": "https://github.com/openhab/openhab-addons/pull/6877#discussion_r379895709", "bodyText": "I still feel that this should be handled differently and that the bug is in the implementation in the BaseThingHandler that doesn't ensure that a disposed thing has a state that is not ONLINE but the bug needs to be fixed.", "author": "J-N-K", "createdAt": "2020-02-16T11:29:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNTkyNw=="}], "type": "inlineReview", "revised_code": null}]}