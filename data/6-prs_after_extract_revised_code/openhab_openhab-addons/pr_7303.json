{"pr_number": 7303, "pr_title": "[pjlink] enhanced logging (show byte array in addition to string)", "pr_createdAt": "2020-04-05T12:27:55Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7303", "timeline": [{"oid": "ba0dc647b540d8e2916f391bdddb67db6130d163", "url": "https://github.com/openhab/openhab-addons/commit/ba0dc647b540d8e2916f391bdddb67db6130d163", "message": "enhanced logging (show byte array in addition to string)\n\nSigned-off-by: Nils Schnabel <github@to.nilsschnabel.de>", "committedDate": "2020-04-05T12:23:54Z", "type": "commit"}, {"oid": "33fc4c27a4e1b5adae0408496bd80a3f03729677", "url": "https://github.com/openhab/openhab-addons/commit/33fc4c27a4e1b5adae0408496bd80a3f03729677", "message": "mention the type of status that could not be understood\n\nSigned-off-by: Nils Schnabel <github@to.nilsschnabel.de>", "committedDate": "2020-04-05T12:40:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5ODE5Mg==", "url": "https://github.com/openhab/openhab-addons/pull/7303#discussion_r403698192", "bodyText": "It's always good to have more details!\nThe string operations are relatively expensive so it's better to make the logging conditional using logger.isDebugEnabled() . Another improvement is to always remove .toString() from all log message parameters because it will automatically be called by the logging framework but only when the logging is enabled.", "author": "wborn", "createdAt": "2020-04-05T12:54:57Z", "path": "bundles/org.openhab.binding.pjlinkdevice/src/main/java/org/openhab/binding/pjlinkdevice/internal/device/PJLinkDevice.java", "diffHunk": "@@ -230,11 +231,11 @@ public synchronized String execute(String command) throws IOException, Authentic\n             logger.debug(\"Got empty string response for request '{}' from {}, waiting for another line\", response,\n                     fullCommand.replaceAll(\"\\r\", \"\\\\\\\\r\"));\n         }\n-        logger.debug(\"Got response '{}' for request '{}' from {}\", response, fullCommand.replaceAll(\"\\r\", \"\\\\\\\\r\"),\n-                ipAddress.toString());\n         if (response == null) {\n             throw new ResponseException(\"Response to request '\" + fullCommand.replaceAll(\"\\r\", \"\\\\\\\\r\") + \"' was null\");\n         }\n+        logger.debug(\"Got response '{}' ({}) for request '{}' from {}\", response, Arrays.toString(response.getBytes()),", "originalCommit": "33fc4c27a4e1b5adae0408496bd80a3f03729677", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5ODg4OA==", "url": "https://github.com/openhab/openhab-addons/pull/7303#discussion_r403698888", "bodyText": "Thanks @wborn, I just did the adjustment \ud83d\udc4d", "author": "nils", "createdAt": "2020-04-05T13:01:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY5ODE5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "0e075972499d848b856d7af87c50641766bf4fd8", "chunk": "diff --git a/bundles/org.openhab.binding.pjlinkdevice/src/main/java/org/openhab/binding/pjlinkdevice/internal/device/PJLinkDevice.java b/bundles/org.openhab.binding.pjlinkdevice/src/main/java/org/openhab/binding/pjlinkdevice/internal/device/PJLinkDevice.java\nindex 2a34ae59e2..e7da5cfe1f 100644\n--- a/bundles/org.openhab.binding.pjlinkdevice/src/main/java/org/openhab/binding/pjlinkdevice/internal/device/PJLinkDevice.java\n+++ b/bundles/org.openhab.binding.pjlinkdevice/src/main/java/org/openhab/binding/pjlinkdevice/internal/device/PJLinkDevice.java\n\n@@ -234,8 +234,10 @@ public class PJLinkDevice {\n         if (response == null) {\n             throw new ResponseException(\"Response to request '\" + fullCommand.replaceAll(\"\\r\", \"\\\\\\\\r\") + \"' was null\");\n         }\n-        logger.debug(\"Got response '{}' ({}) for request '{}' from {}\", response, Arrays.toString(response.getBytes()),\n-                fullCommand.replaceAll(\"\\r\", \"\\\\\\\\r\"), ipAddress.toString());\n+        if (logger.isDebugEnabled()) {\n+            logger.debug(\"Got response '{}' ({}) for request '{}' from {}\", response,\n+                    Arrays.toString(response.getBytes()), fullCommand.replaceAll(\"\\r\", \"\\\\\\\\r\"), ipAddress);\n+        }\n         return response;\n     }\n \n"}}, {"oid": "0e075972499d848b856d7af87c50641766bf4fd8", "url": "https://github.com/openhab/openhab-addons/commit/0e075972499d848b856d7af87c50641766bf4fd8", "message": "performance considerations for logging\n\nSigned-off-by: Nils Schnabel <github@to.nilsschnabel.de>", "committedDate": "2020-04-05T12:58:48Z", "type": "commit"}]}