{"pr_number": 7728, "pr_title": "[powermax] Removed dependency on 'org.apache.commons.io.IOUtils'", "pr_createdAt": "2020-05-22T08:15:14Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7728", "timeline": [{"oid": "6957f7ac56b32462861cc9684a1567eb7c88ddfd", "url": "https://github.com/openhab/openhab-addons/commit/6957f7ac56b32462861cc9684a1567eb7c88ddfd", "message": "[powermax] Removed dependency on 'org.apache.commons.io.IOUtils'\n\nRelative to #7722\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-05-22T08:12:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIwNDY3OQ==", "url": "https://github.com/openhab/openhab-addons/pull/7728#discussion_r429204679", "bodyText": "I think using closeQuietly is wrong here. The description clearly says, that it should only be used when normal processing failed (e.g. to close after an exception has been thrown and we are in a finally block), This is clearly not the case here. I would prefer to log something in case closing failes.", "author": "J-N-K", "createdAt": "2020-05-22T11:58:09Z", "path": "bundles/org.openhab.binding.powermax/src/main/java/org/openhab/binding/powermax/internal/connector/PowermaxConnector.java", "diffHunk": "@@ -63,11 +62,17 @@ protected void cleanup() {\n         }\n \n         if (output != null) {\n-            IOUtils.closeQuietly(output);\n+            try {", "originalCommit": "6957f7ac56b32462861cc9684a1567eb7c88ddfd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIyMTg2NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7728#discussion_r429221865", "bodyText": "All bindings are doing that like that !\nI have already 12 PRs to update in this case.\nIs DEBUG level ok for you ?", "author": "lolodomo", "createdAt": "2020-05-22T12:39:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIwNDY3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "a374d10bf720589cb347077bcf6f7e1a6b6ba573", "chunk": "diff --git a/bundles/org.openhab.binding.powermax/src/main/java/org/openhab/binding/powermax/internal/connector/PowermaxConnector.java b/bundles/org.openhab.binding.powermax/src/main/java/org/openhab/binding/powermax/internal/connector/PowermaxConnector.java\nindex 265663f348..07d39c7b34 100644\n--- a/bundles/org.openhab.binding.powermax/src/main/java/org/openhab/binding/powermax/internal/connector/PowermaxConnector.java\n+++ b/bundles/org.openhab.binding.powermax/src/main/java/org/openhab/binding/powermax/internal/connector/PowermaxConnector.java\n\n@@ -65,6 +65,7 @@ public abstract class PowermaxConnector implements PowermaxConnectorInterface {\n             try {\n                 output.close();\n             } catch (IOException e) {\n+                logger.debug(\"Error while closing the output stream: {}\", e.getMessage());\n             }\n         }\n \n"}}, {"oid": "a374d10bf720589cb347077bcf6f7e1a6b6ba573", "url": "https://github.com/openhab/openhab-addons/commit/a374d10bf720589cb347077bcf6f7e1a6b6ba573", "message": "Log added in case of error while closing input/output stream\n\nSinged-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-05-22T14:08:21Z", "type": "commit"}, {"oid": "5e321536215c993ba1a34938a22ddb24e87e4035", "url": "https://github.com/openhab/openhab-addons/commit/5e321536215c993ba1a34938a22ddb24e87e4035", "message": "In/out streams closed when the socket is closed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>", "committedDate": "2020-05-23T12:23:55Z", "type": "commit"}]}