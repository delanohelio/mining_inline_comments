{"pr_number": 1307, "pr_title": "(#1284) Fixed TempFolder close method", "pr_createdAt": "2020-02-14T06:27:11Z", "pr_url": "https://github.com/yegor256/cactoos/pull/1307", "timeline": [{"oid": "d428ea132f6e5a4718693b84eec40c1f9749949c", "url": "https://github.com/yegor256/cactoos/commit/d428ea132f6e5a4718693b84eec40c1f9749949c", "message": "(#1284) Fixed TempFolder close method", "committedDate": "2020-02-14T06:25:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk5NzAxNw==", "url": "https://github.com/yegor256/cactoos/pull/1307#discussion_r380997017", "bodyText": "@fanifieiev Let's split this into two different test methods, one for each assertion", "author": "paulodamaso", "createdAt": "2020-02-18T23:30:34Z", "path": "src/test/java/org/cactoos/io/TempFolderTest.java", "diffHunk": "@@ -61,4 +67,51 @@ public void deletesDirectory() throws Exception {\n             new IsTrue()\n         ).affirm();\n     }\n+\n+    @Test\n+    public void deletesNonEmptyDirectory() throws Exception {\n+        final TempFolder temp = new TempFolder();\n+        final Path root = temp.value();\n+        new ForEach<>(\n+            new ProcOf<String>(\n+                name -> {\n+                    final Path dir = Files.createDirectories(\n+                        new File(root.toFile(), name).toPath()\n+                    );\n+                    new ForEach<>(\n+                        new ProcOf<String>(\n+                            filename -> {\n+                                new TempFile(\n+                                    () -> dir,\n+                                    filename,\n+                                    \"\"\n+                                ).value();\n+                                return true;\n+                            }\n+                        )\n+                    ).exec(\n+                        new IterableOf<>(\n+                            \"file1.txt\", \"file2.txt\", \"file3.txt\"\n+                        )\n+                    );\n+                    return true;\n+                }\n+            )\n+        ).exec(\n+            new IterableOf<>(\n+                \"a\", \"b\", \"c\", \"d\", \"e\"\n+            )\n+        );\n+        new Assertion<>(", "originalCommit": "d428ea132f6e5a4718693b84eec40c1f9749949c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7351e47bb5c9817a39eb32bd388fe96cdb35faf4", "chunk": "diff --git a/src/test/java/org/cactoos/io/TempFolderTest.java b/src/test/java/org/cactoos/io/TempFolderTest.java\nindex 06a695e5..f86d6ef7 100644\n--- a/src/test/java/org/cactoos/io/TempFolderTest.java\n+++ b/src/test/java/org/cactoos/io/TempFolderTest.java\n\n@@ -102,16 +103,53 @@ public final class TempFolderTest {\n                 \"a\", \"b\", \"c\", \"d\", \"e\"\n             )\n         );\n+        temp.close();\n         new Assertion<>(\n-            \"Directory contains files and sub directories\",\n+            \"Can't delete not empty folder while closing\",\n             temp.value().toFile().exists(),\n-            new IsTrue()\n+            new IsNot<>(new IsTrue())\n         ).affirm();\n-        temp.close();\n+    }\n+\n+    @Test\n+    public void createDirectoryWithDirectoriesAndFiles() throws Exception {\n+        final TempFolder temp = new TempFolder();\n+        final Path root = temp.value();\n+        new ForEach<>(\n+            new ProcOf<String>(\n+                name -> {\n+                    final Path dir = Files.createDirectories(\n+                        new File(root.toFile(), name).toPath()\n+                    );\n+                    new ForEach<>(\n+                        new ProcOf<String>(\n+                            filename -> {\n+                                new TempFile(\n+                                    () -> dir,\n+                                    filename,\n+                                    \"\"\n+                                ).value();\n+                                return true;\n+                            }\n+                        )\n+                    ).exec(\n+                        new IterableOf<>(\n+                            \"1.txt\", \"2.txt\", \"3.txt\"\n+                        )\n+                    );\n+                    return true;\n+                }\n+            )\n+        ).exec(\n+            new IterableOf<>(\n+                \"1\", \"2\", \"3\", \"4\", \"5\"\n+            )\n+        );\n         new Assertion<>(\n-            \"Can't delete not empty folder while closing\",\n-            !temp.value().toFile().exists(),\n+            \"Directory contains files and sub directories\",\n+            temp.value().toFile().exists(),\n             new IsTrue()\n         ).affirm();\n+        temp.close();\n     }\n }\n"}}, {"oid": "7351e47bb5c9817a39eb32bd388fe96cdb35faf4", "url": "https://github.com/yegor256/cactoos/commit/7351e47bb5c9817a39eb32bd388fe96cdb35faf4", "message": "(#1284) Splitted unit tests", "committedDate": "2020-02-19T01:41:47Z", "type": "commit"}]}