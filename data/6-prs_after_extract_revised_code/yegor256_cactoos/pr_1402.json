{"pr_number": 1402, "pr_title": "For #1313: Additional ctors for `Filtered`", "pr_createdAt": "2020-06-22T12:11:28Z", "pr_url": "https://github.com/yegor256/cactoos/pull/1402", "timeline": [{"oid": "8aa89bd0d91117e17d3f2b112f5c23822060f83d", "url": "https://github.com/yegor256/cactoos/commit/8aa89bd0d91117e17d3f2b112f5c23822060f83d", "message": "(#1313) Add ctors", "committedDate": "2020-06-22T11:21:34Z", "type": "commit"}, {"oid": "3997065830a76e85c075dd5aa7fc70f2c95d71f4", "url": "https://github.com/yegor256/cactoos/commit/3997065830a76e85c075dd5aa7fc70f2c95d71f4", "message": "(#1313) Add ctor alike `StartsWith` has", "committedDate": "2020-06-22T11:21:54Z", "type": "commit"}, {"oid": "27d814e2753fed0e91137017d002475ac834b615", "url": "https://github.com/yegor256/cactoos/commit/27d814e2753fed0e91137017d002475ac834b615", "message": "(#1313) Add ctor for `Iterable` without `Scalar`", "committedDate": "2020-06-22T11:23:36Z", "type": "commit"}, {"oid": "eb44c11b159f77ec35dddb5167216eef6e974ed3", "url": "https://github.com/yegor256/cactoos/commit/eb44c11b159f77ec35dddb5167216eef6e974ed3", "message": "(#1313) Fix qulice complains", "committedDate": "2020-06-22T12:07:17Z", "type": "commit"}, {"oid": "92851043e71cd8658aafc5b2843075bf6835142d", "url": "https://github.com/yegor256/cactoos/commit/92851043e71cd8658aafc5b2843075bf6835142d", "message": "(#1313) Grammar fixes", "committedDate": "2020-06-22T12:10:38Z", "type": "commit"}, {"oid": "a3002e54b16be68f1dcdc097bf34baceba082271", "url": "https://github.com/yegor256/cactoos/commit/a3002e54b16be68f1dcdc097bf34baceba082271", "message": "(#1313) Extract method & reword puzzle", "committedDate": "2020-06-22T13:11:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY5NzQwMw==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r443697403", "bodyText": "@andreoss if you introduce a new secondary constructor, put it before the primary, not after", "author": "victornoel", "createdAt": "2020-06-22T16:52:44Z", "path": "src/main/java/org/cactoos/scalar/Reduced.java", "diffHunk": "@@ -97,6 +97,21 @@ public Reduced(\n         this.function = reduce;\n     }\n \n+    /**\n+     * Ctor.\n+     * @param values The scalars\n+     * @param reduce Reducing function\n+     */\n+    public Reduced(", "originalCommit": "a3002e54b16be68f1dcdc097bf34baceba082271", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0bcaca834582852af9699259af006fdda1047e8e", "chunk": "diff --git a/src/main/java/org/cactoos/scalar/Reduced.java b/src/main/java/org/cactoos/scalar/Reduced.java\nindex 6e7ddb0c..e080b8a5 100644\n--- a/src/main/java/org/cactoos/scalar/Reduced.java\n+++ b/src/main/java/org/cactoos/scalar/Reduced.java\n\n@@ -86,30 +86,30 @@ public final class Reduced<T> implements Scalar<T> {\n \n     /**\n      * Ctor.\n+     * @param values The scalars\n      * @param reduce Reducing function\n-     * @param scalars The scalars\n      */\n     public Reduced(\n-        final BiFunc<T, T, T> reduce,\n-        final Iterable<Scalar<T>> scalars\n+        final Iterable<T> values,\n+        final BiFunc<T, T, T> reduce\n     ) {\n-        this.items = scalars;\n-        this.function = reduce;\n+        this(\n+            reduce,\n+            new Mapped<>(x -> () -> x, values)\n+        );\n     }\n \n     /**\n      * Ctor.\n-     * @param values The scalars\n      * @param reduce Reducing function\n+     * @param scalars The scalars\n      */\n     public Reduced(\n-        final Iterable<T> values,\n-        final BiFunc<T, T, T> reduce\n+        final BiFunc<T, T, T> reduce,\n+        final Iterable<Scalar<T>> scalars\n     ) {\n-        this(\n-            reduce,\n-            new Mapped<>(x -> () -> x, values)\n-        );\n+        this.items = scalars;\n+        this.function = reduce;\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY5Nzc4Nw==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r443697787", "bodyText": "@andreoss when you introduce a secondary constructor, please put it before the primary one, not after.", "author": "victornoel", "createdAt": "2020-06-22T16:53:23Z", "path": "src/main/java/org/cactoos/text/EndsWith.java", "diffHunk": "@@ -62,6 +62,15 @@ public EndsWith(final Text origin, final Text suffix) {\n         this.suffix = suffix;\n     }\n \n+    /**\n+     * Ctor.\n+     * @param origin The origin\n+     * @param suffix The suffix\n+     */\n+    public EndsWith(final String origin, final String suffix) {", "originalCommit": "a3002e54b16be68f1dcdc097bf34baceba082271", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0bcaca834582852af9699259af006fdda1047e8e", "chunk": "diff --git a/src/main/java/org/cactoos/text/EndsWith.java b/src/main/java/org/cactoos/text/EndsWith.java\nindex bf63bd82..51be8067 100644\n--- a/src/main/java/org/cactoos/text/EndsWith.java\n+++ b/src/main/java/org/cactoos/text/EndsWith.java\n\n@@ -57,9 +57,8 @@ public final class EndsWith implements Scalar<Boolean> {\n      * @param origin The origin\n      * @param suffix The suffix\n      */\n-    public EndsWith(final Text origin, final Text suffix) {\n-        this.origin = origin;\n-        this.suffix = suffix;\n+    public EndsWith(final Text origin, final String suffix) {\n+        this(origin, new TextOf(suffix));\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY5OTk0Mg==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r443699942", "bodyText": "@andreoss what is test really testing? Clearly not Filtered since it is tested similarly in the previous method", "author": "victornoel", "createdAt": "2020-06-22T16:57:08Z", "path": "src/test/java/org/cactoos/iterable/FilteredTest.java", "diffHunk": "@@ -130,12 +138,63 @@ public void withItemsNotEmpty() {\n     public void withoutItemsIsEmpty() {\n         new Assertion<>(\n             \"Must be empty without items\",\n-            new Filtered<String>(\n+            new Filtered<>(\n                 input -> input.length() > 16,\n                 new IterableOf<>(\"third\", \"fourth\")\n             ),\n             new IsEmptyIterable<>()\n         ).affirm();\n     }\n \n+    @Test\n+    public void filtersWithFunc() {\n+        new Assertion<>(\n+            \"Must be filtered with Scalar<Boolean> result\",\n+            new Filtered<>(\n+                new IterableOf<>(\"a\", \"b\", \"c\", \"x\"),\n+                input -> new StartsWith(input, \"c\")\n+            ),\n+            new HasValues<>(\"c\")\n+        ).affirm();\n+    }\n+\n+    @Test\n+    public void filtersWithTwoFuncsCombined() throws Exception {\n+        new Assertion<>(\n+            \"Must be filtered with two filters\",\n+            new Filtered<>(\n+                new IterableOf<>(\"ay\", \"xb\", \"yx\", \"xy\"),\n+                FilteredTest.combine(\n+                    input -> new StartsWith(input, \"x\"),\n+                    input -> new EndsWith(input, \"y\")", "originalCommit": "a3002e54b16be68f1dcdc097bf34baceba082271", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc1NzQxMA==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r443757410", "bodyText": "@victornoel I was trying to emphasize the need for func.And, so I've added this test and the puzzle.\nI will remove the test above test than.", "author": "andreoss", "createdAt": "2020-06-22T18:46:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY5OTk0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDAwMjMzOQ==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r444002339", "bodyText": "@andreoss I\u00a0think we should keep the other one that you deleted and remove all the extra constructors you added that are not needed and also to remove this combine method.The other test 1) was simpler 2) had less dependencies 3) perfectly did the job of testing Filtered.", "author": "victornoel", "createdAt": "2020-06-23T06:58:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY5OTk0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "0bcaca834582852af9699259af006fdda1047e8e", "chunk": "diff --git a/src/test/java/org/cactoos/iterable/FilteredTest.java b/src/test/java/org/cactoos/iterable/FilteredTest.java\nindex c72ac035..a10e21c8 100644\n--- a/src/test/java/org/cactoos/iterable/FilteredTest.java\n+++ b/src/test/java/org/cactoos/iterable/FilteredTest.java\n\n@@ -146,18 +146,6 @@ public final class FilteredTest {\n         ).affirm();\n     }\n \n-    @Test\n-    public void filtersWithFunc() {\n-        new Assertion<>(\n-            \"Must be filtered with Scalar<Boolean> result\",\n-            new Filtered<>(\n-                new IterableOf<>(\"a\", \"b\", \"c\", \"x\"),\n-                input -> new StartsWith(input, \"c\")\n-            ),\n-            new HasValues<>(\"c\")\n-        ).affirm();\n-    }\n-\n     @Test\n     public void filtersWithTwoFuncsCombined() throws Exception {\n         new Assertion<>(\n"}}, {"oid": "0bcaca834582852af9699259af006fdda1047e8e", "url": "https://github.com/yegor256/cactoos/commit/0bcaca834582852af9699259af006fdda1047e8e", "message": "(#1313) Code review", "committedDate": "2020-06-22T20:38:47Z", "type": "commit"}, {"oid": "4731f1478821738f3e6315e123c698935c559683", "url": "https://github.com/yegor256/cactoos/commit/4731f1478821738f3e6315e123c698935c559683", "message": "(#1313) Simplify test", "committedDate": "2020-06-23T08:35:01Z", "type": "commit"}, {"oid": "12d2a8acabc4706955634e210ce6d1f3111a9d21", "url": "https://github.com/yegor256/cactoos/commit/12d2a8acabc4706955634e210ce6d1f3111a9d21", "message": "(#1313) Fix coverage", "committedDate": "2020-06-23T11:33:44Z", "type": "forcePushed"}, {"oid": "f92a516aefeb22fb72f27537668d47f4413740d8", "url": "https://github.com/yegor256/cactoos/commit/f92a516aefeb22fb72f27537668d47f4413740d8", "message": "(#1313) Fix coverage", "committedDate": "2020-06-23T14:15:31Z", "type": "commit"}, {"oid": "f92a516aefeb22fb72f27537668d47f4413740d8", "url": "https://github.com/yegor256/cactoos/commit/f92a516aefeb22fb72f27537668d47f4413740d8", "message": "(#1313) Fix coverage", "committedDate": "2020-06-23T14:15:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyMzU1OA==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r446523558", "bodyText": "@andreoss I believe the name of the test is incorrect?", "author": "victornoel", "createdAt": "2020-06-27T12:48:10Z", "path": "src/test/java/org/cactoos/iterable/FilteredTest.java", "diffHunk": "@@ -130,12 +133,24 @@ public void withItemsNotEmpty() {\n     public void withoutItemsIsEmpty() {\n         new Assertion<>(\n             \"Must be empty without items\",\n-            new Filtered<String>(\n+            new Filtered<>(\n                 input -> input.length() > 16,\n                 new IterableOf<>(\"third\", \"fourth\")\n             ),\n             new IsEmptyIterable<>()\n         ).affirm();\n     }\n \n+    @Test\n+    public void filtersWithTwoFuncsCombined() throws Exception {", "originalCommit": "f92a516aefeb22fb72f27537668d47f4413740d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5NTMwMw==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r446595303", "bodyText": "@victornoel Done", "author": "andreoss", "createdAt": "2020-06-28T03:35:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyMzU1OA=="}], "type": "inlineReview", "revised_code": {"commit": "a2f1685bf18b1720309de1c8f90a8cb63248724f", "chunk": "diff --git a/src/test/java/org/cactoos/iterable/FilteredTest.java b/src/test/java/org/cactoos/iterable/FilteredTest.java\nindex 2630b6be..c59c5ee1 100644\n--- a/src/test/java/org/cactoos/iterable/FilteredTest.java\n+++ b/src/test/java/org/cactoos/iterable/FilteredTest.java\n\n@@ -142,7 +142,7 @@ public final class FilteredTest {\n     }\n \n     @Test\n-    public void filtersWithTwoFuncsCombined() throws Exception {\n+    public void filtersWithFuncToScalar() {\n         new Assertion<>(\n             \"Must be filtered\",\n             new Filtered<>(\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyMzU3OQ==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r446523579", "bodyText": "@andreoss I blieve this is out of scope of this PR now, no?", "author": "victornoel", "createdAt": "2020-06-27T12:48:36Z", "path": "src/main/java/org/cactoos/scalar/Reduced.java", "diffHunk": "@@ -84,6 +84,21 @@\n      */\n     private final BiFunc<T, T, T> function;\n \n+    /**\n+     * Ctor.\n+     * @param values The scalars\n+     * @param reduce Reducing function\n+     */\n+    public Reduced(", "originalCommit": "f92a516aefeb22fb72f27537668d47f4413740d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5NTA4Mg==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r446595082", "bodyText": "@victornoel Removed", "author": "andreoss", "createdAt": "2020-06-28T03:31:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyMzU3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "2d457cc991661bb8db0f66ec98d32cdf5c67a0ca", "chunk": "diff --git a/src/main/java/org/cactoos/scalar/Reduced.java b/src/main/java/org/cactoos/scalar/Reduced.java\nindex e080b8a5..85574fb0 100644\n--- a/src/main/java/org/cactoos/scalar/Reduced.java\n+++ b/src/main/java/org/cactoos/scalar/Reduced.java\n\n@@ -84,21 +84,6 @@ public final class Reduced<T> implements Scalar<T> {\n      */\n     private final BiFunc<T, T, T> function;\n \n-    /**\n-     * Ctor.\n-     * @param values The scalars\n-     * @param reduce Reducing function\n-     */\n-    public Reduced(\n-        final Iterable<T> values,\n-        final BiFunc<T, T, T> reduce\n-    ) {\n-        this(\n-            reduce,\n-            new Mapped<>(x -> () -> x, values)\n-        );\n-    }\n-\n     /**\n      * Ctor.\n      * @param reduce Reducing function\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyMzU5Ng==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r446523596", "bodyText": "@andreoss this is also out of scope of this PR.", "author": "victornoel", "createdAt": "2020-06-27T12:48:50Z", "path": "src/main/java/org/cactoos/text/EndsWith.java", "diffHunk": "@@ -43,6 +43,15 @@\n      */\n     private final Text suffix;\n \n+    /**\n+     * Ctor.\n+     * @param origin The origin\n+     * @param suffix The suffix\n+     */\n+    public EndsWith(final String origin, final String suffix) {", "originalCommit": "f92a516aefeb22fb72f27537668d47f4413740d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5NTEwMw==", "url": "https://github.com/yegor256/cactoos/pull/1402#discussion_r446595103", "bodyText": "@victornoel Added it for a test, which got removed. Done", "author": "andreoss", "createdAt": "2020-06-28T03:32:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyMzU5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "dc409a3578ab9632fc5c45afbf4ac3fe3d1fea42", "chunk": "diff --git a/src/main/java/org/cactoos/text/EndsWith.java b/src/main/java/org/cactoos/text/EndsWith.java\nindex 51be8067..a9da4705 100644\n--- a/src/main/java/org/cactoos/text/EndsWith.java\n+++ b/src/main/java/org/cactoos/text/EndsWith.java\n\n@@ -43,15 +43,6 @@ public final class EndsWith implements Scalar<Boolean> {\n      */\n     private final Text suffix;\n \n-    /**\n-     * Ctor.\n-     * @param origin The origin\n-     * @param suffix The suffix\n-     */\n-    public EndsWith(final String origin, final String suffix) {\n-        this(new TextOf(origin), suffix);\n-    }\n-\n     /**\n      * Ctor.\n      * @param origin The origin\n"}}, {"oid": "2d457cc991661bb8db0f66ec98d32cdf5c67a0ca", "url": "https://github.com/yegor256/cactoos/commit/2d457cc991661bb8db0f66ec98d32cdf5c67a0ca", "message": "(#1313) Remove out-of-scope change", "committedDate": "2020-06-28T03:18:12Z", "type": "commit"}, {"oid": "dc409a3578ab9632fc5c45afbf4ac3fe3d1fea42", "url": "https://github.com/yegor256/cactoos/commit/dc409a3578ab9632fc5c45afbf4ac3fe3d1fea42", "message": "(#1313) Remove unused ctor", "committedDate": "2020-06-28T03:18:48Z", "type": "commit"}, {"oid": "a2f1685bf18b1720309de1c8f90a8cb63248724f", "url": "https://github.com/yegor256/cactoos/commit/a2f1685bf18b1720309de1c8f90a8cb63248724f", "message": "(#1313) Fix test name", "committedDate": "2020-06-28T03:34:26Z", "type": "commit"}]}