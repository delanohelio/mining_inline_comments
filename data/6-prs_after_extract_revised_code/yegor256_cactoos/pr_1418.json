{"pr_number": 1418, "pr_title": "For #1396: Partial migration to `Assertion` from `cactoos-matchers`", "pr_createdAt": "2020-07-12T22:32:05Z", "pr_url": "https://github.com/yegor256/cactoos/pull/1418", "timeline": [{"oid": "07ad9856cd257e9f286fae4b5fde98d674ca8c7e", "url": "https://github.com/yegor256/cactoos/commit/07ad9856cd257e9f286fae4b5fde98d674ca8c7e", "message": "(#1396) Inline inside `org.cactoos.func`", "committedDate": "2020-07-12T22:58:32Z", "type": "forcePushed"}, {"oid": "2138d8139269fd6532fbb79c2732e78652194fb5", "url": "https://github.com/yegor256/cactoos/commit/2138d8139269fd6532fbb79c2732e78652194fb5", "message": "(#1396) Undo changes in `org.cactoos.map`", "committedDate": "2020-07-12T23:11:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NDExNA==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454044114", "bodyText": "@andreoss This name change input to input1 was intentional? If yes, please, add a better name than input1.", "author": "fabriciofx", "createdAt": "2020-07-14T01:30:50Z", "path": "src/test/java/org/cactoos/func/RunnableOfTest.java", "diffHunk": "@@ -48,18 +48,18 @@ public void convertsFuncIntoRunnable() {\n                 }\n             ),\n             new MatcherOf<Runnable>(\n-                input -> {\n-                    input.run();\n+                input1 -> {\n+                    input1.run();", "originalCommit": "f3a3474bae73b64ff04278bb0074ef97e2e182d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1Njc1OA==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454956758", "bodyText": "@fabriciofx Done", "author": "andreoss", "createdAt": "2020-07-15T10:37:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NDExNA=="}], "type": "inlineReview", "revised_code": {"commit": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "chunk": "diff --git a/src/test/java/org/cactoos/func/RunnableOfTest.java b/src/test/java/org/cactoos/func/RunnableOfTest.java\nindex 2802078b..55ee91c0 100644\n--- a/src/test/java/org/cactoos/func/RunnableOfTest.java\n+++ b/src/test/java/org/cactoos/func/RunnableOfTest.java\n\n@@ -48,8 +48,8 @@ public final class RunnableOfTest {\n                 }\n             ),\n             new MatcherOf<Runnable>(\n-                input1 -> {\n-                    input1.run();\n+                input -> {\n+                    input.run();\n                     return done.get();\n                 }\n             )\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NDMzMg==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454044332", "bodyText": "@andreoss The same here.", "author": "fabriciofx", "createdAt": "2020-07-14T01:31:37Z", "path": "src/test/java/org/cactoos/func/RunnableOfTest.java", "diffHunk": "@@ -70,18 +70,18 @@ public void convertsProcIntoRunnable() {\n                 )\n             ),\n             new MatcherOf<Runnable>(\n-                input -> {\n-                    input.run();\n+                input1 -> {\n+                    input1.run();", "originalCommit": "f3a3474bae73b64ff04278bb0074ef97e2e182d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NjcwOA==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454956708", "bodyText": "@victornoel Done", "author": "andreoss", "createdAt": "2020-07-15T10:37:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NDMzMg=="}], "type": "inlineReview", "revised_code": {"commit": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "chunk": "diff --git a/src/test/java/org/cactoos/func/RunnableOfTest.java b/src/test/java/org/cactoos/func/RunnableOfTest.java\nindex 2802078b..55ee91c0 100644\n--- a/src/test/java/org/cactoos/func/RunnableOfTest.java\n+++ b/src/test/java/org/cactoos/func/RunnableOfTest.java\n\n@@ -70,8 +70,8 @@ public final class RunnableOfTest {\n                 )\n             ),\n             new MatcherOf<Runnable>(\n-                input1 -> {\n-                    input1.run();\n+                input -> {\n+                    input.run();\n                     return done.get();\n                 }\n             )\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NjE2NQ==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454046165", "bodyText": "@andreoss Sorry, but isn't very clear why 1) Revert the  44540d94 commit and 3) Undo 1. Can you check it is correct and add more information to be clearer?", "author": "fabriciofx", "createdAt": "2020-07-14T01:38:14Z", "path": "src/test/java/org/cactoos/package-info.java", "diffHunk": "@@ -25,6 +25,14 @@\n /**\n  * Tests.\n  *\n+ * @todo #1396:30min Continue replacing usage of MatcherAssert.assertThat with\n+ *  Assertion from cactoos-matchers.\n+ *  1) Revert 44540d94\n+ *  2) Choose package & inline assertThat in it\n+ *  3) Undo 1)\n+ *  4) Update puzzle for the next package", "originalCommit": "f3a3474bae73b64ff04278bb0074ef97e2e182d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5MzcyMA==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454193720", "bodyText": "@andreoss I'm not a big fan of that, it seems to be very dependent on the IDE you are using (IDEA I suppose?), not everybody is using that IDE, so as asked by @fabriciofx be clearer on the instructions and say with which IDE it is for.", "author": "victornoel", "createdAt": "2020-07-14T08:32:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NjE2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NjE3NQ==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454956175", "bodyText": "@victornoel @fabriciofx You are right. I reworded it in more general terms. And now it seems that the inlining approach is more convoluted, since it leaves behind many unwanted artifacts (wrong variable names, broken indentation, etc)", "author": "andreoss", "createdAt": "2020-07-15T10:36:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA0NjE2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "chunk": "diff --git a/src/test/java/org/cactoos/package-info.java b/src/test/java/org/cactoos/package-info.java\nindex 4dd8407f..587364ec 100644\n--- a/src/test/java/org/cactoos/package-info.java\n+++ b/src/test/java/org/cactoos/package-info.java\n\n@@ -26,11 +26,8 @@\n  * Tests.\n  *\n  * @todo #1396:30min Continue replacing usage of MatcherAssert.assertThat with\n- *  Assertion from cactoos-matchers.\n- *  1) Revert 44540d94\n- *  2) Choose package & inline assertThat in it\n- *  3) Undo 1)\n- *  4) Update puzzle for the next package\n+ *  Assertion from cactoos-matchers. Keep PR short and limit the changes to\n+ *  single package. Update this puzzle for the next package.\n  *  After all packages are done, add MatcherAssert to forbidden-apis.txt\n  *\n  * @since 0.9\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5MjE2Mg==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454192162", "bodyText": "@andreoss all of those should be transformed to use Assertion with Throws", "author": "victornoel", "createdAt": "2020-07-14T08:30:09Z", "path": "src/test/java/org/cactoos/func/IoCheckedFuncTest.java", "diffHunk": "@@ -47,9 +47,11 @@ public void rethrowsIoException() {\n                 }\n             ).apply(1);\n         } catch (final IOException ex) {\n-            MatcherAssert.assertThat(\n-                ex, Matchers.is(exception)\n-            );\n+            new Assertion<>(", "originalCommit": "f3a3474bae73b64ff04278bb0074ef97e2e182d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NjMzNg==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454956336", "bodyText": "@victornoel Done", "author": "andreoss", "createdAt": "2020-07-15T10:37:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5MjE2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "chunk": "diff --git a/src/test/java/org/cactoos/func/IoCheckedFuncTest.java b/src/test/java/org/cactoos/func/IoCheckedFuncTest.java\nindex 5c411956..62a5066d 100644\n--- a/src/test/java/org/cactoos/func/IoCheckedFuncTest.java\n+++ b/src/test/java/org/cactoos/func/IoCheckedFuncTest.java\n\n@@ -40,37 +39,48 @@ public final class IoCheckedFuncTest {\n     @Test\n     public void rethrowsIoException() {\n         final IOException exception = new IOException(\"intended\");\n-        try {\n-            new IoCheckedFunc<>(\n-                (Func<Integer, String>) i -> {\n+        new Assertion<>(\n+            \"Must rethrow original IOException\",\n+            () -> new IoCheckedFunc<>(\n+                i -> {\n                     throw exception;\n                 }\n-            ).apply(1);\n-        } catch (final IOException ex) {\n-            new Assertion<>(\n-                \"\",\n-                ex,\n-                Matchers.is(exception)\n-            ).affirm();\n-        }\n+            ).apply(1),\n+            new Throws<>(\n+                exception.getMessage(),\n+                exception.getClass()\n+            )\n+        ).affirm();\n     }\n \n-    @Test(expected = IOException.class)\n-    public void rethrowsCheckedToIoException() throws Exception {\n-        new IoCheckedFunc<>(\n-            i -> {\n-                throw new IOException(\"intended to fail\");\n-            }\n-        ).apply(1);\n+    @Test\n+    public void rethrowsCheckedToIoException() {\n+        new Assertion<>(\n+            \"Must rethrow as IOException\",\n+            () -> new IoCheckedFunc<>(\n+                i -> {\n+                    throw new InterruptedException(\"intended to fail\");\n+                }\n+            ).apply(1),\n+            new Throws<>(\n+                IOException.class\n+            )\n+        ).affirm();\n     }\n \n-    @Test(expected = IllegalStateException.class)\n-    public void runtimeExceptionGoesOut() throws IOException {\n-        new IoCheckedFunc<>(\n-            i -> {\n-                throw new IllegalStateException(\"intended to fail here\");\n-            }\n-        ).apply(1);\n+    @Test\n+    public void runtimeExceptionGoesOut() {\n+        new Assertion<>(\n+            \"Must throw runtime exception as is\",\n+            () -> new IoCheckedFunc<>(\n+                i -> {\n+                    throw new IllegalStateException(\"intended to fail here\");\n+                }\n+            ).apply(1),\n+            new Throws<>(\n+                IllegalStateException.class\n+            )\n+        ).affirm();\n     }\n \n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5MjYzOQ==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454192639", "bodyText": "@andreoss all of those should have a clear message in the form \"Must...\"", "author": "victornoel", "createdAt": "2020-07-14T08:30:54Z", "path": "src/test/java/org/cactoos/func/RepeatedTest.java", "diffHunk": "@@ -49,10 +49,11 @@ public void runsFuncMultipleTimes() throws Exception {\n             },\n             3\n         );\n-        MatcherAssert.assertThat(\n+        new Assertion<>(\n+            \"\",", "originalCommit": "f3a3474bae73b64ff04278bb0074ef97e2e182d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NjQxNA==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r454956414", "bodyText": "@victornoel Done", "author": "andreoss", "createdAt": "2020-07-15T10:37:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE5MjYzOQ=="}], "type": "inlineReview", "revised_code": {"commit": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "chunk": "diff --git a/src/test/java/org/cactoos/func/RepeatedTest.java b/src/test/java/org/cactoos/func/RepeatedTest.java\nindex 5b693eac..be19d17f 100644\n--- a/src/test/java/org/cactoos/func/RepeatedTest.java\n+++ b/src/test/java/org/cactoos/func/RepeatedTest.java\n\n@@ -44,13 +45,11 @@ public final class RepeatedTest {\n     public void runsFuncMultipleTimes() throws Exception {\n         final Iterator<Integer> iter = new IteratorOf<>(1, 2, 5, 6);\n         final Func<Boolean, Integer> func = new Repeated<>(\n-            input -> {\n-                return iter.next();\n-            },\n+            input -> iter.next(),\n             3\n         );\n         new Assertion<>(\n-            \"\",\n+            \"Must be applied 3 times\",\n             func.apply(true),\n             Matchers.equalTo(5)\n         ).affirm();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTExMjk5OQ==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r455112999", "bodyText": "@andreoss Choose package and replace assertThat with Assertion. Have you already said it on the fist phrase? To me, it seems redundant.", "author": "fabriciofx", "createdAt": "2020-07-15T14:51:27Z", "path": "src/test/java/org/cactoos/package-info.java", "diffHunk": "@@ -25,6 +25,11 @@\n /**\n  * Tests.\n  *\n+ * @todo #1396:30min Continue replacing usage of MatcherAssert.assertThat with\n+ *  Assertion from cactoos-matchers. Choose package and replace assertThat\n+ *  with Assertion. Update puzzle for the next package", "originalCommit": "0eb226459fab02879e5ea19226ea6dc5fabc3b7a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQzNTc3NA==", "url": "https://github.com/yegor256/cactoos/pull/1418#discussion_r455435774", "bodyText": "@fabriciofx Done", "author": "andreoss", "createdAt": "2020-07-16T00:11:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTExMjk5OQ=="}], "type": "inlineReview", "revised_code": {"commit": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "chunk": "diff --git a/src/test/java/org/cactoos/package-info.java b/src/test/java/org/cactoos/package-info.java\nindex 43c002ee..587364ec 100644\n--- a/src/test/java/org/cactoos/package-info.java\n+++ b/src/test/java/org/cactoos/package-info.java\n\n@@ -26,8 +26,8 @@\n  * Tests.\n  *\n  * @todo #1396:30min Continue replacing usage of MatcherAssert.assertThat with\n- *  Assertion from cactoos-matchers. Choose package and replace assertThat\n- *  with Assertion. Update puzzle for the next package\n+ *  Assertion from cactoos-matchers. Keep PR short and limit the changes to\n+ *  single package. Update this puzzle for the next package.\n  *  After all packages are done, add MatcherAssert to forbidden-apis.txt\n  *\n  * @since 0.9\n"}}, {"oid": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "url": "https://github.com/yegor256/cactoos/commit/39dbbf4cb70b16958a9dbe3d97b652764e24549f", "message": "(#1396) Replace `assertThat` with `Assertion` for `org.cactoos.func` package", "committedDate": "2020-07-16T00:16:33Z", "type": "commit"}, {"oid": "39dbbf4cb70b16958a9dbe3d97b652764e24549f", "url": "https://github.com/yegor256/cactoos/commit/39dbbf4cb70b16958a9dbe3d97b652764e24549f", "message": "(#1396) Replace `assertThat` with `Assertion` for `org.cactoos.func` package", "committedDate": "2020-07-16T00:16:33Z", "type": "forcePushed"}]}