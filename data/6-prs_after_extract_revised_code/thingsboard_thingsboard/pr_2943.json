{"pr_number": 2943, "pr_title": "Added proxy configs to rest api call rule node", "pr_createdAt": "2020-06-11T11:22:29Z", "pr_url": "https://github.com/thingsboard/thingsboard/pull/2943", "timeline": [{"oid": "267f541f71ffa6907b2cbfc7ea554f715765ac57", "url": "https://github.com/thingsboard/thingsboard/commit/267f541f71ffa6907b2cbfc7ea554f715765ac57", "message": "Added proxy configs to rest api call rule node", "committedDate": "2020-06-11T11:20:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyMzQwMQ==", "url": "https://github.com/thingsboard/thingsboard/pull/2943#discussion_r440023401", "bodyText": "add validation of config and meaningful exception", "author": "ashvayka", "createdAt": "2020-06-15T08:49:09Z", "path": "rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/rest/TbHttpClient.java", "diffHunk": "@@ -63,7 +69,25 @@\n             if (config.getMaxParallelRequestsCount() > 0) {\n                 pendingFutures = new ConcurrentLinkedDeque<>();\n             }\n-            if (config.isUseSimpleClientHttpFactory()) {\n+\n+            if (config.isEnableProxy()) {\n+                SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();", "originalCommit": "267f541f71ffa6907b2cbfc7ea554f715765ac57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwMjkwNA==", "url": "https://github.com/thingsboard/thingsboard/pull/2943#discussion_r440102904", "bodyText": "done", "author": "YevhenBondarenko", "createdAt": "2020-06-15T11:14:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAyMzQwMQ=="}], "type": "inlineReview", "revised_code": {"commit": "884fd6dbed318ac53ec30955f37cfa4f44c2f31e", "chunk": "diff --git a/rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/rest/TbHttpClient.java b/rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/rest/TbHttpClient.java\nindex 198819355a..3cbc090da1 100644\n--- a/rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/rest/TbHttpClient.java\n+++ b/rule-engine/rule-engine-components/src/main/java/org/thingsboard/rule/engine/rest/TbHttpClient.java\n\n@@ -71,6 +71,9 @@ class TbHttpClient {\n             }\n \n             if (config.isEnableProxy()) {\n+                checkProxyHost(config.getProxyHost());\n+                checkProxyPort(config.getProxyPort());\n+\n                 SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();\n                 InetSocketAddress address = new InetSocketAddress(config.getProxyHost(), config.getProxyPort());\n                 Proxy proxy = new Proxy(config.getProxyType(), address);\n"}}, {"oid": "884fd6dbed318ac53ec30955f37cfa4f44c2f31e", "url": "https://github.com/thingsboard/thingsboard/commit/884fd6dbed318ac53ec30955f37cfa4f44c2f31e", "message": "added validation proxyHost and proxyPort", "committedDate": "2020-06-15T10:38:10Z", "type": "commit"}, {"oid": "4d1d0c96b07bcab14611237eaf45dc04ff07f860", "url": "https://github.com/thingsboard/thingsboard/commit/4d1d0c96b07bcab14611237eaf45dc04ff07f860", "message": "refactored checkProxyPort", "committedDate": "2020-06-15T11:16:55Z", "type": "commit"}, {"oid": "f968a9b8f34f196d5a3f91a50382d446891f0eea", "url": "https://github.com/thingsboard/thingsboard/commit/f968a9b8f34f196d5a3f91a50382d446891f0eea", "message": "TbHttpClient improvements", "committedDate": "2020-06-15T15:37:34Z", "type": "commit"}]}