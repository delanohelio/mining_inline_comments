{"pr_number": 3071, "pr_title": "added logging of MQTT payload errors v.2.5.3", "pr_createdAt": "2020-07-09T11:24:13Z", "pr_url": "https://github.com/thingsboard/thingsboard/pull/3071", "timeline": [{"oid": "416e6b337c848fbd48acb4d614cb9578bd924189", "url": "https://github.com/thingsboard/thingsboard/commit/416e6b337c848fbd48acb4d614cb9578bd924189", "message": "added logging of MQTT payload errors", "committedDate": "2020-07-09T11:22:38Z", "type": "commit"}, {"oid": "3fc1e72c668c65987e1cb270fed0daca10993069", "url": "https://github.com/thingsboard/thingsboard/commit/3fc1e72c668c65987e1cb270fed0daca10993069", "message": "added logging of MQTT payload errors", "committedDate": "2020-07-09T11:27:08Z", "type": "commit"}, {"oid": "f951126b8d9aea6814294e1b60da57d3e1039491", "url": "https://github.com/thingsboard/thingsboard/commit/f951126b8d9aea6814294e1b60da57d3e1039491", "message": "added logging of MQTT payload errors", "committedDate": "2020-07-09T11:56:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA0MzA3Mg==", "url": "https://github.com/thingsboard/thingsboard/pull/3071#discussion_r458043072", "bodyText": "Please change this to WARN or INFO. This may DDoS our demo server :-)", "author": "ashvayka", "createdAt": "2020-07-21T12:01:28Z", "path": "common/transport/mqtt/src/main/java/org/thingsboard/server/transport/mqtt/adaptors/JsonMqttAdaptor.java", "diffHunk": "@@ -207,6 +207,7 @@ public static JsonElement validateJsonPayload(UUID sessionId, ByteBuf payloadDat\n         try {\n             return new JsonParser().parse(payload);\n         } catch (JsonSyntaxException ex) {\n+            log.error(\"Payload is in incorrect format: {}\", payload);", "originalCommit": "f951126b8d9aea6814294e1b60da57d3e1039491", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA0NDYwNQ==", "url": "https://github.com/thingsboard/thingsboard/pull/3071#discussion_r458044605", "bodyText": "done", "author": "yefimov-andrey", "createdAt": "2020-07-21T12:04:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA0MzA3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "b801bef3039e6d07740e748e38888ec84820b52a", "chunk": "diff --git a/common/transport/mqtt/src/main/java/org/thingsboard/server/transport/mqtt/adaptors/JsonMqttAdaptor.java b/common/transport/mqtt/src/main/java/org/thingsboard/server/transport/mqtt/adaptors/JsonMqttAdaptor.java\nindex 6a28d9b47e..caa627451f 100644\n--- a/common/transport/mqtt/src/main/java/org/thingsboard/server/transport/mqtt/adaptors/JsonMqttAdaptor.java\n+++ b/common/transport/mqtt/src/main/java/org/thingsboard/server/transport/mqtt/adaptors/JsonMqttAdaptor.java\n\n@@ -207,7 +207,7 @@ public class JsonMqttAdaptor implements MqttTransportAdaptor {\n         try {\n             return new JsonParser().parse(payload);\n         } catch (JsonSyntaxException ex) {\n-            log.error(\"Payload is in incorrect format: {}\", payload);\n+            log.warn(\"Payload is in incorrect format: {}\", payload);\n             throw new AdaptorException(ex);\n         }\n     }\n"}}, {"oid": "b801bef3039e6d07740e748e38888ec84820b52a", "url": "https://github.com/thingsboard/thingsboard/commit/b801bef3039e6d07740e748e38888ec84820b52a", "message": "changed logging level to WARN", "committedDate": "2020-07-21T12:03:45Z", "type": "commit"}]}