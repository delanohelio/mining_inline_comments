{"pr_number": 2589, "pr_title": "[2.5] created rabbitmq queue", "pr_createdAt": "2020-04-07T18:21:35Z", "pr_url": "https://github.com/thingsboard/thingsboard/pull/2589", "timeline": [{"oid": "1fefeacbf21e2c31a4f4ddf6bd2c28b3dca47657", "url": "https://github.com/thingsboard/thingsboard/commit/1fefeacbf21e2c31a4f4ddf6bd2c28b3dca47657", "message": "created main classes for RabbitMq queue", "committedDate": "2020-04-06T16:47:00Z", "type": "commit"}, {"oid": "cc1ee838e94bcc739f05cc41ff2f101ed07d9f3a", "url": "https://github.com/thingsboard/thingsboard/commit/cc1ee838e94bcc739f05cc41ff2f101ed07d9f3a", "message": "created temp version rabbitmq", "committedDate": "2020-04-07T12:42:22Z", "type": "commit"}, {"oid": "d11504f974fa8c3f7368ee96f3d888bca8a5f319", "url": "https://github.com/thingsboard/thingsboard/commit/d11504f974fa8c3f7368ee96f3d888bca8a5f319", "message": "Merge branch 'develop/2.5' of https://github.com/thingsboard/thingsboard into develop/2.5-rabbitmq\n\n# Conflicts:\n#\tcommon/queue/pom.xml", "committedDate": "2020-04-07T13:30:10Z", "type": "commit"}, {"oid": "8b4e230afc738b19c6d11ab6267854a04aaeec71", "url": "https://github.com/thingsboard/thingsboard/commit/8b4e230afc738b19c6d11ab6267854a04aaeec71", "message": "Merge branch 'develop/2.5' of https://github.com/thingsboard/thingsboard into develop/2.5-rabbitmq\n\n# Conflicts:\n#\tcommon/queue/pom.xml", "committedDate": "2020-04-07T18:19:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2MjM3OA==", "url": "https://github.com/thingsboard/thingsboard/pull/2589#discussion_r405062378", "bodyText": "no-no-no..", "author": "ashvayka", "createdAt": "2020-04-07T19:35:16Z", "path": "application/src/main/java/org/thingsboard/server/service/queue/DefaultTbCoreConsumerService.java", "diffHunk": "@@ -113,6 +113,7 @@ protected void launchMainConsumers() {\n                 try {\n                     List<TbProtoQueueMsg<ToCoreMsg>> msgs = mainConsumer.poll(pollDuration);\n                     if (msgs.isEmpty()) {\n+                        Thread.sleep(pollDuration);", "originalCommit": "8b4e230afc738b19c6d11ab6267854a04aaeec71", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d29326f0fe8c0eb909c30328e05ff609eb31da0f", "chunk": "diff --git a/application/src/main/java/org/thingsboard/server/service/queue/DefaultTbCoreConsumerService.java b/application/src/main/java/org/thingsboard/server/service/queue/DefaultTbCoreConsumerService.java\nindex 87f4fbe6bd..434f1d7eae 100644\n--- a/application/src/main/java/org/thingsboard/server/service/queue/DefaultTbCoreConsumerService.java\n+++ b/application/src/main/java/org/thingsboard/server/service/queue/DefaultTbCoreConsumerService.java\n\n@@ -113,7 +113,6 @@ public class DefaultTbCoreConsumerService extends AbstractConsumerService<ToCore\n                 try {\n                     List<TbProtoQueueMsg<ToCoreMsg>> msgs = mainConsumer.poll(pollDuration);\n                     if (msgs.isEmpty()) {\n-                        Thread.sleep(pollDuration);\n                         continue;\n                     }\n                     ConcurrentMap<UUID, TbProtoQueueMsg<ToCoreMsg>> pendingMap = msgs.stream().collect(\n"}}, {"oid": "d29326f0fe8c0eb909c30328e05ff609eb31da0f", "url": "https://github.com/thingsboard/thingsboard/commit/d29326f0fe8c0eb909c30328e05ff609eb31da0f", "message": "rabbit improvements", "committedDate": "2020-04-08T10:09:48Z", "type": "commit"}]}