{"pr_number": 5544, "pr_title": "Add SCALAR type into TransformFunctionType", "pr_createdAt": "2020-06-12T00:30:15Z", "pr_url": "https://github.com/apache/pinot/pull/5544", "timeline": [{"oid": "cc80829a4e09dd39338649b507ff9f20695a85c4", "url": "https://github.com/apache/pinot/commit/cc80829a4e09dd39338649b507ff9f20695a85c4", "message": "Add SCALAR type into TransformFunctionType\n\nInside query engine, scalar function is modeled as TransformFunction (ScalarTransformFunctionWrapper)\nAdd SCALAR type into TransformFunctionType so that FunctionDefinitionRegistry can identify scalar function as transform function", "committedDate": "2020-06-12T00:30:47Z", "type": "commit"}, {"oid": "cc80829a4e09dd39338649b507ff9f20695a85c4", "url": "https://github.com/apache/pinot/commit/cc80829a4e09dd39338649b507ff9f20695a85c4", "message": "Add SCALAR type into TransformFunctionType\n\nInside query engine, scalar function is modeled as TransformFunction (ScalarTransformFunctionWrapper)\nAdd SCALAR type into TransformFunctionType so that FunctionDefinitionRegistry can identify scalar function as transform function", "committedDate": "2020-06-12T00:30:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ5NzM0Mg==", "url": "https://github.com/apache/pinot/pull/5544#discussion_r439497342", "bodyText": "This looks a bit hacky especially if FunctionRegistry starts getting used for something else as well (in addition to scalar functions). May be update the Javadoc of FunctionRegistry to state it is for scalar functions?\nCurrently it says in-built Pinot functions which is misleading since today all functions are in-built functions.", "author": "siddharthteotia", "createdAt": "2020-06-12T15:44:35Z", "path": "pinot-common/src/main/java/org/apache/pinot/common/function/TransformFunctionType.java", "diffHunk": "@@ -70,6 +73,9 @@ public static TransformFunctionType getTransformFunctionType(String functionName\n     try {\n       return TransformFunctionType.valueOf(upperCaseFunctionName);\n     } catch (Exception e) {\n+      if (FunctionRegistry.getFunctionByName(functionName) != null) {", "originalCommit": "cc80829a4e09dd39338649b507ff9f20695a85c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU2NzY5Nw==", "url": "https://github.com/apache/pinot/pull/5544#discussion_r439567697", "bodyText": "@siddharthteotia Updated the doc, and also added a TODO to merge FunctionRegistry and FunctionDefinitionRegistry to provide one single registry for all functions.", "author": "Jackie-Jiang", "createdAt": "2020-06-12T18:02:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ5NzM0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NzI2NQ==", "url": "https://github.com/apache/pinot/pull/5544#discussion_r439587265", "bodyText": "Awesome. Thanks!", "author": "siddharthteotia", "createdAt": "2020-06-12T18:45:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ5NzM0Mg=="}], "type": "inlineReview", "revised_code": null}, {"oid": "e085cfe2eebeb927e46ca741613fb6ec230c1a20", "url": "https://github.com/apache/pinot/commit/e085cfe2eebeb927e46ca741613fb6ec230c1a20", "message": "Address comments", "committedDate": "2020-06-12T18:01:04Z", "type": "commit"}]}