{"pr_number": 5772, "pr_title": "add user info in url to auth header in HTTP getDownloadFileRequest", "pr_createdAt": "2020-07-30T07:41:12Z", "pr_url": "https://github.com/apache/pinot/pull/5772", "timeline": [{"oid": "daa04cf1887325d81f45e48bad3b21645d09584a", "url": "https://github.com/apache/pinot/commit/daa04cf1887325d81f45e48bad3b21645d09584a", "message": "add user info in url to auth header", "committedDate": "2020-07-30T07:40:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyNzY3MQ==", "url": "https://github.com/apache/pinot/pull/5772#discussion_r463227671", "bodyText": "create a variable for uri.getUserInfo", "author": "kishoreg", "createdAt": "2020-07-30T19:40:00Z", "path": "pinot-common/src/main/java/org/apache/pinot/common/utils/FileUploadDownloadClient.java", "diffHunk": "@@ -326,6 +327,11 @@ private static HttpUriRequest getSegmentCompletionProtocolRequest(URI uri, int s\n   private static HttpUriRequest getDownloadFileRequest(URI uri, int socketTimeoutMs) {\n     RequestBuilder requestBuilder = RequestBuilder.get(uri).setVersion(HttpVersion.HTTP_1_1);\n     setTimeout(requestBuilder, socketTimeoutMs);\n+    if (uri.getUserInfo() != null) {", "originalCommit": "daa04cf1887325d81f45e48bad3b21645d09584a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0a5722de2f0e6d2a00fc618078a9355985a56046", "chunk": "diff --git a/pinot-common/src/main/java/org/apache/pinot/common/utils/FileUploadDownloadClient.java b/pinot-common/src/main/java/org/apache/pinot/common/utils/FileUploadDownloadClient.java\nindex 6efa363cec..b18f1e2cb4 100644\n--- a/pinot-common/src/main/java/org/apache/pinot/common/utils/FileUploadDownloadClient.java\n+++ b/pinot-common/src/main/java/org/apache/pinot/common/utils/FileUploadDownloadClient.java\n\n@@ -327,8 +327,9 @@ public class FileUploadDownloadClient implements Closeable {\n   private static HttpUriRequest getDownloadFileRequest(URI uri, int socketTimeoutMs) {\n     RequestBuilder requestBuilder = RequestBuilder.get(uri).setVersion(HttpVersion.HTTP_1_1);\n     setTimeout(requestBuilder, socketTimeoutMs);\n-    if (uri.getUserInfo() != null) {\n-      String encoded = Base64.encodeBase64String(StringUtil.encodeUtf8(uri.getUserInfo()));\n+    String userInfo = uri.getUserInfo();\n+    if (userInfo != null) {\n+      String encoded = Base64.encodeBase64String(StringUtil.encodeUtf8(userInfo));\n       String authHeader = \"Basic \" + encoded;\n       requestBuilder.addHeader(HttpHeaders.AUTHORIZATION, authHeader);\n     }\n"}}, {"oid": "0a5722de2f0e6d2a00fc618078a9355985a56046", "url": "https://github.com/apache/pinot/commit/0a5722de2f0e6d2a00fc618078a9355985a56046", "message": "use variable for userinfo", "committedDate": "2020-07-30T19:44:09Z", "type": "commit"}]}