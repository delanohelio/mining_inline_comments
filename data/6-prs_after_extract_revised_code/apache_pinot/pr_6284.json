{"pr_number": 6284, "pr_title": " Support for text index without raw", "pr_createdAt": "2020-11-21T08:14:59Z", "pr_url": "https://github.com/apache/pinot/pull/6284", "timeline": [{"oid": "713fb2b2044702d39658b494dd49edddfb24695c", "url": "https://github.com/apache/pinot/commit/713fb2b2044702d39658b494dd49edddfb24695c", "message": "WIP - Support for text index withour raw", "committedDate": "2020-11-21T08:06:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwMzA2MQ==", "url": "https://github.com/apache/pinot/pull/6284#discussion_r528903061", "bodyText": "Does it make sense to use a single character for this? This value is never used in processing, so it is a pure memory overhead, right?", "author": "mcvsubbu", "createdAt": "2020-11-23T18:13:25Z", "path": "pinot-spi/src/main/java/org/apache/pinot/spi/config/table/FieldConfig.java", "diffHunk": "@@ -44,6 +44,9 @@\n   // the cache improves performance of repeatable queries\n   public static String TEXT_INDEX_ENABLE_QUERY_CACHE = \"enableQueryCacheForTextIndex\";\n   public static String TEXT_INDEX_USE_AND_FOR_MULTI_TERM_QUERIES = \"useANDForMultiTermTextIndexQueries\";\n+  public static String TEXT_INDEX_NO_RAW_DATA = \"noRawDataForTextIndex\";\n+  public static String TEXT_INDEX_RAW_VALUE = \"rawValueForTextIndex\";\n+  public static String TEXT_INDEX_DEFAULT_RAW_VALUE = \"null\";", "originalCommit": "713fb2b2044702d39658b494dd49edddfb24695c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0MDM5Mw==", "url": "https://github.com/apache/pinot/pull/6284#discussion_r528940393", "bodyText": "using \"n\" as default", "author": "siddharthteotia", "createdAt": "2020-11-23T19:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwMzA2MQ=="}], "type": "inlineReview", "revised_code": {"commit": "48da63916b9b526025783f4a09b12dc8df72c883", "chunk": "diff --git a/pinot-spi/src/main/java/org/apache/pinot/spi/config/table/FieldConfig.java b/pinot-spi/src/main/java/org/apache/pinot/spi/config/table/FieldConfig.java\nindex 9377b3d8cc..c9e1eb6f61 100644\n--- a/pinot-spi/src/main/java/org/apache/pinot/spi/config/table/FieldConfig.java\n+++ b/pinot-spi/src/main/java/org/apache/pinot/spi/config/table/FieldConfig.java\n\n@@ -46,7 +46,7 @@ public class FieldConfig extends BaseJsonConfig {\n   public static String TEXT_INDEX_USE_AND_FOR_MULTI_TERM_QUERIES = \"useANDForMultiTermTextIndexQueries\";\n   public static String TEXT_INDEX_NO_RAW_DATA = \"noRawDataForTextIndex\";\n   public static String TEXT_INDEX_RAW_VALUE = \"rawValueForTextIndex\";\n-  public static String TEXT_INDEX_DEFAULT_RAW_VALUE = \"null\";\n+  public static String TEXT_INDEX_DEFAULT_RAW_VALUE = \"n\";\n \n   @JsonCreator\n   public FieldConfig(@JsonProperty(value = \"name\", required = true) String name,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkzMDQ4OQ==", "url": "https://github.com/apache/pinot/pull/6284#discussion_r528930489", "bodyText": "mark it visible for testing please", "author": "mcvsubbu", "createdAt": "2020-11-23T19:02:46Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/indexsegment/generator/SegmentGeneratorConfig.java", "diffHunk": "@@ -299,6 +299,10 @@ public void setTextIndexCreationColumns(List<String> textIndexCreationColumns) {\n     }\n   }\n \n+  public void setColumnProperties(Map<String, Map<String, String>> columnProperties) {", "originalCommit": "713fb2b2044702d39658b494dd49edddfb24695c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0MDMyNw==", "url": "https://github.com/apache/pinot/pull/6284#discussion_r528940327", "bodyText": "done", "author": "siddharthteotia", "createdAt": "2020-11-23T19:20:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkzMDQ4OQ=="}], "type": "inlineReview", "revised_code": {"commit": "48da63916b9b526025783f4a09b12dc8df72c883", "chunk": "diff --git a/pinot-core/src/main/java/org/apache/pinot/core/indexsegment/generator/SegmentGeneratorConfig.java b/pinot-core/src/main/java/org/apache/pinot/core/indexsegment/generator/SegmentGeneratorConfig.java\nindex 3a00afce08..1d3324fc0b 100644\n--- a/pinot-core/src/main/java/org/apache/pinot/core/indexsegment/generator/SegmentGeneratorConfig.java\n+++ b/pinot-core/src/main/java/org/apache/pinot/core/indexsegment/generator/SegmentGeneratorConfig.java\n\n@@ -299,6 +300,7 @@ public class SegmentGeneratorConfig {\n     }\n   }\n \n+  @VisibleForTesting\n   public void setColumnProperties(Map<String, Map<String, String>> columnProperties) {\n     _columnProperties = columnProperties;\n   }\n"}}, {"oid": "48da63916b9b526025783f4a09b12dc8df72c883", "url": "https://github.com/apache/pinot/commit/48da63916b9b526025783f4a09b12dc8df72c883", "message": "review comments", "committedDate": "2020-11-23T19:17:05Z", "type": "commit"}]}