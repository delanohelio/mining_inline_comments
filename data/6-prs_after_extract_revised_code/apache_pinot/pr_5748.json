{"pr_number": 5748, "pr_title": "GROOVY transform function UDF for queries", "pr_createdAt": "2020-07-24T03:09:24Z", "pr_url": "https://github.com/apache/pinot/pull/5748", "timeline": [{"oid": "36806adc5ed00af73d38c2b588ee01b869754605", "url": "https://github.com/apache/pinot/commit/36806adc5ed00af73d38c2b588ee01b869754605", "message": "GROOVY transform function UDF for queries", "committedDate": "2020-07-24T02:57:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE0NTA3NA==", "url": "https://github.com/apache/pinot/pull/5748#discussion_r460145074", "bodyText": "transformExpression -> closure", "author": "kishoreg", "createdAt": "2020-07-24T16:01:30Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/data/function/GroovyFunctionEvaluator.java", "diffHunk": "@@ -55,6 +55,7 @@\n   private static final String ARGUMENTS_SEPARATOR = \",\";\n \n   private final List<String> _arguments;\n+  private final int _numArguments;", "originalCommit": "36806adc5ed00af73d38c2b588ee01b869754605", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4a2e4dc244027a742aaa396918de93c262a42e61", "chunk": "diff --git a/pinot-core/src/main/java/org/apache/pinot/core/data/function/GroovyFunctionEvaluator.java b/pinot-core/src/main/java/org/apache/pinot/core/data/function/GroovyFunctionEvaluator.java\nindex 5f88c695cb..ee5422eb0b 100644\n--- a/pinot-core/src/main/java/org/apache/pinot/core/data/function/GroovyFunctionEvaluator.java\n+++ b/pinot-core/src/main/java/org/apache/pinot/core/data/function/GroovyFunctionEvaluator.java\n\n@@ -59,9 +59,9 @@ public class GroovyFunctionEvaluator implements FunctionEvaluator {\n   private final Binding _binding;\n   private final Script _script;\n \n-  public GroovyFunctionEvaluator(String transformExpression) {\n-    Matcher matcher = GROOVY_FUNCTION_PATTERN.matcher(transformExpression);\n-    Preconditions.checkState(matcher.matches(), \"Invalid transform expression: %s\", transformExpression);\n+  public GroovyFunctionEvaluator(String closure) {\n+    Matcher matcher = GROOVY_FUNCTION_PATTERN.matcher(closure);\n+    Preconditions.checkState(matcher.matches(), \"Invalid transform expression: %s\", closure);\n     String arguments = matcher.group(ARGUMENTS_GROUP_NAME);\n     if (arguments != null) {\n       _arguments = Splitter.on(ARGUMENTS_SEPARATOR).trimResults().splitToList(arguments);\n"}}, {"oid": "4a2e4dc244027a742aaa396918de93c262a42e61", "url": "https://github.com/apache/pinot/commit/4a2e4dc244027a742aaa396918de93c262a42e61", "message": "Change order of arguments to groovy function", "committedDate": "2020-07-24T23:53:32Z", "type": "commit"}]}