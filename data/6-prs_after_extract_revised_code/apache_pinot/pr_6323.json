{"pr_number": 6323, "pr_title": "Decimal percentile support.", "pr_createdAt": "2020-12-05T05:48:59Z", "pr_url": "https://github.com/apache/pinot/pull/6323", "timeline": [{"oid": "1871c342d645804ef1bc6cda4db63f76cf8e6e57", "url": "https://github.com/apache/pinot/commit/1871c342d645804ef1bc6cda4db63f76cf8e6e57", "message": "decimal percentile support.", "committedDate": "2020-12-05T04:53:42Z", "type": "commit"}, {"oid": "50e7a692288728336306e7db7e30fb31b328f29a", "url": "https://github.com/apache/pinot/commit/50e7a692288728336306e7db7e30fb31b328f29a", "message": "fix failing unit tests.", "committedDate": "2020-12-05T07:35:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjkwNDcwNg==", "url": "https://github.com/apache/pinot/pull/6323#discussion_r536904706", "bodyText": "@Jackie-Jiang Thoughts on what should we return as column name for the new way of calling percentile(column, <double>)?", "author": "mayankshriv", "createdAt": "2020-12-05T22:28:00Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/query/aggregation/function/PercentileTDigestMVAggregationFunction.java", "diffHunk": "@@ -33,19 +33,27 @@ public PercentileTDigestMVAggregationFunction(ExpressionContext expression, int\n     super(expression, percentile);\n   }\n \n+  public PercentileTDigestMVAggregationFunction(ExpressionContext expression, double percentile) {\n+    super(expression, percentile);\n+  }\n+\n   @Override\n   public AggregationFunctionType getType() {\n     return AggregationFunctionType.PERCENTILETDIGESTMV;\n   }\n \n   @Override\n   public String getColumnName() {\n-    return AggregationFunctionType.PERCENTILETDIGEST.getName() + _percentile + \"MV_\" + _expression;\n+    return _version == 0 ? AggregationFunctionType.PERCENTILETDIGEST.getName() + (int) _percentile + \"MV_\" + _expression\n+        : AggregationFunctionType.PERCENTILETDIGEST.getName() + _percentile + \"MV_\" + _expression;\n   }\n \n   @Override\n   public String getResultColumnName() {\n-    return AggregationFunctionType.PERCENTILETDIGEST.getName().toLowerCase() + _percentile + \"mv(\" + _expression + \")\";\n+    return _version == 0 ? AggregationFunctionType.PERCENTILETDIGEST.getName().toLowerCase() + (int) _percentile + \"mv(\"\n+        + _expression + \")\"\n+        : AggregationFunctionType.PERCENTILETDIGEST.getName().toLowerCase() + \"mv(\" + _expression + \", \" + _percentile", "originalCommit": "50e7a692288728336306e7db7e30fb31b328f29a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzEyMDc1Mw==", "url": "https://github.com/apache/pinot/pull/6323#discussion_r537120753", "bodyText": "The current way looks good (returning percentile(column, <double>))", "author": "Jackie-Jiang", "createdAt": "2020-12-06T20:50:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjkwNDcwNg=="}], "type": "inlineReview", "revised_code": null}]}