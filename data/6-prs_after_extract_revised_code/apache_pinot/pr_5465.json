{"pr_number": 5465, "pr_title": "Support distinctCountRawThetaSketch aggregation that returns serialized sketch.", "pr_createdAt": "2020-05-29T00:29:08Z", "pr_url": "https://github.com/apache/pinot/pull/5465", "timeline": [{"oid": "b9f227207321b5490502e2244c305de4ba98c927", "url": "https://github.com/apache/pinot/commit/b9f227207321b5490502e2244c305de4ba98c927", "message": "Support distinctCountRawThetaSketch aggregation that returns serialized sketch.\n\n1. Support a variation of theta sketch based distinct count aggregation function that returns\n   serialized bytes of the final aggregated sketch, instead of the actual distinct value.\n\n2. The return value is hex encoded String of the serialized sketch bytes. This can be\n   deserialized at the client side by the library using org.apache.commons.codec.binary as:\n   `Hex.decodeHex(stringValue.toCharArray())`. This is the same as any other byte[] value\n   returned by Pinot.\n\n3. Added unit test for the new aggregation function.", "committedDate": "2020-05-29T00:28:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY4OTgwNw==", "url": "https://github.com/apache/pinot/pull/5465#discussion_r432689807", "bodyText": "this should not be called distinctCount right, you can do anything with thetasketch. maybe just RAWTHETASKETCH", "author": "kishoreg", "createdAt": "2020-05-29T19:26:57Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/query/aggregation/function/AggregationFunctionFactory.java", "diffHunk": "@@ -137,6 +137,8 @@ public static AggregationFunction getAggregationFunction(AggregationInfo aggrega\n             return new FastHLLAggregationFunction(column);\n           case DISTINCTCOUNTTHETASKETCH:\n             return new DistinctCountThetaSketchAggregationFunction(arguments);\n+          case DISTINCTCOUNTRAWTHETASKETCH:", "originalCommit": "b9f227207321b5490502e2244c305de4ba98c927", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkwOTc4MQ==", "url": "https://github.com/apache/pinot/pull/5465#discussion_r432909781", "bodyText": "Agree, but following the convention of the distinctCountRawHLL. Perhaphs we can alias them both later.", "author": "mayankshriv", "createdAt": "2020-05-31T04:55:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY4OTgwNw=="}], "type": "inlineReview", "revised_code": null}]}