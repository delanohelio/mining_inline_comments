{"pr_number": 5645, "pr_title": "Fix ORC Record reader to ignore extra fields", "pr_createdAt": "2020-07-01T17:36:07Z", "pr_url": "https://github.com/apache/pinot/pull/5645", "timeline": [{"oid": "2cc2e54a884c43709ee117bf8157a1dad6ea483e", "url": "https://github.com/apache/pinot/commit/2cc2e54a884c43709ee117bf8157a1dad6ea483e", "message": "Fix ORC Record reader to ignore extra fields\n\nFixing an issue introduced in PR #5267\nWe should not be validating the type of fields that we don't care about.\nCleaned up the messages and exceptions thrown so that we know which\nfield is the problematic one.", "committedDate": "2020-07-01T17:33:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyMTMyOA==", "url": "https://github.com/apache/pinot/pull/5645#discussion_r448521328", "bodyText": "(nit)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    throw new IllegalStateException(\"Unsupported field type: \" + category + \" for field \" + field);\n          \n          \n            \n                    throw new IllegalStateException(\"Unsupported field type: \" + category + \" for field: \" + field);", "author": "Jackie-Jiang", "createdAt": "2020-07-01T17:44:47Z", "path": "pinot-plugins/pinot-input-format/pinot-orc/src/main/java/org/apache/pinot/plugin/inputformat/orc/ORCRecordReader.java", "diffHunk": "@@ -324,7 +324,7 @@ private static Object extractSingleValue(ColumnVector columnVector, int rowId, T\n         }\n       default:\n         // Unsupported types\n-        throw new IllegalStateException(\"Unsupported field type: \" + category);\n+        throw new IllegalStateException(\"Unsupported field type: \" + category + \" for field \" + field);", "originalCommit": "2cc2e54a884c43709ee117bf8157a1dad6ea483e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7df7032f1efb42bc172c65cafad9b83b4239759a", "chunk": "diff --git a/pinot-plugins/pinot-input-format/pinot-orc/src/main/java/org/apache/pinot/plugin/inputformat/orc/ORCRecordReader.java b/pinot-plugins/pinot-input-format/pinot-orc/src/main/java/org/apache/pinot/plugin/inputformat/orc/ORCRecordReader.java\nindex 6bc3e85dc9..b792c57b0f 100644\n--- a/pinot-plugins/pinot-input-format/pinot-orc/src/main/java/org/apache/pinot/plugin/inputformat/orc/ORCRecordReader.java\n+++ b/pinot-plugins/pinot-input-format/pinot-orc/src/main/java/org/apache/pinot/plugin/inputformat/orc/ORCRecordReader.java\n\n@@ -324,7 +324,7 @@ public class ORCRecordReader implements RecordReader {\n         }\n       default:\n         // Unsupported types\n-        throw new IllegalStateException(\"Unsupported field type: \" + category + \" for field \" + field);\n+        throw new IllegalStateException(\"Unsupported field type: \" + category + \" for field: \" + field);\n     }\n   }\n \n"}}, {"oid": "7df7032f1efb42bc172c65cafad9b83b4239759a", "url": "https://github.com/apache/pinot/commit/7df7032f1efb42bc172c65cafad9b83b4239759a", "message": "Update pinot-plugins/pinot-input-format/pinot-orc/src/main/java/org/apache/pinot/plugin/inputformat/orc/ORCRecordReader.java\n\nCo-authored-by: Xiaotian (Jackie) Jiang <17555551+Jackie-Jiang@users.noreply.github.com>", "committedDate": "2020-07-01T17:51:37Z", "type": "commit"}]}