{"pr_number": 654, "pr_title": "Hides parameters marked as hidden but preserving its context", "pr_createdAt": "2020-01-02T16:32:59Z", "pr_url": "https://github.com/scireum/sirius-biz/pull/654", "timeline": [{"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25", "url": "https://github.com/scireum/sirius-biz/commit/3284e19b3e0b84b5a3943264e062968b337d0d25", "message": "Hides parameters marked as hidden but preserving its context", "committedDate": "2020-01-02T16:30:20Z", "type": "commit"}, {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a", "url": "https://github.com/scireum/sirius-biz/commit/e391e00eb5680e31debb210b19cb4fdb4efe467a", "message": "Redesigns the handling of hidden parameters\n\nA new computeTemplateName now used by the pasta templates will return a new template with a hidden input instead of the actual template for hidden parameters.", "committedDate": "2020-01-03T09:29:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTI3MQ==", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749271", "bodyText": "getEffectiveTemplateName / fetchEffectiveTemplateName?", "author": "andyHa", "createdAt": "2020-01-03T09:37:41Z", "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {", "originalCommit": "e391e00eb5680e31debb210b19cb4fdb4efe467a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3Mzg3Mg==", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362773872", "bodyText": "Refactored to getEffectiveTemplateName", "author": "idlira", "createdAt": "2020-01-03T11:07:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTI3MQ=="}], "type": "inlineReview", "revised_code": {"commit": "a3de2388c59f779b5a3f55b56daea073c9bca3d2", "chunk": "diff --git a/src/main/java/sirius/biz/jobs/params/Parameter.java b/src/main/java/sirius/biz/jobs/params/Parameter.java\nindex f220fd9c..057111ec 100644\n--- a/src/main/java/sirius/biz/jobs/params/Parameter.java\n+++ b/src/main/java/sirius/biz/jobs/params/Parameter.java\n\n@@ -135,10 +135,11 @@ public abstract class Parameter<V, P extends Parameter<V, P>> {\n      * Similar to {@link #getTemplateName()}, but this method considers the visibility\n      * of the parameter and delivers an alternative template in case the parameter should be hidden.\n      *\n+     * @param context the context containing all parameter values\n      * @return the name or path of the template used to render the parameter\n      */\n-    public String computeTemplateName() {\n-        if (this.visibility == Visibility.HIDDEN) {\n+    public String getEffectiveTemplateName(Map<String, String> context) {\n+        if (!isVisible(context)) {\n             return HIDDEN_TEMPLATE_NAME;\n         }\n         return getTemplateName();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw==", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749373", "bodyText": "shouldn't this also take \"ONLY_WITH_VALUE\" into account?", "author": "andyHa", "createdAt": "2020-01-03T09:38:00Z", "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {\n+        if (this.visibility == Visibility.HIDDEN) {", "originalCommit": "e391e00eb5680e31debb210b19cb4fdb4efe467a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTUyMQ==", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749521", "bodyText": "i.e. invoke isVisible", "author": "andyHa", "createdAt": "2020-01-03T09:38:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MzkyMw==", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362773923", "bodyText": "Validating with isVisible()", "author": "idlira", "createdAt": "2020-01-03T11:07:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw=="}], "type": "inlineReview", "revised_code": {"commit": "a3de2388c59f779b5a3f55b56daea073c9bca3d2", "chunk": "diff --git a/src/main/java/sirius/biz/jobs/params/Parameter.java b/src/main/java/sirius/biz/jobs/params/Parameter.java\nindex f220fd9c..057111ec 100644\n--- a/src/main/java/sirius/biz/jobs/params/Parameter.java\n+++ b/src/main/java/sirius/biz/jobs/params/Parameter.java\n\n@@ -135,10 +135,11 @@ public abstract class Parameter<V, P extends Parameter<V, P>> {\n      * Similar to {@link #getTemplateName()}, but this method considers the visibility\n      * of the parameter and delivers an alternative template in case the parameter should be hidden.\n      *\n+     * @param context the context containing all parameter values\n      * @return the name or path of the template used to render the parameter\n      */\n-    public String computeTemplateName() {\n-        if (this.visibility == Visibility.HIDDEN) {\n+    public String getEffectiveTemplateName(Map<String, String> context) {\n+        if (!isVisible(context)) {\n             return HIDDEN_TEMPLATE_NAME;\n         }\n         return getTemplateName();\n"}}, {"oid": "a3de2388c59f779b5a3f55b56daea073c9bca3d2", "url": "https://github.com/scireum/sirius-biz/commit/a3de2388c59f779b5a3f55b56daea073c9bca3d2", "message": "Redesigns the handling of hidden parameters\n\ncomputeTemplateName -> getEffectiveTemplateName\nnew hasVisibleParameters helper to evaluate if extra artefacts shall be rendered", "committedDate": "2020-01-03T11:06:37Z", "type": "commit"}]}