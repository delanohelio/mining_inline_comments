{"pr_number": 394, "pr_title": "Implement online celebrity + label detection", "pr_createdAt": "2020-04-23T09:29:40Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/394", "timeline": [{"oid": "42b3be83deb92e728df3e9abad62347f932e8558", "url": "https://github.com/aws-amplify/amplify-android/commit/42b3be83deb92e728df3e9abad62347f932e8558", "message": "Rename feature type name to alias", "committedDate": "2020-04-20T15:06:06Z", "type": "commit"}, {"oid": "32470ab3e4903a4e41fb4d1efc56913d16f2bc55", "url": "https://github.com/aws-amplify/amplify-android/commit/32470ab3e4903a4e41fb4d1efc56913d16f2bc55", "message": "Add identify-related models", "committedDate": "2020-04-20T15:06:21Z", "type": "commit"}, {"oid": "9ab5f6c62ca4178264952c97a002bc9b1ab3af5d", "url": "https://github.com/aws-amplify/amplify-android/commit/9ab5f6c62ca4178264952c97a002bc9b1ab3af5d", "message": "Implement celebrity + label detection", "committedDate": "2020-04-23T09:09:53Z", "type": "commit"}, {"oid": "57a3ff7ee897250815d16d260f3b12418a378889", "url": "https://github.com/aws-amplify/amplify-android/commit/57a3ff7ee897250815d16d260f3b12418a378889", "message": "minor fix-up", "committedDate": "2020-04-23T09:33:43Z", "type": "commit"}, {"oid": "54e778c55839073a0d7ef5663afe23c0b5fb6871", "url": "https://github.com/aws-amplify/amplify-android/commit/54e778c55839073a0d7ef5663afe23c0b5fb6871", "message": "Merge branch 'master' of https://github.com/aws-amplify/amplify-android into identify-aws", "committedDate": "2020-04-23T17:10:34Z", "type": "commit"}, {"oid": "9f9389ea95a1052543eeb041af1ea10d1adb77d7", "url": "https://github.com/aws-amplify/amplify-android/commit/9f9389ea95a1052543eeb041af1ea10d1adb77d7", "message": "Unused import fixup", "committedDate": "2020-04-23T17:11:49Z", "type": "commit"}, {"oid": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "url": "https://github.com/aws-amplify/amplify-android/commit/9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "message": "Replace PoseFeature with Pose", "committedDate": "2020-04-23T17:33:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0MTAyNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414141026", "bodyText": "Even though this is wired to be a no-op, shouldn't you still call start(), here?", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:36:55Z", "path": "aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java", "diffHunk": "@@ -132,15 +138,37 @@ public TensorFlowPredictionsEscapeHatch getEscapeHatch() {\n         return new TensorFlowTranslateTextOperation(onError);\n     }\n \n+    @NonNull\n+    @Override\n+    public IdentifyOperation<?> identify(\n+            @NonNull IdentifyAction actionType,\n+            @NonNull Bitmap image,\n+            @NonNull Consumer<IdentifyResult> onSuccess,\n+            @NonNull Consumer<PredictionsException> onError\n+    ) {\n+        return new TensorFlowIdentifyOperation(actionType, onError);", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNDY0MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414804641", "bodyText": "yep", "author": "raphkim", "createdAt": "2020-04-24T19:14:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0MTAyNg=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java b/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java\nindex 59a0adc9..e6a3e06d 100644\n--- a/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java\n+++ b/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java\n\n@@ -135,7 +139,10 @@ public final class TensorFlowPredictionsPlugin extends PredictionsPlugin<TensorF\n             @NonNull Consumer<TranslateTextResult> onSuccess,\n             @NonNull Consumer<PredictionsException> onError\n     ) {\n-        return new TensorFlowTranslateTextOperation(onError);\n+        TensorFlowTranslateTextOperation operation =\n+                new TensorFlowTranslateTextOperation(onError);\n+        operation.start();\n+        return operation;\n     }\n \n     @NonNull\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0MTEwNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414141107", "bodyText": "Even though this is wired to be a no-op, shouldn't you still call start(), here?", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:37:03Z", "path": "aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java", "diffHunk": "@@ -132,15 +138,37 @@ public TensorFlowPredictionsEscapeHatch getEscapeHatch() {\n         return new TensorFlowTranslateTextOperation(onError);\n     }\n \n+    @NonNull\n+    @Override\n+    public IdentifyOperation<?> identify(\n+            @NonNull IdentifyAction actionType,\n+            @NonNull Bitmap image,\n+            @NonNull Consumer<IdentifyResult> onSuccess,\n+            @NonNull Consumer<PredictionsException> onError\n+    ) {\n+        return new TensorFlowIdentifyOperation(actionType, onError);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public IdentifyOperation<?> identify(\n+            @NonNull IdentifyAction actionType,\n+            @NonNull Bitmap image,\n+            @NonNull IdentifyOptions options,\n+            @NonNull Consumer<IdentifyResult> onSuccess,\n+            @NonNull Consumer<PredictionsException> onError\n+    ) {\n+        return new TensorFlowIdentifyOperation(actionType, onError);", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIxMTAxMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414211010", "bodyText": "oops you are right! good catch", "author": "raphkim", "createdAt": "2020-04-24T00:25:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0MTEwNw=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java b/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java\nindex 59a0adc9..e6a3e06d 100644\n--- a/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java\n+++ b/aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/TensorFlowPredictionsPlugin.java\n\n@@ -135,7 +139,10 @@ public final class TensorFlowPredictionsPlugin extends PredictionsPlugin<TensorF\n             @NonNull Consumer<TranslateTextResult> onSuccess,\n             @NonNull Consumer<PredictionsException> onError\n     ) {\n-        return new TensorFlowTranslateTextOperation(onError);\n+        TensorFlowTranslateTextOperation operation =\n+                new TensorFlowTranslateTextOperation(onError);\n+        operation.start();\n+        return operation;\n     }\n \n     @NonNull\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0MjU3OA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414142578", "bodyText": "Can you add units to this? Is it minimum size in dp, px, etc? MINIMUM_IMAGE_SIZE_PX?", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:40:01Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.CelebrityDetails;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * celebrity detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyCelebritiesTest {\n+\n+    private static final int MINIMUM_IMAGE_SIZE = 80;", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\nindex 746b6dac..e8821454 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n\n@@ -17,22 +17,21 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n-import com.amplifyframework.predictions.models.CelebrityDetails;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0NDY0MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414144641", "bodyText": "This is very broad. Can you throws SpecificSituationException, PredictionsException, under the condition of @throws SpecificSituationException Only when specific conditions A is met, and @throws PredictionsException this is the expected outcome of this test?\n(Same for all.)", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:43:50Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.CelebrityDetails;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * celebrity detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyCelebritiesTest {\n+\n+    private static final int MINIMUM_IMAGE_SIZE = 80;\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify fails for invalid image.\n+     * An image with less than 80x80 size limit will throw\n+     * validation error from the service.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test(expected = PredictionsException.class)\n+    public void testIdentifyFailsForSmallImage() throws Exception {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\nindex 746b6dac..e8821454 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n\n@@ -17,22 +17,21 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n-import com.amplifyframework.predictions.models.CelebrityDetails;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0ODM5NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414148394", "bodyText": "You could consider moving these various Bitmap creation rules to a test utility. It will add a tiny bit of clarity to the phrasing of the test code. You could have like:\nfinal class TestBitmaps {\n    private TestBitmaps() {}\n\n    static Bitmap coloredSquare(int ofSizeInPixels, @ColorInt int withBackgroundColor) {\n        ...\n    }\n\n    static Bitmap redSquare(int ofSizeInPixels) {\n        return coloredSquare(ofSizeInPixels, Color.RED);\n    }\n}\n\nThen your tests would be like:\nBitmap redSquare = TestBitmap.redSquare(MINIMUM_IMAGE_SIZE);\n\nRef: @ColorInt, Android Color.", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:51:17Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.CelebrityDetails;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * celebrity detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyCelebritiesTest {\n+\n+    private static final int MINIMUM_IMAGE_SIZE = 80;\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify fails for invalid image.\n+     * An image with less than 80x80 size limit will throw\n+     * validation error from the service.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test(expected = PredictionsException.class)\n+    public void testIdentifyFailsForSmallImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE - 1,\n+                MINIMUM_IMAGE_SIZE - 1, Bitmap.Config.ARGB_8888);\n+        predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE,\n+                MINIMUM_IMAGE_SIZE, Bitmap.Config.ARGB_8888);", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\nindex 746b6dac..e8821454 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n\n@@ -17,22 +17,21 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n-import com.amplifyframework.predictions.models.CelebrityDetails;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0OTczNQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414149735", "bodyText": "I would go further and drill down into the properties of the celebrity itself. What are reasonable/expected values for a blank image?", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:54:00Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.CelebrityDetails;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * celebrity detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyCelebritiesTest {\n+\n+    private static final int MINIMUM_IMAGE_SIZE = 80;\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify fails for invalid image.\n+     * An image with less than 80x80 size limit will throw\n+     * validation error from the service.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test(expected = PredictionsException.class)\n+    public void testIdentifyFailsForSmallImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE - 1,\n+                MINIMUM_IMAGE_SIZE - 1, Bitmap.Config.ARGB_8888);\n+        predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE,\n+                MINIMUM_IMAGE_SIZE, Bitmap.Config.ARGB_8888);\n+\n+        // Identify the celebrity inside given image and assert non-null result.\n+        IdentifyCelebritiesResult result = predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+\n+        // Assert nobody is detected\n+        List<CelebrityDetails> celebs = result.getCelebrities();\n+        assertTrue(celebs.isEmpty());", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0MzYxMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414743610", "bodyText": "well... there isn't any property that I can look into since the result was empty haha. still, I think this is a pointless test at the moment, so i will just remove it", "author": "raphkim", "createdAt": "2020-04-24T17:30:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE0OTczNQ=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\nindex 746b6dac..e8821454 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n\n@@ -17,22 +17,21 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n-import com.amplifyframework.predictions.models.CelebrityDetails;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1MDc3OA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414150778", "bodyText": "Possibly you could add a factory to our Assets utility, to read a reference directly as a Bitmap.  So that alongside Assets.readAsString, we have a new Assets.readAsBitmap.", "author": "jamesonwilliams", "createdAt": "2020-04-23T21:56:03Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.CelebrityDetails;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * celebrity detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyCelebritiesTest {\n+\n+    private static final int MINIMUM_IMAGE_SIZE = 80;\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify fails for invalid image.\n+     * An image with less than 80x80 size limit will throw\n+     * validation error from the service.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test(expected = PredictionsException.class)\n+    public void testIdentifyFailsForSmallImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE - 1,\n+                MINIMUM_IMAGE_SIZE - 1, Bitmap.Config.ARGB_8888);\n+        predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE,\n+                MINIMUM_IMAGE_SIZE, Bitmap.Config.ARGB_8888);\n+\n+        // Identify the celebrity inside given image and assert non-null result.\n+        IdentifyCelebritiesResult result = predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+\n+        // Assert nobody is detected\n+        List<CelebrityDetails> celebs = result.getCelebrities();\n+        assertTrue(celebs.isEmpty());\n+    }\n+\n+    /**\n+     * Assert celebrity detection works.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyCelebrities() throws Exception {\n+        InputStream bezosJpeg = getApplicationContext()\n+                .getAssets().open(\"jeff_bezos.jpg\");\n+        final Bitmap image = BitmapFactory.decodeStream(bezosJpeg);", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM2NDg3OA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414364878", "bodyText": "good idea. Added", "author": "raphkim", "createdAt": "2020-04-24T07:42:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1MDc3OA=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\nindex 746b6dac..e8821454 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n\n@@ -17,22 +17,21 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n-import com.amplifyframework.predictions.models.CelebrityDetails;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1NTI2NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414155265", "bodyText": "I really love the Stream APIs. But they are only available on Android as of API 24. If this were a unit test, that'd probably be okay, since we either don't involve Android in unit tests, or use Robolectric and assert a fairly high API level (28).\nHowever, this will be problematic when we go to run the integration test suite on an API 16 device.\nSo, as much as I'd love to do streams, I think we need to avoid this, at least in this file, right now.\nRx has some similar functional concepts, and I have started using it in my test code, just so that I can regain some of these Java 8 functional behaviors, in an API-level-compatible fashion.\nI'm not sure that there's any anyMatch() filter in Rx, but you could at least do:\nassertTrue(Observable.fromIterable(restult.getCelebrities())\n    .map(celeb -> celeb.getCelebrity().getName())\n    .toList()\n    .blockingGet()\n    .contains(\"Jeff Bezos\"));\n\nOr, maybe similarly expressed with Hamcrest:\nassertThat(\n    Observable.fromIterable(restult.getCelebrities())\n        .map(celeb -> celeb.getCelebrity().getName())\n        .toList()\n        .blockingGet(),\n    containsInAnyOrder(\"Jeff Bezos\")\n);\n\nKeep in mind that in order to achieve this you'd only need to add androidTestImplementation dependencies.rx, not implementation dependencies.rx.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:05:19Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.CelebrityDetails;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * celebrity detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyCelebritiesTest {\n+\n+    private static final int MINIMUM_IMAGE_SIZE = 80;\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify fails for invalid image.\n+     * An image with less than 80x80 size limit will throw\n+     * validation error from the service.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test(expected = PredictionsException.class)\n+    public void testIdentifyFailsForSmallImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE - 1,\n+                MINIMUM_IMAGE_SIZE - 1, Bitmap.Config.ARGB_8888);\n+        predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(MINIMUM_IMAGE_SIZE,\n+                MINIMUM_IMAGE_SIZE, Bitmap.Config.ARGB_8888);\n+\n+        // Identify the celebrity inside given image and assert non-null result.\n+        IdentifyCelebritiesResult result = predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+\n+        // Assert nobody is detected\n+        List<CelebrityDetails> celebs = result.getCelebrities();\n+        assertTrue(celebs.isEmpty());\n+    }\n+\n+    /**\n+     * Assert celebrity detection works.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyCelebrities() throws Exception {\n+        InputStream bezosJpeg = getApplicationContext()\n+                .getAssets().open(\"jeff_bezos.jpg\");\n+        final Bitmap image = BitmapFactory.decodeStream(bezosJpeg);\n+\n+        // Identify the celebrity inside given image and assert non-null result.\n+        IdentifyCelebritiesResult result = predictions.identifyCelebrities(image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+\n+        // Assert that Jeff Bezos is detected\n+        List<CelebrityDetails> celebs = result.getCelebrities();\n+        assertNotNull(celebs);\n+        assertFalse(celebs.isEmpty());\n+        assertTrue(celebs.stream().anyMatch(celeb -> \"Jeff Bezos\".equals(celeb.getCelebrity().getName())));", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\nindex 746b6dac..e8821454 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyCelebritiesTest.java\n\n@@ -17,22 +17,21 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n-import com.amplifyframework.predictions.models.CelebrityDetails;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.result.IdentifyCelebritiesResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1NjM1Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414156352", "bodyText": "I forget, do we have a version that doesn't require IdentifyOptions.defaults() as an arg? If so, you can probably wrap and keep this statement on the one line, L92.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:07:41Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.Label;\n+import com.amplifyframework.predictions.models.LabelType;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyLabelsResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * label detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyLabelsTest {\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(1, 1, Bitmap.Config.ARGB_8888);\n+\n+        // Identify the labels inside given image and assert non-null result.\n+        IdentifyLabelsResult result = predictions.identifyLabels(LabelType.ALL,\n+                image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+    }\n+\n+    /**\n+     * Assert label detection works.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyLabels() throws Exception {\n+        InputStream bezosJpeg = getApplicationContext()\n+                .getAssets().open(\"jeff_bezos.jpg\");\n+        final Bitmap image = BitmapFactory.decodeStream(bezosJpeg);\n+\n+        // Identify the labels inside given image and assert non-null result.\n+        IdentifyLabelsResult result = predictions.identifyLabels(LabelType.ALL,\n+                image, IdentifyOptions.defaults());", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyODc3NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414728774", "bodyText": "No, I haven't made that overload in SynchronousPredictions yet. I will add it", "author": "raphkim", "createdAt": "2020-04-24T17:05:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1NjM1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\nindex f11ba31a..a8a852f7 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\n\n@@ -17,22 +17,23 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.models.Label;\n import com.amplifyframework.predictions.models.LabelType;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n import com.amplifyframework.predictions.result.IdentifyLabelsResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1NjQ2Mw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414156463", "bodyText": "haha lol", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:07:55Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.Label;\n+import com.amplifyframework.predictions.models.LabelType;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyLabelsResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * label detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyLabelsTest {\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(1, 1, Bitmap.Config.ARGB_8888);\n+\n+        // Identify the labels inside given image and assert non-null result.\n+        IdentifyLabelsResult result = predictions.identifyLabels(LabelType.ALL,\n+                image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+    }\n+\n+    /**\n+     * Assert label detection works.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyLabels() throws Exception {\n+        InputStream bezosJpeg = getApplicationContext()\n+                .getAssets().open(\"jeff_bezos.jpg\");\n+        final Bitmap image = BitmapFactory.decodeStream(bezosJpeg);\n+\n+        // Identify the labels inside given image and assert non-null result.\n+        IdentifyLabelsResult result = predictions.identifyLabels(LabelType.ALL,\n+                image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+\n+        // Assert that Jeff's portrait doesn't flag moderation :)", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\nindex f11ba31a..a8a852f7 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\n\n@@ -17,22 +17,23 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.models.Label;\n import com.amplifyframework.predictions.models.LabelType;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n import com.amplifyframework.predictions.result.IdentifyLabelsResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1NzEzMg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414157132", "bodyText": "We have a CollectionUtils.isEmpty(...) in this project under core's utils, I believe. You could simplify these two checks into just assertFalse(CollectionUtils.isEmpty(labels)).", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:09:14Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.Label;\n+import com.amplifyframework.predictions.models.LabelType;\n+import com.amplifyframework.predictions.options.IdentifyOptions;\n+import com.amplifyframework.predictions.result.IdentifyLabelsResult;\n+import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n+import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import java.io.InputStream;\n+import java.util.List;\n+\n+import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Tests that Predictions identify delivers a non-null\n+ * label detection result for valid input.\n+ */\n+public final class AWSPredictionsIdentifyLabelsTest {\n+\n+    private SynchronousPredictions predictions;\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     * @throws Exception if mobile client initialization fails\n+     */\n+    @Before\n+    public void setUp() throws Exception {\n+        Context context = getApplicationContext();\n+\n+        // Set up Auth\n+        SynchronousMobileClient.instance().initialize();\n+\n+        // Delegate to Predictions category\n+        PredictionsCategory asyncDelegate =\n+                TestPredictionsCategory.create(context, R.raw.amplifyconfiguration);\n+        predictions = SynchronousPredictions.delegatingTo(asyncDelegate);\n+    }\n+\n+    /**\n+     * Assert that identify \"passes\" for blank image.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyPassesForBlankImage() throws Exception {\n+        Bitmap image = Bitmap.createBitmap(1, 1, Bitmap.Config.ARGB_8888);\n+\n+        // Identify the labels inside given image and assert non-null result.\n+        IdentifyLabelsResult result = predictions.identifyLabels(LabelType.ALL,\n+                image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+    }\n+\n+    /**\n+     * Assert label detection works.\n+     * @throws Exception if prediction fails\n+     */\n+    @Test\n+    public void testIdentifyLabels() throws Exception {\n+        InputStream bezosJpeg = getApplicationContext()\n+                .getAssets().open(\"jeff_bezos.jpg\");\n+        final Bitmap image = BitmapFactory.decodeStream(bezosJpeg);\n+\n+        // Identify the labels inside given image and assert non-null result.\n+        IdentifyLabelsResult result = predictions.identifyLabels(LabelType.ALL,\n+                image, IdentifyOptions.defaults());\n+        assertNotNull(result);\n+\n+        // Assert that Jeff's portrait doesn't flag moderation :)\n+        assertFalse(result.isUnsafeContent());\n+\n+        // Assert at least one label is detected as \"Person\"\n+        List<Label> labels = result.getLabels();\n+        assertNotNull(labels);\n+        assertFalse(labels.isEmpty());", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0NjAzMg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414746032", "bodyText": "yep replacing with CollectionUtils#isNullOrEmpty(Collection)", "author": "raphkim", "createdAt": "2020-04-24T17:34:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1NzEzMg=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\nindex f11ba31a..a8a852f7 100644\n--- a/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\n+++ b/aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsIdentifyLabelsTest.java\n\n@@ -17,22 +17,23 @@ package com.amplifyframework.predictions.aws;\n \n import android.content.Context;\n import android.graphics.Bitmap;\n-import android.graphics.BitmapFactory;\n \n import com.amplifyframework.predictions.PredictionsCategory;\n+import com.amplifyframework.predictions.PredictionsException;\n import com.amplifyframework.predictions.aws.test.R;\n+import com.amplifyframework.predictions.models.IdentifyActionType;\n import com.amplifyframework.predictions.models.Label;\n import com.amplifyframework.predictions.models.LabelType;\n-import com.amplifyframework.predictions.options.IdentifyOptions;\n import com.amplifyframework.predictions.result.IdentifyLabelsResult;\n+import com.amplifyframework.testutils.Assets;\n import com.amplifyframework.testutils.sync.SynchronousMobileClient;\n import com.amplifyframework.testutils.sync.SynchronousPredictions;\n+import com.amplifyframework.util.CollectionUtils;\n \n import org.junit.Before;\n import org.junit.Test;\n \n-import java.io.InputStream;\n-import java.util.List;\n+import io.reactivex.Observable;\n \n import static androidx.test.core.app.ApplicationProvider.getApplicationContext;\n import static org.junit.Assert.assertFalse;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE1OTE2Nw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414159167", "bodyText": "Test consideration: Since this thing is just pure transformation of objects, all in memory with no dependencies, this would be extremely easy to get 100% unit test coverage over.\n\nDesign consideration: Elsewhere, you have for example a LandmarkTypeAdapter. That's an extensible pattern, one adapter per type. Takes in a service model, outputs an Amplify model.\nIf you have that pattern established, should you expand it to the factories in this class, too?\nAmong other things, I think it will clean up the naming. For example, instead of:\nImageResultTransformers.fromRekognitionPose(someServiceResult.getIt())\n\nYou'd have something like:\nPoseTypeAdapter.fromRekognitionPose(someServiceResult.getIt())", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:13:34Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/IdentifyResultTransformers.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws.adapter;\n+\n+import android.graphics.PointF;\n+import android.graphics.RectF;\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.Landmark;\n+import com.amplifyframework.predictions.models.LandmarkType;\n+import com.amplifyframework.predictions.models.Pose;\n+\n+import com.amazonaws.services.rekognition.model.BoundingBox;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Utility class to transform Amazon service-specific\n+ * models to be compatible with AWS Amplify.\n+ */\n+public final class IdentifyResultTransformers {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2MTM5Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414161396", "bodyText": "Does the Rekognition SDK not enum this literals, itself?\nI know we've discussed in this in prior PRs. And I did buy your argument - like, we don't need this to be an enum-to-enum map.\nI guess I'm just surprised that the code-gen'd service model doesn't give you an enum of the landmarks, itself.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:18:32Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws.adapter;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.LandmarkType;\n+\n+/**\n+ * Utility to convert Amazon Rekognition's entity landmark type\n+ * into Amplify-compatible data structure (i.e. {@link LandmarkType}).\n+ */\n+public final class LandmarkTypeAdapter {\n+    private LandmarkTypeAdapter() {}\n+\n+    /**\n+     * Converts the landmark type string returned by Amazon Rekognition\n+     * into a format supported by Amplify Predictions.\n+     * @param landmark Landmark type returned by Amazon Rekognition\n+     * @return Amplify's {@link LandmarkType} enum\n+     */\n+    @NonNull\n+    public static LandmarkType fromRekognition(@NonNull String landmark) {\n+        switch (landmark) {\n+            case \"eyeLeft\":", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0OTA3MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414749071", "bodyText": "You are right! Service models DO include the enum after all. I will take them into account", "author": "raphkim", "createdAt": "2020-04-24T17:39:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2MTM5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java b/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java\nindex 775e938e..80398535 100644\n--- a/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java\n+++ b/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java\n\n@@ -34,46 +34,48 @@ public final class LandmarkTypeAdapter {\n      */\n     @NonNull\n     public static LandmarkType fromRekognition(@NonNull String landmark) {\n-        switch (landmark) {\n-            case \"eyeLeft\":\n-            case \"leftEyeLeft\":\n-            case \"leftEyeRight\":\n-            case \"leftEyeUp\":\n-            case \"leftEyeDown\":\n+        com.amazonaws.services.rekognition.model.LandmarkType type =\n+                com.amazonaws.services.rekognition.model.LandmarkType.fromValue(landmark);\n+        switch (type) {\n+            case EyeLeft:\n+            case LeftEyeLeft:\n+            case LeftEyeRight:\n+            case LeftEyeUp:\n+            case LeftEyeDown:\n                 return LandmarkType.LEFT_EYE;\n-            case \"eyeRight\":\n-            case \"rightEyeLeft\":\n-            case \"rightEyeRight\":\n-            case \"rightEyeUp\":\n-            case \"rightEyeDown\":\n+            case EyeRight:\n+            case RightEyeLeft:\n+            case RightEyeRight:\n+            case RightEyeUp:\n+            case RightEyeDown:\n                 return LandmarkType.RIGHT_EYE;\n-            case \"leftEyeBrowLeft\":\n-            case \"leftEyeBrowRight\":\n-            case \"leftEyeBrowUp\":\n+            case LeftEyeBrowLeft:\n+            case LeftEyeBrowRight:\n+            case LeftEyeBrowUp:\n                 return LandmarkType.LEFT_EYEBROW;\n-            case \"rightEyeBrowLeft\":\n-            case \"rightEyeBrowRight\":\n-            case \"rightEyeBrowUp\":\n+            case RightEyeBrowLeft:\n+            case RightEyeBrowRight:\n+            case RightEyeBrowUp:\n                 return LandmarkType.RIGHT_EYEBROW;\n-            case \"nose\":\n+            case Nose:\n                 return LandmarkType.NOSE;\n-            case \"noseLeft\":\n-            case \"noseRight\":\n+            case NoseLeft:\n+            case NoseRight:\n                 return LandmarkType.NOSE_CREST;\n-            case \"mouthLeft\":\n-            case \"mouthRight\":\n-            case \"mouthUp\":\n-            case \"mouthDown\":\n+            case MouthLeft:\n+            case MouthRight:\n+            case MouthUp:\n+            case MouthDown:\n                 return LandmarkType.OUTER_LIPS;\n-            case \"leftPupil\":\n+            case LeftPupil:\n                 return LandmarkType.LEFT_PUPIL;\n-            case \"rightPupil\":\n+            case RightPupil:\n                 return LandmarkType.RIGHT_PUPIL;\n-            case \"upperJawlineLeft\":\n-            case \"midJawlineLeft\":\n-            case \"chinBottom\":\n-            case \"midJawlineRight\":\n-            case \"upperJawlineRight\":\n+            case UpperJawlineLeft:\n+            case MidJawlineLeft:\n+            case ChinBottom:\n+            case MidJawlineRight:\n+            case UpperJawlineRight:\n                 return LandmarkType.FACE_CONTOUR;\n             default:\n                 return LandmarkType.UNKNOWN;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2NDc0NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414164745", "bodyText": "Maybe a switch isn't the right mechanism.\nHaha lol if this were bash, you could jsut write:\ncase $landmark in\n    rightEye*)\n        return $RIGHT_EYE\n\nAnyway: Java.\nWhat about a regex match?\nLike:\n...\nfor (Map.Entry<String, LandmarkType> mapping : typesByLandmarkPattern().entrySet()) {\n    Pattern pattern = Pattern.compile(mapping.getKey())l\n    Matcher matcher = pattern.matcher(input);\n    if (matcher.matches()) {\n        return mapping.getValue());\n    }\n}\n\nprivate static Map<String, LandmarkType> typesByLandmarkPattern() {\n    Map<String, LandmarkType> map = new HashMap<>();\n    map.put(\"^leftEye\", LandmarkType.LEFT_EYE);\n    ...\n    return map;\n}\n\nI didn't read all of these mappings, but maybe regex is overkill and you could even do just String#startsWith(String)?", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:26:10Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws.adapter;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.LandmarkType;\n+\n+/**\n+ * Utility to convert Amazon Rekognition's entity landmark type\n+ * into Amplify-compatible data structure (i.e. {@link LandmarkType}).\n+ */\n+public final class LandmarkTypeAdapter {\n+    private LandmarkTypeAdapter() {}\n+\n+    /**\n+     * Converts the landmark type string returned by Amazon Rekognition\n+     * into a format supported by Amplify Predictions.\n+     * @param landmark Landmark type returned by Amazon Rekognition\n+     * @return Amplify's {@link LandmarkType} enum\n+     */\n+    @NonNull\n+    public static LandmarkType fromRekognition(@NonNull String landmark) {\n+        switch (landmark) {\n+            case \"eyeLeft\":\n+            case \"leftEyeLeft\":\n+            case \"leftEyeRight\":\n+            case \"leftEyeUp\":\n+            case \"leftEyeDown\":\n+                return LandmarkType.LEFT_EYE;\n+            case \"eyeRight\":\n+            case \"rightEyeLeft\":\n+            case \"rightEyeRight\":\n+            case \"rightEyeUp\":\n+            case \"rightEyeDown\":", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1NDc2MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414754761", "bodyText": "Replaced with codegened service enum, so can't do String.startsWith haha\nAlso regex would be highly inefficient for this, since regex needs to be compiled :/", "author": "raphkim", "createdAt": "2020-04-24T17:48:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2NDc0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java b/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java\nindex 775e938e..80398535 100644\n--- a/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java\n+++ b/aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java\n\n@@ -34,46 +34,48 @@ public final class LandmarkTypeAdapter {\n      */\n     @NonNull\n     public static LandmarkType fromRekognition(@NonNull String landmark) {\n-        switch (landmark) {\n-            case \"eyeLeft\":\n-            case \"leftEyeLeft\":\n-            case \"leftEyeRight\":\n-            case \"leftEyeUp\":\n-            case \"leftEyeDown\":\n+        com.amazonaws.services.rekognition.model.LandmarkType type =\n+                com.amazonaws.services.rekognition.model.LandmarkType.fromValue(landmark);\n+        switch (type) {\n+            case EyeLeft:\n+            case LeftEyeLeft:\n+            case LeftEyeRight:\n+            case LeftEyeUp:\n+            case LeftEyeDown:\n                 return LandmarkType.LEFT_EYE;\n-            case \"eyeRight\":\n-            case \"rightEyeLeft\":\n-            case \"rightEyeRight\":\n-            case \"rightEyeUp\":\n-            case \"rightEyeDown\":\n+            case EyeRight:\n+            case RightEyeLeft:\n+            case RightEyeRight:\n+            case RightEyeUp:\n+            case RightEyeDown:\n                 return LandmarkType.RIGHT_EYE;\n-            case \"leftEyeBrowLeft\":\n-            case \"leftEyeBrowRight\":\n-            case \"leftEyeBrowUp\":\n+            case LeftEyeBrowLeft:\n+            case LeftEyeBrowRight:\n+            case LeftEyeBrowUp:\n                 return LandmarkType.LEFT_EYEBROW;\n-            case \"rightEyeBrowLeft\":\n-            case \"rightEyeBrowRight\":\n-            case \"rightEyeBrowUp\":\n+            case RightEyeBrowLeft:\n+            case RightEyeBrowRight:\n+            case RightEyeBrowUp:\n                 return LandmarkType.RIGHT_EYEBROW;\n-            case \"nose\":\n+            case Nose:\n                 return LandmarkType.NOSE;\n-            case \"noseLeft\":\n-            case \"noseRight\":\n+            case NoseLeft:\n+            case NoseRight:\n                 return LandmarkType.NOSE_CREST;\n-            case \"mouthLeft\":\n-            case \"mouthRight\":\n-            case \"mouthUp\":\n-            case \"mouthDown\":\n+            case MouthLeft:\n+            case MouthRight:\n+            case MouthUp:\n+            case MouthDown:\n                 return LandmarkType.OUTER_LIPS;\n-            case \"leftPupil\":\n+            case LeftPupil:\n                 return LandmarkType.LEFT_PUPIL;\n-            case \"rightPupil\":\n+            case RightPupil:\n                 return LandmarkType.RIGHT_PUPIL;\n-            case \"upperJawlineLeft\":\n-            case \"midJawlineLeft\":\n-            case \"chinBottom\":\n-            case \"midJawlineRight\":\n-            case \"upperJawlineRight\":\n+            case UpperJawlineLeft:\n+            case MidJawlineLeft:\n+            case ChinBottom:\n+            case MidJawlineRight:\n+            case UpperJawlineRight:\n                 return LandmarkType.FACE_CONTOUR;\n             default:\n                 return LandmarkType.UNKNOWN;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2NTkyNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414165927", "bodyText": "Since this is public-access, and since it has a constructor with a bunch of args, I would add class documentation to this that says something like \"This is an internal class. Don't use it.\"\nAh man actually -- if we had really had our ducks in a row, classes like this would have .internal. in their Java package names. Like com.amplifyframework.predictions.aws.internal.AWSIdentifyOperation or something? Anyway, restructuring our plugins is obviously outside the scope of this current PR.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:28:49Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/operation/AWSIdentifyOperation.java", "diffHunk": "@@ -0,0 +1,90 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws.operation;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.core.Consumer;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.request.AWSRekognitionRequest;\n+import com.amplifyframework.predictions.aws.service.AWSPredictionsService;\n+import com.amplifyframework.predictions.models.IdentifyAction;\n+import com.amplifyframework.predictions.models.LabelType;\n+import com.amplifyframework.predictions.operation.IdentifyOperation;\n+import com.amplifyframework.predictions.result.IdentifyResult;\n+\n+import java.util.Objects;\n+import java.util.concurrent.ExecutorService;\n+\n+public final class AWSIdentifyOperation", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1NTY3MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414755670", "bodyText": "I agree. There is a BUNCH of items that should have been packaged as internal. Maybe package rearrangement is something we can look into in our final week before release... across the entire project", "author": "raphkim", "createdAt": "2020-04-24T17:49:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2NTkyNw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2NjQyNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414166426", "bodyText": "Note to self: come back to this...", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:29:56Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/operation/AWSIdentifyOperation.java", "diffHunk": "@@ -0,0 +1,90 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.aws.operation;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.core.Consumer;\n+import com.amplifyframework.predictions.PredictionsException;\n+import com.amplifyframework.predictions.aws.request.AWSRekognitionRequest;\n+import com.amplifyframework.predictions.aws.service.AWSPredictionsService;\n+import com.amplifyframework.predictions.models.IdentifyAction;\n+import com.amplifyframework.predictions.models.LabelType;\n+import com.amplifyframework.predictions.operation.IdentifyOperation;\n+import com.amplifyframework.predictions.result.IdentifyResult;\n+\n+import java.util.Objects;\n+import java.util.concurrent.ExecutorService;\n+\n+public final class AWSIdentifyOperation\n+        extends IdentifyOperation<AWSRekognitionRequest> {\n+    private final AWSPredictionsService predictionsService;\n+    private final ExecutorService executorService;\n+    private final Consumer<IdentifyResult> onSuccess;\n+    private final Consumer<PredictionsException> onError;\n+\n+    /**\n+     * Constructs an instance of {@link AWSIdentifyOperation}.\n+     * @param predictionsService instance of AWS predictions service\n+     * @param executorService async task executor service\n+     * @param actionType the type of identification action\n+     * @param request predictions identify request\n+     * @param onSuccess lambda to execute upon task completion\n+     * @param onError lambda to execute upon task failure\n+     */\n+    public AWSIdentifyOperation(\n+            @NonNull AWSPredictionsService predictionsService,\n+            @NonNull ExecutorService executorService,\n+            @NonNull IdentifyAction actionType,\n+            @NonNull AWSRekognitionRequest request,\n+            @NonNull Consumer<IdentifyResult> onSuccess,\n+            @NonNull Consumer<PredictionsException> onError\n+    ) {\n+        super(actionType, Objects.requireNonNull(request));\n+        this.predictionsService = Objects.requireNonNull(predictionsService);\n+        this.executorService = Objects.requireNonNull(executorService);\n+        this.onSuccess = Objects.requireNonNull(onSuccess);\n+        this.onError = Objects.requireNonNull(onError);\n+    }\n+\n+    @Override\n+    public void start() {\n+        executorService.execute(() -> {\n+            switch (getIdentifyAction().getType()) {\n+                case DETECT_CELEBRITIES:\n+                    predictionsService.recognizeCelebrities(getRequest().getImage(), onSuccess, onError);\n+                    return;\n+                case DETECT_LABELS:\n+                    final LabelType labelType;\n+                    try {\n+                        labelType = (LabelType) getIdentifyAction();", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1NjE0Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414756146", "bodyText": "@jamesonwilliams reminder to come back to this ;)", "author": "raphkim", "createdAt": "2020-04-24T17:50:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2NjQyNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MDY1Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414170656", "bodyText": "To be pure, here, we should have this utility return whatever the async version returns. Here, I guess that means IdentityResult, directly.\nFirst couple of these sync conversion utilities I wrote, I was also including all of my \"API wishlist\", where I would bandage up the other sore-spots. But, that's muddling concerns.\nEither:\n\nWe should go back and address the issues in the various category behaviors (hard truth....), or\nCreate another level of test utility wrapper, haha.\n\nFor 2, I guess it'd be like:\nfinal class DreamApi {\n    private final SynchronousWrapper wrapper;\n}\nfinal class SynchronousWrapper {\n    private final SomeCategoryBehavior crapWeVendToCustomers;\n}\n\n^ I'm joking about that last identifier name, of course. But I phrased it this way to illustrate something we should be cognizant of avoiding, I suppose.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:39:31Z", "path": "testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousPredictions.java", "diffHunk": "@@ -109,6 +116,56 @@ public TranslateTextResult translateText(\n         );\n     }\n \n+    /**\n+     * Detect celebrities in given image synchronously and return the result of operation.\n+     * @param image the input image to detect celebrities from\n+     * @param options identify options\n+     * @return the result of celebrities detection\n+     * @throws PredictionsException if identify fails or times out\n+     */\n+    @NonNull\n+    public IdentifyCelebritiesResult identifyCelebrities(\n+            @NonNull Bitmap image,\n+            @NonNull IdentifyOptions options\n+    ) throws PredictionsException {\n+        return (IdentifyCelebritiesResult) Await.<IdentifyResult, PredictionsException>result(\n+            PREDICTIONS_OPERATION_TIMEOUT_MS,\n+            (onResult, onError) -> asyncDelegate.identify(\n+                    IdentifyActionType.DETECT_CELEBRITIES,\n+                    image,\n+                    options,\n+                    onResult,\n+                    onError\n+            )\n+        );\n+    }\n+\n+    /**\n+     * Detect labels in given image synchronously and return the result of operation.\n+     * @param type the type of label to detect\n+     * @param image the input image to detect labels from\n+     * @param options identify options\n+     * @return the result of labels detection\n+     * @throws PredictionsException if identify fails or times out\n+     */\n+    @NonNull\n+    public IdentifyLabelsResult identifyLabels(\n+            @NonNull LabelType type,\n+            @NonNull Bitmap image,\n+            @NonNull IdentifyOptions options\n+    ) throws PredictionsException {\n+        return (IdentifyLabelsResult) Await.<IdentifyResult, PredictionsException>result(", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1NzEwNA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414757104", "bodyText": "Perhaps so. I will make SynchronousPredictions more faithful to the actual API", "author": "raphkim", "createdAt": "2020-04-24T17:52:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MDY1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousPredictions.java b/testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousPredictions.java\nindex 62554e41..f8627640 100644\n--- a/testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousPredictions.java\n+++ b/testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousPredictions.java\n\n@@ -117,47 +148,39 @@ public final class SynchronousPredictions {\n     }\n \n     /**\n-     * Detect celebrities in given image synchronously and return the result of operation.\n-     * @param image the input image to detect celebrities from\n-     * @param options identify options\n-     * @return the result of celebrities detection\n+     * Analyze given image synchronously with default options and\n+     * return the result of operation.\n+     * @param actionType identification category type\n+     * @param image the input image to analyze\n+     * @return the result of image analysis\n      * @throws PredictionsException if identify fails or times out\n      */\n     @NonNull\n-    public IdentifyCelebritiesResult identifyCelebrities(\n-            @NonNull Bitmap image,\n-            @NonNull IdentifyOptions options\n+    public IdentifyResult identify(\n+            @NonNull IdentifyAction actionType,\n+            @NonNull Bitmap image\n     ) throws PredictionsException {\n-        return (IdentifyCelebritiesResult) Await.<IdentifyResult, PredictionsException>result(\n-            PREDICTIONS_OPERATION_TIMEOUT_MS,\n-            (onResult, onError) -> asyncDelegate.identify(\n-                    IdentifyActionType.DETECT_CELEBRITIES,\n-                    image,\n-                    options,\n-                    onResult,\n-                    onError\n-            )\n-        );\n+        return identify(actionType, image, IdentifyOptions.defaults());\n     }\n \n     /**\n-     * Detect labels in given image synchronously and return the result of operation.\n-     * @param type the type of label to detect\n-     * @param image the input image to detect labels from\n+     * Analyze given image synchronously and return the result of operation.\n+     * @param actionType identification category type\n+     * @param image the input image to detect analyze\n      * @param options identify options\n-     * @return the result of labels detection\n+     * @return the result of image analysis\n      * @throws PredictionsException if identify fails or times out\n      */\n     @NonNull\n-    public IdentifyLabelsResult identifyLabels(\n-            @NonNull LabelType type,\n+    public IdentifyResult identify(\n+            @NonNull IdentifyAction actionType,\n             @NonNull Bitmap image,\n             @NonNull IdentifyOptions options\n     ) throws PredictionsException {\n-        return (IdentifyLabelsResult) Await.<IdentifyResult, PredictionsException>result(\n+        return Await.<IdentifyResult, PredictionsException>result(\n             PREDICTIONS_OPERATION_TIMEOUT_MS,\n             (onResult, onError) -> asyncDelegate.identify(\n-                    type,\n+                    actionType,\n                     image,\n                     options,\n                     onResult,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MTY0Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414171642", "bodyText": "rawTextLines?\nis this just the full text split on \\n? Or why is it special?", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:41:44Z", "path": "core/src/main/java/com/amplifyframework/predictions/result/IdentifyTextResult.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.result;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.IdentifiedText;\n+import com.amplifyframework.util.Immutable;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * The result of the call to identify text from an image.\n+ */\n+public final class IdentifyTextResult implements IdentifyResult {\n+    private final String fullText;\n+    private final List<String> rawLineText;\n+    private final List<IdentifiedText> words;\n+    private final List<IdentifiedText> lines;\n+\n+    private IdentifyTextResult(final Builder builder) {\n+        this.fullText = builder.getFullText();\n+        this.rawLineText = builder.getRawLineText();\n+        this.words = builder.getWords();\n+        this.lines = builder.getLines();\n+    }\n+\n+    /**\n+     * Gets the full text from the image.\n+     * @return the full text\n+     */\n+    @NonNull\n+    public String getFullText() {\n+        return fullText;\n+    }\n+\n+    /**\n+     * Gets the list of raw lines of text.\n+     * @return the raw lines of text\n+     */\n+    @NonNull\n+    public List<String> getRawLineText() {\n+        return Immutable.of(rawLineText);\n+    }\n+\n+    /**\n+     * Gets the list of identified words.\n+     * @return the identified words\n+     */\n+    @NonNull\n+    public List<IdentifiedText> getWords() {\n+        return Immutable.of(words);\n+    }\n+\n+    /**\n+     * Gets the list of identified lines.\n+     * @return the identified lines\n+     */\n+    @NonNull\n+    public List<IdentifiedText> getLines() {\n+        return Immutable.of(lines);\n+    }\n+\n+    /**\n+     * Gets a builder instance to help easily construct an\n+     * instance of text identification result.\n+     * @return an unassigned instance of builder\n+     */\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * Builder to help easily construct an instance of\n+     * {@link IdentifyTextResult}.\n+     */\n+    public static final class Builder {\n+        private String fullText;\n+        private List<String> rawLineText;\n+        private List<IdentifiedText> words;\n+        private List<IdentifiedText> lines;\n+\n+        /**\n+         * Sets the full text and return this builder.\n+         * @param fullText the full text\n+         * @return this builder instance\n+         */\n+        @NonNull\n+        public Builder fullText(@NonNull String fullText) {\n+            this.fullText = Objects.requireNonNull(fullText);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the raw lines of text and return this builder.\n+         * @param rawLineText the raw lines of text\n+         * @return this builder instance\n+         */\n+        @NonNull\n+        public Builder rawLineText(@NonNull List<String> rawLineText) {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2Mzg1MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414763851", "bodyText": "platform parity for models", "author": "raphkim", "createdAt": "2020-04-24T18:03:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MTY0Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MjIxNA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414172214", "bodyText": "We have like an OperationResult, or Result, or AmplifyResult or something right? Should this extends from that?", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:43:04Z", "path": "core/src/main/java/com/amplifyframework/predictions/result/IdentifyResult.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.result;\n+\n+/**\n+ * Interface to group different types of results from\n+ * identify operation in Predictions category.\n+ */\n+public interface IdentifyResult {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2NTUyMg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414765522", "bodyText": "com.amplifyframework.core.async.Result currently is not directly referenced anywhere in the project currently. However, I think we already have all our result instances implement it, so I should have added it. will fix", "author": "raphkim", "createdAt": "2020-04-24T18:06:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MjIxNA=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/result/IdentifyResult.java b/core/src/main/java/com/amplifyframework/predictions/result/IdentifyResult.java\nindex 806b5ce5..04a0b7af 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/result/IdentifyResult.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/result/IdentifyResult.java\n\n@@ -15,9 +15,11 @@\n \n package com.amplifyframework.predictions.result;\n \n+import com.amplifyframework.core.async.Result;\n+\n /**\n  * Interface to group different types of results from\n  * identify operation in Predictions category.\n  */\n-public interface IdentifyResult {\n+public interface IdentifyResult extends Result {\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzA2Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414173062", "bodyText": "Somewhere in the chain, make sure you Immutable.of( this before you cache it into the IdentityLabelsResult\u2019s instance variable.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:45:11Z", "path": "core/src/main/java/com/amplifyframework/predictions/result/IdentifyLabelsResult.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.result;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.Label;\n+import com.amplifyframework.util.Immutable;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * Holds data about all of the objects and scenes that were\n+ * detected and labeled in an image or a video.\n+ */\n+public final class IdentifyLabelsResult implements IdentifyResult {\n+    private final List<Label> labels;\n+    private final boolean unsafeContent;\n+\n+    private IdentifyLabelsResult(final Builder builder) {\n+        this.labels = builder.getLabels();\n+        this.unsafeContent = builder.getUnsafeContent();\n+    }\n+\n+    /**\n+     * Gets the list of labels.\n+     * @return the labels\n+     */\n+    @NonNull\n+    public List<Label> getLabels() {\n+        return Immutable.of(labels);\n+    }\n+\n+    /**\n+     * Returns true if it is unsafe content.\n+     * @return true if it is unsafe content\n+     */\n+    public boolean isUnsafeContent() {\n+        return unsafeContent;\n+    }\n+\n+    /**\n+     * Gets a builder to help easily construct an instance\n+     * of label identification result.\n+     * @return an unassigned builder instance\n+     */\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * Builder to help easily construct an instance of\n+     * {@link IdentifyLabelsResult}.\n+     */\n+    public static final class Builder {\n+        private List<Label> labels;\n+        private boolean unsafeContent;\n+\n+        private Builder() {\n+            this.labels = Collections.emptyList();", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2NjExMQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414766111", "bodyText": "IdentifyLabelsResult#getLabels() already returns an immutable list! :)", "author": "raphkim", "createdAt": "2020-04-24T18:07:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzA2Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzUyOA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414173528", "bodyText": "Probably best to order your factory methods right after your constructors, since they serve a similar purpose.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:46:10Z", "path": "core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntityMatchesResult.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.result;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.EntityMatch;\n+import com.amplifyframework.util.Immutable;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * The result of the call to identify similarity of one image entity\n+ * to another from a different image.\n+ */\n+public final class IdentifyEntityMatchesResult implements IdentifyResult {\n+    private final List<EntityMatch> entityMatches;\n+\n+    private IdentifyEntityMatchesResult(List<EntityMatch> entityMatches) {\n+        this.entityMatches = entityMatches;\n+    }\n+\n+    /**\n+     * Gets the list of detected entity matches.\n+     * @return the list of entity matches\n+     */\n+    @NonNull\n+    public List<EntityMatch> getEntityMatches() {\n+        return Immutable.of(entityMatches);\n+    }\n+\n+    /**\n+     * Constructs a new instance of {@link IdentifyEntityMatchesResult} from\n+     * the given list of entity matches.\n+     * @param entityMatches A list of entity matches\n+     * @return The result instance containing the given list of entity matches\n+     */\n+    @NonNull\n+    public static IdentifyEntityMatchesResult fromEntities(@NonNull List<EntityMatch> entityMatches) {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNTcwOA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414805708", "bodyText": "oh i see what you mean. Fixed", "author": "raphkim", "createdAt": "2020-04-24T19:16:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzUyOA=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntityMatchesResult.java b/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntityMatchesResult.java\nindex 2278f9cd..563eba49 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntityMatchesResult.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntityMatchesResult.java\n\n@@ -34,15 +34,6 @@ public final class IdentifyEntityMatchesResult implements IdentifyResult {\n         this.entityMatches = entityMatches;\n     }\n \n-    /**\n-     * Gets the list of detected entity matches.\n-     * @return the list of entity matches\n-     */\n-    @NonNull\n-    public List<EntityMatch> getEntityMatches() {\n-        return Immutable.of(entityMatches);\n-    }\n-\n     /**\n      * Constructs a new instance of {@link IdentifyEntityMatchesResult} from\n      * the given list of entity matches.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzY0MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414173640", "bodyText": "ordering - move after constructor", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:46:24Z", "path": "core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntitiesResult.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.result;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.EntityDetails;\n+import com.amplifyframework.util.Immutable;\n+\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * The result of the call to identify entities from an image.\n+ */\n+public final class IdentifyEntitiesResult implements IdentifyResult {\n+    private final List<EntityDetails> entities;\n+\n+    private IdentifyEntitiesResult(List<EntityDetails> faces) {\n+        this.entities = faces;\n+    }\n+\n+    /**\n+     * Gets the list of detected entities and other details.\n+     * @return the list of entities\n+     */\n+    @NonNull\n+    public List<EntityDetails> getEntities() {\n+        return Immutable.of(entities);\n+    }\n+\n+    /**\n+     * Constructs a new instance of {@link IdentifyEntitiesResult} from\n+     * the given list of entities.\n+     * @param entities A list of detected entities\n+     * @return The result instance containing the given list of detected entities\n+     */\n+    @NonNull\n+    public static IdentifyEntitiesResult fromFaces(@NonNull List<EntityDetails> entities) {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2NzE3NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414767175", "bodyText": "? I believe it already is after the constructor?", "author": "raphkim", "createdAt": "2020-04-24T18:09:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0NTA0MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414845041", "bodyText": "Haha sorry, I mean immediately following any/all constructors, without other methods in between.", "author": "jamesonwilliams", "createdAt": "2020-04-24T20:30:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MzY0MA=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntitiesResult.java b/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntitiesResult.java\nindex 9a899ac8..017f5669 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntitiesResult.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/result/IdentifyEntitiesResult.java\n\n@@ -33,15 +33,6 @@ public final class IdentifyEntitiesResult implements IdentifyResult {\n         this.entities = faces;\n     }\n \n-    /**\n-     * Gets the list of detected entities and other details.\n-     * @return the list of entities\n-     */\n-    @NonNull\n-    public List<EntityDetails> getEntities() {\n-        return Immutable.of(entities);\n-    }\n-\n     /**\n      * Constructs a new instance of {@link IdentifyEntitiesResult} from\n      * the given list of entities.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NDgwMQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414174801", "bodyText": "I think you want to do this before you exit the builder. You're storing a mutable copy in built object, which means that it would be possible for someone to do like:\nList<Foo> mutableFoo = new ArrayList<>();\nIdentityDocumentTextResult.builder()\n    .foo(mutableFoo)\n     .build();\nmutableFoo.clearAll();\n\nNow at this point, your result object would have changed, too, since its contained object has changed.\nThe object returned by getWords() is not-changeable, but that's of little concern, at that point.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:49:18Z", "path": "core/src/main/java/com/amplifyframework/predictions/result/IdentifyDocumentTextResult.java", "diffHunk": "@@ -0,0 +1,269 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.result;\n+\n+import androidx.annotation.NonNull;\n+\n+import com.amplifyframework.predictions.models.BoundedKeyValue;\n+import com.amplifyframework.predictions.models.IdentifiedText;\n+import com.amplifyframework.predictions.models.Selection;\n+import com.amplifyframework.predictions.models.Table;\n+import com.amplifyframework.util.Immutable;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * The result of a call to identify text in an image of a document.\n+ */\n+public final class IdentifyDocumentTextResult implements IdentifyResult {\n+    private final String fullText;\n+    private final List<String> rawLineText;\n+    private final List<IdentifiedText> words;\n+    private final List<IdentifiedText> lines;\n+    private final List<Selection> selections;\n+    private final List<Table> tables;\n+    private final List<BoundedKeyValue> keyValues;\n+\n+    private IdentifyDocumentTextResult(final Builder builder) {\n+        this.fullText = builder.getFullText();\n+        this.rawLineText = builder.getRawLineText();\n+        this.words = builder.getWords();\n+        this.lines = builder.getLines();\n+        this.selections = builder.getSelections();\n+        this.tables = builder.getTables();\n+        this.keyValues = builder.getKeyValues();\n+    }\n+\n+    /**\n+     * Gets the full text from the image.\n+     * @return the full text\n+     */\n+    @NonNull\n+    public String getFullText() {\n+        return fullText;\n+    }\n+\n+    /**\n+     * Gets the list of raw lines of text.\n+     * @return the raw lines of text\n+     */\n+    @NonNull\n+    public List<String> getRawLineText() {\n+        return Immutable.of(rawLineText);\n+    }\n+\n+    /**\n+     * Gets the list of identified words.\n+     * @return the identified words\n+     */\n+    @NonNull\n+    public List<IdentifiedText> getWords() {\n+        return Immutable.of(words);", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2Nzc2NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414767764", "bodyText": "Hmm, that's a good point. There are a lot of models at the moment, and I will make another PR to address it to every model in the module", "author": "raphkim", "createdAt": "2020-04-24T18:10:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NDgwMQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NTc3OA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414175778", "bodyText": "getRowCount() getRowSize() ? When I see getRows(), I expect it to return a collection of some kind.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:51:33Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/Table.java", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import androidx.annotation.NonNull;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * A representation of 2-D table in given dimensions.\n+ * A table can be detected from an image of a document\n+ * and be organized into this data type.\n+ */\n+public final class Table {\n+    private final int rows;\n+    private final int columns;\n+    private final List<Cell> cells;\n+\n+    private Table(final Builder builder) {\n+        this.rows = builder.getRows();\n+        this.columns = builder.getColumns();\n+        this.cells = builder.getCells();\n+    }\n+\n+    /**\n+     * Gets the row count.\n+     * @return the row count\n+     * */\n+    public int getRows() {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2ODA0NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414768044", "bodyText": "Good point. I'll do that", "author": "raphkim", "createdAt": "2020-04-24T18:10:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NTc3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNTkwMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414805900", "bodyText": "Renamed to RowSize and ColumnSize", "author": "raphkim", "createdAt": "2020-04-24T19:16:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NTc3OA=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/models/Table.java b/core/src/main/java/com/amplifyframework/predictions/models/Table.java\nindex 663ab5dc..dd39dc06 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/models/Table.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/models/Table.java\n\n@@ -27,13 +27,13 @@ import java.util.Objects;\n  * and be organized into this data type.\n  */\n public final class Table {\n-    private final int rows;\n-    private final int columns;\n+    private final int rowSize;\n+    private final int columnSize;\n     private final List<Cell> cells;\n \n     private Table(final Builder builder) {\n-        this.rows = builder.getRows();\n-        this.columns = builder.getColumns();\n+        this.rowSize = builder.getRowSize();\n+        this.columnSize = builder.getColumnSize();\n         this.cells = builder.getCells();\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NjA0NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414176045", "bodyText": "Same deal -- also particularly since getCells() returns a collection. The names would lead you to think all three have the same return type, currently.", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:52:11Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/Table.java", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import androidx.annotation.NonNull;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * A representation of 2-D table in given dimensions.\n+ * A table can be detected from an image of a document\n+ * and be organized into this data type.\n+ */\n+public final class Table {\n+    private final int rows;\n+    private final int columns;\n+    private final List<Cell> cells;\n+\n+    private Table(final Builder builder) {\n+        this.rows = builder.getRows();\n+        this.columns = builder.getColumns();\n+        this.cells = builder.getCells();\n+    }\n+\n+    /**\n+     * Gets the row count.\n+     * @return the row count\n+     * */\n+    public int getRows() {\n+        return rows;\n+    }\n+\n+    /**\n+     * Gets the column count.\n+     * @return the column count\n+     */\n+    public int getColumns() {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc2ODk4OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414768989", "bodyText": "fixed", "author": "raphkim", "createdAt": "2020-04-24T18:12:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NjA0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/models/Table.java b/core/src/main/java/com/amplifyframework/predictions/models/Table.java\nindex 663ab5dc..dd39dc06 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/models/Table.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/models/Table.java\n\n@@ -27,13 +27,13 @@ import java.util.Objects;\n  * and be organized into this data type.\n  */\n public final class Table {\n-    private final int rows;\n-    private final int columns;\n+    private final int rowSize;\n+    private final int columnSize;\n     private final List<Cell> cells;\n \n     private Table(final Builder builder) {\n-        this.rows = builder.getRows();\n-        this.columns = builder.getColumns();\n+        this.rowSize = builder.getRowSize();\n+        this.columnSize = builder.getColumnSize();\n         this.cells = builder.getCells();\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NjUzMw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414176533", "bodyText": "What's the use case for doing this after object construction?\nAlso, if a selection isn't selected -- wouldn't one just not create the selection to begin with?\nIn other words, if I have like aSet<Selection>, I would expect that to contain only active selections.\nMaybe there is a use-case here? In which case, should this be named like isActive()? With a bit of Javadoc to guide the user on when/why they might care / expect this to be true/false?", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:53:23Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/Selection.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import android.graphics.RectF;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Represents a selection from an image. It contains\n+ * the bounding geometry of a selection and an\n+ * indicator to regard its selection state.\n+ *\n+ * Defaults to deselected state until explicitly selected.\n+ */\n+public final class Selection {\n+    private final RectF box;\n+    private final Polygon polygon;\n+\n+    private boolean selected;\n+\n+    private Selection(RectF box, Polygon polygon) {\n+        this.box = box;\n+        this.polygon = polygon;\n+    }\n+\n+    /**\n+     * Constructs an instance of {@link Selection} using\n+     * rectangular boundary.\n+     * @param box the bounding box\n+     * @return {@link Selection} instance containing a box\n+     */\n+    public static Selection fromBox(@NonNull RectF box) {\n+        return new Selection(Objects.requireNonNull(box), null);\n+    }\n+\n+    /**\n+     * Constructs an instance of {@link Selection} using\n+     * polygonal boundary.\n+     * @param polygon the bounding polygon\n+     * @return {@link Selection} instance containing a polygon\n+     */\n+    public static Selection fromPolygon(@NonNull Polygon polygon) {\n+        return new Selection(null, Objects.requireNonNull(polygon));\n+    }\n+\n+    /**\n+     * Gets the rectangular boundary. It fetches the\n+     * box portion of registered target boundary.\n+     * @return the bounding box\n+     */\n+    @Nullable\n+    public RectF getBox() {\n+        return box;\n+    }\n+\n+    /**\n+     * Gets the polygonal boundary. It fetches the\n+     * polygon portion of registered target boundary.\n+     * @return the polygon\n+     */\n+    @Nullable\n+    public Polygon getPolygon() {\n+        return polygon;\n+    }\n+\n+    /**\n+     * Returns true if this selection is selected.\n+     * @return true if this selection is selected\n+     */\n+    public boolean isSelected() {\n+        return selected;\n+    }\n+\n+    /**\n+     * Activates the selection flag.\n+     */\n+    public void select() {\n+        this.selected = true;\n+    }\n+\n+    /**\n+     * Deactivates the selection flag.\n+     */\n+    public void deselect() {\n+        this.selected = false;\n+    }", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MDk1MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414770950", "bodyText": "Good point! Upon looking at the iOS model, it seems the boolean is final, so it shouldn't have been settable after construction. Will fix", "author": "raphkim", "createdAt": "2020-04-24T18:15:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NjUzMw=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/models/Selection.java b/core/src/main/java/com/amplifyframework/predictions/models/Selection.java\nindex 0ff4743e..be23661f 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/models/Selection.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/models/Selection.java\n\n@@ -25,38 +25,38 @@ import java.util.Objects;\n  * Represents a selection from an image. It contains\n  * the bounding geometry of a selection and an\n  * indicator to regard its selection state.\n- *\n- * Defaults to deselected state until explicitly selected.\n  */\n public final class Selection {\n     private final RectF box;\n     private final Polygon polygon;\n+    private final boolean selected;\n \n-    private boolean selected;\n-\n-    private Selection(RectF box, Polygon polygon) {\n+    private Selection(RectF box, Polygon polygon, boolean selected) {\n         this.box = box;\n         this.polygon = polygon;\n+        this.selected = selected;\n     }\n \n     /**\n      * Constructs an instance of {@link Selection} using\n      * rectangular boundary.\n      * @param box the bounding box\n+     * @param selected true if this selection is selected\n      * @return {@link Selection} instance containing a box\n      */\n-    public static Selection fromBox(@NonNull RectF box) {\n-        return new Selection(Objects.requireNonNull(box), null);\n+    public static Selection fromBox(@NonNull RectF box, boolean selected) {\n+        return new Selection(Objects.requireNonNull(box), null, selected);\n     }\n \n     /**\n      * Constructs an instance of {@link Selection} using\n      * polygonal boundary.\n      * @param polygon the bounding polygon\n+     * @param selected true if this selection is selected\n      * @return {@link Selection} instance containing a polygon\n      */\n-    public static Selection fromPolygon(@NonNull Polygon polygon) {\n-        return new Selection(null, Objects.requireNonNull(polygon));\n+    public static Selection fromPolygon(@NonNull Polygon polygon, boolean selected) {\n+        return new Selection(null, Objects.requireNonNull(polygon), selected);\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3ODYwNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414178606", "bodyText": "Some of these are intuitive. Not to say that they couldn't all benefit from technical specificity.\nHowever, these ones, to me, are not intuitive.\n\nNOSE_CREST\nMEDIAN_LINE\nFACE_CONTOUR\n\nI think my nose crest is the portion of my face's median line that runs up-down in middle of my nose. But, maybe not?\nFace contour - like, is my face fat?", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:58:15Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/LandmarkType.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+/**\n+ * Types of detectable entity landmarks.\n+ */\n+@SuppressWarnings(\"JavadocVariable\")\n+public enum LandmarkType {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MTE0MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414771141", "bodyText": "Model parity across platforms", "author": "raphkim", "createdAt": "2020-04-24T18:15:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3ODYwNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3ODk0NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414178944", "bodyText": "Should these enum values be SIMPLE and MODERATION?", "author": "jamesonwilliams", "createdAt": "2020-04-23T22:59:04Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/LabelType.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * Specifies the type of label detection to perform.\n+ */\n+public enum LabelType implements IdentifyAction {\n+    /**\n+     * Simple label provides information about a single object\n+     * or scenery found in an image.\n+     */\n+    LABELS,", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MTI0Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414771246", "bodyText": "Model parity across platforms", "author": "raphkim", "createdAt": "2020-04-24T18:15:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3ODk0NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3OTQ1OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414179459", "bodyText": "Like, page of a broader document? Or...? Huh.", "author": "jamesonwilliams", "createdAt": "2020-04-23T23:00:28Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/IdentifiedText.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import androidx.annotation.NonNull;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Represents the graphical text that is identified\n+ * from inside an image.\n+ */\n+public final class IdentifiedText extends ImageFeature<String> {\n+\n+    private final int page;\n+\n+    private IdentifiedText(Builder builder) {\n+        super(builder);\n+        this.page = builder.getPage();\n+    }\n+\n+    @Override\n+    @NonNull\n+    public String getTypeAlias() {\n+        return FeatureType.IDENTIFIED_TEXT.getAlias();\n+    }\n+\n+    /**\n+     * Gets the identified text. This is the same\n+     * text as the associated feature.\n+     * @return the identified text\n+     */\n+    @NonNull\n+    public String getText() {\n+        return getValue();\n+    }\n+\n+    /**\n+     * Gets the page value.", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MTcwNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414771706", "bodyText": "Currently there as a placeholder for platform parity. I will update the javadoc once I make a PR that actually uses this model", "author": "raphkim", "createdAt": "2020-04-24T18:16:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3OTQ1OQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MDE4MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414180180", "bodyText": "When/why would the case differ? Can't we just tighten up the usage is always the same, and then do a literal equals(...) check? This is a slippery slope", "author": "jamesonwilliams", "createdAt": "2020-04-23T23:02:06Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/Feature.java", "diffHunk": "@@ -85,7 +85,7 @@ public int compareTo(@Nullable Feature<T> other) {\n         if (other == null) {\n             return -1;\n         }\n-        int typeDiff = this.getType().compareToIgnoreCase(other.getType());\n+        int typeDiff = this.getTypeAlias().compareToIgnoreCase(other.getTypeAlias());", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3MzE1MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414773150", "bodyText": "this is comparison implementation. Sure I could have just used compareTo instead of compareToIgnoreCase, but I figured this would be convenient. Comparing two features of different type is not an appropriate use-case anyways", "author": "raphkim", "createdAt": "2020-04-24T18:19:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MDE4MA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MDg0Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414180842", "bodyText": "In this builder, you permit a number of @Nullable options. What is their purpose? If a user sets a field to null, does it clear it? And mean \"I don't know\"? Or, what are the implications of leaving these things unspecified? When can an EntityDetails have different collections of these various properties?", "author": "jamesonwilliams", "createdAt": "2020-04-23T23:03:48Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/EntityDetails.java", "diffHunk": "@@ -0,0 +1,291 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import android.graphics.RectF;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+import com.amplifyframework.util.Immutable;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * Holds the entity detection results\n+ * for the predictions category.\n+ */\n+public final class EntityDetails {\n+    private final RectF box;\n+    private final Polygon polygon;\n+    private final AgeRange ageRange;\n+    private final Pose pose;\n+    private final Gender gender;\n+    private final List<Landmark> landmarks;\n+    private final List<Emotion> emotions;\n+    private final List<BinaryFeature> features;\n+\n+    private EntityDetails(final Builder builder) {\n+        this.box = builder.getBox();\n+        this.polygon = builder.getPolygon();\n+        this.ageRange = builder.getAgeRange();\n+        this.pose = builder.getPose();\n+        this.gender = builder.getGender();\n+        this.landmarks = builder.getLandmarks();\n+        this.emotions = builder.getEmotions();\n+        this.features = builder.getValues();\n+    }\n+\n+    /**\n+     * Gets the rectangular target boundary if available.\n+     * @return the rectangular boundary\n+     */\n+    @Nullable\n+    public RectF getBox() {\n+        return box;\n+    }\n+\n+    /**\n+     * Gets a more finely defined target boundary if available.\n+     * @return the polygonal boundary\n+     */\n+    @Nullable\n+    public Polygon getPolygon() {\n+        return polygon;\n+    }\n+\n+    /**\n+     * Gets the range of possible ages.\n+     * @return the range ages\n+     */\n+    @Nullable\n+    public AgeRange getAgeRange() {\n+        return ageRange;\n+    }\n+\n+    /**\n+     * Gets the detected pose.\n+     * @return the pose feature\n+     */\n+    @Nullable\n+    public Pose getPose() {\n+        return pose;\n+    }\n+\n+    /**\n+     * Gets the detected gender.\n+     * @return the gender type feature\n+     */\n+    @Nullable\n+    public Gender getGender() {\n+        return gender;\n+    }\n+\n+    /**\n+     * Gets the list of detected landmarks.\n+     * @return the list of landmarks\n+     */\n+    @NonNull\n+    public List<Landmark> getLandmarks() {\n+        return Immutable.of(landmarks);\n+    }\n+\n+    /**\n+     * Gets the list of detected emotions.\n+     * @return the list of emotions\n+     */\n+    @NonNull\n+    public List<Emotion> getEmotions() {\n+        return Immutable.of(emotions);\n+    }\n+\n+    /**\n+     * Gets the list of boolean features.\n+     * @return the list of features\n+     */\n+    @NonNull\n+    public List<BinaryFeature> getValues() {\n+        return Immutable.of(features);\n+    }\n+\n+    /**\n+     * Gets a builder for entity detection result.\n+     * @return a new builder\n+     */\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * Builder for {@link EntityDetails}.\n+     */\n+    public static final class Builder {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NjA1NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414776055", "bodyText": "It means that some of the properties that our implementation chose to detect are not required for other plugins to detect. So, a null would mean \"I do not detect this value in my implementation of identify\".", "author": "raphkim", "createdAt": "2020-04-24T18:24:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MDg0Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MTczNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414181737", "bodyText": "Wait I forget, why not just return FeatureType form this interface? The String discards your constraint set.", "author": "jamesonwilliams", "createdAt": "2020-04-23T23:06:12Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/Celebrity.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * Holds the celebrity detection results\n+ * for the predictions category.\n+ */\n+public final class Celebrity extends Feature<String> {\n+\n+    private Celebrity(final Builder builder) {\n+        super(builder);\n+    }\n+\n+    @Override\n+    @NonNull\n+    public String getTypeAlias() {", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc4ODY2MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414788660", "bodyText": "The point of this method is that some primitive feature detection like BinaryFeature can specifically label what type of feature it is detecting.", "author": "raphkim", "createdAt": "2020-04-24T18:45:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MTczNw=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MjE2NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414182165", "bodyText": "I think this is guaranteed, since you check them on the way in, no? However, Objects.requireNotNull(getValue()) do you need that?", "author": "jamesonwilliams", "createdAt": "2020-04-23T23:07:20Z", "path": "core/src/main/java/com/amplifyframework/predictions/models/BoundedKeyValue.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.predictions.models;\n+\n+import androidx.annotation.NonNull;\n+import androidx.core.util.Pair;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Holds the key-value detection results\n+ * for the predictions category.\n+ */\n+public final class BoundedKeyValue extends ImageFeature<Pair<String, String>> {\n+\n+    private BoundedKeyValue(final Builder builder) {\n+        super(builder);\n+    }\n+\n+    @Override\n+    @NonNull\n+    public String getTypeAlias() {\n+        return FeatureType.BOUNDED_KEY_VALUE.getAlias();\n+    }\n+\n+    /**\n+     * Gets the detected key.\n+     * @return the key\n+     */\n+    @NonNull\n+    @SuppressWarnings(\"ConstantConditions\") // Checked for non-null in builder\n+    public String getKey() {\n+        return getValue().first;\n+    }\n+\n+    /**\n+     * Gets the detected value.\n+     * @return the value\n+     */\n+    @NonNull\n+    @SuppressWarnings(\"ConstantConditions\") // Checked for non-null in builder\n+    public String getKeyValue() {\n+        return getValue().second;\n+    }\n+\n+    /**\n+     * Gets a builder to help easily construct\n+     * a bounded key-result object.\n+     * @return an unassigned builder instance\n+     */\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * Builder for {@link BoundedKeyValue}.\n+     */\n+    public static final class Builder\n+            extends ImageFeature.Builder<Builder, BoundedKeyValue, Pair<String, String>> {\n+        /**\n+         * Sets the key-value pair and return this builder.\n+         * @param key the key\n+         * @param value the value\n+         * @return this builder instance\n+         */\n+        @NonNull\n+        public Builder keyValue(@NonNull String key, @NonNull String value) {\n+            Objects.requireNonNull(key);\n+            Objects.requireNonNull(value);\n+            return value(new Pair<>(key, value));\n+        }\n+\n+        /**\n+         * Constructs a new instance of {@link BoundedKeyValue} using\n+         * the values assigned to this builder instance.\n+         * @return an instance of {@link BoundedKeyValue}\n+         */\n+        @NonNull\n+        public BoundedKeyValue build() {\n+            Objects.requireNonNull(getValue().first);\n+            Objects.requireNonNull(getValue().second);", "originalCommit": "9594674e095e301781fdbd3ae207e4f7ce1e0a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5MDc3MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414790771", "bodyText": "I will need all three actually. A user could have done BoundedKeyValue.value(new Pair<>(null, null), instead of using keyValuePair setter.", "author": "raphkim", "createdAt": "2020-04-24T18:49:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE4MjE2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "chunk": "diff --git a/core/src/main/java/com/amplifyframework/predictions/models/BoundedKeyValue.java b/core/src/main/java/com/amplifyframework/predictions/models/BoundedKeyValue.java\nindex 1f3a7738..9b96596a 100644\n--- a/core/src/main/java/com/amplifyframework/predictions/models/BoundedKeyValue.java\n+++ b/core/src/main/java/com/amplifyframework/predictions/models/BoundedKeyValue.java\n\n@@ -78,7 +78,7 @@ public final class BoundedKeyValue extends ImageFeature<Pair<String, String>> {\n          * @return this builder instance\n          */\n         @NonNull\n-        public Builder keyValue(@NonNull String key, @NonNull String value) {\n+        public Builder keyValuePair(@NonNull String key, @NonNull String value) {\n             Objects.requireNonNull(key);\n             Objects.requireNonNull(value);\n             return value(new Pair<>(key, value));\n"}}, {"oid": "5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "url": "https://github.com/aws-amplify/amplify-android/commit/5673bf6d5f6cc0ec4d3afe85f671a1655e8e05d2", "message": "Apply suggestions from Jameson", "committedDate": "2020-04-24T19:14:01Z", "type": "commit"}, {"oid": "795a57f01fdea81c295fb742b40d97f3e5a37f7a", "url": "https://github.com/aws-amplify/amplify-android/commit/795a57f01fdea81c295fb742b40d97f3e5a37f7a", "message": "Typo fixup", "committedDate": "2020-04-24T20:13:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0NjQ4Mw==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414846483", "bodyText": "Ahhh there she is! Nice", "author": "jamesonwilliams", "createdAt": "2020-04-24T20:33:46Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/EntityTypeAdapter.java", "diffHunk": "@@ -37,24 +35,26 @@ private EntityTypeAdapter() {}\n      */\n     @NonNull\n     public static EntityType fromComprehend(@NonNull String entity) {\n-        switch (entity.toLowerCase(Locale.US)) {\n-            case \"person\":\n+        com.amazonaws.services.comprehend.model.EntityType type =", "originalCommit": "795a57f01fdea81c295fb742b40d97f3e5a37f7a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0NjYwMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/394#discussion_r414846600", "bodyText": "Cool!", "author": "jamesonwilliams", "createdAt": "2020-04-24T20:34:01Z", "path": "aws-predictions/src/main/java/com/amplifyframework/predictions/aws/adapter/LandmarkTypeAdapter.java", "diffHunk": "@@ -34,46 +34,48 @@ private LandmarkTypeAdapter() {}\n      */\n     @NonNull\n     public static LandmarkType fromRekognition(@NonNull String landmark) {\n-        switch (landmark) {\n-            case \"eyeLeft\":\n-            case \"leftEyeLeft\":\n-            case \"leftEyeRight\":\n-            case \"leftEyeUp\":\n-            case \"leftEyeDown\":\n+        com.amazonaws.services.rekognition.model.LandmarkType type =", "originalCommit": "795a57f01fdea81c295fb742b40d97f3e5a37f7a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}