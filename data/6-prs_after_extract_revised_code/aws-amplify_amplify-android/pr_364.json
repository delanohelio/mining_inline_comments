{"pr_number": 364, "pr_title": "Run tests against PredictionsCategory, not Amplify", "pr_createdAt": "2020-04-07T22:49:53Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/364", "timeline": [{"oid": "e2c953320b7c65805e3b7a0762486da6394367cb", "url": "https://github.com/aws-amplify/amplify-android/commit/e2c953320b7c65805e3b7a0762486da6394367cb", "message": "Run tests against PredictionsCategory, not Amplify", "committedDate": "2020-04-07T22:46:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI2MjQ1OA==", "url": "https://github.com/aws-amplify/amplify-android/pull/364#discussion_r405262458", "bodyText": "It should be okay to re-init the mobile client in @Before, right? The benefit is, it gets all this setup stuff back into just few lines inside of one method body. Also, a guaranteed baseline before each @Test (for the win!)\nSingletons and static fields are sort of anti-pattern; I think we should aim to reduce our use of @BeforeClass (we use it more than most (quality) code bases I have seen, right now.)", "author": "jamesonwilliams", "createdAt": "2020-04-08T05:14:42Z", "path": "aws-predictions/src/androidTest/java/com/amplifyframework/predictions/aws/AWSPredictionsInterpretTest.java", "diffHunk": "@@ -44,16 +51,28 @@\n  */\n public final class AWSPredictionsInterpretTest {\n \n-    private static SynchronousPredictions predictions;\n+    private SynchronousPredictions predictions;\n \n     /**\n-     * Configure Amplify and Predictions plugin before the tests.\n-     * @throws Exception if configuration fails\n+     * Initialize mobile client singleton.\n+     * @throws Exception if mobile client initialization fails\n      */\n     @BeforeClass\n     public static void setUpOnce() throws Exception {\n-        TestConfiguration.configureIfNotConfigured();\n-        predictions = SynchronousPredictions.delegatingToAmplify();\n+        SynchronousMobileClient.instance().initialize();\n+    }\n+\n+    /**\n+     * Configure Predictions category before each test.\n+     */\n+    @Before\n+    public void setUp() {", "originalCommit": "e2c953320b7c65805e3b7a0762486da6394367cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI3Nzg4MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/364#discussion_r405277880", "bodyText": "Yea, they would do the same thing, but I think leaving it as is is good to remind us that AWSMobileClient is a singleton.", "author": "raphkim", "createdAt": "2020-04-08T06:04:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI2MjQ1OA=="}], "type": "inlineReview", "revised_code": null}]}