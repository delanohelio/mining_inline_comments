{"pr_number": 653, "pr_title": "fix(datastore) Set orchestrator status when no API configured", "pr_createdAt": "2020-07-17T19:45:19Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/653", "timeline": [{"oid": "9be3d0edbfd7eb90bb193887db4a2919ec8992d4", "url": "https://github.com/aws-amplify/amplify-android/commit/9be3d0edbfd7eb90bb193887db4a2919ec8992d4", "message": "fix(datastore) Set isOrchestratorReady flag to true  when no API is configured", "committedDate": "2020-07-17T19:42:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY0OTUxNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/653#discussion_r456649517", "bodyText": "why is this necessary on top of the actual call to initialization?", "author": "raphkim", "createdAt": "2020-07-17T20:04:20Z", "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/AWSDataStorePluginTest.java", "diffHunk": "@@ -102,9 +102,20 @@ public void configureAndInitializeInLocalMode() throws AmplifyException {\n         //Configure DataStore with an empty config (All defaults)\n         ApiCategory emptyApiCategory = spy(ApiCategory.class);\n         AWSDataStorePlugin standAloneDataStorePlugin = new AWSDataStorePlugin(modelProvider, emptyApiCategory);\n+        SynchronousDataStore synchronousDataStore = SynchronousDataStore.delegatingTo(standAloneDataStorePlugin);\n         standAloneDataStorePlugin.configure(new JSONObject(), context);\n         standAloneDataStorePlugin.initialize(context);\n+\n+        // Trick the DataStore since it's not getting initialized as part of the Amplify.initialize call chain\n+        Amplify.Hub.publish(HubChannel.DATASTORE, HubEvent.create(InitializationStatus.SUCCEEDED));\n+", "originalCommit": "9be3d0edbfd7eb90bb193887db4a2919ec8992d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY1MDk3MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/653#discussion_r456650970", "bodyText": "Because the message only gets sent from the Amplify Category class I believe. For unit testing purposes, I'm initializing the plugin directly", "author": "rjuliano", "createdAt": "2020-07-17T20:07:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY0OTUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY1MjMxMQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/653#discussion_r456652311", "bodyText": "Ah, makes sense. \ud83d\udc4d", "author": "raphkim", "createdAt": "2020-07-17T20:10:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY0OTUxNw=="}], "type": "inlineReview", "revised_code": null}]}