{"pr_number": 926, "pr_title": "fix(api): Add owner field to selection set if implicitly defined", "pr_createdAt": "2020-10-23T22:11:17Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/926", "timeline": [{"oid": "7f3f50a5d295dc5810ddc71b8b44c9d1a5a6df71", "url": "https://github.com/aws-amplify/amplify-android/commit/7f3f50a5d295dc5810ddc71b8b44c9d1a5a6df71", "message": "fix(api): Add owner field to selection set if implicitly defined", "committedDate": "2020-10-23T22:04:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc2NzYwNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/926#discussion_r511767606", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    result.add(new SelectionSet(authRule.getOwnerFieldOrDefault(), null));\n          \n          \n            \n                                    result.add(new SelectionSet(authRule.getOwnerFieldOrDefault(), Collections.emptySet()));", "author": "jamesonwilliams", "createdAt": "2020-10-26T07:48:17Z", "path": "aws-api-appsync/src/main/java/com/amplifyframework/api/aws/SelectionSet.java", "diffHunk": "@@ -244,6 +246,12 @@ private SelectionSet wrapPagination(SelectionSet node) {\n                 } else {\n                     result.add(new SelectionSet(fieldName, null));\n                 }\n+                for (AuthRule authRule : schema.getAuthRules()) {\n+                    if (AuthStrategy.OWNER.equals(authRule.getAuthStrategy())) {\n+                        result.add(new SelectionSet(authRule.getOwnerFieldOrDefault(), null));", "originalCommit": "7f3f50a5d295dc5810ddc71b8b44c9d1a5a6df71", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA5MzIxNA==", "url": "https://github.com/aws-amplify/amplify-android/pull/926#discussion_r512093214", "bodyText": "I just pushed a change to require SelectionSet.nodes to be nonnull, let me know what you think!", "author": "richardmcclellan", "createdAt": "2020-10-26T16:24:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc2NzYwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjExMDExMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/926#discussion_r512110110", "bodyText": "'Tis a thing of exceptional beauty, @richardmcclellan, thanks!", "author": "jamesonwilliams", "createdAt": "2020-10-26T16:47:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc2NzYwNg=="}], "type": "inlineReview", "revised_code": {"commit": "acd797ec70c253d103b0879582dbfa84aaf9cdbc", "chunk": "diff --git a/aws-api-appsync/src/main/java/com/amplifyframework/api/aws/SelectionSet.java b/aws-api-appsync/src/main/java/com/amplifyframework/api/aws/SelectionSet.java\nindex 0ddc6115..4a2c8d35 100644\n--- a/aws-api-appsync/src/main/java/com/amplifyframework/api/aws/SelectionSet.java\n+++ b/aws-api-appsync/src/main/java/com/amplifyframework/api/aws/SelectionSet.java\n\n@@ -244,17 +253,17 @@ public final class SelectionSet {\n                 } else if (isCustomType(field)) {\n                     result.add(new SelectionSet(fieldName, getNestedCustomTypeFields(getClassForField(field))));\n                 } else {\n-                    result.add(new SelectionSet(fieldName, null));\n+                    result.add(new SelectionSet(fieldName));\n                 }\n                 for (AuthRule authRule : schema.getAuthRules()) {\n                     if (AuthStrategy.OWNER.equals(authRule.getAuthStrategy())) {\n-                        result.add(new SelectionSet(authRule.getOwnerFieldOrDefault(), null));\n+                        result.add(new SelectionSet(authRule.getOwnerFieldOrDefault()));\n                         break;\n                     }\n                 }\n             }\n             for (String fieldName : requestOptions.modelMetaFields()) {\n-                result.add(new SelectionSet(fieldName, null));\n+                result.add(new SelectionSet(fieldName));\n             }\n             return result;\n         }\n"}}, {"oid": "acd797ec70c253d103b0879582dbfa84aaf9cdbc", "url": "https://github.com/aws-amplify/amplify-android/commit/acd797ec70c253d103b0879582dbfa84aaf9cdbc", "message": "Require SelectionSet.nodes to be nonnull", "committedDate": "2020-10-26T16:40:43Z", "type": "commit"}, {"oid": "acd797ec70c253d103b0879582dbfa84aaf9cdbc", "url": "https://github.com/aws-amplify/amplify-android/commit/acd797ec70c253d103b0879582dbfa84aaf9cdbc", "message": "Require SelectionSet.nodes to be nonnull", "committedDate": "2020-10-26T16:40:43Z", "type": "forcePushed"}]}