{"pr_number": 4505, "pr_title": "Fixed \"Searching within single podcast shows other podcasts #4488\"", "pr_createdAt": "2020-10-06T19:33:43Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4505", "timeline": [{"oid": "b7147e306b3d628f72db1f3a0d645a2e0791389f", "url": "https://github.com/AntennaPod/AntennaPod/commit/b7147e306b3d628f72db1f3a0d645a2e0791389f", "message": "Fixed \"Searching within single podcast shows other podcasts #4488\"\n\nSince the single SearchFragment is used for searching items at both within a podcast fragment and at Episode Fragment, only difference arises is the passage of feed, episode page pushes 0 and the podcast page pushes the particular value)\n\nHence, A check is placed when retrieving search results for the feed value and The Feed recycler Data is appropriately handled", "committedDate": "2020-10-06T10:37:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU2MjY0NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4505#discussion_r500562644", "bodyText": "For AntennaPod, we use a slightly different code style. It is based on the Google Java code style. You can find details about what should be changed on the \"checks\" tab on GitHub.", "author": "ByteHamster", "createdAt": "2020-10-06T20:03:23Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -259,7 +259,15 @@ private void search() {\n                     progressBar.setVisibility(View.GONE);\n                     this.results = results.first;\n                     adapter.updateItems(results.first);\n-                    adapterFeeds.updateData(results.second);\n+                    if(getArguments().getLong(ARG_FEED,0)==0)", "originalCommit": "b7147e306b3d628f72db1f3a0d645a2e0791389f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU3NTA4NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4505#discussion_r500575084", "bodyText": "I went through the \"checks\" tab and have found the issue spotted by CircleCI Checks / static-analysis. Fixing it right away.\nJust to be clear, you were talking about that particular error only, right?", "author": "abhinavg1997", "createdAt": "2020-10-06T20:26:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU2MjY0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU4MTAyOA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4505#discussion_r500581028", "bodyText": "Yes, the static-analysis checks that the code style matches Google's style.", "author": "ByteHamster", "createdAt": "2020-10-06T20:38:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU2MjY0NA=="}], "type": "inlineReview", "revised_code": {"commit": "602f9ce9abe40072ce59260c381b028e996c7568", "chunk": "diff --git a/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java b/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java\nindex f0590e79f..0ba5795f2 100644\n--- a/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java\n+++ b/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java\n\n@@ -262,11 +263,10 @@ public class SearchFragment extends Fragment {\n                     if(getArguments().getLong(ARG_FEED,0)==0)\n                     {\n                         adapterFeeds.updateData(results.second);\n-                    }\n-                    else\n+                    }else\n                     {\n \n-                        adapterFeeds.updateData(null);\n+                        adapterFeeds.updateData(Collections.emptyList());\n                     }\n                     String query = getArguments().getString(ARG_QUERY);\n                     emptyViewHandler.setMessage(getString(R.string.no_results_for_query, query));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU2NDU0MA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4505#discussion_r500564540", "bodyText": "This line crashes because the list must not be null. The crash is only visible in the logcat output because it is a background task. It would be more clean to pass Collections.emptyList().", "author": "ByteHamster", "createdAt": "2020-10-06T20:06:50Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -259,7 +259,15 @@ private void search() {\n                     progressBar.setVisibility(View.GONE);\n                     this.results = results.first;\n                     adapter.updateItems(results.first);\n-                    adapterFeeds.updateData(results.second);\n+                    if(getArguments().getLong(ARG_FEED,0)==0)\n+                    {\n+                        adapterFeeds.updateData(results.second);\n+                    }\n+                    else\n+                    {\n+\n+                        adapterFeeds.updateData(null);", "originalCommit": "b7147e306b3d628f72db1f3a0d645a2e0791389f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU2OTU4Mw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4505#discussion_r500569583", "bodyText": "Understood, working on changing the code. Will see what the exact error is so I get a better understanding as to why it's wrong", "author": "abhinavg1997", "createdAt": "2020-10-06T20:16:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU2NDU0MA=="}], "type": "inlineReview", "revised_code": {"commit": "602f9ce9abe40072ce59260c381b028e996c7568", "chunk": "diff --git a/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java b/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java\nindex f0590e79f..0ba5795f2 100644\n--- a/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java\n+++ b/app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java\n\n@@ -262,11 +263,10 @@ public class SearchFragment extends Fragment {\n                     if(getArguments().getLong(ARG_FEED,0)==0)\n                     {\n                         adapterFeeds.updateData(results.second);\n-                    }\n-                    else\n+                    }else\n                     {\n \n-                        adapterFeeds.updateData(null);\n+                        adapterFeeds.updateData(Collections.emptyList());\n                     }\n                     String query = getArguments().getString(ARG_QUERY);\n                     emptyViewHandler.setMessage(getString(R.string.no_results_for_query, query));\n"}}, {"oid": "602f9ce9abe40072ce59260c381b028e996c7568", "url": "https://github.com/AntennaPod/AntennaPod/commit/602f9ce9abe40072ce59260c381b028e996c7568", "message": "Fixed \"Searching within single podcast shows other podcasts #4488\"\n\nSince the single SearchFragment is used for searching items at both within a podcast fragment and at Episode Fragment, only difference arises is the passage of feed, episode page pushes 0 and the podcast page pushes the particular value)\n\nHence, A check is placed when retrieving search results for the feed value and The Feed recycler Data is appropriately handled", "committedDate": "2020-10-06T20:32:20Z", "type": "commit"}, {"oid": "bc57bf9be2e64b38186994a278248ac635c5636b", "url": "https://github.com/AntennaPod/AntennaPod/commit/bc57bf9be2e64b38186994a278248ac635c5636b", "message": "Fixed \"Searching within single podcast shows other podcasts #4488\"\n\nSince the single SearchFragment is used for searching items at both within a podcast fragment and at Episode Fragment, only difference arises is the passage of feed, episode page pushes 0 and the podcast page pushes the particular value)\n\nHence, A check is placed when retrieving search results for the feed value and The Feed recycler Data is appropriately handled", "committedDate": "2020-10-06T20:50:33Z", "type": "commit"}, {"oid": "fb0ae2ee9e36cf504d72e77f53d5854c392aa138", "url": "https://github.com/AntennaPod/AntennaPod/commit/fb0ae2ee9e36cf504d72e77f53d5854c392aa138", "message": "Fixed \"Searching within single podcast shows other podcasts #4488\"\n\nSince the single SearchFragment is used for searching items at both within a podcast fragment and at Episode Fragment, only difference arises is the passage of feed, episode page pushes 0 and the podcast page pushes the particular value)\n\nHence, A check is placed when retrieving search results for the feed value and The Feed recycler Data is appropriately handled", "committedDate": "2020-10-06T21:06:08Z", "type": "commit"}]}