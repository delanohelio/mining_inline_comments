{"pr_number": 4746, "pr_title": "add rewind, ff, skip button and layout for extra info in Widget", "pr_createdAt": "2020-12-09T06:12:36Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4746", "timeline": [{"oid": "9023b1d882b6d3ac76c6ddfb5e8da28c7fdea2d7", "url": "https://github.com/AntennaPod/AntennaPod/commit/9023b1d882b6d3ac76c6ddfb5e8da28c7fdea2d7", "message": "add rewind, ff, skip button and layout for extra info", "committedDate": "2020-12-09T06:08:37Z", "type": "commit"}, {"oid": "8065e9ec8985cdcb3757c5c8dba1a4b7dc13c224", "url": "https://github.com/AntennaPod/AntennaPod/commit/8065e9ec8985cdcb3757c5c8dba1a4b7dc13c224", "message": "make clicking on title open the app", "committedDate": "2020-12-09T06:15:36Z", "type": "commit"}, {"oid": "8ac854f03fbffb6df23c3dbb535a5d26f66ae928", "url": "https://github.com/AntennaPod/AntennaPod/commit/8ac854f03fbffb6df23c3dbb535a5d26f66ae928", "message": "cleanup", "committedDate": "2020-12-09T06:35:38Z", "type": "commit"}, {"oid": "2a006418b3bbac11c9c02c6529a70ae507b903e9", "url": "https://github.com/AntennaPod/AntennaPod/commit/2a006418b3bbac11c9c02c6529a70ae507b903e9", "message": "checkstyle", "committedDate": "2020-12-09T06:47:52Z", "type": "commit"}, {"oid": "67928fd1c7ee6736c66db871b4cfd0d242955eb0", "url": "https://github.com/AntennaPod/AntennaPod/commit/67928fd1c7ee6736c66db871b4cfd0d242955eb0", "message": "checkpoint - buttons work", "committedDate": "2020-12-30T19:15:53Z", "type": "commit"}, {"oid": "4e1884f20c4da214ca644a7328e368b2587c37b4", "url": "https://github.com/AntennaPod/AntennaPod/commit/4e1884f20c4da214ca644a7328e368b2587c37b4", "message": "2 seprate layouts", "committedDate": "2020-12-30T20:18:15Z", "type": "commit"}, {"oid": "2d075611ef720f0a994dd7de912f60e626c0c341", "url": "https://github.com/AntennaPod/AntennaPod/commit/2d075611ef720f0a994dd7de912f60e626c0c341", "message": "Layout for more than just a play button", "committedDate": "2020-12-30T20:24:21Z", "type": "commit"}, {"oid": "76e9859f9e5fe6bf8f1503d0111c2431f71923fc", "url": "https://github.com/AntennaPod/AntennaPod/commit/76e9859f9e5fe6bf8f1503d0111c2431f71923fc", "message": "layout", "committedDate": "2020-12-30T20:38:42Z", "type": "commit"}, {"oid": "deb2f0c4051f6c858eba8c6e369a660d59b1e663", "url": "https://github.com/AntennaPod/AntennaPod/commit/deb2f0c4051f6c858eba8c6e369a660d59b1e663", "message": "no need for extra layout", "committedDate": "2020-12-30T20:44:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDMyMzU1OA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4746#discussion_r550323558", "bodyText": "There isn't a lot of changes to the code, just wrapping it into a for loop", "author": "tonytamsf", "createdAt": "2020-12-30T20:50:57Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/PlayerWidgetJobService.java", "diffHunk": "@@ -102,111 +102,131 @@ private void updateViews() {\n         ComponentName playerWidget = new ComponentName(this, PlayerWidget.class);\n         AppWidgetManager manager = AppWidgetManager.getInstance(this);\n         int[] widgetIds = manager.getAppWidgetIds(playerWidget);\n-        RemoteViews views = new RemoteViews(getPackageName(), R.layout.player_widget);\n-        final PendingIntent startMediaPlayer = PendingIntent.getActivity(this, R.id.pending_intent_player_activity,\n-                PlaybackService.getPlayerActivityIntent(this), PendingIntent.FLAG_UPDATE_CURRENT);\n \n-        boolean nothingPlaying = false;\n-        Playable media;\n-        PlayerStatus status;\n-        if (playbackService != null) {\n-            media = playbackService.getPlayable();\n-            status = playbackService.getStatus();\n-        } else {\n-            media = Playable.PlayableUtils.createInstanceFromPreferences(getApplicationContext());\n-            status = PlayerStatus.STOPPED;\n-        }\n-\n-        if (media != null) {\n-            views.setOnClickPendingIntent(R.id.layout_left, startMediaPlayer);\n-\n-            try {\n-                Bitmap icon;\n-                int iconSize = getResources().getDimensionPixelSize(android.R.dimen.app_icon_size);\n-                icon = Glide.with(PlayerWidgetJobService.this)\n-                        .asBitmap()\n-                        .load(ImageResourceUtils.getImageLocation(media))\n-                        .apply(RequestOptions.diskCacheStrategyOf(ApGlideSettings.AP_DISK_CACHE_STRATEGY))\n-                        .submit(iconSize, iconSize)\n-                        .get(500, TimeUnit.MILLISECONDS);\n-                views.setImageViewBitmap(R.id.imgvCover, icon);\n-            } catch (Throwable tr) {\n-                Log.e(TAG, \"Error loading the media icon for the widget\", tr);\n-                views.setImageViewResource(R.id.imgvCover, R.mipmap.ic_launcher_round);\n+        for (int id : widgetIds) {", "originalCommit": "deb2f0c4051f6c858eba8c6e369a660d59b1e663", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1a2b6c619e6cd9a8c87ea46152cb1ba1d1379da3", "chunk": "diff --git a/core/src/main/java/de/danoeh/antennapod/core/service/PlayerWidgetJobService.java b/core/src/main/java/de/danoeh/antennapod/core/service/PlayerWidgetJobService.java\nindex 0181c2c23..11872637c 100644\n--- a/core/src/main/java/de/danoeh/antennapod/core/service/PlayerWidgetJobService.java\n+++ b/core/src/main/java/de/danoeh/antennapod/core/service/PlayerWidgetJobService.java\n\n@@ -106,10 +106,10 @@ public class PlayerWidgetJobService extends SafeJobIntentService {\n         for (int id : widgetIds) {\n             RemoteViews views;\n             SharedPreferences prefs = getSharedPreferences(PlayerWidget.PREFS_NAME, Context.MODE_PRIVATE);\n-            boolean bRewind = prefs.getBoolean(PlayerWidget.KEY_WIDGET_REWIND + id, false);\n-            boolean bFastForward = prefs.getBoolean(PlayerWidget.KEY_WIDGET_FAST_FORWARD + id, false);\n-            boolean bSkip = prefs.getBoolean(PlayerWidget.KEY_WIDGET_SKIP + id, false);\n-            if (!bRewind && !bFastForward && !bSkip) {\n+            boolean showRewind= prefs.getBoolean(PlayerWidget.KEY_WIDGET_REWIND + id, false);\n+            boolean showFastForward = prefs.getBoolean(PlayerWidget.KEY_WIDGET_FAST_FORWARD + id, false);\n+            boolean showSkip = prefs.getBoolean(PlayerWidget.KEY_WIDGET_SKIP + id, false);\n+            if (!showRewind && !showFastForward && !showSkip) {\n                 views = new RemoteViews(getPackageName(), R.layout.player_widget);\n             } else {\n                 views = new RemoteViews(getPackageName(), R.layout.player_widget_more);\n"}}, {"oid": "1a2b6c619e6cd9a8c87ea46152cb1ba1d1379da3", "url": "https://github.com/AntennaPod/AntennaPod/commit/1a2b6c619e6cd9a8c87ea46152cb1ba1d1379da3", "message": "checkstyle", "committedDate": "2020-12-30T20:55:47Z", "type": "commit"}, {"oid": "e7031114f00ac404cc49dc14f239f5b2d95189f9", "url": "https://github.com/AntennaPod/AntennaPod/commit/e7031114f00ac404cc49dc14f239f5b2d95189f9", "message": "whitespace", "committedDate": "2020-12-30T20:59:32Z", "type": "commit"}, {"oid": "816fe1b8b0014808dca6cfef81fabed466315c6b", "url": "https://github.com/AntennaPod/AntennaPod/commit/816fe1b8b0014808dca6cfef81fabed466315c6b", "message": "preview of the configuration show buttons", "committedDate": "2021-01-03T01:57:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE2MzUwNQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4746#discussion_r555163505", "bodyText": "Is there a case where it actually is null?", "author": "ByteHamster", "createdAt": "2021-01-11T16:10:30Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java", "diffHunk": "@@ -63,6 +76,9 @@ public void onProgressChanged(SeekBar seekBar, int i, boolean b) {\n                 opacityTextView.setText(seekBar.getProgress() + \"%\");\n                 int color = getColorWithAlpha(PlayerWidget.DEFAULT_COLOR, opacitySeekBar.getProgress());\n                 widgetPreview.setBackgroundColor(color);\n+                if (widgetMorePreview != null) {", "originalCommit": "816fe1b8b0014808dca6cfef81fabed466315c6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTUzMzI5Mg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4746#discussion_r555533292", "bodyText": "nope, removed", "author": "tonytamsf", "createdAt": "2021-01-12T06:06:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE2MzUwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "eed0db3cc674276e19f589499f2058cb6e3d2843", "chunk": "diff --git a/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java b/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java\nindex e0953f4bd..275d7d831 100644\n--- a/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java\n+++ b/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java\n\n@@ -76,9 +76,7 @@ public class WidgetConfigActivity extends AppCompatActivity {\n                 opacityTextView.setText(seekBar.getProgress() + \"%\");\n                 int color = getColorWithAlpha(PlayerWidget.DEFAULT_COLOR, opacitySeekBar.getProgress());\n                 widgetPreview.setBackgroundColor(color);\n-                if (widgetMorePreview != null) {\n-                    widgetMorePreview.setBackgroundColor(color);\n-                }\n+                widgetExtendedPreview.setBackgroundColor(color);\n             }\n \n             @Override\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE2OTc5NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4746#discussion_r555169795", "bodyText": "I'm not completely happy about the name More, to be honest. How about Extended?", "author": "ByteHamster", "createdAt": "2021-01-11T16:19:17Z", "path": "app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java", "diffHunk": "@@ -54,7 +64,10 @@ protected void onCreate(Bundle savedInstanceState) {\n         displayDeviceBackground();\n         opacityTextView = findViewById(R.id.widget_opacity_textView);\n         opacitySeekBar = findViewById(R.id.widget_opacity_seekBar);\n-        widgetPreview = findViewById(R.id.widgetLayout);\n+        previewLayout = findViewById(R.id.widget_config_preview);\n+        widgetPreview = previewLayout.findViewById(R.id.widgetLayout);\n+        widgetMorePreview = findViewById(R.id.widgetMoreLayout);\n+        previewMoreLayout = findViewById(R.id.widget_config_more_preview);", "originalCommit": "816fe1b8b0014808dca6cfef81fabed466315c6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTUzMTgxOQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4746#discussion_r555531819", "bodyText": "done", "author": "tonytamsf", "createdAt": "2021-01-12T06:01:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE2OTc5NQ=="}], "type": "inlineReview", "revised_code": {"commit": "eed0db3cc674276e19f589499f2058cb6e3d2843", "chunk": "diff --git a/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java b/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java\nindex e0953f4bd..275d7d831 100644\n--- a/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java\n+++ b/app/src/main/java/de/danoeh/antennapod/activity/WidgetConfigActivity.java\n\n@@ -66,8 +66,8 @@ public class WidgetConfigActivity extends AppCompatActivity {\n         opacitySeekBar = findViewById(R.id.widget_opacity_seekBar);\n         previewLayout = findViewById(R.id.widget_config_preview);\n         widgetPreview = previewLayout.findViewById(R.id.widgetLayout);\n-        widgetMorePreview = findViewById(R.id.widgetMoreLayout);\n-        previewMoreLayout = findViewById(R.id.widget_config_more_preview);\n+        widgetExtendedPreview = findViewById(R.id.widgetExtendedLayout);\n+        previewExtendedLayout = findViewById(R.id.widget_config_extended_preview);\n         findViewById(R.id.butConfirm).setOnClickListener(this::confirmCreateWidget);\n         opacitySeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n \n"}}, {"oid": "eed0db3cc674276e19f589499f2058cb6e3d2843", "url": "https://github.com/AntennaPod/AntennaPod/commit/eed0db3cc674276e19f589499f2058cb6e3d2843", "message": "fix layout", "committedDate": "2021-01-12T06:39:27Z", "type": "commit"}, {"oid": "da2da916d77e0cb7d36c740688b3cc7d57eec7b2", "url": "https://github.com/AntennaPod/AntennaPod/commit/da2da916d77e0cb7d36c740688b3cc7d57eec7b2", "message": "newline", "committedDate": "2021-01-12T06:40:33Z", "type": "commit"}, {"oid": "48c6b2ac0d1c4e8a09d6dc444979b40190b2d9aa", "url": "https://github.com/AntennaPod/AntennaPod/commit/48c6b2ac0d1c4e8a09d6dc444979b40190b2d9aa", "message": "Simplified widget layout files", "committedDate": "2021-01-12T12:04:30Z", "type": "commit"}, {"oid": "ffd78efae621f879666e8362ce87ce09850a2ff0", "url": "https://github.com/AntennaPod/AntennaPod/commit/ffd78efae621f879666e8362ce87ce09850a2ff0", "message": "Trigger Build", "committedDate": "2021-01-13T07:26:11Z", "type": "commit"}, {"oid": "dc58152ec98b42f68eaa2552d4dce6cb455d9174", "url": "https://github.com/AntennaPod/AntennaPod/commit/dc58152ec98b42f68eaa2552d4dce6cb455d9174", "message": "resync", "committedDate": "2021-01-13T08:14:58Z", "type": "commit"}, {"oid": "d794aa38b9202e29a43a44ce445b819168c0f5a6", "url": "https://github.com/AntennaPod/AntennaPod/commit/d794aa38b9202e29a43a44ce445b819168c0f5a6", "message": "Merge branch 'develop' into widget3", "committedDate": "2021-01-13T10:02:34Z", "type": "commit"}]}