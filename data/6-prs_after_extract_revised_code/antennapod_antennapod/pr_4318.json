{"pr_number": 4318, "pr_title": "Replace deprecated Html#fromHtml with HtmlCompat#fromHtml.", "pr_createdAt": "2020-07-25T11:47:39Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4318", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ4ODU2Mg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4318#discussion_r460488562", "bodyText": "This line is too long, now. That's why CircleCI complains :)", "author": "ByteHamster", "createdAt": "2020-07-26T06:56:57Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/preferences/GpodderPreferencesFragment.java", "diffHunk": "@@ -115,7 +115,7 @@ private void updateGpodnetPreferenceScreen() {\n             String format = getActivity().getString(R.string.pref_gpodnet_login_status);\n             String summary = String.format(format, GpodnetPreferences.getUsername(),\n                     GpodnetPreferences.getDeviceID());\n-            findPreference(PREF_GPODNET_LOGOUT).setSummary(Html.fromHtml(summary));\n+            findPreference(PREF_GPODNET_LOGOUT).setSummary(HtmlCompat.fromHtml(summary, HtmlCompat.FROM_HTML_MODE_LEGACY));", "originalCommit": "1d3ff7e4794bb5a39377d3f608e03abaa88233f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUzNzEwNg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4318#discussion_r460537106", "bodyText": "Ups. Let's see if this is short enough. (I could not reproduce the error by running the checkstyle task locally, though.)", "author": "johnjohndoe", "createdAt": "2020-07-26T14:53:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ4ODU2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU0MDc3MQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4318#discussion_r460540771", "bodyText": "Yeah, the checkstyle gradle task only checks the things that AntennaPod already fulfills. We use diff-checkstyle on CI to gradually enforce more rules while still not doing a huge \"reformatted everything\" PR that messes up merges and git history. Diff-checkstyle uses the checkstyle-new-code.xml config file that can be imported in Android Studio.", "author": "ByteHamster", "createdAt": "2020-07-26T15:29:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ4ODU2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU0OTI3Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4318#discussion_r460549277", "bodyText": "Thanks for the explanation. I wasn't aware of diff-checkstyle.", "author": "johnjohndoe", "createdAt": "2020-07-26T16:52:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ4ODU2Mg=="}], "type": "inlineReview", "revised_code": {"commit": "10db0f3d11e46f60e66748e3a1b1a27bbdbbf828", "chunk": "diff --git a/app/src/main/java/de/danoeh/antennapod/fragment/preferences/GpodderPreferencesFragment.java b/app/src/main/java/de/danoeh/antennapod/fragment/preferences/GpodderPreferencesFragment.java\nindex 33f66c44a..546e12e65 100644\n--- a/app/src/main/java/de/danoeh/antennapod/fragment/preferences/GpodderPreferencesFragment.java\n+++ b/app/src/main/java/de/danoeh/antennapod/fragment/preferences/GpodderPreferencesFragment.java\n\n@@ -115,7 +117,8 @@ public class GpodderPreferencesFragment extends PreferenceFragmentCompat {\n             String format = getActivity().getString(R.string.pref_gpodnet_login_status);\n             String summary = String.format(format, GpodnetPreferences.getUsername(),\n                     GpodnetPreferences.getDeviceID());\n-            findPreference(PREF_GPODNET_LOGOUT).setSummary(HtmlCompat.fromHtml(summary, HtmlCompat.FROM_HTML_MODE_LEGACY));\n+            Spanned formattedSummary = HtmlCompat.fromHtml(summary, HtmlCompat.FROM_HTML_MODE_LEGACY);\n+            findPreference(PREF_GPODNET_LOGOUT).setSummary(formattedSummary);\n             updateLastGpodnetSyncReport(SyncService.isLastSyncSuccessful(getContext()),\n                     SyncService.getLastSyncAttempt(getContext()));\n         } else {\n"}}, {"oid": "10db0f3d11e46f60e66748e3a1b1a27bbdbbf828", "url": "https://github.com/AntennaPod/AntennaPod/commit/10db0f3d11e46f60e66748e3a1b1a27bbdbbf828", "message": "Replace deprecated \"Html#fromHtml\" with \"HtmlCompat#fromHtml\".", "committedDate": "2020-07-26T14:52:32Z", "type": "commit"}, {"oid": "10db0f3d11e46f60e66748e3a1b1a27bbdbbf828", "url": "https://github.com/AntennaPod/AntennaPod/commit/10db0f3d11e46f60e66748e3a1b1a27bbdbbf828", "message": "Replace deprecated \"Html#fromHtml\" with \"HtmlCompat#fromHtml\".", "committedDate": "2020-07-26T14:52:32Z", "type": "forcePushed"}]}