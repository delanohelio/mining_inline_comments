{"pr_number": 4621, "pr_title": "Remove enable autodownload from local feed", "pr_createdAt": "2020-10-30T11:19:17Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4621", "timeline": [{"oid": "fbb52f3af6c7555b0e7801dc87f795cc376feb87", "url": "https://github.com/AntennaPod/AntennaPod/commit/fbb52f3af6c7555b0e7801dc87f795cc376feb87", "message": "Remove enable autodownload from local feed", "committedDate": "2020-10-30T11:16:19Z", "type": "commit"}, {"oid": "7cf6ebbf41d190ccf6af4a8e8022631b6e2fe25e", "url": "https://github.com/AntennaPod/AntennaPod/commit/7cf6ebbf41d190ccf6af4a8e8022631b6e2fe25e", "message": "Remove enable autodownload from local feeds", "committedDate": "2020-10-30T11:23:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMzNTU1Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4621#discussion_r515335557", "bodyText": "How about making one single condition out of these two? Then it needs less code duplication. The inner if already hides both items, so you just need to add the !selectedItem.getFeed().isLocalFeed() part using ||", "author": "ByteHamster", "createdAt": "2020-10-30T19:40:42Z", "path": "app/src/main/java/de/danoeh/antennapod/menuhandler/FeedItemMenuHandler.java", "diffHunk": "@@ -78,12 +78,17 @@ public static boolean onPrepareMenu(Menu menu, FeedItem selectedItem) {\n             setItemVisibility(menu, R.id.reset_position, false);\n         }\n \n-        if(!UserPreferences.isEnableAutodownload() || fileDownloaded) {\n-            setItemVisibility(menu, R.id.activate_auto_download, false);\n-            setItemVisibility(menu, R.id.deactivate_auto_download, false);\n-        } else if (selectedItem.getAutoDownload()) {\n-            setItemVisibility(menu, R.id.activate_auto_download, false);\n+        if (!selectedItem.getFeed().isLocalFeed()) {\n+            if (!UserPreferences.isEnableAutodownload() || fileDownloaded) {", "originalCommit": "7cf6ebbf41d190ccf6af4a8e8022631b6e2fe25e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ce89f73baac595e4f00367b35ff1b52f1f0ea3e2", "chunk": "diff --git a/app/src/main/java/de/danoeh/antennapod/menuhandler/FeedItemMenuHandler.java b/app/src/main/java/de/danoeh/antennapod/menuhandler/FeedItemMenuHandler.java\nindex d1970752d..3d8f3fe09 100644\n--- a/app/src/main/java/de/danoeh/antennapod/menuhandler/FeedItemMenuHandler.java\n+++ b/app/src/main/java/de/danoeh/antennapod/menuhandler/FeedItemMenuHandler.java\n\n@@ -78,18 +78,13 @@ public class FeedItemMenuHandler {\n             setItemVisibility(menu, R.id.reset_position, false);\n         }\n \n-        if (!selectedItem.getFeed().isLocalFeed()) {\n-            if (!UserPreferences.isEnableAutodownload() || fileDownloaded) {\n-                setItemVisibility(menu, R.id.activate_auto_download, false);\n-                setItemVisibility(menu, R.id.deactivate_auto_download, false);\n-            } else if (selectedItem.getAutoDownload()) {\n-                setItemVisibility(menu, R.id.activate_auto_download, false);\n-            } else {\n-                setItemVisibility(menu, R.id.deactivate_auto_download, false);\n-            }\n-        } else {\n+        if (!UserPreferences.isEnableAutodownload() || fileDownloaded || selectedItem.getFeed().isLocalFeed()) {\n             setItemVisibility(menu, R.id.activate_auto_download, false);\n             setItemVisibility(menu, R.id.deactivate_auto_download, false);\n+        } else if (selectedItem.getAutoDownload()) {\n+            setItemVisibility(menu, R.id.activate_auto_download, false);\n+        } else {\n+            setItemVisibility(menu, R.id.deactivate_auto_download, false);\n         }\n \n         // Display proper strings when item has no media\n"}}, {"oid": "ce89f73baac595e4f00367b35ff1b52f1f0ea3e2", "url": "https://github.com/AntennaPod/AntennaPod/commit/ce89f73baac595e4f00367b35ff1b52f1f0ea3e2", "message": "Remove enable download from local feed", "committedDate": "2020-10-30T21:37:39Z", "type": "commit"}]}