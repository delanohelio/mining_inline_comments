{"pr_number": 1151, "pr_title": "Fix azure and azure-samples test for cosmos, aks, sql", "pr_createdAt": "2020-03-26T09:41:12Z", "pr_url": "https://github.com/Azure/azure-libraries-for-java/pull/1151", "timeline": [{"oid": "1ce452dd95411ccb15f20034bbb55e70f85521fc", "url": "https://github.com/Azure/azure-libraries-for-java/commit/1ce452dd95411ccb15f20034bbb55e70f85521fc", "message": "feat: regenerate sql", "committedDate": "2020-03-23T03:08:30Z", "type": "commit"}, {"oid": "29e609574e2d51239c45fe0cfa35d413c7170be0", "url": "https://github.com/Azure/azure-libraries-for-java/commit/29e609574e2d51239c45fe0cfa35d413c7170be0", "message": "fix: cosmos, aks, sql in azure and azure-sample", "committedDate": "2020-03-26T08:02:26Z", "type": "commit"}, {"oid": "4e9dbfa4687b8f6ff816fdc75e79a12a270fa1da", "url": "https://github.com/Azure/azure-libraries-for-java/commit/4e9dbfa4687b8f6ff816fdc75e79a12a270fa1da", "message": "feat: update session record", "committedDate": "2020-03-26T09:27:39Z", "type": "commit"}, {"oid": "e5b8bd751fed2c7f4a8a809172c3dce5b839d0c6", "url": "https://github.com/Azure/azure-libraries-for-java/commit/e5b8bd751fed2c7f4a8a809172c3dce5b839d0c6", "message": "feat: ignore acs error as it will be deprecated", "committedDate": "2020-03-26T09:36:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQzODYzMQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1151#discussion_r398438631", "bodyText": "Please double check the recorded json for id and secret.", "author": "weidongxu-microsoft", "createdAt": "2020-03-26T09:46:27Z", "path": "azure/src/test/java/com/azure/management/TestKubernetesCluster.java", "diffHunk": "@@ -27,8 +35,21 @@ public KubernetesCluster createResource(KubernetesClusters kubernetesClusters) t\n         final String newName = \"aks\" + kubernetesClusters.manager().getSdkContext().randomResourceName(\"\", 8);\n         final String dnsPrefix = \"dns\" + newName;\n         final String agentPoolName = \"ap\" + newName;\n-        final String clientId = \"clientId\";\n-        final String secret = \"secret\";\n+        String clientId = \"clientId\";\n+        String secret = \"secret\";\n+\n+        // aks can use another azure auth rather than original client auth to access azure service.\n+        // Thus, set it to AZURE_AUTH_LOCATION_2 when you want.\n+        String envSecondaryServicePrincipal = System.getenv(\"AZURE_AUTH_LOCATION_2\");\n+        if (envSecondaryServicePrincipal == null || envSecondaryServicePrincipal.isEmpty() || !(new File(envSecondaryServicePrincipal).exists())) {\n+            envSecondaryServicePrincipal = System.getenv(\"AZURE_AUTH_LOCATION\");\n+        }\n+\n+        try {\n+            HashMap<String, String> credentialsMap = ParseAuthFile(envSecondaryServicePrincipal);\n+            clientId = credentialsMap.get(\"clientId\");\n+            secret = credentialsMap.get(\"clientSecret\");", "originalCommit": "29e609574e2d51239c45fe0cfa35d413c7170be0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ0MDIzOA==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1151#discussion_r398440238", "bodyText": "Yes, I've check for it. The clientId will be contained in record, and the secret will not. Secret is in the PUT body, and the record didn't record the request body.", "author": "ChenTanyi", "createdAt": "2020-03-26T09:48:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQzODYzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ0MDQ3Ng==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1151#discussion_r398440476", "bodyText": "Like previous in the AKS test.", "author": "ChenTanyi", "createdAt": "2020-03-26T09:49:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQzODYzMQ=="}], "type": "inlineReview", "revised_code": null}]}