{"pr_number": 6619, "pr_title": "Adding a note as to how to filter on MappingQuality in DepthOfCoverage", "pr_createdAt": "2020-05-27T15:52:03Z", "pr_url": "https://github.com/broadinstitute/gatk/pull/6619", "timeline": [{"oid": "b759bc92b8104a2f582d61f344ccca6f5475dc96", "url": "https://github.com/broadinstitute/gatk/commit/b759bc92b8104a2f582d61f344ccca6f5475dc96", "message": "adding a note for users looking to filter on mapping qualitey", "committedDate": "2020-05-27T15:50:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI2NDE5MQ==", "url": "https://github.com/broadinstitute/gatk/pull/6619#discussion_r431264191", "bodyText": "We might want to suggest using the MappingQualityAvailableReadFilter in this case as well, since mapping quality 255 (mapping quality unavailable) always satisfies the minimum mapping quality threshold.", "author": "cmnbroad", "createdAt": "2020-05-27T16:07:44Z", "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/coverage/DepthOfCoverage.java", "diffHunk": "@@ -62,6 +62,7 @@\n  * <ul>\n  *     <li>DepthOfCoverage currently only supports typical nucleotide (and N) bases, IUPAC ambiguity codes or other non-ATCGN bases will cause exceptions</li>\n  *     <li>Read filters are applied to the reads before being counted in coverage information. By default Duplicate Marked and non-primary alignments are not counted. This can be disabled with --disable-tool-default-read-filters.</li>\n+ *     <li>In order to filter reads out by their mapping qualities, the recommended approach is to use the MappingQualityReadFilter with the --minimum-mapping-quality argument specified</li>", "originalCommit": "b759bc92b8104a2f582d61f344ccca6f5475dc96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI3NDc3NA==", "url": "https://github.com/broadinstitute/gatk/pull/6619#discussion_r431274774", "bodyText": "hmm... interesting, it seems that mapping-quality unavailable was not being handled at all before (I would have expected it to be part of is mapped or WellFormedReadFilter). I'm hesitant to add too much to this comment, I included this here because there was a commonly used \"-mmq\" argument in GATK3 that wasn't ported. I will add a note that max-mapping-quality exists as well, GATK3 defaulted to MAXINT as its maximum so it wasn't handled by default.", "author": "jamesemery", "createdAt": "2020-05-27T16:23:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI2NDE5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "23de0c5514af4f6781c0ebd41fc43270397fad9a", "chunk": "diff --git a/src/main/java/org/broadinstitute/hellbender/tools/walkers/coverage/DepthOfCoverage.java b/src/main/java/org/broadinstitute/hellbender/tools/walkers/coverage/DepthOfCoverage.java\nindex 7b1fa5761..a75787d7a 100644\n--- a/src/main/java/org/broadinstitute/hellbender/tools/walkers/coverage/DepthOfCoverage.java\n+++ b/src/main/java/org/broadinstitute/hellbender/tools/walkers/coverage/DepthOfCoverage.java\n\n@@ -62,7 +62,7 @@ import java.util.*;\n  * <ul>\n  *     <li>DepthOfCoverage currently only supports typical nucleotide (and N) bases, IUPAC ambiguity codes or other non-ATCGN bases will cause exceptions</li>\n  *     <li>Read filters are applied to the reads before being counted in coverage information. By default Duplicate Marked and non-primary alignments are not counted. This can be disabled with --disable-tool-default-read-filters.</li>\n- *     <li>In order to filter reads out by their mapping qualities, the recommended approach is to use the MappingQualityReadFilter with the --minimum-mapping-quality argument specified</li>\n+ *     <li>In order to filter reads out by their mapping qualities, the recommended approach is to use the MappingQualityReadFilter with the --minimum-mapping-quality or --maximum-mapping-quality arguments specified</li>\n  * </ul>\n  *\n  * <h3>Usage example</h3>\n"}}, {"oid": "23de0c5514af4f6781c0ebd41fc43270397fad9a", "url": "https://github.com/broadinstitute/gatk/commit/23de0c5514af4f6781c0ebd41fc43270397fad9a", "message": "added a note about maxMappingQuality", "committedDate": "2020-05-27T16:24:45Z", "type": "commit"}]}