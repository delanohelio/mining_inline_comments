{"pr_number": 6474, "pr_title": "Refactored and enhanced ArgumentsBuilder", "pr_createdAt": "2020-03-01T03:48:49Z", "pr_url": "https://github.com/broadinstitute/gatk/pull/6474", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3MTAyOQ==", "url": "https://github.com/broadinstitute/gatk/pull/6474#discussion_r386671029", "bodyText": "Could you update the class comment while you're here?", "author": "lbergelson", "createdAt": "2020-03-02T21:48:43Z", "path": "src/testUtils/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilder.java", "diffHunk": "@@ -26,200 +26,169 @@ public ArgumentsBuilder(){}\n     public ArgumentsBuilder(Object[] args){", "originalCommit": "0502eaa53895bf806475488351055e2871c2ae91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgwMzY0Mw==", "url": "https://github.com/broadinstitute/gatk/pull/6474#discussion_r386803643", "bodyText": "done", "author": "davidbenjamin", "createdAt": "2020-03-03T05:17:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3MTAyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "b46901129ce7fb955d6172c687a7d1993aaeb117", "chunk": "diff --git a/src/testUtils/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilder.java b/src/testUtils/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilder.java\nindex 94d7bb982..9198d3f57 100644\n--- a/src/testUtils/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilder.java\n+++ b/src/testUtils/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilder.java\n\n@@ -26,9 +26,9 @@ public final class ArgumentsBuilder {\n     public ArgumentsBuilder(Object[] args){\n         for (Object arg: args){\n             if (arg instanceof String){\n-                addRaw((String) arg);\n+                this.add((String) arg);\n             } else {\n-                addRaw(arg);\n+                this.add(arg);\n             }\n         }\n     }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NDkzMg==", "url": "https://github.com/broadinstitute/gatk/pull/6474#discussion_r386674932", "bodyText": "No love for positional arguments?  There might be 1 tool that uses those somewhere....", "author": "lbergelson", "createdAt": "2020-03-02T21:56:34Z", "path": "src/test/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilderTest.java", "diffHunk": "@@ -11,60 +10,52 @@\n     @Test\n     public void testArgumentsBuilder() {\n         ArgumentsBuilder args = new ArgumentsBuilder();\n-        args.add(\"--value1\");\n-        args.add(1);\n-        args.add(\"Input=\")\n-            .add(new File(\"path/to/somewhere\"))\n-            .add(\"Value2=2\")\n-            .add(\" Value3= 3 Value4=4\");\n+        args.addRaw(\"--value1\");\n+        args.addRaw(1);\n+        args.addRaw(\"--Input\")\n+            .addRaw(new File(\"path/to/somewhere\"))\n+            .addRaw(\"--Value2 2\")\n+            .addRaw(\" --Value3 3 --Value4 4\");\n \n         Assert.assertEquals(args.getArgsArray(), new String[]{\"--value1\", \"1\",\n                 \"--Input\", \"path/to/somewhere\",\"--Value2\",\"2\",\"--Value3\",\"3\",\"--Value4\",\"4\"});\n     }\n     @Test\n     public void testOneBigString(){\n         ArgumentsBuilder args = new ArgumentsBuilder();\n-        args.add(\" Value=1 Value=2 Value=3 Value= 4 \");\n+        args.addRaw(\" --Value 1 --Value 2 --Value 3 --Value 4 \");\n         Assert.assertEquals(args.getArgsList().toArray(), new String[]{\"--Value\", \"1\", \"--Value\", \"2\",\n                 \"--Value\", \"3\",\"--Value\", \"4\"});\n \n     }\n \n     @Test\n     public void testFromArray(){\n-        ArgumentsBuilder args = new ArgumentsBuilder(new Object[]{\"Option=\" + new File(\"path/to\"), \"OtherOption=\" + -1, new File(\"somewhere\")});\n+        ArgumentsBuilder args = new ArgumentsBuilder(new Object[]{\"--Option \" + new File(\"path/to\"), \"--OtherOption \" + -1, new File(\"somewhere\")});\n         Assert.assertEquals(args.getArgsArray(), new String[]{\"--Option\",\"path/to\", \"--OtherOption\", \"-1\", \"somewhere\"});\n     }\n \n     @Test\n     public void testAddArgument() throws Exception {\n         ArgumentsBuilder args = new ArgumentsBuilder();\n-        args.addArgument(\"foo\", \"bar\");\n+        args.add(\"foo\", \"bar\");\n         Assert.assertEquals(args.getArgsArray(), new String[]{\"--foo\",\"bar\"});\n         Assert.assertEquals(args.getString(), \"--foo bar\");\n     }\n \n-    @Test", "originalCommit": "0502eaa53895bf806475488351055e2871c2ae91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgwMzMxNQ==", "url": "https://github.com/broadinstitute/gatk/pull/6474#discussion_r386803315", "bodyText": "addPositional was just a wrapper for add, which struck me as confusing at best, misleading at worst.", "author": "davidbenjamin", "createdAt": "2020-03-03T05:15:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NDkzMg=="}], "type": "inlineReview", "revised_code": {"commit": "b46901129ce7fb955d6172c687a7d1993aaeb117", "chunk": "diff --git a/src/test/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilderTest.java b/src/test/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilderTest.java\nindex 14e247ff2..86ac2e6c0 100644\n--- a/src/test/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilderTest.java\n+++ b/src/test/java/org/broadinstitute/hellbender/testutils/ArgumentsBuilderTest.java\n\n@@ -10,12 +11,12 @@ public final class ArgumentsBuilderTest{\n     @Test\n     public void testArgumentsBuilder() {\n         ArgumentsBuilder args = new ArgumentsBuilder();\n-        args.addRaw(\"--value1\");\n-        args.addRaw(1);\n-        args.addRaw(\"--Input\")\n-            .addRaw(new File(\"path/to/somewhere\"))\n-            .addRaw(\"--Value2 2\")\n-            .addRaw(\" --Value3 3 --Value4 4\");\n+        args.add(\"--value1\");\n+        args.add(1);\n+        args.add(\"--Input\")\n+            .add(new File(\"path/to/somewhere\"))\n+            .add(\"--Value2 2\")\n+            .add(\" --Value3 3 --Value4 4\");\n \n         Assert.assertEquals(args.getArgsArray(), new String[]{\"--value1\", \"1\",\n                 \"--Input\", \"path/to/somewhere\",\"--Value2\",\"2\",\"--Value3\",\"3\",\"--Value4\",\"4\"});\n"}}, {"oid": "b46901129ce7fb955d6172c687a7d1993aaeb117", "url": "https://github.com/broadinstitute/gatk/commit/b46901129ce7fb955d6172c687a7d1993aaeb117", "message": "no more picard style arg=value", "committedDate": "2020-03-03T05:17:23Z", "type": "commit"}, {"oid": "7076be56d2cc8a26b1525c615f92074ee4cedcf6", "url": "https://github.com/broadinstitute/gatk/commit/7076be56d2cc8a26b1525c615f92074ee4cedcf6", "message": "Refactored and enhanced ArgumentsBuilder", "committedDate": "2020-03-03T05:21:31Z", "type": "commit"}, {"oid": "982a023041a5198599900688546953243c3460fe", "url": "https://github.com/broadinstitute/gatk/commit/982a023041a5198599900688546953243c3460fe", "message": "class doc", "committedDate": "2020-03-03T05:21:34Z", "type": "commit"}, {"oid": "982a023041a5198599900688546953243c3460fe", "url": "https://github.com/broadinstitute/gatk/commit/982a023041a5198599900688546953243c3460fe", "message": "class doc", "committedDate": "2020-03-03T05:21:34Z", "type": "forcePushed"}]}