{"pr_number": 1290, "pr_title": "Move variant handling out of SessionReportingCoordinator", "pr_createdAt": "2020-02-28T17:43:18Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1290", "timeline": [{"oid": "63cf0c1bd42c56d6038221fa742f5e4155a18783", "url": "https://github.com/firebase/firebase-android-sdk/commit/63cf0c1bd42c56d6038221fa742f5e4155a18783", "message": "Move variant handling out of SessionReportingCoordinator", "committedDate": "2020-02-28T17:40:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTgzNDk2MA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1290#discussion_r385834960", "bodyText": "Observation: This makes visible that the logic is determined by the variant passed into the interface. I think that it isn't necessary to make that visible because the SessionReportingCooridnator shouldn't be responsible for passing settings around.\nThere's an opportunity to hide that extra complexity. One way you could do it is by renaming this as SendStrategy, and make its interface not take any parameters. Then when constructing this, pass in the value. (If the settings were stateful and ever needed to be updated, you would pass in a new strategy alongside the settings.)", "author": "jakeouellette", "createdAt": "2020-02-28T17:48:53Z", "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/internal/common/SessionReportingCoordinator.java", "diffHunk": "@@ -36,19 +36,21 @@\n  */\n public class SessionReportingCoordinator implements CrashlyticsLifecycleEvents {\n \n+  public interface SendCheck {\n+    boolean shouldSendViaDataTransport(int variant);", "originalCommit": "63cf0c1bd42c56d6038221fa742f5e4155a18783", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg0OTU1OA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1290#discussion_r385849558", "bodyText": "Done.", "author": "mrwillis21", "createdAt": "2020-02-28T18:21:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTgzNDk2MA=="}], "type": "inlineReview", "revised_code": {"commit": "100f6417ccd7b3eec318ef18a4d4588f56892b97", "chunk": "diff --git a/firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/internal/common/SessionReportingCoordinator.java b/firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/internal/common/SessionReportingCoordinator.java\nindex 75f46658e..911aecc07 100644\n--- a/firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/internal/common/SessionReportingCoordinator.java\n+++ b/firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/internal/common/SessionReportingCoordinator.java\n\n@@ -36,8 +35,8 @@ import java.util.concurrent.Executor;\n  */\n public class SessionReportingCoordinator implements CrashlyticsLifecycleEvents {\n \n-  public interface SendCheck {\n-    boolean shouldSendViaDataTransport(int variant);\n+  public interface SendReportPredicate {\n+    boolean shouldSendViaDataTransport();\n   }\n \n   private static final String EVENT_TYPE_CRASH = \"crash\";\n"}}, {"oid": "100f6417ccd7b3eec318ef18a4d4588f56892b97", "url": "https://github.com/firebase/firebase-android-sdk/commit/100f6417ccd7b3eec318ef18a4d4588f56892b97", "message": "Feedback", "committedDate": "2020-02-28T18:21:08Z", "type": "commit"}]}