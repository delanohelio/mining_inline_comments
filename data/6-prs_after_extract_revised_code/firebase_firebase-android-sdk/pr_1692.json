{"pr_number": 1692, "pr_title": "re-generate rtdb's api.txt and fail build if an error occurs parsing the file", "pr_createdAt": "2020-06-19T19:40:52Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1692", "timeline": [{"oid": "c621f5b9a8bf842ca0ea77b4433e86f5c6c7f695", "url": "https://github.com/firebase/firebase-android-sdk/commit/c621f5b9a8bf842ca0ea77b4433e86f5c6c7f695", "message": "Unified emulator settings for Firestore", "committedDate": "2020-06-19T16:58:16Z", "type": "commit"}, {"oid": "07c065886c9fd68a226eb8a7d6efbecd3486f766", "url": "https://github.com/firebase/firebase-android-sdk/commit/07c065886c9fd68a226eb8a7d6efbecd3486f766", "message": "chore(firebase-database): re-generate api.txt", "committedDate": "2020-06-19T19:15:57Z", "type": "commit"}, {"oid": "430dd433b6670afd650b2239a7fa8079cda4f287", "url": "https://github.com/firebase/firebase-android-sdk/commit/430dd433b6670afd650b2239a7fa8079cda4f287", "message": "chore(buildSrc): fail build if the current api.txt cannot be parsed", "committedDate": "2020-06-19T19:17:18Z", "type": "commit"}, {"oid": "b307898d05e74248adb49c40ae4311d4890a2f3c", "url": "https://github.com/firebase/firebase-android-sdk/commit/b307898d05e74248adb49c40ae4311d4890a2f3c", "message": "Merge branch 'master' into ss-firestore-emulator-settings", "committedDate": "2020-06-19T19:41:13Z", "type": "commit"}, {"oid": "fe4d6704ca3a3a4803237cc02256f0589c7d0359", "url": "https://github.com/firebase/firebase-android-sdk/commit/fe4d6704ca3a3a4803237cc02256f0589c7d0359", "message": "Merge branch 'ss-firestore-emulator-settings' of https://github.com/firebase/firebase-android-sdk into rpf-fix-api-txt-file-validation", "committedDate": "2020-06-19T19:48:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxOTI5Ng==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1692#discussion_r443019296", "bodyText": "Uh oh, now all my code leaked in here :-/", "author": "samtstern", "createdAt": "2020-06-19T19:53:48Z", "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/FirebaseFirestore.java", "diffHunk": "@@ -215,6 +233,23 @@ private void ensureClientConfigured() {\n     }\n   }\n \n+  private FirebaseFirestoreSettings mergeEmulatorSettings(", "originalCommit": "fe4d6704ca3a3a4803237cc02256f0589c7d0359", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAyMDU4Mg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1692#discussion_r443020582", "bodyText": "Oops, will fix!", "author": "thatfiredev", "createdAt": "2020-06-19T19:57:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxOTI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAyMjI4NQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1692#discussion_r443022285", "bodyText": "@samtstern for some reason I can't revert that commit locally. I'll close this PR and open a clean one", "author": "thatfiredev", "createdAt": "2020-06-19T20:03:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxOTI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAyMzQ1Mg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1692#discussion_r443023452", "bodyText": "@rosariopfernandes you can also just force-push onto this same branch, GitHub will handle it.", "author": "samtstern", "createdAt": "2020-06-19T20:06:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxOTI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAyNTQwNw==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1692#discussion_r443025407", "bodyText": "@samtstern done! Thanks for the tip", "author": "thatfiredev", "createdAt": "2020-06-19T20:12:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxOTI5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "5584a65629b12ff742ebfa5fc486a3f0f3df571b", "chunk": "diff --git a/firebase-firestore/src/main/java/com/google/firebase/firestore/FirebaseFirestore.java b/firebase-firestore/src/main/java/com/google/firebase/firestore/FirebaseFirestore.java\nindex 41678762a..1a0c7b0a9 100644\n--- a/firebase-firestore/src/main/java/com/google/firebase/firestore/FirebaseFirestore.java\n+++ b/firebase-firestore/src/main/java/com/google/firebase/firestore/FirebaseFirestore.java\n\n@@ -233,23 +215,6 @@ public class FirebaseFirestore {\n     }\n   }\n \n-  private FirebaseFirestoreSettings mergeEmulatorSettings(\n-      @NonNull FirebaseFirestoreSettings settings,\n-      @NonNull EmulatedServiceSettings emulatorSettings) {\n-\n-    if (!FirebaseFirestoreSettings.DEFAULT_HOST.equals(settings.getHost())) {\n-      throw new IllegalStateException(\n-          \"Cannot change the Firestore host through FirebaseFirestoreSettings when \"\n-              + \"EmulatedServiceSettings are also in effect. \"\n-              + \"Make sure to only set the host in one location.\");\n-    }\n-\n-    return new FirebaseFirestoreSettings.Builder(settings)\n-        .setHost(emulatorSettings.getHost() + \":\" + emulatorSettings.getPort())\n-        .setSslEnabled(false)\n-        .build();\n-  }\n-\n   /** Returns the FirebaseApp instance to which this {@code FirebaseFirestore} belongs. */\n   @NonNull\n   public FirebaseApp getApp() {\n"}}, {"oid": "587dfc39ef41a39be5f1f454dd39bd0c0ecd2f36", "url": "https://github.com/firebase/firebase-android-sdk/commit/587dfc39ef41a39be5f1f454dd39bd0c0ecd2f36", "message": "hide the database emulator", "committedDate": "2020-06-19T19:54:13Z", "type": "commit"}, {"oid": "8917eef53999f2d2dac8baf30c0104a9574cffce", "url": "https://github.com/firebase/firebase-android-sdk/commit/8917eef53999f2d2dac8baf30c0104a9574cffce", "message": "chore(firebase-database): re-generate api.txt with hidden method", "committedDate": "2020-06-19T20:11:03Z", "type": "commit"}, {"oid": "5584a65629b12ff742ebfa5fc486a3f0f3df571b", "url": "https://github.com/firebase/firebase-android-sdk/commit/5584a65629b12ff742ebfa5fc486a3f0f3df571b", "message": "Revert \"Unified emulator settings for Firestore\"\n\nThis reverts commit c621f5b9", "committedDate": "2020-06-19T20:11:32Z", "type": "commit"}]}