{"pr_number": 1760, "pr_title": "Migrate firebase-crashlytics SDK to FIS", "pr_createdAt": "2020-07-06T18:33:53Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1760", "timeline": [{"oid": "52ae22448b9f89b190027df924346ff42090ae6a", "url": "https://github.com/firebase/firebase-android-sdk/commit/52ae22448b9f89b190027df924346ff42090ae6a", "message": "Migrate firebase-crashlytics SDK to FIS", "committedDate": "2020-07-06T18:31:13Z", "type": "commit"}, {"oid": "789fc87660ad089402c26d23d4f8e4ea2b15b8c4", "url": "https://github.com/firebase/firebase-android-sdk/commit/789fc87660ad089402c26d23d4f8e4ea2b15b8c4", "message": "use the existing identifier in exceptional cases", "committedDate": "2020-07-07T15:00:41Z", "type": "commit"}, {"oid": "d052e4c5468553b182014ec2e411ce595128be14", "url": "https://github.com/firebase/firebase-android-sdk/commit/d052e4c5468553b182014ec2e411ce595128be14", "message": "cleanup test string values", "committedDate": "2020-07-07T15:12:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTEzMjY3NQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1760#discussion_r451132675", "bodyText": "Can we make a minor name change here: testGetIdExceptionalCase_doesNotRotateInstallId()", "author": "mrwillis21", "createdAt": "2020-07-07T20:45:33Z", "path": "firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java", "diffHunk": "@@ -75,6 +77,23 @@ public void testCreateUUID() {\n     assertEquals(installId, idManager.getCrashlyticsInstallId());\n   }\n \n+  public void testGetIdExceptionalCase() {", "originalCommit": "d052e4c5468553b182014ec2e411ce595128be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTY2MDAzOA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1760#discussion_r451660038", "bodyText": "done", "author": "adamvduke", "createdAt": "2020-07-08T16:08:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTEzMjY3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "2061b2d6a4091c374cde13eb301ce66b481284f7", "chunk": "diff --git a/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java b/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java\nindex 48eefb92..b582ef3c 100644\n--- a/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java\n+++ b/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java\n\n@@ -77,10 +77,10 @@ public class IdManagerTest extends CrashlyticsTestCase {\n     assertEquals(installId, idManager.getCrashlyticsInstallId());\n   }\n \n-  public void testGetIdExceptionalCase() {\n-    FirebaseInstallationsApi iid = mock(FirebaseInstallationsApi.class);\n+  public void testGetIdExceptionalCase_doesNotRotateInstallId() {\n+    FirebaseInstallationsApi fis = mock(FirebaseInstallationsApi.class);\n     final String expectedInstallId = \"expectedInstallId\";\n-    when(iid.getId())\n+    when(fis.getId())\n         .thenReturn(Tasks.forException(new TimeoutException(\"Fetching id timed out.\")));\n     prefs\n         .edit()\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTEzMjk1Mw==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1760#discussion_r451132953", "bodyText": "Nit: can we call this fis instead of iid?", "author": "mrwillis21", "createdAt": "2020-07-07T20:46:03Z", "path": "firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java", "diffHunk": "@@ -75,6 +77,23 @@ public void testCreateUUID() {\n     assertEquals(installId, idManager.getCrashlyticsInstallId());\n   }\n \n+  public void testGetIdExceptionalCase() {\n+    FirebaseInstallationsApi iid = mock(FirebaseInstallationsApi.class);", "originalCommit": "d052e4c5468553b182014ec2e411ce595128be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTY2MDM4Ng==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1760#discussion_r451660386", "bodyText": "done", "author": "adamvduke", "createdAt": "2020-07-08T16:08:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTEzMjk1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "2061b2d6a4091c374cde13eb301ce66b481284f7", "chunk": "diff --git a/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java b/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java\nindex 48eefb92..b582ef3c 100644\n--- a/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java\n+++ b/firebase-crashlytics/src/androidTest/java/com/google/firebase/crashlytics/internal/common/IdManagerTest.java\n\n@@ -77,10 +77,10 @@ public class IdManagerTest extends CrashlyticsTestCase {\n     assertEquals(installId, idManager.getCrashlyticsInstallId());\n   }\n \n-  public void testGetIdExceptionalCase() {\n-    FirebaseInstallationsApi iid = mock(FirebaseInstallationsApi.class);\n+  public void testGetIdExceptionalCase_doesNotRotateInstallId() {\n+    FirebaseInstallationsApi fis = mock(FirebaseInstallationsApi.class);\n     final String expectedInstallId = \"expectedInstallId\";\n-    when(iid.getId())\n+    when(fis.getId())\n         .thenReturn(Tasks.forException(new TimeoutException(\"Fetching id timed out.\")));\n     prefs\n         .edit()\n"}}, {"oid": "2061b2d6a4091c374cde13eb301ce66b481284f7", "url": "https://github.com/firebase/firebase-android-sdk/commit/2061b2d6a4091c374cde13eb301ce66b481284f7", "message": "cleanup variable naming according to pr feedback", "committedDate": "2020-07-08T15:25:33Z", "type": "commit"}]}