{"pr_number": 2259, "pr_title": "Added FirebaseMlException and Logging round 1.", "pr_createdAt": "2020-12-15T19:37:32Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/2259", "timeline": [{"oid": "fc4307b700eebb7f9c34f41760610d41f71294a4", "url": "https://github.com/firebase/firebase-android-sdk/commit/fc4307b700eebb7f9c34f41760610d41f71294a4", "message": "Added FirebaseMlException and Logging round 1.", "committedDate": "2020-12-15T18:58:34Z", "type": "commit"}, {"oid": "2b496949b69f82787ce1913f1d0c5bf9c57fdbf4", "url": "https://github.com/firebase/firebase-android-sdk/commit/2b496949b69f82787ce1913f1d0c5bf9c57fdbf4", "message": "Updating files per failed tests.", "committedDate": "2020-12-15T19:54:06Z", "type": "commit"}, {"oid": "5cae37486065c0738a57e917600f133ff5cd24d4", "url": "https://github.com/firebase/firebase-android-sdk/commit/5cae37486065c0738a57e917600f133ff5cd24d4", "message": "Fixing to single junit.", "committedDate": "2020-12-15T20:42:02Z", "type": "commit"}, {"oid": "7c80a09c9a626a10cca11d7da57bd50c4db301a9", "url": "https://github.com/firebase/firebase-android-sdk/commit/7c80a09c9a626a10cca11d7da57bd50c4db301a9", "message": "Updates FirebaseMlLogEvent ModelOption name to Options to make internal proto. This allows for proper json to proto conversion and in local tests messages now reach the spanner queue.", "committedDate": "2020-12-17T20:32:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjAzNjk1NQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2259#discussion_r552036955", "bodyText": "missing javadoc", "author": "rlazo", "createdAt": "2021-01-05T16:18:09Z", "path": "firebase-ml-modeldownloader/src/main/java/com/google/firebase/ml/modeldownloader/internal/SharedPreferencesUtil.java", "diffHunk": "@@ -244,6 +250,68 @@ public synchronized void clearModelDetails(@NonNull String modelName) {\n     return customModels;\n   }\n \n+  /**\n+   * Should Firelog logging be enabled.\n+   *\n+   * @return whether or not firelog events should be logged. Default to true.\n+   */\n+  public synchronized boolean getCustomModelStatsCollectionFlag() {\n+    return getSharedPreferences()\n+        .getBoolean(\n+            String.format(EVENT_LOGGING_ENABLED_PATTERN, CUSTOM_MODEL_LIB, persistenceKey), true);\n+  }\n+\n+  /**\n+   * Set whether firelog logging should be enabled. When not explicitly set, the default is true.\n+   *\n+   * @param enable - False to turn off logging. True to turn on logging.\n+   */\n+  public synchronized void setCustomModelStatsCollectionEnabled(boolean enable) {\n+    getSharedPreferences()\n+        .edit()\n+        .putBoolean(\n+            String.format(EVENT_LOGGING_ENABLED_PATTERN, CUSTOM_MODEL_LIB, persistenceKey), enable)\n+        .apply();\n+  }\n+\n+  public synchronized long getModelDownloadBeginTimeMs(@NonNull CustomModel customModel) {", "originalCommit": "7c80a09c9a626a10cca11d7da57bd50c4db301a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjA2ODI0MQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2259#discussion_r552068241", "bodyText": "done", "author": "annzimmer", "createdAt": "2021-01-05T17:07:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjAzNjk1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "3b1e244e6bc85495170b7ddd0e4d9a3f7df13eb0", "chunk": "diff --git a/firebase-ml-modeldownloader/src/main/java/com/google/firebase/ml/modeldownloader/internal/SharedPreferencesUtil.java b/firebase-ml-modeldownloader/src/main/java/com/google/firebase/ml/modeldownloader/internal/SharedPreferencesUtil.java\nindex 07b4ac84..7da73117 100644\n--- a/firebase-ml-modeldownloader/src/main/java/com/google/firebase/ml/modeldownloader/internal/SharedPreferencesUtil.java\n+++ b/firebase-ml-modeldownloader/src/main/java/com/google/firebase/ml/modeldownloader/internal/SharedPreferencesUtil.java\n\n@@ -274,6 +274,12 @@ public class SharedPreferencesUtil {\n         .apply();\n   }\n \n+  /**\n+   * Gets the start time (in ms) of the model download attempt.\n+   *\n+   * @param customModel model\n+   * @return time in ms\n+   */\n   public synchronized long getModelDownloadBeginTimeMs(@NonNull CustomModel customModel) {\n     return getSharedPreferences()\n         .getLong(\n"}}, {"oid": "3b1e244e6bc85495170b7ddd0e4d9a3f7df13eb0", "url": "https://github.com/firebase/firebase-android-sdk/commit/3b1e244e6bc85495170b7ddd0e4d9a3f7df13eb0", "message": "Add ability to get download id for file progress tracking.", "committedDate": "2021-01-05T17:05:23Z", "type": "commit"}, {"oid": "6aa3bb1ac4cb992695524a359ef2135f1cf2dd5b", "url": "https://github.com/firebase/firebase-android-sdk/commit/6aa3bb1ac4cb992695524a359ef2135f1cf2dd5b", "message": "removing androidTestImplementation - these are not used.", "committedDate": "2021-01-05T20:42:20Z", "type": "commit"}, {"oid": "f4d85e8a4d69f8c9cbe3a132a155d6792c8b3fd9", "url": "https://github.com/firebase/firebase-android-sdk/commit/f4d85e8a4d69f8c9cbe3a132a155d6792c8b3fd9", "message": "Merge branch 'master' into mlLogging2", "committedDate": "2021-01-06T17:32:50Z", "type": "commit"}]}