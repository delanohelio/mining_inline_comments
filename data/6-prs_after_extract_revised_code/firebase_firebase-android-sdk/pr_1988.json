{"pr_number": 1988, "pr_title": "Clarifying why FIS SDK reads SHA1 hash.", "pr_createdAt": "2020-09-16T20:20:04Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1988", "timeline": [{"oid": "ed56e4970c86da5c283de71b0d6671c2720c67aa", "url": "https://github.com/firebase/firebase-android-sdk/commit/ed56e4970c86da5c283de71b0d6671c2720c67aa", "message": "Clarifying why FIS SDK reads SHA1 hash.", "committedDate": "2020-09-16T20:18:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc3NDcxNQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1988#discussion_r489774715", "bodyText": "Please don't put this in JavaDoc, but rather as a code comment above the actual usage of SHA1.", "author": "andirayo", "createdAt": "2020-09-16T21:50:45Z", "path": "firebase-installations/src/main/java/com/google/firebase/installations/local/IidStore.java", "diffHunk": "@@ -167,6 +167,13 @@ private String readPublicKeyFromLocalStorageAndCalculateInstanceId() {\n     }\n   }\n \n+  /**\n+   * FirebaseInstallations SDK uses the SHA1 hash for backwards compatibility with the legacy\n+   * InstanceID SDK. The SHA1 hash is used to access Instance IDs stored on the device and not for\n+   * any security relevant process. This is a one-time step that allows migration of old client\n+   * identifiers. Cryptographic security is not needed here so potential hash collisions are not a\n+   * problem.\n+   */", "originalCommit": "ed56e4970c86da5c283de71b0d6671c2720c67aa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9ba52937273a9592812ae78a0389974fce7109ba", "chunk": "diff --git a/firebase-installations/src/main/java/com/google/firebase/installations/local/IidStore.java b/firebase-installations/src/main/java/com/google/firebase/installations/local/IidStore.java\nindex 21ce9ccdf..84a0a3996 100644\n--- a/firebase-installations/src/main/java/com/google/firebase/installations/local/IidStore.java\n+++ b/firebase-installations/src/main/java/com/google/firebase/installations/local/IidStore.java\n\n@@ -167,13 +167,6 @@ public class IidStore {\n     }\n   }\n \n-  /**\n-   * FirebaseInstallations SDK uses the SHA1 hash for backwards compatibility with the legacy\n-   * InstanceID SDK. The SHA1 hash is used to access Instance IDs stored on the device and not for\n-   * any security relevant process. This is a one-time step that allows migration of old client\n-   * identifiers. Cryptographic security is not needed here so potential hash collisions are not a\n-   * problem.\n-   */\n   @Nullable\n   private static String getIdFromPublicKey(@NonNull PublicKey publicKey) {\n     // The ID is the sha of the public key truncated to 60 bit, with first 4 bits switched to\n"}}, {"oid": "9ba52937273a9592812ae78a0389974fce7109ba", "url": "https://github.com/firebase/firebase-android-sdk/commit/9ba52937273a9592812ae78a0389974fce7109ba", "message": "Addressing comments.", "committedDate": "2020-09-16T21:53:29Z", "type": "commit"}]}