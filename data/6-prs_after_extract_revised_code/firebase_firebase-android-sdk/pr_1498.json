{"pr_number": 1498, "pr_title": "Port ComponentProvider", "pr_createdAt": "2020-04-24T02:36:46Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1498", "timeline": [{"oid": "3367574e7c0847dea3d4b1dc73294fdeebaabdcc", "url": "https://github.com/firebase/firebase-android-sdk/commit/3367574e7c0847dea3d4b1dc73294fdeebaabdcc", "message": "Port ComponentProvider", "committedDate": "2020-04-24T17:43:46Z", "type": "forcePushed"}, {"oid": "bfb64a2b80d0446921a8d425589ed37bf9c0235f", "url": "https://github.com/firebase/firebase-android-sdk/commit/bfb64a2b80d0446921a8d425589ed37bf9c0235f", "message": "Port ComponentProvider", "committedDate": "2020-04-24T18:04:02Z", "type": "forcePushed"}, {"oid": "ad70387bf051c72f0060538fa7f56d9364ae7d4f", "url": "https://github.com/firebase/firebase-android-sdk/commit/ad70387bf051c72f0060538fa7f56d9364ae7d4f", "message": "Port ComponentProvider", "committedDate": "2020-04-24T18:06:04Z", "type": "forcePushed"}, {"oid": "be064a905f62c7a2ed0913a0709a7cc250d92c54", "url": "https://github.com/firebase/firebase-android-sdk/commit/be064a905f62c7a2ed0913a0709a7cc250d92c54", "message": "Port ComponentProvider", "committedDate": "2020-04-24T18:19:53Z", "type": "forcePushed"}, {"oid": "58c571d072639164fea9ace57da85d2ad89e3607", "url": "https://github.com/firebase/firebase-android-sdk/commit/58c571d072639164fea9ace57da85d2ad89e3607", "message": "Port ComponentProvider", "committedDate": "2020-04-24T18:34:34Z", "type": "forcePushed"}, {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462", "url": "https://github.com/firebase/firebase-android-sdk/commit/df22128d51955e6ae506d298b1ad1cc1a5f14462", "message": "Port ComponentProvider", "committedDate": "2020-04-24T19:16:33Z", "type": "commit"}, {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462", "url": "https://github.com/firebase/firebase-android-sdk/commit/df22128d51955e6ae506d298b1ad1cc1a5f14462", "message": "Port ComponentProvider", "committedDate": "2020-04-24T19:16:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MDU0OA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498#discussion_r414840548", "bodyText": "Nit: I think Java recommendations discourage final on parameters and local variables.", "author": "var-const", "createdAt": "2020-04-24T20:22:25Z", "path": "firebase-firestore/src/test/java/com/google/firebase/firestore/spec/SpecTestCase.java", "diffHunk": "@@ -241,7 +241,8 @@ public static void log(String line) {\n   // Methods for tracking state of writes.\n   //\n \n-  abstract Persistence getPersistence(boolean garbageCollectionEnabled);\n+  protected abstract ComponentProvider initializeComponentProvider(\n+      ComponentProvider.Configuration configuration, final boolean garbageCollectionEnabled);", "originalCommit": "df22128d51955e6ae506d298b1ad1cc1a5f14462", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0OTk0OQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498#discussion_r414849949", "bodyText": "Removed. I added it as it is used in an inner class, but it is \"effectively final\" without it.", "author": "schmidt-sebastian", "createdAt": "2020-04-24T20:40:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MDU0OA=="}], "type": "inlineReview", "revised_code": {"commit": "2d0df448ebef390703e09ba4592c17599ab40e4d", "chunk": "diff --git a/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/SpecTestCase.java b/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/SpecTestCase.java\nindex 37a3ec2aa..63edb9815 100644\n--- a/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/SpecTestCase.java\n+++ b/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/SpecTestCase.java\n\n@@ -242,7 +242,7 @@ public abstract class SpecTestCase implements RemoteStoreCallback {\n   //\n \n   protected abstract ComponentProvider initializeComponentProvider(\n-      ComponentProvider.Configuration configuration, final boolean garbageCollectionEnabled);\n+      ComponentProvider.Configuration configuration, boolean garbageCollectionEnabled);\n \n   private boolean shouldRun(Set<String> tags) {\n     for (String tag : tags) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MDY2Nw==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498#discussion_r414840667", "bodyText": "Same nit re. final.", "author": "var-const", "createdAt": "2020-04-24T20:22:44Z", "path": "firebase-firestore/src/test/java/com/google/firebase/firestore/spec/MemorySpecTest.java", "diffHunk": "@@ -33,11 +39,23 @@ protected boolean isExcluded(Set<String> tags) {\n   }\n \n   @Override\n-  Persistence getPersistence(boolean garbageCollectionEnabled) {\n-    if (garbageCollectionEnabled) {\n-      return PersistenceTestHelpers.createEagerGCMemoryPersistence();\n-    } else {\n-      return PersistenceTestHelpers.createLRUMemoryPersistence();\n-    }\n+  protected MemoryComponentProvider initializeComponentProvider(\n+      ComponentProvider.Configuration configuration, final boolean garbageCollectionEnabled) {", "originalCommit": "df22128d51955e6ae506d298b1ad1cc1a5f14462", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2d0df448ebef390703e09ba4592c17599ab40e4d", "chunk": "diff --git a/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/MemorySpecTest.java b/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/MemorySpecTest.java\nindex 35c3b35b9..b017caa0f 100644\n--- a/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/MemorySpecTest.java\n+++ b/firebase-firestore/src/test/java/com/google/firebase/firestore/spec/MemorySpecTest.java\n\n@@ -40,7 +40,7 @@ public class MemorySpecTest extends SpecTestCase {\n \n   @Override\n   protected MemoryComponentProvider initializeComponentProvider(\n-      ComponentProvider.Configuration configuration, final boolean garbageCollectionEnabled) {\n+      ComponentProvider.Configuration configuration, boolean garbageCollectionEnabled) {\n     MemoryComponentProvider provider =\n         new MemoryComponentProvider() {\n           @Override\n"}}, {"oid": "2d0df448ebef390703e09ba4592c17599ab40e4d", "url": "https://github.com/firebase/firebase-android-sdk/commit/2d0df448ebef390703e09ba4592c17599ab40e4d", "message": "Remove final", "committedDate": "2020-04-24T20:40:44Z", "type": "commit"}]}