{"pr_number": 2246, "pr_title": "Reflection tests to verify LoadBundleTask implement all interface of Task", "pr_createdAt": "2020-12-10T15:39:15Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/2246", "timeline": [{"oid": "0084b4e5f7ade63e82b6e7b19296aeaf4a422a6f", "url": "https://github.com/firebase/firebase-android-sdk/commit/0084b4e5f7ade63e82b6e7b19296aeaf4a422a6f", "message": "Reflection tests to verify LoadBundleTask implement all interface of Task.", "committedDate": "2020-12-10T15:36:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNDAwNQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2246#discussion_r541124005", "bodyText": "These could all delegate to super already.", "author": "wilhuff", "createdAt": "2020-12-11T17:54:00Z", "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTask.java", "diffHunk": "@@ -0,0 +1,197 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.google.firebase.firestore;\n+\n+import android.app.Activity;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import com.google.android.gms.tasks.Continuation;\n+import com.google.android.gms.tasks.OnCanceledListener;\n+import com.google.android.gms.tasks.OnCompleteListener;\n+import com.google.android.gms.tasks.OnFailureListener;\n+import com.google.android.gms.tasks.OnSuccessListener;\n+import com.google.android.gms.tasks.SuccessContinuation;\n+import com.google.android.gms.tasks.Task;\n+import java.util.concurrent.Executor;\n+\n+public class LoadBundleTask extends Task<LoadBundleTaskProgress> {\n+  @Override\n+  public boolean isComplete() {\n+    return false;", "originalCommit": "0084b4e5f7ade63e82b6e7b19296aeaf4a422a6f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ2MTMyMA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2246#discussion_r541461320", "bodyText": "It is abstract in super.", "author": "wu-hui", "createdAt": "2020-12-12T00:56:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNDAwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "cc5dcfe2bd613a94edae44662f63f55404289027", "chunk": "diff --git a/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTask.java b/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTask.java\nindex 057fe047..3c4cc999 100644\n--- a/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTask.java\n+++ b/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTask.java\n\n@@ -26,7 +26,7 @@ import com.google.android.gms.tasks.SuccessContinuation;\n import com.google.android.gms.tasks.Task;\n import java.util.concurrent.Executor;\n \n-public class LoadBundleTask extends Task<LoadBundleTaskProgress> {\n+/* package */ class LoadBundleTask extends Task<LoadBundleTaskProgress> {\n   @Override\n   public boolean isComplete() {\n     return false;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNDgxMA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2246#discussion_r541124810", "bodyText": "Only one NonNull (the Android one, probably, no?).", "author": "wilhuff", "createdAt": "2020-12-11T17:55:21Z", "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTaskProgress.java", "diffHunk": "@@ -0,0 +1,66 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.google.firebase.firestore;\n+\n+import androidx.annotation.NonNull;\n+import javax.annotation.Nonnull;", "originalCommit": "0084b4e5f7ade63e82b6e7b19296aeaf4a422a6f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ2MTc0Ng==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2246#discussion_r541461746", "bodyText": "Done.", "author": "wu-hui", "createdAt": "2020-12-12T00:58:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNDgxMA=="}], "type": "inlineReview", "revised_code": {"commit": "cc5dcfe2bd613a94edae44662f63f55404289027", "chunk": "diff --git a/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTaskProgress.java b/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTaskProgress.java\nindex 9100beda..2d3b324d 100644\n--- a/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTaskProgress.java\n+++ b/firebase-firestore/src/main/java/com/google/firebase/firestore/LoadBundleTaskProgress.java\n\n@@ -15,9 +15,8 @@\n package com.google.firebase.firestore;\n \n import androidx.annotation.NonNull;\n-import javax.annotation.Nonnull;\n \n-public final class LoadBundleTaskProgress {\n+/* package */ final class LoadBundleTaskProgress {\n   public enum TaskState {\n     ERROR,\n     RUNNING,\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNTE5MA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2246#discussion_r541125190", "bodyText": "Needs an assertion, but yeah, this is the basic idea.", "author": "wilhuff", "createdAt": "2020-12-11T17:55:59Z", "path": "firebase-firestore/src/test/java/com/google/firebase/firestore/LoadBundleTaskTest.java", "diffHunk": "@@ -0,0 +1,33 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.google.firebase.firestore;\n+\n+import com.google.android.gms.tasks.Task;\n+import java.lang.reflect.Method;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.robolectric.RobolectricTestRunner;\n+import org.robolectric.annotation.Config;\n+\n+@RunWith(RobolectricTestRunner.class)\n+@Config(manifest = Config.NONE)\n+public class LoadBundleTaskTest {\n+  @Test\n+  public void testImplementsAllTaskInterface() throws NoSuchMethodException {\n+    for (Method method : Task.class.getDeclaredMethods()) {\n+      LoadBundleTask.class.getDeclaredMethod(method.getName(), method.getParameterTypes());", "originalCommit": "0084b4e5f7ade63e82b6e7b19296aeaf4a422a6f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ2Mzg0OQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/2246#discussion_r541463849", "bodyText": "Done.", "author": "wu-hui", "createdAt": "2020-12-12T01:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNTE5MA=="}], "type": "inlineReview", "revised_code": {"commit": "cc5dcfe2bd613a94edae44662f63f55404289027", "chunk": "diff --git a/firebase-firestore/src/test/java/com/google/firebase/firestore/LoadBundleTaskTest.java b/firebase-firestore/src/test/java/com/google/firebase/firestore/LoadBundleTaskTest.java\nindex e3635691..f48ff72e 100644\n--- a/firebase-firestore/src/test/java/com/google/firebase/firestore/LoadBundleTaskTest.java\n+++ b/firebase-firestore/src/test/java/com/google/firebase/firestore/LoadBundleTaskTest.java\n\n@@ -14,6 +14,8 @@\n \n package com.google.firebase.firestore;\n \n+import static org.junit.Assert.fail;\n+\n import com.google.android.gms.tasks.Task;\n import java.lang.reflect.Method;\n import org.junit.Test;\n"}}, {"oid": "cc5dcfe2bd613a94edae44662f63f55404289027", "url": "https://github.com/firebase/firebase-android-sdk/commit/cc5dcfe2bd613a94edae44662f63f55404289027", "message": "Address comments and make LoadBundleTask package private.", "committedDate": "2020-12-12T01:07:25Z", "type": "commit"}]}