{"pr_number": 1680, "pr_title": "Filter empty i18n config parameter options", "pr_createdAt": "2020-10-02T00:21:32Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1680", "timeline": [{"oid": "39228dad209f4490c3488a269d0166e905ce4951", "url": "https://github.com/openhab/openhab-core/commit/39228dad209f4490c3488a269d0166e905ce4951", "message": "Filter empty i18n config parameter options\n\nThere are many locales that do not have a country resulting in these empty parameter options.\n\nRelated to #1662\n\nSigned-off-by: Wouter Born <github@maindrain.net>", "committedDate": "2020-10-02T00:20:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODYxNjgxMw==", "url": "https://github.com/openhab/openhab-core/pull/1680#discussion_r498616813", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .map(l -> mapFunction.apply(l)) //\n          \n          \n            \n                            .map(mapFunction) //", "author": "cpmeister", "createdAt": "2020-10-02T04:45:50Z", "path": "bundles/org.openhab.core.config.core/src/main/java/org/openhab/core/config/core/internal/i18n/I18nConfigOptionsProvider.java", "diffHunk": "@@ -96,7 +96,11 @@ private static String getTimeZoneRepresentation(TimeZone tz) {\n \n     private Collection<ParameterOption> getAvailable(@Nullable Locale locale,\n             Function<Locale, ParameterOption> mapFunction) {\n-        return Arrays.stream(Locale.getAvailableLocales()).map(l -> mapFunction.apply(l)).distinct()\n-                .sorted(Comparator.comparing(a -> a.getLabel())).collect(Collectors.toList());\n+        return Arrays.stream(Locale.getAvailableLocales()) //\n+                .map(l -> mapFunction.apply(l)) //", "originalCommit": "39228dad209f4490c3488a269d0166e905ce4951", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY4MjE2Mw==", "url": "https://github.com/openhab/openhab-core/pull/1680#discussion_r498682163", "bodyText": "That looks a bit better indeed!", "author": "wborn", "createdAt": "2020-10-02T08:24:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODYxNjgxMw=="}], "type": "inlineReview", "revised_code": {"commit": "8e54abf359e74c8ea1a791d8fc83aff7721cbc5b", "chunk": "diff --git a/bundles/org.openhab.core.config.core/src/main/java/org/openhab/core/config/core/internal/i18n/I18nConfigOptionsProvider.java b/bundles/org.openhab.core.config.core/src/main/java/org/openhab/core/config/core/internal/i18n/I18nConfigOptionsProvider.java\nindex f9f66bbc4..d15a7a973 100644\n--- a/bundles/org.openhab.core.config.core/src/main/java/org/openhab/core/config/core/internal/i18n/I18nConfigOptionsProvider.java\n+++ b/bundles/org.openhab.core.config.core/src/main/java/org/openhab/core/config/core/internal/i18n/I18nConfigOptionsProvider.java\n\n@@ -97,7 +97,7 @@ public class I18nConfigOptionsProvider implements ConfigOptionProvider {\n     private Collection<ParameterOption> getAvailable(@Nullable Locale locale,\n             Function<Locale, ParameterOption> mapFunction) {\n         return Arrays.stream(Locale.getAvailableLocales()) //\n-                .map(l -> mapFunction.apply(l)) //\n+                .map(mapFunction) //\n                 .distinct() //\n                 .filter(po -> !po.getValue().isEmpty()) //\n                 .sorted(Comparator.comparing(a -> a.getLabel())) //\n"}}, {"oid": "8e54abf359e74c8ea1a791d8fc83aff7721cbc5b", "url": "https://github.com/openhab/openhab-core/commit/8e54abf359e74c8ea1a791d8fc83aff7721cbc5b", "message": "Apply suggestion and simplify test\n\nSigned-off-by: Wouter Born <github@maindrain.net>", "committedDate": "2020-10-02T08:23:12Z", "type": "commit"}]}