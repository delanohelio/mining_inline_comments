{"pr_number": 1297, "pr_title": "reject more libs from class scanner", "pr_createdAt": "2020-07-24T13:20:21Z", "pr_url": "https://github.com/bakdata/conquery/pull/1297", "timeline": [{"oid": "2ce4118aaa1ae1c909867778104ddbc20e69f737", "url": "https://github.com/bakdata/conquery/commit/2ce4118aaa1ae1c909867778104ddbc20e69f737", "message": "adds more libraries to reject froms scan", "committedDate": "2020-07-24T13:43:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4NzQ3OQ==", "url": "https://github.com/bakdata/conquery/pull/1297#discussion_r461387479", "bodyText": "Suggested change", "author": "awildturtok", "createdAt": "2020-07-28T07:51:55Z", "path": "backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java", "diffHunk": "@@ -67,19 +61,22 @@ public void init(JavaType baseType) {\n \tstatic {\n \t\tlog.info(\"Scanning Classpath\");\n \t\t//scan classpaths for annotated child classes\n-\t\t\n+\n \t\tSCAN_RESULT = new ClassGraph()\n-\t\t\t.enableClassInfo()\n-\t\t\t.enableAnnotationInfo()\n-\t\t\t//blacklist some packages that contain large libraries\n-\t\t\t.blacklistPackages(\n-\t\t\t\t\"groovy\",\n-\t\t\t\t\"org.codehaus.groovy\",\n-\t\t\t\t\"org.apache\",\n-\t\t\t\t\"org.eclipse\",\n-\t\t\t\t\"com.google\"\n-\t\t\t)\n-\t\t\t.scan();\n+\t\t\t\t.enableClassInfo()\n+\t\t\t\t.enableAnnotationInfo().rejectPackages(\n+\t\t\t\t\t\t\"groovy\",\n+\t\t\t\t\t\t\"org.codehaus.groovy\",\n+\t\t\t\t\t\t\"org.apache\",\n+\t\t\t\t\t\t\"org.eclipse\",\n+\t\t\t\t\t\t\"com.google\",\n+\t\t\t\t\t\t\"io\",\n+\t\t\t\t\t\t\"com.auth0\",\n+\t\t\t\t\t\t\"com.esotericsoftware\",\n+\t\t\t\t\t\t\"org.glassfish\"\n+", "originalCommit": "0af8a3719d0102b6c0426d1bc8d10dd044dc6f25", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3355a9d9a0332a47ffecbfc5b341085a1192ab4e", "chunk": "diff --git a/backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java b/backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java\nindex 0889fd7be..dc5097ef1 100644\n--- a/backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java\n+++ b/backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java\n\n@@ -61,22 +67,19 @@ public class CPSTypeIdResolver implements TypeIdResolver {\n \tstatic {\n \t\tlog.info(\"Scanning Classpath\");\n \t\t//scan classpaths for annotated child classes\n-\n+\t\t\n \t\tSCAN_RESULT = new ClassGraph()\n-\t\t\t\t.enableClassInfo()\n-\t\t\t\t.enableAnnotationInfo().rejectPackages(\n-\t\t\t\t\t\t\"groovy\",\n-\t\t\t\t\t\t\"org.codehaus.groovy\",\n-\t\t\t\t\t\t\"org.apache\",\n-\t\t\t\t\t\t\"org.eclipse\",\n-\t\t\t\t\t\t\"com.google\",\n-\t\t\t\t\t\t\"io\",\n-\t\t\t\t\t\t\"com.auth0\",\n-\t\t\t\t\t\t\"com.esotericsoftware\",\n-\t\t\t\t\t\t\"org.glassfish\"\n-\n-\t\t\t\t)\n-\t\t\t\t.scan();\n+\t\t\t.enableClassInfo()\n+\t\t\t.enableAnnotationInfo()\n+\t\t\t//blacklist some packages that contain large libraries\n+\t\t\t.blacklistPackages(\n+\t\t\t\t\"groovy\",\n+\t\t\t\t\"org.codehaus.groovy\",\n+\t\t\t\t\"org.apache\",\n+\t\t\t\t\"org.eclipse\",\n+\t\t\t\t\"com.google\"\n+\t\t\t)\n+\t\t\t.scan();\n \t\t\n \t\tlog.info(\"Scanned: {} classes in classpath\", SCAN_RESULT.getAllClasses().size());\n \t\tSet<Class<?>> types = new HashSet<>();\n"}}, {"oid": "3355a9d9a0332a47ffecbfc5b341085a1192ab4e", "url": "https://github.com/bakdata/conquery/commit/3355a9d9a0332a47ffecbfc5b341085a1192ab4e", "message": "adds flag to signal if logout button should be hidden", "committedDate": "2020-07-28T12:08:03Z", "type": "commit"}, {"oid": "fe699b468b076d6dbcfb895e0bfb3ec58ea363a1", "url": "https://github.com/bakdata/conquery/commit/fe699b468b076d6dbcfb895e0bfb3ec58ea363a1", "message": "change authentication strategy to avoid info merging", "committedDate": "2020-07-28T12:08:03Z", "type": "commit"}, {"oid": "0c038ea11cfe0af4b00e874ce5f8fc75dfa92626", "url": "https://github.com/bakdata/conquery/commit/0c038ea11cfe0af4b00e874ce5f8fc75dfa92626", "message": "negate internal meaning of logout flag", "committedDate": "2020-07-28T12:08:03Z", "type": "commit"}, {"oid": "21a29d03f076a60d5a4704b4e80c8936856c68ea", "url": "https://github.com/bakdata/conquery/commit/21a29d03f076a60d5a4704b4e80c8936856c68ea", "message": "adds more libraries to reject froms scan", "committedDate": "2020-07-28T12:08:03Z", "type": "commit"}, {"oid": "6833639a11fdb8d2e49ef8708fd209e69c82ff94", "url": "https://github.com/bakdata/conquery/commit/6833639a11fdb8d2e49ef8708fd209e69c82ff94", "message": "Update backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java\n\nCo-authored-by: awildturtok <1553491+awildturtok@users.noreply.github.com>", "committedDate": "2020-07-28T12:08:04Z", "type": "commit"}, {"oid": "6833639a11fdb8d2e49ef8708fd209e69c82ff94", "url": "https://github.com/bakdata/conquery/commit/6833639a11fdb8d2e49ef8708fd209e69c82ff94", "message": "Update backend/src/main/java/com/bakdata/conquery/io/cps/CPSTypeIdResolver.java\n\nCo-authored-by: awildturtok <1553491+awildturtok@users.noreply.github.com>", "committedDate": "2020-07-28T12:08:04Z", "type": "forcePushed"}, {"oid": "34099e3047aca86ea36db078f468fc1c742a2b66", "url": "https://github.com/bakdata/conquery/commit/34099e3047aca86ea36db078f468fc1c742a2b66", "message": "Merge branch 'develop' into feature/reject-more-libs-from-class-scanner", "committedDate": "2020-07-29T09:54:48Z", "type": "commit"}]}