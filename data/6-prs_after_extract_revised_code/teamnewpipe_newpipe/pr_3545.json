{"pr_number": 3545, "pr_title": " Fix Kodi button showing up with unsupported services", "pr_createdAt": "2020-05-06T18:54:18Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3545", "timeline": [{"oid": "6d604d347c9e8e26f601324f462425bf7d6a9aed", "url": "https://github.com/TeamNewPipe/NewPipe/commit/6d604d347c9e8e26f601324f462425bf7d6a9aed", "message": "Fix Kodi button showing up in unsupported services", "committedDate": "2020-05-06T18:55:04Z", "type": "forcePushed"}, {"oid": "9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "message": "Fix Kodi button showing up in unsupported services", "committedDate": "2020-05-06T18:55:53Z", "type": "commit"}, {"oid": "9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9ca6cfd6374159b50ccc4716bf8d3ba15891014d", "message": "Fix Kodi button showing up in unsupported services", "committedDate": "2020-05-06T18:55:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMjkyNg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421602926", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                NavigationHelper.playWithKore(activity, Uri.parse(currentInfo.getUrl()));\n          \n          \n            \n                                NavigationHelper.playWithKore(activity, Uri.parse(url));", "author": "wb9688", "createdAt": "2020-05-07T15:40:11Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -665,8 +666,7 @@ public boolean onOptionsItemSelected(final MenuItem item) {\n                 return true;\n             case R.id.action_play_with_kodi:\n                 try {\n-                    NavigationHelper.playWithKore(activity, Uri.parse(\n-                            url.replace(\"https\", \"http\")));\n+                    NavigationHelper.playWithKore(activity, Uri.parse(currentInfo.getUrl()));", "originalCommit": "a5a814164c6b0ad4780f67e22afce8affaa12283", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzOTk0OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421639948", "bodyText": "I changed this because url is the originalUrl, that can be in a non-standard form, while getUrl() gets the standard url", "author": "Stypox", "createdAt": "2020-05-07T16:35:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMjkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY0NTEyNQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421645125", "bodyText": "Oh, you're right, I thought I had checked that\u2026", "author": "wb9688", "createdAt": "2020-05-07T16:43:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMjkyNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMzQyNg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421603426", "bodyText": "final", "author": "wb9688", "createdAt": "2020-05-07T15:40:52Z", "path": "app/src/main/java/org/schabi/newpipe/player/MainVideoPlayer.java", "diffHunk": "@@ -712,6 +709,13 @@ public void onShuffleClicked() {\n         protected void onMetadataChanged(@NonNull final MediaSourceTag tag) {\n             super.onMetadataChanged(tag);\n \n+            // show kodi button if it supports the current service and it is enabled in settings\n+            boolean showKodiButton =", "originalCommit": "a5a814164c6b0ad4780f67e22afce8affaa12283", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY0MDkwOA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3545#discussion_r421640908", "bodyText": "Yes \ud83d\ude2b\ud83d\ude02", "author": "Stypox", "createdAt": "2020-05-07T16:37:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMzQyNg=="}], "type": "inlineReview", "revised_code": {"commit": "5c711322d416d0c6ccda53873f82d2379fd99771", "chunk": "diff --git a/app/src/main/java/org/schabi/newpipe/player/MainVideoPlayer.java b/app/src/main/java/org/schabi/newpipe/player/MainVideoPlayer.java\nindex d858c77d8..37a07fb20 100644\n--- a/app/src/main/java/org/schabi/newpipe/player/MainVideoPlayer.java\n+++ b/app/src/main/java/org/schabi/newpipe/player/MainVideoPlayer.java\n\n@@ -710,7 +710,7 @@ public final class MainVideoPlayer extends AppCompatActivity\n             super.onMetadataChanged(tag);\n \n             // show kodi button if it supports the current service and it is enabled in settings\n-            boolean showKodiButton =\n+            final boolean showKodiButton =\n                     KoreUtil.isServiceSupportedByKore(tag.getMetadata().getServiceId())\n                     && PreferenceManager.getDefaultSharedPreferences(context)\n                         .getBoolean(context.getString(R.string.show_play_with_kodi_key), false);\n"}}, {"oid": "5c711322d416d0c6ccda53873f82d2379fd99771", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5c711322d416d0c6ccda53873f82d2379fd99771", "message": "In player hide kodi button if service unsupported", "committedDate": "2020-05-07T19:11:34Z", "type": "commit"}, {"oid": "5c711322d416d0c6ccda53873f82d2379fd99771", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5c711322d416d0c6ccda53873f82d2379fd99771", "message": "In player hide kodi button if service unsupported", "committedDate": "2020-05-07T19:11:34Z", "type": "forcePushed"}]}