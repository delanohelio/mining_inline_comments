{"pr_number": 3471, "pr_title": "Display search suggestion: did you mean & showing result for", "pr_createdAt": "2020-04-22T16:30:54Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3471", "timeline": [{"oid": "cb4da912f243f693e55a73748aa30d02401c984a", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cb4da912f243f693e55a73748aa30d02401c984a", "message": "fix(PR-review): use string format & remove redundant strings\n\n* Merge correct_suggestion_text and search_suggestion_helper_text_size to one with string format\n* Remove redundant string search_showing_result_for and use already defined did_you_mean", "committedDate": "2020-05-12T07:46:12Z", "type": "forcePushed"}, {"oid": "7714b8ef609a89eaf3721143d3a7641da28e3497", "url": "https://github.com/TeamNewPipe/NewPipe/commit/7714b8ef609a89eaf3721143d3a7641da28e3497", "message": "fix(PR-review): use string format & remove redundant strings\n\n* Merge correct_suggestion_text and search_suggestion_helper_text_size to one with string format\n* Remove redundant string search_showing_result_for and use already defined did_you_mean", "committedDate": "2020-05-12T07:52:20Z", "type": "forcePushed"}, {"oid": "8403ca93ce20ce91f81008a3b0a47fcfaa457f73", "url": "https://github.com/TeamNewPipe/NewPipe/commit/8403ca93ce20ce91f81008a3b0a47fcfaa457f73", "message": "fix(search-suggestions-not-working-on-resume)\n\n* add searchSuggestionString, isCorrectedSearch fields to state and load onResume", "committedDate": "2020-06-14T08:01:02Z", "type": "forcePushed"}, {"oid": "5c8d1bf68bb7be127b7d745b71a94c5a2ee60be1", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5c8d1bf68bb7be127b7d745b71a94c5a2ee60be1", "message": "fix(search-suggestions-not-working-on-resume)\n\n* add searchSuggestionString, isCorrectedSearch fields to state and load onResume", "committedDate": "2020-06-14T08:06:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3MzU0Ng==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3471#discussion_r440273546", "bodyText": "handleSearchSuggestion already checks if (!TextUtils.isEmpty(searchSuggestionString))", "author": "B0pol", "createdAt": "2020-06-15T15:48:19Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java", "diffHunk": "@@ -257,6 +266,10 @@ public void onResume() {\n             }\n         }\n \n+        if (!TextUtils.isEmpty(searchSuggestionString)) {\n+            handleSearchSuggestion(searchSuggestionString, isCorrectedSearch);", "originalCommit": "5c8d1bf68bb7be127b7d745b71a94c5a2ee60be1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cce44a1a2a8709e5eac77dc446c7cb23a3674146", "chunk": "diff --git a/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java b/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java\nindex aa2ad8340..545f42179 100644\n--- a/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java\n+++ b/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java\n\n@@ -266,9 +265,7 @@ public class SearchFragment extends BaseListFragment<SearchInfo, ListExtractor.I\n             }\n         }\n \n-        if (!TextUtils.isEmpty(searchSuggestionString)) {\n-            handleSearchSuggestion(searchSuggestionString, isCorrectedSearch);\n-        }\n+        handleSearchSuggestion();\n \n         if (suggestionDisposable == null || suggestionDisposable.isDisposed()) {\n             initSuggestionObserver();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3MzU5Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3471#discussion_r440273592", "bodyText": "why do you save it after calling handleSearchSuggestion()? here you call result.getSearchSuggestion() and result.isCorrectedSearch() twice.", "author": "B0pol", "createdAt": "2020-06-15T15:48:24Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java", "diffHunk": "@@ -961,6 +981,10 @@ public void handleResult(@NonNull final SearchInfo result) {\n                     NewPipe.getNameOfService(serviceId), searchString, 0);\n         }\n \n+        handleSearchSuggestion(result.getSearchSuggestion(), result.isCorrectedSearch());\n+\n+        searchSuggestionString = result.getSearchSuggestion();\n+        isCorrectedSearch = result.isCorrectedSearch();", "originalCommit": "5c8d1bf68bb7be127b7d745b71a94c5a2ee60be1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cce44a1a2a8709e5eac77dc446c7cb23a3674146", "chunk": "diff --git a/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java b/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java\nindex aa2ad8340..545f42179 100644\n--- a/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java\n+++ b/app/src/main/java/org/schabi/newpipe/fragments/list/search/SearchFragment.java\n\n@@ -981,10 +977,11 @@ public class SearchFragment extends BaseListFragment<SearchInfo, ListExtractor.I\n                     NewPipe.getNameOfService(serviceId), searchString, 0);\n         }\n \n-        handleSearchSuggestion(result.getSearchSuggestion(), result.isCorrectedSearch());\n-\n-        searchSuggestionString = result.getSearchSuggestion();\n+        searchSuggestion = result.getSearchSuggestion();\n         isCorrectedSearch = result.isCorrectedSearch();\n+\n+        handleSearchSuggestion();\n+\n         lastSearchedString = searchString;\n         nextPageUrl = result.getNextPageUrl();\n         currentPageUrl = result.getUrl();\n"}}, {"oid": "cce44a1a2a8709e5eac77dc446c7cb23a3674146", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cce44a1a2a8709e5eac77dc446c7cb23a3674146", "message": "Replace search query without searching on suggestion panel long click", "committedDate": "2020-07-04T22:46:02Z", "type": "forcePushed"}, {"oid": "a1b6746627e9dac3a0b8ac2a1319701b65a3dc82", "url": "https://github.com/TeamNewPipe/NewPipe/commit/a1b6746627e9dac3a0b8ac2a1319701b65a3dc82", "message": "Replace search query without searching on suggestion panel long click", "committedDate": "2020-07-04T22:49:38Z", "type": "forcePushed"}, {"oid": "cce99046c82bba0820ade4eaeda6fef60d212669", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cce99046c82bba0820ade4eaeda6fef60d212669", "message": "Replace search query without searching on suggestion panel long click", "committedDate": "2020-07-05T19:57:13Z", "type": "forcePushed"}, {"oid": "4194ac2226a35aefc2df3fca33dbf635059b88e2", "url": "https://github.com/TeamNewPipe/NewPipe/commit/4194ac2226a35aefc2df3fca33dbf635059b88e2", "message": "Display search suggestion: did you mean & showing result for", "committedDate": "2020-07-05T20:01:35Z", "type": "commit"}, {"oid": "0711650ff8c7827bdfee8d0b6b5fcb24b412903d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/0711650ff8c7827bdfee8d0b6b5fcb24b412903d", "message": "Fix search suggestions not working on resume\n\n* add searchSuggestionString, isCorrectedSearch fields to state and load onResume", "committedDate": "2020-07-05T20:01:35Z", "type": "commit"}, {"oid": "ccd82fb8b8dccddafa47a176d969a5eeee8297a2", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ccd82fb8b8dccddafa47a176d969a5eeee8297a2", "message": "Improve search suggestion code", "committedDate": "2020-07-05T20:01:35Z", "type": "commit"}, {"oid": "20e828be514bcafe7eab21ad520a2d814c0c2770", "url": "https://github.com/TeamNewPipe/NewPipe/commit/20e828be514bcafe7eab21ad520a2d814c0c2770", "message": "Improve suggestion panel", "committedDate": "2020-07-05T20:01:35Z", "type": "commit"}, {"oid": "13a0d1de70b664bc1548845268f2689d912ae303", "url": "https://github.com/TeamNewPipe/NewPipe/commit/13a0d1de70b664bc1548845268f2689d912ae303", "message": "Replace search query without searching on suggestion panel long click", "committedDate": "2020-07-05T20:01:35Z", "type": "commit"}, {"oid": "13a0d1de70b664bc1548845268f2689d912ae303", "url": "https://github.com/TeamNewPipe/NewPipe/commit/13a0d1de70b664bc1548845268f2689d912ae303", "message": "Replace search query without searching on suggestion panel long click", "committedDate": "2020-07-05T20:01:35Z", "type": "forcePushed"}, {"oid": "b96d1714b50728bdde81eff125174ba220d697e9", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b96d1714b50728bdde81eff125174ba220d697e9", "message": "Highlight search suggestion", "committedDate": "2020-07-07T18:23:41Z", "type": "commit"}, {"oid": "b96d1714b50728bdde81eff125174ba220d697e9", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b96d1714b50728bdde81eff125174ba220d697e9", "message": "Highlight search suggestion", "committedDate": "2020-07-07T18:23:41Z", "type": "forcePushed"}]}