{"pr_number": 497, "pr_title": "FAI-283 - Minor improvement to Explainability OpenNLP ITs", "pr_createdAt": "2020-10-22T11:43:59Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/497", "timeline": [{"oid": "70af2c934d15393202bf00e13fb423b3cbd1144b", "url": "https://github.com/kiegroup/kogito-apps/commit/70af2c934d15393202bf00e13fb423b3cbd1144b", "message": "FAI-283 - minor improvements to expl-opennlp-it", "committedDate": "2020-10-22T11:42:55Z", "type": "commit"}, {"oid": "3a2c6e98c29688ec851aeb3e43b0ebbc2c12fdf6", "url": "https://github.com/kiegroup/kogito-apps/commit/3a2c6e98c29688ec851aeb3e43b0ebbc2c12fdf6", "message": "FAI-283 - minor improvements to expl-opennlp-it", "committedDate": "2020-10-22T11:43:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM3ODkwOA==", "url": "https://github.com/kiegroup/kogito-apps/pull/497#discussion_r520378908", "bodyText": "It is probably a detail, but why we do not assert also that outputs of predictAsync and get are not null? It may save some time in investigation when test fails.", "author": "jiripetrlik", "createdAt": "2020-11-10T08:35:20Z", "path": "explainability/explainability-integrationtests/explainability-integrationtests-opennlp/src/test/java/org/kie/kogito/explainability/explainability/integrationtests/opennlp/OpenNLPLimeExplainerTest.java", "diffHunk": "@@ -89,6 +81,21 @@ void testOpenNLPLangDetect() throws Exception {\n                 }\n                 return results;\n             });\n+\n+            String inputText = \"italiani,spaghetti pizza mandolino\";\n+            List<Feature> features = new LinkedList<>();\n+            features.add(FeatureFactory.newFulltextFeature(\"text\", inputText, s -> Arrays.asList(s.split(\"\\\\W\"))));\n+            PredictionInput input = new PredictionInput(features);\n+\n+            PredictionOutput output = model.predictAsync(List.of(input)).get().get(0);", "originalCommit": "3a2c6e98c29688ec851aeb3e43b0ebbc2c12fdf6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM4NjY0MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/497#discussion_r520386641", "bodyText": "+1", "author": "tteofili", "createdAt": "2020-11-10T08:47:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM3ODkwOA=="}], "type": "inlineReview", "revised_code": {"commit": "31a8bd7316da0c99861dc0e492ace7ef16af5205", "chunk": "diff --git a/explainability/explainability-integrationtests/explainability-integrationtests-opennlp/src/test/java/org/kie/kogito/explainability/explainability/integrationtests/opennlp/OpenNLPLimeExplainerTest.java b/explainability/explainability-integrationtests/explainability-integrationtests-opennlp/src/test/java/org/kie/kogito/explainability/explainability/integrationtests/opennlp/OpenNLPLimeExplainerTest.java\nindex 6f9fee294..92c555188 100644\n--- a/explainability/explainability-integrationtests/explainability-integrationtests-opennlp/src/test/java/org/kie/kogito/explainability/explainability/integrationtests/opennlp/OpenNLPLimeExplainerTest.java\n+++ b/explainability/explainability-integrationtests/explainability-integrationtests-opennlp/src/test/java/org/kie/kogito/explainability/explainability/integrationtests/opennlp/OpenNLPLimeExplainerTest.java\n\n@@ -87,7 +88,10 @@ class OpenNLPLimeExplainerTest {\n             features.add(FeatureFactory.newFulltextFeature(\"text\", inputText, s -> Arrays.asList(s.split(\"\\\\W\"))));\n             PredictionInput input = new PredictionInput(features);\n \n-            PredictionOutput output = model.predictAsync(List.of(input)).get().get(0);\n+            List<PredictionOutput> predictionOutputs = model.predictAsync(List.of(input)).get();\n+            assertNotNull(predictionOutputs);\n+            assertFalse(predictionOutputs.isEmpty());\n+            PredictionOutput output = predictionOutputs.get(0);\n             assertNotNull(output);\n             assertNotNull(output.getOutputs());\n             assertEquals(1, output.getOutputs().size());\n"}}, {"oid": "31a8bd7316da0c99861dc0e492ace7ef16af5205", "url": "https://github.com/kiegroup/kogito-apps/commit/31a8bd7316da0c99861dc0e492ace7ef16af5205", "message": "FAI-283 - added more test assertions", "committedDate": "2020-11-10T08:49:27Z", "type": "commit"}]}