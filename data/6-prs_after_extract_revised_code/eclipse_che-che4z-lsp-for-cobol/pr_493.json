{"pr_number": 493, "pr_title": "Allow Multi-line Errors Underscoring", "pr_createdAt": "2020-08-31T12:32:07Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/493", "timeline": [{"oid": "3498183ac7e6b7f602ac90dd067108c500fb64ab", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/3498183ac7e6b7f602ac90dd067108c500fb64ab", "message": "fix: Allow multi-line errors underscoring GH-486\nRename Position into Locality and change its structure to allow using LSP4J positions directly in the language engine.", "committedDate": "2020-08-31T12:34:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA0ODAxMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/493#discussion_r481048011", "bodyText": "What about using something like this one?\n    return source.entrySet().stream().collect(toMap(Map.Entry::getKey, it -> new ArrayList<>(it.getValue())));", "author": "grianbrcom", "createdAt": "2020-09-01T10:48:49Z", "path": "server/src/main/java/com/ca/lsp/cobol/service/delegates/validations/CobolLanguageEngineFacade.java", "diffHunk": "@@ -145,27 +141,11 @@ private static DiagnosticSeverity checkSeverity(ErrorSeverity severity) {\n     return DiagnosticSeverity.forValue(severity.ordinal() + 1);\n   }\n \n-  private static Range convertRange(Position position) {\n-    int positionLine = position.getLine() - ERR_POS_INDEX;\n-    int cPosInLn = position.getCharPositionInLine();\n-\n-    return new Range(\n-        new org.eclipse.lsp4j.Position(positionLine, cPosInLn),\n-        new org.eclipse.lsp4j.Position(\n-            positionLine,\n-            ((position.getStopPosition() - position.getStartPosition())\n-                + cPosInLn\n-                + ERR_POS_INDEX)));\n+  private Map<String, List<Location>> convertLocations(Map<String, Collection<Location>> source) {\n+    return source.entrySet().stream().collect(toMap(Map.Entry::getKey, this::repackCollection));", "originalCommit": "3498183ac7e6b7f602ac90dd067108c500fb64ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4MDU0NQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/493#discussion_r481080545", "bodyText": "yeah, makes sense", "author": "temanbrcom", "createdAt": "2020-09-01T11:54:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA0ODAxMQ=="}], "type": "inlineReview", "revised_code": {"commit": "b79bd82a1446e22316d3b4aec03e1cd9b1159a88", "chunk": "diff --git a/server/src/main/java/com/ca/lsp/cobol/service/delegates/validations/CobolLanguageEngineFacade.java b/server/src/main/java/com/ca/lsp/cobol/service/delegates/validations/CobolLanguageEngineFacade.java\nindex 1fd55222..e42b0212 100644\n--- a/server/src/main/java/com/ca/lsp/cobol/service/delegates/validations/CobolLanguageEngineFacade.java\n+++ b/server/src/main/java/com/ca/lsp/cobol/service/delegates/validations/CobolLanguageEngineFacade.java\n\n@@ -142,10 +142,7 @@ public class CobolLanguageEngineFacade implements LanguageEngineFacade {\n   }\n \n   private Map<String, List<Location>> convertLocations(Map<String, Collection<Location>> source) {\n-    return source.entrySet().stream().collect(toMap(Map.Entry::getKey, this::repackCollection));\n-  }\n-\n-  private List<Location> repackCollection(Map.Entry<String, Collection<Location>> entry) {\n-    return new ArrayList<>(entry.getValue());\n+    return source.entrySet().stream()\n+        .collect(toMap(Map.Entry::getKey, it -> new ArrayList<>(it.getValue())));\n   }\n }\n"}}, {"oid": "b79bd82a1446e22316d3b4aec03e1cd9b1159a88", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b79bd82a1446e22316d3b4aec03e1cd9b1159a88", "message": "fix: Allow multi-line errors underscoring GH-486\nRename Position into Locality and change its structure to allow using LSP4J positions directly in the language engine.", "committedDate": "2020-09-01T11:57:21Z", "type": "commit"}, {"oid": "b79bd82a1446e22316d3b4aec03e1cd9b1159a88", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b79bd82a1446e22316d3b4aec03e1cd9b1159a88", "message": "fix: Allow multi-line errors underscoring GH-486\nRename Position into Locality and change its structure to allow using LSP4J positions directly in the language engine.", "committedDate": "2020-09-01T11:57:21Z", "type": "forcePushed"}]}