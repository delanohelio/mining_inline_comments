{"pr_number": 4452, "pr_title": "Add server command usage", "pr_createdAt": "2020-03-17T21:29:42Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4452", "timeline": [{"oid": "2209d51cdb90e434dcb453429c0dd940a66b71e3", "url": "https://github.com/ldtteam/minecolonies/commit/2209d51cdb90e434dcb453429c0dd940a66b71e3", "message": "Add server command usage\nFix citizen stuck in sick and not eating", "committedDate": "2020-03-17T21:27:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTUzMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4452#discussion_r394021531", "bodyText": "shouldn't we set the Guard_task_interval 100 instead?", "author": "Raycoms", "createdAt": "2020-03-17T23:07:41Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java", "diffHunk": "@@ -153,7 +153,7 @@ public AbstractEntityAIGuard(@NotNull final J job)\n         super.registerTargets(\n           new AITarget(DECIDE, this::decide, GUARD_TASK_INTERVAL),\n           new AITarget(GUARD_PATROL, this::shouldSleep, () -> GUARD_SLEEP, SHOULD_SLEEP_INTERVAL),\n-          new AITarget(GUARD_PATROL, this::decide, GUARD_TASK_INTERVAL),\n+          new AITarget(GUARD_PATROL, this::decide, 100),\n           new AITarget(GUARD_SLEEP, this::sleep, 1),", "originalCommit": "2209d51cdb90e434dcb453429c0dd940a66b71e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMjY5OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4452#discussion_r394022699", "bodyText": "ye think that should be fine for all tasks", "author": "someaddons", "createdAt": "2020-03-17T23:11:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTUzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMzUzOQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4452#discussion_r394023539", "bodyText": "oh not sure, didn't know the others had that interval as well. Because if we had 100, detection of enemies will be way too slow.", "author": "Raycoms", "createdAt": "2020-03-17T23:13:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAyMTUzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "269bdd8c1c95991dd4ed8f079751d2f5428d99c4", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java b/src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java\nindex 22f853387e..48c60de7f2 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java\n\n@@ -153,7 +153,7 @@ public abstract class AbstractEntityAIGuard<J extends AbstractJobGuard> extends\n         super.registerTargets(\n           new AITarget(DECIDE, this::decide, GUARD_TASK_INTERVAL),\n           new AITarget(GUARD_PATROL, this::shouldSleep, () -> GUARD_SLEEP, SHOULD_SLEEP_INTERVAL),\n-          new AITarget(GUARD_PATROL, this::decide, 100),\n+          new AITarget(GUARD_PATROL, this::decide, GUARD_TASK_INTERVAL),\n           new AITarget(GUARD_SLEEP, this::sleep, 1),\n           new AITarget(GUARD_SLEEP, this::sleepParticles, PARTICLE_INTERVAL),\n           new AITarget(GUARD_WAKE, this::wakeUpGuard, GUARD_TASK_INTERVAL),\n"}}, {"oid": "269bdd8c1c95991dd4ed8f079751d2f5428d99c4", "url": "https://github.com/ldtteam/minecolonies/commit/269bdd8c1c95991dd4ed8f079751d2f5428d99c4", "message": "guard task interval", "committedDate": "2020-03-17T23:12:14Z", "type": "commit"}, {"oid": "7ffb9cb5a0a63260e2432820da3b995e4e20e821", "url": "https://github.com/ldtteam/minecolonies/commit/7ffb9cb5a0a63260e2432820da3b995e4e20e821", "message": "adjust guard target search and pathing intervals", "committedDate": "2020-03-18T17:03:49Z", "type": "commit"}, {"oid": "60e5822f74b07560292a7b96a6b2fddbdc09ebea", "url": "https://github.com/ldtteam/minecolonies/commit/60e5822f74b07560292a7b96a6b2fddbdc09ebea", "message": "Fix walking lag", "committedDate": "2020-03-18T22:22:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MTcwNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4452#discussion_r394961705", "bodyText": "Why should citizen stop eating when they are sick?\nSick people consume food and resources from the colony.", "author": "OrionDevelopment", "createdAt": "2020-03-19T11:34:21Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/minimal/EntityAIEatTask.java", "diffHunk": "@@ -141,6 +142,11 @@ public boolean shouldExecute()\n             return true;\n         }\n \n+        if (citizen.getCitizenDiseaseHandler().isSick() && citizen.getCitizenSleepHandler().isAsleep())", "originalCommit": "60e5822f74b07560292a7b96a6b2fddbdc09ebea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2Njk0Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/4452#discussion_r394966943", "bodyText": "Indeed they should still consume resources, atm we have the eating AI below the sick AI so atm they arent eating at all. I've increased the eating AI priority so they eat again. This change is only to not eat during treating, as citizens are asleep and sick(happens when the hospital treats them). Normally the sleep AI has prio over the eat AI, just not in this case where the sickness AI makes them \"sleep\" in the hospital bed during treatment.", "author": "someaddons", "createdAt": "2020-03-19T11:44:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MTcwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2OTE0MA==", "url": "https://github.com/ldtteam/minecolonies/pull/4452#discussion_r394969140", "bodyText": "Ah okey.\nThat sounds somewhat logical.\nApproced then.", "author": "OrionDevelopment", "createdAt": "2020-03-19T11:48:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MTcwNQ=="}], "type": "inlineReview", "revised_code": null}]}