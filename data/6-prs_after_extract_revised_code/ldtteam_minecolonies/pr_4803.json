{"pr_number": 4803, "pr_title": "Fix Builder trying to break water", "pr_createdAt": "2020-04-29T15:37:10Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4803", "timeline": [{"oid": "c41e30e645ca2de210b3620e79092da27b9b5868", "url": "https://github.com/ldtteam/minecolonies/commit/c41e30e645ca2de210b3620e79092da27b9b5868", "message": "Start implementing improved water handling for the builder", "committedDate": "2020-04-29T15:34:07Z", "type": "commit"}, {"oid": "f62c2579be14b0758791396a6bf5486d3f188493", "url": "https://github.com/ldtteam/minecolonies/commit/f62c2579be14b0758791396a6bf5486d3f188493", "message": "Add some waterlogging support", "committedDate": "2020-04-29T16:27:01Z", "type": "commit"}, {"oid": "13cea3195d884b18ca10429fe121a77c1d7ed82a", "url": "https://github.com/ldtteam/minecolonies/commit/13cea3195d884b18ca10429fe121a77c1d7ed82a", "message": "Move fluid detection to its own build phase\n\nalso change fluid removal", "committedDate": "2020-04-29T17:13:35Z", "type": "commit"}, {"oid": "1d282a54c381c8313b8798d7dae2c9025cf7f3e2", "url": "https://github.com/ldtteam/minecolonies/commit/1d282a54c381c8313b8798d7dae2c9025cf7f3e2", "message": "Merge branch 'version/1.15' into fix/water", "committedDate": "2020-04-29T17:15:10Z", "type": "commit"}, {"oid": "01d366a26a4f0da52a53ac0e171550f823967e78", "url": "https://github.com/ldtteam/minecolonies/commit/01d366a26a4f0da52a53ac0e171550f823967e78", "message": "Fix a stupid mistake", "committedDate": "2020-04-29T17:37:39Z", "type": "commit"}, {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "url": "https://github.com/ldtteam/minecolonies/commit/3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "message": "Finish Waterlogged block handling", "committedDate": "2020-04-29T18:05:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417571737", "bodyText": "that needs to be properly formatted and needs javadoc, same thing for the next method.", "author": "Raycoms", "createdAt": "2020-04-29T19:52:52Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -960,6 +980,88 @@ protected boolean isThereAStructureToBuild()\n         return currentStructure != null;\n     }\n \n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+        worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition()))", "originalCommit": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MjcwNg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417572706", "bodyText": "Javadoc: yes, i missed that.\nformatting: what is wrong with the formatting? i tried to make it like everything else.", "author": "ToMe25", "createdAt": "2020-04-29T19:54:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NDkwMA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417574900", "bodyText": "the bracket is on the new line", "author": "Raycoms", "createdAt": "2020-04-29T19:58:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NTgxMA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417575810", "bodyText": "it was like that in clearStep so i kept it like that, or did you mean they should all get moved to a new line?", "author": "ToMe25", "createdAt": "2020-04-29T20:00:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3Njk3Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417576977", "bodyText": "all\n{\n}", "author": "Raycoms", "createdAt": "2020-04-29T20:02:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NzE2NA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417577164", "bodyText": "if that is in clear step then someone messed that one up (can you please put it on a new line for cleanStep too?)", "author": "Raycoms", "createdAt": "2020-04-29T20:02:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NzUxMg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417577512", "bodyText": "ok", "author": "ToMe25", "createdAt": "2020-04-29T20:03:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3OTE3Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417579177", "bodyText": "i hope i didn't miss any {", "author": "ToMe25", "createdAt": "2020-04-29T20:06:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4NDcyMg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417584722", "bodyText": "awesome", "author": "Raycoms", "createdAt": "2020-04-29T20:16:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw=="}], "type": "inlineReview", "revised_code": {"commit": "46e7a6ec9eadbaaf27c307ae115d20e4253faaad", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\nindex 74bb1926c..0504c3335 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n\n@@ -980,59 +985,87 @@ public abstract class AbstractEntityAIStructure<J extends AbstractJobStructure>\n         return currentStructure != null;\n     }\n \n+    /**\n+     * Works on detecting fluid blocks that should get removed.\n+     * @param currentBlock the block that is currently being worked on.\n+     * @return the next step once done.\n+     */\n     private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n         worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n-        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition()))\n-        {\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {\n             return false;\n         }\n \n-        if (currentBlock.block instanceof FlowingFluidBlock || currentBlock.worldBlock instanceof FlowingFluidBlock) {\n-            if(!(currentBlock.block instanceof FlowingFluidBlock)) {\n+        if (currentBlock.block instanceof FlowingFluidBlock || currentBlock.worldBlock instanceof FlowingFluidBlock)\n+        {\n+            if(!(currentBlock.block instanceof FlowingFluidBlock))\n+            {\n                 List<BlockPos> layer;\n-                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n-                } else {\n+                }\n+                else\n+                {\n                     layer = new ArrayList<>();\n                 }\n                 layer.add(currentBlock.blockPosition);\n-                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n                 }\n-            } else if(currentBlock.worldBlock instanceof FlowingFluidBlock && currentBlock.worldBlock != currentBlock.block) {\n+            }\n+            else if(currentBlock.worldBlock instanceof FlowingFluidBlock && currentBlock.worldBlock != currentBlock.block)\n+            {\n                 List<BlockPos> layer;\n-                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n-                } else {\n+                }\n+                else\n+                {\n                     layer = new ArrayList<>();\n                 }\n                 layer.add(currentBlock.blockPosition);\n-                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n                 }\n             }\n         }\n-        else if (!currentBlock.metadata.getFluidState().isEmpty() || !currentBlock.worldMetadata.getFluidState().isEmpty()) {\n-            if(currentBlock.metadata.getFluidState().isEmpty()) {\n+        else if (!currentBlock.metadata.getFluidState().isEmpty() || !currentBlock.worldMetadata.getFluidState().isEmpty())\n+        {\n+            if(currentBlock.metadata.getFluidState().isEmpty())\n+            {\n                 List<BlockPos> layer;\n-                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n-                } else {\n+                }\n+                else\n+                {\n                     layer = new ArrayList<>();\n                 }\n                 layer.add(currentBlock.blockPosition);\n-                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n                 }\n-            } else if(!currentBlock.worldMetadata.getFluidState().isEmpty() && currentBlock.worldMetadata.getFluidState().getFluid() != currentBlock.metadata.getFluidState().getFluid()) {\n+            }\n+            else if(!currentBlock.worldMetadata.getFluidState().isEmpty() && currentBlock.worldMetadata.getFluidState().getFluid() != currentBlock.metadata.getFluidState().getFluid())\n+            {\n                 List<BlockPos> layer;\n-                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n-                } else {\n+                }\n+                else\n+                {\n                     layer = new ArrayList<>();\n                 }\n                 layer.add(currentBlock.blockPosition);\n-                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY())) {\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n                     fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n                 }\n             }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417571965", "bodyText": "this needs to be stored in the building class and serialized/deserialized so that it works on restart midway", "author": "Raycoms", "createdAt": "2020-04-29T19:53:15Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -130,6 +130,11 @@\n      */\n     private int rotation = 0;\n \n+    /**\n+     * all the fluids to be removed later.\n+     */\n+    private Map<Integer, List<BlockPos>> fluidsToRemove = new TreeMap<>();", "originalCommit": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NjA3MA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417576070", "bodyText": "OK i will do that.", "author": "ToMe25", "createdAt": "2020-04-29T20:00:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4Mjk1Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417582956", "bodyText": "uhm, in what building class?", "author": "ToMe25", "createdAt": "2020-04-29T20:13:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4NDU2Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417584567", "bodyText": "AbstractBuildingStructureBuilder", "author": "Raycoms", "createdAt": "2020-04-29T20:16:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU4NDc1NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417584755", "bodyText": "ok thanks", "author": "ToMe25", "createdAt": "2020-04-29T20:16:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwOTA3Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417609077", "bodyText": "I have tried implementing this, but as i can due to the game crashing when i try to load a world with a working builder(in the dev env only) i can't test it, so i just hope it works.", "author": "ToMe25", "createdAt": "2020-04-29T21:01:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMjI0Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417612242", "bodyText": "game crashing on startup of the world?", "author": "Raycoms", "createdAt": "2020-04-29T21:07:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMjM2NA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417612364", "bodyText": "In dev mode it should crash less not more =D", "author": "Raycoms", "createdAt": "2020-04-29T21:07:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMzQ0Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417613442", "bodyText": "yes, when i load a world in the dev env and there is a builder in it the game crashes.\ni did post that on discord some time in the past(with log), i just didn't make an issue for it because its only in the dev env.", "author": "ToMe25", "createdAt": "2020-04-29T21:09:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxNjIyMg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417616222", "bodyText": "can you send this to me (via pm)?", "author": "Raycoms", "createdAt": "2020-04-29T21:14:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxNjU1OA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417616558", "bodyText": "yes.", "author": "ToMe25", "createdAt": "2020-04-29T21:15:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg0ODMyNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417848325", "bodyText": "This should work now...", "author": "ToMe25", "createdAt": "2020-04-30T08:38:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\nindex 74bb1926c..e694d06e4 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n\n@@ -130,11 +131,6 @@ public abstract class AbstractEntityAIStructure<J extends AbstractJobStructure>\n      */\n     private int rotation = 0;\n \n-    /**\n-     * all the fluids to be removed later.\n-     */\n-    private Map<Integer, List<BlockPos>> fluidsToRemove = new TreeMap<>();\n-\n     /**\n      * Creates this ai base class and set's up important things.\n      * <p>\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MjM1MQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417572351", "bodyText": "I think we only need fluid detect, fluid remove is independent of block progress. (It's basically while list is not empty, return same state).", "author": "Raycoms", "createdAt": "2020-04-29T19:53:55Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/util/StructureIterator.java", "diffHunk": "@@ -226,11 +226,18 @@ public Result advanceBlock(final AbstractEntityAIStructure abstractEntityAIStruc\n             case CLEAR:\n                 return advanceBlocks(this.theStructure::decrementBlock,\n                   structureBlock -> structureBlock.doesStructureBlockEqualWorldBlock()\n-                                      || structureBlock.worldBlock == Blocks.AIR);\n+                                      || structureBlock.worldBlock == Blocks.AIR\n+                                      || structureBlock.worldBlock instanceof FlowingFluidBlock);\n             case BUILD:\n                 return advanceBlocks(this.theStructure::incrementBlock, structureBlock -> doesStructureBlockEqualWorldBlock(structureBlock, abstractEntityAIStructure)\n                                                                                          || structureBlock.block == Blocks.AIR\n                                                                                          || !structureBlock.metadata.getMaterial().isSolid());\n+            case FLUID_DETECT:\n+            case FLUID_REMOVE:", "originalCommit": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NDQwMw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417574403", "bodyText": "I didn't know the step would work without this, so i left it there, i will remove it then.", "author": "ToMe25", "createdAt": "2020-04-29T19:57:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MjM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3NTkwNg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417575906", "bodyText": "you make it a normal state (like the completion state) with the if (list.hasElements ) return getState(). else return Completion (last state)", "author": "Raycoms", "createdAt": "2020-04-29T20:00:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MjM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYwODQ4OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417608489", "bodyText": "I did this.", "author": "ToMe25", "createdAt": "2020-04-29T21:00:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MjM1MQ=="}], "type": "inlineReview", "revised_code": {"commit": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/util/StructureIterator.java b/src/main/java/com/minecolonies/coremod/entity/ai/util/StructureIterator.java\nindex 03864f0be..a98a29cab 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/util/StructureIterator.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/util/StructureIterator.java\n\n@@ -233,7 +233,6 @@ public class StructureIterator\n                                                                                          || structureBlock.block == Blocks.AIR\n                                                                                          || !structureBlock.metadata.getMaterial().isSolid());\n             case FLUID_DETECT:\n-            case FLUID_REMOVE:\n                 return advanceBlocks(this.theStructure::decrementBlock, structureBlock -> (!(structureBlock.worldBlock instanceof FlowingFluidBlock)\n                                                                                          || (structureBlock.block instanceof FlowingFluidBlock && structureBlock.worldBlock == structureBlock.block))\n                                                                                          && (structureBlock.worldMetadata.getFluidState().isEmpty() || (!structureBlock.metadata.getFluidState().isEmpty() \n"}}, {"oid": "46e7a6ec9eadbaaf27c307ae115d20e4253faaad", "url": "https://github.com/ldtteam/minecolonies/commit/46e7a6ec9eadbaaf27c307ae115d20e4253faaad", "message": "Javadoc and formatting", "committedDate": "2020-04-29T20:05:32Z", "type": "commit"}, {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "url": "https://github.com/ldtteam/minecolonies/commit/dd034ba696cefc7930247a3d4c7d27fb111ee048", "message": "Some Fixes\n\nRemove Fluid_Detect build stage\nSerialize/Deserialize fluidsToRemove", "committedDate": "2020-04-29T20:59:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTA3Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417611072", "bodyText": "this should be a ordered list.", "author": "Raycoms", "createdAt": "2020-04-29T21:05:12Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -79,6 +97,11 @@\n      */\n     private int progressCounter = 0;\n \n+    /**\n+     * all the fluids to be removed in fluids_remove.\n+     */\n+    private Map<Integer, List<BlockPos>> fluidsToRemove = new TreeMap<>();", "originalCommit": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMjQ2OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417612469", "bodyText": "earlier you told me to make it an ordered map, however i forgot that and made it a tree map.\nwhat should i make it, ordered map, or list?", "author": "ToMe25", "createdAt": "2020-04-29T21:07:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxNTI4MA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417615280", "bodyText": "what type of map/list should this be?\njava has neither a OrderedMap nor a OrderedList.", "author": "ToMe25", "createdAt": "2020-04-29T21:13:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxNjQzMA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417616430", "bodyText": "LinkedHashMap", "author": "Raycoms", "createdAt": "2020-04-29T21:15:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxOTQxOA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417619418", "bodyText": "done.", "author": "ToMe25", "createdAt": "2020-04-29T21:21:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTA3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "0c74fa18cf3f71449ce69ab277d0fd33cf67d444", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java b/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java\nindex 6f279c2ec..7d37d9995 100644\n--- a/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java\n+++ b/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java\n\n@@ -100,7 +100,7 @@ public abstract class AbstractBuildingStructureBuilder extends AbstractBuildingW\n     /**\n      * all the fluids to be removed in fluids_remove.\n      */\n-    private Map<Integer, List<BlockPos>> fluidsToRemove = new TreeMap<>();\n+    private Map<Integer, List<BlockPos>> fluidsToRemove = new LinkedHashMap<>();\n \n     /**\n      * Public constructor of the building, creates an object of the building.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTI3Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417611277", "bodyText": "bracket", "author": "Raycoms", "createdAt": "2020-04-29T21:05:38Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -408,4 +458,12 @@ public boolean requiresCompleteRequestFulfillment()\n     {\n         return false;\n     }\n+\n+    /**\n+     * Getter for the blocks to be removed in fluids_remove.\n+     * @return the blocks to be removed in fluids_remove.\n+     */\n+    public Map<Integer, List<BlockPos>> getFluidsToRemove() {", "originalCommit": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java b/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java\nindex 6f279c2ec..7ce92a4c9 100644\n--- a/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java\n+++ b/src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java\n\n@@ -463,7 +463,8 @@ public abstract class AbstractBuildingStructureBuilder extends AbstractBuildingW\n      * Getter for the blocks to be removed in fluids_remove.\n      * @return the blocks to be removed in fluids_remove.\n      */\n-    public Map<Integer, List<BlockPos>> getFluidsToRemove() {\n+    public Map<Integer, List<BlockPos>> getFluidsToRemove()\n+    {\n         return fluidsToRemove;\n     }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTkyMw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417611923", "bodyText": "bracket here and of method name", "author": "Raycoms", "createdAt": "2020-04-29T21:06:49Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -960,6 +977,126 @@ protected boolean isThereAStructureToBuild()\n         return currentStructure != null;\n     }\n \n+    /**\n+     * Works on detecting fluid blocks that should get removed.\n+     * @param currentBlock the block that is currently being worked on.\n+     * @return the next step once done.\n+     */\n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+        worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {", "originalCommit": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\nindex e694d06e4..6ccf841c0 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n\n@@ -982,9 +982,11 @@ public abstract class AbstractEntityAIStructure<J extends AbstractJobStructure>\n      * @param currentBlock the block that is currently being worked on.\n      * @return the next step once done.\n      */\n-    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock)\n+    {\n         worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n-        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition()))\n+        {\n             return false;\n         }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMjAwNA==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417612004", "bodyText": "bracket", "author": "Raycoms", "createdAt": "2020-04-29T21:06:57Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -960,6 +977,126 @@ protected boolean isThereAStructureToBuild()\n         return currentStructure != null;\n     }\n \n+    /**\n+     * Works on detecting fluid blocks that should get removed.\n+     * @param currentBlock the block that is currently being worked on.\n+     * @return the next step once done.\n+     */\n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+        worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {\n+            return false;\n+        }\n+\n+        final Map<Integer,List<BlockPos>> fluidsToRemove = getOwnBuilding(AbstractBuildingStructureBuilder.class).getFluidsToRemove();\n+        if (currentBlock.block instanceof FlowingFluidBlock || currentBlock.worldBlock instanceof FlowingFluidBlock)\n+        {\n+            if(!(currentBlock.block instanceof FlowingFluidBlock))\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+            else if(currentBlock.worldBlock instanceof FlowingFluidBlock && currentBlock.worldBlock != currentBlock.block)\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+        }\n+        else if (!currentBlock.metadata.getFluidState().isEmpty() || !currentBlock.worldMetadata.getFluidState().isEmpty())\n+        {\n+            if(currentBlock.metadata.getFluidState().isEmpty())\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+            else if(!currentBlock.worldMetadata.getFluidState().isEmpty() && currentBlock.worldMetadata.getFluidState().getFluid() != currentBlock.metadata.getFluidState().getFluid())\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+        }\n+        return true;\n+    }\n+\n+    /**\n+     * Works on removing the fluid blocks that should get removed.\n+     * @param currentBlock\n+     * @return the next step once done.\n+     */\n+    private IAIState fluidRemoveStep() {", "originalCommit": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\nindex e694d06e4..6ccf841c0 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n\n@@ -982,9 +982,11 @@ public abstract class AbstractEntityAIStructure<J extends AbstractJobStructure>\n      * @param currentBlock the block that is currently being worked on.\n      * @return the next step once done.\n      */\n-    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock)\n+    {\n         worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n-        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition()))\n+        {\n             return false;\n         }\n \n"}}, {"oid": "eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "url": "https://github.com/ldtteam/minecolonies/commit/eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "message": "brackets", "committedDate": "2020-04-29T21:14:00Z", "type": "commit"}, {"oid": "0c74fa18cf3f71449ce69ab277d0fd33cf67d444", "url": "https://github.com/ldtteam/minecolonies/commit/0c74fa18cf3f71449ce69ab277d0fd33cf67d444", "message": "Make fluidsToRemove a LinkedHashMap", "committedDate": "2020-04-29T21:20:51Z", "type": "commit"}, {"oid": "5220e658c6220f417b01d6d90212db6d9a84c242", "url": "https://github.com/ldtteam/minecolonies/commit/5220e658c6220f417b01d6d90212db6d9a84c242", "message": "Remove unused import", "committedDate": "2020-04-30T07:30:24Z", "type": "commit"}, {"oid": "e58d4d6f9226e7a3b1318060d28782c6bf26e68c", "url": "https://github.com/ldtteam/minecolonies/commit/e58d4d6f9226e7a3b1318060d28782c6bf26e68c", "message": "remove water slower for testing purposes only", "committedDate": "2020-04-30T08:39:45Z", "type": "commit"}, {"oid": "e0c8abaffe0c5bd11684cac73975653c75d8c5c9", "url": "https://github.com/ldtteam/minecolonies/commit/e0c8abaffe0c5bd11684cac73975653c75d8c5c9", "message": "set the fluid removal delay back to one tick", "committedDate": "2020-04-30T09:55:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg5NzAwNw==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417897007", "bodyText": "That's the wrong AI state you reset it =D", "author": "Raycoms", "createdAt": "2020-04-30T10:01:47Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -158,7 +158,7 @@ protected AbstractEntityAIStructure(@NotNull final J job)\n           /*\n            * Check if we have to build something.\n            */\n-          new AITarget(IDLE, this::isThereAStructureToBuild, () -> START_BUILDING, 100),\n+          new AITarget(IDLE, this::isThereAStructureToBuild, () -> START_BUILDING, 1),", "originalCommit": "e0c8abaffe0c5bd11684cac73975653c75d8c5c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg5NzgxOQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417897819", "bodyText": "I wonder why tho, i just pressed ctrl+z to undo the last change.", "author": "ToMe25", "createdAt": "2020-04-30T10:03:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg5NzAwNw=="}], "type": "inlineReview", "revised_code": {"commit": "28e393814f5dee1c979163165cfc809c54b61532", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\nindex ee4bd8a12..6ccf841c0 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java\n\n@@ -158,7 +158,7 @@ public abstract class AbstractEntityAIStructure<J extends AbstractJobStructure>\n           /*\n            * Check if we have to build something.\n            */\n-          new AITarget(IDLE, this::isThereAStructureToBuild, () -> START_BUILDING, 1),\n+          new AITarget(IDLE, this::isThereAStructureToBuild, () -> START_BUILDING, 100),\n           /*\n            * Clean up area completely.\n            */\n"}}, {"oid": "28e393814f5dee1c979163165cfc809c54b61532", "url": "https://github.com/ldtteam/minecolonies/commit/28e393814f5dee1c979163165cfc809c54b61532", "message": "fix wrong AIState being faster", "committedDate": "2020-04-30T10:02:50Z", "type": "commit"}, {"oid": "893dde5a6bde320be56cd3176c23e20447dcafc7", "url": "https://github.com/ldtteam/minecolonies/commit/893dde5a6bde320be56cd3176c23e20447dcafc7", "message": "Merge branch 'version/1.15' into fix/water", "committedDate": "2020-04-30T10:08:53Z", "type": "commit"}, {"oid": "dbcded5d9d3a05e891063862a84f00d603ae5a53", "url": "https://github.com/ldtteam/minecolonies/commit/dbcded5d9d3a05e891063862a84f00d603ae5a53", "message": "Merge branch 'version/1.15' into fix/water", "committedDate": "2020-04-30T11:10:26Z", "type": "commit"}, {"oid": "eb339514a7ce882b0bc14bb18c5e76cbe1944732", "url": "https://github.com/ldtteam/minecolonies/commit/eb339514a7ce882b0bc14bb18c5e76cbe1944732", "message": "Merge branch 'version/1.15' into fix/water", "committedDate": "2020-04-30T11:14:38Z", "type": "commit"}, {"oid": "9b0bf115cee3aabea677789adbf7b398e2407fc3", "url": "https://github.com/ldtteam/minecolonies/commit/9b0bf115cee3aabea677789adbf7b398e2407fc3", "message": "small changed\n\nMove Spawn build phase to be executed last\nMove NBT Tag names to NbtTagConstants", "committedDate": "2020-04-30T11:51:19Z", "type": "commit"}, {"oid": "f1d05601f3a97e9ce21b38f35d0f5f815ee70dd3", "url": "https://github.com/ldtteam/minecolonies/commit/f1d05601f3a97e9ce21b38f35d0f5f815ee70dd3", "message": "Make builder remove non-source blocks too", "committedDate": "2020-04-30T12:07:55Z", "type": "commit"}, {"oid": "2a9fecfc27031c495b5d8a0fb405ca4cb7f4b57b", "url": "https://github.com/ldtteam/minecolonies/commit/2a9fecfc27031c495b5d8a0fb405ca4cb7f4b57b", "message": "Merge branch 'version/1.15' into fix/water", "committedDate": "2020-04-30T13:58:19Z", "type": "commit"}, {"oid": "b922d98e96795159319d561d3df78650d7fa2ac2", "url": "https://github.com/ldtteam/minecolonies/commit/b922d98e96795159319d561d3df78650d7fa2ac2", "message": "Fix AITarget nextStep order", "committedDate": "2020-04-30T16:30:27Z", "type": "commit"}, {"oid": "d81b42cd04b54853f19b97a53f8141ca6bfab8f2", "url": "https://github.com/ldtteam/minecolonies/commit/d81b42cd04b54853f19b97a53f8141ca6bfab8f2", "message": "Fix switchStage not getting called\n\nalso sort the AITarget constructors", "committedDate": "2020-04-30T17:50:00Z", "type": "commit"}, {"oid": "d2eeda1afac971658e0cdc18bc8098cae98ed700", "url": "https://github.com/ldtteam/minecolonies/commit/d2eeda1afac971658e0cdc18bc8098cae98ed700", "message": "Fix workers taking very long to finish remove stage", "committedDate": "2020-04-30T20:49:26Z", "type": "commit"}, {"oid": "bcd82ee0f9f67942a764ee3007af7d434c6614c6", "url": "https://github.com/ldtteam/minecolonies/commit/bcd82ee0f9f67942a764ee3007af7d434c6614c6", "message": "Merge branch 'version/1.15' into fix/water", "committedDate": "2020-05-01T08:25:16Z", "type": "commit"}]}