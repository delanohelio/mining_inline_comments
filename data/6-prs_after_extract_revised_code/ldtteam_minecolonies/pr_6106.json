{"pr_number": 6106, "pr_title": "Scroll & clipboard improvements", "pr_createdAt": "2020-11-18T02:58:43Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/6106", "timeline": [{"oid": "8b785ad949d58a9bfadc8af0cc350a7ad70c782f", "url": "https://github.com/ldtteam/minecolonies/commit/8b785ad949d58a9bfadc8af0cc350a7ad70c782f", "message": "Make scroll more verbose", "committedDate": "2020-11-15T05:10:40Z", "type": "commit"}, {"oid": "0a6695aef9b01a8c9ee696e091e563114b0136bc", "url": "https://github.com/ldtteam/minecolonies/commit/0a6695aef9b01a8c9ee696e091e563114b0136bc", "message": "Tidy a tad", "committedDate": "2020-11-15T23:18:01Z", "type": "commit"}, {"oid": "acfb4ee1440e01ef543117957b8f41e2b43ca64c", "url": "https://github.com/ldtteam/minecolonies/commit/acfb4ee1440e01ef543117957b8f41e2b43ca64c", "message": "Clean up a little", "committedDate": "2020-11-18T00:49:02Z", "type": "commit"}, {"oid": "097091fe9ff326008a860a76451ade62447cf75d", "url": "https://github.com/ldtteam/minecolonies/commit/097091fe9ff326008a860a76451ade62447cf75d", "message": "Modify clipboard to match scroll and correct some spelling", "committedDate": "2020-11-18T01:14:12Z", "type": "commit"}, {"oid": "f930a4c1f770258ad83e69c5563f6825b2a360c4", "url": "https://github.com/ldtteam/minecolonies/commit/f930a4c1f770258ad83e69c5563f6825b2a360c4", "message": "Merge branch 'version/1.15' of https://github.com/ldtteam/minecolonies into feature/tooltips\n\n\u0001 Conflicts:\n\u0001\tsrc/api/java/com/minecolonies/api/util/constant/TranslationConstants.java", "committedDate": "2020-11-18T01:29:49Z", "type": "commit"}, {"oid": "7ced9c2b5d89b0394f4ddcafce610097b6612171", "url": "https://github.com/ldtteam/minecolonies/commit/7ced9c2b5d89b0394f4ddcafce610097b6612171", "message": "Formatting fixes", "committedDate": "2020-11-18T01:36:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTkyMDY4OA==", "url": "https://github.com/ldtteam/minecolonies/pull/6106#discussion_r525920688", "bodyText": "getOrCreateTag should exists for ItemStack iirc", "author": "Nightenom", "createdAt": "2020-11-18T09:05:39Z", "path": "src/main/java/com/minecolonies/coremod/items/ItemClipboard.java", "diffHunk": "@@ -87,47 +82,48 @@ else if (compound.keySet().contains(TAG_COLONY))\n     @Override\n     @NotNull\n     public ActionResult<ItemStack> onItemRightClick(\n-      final World worldIn,\n-      final PlayerEntity playerIn,\n-      final Hand hand)\n+            final World worldIn,\n+            final PlayerEntity playerIn,\n+            final Hand hand)\n     {\n-        final ItemStack cllipboard = playerIn.getHeldItem(hand);\n+        final ItemStack clipboard = playerIn.getHeldItem(hand);\n \n-        if (!worldIn.isRemote)\n-        {\n-            return new ActionResult<>(ActionResultType.SUCCESS, cllipboard);\n+        if (!worldIn.isRemote) {\n+            return new ActionResult<>(ActionResultType.SUCCESS, clipboard);\n         }\n \n-        final CompoundNBT compound = checkForCompound(cllipboard);\n+        openWindow(checkForCompound(clipboard), worldIn, playerIn);\n \n-        if (compound.keySet().contains(TAG_COLONY))\n-        {\n-            final IColonyView colonyView = IColonyManager.getInstance().getColonyView(compound.getInt(TAG_COLONY), worldIn.dimension.getType().getId());\n-            if (colonyView != null)\n-            {\n-                MineColonies.proxy.openClipBoardWindow(colonyView);\n-            }\n-        }\n-        else\n-        {\n-            LanguageHandler.sendPlayerMessage(playerIn, TranslationConstants.COM_MINECOLONIES_CLIPBOARD_NEED_COLONY);\n-        }\n-\n-        return new ActionResult<>(ActionResultType.SUCCESS, cllipboard);\n+        return new ActionResult<>(ActionResultType.SUCCESS, clipboard);\n     }\n \n     /**\n      * Check for the compound and return it. If not available create and return it.\n      *\n-     * @param scepter the scepter to check in for.\n-     * @return the compound of the scepter.\n+     * @param clipboard the clipboard to check for.\n+     * @return the compound of the clipboard.\n+     */\n+    private static CompoundNBT checkForCompound(final ItemStack clipboard)\n+    {\n+        if (!clipboard.hasTag()) clipboard.setTag(new CompoundNBT());\n+        return clipboard.getTag();", "originalCommit": "7ced9c2b5d89b0394f4ddcafce610097b6612171", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}