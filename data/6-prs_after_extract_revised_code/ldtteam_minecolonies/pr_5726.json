{"pr_number": 5726, "pr_title": "Adds more dynamic difficulty to raids", "pr_createdAt": "2020-09-06T21:34:48Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5726", "timeline": [{"oid": "1fec3dc6ae7e46d2a69e1fb9f1636dfeac3e2aa2", "url": "https://github.com/ldtteam/minecolonies/commit/1fec3dc6ae7e46d2a69e1fb9f1636dfeac3e2aa2", "message": "Raid balancing/dynamics", "committedDate": "2020-09-06T21:11:15Z", "type": "commit"}, {"oid": "7e07d10f193b986d1b6ac54765afde2ac76a4341", "url": "https://github.com/ldtteam/minecolonies/commit/7e07d10f193b986d1b6ac54765afde2ac76a4341", "message": "Merge remote-tracking branch 'remotes/origin/version/1.15' into RaiderBalancing3", "committedDate": "2020-09-06T21:11:33Z", "type": "commit"}, {"oid": "64fab392f8e117478948d81f408013af755b47b1", "url": "https://github.com/ldtteam/minecolonies/commit/64fab392f8e117478948d81f408013af755b47b1", "message": "Cleanup", "committedDate": "2020-09-06T21:36:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQyNTQ4Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5726#discussion_r484425486", "bodyText": "Why was this change made?", "author": "OrionDevelopment", "createdAt": "2020-09-07T13:15:00Z", "path": "src/main/java/com/minecolonies/coremod/entity/mobs/aitasks/EntityAIWalkToRandomHuts.java", "diffHunk": "@@ -167,6 +174,20 @@ public void tick()\n \n         if (this.isEntityAtSiteWithMove(targetBlock, 2))\n         {\n+            entity.swingArm(Hand.OFF_HAND);", "originalCommit": "64fab392f8e117478948d81f408013af755b47b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQzNjM0NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5726#discussion_r484436345", "bodyText": "ah forgot to add this part, it is for giving raiders a small chance to steal an item when reaching a building to give players some incentive to defend their buildings aswell and not only the citizens (e.g. the extreme of recall all at the townhall and block the exit during raids)", "author": "someaddons", "createdAt": "2020-09-07T13:36:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQyNTQ4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ2NzAyOQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5726#discussion_r484467029", "bodyText": "This is not going to work\nAnd will cause all kinds of issues.\nIt is a good idea in concept, but this will cause amazingly bad problems with the RS and citizens.\nI for see a bunch of citizens getting stuck because of this, aborting processing or any of a bunch of other types of problems.\nSo please revert this.", "author": "OrionDevelopment", "createdAt": "2020-09-07T14:32:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQyNTQ4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ3MTAyNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5726#discussion_r484471025", "bodyText": "I don't mind removing it, ray didnt like it much either.\nBut it should cause no problems for the RS at all, else any kind of outside intervention like players/hoppers etc will break it", "author": "someaddons", "createdAt": "2020-09-07T14:40:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQyNTQ4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ3OTQ1OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5726#discussion_r484479459", "bodyText": "yeah, in theory it shouldn't matter. If anything it will expose AI weaknesses more likely.", "author": "Raycoms", "createdAt": "2020-09-07T14:56:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQyNTQ4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ3OTY2Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/5726#discussion_r484479667", "bodyText": "But, I wouldn't add this yet, not without some other balancing (having raiders with items not fight back and try to walk back to camp or similar)", "author": "Raycoms", "createdAt": "2020-09-07T14:57:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQyNTQ4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "7e583fe89ebfcff9c5b7098065621d602395fd31", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/mobs/aitasks/EntityAIWalkToRandomHuts.java b/src/main/java/com/minecolonies/coremod/entity/mobs/aitasks/EntityAIWalkToRandomHuts.java\nindex efe927a7b..be6feaa5c 100755\n--- a/src/main/java/com/minecolonies/coremod/entity/mobs/aitasks/EntityAIWalkToRandomHuts.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/mobs/aitasks/EntityAIWalkToRandomHuts.java\n\n@@ -174,20 +167,6 @@ public class EntityAIWalkToRandomHuts extends Goal\n \n         if (this.isEntityAtSiteWithMove(targetBlock, 2))\n         {\n-            entity.swingArm(Hand.OFF_HAND);\n-            final IBuilding building = entity.getColony().getBuildingManager().getBuilding(targetBlock);\n-            if (building != null && building.getTileEntity() != null)\n-            {\n-                final TileEntity te = building.getTileEntity();\n-                if (te.getCapability(ITEM_HANDLER_CAPABILITY, null).isPresent())\n-                {\n-                    final IItemHandler handler = te.getCapability(ITEM_HANDLER_CAPABILITY, null).orElse(null);\n-                    if (ItemStackUtils.isEmpty(entity.getItemStackFromSlot(EquipmentSlotType.OFFHAND)))\n-                    {\n-                        entity.setItemStackToSlot(EquipmentSlotType.OFFHAND, handler.extractItem(entity.world.rand.nextInt(handler.getSlots()), 1, false));\n-                    }\n-                }\n-            }\n             targetBlock = getRandomBuilding();\n             resetStuckCounters();\n         }\n"}}, {"oid": "7e583fe89ebfcff9c5b7098065621d602395fd31", "url": "https://github.com/ldtteam/minecolonies/commit/7e583fe89ebfcff9c5b7098065621d602395fd31", "message": "remove stealing", "committedDate": "2020-09-07T15:01:53Z", "type": "commit"}, {"oid": "7a226d4d3e03513ea00fbbb563f3d4b172e472ef", "url": "https://github.com/ldtteam/minecolonies/commit/7a226d4d3e03513ea00fbbb563f3d4b172e472ef", "message": "Merge branch 'version/1.15' into raiddifficulty", "committedDate": "2020-09-07T15:12:59Z", "type": "commit"}]}