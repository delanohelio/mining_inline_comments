{"pr_number": 5111, "pr_title": "Removes plantantion flowers from florist", "pr_createdAt": "2020-05-30T12:31:17Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5111", "timeline": [{"oid": "f63c04379c95e0e214c841976c96d0a8bfbdbbf9", "url": "https://github.com/ldtteam/minecolonies/commit/f63c04379c95e0e214c841976c96d0a8bfbdbbf9", "message": "Removes plantantion flowers from florist\n\nSigned-off-by: Mark E. Schill <Mark.Schill@cmschill.net>", "committedDate": "2020-05-30T12:28:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0MzQ1NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r432843455", "bodyText": "that should probably be filtered in the copyOfPlantables creation", "author": "Raycoms", "createdAt": "2020-05-30T13:54:55Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingFlorist.java", "diffHunk": "@@ -221,7 +222,9 @@ public ItemStack getFlowerToGrow()\n             case 4:\n             case 5:\n             default:\n-                return IColonyManager.getInstance().getCompatibilityManager().getCopyOfPlantables();", "originalCommit": "f63c04379c95e0e214c841976c96d0a8bfbdbbf9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2MzgzNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r432863835", "bodyText": "I thought that was used in the compost section but you are correct", "author": "PowerSchill", "createdAt": "2020-05-30T15:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0MzQ1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "eb9336889945b3e74278dfc21dc549eaad0ad128", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingFlorist.java b/src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingFlorist.java\nindex aee81084c9..8745354a24 100644\n--- a/src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingFlorist.java\n+++ b/src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingFlorist.java\n\n@@ -222,9 +222,7 @@ public class BuildingFlorist extends AbstractFilterableListBuilding\n             case 4:\n             case 5:\n             default:\n-                return IColonyManager.getInstance().getCompatibilityManager().getCopyOfPlantables().stream()\n-                         .filter(storage -> storage.getItem() != Items.CACTUS && storage.getItem() != Items.BAMBOO && storage.getItem() != Items.SUGAR_CANE)\n-                         .collect(Collectors.toList());\n+                return IColonyManager.getInstance().getCompatibilityManager().getCopyOfPlantables();\n         }\n     }\n \n"}}, {"oid": "eb9336889945b3e74278dfc21dc549eaad0ad128", "url": "https://github.com/ldtteam/minecolonies/commit/eb9336889945b3e74278dfc21dc549eaad0ad128", "message": "Moves filter to CompatibilityManager\n\nSigned-off-by: Mark E. Schill <Mark.Schill@cmschill.net>", "committedDate": "2020-05-30T15:41:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTE4OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r432881189", "bodyText": "I mean, we should prevent them getting into this list in the first place.", "author": "Raycoms", "createdAt": "2020-05-30T19:36:49Z", "path": "src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java", "diffHunk": "@@ -355,7 +355,10 @@ public ItemStack getSaplingForLeaf(final BlockState block)\n     @Override\n     public List<ItemStorage> getCopyOfPlantables()\n     {\n-        return ImmutableList.copyOf(plantables);\n+        return ImmutableList.copyOf(plantables)\n+                 .stream()", "originalCommit": "eb9336889945b3e74278dfc21dc549eaad0ad128", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTIwNA==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r432881204", "bodyText": "No need to filter every call the list.", "author": "Raycoms", "createdAt": "2020-05-30T19:36:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTE4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4NzAzNw==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r432887037", "bodyText": "Ok, I see now. discoverablePlantables refers to compostable items but its beecause it w was copied from compostable not that it used them. I will fix.", "author": "PowerSchill", "createdAt": "2020-05-30T21:01:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MTE4OQ=="}], "type": "inlineReview", "revised_code": {"commit": "43a95d813c78e609e92115b09b857d5f11fa9056", "chunk": "diff --git a/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java b/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\nindex 9ddbca72d1..de06d5c64a 100644\n--- a/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\n+++ b/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\n\n@@ -355,10 +355,7 @@ public class CompatibilityManager implements ICompatibilityManager\n     @Override\n     public List<ItemStorage> getCopyOfPlantables()\n     {\n-        return ImmutableList.copyOf(plantables)\n-                 .stream()\n-                 .filter(storage -> storage.getItem() != Items.CACTUS && storage.getItem() != Items.BAMBOO && storage.getItem() != Items.SUGAR_CANE)\n-                 .collect(Collectors.toList());\n+        return ImmutableList.copyOf(plantables);\n     }\n \n     @Override\n"}}, {"oid": "43a95d813c78e609e92115b09b857d5f11fa9056", "url": "https://github.com/ldtteam/minecolonies/commit/43a95d813c78e609e92115b09b857d5f11fa9056", "message": "Moves filter to appropriate scope\n\nSigned-off-by: Mark E. Schill <Mark.Schill@cmschill.net>", "committedDate": "2020-05-31T13:41:40Z", "type": "commit"}, {"oid": "3532c47970967c468b33fd861483ee1669bb83c4", "url": "https://github.com/ldtteam/minecolonies/commit/3532c47970967c468b33fd861483ee1669bb83c4", "message": "Merge branch 'version/1.15' into feature/florist", "committedDate": "2020-05-31T21:55:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQyNTA3Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r433425073", "bodyText": "Can't we actually put this in the isPlantable check? Would be much more efficient.", "author": "Raycoms", "createdAt": "2020-06-01T18:54:07Z", "path": "src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java", "diffHunk": "@@ -565,15 +565,20 @@ private void discoverCompostableItems()\n     }\n \n     /**\n-     * Create complete list of compostable items.\n+     * Create complete list of plantable items.\n      */\n     private void discoverPlantables()\n     {\n         if (plantables.isEmpty())\n         {\n-            plantables.addAll(ImmutableList.copyOf(allBlocks.stream().filter(this::isPlantable).map(ItemStorage::new).collect(Collectors.toList())));", "originalCommit": "3532c47970967c468b33fd861483ee1669bb83c4", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2051637a60d99103a916484e73eea732963b956b", "chunk": "diff --git a/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java b/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\nindex de06d5c64a..492867c28b 100644\n--- a/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\n+++ b/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\n\n@@ -573,8 +574,6 @@ public class CompatibilityManager implements ICompatibilityManager\n         {\n             plantables.addAll(ImmutableList.copyOf(allBlocks.stream()\n                                                      .filter(this::isPlantable)\n-                                                     .filter(storage -> storage.getItem() != Items.CACTUS && storage.getItem() != Items.BAMBOO\n-                                                                          && storage.getItem() != Items.SUGAR_CANE)\n                                                      .map(ItemStorage::new)\n                                                      .collect(Collectors.toList())));\n         }\n"}}, {"oid": "3c5c756be9620431e5f3ece20ec710b3fa6aaacf", "url": "https://github.com/ldtteam/minecolonies/commit/3c5c756be9620431e5f3ece20ec710b3fa6aaacf", "message": "Merge branch 'version/1.15' into feature/florist", "committedDate": "2020-06-02T00:07:27Z", "type": "commit"}, {"oid": "2051637a60d99103a916484e73eea732963b956b", "url": "https://github.com/ldtteam/minecolonies/commit/2051637a60d99103a916484e73eea732963b956b", "message": "Relocates filtering for plantables\n\nSigned-off-by: Mark E. Schill <Mark.Schill@cmschill.net>", "committedDate": "2020-06-02T01:03:36Z", "type": "commit"}, {"oid": "486a999a7b43b47629a8f746eb84934ed7f9c5a8", "url": "https://github.com/ldtteam/minecolonies/commit/486a999a7b43b47629a8f746eb84934ed7f9c5a8", "message": "Merge branch 'version/1.15' into feature/florist", "committedDate": "2020-06-02T10:24:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk1OTU5NA==", "url": "https://github.com/ldtteam/minecolonies/pull/5111#discussion_r433959594", "bodyText": "Lol, I just checked into the config file and actually the reason it's here in the first place is because it's in the list of plantables in the default config. So just removing it there should solve this for the future already.", "author": "Raycoms", "createdAt": "2020-06-02T15:21:40Z", "path": "src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java", "diffHunk": "@@ -262,7 +262,8 @@ public boolean isCompost(final ItemStack itemStack)\n     @Override\n     public boolean isPlantable(final ItemStack itemStack)\n     {\n-        if (itemStack.isEmpty() || itemStack.getItem() == Items.WITHER_ROSE)", "originalCommit": "486a999a7b43b47629a8f746eb84934ed7f9c5a8", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "89296ea5ad90c0faa4141c952e77f8bd197117d9", "chunk": "diff --git a/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java b/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\nindex 492867c28b..c01117b6df 100644\n--- a/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\n+++ b/src/api/java/com/minecolonies/api/compatibility/CompatibilityManager.java\n\n@@ -262,8 +262,7 @@ public class CompatibilityManager implements ICompatibilityManager\n     @Override\n     public boolean isPlantable(final ItemStack itemStack)\n     {\n-        if (itemStack.isEmpty() || itemStack.getItem() == Items.WITHER_ROSE || itemStack.getItem() == Items.CACTUS || itemStack.getItem() == Items.BAMBOO\n-              || itemStack.getItem() == Items.SUGAR_CANE)\n+        if (itemStack.isEmpty() || itemStack.getItem() == Items.WITHER_ROSE)\n         {\n             return false;\n         }\n"}}, {"oid": "89296ea5ad90c0faa4141c952e77f8bd197117d9", "url": "https://github.com/ldtteam/minecolonies/commit/89296ea5ad90c0faa4141c952e77f8bd197117d9", "message": "Switches to configuration based control\n\nSigned-off-by: Mark E. Schill <Mark.Schill@cmschill.net>", "committedDate": "2020-06-05T13:49:32Z", "type": "commit"}, {"oid": "946ac367b582ce6512af907b73d037a37d97f5ef", "url": "https://github.com/ldtteam/minecolonies/commit/946ac367b582ce6512af907b73d037a37d97f5ef", "message": "Merge branch 'version/1.15' into feature/florist", "committedDate": "2020-06-05T13:50:05Z", "type": "commit"}]}