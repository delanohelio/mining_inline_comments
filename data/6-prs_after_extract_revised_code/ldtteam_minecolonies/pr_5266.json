{"pr_number": 5266, "pr_title": "Fixed bug that caused the banner to not work if it's renamed before its first use.", "pr_createdAt": "2020-06-21T21:27:38Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5266", "timeline": [{"oid": "90a9f95c3dece88eb9f36aef7c4196137f15c34b", "url": "https://github.com/ldtteam/minecolonies/commit/90a9f95c3dece88eb9f36aef7c4196137f15c34b", "message": "Fixed bug that caused the banner to not work if it's renamed directly after crafting", "committedDate": "2020-06-21T21:12:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQwODY3NA==", "url": "https://github.com/ldtteam/minecolonies/pull/5266#discussion_r443408674", "bodyText": "just use getOrCreateTag that does the same thing as you do here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (!banner.hasTag())\n          \n          \n            \n                    {\n          \n          \n            \n                        final CompoundNBT compound = new CompoundNBT();\n          \n          \n            \n                        banner.setTag(compound);\n          \n          \n            \n                    }\n          \n          \n            \n            \n          \n          \n            \n                    final CompoundNBT compound = banner.getTag();\n          \n          \n            \n                    final CompoundNBT compound = banner.getOrCreateTag();", "author": "Minecraftschurli", "createdAt": "2020-06-22T08:49:40Z", "path": "src/main/java/com/minecolonies/coremod/items/ItemBannerRallyGuards.java", "diffHunk": "@@ -435,14 +435,18 @@ public static CompoundNBT checkForCompound(final ItemStack banner)\n         if (!banner.hasTag())\n         {\n             final CompoundNBT compound = new CompoundNBT();\n+            banner.setTag(compound);\n+        }\n+\n+        final CompoundNBT compound = banner.getTag();", "originalCommit": "90a9f95c3dece88eb9f36aef7c4196137f15c34b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc5MjY4OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5266#discussion_r443792689", "bodyText": "You are 99% right. The reason why I did it this way is because it's done this way literally in all other items too.\nSearch in the project for getTag() and look at the Item-Classes. Then look for getOrCreateTag(). See what I mean?\nI must assume that the devs have a reason to have it this way. For example, hasTag() takes into consideration isEmpty, while getOrCreateTag() does not. Maybe there has been a bug related to that in the past.\nSo, when the devs confirm that they simply didn't know about getOrCreateTag(), we should change that everywhere. Otherwise, I prefer streamlined code to individually smart code. You don't want future devs to think \"Ah, the banner uses getOrCreate, the others use getTag(), there must be a reason for this.\"\n@Raycoms?", "author": "JiaYow", "createdAt": "2020-06-22T19:59:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQwODY3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxNzkzNg==", "url": "https://github.com/ldtteam/minecolonies/pull/5266#discussion_r444717936", "bodyText": "I believe we've been using hasTag() since forever for all the other items and getOrCreateTag() didn't exist yet.", "author": "Raycoms", "createdAt": "2020-06-24T08:06:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQwODY3NA=="}], "type": "inlineReview", "revised_code": null}]}