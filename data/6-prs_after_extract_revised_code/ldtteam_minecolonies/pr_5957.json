{"pr_number": 5957, "pr_title": "Fix #5880", "pr_createdAt": "2020-10-19T21:57:05Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5957", "timeline": [{"oid": "5f27327344ea09d9c1b1c354ec0ea8ad9ed7b373", "url": "https://github.com/ldtteam/minecolonies/commit/5f27327344ea09d9c1b1c354ec0ea8ad9ed7b373", "message": "Fix #5880", "committedDate": "2020-10-19T21:55:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA4NzM2OA==", "url": "https://github.com/ldtteam/minecolonies/pull/5957#discussion_r508087368", "bodyText": "We used to have it to avoid subrequests < 64 items. We removed the limitations in other places but not here which caused some weird bugs. @OrionDevelopment", "author": "Raycoms", "createdAt": "2020-10-19T21:59:24Z", "path": "src/api/java/com/minecolonies/api/util/CraftingUtils.java", "diffHunk": "@@ -55,23 +55,7 @@ public static int calculateMaxCraftingCount(@NotNull final ItemStack outputStack\n      */\n     public static int calculateMaxCraftingCount(@NotNull final int count, @NotNull final IRecipeStorage storage)\n     {\n-        //Calculate the initial crafting count from the request and the storage output.\n-        int craftingCount = (int) Math.ceil(Math.max(count, ItemStackUtils.getSize(storage.getPrimaryOutput())) / (double) ItemStackUtils.getSize(storage.getPrimaryOutput()));\n-\n-        //Now check if we excede an ingredients max stack size.\n-        for (final ItemStorage ingredientStorage : storage.getCleanedInput())\n-        {\n-            final ItemStack ingredient = ingredientStorage.getItemStack();\n-            //Calculate the input count for the ingredient.\n-            final int ingredientInputCount = ItemStackUtils.getSize(ingredient) * craftingCount;\n-            //Check if we are above the max stacksize.\n-            if (ingredientInputCount > ingredient.getMaxStackSize())\n-            {\n-                //Recalculate the crafting limit using the maxstacksize of the ingredient.\n-                craftingCount = Math.max(ingredient.getMaxStackSize(), ItemStackUtils.getSize(storage.getPrimaryOutput())) / ItemStackUtils.getSize(storage.getPrimaryOutput());\n-            }\n-        }\n-\n-        return craftingCount;\n+        //Calculate the crafting count from the request and the storage output.\n+        return (int) Math.ceil(Math.max(count, ItemStackUtils.getSize(storage.getPrimaryOutput())) / (double) ItemStackUtils.getSize(storage.getPrimaryOutput()));\n     }", "originalCommit": "5f27327344ea09d9c1b1c354ec0ea8ad9ed7b373", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "5db1aeae35ab6d864efaa61d1236563eda912553", "url": "https://github.com/ldtteam/minecolonies/commit/5db1aeae35ab6d864efaa61d1236563eda912553", "message": "Merge branch 'version/1.15' into fix/5880", "committedDate": "2020-10-20T05:55:55Z", "type": "commit"}]}