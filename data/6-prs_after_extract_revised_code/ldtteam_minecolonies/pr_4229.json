{"pr_number": 4229, "pr_title": "Fix citizen limit calculation v1.12", "pr_createdAt": "2020-01-11T22:41:01Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4229", "timeline": [{"oid": "6a839e6618fe41f76a3751adc01da4a95278efc6", "url": "https://github.com/ldtteam/minecolonies/commit/6a839e6618fe41f76a3751adc01da4a95278efc6", "message": "Fix citizen limit calculation.\nNow Calculates on building upgrade/destruction.\nRecalculates after colony load, instead of reading old values.\nRecruitment of additional guards over the citizen hut limit now works.\nLevel 0 guard-buildings no longer count towards the limit.\n\nFix itemrack hooks beeing overwritten on load, backported from 1.14.", "committedDate": "2020-01-11T22:37:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU0NTkyMg==", "url": "https://github.com/ldtteam/minecolonies/pull/4229#discussion_r365545922", "bodyText": "this above overwrote the hooks we setup for setStackInSlot on class load before", "author": "someaddons", "createdAt": "2020-01-11T22:43:36Z", "path": "src/api/java/com/minecolonies/api/tileentities/TileEntityRack.java", "diffHunk": "@@ -330,15 +330,7 @@ public void readFromNBT(final NBTTagCompound compound)\n             size = compound.getInteger(TAG_SIZE);\n             if (size > 0)\n             {\n-                inventory = new ItemStackHandler(DEFAULT_SIZE + size * SLOT_PER_LINE)\n-                {\n-                    @Override\n-                    protected void onContentsChanged(final int slot)\n-                    {\n-                        updateItemStorage();\n-                        super.onContentsChanged(slot);\n-                    }\n-                };", "originalCommit": "6a839e6618fe41f76a3751adc01da4a95278efc6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "95de3d8dc36c6c8140e3128f33e20a0f79054a92", "url": "https://github.com/ldtteam/minecolonies/commit/95de3d8dc36c6c8140e3128f33e20a0f79054a92", "message": "fix rack upgrade", "committedDate": "2020-01-11T22:52:50Z", "type": "commit"}, {"oid": "f0ae094f6eb6685b8daa4e48958e396c3fdf1728", "url": "https://github.com/ldtteam/minecolonies/commit/f0ae094f6eb6685b8daa4e48958e396c3fdf1728", "message": "update citizen limit upon all assigns/removes/building upgrade/destruction", "committedDate": "2020-01-13T18:00:49Z", "type": "commit"}, {"oid": "7af5868e9b1dfb4613b15e9c779d9a222035f8dc", "url": "https://github.com/ldtteam/minecolonies/commit/7af5868e9b1dfb4613b15e9c779d9a222035f8dc", "message": "fix TH UI issues", "committedDate": "2020-01-13T21:40:12Z", "type": "commit"}]}