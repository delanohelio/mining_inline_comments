{"pr_number": 5851, "pr_title": "Fix fuel check in smeltercrafter when furnace goes missing", "pr_createdAt": "2020-10-01T15:32:31Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5851", "timeline": [{"oid": "89f1544db64429f5d1c942b86a9314e611a5902b", "url": "https://github.com/ldtteam/minecolonies/commit/89f1544db64429f5d1c942b86a9314e611a5902b", "message": "fix fuel when furnace goes missing", "committedDate": "2020-10-01T14:46:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMzODUxNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5851#discussion_r498338515", "bodyText": "I wonder if this could cause a concurrent modification exception. Are we iterating over a copy?", "author": "Raycoms", "createdAt": "2020-10-01T15:35:25Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIRequestSmelter.java", "diffHunk": "@@ -257,6 +257,11 @@ private boolean isFuelNeeded()\n             if (WorldUtil.isBlockLoaded(world, pos))\n             {\n                 final TileEntity entity = world.getTileEntity(pos);\n+                if(!(entity instanceof FurnaceTileEntity))\n+                {\n+                    getOwnBuilding().removeFromFurnaces(pos);\n+                    continue;", "originalCommit": "89f1544db64429f5d1c942b86a9314e611a5902b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM0MTkxMg==", "url": "https://github.com/ldtteam/minecolonies/pull/5851#discussion_r498341912", "bodyText": "Just tested this scenario. I didn't get an exception.", "author": "Mekle001", "createdAt": "2020-10-01T15:40:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMzODUxNQ=="}], "type": "inlineReview", "revised_code": null}]}