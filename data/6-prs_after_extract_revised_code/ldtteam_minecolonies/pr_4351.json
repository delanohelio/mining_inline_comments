{"pr_number": 4351, "pr_title": "Fix/several", "pr_createdAt": "2020-02-21T18:08:14Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4351", "timeline": [{"oid": "5a74d25b7097ca02a896b1ff08eac4c49a178b6c", "url": "https://github.com/ldtteam/minecolonies/commit/5a74d25b7097ca02a896b1ff08eac4c49a178b6c", "message": "Handle decorations like structurize", "committedDate": "2020-02-21T16:43:41Z", "type": "commit"}, {"oid": "4655a92b0251e710f75d552d78fa6397f2f449e5", "url": "https://github.com/ldtteam/minecolonies/commit/4655a92b0251e710f75d552d78fa6397f2f449e5", "message": "catch issues with resource scroll", "committedDate": "2020-02-21T16:43:55Z", "type": "commit"}, {"oid": "c11d9d9babfd27ecaa7bc566765aff2621e5987b", "url": "https://github.com/ldtteam/minecolonies/commit/c11d9d9babfd27ecaa7bc566765aff2621e5987b", "message": "fix pathing issues", "committedDate": "2020-02-21T16:44:01Z", "type": "commit"}, {"oid": "29c7d32521a6591a90e7826f85e339eeb9d5bae2", "url": "https://github.com/ldtteam/minecolonies/commit/29c7d32521a6591a90e7826f85e339eeb9d5bae2", "message": "unregister event, fix #4350", "committedDate": "2020-02-21T18:01:53Z", "type": "commit"}, {"oid": "6c4ccead450dda7f83aa954dc64594daacebf255", "url": "https://github.com/ldtteam/minecolonies/commit/6c4ccead450dda7f83aa954dc64594daacebf255", "message": "bump forge version", "committedDate": "2020-02-21T18:02:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc0MTQwNA==", "url": "https://github.com/ldtteam/minecolonies/pull/4351#discussion_r382741404", "bodyText": "Message into chat why it was closed during opening\nSame for close() above", "author": "Nightenom", "createdAt": "2020-02-21T18:38:04Z", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowResourceList.java", "diffHunk": "@@ -114,6 +114,11 @@ public void onOpened()\n         pullResourcesFromHut();\n \n         final ScrollingList resourceList = findPaneOfTypeByID(LIST_RESOURCES, ScrollingList.class);\n+        if (resourceList == null)\n+        {\n+            close();", "originalCommit": "6c4ccead450dda7f83aa954dc64594daacebf255", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NjYxMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4351#discussion_r382986611", "bodyText": "Agreed!", "author": "OrionDevelopment", "createdAt": "2020-02-23T09:20:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc0MTQwNA=="}], "type": "inlineReview", "revised_code": {"commit": "209b564a711aae6dc249985c52c838030ac1c606", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/client/gui/WindowResourceList.java b/src/main/java/com/minecolonies/coremod/client/gui/WindowResourceList.java\nindex 2281015227..69128a8dfb 100644\n--- a/src/main/java/com/minecolonies/coremod/client/gui/WindowResourceList.java\n+++ b/src/main/java/com/minecolonies/coremod/client/gui/WindowResourceList.java\n\n@@ -116,6 +117,7 @@ public class WindowResourceList extends AbstractWindowSkeleton\n         final ScrollingList resourceList = findPaneOfTypeByID(LIST_RESOURCES, ScrollingList.class);\n         if (resourceList == null)\n         {\n+            Minecraft.getInstance().player.sendChatMessage(LanguageHandler.format(\"com.minecolonies.coremod.resourcescroll.null\"));\n             close();\n             return;\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc0MjAyMw==", "url": "https://github.com/ldtteam/minecolonies/pull/4351#discussion_r382742023", "bodyText": "At least comment for 1.3 constant", "author": "Nightenom", "createdAt": "2020-02-21T18:39:24Z", "path": "src/main/java/com/minecolonies/coremod/entity/pathfinding/AbstractPathJob.java", "diffHunk": "@@ -978,9 +979,23 @@ private int handleTargeNotPassable(@Nullable final Node parent, @NotNull final B\n         }\n \n         final BlockState below = world.getBlockState(parent.pos.down());\n-        final VoxelShape bb = below.getCollisionShape(world, pos.down());\n-        if (bb != null && bb.getEnd(Direction.Axis.Y) < 1)\n+        final VoxelShape bb = below.getCollisionShape(world, parent.pos.down());\n+        if (bb.getEnd(Direction.Axis.Y) < 1)\n         {\n+            double dif = bb.getEnd(Direction.Axis.Y);\n+            final double parentY = target.getCollisionShape(world, pos).getEnd(Direction.Axis.Y);\n+            dif = dif + 1 - parentY;\n+            if (dif < 1.3)\n+            {\n+                return pos.getY() + 1;\n+            }\n+            if (target.getBlock() instanceof StairsBlock\n+                  && dif - 0.5 < 1.3", "originalCommit": "6c4ccead450dda7f83aa954dc64594daacebf255", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ad178796c3aeabeaa72fe64db5caa6dab5f65ce", "chunk": "diff --git a/src/main/java/com/minecolonies/coremod/entity/pathfinding/AbstractPathJob.java b/src/main/java/com/minecolonies/coremod/entity/pathfinding/AbstractPathJob.java\nindex f30b6ed8f8..e4f94bded3 100644\n--- a/src/main/java/com/minecolonies/coremod/entity/pathfinding/AbstractPathJob.java\n+++ b/src/main/java/com/minecolonies/coremod/entity/pathfinding/AbstractPathJob.java\n\n@@ -985,12 +928,12 @@ public abstract class AbstractPathJob implements Callable<Path>\n             double dif = bb.getEnd(Direction.Axis.Y);\n             final double parentY = target.getCollisionShape(world, pos).getEnd(Direction.Axis.Y);\n             dif = dif + 1 - parentY;\n-            if (dif < 1.3)\n+            if (dif < MAX_JUMP_HEIGHT)\n             {\n                 return pos.getY() + 1;\n             }\n             if (target.getBlock() instanceof StairsBlock\n-                  && dif - 0.5 < 1.3\n+                  && dif - HALF_A_BLOCK < MAX_JUMP_HEIGHT\n                   && target.get(StairsBlock.HALF) == Half.BOTTOM\n                   && BlockPosUtil.getXZFacing(parent.pos, pos) == target.get(StairsBlock.FACING))\n             {\n"}}, {"oid": "6754057d7bccde69162f97dcd7ede8d69d70159e", "url": "https://github.com/ldtteam/minecolonies/commit/6754057d7bccde69162f97dcd7ede8d69d70159e", "message": "fix #4353", "committedDate": "2020-02-22T09:19:53Z", "type": "commit"}, {"oid": "b9d5e7c312857fe35759f0d03383e17b0040c6ca", "url": "https://github.com/ldtteam/minecolonies/commit/b9d5e7c312857fe35759f0d03383e17b0040c6ca", "message": "fix #4354", "committedDate": "2020-02-22T09:21:15Z", "type": "commit"}, {"oid": "804d35a0f74b57828aa35828fff261b9ad3ef62b", "url": "https://github.com/ldtteam/minecolonies/commit/804d35a0f74b57828aa35828fff261b9ad3ef62b", "message": "Fix hut facing direction", "committedDate": "2020-02-22T09:43:52Z", "type": "commit"}, {"oid": "e7c13d89f7789d5bff7e8f0c32ff481c2b0db108", "url": "https://github.com/ldtteam/minecolonies/commit/e7c13d89f7789d5bff7e8f0c32ff481c2b0db108", "message": "fix construction tape placement", "committedDate": "2020-02-22T09:44:07Z", "type": "commit"}, {"oid": "c6633bb856ae07b1260b362a5822af9e8ccb295b", "url": "https://github.com/ldtteam/minecolonies/commit/c6633bb856ae07b1260b362a5822af9e8ccb295b", "message": "Disable ambient occulsion and make shape smaller", "committedDate": "2020-02-22T12:17:45Z", "type": "commit"}, {"oid": "3779d8d971f46f641b04ceba3396a64b6b659e03", "url": "https://github.com/ldtteam/minecolonies/commit/3779d8d971f46f641b04ceba3396a64b6b659e03", "message": "fix rack placement", "committedDate": "2020-02-22T14:25:47Z", "type": "commit"}, {"oid": "c68b6b33223da545a2a53411af6f44344b28ef96", "url": "https://github.com/ldtteam/minecolonies/commit/c68b6b33223da545a2a53411af6f44344b28ef96", "message": "try", "committedDate": "2020-02-22T14:25:54Z", "type": "commit"}, {"oid": "17ffc7f020c08053c351a582eb683f6fb546d2b4", "url": "https://github.com/ldtteam/minecolonies/commit/17ffc7f020c08053c351a582eb683f6fb546d2b4", "message": "Revert \"try\"\n\nThis reverts commit c68b6b33223da545a2a53411af6f44344b28ef96.", "committedDate": "2020-02-22T14:25:58Z", "type": "commit"}, {"oid": "ca4423ac019df99f43e5d13f5442fbc95c3bb30c", "url": "https://github.com/ldtteam/minecolonies/commit/ca4423ac019df99f43e5d13f5442fbc95c3bb30c", "message": "rename", "committedDate": "2020-02-22T14:35:34Z", "type": "commit"}, {"oid": "3ad178796c3aeabeaa72fe64db5caa6dab5f65ce", "url": "https://github.com/ldtteam/minecolonies/commit/3ad178796c3aeabeaa72fe64db5caa6dab5f65ce", "message": "Move constants, up structurize", "committedDate": "2020-02-22T15:32:19Z", "type": "commit"}, {"oid": "727b6b148718ed4fa364b731299b2bf5a838cf4c", "url": "https://github.com/ldtteam/minecolonies/commit/727b6b148718ed4fa364b731299b2bf5a838cf4c", "message": "Fix scaffolding climbing", "committedDate": "2020-02-22T18:01:04Z", "type": "commit"}, {"oid": "5028fba2244772b6c87c7c058ff934a7c4aeb825", "url": "https://github.com/ldtteam/minecolonies/commit/5028fba2244772b6c87c7c058ff934a7c4aeb825", "message": "Correct handle scaffolding blocks up and down", "committedDate": "2020-02-22T18:19:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NjU3Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4351#discussion_r382986572", "bodyText": "?? Why where these swapped all of a sudden?", "author": "OrionDevelopment", "createdAt": "2020-02-23T09:19:46Z", "path": "src/main/java/com/minecolonies/coremod/blocks/BlockDecorationController.java", "diffHunk": "@@ -55,10 +55,10 @@\n     /**\n      * The bounding boxes.\n      */\n-    protected static final VoxelShape AABB_NORTH = VoxelShapes.create(0.4125D, 0.375D, 0.950D, 0.5875D, 0.625D, 1.0D);\n-    protected static final VoxelShape AABB_SOUTH = VoxelShapes.create(0.4125D, 0.375D, 0.0D, 0.5875D, 0.625D, 0.050D);\n-    protected static final VoxelShape AABB_WEST  = VoxelShapes.create(0.950D, 0.375D, 0.4125D, 1.0D, 0.625D, 0.5875D);\n-    protected static final VoxelShape AABB_EAST  = VoxelShapes.create(0.0D, 0.375D, 0.4125D, 0.050D, 0.625D, 0.5875D);\n+    protected static final VoxelShape AABB_SOUTH = VoxelShapes.create(0.4125D, 0.375D, 0.950D, 0.5875D, 0.625D, 1.0D);\n+    protected static final VoxelShape AABB_NORTH = VoxelShapes.create(0.4125D, 0.375D, 0.0D, 0.5875D, 0.625D, 0.050D);", "originalCommit": "5028fba2244772b6c87c7c058ff934a7c4aeb825", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk5MDY4Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/4351#discussion_r382990687", "bodyText": "Because they weren't matching the model.\nIn 1.15 the model rotated due to some placement differences.", "author": "Raycoms", "createdAt": "2020-02-23T10:18:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NjU3Mg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk4NjYxOA==", "url": "https://github.com/ldtteam/minecolonies/pull/4351#discussion_r382986618", "bodyText": "Good catch.", "author": "OrionDevelopment", "createdAt": "2020-02-23T09:20:35Z", "path": "src/main/java/com/minecolonies/coremod/colony/Colony.java", "diffHunk": "@@ -866,6 +866,10 @@ public void onWorldUnload(@NotNull final World w)\n             return;\n         }\n \n+        if (eventHandler != null)\n+        {\n+            MinecraftForge.EVENT_BUS.unregister(eventHandler);", "originalCommit": "5028fba2244772b6c87c7c058ff934a7c4aeb825", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "209b564a711aae6dc249985c52c838030ac1c606", "url": "https://github.com/ldtteam/minecolonies/commit/209b564a711aae6dc249985c52c838030ac1c606", "message": "Fix this", "committedDate": "2020-02-23T10:24:49Z", "type": "commit"}, {"oid": "2d84cd8997407f99369486d793d159e6d1a847cc", "url": "https://github.com/ldtteam/minecolonies/commit/2d84cd8997407f99369486d793d159e6d1a847cc", "message": "Merge branch 'version/1.15' into fix/several", "committedDate": "2020-02-23T10:38:08Z", "type": "commit"}]}