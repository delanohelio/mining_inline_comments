{"pr_number": 6019, "pr_title": "Small fixes", "pr_createdAt": "2020-11-01T18:34:25Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/6019", "timeline": [{"oid": "41277650488fd69e85fc64bda5a75f3ccae50a58", "url": "https://github.com/ldtteam/minecolonies/commit/41277650488fd69e85fc64bda5a75f3ccae50a58", "message": "Small fixes\n\nfix #6017 and #6016", "committedDate": "2020-11-01T18:33:42Z", "type": "commit"}, {"oid": "11943b85a5dffa0038561e6f321ec37ebb179a73", "url": "https://github.com/ldtteam/minecolonies/commit/11943b85a5dffa0038561e6f321ec37ebb179a73", "message": "remove not necessary", "committedDate": "2020-11-01T18:44:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NDQ4Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r515664487", "bodyText": "Why are our tags excluded here?", "author": "OrionDevelopment", "createdAt": "2020-11-01T19:55:34Z", "path": "src/api/java/com/minecolonies/api/tileentities/TileEntityRack.java", "diffHunk": "@@ -132,7 +133,7 @@ public boolean hasSimilarStack(@NotNull final ItemStack stack)\n         {\n             for (final ResourceLocation tag : stack.getItem().getTags())\n             {\n-                if (storage.getItemStack().getItem().getTags().contains(tag))", "originalCommit": "11943b85a5dffa0038561e6f321ec37ebb179a73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NTU3OA==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r515665578", "bodyText": "because we got some \"all including tags\" like \"exclusion lists for crafters\" where a lot of random items are matched together.", "author": "Raycoms", "createdAt": "2020-11-01T20:05:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NDQ4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NjI1Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r515666253", "bodyText": "Make that a config then. Cause there are a lot of tags which have that property potentially.", "author": "OrionDevelopment", "createdAt": "2020-11-01T20:11:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NDQ4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NjM5MA==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r515666390", "bodyText": "mod exclusion config?", "author": "Raycoms", "createdAt": "2020-11-01T20:13:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2NDQ4Nw=="}], "type": "inlineReview", "revised_code": {"commit": "d1a93d0050bb06caf9bd2e940a7e67e72ace00ea", "chunk": "diff --git a/src/api/java/com/minecolonies/api/tileentities/TileEntityRack.java b/src/api/java/com/minecolonies/api/tileentities/TileEntityRack.java\nindex 6ee676a433..c10a641e95 100755\n--- a/src/api/java/com/minecolonies/api/tileentities/TileEntityRack.java\n+++ b/src/api/java/com/minecolonies/api/tileentities/TileEntityRack.java\n\n@@ -133,7 +135,7 @@ public class TileEntityRack extends AbstractTileEntityRack\n         {\n             for (final ResourceLocation tag : stack.getItem().getTags())\n             {\n-                if (!tag.getNamespace().equals(MOD_ID) && storage.getItemStack().getItem().getTags().contains(tag))\n+                if (!MinecoloniesAPIProxy.getInstance().getConfig().getCommon().disabledModTags.get().contains(tag.getNamespace()) && storage.getItemStack().getItem().getTags().contains(tag))\n                 {\n                     return true;\n                 }\n"}}, {"oid": "6fd1e28d6772d7705fc9f77db98853781ffac3ce", "url": "https://github.com/ldtteam/minecolonies/commit/6fd1e28d6772d7705fc9f77db98853781ffac3ce", "message": "fix pickup for level 5 dman, fix exception in log", "committedDate": "2020-11-01T20:12:58Z", "type": "commit"}, {"oid": "d1a93d0050bb06caf9bd2e940a7e67e72ace00ea", "url": "https://github.com/ldtteam/minecolonies/commit/d1a93d0050bb06caf9bd2e940a7e67e72ace00ea", "message": "fulfill review", "committedDate": "2020-11-01T22:43:37Z", "type": "commit"}, {"oid": "d88c024a7d4ac71e6347721d0f8555e22dc9a4bb", "url": "https://github.com/ldtteam/minecolonies/commit/d88c024a7d4ac71e6347721d0f8555e22dc9a4bb", "message": "Rework Eating AI to statemachine type, fix it beeing stuck", "committedDate": "2020-11-02T00:07:49Z", "type": "commit"}, {"oid": "3ae6f3cf48baa8313b85637bbadfa643de3a0679", "url": "https://github.com/ldtteam/minecolonies/commit/3ae6f3cf48baa8313b85637bbadfa643de3a0679", "message": "Merge remote-tracking branch 'origin/several-fixes' into several-fixes", "committedDate": "2020-11-02T00:08:13Z", "type": "commit"}, {"oid": "badf1937874e1d3983db89ebcd66333c37e4c903", "url": "https://github.com/ldtteam/minecolonies/commit/badf1937874e1d3983db89ebcd66333c37e4c903", "message": "avoid actions with empty stacks.", "committedDate": "2020-11-02T13:43:33Z", "type": "commit"}, {"oid": "a82608b30d36eb4412e00559e07ec5f6613aaa6e", "url": "https://github.com/ldtteam/minecolonies/commit/a82608b30d36eb4412e00559e07ec5f6613aaa6e", "message": "Merge remote-tracking branch 'origin/several-fixes' into several-fixes", "committedDate": "2020-11-02T13:43:42Z", "type": "commit"}, {"oid": "4afaa492f5c3b3659953245373e6f796e4f3c209", "url": "https://github.com/ldtteam/minecolonies/commit/4afaa492f5c3b3659953245373e6f796e4f3c209", "message": "Add saturation based item transfers", "committedDate": "2020-11-02T14:06:07Z", "type": "commit"}, {"oid": "53ce108169c72f7a7c1bf5ff7d52ad9c07a10662", "url": "https://github.com/ldtteam/minecolonies/commit/53ce108169c72f7a7c1bf5ff7d52ad9c07a10662", "message": "Merge remote-tracking branch 'remotes/origin/several-fixes' into several-fixes", "committedDate": "2020-11-02T14:06:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAwNzU1Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r516007552", "bodyText": "Not disable tags from all mods.\nBut allow tags to be specifically excluded.\nSee Aequivaleos vanilla plugin on how todo that, since that already filters on tags.", "author": "OrionDevelopment", "createdAt": "2020-11-02T14:27:13Z", "path": "src/api/java/com/minecolonies/api/configuration/CommonConfiguration.java", "diffHunk": "@@ -485,6 +486,11 @@ protected CommonConfiguration(final ForgeConfigSpec.Builder builder)\n                    (\"minestuck:ore_cruxite\",\n                      \"minestuck:ore_uranium\"),\n           s -> s instanceof String);\n+\n+        disabledModTags = defineList(builder, \"disabledmodtags\",\n+          Collections.singletonList(\"minecolonies\"),", "originalCommit": "53ce108169c72f7a7c1bf5ff7d52ad9c07a10662", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAxMDc2OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r516010769", "bodyText": "Meh, that would become a large list we always have to extend every time we add a new crafter. I rather not do that.", "author": "Raycoms", "createdAt": "2020-11-02T14:31:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAwNzU1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI4OTQ0Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r516289443", "bodyText": "I rather you would. This already makes no sense since minecraft itself has both collective and functional tags.\nSo make the distinction on tag level please.\nPossibly with a mod wide override.", "author": "OrionDevelopment", "createdAt": "2020-11-02T22:21:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAwNzU1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI5MzMyNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/6019#discussion_r516293325", "bodyText": "I'll make it opt-in, I think that's the best thing anyway.", "author": "Raycoms", "createdAt": "2020-11-02T22:28:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjAwNzU1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "48d759eb7cf98c95245a480f832a2a8508f4653b", "chunk": "diff --git a/src/api/java/com/minecolonies/api/configuration/CommonConfiguration.java b/src/api/java/com/minecolonies/api/configuration/CommonConfiguration.java\nindex 5f5e23c2c8..1373f4da7d 100755\n--- a/src/api/java/com/minecolonies/api/configuration/CommonConfiguration.java\n+++ b/src/api/java/com/minecolonies/api/configuration/CommonConfiguration.java\n\n@@ -487,8 +487,8 @@ public class CommonConfiguration extends AbstractConfiguration\n                      \"minestuck:ore_uranium\"),\n           s -> s instanceof String);\n \n-        disabledModTags = defineList(builder, \"disabledmodtags\",\n-          Collections.singletonList(\"minecolonies\"),\n+        enabledModTags = defineList(builder, \"enabledmodtags\",\n+          Collections.emptyList(),\n           s -> s instanceof String);\n \n         guardResourceLocations = defineList(builder, \"guardresourcelocations\",\n"}}, {"oid": "6c1bcfa55a2a514e29de32a44885f3fab86f585f", "url": "https://github.com/ldtteam/minecolonies/commit/6c1bcfa55a2a514e29de32a44885f3fab86f585f", "message": "avoid extracting empty stacks", "committedDate": "2020-11-02T15:34:07Z", "type": "commit"}, {"oid": "1791b2547bdc64e38c9172aef89ddeddd9f43261", "url": "https://github.com/ldtteam/minecolonies/commit/1791b2547bdc64e38c9172aef89ddeddd9f43261", "message": "I told you sam \n\nfixes #6021", "committedDate": "2020-11-02T21:13:44Z", "type": "commit"}, {"oid": "48d759eb7cf98c95245a480f832a2a8508f4653b", "url": "https://github.com/ldtteam/minecolonies/commit/48d759eb7cf98c95245a480f832a2a8508f4653b", "message": "make config opt in, and default only vanilla", "committedDate": "2020-11-02T22:28:03Z", "type": "commit"}, {"oid": "53c8bb9853e9f072f4668a586da94005044a3924", "url": "https://github.com/ldtteam/minecolonies/commit/53c8bb9853e9f072f4668a586da94005044a3924", "message": "exact match", "committedDate": "2020-11-02T22:29:10Z", "type": "commit"}, {"oid": "dfec0e3bf3c245afb5a1b7006933149755216570", "url": "https://github.com/ldtteam/minecolonies/commit/dfec0e3bf3c245afb5a1b7006933149755216570", "message": "full opt in, prepop list", "committedDate": "2020-11-03T08:51:01Z", "type": "commit"}]}