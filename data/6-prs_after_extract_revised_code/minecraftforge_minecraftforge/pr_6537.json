{"pr_number": 6537, "pr_title": "Supply matrixstack to IRenderHandler where possible. Closes #6439", "pr_createdAt": "2020-02-27T00:14:29Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6537", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0NTUzNw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6537#discussion_r393545537", "bodyText": "This breaks the @FunctionalInterface on certian compilers IIRC. As it only works with one method.\nWhy remove the MC argument? I understand you can get it from Minecraft.getInstane, but having it passed in seems like better practice.", "author": "LexManos", "createdAt": "2020-03-17T09:29:54Z", "path": "src/main/java/net/minecraftforge/client/IRenderHandler.java", "diffHunk": "@@ -19,14 +19,27 @@\n \n package net.minecraftforge.client;\n \n+import com.mojang.blaze3d.matrix.MatrixStack;\n import net.minecraftforge.api.distmarker.Dist;\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.world.ClientWorld;\n import net.minecraftforge.api.distmarker.OnlyIn;\n \n+import javax.annotation.Nullable;\n+\n+// TODO 1.16 Split this apart for the various uses instead of stuffing everything into one interface.\n @FunctionalInterface\n public interface IRenderHandler\n {\n     @OnlyIn(Dist.CLIENT)\n+    @Deprecated // Use MatrixStack override, TODO 1.16 remove\n     void render(int ticks, float partialTicks, ClientWorld world, Minecraft mc);\n+\n+    /**\n+     * @param matrixStack The matrix stack. Can be null when called at sites where vanilla does not supply one.\n+     */\n+    @OnlyIn(Dist.CLIENT)\n+    default void render(int time, float partialTicks, ClientWorld world, @Nullable MatrixStack matrixStack) {", "originalCommit": "7b991649db92fa4d03b9d52a8fc343b28a183978", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzcwOTM1OQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6537#discussion_r393709359", "bodyText": "It won't, plenty of stdlib functional interfaces have lots of default methods. Just look at Comparator.", "author": "tterrag1098", "createdAt": "2020-03-17T14:13:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0NTUzNw=="}], "type": "inlineReview", "revised_code": {"commit": "da9ae50ba2bcdb604710547a3725cc24fba6e0fd", "chunk": "diff --git a/src/main/java/net/minecraftforge/client/IRenderHandler.java b/src/main/java/net/minecraftforge/client/IRenderHandler.java\nindex ea782e634..57559517e 100644\n--- a/src/main/java/net/minecraftforge/client/IRenderHandler.java\n+++ b/src/main/java/net/minecraftforge/client/IRenderHandler.java\n\n@@ -19,27 +19,14 @@\n \n package net.minecraftforge.client;\n \n-import com.mojang.blaze3d.matrix.MatrixStack;\n import net.minecraftforge.api.distmarker.Dist;\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.world.ClientWorld;\n import net.minecraftforge.api.distmarker.OnlyIn;\n \n-import javax.annotation.Nullable;\n-\n-// TODO 1.16 Split this apart for the various uses instead of stuffing everything into one interface.\n @FunctionalInterface\n public interface IRenderHandler\n {\n     @OnlyIn(Dist.CLIENT)\n-    @Deprecated // Use MatrixStack override, TODO 1.16 remove\n     void render(int ticks, float partialTicks, ClientWorld world, Minecraft mc);\n-\n-    /**\n-     * @param matrixStack The matrix stack. Can be null when called at sites where vanilla does not supply one.\n-     */\n-    @OnlyIn(Dist.CLIENT)\n-    default void render(int time, float partialTicks, ClientWorld world, @Nullable MatrixStack matrixStack) {\n-        render(time, partialTicks, world, Minecraft.getInstance());\n-    }\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0NjAyNA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6537#discussion_r393546024", "bodyText": "Why not just do that now and make this class as deprecated, and have the children extend it?", "author": "LexManos", "createdAt": "2020-03-17T09:30:47Z", "path": "src/main/java/net/minecraftforge/client/IRenderHandler.java", "diffHunk": "@@ -19,14 +19,27 @@\n \n package net.minecraftforge.client;\n \n+import com.mojang.blaze3d.matrix.MatrixStack;\n import net.minecraftforge.api.distmarker.Dist;\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.world.ClientWorld;\n import net.minecraftforge.api.distmarker.OnlyIn;\n \n+import javax.annotation.Nullable;\n+\n+// TODO 1.16 Split this apart for the various uses instead of stuffing everything into one interface.", "originalCommit": "7b991649db92fa4d03b9d52a8fc343b28a183978", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "da9ae50ba2bcdb604710547a3725cc24fba6e0fd", "chunk": "diff --git a/src/main/java/net/minecraftforge/client/IRenderHandler.java b/src/main/java/net/minecraftforge/client/IRenderHandler.java\nindex ea782e634..57559517e 100644\n--- a/src/main/java/net/minecraftforge/client/IRenderHandler.java\n+++ b/src/main/java/net/minecraftforge/client/IRenderHandler.java\n\n@@ -19,27 +19,14 @@\n \n package net.minecraftforge.client;\n \n-import com.mojang.blaze3d.matrix.MatrixStack;\n import net.minecraftforge.api.distmarker.Dist;\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.world.ClientWorld;\n import net.minecraftforge.api.distmarker.OnlyIn;\n \n-import javax.annotation.Nullable;\n-\n-// TODO 1.16 Split this apart for the various uses instead of stuffing everything into one interface.\n @FunctionalInterface\n public interface IRenderHandler\n {\n     @OnlyIn(Dist.CLIENT)\n-    @Deprecated // Use MatrixStack override, TODO 1.16 remove\n     void render(int ticks, float partialTicks, ClientWorld world, Minecraft mc);\n-\n-    /**\n-     * @param matrixStack The matrix stack. Can be null when called at sites where vanilla does not supply one.\n-     */\n-    @OnlyIn(Dist.CLIENT)\n-    default void render(int time, float partialTicks, ClientWorld world, @Nullable MatrixStack matrixStack) {\n-        render(time, partialTicks, world, Minecraft.getInstance());\n-    }\n }\n"}}, {"oid": "da9ae50ba2bcdb604710547a3725cc24fba6e0fd", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/da9ae50ba2bcdb604710547a3725cc24fba6e0fd", "message": "Supply matrixstack to IRenderHandler where possible. Closes #6439", "committedDate": "2020-05-26T15:17:28Z", "type": "commit"}]}