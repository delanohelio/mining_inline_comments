{"pr_number": 6994, "pr_title": "[1.16] Reimplement ICloudRenderHandler, ISkyRenderHandler and IWeatherRenderHandler", "pr_createdAt": "2020-07-19T03:03:13Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6994", "timeline": [{"oid": "fef715d653db7db955f59cd18cb926b0f4a0905e", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/fef715d653db7db955f59cd18cb926b0f4a0905e", "message": "Reimplement ICloudRenderHandler, ISkyRenderHandler and IWeatherRenderHandler. Remove the deprecated IRenderHandler from 1.15 and replace patches that makes all the above useful.", "committedDate": "2020-07-19T02:49:57Z", "type": "commit"}, {"oid": "8b362d01a648feb9f64ac0431cf3287019660627", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/8b362d01a648feb9f64ac0431cf3287019660627", "message": "Remove a space to fix patch formatting", "committedDate": "2020-07-19T02:57:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIwMTIzNg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6994#discussion_r457201236", "bodyText": "Now that we have seperate interfaces for everything, we might as well add more specific context, so pass in the LightTexture and the position here", "author": "ichttt", "createdAt": "2020-07-20T09:05:54Z", "path": "src/main/java/net/minecraftforge/client/IWeatherRenderHandler.java", "diffHunk": "@@ -19,14 +19,14 @@\n \n package net.minecraftforge.client;\n \n-import net.minecraftforge.api.distmarker.Dist;\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.world.ClientWorld;\n-import net.minecraftforge.api.distmarker.OnlyIn;\n \n+/**\n+ * Call {@link net.minecraft.client.world.DimensionRenderInfo#setWeatherRenderHandler(IWeatherRenderHandler)}, obtained from a {@link ClientWorld} with an implementation of this to override all weather rendering with your own.\n+ * This includes rain and snow.\n+ */\n @FunctionalInterface\n-public interface IRenderHandler\n-{\n-    @OnlyIn(Dist.CLIENT)\n+public interface IWeatherRenderHandler {\n     void render(int ticks, float partialTicks, ClientWorld world, Minecraft mc);", "originalCommit": "8b362d01a648feb9f64ac0431cf3287019660627", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM1Mzk0OA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6994#discussion_r457353948", "bodyText": "Makes sense. Both are still obtainable (via mc.gameRenderer.getLightTexture() and mc.gameRenderer.getActiveRenderInfo().getProjectedView()), but it's simpler if the user doesn't have to track those down as I did :)", "author": "alcatrazEscapee", "createdAt": "2020-07-20T12:51:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIwMTIzNg=="}], "type": "inlineReview", "revised_code": {"commit": "1fb06dfe04907398cf16d8e7d756f67a6e8af571", "chunk": "diff --git a/src/main/java/net/minecraftforge/client/IWeatherRenderHandler.java b/src/main/java/net/minecraftforge/client/IWeatherRenderHandler.java\nindex 689082915..cf30d9041 100644\n--- a/src/main/java/net/minecraftforge/client/IWeatherRenderHandler.java\n+++ b/src/main/java/net/minecraftforge/client/IWeatherRenderHandler.java\n\n@@ -20,6 +20,7 @@\n package net.minecraftforge.client;\n \n import net.minecraft.client.Minecraft;\n+import net.minecraft.client.renderer.LightTexture;\n import net.minecraft.client.world.ClientWorld;\n \n /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIwMjA1NA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6994#discussion_r457202054", "bodyText": "You can also pass the pos in here as an additional parameter", "author": "ichttt", "createdAt": "2020-07-20T09:06:57Z", "path": "src/main/java/net/minecraftforge/client/ICloudRenderHandler.java", "diffHunk": "@@ -24,13 +24,10 @@\n import net.minecraft.client.world.ClientWorld;\n \n /**\n- * Call {@link net.minecraft.world.dimension.Dimension#setSkyRenderer} with an implementation of this\n- * to override all sky rendering with your own. This includes the sun, moon, stars, and sky-coloring.\n+ * Call {@link net.minecraft.client.world.DimensionRenderInfo#setCloudRenderHandler(ICloudRenderHandler)}, obtained from a {@link ClientWorld} with an implementation of this to override all cloud rendering with your own.\n+ * This is only responsible for rendering clouds.\n  */\n-public interface SkyRenderHandler extends IRenderHandler {\n-\t@Override\n-\tdefault void render(int ticks, float partialTicks, ClientWorld world, Minecraft mc) {}\n-\n-\tvoid render(int ticks, float partialTicks, MatrixStack matrixStack, ClientWorld world, Minecraft mc);\n-\n+@FunctionalInterface\n+public interface ICloudRenderHandler {\n+    void render(int ticks, float partialTicks, MatrixStack matrixStack, ClientWorld world, Minecraft mc);", "originalCommit": "8b362d01a648feb9f64ac0431cf3287019660627", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1fb06dfe04907398cf16d8e7d756f67a6e8af571", "chunk": "diff --git a/src/main/java/net/minecraftforge/client/ICloudRenderHandler.java b/src/main/java/net/minecraftforge/client/ICloudRenderHandler.java\nindex 6b117f889..1a9f5ff93 100644\n--- a/src/main/java/net/minecraftforge/client/ICloudRenderHandler.java\n+++ b/src/main/java/net/minecraftforge/client/ICloudRenderHandler.java\n\n@@ -29,5 +29,5 @@ import net.minecraft.client.world.ClientWorld;\n  */\n @FunctionalInterface\n public interface ICloudRenderHandler {\n-    void render(int ticks, float partialTicks, MatrixStack matrixStack, ClientWorld world, Minecraft mc);\n+    void render(int ticks, float partialTicks, MatrixStack matrixStack, ClientWorld world, Minecraft mc, double viewEntityX, double viewEntityY, double viewEntityZ);\n }\n"}}, {"oid": "1fb06dfe04907398cf16d8e7d756f67a6e8af571", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1fb06dfe04907398cf16d8e7d756f67a6e8af571", "message": "Added additional context to specific renderer calls: Lightmap to weather, and positions to both cloud and weather.", "committedDate": "2020-07-20T12:13:21Z", "type": "commit"}, {"oid": "32969aae8912fe3325b2b393a18c5990f66cfff9", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/32969aae8912fe3325b2b393a18c5990f66cfff9", "message": "Merge branch '1.16.x' into render-handlers\n\n# Conflicts:\n#\tpatches/minecraft/net/minecraft/client/renderer/WorldRenderer.java.patch", "committedDate": "2020-08-25T14:14:04Z", "type": "commit"}, {"oid": "59a088ab3ab91ae426c9ce9cb979a4d8c29faad4", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/59a088ab3ab91ae426c9ce9cb979a4d8c29faad4", "message": "Update to 1.16.2, fix merge conflicts.", "committedDate": "2020-08-25T15:19:59Z", "type": "commit"}, {"oid": "3f0c591f5bb6b77f572b00bb5342a99fc58a231a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/3f0c591f5bb6b77f572b00bb5342a99fc58a231a", "message": "Merge remote-tracking branch 'upstream/1.16.x' into render-handlers\n\n# Conflicts:\n#\tpatches/minecraft/net/minecraft/client/renderer/WorldRenderer.java.patch", "committedDate": "2020-09-01T23:18:56Z", "type": "commit"}, {"oid": "1d89805e0aea5a6b2ee326f02b5943e622394cfd", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1d89805e0aea5a6b2ee326f02b5943e622394cfd", "message": "Fix merge conflicts\n\n...again", "committedDate": "2020-09-01T23:52:40Z", "type": "commit"}, {"oid": "5a13f4e3c1ace6fbeebf37c00f0d39630aa44182", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5a13f4e3c1ace6fbeebf37c00f0d39630aa44182", "message": "Merge remote-tracking branch 'upstream/1.16.x' into render-handlers\n\n# Conflicts:\n#\tpatches/minecraft/net/minecraft/client/renderer/WorldRenderer.java.patch", "committedDate": "2020-09-10T23:09:35Z", "type": "commit"}, {"oid": "01f9a67c0e88efb0f8ecc2dba24298eba838c18a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/01f9a67c0e88efb0f8ecc2dba24298eba838c18a", "message": "Fix merge conflicts again, and make it non breaking because 1.16.3 means essentially RB. So here we go, everything is deprecated but it isn't breaking HAYO!", "committedDate": "2020-09-10T23:50:37Z", "type": "commit"}]}