{"pr_number": 6536, "pr_title": "Add projection matrix to RenderWorldLastEvent", "pr_createdAt": "2020-02-26T19:51:26Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6536", "timeline": [{"oid": "723d043232bb855ab119913afdb7cf5283b9ed0c", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/723d043232bb855ab119913afdb7cf5283b9ed0c", "message": "Add projection matrix", "committedDate": "2020-02-26T19:40:04Z", "type": "commit"}, {"oid": "bc10ec6b1f389e2d2fc5d53454e20d2be944c80a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/bc10ec6b1f389e2d2fc5d53454e20d2be944c80a", "message": "Fix partialTicks, add finishTimeNano", "committedDate": "2020-02-26T21:24:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjExNjE1OA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6536#discussion_r386116158", "bodyText": "This is a binary breaking change, please keep the old method and mark it for removal in 1.16", "author": "ichttt", "createdAt": "2020-03-01T15:17:13Z", "path": "src/main/java/net/minecraftforge/client/ForgeHooksClient.java", "diffHunk": "@@ -172,9 +172,9 @@ public static boolean onDrawBlockHighlight(WorldRenderer context, ActiveRenderIn\n         return MinecraftForge.EVENT_BUS.post(new DrawHighlightEvent(context, info, target, partialTicks, matrix, buffers));\n     }\n \n-    public static void dispatchRenderLast(WorldRenderer context, MatrixStack mat, float partialTicks)\n+    public static void dispatchRenderLast(WorldRenderer context, MatrixStack mat, float partialTicks, Matrix4f projectionMatrix, long finishTimeNano)", "originalCommit": "bc10ec6b1f389e2d2fc5d53454e20d2be944c80a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2cb22f832d9e561a518824c0c5eaee1081a28779", "chunk": "diff --git a/src/main/java/net/minecraftforge/client/ForgeHooksClient.java b/src/main/java/net/minecraftforge/client/ForgeHooksClient.java\nindex 65313a2ce..06c329c54 100644\n--- a/src/main/java/net/minecraftforge/client/ForgeHooksClient.java\n+++ b/src/main/java/net/minecraftforge/client/ForgeHooksClient.java\n\n@@ -172,6 +172,12 @@ public class ForgeHooksClient\n         return MinecraftForge.EVENT_BUS.post(new DrawHighlightEvent(context, info, target, partialTicks, matrix, buffers));\n     }\n \n+    @Deprecated // TODO: Remove in 1.16\n+    public static void dispatchRenderLast(WorldRenderer context, MatrixStack mat, float partialTicks)\n+    {\n+        MinecraftForge.EVENT_BUS.post(new RenderWorldLastEvent(context, mat, partialTicks));\n+    }\n+\n     public static void dispatchRenderLast(WorldRenderer context, MatrixStack mat, float partialTicks, Matrix4f projectionMatrix, long finishTimeNano)\n     {\n         MinecraftForge.EVENT_BUS.post(new RenderWorldLastEvent(context, mat, partialTicks, projectionMatrix, finishTimeNano));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjExNjIxOA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6536#discussion_r386116218", "bodyText": "Also binary breaking. Please keep the old constructor as well and add something like @Deprecated //TODO Remove in 1.16 to the old constructor", "author": "ichttt", "createdAt": "2020-03-01T15:18:11Z", "path": "src/main/java/net/minecraftforge/client/event/RenderWorldLastEvent.java", "diffHunk": "@@ -21,18 +21,24 @@\n \n import com.mojang.blaze3d.matrix.MatrixStack;\n \n+import net.minecraft.client.renderer.Matrix4f;\n import net.minecraft.client.renderer.WorldRenderer;\n \n public class RenderWorldLastEvent extends net.minecraftforge.eventbus.api.Event\n {\n     private final WorldRenderer context;\n     private final MatrixStack mat;\n     private final float partialTicks;\n-    public RenderWorldLastEvent(WorldRenderer context, MatrixStack mat, float partialTicks)\n+    private final Matrix4f projectionMatrix;\n+    private final long finishTimeNano;\n+\n+    public RenderWorldLastEvent(WorldRenderer context, MatrixStack mat, float partialTicks, Matrix4f projectionMatrix, long finishTimeNano)", "originalCommit": "bc10ec6b1f389e2d2fc5d53454e20d2be944c80a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE0MjE4MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6536#discussion_r386142181", "bodyText": "Done", "author": "Nightenom", "createdAt": "2020-03-01T21:24:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjExNjIxOA=="}], "type": "inlineReview", "revised_code": {"commit": "2cb22f832d9e561a518824c0c5eaee1081a28779", "chunk": "diff --git a/src/main/java/net/minecraftforge/client/event/RenderWorldLastEvent.java b/src/main/java/net/minecraftforge/client/event/RenderWorldLastEvent.java\nindex 005ee6375..dacef4b65 100644\n--- a/src/main/java/net/minecraftforge/client/event/RenderWorldLastEvent.java\n+++ b/src/main/java/net/minecraftforge/client/event/RenderWorldLastEvent.java\n\n@@ -32,6 +32,16 @@ public class RenderWorldLastEvent extends net.minecraftforge.eventbus.api.Event\n     private final Matrix4f projectionMatrix;\n     private final long finishTimeNano;\n \n+    @Deprecated // TODO: Remove in 1.16\n+    public RenderWorldLastEvent(WorldRenderer context, MatrixStack mat, float partialTicks)\n+    {\n+        this.context = context;\n+        this.mat = mat;\n+        this.partialTicks = partialTicks;\n+        this.projectionMatrix = null;\n+        this.finishTimeNano = 0;\n+    }\n+\n     public RenderWorldLastEvent(WorldRenderer context, MatrixStack mat, float partialTicks, Matrix4f projectionMatrix, long finishTimeNano)\n     {\n         this.context = context;\n"}}, {"oid": "2cb22f832d9e561a518824c0c5eaee1081a28779", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/2cb22f832d9e561a518824c0c5eaee1081a28779", "message": "Add back deprecated calls", "committedDate": "2020-03-01T21:24:03Z", "type": "commit"}]}