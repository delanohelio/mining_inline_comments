{"pr_number": 2049, "pr_title": "[ehnancement] improve cvv reason tracking", "pr_createdAt": "2020-02-26T14:40:17Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2049", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3NjIyOQ==", "url": "https://github.com/mercadopago/px-android/pull/2049#discussion_r384676229", "bodyText": "Donde lo usamos?", "author": "jorGonzalez291292", "createdAt": "2020-02-26T18:20:13Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CardTokenService.java", "diffHunk": "@@ -23,40 +23,41 @@\n     /* default */ @NonNull final ESCManagerBehaviour escManagerBehaviour;\n     @NonNull private final Device device;\n     @NonNull private final GatewayService gatewayService;\n+    @NonNull private TokenRecoverRepository tokenRecoverRepository;\n \n     public CardTokenService(@NonNull final GatewayService gatewayService,\n         @NonNull final PaymentSettingRepository paymentSettingRepository,\n         @NonNull final Device device,\n-        @NonNull final ESCManagerBehaviour escManagerBehaviour) {\n+        @NonNull final ESCManagerBehaviour escManagerBehaviour,\n+        @NonNull final TokenRecoverRepository tokenRecoverRepository) {\n         this.gatewayService = gatewayService;\n         this.paymentSettingRepository = paymentSettingRepository;\n         this.device = device;\n         this.escManagerBehaviour = escManagerBehaviour;\n+        this.tokenRecoverRepository = tokenRecoverRepository;", "originalCommit": "4ddc2637a2c231c0c5884a1658d740bb23f9d483", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fc1e0c4d7dbdace40699fd933689f109d79b092f", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CardTokenService.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CardTokenService.java\nindex 3a9325efc..bc9e7bcb1 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CardTokenService.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CardTokenService.java\n\n@@ -23,18 +23,15 @@ public class CardTokenService implements CardTokenRepository {\n     /* default */ @NonNull final ESCManagerBehaviour escManagerBehaviour;\n     @NonNull private final Device device;\n     @NonNull private final GatewayService gatewayService;\n-    @NonNull private TokenRecoverRepository tokenRecoverRepository;\n \n     public CardTokenService(@NonNull final GatewayService gatewayService,\n         @NonNull final PaymentSettingRepository paymentSettingRepository,\n         @NonNull final Device device,\n-        @NonNull final ESCManagerBehaviour escManagerBehaviour,\n-        @NonNull final TokenRecoverRepository tokenRecoverRepository) {\n+        @NonNull final ESCManagerBehaviour escManagerBehaviour) {\n         this.gatewayService = gatewayService;\n         this.paymentSettingRepository = paymentSettingRepository;\n         this.device = device;\n         this.escManagerBehaviour = escManagerBehaviour;\n-        this.tokenRecoverRepository = tokenRecoverRepository;\n     }\n \n     /* default */ Callback<Token> wrap(@NonNull final CardToken card, final Callback<Token> callback) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3NjcwMA==", "url": "https://github.com/mercadopago/px-android/pull/2049#discussion_r384676700", "bodyText": "No falla por esto?", "author": "jorGonzalez291292", "createdAt": "2020-02-26T18:21:02Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/di/Session.java", "diffHunk": "@@ -394,7 +394,7 @@ public CardTokenRepository getCardTokenRepository() {\n             cardTokenRepository =\n                 new CardTokenService(gatewayService, getConfigurationModule().getPaymentSettings(),\n                     new Device(getApplicationContext()),\n-                    getMercadoPagoESC());\n+                    getMercadoPagoESC(), );", "originalCommit": "4ddc2637a2c231c0c5884a1658d740bb23f9d483", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fc1e0c4d7dbdace40699fd933689f109d79b092f", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/di/Session.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/di/Session.java\nindex e50a4037a..c37c8bfab 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/di/Session.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/di/Session.java\n\n@@ -394,7 +405,7 @@ public final class Session extends ApplicationModule implements AmountComponent\n             cardTokenRepository =\n                 new CardTokenService(gatewayService, getConfigurationModule().getPaymentSettings(),\n                     new Device(getApplicationContext()),\n-                    getMercadoPagoESC(), );\n+                    getMercadoPagoESC());\n         }\n         return cardTokenRepository;\n     }\n"}}, {"oid": "306db075d5fd1236c476f01f65988dec1ebc8a09", "url": "https://github.com/mercadopago/px-android/commit/306db075d5fd1236c476f01f65988dec1ebc8a09", "message": "* Added token recover repository for reason storage", "committedDate": "2020-02-26T19:33:50Z", "type": "forcePushed"}, {"oid": "fc1e0c4d7dbdace40699fd933689f109d79b092f", "url": "https://github.com/mercadopago/px-android/commit/fc1e0c4d7dbdace40699fd933689f109d79b092f", "message": "* Send reason along with card on cvv required event for better tracking", "committedDate": "2020-02-27T13:00:21Z", "type": "forcePushed"}, {"oid": "61c9c79c23c2bade11df2eb7d2280594105719a5", "url": "https://github.com/mercadopago/px-android/commit/61c9c79c23c2bade11df2eb7d2280594105719a5", "message": "* Send reason along with card on cvv required event for better tracking", "committedDate": "2020-02-27T13:19:52Z", "type": "commit"}, {"oid": "61c9c79c23c2bade11df2eb7d2280594105719a5", "url": "https://github.com/mercadopago/px-android/commit/61c9c79c23c2bade11df2eb7d2280594105719a5", "message": "* Send reason along with card on cvv required event for better tracking", "committedDate": "2020-02-27T13:19:52Z", "type": "forcePushed"}]}