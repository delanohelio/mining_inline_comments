{"pr_number": 2228, "pr_title": "[Feature] Improved discount dialog", "pr_createdAt": "2020-07-13T20:00:47Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2228", "timeline": [{"oid": "e44a6d2c79ad61e52e0e55b95c190dc10b1741c6", "url": "https://github.com/mercadopago/px-android/commit/e44a6d2c79ad61e52e0e55b95c190dc10b1741c6", "message": "brief added", "committedDate": "2020-07-06T11:39:56Z", "type": "commit"}, {"oid": "85a6cdfbbc1699d60ecc0d9f833e3089c8c57d0f", "url": "https://github.com/mercadopago/px-android/commit/85a6cdfbbc1699d60ecc0d9f833e3089c8c57d0f", "message": "discount dialog changed", "committedDate": "2020-07-07T14:52:53Z", "type": "commit"}, {"oid": "698da22ec8cba52e69aed1d9ce0a28d98e24c0df", "url": "https://github.com/mercadopago/px-android/commit/698da22ec8cba52e69aed1d9ce0a28d98e24c0df", "message": "new color for intration added, refactor amount descriptor view", "committedDate": "2020-07-07T21:20:51Z", "type": "commit"}, {"oid": "23bd102172e6ab6cf64f85ed5d119cdb3b6c670b", "url": "https://github.com/mercadopago/px-android/commit/23bd102172e6ab6cf64f85ed5d119cdb3b6c670b", "message": "discount dialog refactoring", "committedDate": "2020-07-08T14:17:40Z", "type": "commit"}, {"oid": "a53a400706ff84e32d2d4228b395e171bd709c07", "url": "https://github.com/mercadopago/px-android/commit/a53a400706ff84e32d2d4228b395e171bd709c07", "message": "change name files, and package", "committedDate": "2020-07-11T17:04:18Z", "type": "commit"}, {"oid": "8a670d4313f7506e394d5ce6817ef11578a02174", "url": "https://github.com/mercadopago/px-android/commit/8a670d4313f7506e394d5ce6817ef11578a02174", "message": "dismiss brief", "committedDate": "2020-07-12T16:11:28Z", "type": "commit"}, {"oid": "7fcfe80e1cc4cd5bbff46e5e57edcacbdfbbf476", "url": "https://github.com/mercadopago/px-android/commit/7fcfe80e1cc4cd5bbff46e5e57edcacbdfbbf476", "message": "Merge branch 'master' into feature/improved-discount-dialog", "committedDate": "2020-07-13T20:08:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1NDA5NQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r454554095", "bodyText": "Estuvo mal siempre esto?", "author": "guchito9", "createdAt": "2020-07-14T18:20:24Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/review_and_confirm/models/SummaryModel.java", "diffHunk": "@@ -33,7 +33,7 @@ public SummaryModel createFromParcel(final Parcel in) {\n \n     public static String resolveTitle(@NonNull final List<Item> items, @NonNull final Resources resources) {\n         final int quantity = items.size() == 1 ? items.get(0).getQuantity() : items.size();\n-        return quantity == 1 && TextUtil.isEmpty(items.get(0).getTitle()) ?\n+        return quantity == 1 && TextUtil.isNotEmpty(items.get(0).getTitle()) ?", "originalCommit": "8a670d4313f7506e394d5ce6817ef11578a02174", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAwMDM4Ng==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r455000386", "bodyText": "sip, es el cambio que pidieron hace 3 meses.", "author": "jorGonzalez291292", "createdAt": "2020-07-15T12:05:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1NDA5NQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3OTA0NQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r454579045", "bodyText": "Hay que cambiarle el nombre a esto", "author": "guchito9", "createdAt": "2020-07-14T19:04:25Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java", "diffHunk": "@@ -352,4 +410,17 @@ public static void setStatusBarColor(@ColorInt final int color, @NonNull final W\n             window.setStatusBarColor(getDarkPrimaryColor(color));\n         }\n     }\n+\n+    public static boolean isDeviceScreenSize(@NonNull final Context context, final int... screenLayoutSize) {", "originalCommit": "7fcfe80e1cc4cd5bbff46e5e57edcacbdfbbf476", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "892099d62538dbceffb023efb10ee66334d043cd", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java\nindex 7bf54f642..69bb7469c 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java\n\n@@ -411,16 +411,7 @@ public final class ViewUtils {\n         }\n     }\n \n-    public static boolean isDeviceScreenSize(@NonNull final Context context, final int... screenLayoutSize) {\n-        final int screenLayout = context.getResources().getConfiguration().screenLayout;\n-        final int sizeValue = (screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK);\n-\n-        for (int screenSizeValue: screenLayoutSize) {\n-            if (screenSizeValue == sizeValue) {\n-                return true;\n-            }\n-        }\n-\n-        return false;\n+    public static boolean isScreenSize(@NonNull final Context context, final int screenLayoutSize) {\n+        return context.getResources().getConfiguration().isLayoutSizeAtLeast(screenLayoutSize);\n     }\n }\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3OTY3NQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r454579675", "bodyText": "Pasar a camel", "author": "guchito9", "createdAt": "2020-07-14T19:05:31Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java", "diffHunk": "@@ -12,27 +13,31 @@\n import android.view.animation.AnimationUtils;\n import android.widget.ImageView;\n import android.widget.TextView;\n+import com.mercadolibre.android.picassodiskcache.PicassoDiskLoader;\n import com.mercadopago.android.px.R;\n import com.mercadopago.android.px.core.DynamicDialogCreator;\n import com.mercadopago.android.px.internal.font.PxFont;\n import com.mercadopago.android.px.internal.util.TextUtil;\n import com.mercadopago.android.px.internal.util.ViewUtils;\n+import com.mercadopago.android.px.internal.viewmodel.DiscountBriefColor;\n import com.mercadopago.android.px.internal.viewmodel.EmptyLocalized;\n import com.mercadopago.android.px.internal.viewmodel.IDetailColor;\n import com.mercadopago.android.px.internal.viewmodel.IDetailDrawable;\n import com.mercadopago.android.px.internal.viewmodel.ILocalizedCharSequence;\n import com.mercadopago.android.px.model.DiscountConfigurationModel;\n+import com.mercadopago.android.px.model.DiscountOverview;\n import com.mercadopago.android.px.model.internal.Text;\n \n import static com.mercadopago.android.px.internal.util.AccessibilityUtilsKt.executeIfAccessibilityTalkBackEnable;\n import static com.mercadopago.android.px.internal.util.TextUtil.isEmpty;\n \n public class AmountDescriptorView extends ConstraintLayout {\n \n-    private MPTextView leftLabel;\n-    private View leftContainer;\n-    private TextView rightLabel;\n-    private ImageView imageView;\n+    private MPTextView descriptor;\n+    private MPTextView brief;\n+    private View descriptor_container;", "originalCommit": "7fcfe80e1cc4cd5bbff46e5e57edcacbdfbbf476", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAwMDk3OQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r455000979", "bodyText": "Listo", "author": "jorGonzalez291292", "createdAt": "2020-07-15T12:06:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3OTY3NQ=="}], "type": "inlineReview", "revised_code": {"commit": "f8dcb41004e3d6b517789e80a36b3f234d4137cd", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\nindex c8a53cd68..bd6c211f4 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\n\n@@ -35,9 +35,9 @@ public class AmountDescriptorView extends ConstraintLayout {\n \n     private MPTextView descriptor;\n     private MPTextView brief;\n-    private View descriptor_container;\n+    private View descriptorContainer;\n     private MPTextView amount;\n-    private ImageView icon_descriptor;\n+    private ImageView iconDescriptor;\n     private boolean rightLabelSemiBold;\n     private boolean leftLabelSemiBold;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3OTg4NQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r454579885", "bodyText": "Pasar a camel", "author": "guchito9", "createdAt": "2020-07-14T19:05:59Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java", "diffHunk": "@@ -12,27 +13,31 @@\n import android.view.animation.AnimationUtils;\n import android.widget.ImageView;\n import android.widget.TextView;\n+import com.mercadolibre.android.picassodiskcache.PicassoDiskLoader;\n import com.mercadopago.android.px.R;\n import com.mercadopago.android.px.core.DynamicDialogCreator;\n import com.mercadopago.android.px.internal.font.PxFont;\n import com.mercadopago.android.px.internal.util.TextUtil;\n import com.mercadopago.android.px.internal.util.ViewUtils;\n+import com.mercadopago.android.px.internal.viewmodel.DiscountBriefColor;\n import com.mercadopago.android.px.internal.viewmodel.EmptyLocalized;\n import com.mercadopago.android.px.internal.viewmodel.IDetailColor;\n import com.mercadopago.android.px.internal.viewmodel.IDetailDrawable;\n import com.mercadopago.android.px.internal.viewmodel.ILocalizedCharSequence;\n import com.mercadopago.android.px.model.DiscountConfigurationModel;\n+import com.mercadopago.android.px.model.DiscountOverview;\n import com.mercadopago.android.px.model.internal.Text;\n \n import static com.mercadopago.android.px.internal.util.AccessibilityUtilsKt.executeIfAccessibilityTalkBackEnable;\n import static com.mercadopago.android.px.internal.util.TextUtil.isEmpty;\n \n public class AmountDescriptorView extends ConstraintLayout {\n \n-    private MPTextView leftLabel;\n-    private View leftContainer;\n-    private TextView rightLabel;\n-    private ImageView imageView;\n+    private MPTextView descriptor;\n+    private MPTextView brief;\n+    private View descriptor_container;\n+    private MPTextView amount;\n+    private ImageView icon_descriptor;", "originalCommit": "7fcfe80e1cc4cd5bbff46e5e57edcacbdfbbf476", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAwMTMxMQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r455001311", "bodyText": "Listo", "author": "jorGonzalez291292", "createdAt": "2020-07-15T12:07:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3OTg4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "f8dcb41004e3d6b517789e80a36b3f234d4137cd", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\nindex c8a53cd68..bd6c211f4 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\n\n@@ -35,9 +35,9 @@ public class AmountDescriptorView extends ConstraintLayout {\n \n     private MPTextView descriptor;\n     private MPTextView brief;\n-    private View descriptor_container;\n+    private View descriptorContainer;\n     private MPTextView amount;\n-    private ImageView icon_descriptor;\n+    private ImageView iconDescriptor;\n     private boolean rightLabelSemiBold;\n     private boolean leftLabelSemiBold;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTExODk2Ng==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r455118966", "bodyText": "Borrar esto", "author": "guchito9", "createdAt": "2020-07-15T14:57:08Z", "path": "px-services/src/main/java/com/mercadopago/android/px/internal/services/CheckoutService.java", "diffHunk": "@@ -19,6 +19,14 @@\n \n     String CHECKOUT_VERSION = \"v2\";\n     String ENVIRONMENT = BuildConfig.API_ENVIRONMENT_NEW;\n+//\"https://run.mocky.io/v3/8a4b5d87-8a03-4e82-8942-09dfadcb7cf5/\" xxxhdpi", "originalCommit": "7fcfe80e1cc4cd5bbff46e5e57edcacbdfbbf476", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f8dcb41004e3d6b517789e80a36b3f234d4137cd", "chunk": "diff --git a/px-services/src/main/java/com/mercadopago/android/px/internal/services/CheckoutService.java b/px-services/src/main/java/com/mercadopago/android/px/internal/services/CheckoutService.java\nindex 5fe1fecb1..5fe5d2a56 100644\n--- a/px-services/src/main/java/com/mercadopago/android/px/internal/services/CheckoutService.java\n+++ b/px-services/src/main/java/com/mercadopago/android/px/internal/services/CheckoutService.java\n\n@@ -27,6 +27,7 @@ public interface CheckoutService {\n \n //\"https://run.mocky.io/v3/22ecd520-fe81-4f79-b42f-5e4723415b14/\" varios descuentos hdpi\n //\"https://run.mocky.io/v3/5351208f-213d-4ef0-afd2-7729b92144da/\" varios descuentos con split hdpi\n+//\"https://run.mocky.io/v3/c6f8cc8b-65bd-4f9e-b9d2-690a446766c7/\" varios descuentos xxhdpi\n \n     @POST(ENVIRONMENT + \"/px_mobile/\" + CHECKOUT_VERSION + \"/checkout\")\n     MPCall<InitResponse> checkout(\n"}}, {"oid": "892099d62538dbceffb023efb10ee66334d043cd", "url": "https://github.com/mercadopago/px-android/commit/892099d62538dbceffb023efb10ee66334d043cd", "message": "Changed screen size check for discount brief", "committedDate": "2020-07-15T16:47:59Z", "type": "commit"}, {"oid": "f8dcb41004e3d6b517789e80a36b3f234d4137cd", "url": "https://github.com/mercadopago/px-android/commit/f8dcb41004e3d6b517789e80a36b3f234d4137cd", "message": "review changes", "committedDate": "2020-07-15T17:22:42Z", "type": "commit"}, {"oid": "3db166119ba50f447317caaa72072bc06b416b35", "url": "https://github.com/mercadopago/px-android/commit/3db166119ba50f447317caaa72072bc06b416b35", "message": "Merge branch 'feature/improved-discount-dialog' of github.com:mercadopago/px-android into feature/improved-discount-dialog", "committedDate": "2020-07-15T17:22:59Z", "type": "commit"}, {"oid": "bb145f3eb8f876facdb86470ddc9907c755bc40c", "url": "https://github.com/mercadopago/px-android/commit/bb145f3eb8f876facdb86470ddc9907c755bc40c", "message": "remove comments in checkout service", "committedDate": "2020-07-15T17:36:47Z", "type": "commit"}, {"oid": "1eac0b1722080a6d261a003b108d45da316330b0", "url": "https://github.com/mercadopago/px-android/commit/1eac0b1722080a6d261a003b108d45da316330b0", "message": "key for SummaryViewModelMapper updated", "committedDate": "2020-07-15T21:47:08Z", "type": "commit"}, {"oid": "9cbba7d910ba168526cbd518cc7995b22eefd38d", "url": "https://github.com/mercadopago/px-android/commit/9cbba7d910ba168526cbd518cc7995b22eefd38d", "message": "review changes", "committedDate": "2020-07-15T21:50:08Z", "type": "commit"}, {"oid": "e3a902aced6e4791d2530f944c0fbd48d835e2f2", "url": "https://github.com/mercadopago/px-android/commit/e3a902aced6e4791d2530f944c0fbd48d835e2f2", "message": "refactor key for SummaryViewModelMapper", "committedDate": "2020-07-16T21:01:45Z", "type": "commit"}, {"oid": "f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "url": "https://github.com/mercadopago/px-android/commit/f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "message": "revert changes", "committedDate": "2020-07-16T21:08:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODExNDI5MQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458114291", "bodyText": "Qued\u00f3 medio raro este m\u00e9todo, que significa que sea screen size?", "author": "cgaggino", "createdAt": "2020-07-21T13:53:34Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java", "diffHunk": "@@ -352,4 +411,11 @@ public static void setStatusBarColor(@ColorInt final int color, @NonNull final W\n             window.setStatusBarColor(getDarkPrimaryColor(color));\n         }\n     }\n+\n+    public static boolean isScreenSize(@NonNull final Context context, final int density) {", "originalCommit": "f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc0NTIyNQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458745225", "bodyText": "Lo cambio", "author": "jorGonzalez291292", "createdAt": "2020-07-22T12:11:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODExNDI5MQ=="}], "type": "inlineReview", "revised_code": {"commit": "6eb1dbe7c80da1ef6e7a7429289ee2c60075ea6d", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java\nindex 200a999ef..c3449d88d 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java\n\n@@ -412,7 +412,7 @@ public final class ViewUtils {\n         }\n     }\n \n-    public static boolean isScreenSize(@NonNull final Context context, final int density) {\n+    public static boolean isScreenDensity(@NonNull final Context context, final int density) {\n             final float densityScale = 1.0f / DisplayMetrics.DENSITY_DEFAULT;\n             final float screenDensity = context.getResources().getDisplayMetrics().density / densityScale;\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEyMDg1OA==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458120858", "bodyText": "No me convence del todo como qued\u00f3 esto, creo que la vista deberia abstraerse de si est\u00e1 dibujando un descuento, pensemos que el dia de ma\u00f1ana quieren que venga un cargo con el mismo formato", "author": "cgaggino", "createdAt": "2020-07-21T14:02:03Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java", "diffHunk": "@@ -57,37 +63,44 @@ public AmountDescriptorView(final Context context, @Nullable final AttributeSet\n \n     public interface OnClickListener {\n         void onDiscountAmountDescriptorClicked(@NonNull final DiscountConfigurationModel discountModel);\n+\n         void onChargesAmountDescriptorClicked(@NonNull final DynamicDialogCreator dynamicDialogCreator);\n     }\n \n     private void init() {\n         inflate(getContext(), R.layout.px_view_amount_descriptor, this);\n-        leftContainer = findViewById(R.id.title);\n-        leftLabel = leftContainer.findViewById(R.id.label);\n-        rightLabel = findViewById(R.id.amount);\n-        imageView = findViewById(R.id.icon_descriptor_amount);\n+        descriptorContainer = findViewById(R.id.descriptor_container);\n+        descriptor = descriptorContainer.findViewById(R.id.descriptor);\n+        brief = descriptorContainer.findViewById(R.id.brief);\n+        amount = findViewById(R.id.amount);\n+        iconDescriptor = findViewById(R.id.icon_descriptor);\n     }\n \n     public void animateEnter() {\n         final Animation slideLeft = AnimationUtils.loadAnimation(getContext(), R.anim.px_summary_slide_left_in);\n         final Animation slideRight = AnimationUtils.loadAnimation(getContext(), R.anim.px_summary_slide_right_in);\n-        leftContainer.startAnimation(slideRight);\n-        rightLabel.startAnimation(slideLeft);\n+        descriptorContainer.startAnimation(slideRight);\n+        amount.startAnimation(slideLeft);\n     }\n \n     public void update(@NonNull final AmountDescriptorView.Model model) {\n-        updateTextColor(model.detailColor);\n-        updateLeftLabel(model);\n-        updateRightLabel(model);\n-        updateDrawable(model.detailDrawable, model.detailDrawableColor);\n+        if (model.discountOverview != null) {", "originalCommit": "f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc0NTMzNw==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458745337", "bodyText": "Lo cambio", "author": "jorGonzalez291292", "createdAt": "2020-07-22T12:11:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEyMDg1OA=="}], "type": "inlineReview", "revised_code": {"commit": "6eb1dbe7c80da1ef6e7a7429289ee2c60075ea6d", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\nindex 2853ed81d..3f992b1ca 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/AmountDescriptorView.java\n\n@@ -84,8 +83,8 @@ public class AmountDescriptorView extends ConstraintLayout {\n     }\n \n     public void update(@NonNull final AmountDescriptorView.Model model) {\n-        if (model.discountOverview != null) {\n-            updateAmountDescriptor(model.discountOverview, model.detailColor, model.briefColor, model.hasSplit);\n+        if (model.amountDescriptor != null) {\n+            updateAmountDescriptor(model.amountDescriptor, model.detailColor, model.briefColor, model.hasSplit);\n         } else {\n             updateTextColor(model.detailColor);\n             updateLeftLabel(model);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEyNzI5MQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458127291", "bodyText": "Que pasa con este dato si la procesadora no admite split? puede que venga true y no haya efectivamente un split? o viceversa, que la configuracion acepte split pero que no sea necesario?", "author": "cgaggino", "createdAt": "2020-07-21T14:10:48Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/view/SummaryDetailDescriptorFactory.java", "diffHunk": "@@ -50,24 +51,18 @@ public SummaryDetailDescriptorFactory(@NonNull final AmountDescriptorView.OnClic\n         if (chargeRule != null && !ChargeRuleHelper.isHighlightCharge(chargeRule)) {\n             addChargesRow(list);\n         }\n-        addTotalRow(list);\n+        addPurchaseRow(list);\n \n         return list;\n     }\n \n     private void addDiscountRow(@NonNull final Collection<AmountDescriptorView.Model> list) {\n-        final Discount discount = discountModel.getDiscount();\n-        if (!discountModel.isAvailable()) {\n-            final AmountDescriptorView.Model model = discountModel.getReason() != null ?\n-                new AmountDescriptorView.Model(discountModel.getReason().getSummary(), new SummaryViewDefaultColor()) :\n-                new AmountDescriptorView.Model(new SoldOutDiscountLocalized(), new SummaryViewDefaultColor());\n-            list.add(model\n-                .setDetailDrawable(new SummaryViewDetailDrawable(), new SummaryViewDefaultColor())\n-                .setListener(v -> listener.onDiscountAmountDescriptorClicked(discountModel)));\n-        } else if (discount != null) {\n-            list.add(new AmountDescriptorView.Model(new DiscountDescriptionLocalized(discount),\n-                new DiscountAmountLocalized(discount.getCouponAmount(), currency), new DiscountDetailColor())\n-                .setDetailDrawable(new SummaryViewDetailDrawable(), new DiscountDetailColor())\n+        final DiscountOverview discountOverview = discountModel.getDiscountOverview();\n+        final IDetailColor detailColor = new DiscountDetailColor();\n+        final boolean hasSplit = amountConfiguration != null && amountConfiguration.allowSplit();", "originalCommit": "f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6eb1dbe7c80da1ef6e7a7429289ee2c60075ea6d", "chunk": "diff --git a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/SummaryDetailDescriptorFactory.java b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/SummaryDetailDescriptorFactory.java\nindex 3a0869186..7a06f279c 100644\n--- a/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/SummaryDetailDescriptorFactory.java\n+++ b/px-checkout/src/main/java/com/mercadopago/android/px/internal/view/SummaryDetailDescriptorFactory.java\n\n@@ -61,7 +62,8 @@ public class SummaryDetailDescriptorFactory {\n         final IDetailColor detailColor = new DiscountDetailColor();\n         final boolean hasSplit = amountConfiguration != null && amountConfiguration.allowSplit();\n         if (discountOverview != null) {\n-            list.add(new AmountDescriptorView.Model(discountOverview, detailColor, hasSplit)\n+            list.add(new AmountDescriptorView.Model(new AmountDescriptorMapper().map(discountOverview), detailColor,\n+                hasSplit)\n                 .setDetailDrawable(new SummaryViewDetailDrawable(), detailColor)\n                 .setListener(v -> listener.onDiscountAmountDescriptorClicked(discountModel)));\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI1MDUyMQ==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458250521", "bodyText": "No podiamos referenciar otra vista para que siga validando en los tests de descuento?", "author": "cgaggino", "createdAt": "2020-07-21T17:00:29Z", "path": "px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/DefaultValidator.java", "diffHunk": "@@ -172,12 +172,7 @@ public void validate(@NonNull final ReviewPaymentMethodsPage reviewPaymentMethod\n \n     @Override\n     public void validate(@NonNull final DiscountDetailPage discountDetailPage) {\n-        final Matcher<View> discountDetailLine = withId(com.mercadopago.android.px.R.id.px_discount_detail_line);", "originalCommit": "f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f1e50842164de4e2b31866b17cb8ea9ff6be3f8e", "chunk": "diff --git a/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/DefaultValidator.java b/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/DefaultValidator.java\nindex eadf8e5a7..d1811e63b 100644\n--- a/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/DefaultValidator.java\n+++ b/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/DefaultValidator.java\n\n@@ -172,7 +172,14 @@ public class DefaultValidator implements CheckoutValidator {\n \n     @Override\n     public void validate(@NonNull final DiscountDetailPage discountDetailPage) {\n-        //TODO implement default PX Validations\n+        final Matcher<View> summary = withId(com.mercadopago.android.px.R.id.summary);\n+        final Matcher<View> description = withId(com.mercadopago.android.px.R.id.description);\n+        onView(summary).check(matches(withEffectiveVisibility(ViewMatchers.Visibility.VISIBLE)));\n+        onView(description).check(matches(withEffectiveVisibility(ViewMatchers.Visibility.VISIBLE)));\n+\n+\n+        onView(description)\n+            .check(matches(withText(com.mercadopago.android.px.R.string.px_we_apply_the_best_available_discount)));\n     }\n \n     @Override\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI1MDgzMg==", "url": "https://github.com/mercadopago/px-android/pull/2228#discussion_r458250832", "bodyText": "Idem", "author": "cgaggino", "createdAt": "2020-07-21T17:00:57Z", "path": "px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/UsedUpDiscountValidator.java", "diffHunk": "@@ -21,12 +21,7 @@\n public class UsedUpDiscountValidator extends DefaultValidator {\n     @Override\n     public void validate(@NonNull final DiscountDetailPage discountDetailPage) {\n-        final Matcher<View> discountDetailLine = withId(com.mercadopago.android.px.R.id.px_discount_detail_line);", "originalCommit": "f4d7c9cdf6b4b08316d1feed757fd67f5bbc19f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f1e50842164de4e2b31866b17cb8ea9ff6be3f8e", "chunk": "diff --git a/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/UsedUpDiscountValidator.java b/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/UsedUpDiscountValidator.java\nindex d8e8c2694..5eba3b842 100644\n--- a/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/UsedUpDiscountValidator.java\n+++ b/px-testlib/src/main/java/com/mercadopago/android/px/testcheckout/assertions/UsedUpDiscountValidator.java\n\n@@ -21,7 +21,12 @@ import static android.support.test.espresso.matcher.ViewMatchers.withText;\n public class UsedUpDiscountValidator extends DefaultValidator {\n     @Override\n     public void validate(@NonNull final DiscountDetailPage discountDetailPage) {\n-        // TODO implement.\n+        final Matcher<View> summary = withId(com.mercadopago.android.px.R.id.summary);\n+        final Matcher<View> description = withId(com.mercadopago.android.px.R.id.description);\n+        final Matcher<View> detail = withId(com.mercadopago.android.px.R.id.detail);\n+        onView(summary).check(matches(withEffectiveVisibility(ViewMatchers.Visibility.GONE)));\n+        onView(description).check(matches(withEffectiveVisibility(ViewMatchers.Visibility.GONE)));\n+        onView(detail).check(matches(withText(com.mercadopago.android.px.R.string.px_used_up_discount_detail)));\n     }\n \n     @Override\n"}}, {"oid": "6eb1dbe7c80da1ef6e7a7429289ee2c60075ea6d", "url": "https://github.com/mercadopago/px-android/commit/6eb1dbe7c80da1ef6e7a7429289ee2c60075ea6d", "message": "model abstraction, method name changed", "committedDate": "2020-07-22T12:16:21Z", "type": "commit"}, {"oid": "f1e50842164de4e2b31866b17cb8ea9ff6be3f8e", "url": "https://github.com/mercadopago/px-android/commit/f1e50842164de4e2b31866b17cb8ea9ff6be3f8e", "message": "revert test changes", "committedDate": "2020-07-22T17:04:05Z", "type": "commit"}, {"oid": "6dd4e9523b784df6e1b66d50ef345f8aa274f0db", "url": "https://github.com/mercadopago/px-android/commit/6dd4e9523b784df6e1b66d50ef345f8aa274f0db", "message": "update isScreenSize method", "committedDate": "2020-07-22T18:26:58Z", "type": "commit"}, {"oid": "8b460c86ba2f731739a212874e897abcb1865a98", "url": "https://github.com/mercadopago/px-android/commit/8b460c86ba2f731739a212874e897abcb1865a98", "message": "added check for discountdescription model", "committedDate": "2020-07-23T15:47:49Z", "type": "commit"}, {"oid": "154275fa06100a84a0cd561f20e0eab67925486d", "url": "https://github.com/mercadopago/px-android/commit/154275fa06100a84a0cd561f20e0eab67925486d", "message": "update test for discount", "committedDate": "2020-07-23T16:47:12Z", "type": "commit"}]}