{"pr_number": 979, "pr_title": "restore the missing L in Location", "pr_createdAt": "2020-09-25T13:16:45Z", "pr_url": "https://github.com/folio-org/okapi/pull/979", "timeline": [{"oid": "c168610bbd65fa6edad24b94685e0ba2d4a870c1", "url": "https://github.com/folio-org/okapi/commit/c168610bbd65fa6edad24b94685e0ba2d4a870c1", "message": "restore the missing L in Location\n\nRestore the missing `L` from `Location`, which doesn't actually matter\nsince the test for the `ocation` substring still succeeds, but this\nlooks nicer.", "committedDate": "2020-09-25T13:15:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA2Mzg0Nw==", "url": "https://github.com/folio-org/okapi/pull/979#discussion_r497063847", "bodyText": "The build fails with\nProxyTest.testProxy:1348 1 expectation failed.\nExpected header \"Access-Control-Expose-Headers\" was not a string containing\n\"Location,X-Okapi-Trace,X-Okapi-Token,Authorization,X-Okapi-Request-Id\", was \n\"location,X-Okapi-Trace,X-Okapi-Token,Authorization,X-Okapi-Request-Id,X-Okapi-Module-Id\".", "author": "julianladisch", "createdAt": "2020-09-29T21:14:54Z", "path": "okapi-core/src/test/java/org/folio/okapi/ProxyTest.java", "diffHunk": "@@ -1346,7 +1346,7 @@ public void testProxy(TestContext context) {\n       .then().statusCode(200)\n       .header(\"Access-Control-Allow-Origin\", \"*\")\n       .header(\"Access-Control-Expose-Headers\", containsString(\n-        \"ocation,X-Okapi-Trace,X-Okapi-Token,Authorization,X-Okapi-Request-Id\"))\n+        \"Location,X-Okapi-Trace,X-Okapi-Token,Authorization,X-Okapi-Request-Id\"))", "originalCommit": "c168610bbd65fa6edad24b94685e0ba2d4a870c1", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4a2dcef23bfeacced3b171c3ad4e0ff4e9802b6e", "chunk": "diff --git a/okapi-core/src/test/java/org/folio/okapi/ProxyTest.java b/okapi-core/src/test/java/org/folio/okapi/ProxyTest.java\nindex cf223ae1..fc722211 100644\n--- a/okapi-core/src/test/java/org/folio/okapi/ProxyTest.java\n+++ b/okapi-core/src/test/java/org/folio/okapi/ProxyTest.java\n\n@@ -1345,7 +1345,7 @@ public class ProxyTest {\n       .get(\"/testb\")\n       .then().statusCode(200)\n       .header(\"Access-Control-Allow-Origin\", \"*\")\n-      .header(\"Access-Control-Expose-Headers\", containsString(\n+      .header(\"Access-Control-Expose-Headers\", startsWithIgnoringCase(\n         \"Location,X-Okapi-Trace,X-Okapi-Token,Authorization,X-Okapi-Request-Id\"))\n       .body(equalTo(\"It works\"));\n \n"}}, {"oid": "4a2dcef23bfeacced3b171c3ad4e0ff4e9802b6e", "url": "https://github.com/folio-org/okapi/commit/4a2dcef23bfeacced3b171c3ad4e0ff4e9802b6e", "message": "case insensitive Access-Control-Expose-Headers comparison", "committedDate": "2020-09-29T21:43:09Z", "type": "commit"}, {"oid": "01b6d00af36cd4b18552fecd5a5080d907123d7b", "url": "https://github.com/folio-org/okapi/commit/01b6d00af36cd4b18552fecd5a5080d907123d7b", "message": "Merge branch 'master' into recover-missing-l", "committedDate": "2020-09-30T14:48:58Z", "type": "commit"}]}