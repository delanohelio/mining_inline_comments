{"pr_number": 956, "pr_title": "Fix lineage for FacetCheck", "pr_createdAt": "2020-10-20T19:06:52Z", "pr_url": "https://github.com/NationalSecurityAgency/datawave/pull/956", "timeline": [{"oid": "4ac3f0b8fcb902b7a93c0a60883b1b7bce4db6eb", "url": "https://github.com/NationalSecurityAgency/datawave/commit/4ac3f0b8fcb902b7a93c0a60883b1b7bce4db6eb", "message": "Fix lineage for FacetCheck\n\nFacetCheck does not return a query tree with a valid lineage. Ensure\nthat lineage is properly established and add unit tests to assert this.\n\nPart of #880.", "committedDate": "2020-10-20T19:06:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ2Nzg4MA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/956#discussion_r509467880", "bodyText": "no System.out messages please.", "author": "ivakegg", "createdAt": "2020-10-21T17:20:23Z", "path": "warehouse/query-core/src/main/java/datawave/query/tables/facets/FacetCheck.java", "diffHunk": "@@ -58,10 +69,11 @@ protected JexlNode equalityVisitor(JexlNode node, Object data) {\n             PreConditionFailedQueryException qe = new PreConditionFailedQueryException(DatawaveErrorCode.FIELD_NOT_INDEXED, MessageFormat.format(\n                             \"Fieldname: {0}\", fieldName));\n             throw new InvalidFieldIndexQueryFatalQueryException(qe);\n+        } else {\n+            System.out.println(\"Facet found\");", "originalCommit": "4ac3f0b8fcb902b7a93c0a60883b1b7bce4db6eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4NjM0MQ==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/956#discussion_r509486341", "bodyText": "Fixed.", "author": "lbschanno", "createdAt": "2020-10-21T17:37:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ2Nzg4MA=="}], "type": "inlineReview", "revised_code": {"commit": "945c98c77ed65f11fc2d0b46464c78b44014ec7b", "chunk": "diff --git a/warehouse/query-core/src/main/java/datawave/query/tables/facets/FacetCheck.java b/warehouse/query-core/src/main/java/datawave/query/tables/facets/FacetCheck.java\nindex bb95a6f76..e71a12d36 100644\n--- a/warehouse/query-core/src/main/java/datawave/query/tables/facets/FacetCheck.java\n+++ b/warehouse/query-core/src/main/java/datawave/query/tables/facets/FacetCheck.java\n\n@@ -69,8 +69,6 @@ public class FacetCheck extends AllTermsIndexedVisitor {\n             PreConditionFailedQueryException qe = new PreConditionFailedQueryException(DatawaveErrorCode.FIELD_NOT_INDEXED, MessageFormat.format(\n                             \"Fieldname: {0}\", fieldName));\n             throw new InvalidFieldIndexQueryFatalQueryException(qe);\n-        } else {\n-            System.out.println(\"Facet found\");\n         }\n         \n         return copy(node);\n"}}, {"oid": "945c98c77ed65f11fc2d0b46464c78b44014ec7b", "url": "https://github.com/NationalSecurityAgency/datawave/commit/945c98c77ed65f11fc2d0b46464c78b44014ec7b", "message": "Remove System.out", "committedDate": "2020-10-21T17:36:00Z", "type": "commit"}, {"oid": "32c9539d1f0c0c0e0deaf2cc901a0a6ca0fa2385", "url": "https://github.com/NationalSecurityAgency/datawave/commit/32c9539d1f0c0c0e0deaf2cc901a0a6ca0fa2385", "message": "Merge branch 'master' into 880-FacetCheck", "committedDate": "2020-10-30T00:41:30Z", "type": "commit"}]}