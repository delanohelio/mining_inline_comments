{"pr_number": 5729, "pr_title": "Fixes #3080 - Do not create and use jars with \"tests\" classifier.", "pr_createdAt": "2020-11-25T18:19:39Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/5729", "timeline": [{"oid": "5d83f6670aaf43571e1812078c3ad790b80b2fdf", "url": "https://github.com/eclipse/jetty.project/commit/5d83f6670aaf43571e1812078c3ad790b80b2fdf", "message": "Fixes #3080 - Do not create and use jars with \"tests\" classifier.\n\nRemoved the jetty-server and jetty-servlet test-jar artifacts.\nThe only one left is the jetty-maven-plugin test-jar.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>", "committedDate": "2020-11-25T18:16:50Z", "type": "commit"}, {"oid": "3ca8ef029762ef4fbdde2fe2df3047d310a9a296", "url": "https://github.com/eclipse/jetty.project/commit/3ca8ef029762ef4fbdde2fe2df3047d310a9a296", "message": "Fixes #3080 - Do not create and use jars with \"tests\" classifier.\n\nReinstated ServletTester in src/main/java for backwards compatibility.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>", "committedDate": "2020-11-26T09:48:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwNzM2OQ==", "url": "https://github.com/eclipse/jetty.project/pull/5729#discussion_r530907369", "bodyText": "Perhaps say:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * <p>ServletTester should not be used.</p>\n          \n          \n            \n             * <p>ServletTester is not best practise and may be deprecated in future releases.</p>", "author": "gregw", "createdAt": "2020-11-26T09:58:21Z", "path": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java", "diffHunk": "@@ -39,6 +40,51 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n+/**\n+ * <p>ServletTester should not be used.</p>", "originalCommit": "3ca8ef029762ef4fbdde2fe2df3047d310a9a296", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8131bb2f85c3ece1461f0ce1e67cc68199b88c31", "chunk": "diff --git a/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java b/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java\nindex 43b7ee80a0..5e1d5edab4 100644\n--- a/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java\n+++ b/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java\n\n@@ -41,7 +41,8 @@ import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n /**\n- * <p>ServletTester should not be used.</p>\n+ * <p>ServletTester is not best practice and may be deprecated and eventually\n+ * removed in future Jetty versions.</p>\n  * <p>ServletTester is a just a wrapper around a {@link ServletContextHandler},\n  * with a {@link LocalConnector} to accept HTTP/1.1 requests, so there is no\n  * value that this class adds to already existing classes.</p>\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwODQ4Mg==", "url": "https://github.com/eclipse/jetty.project/pull/5729#discussion_r530908482", "bodyText": "Perhaps show two examples.  One using LocalConnector directly with strings and then show HttpTester usage.", "author": "gregw", "createdAt": "2020-11-26T09:59:52Z", "path": "jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java", "diffHunk": "@@ -39,6 +40,51 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n+/**\n+ * <p>ServletTester should not be used.</p>\n+ * <p>ServletTester is a just a wrapper around a {@link ServletContextHandler},\n+ * with a {@link LocalConnector} to accept HTTP/1.1 requests, so there is no\n+ * value that this class adds to already existing classes.</p>\n+ * <p>Replace its usages with:</p>\n+ * <pre>\n+ * Server server = new Server();\n+ * LocalConnector connector = new LocalConnector(server);\n+ * server.addConnector(connector);\n+ * ServletContextHandler context = new ServletContextHandler(server, \"/contextPath\");\n+ * // Configure the context here.\n+ * server.start();\n+ * </pre>\n+ * <p>You can configure the context by adding Servlets and Filters, attributes,\n+ * etc. even after it has been started.\n+ * Use {@link HttpTester} and {@link LocalConnector} to make HTTP/1.1 requests,\n+ * in this way:</p>\n+ * <pre>\n+ * // Generate the request.", "originalCommit": "3ca8ef029762ef4fbdde2fe2df3047d310a9a296", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwODcyMg==", "url": "https://github.com/eclipse/jetty.project/pull/5729#discussion_r530908722", "bodyText": "actually never mind...", "author": "gregw", "createdAt": "2020-11-26T10:00:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwODQ4Mg=="}], "type": "inlineReview", "revised_code": {"commit": "8131bb2f85c3ece1461f0ce1e67cc68199b88c31", "chunk": "diff --git a/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java b/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java\nindex 43b7ee80a0..5e1d5edab4 100644\n--- a/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java\n+++ b/jetty-servlet/src/main/java/org/eclipse/jetty/servlet/ServletTester.java\n\n@@ -41,7 +41,8 @@ import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n /**\n- * <p>ServletTester should not be used.</p>\n+ * <p>ServletTester is not best practice and may be deprecated and eventually\n+ * removed in future Jetty versions.</p>\n  * <p>ServletTester is a just a wrapper around a {@link ServletContextHandler},\n  * with a {@link LocalConnector} to accept HTTP/1.1 requests, so there is no\n  * value that this class adds to already existing classes.</p>\n"}}, {"oid": "8131bb2f85c3ece1461f0ce1e67cc68199b88c31", "url": "https://github.com/eclipse/jetty.project/commit/8131bb2f85c3ece1461f0ce1e67cc68199b88c31", "message": "Fixes #3080 - Do not create and use jars with \"tests\" classifier.\n\nUpdates after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>", "committedDate": "2020-11-26T10:20:36Z", "type": "commit"}]}