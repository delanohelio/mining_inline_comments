{"pr_number": 4858, "pr_title": "Issue #4857 - add setReuseAddress() to ClientConnector", "pr_createdAt": "2020-05-08T12:46:30Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/4858", "timeline": [{"oid": "aae162ca87b91954b928ffa26b6c76e36da0b409", "url": "https://github.com/eclipse/jetty.project/commit/aae162ca87b91954b928ffa26b6c76e36da0b409", "message": "force to reuse address in JMX RMI ServerSocket\n\nSigned-off-by: Ludovic Orban <lorban@bitronix.be>", "committedDate": "2020-05-08T12:45:07Z", "type": "commit"}, {"oid": "1d424a304bc848e44cb8676bcb36ef218babb2d4", "url": "https://github.com/eclipse/jetty.project/commit/1d424a304bc848e44cb8676bcb36ef218babb2d4", "message": "Add setReuseAddress() to ClientConnector\n\nSigned-off-by: Ludovic Orban <lorban@bitronix.be>", "committedDate": "2020-05-08T15:54:01Z", "type": "commit"}, {"oid": "1d424a304bc848e44cb8676bcb36ef218babb2d4", "url": "https://github.com/eclipse/jetty.project/commit/1d424a304bc848e44cb8676bcb36ef218babb2d4", "message": "Add setReuseAddress() to ClientConnector\n\nSigned-off-by: Ludovic Orban <lorban@bitronix.be>", "committedDate": "2020-05-08T15:54:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIwMzI4Mw==", "url": "https://github.com/eclipse/jetty.project/pull/4858#discussion_r422203283", "bodyText": "Please remove these, must only be in ClientConnector.", "author": "sbordet", "createdAt": "2020-05-08T15:17:19Z", "path": "jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java", "diffHunk": "@@ -725,6 +725,25 @@ public void setBindAddress(SocketAddress bindAddress)\n         connector.setBindAddress(bindAddress);\n     }\n \n+    /**\n+     * @return What {@link java.net.StandardSocketOptions#SO_REUSEADDR SO_REUSEADDR} should be set to.\n+     * @see #setReuseAddress(boolean)\n+     */\n+    public boolean getReuseAddress()\n+    {\n+        return connector.getReuseAddress();\n+    }\n+\n+    /**\n+     * @param reuseAddress what {@link java.net.StandardSocketOptions#SO_REUSEADDR SO_REUSEADDR} should be set to.\n+     * @see #getReuseAddress()\n+     * @see SocketChannel#setOption(java.net.SocketOption, Object)\n+     */\n+    public void setReuseAddress(boolean reuseAddress)\n+    {\n+        connector.setReuseAddress(reuseAddress);\n+    }\n+", "originalCommit": "c0b506119590c69947ac9cd058ca4d1a6068d3a5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d424a304bc848e44cb8676bcb36ef218babb2d4", "chunk": "diff --git a/jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java b/jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java\nindex 7e8848bb40..f5270c93dc 100644\n--- a/jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java\n+++ b/jetty-client/src/main/java/org/eclipse/jetty/client/HttpClient.java\n\n@@ -725,25 +725,6 @@ public class HttpClient extends ContainerLifeCycle\n         connector.setBindAddress(bindAddress);\n     }\n \n-    /**\n-     * @return What {@link java.net.StandardSocketOptions#SO_REUSEADDR SO_REUSEADDR} should be set to.\n-     * @see #setReuseAddress(boolean)\n-     */\n-    public boolean getReuseAddress()\n-    {\n-        return connector.getReuseAddress();\n-    }\n-\n-    /**\n-     * @param reuseAddress what {@link java.net.StandardSocketOptions#SO_REUSEADDR SO_REUSEADDR} should be set to.\n-     * @see #getReuseAddress()\n-     * @see SocketChannel#setOption(java.net.SocketOption, Object)\n-     */\n-    public void setReuseAddress(boolean reuseAddress)\n-    {\n-        connector.setReuseAddress(reuseAddress);\n-    }\n-\n     /**\n      * @return the \"User-Agent\" HTTP field of this HttpClient\n      */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIwMzQ0OQ==", "url": "https://github.com/eclipse/jetty.project/pull/4858#discussion_r422203449", "bodyText": "Ditto.", "author": "sbordet", "createdAt": "2020-05-08T15:17:36Z", "path": "jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java", "diffHunk": "@@ -240,6 +240,16 @@ public void setBindAddress(SocketAddress bindAddress)\n         connector.setBindAddress(bindAddress);\n     }\n \n+    public boolean getReuseAddress()\n+    {\n+        return connector.getReuseAddress();\n+    }\n+\n+    public void setReuseAddress(boolean reuseAddress)\n+    {\n+        connector.setReuseAddress(reuseAddress);\n+    }\n+", "originalCommit": "c0b506119590c69947ac9cd058ca4d1a6068d3a5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d424a304bc848e44cb8676bcb36ef218babb2d4", "chunk": "diff --git a/jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java b/jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java\nindex a0bf57bb68..2e26a34f2c 100644\n--- a/jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java\n+++ b/jetty-http2/http2-client/src/main/java/org/eclipse/jetty/http2/client/HTTP2Client.java\n\n@@ -240,16 +240,6 @@ public class HTTP2Client extends ContainerLifeCycle\n         connector.setBindAddress(bindAddress);\n     }\n \n-    public boolean getReuseAddress()\n-    {\n-        return connector.getReuseAddress();\n-    }\n-\n-    public void setReuseAddress(boolean reuseAddress)\n-    {\n-        connector.setReuseAddress(reuseAddress);\n-    }\n-\n     @ManagedAttribute(\"The size of the buffer used to read from the network\")\n     public int getInputBufferSize()\n     {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIwNDE1Ng==", "url": "https://github.com/eclipse/jetty.project/pull/4858#discussion_r422204156", "bodyText": "Remove these too.", "author": "sbordet", "createdAt": "2020-05-08T15:18:59Z", "path": "jetty-websocket/websocket-jetty-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java", "diffHunk": "@@ -302,6 +302,16 @@ public void setBindAddress(SocketAddress bindAddress)\n         getHttpClient().setBindAddress(bindAddress);\n     }\n \n+    public boolean getReuseAddress()\n+    {\n+        return getHttpClient().getReuseAddress();\n+    }\n+\n+    public void setReuseAddress(boolean reuseAddress)\n+    {\n+        getHttpClient().setReuseAddress(reuseAddress);\n+    }\n+", "originalCommit": "c0b506119590c69947ac9cd058ca4d1a6068d3a5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1d424a304bc848e44cb8676bcb36ef218babb2d4", "chunk": "diff --git a/jetty-websocket/websocket-jetty-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java b/jetty-websocket/websocket-jetty-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java\nindex aae3280702..56f74cc452 100644\n--- a/jetty-websocket/websocket-jetty-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java\n+++ b/jetty-websocket/websocket-jetty-client/src/main/java/org/eclipse/jetty/websocket/client/WebSocketClient.java\n\n@@ -302,16 +302,6 @@ public class WebSocketClient extends ContainerLifeCycle implements WebSocketPoli\n         getHttpClient().setBindAddress(bindAddress);\n     }\n \n-    public boolean getReuseAddress()\n-    {\n-        return getHttpClient().getReuseAddress();\n-    }\n-\n-    public void setReuseAddress(boolean reuseAddress)\n-    {\n-        getHttpClient().setReuseAddress(reuseAddress);\n-    }\n-\n     public long getConnectTimeout()\n     {\n         return getHttpClient().getConnectTimeout();\n"}}]}