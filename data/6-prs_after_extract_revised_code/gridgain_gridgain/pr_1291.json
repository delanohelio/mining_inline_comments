{"pr_number": 1291, "pr_title": "GG-29644: DR: Incremental state transfer index.", "pr_createdAt": "2020-07-08T10:53:24Z", "pr_url": "https://github.com/gridgain/gridgain/pull/1291", "timeline": [{"oid": "bcca8f2d7704718ef13af00d2d255ab64d8f7c77", "url": "https://github.com/gridgain/gridgain/commit/bcca8f2d7704718ef13af00d2d255ab64d8f7c77", "message": "WIP.\n- Create partition log tree.\n- Create new pageIO version.\n- Fix page upgrade code.", "committedDate": "2020-06-22T15:56:48Z", "type": "commit"}, {"oid": "c95e5a3856b98cf5349bc0ea5b7ba9ffb9f8ac5a", "url": "https://github.com/gridgain/gridgain/commit/c95e5a3856b98cf5349bc0ea5b7ba9ffb9f8ac5a", "message": "Minor.", "committedDate": "2020-06-22T18:13:19Z", "type": "commit"}, {"oid": "0a2cd35a9bb60a560d2e1731f031159b5615c894", "url": "https://github.com/gridgain/gridgain/commit/0a2cd35a9bb60a560d2e1731f031159b5615c894", "message": "WIP.", "committedDate": "2020-06-23T10:05:18Z", "type": "commit"}, {"oid": "d2eab3824bb0f241640c2ba2ef71839fef7ecd5f", "url": "https://github.com/gridgain/gridgain/commit/d2eab3824bb0f241640c2ba2ef71839fef7ecd5f", "message": "WIP.\nTests added.", "committedDate": "2020-06-25T13:53:14Z", "type": "commit"}, {"oid": "0c551e5430d3479a2035fc7ad72d45d70254aaec", "url": "https://github.com/gridgain/gridgain/commit/0c551e5430d3479a2035fc7ad72d45d70254aaec", "message": "WIP.", "committedDate": "2020-06-25T15:35:23Z", "type": "commit"}, {"oid": "cf1f8a7a45f5562d215147b95979ec3e98103439", "url": "https://github.com/gridgain/gridgain/commit/cf1f8a7a45f5562d215147b95979ec3e98103439", "message": "WIP.\nFix persistence test.", "committedDate": "2020-06-25T18:01:05Z", "type": "commit"}, {"oid": "f3d48c9d2c5ffffee4dfb1f4d54a1387cea2410b", "url": "https://github.com/gridgain/gridgain/commit/f3d48c9d2c5ffffee4dfb1f4d54a1387cea2410b", "message": "Fix tests.", "committedDate": "2020-06-26T13:58:55Z", "type": "commit"}, {"oid": "8521ff9ccb2072f634f908a79ddebffea713521a", "url": "https://github.com/gridgain/gridgain/commit/8521ff9ccb2072f634f908a79ddebffea713521a", "message": "Minor.", "committedDate": "2020-06-29T08:28:42Z", "type": "commit"}, {"oid": "d69968fe9a3c37567c46b14ef18297f148096b20", "url": "https://github.com/gridgain/gridgain/commit/d69968fe9a3c37567c46b14ef18297f148096b20", "message": "Minor.", "committedDate": "2020-06-29T09:19:13Z", "type": "commit"}, {"oid": "f9ffc0ac554b0758a0a243750da039f6720495b0", "url": "https://github.com/gridgain/gridgain/commit/f9ffc0ac554b0758a0a243750da039f6720495b0", "message": "Styles", "committedDate": "2020-06-29T09:56:24Z", "type": "commit"}, {"oid": "dd0ed53137757d0e0e0534be6575ebe10a23c0d2", "url": "https://github.com/gridgain/gridgain/commit/dd0ed53137757d0e0e0534be6575ebe10a23c0d2", "message": "Add negative versions support.", "committedDate": "2020-06-29T11:47:55Z", "type": "commit"}, {"oid": "f99449b6585b1e06bb9efb673676f272e7f4ab58", "url": "https://github.com/gridgain/gridgain/commit/f99449b6585b1e06bb9efb673676f272e7f4ab58", "message": "Styles", "committedDate": "2020-06-29T12:06:53Z", "type": "commit"}, {"oid": "4f570efe38e5deb7bbca397d63b2adc268e6d226", "url": "https://github.com/gridgain/gridgain/commit/4f570efe38e5deb7bbca397d63b2adc268e6d226", "message": "Fix Mvcc cache.", "committedDate": "2020-06-29T16:06:25Z", "type": "commit"}, {"oid": "a78c1812b1ac991848bb535dd35e8e4a271bdc58", "url": "https://github.com/gridgain/gridgain/commit/a78c1812b1ac991848bb535dd35e8e4a271bdc58", "message": "Remove todos. Minors.", "committedDate": "2020-06-30T11:27:11Z", "type": "commit"}, {"oid": "d5efb17014ae60815fe0cffd288c6ab62820b4b2", "url": "https://github.com/gridgain/gridgain/commit/d5efb17014ae60815fe0cffd288c6ab62820b4b2", "message": "Minor", "committedDate": "2020-06-30T11:37:01Z", "type": "commit"}, {"oid": "be0f3108f3249b02e76f611997010aafde4765bf", "url": "https://github.com/gridgain/gridgain/commit/be0f3108f3249b02e76f611997010aafde4765bf", "message": "Styles", "committedDate": "2020-06-30T11:54:31Z", "type": "commit"}, {"oid": "c6cbb7b69ce304afd3fb83850dc81a9a43a6115b", "url": "https://github.com/gridgain/gridgain/commit/c6cbb7b69ce304afd3fb83850dc81a9a43a6115b", "message": "Minors", "committedDate": "2020-06-30T14:03:12Z", "type": "commit"}, {"oid": "35bccda4eae1b4a97a5845f12ebe8b6286b1c4d9", "url": "https://github.com/gridgain/gridgain/commit/35bccda4eae1b4a97a5845f12ebe8b6286b1c4d9", "message": "Minors", "committedDate": "2020-06-30T17:14:23Z", "type": "commit"}, {"oid": "5acfe93c346944b989817308bbe0acc2de52f236", "url": "https://github.com/gridgain/gridgain/commit/5acfe93c346944b989817308bbe0acc2de52f236", "message": "Minors", "committedDate": "2020-07-02T14:28:46Z", "type": "commit"}, {"oid": "d448639cb1eacc7d2dc989f25dd3f3590b265ca6", "url": "https://github.com/gridgain/gridgain/commit/d448639cb1eacc7d2dc989f25dd3f3590b265ca6", "message": "Minors", "committedDate": "2020-07-02T16:18:52Z", "type": "commit"}, {"oid": "3bb1fb4916c8671ff254b0ecc6fb7028ecfe54c7", "url": "https://github.com/gridgain/gridgain/commit/3bb1fb4916c8671ff254b0ecc6fb7028ecfe54c7", "message": "Revert mvcc fix.", "committedDate": "2020-07-02T20:14:07Z", "type": "commit"}, {"oid": "a5dfc177b007c6297ed72f22d769af45a0b0d321", "url": "https://github.com/gridgain/gridgain/commit/a5dfc177b007c6297ed72f22d769af45a0b0d321", "message": "Merge branch 'master' into gg-29644", "committedDate": "2020-07-03T07:59:04Z", "type": "commit"}, {"oid": "e01f06e12932c1f37caa7a0e2800cfb59a15849b", "url": "https://github.com/gridgain/gridgain/commit/e01f06e12932c1f37caa7a0e2800cfb59a15849b", "message": "Fix tests.", "committedDate": "2020-07-03T10:32:32Z", "type": "commit"}, {"oid": "847deff225a57dc2279a586ef05dccb7e341a79e", "url": "https://github.com/gridgain/gridgain/commit/847deff225a57dc2279a586ef05dccb7e341a79e", "message": "Fix tests.", "committedDate": "2020-07-03T12:48:47Z", "type": "commit"}, {"oid": "a7438cf6c01c81591a5aa28d7cdf9edc273c9da3", "url": "https://github.com/gridgain/gridgain/commit/a7438cf6c01c81591a5aa28d7cdf9edc273c9da3", "message": "Fix tree destroy.", "committedDate": "2020-07-03T13:06:23Z", "type": "commit"}, {"oid": "331e06cf1216ac3451b07e088b803c5c9ff41022", "url": "https://github.com/gridgain/gridgain/commit/331e06cf1216ac3451b07e088b803c5c9ff41022", "message": "Fix tests.", "committedDate": "2020-07-03T13:46:02Z", "type": "commit"}, {"oid": "a9f1dcb9c31a62eba8aae329185c9fecd88d9df9", "url": "https://github.com/gridgain/gridgain/commit/a9f1dcb9c31a62eba8aae329185c9fecd88d9df9", "message": "Fix tests.", "committedDate": "2020-07-03T14:27:34Z", "type": "commit"}, {"oid": "3a40a8f0a26c9aaf227bef35dc6670b53dc493c5", "url": "https://github.com/gridgain/gridgain/commit/3a40a8f0a26c9aaf227bef35dc6670b53dc493c5", "message": "Fix tests.", "committedDate": "2020-07-03T14:37:14Z", "type": "commit"}, {"oid": "f26b3c7311674f7963ea7736634259ac533df58f", "url": "https://github.com/gridgain/gridgain/commit/f26b3c7311674f7963ea7736634259ac533df58f", "message": "Fix tests.", "committedDate": "2020-07-03T14:47:35Z", "type": "commit"}, {"oid": "13b1cd8bd5a47cb6c54344f308ca94bad2df1cf5", "url": "https://github.com/gridgain/gridgain/commit/13b1cd8bd5a47cb6c54344f308ca94bad2df1cf5", "message": "minor.", "committedDate": "2020-07-07T08:12:54Z", "type": "commit"}, {"oid": "e87627ee3e3f38a24532b3003a352aeb2a3d2b02", "url": "https://github.com/gridgain/gridgain/commit/e87627ee3e3f38a24532b3003a352aeb2a3d2b02", "message": "Fix compatibility.", "committedDate": "2020-07-07T08:29:13Z", "type": "commit"}, {"oid": "7f20483b5f054d8290e9bd13c50ba62941270c90", "url": "https://github.com/gridgain/gridgain/commit/7f20483b5f054d8290e9bd13c50ba62941270c90", "message": "minor.", "committedDate": "2020-07-07T10:20:10Z", "type": "commit"}, {"oid": "9c40878a434b0dd305342a7db57032ce57cab576", "url": "https://github.com/gridgain/gridgain/commit/9c40878a434b0dd305342a7db57032ce57cab576", "message": "Merge branch 'master' into gg-29644", "committedDate": "2020-07-07T10:28:17Z", "type": "commit"}, {"oid": "f685c72fa16c24fc16612e9df9739bd474ce2a76", "url": "https://github.com/gridgain/gridgain/commit/f685c72fa16c24fc16612e9df9739bd474ce2a76", "message": "Minor.", "committedDate": "2020-07-07T11:48:43Z", "type": "commit"}, {"oid": "56901091c9cf52921c0f20a717c4feadf857fec2", "url": "https://github.com/gridgain/gridgain/commit/56901091c9cf52921c0f20a717c4feadf857fec2", "message": "Fix compatibility.", "committedDate": "2020-07-07T12:54:40Z", "type": "commit"}, {"oid": "8008e993853b75068d5eca703faa9cffa544b220", "url": "https://github.com/gridgain/gridgain/commit/8008e993853b75068d5eca703faa9cffa544b220", "message": "Fix PartitionLog row.", "committedDate": "2020-07-22T09:42:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc0OTQ5NQ==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458749495", "bodyText": "True -> true, .m -> ,", "author": "korlov42", "createdAt": "2020-07-22T12:19:48Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/IgniteCacheOffheapManagerImpl.java", "diffHunk": "@@ -3159,6 +3231,14 @@ public boolean found() {\n         }\n     }\n \n+    /**\n+     * @param cctx Cache context.\n+     * @return {@code True} if Incremental DR enabled for cache.m {@code false} otherwise.", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/IgniteCacheOffheapManagerImpl.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/IgniteCacheOffheapManagerImpl.java\nindex 6d4867d208d..8ba421732da 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/IgniteCacheOffheapManagerImpl.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/IgniteCacheOffheapManagerImpl.java\n\n@@ -3233,7 +3234,7 @@ public class IgniteCacheOffheapManagerImpl implements IgniteCacheOffheapManager\n \n     /**\n      * @param cctx Cache context.\n-     * @return {@code True} if Incremental DR enabled for cache.m {@code false} otherwise.\n+     * @return {@code true} if IncrementalDR enabled for cache, {@code false} otherwise.\n      */\n     private boolean isIncrementalDrEnabled(GridCacheContext cctx) {\n         return IS_INCREMENTAL_DR_ENABLED && cctx.isDrEnabled();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2MDc2Mw==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458760763", "bodyText": "updateCntr is ignored", "author": "korlov42", "createdAt": "2020-07-22T12:39:58Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java", "diffHunk": "@@ -50,7 +50,7 @@ public GridCacheVersionEx() {\n      * @param dataCenterId Data center ID.\n      * @param drVer DR version.\n      */\n-    public GridCacheVersionEx(int topVer, long order, int nodeOrder, byte dataCenterId,\n+    public GridCacheVersionEx(int topVer, long order, int nodeOrder, byte dataCenterId, long updateCntr,", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java\nindex 9a1a6269bc8..d9fca811e4e 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java\n\n@@ -57,6 +58,7 @@ public class GridCacheVersionEx extends GridCacheVersion {\n         assert drVer != null && !(drVer instanceof GridCacheVersionEx); // DR version can only be plain here.\n \n         this.drVer = drVer;\n+        this.updateCounter(updateCntr);\n     }\n \n     /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2Mjc4OQ==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458762789", "bodyText": "misleading comment", "author": "korlov42", "createdAt": "2020-07-22T12:43:39Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java", "diffHunk": "@@ -0,0 +1,119 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.processors.cache.CacheGroupContext;\n+import org.apache.ignite.internal.processors.cache.CacheObject;\n+import org.apache.ignite.internal.processors.cache.KeyCacheObject;\n+import org.apache.ignite.internal.processors.cache.persistence.CacheDataRowAdapter;\n+import org.apache.ignite.internal.processors.cache.version.GridCacheVersion;\n+import org.apache.ignite.internal.util.tostring.GridToStringInclude;\n+import org.apache.ignite.internal.util.typedef.internal.S;\n+\n+/**\n+ *\n+ */\n+public class UpdateLogRow {\n+    /** Cache ID. */\n+    @GridToStringInclude\n+    public int cacheId;\n+\n+    /** Expire time. */", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/UpdateLogRow.java\nsimilarity index 89%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/UpdateLogRow.java\nindex 2bf232b8d58..ece99e5a34a 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/UpdateLogRow.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.processors.cache.CacheGroupContext;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2NDcxMg==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458764712", "bodyText": "Why do you make it public?", "author": "korlov42", "createdAt": "2020-07-22T12:46:50Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java", "diffHunk": "@@ -0,0 +1,119 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.processors.cache.CacheGroupContext;\n+import org.apache.ignite.internal.processors.cache.CacheObject;\n+import org.apache.ignite.internal.processors.cache.KeyCacheObject;\n+import org.apache.ignite.internal.processors.cache.persistence.CacheDataRowAdapter;\n+import org.apache.ignite.internal.processors.cache.version.GridCacheVersion;\n+import org.apache.ignite.internal.util.tostring.GridToStringInclude;\n+import org.apache.ignite.internal.util.typedef.internal.S;\n+\n+/**\n+ *\n+ */\n+public class UpdateLogRow {\n+    /** Cache ID. */\n+    @GridToStringInclude\n+    public int cacheId;", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/UpdateLogRow.java\nsimilarity index 89%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/UpdateLogRow.java\nindex 2bf232b8d58..ece99e5a34a 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/UpdateLogRow.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/UpdateLogRow.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.processors.cache.CacheGroupContext;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwNDMyMQ==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458804321", "bodyText": "@Override public void store(\n        long dstPageAddr,\n        int dstIdx,\n        BPlusIO<UpdateLogRow> srcIo,\n        long srcPageAddr,\n        int srcIdx\n    ) throws IgniteCheckedException {", "author": "korlov42", "createdAt": "2020-07-22T13:47:09Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageUtils;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusInnerIO;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public abstract class AbstractUpdateLogInnerIO extends BPlusInnerIO<UpdateLogRow> implements UpdateLogRowIO {\n+    /**\n+     * @param type Page type.\n+     * @param ver Page format version.\n+     * @param canGetRow If we can get full row from this page.\n+     * @param itemSize Single item size on page.\n+     */\n+    AbstractUpdateLogInnerIO(int type, int ver, boolean canGetRow, int itemSize) {\n+        super(type, ver, canGetRow, itemSize);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void storeByOffset(long pageAddr, int off, UpdateLogRow row) {\n+        assert row.link != 0;\n+        assert row.updateCntr > 0;\n+\n+        PageUtils.putLong(pageAddr, off, row.updateCntr);\n+        PageUtils.putLong(pageAddr, off + 8, row.link);\n+\n+        if (storeCacheId()) {\n+            assert row.cacheId != CU.UNDEFINED_CACHE_ID;\n+\n+            PageUtils.putInt(pageAddr, off + 16, row.cacheId);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void store(long dstPageAddr,\n+        int dstIdx,\n+        BPlusIO<UpdateLogRow> srcIo,\n+        long srcPageAddr,\n+        int srcIdx) throws IgniteCheckedException {", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nsimilarity index 82%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nindex 742a1f7681b..11e3caa67f7 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageUtils;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwODgwNw==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458808807", "bodyText": "It worth to place all update-log-tree-related classes under tree.updatelog package", "author": "korlov42", "createdAt": "2020-07-22T13:53:19Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageUtils;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusInnerIO;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public abstract class AbstractUpdateLogInnerIO extends BPlusInnerIO<UpdateLogRow> implements UpdateLogRowIO {", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nsimilarity index 82%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nindex 742a1f7681b..11e3caa67f7 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageUtils;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzMzkzMA==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458833930", "bodyText": "Looks like this code was copy-pasted from AbstractPendingEntryInnerIO without changes", "author": "korlov42", "createdAt": "2020-07-22T14:27:02Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageUtils;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusInnerIO;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public abstract class AbstractUpdateLogInnerIO extends BPlusInnerIO<UpdateLogRow> implements UpdateLogRowIO {\n+    /**\n+     * @param type Page type.\n+     * @param ver Page format version.\n+     * @param canGetRow If we can get full row from this page.\n+     * @param itemSize Single item size on page.\n+     */\n+    AbstractUpdateLogInnerIO(int type, int ver, boolean canGetRow, int itemSize) {\n+        super(type, ver, canGetRow, itemSize);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void storeByOffset(long pageAddr, int off, UpdateLogRow row) {\n+        assert row.link != 0;\n+        assert row.updateCntr > 0;\n+\n+        PageUtils.putLong(pageAddr, off, row.updateCntr);\n+        PageUtils.putLong(pageAddr, off + 8, row.link);\n+\n+        if (storeCacheId()) {\n+            assert row.cacheId != CU.UNDEFINED_CACHE_ID;\n+\n+            PageUtils.putInt(pageAddr, off + 16, row.cacheId);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void store(long dstPageAddr,\n+        int dstIdx,\n+        BPlusIO<UpdateLogRow> srcIo,\n+        long srcPageAddr,\n+        int srcIdx) throws IgniteCheckedException {\n+        int dstOff = offset(dstIdx);\n+\n+        long link = ((PendingRowIO)srcIo).getLink(srcPageAddr, srcIdx);\n+        long expireTime = ((PendingRowIO)srcIo).getExpireTime(srcPageAddr, srcIdx);", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nsimilarity index 82%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nindex 742a1f7681b..11e3caa67f7 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageUtils;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3OTM5Mw==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458879393", "bodyText": "Could we reuse storeByOffset here? At the first glance it could cost us unnecessary object creation, but IMO JIT will inline it.", "author": "korlov42", "createdAt": "2020-07-22T15:27:41Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageUtils;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusInnerIO;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public abstract class AbstractUpdateLogInnerIO extends BPlusInnerIO<UpdateLogRow> implements UpdateLogRowIO {\n+    /**\n+     * @param type Page type.\n+     * @param ver Page format version.\n+     * @param canGetRow If we can get full row from this page.\n+     * @param itemSize Single item size on page.\n+     */\n+    AbstractUpdateLogInnerIO(int type, int ver, boolean canGetRow, int itemSize) {\n+        super(type, ver, canGetRow, itemSize);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void storeByOffset(long pageAddr, int off, UpdateLogRow row) {\n+        assert row.link != 0;\n+        assert row.updateCntr > 0;\n+\n+        PageUtils.putLong(pageAddr, off, row.updateCntr);\n+        PageUtils.putLong(pageAddr, off + 8, row.link);\n+\n+        if (storeCacheId()) {\n+            assert row.cacheId != CU.UNDEFINED_CACHE_ID;\n+\n+            PageUtils.putInt(pageAddr, off + 16, row.cacheId);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void store(long dstPageAddr,\n+        int dstIdx,\n+        BPlusIO<UpdateLogRow> srcIo,\n+        long srcPageAddr,\n+        int srcIdx) throws IgniteCheckedException {\n+        int dstOff = offset(dstIdx);\n+\n+        long link = ((PendingRowIO)srcIo).getLink(srcPageAddr, srcIdx);\n+        long expireTime = ((PendingRowIO)srcIo).getExpireTime(srcPageAddr, srcIdx);\n+\n+        PageUtils.putLong(dstPageAddr, dstOff, expireTime);", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTcxMTAxNg==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r461711016", "bodyText": "I think \"inlining\" in this particular case doesn't mentioned in JMM spec.\nWho will \"inline\" this in runtime? C1 or C2. Any proof?\nWhat if user disable C2  due to any reasons?", "author": "AMashenkov", "createdAt": "2020-07-28T16:24:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3OTM5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nsimilarity index 82%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\nindex 742a1f7681b..11e3caa67f7 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogInnerIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogInnerIO.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageUtils;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4OTE3OA==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458889178", "bodyText": "It's not expire time", "author": "korlov42", "createdAt": "2020-07-22T15:40:59Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageUtils;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusLeafIO;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public abstract class AbstractUpdateLogLeafIO extends BPlusLeafIO<UpdateLogRow> implements UpdateLogRowIO {\n+    /**\n+     * @param type Page type.\n+     * @param ver Page format version.\n+     * @param itemSize Single item size on page.\n+     */\n+    AbstractUpdateLogLeafIO(int type, int ver, int itemSize) {\n+        super(type, ver, itemSize);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void storeByOffset(long pageAddr, int off, UpdateLogRow row) {\n+        assert row.link != 0;\n+        assert row.updateCntr != 0;\n+\n+        PageUtils.putLong(pageAddr, off, row.updateCntr);\n+        PageUtils.putLong(pageAddr, off + 8, row.link);\n+\n+        if (storeCacheId()) {\n+            assert row.cacheId != CU.UNDEFINED_CACHE_ID;\n+\n+            PageUtils.putInt(pageAddr, off + 16, row.cacheId);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void store(long dstPageAddr,\n+        int dstIdx,\n+        BPlusIO<UpdateLogRow> srcIo,\n+        long srcPageAddr,\n+        int srcIdx) throws IgniteCheckedException {\n+        int dstOff = offset(dstIdx);\n+\n+        long link = ((UpdateLogRowIO)srcIo).getLink(srcPageAddr, srcIdx);\n+        long expireTime = ((UpdateLogRowIO)srcIo).getUpdateCounter(srcPageAddr, srcIdx);", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogLeafIO.java\nsimilarity index 90%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogLeafIO.java\nindex d45e102bc71..863862709ed 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogLeafIO.java\n\n@@ -14,13 +14,14 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageUtils;\n import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusLeafIO;\n+import org.apache.ignite.internal.processors.cache.tree.PendingRowIO;\n import org.apache.ignite.internal.util.typedef.internal.CU;\n \n /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4OTYzMw==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458889633", "bodyText": "please format this as noted above", "author": "korlov42", "createdAt": "2020-07-22T15:41:40Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageUtils;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusLeafIO;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public abstract class AbstractUpdateLogLeafIO extends BPlusLeafIO<UpdateLogRow> implements UpdateLogRowIO {\n+    /**\n+     * @param type Page type.\n+     * @param ver Page format version.\n+     * @param itemSize Single item size on page.\n+     */\n+    AbstractUpdateLogLeafIO(int type, int ver, int itemSize) {\n+        super(type, ver, itemSize);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void storeByOffset(long pageAddr, int off, UpdateLogRow row) {\n+        assert row.link != 0;\n+        assert row.updateCntr != 0;\n+\n+        PageUtils.putLong(pageAddr, off, row.updateCntr);\n+        PageUtils.putLong(pageAddr, off + 8, row.link);\n+\n+        if (storeCacheId()) {\n+            assert row.cacheId != CU.UNDEFINED_CACHE_ID;\n+\n+            PageUtils.putInt(pageAddr, off + 16, row.cacheId);\n+        }\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override public void store(long dstPageAddr,", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogLeafIO.java\nsimilarity index 90%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogLeafIO.java\nindex d45e102bc71..863862709ed 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/AbstractUpdateLogLeafIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/AbstractUpdateLogLeafIO.java\n\n@@ -14,13 +14,14 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageUtils;\n import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusLeafIO;\n+import org.apache.ignite.internal.processors.cache.tree.PendingRowIO;\n import org.apache.ignite.internal.util.typedef.internal.CU;\n \n /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MjM4Ng==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458892386", "bodyText": "assert cmp == 0 && row.link != 0 && io.getLink(pageAddr, idx) == row.link;", "author": "korlov42", "createdAt": "2020-07-22T15:45:33Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/PartitionLogTree.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2019 GridGain Systems, Inc. and Contributors.\n+ *\n+ * Licensed under the GridGain Community Edition License (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.gridgain.com/products/software/community-edition/gridgain-community-edition-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.processors.cache.tree;\n+\n+import org.apache.ignite.IgniteCheckedException;\n+import org.apache.ignite.internal.pagemem.PageMemory;\n+import org.apache.ignite.internal.processors.cache.CacheGroupContext;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.BPlusTree;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.io.BPlusIO;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.reuse.ReuseList;\n+import org.apache.ignite.internal.processors.cache.persistence.tree.util.PageLockListener;\n+import org.apache.ignite.internal.util.typedef.internal.CU;\n+\n+/**\n+ *\n+ */\n+public class PartitionLogTree extends BPlusTree<UpdateLogRow, UpdateLogRow> {\n+    /** */\n+    public static final Object FULL_ROW = new Object();\n+\n+    /** */\n+    private final CacheGroupContext grp;\n+\n+    /**\n+     * @param grp Cache group.\n+     * @param name Tree name.\n+     * @param pageMem Page memory.\n+     * @param metaPageId Meta page ID.\n+     * @param reuseList Reuse list.\n+     * @param initNew Initialize new index.\n+     * @throws IgniteCheckedException If failed.\n+     */\n+    public PartitionLogTree(\n+        CacheGroupContext grp,\n+        String name,\n+        PageMemory pageMem,\n+        long metaPageId,\n+        ReuseList reuseList,\n+        boolean initNew,\n+        PageLockListener lockLsnr\n+    ) throws IgniteCheckedException {\n+        super(\n+            name,\n+            grp.groupId(),\n+            grp.name(),\n+            pageMem,\n+            grp.dataRegion().config().isPersistenceEnabled() ? grp.shared().wal() : null,\n+            grp.offheap().globalRemoveId(),\n+            metaPageId,\n+            reuseList,\n+            grp.sharedGroup() ? CacheIdAwareUpdateLogInnerIO.VERSIONS : UpdateLogInnerIO.VERSIONS,\n+            grp.sharedGroup() ? CacheIdAwareUpdateLogLeafIO.VERSIONS : UpdateLogLeafIO.VERSIONS,\n+            grp.shared().kernalContext().failure(),\n+            lockLsnr\n+        );\n+\n+        this.grp = grp;\n+\n+        assert !grp.dataRegion().config().isPersistenceEnabled() || grp.shared().database().checkpointLockIsHeldByThread();\n+\n+        initTree(initNew);\n+    }\n+\n+    /** {@inheritDoc} */\n+    @Override protected int compare(BPlusIO<UpdateLogRow> iox, long pageAddr, int idx, UpdateLogRow row) {\n+        UpdateLogRowIO io = (UpdateLogRowIO)iox;\n+\n+        int cmp;\n+\n+        if (grp.sharedGroup()) {\n+            assert row.cacheId != CU.UNDEFINED_CACHE_ID : \"Cache ID is not provided!\";\n+            assert io.getCacheId(pageAddr, idx) != CU.UNDEFINED_CACHE_ID : \"Cache ID is not stored!\";\n+\n+            cmp = Integer.compare(io.getCacheId(pageAddr, idx), row.cacheId);\n+\n+            if (cmp != 0)\n+                return cmp;\n+\n+            if (row.updateCntr == 0 && row.link == 0) {\n+                // A search row with a cache ID only is used as a cache bound.\n+                // The found position will be shifted until the exact cache bound is found;\n+                // See for details:\n+                // o.a.i.i.p.c.database.tree.BPlusTree.ForwardCursor.findLowerBound()\n+                // o.a.i.i.p.c.database.tree.BPlusTree.ForwardCursor.findUpperBound()\n+                return cmp;\n+            }\n+        }\n+\n+        long updCntr = io.getUpdateCounter(pageAddr, idx);\n+\n+        cmp = Long.compare(updCntr, row.updateCntr);\n+\n+        if (cmp == 0 && row.link != 0)\n+            assert io.getLink(pageAddr, idx) == row.link;", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/PartitionLogTree.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/PartitionLogTree.java\nsimilarity index 96%\nrename from modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/PartitionLogTree.java\nrename to modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/PartitionLogTree.java\nindex dd3be11ff04..40244a897cf 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/PartitionLogTree.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/tree/updatelog/PartitionLogTree.java\n\n@@ -14,7 +14,7 @@\n  * limitations under the License.\n  */\n \n-package org.apache.ignite.internal.processors.cache.tree;\n+package org.apache.ignite.internal.processors.cache.tree.updatelog;\n \n import org.apache.ignite.IgniteCheckedException;\n import org.apache.ignite.internal.pagemem.PageMemory;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5OTc0Nw==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r458899747", "bodyText": "h2ExtraInnerIOs is a constant now, hence it should be named with underscore", "author": "korlov42", "createdAt": "2020-07-22T15:56:00Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PageIO.java", "diffHunk": "@@ -109,16 +113,16 @@\n     public static final short MAX_PAYLOAD_SIZE = 2048;\n \n     /** */\n-    private static List<IOVersions<? extends BPlusInnerIO<?>>> h2ExtraInnerIOs = new ArrayList<>(MAX_PAYLOAD_SIZE);\n+    private static final List<IOVersions<? extends BPlusInnerIO<?>>> h2ExtraInnerIOs = new ArrayList<>(MAX_PAYLOAD_SIZE);", "originalCommit": "8008e993853b75068d5eca703faa9cffa544b220", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PageIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PageIO.java\nindex 5d526ab8781..fad0f98b6e5 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PageIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PageIO.java\n\n@@ -113,16 +114,16 @@ public abstract class PageIO {\n     public static final short MAX_PAYLOAD_SIZE = 2048;\n \n     /** */\n-    private static final List<IOVersions<? extends BPlusInnerIO<?>>> h2ExtraInnerIOs = new ArrayList<>(MAX_PAYLOAD_SIZE);\n+    private static final List<IOVersions<? extends BPlusInnerIO<?>>> H2_EXTRA_INNER_IOS = new ArrayList<>(MAX_PAYLOAD_SIZE);\n \n     /** */\n-    private static final List<IOVersions<? extends BPlusLeafIO<?>>> h2ExtraLeafIOs = new ArrayList<>(MAX_PAYLOAD_SIZE);\n+    private static final List<IOVersions<? extends BPlusLeafIO<?>>> H2_EXTRA_LEAF_IOS = new ArrayList<>(MAX_PAYLOAD_SIZE);\n \n     /** */\n-    private static final List<IOVersions<? extends BPlusInnerIO<?>>> h2ExtraMvccInnerIOs = new ArrayList<>(MAX_PAYLOAD_SIZE);\n+    private static final List<IOVersions<? extends BPlusInnerIO<?>>> H2_EXTRA_MVCC_INNER_IOS = new ArrayList<>(MAX_PAYLOAD_SIZE);\n \n     /** */\n-    private static final List<IOVersions<? extends BPlusLeafIO<?>>> h2ExtraMvccLeafIOs = new ArrayList<>(MAX_PAYLOAD_SIZE);\n+    private static final List<IOVersions<? extends BPlusLeafIO<?>>> H2_EXTRA_MVCC_LEAF_IOS = new ArrayList<>(MAX_PAYLOAD_SIZE);\n \n     /** */\n     public static final int TYPE_OFF = 0;\n"}}, {"oid": "3ae16d709e28cf7d2bae167376fc6651aca9780b", "url": "https://github.com/gridgain/gridgain/commit/3ae16d709e28cf7d2bae167376fc6651aca9780b", "message": "Fix after review.", "committedDate": "2020-07-28T16:32:30Z", "type": "commit"}, {"oid": "e77b171df566c38037156d339ca58b5e8e943121", "url": "https://github.com/gridgain/gridgain/commit/e77b171df566c38037156d339ca58b5e8e943121", "message": "Merge branch 'master' into gg-29644\n\n# Conflicts:\n#\tmodules/core/src/main/java/org/apache/ignite/internal/processors/cache/GridCacheMapEntry.java", "committedDate": "2020-07-28T16:35:45Z", "type": "commit"}, {"oid": "a83a75f4b642273f3347031a1ff1a686821bb1e1", "url": "https://github.com/gridgain/gridgain/commit/a83a75f4b642273f3347031a1ff1a686821bb1e1", "message": "Styles. Revert rearranged imports.", "committedDate": "2020-07-30T14:22:42Z", "type": "commit"}, {"oid": "ea20146f1c586eb04218c3538a645104768864b5", "url": "https://github.com/gridgain/gridgain/commit/ea20146f1c586eb04218c3538a645104768864b5", "message": "Merge branch 'gg-29643' into gg-29644\n\n# Conflicts:\n#\tmodules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/pagemem/PageMemoryImpl.java", "committedDate": "2020-07-31T10:14:45Z", "type": "commit"}, {"oid": "2074b98352a3c2ee9d2d07de6b7bc314a14df297", "url": "https://github.com/gridgain/gridgain/commit/2074b98352a3c2ee9d2d07de6b7bc314a14df297", "message": "Fix non-initialized page replacement.", "committedDate": "2020-08-05T15:51:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxODIxOQ==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r468518219", "bodyText": "So, these are io versions specific for GG, right?\nWas this discussed with Technical Decisions Approval team?", "author": "ibessonov", "createdAt": "2020-08-11T11:44:31Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PagePartitionMetaIO.java", "diffHunk": "@@ -46,7 +46,8 @@\n     /** */\n     public static final IOVersions<PagePartitionMetaIO> VERSIONS = new IOVersions<>(\n         new PagePartitionMetaIO(1),\n-        new PagePartitionMetaIOV2(2)\n+        new PagePartitionMetaIOV2(2),\n+        new PagePartitionMetaIOV2(Short.toUnsignedInt((short)-1)) // Prevent partition usage on old versions after upgrade.", "originalCommit": "2074b98352a3c2ee9d2d07de6b7bc314a14df297", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODU4ODc4Mg==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r468588782", "bodyText": "Sure, we discussed this with Alex Goncharuk and concluded\nas we can't reserve version number in Ignite, then we will use negative versions in GG CE.\nThis looks a bit tricky due to lack of PageIO's flexibility.", "author": "AMashenkov", "createdAt": "2020-08-11T13:42:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxODIxOQ=="}], "type": "inlineReview", "revised_code": {"commit": "46617babc7de65a86258760c034ff7bbdee53fa2", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PagePartitionMetaIO.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PagePartitionMetaIO.java\nindex 5e611aa4d4e..33844bb377d 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PagePartitionMetaIO.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/tree/io/PagePartitionMetaIO.java\n\n@@ -47,7 +47,7 @@ public class PagePartitionMetaIO extends PageMetaIO {\n     public static final IOVersions<PagePartitionMetaIO> VERSIONS = new IOVersions<>(\n         new PagePartitionMetaIO(1),\n         new PagePartitionMetaIOV2(2),\n-        new PagePartitionMetaIOV2(Short.toUnsignedInt((short)-1)) // Prevent partition usage on old versions after upgrade.\n+        new PagePartitionMetaIOV1GG(Short.toUnsignedInt((short)-1)) // Prevent partition usage on old versions after upgrade.\n     );\n \n     /** {@inheritDoc} */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxODYyMg==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r468518622", "bodyText": "You upgrade to version 3 using V2 class, is that ok? Also, space after ) is redundant.", "author": "ibessonov", "createdAt": "2020-08-11T11:45:12Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/GridCacheOffheapManager.java", "diffHunk": "@@ -2031,53 +2077,55 @@ private Metas getOrAllocatePartitionMetas() throws IgniteCheckedException {\n \n                         int pageVer = PagePartitionMetaIO.getVersion(pageAddr);\n \n-                        if (pageVer < 2) {\n-                            assert pageVer == 1;\n-\n+                        if (pageVer < 3) {\n                             if (log.isDebugEnabled())\n                                 log.info(\"Upgrade partition meta page version: [part=\" + partId +\n-                                    \", grpId=\" + grpId + \", oldVer=\" + pageVer +\n-                                    \", newVer=\" + io.getVersion()\n+                                        \", grpId=\" + grpId + \", oldVer=\" + pageVer +\n+                                        \", newVer=\" + io.getVersion()\n                                 );\n \n                             io = PagePartitionMetaIO.VERSIONS.latest();\n \n-                            ((PagePartitionMetaIOV2)io).upgradePage(pageAddr);\n+                            assert io.getVersion() == Short.toUnsignedInt((short)-1);\n+\n+                            ((PagePartitionMetaIOV2) io).upgradePage(pageAddr, pageVer);", "originalCommit": "2074b98352a3c2ee9d2d07de6b7bc314a14df297", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODU4OTIyOA==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r468589228", "bodyText": "Got it.\nI'll create a separate class for new version.", "author": "AMashenkov", "createdAt": "2020-08-11T13:43:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxODYyMg=="}], "type": "inlineReview", "revised_code": {"commit": "46617babc7de65a86258760c034ff7bbdee53fa2", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/GridCacheOffheapManager.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/GridCacheOffheapManager.java\nindex 705f6e7f48c..4006a49791c 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/GridCacheOffheapManager.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/persistence/GridCacheOffheapManager.java\n\n@@ -2088,7 +2089,7 @@ public class GridCacheOffheapManager extends IgniteCacheOffheapManagerImpl imple\n \n                             assert io.getVersion() == Short.toUnsignedInt((short)-1);\n \n-                            ((PagePartitionMetaIOV2) io).upgradePage(pageAddr, pageVer);\n+                            ((PagePartitionMetaIOV1GG)io).upgradePage(pageAddr, pageVer);\n \n                             pageUpgraded = true;\n                         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUyOTYxNw==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r468529617", "bodyText": "Hate to say this but I believe that new version of object won't be deserialized properly on old nodes when RU enabled.\nIt'll try to read field \"drVer\" but \"updateCounter\" is found. \"u\" goes after \"d\" in alphabet, so reader will assume that \"drVer\" field is removed and will nullify it. Have you tested it? Am I wrong?\nWe need to make sure that this code is 100% safe.", "author": "ibessonov", "createdAt": "2020-08-11T12:05:48Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java", "diffHunk": "@@ -105,7 +107,7 @@ public GridCacheVersionEx(int topVer, int nodeOrderDrId, long order, GridCacheVe\n         }\n \n         switch (writer.state()) {\n-            case 3:\n+            case 4:", "originalCommit": "2074b98352a3c2ee9d2d07de6b7bc314a14df297", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODU5MzYzNg==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r468593636", "bodyText": "Sounds sad. I believe it is safe to add new fields.\nI'll check this.", "author": "AMashenkov", "createdAt": "2020-08-11T13:49:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUyOTYxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyNzQ5Mg==", "url": "https://github.com/gridgain/gridgain/pull/1291#discussion_r469027492", "bodyText": "Cool, now it works for sure!", "author": "ibessonov", "createdAt": "2020-08-12T06:14:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUyOTYxNw=="}], "type": "inlineReview", "revised_code": {"commit": "cd8fdfed9346ae1cd9aa0b920c2e4829d18471d3", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java\nindex d9fca811e4e..894a724e2fa 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/cache/version/GridCacheVersionEx.java\n\n@@ -107,12 +141,35 @@ public class GridCacheVersionEx extends GridCacheVersion {\n         }\n \n         switch (writer.state()) {\n-            case 4:\n+            case 0:\n+                if (!writer.writeInt(\"nodeOrderDrId\", nodeOrderDrId))\n+                    return false;\n+\n+                writer.incrementState();\n+\n+            case 1:\n+                if (!writer.writeLong(\"order\", order))\n+                    return false;\n+\n+                writer.incrementState();\n+\n+            case 2:\n+                if (!writer.writeInt(\"topVer\", topVer))\n+                    return false;\n+\n+                writer.incrementState();\n+\n+            case 3:\n                 if (!writer.writeMessage(\"drVer\", drVer))\n                     return false;\n \n                 writer.incrementState();\n \n+            case 4:\n+                if (!writer.writeLong(\"updateCounter\", updateCounter))\n+                    return false;\n+\n+                writer.incrementState();\n         }\n \n         return true;\n"}}, {"oid": "46617babc7de65a86258760c034ff7bbdee53fa2", "url": "https://github.com/gridgain/gridgain/commit/46617babc7de65a86258760c034ff7bbdee53fa2", "message": "Styles. Move new IO version to separate class.", "committedDate": "2020-08-11T14:23:07Z", "type": "commit"}, {"oid": "cd8fdfed9346ae1cd9aa0b920c2e4829d18471d3", "url": "https://github.com/gridgain/gridgain/commit/cd8fdfed9346ae1cd9aa0b920c2e4829d18471d3", "message": "Add compatibility test.", "committedDate": "2020-08-11T21:23:54Z", "type": "commit"}, {"oid": "2c99f99ea53922bd60d14c7f5bdea7ae26a27474", "url": "https://github.com/gridgain/gridgain/commit/2c99f99ea53922bd60d14c7f5bdea7ae26a27474", "message": "Merge branch 'gg-29643' into gg-29644", "committedDate": "2020-08-12T13:58:06Z", "type": "commit"}, {"oid": "5a7bdc0acf49eb6c98cd0a55df3a4ebab72fe6dc", "url": "https://github.com/gridgain/gridgain/commit/5a7bdc0acf49eb6c98cd0a55df3a4ebab72fe6dc", "message": "Merge branch 'gg-29643' into gg-29644", "committedDate": "2020-08-12T20:26:02Z", "type": "commit"}, {"oid": "622d6fa73eea8a8b235821c4296abb1a3af9bc91", "url": "https://github.com/gridgain/gridgain/commit/622d6fa73eea8a8b235821c4296abb1a3af9bc91", "message": "Mute broken test.", "committedDate": "2020-08-13T12:43:29Z", "type": "commit"}, {"oid": "696c3bd880f0041b75625e92d1ddc436c9990c28", "url": "https://github.com/gridgain/gridgain/commit/696c3bd880f0041b75625e92d1ddc436c9990c28", "message": "Mute broken test.", "committedDate": "2020-08-13T12:49:08Z", "type": "commit"}, {"oid": "af9dcab7d84ee938407fce3e442c8056cbddf39d", "url": "https://github.com/gridgain/gridgain/commit/af9dcab7d84ee938407fce3e442c8056cbddf39d", "message": "Merge branch 'gg-29643' into gg-29644", "committedDate": "2020-08-13T18:23:51Z", "type": "commit"}]}