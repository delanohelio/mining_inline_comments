{"pr_number": 1154, "pr_title": "GG-29313: JDBC thin compatibility fixed", "pr_createdAt": "2020-05-15T10:38:43Z", "pr_url": "https://github.com/gridgain/gridgain/pull/1154", "timeline": [{"oid": "f4622a0571805f2b570f168114c39da9d2a937a1", "url": "https://github.com/gridgain/gridgain/commit/f4622a0571805f2b570f168114c39da9d2a937a1", "message": "JDBC thin compatibility fixed\new# Please enter the commit message for your changes. Lines starting", "committedDate": "2020-05-15T10:37:39Z", "type": "commit"}, {"oid": "a5b8e49d093ef2f9bd54cbe4d010b6ce72d76c77", "url": "https://github.com/gridgain/gridgain/commit/a5b8e49d093ef2f9bd54cbe4d010b6ce72d76c77", "message": "GG-29313: Removed USER_ATTRIBUTES JDBC feature", "committedDate": "2020-05-15T19:59:40Z", "type": "commit"}, {"oid": "a752f1498bcd6a2ef2fffdc9829ddf059f27431f", "url": "https://github.com/gridgain/gridgain/commit/a752f1498bcd6a2ef2fffdc9829ddf059f27431f", "message": "GG-29313: Added new protocol version for user attributes", "committedDate": "2020-05-15T20:28:30Z", "type": "commit"}, {"oid": "e0f6e1a12db37d703defe0c9cb4b7958df71aa7f", "url": "https://github.com/gridgain/gridgain/commit/e0f6e1a12db37d703defe0c9cb4b7958df71aa7f", "message": "GG-29313: Minor fix", "committedDate": "2020-05-17T20:17:43Z", "type": "commit"}, {"oid": "9b0bac037c91270184020b12166bf0a65d01c4fd", "url": "https://github.com/gridgain/gridgain/commit/9b0bac037c91270184020b12166bf0a65d01c4fd", "message": "GG-29313: Fix", "committedDate": "2020-05-17T20:47:08Z", "type": "commit"}, {"oid": "3d34468d5f89c58385ec53bc8000dd1c9a80e335", "url": "https://github.com/gridgain/gridgain/commit/3d34468d5f89c58385ec53bc8000dd1c9a80e335", "message": "GG-29313: Fixed .NET test", "committedDate": "2020-05-17T23:31:27Z", "type": "commit"}, {"oid": "376320e57e0dd2f0d9c355679a66ef631c26c12f", "url": "https://github.com/gridgain/gridgain/commit/376320e57e0dd2f0d9c355679a66ef631c26c12f", "message": "GG-29313: Fixes for tests", "committedDate": "2020-05-18T00:03:03Z", "type": "commit"}, {"oid": "365838de5758865003b4dd6cb3825262e7c977c7", "url": "https://github.com/gridgain/gridgain/commit/365838de5758865003b4dd6cb3825262e7c977c7", "message": "GG-29313: Fix compilation for .NET", "committedDate": "2020-05-18T00:06:38Z", "type": "commit"}, {"oid": "f1da7337a7e8fd5fd78da5f8f5f58dc47c372de7", "url": "https://github.com/gridgain/gridgain/commit/f1da7337a7e8fd5fd78da5f8f5f58dc47c372de7", "message": "GG-29313: Fix for .NET", "committedDate": "2020-05-18T08:30:22Z", "type": "commit"}, {"oid": "153727ab3cd949482b2d93ba67ca6433133cd032", "url": "https://github.com/gridgain/gridgain/commit/153727ab3cd949482b2d93ba67ca6433133cd032", "message": "GG-29313: Fixed doxygen errors", "committedDate": "2020-05-18T09:52:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU4MDQyMA==", "url": "https://github.com/gridgain/gridgain/pull/1154#discussion_r426580420", "bodyText": "Typo. Maybe remove version number from comment, since it duplicates the code.", "author": "ptupitsyn", "createdAt": "2020-05-18T12:14:06Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersion.java", "diffHunk": "@@ -18,6 +18,9 @@\n \n /** Thin client protocol version. */\n public final class ProtocolVersion implements Comparable<ProtocolVersion> {\n+    /** Protocol version: 1.7.0. User attributes. */", "originalCommit": "153727ab3cd949482b2d93ba67ca6433133cd032", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f81807570506bb17e409432823f92ca46054bda6", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersion.java b/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersion.java\nindex 6818b89ef22..78221533d89 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersion.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersion.java\n\n@@ -18,7 +18,7 @@ package org.apache.ignite.internal.client.thin;\n \n /** Thin client protocol version. */\n public final class ProtocolVersion implements Comparable<ProtocolVersion> {\n-    /** Protocol version: 1.7.0. User attributes. */\n+    /** Protocol version: 1.7.1. User attributes. */\n     public static final ProtocolVersion V1_7_1 = new ProtocolVersion((short)1, (short)7, (short)1);\n \n     /** Protocol version: 1.7.0. Features support. */\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU4MDYxNw==", "url": "https://github.com/gridgain/gridgain/pull/1154#discussion_r426580617", "bodyText": "* imports are against our guidelines", "author": "ptupitsyn", "createdAt": "2020-05-18T12:14:26Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersionFeature.java", "diffHunk": "@@ -16,12 +16,7 @@\n \n package org.apache.ignite.internal.client.thin;\n \n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_1_0;\n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_2_0;\n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_4_0;\n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_5_0;\n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_6_0;\n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_7_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.*;", "originalCommit": "153727ab3cd949482b2d93ba67ca6433133cd032", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f81807570506bb17e409432823f92ca46054bda6", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersionFeature.java b/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersionFeature.java\nindex 8f8de742e82..b1a31107eee 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersionFeature.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/client/thin/ProtocolVersionFeature.java\n\n@@ -16,7 +16,14 @@\n \n package org.apache.ignite.internal.client.thin;\n \n-import static org.apache.ignite.internal.client.thin.ProtocolVersion.*;\n+\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_1_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_2_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_4_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_5_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_6_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_7_0;\n+import static org.apache.ignite.internal.client.thin.ProtocolVersion.V1_7_1;\n \n /**\n  * Thin client feature that was introduced by introducing new protocol version.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU4MDk5Ng==", "url": "https://github.com/gridgain/gridgain/pull/1154#discussion_r426580996", "bodyText": "are not supported was correct, have not supported is not.", "author": "ptupitsyn", "createdAt": "2020-05-18T12:15:14Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/client/thin/TcpClientTransactions.java", "diffHunk": "@@ -94,7 +94,7 @@ private ClientTransaction txStart0(TransactionConcurrency concurrency, Transacti\n                 ProtocolContext protocolCtx = req.clientChannel().protocolCtx();\n \n                 if (!protocolCtx.isFeatureSupported(TRANSACTIONS)) {\n-                    throw new ClientProtocolError(String.format(\"Transactions are not supported by the server's \" +\n+                    throw new ClientProtocolError(String.format(\"Transactions have not supported by the server's \" +", "originalCommit": "153727ab3cd949482b2d93ba67ca6433133cd032", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgyNDI1Nw==", "url": "https://github.com/gridgain/gridgain/pull/1154#discussion_r426824257", "bodyText": "I know, but our compatibility tests enforce invalid version. Maybe I need to change tests though....", "author": "isapego", "createdAt": "2020-05-18T18:43:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU4MDk5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgzNjA3Ng==", "url": "https://github.com/gridgain/gridgain/pull/1154#discussion_r426836076", "bodyText": "Yes, let's fix tests instead", "author": "ptupitsyn", "createdAt": "2020-05-18T19:06:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU4MDk5Ng=="}], "type": "inlineReview", "revised_code": {"commit": "f81807570506bb17e409432823f92ca46054bda6", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/client/thin/TcpClientTransactions.java b/modules/core/src/main/java/org/apache/ignite/internal/client/thin/TcpClientTransactions.java\nindex 7bd1e737632..eba08f0089d 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/client/thin/TcpClientTransactions.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/client/thin/TcpClientTransactions.java\n\n@@ -94,7 +94,7 @@ class TcpClientTransactions implements ClientTransactions {\n                 ProtocolContext protocolCtx = req.clientChannel().protocolCtx();\n \n                 if (!protocolCtx.isFeatureSupported(TRANSACTIONS)) {\n-                    throw new ClientProtocolError(String.format(\"Transactions have not supported by the server's \" +\n+                    throw new ClientProtocolError(String.format(\"Transactions are not supported by the server's \" +\n                         \"protocol version %s, required version %s\", protocolCtx.version(), TRANSACTIONS.verIntroduced()));\n                 }\n \n"}}, {"oid": "f81807570506bb17e409432823f92ca46054bda6", "url": "https://github.com/gridgain/gridgain/commit/f81807570506bb17e409432823f92ca46054bda6", "message": "GG-29313: Minor fixes", "committedDate": "2020-05-18T18:44:24Z", "type": "commit"}]}