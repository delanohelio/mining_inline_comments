{"pr_number": 1062, "pr_title": "GG-26434 Security permissions for VIEWS and KILL QUERY command", "pr_createdAt": "2020-04-13T13:51:54Z", "pr_url": "https://github.com/gridgain/gridgain/pull/1062", "timeline": [{"oid": "ad25c9381c7ddcfdc24512f6ad60f79a49bc67a6", "url": "https://github.com/gridgain/gridgain/commit/ad25c9381c7ddcfdc24512f6ad60f79a49bc67a6", "message": "sec permission for query VIEWS", "committedDate": "2020-04-13T08:00:58Z", "type": "commit"}, {"oid": "f83b628f54907258e9b4a4d2b9875d90538b7ae8", "url": "https://github.com/gridgain/gridgain/commit/f83b628f54907258e9b4a4d2b9875d90538b7ae8", "message": "sec permission for KILL QUERY command", "committedDate": "2020-04-13T13:49:58Z", "type": "commit"}, {"oid": "9264c5131e956c5649af2fe4951efcf9b4290ec6", "url": "https://github.com/gridgain/gridgain/commit/9264c5131e956c5649af2fe4951efcf9b4290ec6", "message": "fix failed test and remove unused import", "committedDate": "2020-04-14T07:08:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxNzI1Mg==", "url": "https://github.com/gridgain/gridgain/pull/1062#discussion_r409617252", "bodyText": "Can we move \"e instanceof SecurityException ? e.getMessage()\" into convertToSqlException()  ?", "author": "AMashenkov", "createdAt": "2020-04-16T14:48:05Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/jdbc2/JdbcStatement.java", "diffHunk": "@@ -142,7 +143,7 @@ else if (!conn.isMultipleStatementsAllowed() && conn.isMultipleStatementsTaskV2S\n             }\n         }\n         catch (Exception e) {\n-            throw convertToSqlException(e, \"Failed to query Ignite.\");\n+            throw convertToSqlException(e, e instanceof SecurityException ? e.getMessage() : \"Failed to query Ignite.\");", "originalCommit": "9264c5131e956c5649af2fe4951efcf9b4290ec6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "97a45f71da36d5674a62faa34ff7afea8a70c030", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/jdbc2/JdbcStatement.java b/modules/core/src/main/java/org/apache/ignite/internal/jdbc2/JdbcStatement.java\nindex 5dc3e9364be..4e720e9580b 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/jdbc2/JdbcStatement.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/jdbc2/JdbcStatement.java\n\n@@ -143,7 +143,7 @@ public class JdbcStatement implements Statement {\n             }\n         }\n         catch (Exception e) {\n-            throw convertToSqlException(e, e instanceof SecurityException ? e.getMessage() : \"Failed to query Ignite.\");\n+            throw convertToSqlException(e, \"Failed to query Ignite.\");\n         }\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxODA3Ng==", "url": "https://github.com/gridgain/gridgain/pull/1062#discussion_r409618076", "bodyText": "Empty line", "author": "AMashenkov", "createdAt": "2020-04-16T14:49:09Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/ClientListenerAbstractConnectionContext.java", "diffHunk": "@@ -162,6 +162,9 @@ protected void initClientDescriptor(String prefix) {\n \n         if (authCtx != null)\n             clientDesc += \"@\" + authCtx.userName();\n+", "originalCommit": "9264c5131e956c5649af2fe4951efcf9b4290ec6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "97a45f71da36d5674a62faa34ff7afea8a70c030", "chunk": "diff --git a/modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/ClientListenerAbstractConnectionContext.java b/modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/ClientListenerAbstractConnectionContext.java\nindex 17323a62736..6b5f541a6bf 100644\n--- a/modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/ClientListenerAbstractConnectionContext.java\n+++ b/modules/core/src/main/java/org/apache/ignite/internal/processors/odbc/ClientListenerAbstractConnectionContext.java\n\n@@ -162,7 +162,6 @@ public abstract class ClientListenerAbstractConnectionContext implements ClientL\n \n         if (authCtx != null)\n             clientDesc += \"@\" + authCtx.userName();\n-\n         else if (secCtx != null)\n             clientDesc += \"@\" + secCtx.subject().login();\n     }\n"}}, {"oid": "97a45f71da36d5674a62faa34ff7afea8a70c030", "url": "https://github.com/gridgain/gridgain/commit/97a45f71da36d5674a62faa34ff7afea8a70c030", "message": "minors", "committedDate": "2020-04-17T09:06:43Z", "type": "commit"}, {"oid": "c2e4ef8291b3129677e5059b0594f41db79c1349", "url": "https://github.com/gridgain/gridgain/commit/c2e4ef8291b3129677e5059b0594f41db79c1349", "message": "Merge branch '8.7-master' into gg-26434", "committedDate": "2020-04-22T11:58:30Z", "type": "commit"}, {"oid": "9849c099cfe755d91f164252ceea088287c296d9", "url": "https://github.com/gridgain/gridgain/commit/9849c099cfe755d91f164252ceea088287c296d9", "message": "remove unused import", "committedDate": "2020-04-22T12:02:11Z", "type": "commit"}]}