{"pr_number": 1056, "pr_title": "Fix upgrade failure", "pr_createdAt": "2020-06-10T21:05:22Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1056", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQwODQ3Ng==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1056#discussion_r438408476", "bodyText": "Remove this COMMIT since it is in finally", "author": "jkasten2", "createdAt": "2020-06-10T21:06:20Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/outcomes/OSOutcomeTableProvider.java", "diffHunk": "@@ -73,6 +73,8 @@ public void upgradeOutcomeTableRevision2To3(SQLiteDatabase db) {\n             db.execSQL(\"COMMIT;\");", "originalCommit": "1661f59a2fc67c8bb2bff0be61c6df3b1ceb5107", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9ee1d7fb4da411b77001130c0bd28798b7819c16", "chunk": "diff --git a/OneSignalSDK/onesignal/src/main/java/com/onesignal/outcomes/OSOutcomeTableProvider.java b/OneSignalSDK/onesignal/src/main/java/com/onesignal/outcomes/OSOutcomeTableProvider.java\nindex 769a3d13..144d54ba 100644\n--- a/OneSignalSDK/onesignal/src/main/java/com/onesignal/outcomes/OSOutcomeTableProvider.java\n+++ b/OneSignalSDK/onesignal/src/main/java/com/onesignal/outcomes/OSOutcomeTableProvider.java\n\n@@ -70,7 +70,6 @@ public class OSOutcomeTableProvider {\n             db.execSQL(\"INSERT INTO \" + OutcomeEventsTable.TABLE_NAME + \"(\" + commonColumnsWithNewSessionColumn + \")\" +\n                     \" SELECT \" + commonColumnsWithSessionColumn + \" FROM \" + auxOutcomeTableName + \";\");\n             db.execSQL(\"DROP TABLE \" + auxOutcomeTableName + \";\");\n-            db.execSQL(\"COMMIT;\");\n         } catch (SQLiteException e) {\n             e.printStackTrace();\n         } finally {\n"}}, {"oid": "9ee1d7fb4da411b77001130c0bd28798b7819c16", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/9ee1d7fb4da411b77001130c0bd28798b7819c16", "message": "Fix upgrade failure\n\n   * Always commit even on SQL failure, this will Fix onUpgrade being call more that one time", "committedDate": "2020-06-10T21:09:21Z", "type": "commit"}, {"oid": "9ee1d7fb4da411b77001130c0bd28798b7819c16", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/9ee1d7fb4da411b77001130c0bd28798b7819c16", "message": "Fix upgrade failure\n\n   * Always commit even on SQL failure, this will Fix onUpgrade being call more that one time", "committedDate": "2020-06-10T21:09:21Z", "type": "forcePushed"}]}