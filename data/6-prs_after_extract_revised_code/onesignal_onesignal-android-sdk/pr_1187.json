{"pr_number": 1187, "pr_title": "Remove public getPermissionSubscriptionState", "pr_createdAt": "2020-10-14T22:19:39Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1187", "timeline": [{"oid": "79ce723ef729fa582b9fe0133a85e51e3365477d", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/79ce723ef729fa582b9fe0133a85e51e3365477d", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class", "committedDate": "2020-10-14T22:22:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAyMDAxMQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1187#discussion_r505020011", "bodyText": "Consent isn't needed since this is just a getter, it doesn't make any network requests", "author": "jkasten2", "createdAt": "2020-10-14T22:23:38Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -482,11 +485,24 @@ private static OSEmailSubscriptionState getLastEmailSubscriptionState(Context co\n    }\n    // End EmailSubscriptionState\n \n+   /**\n+    * Get the current user data, notification and permissions state.\n+    */\n    @Nullable\n    public static OSDeviceState getDeviceState() {\n-      if (getPermissionSubscriptionState() == null)\n+      // If applicable, check if the user provided privacy consent\n+      if (shouldLogUserPrivacyConsentErrorMessageForMethodName(\"getDeviceState()\"))", "originalCommit": "79ce723ef729fa582b9fe0133a85e51e3365477d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "95320a2f6d9decf354390d06a1525ceb9655e799", "chunk": "diff --git a/OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java b/OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java\nindex 848e379b..b4975fbb 100644\n--- a/OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java\n+++ b/OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java\n\n@@ -490,10 +490,6 @@ public class OneSignal {\n     */\n    @Nullable\n    public static OSDeviceState getDeviceState() {\n-      // If applicable, check if the user provided privacy consent\n-      if (shouldLogUserPrivacyConsentErrorMessageForMethodName(\"getDeviceState()\"))\n-         return null;\n-\n       if (appContext == null) {\n          logger.error(\"OneSignal.initWithContext has not been called. Could not get OSDeviceState\");\n          return null;\n"}}, {"oid": "95320a2f6d9decf354390d06a1525ceb9655e799", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/95320a2f6d9decf354390d06a1525ceb9655e799", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class", "committedDate": "2020-10-14T22:43:40Z", "type": "commit"}, {"oid": "95320a2f6d9decf354390d06a1525ceb9655e799", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/95320a2f6d9decf354390d06a1525ceb9655e799", "message": "Remove public getPermissionSubscriptionState\n\n* Replace getPermissionSubscriptionState with getDeviceState\n* Add isEmaiSubscribed method to OSDeviceState\n* Delete OSPermissionSubscriptionState class", "committedDate": "2020-10-14T22:43:40Z", "type": "forcePushed"}]}