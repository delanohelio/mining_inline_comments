{"pr_number": 969, "pr_title": "TSK-1029: Proper distinction between delete and markForFeletion for", "pr_createdAt": "2020-03-09T16:25:34Z", "pr_url": "https://github.com/Taskana/taskana/pull/969", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgxNzczMQ==", "url": "https://github.com/Taskana/taskana/pull/969#discussion_r389817731", "bodyText": "This is not documented. Please include this snipped in the rest documentation.", "author": "mustaphazorgati", "createdAt": "2020-03-09T16:45:00Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java", "diffHunk": "@@ -494,6 +494,18 @@ void markWorkbasketForDeletionDocTest() throws Exception {\n         .andDo(MockMvcRestDocumentation.document(\"MarkWorkbasketForDeletionDocTest\"));\n   }\n \n+  @Test\n+  void deleteWorkbasketDocTest() throws Exception {\n+    this.mockMvc\n+        .perform(\n+            RestDocumentationRequestBuilders.delete(\n+                    restHelper.toUrl(\n+                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000009\"))\n+                .header(\"Authorization\", \"Basic YWRtaW46YWRtaW4=\"))\n+        .andExpect(MockMvcResultMatchers.status().isNoContent())\n+        .andDo(MockMvcRestDocumentation.document(\"DeleteWorkbasketDocTest\"));", "originalCommit": "90eb7bb8dac2552546408b4f512014fcdc262feb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "000faa6d9d99b109a65989c78d3ca35028c4867c", "chunk": "diff --git a/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java b/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java\nindex 78eb85c70..b568f13ec 100644\n--- a/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java\n+++ b/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java\n\n@@ -482,25 +482,13 @@ class WorkbasketControllerRestDocumentation extends BaseRestDocumentation {\n                 responseFields(workbasketFieldDescriptors)));\n   }\n \n-  @Test\n-  void markWorkbasketForDeletionDocTest() throws Exception {\n-    this.mockMvc\n-        .perform(\n-            RestDocumentationRequestBuilders.delete(\n-                    restHelper.toUrl(\n-                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000005\"))\n-                .header(\"Authorization\", \"Basic YWRtaW46YWRtaW4=\"))\n-        .andExpect(MockMvcResultMatchers.status().isAccepted())\n-        .andDo(MockMvcRestDocumentation.document(\"MarkWorkbasketForDeletionDocTest\"));\n-  }\n-\n   @Test\n   void deleteWorkbasketDocTest() throws Exception {\n     this.mockMvc\n         .perform(\n             RestDocumentationRequestBuilders.delete(\n                     restHelper.toUrl(\n-                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000009\"))\n+                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000008\"))\n                 .header(\"Authorization\", \"Basic YWRtaW46YWRtaW4=\"))\n         .andExpect(MockMvcResultMatchers.status().isNoContent())\n         .andDo(MockMvcRestDocumentation.document(\"DeleteWorkbasketDocTest\"));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgxODE0Mw==", "url": "https://github.com/Taskana/taskana/pull/969#discussion_r389818143", "bodyText": "Please properly document the distinction between marked for deletion <-> deleted. Currently there's only a snipped for marked for deletion", "author": "mustaphazorgati", "createdAt": "2020-03-09T16:45:39Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java", "diffHunk": "@@ -494,6 +494,18 @@ void markWorkbasketForDeletionDocTest() throws Exception {\n         .andDo(MockMvcRestDocumentation.document(\"MarkWorkbasketForDeletionDocTest\"));\n   }\n \n+  @Test\n+  void deleteWorkbasketDocTest() throws Exception {\n+    this.mockMvc\n+        .perform(\n+            RestDocumentationRequestBuilders.delete(\n+                    restHelper.toUrl(\n+                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000009\"))\n+                .header(\"Authorization\", \"Basic YWRtaW46YWRtaW4=\"))\n+        .andExpect(MockMvcResultMatchers.status().isNoContent())\n+        .andDo(MockMvcRestDocumentation.document(\"DeleteWorkbasketDocTest\"));\n+  }\n+", "originalCommit": "90eb7bb8dac2552546408b4f512014fcdc262feb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "000faa6d9d99b109a65989c78d3ca35028c4867c", "chunk": "diff --git a/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java b/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java\nindex 78eb85c70..b568f13ec 100644\n--- a/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java\n+++ b/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/WorkbasketControllerRestDocumentation.java\n\n@@ -482,25 +482,13 @@ class WorkbasketControllerRestDocumentation extends BaseRestDocumentation {\n                 responseFields(workbasketFieldDescriptors)));\n   }\n \n-  @Test\n-  void markWorkbasketForDeletionDocTest() throws Exception {\n-    this.mockMvc\n-        .perform(\n-            RestDocumentationRequestBuilders.delete(\n-                    restHelper.toUrl(\n-                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000005\"))\n-                .header(\"Authorization\", \"Basic YWRtaW46YWRtaW4=\"))\n-        .andExpect(MockMvcResultMatchers.status().isAccepted())\n-        .andDo(MockMvcRestDocumentation.document(\"MarkWorkbasketForDeletionDocTest\"));\n-  }\n-\n   @Test\n   void deleteWorkbasketDocTest() throws Exception {\n     this.mockMvc\n         .perform(\n             RestDocumentationRequestBuilders.delete(\n                     restHelper.toUrl(\n-                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000009\"))\n+                        Mapping.URL_WORKBASKET_ID, \"WBI:100000000000000000000000000000000008\"))\n                 .header(\"Authorization\", \"Basic YWRtaW46YWRtaW4=\"))\n         .andExpect(MockMvcResultMatchers.status().isNoContent())\n         .andDo(MockMvcRestDocumentation.document(\"DeleteWorkbasketDocTest\"));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgyMzk4OQ==", "url": "https://github.com/Taskana/taskana/pull/969#discussion_r389823989", "bodyText": "You don't have to change this. This is just to show you something cool:\ninstead of that lambda we could use a method reference.\nnoneMatch(\"WBI:100000000000000000000000000000000007\"::equals)\nPersonally I think this is much easier to read and should be used whenever possible.", "author": "mustaphazorgati", "createdAt": "2020-03-09T16:54:59Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/WorkbasketControllerIntTest.java", "diffHunk": "@@ -213,9 +220,9 @@ void testRemoveWorkbasketAsDistributionTarget() {\n             ParameterizedTypeReference.forType(DistributionTargetListResource.class));\n     assertThat(response2.getStatusCode()).isEqualTo(HttpStatus.OK);\n     assertThat(\n-        response2.getBody().getContent().stream()\n-            .map(DistributionTargetResource::getWorkbasketId)\n-            .noneMatch(id -> (id.equals(\"WBI:100000000000000000000000000000000007\"))))\n+            response2.getBody().getContent().stream()\n+                .map(DistributionTargetResource::getWorkbasketId)\n+                .noneMatch(id -> (id.equals(\"WBI:100000000000000000000000000000000007\"))))", "originalCommit": "90eb7bb8dac2552546408b4f512014fcdc262feb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "000faa6d9d99b109a65989c78d3ca35028c4867c", "chunk": "diff --git a/rest/taskana-rest-spring/src/test/java/pro/taskana/rest/WorkbasketControllerIntTest.java b/rest/taskana-rest-spring/src/test/java/pro/taskana/rest/WorkbasketControllerIntTest.java\nindex 9994401dd..21fd2fdad 100644\n--- a/rest/taskana-rest-spring/src/test/java/pro/taskana/rest/WorkbasketControllerIntTest.java\n+++ b/rest/taskana-rest-spring/src/test/java/pro/taskana/rest/WorkbasketControllerIntTest.java\n\n@@ -222,7 +224,7 @@ class WorkbasketControllerIntTest {\n     assertThat(\n             response2.getBody().getContent().stream()\n                 .map(DistributionTargetResource::getWorkbasketId)\n-                .noneMatch(id -> (id.equals(\"WBI:100000000000000000000000000000000007\"))))\n+                .noneMatch(\"WBI:100000000000000000000000000000000007\"::equals))\n         .isTrue();\n   }\n \n"}}, {"oid": "000faa6d9d99b109a65989c78d3ca35028c4867c", "url": "https://github.com/Taskana/taskana/commit/000faa6d9d99b109a65989c78d3ca35028c4867c", "message": "TSK-1029: Proper distinction between delete and markForFeletion for\nworkbaskets", "committedDate": "2020-03-18T11:22:09Z", "type": "commit"}]}