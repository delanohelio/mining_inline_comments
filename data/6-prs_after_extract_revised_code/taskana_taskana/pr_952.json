{"pr_number": 952, "pr_title": "TSK-1142 Removed JUnit4 dependency in taskana-simplehistory-provider", "pr_createdAt": "2020-02-27T09:06:07Z", "pr_url": "https://github.com/Taskana/taskana/pull/952", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI1Nzc0Nw==", "url": "https://github.com/Taskana/taskana/pull/952#discussion_r385257747", "bodyText": "This was a stupid suggestion - Sorry. Please remove together with the guava dependency. Thanks!", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:25:56Z", "path": "history/taskana-simplehistory-provider/src/main/java/pro/taskana/simplehistory/impl/SimpleHistoryServiceImpl.java", "diffHunk": "@@ -59,4 +59,13 @@ public void create(TaskanaHistoryEvent event) {\n   public HistoryQuery createHistoryQuery() {\n     return new HistoryQueryImpl(taskanaHistoryEngine, historyQueryMapper);\n   }\n+\n+  /*\n+   * ATTENTION: This method exists for testing purposes.\n+   */\n+  @VisibleForTesting", "originalCommit": "4dd848e98818c45f1626e7681e21b308b9d6df0c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bad13db5e3e4c299b16383cc7eb2cf6732055d68", "chunk": "diff --git a/history/taskana-simplehistory-provider/src/main/java/pro/taskana/simplehistory/impl/SimpleHistoryServiceImpl.java b/history/taskana-simplehistory-provider/src/main/java/pro/taskana/simplehistory/impl/SimpleHistoryServiceImpl.java\nindex 93877402..1a07f5f6 100644\n--- a/history/taskana-simplehistory-provider/src/main/java/pro/taskana/simplehistory/impl/SimpleHistoryServiceImpl.java\n+++ b/history/taskana-simplehistory-provider/src/main/java/pro/taskana/simplehistory/impl/SimpleHistoryServiceImpl.java\n\n@@ -63,7 +62,6 @@ public class SimpleHistoryServiceImpl implements TaskanaHistory {\n   /*\n    * ATTENTION: This method exists for testing purposes.\n    */\n-  @VisibleForTesting\n   TaskanaHistoryEngineImpl getTaskanaEngine(TaskanaEngineConfiguration taskanaEngineConfiguration)\n       throws SQLException {\n     return TaskanaHistoryEngineImpl.createTaskanaEngine(taskanaEngineConfiguration);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI1OTA3MA==", "url": "https://github.com/Taskana/taskana/pull/952#discussion_r385259070", "bodyText": "Please use the assertJ ListAssert.", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:27:49Z", "path": "history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java", "diffHunk": "@@ -36,9 +33,9 @@ public void testListValuesAscendingAndDescending() {\n             .createHistoryQuery()\n             .listValues(HistoryQueryColumnName.COMMENT, SortDirection.DESCENDING);\n \n-    assertEquals(3, ascendingList.size());\n-    assertArrayEquals(defaultList.toArray(), ascendingList.toArray());\n-    assertEquals(ascendingList.get(2), descendingList.get(0));\n+    assertThat(ascendingList).hasSize(3);\n+    assertThat(ascendingList.toArray()).isEqualTo(defaultList.toArray());", "originalCommit": "4dd848e98818c45f1626e7681e21b308b9d6df0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc5MjQxMw==", "url": "https://github.com/Taskana/taskana/pull/952#discussion_r387792413", "bodyText": "There is still a toArray. Is it necessary? I don't think so.", "author": "mustaphazorgati", "createdAt": "2020-03-04T16:42:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI1OTA3MA=="}], "type": "inlineReview", "revised_code": {"commit": "bad13db5e3e4c299b16383cc7eb2cf6732055d68", "chunk": "diff --git a/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java b/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java\nindex 5af72cdc..43196951 100644\n--- a/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java\n+++ b/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java\n\n@@ -28,14 +30,17 @@ public class QueryHistoryAccTest extends AbstractAccTest {\n         getHistoryService()\n             .createHistoryQuery()\n             .listValues(HistoryQueryColumnName.COMMENT, SortDirection.ASCENDING);\n+\n+    assertThat(ascendingList).hasSize(3);\n+    assertThat(ascendingList).isEqualTo(defaultList);\n+\n     List<String> descendingList =\n         getHistoryService()\n             .createHistoryQuery()\n             .listValues(HistoryQueryColumnName.COMMENT, SortDirection.DESCENDING);\n+    Collections.reverse(ascendingList);\n \n-    assertThat(ascendingList).hasSize(3);\n-    assertThat(ascendingList.toArray()).isEqualTo(defaultList.toArray());\n-    assertThat(descendingList.get(0)).isEqualTo(ascendingList.get(2));\n+    assertThat(ascendingList).isEqualTo(descendingList);\n   }\n \n   @Test\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2MDU2OA==", "url": "https://github.com/Taskana/taskana/pull/952#discussion_r385260568", "bodyText": "Again, ListAssert :) Thanks!", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:29:29Z", "path": "history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java", "diffHunk": "@@ -51,316 +48,315 @@ public void testComplexQuery() {\n             .orderByCreated(SortDirection.DESCENDING);\n \n     List<HistoryEventImpl> results = query.list();\n-    assertEquals(2, results.size());\n-    assertEquals(\"admin\", results.get(0).getUserId());\n-    assertEquals(\"peter\", results.get(1).getUserId());\n+    assertThat(results).hasSize(2);\n+    assertThat(results.get(0).getUserId()).isEqualTo(\"admin\");\n+    assertThat(results.get(1).getUserId()).isEqualTo(\"peter\");\n \n     results = query.orderByUserId(SortDirection.DESCENDING).list();\n-    assertEquals(2, results.size());\n-    assertEquals(\"admin\", results.get(0).getUserId());\n-    assertEquals(\"peter\", results.get(1).getUserId());\n-    assertEquals(3, query.domainLike().count());\n+    assertThat(results).hasSize(2);\n+    assertThat(results.get(0).getUserId()).isEqualTo(\"admin\");", "originalCommit": "4dd848e98818c45f1626e7681e21b308b9d6df0c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bad13db5e3e4c299b16383cc7eb2cf6732055d68", "chunk": "diff --git a/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java b/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java\nindex 5af72cdc..43196951 100644\n--- a/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java\n+++ b/history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryHistoryAccTest.java\n\n@@ -48,14 +53,13 @@ public class QueryHistoryAccTest extends AbstractAccTest {\n             .orderByCreated(SortDirection.DESCENDING);\n \n     List<HistoryEventImpl> results = query.list();\n-    assertThat(results).hasSize(2);\n-    assertThat(results.get(0).getUserId()).isEqualTo(\"admin\");\n-    assertThat(results.get(1).getUserId()).isEqualTo(\"peter\");\n-\n+    assertThat(results)\n+        .extracting(TaskanaHistoryEvent::getUserId)\n+        .containsExactly(\"admin\", \"peter\");\n     results = query.orderByUserId(SortDirection.DESCENDING).list();\n-    assertThat(results).hasSize(2);\n-    assertThat(results.get(0).getUserId()).isEqualTo(\"admin\");\n-    assertThat(results.get(1).getUserId()).isEqualTo(\"peter\");\n+    assertThat(results)\n+        .extracting(TaskanaHistoryEvent::getUserId)\n+        .containsExactly(\"admin\", \"peter\");\n     assertThat(query.domainLike().count()).isEqualTo(3);\n   }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2MTU2NA==", "url": "https://github.com/Taskana/taskana/pull/952#discussion_r385261564", "bodyText": "Please use ListAssert", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:31:18Z", "path": "history/taskana-simplehistory-provider/src/test/java/pro/taskana/simplehistory/impl/HistoryQueryImplTest.java", "diffHunk": "@@ -58,7 +58,7 @@ public void testShouldReturnList() throws SQLException {\n             .list();\n \n     validateMockitoUsage();\n-    assertArrayEquals(returnList.toArray(), result.toArray());\n+    assertThat(result.toArray()).isEqualTo(returnList.toArray());", "originalCommit": "4dd848e98818c45f1626e7681e21b308b9d6df0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc5MzE1NQ==", "url": "https://github.com/Taskana/taskana/pull/952#discussion_r387793155", "bodyText": "There is still a toArray. Is it necessary? I don't think so.", "author": "mustaphazorgati", "createdAt": "2020-03-04T16:43:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2MTU2NA=="}], "type": "inlineReview", "revised_code": {"commit": "bad13db5e3e4c299b16383cc7eb2cf6732055d68", "chunk": "diff --git a/history/taskana-simplehistory-provider/src/test/java/pro/taskana/simplehistory/impl/HistoryQueryImplTest.java b/history/taskana-simplehistory-provider/src/test/java/pro/taskana/simplehistory/impl/HistoryQueryImplTest.java\nindex 33568c0b..6d26dd8e 100644\n--- a/history/taskana-simplehistory-provider/src/test/java/pro/taskana/simplehistory/impl/HistoryQueryImplTest.java\n+++ b/history/taskana-simplehistory-provider/src/test/java/pro/taskana/simplehistory/impl/HistoryQueryImplTest.java\n\n@@ -58,7 +58,7 @@ public class HistoryQueryImplTest {\n             .list();\n \n     validateMockitoUsage();\n-    assertThat(result.toArray()).isEqualTo(returnList.toArray());\n+    assertThat(result).isEqualTo(returnList);\n   }\n \n   private HistoryEventImpl createHistoryEvent(\n"}}, {"oid": "bad13db5e3e4c299b16383cc7eb2cf6732055d68", "url": "https://github.com/Taskana/taskana/commit/bad13db5e3e4c299b16383cc7eb2cf6732055d68", "message": "TSK-1142 Removed JUnit4 dependency in taskana-simplehistory-provider", "committedDate": "2020-03-05T14:44:45Z", "type": "commit"}]}