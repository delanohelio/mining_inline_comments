{"pr_number": 1005, "pr_title": "TSK-1177 update Planned of Task if only Due() was changed", "pr_createdAt": "2020-04-06T10:04:08Z", "pr_url": "https://github.com/Taskana/taskana/pull/1005", "timeline": [{"oid": "ae2a6f2d88b747a1d58e91cad1c4386eb072a421", "url": "https://github.com/Taskana/taskana/commit/ae2a6f2d88b747a1d58e91cad1c4386eb072a421", "message": "TSK-1177 update Planned of Task if only Due() was changed", "committedDate": "2020-04-06T10:05:57Z", "type": "forcePushed"}, {"oid": "2ca1e9393d6dc6d46cad101fe4c1b9f13663e1a3", "url": "https://github.com/Taskana/taskana/commit/2ca1e9393d6dc6d46cad101fe4c1b9f13663e1a3", "message": "TSK-1177 update Planned of Task if only Due() was changed", "committedDate": "2020-04-06T10:08:57Z", "type": "forcePushed"}, {"oid": "6fb33180140b8267f9d1142742d5b39a9984dab5", "url": "https://github.com/Taskana/taskana/commit/6fb33180140b8267f9d1142742d5b39a9984dab5", "message": "TSK-1177 update Planned of Task if only Due was changed", "committedDate": "2020-04-06T12:06:54Z", "type": "commit"}, {"oid": "6fb33180140b8267f9d1142742d5b39a9984dab5", "url": "https://github.com/Taskana/taskana/commit/6fb33180140b8267f9d1142742d5b39a9984dab5", "message": "TSK-1177 update Planned of Task if only Due was changed", "committedDate": "2020-04-06T12:06:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1MjYwOQ==", "url": "https://github.com/Taskana/taskana/pull/1005#discussion_r404052609", "bodyText": "These two tests would be better placed in ServiceLevelPriorityAccTest, don't you think?", "author": "holgerhagen", "createdAt": "2020-04-06T12:29:54Z", "path": "lib/taskana-core/src/test/java/acceptance/task/UpdateTaskAccTest.java", "diffHunk": "@@ -42,7 +43,35 @@\n       userName = \"user_1_1\",\n       groupNames = {\"group_1\"})\n   @Test\n-  void testUpdatePrimaryObjectReferenceOfTask()\n+  public void should_updatePlanned_when_onlyDueWasChanged() throws Exception {", "originalCommit": "6fb33180140b8267f9d1142742d5b39a9984dab5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEwODE1Mw==", "url": "https://github.com/Taskana/taskana/pull/1005#discussion_r404108153", "bodyText": "Done", "author": "BerndBreier", "createdAt": "2020-04-06T13:53:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1MjYwOQ=="}], "type": "inlineReview", "revised_code": {"commit": "eac9fd38175b3415347c4be640a31dc7e1d7fe41", "chunk": "diff --git a/lib/taskana-core/src/test/java/acceptance/task/UpdateTaskAccTest.java b/lib/taskana-core/src/test/java/acceptance/task/UpdateTaskAccTest.java\nindex b94ac753b..b3f7636ac 100644\n--- a/lib/taskana-core/src/test/java/acceptance/task/UpdateTaskAccTest.java\n+++ b/lib/taskana-core/src/test/java/acceptance/task/UpdateTaskAccTest.java\n\n@@ -43,35 +43,7 @@ class UpdateTaskAccTest extends AbstractAccTest {\n       userName = \"user_1_1\",\n       groupNames = {\"group_1\"})\n   @Test\n-  public void should_updatePlanned_when_onlyDueWasChanged() throws Exception {\n-    TaskService taskService = taskanaEngine.getTaskService();\n-    Task task = taskService.getTask(\"TKI:000000000000000000000000000000000000\");\n-    task.setDue(Instant.parse(\"2020-07-02T01:00:00Z\"));\n-    Task task1 = taskService.updateTask(task);\n-    assertThat(task1.getPlanned()).isEqualTo(Instant.parse(\"2020-07-01T01:00:00Z\"));\n-  }\n-\n-  @WithAccessId(\n-      userName = \"user_1_1\",\n-      groupNames = {\"group_1\"})\n-  @Test\n-  public void should_throwException_when_DueAndPlannedWasChangedInconsistently() throws Exception {\n-    TaskService taskService = taskanaEngine.getTaskService();\n-    Task task = taskService.getTask(\"TKI:000000000000000000000000000000000000\");\n-    task.setDue(Instant.parse(\"2020-07-02T00:00:00Z\"));\n-    task.setPlanned(Instant.parse(\"2020-07-07T00:00:00Z\"));\n-    assertThatThrownBy(() -> taskService.updateTask(task))\n-        .isInstanceOf(InvalidArgumentException.class)\n-        .withFailMessage(\n-            \"Cannot update a task with given planned 2020-07-07T00:00:00Z and due \"\n-                + \"date 2020-07-02T00:00:00Z not matching the service level PT24H.\");\n-  }\n-\n-  @WithAccessId(\n-      userName = \"user_1_1\",\n-      groupNames = {\"group_1\"})\n-  @Test\n-  void should_UpdatePrimaryObjectReferenceOfTask_when_requested()\n+  void should_UpdatePrimaryObjectReferenceOfTask_When_Requested()\n       throws NotAuthorizedException, InvalidArgumentException, ClassificationNotFoundException,\n           TaskNotFoundException, ConcurrencyException, AttachmentPersistenceException,\n           InvalidStateException {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1MzMyNg==", "url": "https://github.com/Taskana/taskana/pull/1005#discussion_r404053326", "bodyText": "Would it be too much effort to separate the cases into separate tests? I would prefer that.", "author": "holgerhagen", "createdAt": "2020-04-06T12:31:19Z", "path": "lib/taskana-core/src/test/java/acceptance/task/ServiceLevelPriorityAccTest.java", "diffHunk": "@@ -297,22 +297,25 @@ void testSetPlannedPropertyOnSingleTaskWithTaskUpdate()\n       userName = \"admin\",\n       groupNames = {\"group_2\"})\n   @Test\n-  void testSetDuePropertyOnSingleTask()\n+  void should_SetDueOrPlannedProperty_when_TaskUpdateIsCalled()", "originalCommit": "6fb33180140b8267f9d1142742d5b39a9984dab5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEyMzQzMQ==", "url": "https://github.com/Taskana/taskana/pull/1005#discussion_r404123431", "bodyText": "Done", "author": "BerndBreier", "createdAt": "2020-04-06T14:13:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1MzMyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE0MjI1MA==", "url": "https://github.com/Taskana/taskana/pull/1005#discussion_r404142250", "bodyText": "Done", "author": "BerndBreier", "createdAt": "2020-04-06T14:36:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1MzMyNg=="}], "type": "inlineReview", "revised_code": {"commit": "eac9fd38175b3415347c4be640a31dc7e1d7fe41", "chunk": "diff --git a/lib/taskana-core/src/test/java/acceptance/task/ServiceLevelPriorityAccTest.java b/lib/taskana-core/src/test/java/acceptance/task/ServiceLevelPriorityAccTest.java\nindex 9813b393d..61615bc95 100644\n--- a/lib/taskana-core/src/test/java/acceptance/task/ServiceLevelPriorityAccTest.java\n+++ b/lib/taskana-core/src/test/java/acceptance/task/ServiceLevelPriorityAccTest.java\n\n@@ -297,7 +313,7 @@ public class ServiceLevelPriorityAccTest extends AbstractAccTest {\n       userName = \"admin\",\n       groupNames = {\"group_2\"})\n   @Test\n-  void should_SetDueOrPlannedProperty_when_TaskUpdateIsCalled()\n+  void should_SetPlanned_When_OnlyDueWasChanged()\n       throws NotAuthorizedException, TaskNotFoundException, InvalidArgumentException,\n           ConcurrencyException, InvalidStateException, ClassificationNotFoundException,\n           AttachmentPersistenceException {\n"}}, {"oid": "eac9fd38175b3415347c4be640a31dc7e1d7fe41", "url": "https://github.com/Taskana/taskana/commit/eac9fd38175b3415347c4be640a31dc7e1d7fe41", "message": "TSK-1177 update Planned - Holger's comments", "committedDate": "2020-04-06T14:10:47Z", "type": "commit"}, {"oid": "eac9fd38175b3415347c4be640a31dc7e1d7fe41", "url": "https://github.com/Taskana/taskana/commit/eac9fd38175b3415347c4be640a31dc7e1d7fe41", "message": "TSK-1177 update Planned - Holger's comments", "committedDate": "2020-04-06T14:10:47Z", "type": "forcePushed"}]}