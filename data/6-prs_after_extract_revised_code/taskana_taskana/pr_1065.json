{"pr_number": 1065, "pr_title": "TSK-1246: Fix updateTaskComment in TaskCommentService", "pr_createdAt": "2020-05-13T06:48:47Z", "pr_url": "https://github.com/Taskana/taskana/pull/1065", "timeline": [{"oid": "ae88b2217527d96a0b659ffb719db7dc5f29280f", "url": "https://github.com/Taskana/taskana/commit/ae88b2217527d96a0b659ffb719db7dc5f29280f", "message": "TSK-1246: Fix updateTaskComment in TaskCommentService", "committedDate": "2020-05-13T06:20:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg5MTAyNg==", "url": "https://github.com/Taskana/taskana/pull/1065#discussion_r424891026", "bodyText": "We already do a getTask() in getTaskComment() (I guess in order to check whether the user is authorized to see the task?) In this case the getTask() in line 70 is unnecessary, isn't it?", "author": "holgerhagen", "createdAt": "2020-05-14T06:09:19Z", "path": "lib/taskana-core/src/main/java/pro/taskana/task/internal/TaskCommentServiceImpl.java", "diffHunk": "@@ -69,13 +69,13 @@ TaskComment updateTaskComment(TaskComment taskCommentToUpdate)\n \n       taskService.getTask(taskCommentImplToUpdate.getTaskId());\n \n-      if (taskCommentToUpdate.getCreator().equals(userId)\n+      TaskComment originalTaskComment = getTaskComment(taskCommentImplToUpdate.getId());", "originalCommit": "ae88b2217527d96a0b659ffb719db7dc5f29280f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkwNzkyNg==", "url": "https://github.com/Taskana/taskana/pull/1065#discussion_r424907926", "bodyText": "That's true. Removed the additional getTask call from line 70", "author": "gitgoodjhe", "createdAt": "2020-05-14T06:51:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg5MTAyNg=="}], "type": "inlineReview", "revised_code": {"commit": "8029fdd90b66e9b96d63637fdc47c3958b21d922", "chunk": "diff --git a/lib/taskana-core/src/main/java/pro/taskana/task/internal/TaskCommentServiceImpl.java b/lib/taskana-core/src/main/java/pro/taskana/task/internal/TaskCommentServiceImpl.java\nindex 9303dc3db..a46fc456a 100644\n--- a/lib/taskana-core/src/main/java/pro/taskana/task/internal/TaskCommentServiceImpl.java\n+++ b/lib/taskana-core/src/main/java/pro/taskana/task/internal/TaskCommentServiceImpl.java\n\n@@ -67,8 +67,6 @@ class TaskCommentServiceImpl {\n \n       taskanaEngine.openConnection();\n \n-      taskService.getTask(taskCommentImplToUpdate.getTaskId());\n-\n       TaskComment originalTaskComment = getTaskComment(taskCommentImplToUpdate.getId());\n \n       if (originalTaskComment.getCreator().equals(userId)\n"}}, {"oid": "8029fdd90b66e9b96d63637fdc47c3958b21d922", "url": "https://github.com/Taskana/taskana/commit/8029fdd90b66e9b96d63637fdc47c3958b21d922", "message": "removed unnecessary getTask-call", "committedDate": "2020-05-14T07:42:59Z", "type": "commit"}]}