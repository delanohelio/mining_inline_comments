{"pr_number": 1021, "pr_title": "TSK-1083: updated HATEOAS from Version 0.24.0 to Version 1.0.4", "pr_createdAt": "2020-04-20T16:14:31Z", "pr_url": "https://github.com/Taskana/taskana/pull/1021", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg3MTk3Mg==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r411871972", "bodyText": "Why do you wrap the resources in an additional list?", "author": "mustaphazorgati", "createdAt": "2020-04-21T05:05:53Z", "path": "history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/rest/resource/TaskHistoryEventListAssembler.java", "diffHunk": "@@ -18,27 +20,29 @@ public TaskHistoryEventListResource toResources(\n       List<HistoryEventImpl> historyEvents, PageMetadata pageMetadata) {\n \n     TaskHistoryEventAssembler assembler = new TaskHistoryEventAssembler();\n-    List<TaskHistoryEventResource> resources = assembler.toResources(historyEvents);\n+    List<TaskHistoryEventResource> resources =\n+        new ArrayList<>(assembler.toCollectionModel(historyEvents).getContent());", "originalCommit": "d964595ff6cf6ab588eac4d3e0f65970457de1ea", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "chunk": "diff --git a/history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/rest/resource/TaskHistoryEventListAssembler.java b/history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/rest/resource/TaskHistoryEventListAssembler.java\nindex 90f5722bf..021615cce 100644\n--- a/history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/rest/resource/TaskHistoryEventListAssembler.java\n+++ b/history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/rest/resource/TaskHistoryEventListAssembler.java\n\n@@ -37,7 +37,7 @@ public class TaskHistoryEventListAssembler extends AbstractRessourcesAssembler {\n       if (pageMetadata.getNumber() > 1) {\n         pagedResources.add(\n             new Link(original.replaceQueryParam(\"page\", pageMetadata.getNumber() - 1).toUriString())\n-                .withRel(IanaLinkRelations.PREVIOUS));\n+                .withRel(IanaLinkRelations.PREV));\n       }\n       if (pageMetadata.getNumber() < pageMetadata.getTotalPages()) {\n         pagedResources.add(\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg3Mzk1NA==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r411873954", "bodyText": "this should be workbasketResource.getWorkbasketId()", "author": "mustaphazorgati", "createdAt": "2020-04-21T05:11:52Z", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/rest/WorkbasketController.java", "diffHunk": "@@ -196,13 +197,13 @@\n     if (workbasketId.equals(workbasketResource.getWorkbasketId())) {\n       Workbasket workbasket = workbasketResourceAssembler.toModel(workbasketResource);\n       workbasket = workbasketService.updateWorkbasket(workbasket);\n-      result = ResponseEntity.ok(workbasketResourceAssembler.toResource(workbasket));\n+      result = ResponseEntity.ok(workbasketResourceAssembler.toModel(workbasket));\n     } else {\n       throw new InvalidWorkbasketException(\n           \"Target-WB-ID('\"\n               + workbasketId\n               + \"') is not identical with the WB-ID of to object which should be updated. ID=('\"\n-              + workbasketResource.getId()\n+              + workbasketResource.getLink(IanaLinkRelations.SELF)", "originalCommit": "d964595ff6cf6ab588eac4d3e0f65970457de1ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkzNzIxMQ==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r411937211", "bodyText": "From my understanding of the previous implementation of the function the getId() method came from the ResouceSupport class and returns a Type of Link with a relation of self. As such replacing it with a method that returns a type of String is not a valid replacement in my eyes.", "author": "krozzus", "createdAt": "2020-04-21T07:24:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg3Mzk1NA=="}], "type": "inlineReview", "revised_code": {"commit": "a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "chunk": "diff --git a/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/WorkbasketController.java b/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/WorkbasketController.java\nindex d5e10bd85..fc6c982b5 100644\n--- a/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/WorkbasketController.java\n+++ b/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/WorkbasketController.java\n\n@@ -203,7 +202,7 @@ public class WorkbasketController extends AbstractPagingController {\n           \"Target-WB-ID('\"\n               + workbasketId\n               + \"') is not identical with the WB-ID of to object which should be updated. ID=('\"\n-              + workbasketResource.getLink(IanaLinkRelations.SELF)\n+              + workbasketResource.getWorkbasketId()\n               + \"')\");\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg3NzIxMQ==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r411877211", "bodyText": "Do you want to try again and remove this supresswarning? Or should we leave it here for now?", "author": "mustaphazorgati", "createdAt": "2020-04-21T05:21:36Z", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/links/PageLinksAspect.java", "diffHunk": "@@ -26,32 +27,35 @@\n @Aspect\n public class PageLinksAspect {\n \n+  @SuppressWarnings(\"unchecked\")", "originalCommit": "d964595ff6cf6ab588eac4d3e0f65970457de1ea", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "chunk": "diff --git a/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/links/PageLinksAspect.java b/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/links/PageLinksAspect.java\nindex 4efc7ef88..7300034a5 100644\n--- a/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/links/PageLinksAspect.java\n+++ b/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/links/PageLinksAspect.java\n\n@@ -50,7 +50,7 @@ public class PageLinksAspect {\n       if (page.getNumber() > 1) {\n         resourceSupport.add(\n             new Link(original.replaceQueryParam(\"page\", page.getNumber() - 1).toUriString())\n-                .withRel(IanaLinkRelations.PREVIOUS));\n+                .withRel(IanaLinkRelations.PREV));\n       }\n       if (page.getNumber() < page.getTotalPages()) {\n         resourceSupport.add(\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg3NzM3OA==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r411877378", "bodyText": "This should not be changed", "author": "mustaphazorgati", "createdAt": "2020-04-21T05:22:04Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/AbstractPagingControllerRestDocumentation.java", "diffHunk": "@@ -52,7 +52,7 @@ void setUp() {\n               .description(pagingFieldDescriptionsMap.get(\"_links.first.href\")),\n           fieldWithPath(\"_links.last.href\")\n               .description(pagingFieldDescriptionsMap.get(\"_links.last.href\")),\n-          fieldWithPath(\"_links.prev.href\")\n+          fieldWithPath(\"_links.previous.href\")", "originalCommit": "d964595ff6cf6ab588eac4d3e0f65970457de1ea", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "chunk": "diff --git a/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/AbstractPagingControllerRestDocumentation.java b/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/AbstractPagingControllerRestDocumentation.java\nindex 9d7db2a16..e90fa0101 100644\n--- a/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/AbstractPagingControllerRestDocumentation.java\n+++ b/rest/taskana-rest-spring/src/test/java/pro/taskana/doc/api/AbstractPagingControllerRestDocumentation.java\n\n@@ -52,7 +52,7 @@ class AbstractPagingControllerRestDocumentation extends BaseRestDocumentation {\n               .description(pagingFieldDescriptionsMap.get(\"_links.first.href\")),\n           fieldWithPath(\"_links.last.href\")\n               .description(pagingFieldDescriptionsMap.get(\"_links.last.href\")),\n-          fieldWithPath(\"_links.previous.href\")\n+          fieldWithPath(\"_links.prev.href\")\n               .description(pagingFieldDescriptionsMap.get(\"_links.prev.href\")),\n           fieldWithPath(\"_links.next.href\")\n               .description(pagingFieldDescriptionsMap.get(\"_links.next.href\"))\n"}}, {"oid": "a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "url": "https://github.com/Taskana/taskana/commit/a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "message": "TSK-1083: Updated HATEOAS from version 0.24.0 to version 1.0.4", "committedDate": "2020-04-21T14:15:29Z", "type": "forcePushed"}, {"oid": "a26dbb663b6bd501cb4523c057ac01b69fd7067d", "url": "https://github.com/Taskana/taskana/commit/a26dbb663b6bd501cb4523c057ac01b69fd7067d", "message": "TSK-1083: replcaed PagedResource class with PageModel from hate", "committedDate": "2020-04-22T04:04:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NDIwMA==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r412654200", "bodyText": "Sonarcloud could be unhappy with this. Maybe you should introduce a generic variable ;)", "author": "mustaphazorgati", "createdAt": "2020-04-22T04:08:33Z", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/AbstractRessourcesAssembler.java", "diffHunk": "@@ -35,8 +37,8 @@ protected static UriComponentsBuilder getBuilderForOriginalUri() {\n     return baseUri;\n   }\n \n-  protected PagedResources<?> addPageLinks(\n-      PagedResources<?> pagedResources, PagedResources.PageMetadata pageMetadata) {\n+  protected PagedModel<?> addPageLinks(", "originalCommit": "a26dbb663b6bd501cb4523c057ac01b69fd7067d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NDI0Ng==", "url": "https://github.com/Taskana/taskana/pull/1021#discussion_r412654246", "bodyText": "like we did for the aspect", "author": "mustaphazorgati", "createdAt": "2020-04-22T04:08:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NDIwMA=="}], "type": "inlineReview", "revised_code": {"commit": "550db27cbb984e6983fafa2508e25a178e2485d3", "chunk": "diff --git a/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/AbstractRessourcesAssembler.java b/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/AbstractRessourcesAssembler.java\nindex 1b0894271..4a6082772 100644\n--- a/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/AbstractRessourcesAssembler.java\n+++ b/rest/taskana-rest-spring/src/main/java/pro/taskana/rest/resource/AbstractRessourcesAssembler.java\n\n@@ -37,8 +36,8 @@ public abstract class AbstractRessourcesAssembler {\n     return baseUri;\n   }\n \n-  protected PagedModel<?> addPageLinks(\n-      PagedModel<?> pagedResources, PageMetadata pageMetadata) {\n+  protected PagedResources<?> addPageLinks(\n+      PagedResources<?> pagedResources, PagedResources.PageMetadata pageMetadata) {\n     UriComponentsBuilder original = getBuilderForOriginalUri();\n     pagedResources.add(\n         (new Link(original.replaceQueryParam(\"page\", 1).toUriString())).withRel(\"first\"));\n"}}, {"oid": "a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "url": "https://github.com/Taskana/taskana/commit/a0f6609a8c3e1809e942ee6c2b8ca51c1977a0a9", "message": "TSK-1083: Updated HATEOAS from version 0.24.0 to version 1.0.4", "committedDate": "2020-04-21T14:15:29Z", "type": "forcePushed"}, {"oid": "550db27cbb984e6983fafa2508e25a178e2485d3", "url": "https://github.com/Taskana/taskana/commit/550db27cbb984e6983fafa2508e25a178e2485d3", "message": "TSK-1083: Updated HATEOAS from version 0.24.0 to version 1.0.4", "committedDate": "2020-04-22T13:35:36Z", "type": "forcePushed"}, {"oid": "68b966bcb7bca2d4bb57de717a074df073e6b9ec", "url": "https://github.com/Taskana/taskana/commit/68b966bcb7bca2d4bb57de717a074df073e6b9ec", "message": "TSK-1083: Updated HATEOAS from version 0.24.0 to version 1.0.4", "committedDate": "2020-04-22T15:36:12Z", "type": "commit"}, {"oid": "68b966bcb7bca2d4bb57de717a074df073e6b9ec", "url": "https://github.com/Taskana/taskana/commit/68b966bcb7bca2d4bb57de717a074df073e6b9ec", "message": "TSK-1083: Updated HATEOAS from version 0.24.0 to version 1.0.4", "committedDate": "2020-04-22T15:36:12Z", "type": "forcePushed"}]}