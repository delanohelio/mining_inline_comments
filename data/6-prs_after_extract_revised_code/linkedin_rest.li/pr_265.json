{"pr_number": 265, "pr_title": "PDL Migration.", "pr_createdAt": "2020-04-21T08:01:24Z", "pr_url": "https://github.com/linkedin/rest.li/pull/265", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk2NDY0OQ==", "url": "https://github.com/linkedin/rest.li/pull/265#discussion_r411964649", "bodyText": "Why did you loosen this check to ignore incorrect filenames?", "author": "evanw555", "createdAt": "2020-04-21T08:04:44Z", "path": "restli-tools/src/main/java/com/linkedin/restli/tools/data/SchemaFormatTranslator.java", "diffHunk": "@@ -365,8 +365,7 @@ private static NamedDataSchema checkForErrorsAndGetTopLevelSchema(\n       return  null;\n     }\n     DataSchema sourceSchema = topLevelSchemas.get(0);\n-    if (!(sourceSchema instanceof NamedDataSchema) ||\n-        !((NamedDataSchema) sourceSchema).getFullName().equals(schemaFullname))\n+    if (!(sourceSchema instanceof NamedDataSchema))", "originalCommit": "5604f7ceb550862e9133715832e00cc657d9fdbf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk2ODA2NQ==", "url": "https://github.com/linkedin/rest.li/pull/265#discussion_r411968065", "bodyText": "That was not intentional. reverted.\nSince some of the test pdscs are in resources/external, the package was different when being translated. But I used custom tasks with paths configured correctly. Forgot to remove this change.", "author": "karthikbalasub", "createdAt": "2020-04-21T08:09:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk2NDY0OQ=="}], "type": "inlineReview", "revised_code": {"commit": "16e35be5c94c3c1d6ff83418b73c76e234ade782", "chunk": "diff --git a/restli-tools/src/main/java/com/linkedin/restli/tools/data/SchemaFormatTranslator.java b/restli-tools/src/main/java/com/linkedin/restli/tools/data/SchemaFormatTranslator.java\nindex 004991584..bbedef8fa 100644\n--- a/restli-tools/src/main/java/com/linkedin/restli/tools/data/SchemaFormatTranslator.java\n+++ b/restli-tools/src/main/java/com/linkedin/restli/tools/data/SchemaFormatTranslator.java\n\n@@ -365,7 +365,8 @@ public class SchemaFormatTranslator\n       return  null;\n     }\n     DataSchema sourceSchema = topLevelSchemas.get(0);\n-    if (!(sourceSchema instanceof NamedDataSchema))\n+    if (!(sourceSchema instanceof NamedDataSchema) ||\n+        !((NamedDataSchema) sourceSchema).getFullName().equals(schemaFullname))\n     {\n       errorMessages.append(\"Parsed top-level schema does not match the schema file name. File: \")\n           .append(file.getAbsolutePath())\n"}}, {"oid": "16e35be5c94c3c1d6ff83418b73c76e234ade782", "url": "https://github.com/linkedin/rest.li/commit/16e35be5c94c3c1d6ff83418b73c76e234ade782", "message": "PDL Migration.\nThis PR migrates most of the PDSC schemas to PDL. Only PDSC files that\nare needed for tests that require them in PDSC format are not migrated.", "committedDate": "2020-04-21T08:07:44Z", "type": "commit"}, {"oid": "16e35be5c94c3c1d6ff83418b73c76e234ade782", "url": "https://github.com/linkedin/rest.li/commit/16e35be5c94c3c1d6ff83418b73c76e234ade782", "message": "PDL Migration.\nThis PR migrates most of the PDSC schemas to PDL. Only PDSC files that\nare needed for tests that require them in PDSC format are not migrated.", "committedDate": "2020-04-21T08:07:44Z", "type": "forcePushed"}]}