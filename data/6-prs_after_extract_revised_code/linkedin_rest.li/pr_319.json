{"pr_number": 319, "pr_title": "Add option to force fully qualified names in PDSC encoder.", "pr_createdAt": "2020-06-03T23:13:28Z", "pr_url": "https://github.com/linkedin/rest.li/pull/319", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkxNDY0Nw==", "url": "https://github.com/linkedin/rest.li/pull/319#discussion_r434914647", "bodyText": "private?", "author": "aman1309", "createdAt": "2020-06-03T23:40:22Z", "path": "data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java", "diffHunk": "@@ -95,6 +95,7 @@ public static String schemasToJson(Collection<DataSchema> schemas, JsonBuilder.P\n   protected final JsonBuilder _builder;\n   protected String _currentNamespace = \"\";\n   protected String _currentPackage = \"\";\n+  protected boolean _alwaysUseFullyQualifedName = false;", "originalCommit": "38272e56934f30caf346bbbbdd4a2a639dd9ef36", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "fdf24de37537d36d2e43584381fa3afb4f961ee4", "chunk": "diff --git a/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java b/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java\nindex 9b9defb5b..83aa77729 100644\n--- a/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java\n+++ b/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java\n\n@@ -95,7 +95,7 @@ public class SchemaToJsonEncoder extends AbstractSchemaEncoder\n   protected final JsonBuilder _builder;\n   protected String _currentNamespace = \"\";\n   protected String _currentPackage = \"\";\n-  protected boolean _alwaysUseFullyQualifedName = false;\n+  private boolean _alwaysUseFullyQualifedName = false;\n \n   public SchemaToJsonEncoder(JsonBuilder builder, TypeReferenceFormat typeReferenceFormat)\n   {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkxNDc5Mg==", "url": "https://github.com/linkedin/rest.li/pull/319#discussion_r434914792", "bodyText": "can you add when this should be set", "author": "aman1309", "createdAt": "2020-06-03T23:40:57Z", "path": "data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java", "diffHunk": "@@ -127,6 +128,14 @@ public String getCurrentNamespace()\n     return _currentNamespace;\n   }\n \n+  /**\n+   * Configure the encoder to always use fully qualified names when encoding named type references.", "originalCommit": "38272e56934f30caf346bbbbdd4a2a639dd9ef36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkxODUxOA==", "url": "https://github.com/linkedin/rest.li/pull/319#discussion_r434918518", "bodyText": "This is for LinkedIn specific use case, we should avoid adding those information in the open source code base.", "author": "nickibi", "createdAt": "2020-06-03T23:54:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkxNDc5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA0OTU2NQ==", "url": "https://github.com/linkedin/rest.li/pull/319#discussion_r435049565", "bodyText": "Updated the javadoc to provide more details.", "author": "karthikbalasub", "createdAt": "2020-06-04T07:32:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkxNDc5Mg=="}], "type": "inlineReview", "revised_code": {"commit": "fdf24de37537d36d2e43584381fa3afb4f961ee4", "chunk": "diff --git a/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java b/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java\nindex 9b9defb5b..83aa77729 100644\n--- a/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java\n+++ b/data/src/main/java/com/linkedin/data/schema/SchemaToJsonEncoder.java\n\n@@ -130,10 +130,17 @@ public class SchemaToJsonEncoder extends AbstractSchemaEncoder\n \n   /**\n    * Configure the encoder to always use fully qualified names when encoding named type references.\n+   * When encoding a type-reference that is in the current namespace (eg, com.linkedin.Foo), there are two options:\n+   * <ul>\n+   *   <li>Omit the namespace part and write only the simple name (Foo). This is the default behavior.</li>\n+   *   <li>Encode the fully qualified name (com.linkedin.Foo).</li>\n+   * </ul>\n+   * Both options are equivalent and represents the same schema. Setting this flag to true enables using the second\n+   * option while encoding.\n    */\n-  public void setAlwaysUseFullyQualifedName(boolean alwaysUseFullyQualifedName)\n+  public void setAlwaysUseFullyQualifiedName(boolean alwaysUseFullyQualifiedName)\n   {\n-    _alwaysUseFullyQualifedName = alwaysUseFullyQualifedName;\n+    _alwaysUseFullyQualifedName = alwaysUseFullyQualifiedName;\n   }\n \n   /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkxNTE0NA==", "url": "https://github.com/linkedin/rest.li/pull/319#discussion_r434915144", "bodyText": "same here", "author": "aman1309", "createdAt": "2020-06-03T23:42:16Z", "path": "restli-tools/src/main/java/com/linkedin/restli/tools/data/SchemaFormatTranslator.java", "diffHunk": "@@ -90,6 +89,10 @@\n     OPTIONS.addOption(OptionBuilder.withLongOpt(\"skip-verification\")\n         .withDescription(\"Skip verification of the translated schemas. Be cautious, as incorrect translations will not be caught.\")\n         .create('k'));\n+\n+    OPTIONS.addOption(OptionBuilder.withLongOpt(\"force-pdsc-fully-qualified-names\")\n+        .withDescription(\"Forces generated PDSC schemas to always use fully qualified names.\")", "originalCommit": "38272e56934f30caf346bbbbdd4a2a639dd9ef36", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "fdf24de37537d36d2e43584381fa3afb4f961ee4", "url": "https://github.com/linkedin/rest.li/commit/fdf24de37537d36d2e43584381fa3afb4f961ee4", "message": "Add option to force fully qualified names in PDSC encoder.", "committedDate": "2020-06-04T06:55:04Z", "type": "commit"}, {"oid": "fdf24de37537d36d2e43584381fa3afb4f961ee4", "url": "https://github.com/linkedin/rest.li/commit/fdf24de37537d36d2e43584381fa3afb4f961ee4", "message": "Add option to force fully qualified names in PDSC encoder.", "committedDate": "2020-06-04T06:55:04Z", "type": "forcePushed"}, {"oid": "47e4ade84fc747af21593a41edae04c93b68cc95", "url": "https://github.com/linkedin/rest.li/commit/47e4ade84fc747af21593a41edae04c93b68cc95", "message": "Merge branch 'master' into feature/encode_fully_qualified", "committedDate": "2020-06-04T07:33:03Z", "type": "commit"}, {"oid": "49a8eb3bb1225303e9ece1c882341176084c9398", "url": "https://github.com/linkedin/rest.li/commit/49a8eb3bb1225303e9ece1c882341176084c9398", "message": "Release version 29.2.3", "committedDate": "2020-06-04T07:34:48Z", "type": "commit"}]}