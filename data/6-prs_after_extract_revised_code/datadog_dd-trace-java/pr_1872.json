{"pr_number": 1872, "pr_title": "Fix NPE for DDAgentWriter default builder with default monitoring", "pr_createdAt": "2020-09-16T08:33:23Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1872", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2NzEwNQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1872#discussion_r489267105", "bodyText": "I would really prefer we don't make changes like these", "author": "richardstartin", "createdAt": "2020-09-16T08:42:18Z", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "diffHunk": "@@ -85,8 +86,8 @@ private DDAgentWriter(\n               monitoring);\n     }\n     this.healthMetrics = healthMetrics;\n-    this.dispatcher = new PayloadDispatcher(api, healthMetrics, monitoring);", "originalCommit": "4d9097f33eb309ad7863a583f3bb11238713334b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2ODAzMQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1872#discussion_r489268031", "bodyText": "You mean the this. prefix, right?", "author": "drodriguezhdez", "createdAt": "2020-09-16T08:43:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2NzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2ODU4MA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1872#discussion_r489268580", "bodyText": "yes, I imagine this happened as a result of some IDE setting?", "author": "richardstartin", "createdAt": "2020-09-16T08:44:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2NzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2ODk5NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1872#discussion_r489268994", "bodyText": "Yes, changing \ud83d\udc4d", "author": "drodriguezhdez", "createdAt": "2020-09-16T08:45:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2NzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI3MDM5MA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1872#discussion_r489270390", "bodyText": "yes, I imagine this happened as a result of some IDE setting?", "author": "richardstartin", "createdAt": "2020-09-16T08:47:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2NzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI3NTcxMg==", "url": "https://github.com/DataDog/dd-trace-java/pull/1872#discussion_r489275712", "bodyText": "Changed", "author": "drodriguezhdez", "createdAt": "2020-09-16T08:55:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTI2NzEwNQ=="}], "type": "inlineReview", "revised_code": {"commit": "958eb552e5412d73d296d237129d15120e4e3b3b", "chunk": "diff --git a/dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java b/dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java\nindex b84d76ce87..95e20b869e 100644\n--- a/dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java\n+++ b/dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java\n\n@@ -86,8 +86,8 @@ public class DDAgentWriter implements Writer {\n               monitoring);\n     }\n     this.healthMetrics = healthMetrics;\n-    dispatcher = new PayloadDispatcher(api, healthMetrics, monitoring);\n-    traceProcessingWorker =\n+    this.dispatcher = new PayloadDispatcher(api, healthMetrics, monitoring);\n+    this.traceProcessingWorker =\n         new TraceProcessingWorker(\n             traceBufferSize,\n             healthMetrics,\n"}}, {"oid": "958eb552e5412d73d296d237129d15120e4e3b3b", "url": "https://github.com/DataDog/dd-trace-java/commit/958eb552e5412d73d296d237129d15120e4e3b3b", "message": "Fix DDAgentWriter builder with Monitoring.DISABLED", "committedDate": "2020-09-16T08:53:07Z", "type": "commit"}, {"oid": "958eb552e5412d73d296d237129d15120e4e3b3b", "url": "https://github.com/DataDog/dd-trace-java/commit/958eb552e5412d73d296d237129d15120e4e3b3b", "message": "Fix DDAgentWriter builder with Monitoring.DISABLED", "committedDate": "2020-09-16T08:53:07Z", "type": "forcePushed"}, {"oid": "a680ce5f4fa1acbb8aa35795009e56b2516a6dc6", "url": "https://github.com/DataDog/dd-trace-java/commit/a680ce5f4fa1acbb8aa35795009e56b2516a6dc6", "message": "Added DDTracerTest", "committedDate": "2020-09-16T09:12:07Z", "type": "commit"}]}