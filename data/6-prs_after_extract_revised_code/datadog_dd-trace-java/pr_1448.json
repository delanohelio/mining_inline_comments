{"pr_number": 1448, "pr_title": "Adding an option to manually disable Kafka headers", "pr_createdAt": "2020-05-11T23:13:15Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1448", "timeline": [{"oid": "ab67a7b292652965f188534e3c9289615a97702f", "url": "https://github.com/DataDog/dd-trace-java/commit/ab67a7b292652965f188534e3c9289615a97702f", "message": "Adding an option to manually disable Kafka headers", "committedDate": "2020-05-11T22:45:44Z", "type": "commit"}, {"oid": "9b82831c0ee6e4181c06b00c97c831738a32c715", "url": "https://github.com/DataDog/dd-trace-java/commit/9b82831c0ee6e4181c06b00c97c831738a32c715", "message": "Fixing checkstyle error", "committedDate": "2020-05-12T12:37:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcyOTkxNQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1448#discussion_r423729915", "bodyText": "Hey @shields478, thanks for the explanation of the problem and the contribution.  I think this setting might be generally useful, so my proposal is that we change the format a bit to be usable for other things in the future.  My suggestion is dd.<integration>.<client/server>.propagation.enabled.  That means instead of kafka.headers.enabled the setting you would use here is kafka.client.propagation.enabled which as an env var would be DD_KAFKA_CLIENT_PROPAGATION_ENABLED (sys props and env vars have the dd prefix).  An alternate option would be to change client/server to inject/extract since that is more directly relevant.", "author": "tylerbenson", "createdAt": "2020-05-12T13:25:14Z", "path": "dd-trace-api/src/main/java/datadog/trace/api/Config.java", "diffHunk": "@@ -148,6 +148,8 @@\n   public static final String PROFILING_EXCEPTION_HISTOGRAM_MAX_COLLECTION_SIZE =\n       \"profiling.exception.histogram.max-collection-size\";\n \n+  public static final String KAFKA_HEADERS_ENABLED = \"kafka.headers.enabled\";", "originalCommit": "9b82831c0ee6e4181c06b00c97c831738a32c715", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc0MDQ0Ng==", "url": "https://github.com/DataDog/dd-trace-java/pull/1448#discussion_r423740446", "bodyText": "Ok good idea. I'll get those changes up this morning.", "author": "shields478", "createdAt": "2020-05-12T13:39:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcyOTkxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "0c8a9a8df532e3c34891dc9ccefc6a9b8ac3fb05", "chunk": "diff --git a/dd-trace-api/src/main/java/datadog/trace/api/Config.java b/dd-trace-api/src/main/java/datadog/trace/api/Config.java\nindex 9a3d16659e..0d8c9bb799 100644\n--- a/dd-trace-api/src/main/java/datadog/trace/api/Config.java\n+++ b/dd-trace-api/src/main/java/datadog/trace/api/Config.java\n\n@@ -148,7 +148,7 @@ public class Config {\n   public static final String PROFILING_EXCEPTION_HISTOGRAM_MAX_COLLECTION_SIZE =\n       \"profiling.exception.histogram.max-collection-size\";\n \n-  public static final String KAFKA_HEADERS_ENABLED = \"kafka.headers.enabled\";\n+  public static final String KAFKA_CLIENT_PROPAGATION_ENABLED = \"kafka.client.propagation.enabled\";\n \n   public static final String RUNTIME_ID_TAG = \"runtime-id\";\n   public static final String SERVICE = \"service\";\n"}}, {"oid": "0c8a9a8df532e3c34891dc9ccefc6a9b8ac3fb05", "url": "https://github.com/DataDog/dd-trace-java/commit/0c8a9a8df532e3c34891dc9ccefc6a9b8ac3fb05", "message": "Updating naming convention", "committedDate": "2020-05-12T13:57:45Z", "type": "commit"}]}