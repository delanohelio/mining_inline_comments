{"pr_number": 2022, "pr_title": "Elasticsearch 7 instrumentation", "pr_createdAt": "2020-10-22T11:27:05Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/2022", "timeline": [{"oid": "57c7341fe9e5295760cdf02c1d04fe4377fb3dd2", "url": "https://github.com/DataDog/dd-trace-java/commit/57c7341fe9e5295760cdf02c1d04fe4377fb3dd2", "message": "Elasticsearch 7 instrumentation", "committedDate": "2020-10-23T11:46:56Z", "type": "commit"}, {"oid": "0e2355fc1893353e092c3184ba0cfed933146ed6", "url": "https://github.com/DataDog/dd-trace-java/commit/0e2355fc1893353e092c3184ba0cfed933146ed6", "message": "unused imports", "committedDate": "2020-10-23T11:46:56Z", "type": "commit"}, {"oid": "e45754c0e4b4b8925df738b55ac8c1313581b6c9", "url": "https://github.com/DataDog/dd-trace-java/commit/e45754c0e4b4b8925df738b55ac8c1313581b6c9", "message": "Map AutoPutMappingAction back to PutMappingAction on ES 7.9", "committedDate": "2020-10-23T11:46:56Z", "type": "commit"}, {"oid": "8d008406b07ce5d298389838eb344b5b5e561b39", "url": "https://github.com/DataDog/dd-trace-java/commit/8d008406b07ce5d298389838eb344b5b5e561b39", "message": "Add classloader matcher to make sure the new advice only applies to ES7\n\nThis is because the client in ES7 has been simplified so the best place\nto intercept is the public top-level methods. Since these methods also\nexisted in previous releases we don't want our ES7 advice to also apply\nthere otherwise we'd get duplicated spans.", "committedDate": "2020-10-23T11:46:56Z", "type": "commit"}, {"oid": "c5614320e646a08547562e87812c8b2bd20f8e6b", "url": "https://github.com/DataDog/dd-trace-java/commit/c5614320e646a08547562e87812c8b2bd20f8e6b", "message": "Cleanup", "committedDate": "2020-10-23T11:46:56Z", "type": "commit"}, {"oid": "c5614320e646a08547562e87812c8b2bd20f8e6b", "url": "https://github.com/DataDog/dd-trace-java/commit/c5614320e646a08547562e87812c8b2bd20f8e6b", "message": "Cleanup", "committedDate": "2020-10-23T11:46:56Z", "type": "forcePushed"}, {"oid": "01eeba6f39673d75e5522f8130eed048213c7ffb", "url": "https://github.com/DataDog/dd-trace-java/commit/01eeba6f39673d75e5522f8130eed048213c7ffb", "message": "Apply ElasticsearchBreakTraceInstrumentation workaround ES 7 transport tests", "committedDate": "2020-10-23T13:31:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEyNjg0MQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/2022#discussion_r511126841", "bodyText": "\ud83d\udc4d", "author": "tylerbenson", "createdAt": "2020-10-23T19:55:37Z", "path": "dd-java-agent/instrumentation/elasticsearch/rest-7/src/main/java/datadog/trace/instrumentation/elasticsearch7/RestResponseListener.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package datadog.trace.instrumentation.elasticsearch7;\n+\n+import datadog.trace.bootstrap.instrumentation.api.AgentSpan;\n+import datadog.trace.instrumentation.elasticsearch.ElasticsearchRestClientDecorator;\n+import org.elasticsearch.client.Response;\n+import org.elasticsearch.client.ResponseListener;\n+\n+/** This class is identical to version 6's instrumentation. */", "originalCommit": "01eeba6f39673d75e5522f8130eed048213c7ffb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}