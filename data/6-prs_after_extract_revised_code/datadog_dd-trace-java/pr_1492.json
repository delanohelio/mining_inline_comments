{"pr_number": 1492, "pr_title": "specify maxDepth", "pr_createdAt": "2020-05-22T13:45:42Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1492", "timeline": [{"oid": "1e0ba898c866c04896a273711acdfaa1a7d5afa6", "url": "https://github.com/DataDog/dd-trace-java/commit/1e0ba898c866c04896a273711acdfaa1a7d5afa6", "message": "specify maxDepth\n\nby default, getThreadInfo does not provide stacktraces", "committedDate": "2020-05-22T13:25:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI1NzY5Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1492#discussion_r429257697", "bodyText": "Should this be configurable?", "author": "jbachorik", "createdAt": "2020-05-22T13:50:19Z", "path": "dd-trace-core/src/main/java/datadog/trace/core/util/JmxThreadStackProvider.java", "diffHunk": "@@ -11,7 +11,7 @@\n \n   @Override\n   public StackTraceElement[][] getStackTrace(long[] threadIds) {\n-    ThreadInfo[] threadInfos = threadMXBean.getThreadInfo(threadIds); // maxDepth?\n+    ThreadInfo[] threadInfos = threadMXBean.getThreadInfo(threadIds, 128); // maxDepth?", "originalCommit": "1e0ba898c866c04896a273711acdfaa1a7d5afa6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI3MTk5OQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1492#discussion_r429271999", "bodyText": "yes sure, I can add a comment", "author": "jpbempel", "createdAt": "2020-05-22T14:14:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI1NzY5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "74becb1170283abfe300ed4ed3555b46afc14ad4", "chunk": "diff --git a/dd-trace-core/src/main/java/datadog/trace/core/util/JmxThreadStackProvider.java b/dd-trace-core/src/main/java/datadog/trace/core/util/JmxThreadStackProvider.java\nindex 8c6892db49..f20c3e90dd 100644\n--- a/dd-trace-core/src/main/java/datadog/trace/core/util/JmxThreadStackProvider.java\n+++ b/dd-trace-core/src/main/java/datadog/trace/core/util/JmxThreadStackProvider.java\n\n@@ -11,7 +11,8 @@ public class JmxThreadStackProvider implements ThreadStackProvider {\n \n   @Override\n   public StackTraceElement[][] getStackTrace(long[] threadIds) {\n-    ThreadInfo[] threadInfos = threadMXBean.getThreadInfo(threadIds, 128); // maxDepth?\n+    // TODO maxDepth should be configurable\n+    ThreadInfo[] threadInfos = threadMXBean.getThreadInfo(threadIds, 128);\n     if (threadInfos.length == 0) {\n       return ThreadStackProvider.EMPTY_STACKTRACE_ARRAY;\n     }\n"}}, {"oid": "74becb1170283abfe300ed4ed3555b46afc14ad4", "url": "https://github.com/DataDog/dd-trace-java/commit/74becb1170283abfe300ed4ed3555b46afc14ad4", "message": "add comment", "committedDate": "2020-05-22T14:15:59Z", "type": "commit"}]}