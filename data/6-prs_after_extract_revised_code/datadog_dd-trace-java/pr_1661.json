{"pr_number": 1661, "pr_title": "Strict mode and health metrics for scope close failures", "pr_createdAt": "2020-07-08T16:25:27Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1661", "timeline": [{"oid": "d644f3d489c4471c51dd209aa05673a7d2eebccb", "url": "https://github.com/DataDog/dd-trace-java/commit/d644f3d489c4471c51dd209aa05673a7d2eebccb", "message": "Strict mode config", "committedDate": "2020-07-07T19:09:30Z", "type": "commit"}, {"oid": "c9d69542b2d31439ca0b39ec8af47177e3f8bdf1", "url": "https://github.com/DataDog/dd-trace-java/commit/c9d69542b2d31439ca0b39ec8af47177e3f8bdf1", "message": "Add ScopeSource to scope creation", "committedDate": "2020-07-07T19:58:40Z", "type": "commit"}, {"oid": "76c3af12b0e0679f48bb16577105ae50d5f36f6f", "url": "https://github.com/DataDog/dd-trace-java/commit/76c3af12b0e0679f48bb16577105ae50d5f36f6f", "message": "Add health metrics and strict mode exception", "committedDate": "2020-07-07T20:00:20Z", "type": "commit"}, {"oid": "ebdbbc6c0738b5cfd08c094f57513d72a4fbc9b2", "url": "https://github.com/DataDog/dd-trace-java/commit/ebdbbc6c0738b5cfd08c094f57513d72a4fbc9b2", "message": "Tests and StatsDClient mocks", "committedDate": "2020-07-08T14:31:53Z", "type": "commit"}, {"oid": "cf3880ba757307a0126e10e6f9ce844c4200528b", "url": "https://github.com/DataDog/dd-trace-java/commit/cf3880ba757307a0126e10e6f9ce844c4200528b", "message": "OpenTelemetry test", "committedDate": "2020-07-08T16:19:00Z", "type": "commit"}, {"oid": "0fbb2e3c789506aa8b48b8b42db8bf7dfc1c26a2", "url": "https://github.com/DataDog/dd-trace-java/commit/0fbb2e3c789506aa8b48b8b42db8bf7dfc1c26a2", "message": "Fix test", "committedDate": "2020-07-08T16:55:33Z", "type": "commit"}, {"oid": "72ed7084e20fc3cec42b4746bc7107e447442e15", "url": "https://github.com/DataDog/dd-trace-java/commit/72ed7084e20fc3cec42b4746bc7107e447442e15", "message": "Exclude ScopeSource because jacoco limitations", "committedDate": "2020-07-08T17:57:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI1OTgyNw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1661#discussion_r452259827", "bodyText": "interesting... what is a detached mock?", "author": "tylerbenson", "createdAt": "2020-07-09T14:28:47Z", "path": "dd-java-agent/testing/src/main/groovy/datadog/trace/agent/test/AgentTestRunner.java", "diffHunk": "@@ -102,7 +108,9 @@ public boolean add(final List<DDSpan> trace) {\n             return result;\n           }\n         };\n-    TEST_TRACER = CoreTracer.builder().writer(TEST_WRITER).build();\n+\n+    STATS_D_CLIENT = new DetachedMockFactory().Mock(StatsDClient.class);", "originalCommit": "72ed7084e20fc3cec42b4746bc7107e447442e15", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}