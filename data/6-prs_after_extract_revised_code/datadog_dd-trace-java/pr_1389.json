{"pr_number": 1389, "pr_title": "Rediscala instrumentation", "pr_createdAt": "2020-04-20T21:56:46Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1389", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MjUwMw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1389#discussion_r411742503", "bodyText": "Looks like the original classes are duplicated instead of being moved/renamed properly.", "author": "tylerbenson", "createdAt": "2020-04-20T22:47:31Z", "path": "dd-java-agent/instrumentation/rediscala/src/main/java/datadog/trace/instrumentation/rediscala/RediscalaClientDecorator.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package datadog.trace.instrumentation.rediscala;\n+\n+import datadog.trace.agent.decorator.DatabaseClientDecorator;\n+import datadog.trace.api.DDSpanTypes;\n+import redis.RedisCommand;\n+\n+public class RediscalaClientDecorator extends DatabaseClientDecorator<RedisCommand> {", "originalCommit": "e3448396b0f712c988301b8403dc800bd5cb3120", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkwNDkwMQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1389#discussion_r411904901", "bodyText": "Yeah, I hadn't added staged the deletions, good catch.", "author": "richardstartin", "createdAt": "2020-04-21T06:27:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MjUwMw=="}], "type": "inlineReview", "revised_code": {"commit": "41c458ed03607bf9b217abe454e2dc1d5fb4a523", "chunk": "diff --git a/dd-java-agent/instrumentation/rediscala/src/main/java/datadog/trace/instrumentation/rediscala/RediscalaClientDecorator.java b/dd-java-agent/instrumentation/rediscala/src/main/java/datadog/trace/instrumentation/rediscala/RediscalaClientDecorator.java\ndeleted file mode 100644\nindex 2527bb8077..0000000000\n--- a/dd-java-agent/instrumentation/rediscala/src/main/java/datadog/trace/instrumentation/rediscala/RediscalaClientDecorator.java\n+++ /dev/null\n\n@@ -1,44 +0,0 @@\n-package datadog.trace.instrumentation.rediscala;\n-\n-import datadog.trace.agent.decorator.DatabaseClientDecorator;\n-import datadog.trace.api.DDSpanTypes;\n-import redis.RedisCommand;\n-\n-public class RediscalaClientDecorator extends DatabaseClientDecorator<RedisCommand> {\n-  public static final RediscalaClientDecorator DECORATE = new RediscalaClientDecorator();\n-\n-  @Override\n-  protected String[] instrumentationNames() {\n-    return new String[] {\"rediscala\", \"redis\"};\n-  }\n-\n-  @Override\n-  protected String service() {\n-    return \"redis\";\n-  }\n-\n-  @Override\n-  protected String component() {\n-    return \"redis-command\";\n-  }\n-\n-  @Override\n-  protected String spanType() {\n-    return DDSpanTypes.REDIS;\n-  }\n-\n-  @Override\n-  protected String dbType() {\n-    return \"redis\";\n-  }\n-\n-  @Override\n-  protected String dbUser(final RedisCommand session) {\n-    return null;\n-  }\n-\n-  @Override\n-  protected String dbInstance(final RedisCommand session) {\n-    return null;\n-  }\n-}\n"}}, {"oid": "41c458ed03607bf9b217abe454e2dc1d5fb4a523", "url": "https://github.com/DataDog/dd-trace-java/commit/41c458ed03607bf9b217abe454e2dc1d5fb4a523", "message": "add version to rediscala instrumentation name, update referenced dd class names, use random port for test", "committedDate": "2020-04-21T06:51:56Z", "type": "forcePushed"}, {"oid": "99408e6ba4eaf9f4aa87bcd5d5bff6b832fe557c", "url": "https://github.com/DataDog/dd-trace-java/commit/99408e6ba4eaf9f4aa87bcd5d5bff6b832fe557c", "message": "Add instrumentation for Rediscala library", "committedDate": "2020-04-21T14:46:28Z", "type": "commit"}, {"oid": "f56abf2f0487189871f171a10bf2cff27bb20ff0", "url": "https://github.com/DataDog/dd-trace-java/commit/f56abf2f0487189871f171a10bf2cff27bb20ff0", "message": "Requires java 8 to run tests", "committedDate": "2020-04-21T14:46:28Z", "type": "commit"}, {"oid": "a969c15040c3c387cc012b715c821e9a272c2638", "url": "https://github.com/DataDog/dd-trace-java/commit/a969c15040c3c387cc012b715c821e9a272c2638", "message": "add version to rediscala instrumentation name, update referenced dd class names, use random port for test", "committedDate": "2020-04-21T14:46:28Z", "type": "commit"}, {"oid": "16b45b6a9301764755daae06a5d0a522a0d0a874", "url": "https://github.com/DataDog/dd-trace-java/commit/16b45b6a9301764755daae06a5d0a522a0d0a874", "message": "use etaty/rediscala", "committedDate": "2020-04-21T14:46:28Z", "type": "commit"}, {"oid": "5bd6500548d4f253c22482e1c135c56d122dd879", "url": "https://github.com/DataDog/dd-trace-java/commit/5bd6500548d4f253c22482e1c135c56d122dd879", "message": "muzzle Ma27 fork of rediscala", "committedDate": "2020-04-21T14:46:28Z", "type": "commit"}, {"oid": "dc84659df0033709642fb3e62f44fdf08fc83abd", "url": "https://github.com/DataDog/dd-trace-java/commit/dc84659df0033709642fb3e62f44fdf08fc83abd", "message": "expand scope of etaty rediscala instrumentation", "committedDate": "2020-04-21T14:54:31Z", "type": "commit"}, {"oid": "dc84659df0033709642fb3e62f44fdf08fc83abd", "url": "https://github.com/DataDog/dd-trace-java/commit/dc84659df0033709642fb3e62f44fdf08fc83abd", "message": "expand scope of etaty rediscala instrumentation", "committedDate": "2020-04-21T14:54:31Z", "type": "forcePushed"}]}