{"pr_number": 1586, "pr_title": "Force cleartext connspec in the ProfilingUploader client", "pr_createdAt": "2020-06-15T09:22:18Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1586", "timeline": [{"oid": "7a6612e25cfd3fc925d8ac833fee29e9af9a372d", "url": "https://github.com/DataDog/dd-trace-java/commit/7a6612e25cfd3fc925d8ac833fee29e9af9a372d", "message": "Force cleartext connspec in the ProfilingUploader client\n\nPlease see #1582 for the equivalent configuration in the trace agent.\n\n> When TLS was not configured in the JVM, the OkHttp client failed to\n> start with java.lang.AssertionError: No System TLS despite the fact\n> that we don't use TLS to communicate with the agent.\n\n> This change fixes that issue by limiting the OkHttp client to http\n> only.", "committedDate": "2020-06-15T09:17:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEwMDI1NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1586#discussion_r440100254", "bodyText": "I'm curious if this can be tested without exposing client...", "author": "mar-kolya", "createdAt": "2020-06-15T11:08:57Z", "path": "dd-java-agent/agent-profiling/profiling-uploader/src/main/java/com/datadog/profiling/uploader/ProfileUploader.java", "diffHunk": "@@ -251,6 +259,11 @@ public void shutdown() {\n     client.connectionPool().evictAll();\n   }\n \n+  @VisibleForTesting\n+  OkHttpClient getClient() {", "originalCommit": "7a6612e25cfd3fc925d8ac833fee29e9af9a372d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}