{"pr_number": 4159, "pr_title": "[Feature][Cache]Add interface, cache coordinator, metric, variable and config for query cache", "pr_createdAt": "2020-07-23T08:10:50Z", "pr_url": "https://github.com/apache/incubator-doris/pull/4159", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMxMTM5Mg==", "url": "https://github.com/apache/incubator-doris/pull/4159#discussion_r459311392", "bodyText": "All query cache config would better start with the same prefix.", "author": "kangkaisen", "createdAt": "2020-07-23T09:04:42Z", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1117,5 +1117,34 @@\n      */\n     @ConfField\n     public static String thrift_server_type = ThriftServer.THREAD_POOL;\n-}\n+    \n+    /**\n+     * If set to true, fe will enable sql result cache\n+     * This option is suitable for offline data update scenarios\n+     *                              case1   case2   case3   case4\n+     * enable_sql_cache             false   true    true    false\n+     * enable_partition_cache       false   false   true    true\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static boolean enable_sql_cache = false;", "originalCommit": "2daebe9f66d1dccd70a86dfa51cc1103520c138f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1c8748e9ee995764ced42be0994ece4f1d202186", "chunk": "diff --git a/fe/fe-core/src/main/java/org/apache/doris/common/Config.java b/fe/fe-core/src/main/java/org/apache/doris/common/Config.java\nindex 2b9408dfe..d2bc48227 100644\n--- a/fe/fe-core/src/main/java/org/apache/doris/common/Config.java\n+++ b/fe/fe-core/src/main/java/org/apache/doris/common/Config.java\n\n@@ -1117,7 +1141,14 @@ public class Config extends ConfigBase {\n      */\n     @ConfField\n     public static String thrift_server_type = ThriftServer.THREAD_POOL;\n-    \n+\n+    /**\n+     * This config will decide whether to resend agent task when create_time for agent_task is set,\n+     * only when current_time - create_time > agent_task_resend_wait_time_ms can ReportHandler do resend agent task\n+     */\n+    @ConfField (mutable = true, masterOnly = true)\n+    public static long agent_task_resend_wait_time_ms = 5000;\n+\n     /**\n      * If set to true, fe will enable sql result cache\n      * This option is suitable for offline data update scenarios\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMxMTY2OQ==", "url": "https://github.com/apache/incubator-doris/pull/4159#discussion_r459311669", "bodyText": "Please add these configs to FE config doc.", "author": "kangkaisen", "createdAt": "2020-07-23T09:05:12Z", "path": "fe/fe-core/src/main/java/org/apache/doris/common/Config.java", "diffHunk": "@@ -1117,5 +1117,34 @@\n      */\n     @ConfField\n     public static String thrift_server_type = ThriftServer.THREAD_POOL;\n-}\n+    \n+    /**\n+     * If set to true, fe will enable sql result cache\n+     * This option is suitable for offline data update scenarios\n+     *                              case1   case2   case3   case4\n+     * enable_sql_cache             false   true    true    false\n+     * enable_partition_cache       false   false   true    true\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static boolean enable_sql_cache = false;\n+\n+    /**\n+     * If set to true, fe will get data from be cache,\n+     * This option is suitable for real-time updating of partial partitions.\n+     */\n+    @ConfField(mutable = true, masterOnly = false)\n+    public static boolean enable_partition_cache = false;", "originalCommit": "2daebe9f66d1dccd70a86dfa51cc1103520c138f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1c8748e9ee995764ced42be0994ece4f1d202186", "chunk": "diff --git a/fe/fe-core/src/main/java/org/apache/doris/common/Config.java b/fe/fe-core/src/main/java/org/apache/doris/common/Config.java\nindex 2b9408dfe..d2bc48227 100644\n--- a/fe/fe-core/src/main/java/org/apache/doris/common/Config.java\n+++ b/fe/fe-core/src/main/java/org/apache/doris/common/Config.java\n\n@@ -1117,7 +1141,14 @@ public class Config extends ConfigBase {\n      */\n     @ConfField\n     public static String thrift_server_type = ThriftServer.THREAD_POOL;\n-    \n+\n+    /**\n+     * This config will decide whether to resend agent task when create_time for agent_task is set,\n+     * only when current_time - create_time > agent_task_resend_wait_time_ms can ReportHandler do resend agent task\n+     */\n+    @ConfField (mutable = true, masterOnly = true)\n+    public static long agent_task_resend_wait_time_ms = 5000;\n+\n     /**\n      * If set to true, fe will enable sql result cache\n      * This option is suitable for offline data update scenarios\n"}}, {"oid": "1c8748e9ee995764ced42be0994ece4f1d202186", "url": "https://github.com/apache/incubator-doris/commit/1c8748e9ee995764ced42be0994ece4f1d202186", "message": "[Feature][Cache]Add interface, metric, variable and config for query cache", "committedDate": "2020-07-29T03:27:01Z", "type": "forcePushed"}, {"oid": "fabbede5c89b1661b43b72802cc2de9779776313", "url": "https://github.com/apache/incubator-doris/commit/fabbede5c89b1661b43b72802cc2de9779776313", "message": "[Feature][Cache]Add interface, metric, variable and config for query cache", "committedDate": "2020-07-30T03:09:55Z", "type": "commit"}, {"oid": "fabbede5c89b1661b43b72802cc2de9779776313", "url": "https://github.com/apache/incubator-doris/commit/fabbede5c89b1661b43b72802cc2de9779776313", "message": "[Feature][Cache]Add interface, metric, variable and config for query cache", "committedDate": "2020-07-30T03:09:55Z", "type": "forcePushed"}]}