{"pr_number": 3137, "pr_title": "fix a daily test fail", "pr_createdAt": "2020-03-18T10:15:59Z", "pr_url": "https://github.com/apache/incubator-doris/pull/3137", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMwNzI0MA==", "url": "https://github.com/apache/incubator-doris/pull/3137#discussion_r394307240", "bodyText": "Change the comment", "author": "morningman", "createdAt": "2020-03-18T12:25:09Z", "path": "fe/src/main/java/org/apache/doris/analysis/CastExpr.java", "diffHunk": "@@ -105,10 +105,10 @@ public static void initBuiltins(FunctionSet functionSet) {\n                 }\n                 // Disable casting from boolean to decimal", "originalCommit": "af68b7b90270149aa3a8d9d53de636c7bb436fd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3a5c7b1d49687f582192bc1b3915b0cec19594f9", "chunk": "diff --git a/fe/src/main/java/org/apache/doris/analysis/CastExpr.java b/fe/src/main/java/org/apache/doris/analysis/CastExpr.java\nindex fe77793a2..2dafc9fc6 100644\n--- a/fe/src/main/java/org/apache/doris/analysis/CastExpr.java\n+++ b/fe/src/main/java/org/apache/doris/analysis/CastExpr.java\n\n@@ -103,7 +103,7 @@ public class CastExpr extends Expr {\n                 if (fromType.isStringType() && toType.isBoolean()) {\n                     continue;\n                 }\n-                // Disable casting from boolean to decimal\n+                // Disable casting from boolean to decimal or datetime or date\n                 if (fromType.isBoolean() &&\n                         (toType == Type.DECIMAL || toType == Type.DECIMALV2 ||\n                                 toType == Type.DATETIME || toType == Type.DATE)) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMwNzg5NQ==", "url": "https://github.com/apache/incubator-doris/pull/3137#discussion_r394307895", "bodyText": "Could you add comment to explain why you change here?", "author": "morningman", "createdAt": "2020-03-18T12:26:20Z", "path": "fe/src/main/java/org/apache/doris/analysis/SetOperationStmt.java", "diffHunk": "@@ -649,7 +649,8 @@ public void analyze(Analyzer parent) throws AnalysisException, UserException {\n             if (isAnalyzed()) {\n                 return;\n             }\n-            if (queryStmt instanceof SelectStmt && ((SelectStmt) queryStmt).fromClause_.isEmpty()) {\n+            if (operation != Operation.UNION && queryStmt instanceof SelectStmt", "originalCommit": "af68b7b90270149aa3a8d9d53de636c7bb436fd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3a5c7b1d49687f582192bc1b3915b0cec19594f9", "chunk": "diff --git a/fe/src/main/java/org/apache/doris/analysis/SetOperationStmt.java b/fe/src/main/java/org/apache/doris/analysis/SetOperationStmt.java\nindex 1d05b126c..58b617884 100644\n--- a/fe/src/main/java/org/apache/doris/analysis/SetOperationStmt.java\n+++ b/fe/src/main/java/org/apache/doris/analysis/SetOperationStmt.java\n\n@@ -649,6 +654,7 @@ public class SetOperationStmt extends QueryStmt {\n             if (isAnalyzed()) {\n                 return;\n             }\n+            // union statement support const expr, so not need to rewrite\n             if (operation != Operation.UNION && queryStmt instanceof SelectStmt\n                     && ((SelectStmt) queryStmt).fromClause_.isEmpty()) {\n                 // rewrite select 1 to select * from (select 1) __DORIS_DUAL__ , because when using select 1 it will be\n"}}, {"oid": "3a445128df8052ebd2ef3315fa189fa49d89bb88", "url": "https://github.com/apache/incubator-doris/commit/3a445128df8052ebd2ef3315fa189fa49d89bb88", "message": "fix a daily test fail", "committedDate": "2020-03-19T02:22:27Z", "type": "forcePushed"}, {"oid": "3a5c7b1d49687f582192bc1b3915b0cec19594f9", "url": "https://github.com/apache/incubator-doris/commit/3a5c7b1d49687f582192bc1b3915b0cec19594f9", "message": "fix a daily test fail", "committedDate": "2020-03-19T02:43:15Z", "type": "commit"}, {"oid": "3a5c7b1d49687f582192bc1b3915b0cec19594f9", "url": "https://github.com/apache/incubator-doris/commit/3a5c7b1d49687f582192bc1b3915b0cec19594f9", "message": "fix a daily test fail", "committedDate": "2020-03-19T02:43:15Z", "type": "forcePushed"}]}