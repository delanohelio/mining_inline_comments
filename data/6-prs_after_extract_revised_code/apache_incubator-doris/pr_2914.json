{"pr_number": 2914, "pr_title": "[UDF] Fix bug that UDF can't handle constant null value", "pr_createdAt": "2020-02-16T09:59:15Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2914", "timeline": [{"oid": "577501df9aa9021b8996e3131e3589ba77351536", "url": "https://github.com/apache/incubator-doris/commit/577501df9aa9021b8996e3131e3589ba77351536", "message": "first", "committedDate": "2020-02-16T09:54:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5ODIzNQ==", "url": "https://github.com/apache/incubator-doris/pull/2914#discussion_r379898235", "bodyText": "Why move this to gensrc/script/doris_builtins_functions.py?  what's the advantage?", "author": "kangkaisen", "createdAt": "2020-02-16T12:08:21Z", "path": "fe/src/main/java/org/apache/doris/analysis/ExpressionFunctions.java", "diffHunk": "@@ -144,15 +145,6 @@ private synchronized void registerFunctions() {\n             }\n         }\n         this.functions = mapBuilder.build();\n-\n-        // Functions that need to handle null.\n-        ImmutableSet.Builder<String> setBuilder =\n-                new ImmutableSet.Builder<String>();\n-        setBuilder.add(\"if\");\n-        setBuilder.add(\"hll_hash\");\n-        setBuilder.add(\"concat_ws\");\n-        setBuilder.add(\"ifnull\");\n-        this.nonNullResultWithNullParamFunctions = setBuilder.build();", "originalCommit": "577501df9aa9021b8996e3131e3589ba77351536", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMDM3Ng==", "url": "https://github.com/apache/incubator-doris/pull/2914#discussion_r379900376", "bodyText": "The previous definition was hidden in ExpressionFunctions. If it weren't for this bug, I wouldn't even know that there is such a definition. So I decided to put this definition in doris_builtins_functions.py, so that if there are new builtin functions added later, they can be unified in doris_builtins_functions.py to define its behavior.", "author": "morningman", "createdAt": "2020-02-16T12:41:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5ODIzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk3ODU0OQ==", "url": "https://github.com/apache/incubator-doris/pull/2914#discussion_r379978549", "bodyText": "I See.\nBut if this change is only to make the nonNullResultWithNullParamFunctions definition Obviously. I think normal java class is better than python script, because current IDE is very powerful, we could very easily find the definition.\nBesides\uff0cI think if not performance reason, we shouldn't  use code gen.", "author": "kangkaisen", "createdAt": "2020-02-17T04:10:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5ODIzNQ=="}], "type": "inlineReview", "revised_code": null}]}