{"pr_number": 3539, "pr_title": "Throw DdlException when use admin set frontend config", "pr_createdAt": "2020-05-09T08:35:23Z", "pr_url": "https://github.com/apache/incubator-doris/pull/3539", "timeline": [{"oid": "d6b7b91ea171097ee29568621d98ffd7d1da7ab6", "url": "https://github.com/apache/incubator-doris/commit/d6b7b91ea171097ee29568621d98ffd7d1da7ab6", "message": "Add tip info when use admin set frontend config\n\nWhen execute Ddl `admin set frontend config`. User will get msg `ERROR\n1064 (HY000): Unexpected exception: null`, it is confusing, we should\ngive user a more friendly tip info.", "committedDate": "2020-05-09T08:23:55Z", "type": "commit"}, {"oid": "8eaa0c197054cb04043b835ace641779b04a2e47", "url": "https://github.com/apache/incubator-doris/commit/8eaa0c197054cb04043b835ace641779b04a2e47", "message": "fixg", "committedDate": "2020-05-09T08:30:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjE5Nw==", "url": "https://github.com/apache/incubator-doris/pull/3539#discussion_r422486197", "bodyText": "This should be done in AdminSetConfigStmt's analyze method.", "author": "morningman", "createdAt": "2020-05-09T11:42:51Z", "path": "fe/src/main/java/org/apache/doris/catalog/Catalog.java", "diffHunk": "@@ -6385,7 +6385,10 @@ public void replayDropFunction(FunctionSearchDesc functionSearchDesc) {\n \n     public void setConfig(AdminSetConfigStmt stmt) throws DdlException {\n         Map<String, String> configs = stmt.getConfigs();\n-        Preconditions.checkState(configs.size() == 1);\n+        // configs can not be null\n+        if (configs.size() != 1) {", "originalCommit": "8eaa0c197054cb04043b835ace641779b04a2e47", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU3MzYyMg==", "url": "https://github.com/apache/incubator-doris/pull/3539#discussion_r422573622", "bodyText": "done", "author": "WingsGo", "createdAt": "2020-05-10T02:27:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NjE5Nw=="}], "type": "inlineReview", "revised_code": {"commit": "53b39ceca64d78ad63463db3325ca5e7f3988236", "chunk": "diff --git a/fe/src/main/java/org/apache/doris/catalog/Catalog.java b/fe/src/main/java/org/apache/doris/catalog/Catalog.java\nindex 75b32b869..5fa8c1695 100644\n--- a/fe/src/main/java/org/apache/doris/catalog/Catalog.java\n+++ b/fe/src/main/java/org/apache/doris/catalog/Catalog.java\n\n@@ -6385,10 +6385,7 @@ public class Catalog {\n \n     public void setConfig(AdminSetConfigStmt stmt) throws DdlException {\n         Map<String, String> configs = stmt.getConfigs();\n-        // configs can not be null\n-        if (configs.size() != 1) {\n-            throw new DdlException(\"config parameter size is not equal to 1\");\n-        }\n+        Preconditions.checkState(configs.size() == 1);\n \n         for (Map.Entry<String, String> entry : configs.entrySet()) {\n             ConfigBase.setMutableConfig(entry.getKey(), entry.getValue());\n"}}, {"oid": "53b39ceca64d78ad63463db3325ca5e7f3988236", "url": "https://github.com/apache/incubator-doris/commit/53b39ceca64d78ad63463db3325ca5e7f3988236", "message": "fix", "committedDate": "2020-05-10T02:21:09Z", "type": "commit"}, {"oid": "f9541068b126af65ce8e0b8ec2cc3fc1b70fb612", "url": "https://github.com/apache/incubator-doris/commit/f9541068b126af65ce8e0b8ec2cc3fc1b70fb612", "message": "fix", "committedDate": "2020-05-11T05:54:54Z", "type": "commit"}]}