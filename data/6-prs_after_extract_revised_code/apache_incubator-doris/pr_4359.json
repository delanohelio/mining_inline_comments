{"pr_number": 4359, "pr_title": "[MySQL Compatibility 1/4][Bug] Fix bug that set sql_mode with concat() function failed", "pr_createdAt": "2020-08-16T10:56:07Z", "pr_url": "https://github.com/apache/incubator-doris/pull/4359", "timeline": [{"oid": "8dc7cc42d0cfd47c10b2f1a406911b468608c699", "url": "https://github.com/apache/incubator-doris/commit/8dc7cc42d0cfd47c10b2f1a406911b468608c699", "message": "first", "committedDate": "2020-08-13T02:45:39Z", "type": "commit"}, {"oid": "a7c23245521d383854e50dbc3e66a7b780300d27", "url": "https://github.com/apache/incubator-doris/commit/a7c23245521d383854e50dbc3e66a7b780300d27", "message": "rewrite", "committedDate": "2020-08-13T09:44:53Z", "type": "commit"}, {"oid": "376488163a226de682431711e9879f5937af6ad0", "url": "https://github.com/apache/incubator-doris/commit/376488163a226de682431711e9879f5937af6ad0", "message": "rewrite 2", "committedDate": "2020-08-13T11:00:03Z", "type": "commit"}, {"oid": "bbaab0d88c66cc891840522aa4a2af080beaa4a4", "url": "https://github.com/apache/incubator-doris/commit/bbaab0d88c66cc891840522aa4a2af080beaa4a4", "message": "add comment", "committedDate": "2020-08-16T09:48:22Z", "type": "commit"}, {"oid": "413ff10214b968f9bb9c945f41089090ad84da03", "url": "https://github.com/apache/incubator-doris/commit/413ff10214b968f9bb9c945f41089090ad84da03", "message": "add ut", "committedDate": "2020-08-16T09:57:09Z", "type": "commit"}, {"oid": "0c2350f15b0dd5abcfecabff10a3c9e7db5cf587", "url": "https://github.com/apache/incubator-doris/commit/0c2350f15b0dd5abcfecabff10a3c9e7db5cf587", "message": "fix bug", "committedDate": "2020-08-16T10:26:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY5MDg4NA==", "url": "https://github.com/apache/incubator-doris/pull/4359#discussion_r473690884", "bodyText": "Why not just throw the exception to the user?", "author": "EmmyMiao87", "createdAt": "2020-08-20T07:26:08Z", "path": "fe/fe-core/src/main/java/org/apache/doris/analysis/ExpressionFunctions.java", "diffHunk": "@@ -96,6 +98,14 @@ public Expr evalExpr(Expr constExpr) {\n                     return constExpr;\n                 }\n             }\n+        } else if (constExpr instanceof SysVariableDesc) {\n+            try {\n+                VariableMgr.fillValue(ConnectContext.get().getSessionVariable(), (SysVariableDesc) constExpr);\n+                return ((SysVariableDesc) constExpr).getLiteralExpr();\n+            } catch (AnalysisException e) {", "originalCommit": "0c2350f15b0dd5abcfecabff10a3c9e7db5cf587", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzc0Mzk1Mg==", "url": "https://github.com/apache/incubator-doris/pull/4359#discussion_r473743952", "bodyText": "This method is used for constant folding rules. If it fails, it will directly return to the original expression, and other processes will handle this error.", "author": "morningman", "createdAt": "2020-08-20T08:11:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY5MDg4NA=="}], "type": "inlineReview", "revised_code": null}]}