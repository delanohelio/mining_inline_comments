{"pr_number": 2667, "pr_title": "java.lang.ClassCastException", "pr_createdAt": "2020-01-06T08:41:10Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2667", "timeline": [{"oid": "7ef60c36f08ec68f788e99582f04670e52284bc5", "url": "https://github.com/apache/incubator-doris/commit/7ef60c36f08ec68f788e99582f04670e52284bc5", "message": "java.lang.ClassCastException", "committedDate": "2020-01-06T08:39:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzIwMTI3Nw==", "url": "https://github.com/apache/incubator-doris/pull/2667#discussion_r363201277", "bodyText": "should be true when creating index", "author": "imay", "createdAt": "2020-01-06T08:43:35Z", "path": "fe/src/main/java/org/apache/doris/analysis/CreateIndexClause.java", "diffHunk": "@@ -39,6 +39,7 @@ public CreateIndexClause(TableName tableName, IndexDef indexDef, boolean alter)\n         this.tableName = tableName;\n         this.indexDef = indexDef;\n         this.alter = alter;\n+        this.needTableStable = false;", "originalCommit": "7ef60c36f08ec68f788e99582f04670e52284bc5", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "26738564cc2f07288b0d2c72c3864cb28cf3f467", "chunk": "diff --git a/fe/src/main/java/org/apache/doris/analysis/CreateIndexClause.java b/fe/src/main/java/org/apache/doris/analysis/CreateIndexClause.java\nindex b1b9b81e5..97187f4c7 100644\n--- a/fe/src/main/java/org/apache/doris/analysis/CreateIndexClause.java\n+++ b/fe/src/main/java/org/apache/doris/analysis/CreateIndexClause.java\n\n@@ -39,7 +39,7 @@ public class CreateIndexClause extends AlterTableClause {\n         this.tableName = tableName;\n         this.indexDef = indexDef;\n         this.alter = alter;\n-        this.needTableStable = false;\n+        this.needTableStable = true;\n     }\n \n     @Override\n"}}, {"oid": "26738564cc2f07288b0d2c72c3864cb28cf3f467", "url": "https://github.com/apache/incubator-doris/commit/26738564cc2f07288b0d2c72c3864cb28cf3f467", "message": "when CreateIndexClause set needTableStable to true", "committedDate": "2020-01-06T08:51:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzIwNDU0Nw==", "url": "https://github.com/apache/incubator-doris/pull/2667#discussion_r363204547", "bodyText": "Can you fix DropIndexCluase together?", "author": "imay", "createdAt": "2020-01-06T08:55:02Z", "path": "fe/src/main/java/org/apache/doris/analysis/CreateIndexClause.java", "diffHunk": "@@ -24,7 +24,7 @@\n \n import java.util.Map;\n \n-public class CreateIndexClause extends AlterClause {\n+public class CreateIndexClause extends AlterTableClause {", "originalCommit": "26738564cc2f07288b0d2c72c3864cb28cf3f467", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "3ddd85bc38c60b7b9c64b64b2f8f6167e8c6e44c", "url": "https://github.com/apache/incubator-doris/commit/3ddd85bc38c60b7b9c64b64b2f8f6167e8c6e44c", "message": "fix DropIndexClause cannot be cast to AlterTableClause", "committedDate": "2020-01-06T08:57:34Z", "type": "commit"}]}