{"pr_number": 3422, "pr_title": "[Bug] Fix bug that load data to wrong temp partitions", "pr_createdAt": "2020-04-29T04:12:31Z", "pr_url": "https://github.com/apache/incubator-doris/pull/3422", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQyMTY5NA==", "url": "https://github.com/apache/incubator-doris/pull/3422#discussion_r417421694", "bodyText": "Add a comment to explain why we return all partitions.", "author": "kangkaisen", "createdAt": "2020-04-29T15:49:22Z", "path": "fe/src/main/java/org/apache/doris/planner/StreamLoadPlanner.java", "diffHunk": "@@ -185,6 +185,10 @@ public TExecPlanFragmentParams plan(TUniqueId loadId) throws UserException {\n                 }\n                 partitionIds.add(part.getId());\n             }\n+        } else {\n+            for (Partition partition : destTable.getPartitions()) {", "originalCommit": "0752d0ff60d689754f20281c1b98a6ff6a8b8905", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc4OTA1Mw==", "url": "https://github.com/apache/incubator-doris/pull/3422#discussion_r417789053", "bodyText": "OK", "author": "morningman", "createdAt": "2020-04-30T06:45:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQyMTY5NA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "45521bf78f36d91c971a51127284853df61adbc9", "url": "https://github.com/apache/incubator-doris/commit/45521bf78f36d91c971a51127284853df61adbc9", "message": "fix bug", "committedDate": "2020-04-30T06:42:34Z", "type": "commit"}, {"oid": "6d16e02f8d800b335d270cf3b1ce87291429aae7", "url": "https://github.com/apache/incubator-doris/commit/6d16e02f8d800b335d270cf3b1ce87291429aae7", "message": "fix ut", "committedDate": "2020-04-30T06:42:34Z", "type": "commit"}, {"oid": "b9bb4fd3faa3604ac03363b86155a7dfb2f07564", "url": "https://github.com/apache/incubator-doris/commit/b9bb4fd3faa3604ac03363b86155a7dfb2f07564", "message": "fix by review", "committedDate": "2020-04-30T06:45:28Z", "type": "commit"}, {"oid": "b9bb4fd3faa3604ac03363b86155a7dfb2f07564", "url": "https://github.com/apache/incubator-doris/commit/b9bb4fd3faa3604ac03363b86155a7dfb2f07564", "message": "fix by review", "committedDate": "2020-04-30T06:45:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc5MjU2Mw==", "url": "https://github.com/apache/incubator-doris/pull/3422#discussion_r417792563", "bodyText": "add all partition's id except temp partition", "author": "EmmyMiao87", "createdAt": "2020-04-30T06:53:37Z", "path": "fe/src/main/java/org/apache/doris/analysis/InsertStmt.java", "diffHunk": "@@ -88,7 +88,8 @@\n \n     private final TableName tblName;\n     private final PartitionNames targetPartitionNames;\n-    // parsed from targetPartitionNames. empty means no partition specified\n+    // parsed from targetPartitionNames.\n+    // if targetPartitionNames is not set, add all partitions' id of the table into it", "originalCommit": "b9bb4fd3faa3604ac03363b86155a7dfb2f07564", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f7546e0ce2fb9f58bd5ecec15664e0605f8bbfaa", "chunk": "diff --git a/fe/src/main/java/org/apache/doris/analysis/InsertStmt.java b/fe/src/main/java/org/apache/doris/analysis/InsertStmt.java\nindex 2c8f9fe21..fcc94a913 100644\n--- a/fe/src/main/java/org/apache/doris/analysis/InsertStmt.java\n+++ b/fe/src/main/java/org/apache/doris/analysis/InsertStmt.java\n\n@@ -89,7 +89,7 @@ public class InsertStmt extends DdlStmt {\n     private final TableName tblName;\n     private final PartitionNames targetPartitionNames;\n     // parsed from targetPartitionNames.\n-    // if targetPartitionNames is not set, add all partitions' id of the table into it\n+    // if targetPartitionNames is not set, add all formal partitions' id of the table into it\n     private List<Long> targetPartitionIds = Lists.newArrayList();\n     private final List<String> targetColumnNames;\n     private QueryStmt queryStmt;\n"}}, {"oid": "f7546e0ce2fb9f58bd5ecec15664e0605f8bbfaa", "url": "https://github.com/apache/incubator-doris/commit/f7546e0ce2fb9f58bd5ecec15664e0605f8bbfaa", "message": "fix by review", "committedDate": "2020-04-30T07:00:15Z", "type": "commit"}]}