{"pr_number": 2952, "pr_title": "Fix some function DATE type priority", "pr_createdAt": "2020-02-20T07:37:24Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2952", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgyODQzMQ==", "url": "https://github.com/apache/incubator-doris/pull/2952#discussion_r381828431", "bodyText": "license header", "author": "imay", "createdAt": "2020-02-20T07:43:23Z", "path": "fe/src/test/java/org/apache/doris/utframe/ConstantExpressTest.java", "diffHunk": "@@ -0,0 +1,130 @@\n+package org.apache.doris.utframe;", "originalCommit": "62208e7ceb989bbf5c569131caf2f9ba7ca4b096", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0aee849c7c71af68a0bd644088e0b375e36e4373", "chunk": "diff --git a/fe/src/test/java/org/apache/doris/utframe/ConstantExpressTest.java b/fe/src/test/java/org/apache/doris/utframe/ConstantExpressTest.java\nindex 29d17c1d9..f3ff51da9 100644\n--- a/fe/src/test/java/org/apache/doris/utframe/ConstantExpressTest.java\n+++ b/fe/src/test/java/org/apache/doris/utframe/ConstantExpressTest.java\n\n@@ -1,3 +1,20 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n package org.apache.doris.utframe;\n \n import org.apache.doris.qe.ConnectContext;\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMDE3Mg==", "url": "https://github.com/apache/incubator-doris/pull/2952#discussion_r381830172", "bodyText": "Is it OK when executing insert into statement?\nI remember it seems to be introduced here in support of insert into values(). You can try if this patch works properly.", "author": "imay", "createdAt": "2020-02-20T07:48:05Z", "path": "fe/src/main/java/org/apache/doris/planner/SingleNodePlanner.java", "diffHunk": "@@ -802,7 +802,6 @@ private PlanNode createConstantSelectPlan(SelectStmt selectStmt, Analyzer analyz\n         for (int i = 0; i < resultExprs.size(); ++i) {\n             SlotRef slotRef = new SlotRef(tupleDesc.getSlots().get(i));\n             resultExprs.set(i, slotRef);\n-            selectStmt.getBaseTblResultExprs().set(i, slotRef);", "originalCommit": "62208e7ceb989bbf5c569131caf2f9ba7ca4b096", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk1MzI3Mw==", "url": "https://github.com/apache/incubator-doris/pull/2952#discussion_r381953273", "bodyText": "Has reverted this change.", "author": "kangkaisen", "createdAt": "2020-02-20T11:54:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzMDE3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "0aee849c7c71af68a0bd644088e0b375e36e4373", "chunk": "diff --git a/fe/src/main/java/org/apache/doris/planner/SingleNodePlanner.java b/fe/src/main/java/org/apache/doris/planner/SingleNodePlanner.java\nindex 38f82e0dc..e90028c6c 100644\n--- a/fe/src/main/java/org/apache/doris/planner/SingleNodePlanner.java\n+++ b/fe/src/main/java/org/apache/doris/planner/SingleNodePlanner.java\n\n@@ -802,6 +802,7 @@ public class SingleNodePlanner {\n         for (int i = 0; i < resultExprs.size(); ++i) {\n             SlotRef slotRef = new SlotRef(tupleDesc.getSlots().get(i));\n             resultExprs.set(i, slotRef);\n+            selectStmt.getBaseTblResultExprs().set(i, slotRef);\n         }\n \n         // UnionNode.init() needs tupleDesc to have been initialized\n"}}, {"oid": "0aee849c7c71af68a0bd644088e0b375e36e4373", "url": "https://github.com/apache/incubator-doris/commit/0aee849c7c71af68a0bd644088e0b375e36e4373", "message": "Fix some function DATE type priority", "committedDate": "2020-02-20T11:48:31Z", "type": "commit"}, {"oid": "0aee849c7c71af68a0bd644088e0b375e36e4373", "url": "https://github.com/apache/incubator-doris/commit/0aee849c7c71af68a0bd644088e0b375e36e4373", "message": "Fix some function DATE type priority", "committedDate": "2020-02-20T11:48:31Z", "type": "forcePushed"}]}