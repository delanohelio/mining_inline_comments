{"pr_number": 2195, "pr_title": "Always apply vs filters correctly", "pr_createdAt": "2020-11-24T19:33:49Z", "pr_url": "https://github.com/hapifhir/hapi-fhir/pull/2195", "timeline": [{"oid": "3c38f8538d5273c99282eb43229538898861caef", "url": "https://github.com/hapifhir/hapi-fhir/commit/3c38f8538d5273c99282eb43229538898861caef", "message": "Always apply valueset filters correctly", "committedDate": "2020-11-24T15:44:38Z", "type": "commit"}, {"oid": "8cef42e4775e1a86b6db0e1df6b419fcd9f79173", "url": "https://github.com/hapifhir/hapi-fhir/commit/8cef42e4775e1a86b6db0e1df6b419fcd9f79173", "message": "Test fix", "committedDate": "2020-11-24T17:55:52Z", "type": "commit"}, {"oid": "06e0132f389915ddbe91437ab753d2e8ccd4cec1", "url": "https://github.com/hapifhir/hapi-fhir/commit/06e0132f389915ddbe91437ab753d2e8ccd4cec1", "message": "Testfix", "committedDate": "2020-11-24T18:16:09Z", "type": "commit"}, {"oid": "dd329a8bdd7ab187a68f64893b4b6de9d94deba5", "url": "https://github.com/hapifhir/hapi-fhir/commit/dd329a8bdd7ab187a68f64893b4b6de9d94deba5", "message": "Test fix", "committedDate": "2020-11-24T19:33:18Z", "type": "commit"}, {"oid": "96397836bc01360591fd2c347901350b22bab967", "url": "https://github.com/hapifhir/hapi-fhir/commit/96397836bc01360591fd2c347901350b22bab967", "message": "Add changelog", "committedDate": "2020-11-24T19:36:30Z", "type": "commit"}, {"oid": "3b12f4fa906826db31a0121bdf9dd0008f62c07e", "url": "https://github.com/hapifhir/hapi-fhir/commit/3b12f4fa906826db31a0121bdf9dd0008f62c07e", "message": "Test fix", "committedDate": "2020-11-24T21:29:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4NzQ3OQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2195#discussion_r529887479", "bodyText": "This is going to be going away in HS6 far as I'm aware. I'm pretty sure this setting is controlled on the implementing backends now. e.g. lucene has a max clause count, and ES can set a maximum bucket count. Will need to look into this", "author": "tadgh", "createdAt": "2020-11-24T21:24:47Z", "path": "hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/term/BaseTermReadSvcImpl.java", "diffHunk": "@@ -938,12 +946,12 @@ private Boolean expandValueSetHandleIncludeOrExcludeUsingDatabase(IValueSetConce\n \t\t * DM 2019-08-21 - Processing slows after any ValueSets with many codes explicitly identified. This might\n \t\t * be due to the dark arts that is memory management. Will monitor but not do anything about this right now.\n \t\t */\n-\t\tBooleanQuery.setMaxClauseCount(10000);\n+\t\tBooleanQuery.setMaxClauseCount(SearchBuilder.getMaximumPageSize());", "originalCommit": "96397836bc01360591fd2c347901350b22bab967", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg5OTY4Nw==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2195#discussion_r529899687", "bodyText": "FWIW I don't think that's a huge deal... Affects the speed of valueset pre-expansion for loading loinc, but that is a long process no matter what you do", "author": "jamesagnew", "createdAt": "2020-11-24T21:48:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg4NzQ3OQ=="}], "type": "inlineReview", "revised_code": null}]}