{"pr_number": 1936, "pr_title": "Empi 69 and candidates", "pr_createdAt": "2020-06-23T14:50:55Z", "pr_url": "https://github.com/hapifhir/hapi-fhir/pull/1936", "timeline": [{"oid": "81f5395a33952c391a3df438b590fec929a158a8", "url": "https://github.com/hapifhir/hapi-fhir/commit/81f5395a33952c391a3df438b590fec929a158a8", "message": "initial refactor", "committedDate": "2020-06-23T13:58:22Z", "type": "commit"}, {"oid": "736fb1e1c49e01a9e67999771e73e074538f4a14", "url": "https://github.com/hapifhir/hapi-fhir/commit/736fb1e1c49e01a9e67999771e73e074538f4a14", "message": "first test", "committedDate": "2020-06-23T14:11:45Z", "type": "commit"}, {"oid": "2d6bd21f9a3a56e32343085b6a8a4bfb71214123", "url": "https://github.com/hapifhir/hapi-fhir/commit/2d6bd21f9a3a56e32343085b6a8a4bfb71214123", "message": "done", "committedDate": "2020-06-23T14:50:11Z", "type": "commit"}, {"oid": "d07c186df1459010836bb1d9d0a3c76e935d94cb", "url": "https://github.com/hapifhir/hapi-fhir/commit/d07c186df1459010836bb1d9d0a3c76e935d94cb", "message": "documentation", "committedDate": "2020-06-23T15:14:04Z", "type": "commit"}, {"oid": "d9f7abeec54532c39226befed04e6bbcb2c67810", "url": "https://github.com/hapifhir/hapi-fhir/commit/d9f7abeec54532c39226befed04e6bbcb2c67810", "message": "pre-review cleanup", "committedDate": "2020-06-23T15:16:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM0MTUyNg==", "url": "https://github.com/hapifhir/hapi-fhir/pull/1936#discussion_r444341526", "bodyText": "lol", "author": "tadgh", "createdAt": "2020-06-23T16:09:16Z", "path": "hapi-fhir-jpaserver-empi/src/main/java/ca/uhn/fhir/jpa/empi/svc/EmpiCandidateSearchCriteriaBuilderSvc.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package ca.uhn.fhir.jpa.empi.svc;\n+\n+import ca.uhn.fhir.empi.rules.json.EmpiResourceSearchParamJson;\n+import org.hl7.fhir.instance.model.api.IAnyResource;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+\n+import javax.annotation.Nonnull;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+\n+@Service\n+public class EmpiCandidateSearchCriteriaBuilderSvc {\n+\t@Autowired\n+\tprivate EmpiSearchParamSvc myEmpiSearchParamSvc;\n+\n+\t/*\n+\t * Given a list of criteria upon which to block, a resource search parameter, and a list of values for that given search parameter,\n+\t * build a query url. e.g.\n+\t *\n+\t * Patient?active=true&name.given=Gary,Grant", "originalCommit": "d9f7abeec54532c39226befed04e6bbcb2c67810", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQwNDQwMg==", "url": "https://github.com/hapifhir/hapi-fhir/pull/1936#discussion_r444404402", "bodyText": "you do realize you wrote this comment...  (I just extracted the method to a new class)", "author": "fil512", "createdAt": "2020-06-23T17:53:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM0MTUyNg=="}], "type": "inlineReview", "revised_code": {"commit": "8022f9e736c3488f4b02a94445d54708bb22d554", "chunk": "diff --git a/hapi-fhir-jpaserver-empi/src/main/java/ca/uhn/fhir/jpa/empi/svc/EmpiCandidateSearchCriteriaBuilderSvc.java b/hapi-fhir-jpaserver-empi/src/main/java/ca/uhn/fhir/jpa/empi/svc/EmpiCandidateSearchCriteriaBuilderSvc.java\nindex 3455b74959..09eb57e435 100644\n--- a/hapi-fhir-jpaserver-empi/src/main/java/ca/uhn/fhir/jpa/empi/svc/EmpiCandidateSearchCriteriaBuilderSvc.java\n+++ b/hapi-fhir-jpaserver-empi/src/main/java/ca/uhn/fhir/jpa/empi/svc/EmpiCandidateSearchCriteriaBuilderSvc.java\n\n@@ -19,7 +19,7 @@ public class EmpiCandidateSearchCriteriaBuilderSvc {\n \t * Given a list of criteria upon which to block, a resource search parameter, and a list of values for that given search parameter,\n \t * build a query url. e.g.\n \t *\n-\t * Patient?active=true&name.given=Gary,Grant\n+\t * Patient?active=true&name.given=Gary,Grant&name.last=Graham\n \t */\n \t@Nonnull\n \tpublic Optional<String> buildResourceQueryString(String theResourceType, IAnyResource theResource, List<String> theFilterCriteria, EmpiResourceSearchParamJson resourceSearchParam) {\n"}}, {"oid": "8022f9e736c3488f4b02a94445d54708bb22d554", "url": "https://github.com/hapifhir/hapi-fhir/commit/8022f9e736c3488f4b02a94445d54708bb22d554", "message": "review feedback", "committedDate": "2020-06-23T17:52:29Z", "type": "commit"}, {"oid": "c47507bd35453038f10d3bd79f9ff2295aa0563b", "url": "https://github.com/hapifhir/hapi-fhir/commit/c47507bd35453038f10d3bd79f9ff2295aa0563b", "message": "review feedback", "committedDate": "2020-06-23T17:52:41Z", "type": "commit"}, {"oid": "88d9ec719abf73a2c9fe2aeff3f41b4b4745d8f9", "url": "https://github.com/hapifhir/hapi-fhir/commit/88d9ec719abf73a2c9fe2aeff3f41b4b4745d8f9", "message": "fix test", "committedDate": "2020-06-23T17:56:41Z", "type": "commit"}, {"oid": "9732f4a71eed81ccedba2828bcf0625223ca520f", "url": "https://github.com/hapifhir/hapi-fhir/commit/9732f4a71eed81ccedba2828bcf0625223ca520f", "message": "Merge remote-tracking branch 'remotes/origin/master' into empi-69-and-candidates", "committedDate": "2020-06-23T20:12:02Z", "type": "commit"}, {"oid": "e9303aabea39389032680c7fc6d9d8a029bcaae0", "url": "https://github.com/hapifhir/hapi-fhir/commit/e9303aabea39389032680c7fc6d9d8a029bcaae0", "message": "fix test", "committedDate": "2020-06-23T20:40:41Z", "type": "commit"}, {"oid": "13952cc55b3ac41c20c15fbbcf07ea735ce0cae2", "url": "https://github.com/hapifhir/hapi-fhir/commit/13952cc55b3ac41c20c15fbbcf07ea735ce0cae2", "message": "Merge remote-tracking branch 'remotes/origin/master' into empi-69-and-candidates", "committedDate": "2020-06-23T21:40:43Z", "type": "commit"}, {"oid": "b73c30105a18fa6cc82e4fa45b4e4e90f058125f", "url": "https://github.com/hapifhir/hapi-fhir/commit/b73c30105a18fa6cc82e4fa45b4e4e90f058125f", "message": "Merge remote-tracking branch 'remotes/origin/master' into empi-69-and-candidates", "committedDate": "2020-06-24T00:41:01Z", "type": "commit"}]}