{"pr_number": 2977, "pr_title": "fix: talent solution v4 samples tests", "pr_createdAt": "2020-05-27T03:56:35Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977", "timeline": [{"oid": "339de174e64a72a8904156fde35c470110396438", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/339de174e64a72a8904156fde35c470110396438", "message": "fix: talent solution v4 samples tests", "committedDate": "2020-05-27T03:51:33Z", "type": "commit"}, {"oid": "3ba44a869c906bb67c9f24b738d47d6e7bb8d972", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/3ba44a869c906bb67c9f24b738d47d6e7bb8d972", "message": "deleted unnecessary text file", "committedDate": "2020-05-27T03:57:57Z", "type": "commit"}, {"oid": "dd96e3ac4a01170e25fd108b1a03354e56170528", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/dd96e3ac4a01170e25fd108b1a03354e56170528", "message": "updated exp date", "committedDate": "2020-05-27T17:29:05Z", "type": "commit"}, {"oid": "6335d376e90cde6673552561e551b1adf439b1d2", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/6335d376e90cde6673552561e551b1adf439b1d2", "message": "fixed the lint", "committedDate": "2020-05-27T17:46:40Z", "type": "commit"}, {"oid": "633879703926e5ce8c991604c0b445109272398a", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/633879703926e5ce8c991604c0b445109272398a", "message": "updated code according to new checkstyle", "committedDate": "2020-05-27T18:27:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDA4MA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431404080", "bodyText": "This wouldn't be my first choice.  https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html would be better.", "author": "lesv", "createdAt": "2020-05-27T19:51:07Z", "path": "jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java", "diffHunk": "@@ -22,6 +22,8 @@\n import com.google.cloud.talent.v4beta1.Job;\n import com.google.cloud.talent.v4beta1.JobServiceClient;\n import com.google.cloud.talent.v4beta1.TenantName;\n+import com.google.protobuf.Timestamp;\n+import com.google.protobuf.util.Timestamps;", "originalCommit": "633879703926e5ce8c991604c0b445109272398a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzOTI0OA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431439248", "bodyText": "Okay I will change it to sql Timestamp", "author": "munkhuushmgl", "createdAt": "2020-05-27T21:00:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUwNzkyMA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431507920", "bodyText": "Looks like method that sets expiration date specifically takes this Timestamp:\nsetPostingExpireTime(com.google.protobuf.Timestamp)\n\nSince it is discouraged, I will take this out and just comment it about 30 days expiration. Also, it is also mentioned in the docs, https://cloud.google.com/talent-solution/job-search/docs/jobs", "author": "munkhuushmgl", "createdAt": "2020-05-27T23:56:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDA4MA=="}], "type": "inlineReview", "revised_code": {"commit": "e2f55137ba0edcbb5677300ba1a7869d384b0d01", "chunk": "diff --git a/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java b/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java\nindex d070600bc..59fc165e2 100644\n--- a/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java\n+++ b/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java\n\n@@ -22,11 +22,14 @@ import com.google.cloud.talent.v4beta1.CreateJobRequest;\n import com.google.cloud.talent.v4beta1.Job;\n import com.google.cloud.talent.v4beta1.JobServiceClient;\n import com.google.cloud.talent.v4beta1.TenantName;\n-import com.google.protobuf.Timestamp;\n-import com.google.protobuf.util.Timestamps;\n import java.io.IOException;\n+import java.sql.Timestamp;\n+import java.time.LocalDate;\n+import java.time.LocalDateTime;\n import java.util.Arrays;\n+import java.util.Calendar;\n import java.util.List;\n+import java.util.Locale;\n \n public class JobSearchCreateJob {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDMzNg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431404336", "bodyText": "https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html <== Is protobuf timestamp leaked to users?  Is this really a good idea?", "author": "lesv", "createdAt": "2020-05-27T19:51:38Z", "path": "jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java", "diffHunk": "@@ -46,14 +48,27 @@ public static void createJob(\n       String requisitionId,\n       String jobApplicationUrl)\n       throws IOException {\n+    // Initialize client that will be used to send requests. This client only needs to be created\n+    // once, and can be reused for multiple requests. After completing all of your requests, call\n+    // the \"close\" method on the client to safely clean up any remaining background resources.\n     try (JobServiceClient jobServiceClient = JobServiceClient.create()) {\n       TenantName parent = TenantName.of(projectId, tenantId);\n       Job.ApplicationInfo applicationInfo =\n           Job.ApplicationInfo.newBuilder().addUris(jobApplicationUrl).build();\n \n-      List<String> addresses = Arrays.asList(\"1600 Amphitheatre Parkway, Mountain View, CA 94043\",\n+      List<String> addresses =\n+          Arrays.asList(\n+              \"1600 Amphitheatre Parkway, Mountain View, CA 94043\",\n               \"111 8th Avenue, New York, NY 10011\");\n \n+      // if exp date is not set, by default it will expire in 30 days.\n+      Timestamp expirationDate =\n+          Timestamps.add(\n+              Timestamps.fromMillis(System.currentTimeMillis()),\n+              com.google.protobuf.Duration.newBuilder()\n+                  .setSeconds(60L * 60L * 24L * 30L) //  30 days ago\n+                  .build());", "originalCommit": "633879703926e5ce8c991604c0b445109272398a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1MDEzOQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431450139", "bodyText": "I may have copied the wrong one.  I think LocalDate https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html is the Java 8 hotness. (if it works)", "author": "lesv", "createdAt": "2020-05-27T21:22:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDMzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1MDkyMg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431450922", "bodyText": "And LocalDateTime https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html", "author": "lesv", "createdAt": "2020-05-27T21:24:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDMzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTUwMTI1MQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2977#discussion_r431501251", "bodyText": "I referenced from appengine Java 8\n\n  \n    \n      java-docs-samples/appengine-java8/bigquery/src/main/java/com/example/appengine/bigquerylogging/BigQueryRunner.java\n    \n    \n         Line 199\n      in\n      caebd85\n    \n    \n    \n    \n\n        \n          \n           Timestamps.subtract(", "author": "munkhuushmgl", "createdAt": "2020-05-27T23:35:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwNDMzNg=="}], "type": "inlineReview", "revised_code": {"commit": "e2f55137ba0edcbb5677300ba1a7869d384b0d01", "chunk": "diff --git a/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java b/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java\nindex d070600bc..59fc165e2 100644\n--- a/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java\n+++ b/jobs/v4/src/main/java/com/example/jobs/JobSearchCreateJob.java\n\n@@ -61,14 +64,7 @@ public class JobSearchCreateJob {\n               \"1600 Amphitheatre Parkway, Mountain View, CA 94043\",\n               \"111 8th Avenue, New York, NY 10011\");\n \n-      // if exp date is not set, by default it will expire in 30 days.\n-      Timestamp expirationDate =\n-          Timestamps.add(\n-              Timestamps.fromMillis(System.currentTimeMillis()),\n-              com.google.protobuf.Duration.newBuilder()\n-                  .setSeconds(60L * 60L * 24L * 30L) //  30 days ago\n-                  .build());\n-\n+      // By default, job posting will expire in 30 days.\n       Job job =\n           Job.newBuilder()\n               .setCompany(companyId)\n"}}, {"oid": "e2f55137ba0edcbb5677300ba1a7869d384b0d01", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/e2f55137ba0edcbb5677300ba1a7869d384b0d01", "message": "removed setExpireDate mthd", "committedDate": "2020-05-27T23:54:23Z", "type": "commit"}, {"oid": "898f9ded6d0d903d788de012a4e0308b86e20568", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/898f9ded6d0d903d788de012a4e0308b86e20568", "message": "added helpful link to job exp", "committedDate": "2020-05-27T23:57:53Z", "type": "commit"}]}