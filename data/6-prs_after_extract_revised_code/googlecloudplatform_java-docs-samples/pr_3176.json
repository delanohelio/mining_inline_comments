{"pr_number": 3176, "pr_title": "add Java snippets for creating, listing, and deleting queues", "pr_createdAt": "2020-06-16T03:21:24Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176", "timeline": [{"oid": "390532812ca4a678e53a90da95617c3739d4fd96", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/390532812ca4a678e53a90da95617c3739d4fd96", "message": "add Java snippets for creating, listing, and deleting queues", "committedDate": "2020-06-16T03:14:25Z", "type": "commit"}, {"oid": "03efa1730713862669253cf621abf920c4bdc77a", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/03efa1730713862669253cf621abf920c4bdc77a", "message": "update licenses", "committedDate": "2020-06-16T03:43:07Z", "type": "commit"}, {"oid": "60df62f3e9b386863ab7745d0fcfefca79fb6d46", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/60df62f3e9b386863ab7745d0fcfefca79fb6d46", "message": "styling fixes for lint", "committedDate": "2020-06-16T05:08:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU5NzMwNg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r441597306", "bodyText": "Update test comments", "author": "jennstubley", "createdAt": "2020-06-17T14:39:29Z", "path": "tasks/src/test/java/com/example/task/CreateQueueIT.java", "diffHunk": "@@ -0,0 +1,77 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.example.task;\n+\n+import static com.google.common.truth.Truth.assertThat;\n+import static org.junit.Assert.assertNotNull;\n+\n+import com.google.cloud.tasks.v2.CloudTasksClient;\n+import com.google.cloud.tasks.v2.QueueName;\n+import java.io.ByteArrayOutputStream;\n+import java.io.PrintStream;\n+import java.util.UUID;\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.JUnit4;\n+\n+/** Tests for creating Tasks with HTTP targets. */", "originalCommit": "60df62f3e9b386863ab7745d0fcfefca79fb6d46", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "04325a690c902383c0295dc9be2a8d82ed2116dc", "chunk": "diff --git a/tasks/src/test/java/com/example/task/CreateQueueIT.java b/tasks/src/test/java/com/example/task/CreateQueueIT.java\nindex 4ef8b7cd8..022b850e8 100644\n--- a/tasks/src/test/java/com/example/task/CreateQueueIT.java\n+++ b/tasks/src/test/java/com/example/task/CreateQueueIT.java\n\n@@ -29,7 +29,7 @@ import org.junit.Test;\n import org.junit.runner.RunWith;\n import org.junit.runners.JUnit4;\n \n-/** Tests for creating Tasks with HTTP targets. */\n+/** Tests for creating queues. */\n @RunWith(JUnit4.class)\n public class CreateQueueIT {\n   private static final String PROJECT_ID = System.getProperty(\"GOOGLE_CLOUD_PROJECT\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU5Nzg1Ng==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r441597856", "bodyText": "Is there a reason for doing this rather than using the sample project like the create task test does?", "author": "jennstubley", "createdAt": "2020-06-17T14:40:13Z", "path": "tasks/src/test/java/com/example/task/CreateQueueIT.java", "diffHunk": "@@ -0,0 +1,77 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.example.task;\n+\n+import static com.google.common.truth.Truth.assertThat;\n+import static org.junit.Assert.assertNotNull;\n+\n+import com.google.cloud.tasks.v2.CloudTasksClient;\n+import com.google.cloud.tasks.v2.QueueName;\n+import java.io.ByteArrayOutputStream;\n+import java.io.PrintStream;\n+import java.util.UUID;\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.JUnit4;\n+\n+/** Tests for creating Tasks with HTTP targets. */\n+@RunWith(JUnit4.class)\n+public class CreateQueueIT {\n+  private static final String PROJECT_ID = System.getProperty(\"GOOGLE_CLOUD_PROJECT\");\n+  private static final String LOCATION_ID = \"us-central1\";\n+  private static final String QUEUE_ID = \"test-queue-\" + UUID.randomUUID();\n+\n+  private ByteArrayOutputStream bout;\n+  private PrintStream out;\n+\n+  private static void requireEnvVar(String varName) {\n+    assertNotNull(\n+        String.format(\"Environment variable '%s' must be set to perform these tests.\", varName),\n+        System.getProperty(varName));\n+  }\n+\n+  @BeforeClass\n+  public static void checkRequirements() {\n+    requireEnvVar(\"GOOGLE_CLOUD_PROJECT\");\n+  }", "originalCommit": "60df62f3e9b386863ab7745d0fcfefca79fb6d46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MTQ3NA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r441671474", "bodyText": "It makes it easier to run the tests in your own project without having to modify the project id in the code. It seems that tests added to the java-docs recently have been using this approach (ex. https://github.com/GoogleCloudPlatform/java-docs-samples/blob/c3bccc301b14b01924ed05f422160190dcd94646/dataproc/src/test/java/InstantiateInlineWorkflowTemplateTest.java) so I just followed that since that's how Python did it as well.\nI'm not sure if the CreateTask tests should be updated to use env var or if just having a static project id is suitable enough.", "author": "aarjo", "createdAt": "2020-06-17T16:25:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU5Nzg1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1NDAwNg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r441754006", "bodyText": "Sounds good, thanks for the explanation.\nIf you want you can update CreateTask tests while you're here to keep consistency within the /tasks directory.", "author": "jennstubley", "createdAt": "2020-06-17T18:44:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU5Nzg1Ng=="}], "type": "inlineReview", "revised_code": {"commit": "04325a690c902383c0295dc9be2a8d82ed2116dc", "chunk": "diff --git a/tasks/src/test/java/com/example/task/CreateQueueIT.java b/tasks/src/test/java/com/example/task/CreateQueueIT.java\nindex 4ef8b7cd8..022b850e8 100644\n--- a/tasks/src/test/java/com/example/task/CreateQueueIT.java\n+++ b/tasks/src/test/java/com/example/task/CreateQueueIT.java\n\n@@ -29,7 +29,7 @@ import org.junit.Test;\n import org.junit.runner.RunWith;\n import org.junit.runners.JUnit4;\n \n-/** Tests for creating Tasks with HTTP targets. */\n+/** Tests for creating queues. */\n @RunWith(JUnit4.class)\n public class CreateQueueIT {\n   private static final String PROJECT_ID = System.getProperty(\"GOOGLE_CLOUD_PROJECT\");\n"}}, {"oid": "04325a690c902383c0295dc9be2a8d82ed2116dc", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/04325a690c902383c0295dc9be2a8d82ed2116dc", "message": "fix test comments and remove oldout", "committedDate": "2020-06-17T16:47:42Z", "type": "commit"}, {"oid": "2f3674ce0443f1a18a970db8ed714f9619b6150f", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/2f3674ce0443f1a18a970db8ed714f9619b6150f", "message": "have createhttptask use env var", "committedDate": "2020-06-18T01:07:24Z", "type": "commit"}, {"oid": "5897509b15ed5a179983062ec8edb11317dd852d", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/5897509b15ed5a179983062ec8edb11317dd852d", "message": "Change System.getProperty to System.getenv and require LOCATION_ID environment variable as well", "committedDate": "2020-06-18T21:55:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUzMTA3Nw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r442531077", "bodyText": "Any chance you can be more specific?", "author": "lesv", "createdAt": "2020-06-18T22:14:41Z", "path": "tasks/src/main/java/com/example/task/CreateQueue.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.example.task;\n+\n+// [START cloud_tasks_create_queue]\n+import com.google.cloud.tasks.v2.CloudTasksClient;\n+import com.google.cloud.tasks.v2.LocationName;\n+import com.google.cloud.tasks.v2.Queue;\n+import com.google.cloud.tasks.v2.QueueName;\n+\n+public class CreateQueue {\n+  /**\n+   * Create a queue using the Cloud Tasks client.\n+   *\n+   * @param projectId the Id of the project.\n+   * @param queueId the name of your Queue.\n+   * @param locationId the GCP region of your queue.\n+   * @throws Exception on Cloud Tasks Client errors.\n+   */\n+  public static void createQueue(String projectId, String locationId, String queueId)\n+      throws Exception {", "originalCommit": "5897509b15ed5a179983062ec8edb11317dd852d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8dbd5a4903e7181633125c60568aeeaa6f6197d8", "chunk": "diff --git a/tasks/src/main/java/com/example/task/CreateQueue.java b/tasks/src/main/java/com/example/task/CreateQueue.java\nindex 32c1b0893..3a57ea700 100644\n--- a/tasks/src/main/java/com/example/task/CreateQueue.java\n+++ b/tasks/src/main/java/com/example/task/CreateQueue.java\n\n@@ -19,6 +19,7 @@ import com.google.cloud.tasks.v2.CloudTasksClient;\n import com.google.cloud.tasks.v2.LocationName;\n import com.google.cloud.tasks.v2.Queue;\n import com.google.cloud.tasks.v2.QueueName;\n+import java.io.IOException;\n \n public class CreateQueue {\n   /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUzMTM3OQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r442531379", "bodyText": "Ideally we are as specific as possible with exceptions based on what developers might see.", "author": "lesv", "createdAt": "2020-06-18T22:15:29Z", "path": "tasks/src/main/java/com/example/task/DeleteQueue.java", "diffHunk": "@@ -0,0 +1,46 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.example.task;\n+\n+// [START cloud_tasks_delete_queue]\n+import com.google.cloud.tasks.v2.CloudTasksClient;\n+import com.google.cloud.tasks.v2.QueueName;\n+\n+public class DeleteQueue {\n+  /**\n+   * Delete a queue using the Cloud Tasks client.\n+   *\n+   * @param projectId the Id of the project.\n+   * @param queueId the name of your Queue.\n+   * @param locationId the GCP region of your queue.\n+   * @throws Exception on Cloud Tasks Client errors.\n+   */\n+  public static void deleteQueue(String projectId, String locationId, String queueId)\n+      throws Exception {", "originalCommit": "5897509b15ed5a179983062ec8edb11317dd852d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8dbd5a4903e7181633125c60568aeeaa6f6197d8", "chunk": "diff --git a/tasks/src/main/java/com/example/task/DeleteQueue.java b/tasks/src/main/java/com/example/task/DeleteQueue.java\nindex 956ba8b5f..55f8c3e25 100644\n--- a/tasks/src/main/java/com/example/task/DeleteQueue.java\n+++ b/tasks/src/main/java/com/example/task/DeleteQueue.java\n\n@@ -17,6 +17,7 @@ package com.example.task;\n // [START cloud_tasks_delete_queue]\n import com.google.cloud.tasks.v2.CloudTasksClient;\n import com.google.cloud.tasks.v2.QueueName;\n+import java.io.IOException;\n \n public class DeleteQueue {\n   /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUzMjE0Nw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r442532147", "bodyText": "Typically, we have a main method that sets these values that users can modify to run this on their own.  Take a look at both our style guide and other smaples", "author": "lesv", "createdAt": "2020-06-18T22:17:47Z", "path": "tasks/src/main/java/com/example/task/CreateQueue.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.example.task;\n+\n+// [START cloud_tasks_create_queue]\n+import com.google.cloud.tasks.v2.CloudTasksClient;\n+import com.google.cloud.tasks.v2.LocationName;\n+import com.google.cloud.tasks.v2.Queue;\n+import com.google.cloud.tasks.v2.QueueName;\n+\n+public class CreateQueue {\n+  /**\n+   * Create a queue using the Cloud Tasks client.\n+   *\n+   * @param projectId the Id of the project.\n+   * @param queueId the name of your Queue.\n+   * @param locationId the GCP region of your queue.", "originalCommit": "5897509b15ed5a179983062ec8edb11317dd852d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU1MTYwNA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3176#discussion_r442551604", "bodyText": "Added!", "author": "aarjo", "createdAt": "2020-06-18T23:21:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUzMjE0Nw=="}], "type": "inlineReview", "revised_code": {"commit": "8dbd5a4903e7181633125c60568aeeaa6f6197d8", "chunk": "diff --git a/tasks/src/main/java/com/example/task/CreateQueue.java b/tasks/src/main/java/com/example/task/CreateQueue.java\nindex 32c1b0893..3a57ea700 100644\n--- a/tasks/src/main/java/com/example/task/CreateQueue.java\n+++ b/tasks/src/main/java/com/example/task/CreateQueue.java\n\n@@ -19,6 +19,7 @@ import com.google.cloud.tasks.v2.CloudTasksClient;\n import com.google.cloud.tasks.v2.LocationName;\n import com.google.cloud.tasks.v2.Queue;\n import com.google.cloud.tasks.v2.QueueName;\n+import java.io.IOException;\n \n public class CreateQueue {\n   /**\n"}}, {"oid": "8dbd5a4903e7181633125c60568aeeaa6f6197d8", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/8dbd5a4903e7181633125c60568aeeaa6f6197d8", "message": "specify exception type in throws", "committedDate": "2020-06-18T22:58:49Z", "type": "commit"}, {"oid": "9dde85cdea525edcd8c5f41dc76f5083e596203d", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/9dde85cdea525edcd8c5f41dc76f5083e596203d", "message": "add main methods and remove javadoc style comments to adhere with style guide", "committedDate": "2020-06-18T23:18:34Z", "type": "commit"}]}