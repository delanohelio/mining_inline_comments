{"pr_number": 7252, "pr_title": "Update Gradle to 6.2", "pr_createdAt": "2020-02-18T10:09:35Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7252", "timeline": [{"oid": "ce3723e76ba0c3163eb69ecc8e367bdaaa0b5c60", "url": "https://github.com/quarkusio/quarkus/commit/ce3723e76ba0c3163eb69ecc8e367bdaaa0b5c60", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml", "committedDate": "2020-02-18T10:44:41Z", "type": "forcePushed"}, {"oid": "8c56492655877151a3dcdeecc244e47e7db2a3c3", "url": "https://github.com/quarkusio/quarkus/commit/8c56492655877151a3dcdeecc244e47e7db2a3c3", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml\n\nfixed evertything", "committedDate": "2020-02-18T13:28:03Z", "type": "forcePushed"}, {"oid": "b70a960a2a9fbf4f329f29f297bf887a8f76182a", "url": "https://github.com/quarkusio/quarkus/commit/b70a960a2a9fbf4f329f29f297bf887a8f76182a", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml\n\nfixed evertything\n\nfixed evertything", "committedDate": "2020-02-18T13:33:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0OTgzNw==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380949837", "bodyText": "Revert this change, please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:37:34Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java", "diffHunk": "@@ -269,7 +267,7 @@ public void startDev() {\n             final DependencySet compileCpDependencies = compileCp.getAllDependencies();\n \n             for (Dependency dependency : compileCpDependencies) {\n-                if (!(dependency instanceof ProjectDependency)) {\n+                if (dependency == null) {", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java b/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\nindex e2398c3824..af15e52b6b 100644\n--- a/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\n+++ b/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\n\n@@ -267,7 +269,7 @@ public class QuarkusDev extends QuarkusTask {\n             final DependencySet compileCpDependencies = compileCp.getAllDependencies();\n \n             for (Dependency dependency : compileCpDependencies) {\n-                if (dependency == null) {\n+                if (!(dependency instanceof ProjectDependency)) {\n                     continue;\n                 }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1MDQ5OQ==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380950499", "bodyText": "Revert this change please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:38:51Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java", "diffHunk": "@@ -344,9 +342,8 @@ public void startDev() {\n             }\n \n             for (AppDependency appDependency : appModel.getFullDeploymentDeps()) {\n-                if (!projectDependencies.contains(appDependency.getArtifact().getKey())) {\n-                    addToClassPaths(classPathManifest, context, appDependency.getArtifact().getPath().toFile());\n-                }\n+                appDependency.getArtifact().getKey();", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java b/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\nindex e2398c3824..af15e52b6b 100644\n--- a/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\n+++ b/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\n\n@@ -342,8 +344,9 @@ public class QuarkusDev extends QuarkusTask {\n             }\n \n             for (AppDependency appDependency : appModel.getFullDeploymentDeps()) {\n-                appDependency.getArtifact().getKey();\n-                addToClassPaths(classPathManifest, context, appDependency.getArtifact().getPath().toFile());\n+                if (!projectDependencies.contains(appDependency.getArtifact().getKey())) {\n+                    addToClassPaths(classPathManifest, context, appDependency.getArtifact().getPath().toFile());\n+                }\n             }\n \n             //we also want to add the maven plugin jar to the class path\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1MDc4Ng==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380950786", "bodyText": "Revert this change please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:39:24Z", "path": "independent-projects/arc/tests/src/test/java/io/quarkus/arc/test/unused/RemoveUnusedBeansTest.java", "diffHunk": "@@ -190,7 +190,7 @@ BigInteger unusedNumber() {\n     static class UsedViaInstanceWithUnusedProducer {\n \n         @Produces\n-        Long unusedLong = new Long(0);\n+        Long unusedLong = 0L;", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/independent-projects/arc/tests/src/test/java/io/quarkus/arc/test/unused/RemoveUnusedBeansTest.java b/independent-projects/arc/tests/src/test/java/io/quarkus/arc/test/unused/RemoveUnusedBeansTest.java\nindex 662914cb4b..974fde05bd 100644\n--- a/independent-projects/arc/tests/src/test/java/io/quarkus/arc/test/unused/RemoveUnusedBeansTest.java\n+++ b/independent-projects/arc/tests/src/test/java/io/quarkus/arc/test/unused/RemoveUnusedBeansTest.java\n\n@@ -190,7 +190,7 @@ public class RemoveUnusedBeansTest {\n     static class UsedViaInstanceWithUnusedProducer {\n \n         @Produces\n-        Long unusedLong = 0L;\n+        Long unusedLong = new Long(0);\n     }\n \n     @Singleton\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1MTQzMg==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380951432", "bodyText": "Revert this change, please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:40:46Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java", "diffHunk": "@@ -106,13 +106,13 @@ public AugmentAction createAugmentor() {\n      *\n      * The class name that is passed in must be the name of an implementation of\n      * {@code Function<Map<String, Object>, List<Consumer<BuildChainBuilder>>>}\n-     * which is used to generate a list of build chain customisers to control the build.\n+     * which is used to generate a list of build chain customizers to control the build.\n      */\n     public AugmentAction createAugmentor(String functionName, Map<String, Object> props) {\n         try {\n             Class<?> augmentor = getAugmentClassLoader().loadClass(AUGMENTOR);\n             Function<Object, List<?>> function = (Function<Object, List<?>>) getAugmentClassLoader().loadClass(functionName)\n-                    .newInstance();\n+                    .getDeclaredConstructor().newInstance();", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java\nindex 56683ed762..f56d430c46 100644\n--- a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java\n+++ b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java\n\n@@ -106,13 +106,13 @@ public class CuratedApplication implements Serializable, Closeable {\n      *\n      * The class name that is passed in must be the name of an implementation of\n      * {@code Function<Map<String, Object>, List<Consumer<BuildChainBuilder>>>}\n-     * which is used to generate a list of build chain customizers to control the build.\n+     * which is used to generate a list of build chain customisers to control the build.\n      */\n     public AugmentAction createAugmentor(String functionName, Map<String, Object> props) {\n         try {\n             Class<?> augmentor = getAugmentClassLoader().loadClass(AUGMENTOR);\n             Function<Object, List<?>> function = (Function<Object, List<?>>) getAugmentClassLoader().loadClass(functionName)\n-                    .getDeclaredConstructor().newInstance();\n+                    .newInstance();\n             List<?> res = function.apply(props);\n             return (AugmentAction) augmentor.getConstructor(CuratedApplication.class, List.class).newInstance(this, res);\n         } catch (Exception e) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1MTQ4Mw==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380951483", "bodyText": "Revert this change, please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:40:52Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java", "diffHunk": "@@ -127,7 +127,7 @@ private Object runInCl(String consumerName, Map<String, Object> params, QuarkusC\n             Thread.currentThread().setContextClassLoader(cl);\n             Class<? extends BiConsumer<CuratedApplication, Map<String, Object>>> clazz = (Class<? extends BiConsumer<CuratedApplication, Map<String, Object>>>) cl\n                     .loadClass(consumerName);\n-            BiConsumer<CuratedApplication, Map<String, Object>> biConsumer = clazz.newInstance();\n+            BiConsumer<CuratedApplication, Map<String, Object>> biConsumer = clazz.getDeclaredConstructor().newInstance();", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java\nindex 56683ed762..f56d430c46 100644\n--- a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java\n+++ b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/app/CuratedApplication.java\n\n@@ -127,7 +127,7 @@ public class CuratedApplication implements Serializable, Closeable {\n             Thread.currentThread().setContextClassLoader(cl);\n             Class<? extends BiConsumer<CuratedApplication, Map<String, Object>>> clazz = (Class<? extends BiConsumer<CuratedApplication, Map<String, Object>>>) cl\n                     .loadClass(consumerName);\n-            BiConsumer<CuratedApplication, Map<String, Object>> biConsumer = clazz.getDeclaredConstructor().newInstance();\n+            BiConsumer<CuratedApplication, Map<String, Object>> biConsumer = clazz.newInstance();\n             biConsumer.accept(this, params);\n             return biConsumer;\n         } catch (Exception e) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1MTgzNg==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380951836", "bodyText": "Revert this change, please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:41:35Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java", "diffHunk": "@@ -34,11 +34,11 @@ public Wagon lookup(String roleHint) throws Exception {\n         final Class<?> cls = loadClass(impl, roleHint);\n         final Object wagon;\n         try {\n-            wagon = cls.newInstance();\n+            wagon = cls.getDeclaredConstructor().newInstance();", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java\nindex a81c06a725..e7762111dd 100644\n--- a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java\n+++ b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java\n\n@@ -34,11 +34,11 @@ public class BootstrapWagonProvider implements WagonProvider {\n         final Class<?> cls = loadClass(impl, roleHint);\n         final Object wagon;\n         try {\n-            wagon = cls.getDeclaredConstructor().newInstance();\n+            wagon = cls.newInstance();\n         } catch (Throwable t) {\n             throw new IllegalStateException(\"Failed to instantiate Wagon impl \" + impl, t);\n         }\n-        return (Wagon) wagon;\n+        return Wagon.class.cast(wagon);\n     }\n \n     @Override\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1MTg3OQ==", "url": "https://github.com/quarkusio/quarkus/pull/7252#discussion_r380951879", "bodyText": "Revert this change, please.", "author": "aloubyansky", "createdAt": "2020-02-18T21:41:41Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java", "diffHunk": "@@ -34,11 +34,11 @@ public Wagon lookup(String roleHint) throws Exception {\n         final Class<?> cls = loadClass(impl, roleHint);\n         final Object wagon;\n         try {\n-            wagon = cls.newInstance();\n+            wagon = cls.getDeclaredConstructor().newInstance();\n         } catch (Throwable t) {\n             throw new IllegalStateException(\"Failed to instantiate Wagon impl \" + impl, t);\n         }\n-        return Wagon.class.cast(wagon);\n+        return (Wagon) wagon;", "originalCommit": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "chunk": "diff --git a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java\nindex a81c06a725..e7762111dd 100644\n--- a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java\n+++ b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/BootstrapWagonProvider.java\n\n@@ -34,11 +34,11 @@ public class BootstrapWagonProvider implements WagonProvider {\n         final Class<?> cls = loadClass(impl, roleHint);\n         final Object wagon;\n         try {\n-            wagon = cls.getDeclaredConstructor().newInstance();\n+            wagon = cls.newInstance();\n         } catch (Throwable t) {\n             throw new IllegalStateException(\"Failed to instantiate Wagon impl \" + impl, t);\n         }\n-        return (Wagon) wagon;\n+        return Wagon.class.cast(wagon);\n     }\n \n     @Override\n"}}, {"oid": "b70a960a2a9fbf4f329f29f297bf887a8f76182a", "url": "https://github.com/quarkusio/quarkus/commit/b70a960a2a9fbf4f329f29f297bf887a8f76182a", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml\n\nfixed evertything\n\nfixed evertything", "committedDate": "2020-02-18T13:33:15Z", "type": "forcePushed"}, {"oid": "9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "url": "https://github.com/quarkusio/quarkus/commit/9caa1f15bbdcf4f242be44ae3548474d74b83bd7", "message": "code cleanup", "committedDate": "2020-02-18T21:07:01Z", "type": "forcePushed"}, {"oid": "b70a960a2a9fbf4f329f29f297bf887a8f76182a", "url": "https://github.com/quarkusio/quarkus/commit/b70a960a2a9fbf4f329f29f297bf887a8f76182a", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml\n\nfixed evertything\n\nfixed evertything", "committedDate": "2020-02-18T13:33:15Z", "type": "forcePushed"}, {"oid": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "url": "https://github.com/quarkusio/quarkus/commit/9a8efdad51445953fe02d2722cdae657b0a6d81a", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml\n\nfixed evertything\n\nfixed evertything", "committedDate": "2020-02-20T22:43:10Z", "type": "commit"}, {"oid": "9a8efdad51445953fe02d2722cdae657b0a6d81a", "url": "https://github.com/quarkusio/quarkus/commit/9a8efdad51445953fe02d2722cdae657b0a6d81a", "message": "updated gradle to 6.2\n\nfixed missing change of gradle version on pom.xml\n\nfixed evertything\n\nfixed evertything", "committedDate": "2020-02-20T22:43:10Z", "type": "forcePushed"}]}