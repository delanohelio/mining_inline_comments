{"pr_number": 7863, "pr_title": "Use proper configuration for environment variables in JibConfig", "pr_createdAt": "2020-03-14T12:15:24Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7863", "timeline": [{"oid": "c73a7e5b420f2e8323eb8b4eb541d7cea8b2cf56", "url": "https://github.com/quarkusio/quarkus/commit/c73a7e5b420f2e8323eb8b4eb541d7cea8b2cf56", "message": "Use proper configuration for environment variables in JibConfig", "committedDate": "2020-03-14T12:14:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjM5NQ==", "url": "https://github.com/quarkusio/quarkus/pull/7863#discussion_r392582395", "bodyText": "jibConfig.environmentVariables will be null if it is not set.", "author": "gastaldi", "createdAt": "2020-03-14T12:24:42Z", "path": "extensions/container-image/container-image-jib/deployment/src/main/java/io/quarkus/container/image/jib/deployment/JibProcessor.java", "diffHunk": "@@ -203,7 +203,7 @@ private JibContainerBuilder createContainerBuilderFromJar(JibConfig jibConfig,\n             }\n \n             return javaContainerBuilder.toContainerBuilder()\n-                    .setEnvironment(jibConfig.environmentVariables.orElse(Collections.emptyMap()))\n+                    .setEnvironment(jibConfig.environmentVariables)", "originalCommit": "c73a7e5b420f2e8323eb8b4eb541d7cea8b2cf56", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjQ3Mw==", "url": "https://github.com/quarkusio/quarkus/pull/7863#discussion_r392582473", "bodyText": "It will not \ud83d\ude0e. I tried it and it's an empty map. But let me try it again to be 100% sure", "author": "geoand", "createdAt": "2020-03-14T12:26:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjM5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjYzOQ==", "url": "https://github.com/quarkusio/quarkus/pull/7863#discussion_r392582639", "bodyText": "In general, Quarkus config objects never have null values.\nHere is the screenshot from the debugger for a test I did:", "author": "geoand", "createdAt": "2020-03-14T12:29:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjM5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MzEwNQ==", "url": "https://github.com/quarkusio/quarkus/pull/7863#discussion_r392583105", "bodyText": "Hm I could swear I saw it being null in https://github.com/quarkusio/quarkus/blob/master/extensions/flyway/runtime/src/main/java/io/quarkus/flyway/runtime/FlywayDataSourceRuntimeConfig.java#L113\nBut maybe because of this: https://github.com/quarkusio/quarkus/blob/master/extensions/flyway/runtime/src/main/java/io/quarkus/flyway/runtime/FlywayDataSourceRuntimeConfig.java#L20\nThanks for proving me wrong, I was annoyed by that ;)", "author": "gastaldi", "createdAt": "2020-03-14T12:36:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjM5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MzE0NQ==", "url": "https://github.com/quarkusio/quarkus/pull/7863#discussion_r392583145", "bodyText": "Yeah, I think you found the cause of the null value \ud83d\udc4d", "author": "geoand", "createdAt": "2020-03-14T12:38:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4MjM5NQ=="}], "type": "inlineReview", "revised_code": null}]}