{"pr_number": 6576, "pr_title": "OpenShift manifests now reference the correct artifact", "pr_createdAt": "2020-01-16T08:39:36Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6576", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2OTQ2OQ==", "url": "https://github.com/quarkusio/quarkus/pull/6576#discussion_r367369469", "bodyText": "That won't work. You can configure the name and the suffix in PackageConfig.\nSee https://github.com/quarkusio/quarkus/blob/master/core/deployment/src/main/java/io/quarkus/deployment/pkg/steps/JarResultBuildStep.java#L179 for instance.", "author": "gsmet", "createdAt": "2020-01-16T11:33:37Z", "path": "extensions/kubernetes/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java", "diffHunk": "@@ -220,6 +222,8 @@ private Project createProject(ApplicationInfoBuildItem app, ArchiveRootBuildItem\n         Project project = FileProjectFactory.create(archiveRootBuildItem.getArchiveLocation().toFile());\n         BuildInfo buildInfo = new BuildInfo(app.getName(), app.getVersion(),\n                 \"jar\", project.getBuildInfo().getBuildTool(),\n+                archiveRootBuildItem.getArchiveRoot()\n+                        .resolve(String.format(OUTPUT_ARTIFACT_FORMAT, app.getName(), app.getVersion())),", "originalCommit": "39b6827c354af21b23a979f3905e2241c1e9b826", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM3MDg4Mw==", "url": "https://github.com/quarkusio/quarkus/pull/6576#discussion_r367370883", "bodyText": "Aha, nice catch! I didn't even remember that is was configurable", "author": "geoand", "createdAt": "2020-01-16T11:37:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2OTQ2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY1NzYwNA==", "url": "https://github.com/quarkusio/quarkus/pull/6576#discussion_r367657604", "bodyText": "I think it's fixed now. OK @gsmet?", "author": "geoand", "createdAt": "2020-01-16T21:24:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2OTQ2OQ=="}], "type": "inlineReview", "revised_code": {"commit": "751e0c1ab44d4389e9f28495d9fbbfc49c5140bd", "chunk": "diff --git a/extensions/kubernetes/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java b/extensions/kubernetes/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java\nindex a3822d511d..0f1cfa8b4e 100644\n--- a/extensions/kubernetes/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java\n+++ b/extensions/kubernetes/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java\n\n@@ -217,13 +221,12 @@ class KubernetesProcessor {\n         return result;\n     }\n \n-    private Project createProject(ApplicationInfoBuildItem app, ArchiveRootBuildItem archiveRootBuildItem) {\n+    private Project createProject(ApplicationInfoBuildItem app, Path artifactPath) {\n         //Let dekorate create a Project instance and then override with what is found in ApplicationInfoBuildItem.\n-        Project project = FileProjectFactory.create(archiveRootBuildItem.getArchiveLocation().toFile());\n+        Project project = FileProjectFactory.create(artifactPath.toFile());\n         BuildInfo buildInfo = new BuildInfo(app.getName(), app.getVersion(),\n                 \"jar\", project.getBuildInfo().getBuildTool(),\n-                archiveRootBuildItem.getArchiveRoot()\n-                        .resolve(String.format(OUTPUT_ARTIFACT_FORMAT, app.getName(), app.getVersion())),\n+                artifactPath,\n                 project.getBuildInfo().getOutputFile(),\n                 project.getBuildInfo().getClassOutputDir());\n \n"}}, {"oid": "751e0c1ab44d4389e9f28495d9fbbfc49c5140bd", "url": "https://github.com/quarkusio/quarkus/commit/751e0c1ab44d4389e9f28495d9fbbfc49c5140bd", "message": "fix (#6562): Openshift manifests now reference the correct artifact.", "committedDate": "2020-01-16T13:44:43Z", "type": "forcePushed"}, {"oid": "7d9e69cfe35bb95f027e982a6384877dc32d97e6", "url": "https://github.com/quarkusio/quarkus/commit/7d9e69cfe35bb95f027e982a6384877dc32d97e6", "message": "fix (#6562): Openshift manifests now reference the correct artifact.", "committedDate": "2020-01-16T19:15:03Z", "type": "commit"}, {"oid": "7d9e69cfe35bb95f027e982a6384877dc32d97e6", "url": "https://github.com/quarkusio/quarkus/commit/7d9e69cfe35bb95f027e982a6384877dc32d97e6", "message": "fix (#6562): Openshift manifests now reference the correct artifact.", "committedDate": "2020-01-16T19:15:03Z", "type": "forcePushed"}]}