{"pr_number": 12489, "pr_title": "MongoDB - Batch Size On Aggregate Options & Find Options", "pr_createdAt": "2020-10-02T20:27:23Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12489", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQxOTI3Mg==", "url": "https://github.com/quarkusio/quarkus/pull/12489#discussion_r499419272", "bodyText": "Can you improve the JavaDoc to explain how this is used ?\nYou can check the JavaDoc of com.mongodb.reactivestreams.client.AggregatePublisher.batchSize(int) as it's the method being called with this attribute.", "author": "loicmathieu", "createdAt": "2020-10-05T08:15:45Z", "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/AggregateOptions.java", "diffHunk": "@@ -114,6 +115,17 @@ public AggregateOptions hint(Bson hint) {\n         return this;\n     }\n \n+    /**\n+     * Sets the batchSize.", "originalCommit": "76e87e26d730208017ed998eb4d7f7ba98736f2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg0ODMxOQ==", "url": "https://github.com/quarkusio/quarkus/pull/12489#discussion_r499848319", "bodyText": "I don't know if the second part is necessary, but anyways, I copied it.", "author": "mcserra", "createdAt": "2020-10-05T20:19:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQxOTI3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "32c9997929f56869a998f750393f21a6fa37b9db", "chunk": "diff --git a/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/AggregateOptions.java b/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/AggregateOptions.java\nindex f574418003..ec49a9d64f 100644\n--- a/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/AggregateOptions.java\n+++ b/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/AggregateOptions.java\n\n@@ -116,9 +116,12 @@ public class AggregateOptions {\n     }\n \n     /**\n-     * Sets the batchSize.\n+     * Sets the number of documents to return per batch.\n      *\n-     * @param size the size of the batch\n+     * <p>Overrides the {@link org.reactivestreams.Subscription#request(long)} value for setting the batch size, allowing for fine grained\n+     * control over the underlying cursor.</p>\n+     *\n+     * @param size the batch size\n      * @return this\n      */\n     public AggregateOptions batchSize(int size) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQxOTQ4Mg==", "url": "https://github.com/quarkusio/quarkus/pull/12489#discussion_r499419482", "bodyText": "Same remark here for the JavaDoc improvement", "author": "loicmathieu", "createdAt": "2020-10-05T08:16:09Z", "path": "extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/FindOptions.java", "diffHunk": "@@ -250,6 +251,17 @@ public FindOptions showRecordId(boolean showRecordId) {\n         return this;\n     }\n \n+    /**\n+     * Sets the batchSize.", "originalCommit": "76e87e26d730208017ed998eb4d7f7ba98736f2e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "32c9997929f56869a998f750393f21a6fa37b9db", "chunk": "diff --git a/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/FindOptions.java b/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/FindOptions.java\nindex 778fc73a61..ab76de34dd 100644\n--- a/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/FindOptions.java\n+++ b/extensions/mongodb-client/runtime/src/main/java/io/quarkus/mongodb/FindOptions.java\n\n@@ -252,9 +252,12 @@ public class FindOptions {\n     }\n \n     /**\n-     * Sets the batchSize.\n+     * Sets the number of documents to return per batch.\n      *\n-     * @param size the size of the batch\n+     * <p>Overrides the {@link org.reactivestreams.Subscription#request(long)} value for setting the batch size, allowing for fine grained\n+     * control over the underlying cursor.</p>\n+     *\n+     * @param size the batch size\n      * @return this\n      */\n     public FindOptions batchSize(int size) {\n"}}, {"oid": "32c9997929f56869a998f750393f21a6fa37b9db", "url": "https://github.com/quarkusio/quarkus/commit/32c9997929f56869a998f750393f21a6fa37b9db", "message": "MongoDB - Batch Size On Aggregate Options & Find Options", "committedDate": "2020-10-05T20:17:31Z", "type": "forcePushed"}, {"oid": "1ffa8a5ae4a1a2652757c169e3c6fed77c354c60", "url": "https://github.com/quarkusio/quarkus/commit/1ffa8a5ae4a1a2652757c169e3c6fed77c354c60", "message": "MongoDB - Batch Size On Aggregate Options & Find Options", "committedDate": "2020-10-05T20:49:17Z", "type": "commit"}, {"oid": "1ffa8a5ae4a1a2652757c169e3c6fed77c354c60", "url": "https://github.com/quarkusio/quarkus/commit/1ffa8a5ae4a1a2652757c169e3c6fed77c354c60", "message": "MongoDB - Batch Size On Aggregate Options & Find Options", "committedDate": "2020-10-05T20:49:17Z", "type": "forcePushed"}]}