{"pr_number": 11498, "pr_title": "More reactive SQL client connection options", "pr_createdAt": "2020-08-20T13:43:55Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11498", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzk5Njk0OA==", "url": "https://github.com/quarkusio/quarkus/pull/11498#discussion_r473996948", "bodyText": "Hmmm, it looks like this one should more be Optional?", "author": "gsmet", "createdAt": "2020-08-20T13:50:56Z", "path": "extensions/reactive-datasource/runtime/src/main/java/io/quarkus/reactive/datasource/runtime/DataSourceReactiveRuntimeConfig.java", "diffHunk": "@@ -94,4 +95,22 @@\n      */\n     @ConfigItem\n     public Optional<Boolean> threadLocal;\n+\n+    /**\n+     * The number of reconnection attempts when a pooled connection cannot be established on first try.\n+     */\n+    @ConfigItem(defaultValue = \"0\")\n+    public int reconnectAttempts;\n+\n+    /**\n+     * The interval between reconnection attempts when a pooled connection cannot be established on first try.\n+     */\n+    @ConfigItem(defaultValue = \"PT1S\")\n+    public Duration reconnectInterval;\n+\n+    /**\n+     * The maximum time without data written to or read from a connection before it is removed from the pool.\n+     */\n+    @ConfigItem(defaultValue = \"PT0S\")", "originalCommit": "64e34d596bf333364c69b7b2fd87245d0bb926b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAwOTMzMg==", "url": "https://github.com/quarkusio/quarkus/pull/11498#discussion_r474009332", "bodyText": "Done", "author": "tsegismont", "createdAt": "2020-08-20T14:05:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzk5Njk0OA=="}], "type": "inlineReview", "revised_code": {"commit": "39c5a9f4ebe7b8b04032a1fc13b661ec430563b0", "chunk": "diff --git a/extensions/reactive-datasource/runtime/src/main/java/io/quarkus/reactive/datasource/runtime/DataSourceReactiveRuntimeConfig.java b/extensions/reactive-datasource/runtime/src/main/java/io/quarkus/reactive/datasource/runtime/DataSourceReactiveRuntimeConfig.java\nindex c17349aa60..fb498ab53f 100644\n--- a/extensions/reactive-datasource/runtime/src/main/java/io/quarkus/reactive/datasource/runtime/DataSourceReactiveRuntimeConfig.java\n+++ b/extensions/reactive-datasource/runtime/src/main/java/io/quarkus/reactive/datasource/runtime/DataSourceReactiveRuntimeConfig.java\n\n@@ -111,6 +111,6 @@ public class DataSourceReactiveRuntimeConfig {\n     /**\n      * The maximum time without data written to or read from a connection before it is removed from the pool.\n      */\n-    @ConfigItem(defaultValue = \"PT0S\")\n-    public Duration idleTimeout;\n+    @ConfigItem(defaultValueDocumentation = \"no timeout\")\n+    public Optional<Duration> idleTimeout;\n }\n"}}, {"oid": "39c5a9f4ebe7b8b04032a1fc13b661ec430563b0", "url": "https://github.com/quarkusio/quarkus/commit/39c5a9f4ebe7b8b04032a1fc13b661ec430563b0", "message": "Added reconnectAttempts, reconnectInterval and idleTimeout props to reactive datasource config", "committedDate": "2020-08-20T14:04:53Z", "type": "forcePushed"}, {"oid": "0734b4fd6252df5313f75b047c248bebfab47a50", "url": "https://github.com/quarkusio/quarkus/commit/0734b4fd6252df5313f75b047c248bebfab47a50", "message": "Allow to disable the addition of the duration format note\n\nThis is useful when you have several config references included in the\nsame document and you only want one note.\n\nWe can probably do better but I prefer to have a quick fix to unblock\nthis PR.", "committedDate": "2020-08-20T14:21:32Z", "type": "commit"}, {"oid": "238e305c6614591d02941887407ac33112095768", "url": "https://github.com/quarkusio/quarkus/commit/238e305c6614591d02941887407ac33112095768", "message": "Added reconnectAttempts, reconnectInterval and idleTimeout props to reactive datasource config", "committedDate": "2020-08-20T14:21:32Z", "type": "commit"}, {"oid": "238e305c6614591d02941887407ac33112095768", "url": "https://github.com/quarkusio/quarkus/commit/238e305c6614591d02941887407ac33112095768", "message": "Added reconnectAttempts, reconnectInterval and idleTimeout props to reactive datasource config", "committedDate": "2020-08-20T14:21:32Z", "type": "forcePushed"}]}