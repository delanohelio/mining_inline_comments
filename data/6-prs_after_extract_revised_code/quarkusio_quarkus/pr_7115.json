{"pr_number": 7115, "pr_title": "Support Hibernate ORM's generation of Enhanced Proxies", "pr_createdAt": "2020-02-10T10:22:36Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7115", "timeline": [{"oid": "a0c13a1beb1fd3f254038cc6e9954c6017fee48c", "url": "https://github.com/quarkusio/quarkus/commit/a0c13a1beb1fd3f254038cc6e9954c6017fee48c", "message": "Introduce an integration test triggering the need for enhanced proxies", "committedDate": "2020-02-10T15:08:56Z", "type": "commit"}, {"oid": "f45e6f1287fc9406658cc26bc3c92f4484f37ef6", "url": "https://github.com/quarkusio/quarkus/commit/f45e6f1287fc9406658cc26bc3c92f4484f37ef6", "message": "Build Enhanced Proxy class instances during augmentation, then inject them in custom ProxyFactoryFactory implementation\n\nThis will allow to use the new feature \"Enhanced Proxy\" from Hibernate ORM upstream without needing runtime enhancers.", "committedDate": "2020-02-10T15:08:56Z", "type": "commit"}, {"oid": "af8b5b23b75b41d47000a2e64f0cd66dbc18499d", "url": "https://github.com/quarkusio/quarkus/commit/af8b5b23b75b41d47000a2e64f0cd66dbc18499d", "message": "Make it an explicit requirement to have default constructors of entities", "committedDate": "2020-02-10T15:08:56Z", "type": "commit"}, {"oid": "af8b5b23b75b41d47000a2e64f0cd66dbc18499d", "url": "https://github.com/quarkusio/quarkus/commit/af8b5b23b75b41d47000a2e64f0cd66dbc18499d", "message": "Make it an explicit requirement to have default constructors of entities", "committedDate": "2020-02-10T15:08:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzNzgzNg==", "url": "https://github.com/quarkusio/quarkus/pull/7115#discussion_r378937836", "bodyText": "Does that one throw the exception? It needs proxying?", "author": "gsmet", "createdAt": "2020-02-13T15:36:06Z", "path": "extensions/hibernate-orm/deployment/src/test/java/io/quarkus/hibernate/orm/HibernateMetricsTestCase.java", "diffHunk": "@@ -64,7 +60,8 @@ public void testMetrics() {\n         assertEquals(0L, getCounterValueOrNull(\"hibernate-orm.entities.inserted\"));\n         Arc.container().requestContext().activate();\n         try {\n-            DummyEntity entity = new DummyEntity(12345L);\n+            DummyEntity entity = new DummyEntity();", "originalCommit": "af8b5b23b75b41d47000a2e64f0cd66dbc18499d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk0NzI1OA==", "url": "https://github.com/quarkusio/quarkus/pull/7115#discussion_r378947258", "bodyText": "That code wasn't throwing an exception, as it was only storing a DummyEntity. If the test would have attempted to load it, you'd have had a runtime exception.\nThat seemed wrong to me (in many ways), so I made sure we throw an helpful (but fatal) error at build time to highlight the need for an empty constructor. Since it fails now, existing tests had to be fixed.", "author": "Sanne", "createdAt": "2020-02-13T15:49:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzNzgzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk0NzUxOQ==", "url": "https://github.com/quarkusio/quarkus/pull/7115#discussion_r378947519", "bodyText": "(that specific test doesn't need proxying)", "author": "Sanne", "createdAt": "2020-02-13T15:50:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzNzgzNg=="}], "type": "inlineReview", "revised_code": null}]}