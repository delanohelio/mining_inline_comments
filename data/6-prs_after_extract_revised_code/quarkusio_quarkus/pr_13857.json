{"pr_number": 13857, "pr_title": "Reactive RestEasy JAX-RS client - passing entities", "pr_createdAt": "2020-12-12T23:01:17Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13857", "timeline": [{"oid": "8efe7c4f9e1f16cffc0fcaabbc3c38925a9ea43d", "url": "https://github.com/quarkusio/quarkus/commit/8efe7c4f9e1f16cffc0fcaabbc3c38925a9ea43d", "message": "Reactive RestEasy JAX-RS client - passing entities", "committedDate": "2020-12-12T23:02:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4MDYzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13857#discussion_r542080631", "bodyText": "This should use the constant javax.ws.rs.core.MediaType#APPLICATION_OCTET_STREAM", "author": "stuartwdouglas", "createdAt": "2020-12-14T03:04:39Z", "path": "extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java", "diffHunk": "@@ -241,12 +248,37 @@ public void registerInvocationCallbacks(CombinedIndexBuildItem index, ResteasyRe\n                     }\n                     //TODO: async return types\n \n-                    ResultHandle result = m\n-                            .invokeInterfaceMethod(\n-                                    MethodDescriptor.ofMethod(Invocation.Builder.class, \"method\", Object.class, String.class,\n-                                            Class.class),\n-                                    builder, m.load(method.getHttpMethod()), m.loadClass(method.getSimpleReturnType()));\n-\n+                    ResultHandle result;\n+                    if (bodyParameterIdx != null) {\n+                        String mediaTypeValue = \"application/octet-stream\";", "originalCommit": "8efe7c4f9e1f16cffc0fcaabbc3c38925a9ea43d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "123b47c96ebd58b6956ca76779a1876d12e57ecb", "chunk": "diff --git a/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java b/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java\nindex 76fd83e7b5..03e6204978 100644\n--- a/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java\n+++ b/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java\n\n@@ -250,7 +249,7 @@ public class JaxrsClientProcessor {\n \n                     ResultHandle result;\n                     if (bodyParameterIdx != null) {\n-                        String mediaTypeValue = \"application/octet-stream\";\n+                        String mediaTypeValue = MediaType.APPLICATION_OCTET_STREAM;\n                         String[] consumes = method.getConsumes();\n                         if (consumes != null && consumes.length > 0) {\n                             if (consumes.length > 1) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4MTM1NA==", "url": "https://github.com/quarkusio/quarkus/pull/13857#discussion_r542081354", "bodyText": "This should really be an 'else if', the end result is the same but it make the code easier to read.", "author": "stuartwdouglas", "createdAt": "2020-12-14T03:07:11Z", "path": "extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java", "diffHunk": "@@ -222,6 +226,9 @@ public void registerInvocationCallbacks(CombinedIndexBuildItem index, ResteasyRe\n                                             String.class, Object[].class),\n                                     tg, m.load(p.name), array);\n                         }\n+                        if (p.parameterType == ParameterType.BODY) {", "originalCommit": "8efe7c4f9e1f16cffc0fcaabbc3c38925a9ea43d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "123b47c96ebd58b6956ca76779a1876d12e57ecb", "chunk": "diff --git a/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java b/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java\nindex 76fd83e7b5..03e6204978 100644\n--- a/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java\n+++ b/extensions/resteasy-reactive/quarkus-jaxrs-client/deployment/src/main/java/io/quarkus/resteasy/reactive/client/deployment/JaxrsClientProcessor.java\n\n@@ -225,8 +225,7 @@ public class JaxrsClientProcessor {\n                                     MethodDescriptor.ofMethod(WebTarget.class, \"queryParam\", WebTarget.class,\n                                             String.class, Object[].class),\n                                     tg, m.load(p.name), array);\n-                        }\n-                        if (p.parameterType == ParameterType.BODY) {\n+                        } else if (p.parameterType == ParameterType.BODY) {\n                             bodyParameterIdx = i;\n                         }\n \n"}}, {"oid": "123b47c96ebd58b6956ca76779a1876d12e57ecb", "url": "https://github.com/quarkusio/quarkus/commit/123b47c96ebd58b6956ca76779a1876d12e57ecb", "message": "Reactive RestEasy JAX-RS client - passing entities", "committedDate": "2020-12-14T07:37:16Z", "type": "commit"}, {"oid": "123b47c96ebd58b6956ca76779a1876d12e57ecb", "url": "https://github.com/quarkusio/quarkus/commit/123b47c96ebd58b6956ca76779a1876d12e57ecb", "message": "Reactive RestEasy JAX-RS client - passing entities", "committedDate": "2020-12-14T07:37:16Z", "type": "forcePushed"}]}