{"pr_number": 10370, "pr_title": "Knative manifest now uses valid port names", "pr_createdAt": "2020-06-30T13:21:44Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10370", "timeline": [{"oid": "f4af52f4bd72e209499df58d719bb853824b06cc", "url": "https://github.com/quarkusio/quarkus/commit/f4af52f4bd72e209499df58d719bb853824b06cc", "message": "fix (#10332): Knative manifest now uses valid port names.", "committedDate": "2020-06-30T13:22:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcwNzU2NA==", "url": "https://github.com/quarkusio/quarkus/pull/10370#discussion_r447707564", "bodyText": "Can we also add a check for annotations?", "author": "geoand", "createdAt": "2020-06-30T14:02:40Z", "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/java/io/quarkus/it/kubernetes/OpenshiftWithApplicationPropertiesTest.java", "diffHunk": "@@ -66,6 +67,14 @@ public void assertGeneratedResources() throws IOException {\n             });\n         });\n \n-        assertThat(openshiftList).filteredOn(h -> \"Route\".equals(h.getKind())).hasSize(1);\n+        assertThat(openshiftList).filteredOn(i -> \"Route\".equals(i.getKind())).hasOnlyOneElementSatisfying(i -> {\n+            assertThat(i).isInstanceOfSatisfying(Route.class, in -> {\n+                //Check that lables are also applied to Routes (#10260)\n+                assertThat(i.getMetadata()).satisfies(m -> {\n+                    assertThat(m.getName()).isEqualTo(\"test-it\");\n+                    assertThat(m.getLabels()).contains(entry(\"foo\", \"bar\"));", "originalCommit": "9263f1d67bf7bcfc39e44f8a767c4604cddd99da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk0MDA5OA==", "url": "https://github.com/quarkusio/quarkus/pull/10370#discussion_r447940098", "bodyText": "@iocanel can you please add a check for annotations as well?", "author": "geoand", "createdAt": "2020-06-30T19:51:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcwNzU2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk3ODIxOA==", "url": "https://github.com/quarkusio/quarkus/pull/10370#discussion_r447978218", "bodyText": "Sure", "author": "iocanel", "createdAt": "2020-06-30T21:04:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzcwNzU2NA=="}], "type": "inlineReview", "revised_code": {"commit": "9abd1053a6b1a9a39e452b0fdc0f010b8a1478c8", "chunk": "diff --git a/integration-tests/kubernetes/quarkus-standard-way/src/test/java/io/quarkus/it/kubernetes/OpenshiftWithApplicationPropertiesTest.java b/integration-tests/kubernetes/quarkus-standard-way/src/test/java/io/quarkus/it/kubernetes/OpenshiftWithApplicationPropertiesTest.java\nindex c82f515d46..ebd8cf9557 100644\n--- a/integration-tests/kubernetes/quarkus-standard-way/src/test/java/io/quarkus/it/kubernetes/OpenshiftWithApplicationPropertiesTest.java\n+++ b/integration-tests/kubernetes/quarkus-standard-way/src/test/java/io/quarkus/it/kubernetes/OpenshiftWithApplicationPropertiesTest.java\n\n@@ -67,14 +66,6 @@ public class OpenshiftWithApplicationPropertiesTest {\n             });\n         });\n \n-        assertThat(openshiftList).filteredOn(i -> \"Route\".equals(i.getKind())).hasOnlyOneElementSatisfying(i -> {\n-            assertThat(i).isInstanceOfSatisfying(Route.class, in -> {\n-                //Check that lables are also applied to Routes (#10260)\n-                assertThat(i.getMetadata()).satisfies(m -> {\n-                    assertThat(m.getName()).isEqualTo(\"test-it\");\n-                    assertThat(m.getLabels()).contains(entry(\"foo\", \"bar\"));\n-                });\n-            });\n-        });\n+        assertThat(openshiftList).filteredOn(h -> \"Route\".equals(h.getKind())).hasSize(1);\n     }\n }\n"}}, {"oid": "9abd1053a6b1a9a39e452b0fdc0f010b8a1478c8", "url": "https://github.com/quarkusio/quarkus/commit/9abd1053a6b1a9a39e452b0fdc0f010b8a1478c8", "message": "fix (#10332): Knative manifest now uses valid port names.", "committedDate": "2020-06-30T17:16:20Z", "type": "commit"}, {"oid": "bdfa8b72c2d80dd2323a18557e1b75a12d48b5d7", "url": "https://github.com/quarkusio/quarkus/commit/bdfa8b72c2d80dd2323a18557e1b75a12d48b5d7", "message": "test (#10620): labels on ingress and routes", "committedDate": "2020-06-30T17:16:20Z", "type": "forcePushed"}, {"oid": "065959f035b3940bb4ca17ae5d923ccd11ad7f9d", "url": "https://github.com/quarkusio/quarkus/commit/065959f035b3940bb4ca17ae5d923ccd11ad7f9d", "message": "test (#10620): labels on ingress and routes", "committedDate": "2020-07-01T06:25:48Z", "type": "commit"}, {"oid": "065959f035b3940bb4ca17ae5d923ccd11ad7f9d", "url": "https://github.com/quarkusio/quarkus/commit/065959f035b3940bb4ca17ae5d923ccd11ad7f9d", "message": "test (#10620): labels on ingress and routes", "committedDate": "2020-07-01T06:25:48Z", "type": "forcePushed"}]}