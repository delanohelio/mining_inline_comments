{"pr_number": 13934, "pr_title": "Write headers just before commit", "pr_createdAt": "2020-12-17T01:17:03Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13934", "timeline": [{"oid": "75b916adc83d5977a7e7a1add92236a1daee86a6", "url": "https://github.com/quarkusio/quarkus/commit/75b916adc83d5977a7e7a1add92236a1daee86a6", "message": "Write headers just before commit\n\nFixes #13926", "committedDate": "2020-12-17T06:47:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg1MjE2NQ==", "url": "https://github.com/quarkusio/quarkus/pull/13934#discussion_r544852165", "bodyText": "Something tells me this is going to make the formatter angry :)", "author": "geoand", "createdAt": "2020-12-17T06:52:21Z", "path": "extensions/resteasy-reactive/quarkus-resteasy-reactive-servlet/runtime/src/main/java/io/quarkus/resteasy/reactive/server/servlet/runtime/ServletRequestContext.java", "diffHunk": "@@ -57,15 +60,17 @@\n     ServletWriteListener writeListener;\n     byte[] asyncWriteData;\n     Consumer<Throwable> asyncWriteHandler;\n+    protected Consumer<ResteasyReactiveRequestContext> preCommitTask;\n \n     public ServletRequestContext(Deployment deployment, ProvidersImpl providers,\n-            HttpServletRequest request, HttpServletResponse response,\n-            ThreadSetupAction requestContext, ServerRestHandler[] handlerChain, ServerRestHandler[] abortHandlerChain,\n-            RoutingContext context) {\n+                                 HttpServletRequest request, HttpServletResponse response,\n+                                 ThreadSetupAction requestContext, ServerRestHandler[] handlerChain, ServerRestHandler[] abortHandlerChain,\n+                                 RoutingContext context, HttpServerExchange exchange) {", "originalCommit": "75b916adc83d5977a7e7a1add92236a1daee86a6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "76cd5697a2d43a502959cf2a1723d9c4e7ea0ebd", "chunk": "diff --git a/extensions/resteasy-reactive/quarkus-resteasy-reactive-servlet/runtime/src/main/java/io/quarkus/resteasy/reactive/server/servlet/runtime/ServletRequestContext.java b/extensions/resteasy-reactive/quarkus-resteasy-reactive-servlet/runtime/src/main/java/io/quarkus/resteasy/reactive/server/servlet/runtime/ServletRequestContext.java\nindex 95ca0158a8..babee7adfb 100644\n--- a/extensions/resteasy-reactive/quarkus-resteasy-reactive-servlet/runtime/src/main/java/io/quarkus/resteasy/reactive/server/servlet/runtime/ServletRequestContext.java\n+++ b/extensions/resteasy-reactive/quarkus-resteasy-reactive-servlet/runtime/src/main/java/io/quarkus/resteasy/reactive/server/servlet/runtime/ServletRequestContext.java\n\n@@ -63,9 +62,9 @@ public class ServletRequestContext extends ResteasyReactiveRequestContext\n     protected Consumer<ResteasyReactiveRequestContext> preCommitTask;\n \n     public ServletRequestContext(Deployment deployment, ProvidersImpl providers,\n-                                 HttpServletRequest request, HttpServletResponse response,\n-                                 ThreadSetupAction requestContext, ServerRestHandler[] handlerChain, ServerRestHandler[] abortHandlerChain,\n-                                 RoutingContext context, HttpServerExchange exchange) {\n+            HttpServletRequest request, HttpServletResponse response,\n+            ThreadSetupAction requestContext, ServerRestHandler[] handlerChain, ServerRestHandler[] abortHandlerChain,\n+            RoutingContext context, HttpServerExchange exchange) {\n         super(deployment, providers, requestContext, handlerChain, abortHandlerChain);\n         this.request = request;\n         this.response = response;\n"}}, {"oid": "76cd5697a2d43a502959cf2a1723d9c4e7ea0ebd", "url": "https://github.com/quarkusio/quarkus/commit/76cd5697a2d43a502959cf2a1723d9c4e7ea0ebd", "message": "Write headers just before commit\n\nFixes #13926", "committedDate": "2020-12-17T07:12:05Z", "type": "commit"}, {"oid": "76cd5697a2d43a502959cf2a1723d9c4e7ea0ebd", "url": "https://github.com/quarkusio/quarkus/commit/76cd5697a2d43a502959cf2a1723d9c4e7ea0ebd", "message": "Write headers just before commit\n\nFixes #13926", "committedDate": "2020-12-17T07:12:05Z", "type": "forcePushed"}]}