{"pr_number": 9687, "pr_title": "Fix working directory property in quarkusDev task", "pr_createdAt": "2020-05-29T18:48:05Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9687", "timeline": [{"oid": "49c91671f9a55ca4766a977fd0df99e040b20447", "url": "https://github.com/quarkusio/quarkus/commit/49c91671f9a55ca4766a977fd0df99e040b20447", "message": "Fix working directory property in quarkusDev task", "committedDate": "2020-05-30T13:34:42Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkwNzYxNQ==", "url": "https://github.com/quarkusio/quarkus/pull/9687#discussion_r432907615", "bodyText": "Looks like you got it right! Probably a path issue on windows?\nIf it's fully working, perhaps, we shouldn't be deprecating the method.", "author": "aloubyansky", "createdAt": "2020-05-31T04:06:22Z", "path": "devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java", "diffHunk": "@@ -111,9 +111,8 @@ public void setSourceDir(String sourceDir) {\n         this.sourceDir = sourceDir;\n     }\n \n-    @Option(description = \"Set working directory\", option = \"working-dir\")\n-    @Deprecated\n     @Input\n+    @Deprecated\n     // @InputDirectory this breaks kotlin projects, the working dir at this stage will be evaluated to 'classes/java/main' instead of 'classes/kotlin/main'", "originalCommit": "87a7a2aad6fd23d741ca421a6ce72da08e205cef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyODk1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/9687#discussion_r432928952", "bodyText": "@aloubyansky you are right, this is a path issue on windows, I updated the code to use java.io.tmpdir instead.\nUsing the getter to get workingDir instead of accessing it directly fix the issue.", "author": "glefloch", "createdAt": "2020-05-31T09:45:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkwNzYxNQ=="}], "type": "inlineReview", "revised_code": {"commit": "6c33f685ee58cbd08127b7133f782e708a9da3df", "chunk": "diff --git a/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java b/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\nindex 25732f9e7d..5f9f36244e 100644\n--- a/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\n+++ b/devtools/gradle/src/main/java/io/quarkus/gradle/tasks/QuarkusDev.java\n\n@@ -112,13 +112,12 @@ public class QuarkusDev extends QuarkusTask {\n     }\n \n     @Input\n-    @Deprecated\n     // @InputDirectory this breaks kotlin projects, the working dir at this stage will be evaluated to 'classes/java/main' instead of 'classes/kotlin/main'\n-    public String getWorkingDir() {\n+    public File getWorkingDir() {\n         if (workingDir == null) {\n-            return extension().workingDir().toString();\n+            return extension().workingDir();\n         } else {\n-            return workingDir;\n+            return new File(workingDir);\n         }\n     }\n \n"}}, {"oid": "6c33f685ee58cbd08127b7133f782e708a9da3df", "url": "https://github.com/quarkusio/quarkus/commit/6c33f685ee58cbd08127b7133f782e708a9da3df", "message": "Fix working directory property in quarkusDev task", "committedDate": "2020-05-31T06:35:34Z", "type": "commit"}, {"oid": "6c33f685ee58cbd08127b7133f782e708a9da3df", "url": "https://github.com/quarkusio/quarkus/commit/6c33f685ee58cbd08127b7133f782e708a9da3df", "message": "Fix working directory property in quarkusDev task", "committedDate": "2020-05-31T06:35:34Z", "type": "forcePushed"}, {"oid": "39e544a552a837a247afacf64ea61d9fb8bfad03", "url": "https://github.com/quarkusio/quarkus/commit/39e544a552a837a247afacf64ea61d9fb8bfad03", "message": "Fix return type", "committedDate": "2020-05-31T09:37:17Z", "type": "commit"}]}