{"pr_number": 13394, "pr_title": "Configure label in Spring Cloud Config Client extension", "pr_createdAt": "2020-11-20T01:23:18Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13394", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQ4NDAzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13394#discussion_r527484031", "bodyText": "We generally try to avoid having lambdas in code that executes at runtime.\nCan you please replace it with an if statement?", "author": "geoand", "createdAt": "2020-11-20T07:15:59Z", "path": "extensions/spring-cloud-config-client/runtime/src/main/java/io/quarkus/spring/cloud/config/client/runtime/DefaultSpringCloudConfigClientGateway.java", "diffHunk": "@@ -191,6 +191,7 @@ private URI finalURI(String applicationName, String profile) throws URISyntaxExc\n         List<String> finalPathSegments = new ArrayList<>(result.getPathSegments());\n         finalPathSegments.add(applicationName);\n         finalPathSegments.add(profile);\n+        springCloudConfigClientConfig.label.ifPresent(label -> finalPathSegments.add(label));", "originalCommit": "0af981e647f12a3889bb52683e5fd96892c4724c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg1MTU1Nw==", "url": "https://github.com/quarkusio/quarkus/pull/13394#discussion_r527851557", "bodyText": "Okay, replaced the lambda with an if statement.", "author": "pukkaone", "createdAt": "2020-11-20T17:30:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzQ4NDAzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "00a72e62a3b471522ceb6e06f28d87d85d26395a", "chunk": "diff --git a/extensions/spring-cloud-config-client/runtime/src/main/java/io/quarkus/spring/cloud/config/client/runtime/DefaultSpringCloudConfigClientGateway.java b/extensions/spring-cloud-config-client/runtime/src/main/java/io/quarkus/spring/cloud/config/client/runtime/DefaultSpringCloudConfigClientGateway.java\nindex dba1b933ef..3dcea9de62 100644\n--- a/extensions/spring-cloud-config-client/runtime/src/main/java/io/quarkus/spring/cloud/config/client/runtime/DefaultSpringCloudConfigClientGateway.java\n+++ b/extensions/spring-cloud-config-client/runtime/src/main/java/io/quarkus/spring/cloud/config/client/runtime/DefaultSpringCloudConfigClientGateway.java\n\n@@ -191,7 +191,9 @@ class DefaultSpringCloudConfigClientGateway implements SpringCloudConfigClientGa\n         List<String> finalPathSegments = new ArrayList<>(result.getPathSegments());\n         finalPathSegments.add(applicationName);\n         finalPathSegments.add(profile);\n-        springCloudConfigClientConfig.label.ifPresent(label -> finalPathSegments.add(label));\n+        if (springCloudConfigClientConfig.label.isPresent()) {\n+            finalPathSegments.add(springCloudConfigClientConfig.label.get());\n+        }\n         result.setPathSegments(finalPathSegments);\n         return result.build();\n     }\n"}}, {"oid": "00a72e62a3b471522ceb6e06f28d87d85d26395a", "url": "https://github.com/quarkusio/quarkus/commit/00a72e62a3b471522ceb6e06f28d87d85d26395a", "message": "Configure label in Spring Cloud Config Client extension\n\nAdd configuration property quarkus.spring-cloud-config.label to request\na specific label rather than let Spring Cloud Config Server apply a\ndefault label.\n\nFixes #11211", "committedDate": "2020-11-20T17:29:39Z", "type": "commit"}, {"oid": "00a72e62a3b471522ceb6e06f28d87d85d26395a", "url": "https://github.com/quarkusio/quarkus/commit/00a72e62a3b471522ceb6e06f28d87d85d26395a", "message": "Configure label in Spring Cloud Config Client extension\n\nAdd configuration property quarkus.spring-cloud-config.label to request\na specific label rather than let Spring Cloud Config Server apply a\ndefault label.\n\nFixes #11211", "committedDate": "2020-11-20T17:29:39Z", "type": "forcePushed"}]}