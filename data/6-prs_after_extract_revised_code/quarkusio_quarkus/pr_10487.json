{"pr_number": 10487, "pr_title": "Add ability to disable security on a per test basis", "pr_createdAt": "2020-07-06T01:22:38Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10487", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk3OTA5NA==", "url": "https://github.com/quarkusio/quarkus/pull/10487#discussion_r449979094", "bodyText": "Shouldn't this be false?", "author": "geoand", "createdAt": "2020-07-06T04:35:10Z", "path": "test-framework/security/src/main/java/io/quarkus/test/security/QuarkusSecurityTestExtension.java", "diffHunk": "@@ -0,0 +1,61 @@\n+package io.quarkus.test.security;\n+\n+import java.lang.reflect.Method;\n+import java.util.Arrays;\n+import java.util.HashSet;\n+\n+import javax.enterprise.inject.spi.CDI;\n+\n+import io.quarkus.security.runtime.QuarkusPrincipal;\n+import io.quarkus.security.runtime.QuarkusSecurityIdentity;\n+import io.quarkus.test.junit.callback.QuarkusTestAfterEachCallback;\n+import io.quarkus.test.junit.callback.QuarkusTestBeforeEachCallback;\n+import io.quarkus.test.junit.callback.QuarkusTestMethodContext;\n+\n+public class QuarkusSecurityTestExtension implements QuarkusTestBeforeEachCallback, QuarkusTestAfterEachCallback {\n+\n+    @Override\n+    public void afterEach(QuarkusTestMethodContext context) {\n+        CDI.current().select(TestAuthController.class).get().setEnabled(true);", "originalCommit": "e9d1bf44ad662ffe47b0b4c7ff0e5017b821fa5f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk4MDgwMQ==", "url": "https://github.com/quarkusio/quarkus/pull/10487#discussion_r449980801", "bodyText": "No, the default state is for security to be enabled.", "author": "stuartwdouglas", "createdAt": "2020-07-06T04:43:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk3OTA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk4MTk1Ng==", "url": "https://github.com/quarkusio/quarkus/pull/10487#discussion_r449981956", "bodyText": "oops, I just realised that the default was false, so the first test would run with security disabled, I have fixed this.", "author": "stuartwdouglas", "createdAt": "2020-07-06T04:49:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk3OTA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk4NTEwOQ==", "url": "https://github.com/quarkusio/quarkus/pull/10487#discussion_r449985109", "bodyText": "\ud83d\udc4d", "author": "geoand", "createdAt": "2020-07-06T05:04:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk3OTA5NA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk4MDYyOQ==", "url": "https://github.com/quarkusio/quarkus/pull/10487#discussion_r449980629", "bodyText": "I am not sold on the name, but I don't have any better alternatives to offer :(", "author": "geoand", "createdAt": "2020-07-06T04:42:34Z", "path": "test-framework/security/src/main/java/io/quarkus/test/security/TestSecurity.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package io.quarkus.test.security;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+@Retention(RetentionPolicy.RUNTIME)\n+@Target({ ElementType.TYPE, ElementType.METHOD })\n+public @interface TestSecurity {", "originalCommit": "e9d1bf44ad662ffe47b0b4c7ff0e5017b821fa5f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "fa6cede0b8fc295e040b766831c066130be04054", "url": "https://github.com/quarkusio/quarkus/commit/fa6cede0b8fc295e040b766831c066130be04054", "message": "Add ability to disable security on a per test basis\n\nAlso allows for a user to be configured to run the tests\nunder.", "committedDate": "2020-07-06T04:47:45Z", "type": "commit"}, {"oid": "fa6cede0b8fc295e040b766831c066130be04054", "url": "https://github.com/quarkusio/quarkus/commit/fa6cede0b8fc295e040b766831c066130be04054", "message": "Add ability to disable security on a per test basis\n\nAlso allows for a user to be configured to run the tests\nunder.", "committedDate": "2020-07-06T04:47:45Z", "type": "forcePushed"}]}