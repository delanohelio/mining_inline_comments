{"pr_number": 6467, "pr_title": "Qute parser - improve error messages", "pr_createdAt": "2020-01-08T21:00:59Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6467", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYwMzg0NQ==", "url": "https://github.com/quarkusio/quarkus/pull/6467#discussion_r364603845", "bodyText": "I think you shouldn't throw the exception in this method. You should return it and throw it in the caller.\nThis way, IDEs can analyze properly the flow of the methods.", "author": "gsmet", "createdAt": "2020-01-09T08:13:48Z", "path": "independent-projects/qute/core/src/main/java/io/quarkus/qute/Parser.java", "diffHunk": "@@ -331,13 +337,23 @@ private void flushTag() {\n             typeInfos.put(key, \"[\" + value + \"]\");\n \n         } else {\n-            sectionBlockStack.peek()\n-                    .addNode(new ExpressionNode(apply(content), engine, new OriginImpl(line, templateId, variant)));\n+            sectionBlockStack.peek().addNode(new ExpressionNode(apply(content), engine, origin()));\n         }\n         this.buffer = new StringBuilder();\n     }\n \n-    private void processParams(String label, Iterator<String> iter) {\n+    private void parserError(String message) {\n+        StringBuilder builder = new StringBuilder(\"Parser error\");\n+        if (!id.equals(generatedId)) {\n+            builder.append(\" in template [\").append(id).append(\"]\");\n+        }\n+        builder.append(\" on line \").append(line).append(\": \")\n+                .append(message);\n+        throw new TemplateException(origin(),", "originalCommit": "22bd4aecd8b9fa2ea61fbd2736e54c75d4e32b26", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYwNjg2Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6467#discussion_r364606862", "bodyText": "Ok, I can modify the method. No problem.", "author": "mkouba", "createdAt": "2020-01-09T08:22:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYwMzg0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYwODMyNg==", "url": "https://github.com/quarkusio/quarkus/pull/6467#discussion_r364608326", "bodyText": "Cool thanks. I already was bitten by this, totally missing a coding error because the IDE was unable to tell me some part of the code was unreachable.", "author": "gsmet", "createdAt": "2020-01-09T08:26:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYwMzg0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "3829da58738274e066b7ff72c3e056afcfeb9a12", "chunk": "diff --git a/independent-projects/qute/core/src/main/java/io/quarkus/qute/Parser.java b/independent-projects/qute/core/src/main/java/io/quarkus/qute/Parser.java\nindex 901722bde5..dedc5bd400 100644\n--- a/independent-projects/qute/core/src/main/java/io/quarkus/qute/Parser.java\n+++ b/independent-projects/qute/core/src/main/java/io/quarkus/qute/Parser.java\n\n@@ -342,14 +342,14 @@ class Parser implements Function<String, Expression> {\n         this.buffer = new StringBuilder();\n     }\n \n-    private void parserError(String message) {\n+    private TemplateException parserError(String message) {\n         StringBuilder builder = new StringBuilder(\"Parser error\");\n         if (!id.equals(generatedId)) {\n             builder.append(\" in template [\").append(id).append(\"]\");\n         }\n         builder.append(\" on line \").append(line).append(\": \")\n                 .append(message);\n-        throw new TemplateException(origin(),\n+        return new TemplateException(origin(),\n                 builder.toString());\n     }\n \n"}}, {"oid": "3829da58738274e066b7ff72c3e056afcfeb9a12", "url": "https://github.com/quarkusio/quarkus/commit/3829da58738274e066b7ff72c3e056afcfeb9a12", "message": "Qute parser - improve error messages\n\n- resolves #6164", "committedDate": "2020-01-09T08:25:35Z", "type": "forcePushed"}, {"oid": "339b22ee52ca5e35dd6aad1233902d0c1fc17b0a", "url": "https://github.com/quarkusio/quarkus/commit/339b22ee52ca5e35dd6aad1233902d0c1fc17b0a", "message": "Qute parser - improve error messages\n\n- resolves #6164", "committedDate": "2020-01-09T08:50:32Z", "type": "forcePushed"}, {"oid": "4024571bd40257fab37f54c769042ba581a0a01d", "url": "https://github.com/quarkusio/quarkus/commit/4024571bd40257fab37f54c769042ba581a0a01d", "message": "Qute parser - improve error messages\n\n- resolves #6164", "committedDate": "2020-01-09T09:31:23Z", "type": "commit"}, {"oid": "4024571bd40257fab37f54c769042ba581a0a01d", "url": "https://github.com/quarkusio/quarkus/commit/4024571bd40257fab37f54c769042ba581a0a01d", "message": "Qute parser - improve error messages\n\n- resolves #6164", "committedDate": "2020-01-09T09:31:23Z", "type": "forcePushed"}]}