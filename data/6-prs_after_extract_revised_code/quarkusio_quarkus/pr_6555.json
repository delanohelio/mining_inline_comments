{"pr_number": 6555, "pr_title": "ObjectStoreEnvironmentBean.getObjectStore should not cache the user.home during build-time", "pr_createdAt": "2020-01-14T17:35:42Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6555", "timeline": [{"oid": "5dce48f990c1f814750846aab184e495010f021c", "url": "https://github.com/quarkusio/quarkus/commit/5dce48f990c1f814750846aab184e495010f021c", "message": "ObjectStoreEnvironmentBean.getObjectStore should not cache the user.home during build-time\n\nFixes #6553", "committedDate": "2020-01-14T17:34:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5ODQ1Ng==", "url": "https://github.com/quarkusio/quarkus/pull/6555#discussion_r366498456", "bodyText": "Are we sure this won't be cache this at build time?", "author": "cescoffier", "createdAt": "2020-01-14T18:23:13Z", "path": "extensions/narayana-stm/runtime/src/main/java/io/quarkus/narayana/stm/runtime/ObjectStoreEnvironmentBeanSubstitution.java", "diffHunk": "@@ -0,0 +1,18 @@\n+package io.quarkus.narayana.stm.runtime;\n+\n+import java.io.File;\n+\n+import com.oracle.svm.core.annotate.Substitute;\n+import com.oracle.svm.core.annotate.TargetClass;\n+\n+@TargetClass(className = \"com.arjuna.ats.arjuna.common.ObjectStoreEnvironmentBean\")\n+public final class ObjectStoreEnvironmentBeanSubstitution {\n+\n+    /**\n+     * @return fixed ObjectStore path resolved during runtime\n+     */\n+    @Substitute\n+    public String getObjectStoreDir() {\n+        return System.getProperty(\"user.home\") + File.separator + \"ObjectStore\";", "originalCommit": "5dce48f990c1f814750846aab184e495010f021c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxMzU5Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6555#discussion_r366713592", "bodyText": "Are you afraid that the System.getProperty(\"user.home\") is cached at build time?", "author": "geoand", "createdAt": "2020-01-15T06:33:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5ODQ1Ng=="}], "type": "inlineReview", "revised_code": null}]}