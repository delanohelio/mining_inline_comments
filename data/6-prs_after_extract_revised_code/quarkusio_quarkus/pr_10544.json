{"pr_number": 10544, "pr_title": "Filter out Netty DEBUG level exceptions", "pr_createdAt": "2020-07-08T01:22:07Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10544", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2NjU2NQ==", "url": "https://github.com/quarkusio/quarkus/pull/10544#discussion_r451266565", "bodyText": "Should we include sun.misc.Unsafe too (I see some log messages in that class with this string)?", "author": "jaikiran", "createdAt": "2020-07-08T03:49:31Z", "path": "extensions/netty/deployment/src/main/java/io/quarkus/netty/deployment/NettyProcessor.java", "diffHunk": "@@ -243,4 +246,12 @@ RuntimeInitializedClassBuildItem runtimeInitBcryptUtil() {\n         // this holds a direct allocated byte buffer that needs to be initialised at run time\n         return new RuntimeInitializedClassBuildItem(EmptyByteBufStub.class.getName());\n     }\n+\n+    //if debug logging is enabled netty logs lots of exceptions\n+    //see https://github.com/quarkusio/quarkus/issues/5213\n+    @BuildStep\n+    LogCleanupFilterBuildItem cleanup() {\n+        return new LogCleanupFilterBuildItem(PlatformDependent.class.getName() + \"0\", Level.TRACE, \"direct buffer constructor\",\n+                \"jdk.internal.misc.Unsafe\");", "originalCommit": "89254c01509e06569ac02403b00ee91565f15218", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM0NTU2OA==", "url": "https://github.com/quarkusio/quarkus/pull/10544#discussion_r451345568", "bodyText": "Done", "author": "stuartwdouglas", "createdAt": "2020-07-08T07:42:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2NjU2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "42637b83ad9dcaf8521f9b4ba8e83bc1781bb4a3", "chunk": "diff --git a/extensions/netty/deployment/src/main/java/io/quarkus/netty/deployment/NettyProcessor.java b/extensions/netty/deployment/src/main/java/io/quarkus/netty/deployment/NettyProcessor.java\nindex c90fd52205..91aa1cc67e 100644\n--- a/extensions/netty/deployment/src/main/java/io/quarkus/netty/deployment/NettyProcessor.java\n+++ b/extensions/netty/deployment/src/main/java/io/quarkus/netty/deployment/NettyProcessor.java\n\n@@ -252,6 +252,6 @@ class NettyProcessor {\n     @BuildStep\n     LogCleanupFilterBuildItem cleanup() {\n         return new LogCleanupFilterBuildItem(PlatformDependent.class.getName() + \"0\", Level.TRACE, \"direct buffer constructor\",\n-                \"jdk.internal.misc.Unsafe\");\n+                \"jdk.internal.misc.Unsafe\", \"sun.misc.Unsafe\");\n     }\n }\n"}}, {"oid": "42637b83ad9dcaf8521f9b4ba8e83bc1781bb4a3", "url": "https://github.com/quarkusio/quarkus/commit/42637b83ad9dcaf8521f9b4ba8e83bc1781bb4a3", "message": "Filter out Netty DEBUG level exceptions\n\nWe have had various reports about these so this\ndrops them to TRACE level.\n\nFixes #5213", "committedDate": "2020-07-08T07:41:46Z", "type": "commit"}, {"oid": "42637b83ad9dcaf8521f9b4ba8e83bc1781bb4a3", "url": "https://github.com/quarkusio/quarkus/commit/42637b83ad9dcaf8521f9b4ba8e83bc1781bb4a3", "message": "Filter out Netty DEBUG level exceptions\n\nWe have had various reports about these so this\ndrops them to TRACE level.\n\nFixes #5213", "committedDate": "2020-07-08T07:41:46Z", "type": "forcePushed"}]}