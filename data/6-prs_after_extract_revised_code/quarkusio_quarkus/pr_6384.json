{"pr_number": 6384, "pr_title": "Properly initialize Maven profile options during bootstrap", "pr_createdAt": "2020-01-02T16:54:10Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6384", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU0Njc2OQ==", "url": "https://github.com/quarkusio/quarkus/pull/6384#discussion_r362546769", "bodyText": "I didn't perform a ((String) o).split(\",\"); here because the code that uses the returned array does that already, but I am wondering if it should be done here in addition in case for uses of this method are introduced later on...", "author": "geoand", "createdAt": "2020-01-02T16:55:17Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/options/BootstrapMavenOptions.java", "diffHunk": "@@ -90,7 +90,14 @@ public String getOptionValue(String name) {\n \n     public String[] getOptionValues(String name) {\n         final Object o = options.get(name);\n-        return o == null ? null : (String[]) o;\n+        if (o == null) {\n+            return null;\n+        } else if (o instanceof String[]) {\n+            return (String[]) o;\n+        } else if (o instanceof String) {\n+            return new String[]{(String)o};", "originalCommit": "62df3f1392b8d1f1d4815b05f1a4d95a0ddbf22d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8f0d1587609fd1d055caaa92bce99f70998b20b3", "chunk": "diff --git a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/options/BootstrapMavenOptions.java b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/options/BootstrapMavenOptions.java\nindex 6231dab283..8aeb6ff853 100644\n--- a/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/options/BootstrapMavenOptions.java\n+++ b/independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/resolver/maven/options/BootstrapMavenOptions.java\n\n@@ -90,14 +90,7 @@ public class BootstrapMavenOptions {\n \n     public String[] getOptionValues(String name) {\n         final Object o = options.get(name);\n-        if (o == null) {\n-            return null;\n-        } else if (o instanceof String[]) {\n-            return (String[]) o;\n-        } else if (o instanceof String) {\n-            return new String[]{(String)o};\n-        }\n-        throw new IllegalArgumentException(\"Could not handle type \" + o.getClass().getName() + \" for option: '\" + name + \"'\");\n+        return o == null ? null : (String[]) o;\n     }\n \n     public boolean isEmpty() {\n"}}, {"oid": "8ad60c7fadd1247335c0fe1281ee93de3646f1cb", "url": "https://github.com/quarkusio/quarkus/commit/8ad60c7fadd1247335c0fe1281ee93de3646f1cb", "message": "Parse Maven options without assuming they are String[]\n\nFixes: #6383\n\nCo-Authored-By: George Gastaldi <gegastaldi@gmail.com>", "committedDate": "2020-01-02T17:33:12Z", "type": "forcePushed"}, {"oid": "8f0d1587609fd1d055caaa92bce99f70998b20b3", "url": "https://github.com/quarkusio/quarkus/commit/8f0d1587609fd1d055caaa92bce99f70998b20b3", "message": "Properly initialize Maven profile options during bootstrap\n\nFixes: #6383", "committedDate": "2020-01-02T19:19:08Z", "type": "commit"}, {"oid": "8f0d1587609fd1d055caaa92bce99f70998b20b3", "url": "https://github.com/quarkusio/quarkus/commit/8f0d1587609fd1d055caaa92bce99f70998b20b3", "message": "Properly initialize Maven profile options during bootstrap\n\nFixes: #6383", "committedDate": "2020-01-02T19:19:08Z", "type": "forcePushed"}]}