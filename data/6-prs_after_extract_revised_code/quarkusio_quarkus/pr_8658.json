{"pr_number": 8658, "pr_title": "Rename OIDC expiration-grace property to lifespan-grace", "pr_createdAt": "2020-04-17T16:13:19Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/8658", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMyNjczNA==", "url": "https://github.com/quarkusio/quarkus/pull/8658#discussion_r410326734", "bodyText": "Oops, one sec", "author": "sberyozkin", "createdAt": "2020-04-17T16:14:45Z", "path": "extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java", "diffHunk": "@@ -557,11 +560,11 @@ public void setAudience(List<String> audience) {\n         }\n \n         public Optional<Integer> getExpirationGrace() {", "originalCommit": "bfb60f693aca6bec52f9b3f76bee808f2c6802cf", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "chunk": "diff --git a/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java b/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java\nindex 0f4df70f31..260d699c86 100644\n--- a/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java\n+++ b/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java\n\n@@ -559,12 +559,12 @@ public class OidcTenantConfig {\n             this.audience = Optional.of(audience);\n         }\n \n-        public Optional<Integer> getExpirationGrace() {\n+        public Optional<Integer> getLifespanGrace() {\n             return lifespanGrace;\n         }\n \n-        public void setExpirationGrace(int expirationGrace) {\n-            this.lifespanGrace = Optional.of(expirationGrace);\n+        public void setLifespanGrace(int lifespanGrace) {\n+            this.lifespanGrace = Optional.of(lifespanGrace);\n         }\n \n         public Optional<String> getPrincipalClaim() {\n"}}, {"oid": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "url": "https://github.com/quarkusio/quarkus/commit/001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "message": "Rename OIDC expiration-grace property to lifespan-grace", "committedDate": "2020-04-17T16:38:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIwMDk0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/8658#discussion_r411200942", "bodyText": "Call me dumb, but this is really hard to understand :-) What about:\nLife span grace period in seconds.\nWhen checking token expiry, current time is allowed to be later than token expiration time by at most the configured number of seconds.\nWhen checking token issuance, current time is allowed to be sooner than token issue time by at most the configured number of seconds.\n\n?", "author": "Ladicek", "createdAt": "2020-04-20T08:43:54Z", "path": "extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java", "diffHunk": "@@ -527,11 +527,14 @@ public static Token fromAudience(String... audience) {\n         public Optional<List<String>> audience = Optional.empty();\n \n         /**\n-         * Expiration grace period in seconds. A token expiration time will be reduced by\n-         * the value of this property before being compared to the current time.\n+         * Life span grace period in seconds.\n+         * Token expiration time will be expected to be in the future relative to a difference between the current time and the\n+         * value of this property\n+         * while the issued at time will be expected to be in the past relative to a sum of the current time and the value of\n+         * this property.", "originalCommit": "001e542e266e08b7e59e6cd1b4e39914c9e57e5b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "chunk": "diff --git a/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java b/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java\nindex 260d699c86..3229cb8f41 100644\n--- a/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java\n+++ b/extensions/oidc/runtime/src/main/java/io/quarkus/oidc/OidcTenantConfig.java\n\n@@ -528,10 +590,10 @@ public class OidcTenantConfig {\n \n         /**\n          * Life span grace period in seconds.\n-         * Token expiration time will be expected to be in the future relative to a difference between the current time and the\n-         * value of this property\n-         * while the issued at time will be expected to be in the past relative to a sum of the current time and the value of\n-         * this property.\n+         * When checking token expiry, current time is allowed to be later than token expiration time by at most the configured\n+         * number of seconds.\n+         * When checking token issuance, current time is allowed to be sooner than token issue time by at most the configured\n+         * number of seconds.\n          */\n         @ConfigItem\n         public Optional<Integer> lifespanGrace = Optional.empty();\n"}}, {"oid": "0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "url": "https://github.com/quarkusio/quarkus/commit/0370e0acc7e2c63eb7e12f5da4a5225914ebe87f", "message": "Rename OIDC expiration-grace property to lifespan-grace", "committedDate": "2020-04-20T13:47:37Z", "type": "forcePushed"}, {"oid": "96d11f492f774b24a183cebc67fc4abc265d4d0e", "url": "https://github.com/quarkusio/quarkus/commit/96d11f492f774b24a183cebc67fc4abc265d4d0e", "message": "Rename OIDC expiration-grace property to lifespan-grace", "committedDate": "2020-04-20T17:42:42Z", "type": "commit"}, {"oid": "96d11f492f774b24a183cebc67fc4abc265d4d0e", "url": "https://github.com/quarkusio/quarkus/commit/96d11f492f774b24a183cebc67fc4abc265d4d0e", "message": "Rename OIDC expiration-grace property to lifespan-grace", "committedDate": "2020-04-20T17:42:42Z", "type": "forcePushed"}]}