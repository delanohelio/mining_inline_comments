{"pr_number": 1131, "pr_title": "whitelist -> allowlist and on-chain -> onchain", "pr_createdAt": "2020-06-22T22:17:27Z", "pr_url": "https://github.com/hyperledger/besu/pull/1131", "timeline": [{"oid": "78a41153a434cc9393bb9a61bd7102a82a946c9b", "url": "https://github.com/hyperledger/besu/commit/78a41153a434cc9393bb9a61bd7102a82a946c9b", "message": "whitelist -> allowlist and on-chain -> onchain\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-06-22T22:15:31Z", "type": "commit"}, {"oid": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "url": "https://github.com/hyperledger/besu/commit/02a308ad27ae0f50cb7518cc19906618b3f3c632", "message": "Merge branch 'master' of https://github.com/hyperledger/besu into whitelist-more", "committedDate": "2020-06-22T22:15:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MjUwNg==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443872506", "bodyText": "Variable name.", "author": "mark-terry", "createdAt": "2020-06-22T23:07:38Z", "path": "ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermRemoveAccountsFromAllowlistTest.java", "diffHunk": "@@ -71,7 +71,7 @@ public void whenAccountsAreRemovedFromWhitelistShouldReturnSuccess() {\n   @Test\n   public void whenAccountIsInvalidShouldReturnInvalidAccountErrorResponse() {\n     JsonRpcResponse expectedResponse =\n-        new JsonRpcErrorResponse(null, JsonRpcError.ACCOUNT_WHITELIST_INVALID_ENTRY);\n+        new JsonRpcErrorResponse(null, JsonRpcError.ACCOUNT_ALLOWLIST_INVALID_ENTRY);\n     when(accountWhitelist.removeAccounts(any()))", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ca545e084cb76081efcd9065c532ebd370fe9f02", "chunk": "diff --git a/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermRemoveAccountsFromAllowlistTest.java b/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermRemoveAccountsFromAllowlistTest.java\nindex e53b31f897..995ecbe010 100644\n--- a/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermRemoveAccountsFromAllowlistTest.java\n+++ b/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermRemoveAccountsFromAllowlistTest.java\n\n@@ -72,7 +72,7 @@ public class PermRemoveAccountsFromAllowlistTest {\n   public void whenAccountIsInvalidShouldReturnInvalidAccountErrorResponse() {\n     JsonRpcResponse expectedResponse =\n         new JsonRpcErrorResponse(null, JsonRpcError.ACCOUNT_ALLOWLIST_INVALID_ENTRY);\n-    when(accountWhitelist.removeAccounts(any()))\n+    when(accountAllowlist.removeAccounts(any()))\n         .thenReturn(AllowlistOperationResult.ERROR_INVALID_ENTRY);\n \n     JsonRpcResponse actualResponse = method.response(request(new ArrayList<>()));\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3Mjc2Nw==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443872767", "bodyText": "Class name.", "author": "mark-terry", "createdAt": "2020-06-22T23:08:25Z", "path": "ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermRemoveNodesFromAllowlistTest.java", "diffHunk": "@@ -90,7 +90,7 @@ public void shouldThrowInvalidJsonRpcParametersExceptionWhenEmptyList() {\n     final JsonRpcRequestContext request = buildRequest(Lists.emptyList());\n     final JsonRpcResponse expected =\n         new JsonRpcErrorResponse(\n-            request.getRequest().getId(), JsonRpcError.NODE_WHITELIST_EMPTY_ENTRY);\n+            request.getRequest().getId(), JsonRpcError.NODE_ALLOWLIST_EMPTY_ENTRY);\n \n     when(nodeLocalConfigPermissioningController.removeNodes(eq(Lists.emptyList())))\n         .thenReturn(new NodesWhitelistResult(AllowlistOperationResult.ERROR_EMPTY_ENTRY));", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3NjQwMw==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443876403", "bodyText": "Method name.", "author": "mark-terry", "createdAt": "2020-06-22T23:20:31Z", "path": "ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java", "diffHunk": "@@ -55,7 +55,7 @@ public void getNameShouldReturnExpectedName() {\n   @Test\n   public void shouldReturnExpectedListOfAccountsWhenWhitelistHasBeenSet() {", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e66b0bfef86242245d6f7316656dd26c92d65146", "chunk": "diff --git a/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java b/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java\nindex 2b060c6873..eaeaee4f34 100644\n--- a/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java\n+++ b/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java\n\n@@ -53,9 +53,9 @@ public class PermGetAccountsAllowlistTest {\n   }\n \n   @Test\n-  public void shouldReturnExpectedListOfAccountsWhenWhitelistHasBeenSet() {\n+  public void shouldReturnExpectedListOfAccountsWhenAllowlistHasBeenSet() {\n     List<String> accountsList = Arrays.asList(\"0x0\", \"0x1\");\n-    when(accountWhitelist.getAccountAllowlist()).thenReturn(accountsList);\n+    when(accountAllowlist.getAccountAllowlist()).thenReturn(accountsList);\n     JsonRpcResponse expectedResponse = new JsonRpcSuccessResponse(null, accountsList);\n \n     JsonRpcResponse actualResponse = method.response(request);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3NjQ2Ng==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443876466", "bodyText": "Method name.", "author": "mark-terry", "createdAt": "2020-06-22T23:20:41Z", "path": "ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java", "diffHunk": "@@ -66,7 +66,7 @@ public void shouldReturnExpectedListOfAccountsWhenWhitelistHasBeenSet() {\n   @Test\n   public void shouldReturnEmptyListOfAccountsWhenWhitelistHasBeenSetAndIsEmpty() {", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e66b0bfef86242245d6f7316656dd26c92d65146", "chunk": "diff --git a/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java b/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java\nindex 2b060c6873..eaeaee4f34 100644\n--- a/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java\n+++ b/ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermGetAccountsAllowlistTest.java\n\n@@ -64,9 +64,9 @@ public class PermGetAccountsAllowlistTest {\n   }\n \n   @Test\n-  public void shouldReturnEmptyListOfAccountsWhenWhitelistHasBeenSetAndIsEmpty() {\n+  public void shouldReturnEmptyListOfAccountsWhenAllowlistHasBeenSetAndIsEmpty() {\n     List<String> emptyAccountsList = new ArrayList<>();\n-    when(accountWhitelist.getAccountAllowlist()).thenReturn(emptyAccountsList);\n+    when(accountAllowlist.getAccountAllowlist()).thenReturn(emptyAccountsList);\n     JsonRpcResponse expectedResponse = new JsonRpcSuccessResponse(null, emptyAccountsList);\n \n     JsonRpcResponse actualResponse = method.response(request);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg4MTMxMA==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443881310", "bodyText": "Variable name.", "author": "mark-terry", "createdAt": "2020-06-22T23:38:09Z", "path": "ethereum/api/src/test/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/methods/permissioning/PermAddAccountsToAllowlistTest.java", "diffHunk": "@@ -70,7 +70,7 @@ public void whenAccountsAreAddedToWhitelistShouldReturnSuccess() {\n   @Test\n   public void whenAccountIsInvalidShouldReturnInvalidAccountErrorResponse() {\n     JsonRpcResponse expectedResponse =\n-        new JsonRpcErrorResponse(null, JsonRpcError.ACCOUNT_WHITELIST_INVALID_ENTRY);\n+        new JsonRpcErrorResponse(null, JsonRpcError.ACCOUNT_ALLOWLIST_INVALID_ENTRY);\n     when(accountWhitelist.addAccounts(any()))", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg4MTc5MA==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443881790", "bodyText": "Does this message need to be updated?", "author": "mark-terry", "createdAt": "2020-06-22T23:39:42Z", "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/privacy/methods/privx/PrivxFindOnChainPrivacyGroup.java", "diffHunk": "@@ -68,11 +68,11 @@ public JsonRpcResponse response(final JsonRpcRequestContext requestContext) {\n     } catch (final MultiTenancyValidationException e) {\n       LOG.error(\"Unauthorized privacy multi-tenancy rpc request. {}\", e.getMessage());\n       return new JsonRpcErrorResponse(\n-          requestContext.getRequest().getId(), FIND_ON_CHAIN_PRIVACY_GROUP_ERROR);\n+          requestContext.getRequest().getId(), FIND_ONCHAIN_PRIVACY_GROUP_ERROR);\n     } catch (final Exception e) {\n       LOG.error(\"Failed to fetch on chain privacy group\", e);", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg5NzU4NA==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443897584", "bodyText": "\"allowlisting\" or \"allowlist\" ?", "author": "mark-terry", "createdAt": "2020-06-23T00:36:35Z", "path": "ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/internal/response/JsonRpcError.java", "diffHunk": "@@ -77,32 +77,32 @@\n   PARENT_BLOCK_NOT_FOUND(-32000, \"Parent block not found\"),\n \n   // Permissioning/Account allowlist errors\n-  ACCOUNT_WHITELIST_NOT_ENABLED(-32000, \"Account allowlisting has not been enabled\"),\n-  ACCOUNT_WHITELIST_EMPTY_ENTRY(-32000, \"Request contains an empty list of accounts\"),\n-  ACCOUNT_WHITELIST_INVALID_ENTRY(-32000, \"Request contains an invalid account\"),\n-  ACCOUNT_WHITELIST_DUPLICATED_ENTRY(-32000, \"Request contains duplicate accounts\"),\n-  ACCOUNT_WHITELIST_EXISTING_ENTRY(-32000, \"Cannot add an existing account to allowlist\"),\n-  ACCOUNT_WHITELIST_ABSENT_ENTRY(-32000, \"Cannot remove an absent account from allowlist\"),\n+  ACCOUNT_ALLOWLIST_NOT_ENABLED(-32000, \"Account allowlisting has not been enabled\"),\n+  ACCOUNT_ALLOWLIST_EMPTY_ENTRY(-32000, \"Request contains an empty list of accounts\"),\n+  ACCOUNT_ALLOWLIST_INVALID_ENTRY(-32000, \"Request contains an invalid account\"),\n+  ACCOUNT_ALLOWLIST_DUPLICATED_ENTRY(-32000, \"Request contains duplicate accounts\"),\n+  ACCOUNT_ALLOWLIST_EXISTING_ENTRY(-32000, \"Cannot add an existing account to allowlist\"),\n+  ACCOUNT_ALLOWLIST_ABSENT_ENTRY(-32000, \"Cannot remove an absent account from allowlist\"),\n \n   // Permissioning/Node allowlist errors\n-  NODE_WHITELIST_NOT_ENABLED(-32000, \"Node allowlisting has not been enabled\"),\n-  NODE_WHITELIST_EMPTY_ENTRY(-32000, \"Request contains an empty list of nodes\"),\n-  NODE_WHITELIST_INVALID_ENTRY(-32000, \"Request contains an invalid node\"),\n-  NODE_WHITELIST_DUPLICATED_ENTRY(-32000, \"Request contains duplicate nodes\"),\n-  NODE_WHITELIST_EXISTING_ENTRY(-32000, \"Cannot add an existing node to allowlist\"),\n-  NODE_WHITELIST_MISSING_ENTRY(-32000, \"Cannot remove an absent node from allowlist\"),\n-  NODE_WHITELIST_FIXED_NODE_CANNOT_BE_REMOVED(\n+  NODE_ALLOWLIST_NOT_ENABLED(-32000, \"Node allowlisting has not been enabled\"),", "originalCommit": "02a308ad27ae0f50cb7518cc19906618b3f3c632", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk0ODY4Nw==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443948687", "bodyText": "I do not have a strong opinion on this", "author": "macfarla", "createdAt": "2020-06-23T04:03:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg5NzU4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk2ODI5Mg==", "url": "https://github.com/hyperledger/besu/pull/1131#discussion_r443968292", "bodyText": "ok we're deciding that allowlist is a noun not a verb. but changes will come in a new PR", "author": "macfarla", "createdAt": "2020-06-23T05:22:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg5NzU4NA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "ca545e084cb76081efcd9065c532ebd370fe9f02", "url": "https://github.com/hyperledger/besu/commit/ca545e084cb76081efcd9065c532ebd370fe9f02", "message": "more whitelist occurrences\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-06-23T03:13:27Z", "type": "commit"}, {"oid": "e66b0bfef86242245d6f7316656dd26c92d65146", "url": "https://github.com/hyperledger/besu/commit/e66b0bfef86242245d6f7316656dd26c92d65146", "message": "more whitelist occurrences\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-06-23T03:17:21Z", "type": "commit"}, {"oid": "a892a9db07e099b13ef108617aad1162754f1604", "url": "https://github.com/hyperledger/besu/commit/a892a9db07e099b13ef108617aad1162754f1604", "message": "more whitelist occurrences\n\nSigned-off-by: Sally MacFarlane <sally.macfarlane@consensys.net>", "committedDate": "2020-06-23T04:10:03Z", "type": "commit"}]}