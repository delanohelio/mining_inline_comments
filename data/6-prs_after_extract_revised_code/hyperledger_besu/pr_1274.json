{"pr_number": 1274, "pr_title": "[877] Updated multi-tenancy privacy to check onchain groups.", "pr_createdAt": "2020-08-03T23:09:42Z", "pr_url": "https://github.com/hyperledger/besu/pull/1274", "timeline": [{"oid": "87fa8fca1aa2b7f1ad4831aae68197969937ac91", "url": "https://github.com/hyperledger/besu/commit/87fa8fca1aa2b7f1ad4831aae68197969937ac91", "message": "[877] Updated multi-tenancy privacy to check onchain groups.\n\nSigned-off-by: Mark Terry <mark.terry@consensys.net>", "committedDate": "2020-08-03T23:08:27Z", "type": "commit"}, {"oid": "1c4fc100b406bccfe322988af46a433b912847b6", "url": "https://github.com/hyperledger/besu/commit/1c4fc100b406bccfe322988af46a433b912847b6", "message": "Merge branch 'master' into 877", "committedDate": "2020-08-03T23:18:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczNzQ4Mg==", "url": "https://github.com/hyperledger/besu/pull/1274#discussion_r464737482", "bodyText": "Need to review whether these checks should be in this class at all.", "author": "mark-terry", "createdAt": "2020-08-04T00:53:20Z", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/privacy/DefaultPrivacyController.java", "diffHunk": "@@ -515,4 +516,22 @@ public void verifyPrivacyGroupContainsEnclavePublicKey(\n       final String privacyGroupId, final String enclavePublicKey) {", "originalCommit": "1c4fc100b406bccfe322988af46a433b912847b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc0ODA3MQ==", "url": "https://github.com/hyperledger/besu/pull/1274#discussion_r464748071", "bodyText": "would be good to have some unit tests for this class", "author": "macfarla", "createdAt": "2020-08-04T01:34:25Z", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/privacy/OnchainPrivacyGroupContract.java", "diffHunk": "@@ -0,0 +1,115 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.ethereum.privacy;\n+\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_PARTICIPANTS_METHOD_SIGNATURE;\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_VERSION_METHOD_SIGNATURE;\n+\n+import org.hyperledger.besu.enclave.types.PrivacyGroup;\n+import org.hyperledger.besu.ethereum.core.Address;\n+import org.hyperledger.besu.ethereum.core.Hash;\n+import org.hyperledger.besu.ethereum.core.Wei;\n+import org.hyperledger.besu.ethereum.privacy.PrivateTransactionProcessor.Result;\n+import org.hyperledger.besu.ethereum.rlp.RLP;\n+import org.hyperledger.besu.ethereum.rlp.RLPInput;\n+import org.hyperledger.besu.ethereum.transaction.CallParameter;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import org.apache.tuweni.bytes.Bytes;\n+import org.apache.tuweni.bytes.Bytes32;\n+import org.apache.tuweni.units.bigints.UInt256;\n+\n+/*\n+ This contract is an abstraction on top of the privacy group management smart contract.\n+ TODO: there are a few places on OnChainPrivacyPrecompiledContract that we could use this class instead of a transaction simulator there.\n+*/\n+public class OnchainPrivacyGroupContract {", "originalCommit": "1c4fc100b406bccfe322988af46a433b912847b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc0ODQ5NA==", "url": "https://github.com/hyperledger/besu/pull/1274#discussion_r464748494", "bodyText": "should these signatures just be in this class?", "author": "macfarla", "createdAt": "2020-08-04T01:36:02Z", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/privacy/OnchainPrivacyGroupContract.java", "diffHunk": "@@ -0,0 +1,115 @@\n+/*\n+ * Copyright ConsenSys AG.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+ * an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+package org.hyperledger.besu.ethereum.privacy;\n+\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_PARTICIPANTS_METHOD_SIGNATURE;\n+import static org.hyperledger.besu.ethereum.privacy.group.OnChainGroupManagement.GET_VERSION_METHOD_SIGNATURE;", "originalCommit": "1c4fc100b406bccfe322988af46a433b912847b6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "c41ea0270a6d60a794b70ecf0c665b1c92ed46e5", "url": "https://github.com/hyperledger/besu/commit/c41ea0270a6d60a794b70ecf0c665b1c92ed46e5", "message": "Merge branch 'master' into 877", "committedDate": "2020-08-04T21:57:13Z", "type": "commit"}]}