{"pr_number": 61, "pr_title": "Add patchwork-recipes and implement IShapedRecipe", "pr_createdAt": "2020-04-24T01:34:37Z", "pr_url": "https://github.com/PatchworkMC/patchwork-api/pull/61", "timeline": [{"oid": "c59ede6a0a743c8934341a28e35272fb14b37640", "url": "https://github.com/PatchworkMC/patchwork-api/commit/c59ede6a0a743c8934341a28e35272fb14b37640", "message": "Implement IShapedRecipe and add new module patchwork-recipes", "committedDate": "2020-04-24T01:30:13Z", "type": "commit"}, {"oid": "b020b67e7391164a458976ae0ea00ff44b8c9f14", "url": "https://github.com/PatchworkMC/patchwork-api/commit/b020b67e7391164a458976ae0ea00ff44b8c9f14", "message": "Implement IShapedRecipe and add new module patchwork-recipes", "committedDate": "2020-04-24T01:32:06Z", "type": "commit"}, {"oid": "a026906ed98df83dd0ecd3c4bd5e0cfcba88e7fd", "url": "https://github.com/PatchworkMC/patchwork-api/commit/a026906ed98df83dd0ecd3c4bd5e0cfcba88e7fd", "message": "Annotation Scanning", "committedDate": "2020-04-25T03:23:05Z", "type": "commit"}, {"oid": "b36fc8bac5a127c8b67c44f5b343441556a67391", "url": "https://github.com/PatchworkMC/patchwork-api/commit/b36fc8bac5a127c8b67c44f5b343441556a67391", "message": "Revert \"Annotation Scanning\"\n\nThis reverts commit a026906ed98df83dd0ecd3c4bd5e0cfcba88e7fd.", "committedDate": "2020-04-29T12:19:43Z", "type": "commit"}, {"oid": "7e1c4e0100fc53545bab994978a8b7706493e9f0", "url": "https://github.com/PatchworkMC/patchwork-api/commit/7e1c4e0100fc53545bab994978a8b7706493e9f0", "message": "Change to overwrite to make annotation processor happy.", "committedDate": "2020-04-30T03:37:13Z", "type": "commit"}, {"oid": "a8d9445c12eb3056bbeff14d49fdbd9cb7a5236e", "url": "https://github.com/PatchworkMC/patchwork-api/commit/a8d9445c12eb3056bbeff14d49fdbd9cb7a5236e", "message": "fix warning", "committedDate": "2020-05-04T02:26:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTEwODcyOA==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/61#discussion_r421108728", "bodyText": "Can we get some markers on where the actual code changes are with comments? I'm assuming it's just here but it's difficult to tell.", "author": "TheGlitch76", "createdAt": "2020-05-06T21:39:47Z", "path": "patchwork-recipes/src/main/java/net/patchworkmc/mixin/recipes/MixinRecipeGridAligner.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Minecraft Forge, Patchwork Project\n+ * Copyright (c) 2016-2020, 2019-2020\n+ *\n+ * This library is free software; you can redistribute it and/or\n+ * modify it under the terms of the GNU Lesser General Public\n+ * License as published by the Free Software Foundation version 2.1\n+ * of the License.\n+ *\n+ * This library is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * Lesser General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Lesser General Public\n+ * License along with this library; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n+ */\n+\n+package net.patchworkmc.mixin.recipes;\n+\n+import java.util.Iterator;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.Overwrite;\n+import org.spongepowered.asm.mixin.Shadow;\n+import net.minecraftforge.common.crafting.IShapedRecipe;\n+\n+import net.minecraft.util.math.MathHelper;\n+import net.minecraft.recipe.Recipe;\n+import net.minecraft.recipe.RecipeGridAligner;\n+\n+@Mixin(RecipeGridAligner.class)\n+public interface MixinRecipeGridAligner {\n+\t@Shadow\n+\tvoid acceptAlignedInput(Iterator<?> inputs, int slot, int amount, int gridX, int gridY);\n+\n+\t/**\n+\t * @author qouteall\n+\t * @reason https://github.com/FabricMC/Mixin/issues/15\n+\t */\n+\t@Overwrite\n+\tdefault void alignRecipeToGrid(\n+\t\t\tint gridWidth, int gridHeight, int gridOutputSlot,\n+\t\t\tRecipe<?> recipe, Iterator<?> inputs, int amount\n+\t) {\n+\t\tint width = gridWidth;\n+\t\tint height = gridHeight;\n+\n+\t\tif (recipe instanceof IShapedRecipe) {", "originalCommit": "a8d9445c12eb3056bbeff14d49fdbd9cb7a5236e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc1NDQ4OQ==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/61#discussion_r421754489", "bodyText": "Yes, it's generally good practice to annotate the changed parts when using @Overwrite.", "author": "coderbot16", "createdAt": "2020-05-07T19:51:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTEwODcyOA=="}], "type": "inlineReview", "revised_code": {"commit": "193abfa5e28f09a6554e9f170175af943e97efd3", "chunk": "diff --git a/patchwork-recipes/src/main/java/net/patchworkmc/mixin/recipes/MixinRecipeGridAligner.java b/patchwork-recipes/src/main/java/net/patchworkmc/mixin/recipes/MixinRecipeGridAligner.java\nindex 62c569e..0b70b93 100644\n--- a/patchwork-recipes/src/main/java/net/patchworkmc/mixin/recipes/MixinRecipeGridAligner.java\n+++ b/patchwork-recipes/src/main/java/net/patchworkmc/mixin/recipes/MixinRecipeGridAligner.java\n\n@@ -47,12 +47,15 @@ public interface MixinRecipeGridAligner {\n \t\tint width = gridWidth;\n \t\tint height = gridHeight;\n \n+\t\t// change start\n \t\tif (recipe instanceof IShapedRecipe) {\n \t\t\tIShapedRecipe<?> shapedRecipe = (IShapedRecipe<?>) recipe;\n \t\t\twidth = shapedRecipe.getRecipeWidth();\n \t\t\theight = shapedRecipe.getRecipeHeight();\n \t\t}\n \n+\t\t// change end\n+\n \t\tint slot = 0;\n \n \t\tfor (int y = 0; y < gridHeight; ++y) {\n"}}, {"oid": "193abfa5e28f09a6554e9f170175af943e97efd3", "url": "https://github.com/PatchworkMC/patchwork-api/commit/193abfa5e28f09a6554e9f170175af943e97efd3", "message": "add change start, change end", "committedDate": "2020-05-11T02:25:45Z", "type": "commit"}, {"oid": "62d300b1c4597af677b98c8acbff1174fa240c73", "url": "https://github.com/PatchworkMC/patchwork-api/commit/62d300b1c4597af677b98c8acbff1174fa240c73", "message": "Merge branch 'master' into master", "committedDate": "2020-05-13T03:19:38Z", "type": "commit"}]}