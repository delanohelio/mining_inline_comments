{"pr_number": 179, "pr_title": "Add EntityItemPickupEvent and EntityTravelToDimensionEvent", "pr_createdAt": "2020-08-17T19:23:36Z", "pr_url": "https://github.com/PatchworkMC/patchwork-api/pull/179", "timeline": [{"oid": "5c6643ea2cc4e8658fac56d325f45547290b00d4", "url": "https://github.com/PatchworkMC/patchwork-api/commit/5c6643ea2cc4e8658fac56d325f45547290b00d4", "message": "Add EntityItemPickupEvent\n(It should really be named ItemEntityPickupEvent but w/e)", "committedDate": "2020-08-17T18:53:24Z", "type": "commit"}, {"oid": "36abd85045da20ea8dcfb38af0a227f49a9f24df", "url": "https://github.com/PatchworkMC/patchwork-api/commit/36abd85045da20ea8dcfb38af0a227f49a9f24df", "message": "Add EntityTravelToDimensionEvent", "committedDate": "2020-08-17T19:22:37Z", "type": "commit"}, {"oid": "628e66209cdab931b98404d92de8dffa9c64f070", "url": "https://github.com/PatchworkMC/patchwork-api/commit/628e66209cdab931b98404d92de8dffa9c64f070", "message": "Fix checkstyle", "committedDate": "2020-08-18T14:38:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4NDA2Mw==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/179#discussion_r472584063", "bodyText": "why comment this out?", "author": "TheGlitch76", "createdAt": "2020-08-19T01:34:28Z", "path": "patchwork-events-entity/src/main/java/net/patchworkmc/impl/event/entity/EntityEvents.java", "diffHunk": "@@ -217,6 +219,19 @@ public static boolean onProjectileImpact(ThrownEntity throwable, HitResult ray)\n \t\treturn MinecraftForge.EVENT_BUS.post(new ProjectileImpactEvent.Throwable(throwable, ray));\n \t}\n \n+\tpublic static boolean onTravelToDimension(Entity entity, DimensionType dimensionType) {\n+\t\tEntityTravelToDimensionEvent event = new EntityTravelToDimensionEvent(entity, dimensionType);\n+\t\treturn !MinecraftForge.EVENT_BUS.post(event);\n+\t\t/* Forge has this thing:", "originalCommit": "628e66209cdab931b98404d92de8dffa9c64f070", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk3MTY2MA==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/179#discussion_r472971660", "bodyText": "StorageMinecartEntity doesn't seem to have dropContentsWhenDead - i assume it's a forge method", "author": "williambl", "createdAt": "2020-08-19T11:53:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4NDA2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDkzMjc2NA==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/179#discussion_r474932764", "bodyText": "It is, but it just accesses a field. Can you use an accessor mixin (following our naming conventions) and add a TODO? Seems like this could cause a hard to track bug.", "author": "TheGlitch76", "createdAt": "2020-08-21T20:18:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4NDA2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzI4ODAwMg==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/179#discussion_r477288002", "bodyText": "It's the same behaviour as forge now - what do you mean by adding a // TODO? What should it say?", "author": "williambl", "createdAt": "2020-08-26T13:11:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4NDA2Mw=="}], "type": "inlineReview", "revised_code": {"commit": "8de40baacd8a9cf8a887fa16b734e76055a11858", "chunk": "diff --git a/patchwork-events-entity/src/main/java/net/patchworkmc/impl/event/entity/EntityEvents.java b/patchwork-events-entity/src/main/java/net/patchworkmc/impl/event/entity/EntityEvents.java\nindex 697f5afb..39fc5e20 100644\n--- a/patchwork-events-entity/src/main/java/net/patchworkmc/impl/event/entity/EntityEvents.java\n+++ b/patchwork-events-entity/src/main/java/net/patchworkmc/impl/event/entity/EntityEvents.java\n\n@@ -221,15 +224,17 @@ public class EntityEvents implements ModInitializer {\n \n \tpublic static boolean onTravelToDimension(Entity entity, DimensionType dimensionType) {\n \t\tEntityTravelToDimensionEvent event = new EntityTravelToDimensionEvent(entity, dimensionType);\n-\t\treturn !MinecraftForge.EVENT_BUS.post(event);\n-\t\t/* Forge has this thing:\n+\t\tboolean result = !MinecraftForge.EVENT_BUS.post(event);\n \n-\t\tif (event.isCanceled()) {\n+\t\tif (!result) {\n \t\t\t// Revert variable back to true as it would have been set to false\n+\n \t\t\tif (entity instanceof StorageMinecartEntity) {\n-\t\t\t\t((StorageMinecartEntity) entity).dropContentsWhenDead(true);\n+\t\t\t\t((StorageMinecartEntityAccessor) entity).dropContentsWhenDead(true);\n \t\t\t}\n-\t\t} */\n+\t\t}\n+\n+\t\treturn result;\n \t}\n \n \t@Override\n"}}, {"oid": "8de40baacd8a9cf8a887fa16b734e76055a11858", "url": "https://github.com/PatchworkMC/patchwork-api/commit/8de40baacd8a9cf8a887fa16b734e76055a11858", "message": "Add Forge behavioural change w.r.t teleporting `StorageMinecartEntity`s", "committedDate": "2020-08-26T13:10:20Z", "type": "commit"}]}