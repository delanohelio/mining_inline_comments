{"pr_number": 1673, "pr_title": "Entries Tables Working with Delete Manifests", "pr_createdAt": "2020-10-28T20:13:54Z", "pr_url": "https://github.com/apache/iceberg/pull/1673", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzczODA5OA==", "url": "https://github.com/apache/iceberg/pull/1673#discussion_r513738098", "bodyText": "Nit: I think it's usually better to wrap a line at the start of an argument instead of at a method call in an argument, so \\nops.current().specsById() instead of ops.current()\\n.specsById(). Otherwise, it looks like you may be calling specsById on ManifestReadTask.", "author": "rdblue", "createdAt": "2020-10-28T20:26:06Z", "path": "core/src/main/java/org/apache/iceberg/ManifestEntriesTable.java", "diffHunk": "@@ -112,28 +113,36 @@ protected long targetSplitSize(TableOperations ops) {\n       ResidualEvaluator residuals = ResidualEvaluator.unpartitioned(filter);\n \n       return CloseableIterable.transform(manifests, manifest ->\n-          new ManifestReadTask(ops.io(), manifest, fileSchema, schemaString, specString, residuals));\n+          new ManifestReadTask(ops.io(), manifest, fileSchema, schemaString, specString, residuals, ops.current()\n+              .specsById()));", "originalCommit": "94c92efd2e5c1d0f1a424d7332e29bb70ffed585", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc0Mzc3OQ==", "url": "https://github.com/apache/iceberg/pull/1673#discussion_r513743779", "bodyText": "Sounds good to me, My preferred is new lines for every arg every time :) But I think this is reasonable too", "author": "RussellSpitzer", "createdAt": "2020-10-28T20:36:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzczODA5OA=="}], "type": "inlineReview", "revised_code": {"commit": "f1d2101122cac07988b50590e1e9318764d49cf4", "chunk": "diff --git a/core/src/main/java/org/apache/iceberg/ManifestEntriesTable.java b/core/src/main/java/org/apache/iceberg/ManifestEntriesTable.java\nindex d73b8fa75..33cc668f6 100644\n--- a/core/src/main/java/org/apache/iceberg/ManifestEntriesTable.java\n+++ b/core/src/main/java/org/apache/iceberg/ManifestEntriesTable.java\n\n@@ -113,8 +113,8 @@ public class ManifestEntriesTable extends BaseMetadataTable {\n       ResidualEvaluator residuals = ResidualEvaluator.unpartitioned(filter);\n \n       return CloseableIterable.transform(manifests, manifest ->\n-          new ManifestReadTask(ops.io(), manifest, fileSchema, schemaString, specString, residuals, ops.current()\n-              .specsById()));\n+          new ManifestReadTask(ops.io(), manifest, fileSchema, schemaString, specString, residuals,\n+              ops.current().specsById()));\n     }\n   }\n \n"}}, {"oid": "f1d2101122cac07988b50590e1e9318764d49cf4", "url": "https://github.com/apache/iceberg/commit/f1d2101122cac07988b50590e1e9318764d49cf4", "message": "Entries Tables Working with Delete Manifests\n\nPreviously the entries metadatat tables would throw an exception if a table\nhad been modified with a rowDelta and had a delete manifest. To fix this we\nswitch the reader based on the type of manifest that is being read by the\nmetadata table so that both type of manifest can be displayed.", "committedDate": "2020-10-28T20:35:03Z", "type": "commit"}, {"oid": "f1d2101122cac07988b50590e1e9318764d49cf4", "url": "https://github.com/apache/iceberg/commit/f1d2101122cac07988b50590e1e9318764d49cf4", "message": "Entries Tables Working with Delete Manifests\n\nPreviously the entries metadatat tables would throw an exception if a table\nhad been modified with a rowDelta and had a delete manifest. To fix this we\nswitch the reader based on the type of manifest that is being read by the\nmetadata table so that both type of manifest can be displayed.", "committedDate": "2020-10-28T20:35:03Z", "type": "forcePushed"}]}