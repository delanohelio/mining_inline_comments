{"pr_number": 2345, "pr_title": "fix #2343 migrate reactor-tests' tests to JUnit 5", "pr_createdAt": "2020-08-27T13:34:39Z", "pr_url": "https://github.com/reactor/reactor-core/pull/2345", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk5ODc0OA==", "url": "https://github.com/reactor/reactor-core/pull/2345#discussion_r481998748", "bodyText": "let's not import enum values please", "author": "bsideup", "createdAt": "2020-09-02T11:31:04Z", "path": "reactor-test/src/test/java/reactor/test/StepVerifierTests.java", "diffHunk": "@@ -483,7 +484,7 @@ public void thenCancel_cancelsAfterFirst() {\n \t\t                            .then(() -> Schedulers.elastic().schedule(() ->\n \t\t\t\t                            publisher.next(1L)))\n \t\t                            .then(() -> Schedulers.elastic().schedule(() ->\n-\t\t\t\t                            publisher.next(2L), 50, TimeUnit.MILLISECONDS))\n+\t\t\t\t                            publisher.next(2L), 50, MILLISECONDS))", "originalCommit": "e8c2517a97cd577f96eb5e7edf6d2840ad62467b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3cef48aaf59c100d5fe99c1c52d87345018545dc", "chunk": "diff --git a/reactor-test/src/test/java/reactor/test/StepVerifierTests.java b/reactor-test/src/test/java/reactor/test/StepVerifierTests.java\nindex d30f9b2c1..d71daa831 100644\n--- a/reactor-test/src/test/java/reactor/test/StepVerifierTests.java\n+++ b/reactor-test/src/test/java/reactor/test/StepVerifierTests.java\n\n@@ -484,7 +484,7 @@ public class StepVerifierTests {\n \t\t                            .then(() -> Schedulers.elastic().schedule(() ->\n \t\t\t\t                            publisher.next(1L)))\n \t\t                            .then(() -> Schedulers.elastic().schedule(() ->\n-\t\t\t\t                            publisher.next(2L), 50, MILLISECONDS))\n+\t\t\t\t                            publisher.next(2L), 50, TimeUnit.MILLISECONDS))\n \t\t                            .expectNoEvent(Duration.ofMillis(100))\n \t\t                            .thenRequest(1)\n \t\t                            .thenRequest(1)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk5OTc0Mw==", "url": "https://github.com/reactor/reactor-core/pull/2345#discussion_r481999743", "bodyText": "could you please revert this change? IMO we should only import test util methods.", "author": "bsideup", "createdAt": "2020-09-02T11:33:13Z", "path": "reactor-test/src/test/java/reactor/test/scheduler/VirtualTimeSchedulerTests.java", "diffHunk": "@@ -23,16 +23,21 @@\n import java.util.concurrent.atomic.AtomicInteger;\n import java.util.function.Supplier;\n \n-import org.junit.After;\n-import org.junit.Assert;\n-import org.junit.Test;\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.Test;\n import reactor.core.publisher.Mono;\n import reactor.core.scheduler.Scheduler;\n-import reactor.core.scheduler.Schedulers;\n import reactor.test.StepVerifier;\n import reactor.test.util.RaceTestUtils;\n \n import static org.assertj.core.api.Assertions.assertThat;\n+import static reactor.core.scheduler.Schedulers.newElastic;", "originalCommit": "e8c2517a97cd577f96eb5e7edf6d2840ad62467b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3cef48aaf59c100d5fe99c1c52d87345018545dc", "chunk": "diff --git a/reactor-test/src/test/java/reactor/test/scheduler/VirtualTimeSchedulerTests.java b/reactor-test/src/test/java/reactor/test/scheduler/VirtualTimeSchedulerTests.java\nindex 47fc36448..f83550fe5 100644\n--- a/reactor-test/src/test/java/reactor/test/scheduler/VirtualTimeSchedulerTests.java\n+++ b/reactor-test/src/test/java/reactor/test/scheduler/VirtualTimeSchedulerTests.java\n\n@@ -27,17 +27,11 @@ import org.junit.jupiter.api.AfterEach;\n import org.junit.jupiter.api.Test;\n import reactor.core.publisher.Mono;\n import reactor.core.scheduler.Scheduler;\n+import reactor.core.scheduler.Schedulers;\n import reactor.test.StepVerifier;\n import reactor.test.util.RaceTestUtils;\n \n import static org.assertj.core.api.Assertions.assertThat;\n-import static reactor.core.scheduler.Schedulers.newElastic;\n-import static reactor.core.scheduler.Schedulers.newParallel;\n-import static reactor.core.scheduler.Schedulers.newSingle;\n-import static reactor.core.scheduler.Schedulers.single;\n-import static reactor.test.scheduler.VirtualTimeScheduler.create;\n-import static reactor.test.scheduler.VirtualTimeScheduler.get;\n-import static reactor.test.scheduler.VirtualTimeScheduler.getOrSet;\n \n /**\n  * @author Stephane Maldini\n"}}, {"oid": "3cef48aaf59c100d5fe99c1c52d87345018545dc", "url": "https://github.com/reactor/reactor-core/commit/3cef48aaf59c100d5fe99c1c52d87345018545dc", "message": "Address review comments", "committedDate": "2020-09-07T10:00:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4MzQ1MA==", "url": "https://github.com/reactor/reactor-core/pull/2345#discussion_r484483450", "bodyText": "the indentation seems to be wrong:\n\nmixed tabs/spaces?", "author": "bsideup", "createdAt": "2020-09-07T15:05:17Z", "path": "reactor-test/src/test/java/reactor/test/StepVerifierTests.java", "diffHunk": "@@ -1114,7 +1116,8 @@ public void verifyVirtualTimeOnErrorAsync() {\n \t\t            .verify();\n \t}\n \n-\t@Test(timeout = 1000)\n+\t@Test\n+@Timeout(value = 1000, unit = TimeUnit.MILLISECONDS)", "originalCommit": "3cef48aaf59c100d5fe99c1c52d87345018545dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NDYyNg==", "url": "https://github.com/reactor/reactor-core/pull/2345#discussion_r484484626", "bodyText": "Will fix and propagate same kind of changes to 3.3.x and master (which may have more tests).\nThanks for the review!", "author": "ericbottard", "createdAt": "2020-09-07T15:07:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4MzQ1MA=="}], "type": "inlineReview", "revised_code": {"commit": "1e5a2c3ffbda3441144b169c930e2a628fa785ed", "chunk": "diff --git a/reactor-test/src/test/java/reactor/test/StepVerifierTests.java b/reactor-test/src/test/java/reactor/test/StepVerifierTests.java\nindex d71daa831..9c134a6c0 100644\n--- a/reactor-test/src/test/java/reactor/test/StepVerifierTests.java\n+++ b/reactor-test/src/test/java/reactor/test/StepVerifierTests.java\n\n@@ -1117,7 +1117,7 @@ public class StepVerifierTests {\n \t}\n \n \t@Test\n-@Timeout(value = 1000, unit = TimeUnit.MILLISECONDS)\n+\t@Timeout(value = 1000, unit = TimeUnit.MILLISECONDS)\n \tpublic void verifyCreatedForAllSchedulerUsesVirtualTime() {\n \t\t//a timeout will occur if virtual time isn't used\n \t\tStepVerifier.withVirtualTime(() -> Flux.interval(Duration.ofSeconds(3))\n"}}, {"oid": "1e5a2c3ffbda3441144b169c930e2a628fa785ed", "url": "https://github.com/reactor/reactor-core/commit/1e5a2c3ffbda3441144b169c930e2a628fa785ed", "message": "fix #2343 migrate tests to JUnit 5", "committedDate": "2020-09-07T15:13:02Z", "type": "commit"}, {"oid": "1e5a2c3ffbda3441144b169c930e2a628fa785ed", "url": "https://github.com/reactor/reactor-core/commit/1e5a2c3ffbda3441144b169c930e2a628fa785ed", "message": "fix #2343 migrate tests to JUnit 5", "committedDate": "2020-09-07T15:13:02Z", "type": "forcePushed"}]}