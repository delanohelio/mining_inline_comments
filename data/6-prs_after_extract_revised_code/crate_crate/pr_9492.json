{"pr_number": 9492, "pr_title": "Expose the merge.scheduler.max_thread_count setting for non-SSD type disks", "pr_createdAt": "2020-01-09T09:05:55Z", "pr_url": "https://github.com/crate/crate/pull/9492", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTAxNA==", "url": "https://github.com/crate/crate/pull/9492#discussion_r364635014", "bodyText": "I think this will be a bit problematic since the value depends on the environment where the test is running on. E.g. on our CI systems it will be lower.\nMaybe we can make the assertion a bit more lenient in that regard or fix the value in the create table statement, so that the tests are deterministic on all environments?", "author": "mfussenegger", "createdAt": "2020-01-09T09:29:42Z", "path": "sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java", "diffHunk": "@@ -96,6 +96,7 @@ public void testBuildCreateTableColumns() throws Exception {\n                      \"   \\\"mapping.total_fields.limit\\\" = 1000,\\n\" +\n                      \"   max_ngram_diff = 1,\\n\" +\n                      \"   max_shingle_diff = 3,\\n\" +\n+                     \"   \\\"merge.scheduler.max_thread_count\\\" = 4,\\n\" +", "originalCommit": "d24fa9e70a7927b47a190b433e98196dbf3e35a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY1NjQ3OQ==", "url": "https://github.com/crate/crate/pull/9492#discussion_r364656479", "bodyText": "Right, I will fix this value.", "author": "asdf2014", "createdAt": "2020-01-09T10:13:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYzNTAxNA=="}], "type": "inlineReview", "revised_code": {"commit": "05801cc2bbe8aea59e4d7dfab0712cba11ebe06c", "chunk": "diff --git a/sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java b/sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java\nindex a55aad0f38..9ee2ad6af3 100644\n--- a/sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java\n+++ b/sql/src/test/java/io/crate/analyze/MetaDataToASTNodeResolverTest.java\n\n@@ -96,7 +99,7 @@ public class MetaDataToASTNodeResolverTest extends CrateDummyClusterServiceUnitT\n                      \"   \\\"mapping.total_fields.limit\\\" = 1000,\\n\" +\n                      \"   max_ngram_diff = 1,\\n\" +\n                      \"   max_shingle_diff = 3,\\n\" +\n-                     \"   \\\"merge.scheduler.max_thread_count\\\" = 4,\\n\" +\n+                     \"   \\\"merge.scheduler.max_thread_count\\\" = 1,\\n\" +\n                      \"   number_of_replicas = '0-all',\\n\" +\n                      \"   refresh_interval = 1000,\\n\" +\n                      \"   \\\"routing.allocation.enable\\\" = 'all',\\n\" +\n"}}, {"oid": "05801cc2bbe8aea59e4d7dfab0712cba11ebe06c", "url": "https://github.com/crate/crate/commit/05801cc2bbe8aea59e4d7dfab0712cba11ebe06c", "message": "Expose the merge.scheduler.max_thread_count setting for non-SSD type disks", "committedDate": "2020-01-10T10:08:36Z", "type": "commit"}]}