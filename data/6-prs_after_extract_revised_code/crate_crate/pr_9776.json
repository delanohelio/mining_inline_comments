{"pr_number": 9776, "pr_title": "Remove guava from dex module", "pr_createdAt": "2020-03-18T20:52:06Z", "pr_url": "https://github.com/crate/crate/pull/9776", "timeline": [{"oid": "bc72b1d1fa8f7615a6eef8ef1c3b7ed28ba49414", "url": "https://github.com/crate/crate/commit/bc72b1d1fa8f7615a6eef8ef1c3b7ed28ba49414", "message": "Remove guava from dex module", "committedDate": "2020-03-18T20:51:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDkzNTIxNw==", "url": "https://github.com/crate/crate/pull/9776#discussion_r394935217", "bodyText": "Isn't this a runtime check method which should validate also without assertions enabled?", "author": "seut", "createdAt": "2020-03-19T10:43:57Z", "path": "common/src/main/java/io/crate/types/GeoPointType.java", "diffHunk": "@@ -116,8 +115,8 @@ private static boolean arePointsInRange(double x, double y) {\n     }\n \n     private static void checkLengthIs2(int actualLength) {\n-        Preconditions.checkArgument(actualLength == 2,\n-            \"The value of a GeoPoint must be a double array with 2 items, not %s\", actualLength);\n+        assert actualLength == 2", "originalCommit": "b6c4c035f2dfdff3f37d2a1d3b2fecaa4ba6b01e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk1MjU0Mg==", "url": "https://github.com/crate/crate/pull/9776#discussion_r394952542", "bodyText": "Ah right,  will change it", "author": "mfussenegger", "createdAt": "2020-03-19T11:16:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDkzNTIxNw=="}], "type": "inlineReview", "revised_code": {"commit": "86340ec5f4b9874ce24ce7574cb9aba99170bfb0", "chunk": "diff --git a/common/src/main/java/io/crate/types/GeoPointType.java b/common/src/main/java/io/crate/types/GeoPointType.java\nindex 2910eaa259..382c12d766 100644\n--- a/common/src/main/java/io/crate/types/GeoPointType.java\n+++ b/common/src/main/java/io/crate/types/GeoPointType.java\n\n@@ -115,8 +115,10 @@ public class GeoPointType extends DataType<Point> implements Streamer<Point>, Fi\n     }\n \n     private static void checkLengthIs2(int actualLength) {\n-        assert actualLength == 2\n-            : \"The value of a GeoPoint must be a double array with 2 items, not \" + actualLength;\n+        if (actualLength != 2) {\n+            throw new IllegalArgumentException(\n+                \"The value of a GeoPoint must be a double array with 2 items, not \" + actualLength);\n+        }\n     }\n \n     private static Point pointFromString(String value) {\n"}}, {"oid": "86340ec5f4b9874ce24ce7574cb9aba99170bfb0", "url": "https://github.com/crate/crate/commit/86340ec5f4b9874ce24ce7574cb9aba99170bfb0", "message": "Remove guava from common module", "committedDate": "2020-03-19T14:31:33Z", "type": "commit"}, {"oid": "86340ec5f4b9874ce24ce7574cb9aba99170bfb0", "url": "https://github.com/crate/crate/commit/86340ec5f4b9874ce24ce7574cb9aba99170bfb0", "message": "Remove guava from common module", "committedDate": "2020-03-19T14:31:33Z", "type": "forcePushed"}]}