{"pr_number": 9919, "pr_title": "Use the new func registry for the record subsript function.", "pr_createdAt": "2020-05-04T13:37:20Z", "pr_url": "https://github.com/crate/crate/pull/9919", "timeline": [{"oid": "24566554ce4934ee6f0b4478529555fd3111339f", "url": "https://github.com/crate/crate/commit/24566554ce4934ee6f0b4478529555fd3111339f", "message": "Use the new func registry for the record subsript function.", "committedDate": "2020-05-04T13:34:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ2Mjk5NQ==", "url": "https://github.com/crate/crate/pull/9919#discussion_r419462995", "bodyText": "We do not support the type signature parsing for record(e v [, e v, ...] ). It seems that we also do not need it for this case, see the previous behaviour https://github.com/crate/crate/pull/9919/files#diff-043c3fea4ce68fa7312a4150d7fb1ab4L54. I am not sure whether it is fine or we must tackle this support now.", "author": "kovrus", "createdAt": "2020-05-04T14:06:49Z", "path": "sql/src/main/java/io/crate/expression/scalar/SubscriptRecordFunction.java", "diffHunk": "@@ -21,60 +21,44 @@\n \n package io.crate.expression.scalar;\n \n-import java.util.List;\n-\n import io.crate.data.Input;\n import io.crate.data.Row;\n-import io.crate.expression.symbol.FuncArg;\n import io.crate.metadata.FunctionIdent;\n-import io.crate.metadata.FunctionImplementation;\n import io.crate.metadata.FunctionInfo;\n-import io.crate.metadata.FunctionResolver;\n import io.crate.metadata.Scalar;\n import io.crate.metadata.TransactionContext;\n-import io.crate.types.DataType;\n+import io.crate.metadata.functions.Signature;\n import io.crate.types.DataTypes;\n import io.crate.types.RowType;\n \n+import javax.annotation.Nullable;\n+import java.util.List;\n+\n public final class SubscriptRecordFunction extends Scalar<Object, Object> {\n \n     public static final String NAME = \"_subscript_record\";\n+    public static final Signature SIGNATURE = Signature.scalar(\n+        NAME,\n+        RowType.EMPTY.getTypeSignature(),", "originalCommit": "24566554ce4934ee6f0b4478529555fd3111339f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUxNDI0NA==", "url": "https://github.com/crate/crate/pull/9919#discussion_r419514244", "bodyText": "Afaik this is fine for now, but we may have to tackle this later when we use (declaredSignature, boundSignature) -> new funcImpl() and thus boundSignature.getArgumentTypes() instead of the actual arguments.", "author": "seut", "createdAt": "2020-05-04T15:17:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ2Mjk5NQ=="}], "type": "inlineReview", "revised_code": null}]}