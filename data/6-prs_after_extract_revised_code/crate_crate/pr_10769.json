{"pr_number": 10769, "pr_title": "Backport AllocationService related patches", "pr_createdAt": "2020-11-12T10:52:58Z", "pr_url": "https://github.com/crate/crate/pull/10769", "timeline": [{"oid": "376da8305f66ff973475e379952c1f40f7fd39e6", "url": "https://github.com/crate/crate/commit/376da8305f66ff973475e379952c1f40f7fd39e6", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0", "committedDate": "2020-11-12T16:10:06Z", "type": "forcePushed"}, {"oid": "2204704299f0a45d93c74f81cceff49e13c74b50", "url": "https://github.com/crate/crate/commit/2204704299f0a45d93c74f81cceff49e13c74b50", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0", "committedDate": "2020-11-12T16:26:25Z", "type": "forcePushed"}, {"oid": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "url": "https://github.com/crate/crate/commit/ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0", "committedDate": "2020-11-13T10:00:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg4NDk4Ng==", "url": "https://github.com/crate/crate/pull/10769#discussion_r522884986", "bodyText": "is this used somewhere? or what is the reason to add it?", "author": "seut", "createdAt": "2020-11-13T11:13:03Z", "path": "server/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java", "diffHunk": "@@ -200,7 +204,16 @@ public int getSize() {\n     }\n \n     /**\n-     * Returns a {@link List} of assigned shards\n+     * Returns a {@link List} of active shards\n+     *\n+     * @return a {@link List} of shards\n+     */\n+    public List<ShardRouting> getActiveShards() {", "originalCommit": "ab37c5c8067290b5f41425c76cb9c7a7d5e6d604", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkzNjg5Mg==", "url": "https://github.com/crate/crate/pull/10769#discussion_r522936892", "bodyText": "You are right it is not used, I accidentlly included with a cherry-pick", "author": "mfussenegger", "createdAt": "2020-11-13T13:04:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjg4NDk4Ng=="}], "type": "inlineReview", "revised_code": {"commit": "2d2cd1968848c1989b1dee8a775d72a408b39ea0", "chunk": "diff --git a/server/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java b/server/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java\nindex 69063bb662..db5b7ee64a 100644\n--- a/server/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java\n+++ b/server/src/main/java/org/elasticsearch/cluster/routing/IndexShardRoutingTable.java\n\n@@ -204,16 +200,7 @@ public class IndexShardRoutingTable implements Iterable<ShardRouting> {\n     }\n \n     /**\n-     * Returns a {@link List} of active shards\n-     *\n-     * @return a {@link List} of shards\n-     */\n-    public List<ShardRouting> getActiveShards() {\n-        return activeShards();\n-    }\n-\n-    /**\n-     * Returns a {@link List} of assigned shards, including relocation targets\n+     * Returns a {@link List} of assigned shards\n      *\n      * @return a {@link List} of shards\n      */\n"}}, {"oid": "2d2cd1968848c1989b1dee8a775d72a408b39ea0", "url": "https://github.com/crate/crate/commit/2d2cd1968848c1989b1dee8a775d72a408b39ea0", "message": "bp: Report shard state changes better\n\nhttps://github.com/elastic/elasticsearch/commit/f13c8445831e0de00017753f74b5cda0d96733f2", "committedDate": "2020-11-13T13:01:25Z", "type": "commit"}, {"oid": "7f5be0dbf3e202b02f4c6e73ad9303f5647abf5d", "url": "https://github.com/crate/crate/commit/7f5be0dbf3e202b02f4c6e73ad9303f5647abf5d", "message": "bp: Remove Dead Code + Duplication in o.e.c.routing\n\nhttps://github.com/elastic/elasticsearch/commit/abd861bb9191a3e3edd4f92f7d5c586dfa90281d", "committedDate": "2020-11-13T13:01:25Z", "type": "commit"}, {"oid": "396558be314cc1eebf356bd48da96fd456390168", "url": "https://github.com/crate/crate/commit/396558be314cc1eebf356bd48da96fd456390168", "message": "bp: Validate routing commands using updated routing state\n\nhttps://github.com/elastic/elasticsearch/commit/ae783879626ace085d30c3debd0a247de8535301", "committedDate": "2020-11-13T13:01:25Z", "type": "commit"}, {"oid": "49d24d1899d7758154df14c2c73452d519426e87", "url": "https://github.com/crate/crate/commit/49d24d1899d7758154df14c2c73452d519426e87", "message": "bp: Allow routing commands with ?retry_failed=true\n\nhttps://github.com/elastic/elasticsearch/commit/5e16a74c8311c6b2b3174ad30f9c8b6042ca25bb", "committedDate": "2020-11-13T13:01:25Z", "type": "commit"}, {"oid": "2d2ec3049932bae9493b12798192e6ae9b1f40e3", "url": "https://github.com/crate/crate/commit/2d2ec3049932bae9493b12798192e6ae9b1f40e3", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0", "committedDate": "2020-11-13T13:02:19Z", "type": "commit"}, {"oid": "2d2ec3049932bae9493b12798192e6ae9b1f40e3", "url": "https://github.com/crate/crate/commit/2d2ec3049932bae9493b12798192e6ae9b1f40e3", "message": "bp: Relocation targets are assigned shards too\n\nhttps://github.com/elastic/elasticsearch/commit/6d0d449254f4a98d003990cc05db865ce9c68de0", "committedDate": "2020-11-13T13:02:19Z", "type": "forcePushed"}]}