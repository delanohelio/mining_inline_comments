{"pr_number": 892, "pr_title": "Adding validation for SSH Principals", "pr_createdAt": "2020-03-04T19:39:17Z", "pr_url": "https://github.com/AthenZ/athenz/pull/892", "timeline": [{"oid": "3852d1d2d63a2fb37920c17e0077c94997350379", "url": "https://github.com/AthenZ/athenz/commit/3852d1d2d63a2fb37920c17e0077c94997350379", "message": "Adding validation for SSH Principals", "committedDate": "2020-03-11T03:57:30Z", "type": "forcePushed"}, {"oid": "af46e172015033a5f6718e33af44968f00bac55d", "url": "https://github.com/AthenZ/athenz/commit/af46e172015033a5f6718e33af44968f00bac55d", "message": "Adding validation for SSH Principals", "committedDate": "2020-03-11T04:02:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE4MjA0Mw==", "url": "https://github.com/AthenZ/athenz/pull/892#discussion_r391182043", "bodyText": "we should remove this or make it debug", "author": "havetisyan", "createdAt": "2020-03-11T18:35:01Z", "path": "servers/zts/src/main/java/com/yahoo/athenz/zts/cert/InstanceCertManager.java", "diffHunk": "@@ -726,6 +734,67 @@ public boolean verifyInstanceCertIPAddress(final String provider, final String i\n         return verifyIPAddressAccess(ipAddress, certIPBlocks);\n     }\n \n+\n+\n+    /**\n+     * validates hostname against the resolver, and verifies that the ssh principals map to hostname\n+     * @param hostname of the instance\n+     * @param csr ssh host csr from the sia\n+     * @return boolean true or false\n+     */\n+    public boolean validPrincipals(final String hostname, final String csr) {\n+        LOGGER.error(\"input: {}\", csr);", "originalCommit": "af46e172015033a5f6718e33af44968f00bac55d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6452ebfe6846e0e6731cc94a873c20fde8ec8f02", "chunk": "diff --git a/servers/zts/src/main/java/com/yahoo/athenz/zts/cert/InstanceCertManager.java b/servers/zts/src/main/java/com/yahoo/athenz/zts/cert/InstanceCertManager.java\nindex 03cf45953..e021ac1fb 100644\n--- a/servers/zts/src/main/java/com/yahoo/athenz/zts/cert/InstanceCertManager.java\n+++ b/servers/zts/src/main/java/com/yahoo/athenz/zts/cert/InstanceCertManager.java\n\n@@ -743,7 +743,6 @@ public class InstanceCertManager {\n      * @return boolean true or false\n      */\n     public boolean validPrincipals(final String hostname, final String csr) {\n-        LOGGER.error(\"input: {}\", csr);\n         SshHostCsr sshHostCsr;\n         try {\n             sshHostCsr = jsonMapper.readValue(csr, SshHostCsr.class);\n"}}, {"oid": "6452ebfe6846e0e6731cc94a873c20fde8ec8f02", "url": "https://github.com/AthenZ/athenz/commit/6452ebfe6846e0e6731cc94a873c20fde8ec8f02", "message": "Adding validation for SSH Principals", "committedDate": "2020-03-11T20:08:51Z", "type": "commit"}, {"oid": "6452ebfe6846e0e6731cc94a873c20fde8ec8f02", "url": "https://github.com/AthenZ/athenz/commit/6452ebfe6846e0e6731cc94a873c20fde8ec8f02", "message": "Adding validation for SSH Principals", "committedDate": "2020-03-11T20:08:51Z", "type": "forcePushed"}]}