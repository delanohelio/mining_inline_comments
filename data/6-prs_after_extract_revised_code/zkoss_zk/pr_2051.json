{"pr_number": 2051, "pr_title": "refine ZK-4552 (remove UIManager)", "pr_createdAt": "2020-07-10T08:49:02Z", "pr_url": "https://github.com/zkoss/zk/pull/2051", "timeline": [{"oid": "582bb2a2f6f5b1624e4d11cc3b2dbc2389e63211", "url": "https://github.com/zkoss/zk/commit/582bb2a2f6f5b1624e4d11cc3b2dbc2389e63211", "message": "refine ZK-4552 (remove UIManager, add selector support)", "committedDate": "2020-07-10T08:50:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0ODU2Mg==", "url": "https://github.com/zkoss/zk/pull/2051#discussion_r452748562", "bodyText": "add all String version of Component methods\nextract selector to component", "author": "scribetw", "createdAt": "2020-07-10T10:01:03Z", "path": "zk/src/org/zkoss/zk/ui/util/Clients.java", "diffHunk": "@@ -613,4 +617,40 @@ public static final void syncErrorbox() {\n \tpublic static final void syncErrorbox(Component component) {\n \t\tresponse(new AuSyncErrorbox(component));\n \t}\n+\n+\t/**\n+\t * Focus the component (HtmlBasedComponent)\n+\t * @param component target component\n+\t * @since 9.5.0\n+\t */\n+\tpublic static final void focus(Component component) {\n+\t\tif (component instanceof HtmlBasedComponent)\n+\t\t\t((HtmlBasedComponent) component).focus();\n+\t}\n+\n+\t/**\n+\t * Focus the first matching component (HtmlBasedComponent) by using selector\n+\t * @param selector the selector string\n+\t * @since 9.5.0\n+\t */\n+\tpublic static final void focus(String selector) {\n+\t\tList<Component> comps = Selectors.find(Executions.getCurrent().getDesktop().getFirstPage(), selector);\n+\t\tif (comps.size() > 0)\n+\t\t\tfocus(comps.get(0));\n+\t\telse\n+\t\t\tthrow new UiException(\"Component not found by the selector: \" + selector);\n+\t}\n+\n+\t/**\n+\t * Scrolls the ancestor elements to make the specified element visible by using selector\n+\t * @param selector the selector string\n+\t * @since 9.5.0\n+\t */\n+\tpublic static final void scrollIntoView(String selector) {", "originalCommit": "582bb2a2f6f5b1624e4d11cc3b2dbc2389e63211", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e269cba993fff84983f1ba49a70efc4c625104cd", "chunk": "diff --git a/zk/src/org/zkoss/zk/ui/util/Clients.java b/zk/src/org/zkoss/zk/ui/util/Clients.java\nindex 54edc0a3b8..892dcb8fb6 100755\n--- a/zk/src/org/zkoss/zk/ui/util/Clients.java\n+++ b/zk/src/org/zkoss/zk/ui/util/Clients.java\n\n@@ -617,40 +613,4 @@ public class Clients {\n \tpublic static final void syncErrorbox(Component component) {\n \t\tresponse(new AuSyncErrorbox(component));\n \t}\n-\n-\t/**\n-\t * Focus the component (HtmlBasedComponent)\n-\t * @param component target component\n-\t * @since 9.5.0\n-\t */\n-\tpublic static final void focus(Component component) {\n-\t\tif (component instanceof HtmlBasedComponent)\n-\t\t\t((HtmlBasedComponent) component).focus();\n-\t}\n-\n-\t/**\n-\t * Focus the first matching component (HtmlBasedComponent) by using selector\n-\t * @param selector the selector string\n-\t * @since 9.5.0\n-\t */\n-\tpublic static final void focus(String selector) {\n-\t\tList<Component> comps = Selectors.find(Executions.getCurrent().getDesktop().getFirstPage(), selector);\n-\t\tif (comps.size() > 0)\n-\t\t\tfocus(comps.get(0));\n-\t\telse\n-\t\t\tthrow new UiException(\"Component not found by the selector: \" + selector);\n-\t}\n-\n-\t/**\n-\t * Scrolls the ancestor elements to make the specified element visible by using selector\n-\t * @param selector the selector string\n-\t * @since 9.5.0\n-\t */\n-\tpublic static final void scrollIntoView(String selector) {\n-\t\tList<Component> comps = Selectors.find(Executions.getCurrent().getDesktop().getFirstPage(), selector);\n-\t\tif (comps.size() > 0)\n-\t\t\tscrollIntoView(comps.get(0));\n-\t\telse\n-\t\t\tthrow new UiException(\"Component not found by the selector: \" + selector);\n-\t}\n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc1MDc5Mg==", "url": "https://github.com/zkoss/zk/pull/2051#discussion_r452750792", "bodyText": "Test idspace issue (#win1 > btn, #win2 > btn)", "author": "scribetw", "createdAt": "2020-07-10T10:05:42Z", "path": "zktest/src/org/zkoss/zktest/test2/F95_ZK_4552ScrollVM.java", "diffHunk": "@@ -38,25 +37,26 @@ public void init() {\n \t\tlist.add(\"d\");\n \t\tlist.add(\"e\");\n \t\tlist.add(\"f\");\n-\t\tmanager = BindUtils.getUIManager(this);\n-\t\tmanager.scrollIntoView(text);\n \t}\n \n-\tprivate UIManager manager;\n+\t@AfterCompose\n+\tpublic void afterCompose() {\n+\t\tClients.scrollIntoView(\"#l2\");\n+\t}\n \n \tpublic void doScrollToTop() {\n \t\tClients.log(\"doScrollToTop!\");\n-\t\tmanager.scrollIntoView(label);\n+\t\tClients.scrollIntoView(\"#vm > div > label\");", "originalCommit": "582bb2a2f6f5b1624e4d11cc3b2dbc2389e63211", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e269cba993fff84983f1ba49a70efc4c625104cd", "chunk": "diff --git a/zktest/src/org/zkoss/zktest/test2/F95_ZK_4552ScrollVM.java b/zktest/src/org/zkoss/zktest/test2/F95_ZK_4552ScrollVM.java\ndeleted file mode 100644\nindex fa4fb20b9e..0000000000\n--- a/zktest/src/org/zkoss/zktest/test2/F95_ZK_4552ScrollVM.java\n+++ /dev/null\n\n@@ -1,89 +0,0 @@\n-/* F91_ZK_4452ScrollVM.java\n-\n-\tPurpose:\n-\t\t\n-\tDescription:\n-\t\t\n-\tHistory:\n-\t\tMon Feb 24 14:26:36 CST 2020, Created by jameschu\n-\n-Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n-*/\n-package org.zkoss.zktest.test2;\n-\n-import org.zkoss.bind.annotation.AfterCompose;\n-import org.zkoss.bind.annotation.Init;\n-import org.zkoss.zk.ui.util.Clients;\n-\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-/**\n- * @author jameschu\n- */\n-public class F95_ZK_4552ScrollVM {\n-\tprivate List<String> data = new ArrayList<>();\n-\n-\tprivate Object label = \"a\";\n-\tprivate String text = \"bbb\";\n-\tprivate List<String> list;\n-\n-\t@Init\n-\tpublic void init() {\n-\t\tlist = new ArrayList<>();\n-\t\tlist.add(\"a\");\n-\t\tlist.add(\"b\");\n-\t\tlist.add(\"c\");\n-\t\tlist.add(\"d\");\n-\t\tlist.add(\"e\");\n-\t\tlist.add(\"f\");\n-\t}\n-\n-\t@AfterCompose\n-\tpublic void afterCompose() {\n-\t\tClients.scrollIntoView(\"#l2\");\n-\t}\n-\n-\tpublic void doScrollToTop() {\n-\t\tClients.log(\"doScrollToTop!\");\n-\t\tClients.scrollIntoView(\"#vm > div > label\");\n-\t}\n-\n-\tpublic void doScroll() {\n-\t\tClients.log(\"doScroll!\");\n-\t\tClients.scrollIntoView(\"#l2\");\n-\t}\n-\n-\tpublic void doScrollInList() {\n-\t\tClients.log(\"doScrollInList!\");\n-\t\tClients.scrollIntoView(\"#list label:last-child\");\n-\t}\n-\n-\tpublic Object getLabel() {\n-\t\treturn label;\n-\t}\n-\n-\tpublic void setLabel(Object label) {\n-\t\tthis.label = label;\n-\t}\n-\n-\tpublic List<String> getData() {\n-\t\treturn data;\n-\t}\n-\n-\tpublic void setData(List<String> data) {\n-\t\tthis.data = data;\n-\t}\n-\n-\tpublic String getText() {\n-\t\treturn text;\n-\t}\n-\n-\tpublic void setText(String text) {\n-\t\tthis.text = text;\n-\t}\n-\n-\tpublic List<String> getList() {\n-\t\treturn list;\n-\t}\n-}\n"}}, {"oid": "e269cba993fff84983f1ba49a70efc4c625104cd", "url": "https://github.com/zkoss/zk/commit/e269cba993fff84983f1ba49a70efc4c625104cd", "message": "refine ZK-4552 (remove UIManager)", "committedDate": "2020-07-10T10:34:31Z", "type": "forcePushed"}, {"oid": "b5c6fb95df7eb0a733cd361e52f495c541095ab6", "url": "https://github.com/zkoss/zk/commit/b5c6fb95df7eb0a733cd361e52f495c541095ab6", "message": "refine ZK-4552 (remove UIManager)", "committedDate": "2020-07-10T10:40:29Z", "type": "forcePushed"}, {"oid": "be7549af508a98c10ba8bdbb5706e7d2f9c90625", "url": "https://github.com/zkoss/zk/commit/be7549af508a98c10ba8bdbb5706e7d2f9c90625", "message": "refine ZK-4552 (remove UIManager)", "committedDate": "2020-07-10T10:46:19Z", "type": "forcePushed"}, {"oid": "3e1a907b0d83520b7a6b0cde5dc14f70b4319864", "url": "https://github.com/zkoss/zk/commit/3e1a907b0d83520b7a6b0cde5dc14f70b4319864", "message": "refine ZK-4552 (remove UIManager)", "committedDate": "2020-07-10T10:56:45Z", "type": "commit"}, {"oid": "3e1a907b0d83520b7a6b0cde5dc14f70b4319864", "url": "https://github.com/zkoss/zk/commit/3e1a907b0d83520b7a6b0cde5dc14f70b4319864", "message": "refine ZK-4552 (remove UIManager)", "committedDate": "2020-07-10T10:56:45Z", "type": "forcePushed"}]}