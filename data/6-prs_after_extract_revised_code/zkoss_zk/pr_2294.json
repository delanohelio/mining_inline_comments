{"pr_number": 2294, "pr_title": "ZK-4743: Frozen scroll position is incorrect after redrawing", "pr_createdAt": "2020-12-11T06:19:47Z", "pr_url": "https://github.com/zkoss/zk/pull/2294", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE3NTgzNw==", "url": "https://github.com/zkoss/zk/pull/2294#discussion_r543175837", "bodyText": "2 assertEquals", "author": "scribetw", "createdAt": "2020-12-15T09:20:19Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4743Test.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* B95_ZK_4743Test.java\n+\n+\t\tPurpose:\n+\t\t\n+\t\tDescription:\n+\t\t\n+\t\tHistory:\n+\t\t\t\tFri Dec 11 10:29:03 CST 2020, Created by leon\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+*/\n+package org.zkoss.zktest.zats.test2;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.zkoss.zktest.zats.WebDriverTestCase;\n+\n+public class B95_ZK_4743Test extends WebDriverTestCase {\n+\t@Test\n+\tpublic void test() {\n+\t\tconnect();\n+\t\tint columnWidth = jq(\".z-listheader\").outerWidth();\n+\n+\t\tjq(\".z-frozen-inner\").scrollLeft(8 * columnWidth + 120); // Scroll right until items 10, 11, 12 are in view\n+\t\twaitResponse();\n+\n+\t\tclickTextboxAndCheck(9);\n+\n+\t\tclickTextboxAndCheck(10);\n+\n+\t\tclickTextboxAndCheck(11);\n+\n+\t}\n+\n+\tprivate void clickTextboxAndCheck(int textboxIndex) {\n+\t\tclick(jq(\"@textbox\").eq(textboxIndex));\n+\t\twaitResponse();\n+\t\tAssert.assertTrue(\"scrollbar position and view position should stay in sync.\",", "originalCommit": "1275b55858d7991f63b4dbe30079216da03ca0ac", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "bcc70ce0f38ba354bbc8b0c9049ac51d95343e7e", "chunk": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4743Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4743Test.java\nindex 14b888b5d7..20f6a61fee 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4743Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4743Test.java\n\n@@ -35,8 +35,7 @@ public class B95_ZK_4743Test extends WebDriverTestCase {\n \tprivate void clickTextboxAndCheck(int textboxIndex) {\n \t\tclick(jq(\"@textbox\").eq(textboxIndex));\n \t\twaitResponse();\n-\t\tAssert.assertTrue(\"scrollbar position and view position should stay in sync.\",\n-\t\t\tjq(\".z-listbox-header\").scrollLeft() == jq(\".z-listbox-body\").scrollLeft()\n-\t\t\t\t&& jq(\".z-listbox-body\").scrollLeft() == jq(\".z-frozen-inner\").scrollLeft());\n+\t\tAssert.assertEquals(\"head and body should stay sync.\", jq(\".z-listbox-header\").scrollLeft(), jq(\".z-listbox-body\").scrollLeft());\n+\t\tAssert.assertEquals(\"scrollbar position and view position should stay sync.\", jq(\".z-listbox-body\").scrollLeft(), jq(\".z-frozen-inner\").scrollLeft());\n \t}\n }\n"}}, {"oid": "bcc70ce0f38ba354bbc8b0c9049ac51d95343e7e", "url": "https://github.com/zkoss/zk/commit/bcc70ce0f38ba354bbc8b0c9049ac51d95343e7e", "message": "ZK-4743: Frozen scroll position is incorrect after redrawing", "committedDate": "2020-12-15T10:35:23Z", "type": "forcePushed"}, {"oid": "fbc9db00cb9d0b7a859cc62773fd0f9627393f4f", "url": "https://github.com/zkoss/zk/commit/fbc9db00cb9d0b7a859cc62773fd0f9627393f4f", "message": "ZK-4743: Frozen scroll position is incorrect after redrawing", "committedDate": "2020-12-15T10:51:35Z", "type": "commit"}, {"oid": "fbc9db00cb9d0b7a859cc62773fd0f9627393f4f", "url": "https://github.com/zkoss/zk/commit/fbc9db00cb9d0b7a859cc62773fd0f9627393f4f", "message": "ZK-4743: Frozen scroll position is incorrect after redrawing", "committedDate": "2020-12-15T10:51:35Z", "type": "forcePushed"}]}