{"pr_number": 1919, "pr_title": "ZK-4526: VM init multiple times with Choose/When", "pr_createdAt": "2020-03-12T04:08:26Z", "pr_url": "https://github.com/zkoss/zk/pull/1919", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5ODI1Mg==", "url": "https://github.com/zkoss/zk/pull/1919#discussion_r391498252", "bodyText": "ZATSTestCase", "author": "scribetw", "createdAt": "2020-03-12T09:36:36Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/B90_ZK_4526Test.java", "diffHunk": "@@ -0,0 +1,25 @@\n+/* B90_ZK_4526Test.java\n+\n+\t\tPurpose:\n+\t\t\n+\t\tDescription:\n+\t\t\n+\t\tHistory:\n+\t\t\t\tThu Mar 12 11:51:58 CST 2020, Created by leon\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+*/\n+package org.zkoss.zktest.zats.test2;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.zkoss.zktest.zats.WebDriverTestCase;\n+\n+public class B90_ZK_4526Test extends WebDriverTestCase {", "originalCommit": "d6bc4d5849cdea3d09ec90ad94cd4c0007a34059", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "6aae0414f7cf09da09867240243c2acd090fce7e", "chunk": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B90_ZK_4526Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B90_ZK_4526Test.java\nindex 93fee2c831..31f0453132 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B90_ZK_4526Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B90_ZK_4526Test.java\n\n@@ -13,13 +13,18 @@ package org.zkoss.zktest.zats.test2;\n \n import org.junit.Assert;\n import org.junit.Test;\n+import org.zkoss.zats.mimic.DesktopAgent;\n import org.zkoss.zktest.zats.WebDriverTestCase;\n+import org.zkoss.zktest.zats.ZATSTestCase;\n \n-public class B90_ZK_4526Test extends WebDriverTestCase {\n+import java.util.List;\n+\n+public class B90_ZK_4526Test extends ZATSTestCase {\n \t@Test\n \tpublic void test() {\n-\t\tconnect();\n-\t\twaitResponse();\n-\t\tAssert.assertEquals(\"init VM2\", getZKLog());\n+\t\tDesktopAgent agent = connect();\n+\t\tList<String> zklog = agent.getZkLog();\n+\t\tAssert.assertEquals(1, zklog.size());\n+\t\tAssert.assertEquals(\"init VM2\", zklog.get(0));\n \t}\n }\n"}}, {"oid": "6aae0414f7cf09da09867240243c2acd090fce7e", "url": "https://github.com/zkoss/zk/commit/6aae0414f7cf09da09867240243c2acd090fce7e", "message": "ZK-4526: VM init multiple times with Choose/When", "committedDate": "2020-03-13T02:01:53Z", "type": "forcePushed"}, {"oid": "0032df0a2fec965e3124917f69c956486cbb56a0", "url": "https://github.com/zkoss/zk/commit/0032df0a2fec965e3124917f69c956486cbb56a0", "message": "ZK-4526: VM init multiple times with Choose/When", "committedDate": "2020-03-13T03:56:04Z", "type": "commit"}, {"oid": "0032df0a2fec965e3124917f69c956486cbb56a0", "url": "https://github.com/zkoss/zk/commit/0032df0a2fec965e3124917f69c956486cbb56a0", "message": "ZK-4526: VM init multiple times with Choose/When", "committedDate": "2020-03-13T03:56:04Z", "type": "forcePushed"}]}