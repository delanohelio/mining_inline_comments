{"pr_number": 2260, "pr_title": "ZK-4628: Toggle Popup with onOpen doesn't close", "pr_createdAt": "2020-11-18T03:11:32Z", "pr_url": "https://github.com/zkoss/zk/pull/2260", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU1MzQwNg==", "url": "https://github.com/zkoss/zk/pull/2260#discussion_r526553406", "bodyText": "testTogglePopup(0, true)", "author": "scribetw", "createdAt": "2020-11-19T02:34:04Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4628Test.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/* B95_ZK_4628Test.java\n+\n+\t\tPurpose:\n+\t\t\n+\t\tDescription:\n+\t\t\n+\t\tHistory:\n+\t\t\t\tTue Nov 17 12:35:40 CST 2020, Created by leon\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+*/\n+package org.zkoss.zktest.zats.test2;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.zkoss.zktest.zats.WebDriverTestCase;\n+import org.zkoss.zktest.zats.ztl.JQuery;\n+\n+public class B95_ZK_4628Test extends WebDriverTestCase {\n+\t@Test\n+\tpublic void test() {\n+\t\tconnect();\n+\t\ttestTogglePopup(0); // test with VM onOpen listener", "originalCommit": "487d25d0b4c4b7b3886f6a633865acd6300087b0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "7db666ee1a2fc8b2da13da89dcabf546a71be884", "chunk": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4628Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4628Test.java\nindex 94d94f9bdb..89d17a1639 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4628Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_4628Test.java\n\n@@ -20,13 +20,12 @@ public class B95_ZK_4628Test extends WebDriverTestCase {\n \t@Test\n \tpublic void test() {\n \t\tconnect();\n-\t\ttestTogglePopup(0); // test with VM onOpen listener\n-\t\ttestTogglePopup(1); // test with onOpen listener\n-\t\ttestTogglePopup(2); // test without onOpen listener\n+\t\ttestTogglePopup(0, true); // test with VM onOpen listener\n+\t\ttestTogglePopup(1, true); // test with onOpen listener\n+\t\ttestTogglePopup(2, false); // test without onOpen listener\n \t}\n \n-\tprivate void testTogglePopup(Integer buttonIndex) {\n-\t\tboolean haveOnOpenListener = buttonIndex < 2;\n+\tprivate void testTogglePopup(Integer buttonIndex, boolean haveOnOpenListener) {\n \t\tJQuery button = jq(\"@button\").eq(buttonIndex);\n \n \t\tclick(button); // open popup\n"}}, {"oid": "7db666ee1a2fc8b2da13da89dcabf546a71be884", "url": "https://github.com/zkoss/zk/commit/7db666ee1a2fc8b2da13da89dcabf546a71be884", "message": "ZK-4628: Toggle Popup with onOpen doesn't close", "committedDate": "2020-11-19T03:19:19Z", "type": "forcePushed"}, {"oid": "89203d674be2fd8e99d98bb2014c9f3fc2548322", "url": "https://github.com/zkoss/zk/commit/89203d674be2fd8e99d98bb2014c9f3fc2548322", "message": "ZK-4628: Toggle Popup with onOpen doesn't close", "committedDate": "2020-11-19T03:27:22Z", "type": "commit"}, {"oid": "89203d674be2fd8e99d98bb2014c9f3fc2548322", "url": "https://github.com/zkoss/zk/commit/89203d674be2fd8e99d98bb2014c9f3fc2548322", "message": "ZK-4628: Toggle Popup with onOpen doesn't close", "committedDate": "2020-11-19T03:27:22Z", "type": "forcePushed"}]}