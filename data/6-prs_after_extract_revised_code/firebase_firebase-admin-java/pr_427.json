{"pr_number": 427, "pr_title": "fix: Removed unused FirebaseAppStore abstraction", "pr_createdAt": "2020-05-27T20:03:28Z", "pr_url": "https://github.com/firebase/firebase-admin-java/pull/427", "timeline": [{"oid": "0a7d4c75860b522484f3432323572543e2219974", "url": "https://github.com/firebase/firebase-admin-java/commit/0a7d4c75860b522484f3432323572543e2219974", "message": "fix: Removed unused FirebaseAppStore abstraction", "committedDate": "2020-05-27T20:02:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NTg1Mg==", "url": "https://github.com/firebase/firebase-admin-java/pull/427#discussion_r431445852", "bodyText": "Was there a reason a Set was used here before? Could it be to avoid duplicates?", "author": "lahirumaramba", "createdAt": "2020-05-27T21:13:47Z", "path": "src/main/java/com/google/firebase/FirebaseApp.java", "diffHunk": "@@ -249,19 +241,15 @@ static void clearInstancesForTest() {\n   }\n \n   private static List<String> getAllAppNames() {\n-    Set<String> allAppNames = new HashSet<>();\n+    List<String> allAppNames = new ArrayList<>();", "originalCommit": "0a7d4c75860b522484f3432323572543e2219974", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1ODU5MA==", "url": "https://github.com/firebase/firebase-admin-java/pull/427#discussion_r431458590", "bodyText": "I think that's the idea, but it's redundant. App names are unique by definition. When adding a new app we check this:\ncheckState(\n          !instances.containsKey(normalizedName),\n          \"FirebaseApp name \" + normalizedName + \" already exists!\");\n\nThis actually gives me an idea. We can use the instances.keySet() to populate the List. I'll make the change.", "author": "hiranya911", "createdAt": "2020-05-27T21:40:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NTg1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ2NTUxMg==", "url": "https://github.com/firebase/firebase-admin-java/pull/427#discussion_r431465512", "bodyText": "Great! Makes sense to me.", "author": "lahirumaramba", "createdAt": "2020-05-27T21:55:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NTg1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "cb77948868aedd0c7d68e57761ea5ff8b91a3459", "chunk": "diff --git a/src/main/java/com/google/firebase/FirebaseApp.java b/src/main/java/com/google/firebase/FirebaseApp.java\nindex c776972..3848254 100644\n--- a/src/main/java/com/google/firebase/FirebaseApp.java\n+++ b/src/main/java/com/google/firebase/FirebaseApp.java\n\n@@ -241,11 +241,9 @@ public class FirebaseApp {\n   }\n \n   private static List<String> getAllAppNames() {\n-    List<String> allAppNames = new ArrayList<>();\n+    List<String> allAppNames;\n     synchronized (appsLock) {\n-      for (FirebaseApp app : instances.values()) {\n-        allAppNames.add(app.getName());\n-      }\n+      allAppNames = new ArrayList<>(instances.keySet());\n     }\n \n     Collections.sort(allAppNames);\n"}}, {"oid": "cb77948868aedd0c7d68e57761ea5ff8b91a3459", "url": "https://github.com/firebase/firebase-admin-java/commit/cb77948868aedd0c7d68e57761ea5ff8b91a3459", "message": "Using the keySet of App instances to populate the app names list", "committedDate": "2020-05-27T21:42:29Z", "type": "commit"}]}