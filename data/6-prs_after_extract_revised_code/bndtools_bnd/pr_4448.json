{"pr_number": 4448, "pr_title": "removed duplicate getReleaseRepo method", "pr_createdAt": "2020-12-09T15:38:22Z", "pr_url": "https://github.com/bndtools/bnd/pull/4448", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4Mzc5Ng==", "url": "https://github.com/bndtools/bnd/pull/4448#discussion_r539483796", "bodyText": "There is a misspelling here. Also, we agreed that missing -releaserepo was a warning and not an error. And if -releaserepo was not set, we still release to the first writable repo for backwards compatibility.", "author": "bjhargrave", "createdAt": "2020-12-09T17:03:41Z", "path": "biz.aQute.bndlib/src/aQute/bnd/build/ProjectBuilder.java", "diffHunk": "@@ -594,29 +594,34 @@ private boolean isMaster(InfoRepository repo, String bsn, Version v) throws Exce\n \t}\n \n \tprivate RepositoryPlugin getReleaseRepo() {\n-\t\tString repoName = getProperty(Constants.RELEASEREPO);\n \n-\t\tList<RepositoryPlugin> repos = getPlugins(RepositoryPlugin.class);\n-\t\tfor (RepositoryPlugin r : repos) {\n-\t\t\tif (r.canWrite()) {\n-\t\t\t\tif (repoName == null || r.getName()\n-\t\t\t\t\t.equals(repoName)) {\n-\t\t\t\t\treturn r;\n-\t\t\t\t}\n+\t\tString repoNames = getProperty(Constants.RELEASEREPO);\n+\n+\t\tif (repoNames == null) {\n+\t\t\terror(\"Could not find a release reposiotry (-releaserepo is not set)\");", "originalCommit": "74ab3fab4a2c2c1960540dbabcea8c82adfa92bd", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "de144fe8b5208f4ec4d145fa51e5628f43a45c33", "chunk": "diff --git a/biz.aQute.bndlib/src/aQute/bnd/build/ProjectBuilder.java b/biz.aQute.bndlib/src/aQute/bnd/build/ProjectBuilder.java\nindex c49f03152..03592a4c7 100644\n--- a/biz.aQute.bndlib/src/aQute/bnd/build/ProjectBuilder.java\n+++ b/biz.aQute.bndlib/src/aQute/bnd/build/ProjectBuilder.java\n\n@@ -597,11 +597,6 @@ public class ProjectBuilder extends Builder {\n \n \t\tString repoNames = getProperty(Constants.RELEASEREPO);\n \n-\t\tif (repoNames == null) {\n-\t\t\terror(\"Could not find a release reposiotry (-releaserepo is not set)\");\n-\t\t\treturn null;\n-\t\t}\n-\n \t\tList<RepositoryPlugin> releaseRepos = project.getReleaseRepos(repoNames);\n \n \t\tif (!releaseRepos.isEmpty()) {\n"}}, {"oid": "70541477912e0604d4a43173cfb82aec414f5c47", "url": "https://github.com/bndtools/bnd/commit/70541477912e0604d4a43173cfb82aec414f5c47", "message": "removed duplicate getReleaseRepo method\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>", "committedDate": "2021-01-05T16:33:51Z", "type": "forcePushed"}, {"oid": "de144fe8b5208f4ec4d145fa51e5628f43a45c33", "url": "https://github.com/bndtools/bnd/commit/de144fe8b5208f4ec4d145fa51e5628f43a45c33", "message": "removed duplicate getReleaseRepo method\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>", "committedDate": "2021-01-05T16:53:55Z", "type": "commit"}, {"oid": "de144fe8b5208f4ec4d145fa51e5628f43a45c33", "url": "https://github.com/bndtools/bnd/commit/de144fe8b5208f4ec4d145fa51e5628f43a45c33", "message": "removed duplicate getReleaseRepo method\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>", "committedDate": "2021-01-05T16:53:55Z", "type": "forcePushed"}]}