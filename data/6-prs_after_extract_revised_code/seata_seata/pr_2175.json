{"pr_number": 2175, "pr_title": "bugfix: fix direct buffer OOM", "pr_createdAt": "2020-01-13T06:47:10Z", "pr_url": "https://github.com/seata/seata/pull/2175", "timeline": [{"oid": "316bce00e1663e9a62da14c489166c63058e6407", "url": "https://github.com/seata/seata/commit/316bce00e1663e9a62da14c489166c63058e6407", "message": "bugfix: fix direct buffer OOM\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-01-13T06:45:31Z", "type": "commit"}, {"oid": "ed4a07a60cbe6235ce242b2fc980a6cee08a6362", "url": "https://github.com/seata/seata/commit/ed4a07a60cbe6235ce242b2fc980a6cee08a6362", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-13T06:55:55Z", "type": "commit"}, {"oid": "e31347d3e7f5a4b621ec51cf88bbd92c63c48aa7", "url": "https://github.com/seata/seata/commit/e31347d3e7f5a4b621ec51cf88bbd92c63c48aa7", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-13T14:26:30Z", "type": "commit"}, {"oid": "f01ac6282a5a7583adf9e235259fde84e12452aa", "url": "https://github.com/seata/seata/commit/f01ac6282a5a7583adf9e235259fde84e12452aa", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-14T14:42:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE5NTY5Mw==", "url": "https://github.com/seata/seata/pull/2175#discussion_r366195693", "bodyText": "[2048 * 64]   Is this property set too large, 16 times the default value?", "author": "ph3636", "createdAt": "2020-01-14T08:05:29Z", "path": "core/src/main/java/io/seata/core/rpc/netty/NettyServerConfig.java", "diffHunk": "@@ -55,22 +53,6 @@\n      */\n     public static final Class<? extends ServerChannel> SERVER_CHANNEL_CLAZZ = NettyBaseConfig.SERVER_CHANNEL_CLAZZ;\n \n-    /**\n-     * The constant DIRECT_BYTE_BUF_ALLOCATOR.\n-     */\n-    public static final PooledByteBufAllocator DIRECT_BYTE_BUF_ALLOCATOR =\n-        new PooledByteBufAllocator(\n-            true,\n-            WORKER_THREAD_SIZE,\n-            WORKER_THREAD_SIZE,\n-            2048 * 64,", "originalCommit": "e31347d3e7f5a4b621ec51cf88bbd92c63c48aa7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI0NTEwMg==", "url": "https://github.com/seata/seata/pull/2175#discussion_r367245102", "bodyText": "1.0.0\u7248\u672c\u7684\u9ed8\u8ba4\u914d\u7f6e\u91cc\u9762\u3002worker-thread-size\u4e3a\u914d\u7f6e\u3002\u9ed8\u8ba4\u4e3anetty\u7684\u7ebf\u7a0b\u6570\u662fcpu*2\u3002\n0.8.0\u7248\u672c\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u9762transport.thread-factory.worker-thread-size=8\nnetty\u7684\u5185\u5b58\u9650\u5236\u5df2\u7ecf\u8d85\u8fc7\u914d\u7f6e\u7684\u6700\u5927\u76f4\u63a5\u5185\u5b58\u6570\u3002\u6240\u4ee51.0.0\u7248\u672c\u5728cpu\u5f88\u591a\u7684\u673a\u5668\u4e0a\uff0c\u7f3a\u7701\u914d\u7f6e\u5f88\u5feb\u5c31\u80fd\u590d\u73b0OOM\u7684bug\n\u53bb\u6389\u8fd9\u6bb5\u4ee3\u7801\uff0c\u4f7f\u7528netty\u7f3a\u7701\u7684\u914d\u7f6e\u548c\u53c2\u6570\u3002netty\u6839\u636e\u6700\u5927\u76f4\u63a5\u5185\u5b58,chunkSize\u548cmaxOrder\uff0c\u8ba1\u7b97\u51fa\u6709\u6548\u7684nDirectArena\u548cnHeapArena", "author": "TinyZzh", "createdAt": "2020-01-16T06:07:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE5NTY5Mw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "10564aecbaceb2d36334707eb0c5557d4365249b", "url": "https://github.com/seata/seata/commit/10564aecbaceb2d36334707eb0c5557d4365249b", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-15T02:58:32Z", "type": "commit"}, {"oid": "18b1b7c98d6daf116feef9156f6e2b819d22f13c", "url": "https://github.com/seata/seata/commit/18b1b7c98d6daf116feef9156f6e2b819d22f13c", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-15T03:17:20Z", "type": "commit"}, {"oid": "6358502621a1627561a4ae9048618bc8e91af88e", "url": "https://github.com/seata/seata/commit/6358502621a1627561a4ae9048618bc8e91af88e", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-15T10:22:41Z", "type": "commit"}, {"oid": "4f50c996fe9cb65be85aea7b04465c5ff7b50c00", "url": "https://github.com/seata/seata/commit/4f50c996fe9cb65be85aea7b04465c5ff7b50c00", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-19T01:31:07Z", "type": "commit"}, {"oid": "ecba83c0229a409f47ec22168c609f4108fd13de", "url": "https://github.com/seata/seata/commit/ecba83c0229a409f47ec22168c609f4108fd13de", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-19T09:32:52Z", "type": "commit"}, {"oid": "a5c877fd9be4820274e5a036da3fcf2fb69b1280", "url": "https://github.com/seata/seata/commit/a5c877fd9be4820274e5a036da3fcf2fb69b1280", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-19T11:27:50Z", "type": "commit"}, {"oid": "350e1dc62894b43e80b492e4866814d8d5b3f494", "url": "https://github.com/seata/seata/commit/350e1dc62894b43e80b492e4866814d8d5b3f494", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-22T15:48:34Z", "type": "commit"}, {"oid": "0f190f5a0a397f803063951a6be7bba63b0892df", "url": "https://github.com/seata/seata/commit/0f190f5a0a397f803063951a6be7bba63b0892df", "message": "Merge branch 'develop' into OOM", "committedDate": "2020-01-23T04:20:55Z", "type": "commit"}]}