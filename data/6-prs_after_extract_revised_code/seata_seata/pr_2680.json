{"pr_number": 2680, "pr_title": "optimize : Change GlobalTransactionalInterceptor to singleton", "pr_createdAt": "2020-05-12T02:28:57Z", "pr_url": "https://github.com/seata/seata/pull/2680", "timeline": [{"oid": "0460e0d3cbedca55bb2c40d3186220bda456ec36", "url": "https://github.com/seata/seata/commit/0460e0d3cbedca55bb2c40d3186220bda456ec36", "message": "Change GlobalTransactionalInterceptor to a single example", "committedDate": "2020-05-12T02:27:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzODQwMg==", "url": "https://github.com/seata/seata/pull/2680#discussion_r423438402", "bodyText": "if there is no GlobalTransactional, would it be too wasteful?", "author": "a364176773", "createdAt": "2020-05-12T03:19:37Z", "path": "spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java", "diffHunk": "@@ -150,6 +151,8 @@ public GlobalTransactionScanner(String applicationId, String txServiceGroup, int\n         this.txServiceGroup = txServiceGroup;\n         this.mode = mode;\n         this.failureHandlerHook = failureHandlerHook;\n+        this.globalTransactionalInterceptor = new GlobalTransactionalInterceptor(this.failureHandlerHook);", "originalCommit": "0460e0d3cbedca55bb2c40d3186220bda456ec36", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b24736feb51bc3de17b30f2360405329e04d0b1d", "chunk": "diff --git a/spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java b/spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java\nindex 3df9c95bb..d3c1d225a 100644\n--- a/spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java\n+++ b/spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java\n\n@@ -151,8 +151,6 @@ public class GlobalTransactionScanner extends AbstractAutoProxyCreator\n         this.txServiceGroup = txServiceGroup;\n         this.mode = mode;\n         this.failureHandlerHook = failureHandlerHook;\n-        this.globalTransactionalInterceptor = new GlobalTransactionalInterceptor(this.failureHandlerHook);\n-        ConfigurationFactory.getInstance().addConfigListener(ConfigurationKeys.DISABLE_GLOBAL_TRANSACTION, (ConfigurationChangeListener) globalTransactionalInterceptor);\n     }\n \n     @Override\n"}}, {"oid": "b24736feb51bc3de17b30f2360405329e04d0b1d", "url": "https://github.com/seata/seata/commit/b24736feb51bc3de17b30f2360405329e04d0b1d", "message": "Change GlobalTransactionalInterceptor to a single example", "committedDate": "2020-05-12T04:15:49Z", "type": "commit"}]}