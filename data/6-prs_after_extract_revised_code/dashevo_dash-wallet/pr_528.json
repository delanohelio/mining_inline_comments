{"pr_number": 528, "pr_title": "DashPay: Profile Picture | Select Picture", "pr_createdAt": "2020-10-13T02:14:46Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/528", "timeline": [{"oid": "17ae8048707e20a8e07667c8c2e5918fb256645d", "url": "https://github.com/dashevo/dash-wallet/commit/17ae8048707e20a8e07667c8c2e5918fb256645d", "message": "Add picture selection and save the path", "committedDate": "2020-10-13T02:11:30Z", "type": "commit"}, {"oid": "1dfcb0ff7df947c473ce427fa90384cc2f7c203f", "url": "https://github.com/dashevo/dash-wallet/commit/1dfcb0ff7df947c473ce427fa90384cc2f7c203f", "message": "close the choose dialog after clicking, save the taken picture", "committedDate": "2020-10-13T21:19:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMzODQzMQ==", "url": "https://github.com/dashevo/dash-wallet/pull/528#discussion_r504338431", "bodyText": ".apply() needs to be called to save the image path to preferences.", "author": "sambarboza", "createdAt": "2020-10-14T00:51:47Z", "path": "common/src/main/java/org/dash/wallet/common/Configuration.java", "diffHunk": "@@ -431,7 +432,15 @@ public long getLastSeenNotificationTime() {\n         return prefs.getLong(PREFS_LAST_SEEN_NOTIFICATION_TIME, 0);\n     }\n \n-    public void setPrefsLastSeenNotificationTime(long lastSeenNotificationTime) {\n+    public void setLastSeenNotificationTime(long lastSeenNotificationTime) {\n         prefs.edit().putLong(PREFS_LAST_SEEN_NOTIFICATION_TIME, lastSeenNotificationTime).apply();\n     }\n+\n+    public void setLocalProfilePictureUri(String picturePath) {\n+        prefs.edit().putString(PREFS_KEY_LOCAL_PROFILE_PICTURE_URI, picturePath);", "originalCommit": "1dfcb0ff7df947c473ce427fa90384cc2f7c203f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM1NDUzNw==", "url": "https://github.com/dashevo/dash-wallet/pull/528#discussion_r504354537", "bodyText": "Fixed here: 649f009", "author": "HashEngineering", "createdAt": "2020-10-14T01:55:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMzODQzMQ=="}], "type": "inlineReview", "revised_code": {"commit": "649f0091a5dc9d8caaf4046096c9d15993998ff3", "chunk": "diff --git a/common/src/main/java/org/dash/wallet/common/Configuration.java b/common/src/main/java/org/dash/wallet/common/Configuration.java\nindex b398013ec..7b6ad3285 100644\n--- a/common/src/main/java/org/dash/wallet/common/Configuration.java\n+++ b/common/src/main/java/org/dash/wallet/common/Configuration.java\n\n@@ -437,7 +437,7 @@ public class Configuration {\n     }\n \n     public void setLocalProfilePictureUri(String picturePath) {\n-        prefs.edit().putString(PREFS_KEY_LOCAL_PROFILE_PICTURE_URI, picturePath);\n+        prefs.edit().putString(PREFS_KEY_LOCAL_PROFILE_PICTURE_URI, picturePath).apply();\n     }\n \n     public String getLocalProfilePictureUri() {\n"}}, {"oid": "649f0091a5dc9d8caaf4046096c9d15993998ff3", "url": "https://github.com/dashevo/dash-wallet/commit/649f0091a5dc9d8caaf4046096c9d15993998ff3", "message": "Configuration: add .apply()", "committedDate": "2020-10-14T01:55:06Z", "type": "commit"}, {"oid": "533ae5cdc9a49614dc377f59e2e4e342def31cbe", "url": "https://github.com/dashevo/dash-wallet/commit/533ae5cdc9a49614dc377f59e2e4e342def31cbe", "message": "Fixed the crash when taking picture on KitKat. (#529)\n\nImprove the way of storing profile picture in the app", "committedDate": "2020-10-15T23:14:03Z", "type": "commit"}, {"oid": "4de474d38ec3508ca8d75c8c837cbe0a6c6a6189", "url": "https://github.com/dashevo/dash-wallet/commit/4de474d38ec3508ca8d75c8c837cbe0a6c6a6189", "message": "Fix permissions bug with taking a picture", "committedDate": "2020-10-15T23:15:18Z", "type": "commit"}, {"oid": "d006090e401bdbba812adc882667cd4352a2bbae", "url": "https://github.com/dashevo/dash-wallet/commit/d006090e401bdbba812adc882667cd4352a2bbae", "message": "remove unused code", "committedDate": "2020-10-15T23:20:57Z", "type": "commit"}, {"oid": "9e77c31f5a7ea1432d9c51977401e5dbdee9e8c9", "url": "https://github.com/dashevo/dash-wallet/commit/9e77c31f5a7ea1432d9c51977401e5dbdee9e8c9", "message": "PlatformRepo: Only update the local copy of a Profile if it was updated on Platform", "committedDate": "2020-10-19T15:15:13Z", "type": "commit"}, {"oid": "206c8d1fd6aee934a93541071dbfbd893a4c6004", "url": "https://github.com/dashevo/dash-wallet/commit/206c8d1fd6aee934a93541071dbfbd893a4c6004", "message": "rename gerFileUri to getFileUri", "committedDate": "2020-10-21T13:41:25Z", "type": "commit"}, {"oid": "09464c72325a7d2502177ccca38082adac87cfd3", "url": "https://github.com/dashevo/dash-wallet/commit/09464c72325a7d2502177ccca38082adac87cfd3", "message": "Merge branch 'evonet-develop' into dashpay-choose-image", "committedDate": "2020-10-23T15:35:41Z", "type": "commit"}, {"oid": "a11a311bc263281d74070d30ccf3e45043101449", "url": "https://github.com/dashevo/dash-wallet/commit/a11a311bc263281d74070d30ccf3e45043101449", "message": "rename button", "committedDate": "2020-10-23T19:00:04Z", "type": "commit"}]}