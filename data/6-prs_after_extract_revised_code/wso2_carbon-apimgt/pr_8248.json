{"pr_number": 8248, "pr_title": "Adding the capability to extend the scope issuer", "pr_createdAt": "2020-02-25T05:34:37Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8248", "timeline": [{"oid": "da367d8e26150db096fe78f1861df605f589aaba", "url": "https://github.com/wso2/carbon-apimgt/commit/da367d8e26150db096fe78f1861df605f589aaba", "message": "extend scope issuer", "committedDate": "2020-02-24T12:04:08Z", "type": "commit"}, {"oid": "bacf3ff05916065e1d67dc07efa278ee99bbd44f", "url": "https://github.com/wso2/carbon-apimgt/commit/bacf3ff05916065e1d67dc07efa278ee99bbd44f", "message": "add scope issuer config", "committedDate": "2020-02-24T12:04:14Z", "type": "commit"}, {"oid": "4f54ec55488a3b6fc40093d1543995f657e44b1f", "url": "https://github.com/wso2/carbon-apimgt/commit/4f54ec55488a3b6fc40093d1543995f657e44b1f", "message": "change constructor", "committedDate": "2020-02-24T12:46:50Z", "type": "commit"}, {"oid": "e39d97ee93ef1305ee2cb0f5d0aea4b93f90fedf", "url": "https://github.com/wso2/carbon-apimgt/commit/e39d97ee93ef1305ee2cb0f5d0aea4b93f90fedf", "message": "fix test", "committedDate": "2020-02-24T13:39:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgwMjI4NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8248#discussion_r383802285", "bodyText": "configParser -> apimanagerConfiguration", "author": "tharindu1st", "createdAt": "2020-02-25T10:49:40Z", "path": "components/apimgt/org.wso2.carbon.apimgt.keymgt/src/main/java/org/wso2/carbon/apimgt/keymgt/ScopesIssuer.java", "diffHunk": "@@ -37,18 +40,37 @@\n     private List<String> scopeSkipList = new ArrayList<>();\n     private static Map<String, AbstractScopesIssuer> scopesIssuers;\n     private static final String DEFAULT_SCOPE_NAME = \"default\";\n+    private static final String CONFIG_ELEM_SCOPE_ISSUER = \"OAuthConfigurations.ScopeIssuer\";\n     /**\n      * Singleton of ScopeIssuer.*\n      */\n     private static ScopesIssuer scopesIssuer;\n \n-    private ScopesIssuer() {\n+    public ScopesIssuer() {\n \n     }\n \n-    public static void loadInstance(List<String> whitelist) {\n-\n-        scopesIssuer = new ScopesIssuer();\n+    public static void loadInstance(List<String> whitelist) throws APIKeyMgtException{\n+        APIManagerConfiguration configParser = ServiceReferenceHolder.getInstance().getAPIManagerConfigurationService()", "originalCommit": "e39d97ee93ef1305ee2cb0f5d0aea4b93f90fedf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0MzU4Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8248#discussion_r384343582", "bodyText": "fixed in 0f79f06", "author": "shilmyhasan", "createdAt": "2020-02-26T08:45:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzgwMjI4NQ=="}], "type": "inlineReview", "revised_code": {"commit": "0f79f06894f367c51340a467bfb987559791776c", "chunk": "diff --git a/components/apimgt/org.wso2.carbon.apimgt.keymgt/src/main/java/org/wso2/carbon/apimgt/keymgt/ScopesIssuer.java b/components/apimgt/org.wso2.carbon.apimgt.keymgt/src/main/java/org/wso2/carbon/apimgt/keymgt/ScopesIssuer.java\nindex 21bcff95caf..b8e47317b5b 100644\n--- a/components/apimgt/org.wso2.carbon.apimgt.keymgt/src/main/java/org/wso2/carbon/apimgt/keymgt/ScopesIssuer.java\n+++ b/components/apimgt/org.wso2.carbon.apimgt.keymgt/src/main/java/org/wso2/carbon/apimgt/keymgt/ScopesIssuer.java\n\n@@ -51,10 +51,10 @@ public class ScopesIssuer {\n     }\n \n     public static void loadInstance(List<String> whitelist) throws APIKeyMgtException{\n-        APIManagerConfiguration configParser = ServiceReferenceHolder.getInstance().getAPIManagerConfigurationService()\n+        APIManagerConfiguration apiManagerConfiguration = ServiceReferenceHolder.getInstance().getAPIManagerConfigurationService()\n                 .getAPIManagerConfiguration();\n-        if (configParser != null) {\n-            String scopeIssuerClass = configParser.getFirstProperty(CONFIG_ELEM_SCOPE_ISSUER);\n+        if (apiManagerConfiguration != null) {\n+            String scopeIssuerClass = apiManagerConfiguration.getFirstProperty(CONFIG_ELEM_SCOPE_ISSUER);\n             if (scopeIssuerClass != null) {\n                 try {\n                     scopesIssuer = (ScopesIssuer) APIUtil.getClassForName(scopeIssuerClass).newInstance();\n"}}, {"oid": "0f79f06894f367c51340a467bfb987559791776c", "url": "https://github.com/wso2/carbon-apimgt/commit/0f79f06894f367c51340a467bfb987559791776c", "message": "refactor configname", "committedDate": "2020-02-26T08:41:49Z", "type": "commit"}]}