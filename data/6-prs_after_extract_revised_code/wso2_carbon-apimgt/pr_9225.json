{"pr_number": 9225, "pr_title": "Ignoring inserting empty values to avoid error in IBM DB2", "pr_createdAt": "2020-08-20T13:54:41Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/9225", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAxMDA5Nw==", "url": "https://github.com/wso2/carbon-apimgt/pull/9225#discussion_r474010097", "bodyText": "use entry set", "author": "tharindu1st", "createdAt": "2020-08-20T14:06:12Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java", "diffHunk": "@@ -13555,11 +13555,13 @@ private void addApplicationAttributes(Connection conn, Map<String, String> attri\n             if (attributes != null) {\n                 ps = conn.prepareStatement(SQLConstants.ADD_APPLICATION_ATTRIBUTES_SQL);\n                 for (String key : attributes.keySet()) {", "originalCommit": "0961423687b44fea3666bde8181dd039f4b4040c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c58be459bc0f6087dc82f8a21612b950ab01b222", "chunk": "diff --git a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java\nindex 7fd9161acc1..8c757e9d877 100644\n--- a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java\n+++ b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java\n\n@@ -13554,11 +13554,11 @@ public class ApiMgtDAO {\n         try {\n             if (attributes != null) {\n                 ps = conn.prepareStatement(SQLConstants.ADD_APPLICATION_ATTRIBUTES_SQL);\n-                for (String key : attributes.keySet()) {\n-                    if (!StringUtils.isEmpty(key) && !StringUtils.isEmpty(attributes.get(key))) {\n+                for (Map.Entry<String, String> attribute : attributes.entrySet()) {\n+                    if (StringUtils.isNotEmpty(attribute.getKey()) && StringUtils.isNotEmpty(attribute.getValue())) {\n                         ps.setInt(1, applicationId);\n-                        ps.setString(2, key);\n-                        ps.setString(3, attributes.get(key));\n+                        ps.setString(2, attribute.getKey());\n+                        ps.setString(3, attribute.getValue());\n                         ps.setInt(4, tenantId);\n                         ps.addBatch();\n                     }\n"}}, {"oid": "c58be459bc0f6087dc82f8a21612b950ab01b222", "url": "https://github.com/wso2/carbon-apimgt/commit/c58be459bc0f6087dc82f8a21612b950ab01b222", "message": "Ignoring inserting empty values to avoid error in DB2", "committedDate": "2020-08-20T14:16:33Z", "type": "commit"}, {"oid": "c58be459bc0f6087dc82f8a21612b950ab01b222", "url": "https://github.com/wso2/carbon-apimgt/commit/c58be459bc0f6087dc82f8a21612b950ab01b222", "message": "Ignoring inserting empty values to avoid error in DB2", "committedDate": "2020-08-20T14:16:33Z", "type": "forcePushed"}]}