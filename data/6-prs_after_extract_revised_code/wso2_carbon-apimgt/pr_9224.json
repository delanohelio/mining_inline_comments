{"pr_number": 9224, "pr_title": "Fix DAO code resource managemnet issues", "pr_createdAt": "2020-08-20T13:30:42Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/9224", "timeline": [{"oid": "38677c41b88ce5bb8a4b12238f6299f42ab4ef31", "url": "https://github.com/wso2/carbon-apimgt/commit/38677c41b88ce5bb8a4b12238f6299f42ab4ef31", "message": "Fix unclosed ResultSets", "committedDate": "2020-08-20T12:40:45Z", "type": "commit"}, {"oid": "7a37a98af7e3843ec0036e7e8632d36637e39c34", "url": "https://github.com/wso2/carbon-apimgt/commit/7a37a98af7e3843ec0036e7e8632d36637e39c34", "message": "Add util method for connection rollbacks", "committedDate": "2020-08-20T12:41:17Z", "type": "commit"}, {"oid": "7034497a1f29fd0b1688e5bf2158fe61085b6182", "url": "https://github.com/wso2/carbon-apimgt/commit/7034497a1f29fd0b1688e5bf2158fe61085b6182", "message": "Do rollback when commit fails", "committedDate": "2020-08-20T12:41:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAwNjg3Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/9224#discussion_r474006872", "bodyText": "shall we fix the variable names while we're doing this?", "author": "bhathiya", "createdAt": "2020-08-20T14:01:42Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/GatewayArtifactsMgtDAO.java", "diffHunk": "@@ -56,15 +57,17 @@ public boolean addGatewayPublishedAPIDetails(String APIId, String APIName, Strin\n         boolean result = false;\n         try (Connection connection = GatewayArtifactsMgtDBUtil.getArtifactSynchronizerConnection()) {\n             connection.setAutoCommit(false);\n-                try (PreparedStatement statement = connection\n-                        .prepareStatement(SQLConstants.ADD_GW_PUBLISHED_API_DETAILS)) {\n-                    statement.setString(1, APIId);\n-                    statement.setString(2, APIName);\n-                    statement.setString(3, version);\n-                    statement.setString(4, tenantDomain);\n-                    result = statement.executeUpdate() == 1;\n-                }\n-            connection.commit();\n+            try (PreparedStatement statement = connection.prepareStatement(SQLConstants.ADD_GW_PUBLISHED_API_DETAILS)) {\n+                statement.setString(1, APIId);\n+                statement.setString(2, APIName);", "originalCommit": "7034497a1f29fd0b1688e5bf2158fe61085b6182", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}]}