{"pr_number": 8335, "pr_title": "Fixing subscriptions are auto assigning issue to new versions", "pr_createdAt": "2020-03-11T04:59:12Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8335", "timeline": [{"oid": "66a04a41bd20176666ad8d3f1b94c3c1ff573e58", "url": "https://github.com/wso2/carbon-apimgt/commit/66a04a41bd20176666ad8d3f1b94c3c1ff573e58", "message": "Fixing subscriptions are auto assigning issue to new versions", "committedDate": "2020-03-11T04:48:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc0NzEwMg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8335#discussion_r390747102", "bodyText": "what is that magic number 1 ? :P Please use a constant", "author": "malinthaprasan", "createdAt": "2020-03-11T05:01:20Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIImportUtil.java", "diffHunk": "@@ -434,6 +434,7 @@ public static void importAPI(String pathToArchive, String currentUser, boolean i\n             // Change API lifecycle if state transition is required\n             if (StringUtils.isNotEmpty(lifecycleAction)) {\n                 log.info(\"Changing lifecycle from \" + currentStatus + \" to \" + targetStatus);\n+                apiProvider.changeAPILCCheckListItems(importedApi.getId(), 1, true);", "originalCommit": "66a04a41bd20176666ad8d3f1b94c3c1ff573e58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg1MzA4Ng==", "url": "https://github.com/wso2/carbon-apimgt/pull/8335#discussion_r390853086", "bodyText": "It picked the checkItem of \"Requires re-subscription when to publish the API\" from checkItem List\n\nRequires re-subscription when to publish the API - 1\nDeprecate old versions after publishing the API - 0", "author": "HiranyaKavishani", "createdAt": "2020-03-11T09:50:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc0NzEwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg2MjgyMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8335#discussion_r390862821", "bodyText": "Done with 1291d97", "author": "HiranyaKavishani", "createdAt": "2020-03-11T10:06:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc0NzEwMg=="}], "type": "inlineReview", "revised_code": {"commit": "1291d974f0ea49f2eb61114428f473fb3811d844", "chunk": "diff --git a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIImportUtil.java b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIImportUtil.java\nindex 73c295d8a71..1209f901758 100644\n--- a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIImportUtil.java\n+++ b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIImportUtil.java\n\n@@ -434,7 +434,8 @@ public final class APIImportUtil {\n             // Change API lifecycle if state transition is required\n             if (StringUtils.isNotEmpty(lifecycleAction)) {\n                 log.info(\"Changing lifecycle from \" + currentStatus + \" to \" + targetStatus);\n-                apiProvider.changeAPILCCheckListItems(importedApi.getId(), 1, true);\n+                apiProvider.changeAPILCCheckListItems(importedApi.getId(),\n+                        APIImportExportConstants.REFER_REQUIRE_RE_SUBSCRIPTION_CHECK_ITEM, true);\n                 apiProvider.changeLifeCycleStatus(importedApi.getId(), lifecycleAction);\n                 //Change the status of the imported API to targetStatus\n                 importedApi.setStatus(targetStatus);\n"}}, {"oid": "1291d974f0ea49f2eb61114428f473fb3811d844", "url": "https://github.com/wso2/carbon-apimgt/commit/1291d974f0ea49f2eb61114428f473fb3811d844", "message": "Adding require-re-subscription check item as constant", "committedDate": "2020-03-11T10:04:54Z", "type": "commit"}]}