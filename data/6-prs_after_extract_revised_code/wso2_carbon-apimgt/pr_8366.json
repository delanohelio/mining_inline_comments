{"pr_number": 8366, "pr_title": "add default claim mapping for openid claim dialect", "pr_createdAt": "2020-03-17T10:00:02Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8366", "timeline": [{"oid": "f5e22fe94f5672c6953820376da610db31194d6a", "url": "https://github.com/wso2/carbon-apimgt/commit/f5e22fe94f5672c6953820376da610db31194d6a", "message": "add default claim mapping for openid claim dialect", "committedDate": "2020-03-17T10:01:04Z", "type": "commit"}, {"oid": "f5e22fe94f5672c6953820376da610db31194d6a", "url": "https://github.com/wso2/carbon-apimgt/commit/f5e22fe94f5672c6953820376da610db31194d6a", "message": "add default claim mapping for openid claim dialect", "committedDate": "2020-03-17T10:01:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NDUyOQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8366#discussion_r393584529", "bodyText": "space is needed.", "author": "isharac", "createdAt": "2020-03-17T10:37:59Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java", "diffHunk": "@@ -1304,6 +1305,12 @@ private void setJWTTokenIssuers(OMElement omElement) {\n             OMElement claimMappingsElement =\n                     issuerElement.getFirstChildWithName(new QName(APIConstants.TokenIssuer.CLAIM_MAPPINGS));\n             if (claimMappingsElement != null) {\n+                OMAttribute disableDefaultClaimMappingAttribute =\n+                        claimMappingsElement.getAttribute(new QName(\"disable-default-claim-mapping\"));\n+                if (disableDefaultClaimMappingAttribute != null){", "originalCommit": "f5e22fe94f5672c6953820376da610db31194d6a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4d87479154e6fce6db3f9f9fc5f1b23dc395bc1e", "chunk": "diff --git a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java\nindex 4e1b8776795..14a797d0bc1 100644\n--- a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java\n+++ b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java\n\n@@ -1307,7 +1307,7 @@ public class APIManagerConfiguration {\n             if (claimMappingsElement != null) {\n                 OMAttribute disableDefaultClaimMappingAttribute =\n                         claimMappingsElement.getAttribute(new QName(\"disable-default-claim-mapping\"));\n-                if (disableDefaultClaimMappingAttribute != null){\n+                if (disableDefaultClaimMappingAttribute != null) {\n                     String disableDefaultClaimMapping = disableDefaultClaimMappingAttribute.getAttributeValue();\n                     tokenIssuerDto.setDisableDefaultClaimMapping(Boolean.parseBoolean(disableDefaultClaimMapping));\n                 }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU4NDYzMg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8366#discussion_r393584632", "bodyText": "a space needed.", "author": "isharac", "createdAt": "2020-03-17T10:38:09Z", "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/jwt/transformer/DefaultJWTTransformer.java", "diffHunk": "@@ -24,14 +24,15 @@\n import org.wso2.carbon.apimgt.impl.dto.TokenIssuerDto;\n \n import java.util.Map;\n-\n+import java.util.Properties;\n \n public class DefaultJWTTransformer implements JWTTransformer {\n \n     private JWTConfigurationDto jwtConfigurationDto;\n+    private Properties defaultClaimMappings;\n+    public DefaultJWTTransformer(JWTConfigurationDto jwtConfigurationDto,Properties defaultClaimMappings) {", "originalCommit": "f5e22fe94f5672c6953820376da610db31194d6a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "63eaffddd4be371485c1a9e7f99694d44d8118d4", "chunk": "diff --git a/components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/jwt/transformer/DefaultJWTTransformer.java b/components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/jwt/transformer/DefaultJWTTransformer.java\nindex e252592ff5f..0a8510b7e65 100644\n--- a/components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/jwt/transformer/DefaultJWTTransformer.java\n+++ b/components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/jwt/transformer/DefaultJWTTransformer.java\n\n@@ -30,7 +30,8 @@ public class DefaultJWTTransformer implements JWTTransformer {\n \n     private JWTConfigurationDto jwtConfigurationDto;\n     private Properties defaultClaimMappings;\n-    public DefaultJWTTransformer(JWTConfigurationDto jwtConfigurationDto,Properties defaultClaimMappings) {\n+\n+    public DefaultJWTTransformer(JWTConfigurationDto jwtConfigurationDto, Properties defaultClaimMappings) {\n \n         this.defaultClaimMappings = defaultClaimMappings;\n         this.jwtConfigurationDto = jwtConfigurationDto;\n"}}, {"oid": "63eaffddd4be371485c1a9e7f99694d44d8118d4", "url": "https://github.com/wso2/carbon-apimgt/commit/63eaffddd4be371485c1a9e7f99694d44d8118d4", "message": "add unit testcase", "committedDate": "2020-03-17T10:41:31Z", "type": "forcePushed"}, {"oid": "4d87479154e6fce6db3f9f9fc5f1b23dc395bc1e", "url": "https://github.com/wso2/carbon-apimgt/commit/4d87479154e6fce6db3f9f9fc5f1b23dc395bc1e", "message": "add unit testcase", "committedDate": "2020-03-17T10:42:46Z", "type": "commit"}, {"oid": "4d87479154e6fce6db3f9f9fc5f1b23dc395bc1e", "url": "https://github.com/wso2/carbon-apimgt/commit/4d87479154e6fce6db3f9f9fc5f1b23dc395bc1e", "message": "add unit testcase", "committedDate": "2020-03-17T10:42:46Z", "type": "forcePushed"}]}