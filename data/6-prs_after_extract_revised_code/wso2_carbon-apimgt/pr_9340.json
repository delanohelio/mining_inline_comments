{"pr_number": 9340, "pr_title": "[Add Feature] Synchronizing Throttle Policies within Traffic Manager nodes", "pr_createdAt": "2020-10-27T09:46:06Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/9340", "timeline": [{"oid": "f791a97135684eb574604087f22a97f6281abeb6", "url": "https://github.com/wso2/carbon-apimgt/commit/f791a97135684eb574604087f22a97f6281abeb6", "message": "Remove throttle policy deploying code from impl", "committedDate": "2020-10-27T09:50:21Z", "type": "forcePushed"}, {"oid": "3dd07b3576bb1c08a8d198c7577cf4a0d5e02ea3", "url": "https://github.com/wso2/carbon-apimgt/commit/3dd07b3576bb1c08a8d198c7577cf4a0d5e02ea3", "message": "Refactor code", "committedDate": "2020-10-27T10:09:58Z", "type": "forcePushed"}, {"oid": "f7c549975af78b2aceb3338e80b755df03253b07", "url": "https://github.com/wso2/carbon-apimgt/commit/f7c549975af78b2aceb3338e80b755df03253b07", "message": "Refactor code", "committedDate": "2020-10-27T13:28:33Z", "type": "forcePushed"}, {"oid": "d6c0bab3f9475610cc4c4a613f4d2dbf89b0b7f4", "url": "https://github.com/wso2/carbon-apimgt/commit/d6c0bab3f9475610cc4c4a613f4d2dbf89b0b7f4", "message": "Refactor code", "committedDate": "2020-10-27T14:47:33Z", "type": "forcePushed"}, {"oid": "54dc603e96ca96b0de0eb52358959f0f5a4df438", "url": "https://github.com/wso2/carbon-apimgt/commit/54dc603e96ca96b0de0eb52358959f0f5a4df438", "message": "Refactor code", "committedDate": "2020-10-27T15:08:52Z", "type": "forcePushed"}, {"oid": "6587d4e8b616071dd17bc8e9fddf491d7454f4d3", "url": "https://github.com/wso2/carbon-apimgt/commit/6587d4e8b616071dd17bc8e9fddf491d7454f4d3", "message": "Fix review comments", "committedDate": "2020-10-29T08:06:34Z", "type": "forcePushed"}, {"oid": "aff6ca3353ae3834c505d605ebdde4c88786c732", "url": "https://github.com/wso2/carbon-apimgt/commit/aff6ca3353ae3834c505d605ebdde4c88786c732", "message": "Fix review comments", "committedDate": "2020-10-30T05:23:01Z", "type": "forcePushed"}, {"oid": "f5043fe7808485346dc20353b6580055481fe659", "url": "https://github.com/wso2/carbon-apimgt/commit/f5043fe7808485346dc20353b6580055481fe659", "message": "Fix review comments", "committedDate": "2020-10-31T11:48:29Z", "type": "forcePushed"}, {"oid": "5501df3f70a4d3c4d4576dd9d55dc9cee644438e", "url": "https://github.com/wso2/carbon-apimgt/commit/5501df3f70a4d3c4d4576dd9d55dc9cee644438e", "message": "Fix review comments", "committedDate": "2020-11-01T10:50:50Z", "type": "forcePushed"}, {"oid": "bcd8270cb88450c0330c92612e261e10a3d6beb0", "url": "https://github.com/wso2/carbon-apimgt/commit/bcd8270cb88450c0330c92612e261e10a3d6beb0", "message": "Fix review comments", "committedDate": "2020-11-02T03:18:54Z", "type": "forcePushed"}, {"oid": "823559b3ddac1652e41ec9846000be2bf0457549", "url": "https://github.com/wso2/carbon-apimgt/commit/823559b3ddac1652e41ec9846000be2bf0457549", "message": "Add checkstyle and findbugs", "committedDate": "2020-11-02T10:19:36Z", "type": "forcePushed"}, {"oid": "ef1865b6801dc18269b30d356c278460277e9c93", "url": "https://github.com/wso2/carbon-apimgt/commit/ef1865b6801dc18269b30d356c278460277e9c93", "message": "Update skip redeploying policies config", "committedDate": "2020-11-05T11:22:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc0MTQ1Nw==", "url": "https://github.com/wso2/carbon-apimgt/pull/9340#discussion_r515741457", "bodyText": "we can use array of", "author": "tharindu1st", "createdAt": "2020-11-02T05:03:18Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java", "diffHunk": "@@ -854,6 +854,14 @@ private void setThrottleProperties(OMElement element) {\n                 throttleProperties.setEnableQueryParamConditions(JavaUtils.isTrueExplicitly(enableQueryParamElement\n                         .getText()));\n             }\n+            // Check excluded throttle policies\n+            OMElement excludedThrottlePoliciesElement = throttleConfigurationElement\n+                    .getFirstChildWithName(new QName(APIConstants.AdvancedThrottleConstants\n+                            .EXCLUDE_THROTTLE_POLICIES));\n+            if (excludedThrottlePoliciesElement != null) {\n+                throttleProperties.setExcludedThrottlePolicies(excludedThrottlePoliciesElement", "originalCommit": "bcd8270cb88450c0330c92612e261e10a3d6beb0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "ef1865b6801dc18269b30d356c278460277e9c93", "chunk": "diff --git a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java\nindex e8a6e958e72..8ec32fa702f 100644\n--- a/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java\n+++ b/components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIManagerConfiguration.java\n\n@@ -854,12 +854,12 @@ public class APIManagerConfiguration {\n                 throttleProperties.setEnableQueryParamConditions(JavaUtils.isTrueExplicitly(enableQueryParamElement\n                         .getText()));\n             }\n-            // Check excluded throttle policies\n-            OMElement excludedThrottlePoliciesElement = throttleConfigurationElement\n+            // Check skip redeploy throttle policies\n+            OMElement skipRedeployingPoliciesElement = throttleConfigurationElement\n                     .getFirstChildWithName(new QName(APIConstants.AdvancedThrottleConstants\n-                            .EXCLUDE_THROTTLE_POLICIES));\n-            if (excludedThrottlePoliciesElement != null) {\n-                throttleProperties.setExcludedThrottlePolicies(excludedThrottlePoliciesElement\n+                            .SKIP_REDEPLOYING_POLICIES));\n+            if (skipRedeployingPoliciesElement != null) {\n+                throttleProperties.setSkipRedeployingPolicies(skipRedeployingPoliciesElement\n                         .getText().split(APIConstants.DELEM_COMMA));\n             }\n             // Check subscription spike arrest enable\n"}}, {"oid": "3d3c730b6984e102727ab3b6e4a299256f3c86d7", "url": "https://github.com/wso2/carbon-apimgt/commit/3d3c730b6984e102727ab3b6e4a299256f3c86d7", "message": "Add throttle policy deployer module", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "791746cd23455ac16e6fb8a7aa45b5fb37cb9e52", "url": "https://github.com/wso2/carbon-apimgt/commit/791746cd23455ac16e6fb8a7aa45b5fb37cb9e52", "message": "Add policy template builder", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "10d6ff48663de1b896708cf667efa03732410928", "url": "https://github.com/wso2/carbon-apimgt/commit/10d6ff48663de1b896708cf667efa03732410928", "message": "Add event processor service call", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "775ad8c286c08bae2d7f23bd00c13266d805de37", "url": "https://github.com/wso2/carbon-apimgt/commit/775ad8c286c08bae2d7f23bd00c13266d805de37", "message": "Refactor code", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "2766dbb0d5809d86e6dd17dac32f24a13decaf0b", "url": "https://github.com/wso2/carbon-apimgt/commit/2766dbb0d5809d86e6dd17dac32f24a13decaf0b", "message": "Add subscription policy loader", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "3d1d74778c4f549f948e4ba2e100e5bcc7063fd9", "url": "https://github.com/wso2/carbon-apimgt/commit/3d1d74778c4f549f948e4ba2e100e5bcc7063fd9", "message": "Add application policy deploying functionality", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "95ddd567b57b356ff09c3d2e528cc43b5484cf37", "url": "https://github.com/wso2/carbon-apimgt/commit/95ddd567b57b356ff09c3d2e528cc43b5484cf37", "message": "Add API policy deploying support", "committedDate": "2020-11-09T03:01:39Z", "type": "commit"}, {"oid": "ac344356d2eb66c8693658dec48c6318be34cfa9", "url": "https://github.com/wso2/carbon-apimgt/commit/ac344356d2eb66c8693658dec48c6318be34cfa9", "message": "Add Global policy deploying support", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "dc691f8d1c8216efa1ace969653208d8ee749440", "url": "https://github.com/wso2/carbon-apimgt/commit/dc691f8d1c8216efa1ace969653208d8ee749440", "message": "Add excluded policies config", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "58344bf999f7ff55bfae7e2ef3572b7ecdd69cfa", "url": "https://github.com/wso2/carbon-apimgt/commit/58344bf999f7ff55bfae7e2ef3572b7ecdd69cfa", "message": "Fix startup errors", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "d43a67ddd3834d3c9f5ad759a4e45e5555a8ac2c", "url": "https://github.com/wso2/carbon-apimgt/commit/d43a67ddd3834d3c9f5ad759a4e45e5555a8ac2c", "message": "Add PolicyUtil test cases", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "77038ba1d54c4b1caf572aaa249007b24ebc258b", "url": "https://github.com/wso2/carbon-apimgt/commit/77038ba1d54c4b1caf572aaa249007b24ebc258b", "message": "Fix tenant policy deploying", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "2a563fa404f9eecd9b8310f851b6cc069a020852", "url": "https://github.com/wso2/carbon-apimgt/commit/2a563fa404f9eecd9b8310f851b6cc069a020852", "message": "ThrottlingPolicyTemplateBuilder Test Cases", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "030aa57d3d2d0d2e96a6b3d03d2e29ec4aa1dd31", "url": "https://github.com/wso2/carbon-apimgt/commit/030aa57d3d2d0d2e96a6b3d03d2e29ec4aa1dd31", "message": "Remove throttle policy deploying code from impl", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "53af53590df3b94b8a665c03f1d19016f40c14f5", "url": "https://github.com/wso2/carbon-apimgt/commit/53af53590df3b94b8a665c03f1d19016f40c14f5", "message": "Refactor code", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "4bfe95a24d1e9961e67152b2b880533233a140a3", "url": "https://github.com/wso2/carbon-apimgt/commit/4bfe95a24d1e9961e67152b2b880533233a140a3", "message": "Fix review comments", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "66a93be4583f9c114aef6ebb41c3aaa6bda97b4e", "url": "https://github.com/wso2/carbon-apimgt/commit/66a93be4583f9c114aef6ebb41c3aaa6bda97b4e", "message": "Add checkstyle and findbugs", "committedDate": "2020-11-09T03:01:40Z", "type": "commit"}, {"oid": "b524b64e0923e358eb9deca9e42b8ccce1e984e9", "url": "https://github.com/wso2/carbon-apimgt/commit/b524b64e0923e358eb9deca9e42b8ccce1e984e9", "message": "Update skip redeploying policies config", "committedDate": "2020-11-09T03:03:06Z", "type": "commit"}, {"oid": "b524b64e0923e358eb9deca9e42b8ccce1e984e9", "url": "https://github.com/wso2/carbon-apimgt/commit/b524b64e0923e358eb9deca9e42b8ccce1e984e9", "message": "Update skip redeploying policies config", "committedDate": "2020-11-09T03:03:06Z", "type": "forcePushed"}]}