{"pr_number": 14205, "pr_title": "Remove unused HiveFileContext in OrcReader", "pr_createdAt": "2020-03-04T06:21:07Z", "pr_url": "https://github.com/prestodb/presto/pull/14205", "timeline": [{"oid": "17d7f26f1d3da23166e08145113ce15e89127702", "url": "https://github.com/prestodb/presto/commit/17d7f26f1d3da23166e08145113ce15e89127702", "message": "Remove unused HiveFileContext in OrcReader", "committedDate": "2020-03-04T17:19:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0NDgzNw==", "url": "https://github.com/prestodb/presto/pull/14205#discussion_r387844837", "bodyText": "nit: same line as last argument", "author": "shixuan-fan", "createdAt": "2020-03-04T18:14:32Z", "path": "presto-raptor/src/test/java/com/facebook/presto/raptor/storage/OrcTestingUtil.java", "diffHunk": "@@ -99,8 +99,8 @@ public static OrcBatchRecordReader createRecordReader(OrcReader orcReader, Map<I\n                 OrcPredicate.TRUE,\n                 DateTimeZone.UTC,\n                 newSimpleAggregatedMemoryContext(),\n-                MAX_BATCH_SIZE,\n-                DEFAULT_HIVE_FILE_CONTEXT);\n+                MAX_BATCH_SIZE\n+        );", "originalCommit": "17d7f26f1d3da23166e08145113ce15e89127702", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d74cfebc213246289012cd06f181243453ef5cdf", "chunk": "diff --git a/presto-raptor/src/test/java/com/facebook/presto/raptor/storage/OrcTestingUtil.java b/presto-raptor/src/test/java/com/facebook/presto/raptor/storage/OrcTestingUtil.java\nindex 8f0b45ba6b..61791d26fd 100644\n--- a/presto-raptor/src/test/java/com/facebook/presto/raptor/storage/OrcTestingUtil.java\n+++ b/presto-raptor/src/test/java/com/facebook/presto/raptor/storage/OrcTestingUtil.java\n\n@@ -99,8 +99,7 @@ final class OrcTestingUtil\n                 OrcPredicate.TRUE,\n                 DateTimeZone.UTC,\n                 newSimpleAggregatedMemoryContext(),\n-                MAX_BATCH_SIZE\n-        );\n+                MAX_BATCH_SIZE);\n     }\n \n     public static byte[] octets(int... values)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0NDkxMw==", "url": "https://github.com/prestodb/presto/pull/14205#discussion_r387844913", "bodyText": "nit: same line as last argument", "author": "shixuan-fan", "createdAt": "2020-03-04T18:14:42Z", "path": "presto-raptor/src/main/java/com/facebook/presto/raptor/storage/ShardStats.java", "diffHunk": "@@ -78,8 +77,8 @@ private static ColumnStats doComputeColumnStats(OrcReader orcReader, long column\n                 OrcPredicate.TRUE,\n                 UTC,\n                 newSimpleAggregatedMemoryContext(),\n-                INITIAL_BATCH_SIZE,\n-                DEFAULT_HIVE_FILE_CONTEXT);\n+                INITIAL_BATCH_SIZE\n+        );", "originalCommit": "17d7f26f1d3da23166e08145113ce15e89127702", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d74cfebc213246289012cd06f181243453ef5cdf", "chunk": "diff --git a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/ShardStats.java b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/ShardStats.java\nindex 31651fba9a..6c1f4702bc 100644\n--- a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/ShardStats.java\n+++ b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/ShardStats.java\n\n@@ -77,8 +77,7 @@ public final class ShardStats\n                 OrcPredicate.TRUE,\n                 UTC,\n                 newSimpleAggregatedMemoryContext(),\n-                INITIAL_BATCH_SIZE\n-        );\n+                INITIAL_BATCH_SIZE);\n \n         if (type.equals(BOOLEAN)) {\n             return indexBoolean(reader, columnIndex, columnId);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0NTA2NA==", "url": "https://github.com/prestodb/presto/pull/14205#discussion_r387845064", "bodyText": "nit: same line as last argument", "author": "shixuan-fan", "createdAt": "2020-03-04T18:14:57Z", "path": "presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java", "diffHunk": "@@ -398,8 +398,8 @@ public ConnectorPageSource getPageSource(\n                     OrcPredicate.TRUE,\n                     DEFAULT_STORAGE_TIMEZONE,\n                     systemMemoryUsage,\n-                    INITIAL_BATCH_SIZE,\n-                    DEFAULT_HIVE_FILE_CONTEXT)) {\n+                    INITIAL_BATCH_SIZE\n+            )) {", "originalCommit": "17d7f26f1d3da23166e08145113ce15e89127702", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d74cfebc213246289012cd06f181243453ef5cdf", "chunk": "diff --git a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java\nindex 85214bfabb..5cf2d3986d 100644\n--- a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java\n+++ b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java\n\n@@ -398,8 +397,7 @@ public class OrcStorageManager\n                     OrcPredicate.TRUE,\n                     DEFAULT_STORAGE_TIMEZONE,\n                     systemMemoryUsage,\n-                    INITIAL_BATCH_SIZE\n-            )) {\n+                    INITIAL_BATCH_SIZE)) {\n                 BitSet bitSet = new BitSet();\n                 while (recordReader.nextBatch() > 0) {\n                     Block block = recordReader.readBlock(0);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0NTExMQ==", "url": "https://github.com/prestodb/presto/pull/14205#discussion_r387845111", "bodyText": "nit: same line as last argument", "author": "shixuan-fan", "createdAt": "2020-03-04T18:15:02Z", "path": "presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java", "diffHunk": "@@ -325,8 +325,8 @@ public ConnectorPageSource getPageSource(\n                     predicate,\n                     DEFAULT_STORAGE_TIMEZONE,\n                     systemMemoryUsage,\n-                    INITIAL_BATCH_SIZE,\n-                    hiveFileContext);\n+                    INITIAL_BATCH_SIZE\n+            );", "originalCommit": "17d7f26f1d3da23166e08145113ce15e89127702", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d74cfebc213246289012cd06f181243453ef5cdf", "chunk": "diff --git a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java\nindex 85214bfabb..5cf2d3986d 100644\n--- a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java\n+++ b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcStorageManager.java\n\n@@ -325,8 +325,7 @@ public class OrcStorageManager\n                     predicate,\n                     DEFAULT_STORAGE_TIMEZONE,\n                     systemMemoryUsage,\n-                    INITIAL_BATCH_SIZE\n-            );\n+                    INITIAL_BATCH_SIZE);\n \n             Optional<ShardRewriter> shardRewriter = Optional.empty();\n             if (transactionId.isPresent()) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0NTE1Ng==", "url": "https://github.com/prestodb/presto/pull/14205#discussion_r387845156", "bodyText": "nit: same line as last argument", "author": "shixuan-fan", "createdAt": "2020-03-04T18:15:07Z", "path": "presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcFileRewriter.java", "diffHunk": "@@ -175,8 +175,8 @@ public OrcFileInfo rewrite(FileSystem fileSystem, Map<String, Type> allColumnTyp\n                             TRUE,\n                             DEFAULT_STORAGE_TIMEZONE,\n                             newSimpleAggregatedMemoryContext(),\n-                            INITIAL_BATCH_SIZE,\n-                            DEFAULT_HIVE_FILE_CONTEXT),\n+                            INITIAL_BATCH_SIZE\n+                    ),", "originalCommit": "17d7f26f1d3da23166e08145113ce15e89127702", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "d74cfebc213246289012cd06f181243453ef5cdf", "chunk": "diff --git a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcFileRewriter.java b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcFileRewriter.java\nindex ef3c430312..068e569f1c 100644\n--- a/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcFileRewriter.java\n+++ b/presto-raptor/src/main/java/com/facebook/presto/raptor/storage/OrcFileRewriter.java\n\n@@ -175,8 +175,7 @@ public final class OrcFileRewriter\n                             TRUE,\n                             DEFAULT_STORAGE_TIMEZONE,\n                             newSimpleAggregatedMemoryContext(),\n-                            INITIAL_BATCH_SIZE\n-                    ),\n+                            INITIAL_BATCH_SIZE),\n                     OrcBatchRecordReader::close);\n                     Closer<OrcWriter, IOException> writer = closer(new OrcWriter(\n                             orcDataEnvironment.createOrcDataSink(fileSystem, output),\n"}}, {"oid": "d74cfebc213246289012cd06f181243453ef5cdf", "url": "https://github.com/prestodb/presto/commit/d74cfebc213246289012cd06f181243453ef5cdf", "message": "Remove unused HiveFileContext in OrcReader", "committedDate": "2020-03-04T21:30:13Z", "type": "commit"}, {"oid": "d74cfebc213246289012cd06f181243453ef5cdf", "url": "https://github.com/prestodb/presto/commit/d74cfebc213246289012cd06f181243453ef5cdf", "message": "Remove unused HiveFileContext in OrcReader", "committedDate": "2020-03-04T21:30:13Z", "type": "forcePushed"}]}