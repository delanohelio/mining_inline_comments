{"pr_number": 14640, "pr_title": "Add Presto JDBC URL flag to add session property overrides", "pr_createdAt": "2020-06-12T02:36:02Z", "pr_url": "https://github.com/prestodb/presto/pull/14640", "timeline": [{"oid": "6acacdd2ceab4aca14b2f4908007e3021f61df73", "url": "https://github.com/prestodb/presto/commit/6acacdd2ceab4aca14b2f4908007e3021f61df73", "message": "Refactor map parsing in Presto JDBC connection URL", "committedDate": "2020-06-12T02:34:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyMTk5OA==", "url": "https://github.com/prestodb/presto/pull/14640#discussion_r440321998", "bodyText": "we should either use SESSION_PROPERTIES.getKey or rename the test that tests extra credentials. And have another test for SESSION_PROPERTIES to make sure if behavior changes for SESSION_PROPERTIES, test breaks and need to be fixed.", "author": "swapsmagic", "createdAt": "2020-06-15T17:07:33Z", "path": "presto-jdbc/src/test/java/com/facebook/presto/jdbc/TestPrestoDriverUri.java", "diffHunk": "@@ -235,6 +238,16 @@ public void testUriWithExtraCredentials()\n         assertEquals(properties.getProperty(EXTRA_CREDENTIALS.getKey()), extraCredentials);\n     }\n \n+    @Test\n+    public void testUriWithSessionProperties()\n+            throws SQLException\n+    {\n+        String sessionProperties = \"sessionProp1:sessionValue1;sessionProp2:sessionValue2\";\n+        PrestoDriverUri parameters = createDriverUri(\"presto://localhost:8080?extraCredentials=\" + sessionProperties);\n+        Properties properties = parameters.getProperties();\n+        assertEquals(properties.getProperty(EXTRA_CREDENTIALS.getKey()), sessionProperties);", "originalCommit": "40552641e7704f365a1f1b47676b8f98b164598e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyNTE3NA==", "url": "https://github.com/prestodb/presto/pull/14640#discussion_r440325174", "bodyText": "Thanks, you are correct.", "author": "tdcmeehan", "createdAt": "2020-06-15T17:13:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMyMTk5OA=="}], "type": "inlineReview", "revised_code": {"commit": "3337be9fbdabf6335315fefb3e28488a3971ffd2", "chunk": "diff --git a/presto-jdbc/src/test/java/com/facebook/presto/jdbc/TestPrestoDriverUri.java b/presto-jdbc/src/test/java/com/facebook/presto/jdbc/TestPrestoDriverUri.java\nindex d60f67b8f3..05a89a3e42 100644\n--- a/presto-jdbc/src/test/java/com/facebook/presto/jdbc/TestPrestoDriverUri.java\n+++ b/presto-jdbc/src/test/java/com/facebook/presto/jdbc/TestPrestoDriverUri.java\n\n@@ -243,9 +244,9 @@ public class TestPrestoDriverUri\n             throws SQLException\n     {\n         String sessionProperties = \"sessionProp1:sessionValue1;sessionProp2:sessionValue2\";\n-        PrestoDriverUri parameters = createDriverUri(\"presto://localhost:8080?extraCredentials=\" + sessionProperties);\n+        PrestoDriverUri parameters = createDriverUri(\"presto://localhost:8080?sessionProperties=\" + sessionProperties);\n         Properties properties = parameters.getProperties();\n-        assertEquals(properties.getProperty(EXTRA_CREDENTIALS.getKey()), sessionProperties);\n+        assertEquals(properties.getProperty(SESSION_PROPERTIES.getKey()), sessionProperties);\n     }\n \n     private static void assertUriPortScheme(PrestoDriverUri parameters, int port, String scheme)\n"}}, {"oid": "3337be9fbdabf6335315fefb3e28488a3971ffd2", "url": "https://github.com/prestodb/presto/commit/3337be9fbdabf6335315fefb3e28488a3971ffd2", "message": "Add Presto JDBC URL flag to add session property overrides\n\nSession property overrides can be specified by the sessionProperty flag,\nwith each session property separated by `;`, and each key value pair\nseparated by `:`.\n\nFor example:\n\n`presto://localhost:8080?sessionProperties=prop1:value1;prop2:value2`", "committedDate": "2020-06-15T17:13:21Z", "type": "commit"}, {"oid": "3337be9fbdabf6335315fefb3e28488a3971ffd2", "url": "https://github.com/prestodb/presto/commit/3337be9fbdabf6335315fefb3e28488a3971ffd2", "message": "Add Presto JDBC URL flag to add session property overrides\n\nSession property overrides can be specified by the sessionProperty flag,\nwith each session property separated by `;`, and each key value pair\nseparated by `:`.\n\nFor example:\n\n`presto://localhost:8080?sessionProperties=prop1:value1;prop2:value2`", "committedDate": "2020-06-15T17:13:21Z", "type": "forcePushed"}]}