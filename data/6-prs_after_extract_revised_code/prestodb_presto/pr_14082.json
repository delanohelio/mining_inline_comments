{"pr_number": 14082, "pr_title": "Add getPartitionNames support to Alluxio Metastore", "pr_createdAt": "2020-02-11T07:17:26Z", "pr_url": "https://github.com/prestodb/presto/pull/14082", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2NDQ0Mg==", "url": "https://github.com/prestodb/presto/pull/14082#discussion_r377864442", "bodyText": "nit: remove ImmutableList.", "author": "highker", "createdAt": "2020-02-11T19:55:46Z", "path": "presto-hive-metastore/src/main/java/com/facebook/presto/hive/metastore/alluxio/AlluxioHiveMetastore.java", "diffHunk": "@@ -282,7 +282,13 @@ public void dropColumn(String databaseName, String tableName, String columnName)\n     @Override\n     public Optional<List<String>> getPartitionNames(String databaseName, String tableName)\n     {\n-        throw new UnsupportedOperationException(\"getPartitionNames is not supported in AlluxioHiveMetastore\");\n+        try {\n+            List<PartitionInfo> partitionInfos = AlluxioProtoUtils.toPartitionInfoList(client.readTable(databaseName, tableName, Constraint.getDefaultInstance()));\n+            return Optional.of(partitionInfos.stream().map(PartitionInfo::getPartitionName).collect(ImmutableList.toImmutableList()));", "originalCommit": "983dd0052e5c538789f7027ce842f5a3bdd5f835", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzk4MTc5Mg==", "url": "https://github.com/prestodb/presto/pull/14082#discussion_r377981792", "bodyText": "done", "author": "yuzhu", "createdAt": "2020-02-12T00:35:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2NDQ0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "aed8a21a0e086fa3ed350ece81ce14d22d16c848", "chunk": "diff --git a/presto-hive-metastore/src/main/java/com/facebook/presto/hive/metastore/alluxio/AlluxioHiveMetastore.java b/presto-hive-metastore/src/main/java/com/facebook/presto/hive/metastore/alluxio/AlluxioHiveMetastore.java\nindex 0533c4c529..603de56dfa 100644\n--- a/presto-hive-metastore/src/main/java/com/facebook/presto/hive/metastore/alluxio/AlluxioHiveMetastore.java\n+++ b/presto-hive-metastore/src/main/java/com/facebook/presto/hive/metastore/alluxio/AlluxioHiveMetastore.java\n\n@@ -284,7 +284,7 @@ public class AlluxioHiveMetastore\n     {\n         try {\n             List<PartitionInfo> partitionInfos = AlluxioProtoUtils.toPartitionInfoList(client.readTable(databaseName, tableName, Constraint.getDefaultInstance()));\n-            return Optional.of(partitionInfos.stream().map(PartitionInfo::getPartitionName).collect(ImmutableList.toImmutableList()));\n+            return Optional.of(partitionInfos.stream().map(PartitionInfo::getPartitionName).collect(toImmutableList()));\n         }\n         catch (AlluxioStatusException e) {\n             throw new PrestoException(HIVE_METASTORE_ERROR, e);\n"}}, {"oid": "aed8a21a0e086fa3ed350ece81ce14d22d16c848", "url": "https://github.com/prestodb/presto/commit/aed8a21a0e086fa3ed350ece81ce14d22d16c848", "message": "Add getPartitionNames support to Alluxio Metastore\n\nCo-authored-by: David Zhu <david@alluxio.com>", "committedDate": "2020-02-12T00:33:47Z", "type": "commit"}, {"oid": "aed8a21a0e086fa3ed350ece81ce14d22d16c848", "url": "https://github.com/prestodb/presto/commit/aed8a21a0e086fa3ed350ece81ce14d22d16c848", "message": "Add getPartitionNames support to Alluxio Metastore\n\nCo-authored-by: David Zhu <david@alluxio.com>", "committedDate": "2020-02-12T00:33:47Z", "type": "forcePushed"}]}