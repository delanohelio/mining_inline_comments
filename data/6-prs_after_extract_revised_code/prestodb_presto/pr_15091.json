{"pr_number": 15091, "pr_title": "Categorize the AccessControlException as user error", "pr_createdAt": "2020-08-27T17:23:32Z", "pr_url": "https://github.com/prestodb/presto/pull/15091", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYzMTU0NQ==", "url": "https://github.com/prestodb/presto/pull/15091#discussion_r478631545", "bodyText": "could we use:\ne instanceof AccessControlException", "author": "zhenxiao", "createdAt": "2020-08-27T19:00:20Z", "path": "presto-hive/src/main/java/com/facebook/presto/hive/parquet/ParquetPageSourceFactory.java", "diffHunk": "@@ -264,6 +265,9 @@ public static ParquetPageSource createParquetPageSource(\n             if (e instanceof ParquetCorruptionException) {\n                 throw new PrestoException(HIVE_BAD_DATA, e);\n             }\n+            if (e.getClass().getSimpleName().equals(\"AccessControlException\")) {", "originalCommit": "f6b69ae380d774cefb9414a3b3eb32652f8ebd0e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "db5ae3d758de046721994509245102849a8172ab", "chunk": "diff --git a/presto-hive/src/main/java/com/facebook/presto/hive/parquet/ParquetPageSourceFactory.java b/presto-hive/src/main/java/com/facebook/presto/hive/parquet/ParquetPageSourceFactory.java\nindex b1386d6ced..f76c2b94c6 100644\n--- a/presto-hive/src/main/java/com/facebook/presto/hive/parquet/ParquetPageSourceFactory.java\n+++ b/presto-hive/src/main/java/com/facebook/presto/hive/parquet/ParquetPageSourceFactory.java\n\n@@ -265,7 +266,7 @@ public class ParquetPageSourceFactory\n             if (e instanceof ParquetCorruptionException) {\n                 throw new PrestoException(HIVE_BAD_DATA, e);\n             }\n-            if (e.getClass().getSimpleName().equals(\"AccessControlException\")) {\n+            if (e instanceof AccessControlException) {\n                 throw new PrestoException(PERMISSION_DENIED, e.getMessage(), e);\n             }\n             if (nullToEmpty(e.getMessage()).trim().equals(\"Filesystem closed\") ||\n"}}, {"oid": "db5ae3d758de046721994509245102849a8172ab", "url": "https://github.com/prestodb/presto/commit/db5ae3d758de046721994509245102849a8172ab", "message": "Categorize the AccessControlException as user error\n\nCurrently it shows up as external", "committedDate": "2020-08-27T21:08:12Z", "type": "commit"}, {"oid": "db5ae3d758de046721994509245102849a8172ab", "url": "https://github.com/prestodb/presto/commit/db5ae3d758de046721994509245102849a8172ab", "message": "Categorize the AccessControlException as user error\n\nCurrently it shows up as external", "committedDate": "2020-08-27T21:08:12Z", "type": "forcePushed"}]}