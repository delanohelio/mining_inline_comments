{"pr_number": 14507, "pr_title": "Fix timeout of testQueuingWhenTaskLimitExceeds", "pr_createdAt": "2020-05-09T03:12:23Z", "pr_url": "https://github.com/prestodb/presto/pull/14507", "timeline": [{"oid": "83090bc12b504a0dec7f65001ad17af9e1ed8753", "url": "https://github.com/prestodb/presto/commit/83090bc12b504a0dec7f65001ad17af9e1ed8753", "message": "Fix timeout of testQueuingWhenTaskLimitExceeds", "committedDate": "2020-05-09T03:22:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0NzM1MA==", "url": "https://github.com/prestodb/presto/pull/14507#discussion_r422447350", "bodyText": "nit: typo: \"Queuingd\"", "author": "caithagoras", "createdAt": "2020-05-09T03:24:50Z", "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestQueryTaskLimit.java", "diffHunk": "@@ -88,7 +88,7 @@ public void testExceedTaskLimit()\n         }\n     }\n \n-    @Test(timeOut = 30_000)\n+    @Test(timeOut = 120_000)\n     public void testQueuingdWhenTaskLimitExceeds()", "originalCommit": "83090bc12b504a0dec7f65001ad17af9e1ed8753", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8231ed0efc4234669ed55a5d4688942e5723c801", "chunk": "diff --git a/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryTaskLimit.java b/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryTaskLimit.java\nindex a6b45b0b3b..30f70765ff 100644\n--- a/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryTaskLimit.java\n+++ b/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryTaskLimit.java\n\n@@ -89,7 +89,7 @@ public class TestQueryTaskLimit\n     }\n \n     @Test(timeOut = 120_000)\n-    public void testQueuingdWhenTaskLimitExceeds()\n+    public void testQueuingWhenTaskLimitExceeds()\n             throws Exception\n     {\n         try (DistributedQueryRunner queryRunner = createQueryRunner(defaultSession, ImmutableMap.of())) {\n"}}, {"oid": "8231ed0efc4234669ed55a5d4688942e5723c801", "url": "https://github.com/prestodb/presto/commit/8231ed0efc4234669ed55a5d4688942e5723c801", "message": "Fix timeout of testQueuingWhenTaskLimitExceeds", "committedDate": "2020-05-09T03:50:30Z", "type": "forcePushed"}, {"oid": "c51ee9c72851cd3ffc6e2225205832f37a32cf3f", "url": "https://github.com/prestodb/presto/commit/c51ee9c72851cd3ffc6e2225205832f37a32cf3f", "message": "Increase the timeout of task limit test\n\n- testQueuingWhenTaskLimitExceeds finishes around 15s in most times,\n  however, time out at 30s happens occasionally.\n- Statcktrace from failed tests show that it is waiting for query\n  runner to close.\n- Increase timeout to 120s to confirm that it is query runner\n  issue not test itself.", "committedDate": "2020-05-11T16:47:19Z", "type": "forcePushed"}, {"oid": "c8dc5da6e2d0c0fc9ef07307b4a885941e149f38", "url": "https://github.com/prestodb/presto/commit/c8dc5da6e2d0c0fc9ef07307b4a885941e149f38", "message": "Increase the timeout of task limit test\n\n- testQueuingWhenTaskLimitExceeds finishes within 15s in most times,\n  however, time out at 30s happens occasionally.\n- Statcktrace from failed tests show that it is waiting for query\n  runner to close.\n- Increase timeout to 120s to confirm that it is query runner\n  issue not test itself.", "committedDate": "2020-05-11T18:15:22Z", "type": "forcePushed"}, {"oid": "b2334636118a5da50753d09b0036ddda87dbf6e8", "url": "https://github.com/prestodb/presto/commit/b2334636118a5da50753d09b0036ddda87dbf6e8", "message": "Update task limit state without delay for testing\n\n- Fix synchronization issue in testQueuingWhenTaskLimitExceeds.\n- When InternalResourceGroupManager::taskLimitExceeded is updated by\n  testing method setTaskLimitExceeded, there is a delay in updating\n  root resource group's state, this PR fixes it.\n- Improve test by removing unnecessary steps.", "committedDate": "2020-05-11T21:35:51Z", "type": "commit"}, {"oid": "b2334636118a5da50753d09b0036ddda87dbf6e8", "url": "https://github.com/prestodb/presto/commit/b2334636118a5da50753d09b0036ddda87dbf6e8", "message": "Update task limit state without delay for testing\n\n- Fix synchronization issue in testQueuingWhenTaskLimitExceeds.\n- When InternalResourceGroupManager::taskLimitExceeded is updated by\n  testing method setTaskLimitExceeded, there is a delay in updating\n  root resource group's state, this PR fixes it.\n- Improve test by removing unnecessary steps.", "committedDate": "2020-05-11T21:35:51Z", "type": "forcePushed"}]}