{"pr_number": 14942, "pr_title": "Flatten TaskStats and PipelineStats", "pr_createdAt": "2020-07-31T21:36:29Z", "pr_url": "https://github.com/prestodb/presto/pull/14942", "timeline": [{"oid": "02f0322c182d3844ed4645524ce8093650eca362", "url": "https://github.com/prestodb/presto/commit/02f0322c182d3844ed4645524ce8093650eca362", "message": "Flatten TaskStats and PipelineStats\n\nThis commit tries to simplify transport objects\nto make serde more efficient.", "committedDate": "2020-07-31T22:25:23Z", "type": "forcePushed"}, {"oid": "0d50210d449505a72a37414dddee64a978051c31", "url": "https://github.com/prestodb/presto/commit/0d50210d449505a72a37414dddee64a978051c31", "message": "Flatten TaskStats and PipelineStats\n\nThis commit tries to simplify transport objects\nto make serde more efficient.", "committedDate": "2020-08-03T19:45:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM3NzMzNg==", "url": "https://github.com/prestodb/presto/pull/14942#discussion_r465377336", "bodyText": "primitives can not be null. no need to check.", "author": "cemcayiroglu", "createdAt": "2020-08-04T23:02:23Z", "path": "presto-main/src/main/java/com/facebook/presto/operator/PipelineStats.java", "diffHunk": "@@ -153,34 +151,34 @@ public PipelineStats(\n         checkArgument(completedDrivers >= 0, \"completedDrivers is negative\");\n         this.completedDrivers = completedDrivers;\n \n-        this.userMemoryReservation = requireNonNull(userMemoryReservation, \"userMemoryReservation is null\");\n-        this.revocableMemoryReservation = requireNonNull(revocableMemoryReservation, \"revocableMemoryReservation is null\");\n-        this.systemMemoryReservation = requireNonNull(systemMemoryReservation, \"systemMemoryReservation is null\");\n+        this.userMemoryReservationInBytes = requireNonNull(userMemoryReservationInBytes, \"userMemoryReservationInBytes is null\");", "originalCommit": "0d50210d449505a72a37414dddee64a978051c31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQyMzM0OA==", "url": "https://github.com/prestodb/presto/pull/14942#discussion_r465423348", "bodyText": "done", "author": "ajaygeorge", "createdAt": "2020-08-05T01:44:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM3NzMzNg=="}], "type": "inlineReview", "revised_code": {"commit": "143be54fb886dbccc43cec53a405d27609135e56", "chunk": "diff --git a/presto-main/src/main/java/com/facebook/presto/operator/PipelineStats.java b/presto-main/src/main/java/com/facebook/presto/operator/PipelineStats.java\nindex 880ca4b76a..b070d0cb62 100644\n--- a/presto-main/src/main/java/com/facebook/presto/operator/PipelineStats.java\n+++ b/presto-main/src/main/java/com/facebook/presto/operator/PipelineStats.java\n\n@@ -151,34 +151,34 @@ public class PipelineStats\n         checkArgument(completedDrivers >= 0, \"completedDrivers is negative\");\n         this.completedDrivers = completedDrivers;\n \n-        this.userMemoryReservationInBytes = requireNonNull(userMemoryReservationInBytes, \"userMemoryReservationInBytes is null\");\n-        this.revocableMemoryReservationInBytes = requireNonNull(revocableMemoryReservationInBytes, \"revocableMemoryReservationInBytes is null\");\n-        this.systemMemoryReservationInBytes = requireNonNull(systemMemoryReservationInBytes, \"systemMemoryReservationInBytes is null\");\n+        this.userMemoryReservationInBytes = userMemoryReservationInBytes;\n+        this.revocableMemoryReservationInBytes = revocableMemoryReservationInBytes;\n+        this.systemMemoryReservationInBytes = systemMemoryReservationInBytes;\n \n         this.queuedTime = requireNonNull(queuedTime, \"queuedTime is null\");\n         this.elapsedTime = requireNonNull(elapsedTime, \"elapsedTime is null\");\n-        this.totalScheduledTimeInNanos = requireNonNull(totalScheduledTimeInNanos, \"totalScheduledTimeInNanos is null\");\n+        this.totalScheduledTimeInNanos = totalScheduledTimeInNanos;\n \n-        this.totalCpuTimeInNanos = requireNonNull(totalCpuTimeInNanos, \"totalCpuTimeInNanos is null\");\n-        this.totalBlockedTimeInNanos = requireNonNull(totalBlockedTimeInNanos, \"totalBlockedTimeInNanos is null\");\n+        this.totalCpuTimeInNanos = totalCpuTimeInNanos;\n+        this.totalBlockedTimeInNanos = totalBlockedTimeInNanos;\n         this.fullyBlocked = fullyBlocked;\n         this.blockedReasons = ImmutableSet.copyOf(requireNonNull(blockedReasons, \"blockedReasons is null\"));\n \n-        this.totalAllocationInBytes = requireNonNull(totalAllocationInBytes, \"totalAllocationInBytes is null\");\n+        this.totalAllocationInBytes = totalAllocationInBytes;\n \n-        this.rawInputDataSizeInBytes = requireNonNull(rawInputDataSizeInBytes, \"rawInputDataSizeInBytes is null\");\n+        this.rawInputDataSizeInBytes = rawInputDataSizeInBytes;\n         checkArgument(rawInputPositions >= 0, \"rawInputPositions is negative\");\n         this.rawInputPositions = rawInputPositions;\n \n-        this.processedInputDataSizeInBytes = requireNonNull(processedInputDataSizeInBytes, \"processedInputDataSizeInBytes is null\");\n+        this.processedInputDataSizeInBytes = processedInputDataSizeInBytes;\n         checkArgument(processedInputPositions >= 0, \"processedInputPositions is negative\");\n         this.processedInputPositions = processedInputPositions;\n \n-        this.outputDataSizeInBytes = requireNonNull(outputDataSizeInBytes, \"outputDataSizeInBytes is null\");\n+        this.outputDataSizeInBytes = outputDataSizeInBytes;\n         checkArgument(outputPositions >= 0, \"outputPositions is negative\");\n         this.outputPositions = outputPositions;\n \n-        this.physicalWrittenDataSizeInBytes = requireNonNull(physicalWrittenDataSizeInBytes, \"writtenDataSize is null\");\n+        this.physicalWrittenDataSizeInBytes = physicalWrittenDataSizeInBytes;\n \n         this.operatorSummaries = ImmutableList.copyOf(requireNonNull(operatorSummaries, \"operatorSummaries is null\"));\n         this.drivers = ImmutableList.copyOf(requireNonNull(drivers, \"drivers is null\"));\n"}}, {"oid": "143be54fb886dbccc43cec53a405d27609135e56", "url": "https://github.com/prestodb/presto/commit/143be54fb886dbccc43cec53a405d27609135e56", "message": "Update QueryDetails UI to use new TaskStats response structure", "committedDate": "2020-08-05T01:43:39Z", "type": "forcePushed"}, {"oid": "a44ccace6d92c0bcb7dd973952445ce26b152a67", "url": "https://github.com/prestodb/presto/commit/a44ccace6d92c0bcb7dd973952445ce26b152a67", "message": "Flatten TaskStats and PipelineStats\n\nThis commit tries to simplify transport objects\nto make serde more efficient.", "committedDate": "2020-08-05T02:22:52Z", "type": "commit"}, {"oid": "7691d03b0e49e9103901f9280dc366ab8bcd6b30", "url": "https://github.com/prestodb/presto/commit/7691d03b0e49e9103901f9280dc366ab8bcd6b30", "message": "Update QueryDetails UI to use new TaskStats response structure", "committedDate": "2020-08-05T02:22:52Z", "type": "commit"}, {"oid": "7691d03b0e49e9103901f9280dc366ab8bcd6b30", "url": "https://github.com/prestodb/presto/commit/7691d03b0e49e9103901f9280dc366ab8bcd6b30", "message": "Update QueryDetails UI to use new TaskStats response structure", "committedDate": "2020-08-05T02:22:52Z", "type": "forcePushed"}]}