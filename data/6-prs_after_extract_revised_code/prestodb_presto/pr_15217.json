{"pr_number": 15217, "pr_title": "Make TestQueryManager#testFailQueryPrerun more reliable", "pr_createdAt": "2020-09-23T19:19:41Z", "pr_url": "https://github.com/prestodb/presto/pull/15217", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg2Mzc4OQ==", "url": "https://github.com/prestodb/presto/pull/15217#discussion_r493863789", "bodyText": "This seems like a weird test assertion; I think you're trying to cause a failure if the dispatchManager behaves differently than expected. If you could use the version of assertNotEquals that takes a message to annotate that, I think it would be helpful.", "author": "jeremy-degroot", "createdAt": "2020-09-23T20:06:53Z", "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestQueryManager.java", "diffHunk": "@@ -111,26 +130,41 @@ public void testFailQueryPrerun()\n                 \"SELECT * FROM lineitem\")\n                 .get();\n \n+        assertNotEquals(dispatchManager.getStats().getQueuedQueries(), 0L);", "originalCommit": "2101d2b1d4ab6d3099d174a409199b6ae200d670", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9eb5ce2e3c38134cf541ee3535251947666149df", "chunk": "diff --git a/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryManager.java b/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryManager.java\nindex a80809d0b0..6c0dada60f 100644\n--- a/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryManager.java\n+++ b/presto-tests/src/test/java/com/facebook/presto/tests/TestQueryManager.java\n\n@@ -130,7 +130,7 @@ public class TestQueryManager\n                 \"SELECT * FROM lineitem\")\n                 .get();\n \n-        assertNotEquals(dispatchManager.getStats().getQueuedQueries(), 0L);\n+        assertNotEquals(dispatchManager.getStats().getQueuedQueries(), 0L, \"Expected 0 queued queries, found: \" + dispatchManager.getStats().getQueuedQueries());\n \n         // wait until it's admitted but fail it before it starts\n         while (true) {\n"}}, {"oid": "9eb5ce2e3c38134cf541ee3535251947666149df", "url": "https://github.com/prestodb/presto/commit/9eb5ce2e3c38134cf541ee3535251947666149df", "message": "Make TestQueryManager#testFailQueryPrerun more reliable", "committedDate": "2020-09-28T19:11:05Z", "type": "commit"}, {"oid": "9eb5ce2e3c38134cf541ee3535251947666149df", "url": "https://github.com/prestodb/presto/commit/9eb5ce2e3c38134cf541ee3535251947666149df", "message": "Make TestQueryManager#testFailQueryPrerun more reliable", "committedDate": "2020-09-28T19:11:05Z", "type": "forcePushed"}]}