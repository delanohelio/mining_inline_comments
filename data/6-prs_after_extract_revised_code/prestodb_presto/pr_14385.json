{"pr_number": 14385, "pr_title": "Add no-execution-node Exception for affinity scheduler", "pr_createdAt": "2020-04-14T17:22:55Z", "pr_url": "https://github.com/prestodb/presto/pull/14385", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUyODA1Mw==", "url": "https://github.com/prestodb/presto/pull/14385#discussion_r408528053", "bodyText": "Reuse NO_NODES_AVAILABLE", "author": "highker", "createdAt": "2020-04-15T01:28:03Z", "path": "presto-hive/src/main/java/com/facebook/presto/hive/HiveSplit.java", "diffHunk": "@@ -178,7 +180,7 @@ public Storage getStorage()\n     public List<HostAddress> getPreferredNodes(List<HostAddress> sortedCandidates)\n     {\n         if (sortedCandidates == null || sortedCandidates.isEmpty()) {\n-            throw new RuntimeException(\"sortedCandidates is null or empty for HiveSplit\");\n+            throw new PrestoException(NO_EXECUTION_NODE, \"sortedCandidates is null or empty for HiveSplit\");", "originalCommit": "6c0e036638c39d70c034800b652d23f67883af1b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "87fc28ff34b174a9fbb0974e74e31aa90fa60d43", "chunk": "diff --git a/presto-hive/src/main/java/com/facebook/presto/hive/HiveSplit.java b/presto-hive/src/main/java/com/facebook/presto/hive/HiveSplit.java\nindex b99c290d34..6da481a63a 100644\n--- a/presto-hive/src/main/java/com/facebook/presto/hive/HiveSplit.java\n+++ b/presto-hive/src/main/java/com/facebook/presto/hive/HiveSplit.java\n\n@@ -180,7 +180,7 @@ public class HiveSplit\n     public List<HostAddress> getPreferredNodes(List<HostAddress> sortedCandidates)\n     {\n         if (sortedCandidates == null || sortedCandidates.isEmpty()) {\n-            throw new PrestoException(NO_EXECUTION_NODE, \"sortedCandidates is null or empty for HiveSplit\");\n+            throw new PrestoException(NO_NODES_AVAILABLE, \"sortedCandidates is null or empty for HiveSplit\");\n         }\n \n         if (getNodeSelectionStrategy() == SOFT_AFFINITY) {\n"}}, {"oid": "87fc28ff34b174a9fbb0974e74e31aa90fa60d43", "url": "https://github.com/prestodb/presto/commit/87fc28ff34b174a9fbb0974e74e31aa90fa60d43", "message": "Use NO_NODES_AVAILABLE Exception for affinity scheduler", "committedDate": "2020-04-16T00:51:15Z", "type": "commit"}, {"oid": "87fc28ff34b174a9fbb0974e74e31aa90fa60d43", "url": "https://github.com/prestodb/presto/commit/87fc28ff34b174a9fbb0974e74e31aa90fa60d43", "message": "Use NO_NODES_AVAILABLE Exception for affinity scheduler", "committedDate": "2020-04-16T00:51:15Z", "type": "forcePushed"}]}