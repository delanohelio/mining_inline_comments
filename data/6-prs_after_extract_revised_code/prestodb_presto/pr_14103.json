{"pr_number": 14103, "pr_title": "Allow insert overwrite as default behavior for Hive connector", "pr_createdAt": "2020-02-14T06:12:56Z", "pr_url": "https://github.com/prestodb/presto/pull/14103", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3NzE0Mw==", "url": "https://github.com/prestodb/presto/pull/14103#discussion_r379577143", "bodyText": "nit: how about saying When enabled, insertion query can overwrite existing partitions when partitions are immutable. This...", "author": "shixuan-fan", "createdAt": "2020-02-14T18:22:37Z", "path": "presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java", "diffHunk": "@@ -511,6 +512,19 @@ public HiveClientConfig setRespectTableFormat(boolean respectTableFormat)\n         return this;\n     }\n \n+    public boolean isInsertOverwriteImmutablePartitionEnabled()\n+    {\n+        return insertOverwriteImmutablePartitions;\n+    }\n+\n+    @Config(\"hive.insert-overwrite-immutable-partitions-enabled\")\n+    @ConfigDescription(\"Can insertion query overwrites existing partitions when partitions are immutable. This config only takes effect with hive.immutable-partitions set to true\")", "originalCommit": "aa26fb79d43b7cb1be2b02f1774ecf8014ed0890", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "chunk": "diff --git a/presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java b/presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java\nindex b72b814185..2a4c9b8b03 100644\n--- a/presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java\n+++ b/presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java\n\n@@ -518,7 +526,7 @@ public class HiveClientConfig\n     }\n \n     @Config(\"hive.insert-overwrite-immutable-partitions-enabled\")\n-    @ConfigDescription(\"Can insertion query overwrites existing partitions when partitions are immutable. This config only takes effect with hive.immutable-partitions set to true\")\n+    @ConfigDescription(\"When enabled, insertion query will overwrite existing partitions when partitions are immutable. This config only takes effect with hive.immutable-partitions set to true\")\n     public HiveClientConfig setInsertOverwriteImmutablePartitionEnabled(boolean insertOverwriteImmutablePartitions)\n     {\n         this.insertOverwriteImmutablePartitions = insertOverwriteImmutablePartitions;\n"}}, {"oid": "f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "url": "https://github.com/prestodb/presto/commit/f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "message": "Allows insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior.", "committedDate": "2020-02-17T19:28:30Z", "type": "forcePushed"}, {"oid": "4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "url": "https://github.com/prestodb/presto/commit/4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "message": "Allow insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior.", "committedDate": "2020-02-17T19:29:26Z", "type": "commit"}, {"oid": "4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "url": "https://github.com/prestodb/presto/commit/4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "message": "Allow insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior.", "committedDate": "2020-02-17T19:29:26Z", "type": "forcePushed"}]}