{"pr_number": 183, "pr_title": "Flaky rest test case fix", "pr_createdAt": "2020-07-27T22:58:00Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183", "timeline": [{"oid": "c4fad6a39309fda9bc47b9e7db129dfa9c0d4e81", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/c4fad6a39309fda9bc47b9e7db129dfa9c0d4e81", "message": "clean up cache after each test case runs", "committedDate": "2020-07-27T22:25:41Z", "type": "commit"}, {"oid": "a2937626ae2c95257f7712f3db972086538d8ea7", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/a2937626ae2c95257f7712f3db972086538d8ea7", "message": "clean up cache after test cases", "committedDate": "2020-07-27T22:36:15Z", "type": "commit"}, {"oid": "c0924310c84bd8e9fea9009194383f1de9e069db", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/c0924310c84bd8e9fea9009194383f1de9e069db", "message": "switch to clean cache from after to before", "committedDate": "2020-07-27T23:01:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNzQxNg==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183#discussion_r461317416", "bodyText": "Thanks for the comment here. Please create an issue so that it would be easy to track and get back", "author": "vamshin", "createdAt": "2020-07-28T04:54:45Z", "path": "src/test/java/com/amazon/opendistroforelasticsearch/knn/KNNRestTestCase.java", "diffHunk": "@@ -413,4 +420,16 @@ protected String getIndexSettingByName(String indexName, String settingName) thr\n                         .get(\"settings\");\n         return (String)settings.get(settingName);\n     }\n+\n+    /**\n+     * Clear cache\n+     *\n+     * This function is a temporary workaround. Right now, we do not have a way of clearing the cache except by deleting\n+     * an index or changing k-NN settings. That being said, this function bounces a random k-NN setting in order to\n+     * clear the cache.\n+     */", "originalCommit": "c0924310c84bd8e9fea9009194383f1de9e069db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNzgzNQ==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183#discussion_r461317835", "bodyText": "#68 exists for the flush API. Should I create another for this? Or add comment to that issue?", "author": "jmazanec15", "createdAt": "2020-07-28T04:56:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNzQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMyNjE1Mw==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183#discussion_r461326153", "bodyText": "Adding a comment to the existing issue should be fine.", "author": "vamshin", "createdAt": "2020-07-28T05:25:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNzQxNg=="}], "type": "inlineReview", "revised_code": null}]}