{"pr_number": 1186, "pr_title": "Add grpc protoc options example", "pr_createdAt": "2020-10-15T19:47:59Z", "pr_url": "https://github.com/apple/servicetalk/pull/1186", "timeline": [{"oid": "3827e17d7c17dc1fa2562d951a4e378b25df0126", "url": "https://github.com/apple/servicetalk/commit/3827e17d7c17dc1fa2562d951a4e378b25df0126", "message": "Add grpc protoc options example\n\nMotivation:\nWe recently added a new option to servicetalk-grpc-protoc, but don't\nhave an example to demonstrate its use and validate correct behavior.", "committedDate": "2020-10-15T19:46:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgyODUwMA==", "url": "https://github.com/apple/servicetalk/pull/1186#discussion_r505828500", "bodyText": "Consider using GreeterSt.BlockingGreeterClient and adding a comment that highlights the St suffix. Otherwise, it's hard to understand where the suffix is added. import section is usually collapsed in IDE. Something like:\n// Greeter service is generated with \"St\" suffix:\ntry (GreeterSt.BlockingGreeterClient client = ...\n\nSame comment for BlockingProtocOptionsServer class.", "author": "idelpivnitskiy", "createdAt": "2020-10-15T20:39:48Z", "path": "servicetalk-examples/grpc/protoc-options/src/main/java/io/servicetalk/examples/grpc/protocoptions/BlockingProtocOptionsClient.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright \u00a9 2020 Apple Inc. and the ServiceTalk project authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.servicetalk.examples.grpc.protocoptions;\n+\n+import io.servicetalk.grpc.netty.GrpcClients;\n+\n+import io.grpc.examples.helloworld.GreeterSt.BlockingGreeterClient;\n+import io.grpc.examples.helloworld.GreeterSt.ClientFactory;\n+import io.grpc.examples.helloworld.HelloReply;\n+import io.grpc.examples.helloworld.HelloRequest;\n+\n+public final class BlockingProtocOptionsClient {\n+\n+    public static void main(String[] args) throws Exception {\n+        try (BlockingGreeterClient client = GrpcClients.forAddress(\"localhost\", 8080)", "originalCommit": "3827e17d7c17dc1fa2562d951a4e378b25df0126", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg4NDc2Mw==", "url": "https://github.com/apple/servicetalk/pull/1186#discussion_r505884763", "bodyText": "done", "author": "Scottmitch", "createdAt": "2020-10-15T21:50:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgyODUwMA=="}], "type": "inlineReview", "revised_code": {"commit": "4f369d1a9d8818586e355541fae3b283806ef93d", "chunk": "diff --git a/servicetalk-examples/grpc/protoc-options/src/main/java/io/servicetalk/examples/grpc/protocoptions/BlockingProtocOptionsClient.java b/servicetalk-examples/grpc/protoc-options/src/main/java/io/servicetalk/examples/grpc/protocoptions/BlockingProtocOptionsClient.java\nindex f554819ee..3ef7212d9 100644\n--- a/servicetalk-examples/grpc/protoc-options/src/main/java/io/servicetalk/examples/grpc/protocoptions/BlockingProtocOptionsClient.java\n+++ b/servicetalk-examples/grpc/protoc-options/src/main/java/io/servicetalk/examples/grpc/protocoptions/BlockingProtocOptionsClient.java\n\n@@ -17,16 +17,15 @@ package io.servicetalk.examples.grpc.protocoptions;\n \n import io.servicetalk.grpc.netty.GrpcClients;\n \n-import io.grpc.examples.helloworld.GreeterSt.BlockingGreeterClient;\n-import io.grpc.examples.helloworld.GreeterSt.ClientFactory;\n+import io.grpc.examples.helloworld.GreeterSt;\n import io.grpc.examples.helloworld.HelloReply;\n import io.grpc.examples.helloworld.HelloRequest;\n \n public final class BlockingProtocOptionsClient {\n \n     public static void main(String[] args) throws Exception {\n-        try (BlockingGreeterClient client = GrpcClients.forAddress(\"localhost\", 8080)\n-                .buildBlocking(new ClientFactory())) {\n+        try (GreeterSt.BlockingGreeterClient client = GrpcClients.forAddress(\"localhost\", 8080)\n+                .buildBlocking(new GreeterSt.ClientFactory())) {\n             HelloReply reply = client.sayHello(HelloRequest.newBuilder().setName(\"Foo\").build());\n             System.out.println(reply);\n         }\n"}}, {"oid": "4f369d1a9d8818586e355541fae3b283806ef93d", "url": "https://github.com/apple/servicetalk/commit/4f369d1a9d8818586e355541fae3b283806ef93d", "message": "review comments", "committedDate": "2020-10-15T22:07:13Z", "type": "commit"}]}