{"pr_number": 1063, "pr_title": "AbstractInMemorySpanBuilder to respect FOLLOWS_FROM", "pr_createdAt": "2020-05-21T03:11:48Z", "pr_url": "https://github.com/apple/servicetalk/pull/1063", "timeline": [{"oid": "e9c2cd8445242dae17567a43e698636f9bb1e036", "url": "https://github.com/apple/servicetalk/commit/e9c2cd8445242dae17567a43e698636f9bb1e036", "message": "AbstractInMemorySpanBuilder to respect FOLLOWS_FROM\n\nMotivation:\nOpenTracing semantics defines a FOLLOWS_FROM relationship which is an\nalternative means of representing a parent relationship. However\nAbstractInMemorySpanBuilder doesn't respect this Reference type and only\nrecognizes CHILD_OF.\n\nModifications:\n- AbstractInMemorySpanBuilder#parent() should also match References\nagainst FOLLOWS_FROM\n\nResult:\nAbstractInMemorySpanBuilder#parent() respects the FOLLOWS_FROM\nrelationship.", "committedDate": "2020-05-21T03:11:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQzMjgzNg==", "url": "https://github.com/apple/servicetalk/pull/1063#discussion_r428432836", "bodyText": "Do we need similar public methods to simplify adding FOLLOWS_FROM references?", "author": "idelpivnitskiy", "createdAt": "2020-05-21T04:02:07Z", "path": "servicetalk-opentracing-inmemory/src/main/java/io/servicetalk/opentracing/inmemory/AbstractInMemorySpanBuilder.java", "diffHunk": "@@ -52,13 +53,13 @@ protected AbstractInMemorySpanBuilder(String operationName, int maxTagSize) {\n \n     @Override\n     public final InMemorySpanBuilder asChildOf(SpanContext parent) {\n-        addReference(References.CHILD_OF, parent);\n+        addReference(CHILD_OF, parent);\n         return this;\n     }\n \n     @Override\n     public final InMemorySpanBuilder asChildOf(Span parent) {\n-        addReference(References.CHILD_OF, parent.context());\n+        addReference(CHILD_OF, parent.context());", "originalCommit": "e9c2cd8445242dae17567a43e698636f9bb1e036", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODgwMTcwNA==", "url": "https://github.com/apple/servicetalk/pull/1063#discussion_r428801704", "bodyText": "This method is overriden from io.opentracing.SpanBuilder to refine/specialize the return type. I don't think it is necessary to add additional methods for followsFrom but we can do this in a followup PR if necessary.", "author": "Scottmitch", "createdAt": "2020-05-21T17:28:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQzMjgzNg=="}], "type": "inlineReview", "revised_code": null}]}