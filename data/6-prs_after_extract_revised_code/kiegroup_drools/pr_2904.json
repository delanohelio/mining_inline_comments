{"pr_number": 2904, "pr_title": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "pr_createdAt": "2020-05-19T11:47:28Z", "pr_url": "https://github.com/kiegroup/drools/pull/2904", "timeline": [{"oid": "dc71b290bfcb0758eb40942e9fb9cfee873a6e15", "url": "https://github.com/kiegroup/drools/commit/dc71b290bfcb0758eb40942e9fb9cfee873a6e15", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-05-25T07:05:15Z", "type": "forcePushed"}, {"oid": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "url": "https://github.com/kiegroup/drools/commit/62df2082259d0aaf8a21ab2e29b80d1f88d44391", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-05-27T08:23:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5MjkyMw==", "url": "https://github.com/kiegroup/drools/pull/2904#discussion_r431592923", "bodyText": "Is the last character of new line correct?", "author": "jomarko", "createdAt": "2020-05-28T05:40:40Z", "path": "drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java", "diffHunk": "@@ -149,9 +154,9 @@ public String marshal(final GuidedDecisionTable52 originalDTable) {\n                 rm.parentName = dt.getParentName();\n             }\n \n-            sb.append(\"//from row number: \" + (i + 1) + \"\\n\");\n+            sb.append(String.format(\"//from row number: %d%n\", i + 1));", "originalCommit": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9b9967962a645f97f3d3939139cb7a72ae37704a", "chunk": "diff --git a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\nindex 533e18320d..5fd14ae0b0 100644\n--- a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\n+++ b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\n\n@@ -154,9 +154,9 @@ public class GuidedDTDRLPersistence {\n                 rm.parentName = dt.getParentName();\n             }\n \n-            sb.append(String.format(\"//from row number: %d%n\", i + 1));\n+            sb.append(String.format(\"//from row number: %d\\n\", i + 1));\n             if (desc != null && desc.length() > 0) {\n-                sb.append(String.format(\"//%s%n\", desc));\n+                sb.append(String.format(\"//%s\\n\", desc));\n             }\n \n             GuidedDTBRDRLPersistence drlMarshaller = new GuidedDTBRDRLPersistence(rowDataProvider);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5Mjk3MA==", "url": "https://github.com/kiegroup/drools/pull/2904#discussion_r431592970", "bodyText": "Is the last character of new line correct?", "author": "jomarko", "createdAt": "2020-05-28T05:40:50Z", "path": "drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java", "diffHunk": "@@ -149,9 +154,9 @@ public String marshal(final GuidedDecisionTable52 originalDTable) {\n                 rm.parentName = dt.getParentName();\n             }\n \n-            sb.append(\"//from row number: \" + (i + 1) + \"\\n\");\n+            sb.append(String.format(\"//from row number: %d%n\", i + 1));\n             if (desc != null && desc.length() > 0) {\n-                sb.append(\"//\" + desc + \"\\n\");\n+                sb.append(String.format(\"//%s%n\", desc));", "originalCommit": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9b9967962a645f97f3d3939139cb7a72ae37704a", "chunk": "diff --git a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\nindex 533e18320d..5fd14ae0b0 100644\n--- a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\n+++ b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\n\n@@ -154,9 +154,9 @@ public class GuidedDTDRLPersistence {\n                 rm.parentName = dt.getParentName();\n             }\n \n-            sb.append(String.format(\"//from row number: %d%n\", i + 1));\n+            sb.append(String.format(\"//from row number: %d\\n\", i + 1));\n             if (desc != null && desc.length() > 0) {\n-                sb.append(String.format(\"//%s%n\", desc));\n+                sb.append(String.format(\"//%s\\n\", desc));\n             }\n \n             GuidedDTBRDRLPersistence drlMarshaller = new GuidedDTBRDRLPersistence(rowDataProvider);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5NDgwMg==", "url": "https://github.com/kiegroup/drools/pull/2904#discussion_r431594802", "bodyText": "May I ask you a naming improvement? I think 'dtCellValue52' is actually more like 'ruleNameValue52'? What is your opinion?", "author": "jomarko", "createdAt": "2020-05-28T05:47:31Z", "path": "drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java", "diffHunk": "@@ -924,9 +929,19 @@ void doMetadata(List<BaseColumn> allColumns,\n         }\n     }\n \n-    String getName(String tableName,\n+    String getName(GuidedDecisionTable52 dt,\n+                   List<DTCellValue52> row,\n                    Number num) {\n-        return \"Row \" + num.longValue() + \" \" + tableName;\n+        final DTCellValue52 dtCellValue52 = row.get(RULE_NAME_COLUMN_INDEX);", "originalCommit": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9b9967962a645f97f3d3939139cb7a72ae37704a", "chunk": "diff --git a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\nindex 533e18320d..5fd14ae0b0 100644\n--- a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\n+++ b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/GuidedDTDRLPersistence.java\n\n@@ -932,9 +932,9 @@ public class GuidedDTDRLPersistence {\n     String getName(GuidedDecisionTable52 dt,\n                    List<DTCellValue52> row,\n                    Number num) {\n-        final DTCellValue52 dtCellValue52 = row.get(RULE_NAME_COLUMN_INDEX);\n-        if (hasStringValue(dtCellValue52)) {\n-            return dtCellValue52.getStringValue();\n+        final DTCellValue52 ruleNameValue = row.get(RULE_NAME_COLUMN_INDEX);\n+        if (hasStringValue(ruleNameValue)) {\n+            return ruleNameValue.getStringValue();\n         } else {\n             return String.format(\"Row %d %s\", num.longValue(), dt.getTableName());\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5NjQyOQ==", "url": "https://github.com/kiegroup/drools/pull/2904#discussion_r431596429", "bodyText": "actually is 739 already, but is probably fine as we are not adding other updater simultaneously in other PR.", "author": "jomarko", "createdAt": "2020-05-28T05:52:43Z", "path": "drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/util/GuidedDecisionTableUpgradeHelper4.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.drools.workbench.models.guided.dtable.backend.util;\n+\n+import java.util.List;\n+\n+import org.drools.workbench.models.guided.dtable.shared.model.DTCellValue52;\n+import org.drools.workbench.models.guided.dtable.shared.model.GuidedDecisionTable52;\n+import org.kie.soup.project.datamodel.commons.IUpgradeHelper;\n+\n+/**\n+ * Adds rule name column\n+ */\n+public class GuidedDecisionTableUpgradeHelper4\n+        implements\n+        IUpgradeHelper<GuidedDecisionTable52, GuidedDecisionTable52> {\n+\n+    private static final long VERSION_WHERE_RULE_NAME_WAS_ADDED = 738l;", "originalCommit": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9b9967962a645f97f3d3939139cb7a72ae37704a", "chunk": "diff --git a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/util/GuidedDecisionTableUpgradeHelper4.java b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/util/GuidedDecisionTableUpgradeHelper4.java\nindex 6b69572c5f..9e552ed033 100644\n--- a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/util/GuidedDecisionTableUpgradeHelper4.java\n+++ b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/backend/util/GuidedDecisionTableUpgradeHelper4.java\n\n@@ -28,7 +28,7 @@ public class GuidedDecisionTableUpgradeHelper4\n         implements\n         IUpgradeHelper<GuidedDecisionTable52, GuidedDecisionTable52> {\n \n-    private static final long VERSION_WHERE_RULE_NAME_WAS_ADDED = 738l;\n+    private static final long VERSION_WHERE_RULE_NAME_WAS_ADDED = 739l;\n \n     public GuidedDecisionTable52 upgrade(GuidedDecisionTable52 source) {\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5Njg5NQ==", "url": "https://github.com/kiegroup/drools/pull/2904#discussion_r431596895", "bodyText": "similar comment about version as above", "author": "jomarko", "createdAt": "2020-05-28T05:54:13Z", "path": "drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/GuidedDecisionTable52.java", "diffHunk": "@@ -40,13 +40,17 @@\n public class GuidedDecisionTable52 implements HasImports,\n                                               HasPackageName {\n \n-    private static final long serialVersionUID = 510l;\n+    public static final long serialVersionUID = 738l;", "originalCommit": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9b9967962a645f97f3d3939139cb7a72ae37704a", "chunk": "diff --git a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/GuidedDecisionTable52.java b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/GuidedDecisionTable52.java\nindex c99d616a25..17fd8c6125 100644\n--- a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/GuidedDecisionTable52.java\n+++ b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/GuidedDecisionTable52.java\n\n@@ -40,7 +40,7 @@ import org.kie.soup.project.datamodel.packages.HasPackageName;\n public class GuidedDecisionTable52 implements HasImports,\n                                               HasPackageName {\n \n-    public static final long serialVersionUID = 738l;\n+    public static final long serialVersionUID = 739l;\n \n     /**\n      * Number of internal elements before ( used for offsets in serialization )\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5NzgzOA==", "url": "https://github.com/kiegroup/drools/pull/2904#discussion_r431597838", "bodyText": "version", "author": "jomarko", "createdAt": "2020-05-28T05:57:20Z", "path": "drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/RuleNameColumn.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.drools.workbench.models.guided.dtable.shared.model;\n+\n+public class RuleNameColumn extends DTColumnConfig52 {\n+\n+    private static final long serialVersionUID = 738l;", "originalCommit": "62df2082259d0aaf8a21ab2e29b80d1f88d44391", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9b9967962a645f97f3d3939139cb7a72ae37704a", "chunk": "diff --git a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/RuleNameColumn.java b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/RuleNameColumn.java\nindex 4ed85cc7d2..8ef457f710 100644\n--- a/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/RuleNameColumn.java\n+++ b/drools-workbench-models/drools-workbench-models-guided-dtable/src/main/java/org/drools/workbench/models/guided/dtable/shared/model/RuleNameColumn.java\n\n@@ -17,7 +17,7 @@ package org.drools.workbench.models.guided.dtable.shared.model;\n \n public class RuleNameColumn extends DTColumnConfig52 {\n \n-    private static final long serialVersionUID = 738l;\n+    private static final long serialVersionUID = 739l;\n \n     private static final DTCellValue52 DEFAULT_DESCRIPTION = new DTCellValue52(\"\");\n \n"}}, {"oid": "9b9967962a645f97f3d3939139cb7a72ae37704a", "url": "https://github.com/kiegroup/drools/commit/9b9967962a645f97f3d3939139cb7a72ae37704a", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-05-28T14:00:39Z", "type": "forcePushed"}, {"oid": "c03a1c31ac83a579389c23a67bffd298346b1d68", "url": "https://github.com/kiegroup/drools/commit/c03a1c31ac83a579389c23a67bffd298346b1d68", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-05-29T05:37:52Z", "type": "forcePushed"}, {"oid": "19cef2b12ce4f9781c09fce1aeaaef89a1c0ca0a", "url": "https://github.com/kiegroup/drools/commit/19cef2b12ce4f9781c09fce1aeaaef89a1c0ca0a", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-05-29T05:41:46Z", "type": "forcePushed"}, {"oid": "9a7e54b127e0a3971bb17f73c62f1dfabfb4aa63", "url": "https://github.com/kiegroup/drools/commit/9a7e54b127e0a3971bb17f73c62f1dfabfb4aa63", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-06-04T07:11:54Z", "type": "commit"}, {"oid": "9a7e54b127e0a3971bb17f73c62f1dfabfb4aa63", "url": "https://github.com/kiegroup/drools/commit/9a7e54b127e0a3971bb17f73c62f1dfabfb4aa63", "message": "DROOLS-5333 : Allow to customize rule names in guided decision table editor", "committedDate": "2020-06-04T07:11:54Z", "type": "forcePushed"}]}