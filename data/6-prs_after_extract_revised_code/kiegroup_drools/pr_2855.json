{"pr_number": 2855, "pr_title": "Drools 5241 - Create archetype for PMML models with drool implementation", "pr_createdAt": "2020-04-15T15:12:32Z", "pr_url": "https://github.com/kiegroup/drools/pull/2855", "timeline": [{"oid": "835616bde6986f7dc0e0703429d0523f1f08be6d", "url": "https://github.com/kiegroup/drools/commit/835616bde6986f7dc0e0703429d0523f1f08be6d", "message": "[DROOLS-4859] Fixing generic models archetype", "committedDate": "2020-04-15T13:46:02Z", "type": "commit"}, {"oid": "5c128e3cd0eac7ea391897c48e847b42b327d521", "url": "https://github.com/kiegroup/drools/commit/5c128e3cd0eac7ea391897c48e847b42b327d521", "message": "[DROOLS-4859] Implemented model-drools archetype", "committedDate": "2020-04-15T15:07:36Z", "type": "commit"}, {"oid": "3a26e6983d92102ae777c55f2f951159bacdfcda", "url": "https://github.com/kiegroup/drools/commit/3a26e6983d92102ae777c55f2f951159bacdfcda", "message": "[DROOLS-5241] Add Post-creation documentation. Declaring kie-pmml-models-drools-archetype module in parent pom", "committedDate": "2020-04-16T07:40:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MDM1NQ==", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409470355", "bodyText": "Is this Maven archetype intended only for RedHat? If not I think it would be better to leave it on user to write license and copyright information.", "author": "jiripetrlik", "createdAt": "2020-04-16T11:03:36Z", "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/main/java/__packageModelName__/compiler/executor/__modelName__ModelImplementationProvider.java", "diffHunk": "@@ -0,0 +1,44 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+* Copyright ${year} Red Hat, Inc. and/or its affiliates.", "originalCommit": "3a26e6983d92102ae777c55f2f951159bacdfcda", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3NTEwMQ==", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409475101", "bodyText": "@jiripetrlik\nCurrently this is meant to be used by us to quickly create \"stub\" modules. And I would prefer to avoid manually adding license on every generated class :)", "author": "gitgabrio", "createdAt": "2020-04-16T11:12:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MDM1NQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MDcwMg==", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409470702", "bodyText": "Please remove license and copyright template from archetype.", "author": "jiripetrlik", "createdAt": "2020-04-16T11:04:18Z", "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/main/java/__packageModelName__/compiler/factories/KiePMML__modelName__ModelFactory.java", "diffHunk": "@@ -0,0 +1,39 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.", "originalCommit": "3a26e6983d92102ae777c55f2f951159bacdfcda", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3NTIyNw==", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409475227", "bodyText": "@jiripetrlik\nSee previous answer", "author": "gitgabrio", "createdAt": "2020-04-16T11:13:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MDcwMg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MTY3Nw==", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409471677", "bodyText": "I would suggest to let this test failed with some unimplemented exception. Or at least ignore it. Otherwise it will provide the false assumption that it is implemented and working.", "author": "jiripetrlik", "createdAt": "2020-04-16T11:06:12Z", "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/drools/compiler/executor/__modelName__ModelImplementationProviderTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package ${package}.${packageModelName}.compiler.executor;\n+\n+import org.kie.pmml.commons.model.enums.PMML_MODEL;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.fail;\n+\n+public class ${modelName}ModelImplementationProviderTest {\n+\n+    private static final ${modelName}ModelImplementationProvider PROVIDER= new ${modelName}ModelImplementationProvider();\n+\n+    @Test\n+    public void getPMMLModelType(){\n+        assertEquals(PMML_MODEL.${modelNameUppercase}_MODEL,PROVIDER.getPMMLModelType());\n+    }\n+\n+    @Test\n+    public void getKiePMMLModel() throws Exception {", "originalCommit": "3a26e6983d92102ae777c55f2f951159bacdfcda", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f293aa804332c3baf86e578d840cb3178daa74c5", "chunk": "diff --git a/kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/drools/compiler/executor/__modelName__ModelImplementationProviderTest.java b/kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/drools/compiler/executor/__modelName__ModelImplementationProviderTest.java\nindex a0fe30d900..87396f827e 100644\n--- a/kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/drools/compiler/executor/__modelName__ModelImplementationProviderTest.java\n+++ b/kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-compiler/src/test/java/__packageModelName__/drools/compiler/executor/__modelName__ModelImplementationProviderTest.java\n\n@@ -36,5 +36,6 @@ public class ${modelName}ModelImplementationProviderTest {\n     @Test\n     public void getKiePMMLModel() throws Exception {\n         // TODO\n+        throw new UnsupportedOperationException();\n     }\n }\n\\ No newline at end of file\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ3MjA0Ng==", "url": "https://github.com/kiegroup/drools/pull/2855#discussion_r409472046", "bodyText": "Please remove RedHat license and copyright template from archetype.", "author": "jiripetrlik", "createdAt": "2020-04-16T11:06:58Z", "path": "kie-pmml-new/kie-pmml-models-drools-archetype/src/main/resources/archetype-resources/__rootArtifactId__-evaluator/src/main/java/__packageModelName__/drools/evaluator/PMML__modelName__ModelEvaluator.java", "diffHunk": "@@ -0,0 +1,33 @@\n+#set($str=\"\")\n+#set($dt=$str.getClass().forName(\"java.util.Date\").newInstance())\n+#set($year=$dt.getYear()+1900)\n+/*\n+ * Copyright ${year} Red Hat, Inc. and/or its affiliates.", "originalCommit": "3a26e6983d92102ae777c55f2f951159bacdfcda", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "f293aa804332c3baf86e578d840cb3178daa74c5", "url": "https://github.com/kiegroup/drools/commit/f293aa804332c3baf86e578d840cb3178daa74c5", "message": "[DROOLS-5241] Fixed as per PR suggestions", "committedDate": "2020-04-16T12:04:29Z", "type": "commit"}]}