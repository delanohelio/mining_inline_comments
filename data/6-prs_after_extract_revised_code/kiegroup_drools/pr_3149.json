{"pr_number": 3149, "pr_title": "[KOGITO-3505] avoid to uselessly generate the rete network during a p\u2026", "pr_createdAt": "2020-10-08T13:52:10Z", "pr_url": "https://github.com/kiegroup/drools/pull/3149", "timeline": [{"oid": "e9d0536ea59c5c5b2ec118dcaeed43d1c3db9df6", "url": "https://github.com/kiegroup/drools/commit/e9d0536ea59c5c5b2ec118dcaeed43d1c3db9df6", "message": "[KOGITO-3505] avoid to uselessly generate the rete network during a pmml compilation", "committedDate": "2020-10-08T13:51:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0MDk5NA==", "url": "https://github.com/kiegroup/drools/pull/3149#discussion_r501740994", "bodyText": "@mariofusco\nTypo ? \"Ads\"", "author": "gitgabrio", "createdAt": "2020-10-08T13:55:50Z", "path": "drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java", "diffHunk": "@@ -900,22 +900,32 @@ private boolean isSwappable(Resource original,\n     }\n \n     /**\n-     * This adds a package from a Descr/AST This will also trigger a compile, if\n-     * there are any generated classes to compile of course.\n+     * Ads a package from a Descr/AST also triggering its compilation\n+     * and the generation of the corresponding rete/phreak network\n      */\n     @Override\n     public void addPackage(final PackageDescr packageDescr) {\n-        PackageRegistry pkgRegistry = getOrCreatePackageRegistry(packageDescr);\n+        if ( addPackageWithoutRete( packageDescr ) ) {\n+            compileRete(packageDescr);\n+        }\n+    }\n+\n+    /**\n+     * Ads a package from a Descr/AST also triggering its compilation", "originalCommit": "e9d0536ea59c5c5b2ec118dcaeed43d1c3db9df6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a4b766e91a2cd4b1b9f9a14fee76f2338dd15f6d", "chunk": "diff --git a/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java b/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java\nindex e0f48cb99f..05fb1547d9 100644\n--- a/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java\n+++ b/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java\n\n@@ -900,7 +900,7 @@ public class KnowledgeBuilderImpl implements InternalKnowledgeBuilder {\n     }\n \n     /**\n-     * Ads a package from a Descr/AST also triggering its compilation\n+     * Adds a package from a Descr/AST also triggering its compilation\n      * and the generation of the corresponding rete/phreak network\n      */\n     @Override\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc0MTA1Mg==", "url": "https://github.com/kiegroup/drools/pull/3149#discussion_r501741052", "bodyText": "@mariofusco\nTypo ? \"Ads\"", "author": "gitgabrio", "createdAt": "2020-10-08T13:55:55Z", "path": "drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java", "diffHunk": "@@ -900,22 +900,32 @@ private boolean isSwappable(Resource original,\n     }\n \n     /**\n-     * This adds a package from a Descr/AST This will also trigger a compile, if\n-     * there are any generated classes to compile of course.\n+     * Ads a package from a Descr/AST also triggering its compilation", "originalCommit": "e9d0536ea59c5c5b2ec118dcaeed43d1c3db9df6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a4b766e91a2cd4b1b9f9a14fee76f2338dd15f6d", "chunk": "diff --git a/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java b/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java\nindex e0f48cb99f..05fb1547d9 100644\n--- a/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java\n+++ b/drools-compiler/src/main/java/org/drools/compiler/builder/impl/KnowledgeBuilderImpl.java\n\n@@ -900,7 +900,7 @@ public class KnowledgeBuilderImpl implements InternalKnowledgeBuilder {\n     }\n \n     /**\n-     * Ads a package from a Descr/AST also triggering its compilation\n+     * Adds a package from a Descr/AST also triggering its compilation\n      * and the generation of the corresponding rete/phreak network\n      */\n     @Override\n"}}, {"oid": "a4b766e91a2cd4b1b9f9a14fee76f2338dd15f6d", "url": "https://github.com/kiegroup/drools/commit/a4b766e91a2cd4b1b9f9a14fee76f2338dd15f6d", "message": "wip", "committedDate": "2020-10-08T13:59:31Z", "type": "commit"}]}