{"pr_number": 2725, "pr_title": "RHPAM-2617: [GSS](7.5.1) Rule logic in a RDRL file changes after importing the file as an Asset in RHPAM 7.5", "pr_createdAt": "2020-01-16T11:46:31Z", "pr_url": "https://github.com/kiegroup/drools/pull/2725", "timeline": [{"oid": "c009c192601a73636779212f270a366df6ebc40e", "url": "https://github.com/kiegroup/drools/commit/c009c192601a73636779212f270a366df6ebc40e", "message": "RHPAM-2617: [GSS](7.5.1) Rule logic in a RDRL file changes after importing the file as an Asset in RHPAM 7.5", "committedDate": "2020-01-16T13:40:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQzMzMwOQ==", "url": "https://github.com/kiegroup/drools/pull/2725#discussion_r367433309", "bodyText": "Could you please explain why parseDrl so intensively catch and throw exceptions, however in final everything is ignored?", "author": "jomarko", "createdAt": "2020-01-16T14:03:18Z", "path": "drools-workbench-models/drools-workbench-models-commons/src/main/java/org/drools/workbench/models/commons/backend/rule/RuleModelDRLPersistenceImpl.java", "diffHunk": "@@ -4306,12 +4323,18 @@ private String getDrl() {\n     }\n \n     //Simple fall-back parser of DRL\n-    public RuleModel getSimpleRuleModel(final String drl) {\n+    private RuleModel getSimpleRuleModel(final String drl) {\n         final RuleModel rm = new RuleModel();\n         rm.setPackageName(PackageNameParser.parsePackageName(drl));\n         rm.setImports(ImportsParser.parseImports(drl));\n \n-        final Pattern rulePattern = Pattern.compile(\".*\\\\s?rule\\\\s+(.+?)\\\\s+.*\",\n+        try {\n+            parseAttributes(rm, parseDrl(drl).getAttributes());\n+        } catch (Exception e) {\n+            //Discard. We're unable to retrieve the rule attributes from the DRL", "originalCommit": "c009c192601a73636779212f270a366df6ebc40e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzNTc2Mw==", "url": "https://github.com/kiegroup/drools/pull/2725#discussion_r367935763", "bodyText": "Well..... I copied the other parseDrl(..) method originally written by Mario Fusco (so I assumed he knew what he was doing..). The new method is used to retrieve the rule's attributes. If either parsing the DRL threw an exception or it contained errors we're unable to get the attributes.", "author": "manstis", "createdAt": "2020-01-17T13:31:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQzMzMwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUwNzM5NA==", "url": "https://github.com/kiegroup/drools/pull/2725#discussion_r368507394", "bodyText": "@mariofusco  can we or can not we implement the new parse ethod simply as:\nprivate RuleDescr parseDrl(final String drl) {\n        DrlParser drlParser = new DrlParser();\n        PackageDescr packageDescr;\n\n        packageDescr = drlParser.parse(true, drl);\n        if (drlParser.hasErrors()) {\n            throw new RuleModelUnmarshallingException();\n        }\n       \n        return packageDescr.getRules().get(0);\n    }", "author": "jomarko", "createdAt": "2020-01-20T11:49:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQzMzMwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAyNjA5MA==", "url": "https://github.com/kiegroup/drools/pull/2725#discussion_r370026090", "bodyText": "@jomarko I've revised the method in a new commit.", "author": "manstis", "createdAt": "2020-01-23T10:02:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQzMzMwOQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "2f779807533bcef5364210b43ab40180363bfdf3", "url": "https://github.com/kiegroup/drools/commit/2f779807533bcef5364210b43ab40180363bfdf3", "message": "RHPAM-2617: [GSS](7.5.1) Rule logic in a RDRL file changes after importing the file as an Asset in RHPAM 7.5", "committedDate": "2020-01-23T09:49:40Z", "type": "commit"}, {"oid": "93133bb496f9e89bfa94c6cfbf15aa3a5c25d050", "url": "https://github.com/kiegroup/drools/commit/93133bb496f9e89bfa94c6cfbf15aa3a5c25d050", "message": "Updates following peer review.", "committedDate": "2020-01-23T10:01:37Z", "type": "commit"}, {"oid": "93133bb496f9e89bfa94c6cfbf15aa3a5c25d050", "url": "https://github.com/kiegroup/drools/commit/93133bb496f9e89bfa94c6cfbf15aa3a5c25d050", "message": "Updates following peer review.", "committedDate": "2020-01-23T10:01:37Z", "type": "forcePushed"}]}