{"pr_number": 2458, "pr_title": "[NETBEANS-4908] Enable run/debug single when the suitable task is provided by the Gradle project.", "pr_createdAt": "2020-10-15T06:42:42Z", "pr_url": "https://github.com/apache/netbeans/pull/2458", "timeline": [{"oid": "5d26c9068be44eed599935217b0743dec90b0e8c", "url": "https://github.com/apache/netbeans/commit/5d26c9068be44eed599935217b0743dec90b0e8c", "message": "[NETBEANS-4908] Enable run/debug single if Gradle task are provided", "committedDate": "2020-10-15T01:23:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzOTYzMg==", "url": "https://github.com/apache/netbeans/pull/2458#discussion_r505239632", "bodyText": "Typo in evalueteActionArgs.", "author": "JaroslavTulach", "createdAt": "2020-10-15T07:06:58Z", "path": "extide/gradle/test/unit/src/org/netbeans/modules/gradle/api/execute/RunUtilsTest.java", "diffHunk": "@@ -70,4 +72,15 @@ public void testIncludeOpenProjects2() throws Exception {\n         assertEquals(0, params.size());\n     }\n \n+    public void testEvaluateArgs1() throws Exception {\n+        FileObject a = createGradleProject(\"projectA\",\n+                \"apply plugin: 'java'\\n\", \"\");\n+        Project prjA = ProjectManager.getDefault().findProject(a);\n+        ProjectTrust.getDefault().trustProject(prjA);\n+        openProject(a);\n+        String[] args = RunUtils.evalueteActionArgs(prjA, null, \"Project: ${projectPath}${projectName}\", Lookups.singleton(prjA));", "originalCommit": "a6ff4591f005990e614e0f71a347b00364e7ce2a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY1NTQ1Mw==", "url": "https://github.com/apache/netbeans/pull/2458#discussion_r505655453", "bodyText": "Thanks for spotting the typo!\nWell, I do not know if this support java.lsp.server in any way. That would be your call to decide.", "author": "lkishalmi", "createdAt": "2020-10-15T15:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzOTYzMg=="}], "type": "inlineReview", "revised_code": {"commit": "10252029d3205482bbb289448bb4e15df0d4960c", "chunk": "diff --git a/extide/gradle/test/unit/src/org/netbeans/modules/gradle/api/execute/RunUtilsTest.java b/extide/gradle/test/unit/src/org/netbeans/modules/gradle/api/execute/RunUtilsTest.java\nindex ec27b2bf4a..17a70994f6 100644\n--- a/extide/gradle/test/unit/src/org/netbeans/modules/gradle/api/execute/RunUtilsTest.java\n+++ b/extide/gradle/test/unit/src/org/netbeans/modules/gradle/api/execute/RunUtilsTest.java\n\n@@ -78,7 +78,7 @@ public class RunUtilsTest extends AbstractGradleProjectTestCase {\n         Project prjA = ProjectManager.getDefault().findProject(a);\n         ProjectTrust.getDefault().trustProject(prjA);\n         openProject(a);\n-        String[] args = RunUtils.evalueteActionArgs(prjA, null, \"Project: ${projectPath}${projectName}\", Lookups.singleton(prjA));\n+        String[] args = RunUtils.evaluateActionArgs(prjA, null, \"Project: ${projectPath}${projectName}\", Lookups.singleton(prjA));\n         assertEquals(2, args.length);\n         assertEquals(\"Project:\", args[0]);\n         assertEquals(\":projectA\", args[1]);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI0NTQ4Ng==", "url": "https://github.com/apache/netbeans/pull/2458#discussion_r505245486", "bodyText": "Consider adding better Javadoc. Description/example of \"where/how to register this interface\" was something I'd have expected here.", "author": "JaroslavTulach", "createdAt": "2020-10-15T07:12:11Z", "path": "extide/gradle/src/org/netbeans/modules/gradle/spi/actions/ProjectActionMappingProvider.java", "diffHunk": "@@ -17,13 +17,14 @@\n  * under the License.\n  */\n \n-package org.netbeans.modules.gradle.actions;\n+package org.netbeans.modules.gradle.spi.actions;\n \n import java.util.Set;\n import org.netbeans.modules.gradle.api.execute.ActionMapping;\n \n /**", "originalCommit": "5d26c9068be44eed599935217b0743dec90b0e8c", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "10252029d3205482bbb289448bb4e15df0d4960c", "chunk": "diff --git a/extide/gradle/src/org/netbeans/modules/gradle/spi/actions/ProjectActionMappingProvider.java b/extide/gradle/src/org/netbeans/modules/gradle/spi/actions/ProjectActionMappingProvider.java\nindex 36d1922c63..7f2e29a7ca 100644\n--- a/extide/gradle/src/org/netbeans/modules/gradle/spi/actions/ProjectActionMappingProvider.java\n+++ b/extide/gradle/src/org/netbeans/modules/gradle/spi/actions/ProjectActionMappingProvider.java\n\n@@ -23,6 +23,20 @@ import java.util.Set;\n import org.netbeans.modules.gradle.api.execute.ActionMapping;\n \n /**\n+ * An implementation of this interface can be registered in the Gradle project\n+ * lookup. Gradle support already has an implementation using {@link GradleActionsProvider}-s.\n+ * <p>\n+ * This interface also can be used to query the Gradle command line arguments used\n+ * for a specific action. Like:\n+ * <pre>\n+ *     Project project = some Gradle project\n+ *     String action = some IDE action\n+ *     Lookup context = Lookups.singleton(project); // The context of the action, it is advised to have the project in the context.\n+ *     ProjectActionMappingProvider pamp = project.getLookup().lookup(ProjectActionMappingProvider.class);\n+ *     ActionMapping actionMapping = pamp.findMapping(action);\n+ *     GradleCommandLine cli = new GradleCommandLine(\n+ *             RunUtils.evaluateAcrionArgs(project, actionMapping.getArgs(), action, context));\n+ * </pre>\n  * @author Laszlo Kishalmi\n  * @since 2.6\n  */\n"}}, {"oid": "10252029d3205482bbb289448bb4e15df0d4960c", "url": "https://github.com/apache/netbeans/commit/10252029d3205482bbb289448bb4e15df0d4960c", "message": "[NETBEANS-4908] made Gradle Actions resolvable for modules.", "committedDate": "2020-10-15T14:40:29Z", "type": "commit"}, {"oid": "10252029d3205482bbb289448bb4e15df0d4960c", "url": "https://github.com/apache/netbeans/commit/10252029d3205482bbb289448bb4e15df0d4960c", "message": "[NETBEANS-4908] made Gradle Actions resolvable for modules.", "committedDate": "2020-10-15T14:40:29Z", "type": "forcePushed"}]}