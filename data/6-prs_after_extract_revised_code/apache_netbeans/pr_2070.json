{"pr_number": 2070, "pr_title": "[NETBEANS-4029] Fix feature dialog", "pr_createdAt": "2020-04-09T21:46:54Z", "pr_url": "https://github.com/apache/netbeans/pull/2070", "timeline": [{"oid": "8d4bfc7e13b818b7684db9f4f83e5337fcb117bf", "url": "https://github.com/apache/netbeans/commit/8d4bfc7e13b818b7684db9f4f83e5337fcb117bf", "message": "[NETBEANS-4029] Fix feature dialog", "committedDate": "2020-04-10T18:50:40Z", "type": "forcePushed"}, {"oid": "299b19f7b09554569b5f0604b5ff3819b50a5eac", "url": "https://github.com/apache/netbeans/commit/299b19f7b09554569b5f0604b5ff3819b50a5eac", "message": "[NETBEANS-4029] Fix feature dialog", "committedDate": "2020-04-20T11:24:42Z", "type": "forcePushed"}, {"oid": "fd9a7853b2357e4f0a91db1b6f20d4c15a157d15", "url": "https://github.com/apache/netbeans/commit/fd9a7853b2357e4f0a91db1b6f20d4c15a157d15", "message": "[NETBEANS-4029] Fix feature dialog", "committedDate": "2020-04-28T18:44:29Z", "type": "commit"}, {"oid": "fd9a7853b2357e4f0a91db1b6f20d4c15a157d15", "url": "https://github.com/apache/netbeans/commit/fd9a7853b2357e4f0a91db1b6f20d4c15a157d15", "message": "[NETBEANS-4029] Fix feature dialog", "committedDate": "2020-04-28T18:44:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2MjczMw==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r417562733", "bodyText": "The original code contained a null check here, is it unnecessary ?", "author": "sdedic", "createdAt": "2020-04-29T19:36:46Z", "path": "ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java", "diffHunk": "@@ -190,6 +180,40 @@ public void setInfo(FeatureInfo info, String displayName, Collection<UpdateEleme\n             org.openide.awt.Mnemonics.setLocalizedText(downloadButton, btnDownloadMsg);\n         }\n     }\n+    \n+    /**\n+     * Collect extra modules texts\n+     */\n+    protected List<String> collectExtraModulesTextsFromFeatures(Collection<FeatureInfo> features, boolean required) {\n+        List<String> descriptionsList = new ArrayList<>();\n+        for (FeatureInfo fi : features) {\n+            String s = required ? fi.getExtraModulesRequiredText(): fi.getExtraModulesRecommendedText();\n+            if (!descriptionsList.contains(s)) {", "originalCommit": "fd9a7853b2357e4f0a91db1b6f20d4c15a157d15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4OTcwNQ==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r418289705", "bodyText": "No, I added the null check", "author": "hectorespert", "createdAt": "2020-04-30T21:07:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2MjczMw=="}], "type": "inlineReview", "revised_code": {"commit": "607523d511d1615f9ad437f5faf58504d3a5dac4", "chunk": "diff --git a/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java b/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java\nindex 658c76728f..9042b5290c 100644\n--- a/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java\n+++ b/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java\n\n@@ -188,7 +190,7 @@ public class ConfigurationPanel extends JPanel {\n         List<String> descriptionsList = new ArrayList<>();\n         for (FeatureInfo fi : features) {\n             String s = required ? fi.getExtraModulesRequiredText(): fi.getExtraModulesRecommendedText();\n-            if (!descriptionsList.contains(s)) {\n+            if (nonNull(s) && !descriptionsList.contains(s)) {\n                 descriptionsList.add(s);\n             }\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2NzA0OQ==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r417567049", "bodyText": "A suggestion: these two functions (collectExtraModulesTextsFromFeatures and generateDownloadMessageFromExtraModulesTexts) are called in a sequence: you could merge it, producing the String for the label - and you could eventually print the required texts in Bold into the string ?", "author": "sdedic", "createdAt": "2020-04-29T19:44:46Z", "path": "ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java", "diffHunk": "@@ -190,6 +180,40 @@ public void setInfo(FeatureInfo info, String displayName, Collection<UpdateEleme\n             org.openide.awt.Mnemonics.setLocalizedText(downloadButton, btnDownloadMsg);\n         }\n     }\n+    \n+    /**\n+     * Collect extra modules texts\n+     */\n+    protected List<String> collectExtraModulesTextsFromFeatures(Collection<FeatureInfo> features, boolean required) {\n+        List<String> descriptionsList = new ArrayList<>();\n+        for (FeatureInfo fi : features) {\n+            String s = required ? fi.getExtraModulesRequiredText(): fi.getExtraModulesRecommendedText();\n+            if (!descriptionsList.contains(s)) {\n+                descriptionsList.add(s);\n+            }\n+        }\n+        return descriptionsList;\n+    } \n+    \n+    /**\n+     * Generate download message from extra modules texts\n+     * @param extraModulesTexts\n+     * @return String Text to set in download label\n+     */\n+    protected String generateDownloadMessageFromExtraModulesTexts(List<String> extraModulesTexts) {\n+        StringBuilder sbDownload = new StringBuilder();", "originalCommit": "fd9a7853b2357e4f0a91db1b6f20d4c15a157d15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI5MTUzNQ==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r418291535", "bodyText": "I could merge both functions, but I created these to create tests for this part of the code.\nIt is not the best solution but test the ConfigurationPanel clas is too hard due his dependencies.", "author": "hectorespert", "createdAt": "2020-04-30T21:11:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2NzA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI5NTMzMQ==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r418295331", "bodyText": "OK, it was just an idea; let's see how the entire message list will be readable", "author": "sdedic", "createdAt": "2020-04-30T21:19:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU2NzA0OQ=="}], "type": "inlineReview", "revised_code": {"commit": "607523d511d1615f9ad437f5faf58504d3a5dac4", "chunk": "diff --git a/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java b/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java\nindex 658c76728f..9042b5290c 100644\n--- a/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java\n+++ b/ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java\n\n@@ -188,7 +190,7 @@ public class ConfigurationPanel extends JPanel {\n         List<String> descriptionsList = new ArrayList<>();\n         for (FeatureInfo fi : features) {\n             String s = required ? fi.getExtraModulesRequiredText(): fi.getExtraModulesRecommendedText();\n-            if (!descriptionsList.contains(s)) {\n+            if (nonNull(s) && !descriptionsList.contains(s)) {\n                 descriptionsList.add(s);\n             }\n         }\n"}}, {"oid": "607523d511d1615f9ad437f5faf58504d3a5dac4", "url": "https://github.com/apache/netbeans/commit/607523d511d1615f9ad437f5faf58504d3a5dac4", "message": "Check string is not null", "committedDate": "2020-04-30T21:05:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI5NzQwMQ==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r418297401", "bodyText": "While the check does its job isn't it a little overabstracting a simple s != null :-)  ?\nif there is an explicit import static for the nonNull, the preceding import j.u.Objects is not needed.", "author": "sdedic", "createdAt": "2020-04-30T21:23:44Z", "path": "ergonomics/ide.ergonomics/src/org/netbeans/modules/ide/ergonomics/fod/ConfigurationPanel.java", "diffHunk": "@@ -188,7 +190,7 @@ public void setInfo(FeatureInfo info, String displayName, Collection<UpdateEleme\n         List<String> descriptionsList = new ArrayList<>();\n         for (FeatureInfo fi : features) {\n             String s = required ? fi.getExtraModulesRequiredText(): fi.getExtraModulesRecommendedText();\n-            if (!descriptionsList.contains(s)) {\n+            if (nonNull(s) && !descriptionsList.contains(s)) {", "originalCommit": "607523d511d1615f9ad437f5faf58504d3a5dac4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ2OTY4Nw==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r418469687", "bodyText": "I removed unused import. I forgot to remove it.", "author": "hectorespert", "createdAt": "2020-05-01T09:00:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI5NzQwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1MzcxNA==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r420053714", "bodyText": "is this resolved ? can we merge ?", "author": "ebarboni", "createdAt": "2020-05-05T11:58:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI5NzQwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1NTQzMg==", "url": "https://github.com/apache/netbeans/pull/2070#discussion_r420055432", "bodyText": "It is resolved", "author": "hectorespert", "createdAt": "2020-05-05T12:01:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI5NzQwMQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "dba9e54e90cb2cf13fa3305532469fcb899e1b4a", "url": "https://github.com/apache/netbeans/commit/dba9e54e90cb2cf13fa3305532469fcb899e1b4a", "message": "Remove unused import", "committedDate": "2020-05-01T08:52:49Z", "type": "commit"}]}