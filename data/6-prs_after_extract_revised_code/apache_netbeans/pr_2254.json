{"pr_number": 2254, "pr_title": "[NETBEANS-4573] PHP CS Fixer doesn't work with a directory and a file", "pr_createdAt": "2020-07-14T12:23:03Z", "pr_url": "https://github.com/apache/netbeans/pull/2254", "timeline": [{"oid": "d3491862d28562c0b3e95e7bd4f9a088e197071c", "url": "https://github.com/apache/netbeans/commit/d3491862d28562c0b3e95e7bd4f9a088e197071c", "message": "[NETBEANS-4573] PHP CS Fixer doesn't work with a directory and a file", "committedDate": "2020-07-14T11:04:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyNTM4OA==", "url": "https://github.com/apache/netbeans/pull/2254#discussion_r454825388", "bodyText": "Just to be sure - isn't a problem that before it was file but now it can be a directory?", "author": "tmysik", "createdAt": "2020-07-15T06:40:17Z", "path": "php/php.code.analysis/src/org/netbeans/modules/php/analysis/commands/CodingStandardsFixer.java", "diffHunk": "@@ -172,15 +172,17 @@ public void startAnalyzeGroup() {\n     public List<Result> analyze(CodingStandardsFixerParams params, FileObject file) {\n         assert file.isValid() : \"Invalid file given: \" + file;\n         try {\n-            \n-            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), findWorkDir(file))\n+            File workDir = findWorkDir(file);\n+            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), workDir)\n                     .additionalParameters(getParameters(params, file))\n                     .runAndWait(getDescriptor(), \"Running coding standards fixer...\"); // NOI18N\n             if (result == null) {\n                 return null;\n             }\n-\n-            return CodingStandardsFixerReportParser.parse(XML_LOG, file);\n+            // if the project for the file is not found(i.e. if the workDir is not found),\n+            // the results are not shown in the inspector window\n+            FileObject root = workDir != null ? FileUtil.toFileObject(workDir) : file;\n+            return CodingStandardsFixerReportParser.parse(XML_LOG, root);", "originalCommit": "d3491862d28562c0b3e95e7bd4f9a088e197071c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4MDQ0MA==", "url": "https://github.com/apache/netbeans/pull/2254#discussion_r454980440", "bodyText": "I think it's OK. It just worked with the project directory (i.e. when the working directory is the project directory) before I fixed this.\nThe case where the project directory(i.e. working directory) cannot be found: a user inspects a file or a directory from a Favorite pane. In such case, the API side doesn't show the result in the inspector window. But the XML result is shown in the Output window. I confirmed that.", "author": "junichi11", "createdAt": "2020-07-15T11:25:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyNTM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4MTcwMg==", "url": "https://github.com/apache/netbeans/pull/2254#discussion_r454981702", "bodyText": "OK then. Thanks!", "author": "tmysik", "createdAt": "2020-07-15T11:28:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyNTM4OA=="}], "type": "inlineReview", "revised_code": null}]}