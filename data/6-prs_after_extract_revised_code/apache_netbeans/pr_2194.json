{"pr_number": 2194, "pr_title": "[NETBEANS-4458] - enable use of generics", "pr_createdAt": "2020-06-16T23:32:55Z", "pr_url": "https://github.com/apache/netbeans/pull/2194", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA5NDcyMw==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442094723", "bodyText": "This is an API change.", "author": "JaroslavTulach", "createdAt": "2020-06-18T09:29:16Z", "path": "platform/openide.nodes/src/org/openide/cookies/InstanceCookie.java", "diffHunk": "@@ -31,7 +31,7 @@\n  *\n  * @author Jaroslav Tulach\n  */\n-public interface InstanceCookie/*<T>*/ extends Node.Cookie {\n+public interface InstanceCookie<T> extends Node.Cookie {", "originalCommit": "d8d57157a7e43876b1f7c20c5765f328c4ddee1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwNTg3Mw==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442605873", "bodyText": "Reverted back to original.", "author": "BradWalker", "createdAt": "2020-06-19T03:01:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA5NDcyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwNjI1Nw==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442606257", "bodyText": "I've reverted this back to the original state..", "author": "BradWalker", "createdAt": "2020-06-19T03:03:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA5NDcyMw=="}], "type": "inlineReview", "revised_code": {"commit": "0b61d120c4b0e63ff95490174696e87516efa4fa", "chunk": "diff --git a/platform/openide.nodes/src/org/openide/cookies/InstanceCookie.java b/platform/openide.nodes/src/org/openide/cookies/InstanceCookie.java\nindex a52bbf62a7..7ff9945ae6 100644\n--- a/platform/openide.nodes/src/org/openide/cookies/InstanceCookie.java\n+++ b/platform/openide.nodes/src/org/openide/cookies/InstanceCookie.java\n\n@@ -31,7 +31,7 @@ import org.openide.nodes.Node;\n  *\n  * @author Jaroslav Tulach\n  */\n-public interface InstanceCookie<T> extends Node.Cookie {\n+public interface InstanceCookie/*<T>*/ extends Node.Cookie {\n \n     /**\n      * The name of {@link #instanceClass}.\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5NzQ0NQ==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442497445", "bodyText": "This is API (visualized in the IDE by the \"unlocked\" lock), and the \"api\" in the package is a dead giveaway. If you want to change this, @jtulach rightly pointed out, that we have to get it right, as we have only one chance.", "author": "matthiasblaesing", "createdAt": "2020-06-18T20:55:49Z", "path": "ide/xml.core/src/org/netbeans/modules/xml/api/model/ExtendedGrammarQuery.java", "diffHunk": "@@ -32,6 +32,6 @@\n public interface ExtendedGrammarQuery extends GrammarQuery {\n     \n     /** @return a List of resolved entities System id-s names.*/\n-    public List/*<String>*/ getResolvedEntities();\n+    public List<String> getResolvedEntities();", "originalCommit": "d8d57157a7e43876b1f7c20c5765f328c4ddee1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwNjAzNA==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442606034", "bodyText": "Reverted back to original. We'll figure this out in the future..", "author": "BradWalker", "createdAt": "2020-06-19T03:02:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5NzQ0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "0b61d120c4b0e63ff95490174696e87516efa4fa", "chunk": "diff --git a/ide/xml.core/src/org/netbeans/modules/xml/api/model/ExtendedGrammarQuery.java b/ide/xml.core/src/org/netbeans/modules/xml/api/model/ExtendedGrammarQuery.java\nindex 9cdd3db048..2025f59cf3 100644\n--- a/ide/xml.core/src/org/netbeans/modules/xml/api/model/ExtendedGrammarQuery.java\n+++ b/ide/xml.core/src/org/netbeans/modules/xml/api/model/ExtendedGrammarQuery.java\n\n@@ -32,6 +32,6 @@ import java.util.List;\n public interface ExtendedGrammarQuery extends GrammarQuery {\n     \n     /** @return a List of resolved entities System id-s names.*/\n-    public List<String> getResolvedEntities();\n+    public List/*<String>*/ getResolvedEntities();\n     \n }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5ODU1NQ==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442498555", "bodyText": "This is API (friend-only)", "author": "matthiasblaesing", "createdAt": "2020-06-18T20:58:04Z", "path": "ide/xml.text/src/org/netbeans/modules/xml/text/navigator/base/AbstractXMLNavigatorPanel.java", "diffHunk": "@@ -92,7 +92,7 @@ public void panelDeactivated() {\n      * \n      * @param selectedFiles \n      */\n-    public void navigate(Collection/*<DataObject>*/ selectedFiles) {\n+    public void navigate(Collection<DataObject> selectedFiles) {", "originalCommit": "d8d57157a7e43876b1f7c20c5765f328c4ddee1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwNTkzNw==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r442605937", "bodyText": "Reverted back to original.", "author": "BradWalker", "createdAt": "2020-06-19T03:01:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ5ODU1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "0b61d120c4b0e63ff95490174696e87516efa4fa", "chunk": "diff --git a/ide/xml.text/src/org/netbeans/modules/xml/text/navigator/base/AbstractXMLNavigatorPanel.java b/ide/xml.text/src/org/netbeans/modules/xml/text/navigator/base/AbstractXMLNavigatorPanel.java\nindex 5f07b3f1e8..1f8def4e36 100644\n--- a/ide/xml.text/src/org/netbeans/modules/xml/text/navigator/base/AbstractXMLNavigatorPanel.java\n+++ b/ide/xml.text/src/org/netbeans/modules/xml/text/navigator/base/AbstractXMLNavigatorPanel.java\n\n@@ -92,7 +92,7 @@ public abstract class AbstractXMLNavigatorPanel implements NavigatorPanel {\n      * \n      * @param selectedFiles \n      */\n-    public void navigate(Collection<DataObject> selectedFiles) {\n+    public void navigate(Collection/*<DataObject>*/ selectedFiles) {\n         if(selectedFiles.size() == 1) {\n             DataObject d = (DataObject) selectedFiles.iterator().next();\n             navigator.navigate(d);           \n"}}, {"oid": "0b61d120c4b0e63ff95490174696e87516efa4fa", "url": "https://github.com/apache/netbeans/commit/0b61d120c4b0e63ff95490174696e87516efa4fa", "message": "[NETBEANS-4458] - enable use of generics\n\nA lot of places in the code has generic use commented out.. For example, the following in\nLayoutModel.java\n\n     public void unsetSameSize(List/*<String>*/ components, int dimension) {\n        Iterator i = components.iterator();\n        while (i.hasNext()) {\n            String cid = (String)i.next();\n            LayoutComponent lc = getLayoutComponent(cid);\n            removeComponentFromLinkSizedGroup(lc, dimension);\n        }\n    }\n\nAll I've done here is enable it to reduce the warnings and test out the code to make sure it works correctly.", "committedDate": "2020-06-19T03:10:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ3NjAxOA==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r444476018", "bodyText": "This is package private - I would not consider this API, so could be made generic and then the callsite of this function could be generified.", "author": "matthiasblaesing", "createdAt": "2020-06-23T20:05:41Z", "path": "profiler/lib.profiler/src/org/netbeans/lib/profiler/heap/ClassDumpSegment.java", "diffHunk": "@@ -202,12 +202,12 @@ void addInstanceSize(ClassDump cls, int tag, long instanceOffset) {\n         }\n     }\n \n-    synchronized List /*<JavaClass>*/ createClassCollection() {\n+    synchronized List/*<JavaClass>*/ createClassCollection() {", "originalCommit": "0b61d120c4b0e63ff95490174696e87516efa4fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ2NDY0MA==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r540464640", "bodyText": "This is package private - I would not consider this API, so could be made generic and then the callsite of this function could be generified.\n\nFixed..", "author": "BradWalker", "createdAt": "2020-12-10T20:11:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ3NjAxOA=="}], "type": "inlineReview", "revised_code": {"commit": "534be04f7bddd167d31068ad6d3f5162b0fd0380", "chunk": "diff --git a/profiler/lib.profiler/src/org/netbeans/lib/profiler/heap/ClassDumpSegment.java b/profiler/lib.profiler/src/org/netbeans/lib/profiler/heap/ClassDumpSegment.java\nindex a74d57630d..312a7f7d44 100644\n--- a/profiler/lib.profiler/src/org/netbeans/lib/profiler/heap/ClassDumpSegment.java\n+++ b/profiler/lib.profiler/src/org/netbeans/lib/profiler/heap/ClassDumpSegment.java\n\n@@ -202,7 +202,7 @@ class ClassDumpSegment extends TagBounds {\n         }\n     }\n \n-    synchronized List/*<JavaClass>*/ createClassCollection() {\n+    synchronized List<JavaClass> createClassCollection() {\n         if (classes != null) {\n             return classes;\n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ3NjU1Mw==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r444476553", "bodyText": "This is a friend API.", "author": "matthiasblaesing", "createdAt": "2020-06-23T20:06:50Z", "path": "profiler/lib.profiler/src/org/netbeans/lib/profiler/results/BaseCallGraphBuilder.java", "diffHunk": "@@ -42,7 +42,7 @@\n \n     //~ Instance fields ----------------------------------------------------------------------------------------------------------\n \n-    protected List/*<Runnable>*/ afterBatchCommands = new ArrayList<>();\n+    protected List<Runnable> afterBatchCommands = new ArrayList<>();", "originalCommit": "0b61d120c4b0e63ff95490174696e87516efa4fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ2NDMyMg==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r540464322", "bodyText": "This is a friend API.\n\nfixed..", "author": "BradWalker", "createdAt": "2020-12-10T20:11:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ3NjU1Mw=="}], "type": "inlineReview", "revised_code": {"commit": "534be04f7bddd167d31068ad6d3f5162b0fd0380", "chunk": "diff --git a/profiler/lib.profiler/src/org/netbeans/lib/profiler/results/BaseCallGraphBuilder.java b/profiler/lib.profiler/src/org/netbeans/lib/profiler/results/BaseCallGraphBuilder.java\nindex 352b1228c4..4580d5f5e3 100644\n--- a/profiler/lib.profiler/src/org/netbeans/lib/profiler/results/BaseCallGraphBuilder.java\n+++ b/profiler/lib.profiler/src/org/netbeans/lib/profiler/results/BaseCallGraphBuilder.java\n\n@@ -42,7 +42,7 @@ public abstract class BaseCallGraphBuilder implements ProfilingResultListener, C\n \n     //~ Instance fields ----------------------------------------------------------------------------------------------------------\n \n-    protected List<Runnable> afterBatchCommands = new ArrayList<>();\n+    protected List/*<Runnable>*/ afterBatchCommands = new ArrayList<>();\n     protected ProfilingSessionStatus status;\n     protected final Set cctListeners = new CopyOnWriteArraySet();\n     protected WeakReference clientRef;\n"}}, {"oid": "534be04f7bddd167d31068ad6d3f5162b0fd0380", "url": "https://github.com/apache/netbeans/commit/534be04f7bddd167d31068ad6d3f5162b0fd0380", "message": "[NETBEANS-4458] - enable use of generics\n\nA lot of places in the code has generic use commented out.. For example, the following in\nLayoutModel.java\n\n     public void unsetSameSize(List/*<String>*/ components, int dimension) {\n        Iterator i = components.iterator();\n        while (i.hasNext()) {\n            String cid = (String)i.next();\n            LayoutComponent lc = getLayoutComponent(cid);\n            removeComponentFromLinkSizedGroup(lc, dimension);\n        }\n    }\n\nAll I've done here is enable it to reduce the warnings and test out the code to make sure it works correctly.", "committedDate": "2020-12-10T20:09:55Z", "type": "commit"}, {"oid": "534be04f7bddd167d31068ad6d3f5162b0fd0380", "url": "https://github.com/apache/netbeans/commit/534be04f7bddd167d31068ad6d3f5162b0fd0380", "message": "[NETBEANS-4458] - enable use of generics\n\nA lot of places in the code has generic use commented out.. For example, the following in\nLayoutModel.java\n\n     public void unsetSameSize(List/*<String>*/ components, int dimension) {\n        Iterator i = components.iterator();\n        while (i.hasNext()) {\n            String cid = (String)i.next();\n            LayoutComponent lc = getLayoutComponent(cid);\n            removeComponentFromLinkSizedGroup(lc, dimension);\n        }\n    }\n\nAll I've done here is enable it to reduce the warnings and test out the code to make sure it works correctly.", "committedDate": "2020-12-10T20:09:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2Njg0Nw==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r540766847", "bodyText": "HashSet of size 1 is probably a non-sense. By default it has 75% fill ratio and then it is rehashed.E.g. as soon as first item is added, the set is probably rehashed.", "author": "jtulach", "createdAt": "2020-12-11T08:18:45Z", "path": "enterprise/web.jsf/src/org/netbeans/modules/web/jsf/wizards/TemplateClientPanelVisual.java", "diffHunk": "@@ -75,7 +75,7 @@\n \n     private WizardDescriptor wizardDescriptor;\n \n-    private final Set/*<ChangeListener>*/ listeners = new HashSet(1);", "originalCommit": "534be04f7bddd167d31068ad6d3f5162b0fd0380", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUxMDk1NQ==", "url": "https://github.com/apache/netbeans/pull/2194#discussion_r542510955", "bodyText": "HashSet of size 1 is probably a non-sense.\n\nJust a follow-up comment in case someone comes across this bug report in the future.. I completely agree with your comment! My goal is simply to try and stay away from any \"potential\" source changes that could be behavioral. Even ones as small as this. Hope that explains why I do what I do..", "author": "BradWalker", "createdAt": "2020-12-14T16:14:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2Njg0Nw=="}], "type": "inlineReview", "revised_code": null}]}