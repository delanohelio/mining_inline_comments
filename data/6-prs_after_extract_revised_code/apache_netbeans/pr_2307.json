{"pr_number": 2307, "pr_title": "[NETBEANS-4062] Fixed issue : import RECORD from other package hint", "pr_createdAt": "2020-08-12T18:03:12Z", "pr_url": "https://github.com/apache/netbeans/pull/2307", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMjczMw==", "url": "https://github.com/apache/netbeans/pull/2307#discussion_r469732733", "bodyText": "I don't think we have to change this.", "author": "junichi11", "createdAt": "2020-08-13T06:48:47Z", "path": "java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java", "diffHunk": "@@ -436,7 +436,7 @@ public boolean signatureEquals (@NonNull final T element) {\n      * @param kind the {@link ElementKind} of the {@link TypeElement},\n      * allowed values are {@link ElementKind#CLASS}, {@link ElementKind#INTERFACE},\n      * {@link ElementKind#ENUM} and {@link ElementKind#ANNOTATION_TYPE}.\n-     * @param binaryName the class binary name as specified by JLS \u00a713.1\n+     * @param binaryName the class binary name as specified by JLS \u0e22\u0e0713.1", "originalCommit": "e6e9b989edcdcac98dc36fe835de0c09b288ae9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgxNTg0OA==", "url": "https://github.com/apache/netbeans/pull/2307#discussion_r469815848", "bodyText": "comment addressed", "author": "singh-akhilesh", "createdAt": "2020-08-13T09:19:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMjczMw=="}], "type": "inlineReview", "revised_code": {"commit": "3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "chunk": "diff --git a/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java b/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java\nindex 06b3ad8954..02ac898f94 100644\n--- a/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java\n+++ b/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java\n\n@@ -436,7 +436,7 @@ public final class ElementHandle<T extends Element> {\n      * @param kind the {@link ElementKind} of the {@link TypeElement},\n      * allowed values are {@link ElementKind#CLASS}, {@link ElementKind#INTERFACE},\n      * {@link ElementKind#ENUM} and {@link ElementKind#ANNOTATION_TYPE}.\n-     * @param binaryName the class binary name as specified by JLS \u0e22\u0e0713.1\n+     * @param binaryName the class binary name as specified by JLS \u00a713.1\n      * @return the created {@link ElementHandle}\n      * @throws IllegalArgumentException if kind is neither class nor interface\n      * @since 0.98\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMzI3Mg==", "url": "https://github.com/apache/netbeans/pull/2307#discussion_r469733272", "bodyText": "Please use {} (for else) and reformat your changes.", "author": "junichi11", "createdAt": "2020-08-13T06:50:06Z", "path": "java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java", "diffHunk": "@@ -634,7 +634,11 @@ public ElementHandle create(ElementKind kind, String... descriptors) {\n                     }\n                     return new ElementHandle<VariableElement> (kind, descriptors);\n                 default:\n-                    throw new IllegalArgumentException ();\n+                    if(kind.name().equals(TreeShims.RECORD) &&  (descriptors.length == 1)) {\n+                        return new ElementHandle<TypeElement> (kind, descriptors);\n+                    }\n+                    else throw new IllegalArgumentException ();", "originalCommit": "e6e9b989edcdcac98dc36fe835de0c09b288ae9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgxNTk3OQ==", "url": "https://github.com/apache/netbeans/pull/2307#discussion_r469815979", "bodyText": "comment addressed", "author": "singh-akhilesh", "createdAt": "2020-08-13T09:19:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMzI3Mg=="}], "type": "inlineReview", "revised_code": {"commit": "3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "chunk": "diff --git a/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java b/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java\nindex 06b3ad8954..02ac898f94 100644\n--- a/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java\n+++ b/java/java.source.base/src/org/netbeans/api/java/source/ElementHandle.java\n\n@@ -634,10 +634,11 @@ public final class ElementHandle<T extends Element> {\n                     }\n                     return new ElementHandle<VariableElement> (kind, descriptors);\n                 default:\n-                    if(kind.name().equals(TreeShims.RECORD) &&  (descriptors.length == 1)) {\n-                        return new ElementHandle<TypeElement> (kind, descriptors);\n+                    if (kind.name().equals(TreeShims.RECORD) && (descriptors.length == 1)) {\n+                        return new ElementHandle<TypeElement>(kind, descriptors);\n+                    } else {\n+                        throw new IllegalArgumentException();\n                     }\n-                    else throw new IllegalArgumentException ();\n                     \n             }            \n         }\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMzUyOQ==", "url": "https://github.com/apache/netbeans/pull/2307#discussion_r469733529", "bodyText": "Please use {}.", "author": "junichi11", "createdAt": "2020-08-13T06:50:41Z", "path": "java/java.source.base/src/org/netbeans/api/java/source/GeneratorUtilities.java", "diffHunk": "@@ -1142,7 +1143,12 @@ public CompilationUnitTree addImports(CompilationUnitTree cut, Set<? extends Ele\n                     el = e.getEnclosingElement();\n                     break;\n                 default:\n-                    assert false : \"Illegal element kind: \" + e.getKind(); //NOI18N\n+                    if (TreeShims.isRecord(e)) {\n+                        if (e.getEnclosingElement().getKind() == ElementKind.PACKAGE) {\n+                            el = e.getEnclosingElement();\n+                        }\n+                    } else\n+                        assert false : \"Illegal element kind: \" + e.getKind(); //NOI18N", "originalCommit": "e6e9b989edcdcac98dc36fe835de0c09b288ae9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgxNjAzNw==", "url": "https://github.com/apache/netbeans/pull/2307#discussion_r469816037", "bodyText": "comment addressed", "author": "singh-akhilesh", "createdAt": "2020-08-13T09:19:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMzUyOQ=="}], "type": "inlineReview", "revised_code": {"commit": "3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "chunk": "diff --git a/java/java.source.base/src/org/netbeans/api/java/source/GeneratorUtilities.java b/java/java.source.base/src/org/netbeans/api/java/source/GeneratorUtilities.java\nindex 90edd4822c..40a051cafe 100644\n--- a/java/java.source.base/src/org/netbeans/api/java/source/GeneratorUtilities.java\n+++ b/java/java.source.base/src/org/netbeans/api/java/source/GeneratorUtilities.java\n\n@@ -1147,8 +1147,9 @@ public final class GeneratorUtilities {\n                         if (e.getEnclosingElement().getKind() == ElementKind.PACKAGE) {\n                             el = e.getEnclosingElement();\n                         }\n-                    } else\n+                    } else {\n                         assert false : \"Illegal element kind: \" + e.getKind(); //NOI18N\n+                    }\n             }\n             if (el != null) {\n                 Integer cnt = isStatic ? typeCounts.get((TypeElement)el) : pkgCounts.get((PackageElement)el);\n"}}, {"oid": "3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "url": "https://github.com/apache/netbeans/commit/3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "message": "[NETBEANS-4062] Fixed issue : import RECORD from other package hint", "committedDate": "2020-08-13T09:05:57Z", "type": "commit"}, {"oid": "3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "url": "https://github.com/apache/netbeans/commit/3ce0c31ded8cf6d1760a82c286268c409fc78a3c", "message": "[NETBEANS-4062] Fixed issue : import RECORD from other package hint", "committedDate": "2020-08-13T09:05:57Z", "type": "forcePushed"}]}