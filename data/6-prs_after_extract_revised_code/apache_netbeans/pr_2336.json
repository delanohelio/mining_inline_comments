{"pr_number": 2336, "pr_title": "[NETBEANS-4755] - remove use of deprecated API - getURL()", "pr_createdAt": "2020-08-31T05:00:46Z", "pr_url": "https://github.com/apache/netbeans/pull/2336", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NDUyNw==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r485094527", "bodyText": "could you please merge the new lines 75 + 76? The null assignement is unecessary.", "author": "matthiasblaesing", "createdAt": "2020-09-08T17:48:41Z", "path": "enterprise/j2ee.ddloaders/src/org/netbeans/modules/j2ee/ddloaders/web/DDDataNode.java", "diffHunk": "@@ -73,11 +73,7 @@ public String getShortDescription() {\n         if (saxError == null) {\n             if (dataObject instanceof DDFragmentDataObject) {\n                 URL url = null;\n-                try {\n-                    url = dataObject.getPrimaryFile().getURL();\n-                } catch (FileStateInvalidException ex) {\n-                    // ignore\n-                }\n+                url = dataObject.getPrimaryFile().toURL();", "originalCommit": "479f986fe5586a436615ec2654b00c9c07f3033a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzAxODA4NA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633018084", "bodyText": "Fixed..", "author": "BradWalker", "createdAt": "2021-05-15T23:34:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NDUyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzA4MzU3MA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633083570", "bodyText": "Looks still the same - could you please check whether the commit really made it? I'm looking at the changes from the github UI and lines 75+76 are still separate.", "author": "matthiasblaesing", "createdAt": "2021-05-16T12:07:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NDUyNw=="}], "type": "inlineReview", "revised_code": {"commit": "aa6413647a163ea20a8676042fb926af61b34d8a", "chunk": "diff --git a/enterprise/j2ee.ddloaders/src/org/netbeans/modules/j2ee/ddloaders/web/DDDataNode.java b/enterprise/j2ee.ddloaders/src/org/netbeans/modules/j2ee/ddloaders/web/DDDataNode.java\nindex 3fcf553292..c82087cffe 100644\n--- a/enterprise/j2ee.ddloaders/src/org/netbeans/modules/j2ee/ddloaders/web/DDDataNode.java\n+++ b/enterprise/j2ee.ddloaders/src/org/netbeans/modules/j2ee/ddloaders/web/DDDataNode.java\n\n@@ -72,8 +72,7 @@ public class DDDataNode extends DataNode {\n         org.xml.sax.SAXException saxError = dataObject.getSaxError();\n         if (saxError == null) {\n             if (dataObject instanceof DDFragmentDataObject) {\n-                URL url = null;\n-                url = dataObject.getPrimaryFile().toURL();\n+                URL url = dataObject.getPrimaryFile().toURL();\n                 return NbBundle.getBundle(DDDataNode.class).getString(\"HINT_web_fragment_dd\") + (url != null ? \" [\"+url+\"]\" : \"\");\n             }\n             else\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NjMyNA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r485096324", "bodyText": "Please merge new lines 195+196", "author": "matthiasblaesing", "createdAt": "2020-09-08T17:51:52Z", "path": "enterprise/web.freeform/src/org/netbeans/modules/web/freeform/WebModules.java", "diffHunk": "@@ -193,11 +193,7 @@ private FileObject getFile (Element parent, String fileElName) {\n         Set<FileObject> srcRootSet = new HashSet<FileObject>();\n         for (int i = 0; i < sg.length; i++) {\n             URL entry; \n-            try {\n-                entry = sg[i].getRootFolder().getURL();\n-            } catch (FileStateInvalidException x) {\n-                throw new AssertionError(x);\n-            }\n+            entry = sg[i].getRootFolder().toURL();", "originalCommit": "479f986fe5586a436615ec2654b00c9c07f3033a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzAxODE2Nw==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633018167", "bodyText": "fixed..", "author": "BradWalker", "createdAt": "2021-05-15T23:35:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NjMyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzA4MzY0NA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633083644", "bodyText": "Looks still the same", "author": "matthiasblaesing", "createdAt": "2021-05-16T12:08:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NjMyNA=="}], "type": "inlineReview", "revised_code": {"commit": "aa6413647a163ea20a8676042fb926af61b34d8a", "chunk": "diff --git a/enterprise/web.freeform/src/org/netbeans/modules/web/freeform/WebModules.java b/enterprise/web.freeform/src/org/netbeans/modules/web/freeform/WebModules.java\nindex 97fdfc5239..8a8f210f0f 100644\n--- a/enterprise/web.freeform/src/org/netbeans/modules/web/freeform/WebModules.java\n+++ b/enterprise/web.freeform/src/org/netbeans/modules/web/freeform/WebModules.java\n\n@@ -192,8 +192,7 @@ public class WebModules implements WebModuleProvider, AntProjectListener, ClassP\n         SourceGroup sg [] = ProjectUtils.getSources (project).getSourceGroups (JavaProjectConstants.SOURCES_TYPE_JAVA);\n         Set<FileObject> srcRootSet = new HashSet<FileObject>();\n         for (int i = 0; i < sg.length; i++) {\n-            URL entry; \n-            entry = sg[i].getRootFolder().toURL();\n+            URL entry = sg[i].getRootFolder().toURL();\n             // There is important calling this. Withouth calling this, will not work java cc in Jsp editor correctly.\n             SourceForBinaryQuery.Result res = SourceForBinaryQuery.findSourceRoots (entry);\n             FileObject srcForBin [] = res.getRoots ();\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwMTgwNg==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r485101806", "bodyText": "Is it intentional, that the InvocationTargetException was not removed? This is in contrast to new line 238.", "author": "matthiasblaesing", "createdAt": "2020-09-08T18:02:17Z", "path": "ide/image/src/org/netbeans/modules/image/ImageDataObject.java", "diffHunk": "@@ -330,13 +315,8 @@ public ImageWidthProperty() {\n \n           /** Gets value of property. Overrides superclass method. */\n           public Integer getValue() throws InvocationTargetException {", "originalCommit": "479f986fe5586a436615ec2654b00c9c07f3033a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzAxODI4Mw==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633018283", "bodyText": "Yes, it was intentional.. This would involve a public method change. And while I would like to do it, I didn't think it would get approved with that change.\nI'm happy to do it and learn how to make changes like this, but I need a little bit of guidance how to do this.", "author": "BradWalker", "createdAt": "2021-05-15T23:36:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwMTgwNg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwMTk3NQ==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r485101975", "bodyText": "Is it intentional, that the InvocationTargetException was not removed? This is in contrast to new line 238.", "author": "matthiasblaesing", "createdAt": "2020-09-08T18:02:39Z", "path": "ide/image/src/org/netbeans/modules/image/ImageDataObject.java", "diffHunk": "@@ -353,13 +333,8 @@ public ImageHeightProperty() {\n \n           /** Gets value of property. Overrides superclass method. */\n           public Integer getValue() throws InvocationTargetException {", "originalCommit": "479f986fe5586a436615ec2654b00c9c07f3033a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzAxODc1Mw==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633018753", "bodyText": "same as above", "author": "BradWalker", "createdAt": "2021-05-15T23:43:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwMTk3NQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwMjk0MA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r485102940", "bodyText": "Is this catch still necessary? At lease I would reduce it to RuntimeException or is thee another checked exception that could be thrown?", "author": "matthiasblaesing", "createdAt": "2020-09-08T18:04:30Z", "path": "java/dbschema/src/org/netbeans/modules/dbschema/SchemaElementUtil.java", "diffHunk": "@@ -59,7 +59,7 @@ public static SchemaElement forName(String name, Object obj) {\n                 String tempURL = \"\"; //NOI18N\n                 if (schemaFO != null)\n                     try {\n-                        tempURL = schemaFO.getURL().toString();\n+                        tempURL = schemaFO.toURL().toString();\n                     } catch (Exception exc) {", "originalCommit": "479f986fe5586a436615ec2654b00c9c07f3033a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzAxODQ4MA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633018480", "bodyText": "Fixed..", "author": "BradWalker", "createdAt": "2021-05-15T23:40:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwMjk0MA=="}], "type": "inlineReview", "revised_code": {"commit": "b7b34af6f2f98cfcc46a53e9a6d5bdec1f9d0b52", "chunk": "diff --git a/java/dbschema/src/org/netbeans/modules/dbschema/SchemaElementUtil.java b/java/dbschema/src/org/netbeans/modules/dbschema/SchemaElementUtil.java\nindex bc65777d9e..f016b8ace3 100644\n--- a/java/dbschema/src/org/netbeans/modules/dbschema/SchemaElementUtil.java\n+++ b/java/dbschema/src/org/netbeans/modules/dbschema/SchemaElementUtil.java\n\n@@ -58,11 +58,7 @@ public class SchemaElementUtil {\n             synchronized (SchemaElement.schemaCache) {\n                 String tempURL = \"\"; //NOI18N\n                 if (schemaFO != null)\n-                    try {\n-                        tempURL = schemaFO.toURL().toString();\n-                    } catch (Exception exc) {\n-                        Logger.getLogger(\"global\").log(Level.INFO, null, exc);\n-                    }\n+                    tempURL = schemaFO.toURL().toString();\n                 \n                 if (schemaFO == null)\n                     se = (SchemaElement) SchemaElement.schemaCache.get(name);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwNDIxNw==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r485104217", "bodyText": "Please merge new lines 181 + 182", "author": "matthiasblaesing", "createdAt": "2020-09-08T18:06:52Z", "path": "java/i18n/src/org/netbeans/modules/i18n/wizard/Util.java", "diffHunk": "@@ -179,15 +179,9 @@ static boolean wizardEnabled(Node[] activatedNodes) {\n                 FileObject primaryFile = dobj.getPrimaryFile();\n                 \n                 boolean isLocal;\n-                try {\n-                    isLocal = !primaryFile.isVirtual()\n+                isLocal = !primaryFile.isVirtual()", "originalCommit": "479f986fe5586a436615ec2654b00c9c07f3033a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzAxODU0Mg==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633018542", "bodyText": "fixed..", "author": "BradWalker", "createdAt": "2021-05-15T23:41:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwNDIxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMzA4MzgxNA==", "url": "https://github.com/apache/netbeans/pull/2336#discussion_r633083814", "bodyText": "Seems to have lost some where (see other comments)", "author": "matthiasblaesing", "createdAt": "2021-05-16T12:09:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTEwNDIxNw=="}], "type": "inlineReview", "revised_code": null}, {"oid": "025e55fcaa113bf40688902b085f17b5f63b6086", "url": "https://github.com/apache/netbeans/commit/025e55fcaa113bf40688902b085f17b5f63b6086", "message": "[NETBEANS-4755] - remove use of deprecated API - getURL()\n\nRemove the use of a deprecated API, getURL()..\n\n   [repeat] /home/bwalker/src/netbeans/platform/openide.loaders/src/org/openide/loaders/XMLDataObject.java:528: warning: [deprecation] getURL() in FileObject has been deprecated\n   [repeat]         String loc = getPrimaryFile().getURL().toExternalForm();\n   [repeat]                                      ^\n\nIn addition, this deprecated API never throws an exception. So once the change was made, also\nhad to removed references to the unused exception.", "committedDate": "2021-05-15T23:30:16Z", "type": "forcePushed"}, {"oid": "b7b34af6f2f98cfcc46a53e9a6d5bdec1f9d0b52", "url": "https://github.com/apache/netbeans/commit/b7b34af6f2f98cfcc46a53e9a6d5bdec1f9d0b52", "message": "[NETBEANS-4755] - remove use of deprecated API - getURL()\n\nRemove the use of a deprecated API, getURL()..\n\n   [repeat] /home/bwalker/src/netbeans/platform/openide.loaders/src/org/openide/loaders/XMLDataObject.java:528: warning: [deprecation] getURL() in FileObject has been deprecated\n   [repeat]         String loc = getPrimaryFile().getURL().toExternalForm();\n   [repeat]                                      ^\n\nIn addition, this deprecated API never throws an exception. So once the change was made, also\nhad to removed references to the unused exception.", "committedDate": "2021-05-15T23:42:02Z", "type": "forcePushed"}, {"oid": "aa6413647a163ea20a8676042fb926af61b34d8a", "url": "https://github.com/apache/netbeans/commit/aa6413647a163ea20a8676042fb926af61b34d8a", "message": "[NETBEANS-4755] - remove use of deprecated API - getURL()\n\nRemove the use of a deprecated API, getURL()..\n\n   [repeat] /home/bwalker/src/netbeans/platform/openide.loaders/src/org/openide/loaders/XMLDataObject.java:528: warning: [deprecation] getURL() in FileObject has been deprecated\n   [repeat]         String loc = getPrimaryFile().getURL().toExternalForm();\n   [repeat]                                      ^\n\nIn addition, this deprecated API never throws an exception. So once the change was made, also\nhad to removed references to the unused exception.", "committedDate": "2021-05-16T16:19:36Z", "type": "forcePushed"}, {"oid": "a375ee410a503c9a50f4057c98d62192005c842a", "url": "https://github.com/apache/netbeans/commit/a375ee410a503c9a50f4057c98d62192005c842a", "message": "[NETBEANS-4755] - remove use of deprecated API - getURL()\n\nRemove the use of a deprecated API, getURL()..\n\n   [repeat] /home/bwalker/src/netbeans/platform/openide.loaders/src/org/openide/loaders/XMLDataObject.java:528: warning: [deprecation] getURL() in FileObject has been deprecated\n   [repeat]         String loc = getPrimaryFile().getURL().toExternalForm();\n   [repeat]                                      ^\n\nIn addition, this deprecated API never throws an exception. So once the change was made, also\nhad to removed references to the unused exception.", "committedDate": "2021-09-02T02:30:03Z", "type": "commit"}, {"oid": "a375ee410a503c9a50f4057c98d62192005c842a", "url": "https://github.com/apache/netbeans/commit/a375ee410a503c9a50f4057c98d62192005c842a", "message": "[NETBEANS-4755] - remove use of deprecated API - getURL()\n\nRemove the use of a deprecated API, getURL()..\n\n   [repeat] /home/bwalker/src/netbeans/platform/openide.loaders/src/org/openide/loaders/XMLDataObject.java:528: warning: [deprecation] getURL() in FileObject has been deprecated\n   [repeat]         String loc = getPrimaryFile().getURL().toExternalForm();\n   [repeat]                                      ^\n\nIn addition, this deprecated API never throws an exception. So once the change was made, also\nhad to removed references to the unused exception.", "committedDate": "2021-09-02T02:30:03Z", "type": "forcePushed"}]}