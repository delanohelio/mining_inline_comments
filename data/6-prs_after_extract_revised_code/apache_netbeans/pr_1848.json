{"pr_number": 1848, "pr_title": "[NETBEANS-3666] improve performance of multitabs on startup if many files are open", "pr_createdAt": "2020-01-05T18:51:49Z", "pr_url": "https://github.com/apache/netbeans/pull/1848", "timeline": [{"oid": "d72bd279b88870eb761ade1f0243b98e2ae173ee", "url": "https://github.com/apache/netbeans/commit/d72bd279b88870eb761ade1f0243b98e2ae173ee", "message": "[NETBEANS-3666] improve performance of multitabs on startup if many files are open", "committedDate": "2020-01-05T18:43:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMDY0Ng==", "url": "https://github.com/apache/netbeans/pull/1848#discussion_r363110646", "bodyText": "//NOI18N at the end of the line please.", "author": "lkishalmi", "createdAt": "2020-01-05T18:57:51Z", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java", "diffHunk": "@@ -141,6 +141,21 @@ int getPreferredWidth( Object value ) {\n                     icon = i;\n                 }\n             }\n+\n+            // On startup, this method is invoked very often if many files are open\n+            // (~60000 times for 200 open files).\n+            // The text (usually a filename) always starts with \"<html>\",\n+            // but does not contain other HTML tags.\n+            // The HTML rendering makes startup slow (and CPU load high).\n+            // To workaround this, remove the leading \"<html>\" if text does not\n+            // contain HTML tags or entities.\n+            String prefix = \"<html>\";", "originalCommit": "d72bd279b88870eb761ade1f0243b98e2ae173ee", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "e1dfe3fb4acce5ffa00f3efd4de0f5642be7ee0b", "chunk": "diff --git a/platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java b/platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java\nindex 62b7768b34..eae9c1f2ea 100644\n--- a/platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java\n+++ b/platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java\n\n@@ -149,7 +149,7 @@ public class TabDataRenderer implements TableCellRenderer {\n             // The HTML rendering makes startup slow (and CPU load high).\n             // To workaround this, remove the leading \"<html>\" if text does not\n             // contain HTML tags or entities.\n-            String prefix = \"<html>\";\n+            String prefix = \"<html>\"; // NOI18N\n             if (text.startsWith(prefix)\n                     && text.indexOf('<', prefix.length()) < 0\n                     && text.indexOf('&', prefix.length()) < 0) {\n"}}, {"oid": "e1dfe3fb4acce5ffa00f3efd4de0f5642be7ee0b", "url": "https://github.com/apache/netbeans/commit/e1dfe3fb4acce5ffa00f3efd4de0f5642be7ee0b", "message": "added missing NOI18N", "committedDate": "2020-01-05T20:50:41Z", "type": "commit"}]}