{"pr_number": 1858, "pr_title": "[NETBEANS-3428] Update FlatLaf from 0.23 to 0.24 and other fixes", "pr_createdAt": "2020-01-10T14:35:30Z", "pr_url": "https://github.com/apache/netbeans/pull/1858", "timeline": [{"oid": "13c576030d7d7b1cdd2f7814ed30f0cb4673e893", "url": "https://github.com/apache/netbeans/commit/13c576030d7d7b1cdd2f7814ed30f0cb4673e893", "message": "[NETBEANS-3428] Update FlatLaf from 0.23 to 0.24 and other fixes\n\nImprovements and fixes thru FlatLaf 0.24:\n- smooth scrolling (in the same way as already in NB for Windows LaF)\n- fixed missing borders in table header (e.g. in \"Watches\" view)\n- removed border from \"Change Visible Columns\" icon button in right-top corner of tables (e.g. in \"Watches\" view)\n- progress bar in \"Flat Dark\" theme is now blue\n\nOther fixes in NB code:\n- \"Flat Dark\" theme: lighter gray color for content borders/separators in main window\n- ascending/descending icons in table header replaced with FlatLaf icons\n- get rid of the focus indicator (black rectangle) in trees (HtmlLabelUI.java)\n- fixed unreadable info text in \"Find in Project\" dialog (in dark theme)\n- fixed too bright separators in \"Find in Project\" dialog (in dark theme) (BasicSearchForm.java)\n- fixed wrong selection colors in `OutlineView` (e.g. in \"Watches\" view)", "committedDate": "2020-01-10T13:43:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNzM5NQ==", "url": "https://github.com/apache/netbeans/pull/1858#discussion_r365537395", "bodyText": "Not sure which separator this is. Does removing this make sense for other LAFs as well?", "author": "eirikbakke", "createdAt": "2020-01-11T19:17:32Z", "path": "platform/api.search/src/org/netbeans/modules/search/BasicSearchForm.java", "diffHunk": "@@ -877,7 +876,6 @@ public void addSeparator() {\n             c.insets = new Insets(5, 5, 5, 5);\n             c.fill = GridBagConstraints.HORIZONTAL;\n             JSeparator separator = new JSeparator(JSeparator.HORIZONTAL);\n-            separator.setForeground(SystemColor.controlShadow);", "originalCommit": "13c576030d7d7b1cdd2f7814ed30f0cb4673e893", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU0MzIzMw==", "url": "https://github.com/apache/netbeans/pull/1858#discussion_r365543233", "bodyText": "This are the two horizontal separators in the \"Find in Projects\" dialog (see screenshots above). In Windows LAF there is no difference because default separator foreground is already controlShadow. Did not check other LAFs, but even if there is difference, this should be no problem. Its just a simple separator in a dialog. Default separator colors should work fine in dialogs.", "author": "DevCharly", "createdAt": "2020-01-11T21:31:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNzM5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1OTgyNg==", "url": "https://github.com/apache/netbeans/pull/1858#discussion_r365559826", "bodyText": "Makes sense.", "author": "eirikbakke", "createdAt": "2020-01-12T06:02:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNzM5NQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNzY0NQ==", "url": "https://github.com/apache/netbeans/pull/1858#discussion_r365537645", "bodyText": "The diff is a bit confusing here. Is this just skipping a bunch of code for the FlatLaf case?\nWhy is the code not needed for FlatLaf? Shouldn't something rather be done so that focusSelectionBackground/focusSelectionForeground ends up being the right color?\n(If I remember correctly, there might very well be some bugs in OutlineView around this code; I implemented workarounds in my NetBeans Platform application many years ago. If the changes suggested here are really workarounds for bugs, then maybe the bugs should be fixed instead.)\nMaybe add a copy of the isFlatLaf() method for consistency with HtmlLabelUI. That will make it easier to grep for duplicated logic in the future.", "author": "eirikbakke", "createdAt": "2020-01-11T19:23:35Z", "path": "platform/openide.explorer/src/org/openide/explorer/view/OutlineView.java", "diffHunk": "@@ -269,24 +269,28 @@ public void keyReleased(KeyEvent e) {\n             defaultTreeActionListener, KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, false), JComponent.WHEN_FOCUSED\n         );\n \n-        final Color focusSelectionBackground = outline.getSelectionBackground();\n-        final Color focusSelectionForeground = outline.getSelectionForeground();\n-        outline.addFocusListener(new java.awt.event.FocusListener(){\n-            @Override\n-            public void focusGained(java.awt.event.FocusEvent ev) {\n-                outline.setSelectionBackground(focusSelectionBackground);\n-                outline.setSelectionForeground(focusSelectionForeground);\n-            }\n+        // toggle selection colors depending on whether table is focused or not\n+        if (!UIManager.getLookAndFeel().getID().startsWith(\"FlatLaf\")) {", "originalCommit": "13c576030d7d7b1cdd2f7814ed30f0cb4673e893", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU0NDE5Nw==", "url": "https://github.com/apache/netbeans/pull/1858#discussion_r365544197", "bodyText": "GitHub diff is not that good. In SmartGit it looks like this:\n\n\nWhy is the code not needed for FlatLaf?\n\nBecause FlatLaf does this itself. With the NB code enabled it did not work anymore...\nBut in Windows LAF it works fine. Do not think that there is a problem in the NB code.", "author": "DevCharly", "createdAt": "2020-01-11T21:57:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNzY0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1OTg0Mw==", "url": "https://github.com/apache/netbeans/pull/1858#discussion_r365559843", "bodyText": "Because FlatLaf does this itself. With the NB code enabled it did not work anymore...\n\nThat would be a good comment to add in the code.", "author": "eirikbakke", "createdAt": "2020-01-12T06:02:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNzY0NQ=="}], "type": "inlineReview", "revised_code": null}]}