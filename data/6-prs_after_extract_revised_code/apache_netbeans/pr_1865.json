{"pr_number": 1865, "pr_title": "[NETBEANS-3428] FlatLaf: multi-tabs in FlatLaf style", "pr_createdAt": "2020-01-12T18:37:59Z", "pr_url": "https://github.com/apache/netbeans/pull/1865", "timeline": [{"oid": "d3c9d24efe5b8e48b19c91795c19e99354d8c9bd", "url": "https://github.com/apache/netbeans/commit/d3c9d24efe5b8e48b19c91795c19e99354d8c9bd", "message": "[NETBEANS-3428] FlatLaf: multi-tabs in FlatLaf style", "committedDate": "2020-01-12T17:09:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDMwMg==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r365630302", "bodyText": "Did you check to make sure this did not cause problems in other LAFs?", "author": "eirikbakke", "createdAt": "2020-01-13T02:01:38Z", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ControlsToolbar.java", "diffHunk": "@@ -58,6 +58,7 @@ public void updateUI() {\n     private void configure() {\n         setFloatable( false );\n         setFocusable( false );\n+        setOpaque( false );", "originalCommit": "d3c9d24efe5b8e48b19c91795c19e99354d8c9bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk5NjMyOQ==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r367996329", "bodyText": "Yes, tested with Window, Mac, Nimbus and Metal LaFs. ControlsToolbar is a package private class and only used in in AbstractTabDisplayer.", "author": "DevCharly", "createdAt": "2020-01-17T15:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDMwMg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDQzMg==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r365630432", "bodyText": "Is this a gradient of some sort? Better to specify start and end colors, and interpolate, than have up to 100 properties. That will look better on HiDPI displays too (since you can actually get a smooth gradient rather than N hard steps).", "author": "eirikbakke", "createdAt": "2020-01-13T02:03:31Z", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -63,15 +62,27 @@ public void stateChanged(ChangeEvent e) {\n \n     static {\n         backGroundColors = new ArrayList<Color>( 10 );\n-        backGroundColors.add( new Color( 216, 255, 237 ) );\n-        backGroundColors.add( new Color( 255, 221, 221 ) );\n-        backGroundColors.add( new Color( 255, 247, 214 ) );\n-        backGroundColors.add( new Color( 216, 239, 255 ) );\n-        backGroundColors.add( new Color( 241, 255, 209 ) );\n-        backGroundColors.add( new Color( 255, 225, 209 ) );\n-        backGroundColors.add( new Color( 228, 255, 216 ) );\n-        backGroundColors.add( new Color( 227, 255, 158 ) );\n-        backGroundColors.add( new Color( 238, 209, 255 ) );\n+\n+        // load background colors from UI defaults if available\n+        if (UIManager.getColor(\"nb.multitabs.project.1.background\") != null) {\n+            for (int i = 1; i <= 100; i++) {\n+                Color color = UIManager.getColor(\"nb.multitabs.project.\" + i + \".background\");", "originalCommit": "d3c9d24efe5b8e48b19c91795c19e99354d8c9bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDk1NQ==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r365630955", "bodyText": "And you probably don't need to do the interpolation yourself... there's Graphics2D.setPaint(new GradientPaint(...))", "author": "eirikbakke", "createdAt": "2020-01-13T02:09:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMDQ3NA==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r368000474", "bodyText": "Is this a gradient of some sort?\n\nNo, NetBeans has an option \"same background color for files from same project\" that paints tabs in different colors. Each open project gets its own color. The used colors are hardcoded into ProjectColorTabDecorator and work good with light LAFs, but not with dark LAFs. So I've added a way to get those colors from UI defaults.", "author": "DevCharly", "createdAt": "2020-01-17T15:42:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwNjY3Mg==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r368006672", "bodyText": "Ah, makes sense.", "author": "eirikbakke", "createdAt": "2020-01-17T15:53:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDQzMg=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDYxNw==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r365630617", "bodyText": "As before, when adding UIManager keys, I assume that you feel confident that they new keys are needed, and that you've figured out what the naming convention is for them...", "author": "eirikbakke", "createdAt": "2020-01-13T02:05:39Z", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java", "diffHunk": "@@ -48,6 +53,12 @@\n  */\n public class TabDataRenderer implements TableCellRenderer {\n \n+    private static final Insets tabInsets = UIManager.getInsets(\"nb.multitabs.tabInsets\"); // NOI18N\n+    private static final int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N\n+    private static final Color underlineColor = UIManager.getColor(\"nb.multitabs.underlineColor\"); // NOI18N\n+    private static final Color inactiveUnderlineColor = UIManager.getColor(\"nb.multitabs.inactiveUnderlineColor\"); // NOI18N\n+    private static final Color activeBackground = UIManager.getColor(\"nb.multitabs.activeBackground\"); // NOI18N", "originalCommit": "d3c9d24efe5b8e48b19c91795c19e99354d8c9bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk5NjQyMw==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r367996423", "bodyText": "Yes, I've searched in the multitabs modules for other keys, which mostly use \"nb.multitabs.\" as prefix. So I used the same prefix.", "author": "DevCharly", "createdAt": "2020-01-17T15:34:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDYxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwNjc5Mg==", "url": "https://github.com/apache/netbeans/pull/1865#discussion_r368006792", "bodyText": "Good.", "author": "eirikbakke", "createdAt": "2020-01-17T15:54:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYzMDYxNw=="}], "type": "inlineReview", "revised_code": null}]}