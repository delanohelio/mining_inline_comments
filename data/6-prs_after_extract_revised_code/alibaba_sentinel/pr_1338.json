{"pr_number": 1338, "pr_title": "Polish logging SPI related code and add general JUL adapter for Logger SPI", "pr_createdAt": "2020-03-14T14:11:59Z", "pr_url": "https://github.com/alibaba/Sentinel/pull/1338", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODQ4NA==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392598484", "bodyText": "The name of final variables are not consistent with CommandCenterLog class, as they are in context of RecordLog, maybe the same as RecordLog's LOGGER_NAME\u3001DEFAULT_LOG_FILENAME is better? Seems DEFAULT_LOG_FILENAME can be LOG_FILENAME.", "author": "cdfive", "createdAt": "2020-03-14T15:56:56Z", "path": "sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java", "diffHunk": "@@ -15,80 +15,74 @@\n  */\n package com.alibaba.csp.sentinel.log;\n \n-import java.util.Iterator;\n-import java.util.ServiceLoader;\n+import com.alibaba.csp.sentinel.log.jul.JavaLoggingAdapter;\n \n-/***\n- * The basic logger for vital events.\n+/**\n+ * The basic biz logger of Sentinel.\n  *\n  * @author youji.zj\n+ * @author Eric Zhao\n  */\n-public class RecordLog extends LogBase {\n-    private static com.alibaba.csp.sentinel.log.Logger log = null;\n+public class RecordLog {\n+\n+    public static final String RECORD_LOGGER_NAME = \"sentinelRecordLogger\";\n+    public static final String DEFAULT_RECORD_LOG_FILENAME = \"sentinel-record.log\";", "originalCommit": "11eebccb3f310bf5ac76574644aac9c6db95b56b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzMzg5Nw==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392633897", "bodyText": "Good idea. I've polished the code, please check.", "author": "sczyh30", "createdAt": "2020-03-15T01:49:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODQ4NA=="}], "type": "inlineReview", "revised_code": {"commit": "619117ee7ea86644ba967f12ae882b472085eaff", "chunk": "diff --git a/sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java b/sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java\nindex f83fc2e1..19ee01fe 100755\n--- a/sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java\n+++ b/sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java\n\n@@ -25,18 +25,18 @@ import com.alibaba.csp.sentinel.log.jul.JavaLoggingAdapter;\n  */\n public class RecordLog {\n \n-    public static final String RECORD_LOGGER_NAME = \"sentinelRecordLogger\";\n-    public static final String DEFAULT_RECORD_LOG_FILENAME = \"sentinel-record.log\";\n+    public static final String LOGGER_NAME = \"sentinelRecordLogger\";\n+    public static final String DEFAULT_LOG_FILENAME = \"sentinel-record.log\";\n \n     private static com.alibaba.csp.sentinel.log.Logger logger = null;\n \n     static {\n         try {\n             // Load user-defined logger implementation first.\n-            logger = LoggerSpiProvider.getLogger(RECORD_LOGGER_NAME);\n+            logger = LoggerSpiProvider.getLogger(LOGGER_NAME);\n             if (logger == null) {\n                 // If no customized loggers are provided, we use the default logger based on JUL.\n-                logger = new JavaLoggingAdapter(RECORD_LOGGER_NAME, DEFAULT_RECORD_LOG_FILENAME);\n+                logger = new JavaLoggingAdapter(LOGGER_NAME, DEFAULT_LOG_FILENAME);\n             }\n         } catch (Throwable t) {\n             System.err.println(\"Error: failed to initialize Sentinel RecordLog\");\n"}}, {"oid": "619117ee7ea86644ba967f12ae882b472085eaff", "url": "https://github.com/alibaba/Sentinel/commit/619117ee7ea86644ba967f12ae882b472085eaff", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>", "committedDate": "2020-03-15T01:47:22Z", "type": "commit"}, {"oid": "619117ee7ea86644ba967f12ae882b472085eaff", "url": "https://github.com/alibaba/Sentinel/commit/619117ee7ea86644ba967f12ae882b472085eaff", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>", "committedDate": "2020-03-15T01:47:22Z", "type": "forcePushed"}]}