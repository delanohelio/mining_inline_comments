{"pr_number": 3761, "pr_title": "Fix NPE, maxDepth default to zero instead of null when args is empty", "pr_createdAt": "2020-10-12T21:15:47Z", "pr_url": "https://github.com/knowm/XChange/pull/3761", "timeline": [{"oid": "c50f9b25a0e8a0f148202abe1339754f7472aa00", "url": "https://github.com/knowm/XChange/commit/c50f9b25a0e8a0f148202abe1339754f7472aa00", "message": "Fix NPE, maxDepth default to zero instead of null when args is empty", "committedDate": "2020-10-12T21:09:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU4ODY0Mw==", "url": "https://github.com/knowm/XChange/pull/3761#discussion_r503588643", "bodyText": "args[0] could be null. How about something like\nint maxDepth = (int) MoreObjects.firstNonNull(args.length > 0 ? args[0] : null, 0);", "author": "badgerwithagun", "createdAt": "2020-10-12T23:48:00Z", "path": "xchange-stream-gemini/src/main/java/info/bitrich/xchangestream/gemini/GeminiStreamingMarketDataService.java", "diffHunk": "@@ -57,7 +57,7 @@ private boolean filterEventsByReason(JsonNode message, String type, String reaso\n   @Override\n   public Observable<OrderBook> getOrderBook(CurrencyPair currencyPair, Object... args) {\n \n-    Integer maxDepth = args.length > 0 ? (Integer) args[0] : null;\n+    int maxDepth = args.length > 0 ? (int) args[0] : 0;", "originalCommit": "c50f9b25a0e8a0f148202abe1339754f7472aa00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI0MjIyNA==", "url": "https://github.com/knowm/XChange/pull/3761#discussion_r504242224", "bodyText": "Yes, makes sense. I will push the changes in a minute.", "author": "dazito", "createdAt": "2020-10-13T20:34:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU4ODY0Mw=="}], "type": "inlineReview", "revised_code": {"commit": "493525a155739162583a4bdb7616f9c0a29667d3", "chunk": "diff --git a/xchange-stream-gemini/src/main/java/info/bitrich/xchangestream/gemini/GeminiStreamingMarketDataService.java b/xchange-stream-gemini/src/main/java/info/bitrich/xchangestream/gemini/GeminiStreamingMarketDataService.java\nindex badd1c5b56..73e43a17f0 100644\n--- a/xchange-stream-gemini/src/main/java/info/bitrich/xchangestream/gemini/GeminiStreamingMarketDataService.java\n+++ b/xchange-stream-gemini/src/main/java/info/bitrich/xchangestream/gemini/GeminiStreamingMarketDataService.java\n\n@@ -57,7 +58,7 @@ public class GeminiStreamingMarketDataService implements StreamingMarketDataServ\n   @Override\n   public Observable<OrderBook> getOrderBook(CurrencyPair currencyPair, Object... args) {\n \n-    int maxDepth = args.length > 0 ? (int) args[0] : 0;\n+    int maxDepth = (int) MoreObjects.firstNonNull(args.length > 0 ? args[0] : null, 0);\n \n     Observable<GeminiOrderbook> subscribedOrderbookSnapshot =\n         service\n"}}, {"oid": "493525a155739162583a4bdb7616f9c0a29667d3", "url": "https://github.com/knowm/XChange/commit/493525a155739162583a4bdb7616f9c0a29667d3", "message": "Fix NPE, maxDepth default to zero instead of null when args is empty", "committedDate": "2020-10-13T20:35:37Z", "type": "commit"}]}