{"pr_number": 3640, "pr_title": "[Coinmate] add support for orderById", "pr_createdAt": "2020-08-04T16:39:19Z", "pr_url": "https://github.com/knowm/XChange/pull/3640", "timeline": [{"oid": "4746284e7f1957989ab32070b4676d3bb15dc435", "url": "https://github.com/knowm/XChange/commit/4746284e7f1957989ab32070b4676d3bb15dc435", "message": "add orderById", "committedDate": "2020-08-03T16:01:33Z", "type": "commit"}, {"oid": "77f7ae5fda5b1fc157d81a295bd9a593ea724f4e", "url": "https://github.com/knowm/XChange/commit/77f7ae5fda5b1fc157d81a295bd9a593ea724f4e", "message": "order is not returned as array", "committedDate": "2020-08-04T16:37:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjAzMjUzOA==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486032538", "bodyText": "small typo in adaptOrders", "author": "earce", "createdAt": "2020-09-10T02:55:03Z", "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java", "diffHunk": "@@ -338,4 +336,50 @@ public static String adaptSortOrder(TradeHistoryParamsSorted.Order order) {\n         throw new IllegalArgumentException();\n     }\n   }\n+\n+  public static List<Order> apdaptOrders(CoinmateOrders coinmateOrders) {", "originalCommit": "77f7ae5fda5b1fc157d81a295bd9a593ea724f4e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE1ODY4OQ==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486158689", "bodyText": "Thanks, fixed", "author": "stachon", "createdAt": "2020-09-10T08:27:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjAzMjUzOA=="}], "type": "inlineReview", "revised_code": {"commit": "01499abe20839acaa7277f740c379bc5e3de3567", "chunk": "diff --git a/xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java b/xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java\nindex 6d115ccd15..ba748c8097 100644\n--- a/xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java\n+++ b/xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java\n\n@@ -337,7 +337,7 @@ public class CoinmateAdapters {\n     }\n   }\n \n-  public static List<Order> apdaptOrders(CoinmateOrders coinmateOrders) {\n+  public static List<Order> adaptOrders(CoinmateOrders coinmateOrders) {\n     List<Order> ordersList = new ArrayList<>(1);\n \n     CoinmateOrder entry = coinmateOrders.getData();\n"}}, {"oid": "01499abe20839acaa7277f740c379bc5e3de3567", "url": "https://github.com/knowm/XChange/commit/01499abe20839acaa7277f740c379bc5e3de3567", "message": "fix typo apdaptOrders", "committedDate": "2020-09-10T08:27:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNDA3MA==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486414070", "bodyText": "should currency pair not be added into this as well?", "author": "earce", "createdAt": "2020-09-10T15:00:24Z", "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java", "diffHunk": "@@ -338,4 +336,50 @@ public static String adaptSortOrder(TradeHistoryParamsSorted.Order order) {\n         throw new IllegalArgumentException();\n     }\n   }\n+\n+  public static List<Order> adaptOrders(CoinmateOrders coinmateOrders) {\n+    List<Order> ordersList = new ArrayList<>(1);\n+\n+    CoinmateOrder entry = coinmateOrders.getData();\n+\n+    Order.OrderType orderType;\n+\n+    if (\"BUY\".equals(entry.getType())) {\n+      orderType = Order.OrderType.BID;\n+    } else if (\"SELL\".equals(entry.getType())) {\n+      orderType = Order.OrderType.ASK;\n+    } else {\n+      throw new CoinmateException(\"Unknown order type\");\n+    }\n+    Order.OrderStatus orderStatus;\n+    if (\"CANCELLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.CANCELED;\n+    } else if (\"FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.FILLED;\n+    } else if (\"PARTIALLY_FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.PARTIALLY_FILLED;\n+    } else if (\"OPEN\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.NEW;\n+    } else {\n+      orderStatus = Order.OrderStatus.UNKNOWN;\n+    }\n+\n+    // TODO: we can probably use `orderTradeType` to distinguish between Market and Limit order\n+    Order order =\n+        new MarketOrder(orderType,\n+            entry.getOriginalAmount(),\n+            null,", "originalCommit": "01499abe20839acaa7277f740c379bc5e3de3567", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMzAwOA==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r487533008", "bodyText": "Unfortunately the API does not provide currency pair here.", "author": "stachon", "createdAt": "2020-09-13T13:59:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNDA3MA=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNDIwOQ==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486414209", "bodyText": "should currency pair not be added into this as well?", "author": "earce", "createdAt": "2020-09-10T15:00:35Z", "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/dto/trade/CoinmateOrder.java", "diffHunk": "@@ -0,0 +1,83 @@\n+package org.knowm.xchange.coinmate.dto.trade;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+import java.math.BigDecimal;\n+\n+public class CoinmateOrder {\n+\n+  private final long id;\n+  private final long timestamp;\n+  private final String type;\n+  private final BigDecimal price;\n+  private final BigDecimal remainingAmount;\n+  private final BigDecimal originalAmount;\n+  private final BigDecimal stopPrice;\n+  private final String status;\n+  private final String orderTradeType;\n+  private final BigDecimal avgPrice;\n+\n+  public CoinmateOrder(", "originalCommit": "01499abe20839acaa7277f740c379bc5e3de3567", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMzAxMw==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r487533013", "bodyText": "Unfortunately the API does not provide currency pair here.", "author": "stachon", "createdAt": "2020-09-13T13:59:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNDIwOQ=="}], "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNzIwOQ==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r486417209", "bodyText": "Not necessary but a bit more elegant you can do something like\nreturn Collections.singletonList(new MarketOrder(orderType,  \n    entry.getOriginalAmount(),\n    null,  \n    Long.toString(entry.getId()),  \n    new Date(entry.getTimestamp()),  \n    entry.getAvgPrice(),  \n    entry.getOriginalAmount().subtract(entry.getRemainingAmount()),  \n    null,  \n    orderStatus,  \n    null));", "author": "earce", "createdAt": "2020-09-10T15:04:40Z", "path": "xchange-coinmate/src/main/java/org/knowm/xchange/coinmate/CoinmateAdapters.java", "diffHunk": "@@ -338,4 +336,50 @@ public static String adaptSortOrder(TradeHistoryParamsSorted.Order order) {\n         throw new IllegalArgumentException();\n     }\n   }\n+\n+  public static List<Order> adaptOrders(CoinmateOrders coinmateOrders) {\n+    List<Order> ordersList = new ArrayList<>(1);\n+\n+    CoinmateOrder entry = coinmateOrders.getData();\n+\n+    Order.OrderType orderType;\n+\n+    if (\"BUY\".equals(entry.getType())) {\n+      orderType = Order.OrderType.BID;\n+    } else if (\"SELL\".equals(entry.getType())) {\n+      orderType = Order.OrderType.ASK;\n+    } else {\n+      throw new CoinmateException(\"Unknown order type\");\n+    }\n+    Order.OrderStatus orderStatus;\n+    if (\"CANCELLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.CANCELED;\n+    } else if (\"FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.FILLED;\n+    } else if (\"PARTIALLY_FILLED\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.PARTIALLY_FILLED;\n+    } else if (\"OPEN\".equals(entry.getStatus())) {\n+      orderStatus = Order.OrderStatus.NEW;\n+    } else {\n+      orderStatus = Order.OrderStatus.UNKNOWN;\n+    }\n+\n+    // TODO: we can probably use `orderTradeType` to distinguish between Market and Limit order\n+    Order order =\n+        new MarketOrder(orderType,\n+            entry.getOriginalAmount(),\n+            null,\n+            Long.toString(entry.getId()),\n+            new Date(entry.getTimestamp()),\n+            entry.getAvgPrice(),\n+            entry.getOriginalAmount().subtract(entry.getRemainingAmount()),\n+            null,\n+            orderStatus,\n+            null);\n+\n+\n+    ordersList.add(order);\n+\n+    return ordersList;", "originalCommit": "01499abe20839acaa7277f740c379bc5e3de3567", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMzA0OA==", "url": "https://github.com/knowm/XChange/pull/3640#discussion_r487533048", "bodyText": "Thanks", "author": "stachon", "createdAt": "2020-09-13T13:59:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQxNzIwOQ=="}], "type": "inlineReview", "revised_code": null}]}