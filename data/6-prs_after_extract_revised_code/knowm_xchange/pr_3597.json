{"pr_number": 3597, "pr_title": "[core]Proposal for instrument enhancements and FuturesContract", "pr_createdAt": "2020-07-07T12:42:58Z", "pr_url": "https://github.com/knowm/XChange/pull/3597", "timeline": [{"oid": "bcd35a104101298ec7853cf032cc28d2d98209e4", "url": "https://github.com/knowm/XChange/commit/bcd35a104101298ec7853cf032cc28d2d98209e4", "message": "[core] Enhancing DTOs to use Instrument instead of CurrencyPair", "committedDate": "2020-07-07T11:34:06Z", "type": "commit"}, {"oid": "55f967d59e0421abbf24ec5bc9fe47eaabb6aa84", "url": "https://github.com/knowm/XChange/commit/55f967d59e0421abbf24ec5bc9fe47eaabb6aa84", "message": "[core] Enhancing AccountService to be usable with Futures", "committedDate": "2020-07-07T11:36:11Z", "type": "commit"}, {"oid": "0360d74ce613081cfed2b22c388c59108c95ee54", "url": "https://github.com/knowm/XChange/commit/0360d74ce613081cfed2b22c388c59108c95ee54", "message": "[core] Enhancing MarketDataService to be usable without CurrencyPair", "committedDate": "2020-07-07T11:37:59Z", "type": "commit"}, {"oid": "8972ffa1cf242102565ad3a15364c12a963e01a4", "url": "https://github.com/knowm/XChange/commit/8972ffa1cf242102565ad3a15364c12a963e01a4", "message": "[core] Enhance Exchange interface to be usable with Instruments", "committedDate": "2020-07-07T11:40:24Z", "type": "commit"}, {"oid": "9487072b32544eda8d4c99040ede5db2653ca124", "url": "https://github.com/knowm/XChange/commit/9487072b32544eda8d4c99040ede5db2653ca124", "message": "[core] Providing Param interfaces and implementations for TradeService\n\nSupplying interfaces and implementations for *InstrumentParams to match *CurrencyPairParam counterparts", "committedDate": "2020-07-07T11:43:03Z", "type": "commit"}, {"oid": "c9dc8f771ea89b98e758299381076f8fc9b6d79b", "url": "https://github.com/knowm/XChange/commit/c9dc8f771ea89b98e758299381076f8fc9b6d79b", "message": "[core] Exception for all Instruments not just CurrencyPairs", "committedDate": "2020-07-07T11:44:22Z", "type": "commit"}, {"oid": "c62ffb8ab31a24e5187a2c9cd25836cca9117314", "url": "https://github.com/knowm/XChange/commit/c62ffb8ab31a24e5187a2c9cd25836cca9117314", "message": "[core] Proposal for a FuturesContract-Instrument", "committedDate": "2020-07-07T12:19:30Z", "type": "commit"}, {"oid": "1c83725a66367ba377186ce0c0e8e0b0a56faf37", "url": "https://github.com/knowm/XChange/commit/1c83725a66367ba377186ce0c0e8e0b0a56faf37", "message": "[core] Fixed InstrumentDeserializer for broken test", "committedDate": "2020-07-08T06:02:29Z", "type": "commit"}, {"oid": "1e705b8d6d74cb1bb1c5bf34a5159c0bfbb413ca", "url": "https://github.com/knowm/XChange/commit/1e705b8d6d74cb1bb1c5bf34a5159c0bfbb413ca", "message": "[kraken] Fixed CurrencyPair usage in UserTrade", "committedDate": "2020-07-08T06:35:41Z", "type": "commit"}, {"oid": "f56dd1a8f29d9896135d5b8ae8713df8959103c7", "url": "https://github.com/knowm/XChange/commit/f56dd1a8f29d9896135d5b8ae8713df8959103c7", "message": "[ripple] Fixed CurrencyPair usage of UserTrade", "committedDate": "2020-07-08T06:35:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NjE0Mg==", "url": "https://github.com/knowm/XChange/pull/3597#discussion_r456966142", "bodyText": "I think a good default implementation would be\ndefault List<Instrument> getExchangeInstruments() {\n    return new ArrayList<Instrument>(getExchangeSymbols());\n  }\n\nas most exchanges don't have any derivatives and a CurrencyPair is a more concrete Instrument", "author": "walec51", "createdAt": "2020-07-19T22:58:57Z", "path": "xchange-core/src/main/java/org/knowm/xchange/Exchange.java", "diffHunk": "@@ -42,6 +43,16 @@\n    */\n   List<CurrencyPair> getExchangeSymbols();\n \n+  /**\n+   * Returns a list of Instrument objects. This list can either come originally from a loaded json\n+   * file or from a remote call if the implementation override's the `remoteInit` method.\n+   *\n+   * @return The exchange's instruments\n+   */\n+  default List<Instrument> getExchangeInstruments() {\n+    throw new NotYetImplementedForExchangeException();\n+  }", "originalCommit": "f56dd1a8f29d9896135d5b8ae8713df8959103c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE0ODAyNg==", "url": "https://github.com/knowm/XChange/pull/3597#discussion_r457148026", "bodyText": "Implemented in #e3c9159", "author": "Yampersand", "createdAt": "2020-07-20T07:55:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NjE0Mg=="}], "type": "inlineReview", "revised_code": {"commit": "e3c9159e12305149c9876fd38ae7c4810ca72019", "chunk": "diff --git a/xchange-core/src/main/java/org/knowm/xchange/Exchange.java b/xchange-core/src/main/java/org/knowm/xchange/Exchange.java\nindex 070b7e95f0..b1b4683a35 100644\n--- a/xchange-core/src/main/java/org/knowm/xchange/Exchange.java\n+++ b/xchange-core/src/main/java/org/knowm/xchange/Exchange.java\n\n@@ -50,7 +51,7 @@ public interface Exchange {\n    * @return The exchange's instruments\n    */\n   default List<Instrument> getExchangeInstruments() {\n-    throw new NotYetImplementedForExchangeException();\n+    return new ArrayList<>(getExchangeSymbols());\n   }\n \n   /**\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NzAyMw==", "url": "https://github.com/knowm/XChange/pull/3597#discussion_r456967023", "bodyText": "this should replace the pair / pairs fields rather then co-oexist with them\nyou can implement the CurrencyPair method using just instument / instruments", "author": "walec51", "createdAt": "2020-07-19T23:08:28Z", "path": "xchange-core/src/main/java/org/knowm/xchange/service/trade/params/TradeHistoryParamsAll.java", "diffHunk": "@@ -30,6 +34,8 @@\n   private Long offset;\n   private CurrencyPair pair;\n   private Collection<CurrencyPair> pairs = Collections.emptySet();\n+  private Instrument instrument;\n+  private Collection<Instrument> instruments = Collections.emptySet();", "originalCommit": "f56dd1a8f29d9896135d5b8ae8713df8959103c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE0ODMxMw==", "url": "https://github.com/knowm/XChange/pull/3597#discussion_r457148313", "bodyText": "Implemented in #cbfcdf7", "author": "Yampersand", "createdAt": "2020-07-20T07:55:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NzAyMw=="}], "type": "inlineReview", "revised_code": {"commit": "cbfcdf7bf92696bb68e18486fb3f5a8e179bb7c9", "chunk": "diff --git a/xchange-core/src/main/java/org/knowm/xchange/service/trade/params/TradeHistoryParamsAll.java b/xchange-core/src/main/java/org/knowm/xchange/service/trade/params/TradeHistoryParamsAll.java\nindex b13c4dd778..4cdbd0a7fa 100644\n--- a/xchange-core/src/main/java/org/knowm/xchange/service/trade/params/TradeHistoryParamsAll.java\n+++ b/xchange-core/src/main/java/org/knowm/xchange/service/trade/params/TradeHistoryParamsAll.java\n\n@@ -32,8 +34,6 @@ public class TradeHistoryParamsAll\n   private Date startTime;\n   private Date endTime;\n   private Long offset;\n-  private CurrencyPair pair;\n-  private Collection<CurrencyPair> pairs = Collections.emptySet();\n   private Instrument instrument;\n   private Collection<Instrument> instruments = Collections.emptySet();\n   private Integer limit;\n"}}, {"oid": "e3c9159e12305149c9876fd38ae7c4810ca72019", "url": "https://github.com/knowm/XChange/commit/e3c9159e12305149c9876fd38ae7c4810ca72019", "message": "[core] Improved Exchange.getExchangeInstruments()", "committedDate": "2020-07-20T07:53:51Z", "type": "commit"}, {"oid": "cbfcdf7bf92696bb68e18486fb3f5a8e179bb7c9", "url": "https://github.com/knowm/XChange/commit/cbfcdf7bf92696bb68e18486fb3f5a8e179bb7c9", "message": "[core] Improved TradeHistoryParamsAll by removing CurrencyPair members", "committedDate": "2020-07-20T07:54:28Z", "type": "commit"}]}