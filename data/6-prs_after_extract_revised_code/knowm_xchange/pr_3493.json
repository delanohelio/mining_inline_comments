{"pr_number": 3493, "pr_title": "Fixed Cryptowatch module", "pr_createdAt": "2020-04-17T15:58:05Z", "pr_url": "https://github.com/knowm/XChange/pull/3493", "timeline": [{"oid": "ff30edec89601633a2f90a9035faef56314e07a6", "url": "https://github.com/knowm/XChange/commit/ff30edec89601633a2f90a9035faef56314e07a6", "message": "Fixed Cryptowatch module\n\n- fixed Cryptowatch url\n- fixed missing start metadata\n- added adapter for CurrencyPair to String\n- added configuration to log error in results\n- added integration tests\n- fixed OHLC format", "committedDate": "2020-04-17T15:37:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMyNjIyNA==", "url": "https://github.com/knowm/XChange/pull/3493#discussion_r410326224", "bodyText": "why would you do that?", "author": "walec51", "createdAt": "2020-04-17T16:13:45Z", "path": "xchange-cryptowatch/src/main/java/org/knowm/xchange/cryptowatch/service/CryptowatchBaseService.java", "diffHunk": "@@ -12,8 +13,10 @@\n \n   public CryptowatchBaseService(Exchange exchange) {\n     super(exchange);\n+    ClientConfig clientConfig = getClientConfig();\n+    clientConfig.setIgnoreHttpErrorCodes(true);", "originalCommit": "ff30edec89601633a2f90a9035faef56314e07a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMzMTM3MQ==", "url": "https://github.com/knowm/XChange/pull/3493#discussion_r410331371", "bodyText": "I think it is a better way to get the error code  than to catch the exception in the code.\nsee CryptowatchMarketDataServiceRaw.checkResult:70\nit is equivalent to set rescu.http.ignoreErrorCodes = true in rescu.properties\n\nthe HTTP response body never be parsed as Exception but always as the method response type.\n\nBy setting it directly in the config, it is ignored by other clients running alongside this client", "author": "massigerardi", "createdAt": "2020-04-17T16:22:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMyNjIyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM0MTA3MQ==", "url": "https://github.com/knowm/XChange/pull/3493#discussion_r410341071", "bodyText": "in general I disagree - if you implement exceptions properly like described here: https://github.com/knowm/XChange/wiki/New-Implementation-Best-Practices#step-7\nthen you can access both the status code and response body\nhowever this is a topic for another PR as exception handling in this module should get rewritten", "author": "walec51", "createdAt": "2020-04-17T16:39:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMyNjIyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM0NDg5Nw==", "url": "https://github.com/knowm/XChange/pull/3493#discussion_r410344897", "bodyText": "I think the main focus of the best practice is:\n\nExchange-specific Exceptions should NOT be leaked out of the generic interface methods.\n\nhandling the exception as part of the result would satisfy the condition above and the module will throw anyway an ExchangeException as required.", "author": "massigerardi", "createdAt": "2020-04-17T16:47:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMyNjIyNA=="}], "type": "inlineReview", "revised_code": null}]}