{"pr_number": 2680, "pr_title": "[M] Added support for JAAS in the embedded ActiveMQ broker (ENT-2154)", "pr_createdAt": "2020-04-13T17:57:28Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2680", "timeline": [{"oid": "fab00f366621afc3002758de604478d03b6f75e6", "url": "https://github.com/candlepin/candlepin/commit/fab00f366621afc3002758de604478d03b6f75e6", "message": "Added support for JAAS in the embedded ActiveMQ broker\n\n- Added support for the using the ActiveMQJAASSecurityManager when\n  creating the embedded ActiveMQ broker\n- Added new configurations for modifying which entries are used\n  in a JAAS config file\n- Updated the broker.xml with details about using external\n  connections to the embedded Artemis instance", "committedDate": "2020-04-13T18:11:32Z", "type": "forcePushed"}, {"oid": "a01f7e4b5a48ff060884fc1dab565c2b1f52467f", "url": "https://github.com/candlepin/candlepin/commit/a01f7e4b5a48ff060884fc1dab565c2b1f52467f", "message": "Added support for JAAS in the embedded ActiveMQ broker\n\n- Added support for the using the ActiveMQJAASSecurityManager when\n  creating the embedded ActiveMQ broker\n- Added new configurations for modifying which entries are used\n  in a JAAS config file\n- Updated the broker.xml with details about using external\n  connections to the embedded Artemis instance", "committedDate": "2020-04-13T19:02:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcyMjgxNg==", "url": "https://github.com/candlepin/candlepin/pull/2680#discussion_r407722816", "bodyText": "Maybe the default should be \"InVmLogin\" or \"GuestLogin\" to be more precise since we're not actually using the PropertiesLogin module", "author": "jturel", "createdAt": "2020-04-13T21:09:22Z", "path": "server/src/main/java/org/candlepin/config/ConfigProperties.java", "diffHunk": "@@ -362,9 +369,19 @@ public static String jobConfig(String jobKey, String cfgName) {\n             this.put(CPM_PROVIDER, \"artemis\");\n \n             this.put(ACTIVEMQ_ENABLED, \"true\");\n+\n             this.put(ACTIVEMQ_EMBEDDED, \"true\");\n+\n+            // TODO: Delete the above configuration and only use EMBEDDED_BROKER going forward.\n+            // This is currently blocked by complexity in supporting moving configuration paths,\n+            // and should coincide with an update to the Configuration object\n+            this.put(ACTIVEMQ_EMBEDDED_BROKER, \"true\");\n+            this.put(ACTIVEMQ_JAAS_PROPERTIES_LOGIN_NAME, \"PropertiesLogin\");", "originalCommit": "a01f7e4b5a48ff060884fc1dab565c2b1f52467f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzczNzEyOA==", "url": "https://github.com/candlepin/candlepin/pull/2680#discussion_r407737128", "bodyText": "Ahh, I thought that was the convention for the first config name in the JAAS module, but I was mistaken. I've updated this to use InVMLogin as suggested.", "author": "Ceiu", "createdAt": "2020-04-13T21:39:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcyMjgxNg=="}], "type": "inlineReview", "revised_code": {"commit": "adbe55fd1f4d3aae909723225a2f2ec0ee9fec5b", "chunk": "diff --git a/server/src/main/java/org/candlepin/config/ConfigProperties.java b/server/src/main/java/org/candlepin/config/ConfigProperties.java\nindex b188ada9c..f5074cf08 100644\n--- a/server/src/main/java/org/candlepin/config/ConfigProperties.java\n+++ b/server/src/main/java/org/candlepin/config/ConfigProperties.java\n\n@@ -376,7 +376,7 @@ public class ConfigProperties {\n             // This is currently blocked by complexity in supporting moving configuration paths,\n             // and should coincide with an update to the Configuration object\n             this.put(ACTIVEMQ_EMBEDDED_BROKER, \"true\");\n-            this.put(ACTIVEMQ_JAAS_PROPERTIES_LOGIN_NAME, \"PropertiesLogin\");\n+            this.put(ACTIVEMQ_JAAS_INVM_LOGIN_NAME, \"InVMLogin\");\n             this.put(ACTIVEMQ_JAAS_CERTIFICATE_LOGIN_NAME, \"CertificateLogin\");\n \n             // By default, connect to embedded artemis (InVM)\n"}}, {"oid": "adbe55fd1f4d3aae909723225a2f2ec0ee9fec5b", "url": "https://github.com/candlepin/candlepin/commit/adbe55fd1f4d3aae909723225a2f2ec0ee9fec5b", "message": "Added support for JAAS in the embedded ActiveMQ broker\n\n- Added support for the using the ActiveMQJAASSecurityManager when\n  creating the embedded ActiveMQ broker\n- Added new configurations for modifying which entries are used\n  in a JAAS config file\n- Updated the broker.xml with details about using external\n  connections to the embedded Artemis instance", "committedDate": "2020-04-13T21:50:22Z", "type": "forcePushed"}, {"oid": "e401d351ad7512eb0d9cd659e31656b056fb6c03", "url": "https://github.com/candlepin/candlepin/commit/e401d351ad7512eb0d9cd659e31656b056fb6c03", "message": "Added support for JAAS in the embedded ActiveMQ broker\n\n- Added support for the using the ActiveMQJAASSecurityManager when\n  creating the embedded ActiveMQ broker\n- Added new configurations for modifying which entries are used\n  in a JAAS config file\n- Updated the broker.xml with details about using external\n  connections to the embedded Artemis instance", "committedDate": "2020-04-13T21:51:48Z", "type": "commit"}, {"oid": "e401d351ad7512eb0d9cd659e31656b056fb6c03", "url": "https://github.com/candlepin/candlepin/commit/e401d351ad7512eb0d9cd659e31656b056fb6c03", "message": "Added support for JAAS in the embedded ActiveMQ broker\n\n- Added support for the using the ActiveMQJAASSecurityManager when\n  creating the embedded ActiveMQ broker\n- Added new configurations for modifying which entries are used\n  in a JAAS config file\n- Updated the broker.xml with details about using external\n  connections to the embedded Artemis instance", "committedDate": "2020-04-13T21:51:48Z", "type": "forcePushed"}]}