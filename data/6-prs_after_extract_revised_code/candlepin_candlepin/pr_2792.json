{"pr_number": 2792, "pr_title": "1872357: [RFE] Filter syspurpose SLA values available to an Owner if the SLA is exempt", "pr_createdAt": "2020-08-31T15:49:36Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2792", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk3MzgwMw==", "url": "https://github.com/candlepin/candlepin/pull/2792#discussion_r480973803", "bodyText": "This will make it so that every single syspurpose attribute of this product will get ignored when the product has Product.Attributes.SUPPORT_LEVEL_EXEMPT set to true. We only want the SLA attribute to be ignored, so this if statement should be if (type == SystemPurposeAttributeType.SERVICE_LEVEL && slaExempt)", "author": "nikosmoum", "createdAt": "2020-09-01T08:44:48Z", "path": "server/src/main/java/org/candlepin/resource/OwnerResource.java", "diffHunk": "@@ -2106,6 +2106,11 @@ public SystemPurposeAttributesDTO getSyspurpose(\n \n         for (Product p : products) {\n             for (SystemPurposeAttributeType type : SystemPurposeAttributeType.values()) {\n+                boolean slaExempt = Boolean.parseBoolean(\n+                    p.getAttributeValue(Product.Attributes.SUPPORT_LEVEL_EXEMPT));\n+                if (slaExempt) {\n+                    continue;\n+                }", "originalCommit": "1b31ecbe222532767b59ba0c269cb013de81b792", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTAxODkxOA==", "url": "https://github.com/candlepin/candlepin/pull/2792#discussion_r481018918", "bodyText": "Done.", "author": "Januson", "createdAt": "2020-09-01T10:00:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk3MzgwMw=="}], "type": "inlineReview", "revised_code": {"commit": "35ea8f541021ffda4b2c8250a55fe8bc70e37fa8", "chunk": "diff --git a/server/src/main/java/org/candlepin/resource/OwnerResource.java b/server/src/main/java/org/candlepin/resource/OwnerResource.java\nindex 11340e06a..d07dfb29c 100755\n--- a/server/src/main/java/org/candlepin/resource/OwnerResource.java\n+++ b/server/src/main/java/org/candlepin/resource/OwnerResource.java\n\n@@ -2108,7 +2108,7 @@ public class OwnerResource {\n             for (SystemPurposeAttributeType type : SystemPurposeAttributeType.values()) {\n                 boolean slaExempt = Boolean.parseBoolean(\n                     p.getAttributeValue(Product.Attributes.SUPPORT_LEVEL_EXEMPT));\n-                if (slaExempt) {\n+                if (type == SystemPurposeAttributeType.SERVICE_LEVEL && slaExempt) {\n                     continue;\n                 }\n                 String purposeValue = p.getAttributeValue(type.toString());\n"}}, {"oid": "35ea8f541021ffda4b2c8250a55fe8bc70e37fa8", "url": "https://github.com/candlepin/candlepin/commit/35ea8f541021ffda4b2c8250a55fe8bc70e37fa8", "message": "1872357: [RFE] Filter syspurpose SLA values available to an Owner if the SLA is exempt", "committedDate": "2020-09-01T08:57:50Z", "type": "commit"}, {"oid": "35ea8f541021ffda4b2c8250a55fe8bc70e37fa8", "url": "https://github.com/candlepin/candlepin/commit/35ea8f541021ffda4b2c8250a55fe8bc70e37fa8", "message": "1872357: [RFE] Filter syspurpose SLA values available to an Owner if the SLA is exempt", "committedDate": "2020-09-01T08:57:50Z", "type": "forcePushed"}]}