{"pr_number": 4938, "pr_title": "LDAP changes for AD and other configurations", "pr_createdAt": "2020-08-17T21:20:24Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4938", "timeline": [{"oid": "b2214fb18befab0f24c448435d4ce5bdf47d4520", "url": "https://github.com/geonetwork/core-geonetwork/commit/b2214fb18befab0f24c448435d4ce5bdf47d4520", "message": "LDAP changes for AD and other configurations", "committedDate": "2020-08-17T21:16:51Z", "type": "commit"}, {"oid": "a1bfc1d6f021aa99342024601f548b18cbe6c6d1", "url": "https://github.com/geonetwork/core-geonetwork/commit/a1bfc1d6f021aa99342024601f548b18cbe6c6d1", "message": "don't use '' as password - oracle treats this as null", "committedDate": "2020-08-18T02:23:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA3NzYzMw==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4938#discussion_r472077633", "bodyText": "The Oracle comment is a little misleading.  Are you setting the random password because Oracle does not allow null?  If so then maybe set the password to the word 'null' and the Oracle comment would make more sense.\nAlso if the password is supposed to be null and it is being set to a random value, there is no way to know if this is a real password or a null password in case this information would be required later.  i.e. if null password then don't pass credentials.", "author": "ianwallen", "createdAt": "2020-08-18T10:29:04Z", "path": "core/src/main/java/org/fao/geonet/kernel/security/ldap/LDAPUtils.java", "diffHunk": "@@ -120,6 +120,7 @@ protected User getUser(LDAPUser user, boolean importPrivilegesFromLdap,\n             toSave = user.getUser();\n         }\n         toSave.getSecurity().setAuthType(LDAPConstants.LDAP_FLAG);\n+        toSave.getSecurity().setPassword(User.getRandomPassword()); //Oracle doesn't allow a password as '' (interpreted as null)", "originalCommit": "a1bfc1d6f021aa99342024601f548b18cbe6c6d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjExODAxNA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4938#discussion_r472118014", "bodyText": "That password should not be used as the authentication is delegated to LDAP, but agree a fixed value can make it more clear.", "author": "josegar74", "createdAt": "2020-08-18T11:49:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA3NzYzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMzMDA3MQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4938#discussion_r472330071", "bodyText": "changed to \"NULL\"", "author": "davidblasby", "createdAt": "2020-08-18T16:35:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA3NzYzMw=="}], "type": "inlineReview", "revised_code": {"commit": "4ebbc395ad46d368f4beb67aa5fea40efebe7200", "chunk": "diff --git a/core/src/main/java/org/fao/geonet/kernel/security/ldap/LDAPUtils.java b/core/src/main/java/org/fao/geonet/kernel/security/ldap/LDAPUtils.java\nindex 7269f3b695..c787838de6 100644\n--- a/core/src/main/java/org/fao/geonet/kernel/security/ldap/LDAPUtils.java\n+++ b/core/src/main/java/org/fao/geonet/kernel/security/ldap/LDAPUtils.java\n\n@@ -120,7 +120,7 @@ public class LDAPUtils {\n             toSave = user.getUser();\n         }\n         toSave.getSecurity().setAuthType(LDAPConstants.LDAP_FLAG);\n-        toSave.getSecurity().setPassword(User.getRandomPassword()); //Oracle doesn't allow a password as '' (interpreted as null)\n+        toSave.getSecurity().setPassword(\"NULL\"); //Oracle doesn't allow a password as '' (interpreted as null)\n         toSave = userRepo.save(toSave);\n         user.setUser(toSave);\n         return toSave;\n"}}, {"oid": "4ebbc395ad46d368f4beb67aa5fea40efebe7200", "url": "https://github.com/geonetwork/core-geonetwork/commit/4ebbc395ad46d368f4beb67aa5fea40efebe7200", "message": "change password to 'NULL'", "committedDate": "2020-08-18T16:34:43Z", "type": "commit"}]}