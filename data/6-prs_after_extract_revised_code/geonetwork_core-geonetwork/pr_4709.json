{"pr_number": 4709, "pr_title": "add proxy for UrlChecker and change UserAgent", "pr_createdAt": "2020-05-25T23:35:05Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4709", "timeline": [{"oid": "2e067cba8bbd98acb10cf617ca9c8a5992dfdc88", "url": "https://github.com/geonetwork/core-geonetwork/commit/2e067cba8bbd98acb10cf617ca9c8a5992dfdc88", "message": "add proxy for UrlChecker and change UserAgent", "committedDate": "2020-05-25T23:31:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIyMzgyNA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4709#discussion_r430223824", "bodyText": "Maybe we should add a global useragent in config.properties so user can customize it if needed ?", "author": "fxprunayre", "createdAt": "2020-05-26T07:56:22Z", "path": "core/src/main/java/org/fao/geonet/kernel/url/UrlChecker.java", "diffHunk": "@@ -51,11 +59,13 @@ public Void apply(@Nullable HttpClientBuilder originalConfig) {\n                     .setSocketTimeout(10000);\n             RequestConfig requestConfig = config.build();\n             originalConfig.setDefaultRequestConfig(requestConfig);\n-            originalConfig.setUserAgent(\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/73.0.3683.86 Chrome/73.0.3683.86 Safari/537.36\");\n+            originalConfig.setUserAgent(\"GeoNetwork Link Checker\");", "originalCommit": "2e067cba8bbd98acb10cf617ca9c8a5992dfdc88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYyNTYzMA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4709#discussion_r430625630", "bodyText": "I've added this.", "author": "davidblasby", "createdAt": "2020-05-26T18:37:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIyMzgyNA=="}], "type": "inlineReview", "revised_code": {"commit": "762f192f51394f808dd901949e364ce4628967ec", "chunk": "diff --git a/core/src/main/java/org/fao/geonet/kernel/url/UrlChecker.java b/core/src/main/java/org/fao/geonet/kernel/url/UrlChecker.java\nindex 07be4bd978..24eaac3d66 100644\n--- a/core/src/main/java/org/fao/geonet/kernel/url/UrlChecker.java\n+++ b/core/src/main/java/org/fao/geonet/kernel/url/UrlChecker.java\n\n@@ -59,7 +74,7 @@ public class UrlChecker {\n                     .setSocketTimeout(10000);\n             RequestConfig requestConfig = config.build();\n             originalConfig.setDefaultRequestConfig(requestConfig);\n-            originalConfig.setUserAgent(\"GeoNetwork Link Checker\");\n+            originalConfig.setUserAgent(getUserAgent());\n             return null;\n         }\n     };\n"}}, {"oid": "762f192f51394f808dd901949e364ce4628967ec", "url": "https://github.com/geonetwork/core-geonetwork/commit/762f192f51394f808dd901949e364ce4628967ec", "message": "add user agent config (via properties), fix test case, handle non-head requests", "committedDate": "2020-05-26T18:36:33Z", "type": "commit"}, {"oid": "b469dcbd8dfa9b49aa24cd6c3870683556b02a18", "url": "https://github.com/geonetwork/core-geonetwork/commit/b469dcbd8dfa9b49aa24cd6c3870683556b02a18", "message": "add null test (for test cases)", "committedDate": "2020-05-26T20:06:38Z", "type": "commit"}]}