{"pr_number": 638, "pr_title": "CLDR-12010 add plural operand.", "pr_createdAt": "2020-08-19T03:50:23Z", "pr_url": "https://github.com/unicode-org/cldr/pull/638", "timeline": [{"oid": "d532fe3f308abd3b0d7d414d271494da52b08fb2", "url": "https://github.com/unicode-org/cldr/commit/d532fe3f308abd3b0d7d414d271494da52b08fb2", "message": "CLDR-12010 add plural operand.\n\nSee #638", "committedDate": "2020-08-28T08:08:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODkyMDAzMg==", "url": "https://github.com/unicode-org/cldr/pull/638#discussion_r478920032", "bodyText": "Eclipse made some format cleanup. The only real change is marked below.", "author": "macchiati", "createdAt": "2020-08-28T08:09:17Z", "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestSupplementalInfo.java", "diffHunk": "@@ -107,7 +107,7 @@ public static void main(String[] args) {\n     }\n \n     public void TestPluralSampleOrder() {\n-        HashSet<PluralInfo> seen = new HashSet<PluralInfo>();", "originalCommit": "d532fe3f308abd3b0d7d414d271494da52b08fb2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODkyMDc1Mg==", "url": "https://github.com/unicode-org/cldr/pull/638#discussion_r478920752", "bodyText": "This is the only real change. It says that fr doesn't have any real samples for 'many'", "author": "macchiati", "createdAt": "2020-08-28T08:09:52Z", "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestSupplementalInfo.java", "diffHunk": "@@ -561,9 +562,10 @@ public void TestDigitPluralCompleteness() {\n             // % 100 = 1\n             {\"kw\", \"many\", \"00,000,0000\"},  // n != 1 and n % 100 = 1,21,41,61,81\n             {\"kw\", \"zero\", \"0\"},    // n = 0\n+            {\"fr\", \"many\", \"\"},    // e is special", "originalCommit": "d532fe3f308abd3b0d7d414d271494da52b08fb2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0MjYyMA==", "url": "https://github.com/unicode-org/cldr/pull/638#discussion_r479342620", "bodyText": "using CLDRLocale this is if(localeId.childOf(fr))\u2026\u00a0where fr is a singleton. Should revisit someday.", "author": "srl295", "createdAt": "2020-08-28T14:29:06Z", "path": "tools/java/org/unicode/cldr/util/LogicalGrouping.java", "diffHunk": "@@ -199,6 +199,13 @@ public static boolean isOptional(CLDRFile cldrFile, String path) {\n         if (pluralType.equals(\"0\") || pluralType.equals(\"1\")) return true;\n         if (!pluralType.equals(\"zero\") && !pluralType.equals(\"one\")) return false;\n \n+        if (pluralType.equals(\"many\")) { // special case for french\n+            String localeId = cldrFile.getLocaleID();\n+            if (localeId.startsWith(\"fr\")\n+                && (localeId.length() == 2 || localeId.charAt(2) == '_'))", "originalCommit": "d532fe3f308abd3b0d7d414d271494da52b08fb2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "49b0b4f8f2a59577ef44a2a894e2a27524f5124f", "chunk": "diff --git a/tools/java/org/unicode/cldr/util/LogicalGrouping.java b/tools/java/org/unicode/cldr/util/LogicalGrouping.java\nindex 701e75e79e..481a773a1a 100644\n--- a/tools/java/org/unicode/cldr/util/LogicalGrouping.java\n+++ b/tools/java/org/unicode/cldr/util/LogicalGrouping.java\n\n@@ -196,14 +196,20 @@ public class LogicalGrouping {\n         // fully by paths with count=\"(0|1)\", which are always optional themselves.\n         if (!path.contains(\"[@count=\")) return false;\n         String pluralType = parts.getAttributeValue(-1, \"count\");\n-        if (pluralType.equals(\"0\") || pluralType.equals(\"1\")) return true;\n-        if (!pluralType.equals(\"zero\") && !pluralType.equals(\"one\")) return false;\n-\n-        if (pluralType.equals(\"many\")) { // special case for french\n+        switch (pluralType) {\n+        case \"0\": case \"1\":\n+            return true;\n+        case \"zero\": case \"one\":\n+            break; // continue\n+        case \"many\": // special case for french\n             String localeId = cldrFile.getLocaleID();\n             if (localeId.startsWith(\"fr\")\n-                && (localeId.length() == 2 || localeId.charAt(2) == '_'))\n-            return true;\n+                && (localeId.length() == 2 || localeId.charAt(2) == '_')) {\n+                return true;\n+            }\n+            return false;\n+        default:\n+            return false;\n         }\n \n         parts = parts.cloneAsThawed();\n"}}, {"oid": "49b0b4f8f2a59577ef44a2a894e2a27524f5124f", "url": "https://github.com/unicode-org/cldr/commit/49b0b4f8f2a59577ef44a2a894e2a27524f5124f", "message": "CLDR-12010 fix for tests.", "committedDate": "2020-08-28T17:08:31Z", "type": "forcePushed"}, {"oid": "d51b8fd4d216196ab14b5dd9146f7632fcd01759", "url": "https://github.com/unicode-org/cldr/commit/d51b8fd4d216196ab14b5dd9146f7632fcd01759", "message": "CLDR-12010 add plural operand.\n\nSee #638", "committedDate": "2020-08-28T22:25:55Z", "type": "commit"}, {"oid": "d51b8fd4d216196ab14b5dd9146f7632fcd01759", "url": "https://github.com/unicode-org/cldr/commit/d51b8fd4d216196ab14b5dd9146f7632fcd01759", "message": "CLDR-12010 add plural operand.\n\nSee #638", "committedDate": "2020-08-28T22:25:55Z", "type": "forcePushed"}]}