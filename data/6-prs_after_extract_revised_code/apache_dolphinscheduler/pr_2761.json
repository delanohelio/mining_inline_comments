{"pr_number": 2761, "pr_title": "simply doExecute using RetryerUtils.retryCall", "pr_createdAt": "2020-05-19T13:14:29Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/2761", "timeline": [{"oid": "b1121d59d57e83c470ef74cd241da7556812f62d", "url": "https://github.com/apache/dolphinscheduler/commit/b1121d59d57e83c470ef74cd241da7556812f62d", "message": "simply doExecute using RetryerUtils.retryCall", "committedDate": "2020-05-19T13:13:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwNzcwOA==", "url": "https://github.com/apache/dolphinscheduler/pull/2761#discussion_r439707708", "bodyText": "this sleep 100, retryer sleep 1000, Does 1000 affect second-level tasks?", "author": "wen-hemin", "createdAt": "2020-06-13T04:23:57Z", "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/master/dispatch/executor/NettyExecutorManager.java", "diffHunk": "@@ -133,26 +136,13 @@ public void executeDirectly(ExecutionContext context) throws ExecuteException {\n      * @throws ExecuteException if error throws ExecuteException\n      */\n     private void doExecute(final Host host, final Command command) throws ExecuteException {\n-        /**\n-         * retry count\uff0cdefault retry 3\n-         */\n-        int retryCount = 3;\n-        boolean success = false;\n-        do {\n-            try {\n+        try {\n+            RetryerUtils.retryCall(() -> {\n                 nettyRemotingClient.send(host, command);\n-                success = true;\n-            } catch (Exception ex) {\n-                logger.error(String.format(\"send command : %s to %s error\", command, host), ex);\n-                retryCount--;\n-                try {\n-                    Thread.sleep(100);", "originalCommit": "b1121d59d57e83c470ef74cd241da7556812f62d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczMzM2NQ==", "url": "https://github.com/apache/dolphinscheduler/pull/2761#discussion_r439733365", "bodyText": "I think 100 or 1000 makes no sense, and doesn't matter. We can't say which interval is appropriate.", "author": "gabrywu", "createdAt": "2020-06-13T11:53:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwNzcwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTkxOTI2NQ==", "url": "https://github.com/apache/dolphinscheduler/pull/2761#discussion_r439919265", "bodyText": "If so, it is recommended to be consistent before and after reconstruction.\nThe original author may have his own consideration.", "author": "wen-hemin", "createdAt": "2020-06-15T03:59:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwNzcwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwNzg2MA==", "url": "https://github.com/apache/dolphinscheduler/pull/2761#discussion_r440007860", "bodyText": "@Technoboy- @qiaozhanwei  Could you give your consideration about this ? Is 1000 milli oK?", "author": "gabrywu", "createdAt": "2020-06-15T08:22:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwNzcwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ2MjI2NQ==", "url": "https://github.com/apache/dolphinscheduler/pull/2761#discussion_r453462265", "bodyText": "this sleep 100, retryer sleep 1000, Does 1000 affect second-level tasks?\n\n1000 also will be OK", "author": "dailidong", "createdAt": "2020-07-13T06:37:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwNzcwOA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "25b001f60cc818642defb1f4f621ae3a721954b9", "url": "https://github.com/apache/dolphinscheduler/commit/25b001f60cc818642defb1f4f621ae3a721954b9", "message": "Merge branch 'dev' into simplyDoExecuteWitRetryer", "committedDate": "2020-06-13T11:49:53Z", "type": "commit"}]}