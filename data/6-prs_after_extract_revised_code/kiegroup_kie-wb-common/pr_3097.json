{"pr_number": 3097, "pr_title": "DROOLS-4847: [DMN Designer] Entries are expanded when user edit structures in a row", "pr_createdAt": "2020-01-03T18:34:19Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3097", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI4NDc3MQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3097#discussion_r363284771", "bodyText": "just for consistency, can we use final int?", "author": "jomarko", "createdAt": "2020-01-06T13:04:30Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListView.java", "diffHunk": "@@ -326,6 +328,13 @@ public void insertAbove(final DataTypeListItem listItem,\n \n         final Element elementReference = getDataTypeRow(reference);\n         ElementHelper.insertBefore(listItem.getDragAndDropElement(), elementReference);\n+        setNewElementYPosition(elementReference, listItem.getDragAndDropElement());\n+    }\n+\n+    void setNewElementYPosition(final Element elementReference,\n+                                final Element newElement) {\n+        int referencePosition = getDndListComponent().getPositionY(elementReference);", "originalCommit": "398cba59e02664bbc234ed6571595fd313f5e41b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b2f44c00365de700037dfcdda40887abfb1d8507", "chunk": "diff --git a/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListView.java b/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListView.java\nindex b2881da538..75b7fbcbb0 100644\n--- a/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListView.java\n+++ b/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListView.java\n\n@@ -328,13 +329,6 @@ public class DataTypeListView implements DataTypeList.View {\n \n         final Element elementReference = getDataTypeRow(reference);\n         ElementHelper.insertBefore(listItem.getDragAndDropElement(), elementReference);\n-        setNewElementYPosition(elementReference, listItem.getDragAndDropElement());\n-    }\n-\n-    void setNewElementYPosition(final Element elementReference,\n-                                final Element newElement) {\n-        int referencePosition = getDndListComponent().getPositionY(elementReference);\n-        getDndListComponent().setPositionY(newElement, referencePosition);\n     }\n \n     private boolean isCollapsed(final Element arrow) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI4NTY2NA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3097#discussion_r363285664", "bodyText": "This is the same as below, but I am fine if you want to keep as it is.\nfor (final Element element : children) {\n            Position.setY(element, ++parentY);\n        }", "author": "jomarko", "createdAt": "2020-01-06T13:07:43Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/draganddrop/DNDListComponent.java", "diffHunk": "@@ -138,6 +139,19 @@ public void refreshDragAreaSize() {\n         view.refreshDragAreaSize();\n     }\n \n+    public void setInitialPositionY(final HTMLElement dragAndDropElement,\n+                                    final List<HTMLElement> children) {\n+        Integer parentY = Position.getY(dragAndDropElement);\n+        for (final Element element : children) {\n+            parentY++;\n+            Position.setY(element, parentY);\n+        }", "originalCommit": "398cba59e02664bbc234ed6571595fd313f5e41b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b2f44c00365de700037dfcdda40887abfb1d8507", "chunk": "diff --git a/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/draganddrop/DNDListComponent.java b/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/draganddrop/DNDListComponent.java\nindex c844abf2b2..757c177db7 100644\n--- a/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/draganddrop/DNDListComponent.java\n+++ b/kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/draganddrop/DNDListComponent.java\n\n@@ -139,19 +138,6 @@ public class DNDListComponent {\n         view.refreshDragAreaSize();\n     }\n \n-    public void setInitialPositionY(final HTMLElement dragAndDropElement,\n-                                    final List<HTMLElement> children) {\n-        Integer parentY = Position.getY(dragAndDropElement);\n-        for (final Element element : children) {\n-            parentY++;\n-            Position.setY(element, parentY);\n-        }\n-    }\n-\n-    public void setInitialHiddenPositionY(final HTMLElement itemElement) {\n-        Position.setY(itemElement, DNDListDOMHelper.HIDDEN_Y_POSITION);\n-    }\n-\n     public interface View extends UberElemental<DNDListComponent>,\n                                   IsElement {\n \n"}}, {"oid": "b2f44c00365de700037dfcdda40887abfb1d8507", "url": "https://github.com/kiegroup/kie-wb-common/commit/b2f44c00365de700037dfcdda40887abfb1d8507", "message": "DROOLS-4847: [DMN Designer] Entries are expanded when user edit structures in a row", "committedDate": "2020-01-06T18:15:22Z", "type": "commit"}, {"oid": "9960125b21ecd2626c200e485b9ef085748fe347", "url": "https://github.com/kiegroup/kie-wb-common/commit/9960125b21ecd2626c200e485b9ef085748fe347", "message": "DROOLS-4847: [DMN Designer] Entries are expanded when user edit structures in a row", "committedDate": "2020-01-06T19:21:17Z", "type": "commit"}, {"oid": "2a3d200d87ac437a822d197b4e6b150c3341e0e0", "url": "https://github.com/kiegroup/kie-wb-common/commit/2a3d200d87ac437a822d197b4e6b150c3341e0e0", "message": "review", "committedDate": "2020-01-06T19:55:52Z", "type": "commit"}, {"oid": "2a3d200d87ac437a822d197b4e6b150c3341e0e0", "url": "https://github.com/kiegroup/kie-wb-common/commit/2a3d200d87ac437a822d197b4e6b150c3341e0e0", "message": "review", "committedDate": "2020-01-06T19:55:52Z", "type": "forcePushed"}]}