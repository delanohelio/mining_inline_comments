{"pr_number": 3146, "pr_title": "DROOLS-5017: [DMN Designer] Validation issues are not shown in Alerts panel", "pr_createdAt": "2020-02-06T15:22:46Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3146", "timeline": [{"oid": "b789667fcea2b0b7845bee4fe2b07b384a15244b", "url": "https://github.com/kiegroup/kie-wb-common/commit/b789667fcea2b0b7845bee4fe2b07b384a15244b", "message": "DROOLS-5017: [DMN Designer] Validation issues are not shown in Alerts panel", "committedDate": "2020-02-12T14:14:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY4MzU1NQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3146#discussion_r378683555", "bodyText": "Javadoc of noneMatch\nReturns whether no elements of this stream match the provided predicate. May not evaluate the predicate on all elements if not necessary for determining the result. If the stream is empty then true is returned and the predicate is not evaluated.\n\nDue to above I think we can simplify as\n        final boolean valid = violationsList\n                .stream()\n                .noneMatch(v -> applyViolation(canvasHandler, v));\nWDYT?", "author": "jomarko", "createdAt": "2020-02-13T07:08:39Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-core/kie-wb-common-stunner-commons/kie-wb-common-stunner-client-common/src/main/java/org/kie/workbench/common/stunner/core/client/validation/canvas/CanvasDiagramValidator.java", "diffHunk": "@@ -76,11 +78,11 @@ private void checkViolations(final H canvasHandler,\n \n         // See {@link Stream#anyMatch(Predicate)}. \"...If the stream is empty then {@code false} is returned...\"\n         // Therefore we also need to check if there are any violations at all.\n-        final boolean valid =\n-                getElementViolationsStream(elementViolations).count() == 0 ||\n-                        getElementViolationsStream(elementViolations)\n-                                .map(v -> applyViolation(canvasHandler, v))\n-                                .anyMatch(Boolean.FALSE::equals);\n+        final Stream<ElementViolation> violationsStream = getElementViolationsStream(elementViolations);\n+        final List<ElementViolation> violationsList = violationsStream.collect(Collectors.toList());\n+        final boolean valid = violationsList.size() == 0 || violationsList\n+                .stream()\n+                .noneMatch(v -> applyViolation(canvasHandler, v));", "originalCommit": "f076cc299beb2fb8f081fd9dc604247a37f1bdca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODc1MjA3OQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3146#discussion_r378752079", "bodyText": "Good catch. Updated in new commit (and removed old comment about use of anyMatch(..)).", "author": "manstis", "createdAt": "2020-02-13T09:47:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY4MzU1NQ=="}], "type": "inlineReview", "revised_code": {"commit": "304b27f9e3610f17c750a7d697359572fa59625f", "chunk": "diff --git a/kie-wb-common-stunner/kie-wb-common-stunner-core/kie-wb-common-stunner-commons/kie-wb-common-stunner-client-common/src/main/java/org/kie/workbench/common/stunner/core/client/validation/canvas/CanvasDiagramValidator.java b/kie-wb-common-stunner/kie-wb-common-stunner-core/kie-wb-common-stunner-commons/kie-wb-common-stunner-client-common/src/main/java/org/kie/workbench/common/stunner/core/client/validation/canvas/CanvasDiagramValidator.java\nindex 11a9e91633..ad88a777b0 100644\n--- a/kie-wb-common-stunner/kie-wb-common-stunner-core/kie-wb-common-stunner-commons/kie-wb-common-stunner-client-common/src/main/java/org/kie/workbench/common/stunner/core/client/validation/canvas/CanvasDiagramValidator.java\n+++ b/kie-wb-common-stunner/kie-wb-common-stunner-core/kie-wb-common-stunner-commons/kie-wb-common-stunner-client-common/src/main/java/org/kie/workbench/common/stunner/core/client/validation/canvas/CanvasDiagramValidator.java\n\n@@ -75,12 +75,9 @@ public class CanvasDiagramValidator<H extends AbstractCanvasHandler> {\n         final Diagram diagram = canvasHandler.getDiagram();\n         final String name = diagram.getName();\n         final String title = diagram.getMetadata().getTitle();\n-\n-        // See {@link Stream#anyMatch(Predicate)}. \"...If the stream is empty then {@code false} is returned...\"\n-        // Therefore we also need to check if there are any violations at all.\n         final Stream<ElementViolation> violationsStream = getElementViolationsStream(elementViolations);\n         final List<ElementViolation> violationsList = violationsStream.collect(Collectors.toList());\n-        final boolean valid = violationsList.size() == 0 || violationsList\n+        final boolean valid = violationsList\n                 .stream()\n                 .noneMatch(v -> applyViolation(canvasHandler, v));\n \n"}}, {"oid": "304b27f9e3610f17c750a7d697359572fa59625f", "url": "https://github.com/kiegroup/kie-wb-common/commit/304b27f9e3610f17c750a7d697359572fa59625f", "message": "Updates following peer review.", "committedDate": "2020-02-13T09:46:47Z", "type": "commit"}, {"oid": "304b27f9e3610f17c750a7d697359572fa59625f", "url": "https://github.com/kiegroup/kie-wb-common/commit/304b27f9e3610f17c750a7d697359572fa59625f", "message": "Updates following peer review.", "committedDate": "2020-02-13T09:46:47Z", "type": "forcePushed"}]}