{"pr_number": 3436, "pr_title": "RHPAM-3178: Stunner - Monaco script editor scrollbars disappear", "pr_createdAt": "2020-09-24T21:54:49Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3436", "timeline": [{"oid": "7bb8f1825d1268fb765a0775cfca34de2ba5b9aa", "url": "https://github.com/kiegroup/kie-wb-common/commit/7bb8f1825d1268fb765a0775cfca34de2ba5b9aa", "message": "RHPAM-3178: Stunner - Monaco script editor scrollbars disappear", "committedDate": "2020-09-24T22:00:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxMjkzMw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3436#discussion_r494712933", "bodyText": "can this method be static, right? :)", "author": "romartin", "createdAt": "2020-09-25T02:34:06Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/components/monaco_editor/MonacoEditorView.java", "diffHunk": "@@ -109,6 +113,28 @@ public void load(String[] modules,\n         load(new MonacoEditorInitializer(), modules, options, callback);\n     }\n \n+    // Workaround for refreshing Monaco editor and get scrollbars visible when the accordion is expanded\n+    void attachListenerToPanelTitle() {\n+        final NodeList titleNodes = getParentInDepth(rootContainer, DEPTH).getElementsByClassName(PANEL_TITLE);\n+        for (int i = 0; i < titleNodes.getLength(); i++) {\n+            titleNodes.item(i)\n+                    .addEventListener(EVENT_NAME,\n+                                      event -> presenter.onLanguageChanged(languageSelector.getValue()),\n+                                      false);\n+        }\n+    }\n+\n+    Element getParentInDepth(final Element element, int depth) {", "originalCommit": "7bb8f1825d1268fb765a0775cfca34de2ba5b9aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMTQ1Ng==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3436#discussion_r494721456", "bodyText": "Hey @romartin ! It not only can, It must be static.\nIt's fixed!\nThanks", "author": "handreyrc", "createdAt": "2020-09-25T03:06:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxMjkzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk1NzY0OA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3436#discussion_r494957648", "bodyText": "Hi @handreyrc, I think all logic and especially static methods like this should be in Presenter/Controller and not on the View side it will let as do not use unstable and slow GwtMockito and can be useful in the future iterations during migration migration to the new Patternfly and design. WDYT?\nIt's just a comment no need to do anything in this PR.\nThank you!", "author": "hasys", "createdAt": "2020-09-25T12:36:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxMjkzMw=="}], "type": "inlineReview", "revised_code": {"commit": "423a5a49d09c3fd58b71819cf4c55aca4e55d714", "chunk": "diff --git a/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/components/monaco_editor/MonacoEditorView.java b/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/components/monaco_editor/MonacoEditorView.java\nindex 1002794ee6..7c7288b7be 100644\n--- a/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/components/monaco_editor/MonacoEditorView.java\n+++ b/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/components/monaco_editor/MonacoEditorView.java\n\n@@ -124,7 +124,7 @@ public class MonacoEditorView implements UberElement<MonacoEditorPresenter> {\n         }\n     }\n \n-    Element getParentInDepth(final Element element, int depth) {\n+    static Element getParentInDepth(final Element element, int depth) {\n         if (null != element && depth > 0) {\n             Element parent = element.getParentElement();\n             return null != parent ?\n"}}, {"oid": "423a5a49d09c3fd58b71819cf4c55aca4e55d714", "url": "https://github.com/kiegroup/kie-wb-common/commit/423a5a49d09c3fd58b71819cf4c55aca4e55d714", "message": "RHPAM-3178: Stunner - Monaco script editor scrollbars disappear", "committedDate": "2020-09-25T02:41:11Z", "type": "commit"}, {"oid": "423a5a49d09c3fd58b71819cf4c55aca4e55d714", "url": "https://github.com/kiegroup/kie-wb-common/commit/423a5a49d09c3fd58b71819cf4c55aca4e55d714", "message": "RHPAM-3178: Stunner - Monaco script editor scrollbars disappear", "committedDate": "2020-09-25T02:41:11Z", "type": "forcePushed"}]}