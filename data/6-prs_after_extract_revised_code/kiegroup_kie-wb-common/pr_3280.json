{"pr_number": 3280, "pr_title": "JBPM-9110 business rule tasks cannot be configured properly", "pr_createdAt": "2020-04-22T18:20:14Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3280", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUwNDU0NQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3280#discussion_r414504545", "bodyText": "Hey @hasys\nInstead of adding a setter method for testing purposes, what do you think about moving the IOService as an static final field, so it'll become inmutable. This way you'll have to create a constructor, annotate the ioService field witht the @Inject @Named annotations, and then you'l lbe able to use a different (or mocked) IOService instance for the test cases as well, no need to set the instance.\nIMO this would look better as the field will be inmutable, no setter for it sa well, and you'll just be using the constructor on the test case to provide whatever mocks you need to.\nWDYT?", "author": "romartin", "createdAt": "2020-04-24T11:31:42Z", "path": "kie-wb-common-services/kie-wb-common-refactoring/kie-wb-common-refactoring-backend/src/main/java/org/kie/workbench/common/services/refactoring/backend/server/query/standard/FindRuleFlowNamesQuery.java", "diffHunk": "@@ -58,6 +60,16 @@\n     private RuleFlowNamesResponseBuilder responseBuilder = new RuleFlowNamesResponseBuilder();\n \n     public static final String NAME = FindRuleFlowNamesQuery.class.getSimpleName();\n+    public static final String SHARED_TERM = SharedPartIndexTerm.TERM + \":\" + PartType.RULEFLOW_GROUP.toString();\n+\n+    // For the testing purposes\n+    void setIoService(IOService service) {", "originalCommit": "117e97409a11b56b4d35b0548af03e0ac659a72d", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c31c5a184b2c28a4d0ec783b8218bb776579924b", "chunk": "diff --git a/kie-wb-common-services/kie-wb-common-refactoring/kie-wb-common-refactoring-backend/src/main/java/org/kie/workbench/common/services/refactoring/backend/server/query/standard/FindRuleFlowNamesQuery.java b/kie-wb-common-services/kie-wb-common-refactoring/kie-wb-common-refactoring-backend/src/main/java/org/kie/workbench/common/services/refactoring/backend/server/query/standard/FindRuleFlowNamesQuery.java\nindex 3e7ec84622..b3086695d1 100644\n--- a/kie-wb-common-services/kie-wb-common-refactoring/kie-wb-common-refactoring-backend/src/main/java/org/kie/workbench/common/services/refactoring/backend/server/query/standard/FindRuleFlowNamesQuery.java\n+++ b/kie-wb-common-services/kie-wb-common-refactoring/kie-wb-common-refactoring-backend/src/main/java/org/kie/workbench/common/services/refactoring/backend/server/query/standard/FindRuleFlowNamesQuery.java\n\n@@ -53,20 +53,18 @@ public class FindRuleFlowNamesQuery extends AbstractFindQuery implements NamedQu\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(FindRuleFlowNamesQuery.class);\n \n+    private final IOService ioService;\n+\n     @Inject\n-    @Named(\"ioStrategy\")\n-    private IOService ioService;\n+    public FindRuleFlowNamesQuery(@Named(\"ioStrategy\") IOService ioService) {\n+        this.ioService = ioService;\n+    }\n \n     private RuleFlowNamesResponseBuilder responseBuilder = new RuleFlowNamesResponseBuilder();\n \n     public static final String NAME = FindRuleFlowNamesQuery.class.getSimpleName();\n     public static final String SHARED_TERM = SharedPartIndexTerm.TERM + \":\" + PartType.RULEFLOW_GROUP.toString();\n \n-    // For the testing purposes\n-    void setIoService(IOService service) {\n-        ioService = service;\n-    }\n-\n     public static boolean isSharedRuleFlowGroup(String parameter) {\n         return SHARED_TERM.equals(parameter);\n     }\n"}}, {"oid": "c31c5a184b2c28a4d0ec783b8218bb776579924b", "url": "https://github.com/kiegroup/kie-wb-common/commit/c31c5a184b2c28a4d0ec783b8218bb776579924b", "message": "code review", "committedDate": "2020-04-24T14:29:16Z", "type": "forcePushed"}, {"oid": "523a8c624817b0271d3f71323fdd7cbf51fcfe50", "url": "https://github.com/kiegroup/kie-wb-common/commit/523a8c624817b0271d3f71323fdd7cbf51fcfe50", "message": "code review", "committedDate": "2020-05-11T11:15:30Z", "type": "forcePushed"}, {"oid": "e15458124f4e22d4143b23d1408d7a10f44da94c", "url": "https://github.com/kiegroup/kie-wb-common/commit/e15458124f4e22d4143b23d1408d7a10f44da94c", "message": "code review", "committedDate": "2020-05-26T08:59:05Z", "type": "forcePushed"}, {"oid": "ab1ee5ab9a692e1122cebf84903a97fd2ec86966", "url": "https://github.com/kiegroup/kie-wb-common/commit/ab1ee5ab9a692e1122cebf84903a97fd2ec86966", "message": "Tests draft", "committedDate": "2020-05-29T11:59:58Z", "type": "commit"}, {"oid": "d9fd8ce271c516178d933717d9ac3f2d085dcfac", "url": "https://github.com/kiegroup/kie-wb-common/commit/d9fd8ce271c516178d933717d9ac3f2d085dcfac", "message": "Test coverage with reproducer", "committedDate": "2020-05-29T11:59:58Z", "type": "commit"}, {"oid": "f94d7d7100fa393b9e345ce8bf0c4390f75ee9df", "url": "https://github.com/kiegroup/kie-wb-common/commit/f94d7d7100fa393b9e345ce8bf0c4390f75ee9df", "message": "The fix", "committedDate": "2020-05-29T11:59:58Z", "type": "commit"}, {"oid": "8872f572bb66929117bb436805b358f353ad3122", "url": "https://github.com/kiegroup/kie-wb-common/commit/8872f572bb66929117bb436805b358f353ad3122", "message": "refactoring", "committedDate": "2020-05-29T11:59:58Z", "type": "commit"}, {"oid": "801f7eed6541bf7be98766f16e67bd58d15e6d2b", "url": "https://github.com/kiegroup/kie-wb-common/commit/801f7eed6541bf7be98766f16e67bd58d15e6d2b", "message": "code review", "committedDate": "2020-05-29T11:59:58Z", "type": "commit"}, {"oid": "801f7eed6541bf7be98766f16e67bd58d15e6d2b", "url": "https://github.com/kiegroup/kie-wb-common/commit/801f7eed6541bf7be98766f16e67bd58d15e6d2b", "message": "code review", "committedDate": "2020-05-29T11:59:58Z", "type": "forcePushed"}, {"oid": "a96faf59802a8e5d659252f8f62a9119c030c933", "url": "https://github.com/kiegroup/kie-wb-common/commit/a96faf59802a8e5d659252f8f62a9119c030c933", "message": "Add missing license", "committedDate": "2020-06-05T15:48:44Z", "type": "commit"}, {"oid": "b6474260fc6347377effe8a094cdddaa83f44b65", "url": "https://github.com/kiegroup/kie-wb-common/commit/b6474260fc6347377effe8a094cdddaa83f44b65", "message": "fix header issue", "committedDate": "2020-06-05T15:58:52Z", "type": "commit"}]}