{"pr_number": 3124, "pr_title": "RHDM-1145: [DMN Designer] Java Date field is not converted to DMN date type", "pr_createdAt": "2020-01-24T14:59:12Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3124", "timeline": [{"oid": "e79d349903d672e5679b0f1f8e5ad912bcf325e2", "url": "https://github.com/kiegroup/kie-wb-common/commit/e79d349903d672e5679b0f1f8e5ad912bcf325e2", "message": "RHDM-1145: [DMN Designer] Java Date field is not converted to DMN date type\nDROOLS-4977: [DMN Designer] Refactor DataObjectsServiceImpl to not duplicate logic from ParseHelper", "committedDate": "2020-01-24T15:00:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5MjQ0Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3124#discussion_r371692447", "bodyText": "Looks like you'll need to change this to use JavaBackedType.determineTypeFromClass(..). See here.", "author": "manstis", "createdAt": "2020-01-28T09:35:29Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-backend/src/main/java/org/kie/workbench/common/dmn/backend/editors/types/DataObjectsServiceImpl.java", "diffHunk": "@@ -152,24 +148,32 @@ private String convertDataType(final String typeName,\n     }\n \n     private BuiltInType determineBuiltInTypeFromClass(final Class<?> clazz) {\n-        if (Objects.isNull(clazz)) {\n-            return BuiltInType.UNDEFINED;\n-        } else if (Number.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.NUMBER;\n-        } else if (String.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.STRING;\n-        } else if (Character.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.STRING;\n-        } else if (LocalDate.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.DATE;\n-        } else if (LocalTime.class.isAssignableFrom(clazz) || OffsetTime.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.TIME;\n-        } else if (ZonedDateTime.class.isAssignableFrom(clazz) || OffsetDateTime.class.isAssignableFrom(clazz) || LocalDateTime.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.DATE_TIME;\n-        } else if (Boolean.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.BOOLEAN;\n-        } else if (Map.class.isAssignableFrom(clazz)) {\n-            return BuiltInType.CONTEXT;\n+        final Type type = ParserHelper.determineTypeFromClass(clazz);", "originalCommit": "e79d349903d672e5679b0f1f8e5ad912bcf325e2", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "8e3d618be6558d4ae84d77fdaa33637107c3fa55", "chunk": "diff --git a/kie-wb-common-dmn/kie-wb-common-dmn-backend/src/main/java/org/kie/workbench/common/dmn/backend/editors/types/DataObjectsServiceImpl.java b/kie-wb-common-dmn/kie-wb-common-dmn-backend/src/main/java/org/kie/workbench/common/dmn/backend/editors/types/DataObjectsServiceImpl.java\nindex 6e8ff2aba0..09e9bb0d64 100644\n--- a/kie-wb-common-dmn/kie-wb-common-dmn-backend/src/main/java/org/kie/workbench/common/dmn/backend/editors/types/DataObjectsServiceImpl.java\n+++ b/kie-wb-common-dmn/kie-wb-common-dmn-backend/src/main/java/org/kie/workbench/common/dmn/backend/editors/types/DataObjectsServiceImpl.java\n\n@@ -148,7 +148,7 @@ public class DataObjectsServiceImpl implements DataObjectsService {\n     }\n \n     private BuiltInType determineBuiltInTypeFromClass(final Class<?> clazz) {\n-        final Type type = ParserHelper.determineTypeFromClass(clazz);\n+        final Type type = JavaBackedType.determineTypeFromClass(clazz);\n         if (type instanceof org.kie.dmn.feel.lang.types.BuiltInType) {\n             org.kie.dmn.feel.lang.types.BuiltInType builtIn = (org.kie.dmn.feel.lang.types.BuiltInType) type;\n             switch (builtIn) {\n"}}, {"oid": "2ade6f371ea0aca068669cd3ba2466745e0875ff", "url": "https://github.com/kiegroup/kie-wb-common/commit/2ade6f371ea0aca068669cd3ba2466745e0875ff", "message": "RHDM-1145: [DMN Designer] Java Date field is not converted to DMN date type\nDROOLS-4977: [DMN Designer] Refactor DataObjectsServiceImpl to not duplicate logic from ParseHelper", "committedDate": "2020-01-30T20:08:15Z", "type": "commit"}, {"oid": "8e3d618be6558d4ae84d77fdaa33637107c3fa55", "url": "https://github.com/kiegroup/kie-wb-common/commit/8e3d618be6558d4ae84d77fdaa33637107c3fa55", "message": "JavaBackedType", "committedDate": "2020-01-30T20:31:26Z", "type": "commit"}, {"oid": "8e3d618be6558d4ae84d77fdaa33637107c3fa55", "url": "https://github.com/kiegroup/kie-wb-common/commit/8e3d618be6558d4ae84d77fdaa33637107c3fa55", "message": "JavaBackedType", "committedDate": "2020-01-30T20:31:26Z", "type": "forcePushed"}]}