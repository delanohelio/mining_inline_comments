{"pr_number": 3345, "pr_title": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "pr_createdAt": "2020-06-25T22:51:18Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3345", "timeline": [{"oid": "11d840a5adb0d8407dc5b428321b2977580cf7e3", "url": "https://github.com/kiegroup/kie-wb-common/commit/11d840a5adb0d8407dc5b428321b2977580cf7e3", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-26T13:57:08Z", "type": "forcePushed"}, {"oid": "0c2d45346030b39e7ff6c22484d1a1bf97e473cc", "url": "https://github.com/kiegroup/kie-wb-common/commit/0c2d45346030b39e7ff6c22484d1a1bf97e473cc", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-27T17:06:22Z", "type": "forcePushed"}, {"oid": "b5d1186984e0876086f1cb7a7ce828dba3448799", "url": "https://github.com/kiegroup/kie-wb-common/commit/b5d1186984e0876086f1cb7a7ce828dba3448799", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-28T00:38:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk2NDQzNQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3345#discussion_r446964435", "bodyText": "I think this is the only one resource (MILESTONE_ICON) which really needs to be provided out-of-the-box, as we're just presetting the milestone node, so maybe other image resrouces can be removed?", "author": "romartin", "createdAt": "2020-06-29T13:19:19Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java", "diffHunk": "@@ -47,6 +48,12 @@\n public class WorkItemDefinitionStandaloneClientService implements WorkItemDefinitionClientService {\n \n     private static final String RESOURCE_ALL_WID_PATTERN = \"*.wid\";\n+    private static final String BUSINESS_RULE_ICON = \"defaultbusinessrulesicon.png\";\n+    private static final String DECISION_ICON = \"defaultdecisionicon.png\";\n+    private static final String EMAIL_ICON = \"defaultemailicon.gif\";\n+    private static final String LOG_ICON = \"defaultlogicon.gif\";\n+    private static final String MILESTONE_ICON = \"defaultmilestoneicon.png\";", "originalCommit": "b5d1186984e0876086f1cb7a7ce828dba3448799", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEzMjIxNQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3345#discussion_r447132215", "bodyText": "Hey @romartin, I agree. It has been removed.\nThanks", "author": "handreyrc", "createdAt": "2020-06-29T17:23:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk2NDQzNQ=="}], "type": "inlineReview", "revised_code": {"commit": "2e0f0e7c6377394a85c4446b619abfad5675172b", "chunk": "diff --git a/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java b/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java\nindex 3c614f815d..eb3d36c5b2 100644\n--- a/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java\n+++ b/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java\n\n@@ -48,12 +48,7 @@ import static org.kie.workbench.common.stunner.core.util.StringUtils.nonEmpty;\n public class WorkItemDefinitionStandaloneClientService implements WorkItemDefinitionClientService {\n \n     private static final String RESOURCE_ALL_WID_PATTERN = \"*.wid\";\n-    private static final String BUSINESS_RULE_ICON = \"defaultbusinessrulesicon.png\";\n-    private static final String DECISION_ICON = \"defaultdecisionicon.png\";\n-    private static final String EMAIL_ICON = \"defaultemailicon.gif\";\n-    private static final String LOG_ICON = \"defaultlogicon.gif\";\n     private static final String MILESTONE_ICON = \"defaultmilestoneicon.png\";\n-    private static final String SERVICE_NODE_ICON = \"defaultservicenodeicon.png\";\n \n     private final Promises promises;\n     private final WorkItemDefinitionCacheRegistry registry;\n"}}, {"oid": "2e0f0e7c6377394a85c4446b619abfad5675172b", "url": "https://github.com/kiegroup/kie-wb-common/commit/2e0f0e7c6377394a85c4446b619abfad5675172b", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-29T15:57:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE3MTM3Ng==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3345#discussion_r447171376", "bodyText": "Hey @handreyrc\nIt looks the preset workitems are being loaded in thtat else clause, which means that only are being loaded if no workitems at all are being declared by the users, is that correct?\nI'm poining this out because the milestone should be loaded in case it's not being user defined, so even if the user declares some workitems, but not the milestone one, it has to be anyway included.\nDoes it makes sanse?", "author": "romartin", "createdAt": "2020-06-29T18:32:31Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java", "diffHunk": "@@ -112,7 +114,14 @@ public void destroy() {\n                                         return null;\n                                     });\n                         } else {\n-                            success.onInvoke(emptyList());\n+                            presetWorkItemsLoader(loaded).then(wids -> {", "originalCommit": "2e0f0e7c6377394a85c4446b619abfad5675172b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM2MzU4Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3345#discussion_r447363587", "bodyText": "@romartin, I agree it is better this way. I've already changed the code.\nThanks", "author": "handreyrc", "createdAt": "2020-06-30T02:02:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE3MTM3Ng=="}], "type": "inlineReview", "revised_code": {"commit": "2e3fc954b9a29462d941b52e46f8248bce1b4e46", "chunk": "diff --git a/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java b/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java\nindex eb3d36c5b2..9d01e810b3 100644\n--- a/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java\n+++ b/kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-kogito-runtime/src/main/java/org/kie/workbench/common/stunner/kogito/client/services/WorkItemDefinitionStandaloneClientService.java\n\n@@ -114,7 +115,7 @@ public class WorkItemDefinitionStandaloneClientService implements WorkItemDefini\n                                         return null;\n                                     });\n                         } else {\n-                            presetWorkItemsLoader(loaded).then(wids -> {\n+                            promises.all(presetWorkItemsLoader(loaded)).then(wids -> {\n                                 wids.forEach(registry::register);\n                                 success.onInvoke(wids);\n                                 return null;\n"}}, {"oid": "2e3fc954b9a29462d941b52e46f8248bce1b4e46", "url": "https://github.com/kiegroup/kie-wb-common/commit/2e3fc954b9a29462d941b52e46f8248bce1b4e46", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-30T01:56:05Z", "type": "forcePushed"}, {"oid": "d8993aadb8958139d55e3592ada41c56dd7441b9", "url": "https://github.com/kiegroup/kie-wb-common/commit/d8993aadb8958139d55e3592ada41c56dd7441b9", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-30T14:43:42Z", "type": "commit"}, {"oid": "d8993aadb8958139d55e3592ada41c56dd7441b9", "url": "https://github.com/kiegroup/kie-wb-common/commit/d8993aadb8958139d55e3592ada41c56dd7441b9", "message": "KOGITO-2367: BPMN Editor - Support for Milestone (Case Management enablement #1)", "committedDate": "2020-06-30T14:43:42Z", "type": "forcePushed"}]}