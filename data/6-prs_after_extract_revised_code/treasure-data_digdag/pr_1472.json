{"pr_number": 1472, "pr_title": "Introduce debug logs to leave the request and response contents of ECS task submission", "pr_createdAt": "2020-10-29T03:03:04Z", "pr_url": "https://github.com/treasure-data/digdag/pull/1472", "timeline": [{"oid": "4d130e956a38f60eb7c2dfaf7a1c34f085639a2d", "url": "https://github.com/treasure-data/digdag/commit/4d130e956a38f60eb7c2dfaf7a1c34f085639a2d", "message": "Introduce debug logs\nto leave the request and response contents of ECS task submission", "committedDate": "2020-10-29T04:57:48Z", "type": "forcePushed"}, {"oid": "27c3ea32c24ac16a67146795bae4e1228f92ce85", "url": "https://github.com/treasure-data/digdag/commit/27c3ea32c24ac16a67146795bae4e1228f92ce85", "message": "Introduce debug logs\nto leave the request and response contents of ECS task submission", "committedDate": "2020-10-29T05:23:59Z", "type": "commit"}, {"oid": "27c3ea32c24ac16a67146795bae4e1228f92ce85", "url": "https://github.com/treasure-data/digdag/commit/27c3ea32c24ac16a67146795bae4e1228f92ce85", "message": "Introduce debug logs\nto leave the request and response contents of ECS task submission", "committedDate": "2020-10-29T05:23:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzk5OTkxMw==", "url": "https://github.com/treasure-data/digdag/pull/1472#discussion_r513999913", "bodyText": "why not static method?", "author": "myui", "createdAt": "2020-10-29T05:58:48Z", "path": "digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java", "diffHunk": "@@ -797,4 +799,50 @@ protected void setCapacityProviderStrategy(final EcsClientConfig clientConfig, f\n             request.setCapacityProviderStrategy(Arrays.asList(capacityProviderStrategyItem));\n         }\n     }\n+\n+    private String dumpTaskRequest(final RunTaskRequest request)", "originalCommit": "27c3ea32c24ac16a67146795bae4e1228f92ce85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzMjM1Ng==", "url": "https://github.com/treasure-data/digdag/pull/1472#discussion_r514032356", "bodyText": "Not particular reasons. I will convert this method to static.", "author": "serihiro", "createdAt": "2020-10-29T06:51:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzk5OTkxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzNDE1NA==", "url": "https://github.com/treasure-data/digdag/pull/1472#discussion_r514034154", "bodyText": "75ccbff", "author": "serihiro", "createdAt": "2020-10-29T06:54:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzk5OTkxMw=="}], "type": "inlineReview", "revised_code": {"commit": "75ccbff14b7b3742b11ea3f9c967be06adc92a50", "chunk": "diff --git a/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java b/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java\nindex 270d1f2fed..c2f9eb55e8 100644\n--- a/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java\n+++ b/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java\n\n@@ -800,7 +800,7 @@ public class EcsCommandExecutor\n         }\n     }\n \n-    private String dumpTaskRequest(final RunTaskRequest request)\n+    private static String dumpTaskRequest(final RunTaskRequest request)\n     {\n         final StringBuilder sb = new StringBuilder();\n         sb.append(\"{\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAwMDIwOA==", "url": "https://github.com/treasure-data/digdag/pull/1472#discussion_r514000208", "bodyText": "ditto. static method.", "author": "myui", "createdAt": "2020-10-29T05:59:20Z", "path": "digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java", "diffHunk": "@@ -797,4 +799,50 @@ protected void setCapacityProviderStrategy(final EcsClientConfig clientConfig, f\n             request.setCapacityProviderStrategy(Arrays.asList(capacityProviderStrategyItem));\n         }\n     }\n+\n+    private String dumpTaskRequest(final RunTaskRequest request)\n+    {\n+        final StringBuilder sb = new StringBuilder();\n+        sb.append(\"{\");\n+        if (request.getCluster() != null) { sb.append(\"Cluster: \").append(request.getCluster()).append(\",\"); }\n+        if (request.getTaskDefinition() != null) { sb.append(\"TaskDefinition: \").append(request.getTaskDefinition()).append(\",\"); }\n+        if (request.getLaunchType() != null) { sb.append(\"LaunchType: \").append(request.getLaunchType()).append(\",\"); }\n+        if (request.getCapacityProviderStrategy() != null) { sb.append(\"CapacityProviderStrategy: \").append(request.getCapacityProviderStrategy()).append(\",\"); }\n+        if (request.getPlacementConstraints() != null) { sb.append(\"PlacementConstraints: \").append(request.getPlacementConstraints()).append(\",\"); }\n+        if (request.getPlacementStrategy() != null) { sb.append(\"PlacementStrategy: \").append(request.getPlacementStrategy()).append(\",\"); }\n+        if (request.getPlatformVersion() != null) { sb.append(\"PlatformVersion: \").append(request.getPlatformVersion()).append(\",\"); }\n+        TaskOverride overrides = request.getOverrides();\n+        if (overrides != null) {\n+            if (overrides.getCpu() != null) {\n+                sb.append(\"CPU: \").append(overrides.getCpu()).append(\",\");\n+            }\n+\n+            if (overrides.getCpu() != null) {\n+                sb.append(\"Memory: \").append(overrides.getMemory());\n+            }\n+        }\n+        sb.append(\"}\");\n+        return sb.toString();\n+    }\n+\n+    private String dumpTaskResult(final RunTaskResult result)", "originalCommit": "27c3ea32c24ac16a67146795bae4e1228f92ce85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzNDE3Mw==", "url": "https://github.com/treasure-data/digdag/pull/1472#discussion_r514034173", "bodyText": "75ccbff", "author": "serihiro", "createdAt": "2020-10-29T06:54:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAwMDIwOA=="}], "type": "inlineReview", "revised_code": {"commit": "75ccbff14b7b3742b11ea3f9c967be06adc92a50", "chunk": "diff --git a/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java b/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java\nindex 270d1f2fed..c2f9eb55e8 100644\n--- a/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java\n+++ b/digdag-standards/src/main/java/io/digdag/standards/command/EcsCommandExecutor.java\n\n@@ -800,7 +800,7 @@ public class EcsCommandExecutor\n         }\n     }\n \n-    private String dumpTaskRequest(final RunTaskRequest request)\n+    private static String dumpTaskRequest(final RunTaskRequest request)\n     {\n         final StringBuilder sb = new StringBuilder();\n         sb.append(\"{\");\n"}}, {"oid": "75ccbff14b7b3742b11ea3f9c967be06adc92a50", "url": "https://github.com/treasure-data/digdag/commit/75ccbff14b7b3742b11ea3f9c967be06adc92a50", "message": "Make stateless methods to static", "committedDate": "2020-10-29T06:53:52Z", "type": "commit"}]}