{"pr_number": 1981, "pr_title": "Support postgresql12", "pr_createdAt": "2020-03-05T10:23:16Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/1981", "timeline": [{"oid": "aa069f47a673a94ad524c94ad4ae4d44ffa346ad", "url": "https://github.com/uyuni-project/uyuni/commit/aa069f47a673a94ad524c94ad4ae4d44ffa346ad", "message": "copy new strings and reformat", "committedDate": "2020-03-05T15:35:18Z", "type": "forcePushed"}, {"oid": "4e047518e2fdbddc8d2dd1305c635897e4d463a3", "url": "https://github.com/uyuni-project/uyuni/commit/4e047518e2fdbddc8d2dd1305c635897e4d463a3", "message": "remove rhel5 dependencies", "committedDate": "2020-03-05T17:17:31Z", "type": "forcePushed"}, {"oid": "260c26976aa706a639df2ea419d57524fd16007a", "url": "https://github.com/uyuni-project/uyuni/commit/260c26976aa706a639df2ea419d57524fd16007a", "message": "change spacewalk-release to uyuni-release", "committedDate": "2020-03-07T09:45:20Z", "type": "forcePushed"}, {"oid": "61bf86350a16e2ea2b4e944b03adf79978a6b889", "url": "https://github.com/uyuni-project/uyuni/commit/61bf86350a16e2ea2b4e944b03adf79978a6b889", "message": "change spacewalk-release to uyuni-release", "committedDate": "2020-03-10T14:02:19Z", "type": "forcePushed"}, {"oid": "a8e2c47f0338918346bafea97f6e0da38d3204aa", "url": "https://github.com/uyuni-project/uyuni/commit/a8e2c47f0338918346bafea97f6e0da38d3204aa", "message": "check database on startup", "committedDate": "2020-03-10T15:52:48Z", "type": "forcePushed"}, {"oid": "080187f098027e1bc520923a5572e640a1bca521", "url": "https://github.com/uyuni-project/uyuni/commit/080187f098027e1bc520923a5572e640a1bca521", "message": "check database on startup", "committedDate": "2020-03-11T08:42:12Z", "type": "forcePushed"}, {"oid": "0c46d98f74040755487be48940e088ad79241154", "url": "https://github.com/uyuni-project/uyuni/commit/0c46d98f74040755487be48940e088ad79241154", "message": "check database on startup", "committedDate": "2020-03-11T09:08:25Z", "type": "forcePushed"}, {"oid": "074eecff42d44e4deb08ad976b724a4864aff8a8", "url": "https://github.com/uyuni-project/uyuni/commit/074eecff42d44e4deb08ad976b724a4864aff8a8", "message": "add check db to spacewalk target", "committedDate": "2020-03-15T09:50:17Z", "type": "forcePushed"}, {"oid": "adc6af836b59be2020205b08029b4767b4cf0474", "url": "https://github.com/uyuni-project/uyuni/commit/adc6af836b59be2020205b08029b4767b4cf0474", "message": "write uyuni-release and optional susemanager-release file", "committedDate": "2020-03-15T10:26:27Z", "type": "forcePushed"}, {"oid": "543c76a9d5d0c70b924e2dc273f47651ed811486", "url": "https://github.com/uyuni-project/uyuni/commit/543c76a9d5d0c70b924e2dc273f47651ed811486", "message": "add database 10 to 12 migration script", "committedDate": "2020-03-15T14:56:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4NDE0NA==", "url": "https://github.com/uyuni-project/uyuni/pull/1981#discussion_r392684144", "bodyText": "Here it is 12, but the Long is 130000 . Is this intentional?", "author": "mantel", "createdAt": "2020-03-15T15:24:58Z", "path": "java/code/src/com/suse/manager/webui/utils/LoginHelper.java", "diffHunk": "@@ -65,8 +66,13 @@\n \n     private static Logger log = Logger.getLogger(LoginHelper.class);\n     private static final String DEFAULT_KERB_USER_PASSWORD = \"0\";\n-    private static final Long MIN_PG_DB_VERSION = 90600L;\n-    private static final String MIN_PG_DB_VERSION_STRING = \"9.6\";\n+    private static final Long MIN_PG_DB_VERSION = 100001L;\n+    private static final Long MAX_PG_DB_VERSION = 130000L;\n+    private static final String MIN_PG_DB_VERSION_STRING = \"10\";\n+    private static final String MAX_PG_DB_VERSION_STRING = \"12\";", "originalCommit": "543c76a9d5d0c70b924e2dc273f47651ed811486", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4NDM5OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1981#discussion_r392684399", "bodyText": "yes as I check for \"less than\". But we could also set 129999L and test for \"less or equal than\"", "author": "mcalmer", "createdAt": "2020-03-15T15:27:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4NDE0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4NzI5NA==", "url": "https://github.com/uyuni-project/uyuni/pull/1981#discussion_r392687294", "bodyText": "You were right. I checked already for greater than which means we should test for 129999L value. Changed.", "author": "mcalmer", "createdAt": "2020-03-15T15:58:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4NDE0NA=="}], "type": "inlineReview", "revised_code": {"commit": "bd284637442fdd2b89fb91f2c61cc522a344ffdd", "chunk": "diff --git a/java/code/src/com/suse/manager/webui/utils/LoginHelper.java b/java/code/src/com/suse/manager/webui/utils/LoginHelper.java\nindex 80fa4feef97..6d564419fe0 100644\n--- a/java/code/src/com/suse/manager/webui/utils/LoginHelper.java\n+++ b/java/code/src/com/suse/manager/webui/utils/LoginHelper.java\n\n@@ -67,7 +67,7 @@ public class LoginHelper {\n     private static Logger log = Logger.getLogger(LoginHelper.class);\n     private static final String DEFAULT_KERB_USER_PASSWORD = \"0\";\n     private static final Long MIN_PG_DB_VERSION = 100001L;\n-    private static final Long MAX_PG_DB_VERSION = 130000L;\n+    private static final Long MAX_PG_DB_VERSION = 129999L;\n     private static final String MIN_PG_DB_VERSION_STRING = \"10\";\n     private static final String MAX_PG_DB_VERSION_STRING = \"12\";\n     private static final Double OS_VERSION_CHECK = 15.2;\n"}}, {"oid": "bd284637442fdd2b89fb91f2c61cc522a344ffdd", "url": "https://github.com/uyuni-project/uyuni/commit/bd284637442fdd2b89fb91f2c61cc522a344ffdd", "message": "try to give a hint when service start failed", "committedDate": "2020-03-19T09:03:37Z", "type": "forcePushed"}, {"oid": "d95debe9f5828136c24dd19227747b04facfa5bb", "url": "https://github.com/uyuni-project/uyuni/commit/d95debe9f5828136c24dd19227747b04facfa5bb", "message": "show error on schema migration in progress", "committedDate": "2020-03-19T16:33:17Z", "type": "forcePushed"}, {"oid": "992ab45de58ffda4cbc04e665796b280d4906ba4", "url": "https://github.com/uyuni-project/uyuni/commit/992ab45de58ffda4cbc04e665796b280d4906ba4", "message": "adapt database version check to new supported versions", "committedDate": "2020-03-20T12:48:41Z", "type": "commit"}, {"oid": "cdb6f93dc54076b674671014069745ec5e69f33a", "url": "https://github.com/uyuni-project/uyuni/commit/cdb6f93dc54076b674671014069745ec5e69f33a", "message": "change supported DB to postgresql 12", "committedDate": "2020-03-20T12:48:41Z", "type": "commit"}, {"oid": "1f47fab428fc0d7fd97ffc2400c16781919a2798", "url": "https://github.com/uyuni-project/uyuni/commit/1f47fab428fc0d7fd97ffc2400c16781919a2798", "message": "change spacewalk-release to uyuni-release", "committedDate": "2020-03-20T12:48:41Z", "type": "commit"}, {"oid": "21fdbd13c6644a826fa8896eebdb98c8c0dc6c5a", "url": "https://github.com/uyuni-project/uyuni/commit/21fdbd13c6644a826fa8896eebdb98c8c0dc6c5a", "message": "check database on startup", "committedDate": "2020-03-20T12:48:41Z", "type": "commit"}, {"oid": "62fe4d895c6bb3645e6960c15857b56e67e8b5fa", "url": "https://github.com/uyuni-project/uyuni/commit/62fe4d895c6bb3645e6960c15857b56e67e8b5fa", "message": "add check db to spacewalk target", "committedDate": "2020-03-20T12:48:41Z", "type": "commit"}, {"oid": "105ea06c5aef9df88d93cc921cad7d1e196b75dc", "url": "https://github.com/uyuni-project/uyuni/commit/105ea06c5aef9df88d93cc921cad7d1e196b75dc", "message": "write uyuni-release and optional susemanager-release file", "committedDate": "2020-03-20T12:48:41Z", "type": "commit"}, {"oid": "757c6b44209d90e5de0bfe5e9387223ebe63eb35", "url": "https://github.com/uyuni-project/uyuni/commit/757c6b44209d90e5de0bfe5e9387223ebe63eb35", "message": "update changelog", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "c4c0f03e1c14a773f9fcd8200bd6068b9ff7e2d3", "url": "https://github.com/uyuni-project/uyuni/commit/c4c0f03e1c14a773f9fcd8200bd6068b9ff7e2d3", "message": "add database 10 to 12 migration script", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "a29f92ecf11b0446119ad777b49c3aa74d8030ac", "url": "https://github.com/uyuni-project/uyuni/commit/a29f92ecf11b0446119ad777b49c3aa74d8030ac", "message": "add uyuni-check-database.service to target", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "888fa42766e3ee0e0d498d52960614becbe0a2e8", "url": "https://github.com/uyuni-project/uyuni/commit/888fa42766e3ee0e0d498d52960614becbe0a2e8", "message": "set version to greatest allowed version", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "6f29a99b00a9a3adaef2b7b7271eb9eacb17b2e0", "url": "https://github.com/uyuni-project/uyuni/commit/6f29a99b00a9a3adaef2b7b7271eb9eacb17b2e0", "message": "try to give a hint when service start failed", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "5ba126e8e7a4d76d3d7277fc33962eebb006ac57", "url": "https://github.com/uyuni-project/uyuni/commit/5ba126e8e7a4d76d3d7277fc33962eebb006ac57", "message": "align DB version check in schema upgrade to the one in tomcat", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "765d95dbb7e00fd7b322532acd0b79c443e922a1", "url": "https://github.com/uyuni-project/uyuni/commit/765d95dbb7e00fd7b322532acd0b79c443e922a1", "message": "show error on schema migration in progress", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "581f41b1ccdc9a84d072fbc407cf4dfada3d45ca", "url": "https://github.com/uyuni-project/uyuni/commit/581f41b1ccdc9a84d072fbc407cf4dfada3d45ca", "message": "restrict check for pg version 12 on SLE/openSUSE 15.2", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "c7ead1f7276743137536f00d45566815b8bf12f9", "url": "https://github.com/uyuni-project/uyuni/commit/c7ead1f7276743137536f00d45566815b8bf12f9", "message": "for Leap 15.1 keep postgresql 10", "committedDate": "2020-03-20T12:49:01Z", "type": "commit"}, {"oid": "c7ead1f7276743137536f00d45566815b8bf12f9", "url": "https://github.com/uyuni-project/uyuni/commit/c7ead1f7276743137536f00d45566815b8bf12f9", "message": "for Leap 15.1 keep postgresql 10", "committedDate": "2020-03-20T12:49:01Z", "type": "forcePushed"}]}