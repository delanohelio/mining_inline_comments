{"pr_number": 2582, "pr_title": "Fix unit-tests failing due to missing default locale", "pr_createdAt": "2020-09-08T16:02:45Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2582", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAzNzgwMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2582#discussion_r485037801", "bodyText": "I agree with the spirit of the patch but would suggest a different implementation, that is to add the default value as second parameter in ConfigDefaults.getDefaultLocale():\nhttps://github.com/uyuni-project/uyuni/blob/master/java/code/src/com/redhat/rhn/common/conf/ConfigDefaults.java#L1023\nReason is just consistency with other cases/centralization, see for example:\nhttps://github.com/uyuni-project/uyuni/blob/master/java/code/src/com/redhat/rhn/common/conf/ConfigDefaults.java#L933", "author": "moio", "createdAt": "2020-09-08T16:09:56Z", "path": "java/code/src/com/redhat/rhn/common/localization/LocalizationService.java", "diffHunk": "@@ -693,6 +693,10 @@ public Collator newCollator() {\n      */\n     private static Locale getDefaultLocale() {\n         String defaultLocale = ConfigDefaults.get().getDefaultLocale();\n+        // Set fallback value if default can't be read from the config", "originalCommit": "2805f028ec51e671960c3675fd96735649a2e990", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "0a2d5ea8c3a2c9aa7411092b8a8d85c33f96d20a", "chunk": "diff --git a/java/code/src/com/redhat/rhn/common/localization/LocalizationService.java b/java/code/src/com/redhat/rhn/common/localization/LocalizationService.java\nindex 459ce0b93c7..023bfd27984 100644\n--- a/java/code/src/com/redhat/rhn/common/localization/LocalizationService.java\n+++ b/java/code/src/com/redhat/rhn/common/localization/LocalizationService.java\n\n@@ -693,10 +693,6 @@ public class LocalizationService {\n      */\n     private static Locale getDefaultLocale() {\n         String defaultLocale = ConfigDefaults.get().getDefaultLocale();\n-        // Set fallback value if default can't be read from the config\n-        if (defaultLocale == null) {\n-            defaultLocale = \"en_US\";\n-        }\n         String[] localeParts = defaultLocale.split(\"_\");\n         switch (localeParts.length) {\n             case 3:\n"}}, {"oid": "0a2d5ea8c3a2c9aa7411092b8a8d85c33f96d20a", "url": "https://github.com/uyuni-project/uyuni/commit/0a2d5ea8c3a2c9aa7411092b8a8d85c33f96d20a", "message": "Fix unit-tests failing due to missing default locale\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-09-08T16:14:01Z", "type": "commit"}, {"oid": "0a2d5ea8c3a2c9aa7411092b8a8d85c33f96d20a", "url": "https://github.com/uyuni-project/uyuni/commit/0a2d5ea8c3a2c9aa7411092b8a8d85c33f96d20a", "message": "Fix unit-tests failing due to missing default locale\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-09-08T16:14:01Z", "type": "forcePushed"}]}