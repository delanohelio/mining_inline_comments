{"pr_number": 2292, "pr_title": "Avoid traceback with AssertionError: Failed to update row (bsc#1172558)", "pr_createdAt": "2020-06-05T09:26:12Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2292", "timeline": [{"oid": "3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0", "url": "https://github.com/uyuni-project/uyuni/commit/3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0", "message": "Avoid traceback with AssertionError: Failed to update row (bsc#1172558)", "committedDate": "2020-06-05T09:23:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxNTA5NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2292#discussion_r435815094", "bodyText": "Fine to remove the assert, but... it does mean we are not checking the output of executeUpdate method?\nWhat if the row failed updating it? \ud83e\udd14", "author": "srbarrios", "createdAt": "2020-06-05T09:52:22Z", "path": "java/code/src/com/redhat/rhn/domain/rhnset/RhnSetFactory.java", "diffHunk": "@@ -184,22 +184,19 @@ private static void executeMode(RhnSetElement elem,\n         params.put(\"user_id\", elem.getUserId());\n         params.put(\"label\", elem.getLabel());\n         params.put(\"el_one\", elem.getElement());\n-        int count;\n \n         if (elem.getElementThree() == null && elem.getElementTwo() == null) {\n-            count = el1.executeUpdate(params);\n+            el1.executeUpdate(params);\n         }\n         else if (elem.getElementThree() == null) {\n             params.put(\"el_two\", elem.getElementTwo());\n-            count = el2.executeUpdate(params);\n+            el2.executeUpdate(params);\n         }\n         else {\n             params.put(\"el_three\", elem.getElementThree());\n             params.put(\"el_two\", elem.getElementTwo());\n-            count = el3.executeUpdate(params);\n+            el3.executeUpdate(params);\n         }\n-\n-        assert count == 1 : \"Failed to update row\";", "originalCommit": "3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyNDYxNg==", "url": "https://github.com/uyuni-project/uyuni/pull/2292#discussion_r435824616", "bodyText": "We do not have much to check. The update is restricted to just one row so the only possible outputs are two: 1 (row updated) or 0 (rows updated) - there cannot be more.\nBefore commit bb406bc, an output of 0 would signal an error, as we were definitely expecting 1 row to be updated. After the commit, we changed the query and both 1 and 0 are OK as outputs.\nSo there is nothing really left to check here, and in particular, failing on 0 is wrong, thus I am removing the check.", "author": "moio", "createdAt": "2020-06-05T10:10:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxNTA5NA=="}], "type": "inlineReview", "revised_code": null}, {"oid": "bf555556faf646e72fb2b48fe5b72a512aef494d", "url": "https://github.com/uyuni-project/uyuni/commit/bf555556faf646e72fb2b48fe5b72a512aef494d", "message": "Merge branch 'master' into bsc1172558", "committedDate": "2020-06-05T12:46:10Z", "type": "commit"}]}