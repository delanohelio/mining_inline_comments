{"pr_number": 2776, "pr_title": "CLM: fix XMLRPC docs and XMLRPC validation", "pr_createdAt": "2020-10-29T15:52:34Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2776", "timeline": [{"oid": "eb8c43b4f6cc8c2511c90bae2ad9c56ce00b020a", "url": "https://github.com/uyuni-project/uyuni/commit/eb8c43b4f6cc8c2511c90bae2ad9c56ce00b020a", "message": "Localize CLM messages", "committedDate": "2020-10-30T08:29:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI1MTkzNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2776#discussion_r515251934", "bodyText": "The validation handling for updateContentFilter seems to be missing", "author": "parlt91", "createdAt": "2020-10-30T17:14:34Z", "path": "java/code/src/com/suse/manager/webui/controllers/contentmanagement/handlers/FilterApiController.java", "diffHunk": "@@ -167,6 +168,10 @@ public static String createContentFilter(Request req, Response res, User user) {\n         catch (EntityExistsException error) {\n             return json(GSON, res, HttpStatus.SC_BAD_REQUEST, ResultJson.error(\"contentmanagement.filter_exists\"));\n         }\n+        catch (ValidatorException e) {", "originalCommit": "a0b87bdbd266c7f8696cd9190720028f97695561", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk0MzEyNw==", "url": "https://github.com/uyuni-project/uyuni/pull/2776#discussion_r515943127", "bodyText": "Good catch, thanks!", "author": "hustodemon", "createdAt": "2020-11-02T12:39:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI1MTkzNA=="}], "type": "inlineReview", "revised_code": {"commit": "370770ed55fcc06729eb8e3f5f4b387e5afed0b0", "chunk": "diff --git a/java/code/src/com/suse/manager/webui/controllers/contentmanagement/handlers/FilterApiController.java b/java/code/src/com/suse/manager/webui/controllers/contentmanagement/handlers/FilterApiController.java\nindex 3308fbe7b6a..331dc34d76f 100644\n--- a/java/code/src/com/suse/manager/webui/controllers/contentmanagement/handlers/FilterApiController.java\n+++ b/java/code/src/com/suse/manager/webui/controllers/contentmanagement/handlers/FilterApiController.java\n\n@@ -166,11 +170,7 @@ public class FilterApiController {\n             );\n         }\n         catch (EntityExistsException error) {\n-            return json(GSON, res, HttpStatus.SC_BAD_REQUEST, ResultJson.error(\"contentmanagement.filter_exists\"));\n-        }\n-        catch (ValidatorException e) {\n-            return json(GSON, res, HttpStatus.SC_BAD_REQUEST,\n-                    ResultJson.error(ValidationUtils.convertValidationErrors(e)));\n+            return json(GSON, res, HttpStatus.SC_BAD_REQUEST, ResultJson.error(\"Filter name already exists\"));\n         }\n \n         if (!StringUtils.isEmpty(createFilterRequest.getProjectLabel())) {\n"}}, {"oid": "370770ed55fcc06729eb8e3f5f4b387e5afed0b0", "url": "https://github.com/uyuni-project/uyuni/commit/370770ed55fcc06729eb8e3f5f4b387e5afed0b0", "message": "Fix the order of the arguments in the XMLRPC API doc for contentmanagement.buildProject", "committedDate": "2020-11-06T08:27:14Z", "type": "commit"}, {"oid": "fd07c05c6c4bad4338ed114c20775d2666857fc7", "url": "https://github.com/uyuni-project/uyuni/commit/fd07c05c6c4bad4338ed114c20775d2666857fc7", "message": "Refactor: Get rid of unneeded 'errors' field in ResultJson\n\nThis was used in Content Lifecycle context only.\n\nFor indicating errors, we can use messages and 'success = false' in\nResultJson. Aligned the code to use this way.", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "681f8728635c5759451aa2d9c8521c3bfa1d4db4", "url": "https://github.com/uyuni-project/uyuni/commit/681f8728635c5759451aa2d9c8521c3bfa1d4db4", "message": "Refactor: Inline method", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "1622273e798ec12121cb4da91ec42018d164d90b", "url": "https://github.com/uyuni-project/uyuni/commit/1622273e798ec12121cb4da91ec42018d164d90b", "message": "Refactor: Extract Content Project validation from frontend and re-use it from XMLRPC API", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "280d9c35165fb796ee9e4287a56317e29676acfb", "url": "https://github.com/uyuni-project/uyuni/commit/280d9c35165fb796ee9e4287a56317e29676acfb", "message": "Make use of the Content Project validation in XMLRPC API", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "921c6d1e08bdcefac1da3c1506ef9fac8d3c63d5", "url": "https://github.com/uyuni-project/uyuni/commit/921c6d1e08bdcefac1da3c1506ef9fac8d3c63d5", "message": "Refactor: Extract Content Environment validation from frontend and re-use it from XMLRPC API", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "bf94f1ac9648eb45145ea5ef5c4a3a4efad05593", "url": "https://github.com/uyuni-project/uyuni/commit/bf94f1ac9648eb45145ea5ef5c4a3a4efad05593", "message": "Make use of the Content Environment validation in XMLRPC API", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "43574722c237ec89bfb95b9fb7eb448adb848a30", "url": "https://github.com/uyuni-project/uyuni/commit/43574722c237ec89bfb95b9fb7eb448adb848a30", "message": "Remove unused filter frontent validation\n\nIn future, possible filter implementation should go to backend.", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "9f50ac881af45b2edf507a4fac9278390206fcf4", "url": "https://github.com/uyuni-project/uyuni/commit/9f50ac881af45b2edf507a4fac9278390206fcf4", "message": "Remove an outdated comment", "committedDate": "2020-11-06T08:27:15Z", "type": "commit"}, {"oid": "d84028be3f088359af4449d38ceb4267301acfe1", "url": "https://github.com/uyuni-project/uyuni/commit/d84028be3f088359af4449d38ceb4267301acfe1", "message": "Changelog", "committedDate": "2020-11-06T08:27:29Z", "type": "commit"}, {"oid": "89cda6d714ea8afd944414f5235d581ff81ebdd0", "url": "https://github.com/uyuni-project/uyuni/commit/89cda6d714ea8afd944414f5235d581ff81ebdd0", "message": "Refactor: Move the helper method to appropriate place", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "bbb4f70976d745a6a9479bcd00ec7b3f3cc18fe7", "url": "https://github.com/uyuni-project/uyuni/commit/bbb4f70976d745a6a9479bcd00ec7b3f3cc18fe7", "message": "Localize CLM messages", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "adbc349b08afa1afe894270bdff041fb342095a5", "url": "https://github.com/uyuni-project/uyuni/commit/adbc349b08afa1afe894270bdff041fb342095a5", "message": "Refactor: Rename and move the validator class", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "924f65d46ca49a47a643bc0a17ce2a604b61e5f7", "url": "https://github.com/uyuni-project/uyuni/commit/924f65d46ca49a47a643bc0a17ce2a604b61e5f7", "message": "Fix: Validate Content Environment length, fix a typo, fix a bug with validating incorrect field on update", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "98a91755da1cb2eaa40e4e8c6355b40be3c215ba", "url": "https://github.com/uyuni-project/uyuni/commit/98a91755da1cb2eaa40e4e8c6355b40be3c215ba", "message": "Fix: Validate Content Filter properties", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "2450dcee3ca45bc6b26a591a1b09bbb6f8222b37", "url": "https://github.com/uyuni-project/uyuni/commit/2450dcee3ca45bc6b26a591a1b09bbb6f8222b37", "message": "Fix: Report Content Lifecycle validation errors separately", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "53216444087d705ae22fe60f14fff1b63a3c128a", "url": "https://github.com/uyuni-project/uyuni/commit/53216444087d705ae22fe60f14fff1b63a3c128a", "message": "Handle the validation exception when updating CLM filters", "committedDate": "2020-11-06T08:27:30Z", "type": "commit"}, {"oid": "53216444087d705ae22fe60f14fff1b63a3c128a", "url": "https://github.com/uyuni-project/uyuni/commit/53216444087d705ae22fe60f14fff1b63a3c128a", "message": "Handle the validation exception when updating CLM filters", "committedDate": "2020-11-06T08:27:30Z", "type": "forcePushed"}]}