{"pr_number": 2585, "pr_title": "Public ImageData class for custom image pull policies", "pr_createdAt": "2020-04-18T01:03:51Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/2585", "timeline": [{"oid": "723ee5849190a4ff612b76503656bc4b01617c26", "url": "https://github.com/testcontainers/testcontainers-java/commit/723ee5849190a4ff612b76503656bc4b01617c26", "message": "Making imagedata public so it can be used to create custom image pull\npolicies. Adding test to ensure it works as expected.", "committedDate": "2020-04-18T00:49:57Z", "type": "commit"}, {"oid": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d", "url": "https://github.com/testcontainers/testcontainers-java/commit/fbd65d2e327ddf7d31b3f9203d3737c68af17a2d", "message": "Merge branch 'master' into bugfix/public-image-data", "committedDate": "2020-04-18T15:19:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTI2NQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#discussion_r410741265", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    return true;\n          \n          \n            \n                                    return false;\n          \n      \n    \n    \n  \n\nLet's not do unnecessary pulls", "author": "bsideup", "createdAt": "2020-04-18T19:35:21Z", "path": "core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package alt.testcontainers.images;\n+\n+import org.junit.Test;\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.startupcheck.OneShotStartupCheckStrategy;\n+import org.testcontainers.images.AbstractImagePullPolicy;\n+import org.testcontainers.images.ImageData;\n+import org.testcontainers.utility.DockerImageName;\n+\n+public class OutOfPackageImagePullPolicyTest {\n+    @Test\n+    public void shouldSupportCustomPoliciesOutOfTestContainersPackage() {\n+        try (\n+            GenericContainer<?> container = new GenericContainer<>(\"hello-world:latest\")\n+                .withImagePullPolicy(new AbstractImagePullPolicy() {\n+                    @Override\n+                    protected boolean shouldPullCached(DockerImageName imageName, ImageData localImageData) {\n+                        return true;", "originalCommit": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkwMjk1OQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#discussion_r410902959", "bodyText": "Fixed. Thanks!", "author": "cha55son", "createdAt": "2020-04-19T13:16:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTI2NQ=="}], "type": "inlineReview", "revised_code": {"commit": "8358f5c97e26797c9ec6f142a61d17e3c3728d88", "chunk": "diff --git a/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java b/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java\nindex 55f85852..2da41a83 100644\n--- a/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java\n+++ b/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java\n\n@@ -11,11 +11,11 @@ public class OutOfPackageImagePullPolicyTest {\n     @Test\n     public void shouldSupportCustomPoliciesOutOfTestContainersPackage() {\n         try (\n-            GenericContainer<?> container = new GenericContainer<>(\"hello-world:latest\")\n+            GenericContainer<?> container = new GenericContainer<>()\n                 .withImagePullPolicy(new AbstractImagePullPolicy() {\n                     @Override\n                     protected boolean shouldPullCached(DockerImageName imageName, ImageData localImageData) {\n-                        return true;\n+                        return false;\n                     }\n                 })\n         ) {\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTMxNg==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#discussion_r410741316", "bodyText": "empty constructor would work too (will use the \"default\" image), so that we limit the number of images we use in our test suite", "author": "bsideup", "createdAt": "2020-04-18T19:36:04Z", "path": "core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package alt.testcontainers.images;\n+\n+import org.junit.Test;\n+import org.testcontainers.containers.GenericContainer;\n+import org.testcontainers.containers.startupcheck.OneShotStartupCheckStrategy;\n+import org.testcontainers.images.AbstractImagePullPolicy;\n+import org.testcontainers.images.ImageData;\n+import org.testcontainers.utility.DockerImageName;\n+\n+public class OutOfPackageImagePullPolicyTest {\n+    @Test\n+    public void shouldSupportCustomPoliciesOutOfTestContainersPackage() {\n+        try (\n+            GenericContainer<?> container = new GenericContainer<>(\"hello-world:latest\")", "originalCommit": "fbd65d2e327ddf7d31b3f9203d3737c68af17a2d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkwMzAwNQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2585#discussion_r410903005", "bodyText": "Fixed. Thanks!", "author": "cha55son", "createdAt": "2020-04-19T13:16:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTMxNg=="}], "type": "inlineReview", "revised_code": {"commit": "8358f5c97e26797c9ec6f142a61d17e3c3728d88", "chunk": "diff --git a/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java b/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java\nindex 55f85852..2da41a83 100644\n--- a/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java\n+++ b/core/src/test/java/alt/testcontainers/images/OutOfPackageImagePullPolicyTest.java\n\n@@ -11,11 +11,11 @@ public class OutOfPackageImagePullPolicyTest {\n     @Test\n     public void shouldSupportCustomPoliciesOutOfTestContainersPackage() {\n         try (\n-            GenericContainer<?> container = new GenericContainer<>(\"hello-world:latest\")\n+            GenericContainer<?> container = new GenericContainer<>()\n                 .withImagePullPolicy(new AbstractImagePullPolicy() {\n                     @Override\n                     protected boolean shouldPullCached(DockerImageName imageName, ImageData localImageData) {\n-                        return true;\n+                        return false;\n                     }\n                 })\n         ) {\n"}}, {"oid": "8358f5c97e26797c9ec6f142a61d17e3c3728d88", "url": "https://github.com/testcontainers/testcontainers-java/commit/8358f5c97e26797c9ec6f142a61d17e3c3728d88", "message": "Ensuring we don't do unnecessary pulls and using the default generic\ncontainer image for the out of package pull policy test.", "committedDate": "2020-04-19T13:15:30Z", "type": "commit"}]}