{"pr_number": 2511, "pr_title": "Adapt docs to non deprecated way of setting --memory and --memory-swap", "pr_createdAt": "2020-04-02T14:09:57Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/2511", "timeline": [{"oid": "ecb43b1412db160192a93b73636ee92f9516a098", "url": "https://github.com/testcontainers/testcontainers-java/commit/ecb43b1412db160192a93b73636ee92f9516a098", "message": "Adapt to non deprecated way of setting --memory and --memory-swap", "committedDate": "2020-04-02T14:08:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA1Mjk4OA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2511#discussion_r407052988", "bodyText": "this is incorrect.\nIt should be -> cmd.withHostConfig(cmd.getHostConfig().withMemory((long) 8 * 1024 * 1024))-like.\nOtherwise, you're overwriting the previously set host values", "author": "bsideup", "createdAt": "2020-04-11T11:34:29Z", "path": "docs/examples/junit4/generic/src/test/java/generic/CmdModifierTest.java", "diffHunk": "@@ -18,10 +18,13 @@\n     // }\n \n     // memory {\n+    private HostConfig hostConfig = HostConfig.newHostConfig()\n+        .withMemory((long) 8 * 1024 * 1024)\n+        .withMemorySwap((long) 12 * 1024 * 1024);\n+\n     @Rule\n     public GenericContainer memoryLimitedRedis = new GenericContainer<>(\"redis:3.0.2\")\n-            .withCreateContainerCmdModifier(cmd -> cmd.withMemory((long) 8 * 1024 * 1024))\n-            .withCreateContainerCmdModifier(cmd -> cmd.withMemorySwap((long) 12 * 1024 * 1024));\n+            .withCreateContainerCmdModifier(cmd -> cmd.withHostConfig(hostConfig);", "originalCommit": "ecb43b1412db160192a93b73636ee92f9516a098", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "5a875d9cc78298dbe2b7d5dfd9e7b074885d64cc", "chunk": "diff --git a/docs/examples/junit4/generic/src/test/java/generic/CmdModifierTest.java b/docs/examples/junit4/generic/src/test/java/generic/CmdModifierTest.java\nindex 88c128e0..172a821b 100644\n--- a/docs/examples/junit4/generic/src/test/java/generic/CmdModifierTest.java\n+++ b/docs/examples/junit4/generic/src/test/java/generic/CmdModifierTest.java\n\n@@ -18,13 +18,15 @@ public class CmdModifierTest {\n     // }\n \n     // memory {\n-    private HostConfig hostConfig = HostConfig.newHostConfig()\n-        .withMemory((long) 8 * 1024 * 1024)\n-        .withMemorySwap((long) 12 * 1024 * 1024);\n+    private long memoryInBytes = 8 * 1024 * 1024;\n+    private long memorySwapInBytes = 12 * 1024 * 1024;\n \n     @Rule\n     public GenericContainer memoryLimitedRedis = new GenericContainer<>(\"redis:3.0.2\")\n-            .withCreateContainerCmdModifier(cmd -> cmd.withHostConfig(hostConfig);\n+            .withCreateContainerCmdModifier(cmd -> cmd.getHostConfig()\n+                .withMemory(memoryInBytes)\n+                .withMemorySwap(memorySwapInBytes)\n+            );\n     // }\n \n \n"}}, {"oid": "ad9251e0ebb604beb165a7adab6eea9a7b7b889b", "url": "https://github.com/testcontainers/testcontainers-java/commit/ad9251e0ebb604beb165a7adab6eea9a7b7b889b", "message": "Merge branch 'master' into 2510-update-docs-setting-memory-limits", "committedDate": "2020-05-07T18:05:20Z", "type": "commit"}, {"oid": "5a875d9cc78298dbe2b7d5dfd9e7b074885d64cc", "url": "https://github.com/testcontainers/testcontainers-java/commit/5a875d9cc78298dbe2b7d5dfd9e7b074885d64cc", "message": "Update PR per review comments", "committedDate": "2020-07-05T15:13:29Z", "type": "commit"}]}