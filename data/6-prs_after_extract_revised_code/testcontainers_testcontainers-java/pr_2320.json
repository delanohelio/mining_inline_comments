{"pr_number": 2320, "pr_title": "Elasticsearch: Add test and documentation for secured cluster, bump default Elasticsearch version (deprecated constructor) from 6.4.1 to 7.9.2", "pr_createdAt": "2020-02-03T14:41:26Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/2320", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwNjgwOQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2320#discussion_r376606809", "bodyText": "Unfortunately I think we have to be careful about this; anybody using the plain ElasticsearchContainer() constructor in their tests will get an unexpected major version bump.\nWe have a similar situation with other modules where the default version is getting old, and I would like to advance versions - but don't want to cause unexpected breakage.\n@bsideup, @kiview let's discuss the most responsible course of action...", "author": "rnorth", "createdAt": "2020-02-07T21:04:35Z", "path": "modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java", "diffHunk": "@@ -34,15 +34,15 @@\n     /**\n      * Elasticsearch Default version\n      */\n-    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"6.4.1\";", "originalCommit": "991057ce3ae5d5c2df5dab6452081f75cd394519", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYyMTIwMA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2320#discussion_r376621200", "bodyText": "Fortunately the documentation invites the user to use a specific version.\nAs we did not document the default constructor (which we should may be ban) I'd not be super concerned by this breaking change.\nMy 2 cents.", "author": "dadoonet", "createdAt": "2020-02-07T21:42:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwNjgwOQ=="}], "type": "inlineReview", "revised_code": {"commit": "a605c74f9a766caa9314d5fc0d7959a4704d2c6c", "chunk": "diff --git a/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java b/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java\nindex 72a2be6f..eebcbad3 100644\n--- a/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java\n+++ b/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java\n\n@@ -29,20 +29,23 @@ public class ElasticsearchContainer extends GenericContainer<ElasticsearchContai\n     /**\n      * Elasticsearch Docker base URL\n      */\n+    @Deprecated\n     private static final String ELASTICSEARCH_DEFAULT_IMAGE = \"docker.elastic.co/elasticsearch/elasticsearch\";\n \n     /**\n      * Elasticsearch Default version\n      */\n-    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"7.5.2\";\n+    @Deprecated\n+    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"7.8.0\";\n \n+    @Deprecated\n     public ElasticsearchContainer() {\n-        this(ELASTICSEARCH_DEFAULT_IMAGE + \":\" + ELASTICSEARCH_DEFAULT_VERSION);\n+        this(\"docker.elastic.co/elasticsearch/elasticsearch:7.8.0\");\n     }\n \n     /**\n      * Create an Elasticsearch Container by passing the full docker image name\n-     * @param dockerImageName Full docker image name, like: docker.elastic.co/elasticsearch/elasticsearch:7.5.2\n+     * @param dockerImageName Full docker image name, like: docker.elastic.co/elasticsearch/elasticsearch:7.8.0\n      */\n     public ElasticsearchContainer(String dockerImageName) {\n         super(dockerImageName);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA3MDUzMQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2320#discussion_r446070531", "bodyText": "Let's just mark this as @Deprecated", "author": "dadoonet", "createdAt": "2020-06-26T09:21:56Z", "path": "modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java", "diffHunk": "@@ -34,15 +34,15 @@\n     /**\n      * Elasticsearch Default version\n      */\n-    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"6.4.1\";\n+    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"7.5.2\";\n \n     public ElasticsearchContainer() {", "originalCommit": "991057ce3ae5d5c2df5dab6452081f75cd394519", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a605c74f9a766caa9314d5fc0d7959a4704d2c6c", "chunk": "diff --git a/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java b/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java\nindex 72a2be6f..eebcbad3 100644\n--- a/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java\n+++ b/modules/elasticsearch/src/main/java/org/testcontainers/elasticsearch/ElasticsearchContainer.java\n\n@@ -29,20 +29,23 @@ public class ElasticsearchContainer extends GenericContainer<ElasticsearchContai\n     /**\n      * Elasticsearch Docker base URL\n      */\n+    @Deprecated\n     private static final String ELASTICSEARCH_DEFAULT_IMAGE = \"docker.elastic.co/elasticsearch/elasticsearch\";\n \n     /**\n      * Elasticsearch Default version\n      */\n-    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"7.5.2\";\n+    @Deprecated\n+    protected static final String ELASTICSEARCH_DEFAULT_VERSION = \"7.8.0\";\n \n+    @Deprecated\n     public ElasticsearchContainer() {\n-        this(ELASTICSEARCH_DEFAULT_IMAGE + \":\" + ELASTICSEARCH_DEFAULT_VERSION);\n+        this(\"docker.elastic.co/elasticsearch/elasticsearch:7.8.0\");\n     }\n \n     /**\n      * Create an Elasticsearch Container by passing the full docker image name\n-     * @param dockerImageName Full docker image name, like: docker.elastic.co/elasticsearch/elasticsearch:7.5.2\n+     * @param dockerImageName Full docker image name, like: docker.elastic.co/elasticsearch/elasticsearch:7.8.0\n      */\n     public ElasticsearchContainer(String dockerImageName) {\n         super(dockerImageName);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA3MDg5NQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2320#discussion_r446070895", "bodyText": "We should just replace this default constructor method", "author": "dadoonet", "createdAt": "2020-06-26T09:22:40Z", "path": "modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java", "diffHunk": "@@ -67,14 +77,34 @@ public void elasticsearchDefaultTest() throws IOException {\n         }\n     }\n \n+    @Test\n+    public void elasticsearchSecuredTest() throws IOException {\n+        try (ElasticsearchContainer container = new ElasticsearchContainer()", "originalCommit": "991057ce3ae5d5c2df5dab6452081f75cd394519", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "a605c74f9a766caa9314d5fc0d7959a4704d2c6c", "chunk": "diff --git a/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java b/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java\nindex 9cd1ad2d..0f15e871 100644\n--- a/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java\n+++ b/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java\n\n@@ -79,7 +82,7 @@ public class ElasticsearchContainerTest {\n \n     @Test\n     public void elasticsearchSecuredTest() throws IOException {\n-        try (ElasticsearchContainer container = new ElasticsearchContainer()\n+        try (ElasticsearchContainer container = new ElasticsearchContainer(\"docker.elastic.co/elasticsearch/elasticsearch:\" + ELASTICSEARCH_VERSION)\n             .withEnv(\"ELASTIC_PASSWORD\", ELASTICSEARCH_PASSWORD)\n             .withEnv(\"xpack.security.enabled\", \"true\")\n         ) {\n"}}, {"oid": "a605c74f9a766caa9314d5fc0d7959a4704d2c6c", "url": "https://github.com/testcontainers/testcontainers-java/commit/a605c74f9a766caa9314d5fc0d7959a4704d2c6c", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.", "committedDate": "2020-07-07T12:56:17Z", "type": "forcePushed"}, {"oid": "f3345e3af3a109050bcc55b445ce282ac58f88e7", "url": "https://github.com/testcontainers/testcontainers-java/commit/f3345e3af3a109050bcc55b445ce282ac58f88e7", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.", "committedDate": "2020-07-07T12:59:08Z", "type": "forcePushed"}, {"oid": "c5be8dd37f0bbffed3f4ea4b1c3fd0a0371b4508", "url": "https://github.com/testcontainers/testcontainers-java/commit/c5be8dd37f0bbffed3f4ea4b1c3fd0a0371b4508", "message": "Change latest version to 7.9.2\n\nAdd a test for secured cluster\nThis can be now activated for free with the default basic license.", "committedDate": "2020-10-15T05:16:08Z", "type": "forcePushed"}, {"oid": "6ddb945acaac6bf7bf3ae0480209f164bb273f89", "url": "https://github.com/testcontainers/testcontainers-java/commit/6ddb945acaac6bf7bf3ae0480209f164bb273f89", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.\nAlso change latest version to 7.9.2.", "committedDate": "2020-10-15T05:22:46Z", "type": "forcePushed"}, {"oid": "deb1245cb851a0c5b4d1169087de813085625db8", "url": "https://github.com/testcontainers/testcontainers-java/commit/deb1245cb851a0c5b4d1169087de813085625db8", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.\nAlso change latest version to 7.9.2.", "committedDate": "2020-10-15T05:24:34Z", "type": "forcePushed"}, {"oid": "4ee717089a49289ec6725e4226087abd6c4f4ee3", "url": "https://github.com/testcontainers/testcontainers-java/commit/4ee717089a49289ec6725e4226087abd6c4f4ee3", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.\nAlso change latest version to 7.9.2.", "committedDate": "2020-10-15T17:06:52Z", "type": "forcePushed"}, {"oid": "04e5366ae8e3178158220205bb7cd4682001d323", "url": "https://github.com/testcontainers/testcontainers-java/commit/04e5366ae8e3178158220205bb7cd4682001d323", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.\nAlso change latest version to 7.9.2.", "committedDate": "2020-10-15T17:17:21Z", "type": "commit"}, {"oid": "04e5366ae8e3178158220205bb7cd4682001d323", "url": "https://github.com/testcontainers/testcontainers-java/commit/04e5366ae8e3178158220205bb7cd4682001d323", "message": "Add a test for secured cluster\n\nThis can be now activated for free with the default basic license.\nAlso change latest version to 7.9.2.", "committedDate": "2020-10-15T17:17:21Z", "type": "forcePushed"}]}