{"pr_number": 2321, "pr_title": "Elasticsearch: Add withPassword(String) method for secure access", "pr_createdAt": "2020-02-03T14:55:33Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/2321", "timeline": [{"oid": "877aa4f7a0425e47d53a4b9ab9f8b67bdaec1422", "url": "https://github.com/testcontainers/testcontainers-java/commit/877aa4f7a0425e47d53a4b9ab9f8b67bdaec1422", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also remove the deprecated usage of default ctor.", "committedDate": "2020-07-04T11:03:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc2Mzg3OQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2321#discussion_r449763879", "bodyText": "Ideally we should get this from the Gradle definition. Is that possible?", "author": "dadoonet", "createdAt": "2020-07-04T11:10:02Z", "path": "modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java", "diffHunk": "@@ -27,37 +18,49 @@\n import org.junit.After;\n import org.junit.Test;\n \n+import java.io.IOException;\n+\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.rnorth.visibleassertions.VisibleAssertions.assertThrows;\n+\n public class ElasticsearchContainerTest {\n \n     /**\n      * Elasticsearch version which should be used for the Tests\n      */\n-    private static final String ELASTICSEARCH_VERSION = Version.CURRENT.toString();\n+    private static final String ELASTICSEARCH_VERSION = \"7.8.0\";", "originalCommit": "928273d9de929191eb4143ff66e5423b01321e79", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4NTc4Mw==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2321#discussion_r449785783", "bodyText": "Depending on the module, it's not always the case that there's a 1:1 mapping between driver and image versions, but if there is for Elasticsearch that's quite nice. It could help keep our tests up to date.\nWe do this for Selenium, for which there's historically been a very tight coupling between driver version and required image version.\nFor the Selenium module, the code that does it is here: \n  \n    \n      testcontainers-java/modules/selenium/src/main/java/org/testcontainers/containers/SeleniumUtils.java\n    \n    \n         Line 17\n      in\n      923472f\n    \n    \n    \n    \n\n        \n          \n           public final class SeleniumUtils { \n        \n    \n  \n\n\nIf you wanted to use this for inspiration (maybe change SeleniumUtils to a general-purpose class inside our test-support module), perhaps it could work. We'd only want to use this for Testcontainers' internal tests, though - i.e. deprecation of the default-args constructor still applies.", "author": "rnorth", "createdAt": "2020-07-04T16:20:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc2Mzg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg1MjY1OA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2321#discussion_r450852658", "bodyText": "Right. I think that this should come within another PR so we don't overcomplicate things.\nBTW I realized lately that I should have commented in #2320 and not here :(", "author": "dadoonet", "createdAt": "2020-07-07T13:12:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc2Mzg3OQ=="}], "type": "inlineReview", "revised_code": {"commit": "8a5b5f42c9f2c388daec36a43661e0facc8a6812", "chunk": "diff --git a/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java b/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java\nindex 6ba261a2..c43a1922 100644\n--- a/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java\n+++ b/modules/elasticsearch/src/test/java/org/testcontainers/elasticsearch/ElasticsearchContainerTest.java\n\n@@ -17,6 +17,7 @@ import org.elasticsearch.common.transport.TransportAddress;\n import org.elasticsearch.transport.client.PreBuiltTransportClient;\n import org.junit.After;\n import org.junit.Test;\n+import org.testcontainers.utility.DockerImageName;\n \n import java.io.IOException;\n \n"}}, {"oid": "a6c00c5aff4da4ea558e62301d4a82482c0d82bb", "url": "https://github.com/testcontainers/testcontainers-java/commit/a6c00c5aff4da4ea558e62301d4a82482c0d82bb", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.", "committedDate": "2020-07-07T13:07:14Z", "type": "forcePushed"}, {"oid": "8a5b5f42c9f2c388daec36a43661e0facc8a6812", "url": "https://github.com/testcontainers/testcontainers-java/commit/8a5b5f42c9f2c388daec36a43661e0facc8a6812", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also check that we can not define the password on OSS image.", "committedDate": "2020-10-15T16:56:25Z", "type": "forcePushed"}, {"oid": "96514b7c32410233733c4d736eb44260e427573d", "url": "https://github.com/testcontainers/testcontainers-java/commit/96514b7c32410233733c4d736eb44260e427573d", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also check that we can not define the password on OSS image.", "committedDate": "2020-10-15T17:11:17Z", "type": "forcePushed"}, {"oid": "3e17a3ee482d8e75907bf001a684bd310e2ad89b", "url": "https://github.com/testcontainers/testcontainers-java/commit/3e17a3ee482d8e75907bf001a684bd310e2ad89b", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also check that we can not define the password on OSS image.", "committedDate": "2020-10-15T17:24:34Z", "type": "forcePushed"}, {"oid": "e681a974b94fd60f780b68b76ef5d1024f40d24b", "url": "https://github.com/testcontainers/testcontainers-java/commit/e681a974b94fd60f780b68b76ef5d1024f40d24b", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also check that we can not define the password on OSS image.", "committedDate": "2020-10-15T17:26:35Z", "type": "forcePushed"}, {"oid": "23878f9a66875953e753d493d9b1f882d2a619dc", "url": "https://github.com/testcontainers/testcontainers-java/commit/23878f9a66875953e753d493d9b1f882d2a619dc", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also check that we can not define the password on OSS image.", "committedDate": "2020-10-16T08:25:56Z", "type": "commit"}, {"oid": "23878f9a66875953e753d493d9b1f882d2a619dc", "url": "https://github.com/testcontainers/testcontainers-java/commit/23878f9a66875953e753d493d9b1f882d2a619dc", "message": "Add withPassword(String) method to secure Elasticsearch\n\nInstead of providing env settings manually, we can simplify the usage of Elasticsearch in the context of TestContainers by just asking a password.\nBehind the scene, we do provide the needed env settings.\n\nWe also check that we can not define the password on OSS image.", "committedDate": "2020-10-16T08:25:56Z", "type": "forcePushed"}, {"oid": "c351a5670b9a6ddeafd7bbe2daed7c7d01e6d63d", "url": "https://github.com/testcontainers/testcontainers-java/commit/c351a5670b9a6ddeafd7bbe2daed7c7d01e6d63d", "message": "Add missing test", "committedDate": "2020-10-16T09:37:46Z", "type": "commit"}, {"oid": "d2149b1715f0135b29f34d5e8161ce8016df61f3", "url": "https://github.com/testcontainers/testcontainers-java/commit/d2149b1715f0135b29f34d5e8161ce8016df61f3", "message": "Use `isCompatibleWith` instead", "committedDate": "2020-10-16T11:46:27Z", "type": "commit"}]}