{"pr_number": 182, "pr_title": "Dev 1432: Use GRIPSS instead of somatic filter", "pr_createdAt": "2020-08-06T22:31:42Z", "pr_url": "https://github.com/hartwigmedical/pipeline5/pull/182", "timeline": [{"oid": "fcc4639998547420b8590d9ae961d242530f4dfc", "url": "https://github.com/hartwigmedical/pipeline5/commit/fcc4639998547420b8590d9ae961d242530f4dfc", "message": "DEV-1432: Replace GRIDSS somatic filter with GRIPSS", "committedDate": "2020-08-06T05:23:11Z", "type": "commit"}, {"oid": "c5cb5306c2c461757b43f52cc195b35da4c90f68", "url": "https://github.com/hartwigmedical/pipeline5/commit/c5cb5306c2c461757b43f52cc195b35da4c90f68", "message": "DEV-1432: Change GRIDSS namespace", "committedDate": "2020-08-06T22:29:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyODc0OQ==", "url": "https://github.com/hartwigmedical/pipeline5/pull/182#discussion_r466728749", "bodyText": "I assumed that we'd be changing the runSageCaller to runSomaticCaller once we were fully happy with removing Strelka, that it was just a temporary way of distinguishing between two variant somatic callers, so to speak.\nUnless there's some reason I'm not aware of for changing these I'd vote to keep it with the arguments describing what the thing does, not the name of the thing.", "author": "nedleitch", "createdAt": "2020-08-06T22:56:24Z", "path": "cluster/src/main/java/com/hartwig/pipeline/Arguments.java", "diffHunk": "@@ -166,9 +164,8 @@ static String workingDir() {\n                     .runAligner(true)\n                     .runSnpGenotyper(true)\n                     .runGermlineCaller(true)\n-                    .runSomaticCaller(true)\n                     .runSageCaller(true)\n-                    .runStructuralCaller(true)\n+                    .runGridssCaller(true)", "originalCommit": "c5cb5306c2c461757b43f52cc195b35da4c90f68", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "70727645cfe6a7f6fcfed63465878a7d7e0b11c5", "chunk": "diff --git a/cluster/src/main/java/com/hartwig/pipeline/Arguments.java b/cluster/src/main/java/com/hartwig/pipeline/Arguments.java\nindex 63ef4f5c..ac0d891a 100644\n--- a/cluster/src/main/java/com/hartwig/pipeline/Arguments.java\n+++ b/cluster/src/main/java/com/hartwig/pipeline/Arguments.java\n\n@@ -164,8 +164,8 @@ public interface Arguments extends CommonArguments {\n                     .runAligner(true)\n                     .runSnpGenotyper(true)\n                     .runGermlineCaller(true)\n-                    .runSageCaller(true)\n-                    .runGridssCaller(true)\n+                    .runSomaticCaller(true)\n+                    .runStructuralCaller(true)\n                     .runTertiary(true)\n                     .shallow(false)\n                     .sampleId(EMPTY)\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjczMDg4MA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/182#discussion_r466730880", "bodyText": "I'd be inclined to just store resourceFiles as an instance variable, the method names on it are descriptive enough.", "author": "nedleitch", "createdAt": "2020-08-06T23:03:01Z", "path": "cluster/src/main/java/com/hartwig/pipeline/calling/structural/gridss/stage/Driver.java", "diffHunk": "@@ -21,21 +23,20 @@\n     private final String referenceBamPath;\n     private final String tumorBamPath;\n \n-    public Driver(final String assemblyBamPath, final String referenceGenomePath, final String blacklistBedPath,\n-            final String gridssConfigPath, final String repeatMaskerDbBed, final String referenceBamPath, final String tumorBamPath) {\n+    public Driver(final ResourceFiles resourceFiles, final String assemblyBamPath, final String referenceBamPath, final String tumorBamPath) {\n         super(\"gridss.driver\", OutputFile.GZIPPED_VCF);\n         this.assemblyBamPath = assemblyBamPath;\n-        this.referenceGenomePath = referenceGenomePath;\n-        this.blacklistBedPath = blacklistBedPath;\n-        this.gridssConfigPath = gridssConfigPath;\n-        this.repeatMaskerDbBed = repeatMaskerDbBed;\n+        this.referenceGenomePath =  resourceFiles.refGenomeFile();\n+        this.blacklistBedPath = resourceFiles.gridssBlacklistBed();\n+        this.gridssConfigPath = resourceFiles.gridssPropertiesFile();\n+        this.repeatMaskerDbBed = resourceFiles.gridssRepeatMaskerDbBed();", "originalCommit": "c5cb5306c2c461757b43f52cc195b35da4c90f68", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "70727645cfe6a7f6fcfed63465878a7d7e0b11c5", "chunk": "diff --git a/cluster/src/main/java/com/hartwig/pipeline/calling/structural/gridss/stage/Driver.java b/cluster/src/main/java/com/hartwig/pipeline/calling/structural/gridss/stage/Driver.java\nindex fa83b37c..e6ac5592 100644\n--- a/cluster/src/main/java/com/hartwig/pipeline/calling/structural/gridss/stage/Driver.java\n+++ b/cluster/src/main/java/com/hartwig/pipeline/calling/structural/gridss/stage/Driver.java\n\n@@ -15,21 +15,15 @@ import com.hartwig.pipeline.tools.Versions;\n public class Driver extends SubStage {\n \n     private static final String GRIDSS = \"gridss\";\n+    private final ResourceFiles resourceFiles;\n     private final String assemblyBamPath;\n-    private final String referenceGenomePath;\n-    private final String blacklistBedPath;\n-    private final String gridssConfigPath;\n-    private final String repeatMaskerDbBed;\n-    private final String referenceBamPath;\n     private final String tumorBamPath;\n+    private final String referenceBamPath;\n \n     public Driver(final ResourceFiles resourceFiles, final String assemblyBamPath, final String referenceBamPath, final String tumorBamPath) {\n         super(\"gridss.driver\", OutputFile.GZIPPED_VCF);\n+        this.resourceFiles = resourceFiles;\n         this.assemblyBamPath = assemblyBamPath;\n-        this.referenceGenomePath =  resourceFiles.refGenomeFile();\n-        this.blacklistBedPath = resourceFiles.gridssBlacklistBed();\n-        this.gridssConfigPath = resourceFiles.gridssPropertiesFile();\n-        this.repeatMaskerDbBed = resourceFiles.gridssRepeatMaskerDbBed();\n         this.referenceBamPath = referenceBamPath;\n         this.tumorBamPath = tumorBamPath;\n     }\n"}}, {"oid": "70727645cfe6a7f6fcfed63465878a7d7e0b11c5", "url": "https://github.com/hartwigmedical/pipeline5/commit/70727645cfe6a7f6fcfed63465878a7d7e0b11c5", "message": "DEV-1432: Review feedback", "committedDate": "2020-08-06T23:24:15Z", "type": "commit"}]}