{"pr_number": 2652, "pr_title": "Add \"SHOW ALL\"", "pr_createdAt": "2020-05-24T23:43:22Z", "pr_url": "https://github.com/h2database/h2database/pull/2652", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcwMzM3Nw==", "url": "https://github.com/h2database/h2database/pull/2652#discussion_r429703377", "bodyText": "You need to check compatibility mode here.\n\n\nALL is a keyword, it should read by its number.\n\n\nMove it to the end and use something like\nif (database.getMode().getEnum() == ModeEnum.PostgreSQL && (readIf(ALL)) {\n}", "author": "katzyn", "createdAt": "2020-05-25T01:58:39Z", "path": "h2/src/main/org/h2/command/Parser.java", "diffHunk": "@@ -1573,7 +1573,10 @@ private Prepared parseHelp() {\n     private Prepared parseShow() {\n         ArrayList<Value> paramValues = Utils.newSmallArrayList();\n         StringBuilder buff = new StringBuilder(\"SELECT \");\n-        if (readIf(\"CLIENT_ENCODING\")) {\n+        if (readIf(\"ALL\")) {", "originalCommit": "1e3ad2424deb131e748e2da754f9be7a429b39fb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "3a73e18ca89ad2fed128cece1dbb421972a3cbd9", "chunk": "diff --git a/h2/src/main/org/h2/command/Parser.java b/h2/src/main/org/h2/command/Parser.java\nindex 8a05621e3..d49a558a1 100644\n--- a/h2/src/main/org/h2/command/Parser.java\n+++ b/h2/src/main/org/h2/command/Parser.java\n\n@@ -1573,10 +1579,7 @@ private Prepared parseHelp() {\n     private Prepared parseShow() {\n         ArrayList<Value> paramValues = Utils.newSmallArrayList();\n         StringBuilder buff = new StringBuilder(\"SELECT \");\n-        if (readIf(\"ALL\")) {\n-            // for PostgreSQL compatibility\n-            buff.append(\"NAME, SETTING FROM PG_CATALOG.PG_SETTINGS\");\n-        } else if (readIf(\"CLIENT_ENCODING\")) {\n+        if (readIf(\"CLIENT_ENCODING\")) {\n             // for PostgreSQL compatibility\n             buff.append(\"'UNICODE' CLIENT_ENCODING\");\n         } else if (readIf(\"DEFAULT_TRANSACTION_ISOLATION\")) {\n"}}, {"oid": "3a73e18ca89ad2fed128cece1dbb421972a3cbd9", "url": "https://github.com/h2database/h2database/commit/3a73e18ca89ad2fed128cece1dbb421972a3cbd9", "message": "Add \"SHOW ALL\"\n\nFor PostgreSQL compatibility in #2450", "committedDate": "2020-05-25T13:55:29Z", "type": "commit"}, {"oid": "3a73e18ca89ad2fed128cece1dbb421972a3cbd9", "url": "https://github.com/h2database/h2database/commit/3a73e18ca89ad2fed128cece1dbb421972a3cbd9", "message": "Add \"SHOW ALL\"\n\nFor PostgreSQL compatibility in #2450", "committedDate": "2020-05-25T13:55:29Z", "type": "forcePushed"}]}