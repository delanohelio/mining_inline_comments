{"pr_number": 4309, "pr_title": "DHFPROD-5460:Changing the log message when getting DHF version fails", "pr_createdAt": "2020-07-29T18:03:48Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4309", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUwNDM5MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4309#discussion_r462504390", "bodyText": "I think we need to tweak this message - should say \"Will only check MarkLogic version to determine if Data Hub can be installed\" (instead of saying what the only thing we're going to do with ML version is).", "author": "rjrudin", "createdAt": "2020-07-29T18:32:37Z", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java", "diffHunk": "@@ -93,7 +93,8 @@ protected ObjectNode canInstallDhs(){\n             installedHubVersion = versions.getInstalledVersion();\n         }\n         catch (Exception e){\n-            logger.info(\"Data Hub is not installed yet\");\n+            logger.error(\"Unable to determine the version of DHF: \" + e.getMessage());\n+            logger.info(\"MarkLogic Server version will only be checked for determining compatibility\");", "originalCommit": "02045805df6f0bd3268a1d27a90e6a2e14bfb5a3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2babbdc8462cc7bde03748a47946dadc54591fd9", "chunk": "diff --git a/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java b/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java\nindex a574435a3..9ab10b3d8 100644\n--- a/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java\n+++ b/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java\n\n@@ -93,8 +93,8 @@ public abstract class AbstractInstallerCommand extends LoggingObject implements\n             installedHubVersion = versions.getInstalledVersion();\n         }\n         catch (Exception e){\n-            logger.error(\"Unable to determine the version of DHF: \" + e.getMessage());\n-            logger.info(\"MarkLogic Server version will only be checked for determining compatibility\");\n+            logger.error(\"Unable to determine version of existing Data Hub installation: \" + e.getMessage());\n+            logger.info(\"Will only check MarkLogic version to determine if Data Hub can be installed\");\n         }\n \n         MarkLogicVersion mlVersion = versions.getMLVersion(serverVersion);\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUwNTA3NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4309#discussion_r462505075", "bodyText": "Does this only happen when DH is not installed? Or could it be for other reasons?\nI think a better message is \"Unable to determine version of existing Data Hub installation: \" + e.getMessage(), unless we know that there is no existing DH installation.", "author": "rjrudin", "createdAt": "2020-07-29T18:33:52Z", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java", "diffHunk": "@@ -93,7 +93,8 @@ protected ObjectNode canInstallDhs(){\n             installedHubVersion = versions.getInstalledVersion();\n         }\n         catch (Exception e){\n-            logger.info(\"Data Hub is not installed yet\");\n+            logger.error(\"Unable to determine the version of DHF: \" + e.getMessage());", "originalCommit": "02045805df6f0bd3268a1d27a90e6a2e14bfb5a3", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "2babbdc8462cc7bde03748a47946dadc54591fd9", "chunk": "diff --git a/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java b/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java\nindex a574435a3..9ab10b3d8 100644\n--- a/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java\n+++ b/marklogic-data-hub/src/main/java/com/marklogic/hub/dhs/installer/command/AbstractInstallerCommand.java\n\n@@ -93,8 +93,8 @@ public abstract class AbstractInstallerCommand extends LoggingObject implements\n             installedHubVersion = versions.getInstalledVersion();\n         }\n         catch (Exception e){\n-            logger.error(\"Unable to determine the version of DHF: \" + e.getMessage());\n-            logger.info(\"MarkLogic Server version will only be checked for determining compatibility\");\n+            logger.error(\"Unable to determine version of existing Data Hub installation: \" + e.getMessage());\n+            logger.info(\"Will only check MarkLogic version to determine if Data Hub can be installed\");\n         }\n \n         MarkLogicVersion mlVersion = versions.getMLVersion(serverVersion);\n"}}, {"oid": "2babbdc8462cc7bde03748a47946dadc54591fd9", "url": "https://github.com/marklogic/marklogic-data-hub/commit/2babbdc8462cc7bde03748a47946dadc54591fd9", "message": "DHFPROD-5460:Changing the log message when getting DHF version fails", "committedDate": "2020-07-29T18:45:34Z", "type": "commit"}, {"oid": "2babbdc8462cc7bde03748a47946dadc54591fd9", "url": "https://github.com/marklogic/marklogic-data-hub/commit/2babbdc8462cc7bde03748a47946dadc54591fd9", "message": "DHFPROD-5460:Changing the log message when getting DHF version fails", "committedDate": "2020-07-29T18:45:34Z", "type": "forcePushed"}]}