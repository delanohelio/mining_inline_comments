{"pr_number": 3920, "pr_title": "DHFPROD-4888: Add entity type title as collection to mapped documents", "pr_createdAt": "2020-05-06T18:57:27Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3920", "timeline": [{"oid": "ae4fa171b79a3a05e5f024a9a0e25c408bf0d7f4", "url": "https://github.com/marklogic/marklogic-data-hub/commit/ae4fa171b79a3a05e5f024a9a0e25c408bf0d7f4", "message": "DHFPROD-4888: Add entity type title as collection to mapped documents", "committedDate": "2020-05-06T21:39:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI4MTQ0NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3920#discussion_r421281445", "bodyText": "Shouldnt the default collection be both entityType title and stepName to be consistent with pre 5.3?", "author": "bsrikan", "createdAt": "2020-05-07T07:01:12Z", "path": "marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/MappingControllerTest.java", "diffHunk": "@@ -166,7 +166,7 @@ public void testMappingSettings() {\n         // Check for defaults\n         assertEquals(\"TestCustomerMapping\", result.get(\"artifactName\").asText());\n         assertEquals(1, result.get(\"collections\").size());\n-        assertEquals(\"default-mapping\", result.get(\"collections\").get(0).asText());\n+        assertEquals(\"Customer\", result.get(\"collections\").get(0).asText());", "originalCommit": "ae4fa171b79a3a05e5f024a9a0e25c408bf0d7f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTUzMzUxNA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3920#discussion_r421533514", "bodyText": "\"default-mapping\" is technically the step definition name, though I don't think it has any meaning other than to be a sensible default for a collection for mapped documents. If the entityType is used as the sensible default, then I don't see any reason nor meaning in the step definition name being used as a default collection too.", "author": "rjrudin", "createdAt": "2020-05-07T14:09:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI4MTQ0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NjE1OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3920#discussion_r421586158", "bodyText": "I was looking for \"TestCustomerMapping\" and agree that \"default-mapping\" shouldnt be used as a default collection.", "author": "bsrikan", "createdAt": "2020-05-07T15:17:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI4MTQ0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY0OTI0OQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3920#discussion_r421649249", "bodyText": "@bsrikan added the step name to the default collections.", "author": "ryanjdew", "createdAt": "2020-05-07T16:50:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI4MTQ0NQ=="}], "type": "inlineReview", "revised_code": {"commit": "7cf3d62611327087a26a4fd163590650d6409556", "chunk": "diff --git a/marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/MappingControllerTest.java b/marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/MappingControllerTest.java\nindex f49275d38..c013826bc 100644\n--- a/marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/MappingControllerTest.java\n+++ b/marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/MappingControllerTest.java\n\n@@ -165,8 +165,9 @@ public class MappingControllerTest extends AbstractHubCentralTest {\n         JsonNode result = controller.getMappingSettings(\"TestCustomerMapping\").getBody();\n         // Check for defaults\n         assertEquals(\"TestCustomerMapping\", result.get(\"artifactName\").asText());\n-        assertEquals(1, result.get(\"collections\").size());\n-        assertEquals(\"Customer\", result.get(\"collections\").get(0).asText());\n+        assertEquals(2, result.get(\"collections\").size());\n+        assertEquals(\"TestCustomerMapping\", result.get(\"collections\").get(0).asText());\n+        assertEquals(\"Customer\", result.get(\"collections\").get(1).asText());\n \n         ObjectNode settings = readJsonObject(MAPPING_SETTINGS);\n \n"}}, {"oid": "7cf3d62611327087a26a4fd163590650d6409556", "url": "https://github.com/marklogic/marklogic-data-hub/commit/7cf3d62611327087a26a4fd163590650d6409556", "message": "DHFPROD-4888: Add entity type title as collection to mapped documents", "committedDate": "2020-05-07T16:47:41Z", "type": "forcePushed"}, {"oid": "0f181af14eba600b3af8ea54dde171676784545d", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0f181af14eba600b3af8ea54dde171676784545d", "message": "DHFPROD-4888: Add entity type title as collection to mapped documents", "committedDate": "2020-05-07T21:11:55Z", "type": "commit"}, {"oid": "0f181af14eba600b3af8ea54dde171676784545d", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0f181af14eba600b3af8ea54dde171676784545d", "message": "DHFPROD-4888: Add entity type title as collection to mapped documents", "committedDate": "2020-05-07T21:11:55Z", "type": "forcePushed"}]}