{"pr_number": 4853, "pr_title": "DHFPROD-6234:Fix failing tests in 9.0-x server", "pr_createdAt": "2020-11-12T01:57:11Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4853", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA5OTcyNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4853#discussion_r522099727", "bodyText": "It's not the role that's needed, it's the http://marklogic.com/data-hub/privileges/write-match-merge privilege, right? I think it's totally fine to add those privileges to flow-developer-role, I think that's the right fix here. flow-developer-role is already over-powered since it has the manage-admin role, there's no harm in giving it more DHF privileges.", "author": "rjrudin", "createdAt": "2020-11-12T13:20:46Z", "path": "marklogic-data-hub/src/test/java/com/marklogic/hub/scaffolding/CreateStepTest.java", "diffHunk": "@@ -52,8 +52,11 @@ void ingestionStep() throws IOException {\n         verifyArtifactsAreWrittenToDbAndProject(\"myIngest2\", \"ingestion\", null);\n     }\n \n+    // runAsDataHubDeveloper() runs as \"flow-developer-role\" in 9.0-x who doesn't have \"hub-central-match-merge-writer, so explicitly", "originalCommit": "89803d10d48adca0d40855f35e7790115c40b7a6", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "cecd16baf55b88ed56cbbecce4be775dd1341ce4", "chunk": "diff --git a/marklogic-data-hub/src/test/java/com/marklogic/hub/scaffolding/CreateStepTest.java b/marklogic-data-hub/src/test/java/com/marklogic/hub/scaffolding/CreateStepTest.java\nindex 1a4a2a409..7c8716be3 100644\n--- a/marklogic-data-hub/src/test/java/com/marklogic/hub/scaffolding/CreateStepTest.java\n+++ b/marklogic-data-hub/src/test/java/com/marklogic/hub/scaffolding/CreateStepTest.java\n\n@@ -52,11 +52,8 @@ public class CreateStepTest extends AbstractHubCoreTest {\n         verifyArtifactsAreWrittenToDbAndProject(\"myIngest2\", \"ingestion\", null);\n     }\n \n-    // runAsDataHubDeveloper() runs as \"flow-developer-role\" in 9.0-x who doesn't have \"hub-central-match-merge-writer, so explicitly\n-    // running as \"test-data-hub-developer\"\n     @Test\n     void matchingStep() throws IOException {\n-        runAsUser(\"test-data-hub-developer\", \"password\");\n         Pair<JsonNode, String> results = createStep(\"myMatch\", \"matching\", null, null);\n         JsonNode step = results.getLeft();\n         verifyStep(\"myMatch\", step, \"matching\");\n"}}, {"oid": "cecd16baf55b88ed56cbbecce4be775dd1341ce4", "url": "https://github.com/marklogic/marklogic-data-hub/commit/cecd16baf55b88ed56cbbecce4be775dd1341ce4", "message": "DHFPROD-6234:Fix failing tests in 9.0-x server", "committedDate": "2020-11-12T22:20:14Z", "type": "commit"}, {"oid": "cecd16baf55b88ed56cbbecce4be775dd1341ce4", "url": "https://github.com/marklogic/marklogic-data-hub/commit/cecd16baf55b88ed56cbbecce4be775dd1341ce4", "message": "DHFPROD-6234:Fix failing tests in 9.0-x server", "committedDate": "2020-11-12T22:20:14Z", "type": "forcePushed"}]}