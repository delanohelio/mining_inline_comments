{"pr_number": 3567, "pr_title": "DHFPROD-3865: Can now run a step via a Data Services endpoint", "pr_createdAt": "2020-02-10T01:27:11Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3567", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgzNzczNg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3567#discussion_r376837736", "bodyText": "setSchemasPath was deprecated in ml-app-deployer 3.x and removed in 4.0 - this line of code was essentially having no impact, as the \"user schemas dir\" is src/main/ml-schemas, which is the default for ml-app-deployer (though it's better to use ml-config/databases/(db name)/schemas).", "author": "rjrudin", "createdAt": "2020-02-10T01:28:04Z", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubConfigImpl.java", "diffHunk": "@@ -1947,8 +1947,6 @@ private void updateAppConfig(AppConfig config) {\n \n         initializeModulePaths(config);\n \n-        config.setSchemasPath(getUserSchemasDir().toString());", "originalCommit": "ae4788c1e5b57ddc4f4f77b5ca51cc0cfc4c81de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2NTk4Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3567#discussion_r377265986", "bodyText": "We might want to make sure we note the backwards dependency, as folks who were using the user schemas directory under older versions, will suddenly find their configs will not work when they upgrade.", "author": "aebadirad", "createdAt": "2020-02-10T19:22:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgzNzczNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzM0MTgyOA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3567#discussion_r377341828", "bodyText": "Looking at HubProjectImpl, getUserSchemasDir is set to src/main/ml-modules, and a user can't override that. That's also the default in ml-app-deployer. So that's why I say that line of code was having no impact.", "author": "rjrudin", "createdAt": "2020-02-10T21:59:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgzNzczNg=="}], "type": "inlineReview", "revised_code": null}, {"oid": "e0a85e43691c3c7be51315eef93e995f7dfecc50", "url": "https://github.com/marklogic/marklogic-data-hub/commit/e0a85e43691c3c7be51315eef93e995f7dfecc50", "message": "DHFPROD-3865: Can now run a step via a Data Services endpoint\n\nUpgraded to Java Client 5.1.0 to use the Bulk IO API for testing. This required upgrading to ml-gradle 4.0, which supports Java Client 5.1 (3.x does not). \n\nExtracted reusable code from mlRunFlow.sjs into flow.sjs/findMatchingContent. This helps minimize the code in mlRunFlow.sjs (REST) and runSteps.sjs (DS).", "committedDate": "2020-02-10T01:29:33Z", "type": "commit"}, {"oid": "e0a85e43691c3c7be51315eef93e995f7dfecc50", "url": "https://github.com/marklogic/marklogic-data-hub/commit/e0a85e43691c3c7be51315eef93e995f7dfecc50", "message": "DHFPROD-3865: Can now run a step via a Data Services endpoint\n\nUpgraded to Java Client 5.1.0 to use the Bulk IO API for testing. This required upgrading to ml-gradle 4.0, which supports Java Client 5.1 (3.x does not). \n\nExtracted reusable code from mlRunFlow.sjs into flow.sjs/findMatchingContent. This helps minimize the code in mlRunFlow.sjs (REST) and runSteps.sjs (DS).", "committedDate": "2020-02-10T01:29:33Z", "type": "forcePushed"}]}