{"pr_number": 2776, "pr_title": "Fix the errors reported by NullAway", "pr_createdAt": "2020-06-05T04:08:53Z", "pr_url": "https://github.com/line/armeria/pull/2776", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY4NDE1Mg==", "url": "https://github.com/line/armeria/pull/2776#discussion_r435684152", "bodyText": "@Nullable is an inherited annotation, which means you do not have to specify it when the method you are overriding already has it, i.e. this is false positive.", "author": "trustin", "createdAt": "2020-06-05T04:31:09Z", "path": "core/src/main/java/com/linecorp/armeria/client/Client.java", "diffHunk": "@@ -71,6 +73,7 @@\n      * @see ClientFactory#unwrap(Object, Class)\n      * @see Unwrappable\n      */\n+    @Nullable", "originalCommit": "e02980007790f7ce2223ee349adb2a58790ab78b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTcxMTI3OA==", "url": "https://github.com/line/armeria/pull/2776#discussion_r435711278", "bodyText": "Agreed. I reverted all @Nullable in override methods.", "author": "ikhoon", "createdAt": "2020-06-05T06:18:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY4NDE1Mg=="}], "type": "inlineReview", "revised_code": {"commit": "f773c1bb4177172408ea3fd78aab8ac285114d4b", "chunk": "diff --git a/core/src/main/java/com/linecorp/armeria/client/Client.java b/core/src/main/java/com/linecorp/armeria/client/Client.java\nindex 144063c6dd..fd679055ab 100644\n--- a/core/src/main/java/com/linecorp/armeria/client/Client.java\n+++ b/core/src/main/java/com/linecorp/armeria/client/Client.java\n\n@@ -73,7 +71,6 @@ public interface Client<I extends Request, O extends Response> extends Unwrappab\n      * @see ClientFactory#unwrap(Object, Class)\n      * @see Unwrappable\n      */\n-    @Nullable\n     @Override\n     default <T> T as(Class<T> type) {\n         requireNonNull(type, \"type\");\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY4NDMxOA==", "url": "https://github.com/line/armeria/pull/2776#discussion_r435684318", "bodyText": "How about using assert? It's perhaps a bug if this method is exposed to a user before init() is invoked.", "author": "trustin", "createdAt": "2020-06-05T04:32:01Z", "path": "core/src/main/java/com/linecorp/armeria/client/DefaultClientRequestContext.java", "diffHunk": "@@ -393,11 +393,13 @@ public ClientOptions options() {\n \n     @Override\n     public EndpointGroup endpointGroup() {\n+        checkState(endpointGroup != null, \"Should call init(endpoint) before invoking this method.\");", "originalCommit": "e02980007790f7ce2223ee349adb2a58790ab78b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f773c1bb4177172408ea3fd78aab8ac285114d4b", "chunk": "diff --git a/core/src/main/java/com/linecorp/armeria/client/DefaultClientRequestContext.java b/core/src/main/java/com/linecorp/armeria/client/DefaultClientRequestContext.java\nindex ecacc3f956..2174170b58 100644\n--- a/core/src/main/java/com/linecorp/armeria/client/DefaultClientRequestContext.java\n+++ b/core/src/main/java/com/linecorp/armeria/client/DefaultClientRequestContext.java\n\n@@ -393,13 +393,13 @@ public final class DefaultClientRequestContext\n \n     @Override\n     public EndpointGroup endpointGroup() {\n-        checkState(endpointGroup != null, \"Should call init(endpoint) before invoking this method.\");\n+        assert endpointGroup != null;\n         return endpointGroup;\n     }\n \n     @Override\n     public Endpoint endpoint() {\n-        checkState(endpoint != null, \"Should call init(endpoint) before invoking this method.\");\n+        assert endpoint != null;\n         return endpoint;\n     }\n \n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY4NDQ5Nw==", "url": "https://github.com/line/armeria/pull/2776#discussion_r435684497", "bodyText": "\ud83d\udc4d", "author": "trustin", "createdAt": "2020-06-05T04:32:53Z", "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotationUtil.java", "diffHunk": "@@ -220,14 +220,14 @@\n \n     private static <T extends Annotation> void findMetaAnnotations(\n             Builder<T> builder, Annotation annotation,\n-            Class<T> annotationType, Class<? extends Annotation> containerType) {\n+            Class<T> annotationType, @Nullable Class<? extends Annotation> containerType) {", "originalCommit": "e02980007790f7ce2223ee349adb2a58790ab78b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "f773c1bb4177172408ea3fd78aab8ac285114d4b", "url": "https://github.com/line/armeria/commit/f773c1bb4177172408ea3fd78aab8ac285114d4b", "message": "Apply Nullaway", "committedDate": "2020-06-05T06:15:39Z", "type": "commit"}, {"oid": "f773c1bb4177172408ea3fd78aab8ac285114d4b", "url": "https://github.com/line/armeria/commit/f773c1bb4177172408ea3fd78aab8ac285114d4b", "message": "Apply Nullaway", "committedDate": "2020-06-05T06:15:39Z", "type": "forcePushed"}, {"oid": "37bb2d31a73f68812a09080833f42d3037468034", "url": "https://github.com/line/armeria/commit/37bb2d31a73f68812a09080833f42d3037468034", "message": "Remove cruft", "committedDate": "2020-06-05T06:17:08Z", "type": "commit"}, {"oid": "257fbdbc8e35080c3ee6221b64aceecf10056954", "url": "https://github.com/line/armeria/commit/257fbdbc8e35080c3ee6221b64aceecf10056954", "message": "Revert assert", "committedDate": "2020-06-06T16:26:22Z", "type": "commit"}]}