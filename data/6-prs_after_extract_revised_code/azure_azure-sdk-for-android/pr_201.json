{"pr_number": 201, "pr_title": "User agent interceptor fix", "pr_createdAt": "2020-02-25T21:02:26Z", "pr_url": "https://github.com/Azure/azure-sdk-for-android/pull/201", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEzMzIyNQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#discussion_r384133225", "bodyText": "Made package-private since the unit test class will access this field.", "author": "vcolin7", "createdAt": "2020-02-25T21:21:18Z", "path": "sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java", "diffHunk": "@@ -24,7 +25,8 @@\n  * <a href=\"https://azure.github.io/azure-sdk/general_azurecore.html#telemetry-policy\">Azure Core: Telemetry policy</a>.\n  */\n public class UserAgentInterceptor implements Interceptor {\n-    private static final String USER_AGENT_HEADER = \"User-Agent\";\n+    static final String USER_AGENT_HEADER = \"User-Agent\";", "originalCommit": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c30e48212ec9dcd54b531a9e9d31681d761e05d0", "chunk": "diff --git a/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java b/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java\nindex c79bd7413..09ad755bc 100644\n--- a/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java\n+++ b/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java\n\n@@ -25,8 +24,7 @@ import okhttp3.Response;\n  * <a href=\"https://azure.github.io/azure-sdk/general_azurecore.html#telemetry-policy\">Azure Core: Telemetry policy</a>.\n  */\n public class UserAgentInterceptor implements Interceptor {\n-    static final String USER_AGENT_HEADER = \"User-Agent\";\n-\n+    private static final String USER_AGENT_HEADER = \"User-Agent\";\n     private static final String DEFAULT_USER_AGENT = \"azsdk-android\";\n \n     // From the design guidelines, the default user agent header format is:\n"}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEzMzM1OA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/201#discussion_r384133358", "bodyText": "Renamed in favor of clarity.", "author": "vcolin7", "createdAt": "2020-02-25T21:21:32Z", "path": "sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java", "diffHunk": "@@ -34,7 +36,7 @@\n     // From the design guidelines, the application ID user agent header format is:\n     // [<application_id>] azsdk-android-<client_lib>/<sdk_version> (<platform_info>; <application_info>;\n     // <user_locale_info>\n-    private static final String APPLICATION_ID_USER_AGENT_FORMAT = \"[%s] \" + USER_AGENT_FORMAT;\n+    private static final String USER_AGENT_FORMAT_WITH_APPLICATION_ID = \"[%s] %s\";", "originalCommit": "9b7470aab40f7958e0cf8b8274c6fad92c75b27e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "c30e48212ec9dcd54b531a9e9d31681d761e05d0", "chunk": "diff --git a/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java b/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java\nindex c79bd7413..09ad755bc 100644\n--- a/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java\n+++ b/sdk/core/azure-core/src/main/java/com/azure/android/core/http/interceptor/UserAgentInterceptor.java\n\n@@ -36,7 +34,7 @@ public class UserAgentInterceptor implements Interceptor {\n     // From the design guidelines, the application ID user agent header format is:\n     // [<application_id>] azsdk-android-<client_lib>/<sdk_version> (<platform_info>; <application_info>;\n     // <user_locale_info>\n-    private static final String USER_AGENT_FORMAT_WITH_APPLICATION_ID = \"[%s] %s\";\n+    private static final String APPLICATION_ID_USER_AGENT_FORMAT = \"[%s] \" + USER_AGENT_FORMAT;\n \n     // From the design guidelines, the platform info user agent header format is:\n     // <device_name> - <os_version>\n"}}, {"oid": "c30e48212ec9dcd54b531a9e9d31681d761e05d0", "url": "https://github.com/Azure/azure-sdk-for-android/commit/c30e48212ec9dcd54b531a9e9d31681d761e05d0", "message": "Changed UserAgentInterceptor to show empty strings instead of 'null' when passed a null value for sdkName or sdkVersion.", "committedDate": "2020-03-02T19:33:00Z", "type": "commit"}, {"oid": "0be51492d87ba65a65b00e27f5b5f217eed0d5db", "url": "https://github.com/Azure/azure-sdk-for-android/commit/0be51492d87ba65a65b00e27f5b5f217eed0d5db", "message": "Fixed bug where, when the User-Agent header is already populated, we would not update its value but add a new entry for it in the request instead.", "committedDate": "2020-03-02T19:33:00Z", "type": "commit"}, {"oid": "0b9fe7c75cc7b28769f32c79834b3c3012724081", "url": "https://github.com/Azure/azure-sdk-for-android/commit/0b9fe7c75cc7b28769f32c79834b3c3012724081", "message": "Modified the UserAgentInterceptor to trim and truncate the user-provided applicationId as specified in the design guidelines.", "committedDate": "2020-03-02T19:33:00Z", "type": "commit"}, {"oid": "0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "url": "https://github.com/Azure/azure-sdk-for-android/commit/0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "message": "Small change to import CoreUtils.isNullOrEmpty()", "committedDate": "2020-03-02T19:33:00Z", "type": "commit"}, {"oid": "0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "url": "https://github.com/Azure/azure-sdk-for-android/commit/0358f52b6749d8d8b330e1b0e4a8a0bb35b43669", "message": "Small change to import CoreUtils.isNullOrEmpty()", "committedDate": "2020-03-02T19:33:00Z", "type": "forcePushed"}]}