{"pr_number": 478, "pr_title": "Operational metrics for 128GB heap decider components", "pr_createdAt": "2020-10-17T01:53:33Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/478", "timeline": [{"oid": "81dcd301b85f30dc3dbf0a82e4f49d1619aff6ce", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/81dcd301b85f30dc3dbf0a82e4f49d1619aff6ce", "message": "Add operational metrics to heap size increase policy", "committedDate": "2020-10-17T01:04:10Z", "type": "commit"}, {"oid": "ad5d1606c8ad66e211c31633f9c150cbad523fc9", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/ad5d1606c8ad66e211c31633f9c150cbad523fc9", "message": "Added a TODO for the div by zero return case", "committedDate": "2020-10-17T01:48:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4MDMwOQ==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/478#discussion_r507980309", "bodyText": "Name this one something different so we can tell it apart from line 81", "author": "sidheart", "createdAt": "2020-10-19T18:39:31Z", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/OldGenRca.java", "diffHunk": "@@ -100,6 +104,7 @@ protected int getFullGcEventsOrDefault(final double defaultValue) {\n \n   protected double getOldGenUsedOrDefault(final double defaultValue) {\n     if (heap_Used == null) {\n+      StatsCollector.instance().logException(StatExceptionCode.MISCONFIGURED_OLD_GEN_RCA);", "originalCommit": "ad5d1606c8ad66e211c31633f9c150cbad523fc9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMzMzg4MQ==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/478#discussion_r508333881", "bodyText": "I thought one sparse metric was enough. Added them still, just to avoid confusion.", "author": "ktkrg", "createdAt": "2020-10-20T09:05:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4MDMwOQ=="}], "type": "inlineReview", "revised_code": {"commit": "037b5f3232d69e97bf99ba296e6dd26370115213", "chunk": "diff --git a/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/OldGenRca.java b/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/OldGenRca.java\nindex dc2f6fdc..aa32077a 100644\n--- a/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/OldGenRca.java\n+++ b/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/OldGenRca.java\n\n@@ -104,7 +104,7 @@ public abstract class OldGenRca<T extends ResourceFlowUnit<?>> extends Rca<T> {\n \n   protected double getOldGenUsedOrDefault(final double defaultValue) {\n     if (heap_Used == null) {\n-      StatsCollector.instance().logException(StatExceptionCode.MISCONFIGURED_OLD_GEN_RCA);\n+      StatsCollector.instance().logException(StatExceptionCode.MISCONFIGURED_OLD_GEN_RCA_HEAP_USED_MISSING);\n       throw new IllegalStateException(\"RCA: \" + this.name() + \"was not configured in the graph to \"\n           + \"take heap_Used as a metric. Please check the analysis graph!\");\n     }\n"}}, {"oid": "037b5f3232d69e97bf99ba296e6dd26370115213", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/037b5f3232d69e97bf99ba296e6dd26370115213", "message": "Split metric into three", "committedDate": "2020-10-20T09:04:10Z", "type": "commit"}]}