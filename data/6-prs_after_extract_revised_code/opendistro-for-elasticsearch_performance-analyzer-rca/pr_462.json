{"pr_number": 462, "pr_title": "Add operational metrics for batch metrics api", "pr_createdAt": "2020-10-09T21:35:07Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4MzAzMw==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#discussion_r502683033", "bodyText": "Can we use the new format ?\nFor an example please see this", "author": "yojs", "createdAt": "2020-10-09T21:40:57Z", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/collectors/StatExceptionCode.java", "diffHunk": "@@ -45,6 +45,8 @@\n   RCA_SCHEDULER_THREAD_STOPPED(\"RcaSchedulerThreadStopped\"),\n   JVM_THREAD_ID_NO_LONGER_EXISTS(\"JVM_THREAD_ID_NO_LONGER_EXISTS\"),\n   ES_REQUEST_INTERCEPTOR_ERROR(\"ES_REQUEST_INTERCEPTOR_ERROR\"),\n+  METRICSDB_ACCESS_ERROR(\"METRICSDB_ACCESS_ERROR\"),\n+  EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS(\"EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS\"),", "originalCommit": "b677d2a3a15cd764e526435404522c768236a0af", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "10f05fb960c0294c686d1c6d43f5c97a8d979b26", "chunk": "diff --git a/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/collectors/StatExceptionCode.java b/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/collectors/StatExceptionCode.java\nindex 01f57ea3..2485a29f 100644\n--- a/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/collectors/StatExceptionCode.java\n+++ b/src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/collectors/StatExceptionCode.java\n\n@@ -45,8 +45,6 @@ public enum StatExceptionCode {\n   RCA_SCHEDULER_THREAD_STOPPED(\"RcaSchedulerThreadStopped\"),\n   JVM_THREAD_ID_NO_LONGER_EXISTS(\"JVM_THREAD_ID_NO_LONGER_EXISTS\"),\n   ES_REQUEST_INTERCEPTOR_ERROR(\"ES_REQUEST_INTERCEPTOR_ERROR\"),\n-  METRICSDB_ACCESS_ERROR(\"METRICSDB_ACCESS_ERROR\"),\n-  EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS(\"EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS\"),\n   OTHER(\"Other\");\n \n   private final String value;\n"}}, {"oid": "10f05fb960c0294c686d1c6d43f5c97a8d979b26", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/10f05fb960c0294c686d1c6d43f5c97a8d979b26", "message": "Add operational metrics for batch metrics api\n\n* READER_METRICSDB_ACCESS_ERRORS: errors accessing metricsdb files\n* METRICSDB_FILE_SIZE: size of generated metricsdb files\n* BATCH_METRICS_ENABLED: whether or not batch metrics is enabled\n* BATCH_METRICS_HTTP_CLIENT_ERROR: number of bad batch metrics requests\n* BATCH_METRICS_HTTP_HOST_ERROR: number of batch metrics requests where\n    the host ran into errors\n* BATCH_METRICS_HTTP_SUCCESS: number of successful batch metrics\n    requests\n* BATCH_METRICS_EXCEEDED_MAX_DATAPOINTS: requests where the user\n    requested for more datapoints than the hardcoded limit of 100800\n* BATCH_METRICS_QUERY_PROCESSING_TIME: amount of time required to\n    process batch metrics requests\n* BATCH_METRICS_NUM_METRICSDB_FILES: number of metricsdb files within\n    the batch metrics retention period\n* BATCH_METRICS_DATA_SIZE: amount of data batch metrics is storing", "committedDate": "2020-10-12T22:08:35Z", "type": "commit"}, {"oid": "c54bd56f96b03a62a42d218a54f5754479c9e041", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/c54bd56f96b03a62a42d218a54f5754479c9e041", "message": ".", "committedDate": "2020-10-12T21:54:02Z", "type": "forcePushed"}, {"oid": "10f05fb960c0294c686d1c6d43f5c97a8d979b26", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/10f05fb960c0294c686d1c6d43f5c97a8d979b26", "message": "Add operational metrics for batch metrics api\n\n* READER_METRICSDB_ACCESS_ERRORS: errors accessing metricsdb files\n* METRICSDB_FILE_SIZE: size of generated metricsdb files\n* BATCH_METRICS_ENABLED: whether or not batch metrics is enabled\n* BATCH_METRICS_HTTP_CLIENT_ERROR: number of bad batch metrics requests\n* BATCH_METRICS_HTTP_HOST_ERROR: number of batch metrics requests where\n    the host ran into errors\n* BATCH_METRICS_HTTP_SUCCESS: number of successful batch metrics\n    requests\n* BATCH_METRICS_EXCEEDED_MAX_DATAPOINTS: requests where the user\n    requested for more datapoints than the hardcoded limit of 100800\n* BATCH_METRICS_QUERY_PROCESSING_TIME: amount of time required to\n    process batch metrics requests\n* BATCH_METRICS_NUM_METRICSDB_FILES: number of metricsdb files within\n    the batch metrics retention period\n* BATCH_METRICS_DATA_SIZE: amount of data batch metrics is storing", "committedDate": "2020-10-12T22:08:35Z", "type": "forcePushed"}, {"oid": "a96338507f0c25b00ee7003ee3166d532b86cfb6", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/a96338507f0c25b00ee7003ee3166d532b86cfb6", "message": "Fix checkstyle issue", "committedDate": "2020-10-12T22:35:06Z", "type": "commit"}]}